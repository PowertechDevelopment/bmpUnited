"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="445b7b6c-9854-5e86-a4ac-6bf6fc74338f")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5439],{986116:(e,r,n)=>{r.D0=r.Xd=void 0,n(44141),n(202398);var a=n(938427);Object.defineProperty(r,"Xd",{enumerable:!0,get:function(){return a.createKiwiCodec}}),n(661222),n(983480),n(931508),n(750348);var i=n(735470);Object.defineProperty(r,"D0",{enumerable:!0,get:function(){return i.parseSchema}}),n(433341)},401193:(e,r,n)=>{n.d(r,{Ck:()=>m,FM:()=>y,LC:()=>_,LO:()=>h,P2:()=>f,Qs:()=>i,Sp:()=>E,W:()=>c,YE:()=>d,e1:()=>g,eJ:()=>s,eW:()=>u,iU:()=>o,tp:()=>p,zc:()=>l,zr:()=>a});let a="banner-module--root--RmVIs",i="banner-module--content--1lltJ",o="banner-module--message--D9xt1",s="banner-module--messageTitle--HBn2M utilities--bodyMediumStrong--1R5cZ",l="banner-module--iconContainer--oiMtq",c="banner-module--fullWidthType--n4D7k",d="banner-module--closeWrapper--R1mnt",u="banner-module--inlineType--TQYq-",m="banner-module--informationalType--hTp4Y",p="banner-module--defaultVariant--7m-R5",h="banner-module--brandVariant--QEMmV",_="banner-module--insetModalType--oy3CX",g="banner-module--insetType--dANvB",f="banner-module--dangerVariant--7yes8",E="banner-module--warnVariant--guLYi",y="banner-module--successVariant--483Xi"},397192:(e,r,n)=>{n.d(r,{$y:()=>m,Bb:()=>w,ER:()=>N,Ed:()=>E,Et:()=>i,I1:()=>f,Jo:()=>h,K6:()=>C,M7:()=>a,N5:()=>_,Nd:()=>s,O2:()=>I,Qv:()=>g,Uu:()=>d,W:()=>l,Xq:()=>y,aK:()=>c,cc:()=>v,i9:()=>u,iv:()=>b,jg:()=>S,kH:()=>A,li:()=>o,nm:()=>T,uD:()=>p});let a="org_self_serve_figjam--stepContent--sL7gc",i="org_self_serve_figjam--stepContentTeamCreation--aaY9V",o="org_self_serve_figjam--menuContainer--hPrPq",s="org_self_serve_figjam--cancelMenuItem--ZABKH",l="org_self_serve_figjam--pageTitle--Y69Xv",c="org_self_serve_figjam--summaryDivider--Ijd9-",d="org_self_serve_figjam--flex--0m89h",u="org_self_serve_figjam--svgText--d7FBP org_self_serve_figjam--flex--0m89h",m="org_self_serve_figjam--helpIcon--VL26R",p="org_self_serve_figjam--textLink--eCcAk org_self_serve_figjam--billingSubText--tlSbP",h="org_self_serve_figjam--confirmationBox--Z-OCC org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM",_="org_self_serve_figjam--flexBox--3nRDc",g="org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",f="org_self_serve_figjam--confirmationCharge--6L8US org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",E="org_self_serve_figjam--confirmationRow--qQLOY",y="org_self_serve_figjam--confirmationHomeButton--NMBxx text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",b="org_self_serve_figjam--confirmationAmountDue--p0xPk",v="org_self_serve_figjam--confirmationHeading--SQiqP",T="org_self_serve_figjam--confirmationLoadingText--CTID2 org_self_serve_figjam--msaLabelText--r7LKd",I="org_self_serve_figjam--greenCheck--NXjmx",S="org_self_serve_figjam--confirmationPage--KGVNA",w="org_self_serve_figjam--createTeamContainer--D3kS-",A="org_self_serve_figjam--teamsContainer---d-jS",C="org_self_serve_figjam--teamCheckboxContainer--nXQyM",N="org_self_serve_figjam--selectTeamsIcon--W96qS"},962185:(e,r,n)=>{n.d(r,{F0:()=>c,Fb:()=>o,N6:()=>a,Nd:()=>i,Pr:()=>d,Zy:()=>u,b0:()=>s,eA:()=>l,x:()=>m});let a="team_upgrade_v2--breadCrumbsMenuContainer--dvekb",i="team_upgrade_v2--cancelMenuItem--2RsWk",o="team_upgrade_v2--stepTitle--4NAuW",s="team_upgrade_v2--stepSubtitle--YyFvT",l="team_upgrade_v2--createTeamButton--F2nsr",c="team_upgrade_v2--createTeamNameInput--BvH1V",d="team_upgrade_v2--createTeamIcon--27Mtz",u="team_upgrade_v2--createTeamTextInput--qXTZr",m="team_upgrade_v2--createTeamUpgradeExisting--Vjzv8"},756012:(e,r,n)=>{n.d(r,{cG:()=>a,hz:()=>i});let a="members_table--lockedAccountType--nlQJ4 members_table--columnMargin--tcfqd",i="members_table--lockIcon--OxTzh"},751580:(e,r,n)=>{n.d(r,{C2:()=>m,Ec:()=>_,Gu:()=>o,Kk:()=>i,Pv:()=>a,QL:()=>d,Qu:()=>s,T:()=>l,Vr:()=>p,Xu:()=>u,YM:()=>g,ed:()=>y,g2:()=>h,iU:()=>c,lK:()=>f,q3:()=>b,zc:()=>E});let a="resource_connect_modal--urlValidation--CSB3V",i="resource_connect_modal--icon--L6BIW",o="resource_connect_modal--urlValidationLeft--0SSFc",s="resource_connect_modal--urlValidationText--J5OBw",l="resource_connect_modal--urlErrorText--a0oW-",c="resource_connect_modal--message--ICAf8",d="resource_connect_modal--inputs---DKiP",u="resource_connect_modal--inputError--aiMql resource_connect_modal--inputs---DKiP",m="resource_connect_modal--learnMore--4VxkZ modal--blueLink--9GcJu blue_link--blueLink--9rlnd",p="resource_connect_modal--actionStrip--Iy3mR",h="resource_connect_modal--titleWithArrow--wTLNS",_="resource_connect_modal--planRow--usTcI",g="resource_connect_modal--timestampInfoContainer--S5Sbh",f="resource_connect_modal--settingsOption--MadGc",E="resource_connect_modal--iconContainer--eFuiE",y="resource_connect_modal--optionLabel--t4Y1C",b="resource_connect_modal--optionDescription--FzyId"},168984:(e,r,n)=>{},986561:(e,r,n)=>{n.d(r,{RS:()=>s,Ys:()=>l,_U:()=>i,p$:()=>a,yd:()=>o});let a="team_tile--emptyState--V-Q4V tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd",i="team_tile--emptyTitle--eXex6 tiles_view--emptyTitle--3Vwmu",o="team_tile--emptyButton--gQB5Q tiles_view--emptyButton--oAaGe",s="team_tile--newTeamIcon--7eANI tiles_view--newFileIcon--LR1sm",l="team_tile--joinSpinner--w04qe"},924541:(e,r,n)=>{n.d(r,{CZ:()=>c,Qp:()=>l,RF:()=>i,RL:()=>p,hv:()=>a,kz:()=>h,nv:()=>m,qE:()=>d,qS:()=>u,uj:()=>o,yu:()=>s});let a="base_badge--backgroundLight--agxeS",i="base_badge--backgroundWarning--i7d2I",o="base_badge--backgroundWhite--ZqZgN",s="base_badge--borderStrong--makDy",l="base_badge--height24--PMSUp text--fontPos11--2LvXf text--_fontBase--QdLsd",c="base_badge--heightSixteen--BEJT8 text--fontPos9--naThA text--_fontBase--QdLsd",d="base_badge--badgeIconContainer--Gu5zx",u="base_badge--badge--cbfYy base_badge--backgroundLight--agxeS",m="base_badge--badgeContentContainerWithIcon--ECslI",p="base_badge--badgeTooltip--Qz3RM",h="base_badge--tooltipLink--KpcPS"},463974:(e,r,n)=>{n.d(r,{$c:()=>p,BN:()=>l,BQ:()=>o,JM:()=>s,Sl:()=>a,XO:()=>d,ZW:()=>u,nJ:()=>c,u1:()=>h,wr:()=>i,zA:()=>m});let a="feed_page--hubFile--uHbnb feed_page--resourceLinkTag--5KQz7",i="feed_page--prototypeIcon--JlZyq",o="feed_page--tileUpperLeftWrapper--mwqC-",s="feed_page--tileEditorIcon--ymAxC",l="feed_page--resourcePreview--IePch",c="feed_page--redesignedResourcePreview--MjW2w",d="feed_page--resourcePreviewContentWrapper--H1eHK",u="feed_page--resourcePreviewContentWrapperFigJamDots---54d- feed_page--resourcePreviewContentWrapper--H1eHK",m="feed_page--resourcePreviewContentWrapperThumbnailSet--QlsAU feed_page--resourcePreviewContentWrapper--H1eHK",p="feed_page--resourcePreviewContentWrapperRadiusCursorOverride--kfxmj",h="feed_page--spinner--Z0jz3"},878762:(e,r,n)=>{n.d(r,{avatar:()=>u,genericSelectorExternalTeamsIcon:()=>c,genericSelectorInner:()=>s,genericSelectorModal:()=>o,genericSelectorModalCancel:()=>l,modal:()=>a,modalBackdrop:()=>i,workspaceSelectorModal:()=>m,workspaceSelectorModalInner:()=>p,workspaceTitleWrapper:()=>d});let a="index--modal--vmXNN",i="index--modalBackdrop--VqLCO",o="index--genericSelectorModal--3aSLC index--modalBackdrop--VqLCO text--fontPos13--xW8hS text--_fontBase--QdLsd",s="index--genericSelectorInner--HBJH2",l="index--genericSelectorModalCancel--WOjxG",c="index--genericSelectorExternalTeamsIcon--KL8jt",d="index--workspaceTitleWrapper--e9YT2",u="index--avatar--nIkKj",m="index--workspaceSelectorModal--KqRLO index--modalBackdrop--VqLCO",p="index--workspaceSelectorModalInner--6wXm6 index--genericSelectorInner--HBJH2"},547106:(e,r,n)=>{},157544:(e,r,n)=>{},604294:(e,r,n)=>{n.d(r,{Jm:()=>o,UD:()=>a,zr:()=>i});let a="blocking_modal--buttonContainer--HB2rf",i="blocking_modal--secondaryButton--cteqp",o="blocking_modal--buttonLabel--92cjn"},589781:(e,r,n)=>{n.d(r,{$J:()=>p,Az:()=>d,Hx:()=>i,Pl:()=>f,Wy:()=>a,Yg:()=>s,_D:()=>h,au:()=>_,bO:()=>g,ce:()=>l,fe:()=>m,ik:()=>o,oK:()=>c,y3:()=>u});let a="dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",i="dragging_resource--resizingDraggingLibraryItem--h5-J0 dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",o="dragging_resource--draggingFragment--ckSxw dragging_resource--_draggingResource--RyWym",s="dragging_resource--isDraggingOverCanvas--PgYby",l="dragging_resource--isDraggingLibraryItemOverCanvas---q3C7 dragging_resource--isDraggingOverCanvas--PgYby",c="dragging_resource--isDraggingFragmentOverCanvas--JzTDI dragging_resource--isDraggingOverCanvas--PgYby",d="dragging_resource--draggingWidget--t0JuE dragging_resource--_draggingResource--RyWym",u="dragging_resource--draggingTemplate--q-s5W dragging_resource--_draggingResource--RyWym",m="dragging_resource--draggingPlugin--krda0 dragging_resource--_draggingResource--RyWym",p="dragging_resource--draggingFace--3qq2- dragging_resource--_draggingResource--RyWym",h="dragging_resource--draggingTool--zfhjm dragging_resource--_draggingResource--RyWym",_="dragging_resource--draggingLibraryItemList--Cuvnd dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",g="dragging_resource--draggingLibraryItemListName--kNTa4 ellipsis--ellipsis--Tjyfa",f="dragging_resource--expandAnimation--4FamY"},944657:(e,r,n)=>{n.d(r,{RG:()=>a,bv:()=>s,dO:()=>o,ue:()=>i});let a="multiplayer_onboarding--contentNudge--KflAC",i="multiplayer_onboarding--footerContainerNudge--nBkOA",o="multiplayer_onboarding--footerButtonNudge--4CJm-",s="multiplayer_onboarding--boldText--c42DO"},164865:(e,r,n)=>{},982703:(e,r,n)=>{n.d(r,{$M:()=>i,Bi:()=>v,Fb:()=>h,Fl:()=>c,J7:()=>S,JQ:()=>P,KR:()=>l,Kb:()=>f,MP:()=>A,Nv:()=>N,Q3:()=>D,RR:()=>m,Sp:()=>C,Tz:()=>u,Vl:()=>s,cO:()=>o,cf:()=>x,cu:()=>g,dL:()=>b,g:()=>O,gW:()=>U,gf:()=>k,h1:()=>V,hI:()=>M,i2:()=>R,ii:()=>a,iz:()=>d,kU:()=>I,o6:()=>y,pB:()=>T,vG:()=>E,wH:()=>B,wp:()=>p,xB:()=>F,xc:()=>_,xm:()=>L,yZ:()=>w});let a="community_cards--cardLayoutContainer--nPcgb",i="community_cards--cardSubtitleRowSizing--9WRul",o="community_cards--cardBottomRowSizing--sT6xQ",s="community_cards--cardImageContainer--8ngfu base_community_cards--base_cardImageContainer--jpAKE base_community_cards--_hasBorder--kFIag",l="community_cards--cardHover_TopLeft--yGcAk",c="community_cards--cardBottomRow_MetadataContainer--QLUfh",d="community_cards--cardBottomRow_Metadata_HoverText--McZzP",u="community_cards--cardBottomRow_Metadata_HoverText_AnimateHeight--4wdBR community_cards--cardBottomRow_Metadata_HoverText--McZzP",m="community_cards--cardBottomRow_Metadata_AuthorName_WithHoverText--GJXdW",p="community_cards--cardBottomRowAvatarDropdown--2uCLR",h="community_cards--cardBottomRow_Metadata_AvatarContainer--6-CIe",_="community_cards--cardBottomRow_Metadata_TextContainer--ewZLG",g="community_cards--cardBottomRow_Metadata_PrimaryText--tktO3 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="community_cards--base_cardBottomRow_Metadata_SecondaryText---Tn2M text--fontPos11--2LvXf text--_fontBase--QdLsd",E="community_cards--cardBottomRow_Metadata_AuthorName_WithDropdown--Fk7tl",y="community_cards--cardBottomRow_ResourceActionContainer--hgEhI",b="community_cards--cardBottomRow_ResourceActionButton--v146M",v="community_cards--cardHover_Center--hzP7R community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",T="community_cards--cardHover_Cover--kIVQS community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",I="community_cards--cardHover_BottomLeft--XlAgk community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",S="community_cards--cardHover_BottomRight--5So4- community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",w="community_cards--publisherDropdown--m7Bx2",A="community_cards--publisherDropdownContent_Row--iIBB3",C="community_cards--publisherDropdownContent_Row_Text--7hDpO text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",N="community_cards--creatorPreviewDummySpace_Name--fb75z",L="community_cards--creatorPreviewDummySpace_Avatar--LLBj8",O="community_cards--figjamTileMeta--Sh90c",R="community_cards--figjamTextMetadataCaret--bqK8s",P="community_cards--figjamMetadataContainer--4kXQt",D="community_cards--defaultCursor--K5TUO",k="community_cards--figjamTextMetadataContainer--LBupv",M="community_cards--figjamTextMetadataContainerFull--VPsvv",F="community_cards--figjamTextMetadataLockIcon--yazii",x="community_cards--figjamTextMetadataErrorContainer--XDHyT",U="community_cards--figjamTextMetadataName--wP7vv text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",B="community_cards--subtextDetails--2-EUq",V="community_cards--subtextPublishers--BR4-w ellipsis--ellipsis--Tjyfa"},353459:(e,r,n)=>{n.d(r,{K8:()=>a});let a="hub_file_viewer--zoomDropdownKeyboardShortcut--uixb-"},996098:(e,r,n)=>{n.d(r,{GC:()=>u,PJ:()=>d,Rt:()=>v,SL:()=>g,Tm:()=>E,Uz:()=>_,Vg:()=>s,Yk:()=>p,ZF:()=>f,aq:()=>l,bx:()=>h,g4:()=>a,g8:()=>i,i3:()=>y,jG:()=>m,qc:()=>b,qr:()=>c,vu:()=>o});let a="universal_posting_modal--loadingContainer--5giX-",i="universal_posting_modal--modalClose--eqgHH",o="universal_posting_modal--playgroundtoolbar--62laP",s="universal_posting_modal--grid--Jdvpe",l="universal_posting_modal--previewModal--XtKWL universal_posting_modal--modalBase--HkH3v",c="universal_posting_modal--footer--A-QeR",d="universal_posting_modal--footerText--Pp0H1 universal_posting_modal--_userSelectNone--dHUZk",u="universal_posting_modal--buttonGroup--C-atN",m="universal_posting_modal--scrollContainer--YtNZ-",p="universal_posting_modal--workspaceBarContainer--VHcn1",h="universal_posting_modal--desktopMessageContainer--QXif3 text--fontPos16--oMC-G text--_fontBase--QdLsd",_="universal_posting_modal--desktopMessageTitle--3XDQ-",g="universal_posting_modal--desktopMessageSubTitle--UGHlr",f="universal_posting_modal--searchQuery--07ulH",E="universal_posting_modal--universalPostingSearchContainer--BFSZI",y="universal_posting_modal--xIcon--9icra",b="universal_posting_modal--searchIcon--r7rXz search--searchIconBrowseIA--WYUGA search--searchIcon--0Agiv",v="universal_posting_modal--searchInput--fTx57 search--communityLandingSearchInput--Mtiu3 search--searchInput__OLD--m2Hef text--fontPos13--xW8hS text--_fontBase--QdLsd text--fontPos14--OL9Hp text--_fontBase--QdLsd"},893804:(e,r,n)=>{n.d(r,{G9:()=>s,Kf:()=>a,Tg:()=>i,gL:()=>o,vI:()=>l});let a="edit_component_prop_picker--inputContainer--B8MrR",i="edit_component_prop_picker--textArea--SQ8dT edit_component_prop_picker--baseInput--xQ5tc raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u sf_pro--uiFontWithSFProFallback--m-p9V",o="edit_component_prop_picker--variableBoundInputContainer--BVQ2Q",s="edit_component_prop_picker--detachButton--mHZfV",l="edit_component_prop_picker--booleanCellOverride--F9fS2"},254354:(e,r,n)=>{n.r(r),n.d(r,{_thumbnailBase:()=>f,buttons:()=>l,contextMenu:()=>T,fieldContainer:()=>o,fieldContainerFaded:()=>s,gridContainer:()=>h,label:()=>a,learnMore:()=>i,listContainer:()=>p,listItemContainer:()=>_,listItemRemoveButton:()=>g,offlineIcon:()=>P,outerContainer:()=>c,outerContainerBorderBottom:()=>d,publishCTA:()=>A,scrollContainer_grid:()=>m,scrollContainer_list:()=>u,skeletonText:()=>R,skeletonThumbnailGrid:()=>O,skeletonThumbnailList:()=>L,thumbnailGrid:()=>y,thumbnailGridBase:()=>E,thumbnailList:()=>v,thumbnailListBase:()=>b,tryAgain:()=>D,trying:()=>k,warning:()=>I,warningIcon:()=>C,warningIconList:()=>N,warningOfflineContainer:()=>S,warningPublish:()=>w});let a="preferred_values_instance_picker--label--to5M3",i="preferred_values_instance_picker--learnMore--zD-c7",o="preferred_values_instance_picker--fieldContainer--JJx3j",s="preferred_values_instance_picker--fieldContainerFaded--Z8-Oj preferred_values_instance_picker--fieldContainer--JJx3j",l="preferred_values_instance_picker--buttons---ohnK",c="preferred_values_instance_picker--outerContainer---jRbV",d="preferred_values_instance_picker--outerContainerBorderBottom--eh6jg preferred_values_instance_picker--outerContainer---jRbV",u="preferred_values_instance_picker--scrollContainer_list--kaH92",m="preferred_values_instance_picker--scrollContainer_grid--8kvKL",p="preferred_values_instance_picker--listContainer--BPie-",h="preferred_values_instance_picker--gridContainer--2LTF6",_="preferred_values_instance_picker--listItemContainer--a4t-g",g="preferred_values_instance_picker--listItemRemoveButton--HO05L",f="preferred_values_instance_picker--_thumbnailBase--eAxDp",E="preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",y="preferred_values_instance_picker--thumbnailGrid--XHfz- preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp drilldown_item--_thumbnailContainer--kDsBt",b="preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",v="preferred_values_instance_picker--thumbnailList--nGJE1 drilldown_item--_thumbnailContainer--kDsBt preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",T="preferred_values_instance_picker--contextMenu--qSN6X",I="preferred_values_instance_picker--warning--bgA-c",S="preferred_values_instance_picker--warningOfflineContainer--9BcdC",w="preferred_values_instance_picker--warningPublish--fB8Mq preferred_values_instance_picker--warning--bgA-c",A="preferred_values_instance_picker--publishCTA--FlNCB",C="preferred_values_instance_picker--warningIcon--2TXXz",N="preferred_values_instance_picker--warningIconList--aDgpb preferred_values_instance_picker--warningIcon--2TXXz",L="preferred_values_instance_picker--skeletonThumbnailList--sAAp7 preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",O="preferred_values_instance_picker--skeletonThumbnailGrid--UVfqq preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",R="preferred_values_instance_picker--skeletonText--YCONM",P="preferred_values_instance_picker--offlineIcon--4JDDc",D="preferred_values_instance_picker--tryAgain--UNg1i",k="preferred_values_instance_picker--trying--HmoFd"},184037:(e,r,n)=>{n.d(r,{Dt:()=>o,K8:()=>a,Zh:()=>i,c6:()=>s,e:()=>l});let a="prop_assignment_row--variantPillContainer--I73vy",i="prop_assignment_row--bindingIcon--EAEMs",o="prop_assignment_row--selectedIcon--8fypm",s="prop_assignment_row--ui3ShowOnRowHover---TwLe",l="prop_assignment_row--ui3SelectedIcon--Opfq2"},57200:(e,r,n)=>{n.d(r,{Gp:()=>g,NJ:()=>l,QK:()=>p,UV:()=>i,V:()=>d,WC:()=>u,Ww:()=>m,_o:()=>a,dc:()=>_,kL:()=>s,mh:()=>o,r9:()=>h,sC:()=>f,xn:()=>c});let a="scrubbable_control--scrubCursorSvg--pav0z",i="scrubbable_control--containerInLiveScrub--P5bqH",o="scrubbable_control--scrubbingDisabled--TDxTX",s="scrubbable_control--container--Y1X4e",l="scrubbable_control--noScrubCursor--xmhcD",c="scrubbable_control--containerBordered--Pq8Lq raw_components--borderFocusWithin--BaipZ scrubbable_control--container--Y1X4e",d="scrubbable_control--noIconInputSpacer--IE5yD",u="scrubbable_control--flushLeft--3jk-p",m="scrubbable_control--inputNarrow--BHcl-",p="scrubbable_control--inactiveLabel--qI8ZV",h="scrubbable_control--disabled--vp-59",_="scrubbable_control--disableHoverBorder--y5AhV",g="scrubbable_control--variableControl--DqEyP",f="scrubbable_control--scrubbableInput--Sv3BW"},519845:(e,r,n)=>{n.d(r,{P:()=>a});let a="feature_callout--featureCallout---qPZ7"},822643:(e,r,n)=>{n.d(r,{kL:()=>a});let a="footer_banner--container--HxFNE"},653898:(e,r,n)=>{n.d(r,{B8:()=>c,BN:()=>s,Hi:()=>a,_K:()=>i,rH:()=>d,u$:()=>o,uu:()=>l});let a="fullscreen_accessibility_tree--debugModeNode--aGne7",i="fullscreen_accessibility_tree--debugModeNodeTransition--PP1HR",o="fullscreen_accessibility_tree--debugModeNodeRender1--sOwjz fullscreen_accessibility_tree--debugModeNode--aGne7",s="fullscreen_accessibility_tree--debugModeNodeRender2--d5GgH fullscreen_accessibility_tree--debugModeNode--aGne7",l="fullscreen_accessibility_tree--debugModeNodeRender3--ferOf fullscreen_accessibility_tree--debugModeNode--aGne7",c="fullscreen_accessibility_tree--debugModeNodeRender4--fiCWb fullscreen_accessibility_tree--debugModeNode--aGne7",d="fullscreen_accessibility_tree--node--WGNTu"},312243:(e,r,n)=>{n.d(r,{Kt:()=>c,LE:()=>s,NV:()=>l,Qq:()=>d,l8:()=>i,ro:()=>o,zc:()=>a});let a="action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",i="action_option--checkMarkContainer--hq6Bt action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",o="action_option--rightIconContainer--rTqI4",s="action_option--shortcut--w0R75 action_option--rightIconContainer--rTqI4",l="action_option--optionContainer--ru4UN",c="action_option--optionContainerLimitWidth--aaElZ",d="action_option--text--fSMIm"},418629:(e,r,n)=>{n.d(r,{Kn:()=>l,P3:()=>m,VO:()=>s,Xu:()=>d,hr:()=>c,i3:()=>p,ig:()=>i,kG:()=>u,q_:()=>o,vi:()=>a});let a="attachment--thumbnailButton--CfAkK",i="attachment--selectedThumbnailButton--x2RnD attachment--thumbnailButton--CfAkK",o="attachment--thumbnailImage--Jx4fa",s="attachment--lightOverlay--F8qzZ attachment--overlay--dIw1C",l="attachment--publishedThumbnailContainer--oFj0f",c="attachment--pendingThumbnailContainer--iL-xu",d="attachment--darkOverlay--l3K9x attachment--overlay--dIw1C",u="attachment--composerContainer--mP7Kx",m="attachment--deleteBadge--9aSjm",p="attachment--xIcon--hhlua"},518692:(e,r,n)=>{n.d(r,{$S:()=>c,Du:()=>S,F7:()=>o,GI:()=>b,In:()=>I,KK:()=>L,Lo:()=>_,MJ:()=>g,OM:()=>h,Qq:()=>A,SD:()=>P,UR:()=>s,VM:()=>l,WJ:()=>O,WO:()=>w,YD:()=>C,aW:()=>R,eX:()=>i,ex:()=>N,g2:()=>v,k8:()=>f,lo:()=>E,wC:()=>m,wG:()=>d,wb:()=>u,xH:()=>y,xS:()=>a,xe:()=>p,zl:()=>T});let a="thread_comment--threadHeaderLeft--gppoV thread_comment--_threadHeader--59aR8",i="thread_comment--threadHeaderRight--1gMsu thread_comment--_threadHeader--59aR8",o="thread_comment--threadHeaderContainer--0TaTS",s="thread_comment--threadHeaderButton--psBeY",l="thread_comment--threadHeaderButtonInactive--LhTNi",c="thread_comment--addReactionButton--n1Dj5",d="thread_comment--loader--GUeJt",u="thread_comment--threadContainer--oH8Ia",m="thread_comment--threadContainerCommunityDetailsPage--W6Cmv thread_comment--threadContainer--oH8Ia",p="thread_comment--threadContainerAnimated--OT8HU thread_comment--threadContainer--oH8Ia",h="thread_comment--threadContainerInner--Bzqm7",_="thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",g="thread_comment--threadElementReplyContainer--6vz0m thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",f="thread_comment--threadSubelementNoMargin--aGW6z",E="thread_comment--indentedQuickReplyThreadSubelement--PR9a5 thread_comment--threadSubelementNoMargin--aGW6z",y="thread_comment--quickReplyThreadSubelementNoMargin--MD3aF thread_comment--threadSubelementNoMargin--aGW6z",b="thread_comment--indentedThreadSubelement--gs1fI thread_comment--threadSubelement--7-le3 thread_comment--threadSubelementNoMargin--aGW6z",v="thread_comment--rightJustified--lK8hG",T="thread_comment--leftJustified--HHuN0",I="thread_comment--quickReplyThreadElement--cZUZj thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",S="thread_comment--authorAvatar--xOCLt",w="thread_comment--authorHandle--fmYkb thread_comment--headerLabel--Oq7ar",A="thread_comment--text--FHTSU",C="thread_comment--grayLabel--6ZZkD thread_comment--headerLabel--Oq7ar",N="thread_comment--iconButtonSpace--VkGFf",L="thread_comment--attachmentsContainer--lOeTy",O="thread_comment--reactionsContainer--n2YcQ",R="thread_comment--resolvedIcon--YSM3V",P="thread_comment--loadingAvatar--82RED comment_cluster_elements--loadingSpinner--6derj"},101343:(e,r,n)=>{n.d(r,{Gm:()=>f,MP:()=>h,OX:()=>l,Sg:()=>o,U0:()=>i,bQ:()=>g,fP:()=>a,i8:()=>_,iQ:()=>u,mr:()=>s,o1:()=>E,oD:()=>d,q9:()=>p,uX:()=>m,xu:()=>c});let a="thread_comment_composer--inputSectionWrapper--Bxyab",i="thread_comment_composer--newComment--eYLj7",o="thread_comment_composer--composerEmpty--VgMY7",s="thread_comment_composer--highlighted--GPAOe",l="thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",c="thread_comment_composer--leftComposerButtonGroup--6jQ3I",d="thread_comment_composer--submitUpArrowIcon--e8uT9",u="thread_comment_composer--submitUpArrowIconDisabled--iPBY3 thread_comment_composer--submitUpArrowIcon--e8uT9",m="thread_comment_composer--textButton--GUo5c",p="thread_comment_composer--editSubmitButtons--GyqGL",h="thread_comment_composer--replyComposerContainer---8DSl",_="thread_comment_composer--replyAuthorElement--qze1r",g="thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab",f="thread_comment_composer--errorFallbackNewComment--xlyNp thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab thread_comment_composer--newComment--eYLj7",E="thread_comment_composer--actions--7LRnN"},460945:(e,r,n)=>{},86815:(e,r,n)=>{n.d(r,{sx:()=>a});let a="fullscreen_view--fontsIcon--a4W8y"},682139:(e,r,n)=>{n.d(r,{GM:()=>a});let a="keyboard_shortcut_panel--spacerTab--yNO02"},287072:(e,r,n)=>{n.d(r,{QT:()=>a});let a="component_sidebar_asset_tile--focusableElementWrapper---mXHu"},83798:(e,r,n)=>{n.d(r,{FF:()=>h,GR:()=>m,Ib:()=>_,Ms:()=>l,N4:()=>g,NK:()=>f,OD:()=>y,Ol:()=>C,Tq:()=>S,UA:()=>E,Vk:()=>p,Vs:()=>a,XK:()=>O,Yc:()=>T,aC:()=>A,aS:()=>s,bF:()=>w,bo:()=>i,fh:()=>o,hs:()=>L,nl:()=>c,oV:()=>u,v:()=>I,vZ:()=>b,wi:()=>v,xC:()=>N,yg:()=>d});let a="library_item_tile--tile--okxBn",i="library_item_tile--tileFigJam--BkXTr library_item_tile--tile--okxBn",o="library_item_tile--tileGrid--wgcTu library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",s="library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",l="library_item_tile--tileGridCompact--a7lPd library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",c="library_item_tile--tileList--yPfDI library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",d="library_item_tile--tileListLarge--aoNFs library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",u="library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",m="library_item_tile--thumbAndNameWrapper--FT1HH",p="library_item_tile--thumbAndNameWrapperGrayscale--FGh2L library_item_tile--thumbAndNameWrapper--FT1HH",h="library_item_tile--thumb--MNoWO",_="library_item_tile--thumbWithShadowOnHover--V8LMf library_item_tile--thumb--MNoWO",g="library_item_tile--thumbScaledDown--usdag library_item_tile--thumb--MNoWO",f="library_item_tile--thumbFullPage--ox1s1",E="library_item_tile--nameGrid--rnFsh library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",y="library_item_tile--nameList--ezsvn library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",b="library_item_tile--nameListLarge--5iAF2 library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",v="library_item_tile--thumbWrapper--fmgue library_item_tile--thumbWrapperNoBg--dq7A6",T="library_item_tile--thumbWrapperNoBg--dq7A6",I="library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",S="library_item_tile--thumbWrapperListView--zLZLK library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",w="library_item_tile--variableSetThumb--cCo2-",A="library_item_tile--variableTypeIcon--58dL0",C="library_item_tile--thumbContainer--7rKmQ",N="library_item_tile--numVariants--tOsFg library_item_tile--_numVariantsBase--039pu",L="library_item_tile--numVariantsList--aGNbh library_item_tile--_numVariantsBase--039pu",O="library_item_tile--tileBorder--clelb"},624605:(e,r,n)=>{},965581:(e,r,n)=>{n.d(r,{g_:()=>i,j3:()=>a});let a="inset 0px 0px 0px 0.5px var(--color-border)",i="5px"},940988:(e,r,n)=>{},199979:(e,r,n)=>{n.d(r,{Bj:()=>g,DE:()=>f,Dy:()=>a,Lo:()=>u,S8:()=>l,VW:()=>s,bu:()=>h,hD:()=>E,iU:()=>d,iY:()=>p,or:()=>i,p:()=>_,u0:()=>o,vD:()=>m,z8:()=>c});let a="multiplayer_cursors--cursor--n8aPY",i="multiplayer_cursors--cursorPointer--ya3cR",o="multiplayer_cursors--cursorImage--hYFE4",s="multiplayer_cursors--nameContainer--O1WsV",l="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",c="multiplayer_cursors--isPointingRight--eOPEm",d="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--messageText--jI1cQ",m="multiplayer_cursors--topMessageLine--uwXou",p="multiplayer_cursors--cursorName--i776D",h="multiplayer_cursors--cursorNameSmall--Cy-9n",_="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",g="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",f="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",E="multiplayer_cursors--chatBackground--hGJJf"},983755:(e,r,n)=>{n.d(r,{E7:()=>u,EA:()=>c,EU:()=>d,P0:()=>l,TK:()=>o,V3:()=>a,W5:()=>i,aN:()=>s});let a="object_row--layerIcon--dTOdu",i="object_row--customLayerIcon--SlCXj object_row--layerIcon--dTOdu",o="object_row--customMenuLayerIcon--JK53S object_row--layerIcon--dTOdu",s="object_row--customComponentMenuLayerIcon--SWH-7 object_row--layerIcon--dTOdu",l="object_row--iconWrapper--ivRSW",c="object_row--stickyIconWrapper--UycmN",d="object_row--stickyIconWrapperOutOfView--riwK8",u="object_row--iconOverlay--gPp-S"},574805:(e,r,n)=>{},669846:(e,r,n)=>{n.d(r,{X3:()=>a,f$:()=>i,lo:()=>s,x7:()=>o});let a="chit--chitThumbnail--KxCGp",i="chit--chitAlpha--Mn-aK",o="chit--chit--WdWdx",s="chit--chitBorder--ydYLm"},701838:(e,r,n)=>{n.d(r,{$:()=>T,$f:()=>o,As:()=>g,Bx:()=>I,DQ:()=>L,Gz:()=>d,IX:()=>y,K5:()=>i,LK:()=>C,NC:()=>f,O4:()=>E,Om:()=>s,UU:()=>h,Ul:()=>N,VB:()=>c,ZM:()=>v,bE:()=>A,cZ:()=>l,fz:()=>_,it:()=>w,lF:()=>b,mL:()=>S,n:()=>a,vQ:()=>p,y4:()=>m,yW:()=>u,zz:()=>O});let a="colors_inspect_panel--colorContainer--uDe3T",i="colors_inspect_panel--propertyColorRowTall--5z3CC colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",o="colors_inspect_panel--propertyColorRowTallUI3--UBAV1 colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",s="colors_inspect_panel--propertyColorRowShortUI3--KuuY- colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--basePropertyRow--dLxSz inspect_panels--_basePropertyRow--StmAE",l="colors_inspect_panel--propertyRowTwoColumn--opscx",c="colors_inspect_panel--styleNameRow--RknQ9 inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",d="colors_inspect_panel--paintIcon--MVzOV",u="colors_inspect_panel--paintName--t-J8u text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="colors_inspect_panel--styleNameContainer--HbhgI text--fontPos11--2LvXf text--_fontBase--QdLsd inspect_panels--tallRow--W9eni",p="colors_inspect_panel--styleNameContainerUI3--98G0T",h="colors_inspect_panel--stylePaintRow--5EqOv",_="colors_inspect_panel--gradientPaintRow--CYk-v",g="colors_inspect_panel--paintColor--3DbXu text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa ellipsis--ellipsis--Tjyfa",f="colors_inspect_panel--typeSelect--A0Z4U",E="colors_inspect_panel--typeSelectDropdown--zffDS",y="colors_inspect_panel--colorPanelControls--xeWFU",b="colors_inspect_panel--gradientSingleRow--OZZVn",v="colors_inspect_panel--rowInStyle--DcVuq",T="colors_inspect_panel--gradientVariableSingleRow--Hse0d",I="colors_inspect_panel--deletedIcon--mbkH9",S="colors_inspect_panel--blendModeUI3--NIfqt ellipsis--ellipsis--Tjyfa",w="colors_inspect_panel--variableIndentUI3--xVkgJ",A="colors_inspect_panel--rawColorUI3--1jNdn",C="colors_inspect_panel--rawColorUI3Label--kkgH1 ellipsis--ellipsis--Tjyfa",N="colors_inspect_panel--rawColorUIGradientLabel--dUAE- ellipsis--ellipsis--Tjyfa",L="colors_inspect_panel--rawColorUI3Hoverable--iWU5n",O="colors_inspect_panel--rawColorIndentUI3--BIVFU"},336968:(e,r,n)=>{n.d(r,{DV:()=>p,Dn:()=>u,FL:()=>E,KQ:()=>_,MC:()=>b,N4:()=>m,Om:()=>f,PD:()=>o,VM:()=>v,Y7:()=>h,cL:()=>d,ed:()=>i,gn:()=>s,lN:()=>g,lS:()=>c,l_:()=>T,lo:()=>l,v9:()=>a,yr:()=>y});let a="collapsible_property_panel--showOnTitleHover--yqPoD",i="collapsible_property_panel--panelTitleRowOuter--i5K0R",o="collapsible_property_panel--emptyPanelTitleRowOuter---pBf9 collapsible_property_panel--panelTitleRowOuter--i5K0R",s="collapsible_property_panel--ui3Row--9nUnV collapsible_property_panel--_hoverTarget--eRHji",l="collapsible_property_panel--ui3RowSelected--FZgmc",c="collapsible_property_panel--ui3RowButtons--xHUX3",d="collapsible_property_panel--styleTitle--a7BMw",u="collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",m="collapsible_property_panel--titleButton--7yILK",p="collapsible_property_panel--fadeOutOnTitleUnhover--15rtL",h="collapsible_property_panel--panelTitleRowInGrid--Kq3wh collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",_="collapsible_property_panel--panelTitleRowInGridWithButton--8yQlq",g="collapsible_property_panel--panelEmptyTitleRowInGrid--TlCXf collapsible_property_panel--panelEmptyTitleRow--vDg0z collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",f="collapsible_property_panel--panelStyleTitle--R1Tqo collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",E="collapsible_property_panel--panelMixedMessage--UuCKj",y="collapsible_property_panel--panelTitleText--vFGYT",b="collapsible_property_panel--titleButtons--k6Lxk",v="collapsible_property_panel--dropdownOption--cy1JZ",T="collapsible_property_panel--updateIcon--0YXMO"},85175:(e,r,n)=>{n.d(r,{A:()=>a,BI:()=>p,C_:()=>g,Rb:()=>u,Tu:()=>i,W1:()=>m,gE:()=>s,hg:()=>c,lG:()=>l,p3:()=>d,p5:()=>o,t7:()=>h,wH:()=>_});let a="style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",i="style_title--readOnly--6RqsN",o="style_title--selectedCollapsedPanelPreviewTitle--x1waj style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",s="style_title--numTextStyleOverrides--VcFQr",l="style_title--narrowCollapsedPanelPreviewTitle---OnQ7",c="style_title--collapsedPanelPreviewIcon--TYMgV",d="style_title--styleTitleName--lJDZI ellipsis--ellipsis--Tjyfa",u="style_title--customTitleName--Y--0d",m="style_title--ui3SelectionStyleItemTitle--bYnM2",p="style_title--hoverable--V2b9S",h="style_title--ui3SelectionStyleItemTitleStretch--h-OHJ",_="style_title--selected--9K15m",g="style_title--secondarySelected--gqSFt"},154312:(e,r,n)=>{n.d(r,{Lt:()=>c,Qz:()=>o,Wv:()=>a,be:()=>d,d_:()=>p,f0:()=>m,hF:()=>u,hL:()=>h,in:()=>i,kL:()=>s,t_:()=>l});let a="combo_box--selectInputExpanded--SgrsN select--selectInputExpanded--Lz6m4",i="combo_box--focused--vZXh1 select--selectInputFocused--c-NQ7",o="combo_box--containerDisabled--bNA2c combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t",s="combo_box--container--Vml-n combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t select--comboBoxShowChevronOnHover--rVuud",l="combo_box--selectDisabled--yJxRy combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",c="combo_box--select--JMl-q select--comboBoxSelect--T-iQ- select--_comboBoxSelect--zpLTH combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",d="combo_box--selectInput--fikB4 raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="combo_box--input--CW6xE raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",m="combo_box--scrubbableControl--t9lCI raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t combo_box--_scrubbableControlBase--jZV-D",p="combo_box--withSvg--BjUJI",h="combo_box--noBorderOnFocus--7Ago-"},668460:(e,r,n)=>{n.d(r,{TQ:()=>a});let a="containing_assets_panel--componentName--Lwkmx"},277698:(e,r,n)=>{n.d(r,{$r:()=>k,BT:()=>O,Bx:()=>Y,Cv:()=>R,EC:()=>c,EX:()=>o,FV:()=>C,GB:()=>T,GI:()=>s,H:()=>u,IX:()=>f,I_:()=>h,Is:()=>I,Kx:()=>K,L3:()=>D,MX:()=>w,NI:()=>P,O1:()=>S,QK:()=>U,RK:()=>M,TL:()=>m,Tp:()=>B,Xd:()=>y,YJ:()=>_,Z6:()=>A,cD:()=>i,eV:()=>a,hj:()=>$,kA:()=>E,kv:()=>H,mH:()=>W,n1:()=>d,np:()=>L,os:()=>g,p:()=>V,py:()=>p,ug:()=>v,vc:()=>b,wM:()=>N,wh:()=>l,x7:()=>F,zc:()=>x,zm:()=>G});let a="paint_panels--variableValue--2xpUO ellipsis--ellipsis--Tjyfa",i="paint_panels--typeContainer--e-3I2",o="paint_panels--colorInput--nSz13",s="paint_panels--typeContainerHidden--5zTrp paint_panels--typeContainer--e-3I2",l="paint_panels--colorInputHidden--ZojfD paint_panels--colorInput--nSz13",c="paint_panels--opacityInputHidden--I2GEk",d="paint_panels--opacityInputContainer--oqlsk",u="paint_panels--strokeInput--Zg8DO raw_components--flushLeft--YH-5P",m="paint_panels--strokeWeight---jmn2 raw_components--borderFocusWithin--BaipZ",p="paint_panels--strokeWeightNew--HHR3i raw_components--borderFocusWithin--BaipZ",h="paint_panels--strokeWeightVar--gxKxA",_="paint_panels--strokeWeightVarNew--CkN1w",g="paint_panels--strokeAlign--UKGAx",f="paint_panels--strokeAlignNew--6VVfv",E="paint_panels--strokeAlignInput--P3fhz",y="paint_panels--strokeAlignChevron--9p1Hk",b="paint_panels--leftEndCap--tHF9y",v="paint_panels--endpointRow--k5uAa",T="paint_panels--swapCap--eAzkX",I="paint_panels--rightEndCap--Oy9SG",S="paint_panels--endPointSvg--E5Qlh",w="paint_panels--endPointSvgShort--YHOkF",A="paint_panels--endPointOption--NrunB",C="paint_panels--advancedStroke--653Nf",N="paint_panels--paintPanelColorValueContainer--squRD paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",L="paint_panels--fitToSizePaintPanelColorValueContainer--XMkEF paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",O="paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",R="paint_panels--fitToSizePaintPanelVariableValueContainer---k9XP paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",P="paint_panels--paintPanelValueSelected--QHJsV",D="paint_panels--paintPanelValueSelectedSecondary--6uSZ2",k="paint_panels--paintPanelIconContainer--l4u-f",M="paint_panels--paintPanelRow--NZUf3",F="paint_panels--chit--twQEy",x="paint_panels--iconContainer--1gum-",U="paint_panels--inactiveLabel--gsLwE transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",B="paint_panels--onDrop--Va3gz",V="paint_panels--paintRowIcons--5b-UG",G="paint_panels--iconVisibleOnHover--1rweo",H="paint_panels--checkbox--1acob",W="paint_panels--checkboxLabel--q0GyI",K="paint_panels--checkboxLabelRow--ZNgFg",Y="paint_panels--deletedIcon--nXIQH",$="paint_panels--ui3EndpointFlipped--JAuAi"},485513:(e,r,n)=>{},443420:(e,r,n)=>{n.d(r,{Rh:()=>o,Tw:()=>a,iw:()=>i});let a="prototype_video_playback_panel--videoErrorPanelFooter--cdsDJ",i="prototype_video_playback_panel--ui3VideoErrorText--l6t6c",o="prototype_video_playback_panel--ui3VideoErrorLink--y1RWa"},671044:(e,r,n)=>{n.d(r,{Ah:()=>E,BI:()=>k,Bg:()=>T,CZ:()=>N,DS:()=>M,Dn:()=>L,EA:()=>d,LE:()=>w,LJ:()=>u,No:()=>f,O1:()=>h,PB:()=>b,PQ:()=>a,Pf:()=>s,Tz:()=>D,U:()=>g,X0:()=>S,Z4:()=>p,Zz:()=>C,_Z:()=>c,a2:()=>v,ai:()=>_,bW:()=>R,ht:()=>A,iY:()=>P,kR:()=>i,l$:()=>I,pc:()=>m,pq:()=>o,sI:()=>O,vR:()=>y,wh:()=>l});let a="raw_components--border--SKh2u",i="raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",o="raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",s="raw_components--label--4LcC7 raw_components--base--T7G0z",l="raw_components--labelInactive--tm1fU raw_components--label--4LcC7 raw_components--base--T7G0z",c="raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",d="raw_components--textInputSoftDisabled--M5O7I",u="raw_components--noPlaceholderLine--KBoD7",m="raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",p="raw_components--noLeftBorder--QE-ZB",h="raw_components--squareRightBorder--ktojw",_="raw_components--chevron--nJiSt",g="raw_components--wide--F33jp",f="raw_components--transparentIconButtonEnabled--l2bm3 raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",E="raw_components--iconButtonDisabled--SoTjK raw_components--_iconButton---ybo6",y="raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6",b="raw_components--outlineButton--FyUoF",v="raw_components--modalPanel--wmDfl",T="raw_components--propertiesPanelErrorBox--N2p6o",I="raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",S="raw_components--row200--Dgjc6 raw_components--row200Height--wotRv raw_components--_row--rHucX",w="raw_components--row150--2Q0-i raw_components--_rowHeight150--ZzVcZ raw_components--_row--rHucX",A="raw_components--row125--J20Ob raw_components--_rowHeight125--G2mEi raw_components--_row--rHucX",C="raw_components--labelRow--wxp77 raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",N="raw_components--rowSelected--M2Eip",L="raw_components--panelTitle--VAQQA",O="raw_components--panelTitleWithoutChevron--qIjza",R="raw_components--collapsiblePanelTitle--PXa3p",P="raw_components--panelTitleExtended--GoX-m raw_components--panelTitle--VAQQA",D="raw_components--panelTitleFaded--cUUkM raw_components--panelTitle--VAQQA",k="raw_components--hoverable--TNiAp",M="raw_components--panelIconContainer--V9E3Z"},844398:(e,r,n)=>{n.d(r,{AN:()=>g,BB:()=>m,BI:()=>w,CU:()=>L,Df:()=>V,H9:()=>B,HT:()=>E,Hi:()=>l,IK:()=>f,IZ:()=>A,JB:()=>k,O:()=>x,Om:()=>M,P2:()=>y,QF:()=>T,Qc:()=>p,Qw:()=>_,UY:()=>o,Vb:()=>h,Wm:()=>v,ZM:()=>P,ai:()=>u,fE:()=>O,hF:()=>s,hH:()=>i,kL:()=>a,l8:()=>C,nJ:()=>N,pR:()=>c,re:()=>R,sS:()=>F,tN:()=>d,uK:()=>I,w$:()=>U,x1:()=>b,x7:()=>G,yF:()=>S,z6:()=>D});let a="select--container--UJhOt raw_components--singleRowHeight--dKM4t",i="select--hiddenInput--3smCs raw_components--selectHiddenInput--bJ8vl",o="select--safariVoiceover--meUJ0",s="select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",l="select--fauxFocus--D1GLI",c="select--inputDisabled--08EdX select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",d="select--inputTextWrapper--kEwIr",u="select--chevron--KfTY2",m="select--inputWithSvg--t6hLE",p="select--inputAlignRight--5HWz5",h="select--inputSvg--Sqy6u",_="select--backgroundOnHover--5kQnp",g="select--inputText--I3JIv select--inputTextWrapper--kEwIr",f="select--inputTextTruncated--j6p-H ellipsis--ellipsis--Tjyfa",E="select--inputTextFill--H3tO-",y="select--dropdownContainer--0zweb _overlayBase--_overlayBase--Rkj8l",b="select--dropdownScrollClip--5ft6D",v="select--dropdown--8DAM-",T="select--dropdownContentWrapper--yDAla",I="select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",S="select--divider--HfbAX",w="select--optionFocused--8DSsx select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",A="select--optionDisabled--fEanh select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",C="select--optionHeader--34zhZ select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",N="select--optionTruncatedText--QqUBO",L="select--optionTextRemoveRightPadding--ULI6k",O="select--optionFullWidth--sW3Zl",R="select--optionText--D3BVM select--optionTruncatedText--QqUBO ellipsis--ellipsis--Tjyfa",P="select--rightLabel--I-ojL",D="select--check--xQ8c3",k="select--rightCheck--UdnTu",M="select--rightCheckText--vWTPu",F="select--topScrollIndicator--nys8N select--scrollIndicator--U0Wy-",x="select--bottomScrollIndicator--C7EE7 select--scrollIndicator--U0Wy-",U="select--scrollIndicatorChevron--9-te-",B="select--optionIcon--yngNx",V="select--iconToReplaceCheck--MMwXJ",G="select--chit--WI9C6"},599115:(e,r,n)=>{n.d(r,{Kk:()=>s,be:()=>a,j1:()=>o,kk:()=>i});let a="stack_panel_v4--selectInput--DdAPZ",i="stack_panel_v4--comboBoxInput--ewblc dimension_input--comboBoxInput--J0jWQ",o="stack_panel_v4--comboBoxPillsContainer--BiDzq dimension_input--comboBoxPillsContainer--Uv3fj",s="stack_panel_v4--icon--PJRhG"},815188:(e,r,n)=>{n.d(r,{Ev:()=>d,Ii:()=>s,Qb:()=>c,Vf:()=>a,Z7:()=>l,jO:()=>i,lG:()=>o,t:()=>u});let a="states_panel--errorStateWithCloseButtonBox--jayB0 states_panel--errorStateBoxBase--NGwjK",i="states_panel--errorStateBoxFlush--LYAGK states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",o="states_panel--errorStateBoxRegular--nhPoJ states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",s="states_panel--errorStateBoxHeader--zgSnc",l="states_panel--errorStateBoxTitle--pZ8tj",c="states_panel--errorStateBoxTitleText--VY8En",d="states_panel--errorStateBoxWarningIcon--5BPCj",u="states_panel--ui3ErrorStateBoxContent--07s-y"},468476:(e,r,n)=>{n.d(r,{QK:()=>i,hF:()=>a});let a="transform_panel--input--nRDX0 raw_components--flushLeft--YH-5P",i="transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO"},164502:(e,r,n)=>{n.d(r,{H5:()=>u,Od:()=>c,Pf:()=>l,Pv:()=>s,RF:()=>a,Y7:()=>m,by:()=>h,hF:()=>d,ig:()=>p,kb:()=>i,pG:()=>o});let a="ui3_modal_rows--ui3TwoColumnModalRow--ktXqt ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",i="ui3_modal_rows--left--5-4DR",o="ui3_modal_rows--right--TTLb7",s="ui3_modal_rows--ui3OneColumnModalRow--wLU6K ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",l="ui3_modal_rows--label--vQA2E",c="ui3_modal_rows--ui3LabelOneInputRow--kpsQB ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",d="ui3_modal_rows--input--WH2lM",u="ui3_modal_rows--ui3LabelOneInputDoubleRow--8P9kp ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",m="ui3_modal_rows--ui3LabelTwoInputRow---zU18 ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",p="ui3_modal_rows--leftInput--pkjk8",h="ui3_modal_rows--rightInput--mOj6z"},980328:(e,r,n)=>{n.d(r,{nW:()=>a,zF:()=>i});let a="plugin_parameter_entry--pillIcon--y5eMK",i="plugin_parameter_entry--pluginLabelIcon--ct5AV plugin_parameter_entry--pillIcon--y5eMK"},581735:(e,r,n)=>{n.d(r,{Tk:()=>a,ZR:()=>i});let a="quick_actions--noresult--qrETa quick_actions--centerItemsVertically--4COtP",i="quick_actions--pluginIcon--d9b13"},25600:(e,r,n)=>{n.d(r,{kv:()=>i,wn:()=>a});let a="quick_actions--resultDisabled--tjdlc",i="quick_actions--checkbox--jhzha"},815993:(e,r,n)=>{n.d(r,{BK:()=>L,C7:()=>c,EI:()=>l,Ge:()=>_,K$:()=>m,Km:()=>C,MT:()=>x,O5:()=>y,QD:()=>R,Rt:()=>W,VV:()=>s,Vr:()=>N,Vw:()=>V,WY:()=>B,Wh:()=>a,XE:()=>h,_L:()=>d,a1:()=>I,aK:()=>D,ai:()=>k,az:()=>A,cu:()=>P,dn:()=>M,hC:()=>G,hg:()=>w,i3:()=>H,me:()=>v,qN:()=>O,qb:()=>p,qc:()=>U,r9:()=>o,rR:()=>i,ro:()=>K,wH:()=>f,ws:()=>u,yo:()=>E,yx:()=>g,zK:()=>F,zW:()=>T,zb:()=>b,zk:()=>S});let a="multiplayer_view--multiplayerView---Lf04",i="multiplayer_view--onboardingTarget--Ja9Ak",o="multiplayer_view--disabled--K9QcN",s="multiplayer_view--users--DcWtM",l="multiplayer_view--usersContainer--bzaNI",c="multiplayer_view--userIconView--XlLWC",d="multiplayer_view--userIconViewHorizontal--CRVT- multiplayer_view--userIconView--XlLWC",u="multiplayer_view--userIconAvatar--qt4Vz",m="multiplayer_view--userIconAvatarLoading--s5PPI",p="multiplayer_view--normal--xHQOT",h="multiplayer_view--avatarWithCollaborationToolsContainer--7lq5U",_="multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",g="multiplayer_view--fullHeightSidebarAvatarWithToolsOverridesWithOverflow--hExNS multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",f="multiplayer_view--selected--PrEy3",E="multiplayer_view--hovered--X1V8M",y="multiplayer_view--textAvatarContainer--SwGAW",b="multiplayer_view--overflowTextAvatar--ouAgh multiplayer_view--textAvatar--P-4wz",v="multiplayer_view--separator--d7XC2",T="multiplayer_view--separatorContainer--3NXhc",I="multiplayer_view--overflowDropdown--5PCUX",S="multiplayer_view--multiplayerUserCount--VN79F",w="multiplayer_view--fileSeenStateSubtitle--xTYdr",A="multiplayer_view--avatarWithGroupActions--hdn0o",C="multiplayer_view--avatarWithGroupActionsTightened---blv6",N="multiplayer_view--groupActions--C2jLX",L="multiplayer_view--presenterButtonAction--7CCnt",O="multiplayer_view--pointingDropdown--4CD2d",R="multiplayer_view--pointingDropdownAdditionalPaddingUI2--zc-aF",P="multiplayer_view--listBox--9RJ5F",D="multiplayer_view--listBoxNew--z88cs",k="multiplayer_view--chevron--Vn-C1",M="multiplayer_view--ui3SearchContainer--KQpDt",F="multiplayer_view--ui3SearchContainerNew--brZ7S",x="multiplayer_view--searchContainer--q6zE8",U="multiplayer_view--searchIcon--C9Aoz",B="multiplayer_view--xIconButtonContainerWrapper--wSUus",V="multiplayer_view--xIconButtonContainerNew--3CYqO",G="multiplayer_view--xIconButtonContainer--vYjh1",H="multiplayer_view--xIcon--Oq2hB",W="multiplayer_view--searchInput--f43Gp text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",K="multiplayer_view--withOverflow---4XmW"},496991:(e,r,n)=>{n.d(r,{Dn:()=>b,FE:()=>A,FH:()=>g,Jk:()=>m,LY:()=>y,Mg:()=>O,QO:()=>I,S0:()=>_,Sn:()=>w,UF:()=>L,WB:()=>f,Xf:()=>i,Y7:()=>d,cm:()=>p,hF:()=>s,i5:()=>h,l4:()=>o,n$:()=>N,om:()=>c,r2:()=>T,r4:()=>v,sH:()=>a,sy:()=>S,vu:()=>C,wR:()=>l,wg:()=>u,zj:()=>E});let a="zoom_menu--zoomMenuBase--Uy7YH",i="zoom_menu--zoomMenu--3OqMw",o="zoom_menu--fullHeightSidebarZoomMenu--ElxlP",s="zoom_menu--input---hdA- input--darkInput--zfbnG",l="zoom_menu--zoomMenuContainer--DJXOL",c="zoom_menu--zoomMenuContainerActive--E7m0j",d="zoom_menu--fullHeightSidebarZoomMenuContainer--So738",u="zoom_menu--fullHeightSidebarZoomMenuContainerActive--jPaQb zoom_menu--fullHeightSidebarZoomMenuContainer--So738",m="zoom_menu--fullHeightSidebarZoomMenuContainerCollapsed--FpFJm zoom_menu--fullHeightSidebarZoomMenuContainer--So738",p="zoom_menu--zoomAmount--Qb6gL",h="zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",_="zoom_menu--fullHeightSidebarZoomAmountActive--EKFn- zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",g="zoom_menu--chevronContainer---jqeH",f="zoom_menu--fullHeightSidebarChevronActive--s0s-C",E="zoom_menu--zoomInputContainer---Xqu1",y="zoom_menu--middleZoomButton--17GYR",b="zoom_menu--zoomMiddleChevronContainer--XxlkP",v="zoom_menu--zoomMiddleChevronContainerActive--dN2OQ zoom_menu--zoomMiddleChevronContainer--XxlkP",T="zoom_menu--zoomMiddleChevronSVGContainer--6TlCz",I="zoom_menu--zoomMinus--wljce",S="zoom_menu--zoomPlus--B-iye",w="zoom_menu--enabled--JWySc",A="zoom_menu--feedZoomPan--AxC05",C="zoom_menu--active--WlOsd",N="zoom_menu--annotationsCategoryAllIcon--PAi2c",L="zoom_menu--annotationsCategoryIcon--PoqHO",O="zoom_menu--annotationCategoryLabel--9Fsmx"},680094:(e,r,n)=>{n.d(r,{Bx:()=>u,EE:()=>s,Gq:()=>c,Hw:()=>d,Io:()=>i,Mk:()=>o,Qq:()=>l,yQ:()=>m,zr:()=>a});let a="variable_pill--root--0ibUT",i="variable_pill--pill--NU8eR variable_pill_base--pillBase--HIf9B",o="variable_pill--useHover--S6o02",s="variable_pill--forceHover--EDu9s",l="variable_pill--text--Fm5k5",c="variable_pill--invalid--dxyCJ",d="variable_pill--nameAndIcons--Cyvcc",u="variable_pill--deletedIcon--QaRlG",m="variable_pill--ui3PillHeight--rEy4E"},593912:(e,r,n)=>{n.d(r,{Er:()=>s,Fi:()=>p,JJ:()=>i,N:()=>m,Q_:()=>d,RH:()=>o,Uq:()=>c,eK:()=>u,pv:()=>a,xH:()=>l});let a="variable_pill_base--pillBase--HIf9B",i="variable_pill_base--pillHasIcon--qR8Mw",o="variable_pill_base--pillSelected--WuPhz",s="variable_pill_base--pillDisableHover--A9znd",l="variable_pill_base--pillDefault--5YSwx",c="variable_pill_base--pillDefaultComponent--GMeSg",d="variable_pill_base--pillDisabled--Xci9C",u="variable_pill_base--pillDisabledTertiary--C2fJb",m="variable_pill_base--pillInSelection--HupPT",p="variable_pill_base--pillNarrow--Oai69"},467593:(e,r,n)=>{n.d(r,{QW:()=>i,qS:()=>a});let a="go_to_stripe_button--badge--aJn3P text--fontPos12--YsUAh text--_fontBase--QdLsd",i="go_to_stripe_button--warningIcon--eeAU7"},280937:(e,r,n)=>{n.d(r,{k:()=>a});let a="dock--dockDesign--kbym5 dock--dock--A6jIs"},351921:(e,r,n)=>{},429607:(e,r,n)=>{n.d(r,{$C:()=>h,B6:()=>g,BG:()=>C,Cq:()=>L,D1:()=>l,F$:()=>s,FV:()=>m,Gy:()=>A,JW:()=>R,MJ:()=>d,ML:()=>D,NH:()=>p,QF:()=>O,UK:()=>c,VJ:()=>b,Vx:()=>F,Xb:()=>a,Y2:()=>P,Y9:()=>k,YB:()=>x,ZK:()=>f,Zv:()=>N,_P:()=>i,c6:()=>o,ez:()=>U,k7:()=>B,kQ:()=>V,lI:()=>v,lO:()=>T,lP:()=>u,o2:()=>w,od:()=>E,ot:()=>M,sI:()=>S,vt:()=>_,y2:()=>y,zZ:()=>I});let a="resource_tiles--showOnHover--2v687",i="resource_tiles--figjamPluginRowIconHoverBg--0GjEb",o="resource_tiles--fauxFocused--Tk7MC",s="resource_tiles--optionsButtonActive--CnmDE resource_tiles--optionsButton--B7MN2",l="resource_tiles--optionsButtonShowOnHover--kJQHm resource_tiles--optionsButton--B7MN2 resource_tiles--showOnHover--2v687",c="resource_tiles--pluginTitleBadgeContainer--Q-9cz",d="resource_tiles--browsePluginTile--Dl1N0 resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",u="resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",m="resource_tiles--pluginTileMeta--xgpJR",p="resource_tiles--browsePluginTileDevModeWizard--ApW9E",h="resource_tiles--browsePluginTileSmall--t70Gg resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",_="resource_tiles--pluginTileIconLoading--mas66 resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",g="resource_tiles--pluginTileName--9Isog text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="resource_tiles--pluginTileSubheader--Fihho text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",E="resource_tiles--ctaButtonContainer--z2HxW",y="resource_tiles--priceBadgeContainer--6O7DF",b="resource_tiles--widgetMonetizationBadge--hXbF6",v="resource_tiles--ctaButton--qu-bG",T="resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",I="resource_tiles--buttonSubmenuChevron--af8r9",S="resource_tiles--buttonSubmenuChevronWhite--c7pTT resource_tiles--buttonSubmenuChevron--af8r9",w="resource_tiles--rowChevron--tIIjl",A="resource_tiles--widgetTileSmall--gtI7m resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos11--2LvXf text--_fontBase--QdLsd",C="resource_tiles--widgetTile--OjUTk resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos12--YsUAh text--_fontBase--QdLsd",N="resource_tiles--widgetTileIconSmall--Dox02 resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",L="resource_tiles--widgetTileIcon--hGlOB resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",O="resource_tiles--widgetTileMetadata--Ggrsh",R="resource_tiles--widgetTileNameContainer--HqAEf",P="resource_tiles--widgetTileName--hvW06 ellipsis--ellipsis--Tjyfa",D="resource_tiles--widgetTileSubheader--7-TT- ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",k="resource_tiles--paymentErrorIcon--w-8j9",M="resource_tiles--relativeContainer--7lvHF",F="resource_tiles--redDot---lNFV red_dot--baseRedDot--pgZV7",x="resource_tiles--saveButtonEditorSmall--Jt970 resource_tiles--_saveButton--mDwpY",U="resource_tiles--saveButtonVisible---tZad",B="resource_tiles--saveButtonEditorLarge--nKxZq resource_tiles--_saveButton--mDwpY",V="resource_tiles--svg16--B1UCN"},997830:(e,r,n)=>{n.d(r,{CY:()=>y,EJ:()=>S,EO:()=>C,JF:()=>p,Jg:()=>u,K1:()=>a,P9:()=>d,R2:()=>f,Rh:()=>m,SM:()=>c,TX:()=>E,UR:()=>v,Vw:()=>i,Wc:()=>h,Y5:()=>b,eo:()=>_,fp:()=>g,hS:()=>A,jT:()=>o,nd:()=>s,qG:()=>I,x7:()=>w,xR:()=>T,yl:()=>l});let a="header_modal--modalBackground--bcAoR",i="header_modal--transparentBackground--pG9jD",o="header_modal--modalContainer--yIJSk",s="header_modal--bottomSection--qH4em",l="header_modal--modal--2JYEN modal--modalShadow--d-rJf",c="header_modal--upperModal--guwaL header_modal--modal--2JYEN modal--modalShadow--d-rJf",d="header_modal--modal__scroll--T2IVi",u="header_modal--headerWithBottomBorder--O1ODQ",m="header_modal--headerSmall--WlWbO header_modal--header--M56yS",p="header_modal--headerLarge--JMHqT header_modal--header--M56yS",h="header_modal--headerHidden--JWFxb",_="header_modal--headerIconImg--OHQqh plugin--pluginIconBase--yAG5F",g="header_modal--headerIconSvg--dgaEs",f="header_modal--headerModalTitle--32hFx",E="header_modal--headerModalTitleWithoutOverflow--eQPzZ header_modal--headerModalTitle--32hFx ellipsis--ellipsis--Tjyfa",y="header_modal--fixedTop--eHgXF",b="header_modal--fixedCenter--wSN6F",v="header_modal--confirmationBody--ViOqF text--fontPos11--2LvXf text--_fontBase--QdLsd",T="header_modal--confirmationText--76-iq text--fontPos11--2LvXf text--_fontBase--QdLsd",I="header_modal--confirmButtonBox--FEPg6",S="header_modal--confirmationButton--Y-1oj text--fontPos11--2LvXf text--_fontBase--QdLsd",w="header_modal--cancelButton--3zDCc header_modal--confirmationButton--Y-1oj text--fontPos11--2LvXf text--_fontBase--QdLsd",A="header_modal--rightButtonsClassName--plY48",C="header_modal--modalBorderRadiusOverride--mLoQR"},672595:(e,r,n)=>{n.d(r,{Be:()=>s,DD:()=>_,F4:()=>b,G6:()=>l,Hx:()=>c,KA:()=>f,Lt:()=>A,Lu:()=>i,N4:()=>w,Rt:()=>S,U0:()=>v,Vq:()=>h,_Z:()=>g,aY:()=>y,bE:()=>u,iZ:()=>I,jE:()=>p,kL:()=>T,pL:()=>a,p_:()=>o,v0:()=>d,yl:()=>m,z3:()=>E});let a="modal--confirmButton--SNUDv",i="modal--cancelLink--gmgMU modal--button--ZJmGG",o="modal--list--AYXsM",s="modal--blueLink--9GcJu blue_link--blueLink--9rlnd",l="modal--modalFooterButtonGroup--G-glC",c="modal--modalFooter--doArv",d="modal--buttonRow--o2A0S",u="modal--groupedButtonRow--bwN6C modal--buttonRow--o2A0S",m="modal--modal--fXC8G modal--modalShadow--d-rJf modal--modalBare--AlP7E",p="modal--modalContent--P643j",h="modal--important--qfd6R",_="modal--title--sEkWg",g="modal--textInput---r1fJ",f="modal--tfaQrCode--Xy6Qb",E="modal--error--Kk49K",y="modal--code--zhp08",b="modal--codes--U1NYW",v="modal--avatarWithHandle--AJpEE",T="modal--container--LVq8G",I="modal--blockQuote--bzdW1 text--fontPos11--2LvXf text--_fontBase--QdLsd",S="modal--blockQuoteHeader--IKpaG",w="modal--blockQuoteText--nDUnj ellipsis--ellipsis--Tjyfa",A="modal--select--a5n-Q"},300665:(e,r,n)=>{n.d(r,{Ar:()=>w,B9:()=>d,FQ:()=>v,Hn:()=>C,IL:()=>s,Lq:()=>l,Ny:()=>S,OQ:()=>E,P1:()=>h,TI:()=>m,ZA:()=>f,ZO:()=>p,_S:()=>o,a5:()=>T,b:()=>i,dC:()=>g,gF:()=>A,gh:()=>y,jS:()=>_,nW:()=>I,oX:()=>b,uS:()=>u,w0:()=>c,wV:()=>a});let a="pointer_modal--announcementPointerModalDark--9DD-M pointer_modal--announcementPointerModal---X9Ui",i="pointer_modal--closeButton--yKnli",o="pointer_modal--closeButtonExtraSpacing--e8erM",s="pointer_modal--announcementPointerModalLight--AaKLA pointer_modal--announcementPointerModal---X9Ui",l="pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",c="pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",d="pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",u="pointer_modal--closeButtonWhite--nj2uk",m="pointer_modal--primaryCtaButtonLight--WnZAX pointer_modal--primaryCtaButton--Snffw",p="pointer_modal--primaryCtaButtonDark--ZWijN pointer_modal--primaryCtaButton--Snffw",h="pointer_modal--secondaryCtaLinkButton--aoJ64",_="pointer_modal--secondaryCtaButtonLight---Dv4E pointer_modal--secondaryCtaButton--Jg0Yu",g="pointer_modal--secondaryCtaButtonDark--dKbwo pointer_modal--secondaryCtaButton--Jg0Yu",f="pointer_modal--footerDiv--JtCDN",E="pointer_modal--ctaContainer--luZLz",y="pointer_modal--noMotion--YIicU",b="pointer_modal--topTriangleBackground--bAkvB pointer_modal--topTriangle--eTQ3K",v="pointer_modal--topTriangleForeground--BZxHM pointer_modal--topTriangle--eTQ3K",T="pointer_modal--bottomTriangleBackground--GHZc5 pointer_modal--bottomTriangle--iDHi9",I="pointer_modal--bottomTriangleForeground--2hiBJ pointer_modal--bottomTriangle--iDHi9",S="pointer_modal--rightTriangleBackground--fw0l3 pointer_modal--rightTriangle--rQltw",w="pointer_modal--rightTriangleForeground--ReV7J pointer_modal--rightTriangle--rQltw",A="pointer_modal--leftTriangleBackground--GAtIC pointer_modal--leftTriangle--p5eQp",C="pointer_modal--leftTriangleForeground--shkXU pointer_modal--leftTriangle--p5eQp"},639195:(e,r,n)=>{n.d(r,{CU:()=>i,Uk:()=>o,hR:()=>a});let a="offline_prototype--progressIcon--Ye9zS",i="offline_prototype--learnMoreLink--SXs6g",o="offline_prototype--slidesOfflineButton--NCOL-"},976553:(e,r,n)=>{n.d(r,{Fp:()=>d,HF:()=>i,UT:()=>s,g7:()=>c,kv:()=>l,v6:()=>a,zG:()=>o});let a="options_menu--optionMenuResponsiveViewer--nakUc options_menu--optionMenu--9fG9u",i="options_menu--optionMenuForFooter--HiOGO options_menu--optionMenu--9fG9u",o="options_menu--optionMenuButton--9sq9i",s="options_menu--buttonChevron--N2JHA",l="options_menu--dropdownButtonForFooter--UIPTM",c="options_menu--deviceName--qS44h",d="options_menu--optionsMenuIconFixed--zXwsG"},194799:(e,r,n)=>{n.d(r,{$7:()=>s,Jf:()=>m,KK:()=>o,Qs:()=>l,S4:()=>_,Tp:()=>a,Xw:()=>c,h2:()=>g,lJ:()=>p,q9:()=>u,t0:()=>i,wc:()=>d,xQ:()=>h});let a="prototype--background--C7T7U",i="prototype--backgroundTransparent--g5yZq",o="prototype--documentationContainer---zYeR",s="prototype--noScrollBars--Hz0hJ",l="prototype--content--9zE6J",c="prototype--contentMiddle--sqEVr",d="prototype--contentMiddleWithHeader--Qr1mu",u="prototype--viewerContainer--8C5YF",m="prototype--viewerContainerFullScale--bf-Sp prototype--viewerContainer--8C5YF",p="prototype--viewer--uYMkg",h="prototype--footerContainer--AikxI",_="prototype--commentsNextCursor--uIXBd",g="prototype--suppressFocusRings--uoAQT"},778465:(e,r,n)=>{n.d(r,{UL:()=>s,c6:()=>i,jG:()=>o,so:()=>a});let a="right_sidebar_panel--sidebarContainer--VeCtS right_sidebar_panel--container--CtQ1g",i="right_sidebar_panel--sidebarContainerHidden--POHqM right_sidebar_panel--container--CtQ1g",o="right_sidebar_panel--scrollContainer--ORIOM right_sidebar_panel--sidebarDragContainer--n0xNj",s="right_sidebar_panel--withoutHeaderMargin--R9T7p"},342647:(e,r,n)=>{n.d(r,{Dg:()=>o,Qs:()=>a,S:()=>l,qg:()=>d,qr:()=>s,v0:()=>c,xC:()=>i,zP:()=>u});let a="rcs_components--content--N7eCo text--fontPos11--2LvXf text--_fontBase--QdLsd",i="rcs_components--contentFeatureUpdate--BQecL text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",o="rcs_components--imgContainer--JofI3",s="rcs_components--footer--l5bb0",l="rcs_components--footerStepCounter--jKzRi",c="rcs_components--buttonRow--OfMRY",d="rcs_components--fullscreenBackground--tIex6",u="rcs_components--loadingSpinner--rOHo1"},133072:(e,r,n)=>{n.d(r,{Hj:()=>a,pO:()=>i});let a="onboarding--promoPointerTitle--Z1b9a text--fontPos13--xW8hS text--_fontBase--QdLsd",i="onboarding--lowZIndexPointerModal--9C2QH pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz"},475047:(e,r,n)=>{n.d(r,{$9:()=>a,E7:()=>l,Gv:()=>c,Lq:()=>p,Pj:()=>d,SI:()=>u,hj:()=>m,ig:()=>i,mj:()=>o,s1:()=>h,vL:()=>s});let a="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",i="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",o="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",s="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",l="styles_properties_form--noBorder--EcrkL",c="styles_properties_form--stylePreview--tJF78",d="styles_properties_form--textStylePreview--Jp6WQ",u="styles_properties_form--textStylePreviewInverted--GeC3b",m="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",p="styles_properties_form--loading--0A0hy",h="styles_properties_form--isLoaded--2czdf"},792882:(e,r,n)=>{n.d(r,{BA:()=>T,D:()=>I,E0:()=>E,I6:()=>O,KY:()=>a,NM:()=>l,SB:()=>m,SM:()=>w,T3:()=>_,TH:()=>d,U1:()=>g,UE:()=>o,Ym:()=>A,_Z:()=>i,cr:()=>u,eO:()=>f,hP:()=>C,jG:()=>s,jm:()=>N,ln:()=>h,nM:()=>y,p$:()=>S,ry:()=>L,sI:()=>p,sM:()=>b,uH:()=>v,wY:()=>c});let a="multi_select_list--actionBar--T9qpZ",i="multi_select_list--actionBarVisible--3rWgr multi_select_list--actionBar--T9qpZ",o="multi_select_list--arrow--CW8ia",s="multi_select_list--scrollContainer--B-Dk-",l="multi_select_list--scrollContent--bCmOd",c="multi_select_list--tableWrapper--pDejK",d="multi_select_list--tableWithNewScrollContext--Iffr4",u="multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",m="multi_select_list--actionBarContentContainerVisible--AEaW4 multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",p="multi_select_list--menuBarDropdown--Lf9-4",h="multi_select_list--stickyHeader--FkV5r",_="multi_select_list--stickyHeaderWithBanner--9IDR1 multi_select_list--stickyHeader--FkV5r",g="multi_select_list--headerRow--22Lao",f="multi_select_list--headerRowDisabled--zG4LU multi_select_list--headerRow--22Lao multi_select_list--_disabled--INopV",E="multi_select_list--checkboxColumn--SgkHV",y="multi_select_list--row--nfio-",b="multi_select_list--unselectedCheckbox--KAaaj",v="multi_select_list--rowWithRoundedBorder--im1TP",T="multi_select_list--notFirstRowInSelectedGroup--3m6oH",I="multi_select_list--notLastRowInSelectedGroup--N4myp",S="multi_select_list--emptyState--QQcOE",w="multi_select_list--batchActionCount--R41SC",A="multi_select_list--batchActionClear--7q1Vl",C="multi_select_list--actionButton--D2K4w",N="multi_select_list--longList--Oz-Pp",L="multi_select_list--longListDisabled--x8onM multi_select_list--longList--Oz-Pp multi_select_list--_disabled--INopV",O="multi_select_list--highlightedRow--W4ZZn"},291619:(e,r,n)=>{n.d(r,{Jw:()=>s,Lm:()=>o,NQ:()=>_,Y1:()=>m,ai:()=>h,h3:()=>a,hq:()=>f,i1:()=>l,li:()=>u,q0:()=>i,um:()=>d,vL:()=>c,xW:()=>g,zP:()=>p});let a="desktop_tool_bar--toolBarSpacerContainer--rLTCP",i="desktop_tool_bar--toolBarSpacerContainerTabletOptimized--0Tv6Q desktop_tool_bar--toolBarSpacerContainer--rLTCP",o="desktop_tool_bar--toolBarContainer--1EjL8",s="desktop_tool_bar--pageViewToolBarContainer--iC3UY desktop_tool_bar--toolBarContainer--1EjL8",l="desktop_tool_bar--toolBarLeftSide--wJapT text--fontPos13--xW8hS text--_fontBase--QdLsd",c="desktop_tool_bar--toolBarCenter--orkTM",d="desktop_tool_bar--toolBarCenterFullWidth---a4El",u="desktop_tool_bar--toolBarRightSide--XfTEn",m="desktop_tool_bar--toolBarTabContent--a1orn ellipsis--ellipsis--Tjyfa",p="desktop_tool_bar--toolBarTabContentBase--CoAtY",h="desktop_tool_bar--chevron--zwxsY",_="desktop_tool_bar--adminSettingsToolBarTabContentBase--xaPNN",g="desktop_tool_bar--adminSettingsToolBarTabContentSelected--YOoLG",f="desktop_tool_bar--chevronSvgContainer--Fz1VL"},595439:(e,r,n)=>{n.d(r,{AL:()=>A,BI:()=>g,Cu:()=>b,DL:()=>d,FH:()=>w,Fp:()=>a,G7:()=>E,Hl:()=>i,LH:()=>I,MO:()=>_,Nn:()=>C,TV:()=>u,UD:()=>y,VQ:()=>T,Vs:()=>h,cJ:()=>p,e6:()=>m,hv:()=>v,j7:()=>o,ko:()=>l,nP:()=>s,vO:()=>c,xn:()=>S,yH:()=>f});let a="voice_users--voiceParticipantAvatar--7mhMG",i="voice_users--overflowRow--dyDR2",o="voice_users--nameAndSuffixContainer--GGoKj",s="voice_users--flexContainer--bWLmT",l="voice_users--flexLeftContainer--EVDRS",c="voice_users--flexRightContainer--Su6EL",d="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",u="voice_users--voiceParticipantNameGreyedOut--4zNHd text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="voice_users--participantStatus--cnVtZ",p="voice_users--participantRowOldPadding--96Ig5",h="voice_users--participantRowNewPadding--b0v2c",_="voice_users--participantRow--D4Yar",g="voice_users--hoverable--tq5aE",f="voice_users--containsCursor--Wx6C4",E="voice_users--secondaryMenuIconButtonContainer--aAh8o",y="voice_users--showSecondaryDropdownOnHover--AWGE6",b="voice_users--currentUserHeaderRow--Jiv6z",v="voice_users--secondaryActionsMenuButton--2emFq",T="voice_users--secondaryActionsMenuButtonActive--QoLJK",I="voice_users--multiplayerUserView--7nAcD",S="voice_users--userSuffix--2OgbZ text--fontPos11--2LvXf text--_fontBase--QdLsd",w="voice_users--userSuffixNew--husrg text--fontPos11--2LvXf text--_fontBase--QdLsd",A="voice_users--voiceUserHeadphonesIcon--wLuPW",C="voice_users--mutedContainer--JL7uZ"},46481:(e,r,n)=>{n.d(r,{Aw:()=>_,DV:()=>i,FY:()=>s,Hn:()=>d,Jj:()=>m,R_:()=>a,ZS:()=>l,cg:()=>p,e6:()=>h,kQ:()=>c,nf:()=>u,ti:()=>o});let a="lexical_editor_theme--heading--SosJn",i="lexical_editor_theme--codeBlock--TJ-Fu",o="lexical_editor_theme--inlineCode--jE754",s="lexical_editor_theme--paragraph--GBDXU",l="lexical_editor_theme--textBold--tWO8-",c="lexical_editor_theme--textItalic--vqDDt",d="lexical_editor_theme--textStrikethrough--CHepi",u="lexical_editor_theme--link--IC2wz",m="lexical_editor_theme--linkReadOnly--h-PyL",p="lexical_editor_theme--listOl--Ae2L-",h="lexical_editor_theme--listUl--EMQyv",_="lexical_editor_theme--listItem--tt5uP"},649169:(e,r,n)=>{},348036:(e,r,n)=>{n.d(r,{GE:()=>c,KQ:()=>s,QH:()=>o,Sw:()=>i,_J:()=>a,ky:()=>l,lx:()=>d});let a="loading_content--shimmerAnimation--qZjRw",i="loading_content--shimmerOnMenuAnimation--U9c8t loading_content--shimmerAnimation--qZjRw",o="loading_content--lightShimmerAnimation--Iz23-",s="loading_content--loadingText--MFUIw",l="loading_content--loadingTextOnMenu--WrELp loading_content--loadingText--MFUIw",c="loading_content--loadingImage--eB8Kt",d="loading_content--loadingPrimary--HsesM"},247783:(e,r,n)=>{n.d(r,{Ak:()=>h,K5:()=>p,OH:()=>i,Pj:()=>d,c0:()=>c,cQ:()=>l,d6:()=>m,lE:()=>o,m8:()=>u,nf:()=>s,qr:()=>a});let a="footer--footer--JB9iL",i="footer--footerHidden--U2SCb footer--footer--JB9iL",o="footer--replayKeyboardShortcut--Lqop8",s="footer--replayButtonContainer--XR1gy",l="footer--replayButton--fKqPi footer--pill--a9ne7",c="footer--debugToolsContainer--WeB-G",d="footer--frameCounterContainer--oMKsY",u="footer--frameCounterResponsive--XW-b7 footer--frameCounter--5AU-l footer--pill--a9ne7",m="footer--frameCounterText--hv93-",p="footer--footerOptionsMenuSeparator--5rW7E",h="footer--embedFrameCounterText--OS77U"},400127:(e,r,n)=>{n.d(r,{A4:()=>I,CK:()=>l,Cu:()=>w,Dv:()=>m,FR:()=>a,RK:()=>b,SA:()=>y,SC:()=>d,Tr:()=>f,VA:()=>u,Vj:()=>g,W0:()=>p,WM:()=>T,XK:()=>i,ag:()=>_,gO:()=>h,m2:()=>o,m4:()=>c,ol:()=>S,q6:()=>v,vS:()=>E,yl:()=>s});let a="generic_tile_DEPRECATED--selectedContainer--ybkd4 generic_tile_DEPRECATED--container--XotGi",i="generic_tile_DEPRECATED--tileBorder---DBQk",o="generic_tile_DEPRECATED--subtitleWrapperInner--ncwf-",s="generic_tile_DEPRECATED--genericTile--6ezs8",l="generic_tile_DEPRECATED--gridView--ICika",c="generic_tile_DEPRECATED--standaloneFileTile--lmMfZ generic_tile_DEPRECATED--container--XotGi",d="generic_tile_DEPRECATED--subtitleContainer--y18L5",u="generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",m="generic_tile_DEPRECATED--disabledSubtitle--yTOPL generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",p="generic_tile_DEPRECATED--settings--cInfj",h="generic_tile_DEPRECATED--ellipsis--jqPWA ellipsis--ellipsis--Tjyfa",_="generic_tile_DEPRECATED--subtitleMetadata--94sE7 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",g="generic_tile_DEPRECATED--modifiedMetadata--AphD2",f="generic_tile_DEPRECATED--genericTileRedesign--ySqO2",E="generic_tile_DEPRECATED--topLeftControls--hrfPC",y="generic_tile_DEPRECATED--topRightControls--bIPIz",b="generic_tile_DEPRECATED--visible--dakmY",v="generic_tile_DEPRECATED--bottomControls--Ro4JX",T="generic_tile_DEPRECATED--facepile--MZY4B",I="generic_tile_DEPRECATED--control--xjbn-",S="generic_tile_DEPRECATED--viewOnlyLabel--4apxb",w="generic_tile_DEPRECATED--itemsViewTitle--Uxr-A"},632668:(e,r,n)=>{n.d(r,{Pf:()=>o,bb:()=>i,zr:()=>a});let a="truncated_text--root--kx5Ta ellipsis--ellipsis--Tjyfa",i="truncated_text--rootTruncateStart--aClXJ",o="truncated_text--directionFix--T1NOI"},578804:(e,r,n)=>{n.d(r,{Id:()=>u,MW:()=>d,Vt:()=>l,X8:()=>s,Yp:()=>m,gC:()=>p,kL:()=>a,o1:()=>o,rf:()=>i,ut:()=>c});let a="base_cookie_banner--container--nUKFl",i="base_cookie_banner--body--lPBYi",o="base_cookie_banner--actions--1LAhr",s="base_cookie_banner--dismiss--gdSyk",l="base_cookie_banner--container__community--oc-bP",c="base_cookie_banner--container__fileViewer--522-P",d="base_cookie_banner--dismissIcon--0O2Nl",u="base_cookie_banner--container__prototype--A1a4y",m="base_cookie_banner--container__auth--okjXC",p="base_cookie_banner--container__authOrCommunity--cqdOl"},889148:(e,r,n)=>{n.d(r,{$C:()=>g,$b:()=>ek,$r:()=>p,A4:()=>ed,AN:()=>ee,Af:()=>eu,Ah:()=>z,B8:()=>eH,B9:()=>B,DE:()=>en,DN:()=>eO,Dd:()=>x,De:()=>d,Dr:()=>l,FQ:()=>eP,JI:()=>H,JT:()=>h,K4:()=>eF,L5:()=>e$,LL:()=>eh,Me:()=>_,N0:()=>I,OF:()=>eK,PN:()=>i,PQ:()=>eG,Po:()=>S,Pp:()=>V,Py:()=>k,Q1:()=>eV,Q2:()=>eA,QE:()=>ej,QQ:()=>s,Qw:()=>N,R2:()=>ef,R3:()=>c,RO:()=>L,Rv:()=>ez,SW:()=>U,Sb:()=>C,T2:()=>eD,Td:()=>Z,Tn:()=>eW,U8:()=>T,Uw:()=>Y,Vm:()=>o,Wn:()=>f,Ws:()=>el,X8:()=>eb,Z6:()=>b,Zv:()=>eY,Zz:()=>eB,_M:()=>ec,_P:()=>em,_x:()=>W,a6:()=>K,aT:()=>eM,az:()=>eI,bu:()=>O,c6:()=>eE,dV:()=>m,eN:()=>eT,eg:()=>a,ev:()=>ea,fU:()=>eg,fV:()=>J,fh:()=>eS,g$:()=>$,gn:()=>eo,h3:()=>eN,i4:()=>eR,iU:()=>eC,is:()=>A,jR:()=>E,jc:()=>ey,k0:()=>R,k7:()=>G,mO:()=>ev,n7:()=>ep,nG:()=>Q,nL:()=>ex,o$:()=>eU,oK:()=>F,oW:()=>P,p5:()=>e_,pZ:()=>ew,qH:()=>X,qm:()=>w,qt:()=>et,t1:()=>M,vD:()=>j,vY:()=>ei,vh:()=>y,w3:()=>u,wO:()=>q,wl:()=>es,xr:()=>v,xu:()=>er,yG:()=>eL,zt:()=>D});let a="#e5e5e5",i="rgba(0, 0, 0, 0.8)",o="#fff",s="#333333",l="#fff",c="#000",d="#e6e6e6",u="#667799",m="#007be5",p="#9747ff",h="#ff24bd",_="#f24822",g="#ffcd29",f="#14ae5c",E="rgba(30, 30, 30, 1)",y="rgba(117, 117, 117, 1)",b="rgba(179, 179, 179, 1)",v="rgba(230, 230, 230, 1)",T="rgba(217, 217, 217, 1)",I="rgba(242, 72, 34, 1)",S="rgba(255, 199, 194, 1)",w="rgba(255, 166, 41, 1)",A="rgba(252, 209, 156, 1)",C="rgba(255, 205, 41, 1)",N="rgba(255, 232, 163, 1)",L="rgba(20, 174, 92, 1)",O="rgba(175, 244, 198, 1)",R="rgba(13, 153, 255, 1)",P="rgba(189, 227, 255, 1)",D="rgba(151, 71, 255, 1)",k="rgba(228, 204, 255, 1)",M="rgba(255, 255, 255, 1)",F="rgba(175, 188, 207, 1)",x="rgba(230, 230, 230, 1)",U="rgba(255, 175, 163, 1)",B="rgba(255, 196, 112, 1)",V="rgba(255, 217, 102, 1)",G="rgba(133, 224, 163, 1)",H="rgba(128, 202, 255, 1)",W="rgba(217, 184, 255, 1)",K="rgba(255, 189, 242, 1)",Y="rgba(230, 230, 230, 1)",$="rgba(151, 151, 151, 1)",j="rgba(255, 153, 248, 1)",z="rgba(255, 174, 79, 1)",q="rgba(255, 238, 0, 1)",Z="rgba(134, 250, 22, 1)",X="rgba(111, 255, 246, 1)",J="rgba(179, 143, 255, 1)",Q="rgba(255, 255, 255, 1)",ee="rgba(175, 175, 175, 1)",et="rgba(255, 160, 249, 1)",er="rgba(255, 184, 104, 1)",en="rgba(255, 242, 52, 1)",ea="rgba(174, 255, 97, 1)",ei="rgba(126, 255, 247, 1)",eo="rgba(188, 155, 255, 1)",es="rgba(255, 255, 255, 1)",el="rgba(17, 17, 17, 1)",ec="rgba(117, 117, 117, 1)",ed="rgba(217, 217, 217, 1)",eu="rgba(224, 62, 26, 1)",em="rgba(251, 188, 182, 1)",ep="rgba(247, 151, 34, 1)",eh="rgba(255, 196, 112, 1)",e_="rgba(243, 193, 27, 1)",eg="rgba(249, 223, 144, 1)",ef="rgba(25, 143, 81, 1)",eE="rgba(161, 232, 185, 1)",ey="rgba(12, 140, 233, 1)",eb="rgba(168, 215, 250, 1)",ev="rgba(138, 56, 245, 1)",eT="rgba(214, 182, 251, 1)",eI="rgba(255, 255, 255, 1)",eS="rgba(102, 119, 153, 1)",ew="rgba(242, 72, 34, 1)",eA="rgba(255, 166, 41, 1)",eC="rgba(255, 205, 41, 1)",eN="rgba(20, 174, 92, 1)",eL="rgba(13, 153, 255, 1)",eO="rgba(151, 71, 255, 1)",eR="rgba(255, 36, 189, 1)",eP="rgba(230, 230, 230, 1)",eD="rgba(175, 188, 207, 1)",ek="rgba(252, 163, 151, 1)",eM="rgba(255, 196, 112, 1)",eF="rgba(247, 209, 95, 1)",ex="rgba(121, 210, 151, 1)",eU="rgba(124, 196, 248, 1)",eB="rgba(209, 168, 255, 1)",eV="rgba(253, 156, 224, 1)",eG="rgba(230, 230, 230, 1)",eH="rgba(41, 39, 52, 1)",eW="rgba(250, 248, 245, 1)",eK="rgba(63, 201, 156, 1)",eY="rgba(200, 115, 74, 1)",e$="rgba(241, 188, 62, 1)",ej="rgba(196, 213, 106, 1)",ez="#f8f8f8"},219085:(e,r,n)=>{n.d(r,{ss:()=>a});let a=11},182032:(e,r,n)=>{n.d(r,{compareChangesModalWidth:()=>h,curatorTertiaryModalZ:()=>f,defaultCornerRadius:()=>p,designToolbarHeight:()=>l,devHandoffAssetPreviewMaxHeight:()=>d,devHandoffAssetPreviewMaxWidth:()=>c,helpWidgetSizePlusMargin:()=>s,modalZ:()=>y,rulerThickness:()=>m,scrollBarXHeight:()=>a,scrollBarYWidth:()=>i,secondaryModalZ:()=>E,stylePickerMaxHeight:()=>u,templateModalTeamName:()=>g,topBarZ:()=>_,trackPadding:()=>o});let a="6px",i="6px",o="2px",s="64px",l="48px",c="44px",d="44px",u="300px",m="20px",p="2px",h="3000px",_=3,g=2,f=7,E=9,y=10},489018:(e,r,n)=>{n.d(r,{FX:()=>s,QU:()=>i,Us:()=>a,ZV:()=>l,rz:()=>o});let a="40px",i="12px",o="16px",s="16px",l="40px"},488044:(e,r,n)=>{n.d(r,{az:()=>a,i0:()=>i});let a="toolbar_action--hideOnMobile--nG2oh",i="toolbar_action--hideOnDesktop--caccx"},675303:(e,r,n)=>{n.d(r,{B7:()=>p,E3:()=>a,H0:()=>d,Kk:()=>o,My:()=>m,Nl:()=>c,Oy:()=>i,Xy:()=>l,hR:()=>u,m$:()=>s});let a="visual_bell--base--Q4n07",i="visual_bell--fplBase--oYGmj",o="visual_bell--icon--rn9Ns",s="visual_bell--iconUI3Color--1jcVh",l="visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",c="visual_bell--customIconCircle--LwQJ3 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",d="visual_bell--customIconError--wr7b0 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",u="visual_bell--progressIcon--RYZye",m="visual_bell--slidesVisualBell--arXfI",p="visual_bell--slidesVisualBellIcon--LAt8o"},788954:(e,r,n)=>{n.d(r,{Kv:()=>m,Le:()=>s,Lq:()=>c,Qo:()=>u,Sn:()=>d,X9:()=>a,Xr:()=>p,f$:()=>l,k8:()=>o,wH:()=>i});let a="slides_color_controls--panelToggle--kL4qJ",i="slides_color_controls--selected--FUTwH",o="slides_color_controls--colorChit--pdLKf",s="slides_color_controls--chitBackground--Vlkza",l="slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",c="slides_color_controls--editChitButton--Am-hP",d="slides_color_controls--enabled--3SYlu",u="slides_color_controls--shownForTests--S2xlM",m="slides_color_controls--renameColorInput--7gA0L raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",p="slides_color_controls--gradientControlContainer--1GsYu"},916003:(e,r,n)=>{n.d(r,{Oe:()=>i,RJ:()=>s,g0:()=>o,mu:()=>l,yE:()=>a});let a="feed_post_zoom_pan--zoomPanContainer--zUqcL",i="feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",o="feed_post_zoom_pan--guidelineLayer--p6ik- feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",s="feed_post_zoom_pan--transformedImage--hjQSb",l="feed_post_zoom_pan--zoomControls--8PqPP feed_post_detail_modal--contentOverlayPill--1jsoj"},616307:(e,r,n)=>{n.d(r,{D9:()=>a,ZS:()=>o,oO:()=>i});let a="whiteboard_text_style_control--offscreenMeasurementContainer--BKhB1",i="whiteboard_text_style_control--selectInputForMeasurement--slyc8",o="whiteboard_text_style_control--optionForMeasurement--Am6OD"},781865:(e,r,n)=>{n.d(r,{$d:()=>I,$y:()=>m,B4:()=>F,BE:()=>B,BN:()=>P,Bx:()=>y,F0:()=>_,FK:()=>g,ID:()=>V,Lt:()=>i,SN:()=>D,Sk:()=>C,WX:()=>v,Wq:()=>U,ZJ:()=>S,Zh:()=>h,ac:()=>b,cP:()=>k,cq:()=>T,dP:()=>M,dR:()=>a,eB:()=>w,gz:()=>A,i0:()=>l,iD:()=>O,ll:()=>f,pN:()=>d,qs:()=>c,rh:()=>x,sD:()=>s,t3:()=>L,uh:()=>R,vu:()=>o,vy:()=>u,xI:()=>N,yG:()=>p,z6:()=>E});let a="toolbar--focusVisibleHover--yhCHK",i="toolbar--select--nPSf7",o="toolbar--active--gPMV7",s="toolbar--hand--aTLiK",l="toolbar--animate--Ykugz",c="toolbar--universalInsertCollage--8Mfz2",d="toolbar--universalInsert--zBZ5L",u="toolbar--universalInsertGoogleClassroom--lmwPr",m="toolbar--fakeButtonContainer--6x-IE",p="toolbar--toolbarFakeButtonTarget--ezcU0",h="toolbar--passthruLayout--fN4I1",_="toolbar--horizontalButton--fku14",g="toolbar--horizontalButtonDisabled--dTdTJ",f="toolbar--pointerEventsDisabled--O-23A",E="toolbar--tool--gLSDg",y="toolbar--toolIconIsDragging--I05Ql",b="toolbar--shapeAndStickyShadow--fBa-X",v="toolbar--hasDropShadow--Jng2W",T="toolbar--easeInDltItemFill--hEoHS",I="toolbar--shapeSpawnAnimation--l7z9o",S="toolbar--customAnimatedStickyV3--nF1jr",w="toolbar--bottomStickyV3--9S3Np toolbar--stickyAnimationPropertiesV3--kAjJ1",A="toolbar--middleStickyV3--3UJRP toolbar--stickyAnimationPropertiesV3--kAjJ1",C="toolbar--topStickyV3--AcNdy toolbar--stickyAnimationPropertiesV3--kAjJ1",N="toolbar--middleStickyContainerV3--qT3ep toolbar--backgroundStickyV3--HKPKb",L="toolbar--bottomStickyContainerV3--NYDOa toolbar--backgroundStickyV3--HKPKb",O="toolbar--fakeStickyContainer--AK9jp toolbar--backgroundStickyV3--HKPKb",R="toolbar--stickyOuterV3--ooJsb",P="toolbar--stickyCurlV3--hoyCr",D="toolbar--stickyMaskContainerV3--f2inx",k="toolbar--stickyMaskDynamicV3--LlmXc",M="toolbar--stickyMaskStaticV3--7ThBF",F="toolbar--showCurlV3--enAx7",x="toolbar--noTransition---ULgx",U="toolbar--stickyBaseV3--c-nvN",B="toolbar--reverse--spDLs",V="toolbar--fakeStickyV3--j8iUl toolbar--stickyAnimationPropertiesV3--kAjJ1"},492769:(e,r,n)=>{n.d(r,{EO:()=>s,MY:()=>o,Yv:()=>i,cN:()=>l,hT:()=>a,iJ:()=>c});let a={EN:"en",JA:"ja",FR:"fr",DE:"de",ES_ES:"es-es",ES_LA:"es-la",KO_KR:"ko-kr",PT_BR:"pt-br",AAA:"aaa",AAL:"aal",DU_PS:"du-ps",DU_DS:"du-ds"},i=[a.EN,a.JA,a.FR,a.DE,a.ES_ES,a.ES_LA,a.KO_KR,a.PT_BR,a.AAA,a.AAL,a.DU_PS,a.DU_DS],o=a.EN,s=[a.EN,a.JA,a.FR,a.DE,a.ES_ES,a.ES_LA,a.KO_KR,a.PT_BR,a.DU_DS],l=[a.FR,a.DE,a.ES_ES,a.ES_LA,a.KO_KR,a.PT_BR,a.DU_PS,a.DU_DS];a.FR,a.DE,a.ES_ES,a.ES_LA,a.KO_KR,a.PT_BR,a.DU_DS;let c=[a.AAA,a.AAL]},507589:(e,r,n)=>{n.d(r,{A:()=>h});var a=n(737859),i=n(721020),o=n(887184),s=n(627625),l=n(630090),c=n(344301),d=n(203108),u=n(773917),m=n(471222),p=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECTED=1]="DISCONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e))(p||{});class h{constructor(e,r,n,a,o,s={},c){this.args=e,this.viewRegistry=n,this.clientOptions=s,this.connection=new l.A(a,o,e,this.emitter,s),this.connection.addObserver(this),this.session=new i.A(e,r,n,this.emitter,(e,r)=>{this.requestPaginationChange(e,r)},()=>this.connection.isInitial(),c,s.shouldBubbleUpNonNullableResultErrors,s.errorsLoggedForAnalyticsFraction,s.useUnitTestObjectStore,s.enableClientSideOptionalCheck),this.addEventListener(this.healthListener.bind(this));for(let e=0;e<(s?.preloadedViews?.length??0);e++){let r=s?.preloadedViews?.[e],n=s?.preloadedViewArgs?.[e]??{};this.session.subscribe(r,n,()=>{}),this.preloadViewKeys.add((0,d.J)(r._name,n))}for(let e=0;e<(s?.mismatchedViews?.length??0);e++){let r=s?.mismatchedViews?.[e],n=s?.mismatchedViewArgs?.[e]??{};this.mismatchedPreloadMsgs.push({messageType:"unsubscribe",viewName:r,args:n})}}transactionId=1;syncDelayForDebugging=0;syncRequests=new Map;pendingGlobalOptimisticUpdates=new Set;globalOptimisticUpdateResolutionCallbacks=[];session;connection;emitter=new s.b;healthListeners=new Set;pendingOptimisticMutationList=[];pendingMutationList=[];preloadViewKeys=new Set;mismatchedPreloadMsgs=[];subscriptionRetries=new Map;cleanup(){this.connection.cleanup()}async connect(){await this.connection.connect()}async close(){await this.connection.closeWithoutReconnecting()}get userId(){return this.args.userId}addEventListener(e){return this.emitter.addListener(e)}setOptionalMissingForView(e,r){this.session.setOptionalMissingForView(e,r)}unsetOptionalMissingForView(e){this.session.unsetOptionalMissingForView(e)}removeEventListener(e){return this.emitter.removeListener(e)}healthListener(e){if("CONNECTION_STATE"===e.type){let r=this.getHealthStatusForConnectionState(e.state);for(let e of this.healthListeners)e(r)}}getHealthStatus(){return this.getHealthStatusForConnectionState(this.connection.getState())}getHealthStatusForConnectionState(e){return"connected"===e.type?0:"connecting"===e.type?2:1}addHealthListener(e){return this.healthListeners.add(e),()=>this.removeHealthListener(e)}removeHealthListener(e){this.healthListeners.delete(e)}sendExistingSubscriptions(){if(this.connection.isInitial())for(let e of this.mismatchedPreloadMsgs)this.connection.send(e);for(let{viewRef:e,args:r,traceId:n}of(this.session.startReconnectionStateForPaginationQueries(),this.session.uniqueSubscriptions()))if(!(this.connection.isInitial()&&this.preloadViewKeys.has((0,d.J)(e._name,r)))){if(!this.clientOptions.shouldSplayDesktopBellViewSubscription||this.clientOptions.splayDesktopBellConnConfig?.timesUtc.length||this.connection.isInitial()||"ActiveFileUsersForFileView"!==e._name&&"FilePresenterData"!==e._name&&"FileWithCommentsAndReactions"!==e._name&&"OrgByIdForPlanUserView"!==e._name&&"OrgByIdForPlanView"!==e._name&&"StatsigTeamsOrderView"!==e._name)this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n);else{let a=Math.floor(3e5*Math.random()),i=this.connection.getConnectionCount();(0,o.yy)(a).then(()=>{i===this.connection.getConnectionCount()&&this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n)})}}}handleMessage(e){switch(e.messageType){case"authSuccess":if(this.args.sessionId=e.sessionId,this.args.anonymousUserId=e.anonymousUserId,!this.connection.isAuthenticated()){(0,o.QI)(!1,"Expected connection to be in authenticated state");break}for(let e of this.syncRequests.values())this.requestSync(e);break;case"pendingMutations":this.hasUnresolvedGlobalOptimisticUpdates()?(this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.applyMutations(e.mutations)}),this.pendingMutationList.push(e.mutations),this.session.resolvePendingServerIdList(e.mutations)):this.session.applyMutations(e.mutations);break;case"syncFail":let r=this.syncRequests.get(e.transactionId);if(r){let n=r?.getRetryAfterMs();if(!n){this.handleAfterOptimisticUpdateResolved(e.transactionId);return}(0,o.QI)(!r.retryTimeout,"Already scheduled retry for sync request."),r.retryNumber++,r.retryTimeout=setTimeout(()=>{r.retryTimeout=null,this.requestSync(r)},n)}else(0,o.QI)(!1,"Received syncFail for unknown sync request"),this.handleAfterOptimisticUpdateResolved(e.transactionId);break;case"synced":let n=this.syncRequests.get(e.transactionId);n?(n.successCallback(),(0,o.QI)(!n.retryTimeout,"Sync request completed successfully while having a retry scheduled. This should never happen.")):this.emitEvent({type:"NO_SYNC_REQUEST_ON_CLIENT",transactionId:e.transactionId});break;case"viewSubscriptionFailed":"shed-load"===e.errorCode?this.retryErroredSubscription(e.liveViewKey,e.errorCode):(this.emitter.emit({type:"ERROR",error:new a.rT(e.errorCode)}),this.reportSubscriptionError(e.liveViewKey,e.errorCode),this.session.cleanupFailedSubscription(e.liveViewKey))}}onConnectionOpen(){this.sendExistingSubscriptions()}onConnectionClose(){this.clearSubscriptionRetries()}requestSubscription(e,r,n,a){let i={messageType:"subscribe",viewName:e._name,viewHash:e._hash,loadType:n,args:r,traceId:a},o=this.getViewPriority(e,n);this.connection.isConnected()&&(this.connection.send(i),this.emitter.emit({type:"SUBSCRIBE_VIEW_SERVER",view:e,args:r,priority:o,traceId:a}))}requestPaginationChange(e,r){let n={messageType:"paginationChangeMessage",operationType:"LoadNext",queryId:e,count:r.count,paginationArgs:r};this.connection.isConnected()&&this.connection.send(n)}subscribeBase(e,r,n,a){let i=this.session.hasActiveSubscriptions(e._name,r),o=this.session.subscribe(e,r,n,a);return i||(this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:e,priority:this.getViewPriority(e,"initial_load"),args:r,traceId:a}),this.requestSubscription(e,r,"initial_load",a)),o}getUnsubscribeFunction(e){return()=>{e.clientUnsubscribed=!0,(0,o.VG)(()=>{if(e.unsubscribe(),!this.session.hasActiveSubscriptions(e.view._name,e.args)&&this.connection.isConnected()){this.connection.send({messageType:"unsubscribe",viewName:e.view._name,args:e.args}),this.emitter.emit({type:"UNSUBSCRIBE_VIEW_SERVER",view:e.view,args:e.args});let r=(0,d.J)(e.view._name,e.args);clearTimeout(this.subscriptionRetries.get(r)?.retryTimer),this.subscriptionRetries.delete(r)}},2e3)}}getViewResult(e,r){return this.session.getViewResult(e,r)}viewHasStaticQueries(e){return!!this.viewRegistry.get(e._name)?.hasStaticQueries()}getViewPriority(e,r){return this.viewRegistry.get(e._name)?.getPriority(r)??a.$M}subscribe(e,r,n,a){let i=r;this.viewHasStaticQueries(e)&&!r.__requestId&&(i={...r,__requestId:(0,c.A)()});let o=this.subscribeBase(e,i,n,a);return this.getUnsubscribeFunction(o)}hasUnresolvedGlobalOptimisticUpdates(){return this.pendingGlobalOptimisticUpdates.size>0}handleBeforeOptimisticUpdateApplied(e){this.pendingGlobalOptimisticUpdates.add(e)}handleAfterOptimisticUpdateResolved(e){if(this.pendingGlobalOptimisticUpdates.delete(e),!this.hasUnresolvedGlobalOptimisticUpdates()){let e=this.globalOptimisticUpdateResolutionCallbacks;this.globalOptimisticUpdateResolutionCallbacks=[],this.emitter.emit({type:"MUTATIONS_BLOCKED_ON_OPTIMISTIC_UPDATE",count:e.length}),this.session.batchMutations(()=>{for(let r of e)r()}),this.pendingOptimisticMutationList=[],this.pendingMutationList=[]}}checkPotentiallyMissingMutations(e,r){if(this.clientOptions.checkPotentiallyMissingOptimisticMutations){if("create"===e||"update"===e)for(let[n,a]of Object.entries(r))for(let i in a){let o=a[i];if("create"===e&&!o.uuid)continue;let s=!1;for(let e of this.pendingMutationList)for(let[r,a]of Object.entries(e))if(n===r)for(let e of Object.values(a.instances))e.uuid&&o.uuid&&e.uuid===o.uuid?s=!0:e.id===i&&(s=!0);if(!s&&"update"===e){let e=o.uuid?this.session.stores[n]?.queries.instanceStatesByUuid.get(o.uuid):this.session.stores[n]?.queries.instanceStates.get(i);e&&(s=Object.keys(o).every(r=>JSON.stringify(o[r])===JSON.stringify(e.serverFields[r])))}this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:s,objectName:n,optimisticInstance:o,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}else if("delete"===e)for(let[n,a]of Object.entries(r))for(let i of Object.keys(a)){let a=!1;for(let e of this.pendingMutationList)for(let[r,o]of Object.entries(e))if(n===r)for(let e of Object.values(o.queries))"error"in e||!1!==e.results[i]||(a=!0);this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:a,objectName:n,optimisticInstance:null,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}}}async applyMutations(e,r,n){let a;let i=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutations(i,e,n),d=new Set;for(let e of c)e instanceof m.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");this.handleBeforeOptimisticUpdateApplied(i);try{a=await r}catch(r){throw this.session.removeShadowMutations(i,e,!1),this.handleAfterOptimisticUpdateResolved(i),r}let u=!1;try{this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:i}),await this.sync(i,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:i,mutationType:n}),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.clientOptions.shouldChangeOptimisticMutationRevertOrder?this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutations(i,e,u)}):this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.removeShadowMutations(i,e,u)}),u&&"create"!==n&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.checkPotentiallyMissingMutations(n,e)}),this.handleAfterOptimisticUpdateResolved(i)}return a}waitForServerSideObjectsWithUUIDs(e){let r=[];for(let[n,a]of Object.entries(e))for(let e of Object.keys(a))r.push(this.getIdFromUuid(n,e));return Promise.all(r)}async applyMutationsWithUUID(e,r,n){let a;let i=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutationsWithUUID(i,e,n);this.handleBeforeOptimisticUpdateApplied(i);let d=new Set;for(let e of c)e instanceof m.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");try{a=await r}catch(r){throw this.session.removeShadowMutationsWithUUID(i,e,!1),this.handleAfterOptimisticUpdateResolved(i),r}let u=!1;try{"create"===n&&0===Object.keys(l).length?(this.emitter.emit({type:"WAIT_SERVER_OBJECTS_STARTED",mutations:e}),await this.waitForServerSideObjectsWithUUIDs(e),await (0,o.yy)(this.syncDelayForDebugging),this.emitter.emit({type:"WAIT_SERVER_OBJECTS_ENDED",mutations:e})):(this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:i}),await this.sync(i,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:i,mutationType:"update"===n?"uuid_update":"delete"===n?"uuid_delete":"uuid_computed_create"})),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutationsWithUUID(i,e,u)}),u&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>this.checkPotentiallyMissingMutations(n,e)),this.handleAfterOptimisticUpdateResolved(i)}return a}getIdFromUuid(e,r){return this.session.getIdFromUuid(e,r)}requestSync(e){this.connection.isConnected()&&(this.connection.send(e.toPayload()),this.emitter.emit({type:"SYNC_STARTED",transactionId:e.transactionId,mutatedObjects:e.objectNameToQueryIds?[...e.objectNameToQueryIds.keys()]:[]}))}async sync(e=this.transactionId++,r,n,a){let[i,s]=(0,o.dS)(),l=new u.Q(e,s,r,n,a);this.syncRequests.set(e,l),this.requestSync(l),await i,this.syncDelayForDebugging&&await (0,o.yy)(this.syncDelayForDebugging),this.syncRequests.delete(e),this.emitter.emit({type:"SYNC_COMPLETED",transactionId:e})}retryErroredSubscription(e,r){this.subscriptionRetries.has(e)||(this.reportSubscriptionError(e,r),this.subscriptionRetries.set(e,{backoff:new o._c({backoffInitialMs:5e3,backoffMaxMs:3e5,backoffMultiplier:2})}));let n=this.subscriptionRetries.get(e);clearTimeout(n.retryTimer),n.retryTimer=setTimeout(()=>{clearTimeout(this.subscriptionRetries.get(e)?.retryTimer);let r=this.session.getActiveSubscription(e);if(!r)return;let n=this.connection.isInitial()?"initial_load":"refresh",a=this.getViewPriority(r.viewRef,n);this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:r.viewRef,priority:a,args:r.args,traceId:r.traceId}),this.requestSubscription(r.viewRef,r.args,n,r.traceId)},n.backoff.nextBackoffMs())}clearSubscriptionRetries(){for(let e of this.subscriptionRetries.values())clearTimeout(e.retryTimer);this.subscriptionRetries.clear()}reportSubscriptionError(e,r){this.emitter.emit({type:"SUBSCRIPTION_ERROR",errorCode:r,liveViewKey:e})}emitEvent(e){this.emitter.emit(e)}get debug(){let e=this.session.getViewSubscriptionsForDebugging(),r={},n={};for(let[a,i]of Object.entries(e))"loading"===i.status&&(r[a]=i),"errors"===i.status&&(n[a]=i);return{subscriptions:e,loadingSubscriptions:r,failedSubscriptions:n,prettyPrintLiveViewTree:e=>this.session.prettyPrintLiveViewTree(e),setOptimisticUpdateResolutionDelay:e=>this.syncDelayForDebugging=e,setOptionalMissingForView:(e,r)=>this.setOptionalMissingForView(e,r),unsetOptionalMissingForView:e=>this.unsetOptionalMissingForView(e),...this.connection.debug}}}},224231:(e,r,n)=>{n.d(r,{Agb:()=>a.Agb,Go1:()=>a.Go1,Hw9:()=>a.Hw9,N4S:()=>a.N4S,QKp:()=>a.QKp,TOI:()=>a.TOI,_YF:()=>a._YF,bUL:()=>a.bUL,pkU:()=>a.pkU,y4I:()=>a.y4I,zRx:()=>a.zRx});var a=n(972911)},203978:(e,r,n)=>{n.d(r,{$U:()=>P,C7:()=>o,Fh:()=>i,Jj:()=>A,KC:()=>S,OL:()=>_,QK:()=>D,QR:()=>l,Sh:()=>f,TO:()=>C,X5:()=>u,Xn:()=>h,_D:()=>a,aL:()=>s,bp:()=>p,gR:()=>T,lc:()=>d,nf:()=>m,nr:()=>g,qT:()=>R,rD:()=>c,w_:()=>N,xX:()=>O,yo:()=>w,zx:()=>I});var a=(e=>(e.IS_GUEST="ORG::IS_GUEST",e.IS_MEMBER="ORG::IS_MEMBER",e.IS_ADMIN="ORG::IS_ADMIN",e.CAN_SELF_UPGRADE="ORG::CAN_SELF_UPGRADE",e.CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED="ORG::CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED",e.CANNOT_JOIN_ORG_GUESTS_BANNED="ORG::CANNOT_JOIN_ORG_GUESTS_BANNED",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="ORG::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="ORG::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="ORG::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="ORG::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="ORG::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="ORG::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(a||{}),i=(e=>(e.CAN_VIEW="TEAM::CAN_VIEW",e.CAN_EDIT="TEAM::CAN_EDIT",e.CAN_ADMIN="TEAM::CAN_ADMIN",e.IS_OWNER="TEAM::IS_OWNER",e.EDIT_ROLE_ACCESS="TEAM::EDIT_ROLE_ACCESS",e.ADMIN_ROLE_ACCESS="TEAM::ADMIN_ROLE_ACCESS",e.CAN_DISCOVER="TEAM::CAN_DISCOVER",e.CAN_SELF_UPGRADE="TEAM::CAN_SELF_UPGRADE",e.CAN_VIEW_IN_ADMIN="TEAM::CAN_VIEW_IN_ADMIN",e.CAN_VIEW_LIMITED_INFO="TEAM::CAN_VIEW_LIMITED_INFO",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="TEAM::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="TEAM::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="TEAM::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="TEAM::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="TEAM::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="TEAM::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(i||{}),o=(e=>(e.CAN_VIEW="FOLDER::CAN_VIEW",e.CAN_EDIT="FOLDER::CAN_EDIT",e.IS_OWNER="FOLDER::IS_OWNER",e.CAN_DISCOVER="FOLDER::CAN_DISCOVER",e.CAN_CREATE_COOPER_FILE="FOLDER::CAN_CREATE_COOPER_FILE",e.CAN_CREATE_FIGJAM_FILE="FOLDER::CAN_CREATE_FIGJAM_FILE",e.CAN_CREATE_DESIGN_FILE="FOLDER::CAN_CREATE_DESIGN_FILE",e.CAN_CREATE_SITES_FILE="FOLDER::CAN_CREATE_SITES_FILE",e.CAN_CREATE_SLIDES_FILE="FOLDER::CAN_CREATE_SLIDES_FILE",e.CAN_MODIFY_ROLES="FOLDER::CAN_MODIFY_ROLES",e.CAN_MOVE="FOLDER::CAN_MOVE",e.CAN_TRANSFER_EXTERNALLY="FOLDER::CAN_TRANSFER_EXTERNALLY",e.CAN_TRANSFER_COPY="FOLDER::CAN_TRANSFER_COPY",e.CAN_TRASH="FOLDER::CAN_TRASH",e.CAN_RESTORE="FOLDER::CAN_RESTORE",e.CAN_PERMANENTLY_DELETE="FOLDER::CAN_PERMANENTLY_DELETE",e.SHOULD_USE_CONNECTED_PLAN_USER_DESIGN="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DESIGN",e.SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM",e.SHOULD_USE_CONNECTED_PLAN_USER_SLIDES="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_SLIDES",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.CAN_CONNECT="FOLDER::CAN_CONNECT",e.CAN_VIEW_LIMITED_INFO="FOLDER::CAN_VIEW_LIMITED_INFO",e))(o||{}),s=(e=>(e.CAN_VIEW_PROTOTYPE="REPO::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="REPO::CAN_VIEW",e.CAN_EDIT="REPO::CAN_EDIT",e.CAN_ADMIN="REPO::CAN_ADMIN",e.IS_OWNER="REPO::IS_OWNER",e.CAN_MANAGE="REPO::CAN_MANAGE",e.CAN_MOVE="REPO::CAN_MOVE",e.CAN_VIEW_LINK_ACCESS="REPO::CAN_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="REPO::CAN_EDIT_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="REPO::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_ORG_EDIT_LINK_ACCESS="REPO::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_DISCOVER="REPO::CAN_DISCOVER",e.SHOULD_USE_CONNECTED_PLAN_USER="REPO::SHOULD_USE_CONNECTED_PLAN_USER",e))(s||{}),l=(e=>(e.CAN_VIEW_PROTOTYPE="FILE::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="FILE::CAN_VIEW",e.CAN_EDIT="FILE::CAN_EDIT",e.CAN_EDIT_CANVAS="FILE::CAN_EDIT_CANVAS",e.CAN_PUBLISH_TEMPLATE="FILE::CAN_PUBLISH_TEMPLATE",e.CAN_INSERT_TEMPLATE="FILE::CAN_INSERT_TEMPLATE",e.CAN_ADMIN="FILE::CAN_ADMIN",e.IS_OWNER="FILE::IS_OWNER",e.CAN_BECOME_EDITOR="FILE::CAN_BECOME_EDITOR",e.CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT="FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT",e.CAN_MANAGE="FILE::CAN_MANAGE",e.HAS_ROLE_ACCESS="FILE::HAS_ROLE_ACCESS",e.CAN_BE_MENTIONED_IN_COMMENT="FILE::CAN_BE_MENTIONED_IN_COMMENT",e.CAN_DOWNLOAD_FILE="FILE::CAN_DOWNLOAD_FILE",e.CAN_EXPORT="FILE::CAN_EXPORT",e.CAN_ACCESS_FILE_THROUGH_API="FILE::CAN_ACCESS_FILE_THROUGH_API",e.CAN_MODIFY_ROLES="FILE::CAN_MODIFY_ROLES",e.CAN_VIEW_METADATA="FILE::CAN_VIEW_METADATA",e.CAN_GAIN_VIEW="FILE::CAN_GAIN_VIEW",e.CAN_GAIN_VIEW_PROTOTYPE="FILE::CAN_GAIN_VIEW_PROTOTYPE",e.CAN_ACCESS_FRAGMENTS="FILE::CAN_ACCESS_FRAGMENTS",e.CAN_ACCESS_LIBRARY="FILE::CAN_ACCESS_LIBRARY",e.CAN_RENAME="FILE::CAN_RENAME",e.CAN_DELETE="FILE::CAN_DELETE",e.CAN_TRASH="FILE::CAN_TRASH",e.CAN_RESTORE="FILE::CAN_RESTORE",e.CAN_RESTORE_TO_OTHER_FOLDERS="FILE::CAN_RESTORE_TO_OTHER_FOLDERS",e.CAN_PERMANENTLY_DELETE="FILE::CAN_PERMANENTLY_DELETE",e.CAN_MOVE="FILE::CAN_MOVE",e.CAN_FAVORITE="FILE::CAN_FAVORITE",e.CAN_VIEW_AND_CREATE_COMMENTS="FILE::CAN_VIEW_AND_CREATE_COMMENTS",e.CAN_MOVE_COMMENTS="FILE::CAN_MOVE_COMMENTS",e.CAN_EDIT_IGNORE_PAID_STATUS="FILE::CAN_EDIT_IGNORE_PAID_STATUS",e.CAN_EDIT_IGNORE_EDU_GRACE_PERIOD="FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD",e.CAN_VIEW_LINK_ACCESS="FILE::CAN_VIEW_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="FILE::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="FILE::CAN_EDIT_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS="FILE::CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS",e.CAN_ORG_EDIT_LINK_ACCESS="FILE::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_VIEW_METADATA_LINK_ACCESS="FILE::CAN_VIEW_METADATA_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ACCESS_FULL_DEV_MODE="FILE::CAN_ACCESS_FULL_DEV_MODE",e.IS_ELIGIBLE_FOR_DEV_MODE_TRIAL="FILE::IS_ELIGIBLE_FOR_DEV_MODE_TRIAL",e.IS_IN_DEV_MODE_TRIAL="FILE::IS_IN_DEV_MODE_TRIAL",e.DEV_MODE_TRIAL_REQUEST_PENDING="FILE::DEV_MODE_TRIAL_REQUEST_PENDING",e.DEV_MODE_REQUEST_PENDING="FILE::DEV_MODE_REQUEST_PENDING",e.DEV_MODE_REQUEST_DENIED="FILE::DEV_MODE_REQUEST_DENIED",e.CAN_ACCESS_DEV_MODE_ENTRY_POINT="FILE::CAN_ACCESS_DEV_MODE_ENTRY_POINT",e.CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS="FILE::CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS",e.CAN_ACCESS_FULL_CODE_CONNECT="FILE::CAN_ACCESS_FULL_CODE_CONNECT",e.CAN_USE_DEV_MODE_DEMO_FILE="FILE::CAN_USE_DEV_MODE_DEMO_FILE",e.CAN_USE_FIGMA_AI="FILE::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="FILE::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.CAN_USE_FIGJAM_AI="FILE::CAN_USE_FIGJAM_AI",e.CAN_USE_SLIDES_AI="FILE::CAN_USE_SLIDES_AI",e.CAN_USE_FRAGMENT_SEARCH_AI="FILE::CAN_USE_FRAGMENT_SEARCH_AI",e.CAN_USE_SLIDES_DESIGN_TOGGLE="FILE::CAN_USE_SLIDES_DESIGN_TOGGLE",e.CANNOT_PUBLISH_TO_COMMUNITY="FILE::CANNOT_PUBLISH_TO_COMMUNITY",e.CAN_SEND_WEBHOOK="FILE::CAN_SEND_WEBHOOK",e.IS_WORKSPACE_VISIBLE="FILE::IS_WORKSPACE_VISIBLE",e.CAN_PIN_TO_WORKSPACE="FILE::CAN_PIN_TO_WORKSPACE",e.CAN_VIEW_WORKSPACE_PIN="FILE::CAN_VIEW_WORKSPACE_PIN",e.SEAT_TYPE_PAID_STATUS_TEST_PERMISSION="FILE::SEAT_TYPE_PAID_STATUS_TEST_PERMISSION",e.MUST_UPGRADE_TO_SHARE_DRAFT="FILE::MUST_UPGRADE_TO_SHARE_DRAFT",e.MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT="FILE::MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT",e.MUST_REQUEST_EDITOR_ROLE_TO_EDIT="FILE::MUST_REQUEST_EDITOR_ROLE_TO_EDIT",e.CAN_ACCESS="FILE::CAN_ACCESS",e.CAN_CREATE_BRANCH="FILE::CAN_CREATE_BRANCH",e.CAN_EDIT_OR_ACCESS_FULL_DEV_MODE="FILE::CAN_EDIT_OR_ACCESS_FULL_DEV_MODE",e.SHOULD_USE_CONNECTED_PLAN_USER="FILE::SHOULD_USE_CONNECTED_PLAN_USER",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FILE::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.MUST_REQUEST_UPGRADE_TO_EDIT_DEVELOPER_LINKS="FILE::MUST_REQUEST_UPGRADE_TO_EDIT_DEVELOPER_LINKS",e))(l||{}),c=(e=>(e.CAN_VIEW="COLLECTION_PAGE::CAN_VIEW",e))(c||{}),d=(e=>(e.CAN_VIEW="HUB_FILE::CAN_VIEW",e.CAN_DUPLICATE="HUB_FILE::CAN_DUPLICATE",e.CAN_ADMIN_COMMENTS="HUB_FILE::CAN_ADMIN_COMMENTS",e))(d||{}),u=(e=>(e.CAN_VIEW="PLUGIN::CAN_VIEW",e.CAN_ADMIN_COMMENTS="PLUGIN::CAN_ADMIN_COMMENTS",e))(u||{}),m=(e=>(e.CAN_VIEW="LITMUS_PROJECT::CAN_VIEW",e))(m||{}),p=(e=>(e.CAN_VIEW="WORKSPACE::CAN_VIEW",e.CAN_ADMIN="WORKSPACE::CAN_ADMIN",e.CAN_CREATE_TEAM="WORKSPACE::CAN_CREATE_TEAM",e))(p||{}),h=(e=>(e.IS_GUEST="PLAN::IS_GUEST",e.IS_MEMBER="PLAN::IS_MEMBER",e.IS_ADMIN="PLAN::IS_ADMIN",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="PLAN::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="PLAN::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="PLAN::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_UPGRADE_COLLABORATOR="PLAN::CAN_UPGRADE_COLLABORATOR",e.CAN_UPGRADE_DEVELOPER="PLAN::CAN_UPGRADE_DEVELOPER",e.CAN_UPGRADE_EXPERT="PLAN::CAN_UPGRADE_EXPERT",e.CAN_USE_FILE_VIEW_HISTORY="PLAN::CAN_USE_FILE_VIEW_HISTORY",e.NEED_UPGRADE_COLLABORATOR="PLAN::NEED_UPGRADE_COLLABORATOR",e.NEED_UPGRADE_DEVELOPER="PLAN::NEED_UPGRADE_DEVELOPER",e.NEED_UPGRADE_EXPERT="PLAN::NEED_UPGRADE_EXPERT",e.CAN_CONNECT="PLAN::CAN_CONNECT",e))(h||{}),_=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(_||{}),g=(e=>(e.CAN_ADMIN="PROFILE::CAN_ADMIN",e.CAN_SELL_RESOURCES_ON_COMMUNITY="PROFILE::CAN_SELL_RESOURCES_ON_COMMUNITY",e))(g||{}),f=(e=>(e.CAN_VIEW="RESOURCE::CAN_VIEW",e))(f||{});let E=["FILE::CAN_EDIT","FILE::CAN_MANAGE","FILE::CAN_EDIT_CANVAS","FILE::CAN_PUBLISH_TEMPLATE","FILE::CAN_RENAME","FILE::CAN_MOVE_COMMENTS","FILE::CAN_EDIT_IGNORE_PAID_STATUS","FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD","FILE::CAN_BECOME_EDITOR","FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT"],y=[...E,"FILE::CAN_MODIFY_ROLES","FILE::CAN_DELETE"],b=["FOLDER::CAN_VIEW","FOLDER::CAN_DISCOVER","FOLDER::CAN_EDIT","FOLDER::CAN_MODIFY_ROLES","FOLDER::CAN_CREATE_DESIGN_FILE","FOLDER::CAN_CREATE_FIGJAM_FILE","FOLDER::CAN_CREATE_SLIDES_FILE"];[...b],[...b],[...E],[...y];var v=(e=>(e.Allow="ALLOW",e.Deny="DENY",e))(v||{});let T=100,I=300,S=900,w=999;var A=(e=>(e.ORG="ORG",e.HUB_FILE="HUB_FILE",e.TEAM="TEAM",e.FOLDER="FOLDER",e.FILE_REPO="FILE_REPO",e.FILE="FILE",e.PLUGIN="PLUGIN",e.WORKSPACE="WORKSPACE",e.PLAN="PLAN",e.COLLECTION_PAGE="COLLECTION_PAGE",e.LITMUS_PROJECT="LITMUS_PROJECT",e.PROFILE="PROFILE",e.RESOURCE="RESOURCE",e))(A||{}),C=(e=>(e.TEST_FLAG="test_flag",e.CAMPFIRE="campfire",e.CAMPFIRE_PERMISSIONS_SHUTOFF="campfire_permissions_shutoff",e.CAN_DISCOVER_PENDING_INVITE="can_discover_pending_invite",e.COMMUNITY_HUB_ADMIN="community_hub_admin",e.COMMUNITY_HUB_REVIEWER="community_hub_admin_reviewer",e.COMMUNITY_HUB_IMAGE_INSPECTION="community_hub_image_inspection",e.EXEMPT_GUESTS_FROM_MFA_REQUIREMENT="exempt_guests_from_mfa_requirement",e.EXT_PLUGIN_CAN_VIEW_PERMS_V2_REFACTOR="ext_plugin_can_view_perms_v2_refactor",e.FC_GENERAL="fc_general",e.FILE_CANVAS_MENTION_CAN_ACCESS="file_canvas_mentions_can_access",e.FILE_VIEW_HISTORY_PV2="file_view_history_pv2",e.COMMENT_MENTIONS_CAN_ACCESS="comment_mentions_can_access",e.WSLP_READ_PUBLISH_SCOPE="wslp_read_publish_scope",e.SITES="sites",e.TOU_DENY_EDITS_RESTRICTED_DRAFTS="tou_pv2_deny_edits_for_restricted_drafts_folder",e.TOU_DENY_REPO_EDITS_RESTRICTED_DRAFTS="tou_pv2_deny_repo_edits_for_restricted_drafts",e.PERM_ENABLE_DEBUGGER_LOG_FOR_USER="perm_enable_debugger_log_for_user",e.PRO_TEMPLATES_FIGJAM="pro_templates_figjam",e.ORG_FILE_EXPORT_SETTING="org_file_export_setting",e.FC_PLAN_ENABLED="fc_plan_enabled",e.COOPER="cooper",e.SANCTIONED_TEAMS="sanctioned_teams",e.PIPER_PLUGS_IN_COMMUNITY_PUBLISH="piper_plugs_in_community_publish",e.LITMUS="dt_litmus",e.DS_STS_KIT="ds_sts_kit",e.CMTY_SITES_TEMPLATE_PICKER="cmty_sites_template_picker",e.COOPER_TEMPLATE_DISCOVERY_VIA_RES_PLAT="cooper_template_discovery_via_res_plat",e.MFA_WITH_GOOGLE_SSO="mfa_with_google_sso",e.DEV_MODE_DEMO_FILE="dev_mode_demo_file",e.PRODUCT_TRIALS_LG="product_trials_lg",e.RES_PLAT_INTERNAL_RESOURCES="res_plat_internal_resources",e.SLIDES_STARTER_TEAM_DESIGN_TOGGLE="slides_starter_team_design_toggle",e))(C||{}),N=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(N||{}),L=(e=>(e.IAM="iam",e.UNOWNED="unowned",e.WORKFLOW="workflow",e.SEARCH_CORE="search_core",e.COMMUNITY="community",e.DEVELOPER_TOOLS="developer_tools",e.SCALE="scale",e.EXTENSIBILITY="extensibility",e.BILLING="billing",e.MONETIZATION="monetization",e.SLIDES="slides",e.WAYFINDING="wayfinding",e.AI_INFRA="ai_infra",e.DS_ECOSYSTEMS="ds_ecosystems",e.BUZZ="buzz",e.SITES="sites",e.ACTIVATION="activation",e))(L||{});let O=3,R=6,P=15;var D=(e=>(e.TEST="test",e.FILE_DENY_CONNECTED_GUEST_CAN_MOVE="file_deny_connected_guest_can_move",e.FILE_REPO_DENY_CONNECTED_GUEST_CAN_MOVE="file_repo_deny_connected_guest_can_move",e.CONNECTED_FOLDER_DENY_CAN_TRASH_DESPITE_CAN_MANAGE_LIFECYCLE="connected_folder_deny_can_trash_despite_can_manage_lifecycle",e))(D||{})},972911:(e,r,n)=>{n.d(r,{Agb:()=>i.Ag,Go1:()=>i.Go,Hw9:()=>o.Hw9,N4S:()=>o.N4S,QKp:()=>a.QK,TOI:()=>a.TO,_YF:()=>i._Y,bUL:()=>i.bU,pkU:()=>i.pk,y4I:()=>i.y4,zRx:()=>o.zRx}),n(928895),n(459528),n(979579),n(795218),n(981825),n(553035),n(612995),n(475494),n(716634),n(825018),n(233086),n(7397),n(588978),n(570003),n(366380);var a=n(203978);n(48863),n(779829),n(787813);var i=n(399687),o=n(107206);n(346172),{...a.Fh,...a.C7,...a.aL,...a.QR,...a._D,...a.lc,...a.nf,...a.X5,...a.bp,...a.Xn,...a.rD,...a.nr,...a.Sh}},666940:(e,r,n)=>{n.d(r,{u:()=>f});var a=n(411855),i=n(163773),o=n(841962),s=n(608680),l=n(119134),c=n(627254),d=n(800628),u=n(783657),m=n(926996),p=n(507121),h=n(682403),_=n(84530),g=n(513874);function f(){(0,u.F$)("prototype-lib").then(()=>{async function e(e){if(window.androidProtoPreloadedTabStart=performance.now(),!(0,o.Ay)().user_data){i.Ay.replace(e.path,null),i.Ay.reload("preloaded tab not logged in");return}try{let{data:{meta:r}}=await _.S.getIncludeFolderTeamCanEdit({includeFolderTeamCanEdit:!0,fileKey:e.fileKey}),n=r.parent_org_id;(0,o.Hk)(r),console.log(`Opening file ${e.fileKey} in a preloaded tab at ${e.path} with org ${n}`),(0,o.Ay)().org_id=n,(0,h.Ri)(),window.startUserStateXHR(),i.Ay.replace(e.path,null),await (0,s.n)(E,()=>d.t)}catch(r){console.error("Reloading because of",r),i.Ay.replace(e.path,null),i.Ay.reload("preloaded tab error")}}window.androidProtoFsPreloaded=performance.now(),c.xK.start("androidProtoEditorPreloaded"),window.startPreloadedTab=e})}function E(){let e=(0,l.s)();return"prototype"!==(0,m.z3)()?null:a.createElement(p.uW.Provider,{value:e},a.createElement(g.V,null))}},797834:(e,r,n)=>{n.d(r,{wZ:()=>d,xv:()=>s});var a=n(710636),i=n(229743);let o=i.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,832206)).then(e=>e.AutosaveLogOutModal),(0,a.Ij)("AutosaveLogOutModal")),s=(0,a.Ju)(o),l=i.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,832206)).then(e=>e.HasAutosaveChangesModal),(0,a.Ij)("HasAutosaveChangesModal"));(0,a.Ju)(l);let c=i.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,821367)).then(e=>e.AutosaveLearnMoreModal),(0,a.Ij)("AutosaveLearnMoreModal")),d=(0,a.Ju)(c)},651185:(e,r,n)=>{n.d(r,{B7:()=>u.B,In:()=>d.I,Ph:()=>y,dR:()=>p,lk:()=>_,vn:()=>E});var a=n(710636),i=n(692401),o=n(68129),s=n(391645),l=n(104458),c=n(607579),d=n(117769),u=n(977174);let m=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(5705),n.e(8964)]).then(n.bind(n,605603)).then(e=>e.UniversalUpgradeSequence),(0,a.Ij)("UniversalUpgradeSequence")),p=(0,a.Ju)(m,"UniversalUpgradeSequence"),h=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(5705),n.e(8964)]).then(n.bind(n,125476)).then(e=>e.UpgradeContactSalesModal),(0,a.Ij)("UpgradeContactSalesModal")),_=(0,a.Ju)(h,"UpgradeContactSalesModal"),g=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(5705),n.e(8964)]).then(n.bind(n,663362)).then(e=>e.OrgUpgradeMultiTeamModal),(0,a.Ij)("OrgUpgradeMultiTeamModal"));(0,a.Ju)(g,"OrgUpgradeMultiTeamModal");let f=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(5705),n.e(8964)]).then(n.bind(n,609735)).then(e=>e.OrgUpgradeSingleTeamModal),(0,a.Ij)("OrgUpgradeSingleTeamModal"));(0,a.Ju)(f,"OrgUpgradeSingleTeamModal"),(0,a.Ju)(l.Y);let E=(0,a.Ju)(c.T),y=(0,a.Ju)(o.T);(0,a.Ju)(s.D)},911339:(e,r,n)=>{n.d(r,{WA:()=>_,_u:()=>g});var a=n(411855),i=n(629019),o=n.n(i);n(538971),n(841962);var s=n(621847),l=n(299009);n(663844);var c=n(693565),d=n(76265);n(728764),n(105300),n(345294);var u=n(727903);n(712204),n(383719);var m=n(397192),p=n(339290);function h(e){return a.createElement("div",{style:{height:e.height||12}})}function _(){return a.createElement("span",null,(0,d.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:a.createElement("a",{rel:"noopener noreferrer",className:m.uD,href:"/ssa",target:"_blank"},(0,d.tx)("org_self_serve.review_step.software_services_agreement")),renewalLink:a.createElement("a",{rel:"noopener noreferrer",className:m.uD,href:(0,d.dS)("/renewal-and-cancellation"),target:"_blank"},(0,d.tx)("org_self_serve.review_step.renewal_and_cancellation_terms"))}))}function g(e){let r=new u.vr(e.currency);return a.createElement("div",{className:m.jg},a.createElement("div",{className:o()(m.M7,m.Et)},a.createElement("div",{className:m.cc},a.createElement(c.B,{svg:p.A,className:m.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),a.createElement("div",{className:m.W},(0,d.tx)("org_self_serve.confirmation_step.you_re_all_set"))),a.createElement("div",{className:m.Jo},a.createElement("div",{className:m.Qv},(0,d.tx)("org_self_serve.confirmation_step.order_confirmation_message")),a.createElement(h,{height:24}),a.createElement("div",{className:m.aK}),a.createElement(h,{height:24}),a.createElement("div",{className:m.N5},a.createElement("div",{className:m.I1},(0,d.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),a.createElement("span",{className:m.iv},r.formatMoney(e.totalCents,{showCents:!1}))),a.createElement(h,{height:24}),a.createElement("div",{className:m.aK}),a.createElement(h,{height:32}),a.createElement("div",{className:m.Ed},!e.orgMigrated&&a.createElement(a.Fragment,null,a.createElement(l.kt,null),a.createElement("div",{className:m.nm},(0,d.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization"))),a.createElement(s.$$,{disabled:!e.orgMigrated,className:m.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button"},(0,d.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")))))))}},383719:(e,r,n)=>{n.d(r,{LJ:()=>W,VE:()=>G,wW:()=>H});var a=n(411855),i=n(188507),o=n(841962),s=n(600433),l=n(512799),c=n(576467),d=n(640747),u=n(621847),m=n(663844),p=n(693565),h=n(265851),_=n(76265),g=n(910164),f=n(648800),E=n(105300),y=n(233950),b=n(43053),v=n(736041),T=n(622667),I=n(140835),S=n(190500),w=n(548759),A=n(437069),C=n(223400),N=n(190253),L=n(727903),O=n(688656),R=n(710636),P=n(712204),D=n(182390),k=n(499008),M=n(874360),F=n(711172),x=n(206352),U=n(265871),B=n(950142);function V(e){return a.createElement("div",{style:{height:e.height||12}})}function G(e){return a.createElement(k.XV,{containerClassName:x.jT,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},a.createElement("div",{className:x.qq},a.createElement("div",{className:x.Hc},(0,_.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")),a.createElement("div",{className:x.JU},(0,_.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")),a.createElement(V,{height:12}),a.createElement("a",{onClick:e.onFileBrowserClick},(0,_.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser"))))}function H(e){return a.createElement(k.XV,{containerClassName:x.jT,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},a.createElement("div",{className:x.qq},a.createElement("div",{className:x.Hc},(0,_.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")),a.createElement("div",{className:x.JU},(0,_.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:a.createElement("a",{onClick:e.onContactSales},(0,_.tx)("org_self_serve.modals.existing_org_admin.contact_sales"))})),a.createElement(V,{height:4}),a.createElement(V,{height:12}),a.createElement("a",{onClick:e.onFileBrowserClick},(0,_.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser"))))}function W(e){return a.createElement(k.XV,{containerClassName:x.jT,headerSize:"hidden",onClose:e.onClose,title:"",minWidth:580,maxWidth:580,dataTestId:"true-up-edu-modal"},a.createElement("div",{className:x.RO},a.createElement(p.B,{className:x.g8,svg:B.A,onClick:e.onClose}),a.createElement("div",{className:x.Hc},(0,_.tx)("org_self_serve.modals.true_up_edu.figma_grows_with_your_team")),a.createElement("div",{className:x.JU},(0,_.tx)("org_self_serve.modals.true_up_edu.members_can_add_new_editors.seat_rename")),a.createElement(V,{height:8}),a.createElement("div",{className:x.zl},(0,_.tx)("org_self_serve.modals.true_up_edu.what_to_expect_at_true_up")),a.createElement("div",{className:x.JU},(0,_.tx)("org_self_serve.modals.true_up_edu.true_up_explanation.seat_rename",{seeFullDetails:a.createElement("a",{href:"https://help.figma.com/hc/articles/360040328293",target:"_blank"},(0,_.tx)("org_self_serve.modals.true_up_edu.see_full_details"))}))))}(0,R.Ju)(function(e){let r=e.isProTeam?C.H5.exclude([N.PE]):C.H5,[n,i]=(0,a.useState)(r.dict(r=>e.seatDataByLicenseType[r]?.currentSeats||0)),[c,d]=(0,a.useState)(null),u=e=>{let r=n[e];void 0!==r&&r<99&&i({...n,[e]:r+1})},m=r=>{let a=e.seatDataByLicenseType[r],o=n[r];null!=a&&null!=o&&o>a.minSeats&&i({...n,[r]:o-1})},h=(e,r)=>{if(""===e.target.value){r(0);return}let n=parseInt(e.target.value);isNaN(n)||r(n)},g=new L.vr(e.currency),f=n[N.tL],E={[N.vu]:{headerString:(0,_.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:n[N.vu],shouldShowDevModeIncludedText:!0},[N.tL]:{headerString:(0,_.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:f,shouldShowDevModeIncludedText:!1},[N.PE]:{headerString:(0,_.t)("all_carts.dev_mode_only_seats"),totalSeatCount:n[N.PE]??0,shouldShowDevModeIncludedText:!1}};return a.createElement(k.Eo,{onSubmit:()=>{let a=!1;if(r.forEach(r=>{let i=n[r],o=e.seatDataByLicenseType[r]?.minSeats||0;void 0!==i&&!1===a&&(i<o||i>99)&&(d(r),a=!0)}),a)return;let i=r.reduce((e,r)=>e+(n[r]||0),0);e.minTotalSeats&&i<e.minTotalSeats?d("total"):(e.dispatch(v.Ce()),e.updateAdditionalSeats(n))},confirmText:(0,_.t)("all_carts.save"),cancelText:(0,_.t)("all_carts.cancel"),title:(0,_.t)("all_carts.add_additional_editors.seat_rename")},a.createElement("div",{className:x.cI},c&&a.createElement("div",{className:x.jy},a.createElement(p.B,{className:x.xS,svg:U.A}),a.createElement("div",{className:x.O2},c===N.vu&&(0,_.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.vu].minSeats}),c===N.tL&&(0,_.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.tL].minSeats}),c===N.PE&&(0,_.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.PE]?.minSeats||0}),"total"===c&&!!e.minTotalSeats&&((0,o.kc)().org_checkout_min_seat_info_copy?(0,_.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.vu].minSeats,seatsText:(0,_.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,_.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.vu].minSeats})}):(0,_.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))))),r.sort(C.AG).map(r=>{let o=E[r],c=e.seatDataByLicenseType[r],d=n[r];return void 0===o||void 0===c||void 0===d?a.createElement(a.Fragment,null):a.createElement("div",{key:r},a.createElement(V,{height:16}),a.createElement("div",{className:x.FY},o.headerString),o.shouldShowDevModeIncludedText&&a.createElement(a.Fragment,null,a.createElement(V,{height:4}),a.createElement(s.G,null)),a.createElement(V,{height:12}),a.createElement(l.s,{"data-testid":r+"-seat_counter",billableProductKey:(0,A.Zx)(r),incrementSeats:()=>u(r),decrementSeats:()=>m(r),numSeats:d,minSeatsCount:c.minSeats,headerText:g.formatMoney(o.totalSeatCount*c.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,b.mx)(e.showAnnualPrice,o.totalSeatCount,!0,c.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>h(e,e=>{i({...n,[r]:e})})}))}),a.createElement(V,{height:18}),a.createElement("div",{className:x.yF}))},"AdditionalEditorsModal");var K=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(K||{});function Y({userData:e,checkboxHandler:r}){let[n,o]=(0,a.useState)(0),s=(0,i.wA)(),l=({rect:e,designChecked:a,...i})=>{if(r(i),i.newVal&&n<3){o(e=>e+1);let r=a?(0,_.t)("checkout.switch_seat_from_design_to_devmode"):(0,_.t)("checkout.enabled_devmode");s(T.eB({target:{kind:O.Ui.TEXT,text:r},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:O.Zj.RIGHT,hideAfterDelay:1e3}))}};return a.createElement(a.Fragment,null,e.map((n,i)=>a.createElement("div",{"data-testid":"user-data-row",key:n.user.id},a.createElement($,{rowType:"data"},a.createElement(P.az,{entity:n.user,includeUserEmailAddress:!0,size:24}),a.createElement(q,{userInfo:n}),a.createElement(E.S,{checked:n.designEditor,onChange:e=>{r({userId:n.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),a.createElement(u.tB,{checked:n.devMode,className:x.e5,onChange:e=>{l({designChecked:n.designEditor,userId:n.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),a.createElement(u.tB,{checked:n.figjamEditor,className:x.UO,onChange:e=>{r({userId:n.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})),i!==e.length-1&&a.createElement(j,null))))}function $({rowType:e,children:r}){let n="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return a.createElement(f.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0},r.map((e,r)=>a.createElement(f.Y,{key:r,width:n[r],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16}},e)))}function j(){return a.createElement("div",{className:h.s.wFull.colorBgTertiary.h1.$})}function z({teamId:e}){return a.createElement("div",{className:h.s.w8.h8.bRadius2.minW8.$,style:g.sx.add({backgroundColor:(0,D.$L)(e,D.us)}).$})}function q({userInfo:e}){return e.teams.length>1?a.createElement("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":O.Ib.SPECIAL,"data-tooltip":F.l,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0},a.createElement(y.E,{color:"default"},(0,_.tx)("all_carts.editor_table.multiple_teams"))):a.createElement(f.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start"},a.createElement(z,{teamId:e.teamIds[0]}),a.createElement("div",{className:h.s.noWrap.ellipsis.overflowHidden.$},a.createElement(y.E,{color:"default"},e.teams[0]?.name)))}(0,R.Ju)(function({users:e,updateSelectedEditors:r,updateAdditionalEmptySeats:n,currency:i,minTotalSeats:o,dispatch:s,seatInfo:p,monthlyPriceByProduct:h}){let[g,E]=(0,a.useState)(e),[b,T]=(0,a.useState)({design:p.design.additionalSeatCount,figjam:p.figjam.additionalSeatCount,dev_mode:p.dev_mode.additionalSeatCount}),A=(0,a.useMemo)(()=>{let e=0,r=0,n=0;for(let a of Object.values(g))a.designEditor&&e++,a.devMode&&n++,a.figjamEditor&&r++;return(e+=b.design,n+=b.dev_mode,r+=b.figjam,o&&e+r+n<o)?3:e<p.design.minCount||e>99?1:r<p.figjam.minCount||r>99?2:0},[b,g,o,p]),C=e=>{b[e]>=99||T(r=>({...r,[e]:r[e]+1}))},O=e=>{b[e]<=0||T(r=>({...r,[e]:r[e]-1}))},R=(e,r)=>{let n=""===e.target.value?0:parseInt(e.target.value);isNaN(n)||T(e=>({...e,[r]:n}))},P=new L.vr(i),D=()=>{s(v.Ce())};return a.createElement(I.fu,{name:"Select Editors Modal"},a.createElement(M.Nb,{size:864,maxHeight:672,hide:()=>s(v.Ce()),className:x.Q_},a.createElement("div",{className:x.qU},(0,_.tx)("checkout.add_or_remove_editors"),a.createElement(d.s_,{customStyle:{position:"initial"},dispatch:s,onClose:D})),a.createElement(j,null),a.createElement($,{rowType:"header"},a.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("all_carts.editor_table.Name")),a.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("all_carts.editor_table.Teams")),a.createElement(f.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center"},a.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("general.figma_design")),a.createElement("div",null,a.createElement(y.E,{color:"handoff",fontWeight:"medium"},(0,_.tx)("general.dev_mode")),"\xa0",a.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("checkout.dev_mode_included_text_formatted.included")))),a.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("general.dev_mode")),a.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("general.figjam"))),a.createElement(j,null),a.createElement(m.P,{maxHeight:426},a.createElement(Y,{userData:Object.values(g),checkboxHandler:({userId:e,type:r,newVal:n})=>{let a={...g[e],[r]:n};"devMode"===r&&n&&(a.designEditor=!1),"designEditor"===r&&n&&(a.devMode=!1),E(r=>({...r,[e]:a})),(0,S.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:r,checked:n})}})),a.createElement(j,null),a.createElement($,{rowType:"footer"},a.createElement(f.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center"},a.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("all_carts.add_additional_editors.seat_rename")),a.createElement(y.E,{fontWeight:"regular",color:"secondary"},(0,_.tx)("all_carts.add_additional_editors_description.seat_rename"))),a.createElement(l.s,{billableProductKey:w.ud.DESIGN,incrementSeats:()=>C(N.G_.DESIGN),decrementSeats:()=>O(N.G_.DESIGN),numSeats:b.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>R(e,N.G_.DESIGN)}),a.createElement(l.s,{billableProductKey:w.ud.DEV_MODE,incrementSeats:()=>C(N.G_.DEV_MODE),decrementSeats:()=>O(N.G_.DEV_MODE),numSeats:b.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>R(e,N.G_.DEV_MODE)}),a.createElement(l.s,{billableProductKey:w.ud.FIGJAM,incrementSeats:()=>C(N.G_.FIGJAM),decrementSeats:()=>O(N.G_.FIGJAM),numSeats:b.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>R(e,N.G_.FIGJAM)})),a.createElement("div",{className:x.wB},0!==A?(()=>{switch(A){case 0:default:return;case 1:return a.createElement(y.E,{color:"danger"},(0,_.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:p.design.minCount}));case 2:return a.createElement(y.E,{color:"danger"},(0,_.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:p.figjam.minCount}));case 3:return a.createElement(y.E,{color:"danger"},(0,_.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:o}))}})():a.createElement(y.E,{fontWeight:"regular",color:"secondary"},(0,_.tx)("all_carts.new_total",{total:P.formatMoney(function(e,r,n){let a=r.design,i=r.figjam,o=r.dev_mode;for(let r in e)e[r].designEditor?a++:e[r].devMode&&o++,e[r].figjamEditor&&i++;return a*n[w.ud.DESIGN]*12+i*n[w.ud.FIGJAM]*12+o*n[w.ud.DEV_MODE]*12}(g,b,h),{showCents:!0})})),a.createElement("div",{className:x.GC},a.createElement(c.nR,{onClick:D},(0,_.t)("general.cancel")),a.createElement(u.$$,{onClick:()=>{0===A&&(n(b),r(g),s(v.Ce()))},disabled:0!==A},(0,_.t)("checkout.update_seats"))))))},"SelectEditorsModal")},43053:(e,r,n)=>{n.d(r,{U1:()=>u,Um:()=>m,mx:()=>l});var a=n(411855);n(188507),n(629019),n(271646),n(600433);var i=n(621847),o=n(76265);n(278695),n(293890),n(314540);var s=n(727903);function l(e,r,n,a,i){let l=new s.vr(i).formatMoney(a,{showCents:!n}),c=(0,o.t)("all_carts.num_editors.seat_rename",{numEditors:r}),d=(0,o.t)("all_carts.plural_months",{months:e?12:1});return(0,o.t)("all_carts.cost_equation",{money:l,editors:c,billingTime:d})}function c({isAnnual:e,numEditors:r,noCents:n,unitCost:a,monthlyUnitCostForStrikethrough:i,currency:o}){let s=new LocalizeCurrency(o),l=s.formatMoney(a,{showCents:!n}),c=t("all_carts.num_editors.seat_rename",{numEditors:r}),d=t("all_carts.plural_months",{months:e?12:1});return"number"==typeof i&&e?tx("all_carts.cost_equation_strikethrough_unit_price",{strikethroughUnitPrice:React.createElement("span",{className:styles.strikethrough},s.formatMoney(i,{showCents:!n})),money:l,editors:c,billingTime:d}):tx("all_carts.cost_equation",{money:l,editors:c,billingTime:d})}function d({currentBillingPeriod:e,numEditors:r,noCents:n,shouldStrikethroughMonthlyUnitCostIfAnnual:a,currency:i}){let{getWhiteboardUnitCost:o}=useTeamUpgradeBillingPrices({currency:i});return React.createElement(c,{isAnnual:e===BillingPeriod.ANNUAL,numEditors:r,unitCost:o(e),noCents:n,currency:i,monthlyUnitCostForStrikethrough:a?o(BillingPeriod.MONTHLY):void 0})}function u(e,r){return Math.ceil((1-12*e/(12*r))*100)}n(45049),n(962185);function m(){return(0,o.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:a.createElement(p,null),privacyLink:a.createElement(h,null),cancellationLink:a.createElement(_,null)})}function p(){return a.createElement(i.Us,{href:"/tos",target:"_blank",trusted:!0},(0,o.tx)("pro_cart.review.tos"))}function h(){return a.createElement(i.Us,{href:"/privacy",target:"_blank",trusted:!0},(0,o.tx)("pro_cart.review.privacy_policy"))}function _(){return a.createElement(i.Us,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",target:"_blank",trusted:!0},(0,o.tx)("pro_cart.review.cancellation_policy"))}},437901:(e,r,n)=>{n.d(r,{IP:()=>m,RR:()=>d,UR:()=>h,XT:()=>u,sx:()=>p});var a=n(411855),i=n(777535),o=n(890882),s=n(841962),l=n(176160),c=n(940795);function d(e){let r=(0,c.tJ)().unwrapOr(null),n=(0,l.q5)();return!(0,s.sL)()&&(!!(0,s.kc)().campfire||(e?.preferOpenFilePlan&&n?.plan?!!n.plan.campfireModelEnabledAt:r?!!r.campfireModelEnabledAt:!!(0,s.tl)().campfire_model_enabled))}function u(){return function(e){let r=d(),n=!!(0,s.kc)()[e];return a.useEffect(()=>{r&&!n&&(0,i.sx)("Campfire feature flag mismatch warning",{featureFlagName:e})},[r,n,e]),!!r&&n}("campfire_org_invite_with_bundle")}function m(e){let r=e?.date?(0,o.A)(e.date):(0,o.A)(),n=(0,s.tl)().analyze_data_flow_v2_until;return!!n&&(0,o.A)(n).isBefore(r)}function p(){let e=d();return!(0,s.sL)()&&!(0,s.kc)().campfire_cart_kill_switch&&!!(m()||e||(0,s.kc)().campfire_cart||(0,s.kc)().campfire_cart_early_rollout)}function h(){return!!((0,s.kc)().campfire_cart_banner&&!m())}},863247:(e,r,n)=>{n.d(r,{hY:()=>h,zz:()=>_});var a=n(411855),i=n(217950);n(728722);var o=n(977235),s=n(139879),l=n(736942),c=n(550479),d=n(548759),u=n(811567),m=n(314540),p=n(183739);function h(e,r,n){let[d]=(0,s.IT)((0,p.rRb)({planParentId:e,planType:r}),n);(0,a.useEffect)(()=>{if("errors"===d.status){let n=(d.errors||[]).map(({path:e,code:r,error:n})=>`Path: ${e} - Code: ${r} - ${n?.toString()}`).join(","),a=Error("loading seat counts failed");(0,c.$D)(i.e.SCALE,a,{extra:{planType:r,planParentId:e,lgErrors:n}})}},[d.status,d.errors,r,e]);try{return d.transform(e=>{let r=(0,o.oA)(e?.plan);if(!r)throw Error("received no plan while loading seat counts");let n=r.availableSeatCounts,a=r.assignedSeatCounts;return u.Ye.dict(e=>{let r=a.find(({billableProductKey:r})=>r===g[e]),i=n.find(({billableProductKey:r})=>r===g[e]),o=f(r?.count),s=f(i?.count);return{assigned:o,available:s,total:o+s}})})}catch(n){return(0,c.$D)(i.e.SCALE,n,{extra:{planType:r,planParentId:e}}),l.Qw.errorSuspendable(n,{release:()=>{}})}}function _(e,r,n){let a=h(e,r,n),[i]=(0,s.mI)(a);if("loaded"===i.status)return i.data;if("errors"===i.status){let e=[i.errors].flat()[0];if(e)throw e}throw Error("Error fetching seat counts")}let g={[m.ud.EXPERT]:m.hX.EXPERT,[m.ud.COLLABORATOR]:m.hX.COLLABORATOR,[m.ud.DEVELOPER]:m.hX.DEVELOPER,[d.Gu.VIEW]:m.hX.VIEW};function f(e){return parseInt(e??"0",10)}},158531:(e,r,n)=>{n.d(r,{Cp:()=>v,LU:()=>f,Px:()=>y,jB:()=>I,xd:()=>T,yH:()=>E,zS:()=>b});var a=n(411855),i=n(875877),o=n(728722),s=n(977235),l=n(76265),c=n(437901),d=n(190253),u=n(906565),m=n(314540),p=n(183739),h=n(273090),_=n(566520);let g={[m.G_.DESIGN]:1,[m.G_.WHITEBOARD]:2,[m.G_.SLIDES]:3,[m.G_.DEV_MODE]:4};var f=(e=>(e.UPGRADE_NOT_NEEDED="UPGRADE_NOT_NEEDED_STATE",e.PROVISIONAL_ACCESS="PROVISIONAL_STATE",e.CAN_AUTO_UPGRADE="CAN_AUTO_UPGRADE_STATE",e.REQUESTED="REQUESTED_STATE",e.REQUEST="REQUEST_STATE",e))(f||{});let E=(0,i.atom)([]);function y(e){let{destinationPlan:r,requiresManualUpgrade:n,upgradeRequested:a}=e;return!!r&&r.type===m.OL.ORG&&!!n&&!!a}function b(e,r){let{destinationPlan:n,requiresManualUpgrade:a,upgradeRequested:i}=e;if(n&&n.type===m.OL.ORG&&a){if(i)return(0,l.t)("upgrades.request_sent");if(!r)return(0,l.t)("upgrades.request")}}function v(e,r){let n=(0,u.H)({planParentId:e,planType:m.OL.ORG}),a=(0,o.Rs)(p.ly7,{org_id:e,license_type:r},{enabled:!!e&&!!r&&n}),i=(0,s.oA)(s.oA(a.data)?.hasConnectedPlanUserInOrgFolder);return(i&&i[0]?.hasConnectedPlanUserInOrg)??!1}function T(e){let{hasProvisionalAccess:r,licenseType:n,destinationPlan:a,upgradeRequested:i,canAutoUpgrade:o,requiresUpgrade:s}=e??{};return r?"PROVISIONAL_STATE":n&&s&&a&&a.key.parentId?o?"CAN_AUTO_UPGRADE_STATE":i?"REQUESTED_STATE":"REQUEST_STATE":"UPGRADE_NOT_NEEDED_STATE"}function I({files:e,repos:r,destinationFolderId:n,isDestinationDrafts:i}){let s=(0,c.RR)(),{hasPendingRequest:l,getUpgradePathway:u,getUpgradeEligibility:f,getPlanAndPlanUser:E,hasProvisionalAccess:y}=(0,_.wH)({folderId:n,isDraftsMove:!0}),b=function(e,r){let n=e.filter(e=>null!=e).map(e=>({projectId:e})),i=(0,o.p)(p.NI1,n,{enabled:r});return(0,a.useMemo)(()=>i.reduce((e,r)=>(r.args.projectId&&e.set(r.args.projectId,r?.result?.data?.project?.path??null),e),new Map),[i])}([...new Set([...e,...r].map(e=>e.folder_id).filter(e=>null!==e))],s);return function({files:e,repos:r,isDestinationDrafts:n,isBillingRemodelEnabled:a,originFolderIdToPath:i,hasPendingRequest:o,getUpgradePathway:s,getUpgradeEligibility:l,getPlanAndPlanUser:c,hasProvisionalAccess:u}){let p=function(e,r,n){let a=e=>""===n.get(String(e.folder_id)),i=e.filter(a).map(e=>(0,d.wR)(e.editor_type));return r.filter(a).length>0&&i.push(m.G_.DESIGN),i.reduce((e,r)=>null===e||g[r]<g[e]?r:e,null)}(e,r,i);if(!a||null===p||n)return{requiresUpgrade:!1,canAutoUpgrade:!1,requiresManualUpgrade:!1,upgradeRequested:!1,hasProvisionalAccess:!1,licenseType:null,destinationPlan:null,destinationPlanUser:null};let _=s(p),{plan:f,planUser:E}=c(p)||{},y=l(p)!==h.q.UPGRADE_NOT_NEEDED;return{requiresUpgrade:y,canAutoUpgrade:y&&_===h.J.AUTO_PATHWAY,requiresManualUpgrade:y&&_!==h.J.AUTO_PATHWAY,upgradeRequested:y&&l(p)===h.q.CANNOT_UPGRADE&&o(p),hasProvisionalAccess:u(p),licenseType:p,destinationPlan:f??null,destinationPlanUser:E??null}}({files:e,repos:r,isDestinationDrafts:i,isBillingRemodelEnabled:s,originFolderIdToPath:b,hasPendingRequest:l,getUpgradePathway:u,getUpgradeEligibility:f,getPlanAndPlanUser:E,hasProvisionalAccess:y})}},566520:(e,r,n)=>{n.d(r,{C1:()=>Y,Cf:()=>K,KI:()=>j,Y9:()=>V,aP:()=>$,fm:()=>G,wH:()=>x});var a=n(411855),i=n(188507),o=n(846288),s=n(707062),l=n(163773),c=n(32050),d=n(841962),u=n(875877),m=n(728722),p=n(139879),h=n(736942),_=n(544920),g=n(700509),f=n(76265),E=n(553362),y=n(693737),b=n(593587),v=n(736041),T=n(17607),I=n(408407),S=n(548759),w=n(437069),A=n(190253),C=n(176160),N=n(15092),L=n(314540),O=n(183739),R=n(873439),P=n(273090),D=n(534173),k=n(190095),M=n(615801),F=n(536749);function x(e){let r=(0,C.q5)(),n=(0,i.wA)(),o=(0,b.R)({preferOpenFilePlan:!0}),l=(0,N.iZ)(),h=null,_=null;e?.isDraftsMove||(h=r?.id??null,_=r?.editorType?(0,A.wR)(r?.editorType):null);let g=e?.folderId??null,f=(0,m.Rs)(O.hCR,{projectId:g,fileKey:h},{enabled:o&&!!l&&(!!g||!!h)}),y=function(e,r,n){let a={};for(let e of Object.values(L.G_))a[e]={plan:null,planUser:null};return e?.file&&n?(a[n]={plan:(0,s.oA)(e.file.resolvedHostOrConnectedPlanPermissions)||null,planUser:(0,s.oA)(e.file.resolvedHostOrConnectedPlanUser)||null},n===L.G_.DESIGN&&(a[L.G_.DEV_MODE]={plan:(0,s.oA)(e.file.resolvedHostOrConnectedPlanDevModePermissions)||null,planUser:(0,s.oA)(e.file.resolvedHostOrConnectedPlanUserDevMode)||null})):e?.project&&r&&(a[L.G_.DESIGN]={plan:(0,s.oA)(e.project.resolvedHostOrConnectedPlanDesignPermissions)||null,planUser:(0,s.oA)(e.project.resolvedHostOrConnectedPlanUserDesign)||null},a[L.G_.WHITEBOARD]={plan:(0,s.oA)(e.project.resolvedHostOrConnectedPlanFigjamPermissions)||null,planUser:(0,s.oA)(e.project.resolvedHostOrConnectedPlanUserFigjam)||null},a[L.G_.SLIDES]={plan:(0,s.oA)(e.project.resolvedHostOrConnectedPlanSlidesPermissions)||null,planUser:(0,s.oA)(e.project.resolvedHostOrConnectedPlanUserSlides)||null},a[L.G_.DEV_MODE]={plan:(0,s.oA)(e.project.resolvedHostOrConnectedPlanDevModePermissions)||null,planUser:(0,s.oA)(e.project.resolvedHostOrConnectedPlanUserDevMode)||null}),a}(f.data,g,_),v=function({licenseTypeToPlanAndPlanUser:e,loaded:r}){let n={},a=Object.values(L.G_),i=(0,b.R)({preferOpenFilePlan:!0}),o=(0,N.iZ)(),s=a.map(r=>{let{plan:n}=e[r],a=n?.key.type,i=n?.key.parentId;return a&&i?{licenseType:r,query:(0,F.me)({planType:a,planId:i})}:{licenseType:r,query:null}}),l=s.map(({query:e})=>e).filter(e=>null!==e),c=(0,p.En)(l,{enabled:i&&!!o});if(!r||c.some(e=>"loaded"!==e.status))return null;let d=0;for(let e=0;e<s.length;e++){let r=s[e];r&&(r.query?n[r.licenseType]=c[d++]?.data??null:n[r.licenseType]=null)}return n}({licenseTypeToPlanAndPlanUser:y,loaded:"loaded"===f.status}),I=(0,c.k9)(()=>v,[v]),w=(0,c.k9)(()=>Object.fromEntries(Object.entries(y).map(([e,r])=>{let n=r.planUser?.provisionalLicenseTypes??[],a=r.planUser?.seatTypeLicenseTypes??[];return[e,n.filter(e=>!a.includes(e))]})),[y]),[R,D]=(0,u.useAtom)(F.Zl);(0,a.useEffect)(()=>{I&&D({eligibility:I,provisionalLicenseTypes:w})},[I,w,D]);let[k,M]=(0,u.useAtom)(F.X$),x=null;if("loaded"===f.status){if(_)y[_]?.plan?.tier===L.Ag.ENTERPRISE&&(x=y[_]?.plan?.key.parentId);else for(let e of Object.values(L.G_))if(y[e]?.plan?.tier===L.Ag.ENTERPRISE){x=y[e]?.plan?.key.parentId;break}}let H=(0,m.Rs)(O.aRw,{orgId:x||""},{enabled:!!x}),K="loaded"===H.status&&H.data?.currentUser.idpUsersInOrg.status==="loaded";(0,a.useEffect)(()=>{if(K){let e=(0,s.oA)(H.data?.currentUser.idpUsersInOrg,[]);M(e.length>0&&e[0]?.seatType!==null)}},[K,H.data?.currentUser.idpUsersInOrg,M]);let Y=(0,a.useCallback)(({afterUpgradeCallback:e,licenseType:r,upgradeReason:a,entryPoint:i})=>{let{plan:o,planUser:s}=y[r],l=i===T.i$.BlockingModal||i===T.PE.FileMoveUpsell&&o?.tier===L.Ag.PRO;return function({onUpgrade:e,licenseType:r,dispatch:n,upgradeReason:a,entryPoint:i,plan:o,planUser:s,fileKey:l,onRequestWithProvisionalAccess:c,provisionalAccessEligibility:d,skipAutoPathwayConfirmationModal:u,isSeatManagedViaScim:m}){let p=B({licenseType:r,plan:o,provisionalAccessEligibility:d,isSeatManagedViaScim:m});return null===o?()=>E.F.enqueue({message:"Error fetching plan"}):p===P.J.AUTO_PATHWAY?V({licenseType:r,dispatch:n,upgradeReason:a,plan:o,entryPoint:i,onUpgrade:e,skipConfirmationModal:u}):G({licenseType:r,dispatch:n,entryPoint:i,plan:o,planUser:s,fileKey:l,onRequestWithProvisionalAccess:c})}({onUpgrade:r=>{e&&e(r)},onRequestWithProvisionalAccess:r=>{e&&e(r)},licenseType:r,dispatch:n,upgradeReason:a,plan:o,planUser:s,fileKey:h,entryPoint:i,provisionalAccessEligibility:I,skipAutoPathwayConfirmationModal:l,isSeatManagedViaScim:k})},[y,n,h,I,k]),$=(0,a.useCallback)((e,r)=>{let{plan:n,planUser:a}=y[e],i=W(e,R);return function({licenseType:e,plan:r,planUser:n,canPerformAction:a,hasProvisionalAccess:i}){return a||i?P.q.UPGRADE_NOT_NEEDED:r?r.tier===L.Ag.STARTER?P.q.UPGRADE_NOT_NEEDED:n?r.activeTrialLicenseTypes?.includes(e)&&(0,d.kc)().product_trials_lg||!function(e,r){switch(S.s1[e]){case S.ud.DEVELOPER:return r.needUpgradeDeveloper;case S.ud.COLLABORATOR:return r.needUpgradeCollaborator;case S.ud.EXPERT:return r.needUpgradeExpert}}(e,r)?P.q.UPGRADE_NOT_NEEDED:!function(e,r){switch(S.s1[e]){case S.ud.DEVELOPER:return r.canUpgradeDeveloper;case S.ud.COLLABORATOR:return r.canUpgradeCollaborator;case S.ud.EXPERT:return r.canUpgradeExpert}}(e,r)?P.q.CANNOT_UPGRADE:P.q.CAN_UPGRADE:P.q.CAN_UPGRADE:P.q.CANNOT_UPGRADE}({licenseType:e,plan:n,planUser:a,canPerformAction:r,hasProvisionalAccess:i})},[y,R]),j=(0,a.useCallback)(e=>{let{planUser:r}=y[e];return U({licenseType:e,planUser:r})},[y]),z=(0,a.useCallback)(e=>{let{planUser:r}=y[e];return function({licenseType:e,planUser:r}){return null!==U({licenseType:e,planUser:r})}({licenseType:e,planUser:r})},[y]),q=(0,a.useCallback)(e=>W(e,R)??!1,[R]);return{handleUpgrade:Y,getUpgradeEligibility:$,getPendingRequest:j,hasProvisionalAccess:q,hasPendingRequest:z,getUpgradePathway:(0,a.useCallback)(e=>{let{plan:r}=y[e];return B({licenseType:e,plan:r,provisionalAccessEligibility:I,isSeatManagedViaScim:k})},[k,y,I]),getIsUpgradeHandlerLoading:(0,a.useCallback)(()=>"loaded"!==f.status||null===I,[f.status,I]),getPlanAndPlanUser:(0,a.useCallback)(e=>y[e],[y])}}function U({licenseType:e,planUser:r}){if(!r)return null;let n=r.pendingAccountTypeRequest;return n?.billableProduct?.licenseTypes.includes(e)&&"pending"===n.status?n:null}function B({licenseType:e,plan:r,provisionalAccessEligibility:n,isSeatManagedViaScim:a}){let i=S.s1[e],o=!1;if(!a)switch(i){case S.ud.DEVELOPER:o=!!(0,s.oA)(r?.canUpgradeAutoPathwayDeveloper);break;case S.ud.COLLABORATOR:o=!!(0,s.oA)(r?.canUpgradeAutoPathwayCollaborator);break;case S.ud.EXPERT:o=!!(0,s.oA)(r?.canUpgradeAutoPathwayExpert)}return o?P.J.AUTO_PATHWAY:n&&n[e]?.[i]?P.J.PROVISIONAL_PATHWAY:P.J.RE_REQUEST_PATHWAY}function V({licenseType:e,dispatch:r,upgradeReason:n,plan:a,onUpgrade:i,onError:o,skipConfirmationModal:s,entryPoint:c}){let d=S.s1[e],u=a?.key.type,m=a?.key.parentId;if(null===a||!u||!m)return()=>E.F.enqueue({message:"Error fetching plan"});let p=e=>{e.message.includes("Org access needed")?(r(_.Ts({origin:"edit_button_click",formState:g.qB.JOIN_ORG,redirectUrl:l.Ay.location.pathname})),r(v.to({type:D.x,data:{}}))):o?o(e):r(E.F.enqueue({message:e.data?.message||"Encountered an error",error:!0}))};if(s)return async e=>{try{await y.R.upgrade(u,m,n,d),i(e)}catch(e){p(e)}};let h={licenseType:e,entryPoint:c,billableProductKey:d};return u===L.OL.ORG?h.orgId=m:u===L.OL.TEAM&&(h.teamId=m),()=>{r(v.to({type:k.t,data:{licenseType:(0,w.Aj)(e),trackingProperties:h,onRequest:async(e,r)=>{try{await y.R.upgrade(u,m,n,d),r()}catch(e){r(),p(e)}},afterRequest:i,planName:a.name}}))}}function G({licenseType:e,dispatch:r,entryPoint:n,plan:a,planUser:i,fileKey:o,onRequestWithProvisionalAccess:s}){let l=S.s1[e],c=a?.key.type,d=a?.key.parentId;if(c===L.OL.ORG){let c=i?.fromOrgUser?.licenseGroupMember?.licenseGroupId;return u=>{r(v.to({type:M.YG,data:{orgId:d,orgUser:i?{...i,org_id:d,user_id:i.userId,license_group_member:c?{license_group_id:c}:void 0}:null,licenseType:(0,w.Aj)(e),entryPoint:n,seatTypeKey:l,fileKey:o,actionOnProvisionalAccessGranted:()=>s(u),planName:a?.name}}))}}return c===L.OL.TEAM?i=>{r(v.to({type:M.PK,data:{team:{id:d},editorType:(0,A.iy)(e),entryPoint:n,seatTypeKey:l,fileKey:o,actionOnProvisionalAccessGranted:()=>s(i),planName:a?.name}}))}:()=>E.F.enqueue({message:"Encountered an error"})}function H(e){let r=(0,b.R)({preferOpenFilePlan:!0}),n=(0,u.useAtomValue)(F.Zl);return r&&null!==e&&W(e,n)}function W(e,r){return r?.provisionalLicenseTypes?.[e]?.includes(e)??!1}function K(e){let r=H(e),n=$();return{showBanner:r,text:function(e,r){if(r)switch(e){case L.G_.DEV_MODE:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.curf.dev_mode");case L.G_.DESIGN:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.curf.design");case L.G_.SLIDES:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.curf.slides");case L.G_.WHITEBOARD:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.curf.figjam");default:return(0,o.xb)(e)}else switch(e){case L.G_.DEV_MODE:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.dev_mode");case L.G_.DESIGN:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.design");case L.G_.SLIDES:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.slides");case L.G_.WHITEBOARD:return(0,f.t)("fullscreen.toolbar_banner.provisional_access.figjam");default:return(0,o.xb)(e)}}(e,n),shouldShowCurf:n}}function Y(e){let r=(0,C.q5)();return H(r?.editorType?(0,A.wR)(r?.editorType):e||null)}function $(){let e=(0,I.a9)(),r=e?.permission??L._D.GUEST,n=(0,m.Rs)(O.kdQ,{orgId:e?.org_id??"",permission:r},{enabled:!!e});if(!e)return!1;let a="loaded"===n.status?n.data?.currentUser?.baseOrgUser?.org:null,i=a?.sharedOrgLicenseGroupSetting?.configuredUpgradeRequestSetting,o=r===L._D.GUEST;return i===R.Sm.ALL_USERS||i===R.Sm.MEMBERS&&!o}function j(e){let r=(0,m.Rs)(O.dxg,{fileKey:e.fileKey,userId:e.userId},{enabled:!!(e.fileKey&&e.userId&&e.enabled)}),n=(0,a.useMemo)(()=>e.enabled?h.Qw.from(r).transform(e=>({currentPlanPaidLicenses:e.file?.currentPlanUser?.seatTypeLicenseTypes??null,connectedPlanPaidLicenses:(0,d.kc)().fc_general?e.file?.connectedPlanUser?.seatTypeLicenseTypes??null:[],currentPlanProvisionalLicenses:e.file?.currentPlanUser?.provisionalLicenseTypes??null,connectedPlanProvisionalLicenses:(0,d.kc)().fc_general?e.file?.connectedPlanUser?.provisionalLicenseTypes??null:[]})):h.Qw.loaded(null),[e.enabled,r]);return{userLacksLicenseAccess:(0,a.useCallback)(e=>{if(!n||"loaded"!==n.status)return null;let r=(0,A.wR)(e);return!n.data?.currentPlanPaidLicenses?.includes(r)&&!n.data?.connectedPlanPaidLicenses?.includes(r)&&!n.data?.currentPlanProvisionalLicenses?.includes(r)&&!n.data?.connectedPlanProvisionalLicenses?.includes(r)},[n])}}},912798:(e,r,n)=>{n.d(r,{A$:()=>u,D3:()=>c,Qu:()=>m,Td:()=>g,Z4:()=>h,uH:()=>d});var a=n(76265),i=n(965353);n(129789);var o=n(548759),s=n(314540);n(727903);var l=n(688656),c=(e=>(e.AVAILABLE_SEAT="available_seat",e.PRORATION_NOT_ENABLED="proration_not_enabled",e.MISSING_CURRENCY="missing_currency",e))(c||{});let d="admin_requests_dashboard",u="admin_request_flyout";function m(e){return e===s.ud.WHITEBOARD?o.ud.FIGJAM:e}let p=e=>e.reduce((e,r)=>{let n=r.billableProductKey;return e[n]=(e[n]??0)+1,e},{});function h(e,r){let n=p(e);return Object.keys(n).some(e=>r[e]<n[e])}var _=(e=>(e.REQUESTED="request",e))(_||{});function g(e,r,n,o){return n||void 0===r?{}:{"data-tooltip":null===r.price&&"available_seat"===r.reason?o?(0,a.t)("admin_dashboard.requests.approve.no_cost_associated"):(0,a.t)("admin_dashboard.requests.approve.seat_paid_for"):r.price&&o?(0,a.t)("admin_dashboard.requests.approve.cost_associated",{seatType:(0,i.tI)(e),seatCost:r.price}):(0,a.t)("admin_dashboard.requests.approve.adds_paid_seat",{seatType:(0,i.tI)(e)}),"data-tooltip-type":l.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0}}},543475:(e,r,n)=>{n.d(r,{CM:()=>a,JT:()=>l,NU:()=>s,SI:()=>i,kj:()=>o,tI:()=>c}),n(965353).r3;let a=n(965353).CM,i=n(965353).SI,o=n(965353).kj,s=n(965353).NU;n(965353).Tm;let l=n(965353).JT;n(965353).nf,n(965353).V5;let c=n(965353).tI;n(965353).mb,n(965353).Qi},593587:(e,r,n)=>{n.d(r,{R:()=>a});let a=n(437901).RR;n(437901).XT},4035:(e,r,n)=>{n.d(r,{BC:()=>p,C1:()=>o,E1:()=>m,HG:()=>u,QX:()=>i,VB:()=>d,Y9:()=>l,fm:()=>c,iO:()=>a,wH:()=>s}),n(273090),n(612322).b_,n(612322).Ji,n(612322).sH;let a=n(612322).iO,i=n(536749).QX,o=n(566520).C1,s=n(566520).wH,l=n(566520).Y9,c=n(566520).fm;n(566520).Cf,n(249760).S,n(249760).d,n(63256).Up;let d=n(665827).VB,u=n(63256).HG,m=n(939300).E,p=n(344795).B;n(612322).TF,n(612322).iA,n(612322).PS,n(612322).IM},869830:(e,r,n)=>{n.d(r,{PlanComparisonModal:()=>a}),n(544549).Js,n(544549).mC,n(544549).yG,n(889883).z,n(161266).j,n(628612).x,n(557009).i;let a=n(221864).w;n(221864).P,n(965577).q,n(684006).GJ,n(265912).j},491708:(e,r,n)=>{n.d(r,{Y:()=>i});var a=n(875877);let i=(0,a.atom)({});(0,a.atom)({})},129789:(e,r,n)=>{n.d(r,{V7:()=>h,Xv:()=>g,ZY:()=>b,Zm:()=>E,ps:()=>p,z7:()=>y});var a=n(411855);n(841962);var i=n(728722),o=n(977235),s=n(238311),l=n(299009),c=n(265851),d=n(76265);n(648800),n(726084);var u=n(190253);n(314540);var m=n(183739),p=(e=>(e.TEAM="Team",e.ORG="Org",e))(p||{}),h=(e=>(e.ALL_UNASSIGNED_REQUESTS="all_unassigned_requests",e.ALL_MANAGED_REQUESTS="all_managed_requests",e.ALL_ORG_REQUESTS="all_org_requests",e.INDIVIDUAL_BILLING_GROUP_REQUESTS="individual_billing_group_requests",e))(h||{}),_=(e=>(e.MEMBERS="members",e.GUESTS="guests",e))(_||{}),g=(e=>(e.APPROVE_ALL="APPROVE_ALL",e.BULK_SELECT="BULK_SELECT",e.SINGLE="SINGLE",e.EMAIL="EMAIL",e.DEEPLINK="DEEPLINK",e))(g||{}),f=(e=>(e.NEWEST_FIRST="NEWEST_FIRST",e.OLDEST_FIRST="OLDEST_FIRST",e))(f||{});function E({text:e,showSpinner:r}){return a.createElement("div",{className:c.s.flex.itemsCenter.justifyCenter.$},a.createElement("span",{className:r?c.s.invisible.$:""},e),r&&a.createElement(l.kt,{className:c.s.absolute.$,shouldMatchTextColor:!0,size:"small"}))}function y({planType:e,planId:r,filterParams:n,processedRequestIds:s}){let l=(0,i.Rs)(m.FuG,{planType:e,planId:r,filterParams:n});return(0,a.useMemo)(()=>{let e="loaded"===l.status&&l.data?.adminDashboardRequestIds?.status===o.tT.Loaded?l.data?.adminDashboardRequestIds?.data?.map(e=>e.id)??[]:null;return null!==e?e.filter(e=>!s.has(e)):null},[l,s])}function b({isIntendedAudience:e}){let r=(0,s.I7)("exp_billing_group_admin_request_dash");return void 0!==e&&e&&r.getConfig().get("enabled",!1)}u.Te.DESIGN,u.Te.WHITEBOARD,u.Te.DEV_MODE,()=>(0,d.t)("admin_dashboard.requests.devmode_seat")},809613:(e,r,n)=>{n.d(r,{LB:()=>A,_M:()=>w,yc:()=>C});var a=n(411855),i=n(188507),o=n(890882),s=n(108982),l=n(841962),c=n(139879),d=n(238311),u=n(76265),m=n(593587),p=n(916348),h=n(537393),_=n(548759),g=n(811567),f=n(190253),E=n(314540),y=n(727903),b=n(940795),v=n(689965);function T({currency:e,planId:r,enabled:n}){let a=g.Oq.exclude([_.ud.DEV_MODE]).dict(r=>({currency:e,billableProductKey:r,tier:v.Ju.PRO,renewalTerm:v.IX.MONTH,unit:v.IX.MONTH}));return(0,h.ic)(a,{planParentId:r,planType:E.OL.TEAM},h.Fq.ADMIN_SETTINGS,{enabled:n})}function I({planId:e,enabled:r}){return(0,h.vK)({planParentId:e,planType:E.OL.TEAM},{enabled:r})}let S={data:null,status:"disabled"};function w(e=!1){let r;let n=(0,m.R)(),{getConfig:u}=(0,d.I7)("exp_pro_cost_messaging",void 0,!0),h=(0,b.rs)(),g=h?.data?.key.parentId??"",y=!!h?.data&&[E.Ag.PRO,E.Ag.STUDENT].includes(h.data.tier),v=(0,i.d4)(e=>y?e.teams[g]:null),A=!!g&&y&&!v?.student_team,C=(0,p.fh)(),[N,L]=(0,a.useState)(S),O=(0,l.kc)().pro_cost_messaging,R=(0,i.d4)(e=>A?e.teamBilling:null),P=(0,o.A)(R?.summary?.monthly_subscription?.current_period_end).format("MMMM D"),{occupiedDesignSeats:D,occupiedFigjamSeats:k}=(0,s.R)(e=>Object.values(e.teamMembersByTeamId[v?.id??g]??{}).reduce((e,r)=>(n||(r?.team_user?.design_paid_status==="full"&&e.occupiedDesignSeats++,r?.team_user?.whiteboard_paid_status==="full"&&e.occupiedFigjamSeats++),e),{occupiedDesignSeats:0,occupiedFigjamSeats:0})),{remainingDesignSeats:M,remainingFigjamSeats:F}=(0,a.useMemo)(()=>{let e=R?.summary?.monthly_subscription,r=R?.summary?.annual_subscription,n=r?.design_quantity||r?.quantity||0;return{remainingDesignSeats:n+(e?.design_quantity||e?.quantity||0)-D,remainingFigjamSeats:(r?.whiteboard_quantity||0)+(e?.whiteboard_quantity||0)-k}},[R,D,k]),x=(e?function(e){let r=I(e),[n]=(0,c.mI)(r);return n}:I)({planId:g,enabled:A&&!n}),U=(e?function(e){let r=T(e),[n]=(0,c.mI)(r);return n}:T)({currency:r=null!==x.data?x.data:"usd",planId:g,enabled:A&&"loading"!==x.status&&C}),B=U.data?.[_.ud.DESIGN].amount??null,V=U.data?.[_.ud.FIGJAM].amount??null,G="loading"===x.status||"loading"===U.status||h?.status==="loading";return(0,a.useEffect)(()=>{if(!O){L(S);return}if(G){L({...S,status:"loading"});return}if(!A||!v?.id){L({...S,status:"not a pro team"});return}if(!C){L({...S,status:"not in xp"});return}if(!u().getValue("admins_have_cost_messaging",!1)){L({...S,status:"no cost messaging"});return}if(!R?.summary?.annual_subscription&&!R?.summary?.monthly_subscription){L({...S,status:"no subscription"});return}if(null===B||null===V){L({...S,status:"no price data"});return}L({data:{teamName:v?.name??"Team",monthlyBill:P,remainingDesignSeats:M,remainingFigjamSeats:F,currency:r,costByLicenseType:{[f.vu]:{price:B},[f.Mg]:{price:V}}},status:"show cost messaging"})},[O,v?.name,v?.id,M,F,G,B,V,C,u,r,P,R,A]),N}function A(e,r,n){let{remainingFigjamSeats:a,remainingDesignSeats:i}=e,o=n?a:i;return r<=o?(0,u.t)("team_view.cost_messaging.seat_rename.header.no_charge",{numSeats:o}):(0,u.t)("team_view.cost_messaging.seat_rename.header.charge",{numSeats:r})}function C(e,r,n,a){let{remainingFigjamSeats:i,remainingDesignSeats:o,teamName:s,monthlyBill:l,costByLicenseType:c,currency:d}=e,m=new y.vr(d),p=a?f.Mg:f.vu,h=a?"Figjam":"Design",_=m.formatMoney(c[p].price),g=a?i:o;return r<=g?(0,u.t)("team_view.cost_messaging.seat_rename.will_use",{numNeeded:r,numUsed:r,product:h})+" "+(0,u.t)("team_view.cost_messaging.seat_rename.no_charge"):g>0?(0,u.t)("team_view.cost_messaging.seat_rename.will_use",{numNeeded:r,numUsed:g,product:h})+" "+(0,u.t)("team_view.cost_messaging.seat_rename.partial_charge",{teamName:s,price:_,monthlyBill:l}):(0,u.t)("team_view.cost_messaging.seat_rename.charge",{numNeeded:r,username:n,product:h,teamName:s,price:_,monthlyBill:l})}},442252:(e,r,n)=>{n.d(r,{LX:()=>a});let a="admin_dashboard_onboarding_key"},213685:(e,r,n)=>{n.d(r,{lJ:()=>l});var a=n(411855);n(188507),n(538971),n(841962),n(972142),n(271646);var i=n(693565);n(76265),n(190253),n(314540),n(800519);var o=n(688656);n(291489),n(792882);var s=n(756012);function l(e){return a.createElement("div",{className:s.cG,"data-testid":"locked-cell"},e.label,a.createElement(i.B,{className:s.hz,svg:e.icon,"data-tooltip-type":o.Ib.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":210}))}},232543:(e,r,n)=>{n.d(r,{$X:()=>s,BZ:()=>l,cF:()=>o,e6:()=>c,fF:()=>i});var a=n(449461);let i="Org admin settings onboarding - - billing tab";a.J7.DASHBOARD,a.J7.WORKSPACES,a.J7.TEAMS,a.J7.MEMBERS,a.J7.ACTIVITY,a.J7.BILLING,a.J7.RESOURCES,a.J7.SETTINGS,a.J7.CONTENT;let o="org_admin_settings_billing_groups_secondary_tab_onboarding_key",s="org_admin_settings_billing_overview_secondary_tab_onboarding_key",l={[a.SN.ABANDONED_DRAFTS]:"org_admin_unassigned_drafts_onboarding_key",[a.SN.TEAMS]:"org_admin_settings_teams_tab_onboarding_key",[a.SN.WORKSPACES]:"",[a._d.APPROVED_PLUGINS]:"",[a._d.APPROVED_WIDGETS]:"",[a._d.LIBRARIES]:"",[a._d.SHARED_FONTS]:"",[a.G_.BILLING_GROUPS]:o,[a.G_.INVOICES]:"",[a.G_.OVERVIEW]:s,[a.SN.CONNECTED_PROJECTS]:"org_admin_connected_projects_tab_onboarding_key"},c="members-table-seat-column"},99001:(e,r,n)=>{n.d(r,{nj:()=>a});let a="admin_view_resource_tab"},556760:(e,r,n)=>{n.d(r,{Ki:()=>T,f9:()=>w});var a=n(411855),i=n(224231);n(336427);var o=n(728722),s=n(977235),l=n(863297),c=n(750570),d=n(402532),u=n(661137),m=n(314540),p=n(183739),h=n(484930),_=n(490267),g=n(559460),f=n(324225),E=n(819633),y=n(945741),b=n(229239);let v=new h.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"owner.handle",weight:1},{name:"owner.email",weight:1}]});function T({searchQuery:e,filters:r,sortConfig:n,enabled:i=!0,membersMap:c,firstPageSize:m,isEndUserSurface:h=!1,orgId:_}){let{optimisticIds:g,addOptimisticIds:f,setServerData:E}=(0,d.K)(),{subscription:b,status:T}=function({searchQuery:e,filters:r,sortConfig:n,enabled:a=!0,firstPageSize:i,extraTeamIds:s=[],isEndUserSurface:c=!1,orgId:d}){let m=(0,u.dq)(),h=(0,o.Rs)(p.jl4,{orgId:d??m,firstPageSize:i||25,queryParams:w(e,r,n,c),extraTeamIds:s},{enabled:a}),_=l.r.LOADING;return"loaded"===h.status?_=l.r.SUCCESS:"errors"===h.status&&(_=l.r.FAILURE),{subscription:h,status:_}}({searchQuery:e,filters:r,sortConfig:n,enabled:i,firstPageSize:m,extraTeamIds:g,isEndUserSurface:h,orgId:_}),A=T===l.r.SUCCESS&&!b.data?.orgTeams?.isLoadingNextPage,C=A&&b.data?.orgTeams&&b.data.orgTeams.hasNextPage()?()=>{b.data.orgTeams.loadNext(m||25)}:void 0;a.useEffect(()=>{T===l.r.SUCCESS&&E((b.data?.orgTeams||[]).filter(e=>!!e.teamId).map(e=>({id:e.teamId})))},[T,b.data,E]);let N=a.useMemo(()=>{var e,n,a;return b.data?(e=b.data,n=c,a=r,(e.orgTeams||[]).filter(e=>!!e.team).map(e=>S(e.team,n,e.memberCount?Number(e.memberCount):null)).filter(e=>I(e,a))):[]},[b.data,c,r]),L=a.useMemo(()=>b.data?function(e,r,n,a){let i=(0,s.oA)(e.org),o=(i&&i.teamsByIdInAdmin.status===s.tT.Loaded?((0,s.oA)(i.teamsByIdInAdmin)||[]).map(e=>e.team):s.oA(e.org)?.teamsById||[]).map(e=>S(e,r)).filter(e=>I(e,n));return a?(v.set(o),v.search(a)):o}(b.data,c,r,e):[],[b.data,c,r,e]),{trackPerformanceEvent:O}=(0,y.S)("teams_table_fetch_performance","livegraph");return(0,a.useEffect)(()=>{O("fetch_end")},[O,N.length]),(0,a.useEffect)(()=>{T===l.r.FAILURE&&O("fetch_error")},[O,T]),(0,a.useEffect)(()=>{O("fetch_start")},[O]),{status:T,teams:N,optimisticTeams:L,fetchMore:C,allTeamsFetched:A&&!C,addOptimisticIds:f}}function I(e,r){return!(r?.orphanedTeamFilter&&e.owner||r?.teamMembershipFilter&&r.teamMembershipFilter!==e.userTeamMembership||r?.orgAccessFilter&&r.orgAccessFilter!==e.org_access||r?.discoverabilityFilter&&(r.discoverabilityFilter===f.Fb.ORG_BROWSABLE&&e.org_access!==i.bUL.PRIVATE||r.discoverabilityFilter===f.Fb.HIDDEN&&e.org_access!==i.bUL.SECRET)||r?.workspaceFilter&&(r.workspaceFilter===E.O&&null!==e.workspace_id||r.workspaceFilter!==E.O&&r.workspaceFilter!==e.workspace_id))}function S(e,r,n){let a=r[e.id]??0,i=s.oA(e.ownerRole)?.user??null;return{...e,id:e.id,created_at:e.createdAt?.toISOString(),img_url:e.imgUrl||void 0,org_id:e.orgId,name:e.name,description:e.description||"",hidden:e.hidden,org_browsable:e.orgBrowsable,license_group_id:e.licenseGroupId,workspace_id:e.workspaceId,org_access:e.orgAccess||null,projects:Number(e.projectsCount)||0,editors:Number(e.editorsCount)||0,restrictions_list:e.restrictionsList||null,subscription:e.subscription||null,subscription_raw:e._subscriptionRaw||null,stripe_customer_id:e.stripeCustomerId||null,student_team_at:e.studentTeamAt?.toISOString()||null,student_team_state:e.studentTeamState||m.kU.STUDENT_TEAM_NULL,student_autoverifying_team_at:e.studentAutoverifyingTeamAt?.toISOString()||null,student_team:!!e.studentTeamAt,pro_team:!1,org_team:!0,starter_team:e.isStarterTeam||!1,grace_period_end:e.gracePeriodEnd?.toISOString()||null,grace_period_type:e.gracePeriodType||null,last_upgraded_at:null,deleted_at:e.deletedAt?.toISOString()||null,license_group:null,default_permission:e.defaultPermission,vat_gst_id:e.vatGstId||void 0,tax_id_verification_status:e.taxIdVerificationStatus||void 0,ai_features_disabled:!!e.aiFeaturesDisabledAt,legal_name:e.legalName||null,sharing_audience_control:e.sharingAudienceControlComputed||void 0,orphaned:!i,member_count:"number"==typeof n?Math.max(n+a,0):void 0,owner:i&&{id:i.id,name:i.name||void 0,handle:i.handle||"",img_url:i.imgUrl||"",email:i.email||void 0,description:i.description,org_id:e.orgId||void 0},experiment_assignments:[],userTeamMembership:null===e.roleOnObjectTeamForUser?g.ig.NOT_JOINED:g.ig.JOINED,sanctioned_at:s.oA(e.sanctionedAt)?.toISOString()||null}}function w(e,r,n,a){let i=(0,b.R)(r?.orgAccessFilter,r?.discoverabilityFilter);return String((0,c.lF)({...n&&{sort_by:n.columnName},...n&&{order_by:n.isReversed?_.dy.DESC:_.dy.ASC},...e&&{search_query:e},...i&&{org_access:i},...r?.orphanedTeamFilter&&{teams_without_owners:r.orphanedTeamFilter},...r?.teamMembershipFilter&&{member_of_filter:null!==r.teamMembershipFilter},...r?.teamMembershipFilter&&{teams_member_of:r.teamMembershipFilter===g.ig.JOINED},...r?.workspaceFilter&&{workspace_id:r.workspaceFilter},...a&&{is_end_user_surface:a}}))}},317298:(e,r,n)=>{n.d(r,{I:()=>m}),n(411855),n(188507),n(629019),n(265851),n(76265),n(648800);var a=n(471592);n(132426),n(47795);var i=n(916348),o=n(926996),s=n(940795),l=n(269049),c=n(744123),d=n(379426);n(943431),n(449461),n(893850),n(425028);var u=n(569652);function m(){var e,r;let n=(0,i.Cv)(),m=(0,o._6)(),p=(0,a.E)(),h=(0,s.gI)({migrationGroup:l.L.GROUP_9,component:"WorkspaceAdminBreadcrumbs"});return!!n()&&(p||(e=m,r=h,"teamAdminConsole"!==e.view&&"orgAdminSettings"!==e.view&&("licenseGroup"===e.view&&e.subView===d.GN.ADMIN&&!!r||"billingGroupDashboard"===e.view&&e.selectedTab===c.D.ALL_REQUESTS||"workspace"===e.view&&e.subView===u.V0.ADMIN&&!!r||"orgDomainManagement"===e.view||"abandonedDraftFiles"===e.view||"seatRequests"===e.view)))}},2868:(e,r,n)=>{n.d(r,{B:()=>o});var a=n(411855);let i=(0,a.createContext)(null);function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useLayoutRef must be used within LayoutRefProvider");return e}},485475:(e,r,n)=>{n.d(r,{l4:()=>i,l_:()=>a});let a="Team admin settings onboarding - billing",i="team_admin_settings_billing_overview_secondary_tab_onboarding_key"},867283:(e,r,n)=>{n.d(r,{RQ:()=>i,cm:()=>o,jU:()=>a}),n(899704),n(71288);let a="organize-favorite-menu",i="team-link-context-menu";var o=(e=>(e.PENDING_ASSET_TRANSFER="pending_asset_transfer",e.PENDING_RESOURCE_CONNECTION="pending_resource_connection",e.ACTIVE_RESOURCE_CONNECTION="active_resource_connection",e))(o||{})},970567:(e,r,n)=>{n.d(r,{q_:()=>o});var a=n(875877),i=n(88616);let o=(0,i.Q)(a.atomStore,"FileBrowser");o.useIsLoading,(0,i.h)("filebrowser-loading-page",e=>{e.setAttribute("id",""),e.classList.remove("hidden"),e.classList.remove("fadeOut")})},846752:(e,r,n)=>{n(411855).createContext({canGoBack:!1,canGoForward:!1,goBack:()=>{},goForward:()=>{}})},471592:(e,r,n)=>{n.d(r,{E:()=>o}),n(411855);var a=n(311606),i=n(281935);function o(){return!!i.eD||(0,a.ce)()}n(123090),n(846752)},845089:(e,r,n)=>{n.d(r,{y:()=>y});var a=n(411855),i=n(188507);n(908588),n(512729),n(76265);var o=n(122897),s=n(672487),l=n(939380),c=n(736041),d=n(140835);n(374629);var u=n(190500),m=n(263352),p=n(161935),h=n(749995),_=n(678775),g=n(137123),f=n(333842);n(970585);var E=n(84272);function y({plugins:e,renderPluginDropdownButton:r}){return a.createElement(d.QE.Consumer,null,n=>a.createElement(b,{plugins:e,trackingContext:n.name,renderPluginDropdownButton:r}))}function b({plugins:e,trackingContext:r,renderPluginDropdownButton:n}){let d=(0,i.wA)(),_=(0,f.x2)("PluginsItemsViewTracked.canAdminOrg"),g=(0,o.B)(),{showing:y,show:b,data:S}=(0,f.Di)();a.useEffect(()=>{d(l.Xt())},[d]);let w=a.useMemo(()=>e.map(e=>({plugin:e,version:(0,m.uF)(e)})),[e]),A=a.useCallback(({version:e})=>e.name??"",[]),C=a.useCallback(({plugin:e},n)=>{(0,u.Cu)({context:r,text:"Plugin Tile",pluginId:e.id}),g(e,n)},[g,r]),N=a.useCallback(e=>{if(1!==e.length)return;let r=e[0].plugin;d((0,c.to)({type:h.H,data:{plugin:r},showModalsBeneath:!0}))},[d]),L=a.useCallback((e,r,n)=>{1===e.length&&b({data:{publishedResource:e[0].plugin,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[b]),O=a.useCallback(({plugin:e})=>a.createElement(T,{plugin:e,renderPluginDropdownButton:n}),[n]);return a.createElement(a.Fragment,null,a.createElement(s.A,{items:w,getAriaLabel:A,viewType:p.XU.GRID,handleOpenItem:C,handleContextMenu:L,handleDeleteKey:_.unwrapOr(!1)?N:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{tileClassName:E.i1,containerStyle:I.grid,renderTile:v,renderTileFooter:O}}),y&&S&&a.createElement(f.ii,{dropdownData:S}))}function v({plugin:e}){return a.createElement(_.Ce,{plugin:e,isPublishing:!1,showNewBadge:!1,isPublicOverride:!1})}function T({plugin:e,renderPluginDropdownButton:r}){return a.createElement(_.Xg,{showInstallCount:!0,plugin:e,isPublicOverride:!1,dropdown:r?a.createElement(g.r,{resource:e}):void 0})}n(168984);let I={grid:{paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,paddingBottom:"x1gan7if",$$css:!0}}},829240:(e,r,n)=>{n.d(r,{N:()=>_});var a=n(411855),i=n(188507);n(908588),n(76265);var o=n(839324),s=n(672487),l=n(939380),c=n(736041);n(968525);var d=n(263352),u=n(161935),m=n(726365),p=n(749995),h=n(333842);function _({widgets:e}){let r=(0,i.wA)(),n=(0,h.x2)("WidgetItemsView.canAdminOrg");a.useEffect(()=>{r(l.gI())},[r]);let m=(0,o.s)(),{showing:_,show:y,data:b}=(0,h.Di)(),v=a.useMemo(()=>e.map(e=>({widget:e,version:(0,d.uF)(e)})),[e]),T=a.useCallback(({version:e})=>e.name??"",[]),I=a.useCallback(({widget:e},r)=>m(e,r),[m]),S=a.useCallback(e=>{if(1!==e.length)return;let n=e[0].widget;r((0,c.to)({type:p.H,data:{plugin:n},showModalsBeneath:!0}))},[r]),w=a.useCallback((e,r,n)=>{1===e.length&&y({data:{publishedResource:e[0].widget,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[y]);return a.createElement(a.Fragment,null,a.createElement(s.A,{items:v,getAriaLabel:T,viewType:u.XU.GRID,handleOpenItem:I,handleContextMenu:w,handleDeleteKey:n.unwrapOr(!1)?S:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{containerStyle:E.grid,renderTile:f,renderTileFooter:g}}),_&&b&&a.createElement(h.ii,{dropdownData:b}))}function g({widget:e,version:r}){return a.createElement("div",{className:"x78zum5 x1q0g3np xsdox4t x87ps6o"},a.createElement(m.aA,{widget:e,version:r,viewContext:"OrgWidgetsView"}))}function f({widget:e,version:r}){return a.createElement(m.Ke,{widget:e,version:r,isInItemsView:!0})}n(970585),n(168984);let E={grid:{paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,paddingBottom:"x1gan7if",$$css:!0}}},970585:(e,r,n)=>{n(411855),n(263352)},71288:(e,r,n)=>{n.d(r,{x:()=>a});let a="FILE_CREATION_OMNICREATE_DROPDOWN";var i=(e=>(e.DESIGN="RESOURCE_CREATION_DESIGN_OPTION",e.WHITEBOARD="RESOURCE_CREATION_WHITEBOARD_OPTION",e.SLIDES="RESOURCE_CREATION_SLIDES_OPTION",e.SITES="RESOURCE_CREATION_SITES_OPTION",e.IMPORT="RESOURCE_IMPORT_OPTION",e.COOPER="RESOURCE_CREATION_COOPER_OPTION",e))(i||{})},616885:(e,r,n)=>{n.d(r,{AH:()=>g,GI:()=>y,KR:()=>v,pH:()=>E});var a=n(411855),i=n(188507),o=n(728722),s=n(736942),l=n(719334),c=n(76265),d=n(874010),u=n(736041);n(959130);var m=n(15092),p=n(395049),h=n(880633),_=n(183739);let g="workspace";function f(e,r){let n=Array.from(e.keys()),a=Array.from(r.keys());return n.length===a.length&&n.every(n=>(0,i.bN)(e.get(n),r.get(n)))}function E(e,r={}){let n=function(e,r={}){let n=(0,m.TA)(),l=(0,i.d4)(e=>e.currentUserOrgId),c=a.useMemo(()=>e.map(e=>({fileKey:e,orgId:l})),[e,l]),d=(0,o.p)(_.PG0,c,r),u=(0,p.Au)(l),h=s.Qw.all([u,...d.map(e=>e.result)]);return s.Qw.useTransform(h,([r,...a])=>{let i=new Map;return a.forEach((a,o)=>{let{file:s}=a,c=e[o],d=s?.computedWorkspace?.workspace??null;if(!l||!s||!d){i.set(c,null);return}let u=d.pinnedFiles,m=u?.find(e=>e.file?.key===c),p=!!u&&u.length>=b,h=!!r&&r===d.id,_=d.canAdmin,g=m?.creator?.id===n,f=!m&&(h||_)&&(s.canPinToWorkspace||s.canEdit),E=f&&!p,y=m&&(g||_);if(f){i.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:p});return}if(y){i.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!0,existingFilePinId:m.id,workspaceHasMaxPins:p});return}i.set(c,{shouldShowPinFileToWorkspaceAction:!1,canPinFileToWorkspace:!1,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:p})}),i},f)}(a.useMemo(()=>e?[e]:[],[e]),r);return s.Qw.useTransformShallowEqual(n,r=>r.get(e??""))}function y(e){let r=(0,i.wA)();return a.useCallback((n,a)=>{if(a){r(l.s.error((0,c.t)("file_browser.pinning.add_pin_error_max_pins",{maxNumWorkspacePins:b})));return}r(u.to({type:(0,d.a)(),data:{fileKey:n,source:e}}))},[r,e])}let b=8;function v(e){return{...h.F.toSinatra(e),created_at:e.createdAt.toDateString(),deleted_at:e.deletedAt?.toDateString()??null,trashed_at:e.trashedAt?.toDateString()??null,updated_at:e.updatedAt.toDateString()}}},132426:(e,r,n)=>{n(411855),n(908588),n(629019),n(230208),n(265851),n(233950)},904703:(e,r,n)=>{n.d(r,{De:()=>u.D,G4:()=>M.G,v2:()=>y,U2:()=>k.U2,T1:()=>A,LK:()=>m.L,Hl:()=>L,hO:()=>a.h,d3:()=>b,eQ:()=>v,SW:()=>C,ni:()=>D,G1:()=>a.G,uZ:()=>I,yt:()=>N,m1:()=>S,cN:()=>k.cN});var a=n(143609),i=n(846288),o=n(777535),s=n(875877),l=n(771952),c=n(612724),d=n(446130),u=n(712843),m=n(603371),p=n(841962),h=n(434992),_=n(706293),g=n(2019),f=n(920432),E=n(286652);let y="FRAGMENT_SEARCH_PEEK_MODAL";function b(e,r,n,a,o,s,l){return a?{entry_point:e,session_id:r,search_id:n,componentSuggestionSessionId:(0,f.r6)(),query_type:function(e){switch(e.type){case"input-text":return"text";case"input-selection":return"selection";case"input-image":return"image";default:(0,i.xb)(e)}}(a),query_text:"input-text"===a.type?a.value:void 0,query_node_id:"input-selection"===a.type?a.node.guid:void 0,query_is_image_selection:function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return(0,_.A)(e.node)||1===e.node.childCount&&(0,_.A)(e.node.childrenNodes[0]);default:(0,i.xb)(e)}}(a),query_file_key:a.file_key,...function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return{query_width:e.node.absoluteBoundingBox.w,query_height:e.node.absoluteBoundingBox.h};default:(0,i.xb)(e)}}(a),...T(s),is_in_preview:o,is_community_fragment_search:!!l}:{entry_point:e,session_id:r,search_id:n,is_in_preview:o,componentSuggestionSessionId:(0,f.r6)(),...T(s),is_community_fragment_search:!!l}}function v(e){switch(e){case"percent_match":return"relevance";case"last_modified":return"last_modified";case void 0:return;default:(0,i.xb)(e)}}function T(e){return e&&e.searchModelType===g.uH.FILES?{filterFolderIds:e.folderIds,filterTeamIds:e.teamIds,filterCreatorIds:e.creatorIds}:null}function I(e){return e?.type===y}function S(e,r=378){let n=Math.min(e.x,e.y);if(n>r){let a=r/n;return new c.Mi(e.x*a,e.y*a)}return e}var w=(e=>(e.FragmentSearch="fragment-search",e.GPT="gpt-vision",e))(w||{});function A(e,r="fragment-search"){let n;n="fragment-search"===r?S(new c.Mi(e.size.x,e.size.y)):S(function(e,r){let n=Math.max(e.x,e.y);if(n>2048){let r=2048/n;return new c.Mi(e.x*r,e.y*r)}return e}(new c.Mi(e.size.x,e.size.y),0),768);let a=!0;(0,p.kc)().fragment_search_non_contents_only_thumbnail&&(a=!1);let i=(0,h._G)(n,e.guid,a,void 0,!1,!0);return i&&i.pixels&&i.pixelSize&&i.displaySize&&(0,h.Pv)(i.pixels,i.pixelSize).split(";base64,").pop()||null}async function C(e,r,n){return r.x!==e.width||r.y!==e.height?{type:"image",value:function(e,r){let n=document.createElement("canvas"),a=n.getContext("2d");n.width=r.x,n.height=r.y,a?.drawImage(e,0,0,r.x,r.y);let i=n.toDataURL("image/png").split(",");if(i.length>=2)return i[1];throw Error("Invalid data URL format")}(e,r)}:{type:"image",value:await (0,E.t)(n)}}function N(e){return new Promise((r,n)=>{let a=document.createElement("img"),i=URL.createObjectURL(e);a.onload=()=>{r(a),URL.revokeObjectURL(i)},a.onerror=e=>{n(e),URL.revokeObjectURL(i)},a.src=i})}async function L(e,r,n,c,u,m,p){let h=(0,l.g)(),_=Date.now(),g=s.atomStore.get(d.dd),f=b(r,g,h,e,!1,n,m),E="input-selection"===e.type?function(e){let r=e.editInfo;return{query_is_top_level_node:e.isTopLevelFrame(),query_num_descendant_nodes:e.getVisibleDescendantIds().length,query_is_component:e.isComponentish,query_depth_from_top_level_frame:e.depthFromTopLevelFrame,query_created_at:r?.createdAt,query_last_edited_at:r?.lastEditedAt,query_last_edited_by:r?.userId,query_edit_info_valid:!!r,query_node_type:e.type}}(e.node):{};a.h.setFragmentSearchLoading(h,e,c,m,u),(0,o.sx)("Fragment search query",{...E,...f},{forwardToDatadog:!0});let y={session_id:g,search_id:h,node_id:"input-selection"===e.type?e.node.guid:""};try{let s=[];switch(e.type){case"input-image":s=await R(e,y,n,u,m);break;case"input-text":s=await P(e,y,n,u,m);break;case"input-selection":s=await O(e,y,n,u,m);break;default:(0,i.xb)(e)}let l=[];if(l=m?s.map(e=>({...e,type:"hub-file-fragment"})):s.map(e=>({...e,type:"fig-file-fragment"})),a.h.getSearchId(m)!==h)return;(0,o.sx)("Fragment search time to load",{...f,elapsed_time:Date.now()-_}),(0,o.sx)("Fragment search result",{...f,count:s.length}),a.h.setFragmentSearchResults(h,l,r,m),p&&p()}catch(e){if(a.h.getSearchId(m)!==h)return;a.h.setFragmentSearchError(h,e,m)}}async function O(e,r,n,a,i){let{node:o,file_key:s}=e,l=A(o);if(!l)throw Error("Failed to export thumbnail");return(await u.D.postFragmentSearch({type:"image",value:l},s,r,n,a,i)).data.meta.results}async function R(e,r,n,a,i){let o=await N(e.imageFile),s=S(new c.Mi(o.width,o.height)),l=await C(o,s,e.imageFile);return(await u.D.postFragmentSearch(l,e.file_key,r,n,a,i)).data.meta.results}async function P(e,r,n,a,i){return(await u.D.postFragmentSearch({type:"text",value:e.value},e.file_key,r,n,a,i)).data.meta.results}async function D(e,r){let n=(await u.D.getFragmentData({file_key:r,node_id:e.guid})).data.meta.results;m.L.setIndexedFragmentData(n)}var k=n(607309),M=n(491745)},527231:(e,r,n)=>{n.d(r,{l1:()=>eu.l}),n(832871);var a=n(411855),i=n(188507),o=n(846288),s=n(48451),l=n(747484),c=n(990561),d=n(617254),u=n(354465),m=n(2019),p=n(161935),h=n(87998),_=n(351966),g=n(728722),f=n(39890),E=n(693565),y=n(76265),b=n(268416),v=n(747352),T=n(942171),I=n(183739),S=n(333167),w=n(510434),A=n(10854),C=n(574518),N=n(731777),L=n(744532),O=n(738839),R=n(483386),P=n(927092),D=n(117688),k=n(236705),M=n(83958),F=n(505422);let x={[m.uH.HUB_FILES]:D.A,[m.uH.PUBLIC_PLUGINS]:k.A,[m.uH.PRIVATE_PLUGINS]:null,[m.uH.PUBLIC_PROFILES]:P.A,[m.uH.FILES]:null,[m.uH.PROJECTS]:null,[m.uH.TEAMS]:null,[m.uH.USERS]:null,[m.uH.PUBLIC_WIDGETS]:M.A,[m.uH.PRIVATE_WIDGETS]:null},U={[m.uH.PUBLIC_PLUGINS]:C.Of,[m.uH.PRIVATE_PLUGINS]:A.Of,[m.uH.PUBLIC_PROFILES]:R.hP,[m.uH.PUBLIC_WIDGETS]:N.nD.listStyle,[m.uH.PRIVATE_WIDGETS]:N.uB.listStyle};class B extends a.Component{componentDidMount(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),S.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}componentDidUpdate(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),S.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}renderContent(){let e;if(this.props.viewMode===p.XU.LIST)e=U[this.props.searchModelType]??R.p_;else if(this.props.viewMode===p.XU.GRID)switch(this.props.searchModelType){case m.uH.FILES:case m.uH.TEAMS:case m.uH.PROJECTS:case m.uH.PUBLIC_PLUGINS:case m.uH.PRIVATE_PLUGINS:case m.uH.PUBLIC_WIDGETS:case m.uH.PRIVATE_WIDGETS:case m.uH.USERS:break;case m.uH.PUBLIC_PROFILES:case m.uH.HUB_FILES:case m.uH.PUBLIC_PROFILES:e=R.Vg;break;default:(0,o.xb)(this.props.searchModelType)}else(0,o.xb)(this.props.viewMode);e+=this.props.isLoggedIn?` ${R.Vz}`:"";let r=this.props.didSucceed&&0===this.props.searchResults.length;return a.createElement(f.x,{isLoading:this.props.isLoading,className:R.g4},()=>this.props.didFail?a.createElement(G,{illustration:F.A,resourceTypeDisplayString:this.props.failureMessage||(0,y.t)("search.search_model_type.search_error"),searchModelType:this.props.searchModelType,query:null,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):r?a.createElement(G,{illustration:x[this.props.searchModelType],resourceTypeDisplayString:(0,m.hf)(this.props.searchModelType),searchModelType:this.props.searchModelType,query:this.props.query,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):a.createElement("div",{className:R.sb},a.createElement("div",{className:e},a.createElement(L.L,{searchModelType:this.props.searchModelType,searchResults:this.props.searchResults,viewMode:this.props.viewMode,planFilter:this.props.planFilter}))))}renderProjectContextMenu(){let e=(0,b.H)(this.props.dropdownShown);return(0,T.D6)(this.props.currentOrgId)&&e&&a.createElement(v.p,{folder:e,useLGPerms:!0})}render(){let e=this.props.searchModelType===m.uH.FILES?void 0:this.props.viewMode===p.XU.LIST?R.UL:R.G2;return a.createElement(w.Q0,{isDropdown:!1,...this.props},a.createElement("div",{className:e},this.renderContent()),this.props.searchModelType===m.uH.PROJECTS&&this.renderProjectContextMenu())}}B.displayName="SearchResultView";let V=(0,i.Ng)((e,r)=>({viewMode:(0,O.z[r.searchModelType])(e.search.parameters,e.viewBarViewModeOptionByView).viewMode,isLoggedIn:!!e.user,search:e.search,activeWorkspaceFilter:e.search.parameters.workspaceFilter,activePlan:e.search.parameters.planFilter,dropdownShown:e.dropdownShown,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView}),(e,r)=>({onResetWorkspaceFilter:()=>{e(d.HI({}))},setSearchLastAckedQueryId:r=>{e(d.ej({lastAckedQueryId:r}))},setLastLoadedQuery:(r,n,a)=>{e(d.w2({sessionId:r,query:n,queryId:a}))}}))(B);function G(e){let{query:r,resourceTypeDisplayString:n}=e,o=(0,i.d4)(e=>e.currentUserOrgId),s="NON_ORG_TEAMS"!==e.activePlan&&e.activePlan||o,l=(0,g.Rs)(I.N63,{orgId:s??null}),c=a.useMemo(()=>"loaded"===l.status?l.data?.org?.workspaces:[],[l]),d=c?.find(r=>null!=e.activeWorkspaceFilter&&r.id===e.activeWorkspaceFilter),u=e.onResetWorkspaceFilter,m=a.useMemo(()=>a.createElement(a.Fragment,null,n,null!==r?a.createElement(a.Fragment,null,"\xa0",a.createElement("span",{className:R.xV},r)):null,null!=d&&a.createElement(a.Fragment,null," in the ",a.createElement("span",{className:R.xV},d.name)," workspace",a.createElement("br",null),a.createElement(_.E,{className:R.YF,onClick:()=>{u&&u()},"aria-label":(0,y.t)("search.empty_state.try_searching_whole_org")},(0,y.tx)("search.empty_state.try_searching_whole_org")))),[r,u,d,n]);return a.createElement("div",{className:R.p$},e.illustration&&a.createElement(E.B,{className:R.IC,svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("div",{className:R.jI},a.createElement("span",{className:R.q6},m)),e.cta?a.createElement("div",{className:R.Ki},e.cta):null)}G.displayName="SearchResultEmptyState";class H extends a.Component{constructor(e){super(e),this.onScroll=e=>{this.updateIsTop(e.target)},this.updateIsTop=e=>{this.props.setScrollTop(window.pageYOffset)},this.shouldScroll=()=>0!==this.props.searchScrollTop,this.getLoadingKey=()=>d.$P.loadingKeyForPayload({parameters:this.props.parameters}),this.isLoading=()=>u.VP(this.props.loadingState,this.getLoadingKey()),this.didSucceed=()=>u.GH(this.props.loadingState,this.getLoadingKey()),this.didFail=()=>u.aF(this.props.loadingState,this.getLoadingKey()),this.getFailedReason=()=>u.Fl(this.props.loadingStateFailureReasons,this.getLoadingKey());let r=this.getFilteredResults(e.searchResults??[],e.sortFilterConfig);this.state={showContainer:!this.shouldScroll(),filteredFileResults:r}}componentDidMount(){window.addEventListener("scroll",this.onScroll,!0),this.shouldScroll()?setTimeout(()=>{window.scrollTo(0,this.props.searchScrollTop),this.setState({showContainer:!0})},0):this.updateIsTop({})}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll,!0)}componentDidUpdate(e){if(this.props.searchModelType===m.uH.FILES){let r=e.searchResults??W,n=this.props.searchResults??W,a=r.length!==n.length;if(!a)for(let e=0;e<r.length;e++)(0,s.c2)(r[e],n[e])||(a=!0);if(a){let e=this.getFilteredResults(n,this.props.sortFilterConfig);this.setState({...this.state,filteredFileResults:e})}}}getFilteredResults(e,r){return this.props.searchModelType===m.uH.FILES?e.filter(e=>{let n=e.model;switch(r.filters.fileType){case p.t2.ANY:return!0;case p.t2.DESIGN:return"design"===n.editor_type;case p.t2.FIGJAM:return"whiteboard"===n.editor_type;case p.t2.SITES:return"sites"===n.editor_type;case p.t2.SLIDES:return"slides"===n.editor_type;case p.t2.PROTOTYPE:return!1;default:(0,o.xb)(r.filters.fileType)}}):e}render(){let e=this.props.searchResults??W,r=this.getFilteredResults(e,this.props.sortFilterConfig);return a.createElement(c.r,{key:"unified-search",toolbar:l.Ay.mobile?a.createElement(h.o,null):void 0,viewbar:a.createElement(O.Z,{sortControlsDisabled:0===e.length}),viewBarSticky:!0,content:a.createElement(V,{searchResults:r,searchScope:this.props.parameters.searchScope,searchModelType:this.props.searchModelType,sortState:this.props.parameters.sortState,onChangeSortState:this.props.onChangeSortState,isLoading:this.isLoading(),didSucceed:this.didSucceed(),didFail:this.didFail(),failureMessage:this.getFailedReason(),query:this.props.completedQuery,planFilter:this.props.parameters.planFilter})})}}H.displayName="SearchPageView";let W=[];(0,i.Ng)((e,r)=>{let n=e.search.parameters,a=e.search.responses[r.searchModelType];return{parameters:n,completedQuery:e.search.completedQueries[r.searchModelType],searchResults:a?.results||null,loadingState:e.loadingState,loadingStateFailureReasons:e.loadingStateFailureReasons,searchScrollTop:e.search.searchScrollTop,sortFilterConfig:e.tileSortFilterStateByView.search}},e=>({onChangeSortState:r=>{e(d.qv({sortState:r}))},setScrollTop:r=>{e(d.PP({top:r}))}}))(H),n(629019),n(512729),n(901963),n(597079);var K=n(153767);n(250392),n(14489),n(509009),n(169213),n(206908),n(863297),n(785893),n(69441),n(156839).uQ;var Y=n(991458),$=n(875877);n(265851),n(904703),n(736041),n(926996);var j=n(521109);n(64198);var z=n(939508),q=n(663844),Z=n(837982),X=n(710636),J=n(874360),Q=n(547661),ee=n(745337),et=n(540980),er=n(744703),en=n(48453),ea=n(939469),ei=n(72321),eo=n(54174),es=n(488527),el=n(520008);let ec=(0,Y.jz)(es.RAo),ed=(0,Y.jz)(es.aIx);(0,X.Ju)(function(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.modalShown),n=(0,i.d4)(e=>e.search.sessionId),o=(0,$.useAtomValue)(ei.Q),[s,l]=(0,$.useAtom)(j.z5),c=(0,$.useAtomValue)(j.L8),d=(0,ea.A)();a.useEffect(()=>()=>{n&&S.vj.Session.searchModalExit(n)},[n]);let u=a.useCallback(()=>{e(Z.ky()),s&&(l(null),d(m.uR.DROPDOWN,s))},[e,l,s,d]);if(!r)return null;let p=r.data.width?{width:`${r.data.width-2*ec}px`}:void 0;return a.createElement(J.aF,{absolutePosition:{top:r.data.top,left:r.data.left},padding:`0 0 ${ec}px 0`,size:r.data.width??ed,tintedModalBackground:!1,useModalViewScroll:!1,maxHeight:"90vh",onHide:u,popStack:!0,"data-testid":"facetedSearchModal"},a.createElement(K.dP,null,a.createElement(er.a3.Provider,{value:er.Vm.PREVIEW},a.createElement("div",{className:el.PP,style:p},a.createElement(z.Y,{hideSearchPreview:r.data?.hideSearchPreview})),a.createElement(q.P,{className:el.xx},s&&a.createElement("div",{className:el.v$},a.createElement(Q.s,{facetType:s,id:"facet-panel",path:[3]})),a.createElement(en.L,{id:"suggestions",path:[4]}),r.data.hideSearchPreview?null:o||c.length>0?a.createElement(et.j,{id:"search-results",path:[5]}):a.createElement(ee.n,{id:"recents",path:[5]})))))},eo.r),n(968525),n(510669),(0,Y.jz)(es.RAo),n(841962),n(918091),n(47795),n(802597),n(15092),n(314540),n(929717),n(18615),n(268065),n(706612);var eu=n(819938)},819938:(e,r,n)=>{n.d(r,{l:()=>I});var a=n(411855),i=n(188507),o=n(875877),s=n(693565),l=n(265851),c=n(76265),d=n(521109),u=n(874263),m=n(547661),p=n(48782),h=n(939469),_=n(252528),g=n(47795),f=n(802597),E=n(125682),y=n(2019),b=n(352583),v=n(112512);let T=e=>{switch(e){case y.WY.RESOURCE:return(0,c.tx)("search.preview_section.all_files");case y.WY.CREATOR:return(0,c.tx)("search.facets.created_by",{creator:(0,c.t)("search.facets.anyone")});case y.WY.SPACE:return(0,c.tx)("search.facets.space",{space:(0,c.t)("search.facets.all_spaces")});default:return""}};function I({dropdownId:e,facetType:r,containerRef:n,hasQuickActionsStyling:c,contentTargetRef:I}){let S=(0,i.wA)(),w=a.useRef(null),A=I||w,C=(0,E.Um)(),N=C?.type===e,L=(0,o.useAtomValue)((0,d.l4)(r??null)),O=(0,p.f)(),R=(0,h.A)(),P=y.uR.DROPDOWN,D=c?l.s.relative.lhNormal.flex.h24.bRadius4.px8.py4.b1.colorBorder.fontMedium.$:b.P2,k=c?l.s.ml8.flex.itemsCenter.$:b.dN,M=n&&n.current?n.current.getBoundingClientRect().right:void 0;return a.createElement("div",{className:D,onMouseDown:n=>{n.stopPropagation(),S(f.an()),N?(S(g.oB()),R(P,r)):A.current&&(n.preventDefault(),S(g.j7({type:e,data:{facetType:r,targetRect:A.current.getBoundingClientRect()}})),O(P,r))},onClick:e=>e.stopPropagation(),role:"button",tabIndex:-1},a.createElement("span",{ref:A,className:l.s.noWrap.$},!L||(0,u.II)(L)?T(r):(0,u.yA)(L)),a.createElement("div",{className:k},a.createElement(s.B,{svg:v.A,className:`${b.OW} ${N?b.iw:""}`})),N&&a.createElement(_.G,{dropdownId:e,dropdownChild:a.createElement(m.s,{facetType:r,id:"",path:[]}),containerRefRight:M,limitHeight:c}))}},832871:(e,r,n)=>{n.d(r,{lV:()=>R,ye:()=>x,wA:()=>D,D$:()=>P});var a=n(411855),i=n(188507),o=n(846288),s=n(351966),l=n(300715),c=n(777535),d=n(841962),u=n(693565),m=n(265851),p=n(76265);n(728764);var h=n(819938),_=n(793976),g=n(252528),f=n(47795),E=n(617254),y=n(802597);n(190500),n(988523),n(15092),n(314540),n(428064);var b=n(2019),v=n(161935),T=n(689954),I=n(96644),S=n(769314),w=n(28221);n(412229);var A=n(806565),C=n(303745);let N="tile_sort_filter--option--E6-xu dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L";var L=n(112512);class O extends a.PureComponent{render(){let e="deletedFiles"===this.props.selectedView.view,r=this.props.options.tileSortFilterConfig.viewMode===v.XU.LIST;return a.createElement("div",{className:"tile_sort_filter--dropdownCollectionContainer--Dnyyh"},e&&a.createElement(M,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),a.createElement(x,{config:this.props.options.tileSortFilterConfig}),!r&&!this.props.hideSortMenu&&a.createElement(U,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),r&&a.createElement(S.z,{query:"(max-width: 1120px)"},a.createElement(U,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu})))}}function R(e){let r=(0,i.d4)(e=>e.teams),n=(0,i.d4)(e=>e.orgById);if(!e.planOption?.plan_id)return null;let o="org"===e.planOption.plan_type&&e.planOption.plan_id?n[e.planOption.plan_id]?.img_url:r[e.planOption.plan_id]?.img_url;return a.createElement("div",{className:m.s.flex.itemsCenter.$},a.createElement(w.H,{entityId:e.planOption.plan_id,entityName:e.planOption.label,imgUrl:o}))}O.displayName="TileSortFilter";let P={values:[v.ue.ASC,v.ue.DESC],valuesToDisplayText:(e,r)=>{switch(e){case v.ue.ASC:switch(r){case v.rR.TIME:return(0,p.t)("tile.sort_filter.sort_direction_oldest_first");case v.rR.ALPHABETICAL:return(0,p.t)("tile.sort_filter.sort_direction_a_to_z");default:return(0,p.t)("tile.sort_filter.sort_direction_ascending")}case v.ue.DESC:switch(r){case v.rR.TIME:return(0,p.t)("tile.sort_filter.sort_direction_newest_first");case v.rR.ALPHABETICAL:return(0,p.t)("tile.sort_filter.sort_direction_z_to_a");default:return(0,p.t)("tile.sort_filter.sort_direction_descending")}default:(0,o.xb)(e)}}};function D(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o=(0,i.d4)(e=>e.dropdownShown),h=o?.type===e.dropdownId,E=(0,i.d4)(e=>e.selectedView),b=(0,d.kc)().file_browser_ia_overhaul_m1_dropdowns,S=e=>{e.stopPropagation()},w=a=>{r(y.an()),h?r(f.oB()):n.current&&r(f.j7({type:e.dropdownId,data:{targetRect:n.current.getBoundingClientRect()}})),S(a)},A=()=>{h&&r(f.oB())},O=r=>e.includeSortDirection,R=e.disabled?"tile_sort_filter--dropdownContainerDisabled--lYOaX tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd":"tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd",D=(r,n)=>{(0,c.sx)("Sort Changed - Dropdown",{oldValueString:`${e.checkedValue}`,newValueString:`${r}`,model:`${e.searchModelType}`,dir:n===v.ue.ASC?"asc":n===v.ue.DESC?"desc":void 0}),e.onChange(r,n)},k=a.createElement(g.G,{dropdownId:e.dropdownId,dropdownChild:a.createElement(_.j,{checkedValue:e.checkedValue,currentDirection:e.includeSortDirection?e.currentDirection:null,tileSortValues:e.includeSortDirection?e.tileSortValues:[],dirValuesToDisplayText:P.valuesToDisplayText,values:e.values,valuesToDisplayText:e.valuesToDisplayText,onChange:e.onChange})}),M=[];e.values.length>1&&(e.hideSortOptionLabel||M.push({isChecked:!1,disabled:!0,displayText:(0,p.t)("tile.sort_filter.sort_by_label")}),e.values.forEach(r=>{let n=r===e.checkedValue;M.push({callback:()=>{D(r)},className:N,isChecked:n,render:()=>a.createElement(I.S,{checked:n,text:e.valuesToDisplayText[r]}),highlightWhenActive:!0,displayText:""})}),e.includeSortDirection&&M.push({displayText:"",separator:!0})),e.includeSortDirection&&(M.push({isChecked:!1,disabled:!0,displayText:(0,p.t)("tile.sort_filter.order_label")}),e.tileSortValues.forEach(r=>{if(O(e.checkedValue)){let n=e.currentDirection===r;M.push({callback:()=>{D(e.checkedValue,r)},className:N,isChecked:n,render:()=>a.createElement(I.S,{checked:n,text:P.valuesToDisplayText(r,(0,C.E)(e.checkedValue))}),highlightWhenActive:!0,displayText:""})}}));let F=h?a.createElement(l.J,{enabled:b},a.createElement(T.j,{parentRect:o.data.targetRect,minWidth:162,showPoint:e.isMobile??!0,lean:"right",leanPadding:0,items:M,onSelectItem:function(e){A(),e.callback&&e.callback("",null,r)},dispatch:r})):null;return e.isMobile?F:a.createElement("div",{className:`${R} ${e.className||""} ${m.s.m0.$}`},a.createElement(s.E,{onClick:e=>{S(e),w(e)},"aria-expanded":h},a.createElement("span",{ref:n},e.textWhenClosedPrefix,e.hideValueWhenClosed||e.valuesToDisplayText[e.checkedValue]),a.createElement("div",{className:"tile_sort_filter--caretContainer--kkZQq"},a.createElement(u.B,{svg:L.A,className:`tile_sort_filter--caret--AJHA9 ${h?"tile_sort_filter--caretDown--hIOid":""}`}))),h?"search"===E.view?k:F:null)}let k={dropdownId:"tile-filter-creator-dropdown",values:[v.rJ.ANY,v.rJ.SELF,v.rJ.OTHER],textWhenClosedPrefix:"",valuesToDisplayText:{[v.rJ.ANY]:(0,p.tx)("tile.sort_filter.created_by_anyone"),[v.rJ.SELF]:(0,p.tx)("tile.sort_filter.created_by_you"),[v.rJ.OTHER]:(0,p.tx)("tile.sort_filter.created_by_others")}};class M extends a.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let r=this.props.options.tileSortFilterConfig,n={...r,filters:{...r.filters,creator:e}};this.props.dispatch(f.JF({selectedView:this.props.selectedView,config:n}))}}render(){return a.createElement(D,{dropdownId:k.dropdownId,values:k.values,textWhenClosedPrefix:k.textWhenClosedPrefix,valuesToDisplayText:k.valuesToDisplayText,includeSortDirection:!1,checkedValue:this.props.options.tileSortFilterConfig.filters.creator,onChange:this.onChange,hideSortOptionLabel:!0})}}M.displayName="TileFilterCreatorDropdown",v.Jh.CAN_BE_RESTORED_DELETED,v.Jh.CAN_BE_VIEWED,v.Jh.CAN_BE_RESTORED_DELETED,(0,p.tx)("tile.sort_filter.can_be_restored_permanently_deleted"),v.Jh.CAN_BE_VIEWED,(0,p.tx)("tile.sort_filter.can_be_viewed");let F={dropdownId:"tile-filter-file-type-dropdown",values:[v.t2.ANY,v.t2.DESIGN,v.t2.FIGJAM],valuesToDisplayText:{[v.t2.ANY]:(0,p.tx)("tile.sort_filter.filter_by_all_files"),[v.t2.DESIGN]:(0,p.tx)("tile.sort_filter.filter_by_design_files"),[v.t2.FIGJAM]:(0,p.tx)("tile.sort_filter.filter_by_figjam_files"),[v.t2.PROTOTYPE]:(0,p.tx)("tile.sort_filter.filter_by_prototype_files"),[v.t2.SITES]:(0,p.tx)("tile.sort_filter.filter_by_sites_files"),[v.t2.SLIDES]:(0,p.tx)("tile.sort_filter.filter_by_slides_files")}};function x(e){let r=(0,i.wA)(),n=(0,i.d4)(e=>e.selectedView),o="search"===n.view,s=(0,A.oz)(),c=(0,d.kc)().file_browser_ia_overhaul_m1_dropdowns,u="sharedWithYou"===n.view||"recentsAndSharing"===n.view,m=F.values;return(m=(0,d.kc)().piper?m.concat([v.t2.SLIDES]):m,m=u?m.concat([v.t2.PROTOTYPE]):m,m=s?m.concat([v.t2.SITES]):m,"search"===n.view)?a.createElement(h.l,{dropdownId:"full-search-results-resource-facet-dropdown",facetType:b.WY.RESOURCE}):a.createElement(l.J,{enabled:c},a.createElement(D,{dropdownId:F.dropdownId,values:m,valuesToDisplayText:F.valuesToDisplayText,includeSortDirection:!1,checkedValue:e.config.filters.fileType,onChange:a=>{let i={...e.config,filters:{...e.config.filters,fileType:a}};o&&r(E.Rz({fileTypeFilter:a})),r(f.JF({selectedView:n,config:i,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile}))}class U extends a.PureComponent{constructor(){super(...arguments),this.getDefaultSortOrder=e=>({[v.C0.NAME]:v.ue.ASC,[v.C0.CREATED_AT]:v.ue.DESC,[v.C0.TOUCHED_AT]:v.ue.DESC,[v.C0.TRASHED_AT]:v.ue.DESC,[v.C0.SEARCH_RELEVANCE]:v.ue.DESC,[v.C0.PROJECT_NAME]:v.ue.ASC,[v.C0.ACCESSED_AT]:v.ue.DESC,[v.C0.SHARED_AT]:v.ue.DESC,[v.C0.OWNER]:v.ue.DESC})[e]||v.ue.ASC,this.onChange=(e,r)=>{let n=this.props.options.tileSortFilterConfig,a=void 0===r?this.getDefaultSortOrder(e):r,i={...n,sort:{key:e,dir:a}};this.props.dispatch(f.JF({selectedView:this.props.selectedView,config:i,tab:this.props.tab}))}}componentDidMount(){this.props.options.sortKeys.some(e=>e===this.props.options.tileSortFilterConfig.sort.key)||this.onChange(this.props.options.sortKeys[this.props.options.sortKeys.length-1],this.props.options.tileSortFilterConfig.sort.dir)}render(){return a.createElement(l.J,null,a.createElement(D,{...function(e={}){return{dropdownId:"tile-sort-dropdown",textWhenClosedPrefix:"",valuesToDisplayText:{[v.C0.CREATED_AT]:(0,p.tx)("tile.sort_filter.sort_date_created"),[v.C0.TOUCHED_AT]:(0,p.tx)("tile.sort_filter.sort_last_modified"),[v.C0.ACCESSED_AT]:(0,p.tx)("tile.sort_filter.sort_last_viewed"),[v.C0.NAME]:(0,p.tx)("tile.sort_filter.sort_alphabetical"),[v.C0.TRASHED_AT]:(0,p.tx)("tile.sort_filter.sort_date_trashed"),[v.C0.SEARCH_RELEVANCE]:(0,p.tx)("tile.sort_filter.sort_relevance"),[v.C0.SHARED_AT]:(0,p.tx)("tile.sort_filter.date_shared"),...e}}}(),values:this.props.options.sortKeys,includeSortDirection:!0,tileSortValues:P.values,currentDirection:this.props.options.tileSortFilterConfig.sort.dir,checkedValue:this.props.options.tileSortFilterConfig.sort.key,onChange:this.onChange,isMobile:this.props.isMobile}))}}U.displayName="TileSortDropdown"},18615:(e,r,n)=>{var a=n(411855);n(832871),n(161935),n(268065);var i=n(882438);class o extends a.PureComponent{render(){return a.createElement("div",{className:`${i.kL} ${this.props.className||""}`},a.createElement("div",{className:i.zu},this.props.leftSide),!!this.props.center&&a.createElement("div",{className:i.gX},this.props.center),a.createElement("div",{className:i.ok},this.props.rightSide))}}o.displayName="BasicViewBar"},747352:(e,r,n)=>{n.d(r,{p:()=>K});var a=n(411855),i=n(188507),o=n(777535),s=n(991458),l=n(284491),c=n(841962),d=n(728722),u=n(977235),m=n(139879),p=n(265851),h=n(719334),_=n(76265),g=n(167759),f=n(463009),E=n(361943),y=n(464269),b=n(285874),v=n(723153),T=n(618038),I=n(628816),S=n(315481),w=n(7842),A=n(942754),C=n(736041),N=n(140835),L=n(190500),O=n(353428),R=n(920981),P=n(314540),D=n(183739),k=n(510669),M=n(689102),F=n(487388),x=n(880146),U=n(324225),B=n(941854),V=n(689954),G=n(574431),H=n(182249),W=n(488527);function K({className:e,folder:r,useLGPerms:n,onRenameClick:K}){let Y=(0,i.d4)(e=>e.dropdownShown),$=(0,i.wA)(),j=(0,d.Rs)(D.vhY,{folderId:r.id}),z=(0,u.oA)(u.oA(j.data)?.project?.pendingAssetTransferRequest),q=z&&{id:z.id,source_user_email:z.sourceUser?.email,destination_user_email:z.destinationUser?.email,is_transfer_copy:z.isTransferCopy}||void 0,Z=(0,N.j6)(),X=function(e){let r=(0,i.d4)(e=>(0,k.getPermissionsState)(e)),n=(0,i.d4)(e=>e.currentUserOrgId),a=(0,i.d4)(e=>e.orgById[e.currentUserOrgId]),d=(0,i.d4)(e=>e.currentTeamId),u=(0,i.d4)(e=>e.loadedFolders),N=(0,B.S)(),L=(0,m.n_)(R.Ct),D=(0,m.n_)(R.k4),V=n||d,K=n?P.OL.ORG:P.OL.TEAM,Y=(0,i.d4)(e=>e.teams),$=(0,l.YO)(e),j=(0,i.wA)();return({folder:e,onRenameClick:i,shouldShowJoinButton:l,pendingTransfer:d})=>{let m=e.teamId,k=e&&m?Y[m]:void 0,B=k?k.org_id:e.orgId;if("loaded"!==$.status)return[];let z=!!$.data?.canEdit,q=!!$.data?.canTrash,Z=!!$.data?.canShare,X=!!$.data?.canMove,J=!!$.data?.canRestore,Q=!!$.data?.canPermanentlyDelete,ee=(0,c.kc)().fc_general&&!!$.data?.canConnect,et=e.teamId?r.teams[e.teamId]:void 0,er=!!$.data?.canSeeTransferOption,en=!!$.data?.canEditDescription,ea=!!$.data?.canTransferExternally,ei=()=>{j((0,R.jl)({folderId:e.id,loadedFolders:u})),j(C.to({type:H.W,data:{folderId:e.id}}))},eo=()=>{j(A.ZJ({folderId:e.id,teamId:e.teamId,isSubscribed:!e.isSubscribed}))},es=()=>{let r=(0,x.EE)(e.id,n);j(w.S({url:r}))},el=()=>{j(C.to({type:(0,v.C)(),data:{folder:e}}))},ec=()=>{j((0,R.jl)({folderId:e.id,loadedFolders:u})),j(C.to({type:T.J,data:{folderId:e.id}}))},ed=({canAccessPaidFeatures:e,shouldTransferCopy:r,team:n})=>{let a=(0,c.kc)().enable_starter_project_transfers;if(!n||!ea){em();return}if(e||a){eu(r);return}j(C.to({type:G.DV,data:{team:n,resource:F.Bi.PROJECT_TRANSFER,currentPlan:O.F.Plan.STARTER,upsellPlan:O.F.Plan.PRO,editorType:null}}))},eu=r=>{e.teamId&&j(C.to({type:(0,f.Lg)(),data:{folderId:e.id,teamId:e.teamId,entryPoint:f.Lq.PROJECT_SETTINGS,shouldTransferCopy:r}}))},em=()=>{e.teamId&&j(C.to({type:(0,E.Y)(),data:{planId:V,planType:K,planName:(a?a.name:Y[e.teamId]?.name)||"",entryPoint:f.Lq.PROJECT_SETTINGS,resourceType:"folder",resourceIdOrKey:e.id}}))},ep=()=>{d&&j(C.to({type:(0,I.d)(),data:{pending:d,canTransferProject:ea}}))},eh=(r,n)=>({displayText:r,disabled:(0,c.kc)().asset_transfer_admin_list?!er:!ea,callback:()=>ed({canAccessPaidFeatures:!!(et&&(0,M.PS)(et)),shouldTransferCopy:n,team:et}),trackingEventName:n?"Folder Transfer Copy Click":"Folder Transfer Click",trackingProperties:{folderId:e.id,canUserAccessProFeature:!!(et&&(0,M.PS)(et)),entryPoint:"Folder Context Menu"}}),e_=window.innerWidth<=(0,s.hG)(W.tgj),eg=!Z||!e_,ef=(0,c.kc)().folder_settings_modal,eE=[];return e.trashedAt?(J&&eE.push({displayText:(0,_.t)("project_menu.restore"),callback:()=>{(0,o.sx)("Folder Restore Click",{folderId:e.id,teamId:m,orgId:B}),k&&!(0,M.rR)(k,{type:M.sK.ADD_PROJECT})?j(C.to({type:G.DV,data:{team:k,resource:F.vL.FOLDER,action:U.ZN.CREATE_FOLDER,currentPlan:O.F.Plan.STARTER,upsellPlan:O.F.Plan.PRO,editorType:null}})):D({folderId:e.id,team:k}).catch(()=>{j(h.s.error((0,_.t)("file_browser.api_folder.error_when_restoring")))})},disabled:!J}),Q&&eE.push({displayText:(0,_.t)("project_menu.permanently_delete"),callback:()=>{(0,o.sx)("Folder Permanently Delete Click",{folderId:e.id,teamId:e.teamId,orgId:B}),j(C.to({type:(0,b.U)(),data:{folder:e,folderOrgId:B}}))},disabled:!Q})):ef?(eE.push({displayText:(0,_.t)("file_browser.copy_link"),callback:es}),l||(eg||eE.push({displayText:(0,_.t)("sidebar.share"),callback:ei}),(B===V||m===V)&&eE.push({displayText:(0,_.t)("sidebar.move_project"),callback:ec,disabled:!X}),N||eE.push({displayText:e.isSubscribed?(0,_.t)("sidebar.remove_from_favorites"):(0,_.t)("sidebar.add_to_favorites"),callback:eo}),eE.push({displayText:"",separator:!0}),eE.push({displayText:(0,_.t)("project_menu.settings"),callback:()=>{j(C.to({type:S.l,data:{folderId:e.id}}))},trackingEventName:"Folder Settings Click",trackingProperties:{folderId:e.id,entryPoint:"Folder Context Menu"}}))):(e.description&&(eE.push({displayText:(0,_.t)("project_menu.description"),disabled:!0},{displayText:e.description,displayTextClassName:p.s.colorTextMenuSecondary.preWrap.$,disabled:!0},{displayText:"",separator:!0}),en&&eE.push({displayText:(0,_.t)("project_menu.edit_description"),callback:el},{displayText:"",separator:!0})),!e.description&&en&&eE.push({displayText:(0,_.t)("project_menu.add_description"),callback:el}),eE.push({displayText:(0,_.t)("file_browser.copy_link"),callback:es}),l||(eg||eE.push({displayText:(0,_.t)("sidebar.share"),callback:ei}),(B===V||m===V)&&eE.push({displayText:(0,_.t)("sidebar.move_project"),callback:ec,disabled:!X}),i&&eE.push({displayText:(0,_.t)("sidebar.rename"),callback:()=>{i&&i(e)},disabled:!z}),N||eE.push({displayText:e.isSubscribed?(0,_.t)("sidebar.remove_from_favorites"):(0,_.t)("sidebar.add_to_favorites"),callback:eo}),eE.push({displayText:"",separator:!0}),ee&&eE.push({displayText:(0,_.t)("project_menu.connect"),callback:()=>{j(C.to({type:g.C,data:{folder:{...e,plan:{key:{type:B?P.OL.ORG:P.OL.TEAM,parentId:B||m},name:(B?a?.name:k?.name)||""}},entryPoint:g.wR.PROJECT_SETTINGS}}))},disabled:!1}),er&&!d&&(eE.push(eh((0,_.t)("project_menu.transfer"),!1)),eE.push(eh((0,_.t)("project_menu.send_a_copy"),!0))),d&&er&&eE.push({displayText:"",separator:!0},{displayText:(0,_.t)("project_menu.pending_transfer_request"),disabled:!0},{displayText:(0,_.t)("project_menu.view_transfer_details"),callback:()=>ep()},{displayText:"",separator:!0}),eE.push({displayText:(0,_.t)("project_menu.move_to_trash"),callback:()=>{(0,o.sx)("Folder Trash Click",{folderId:e.id,teamId:e.teamId,orgId:B,entryPoint:"Folder Context Menu"}),e.folderPerms?.canSkipDeletionConfirmation?L({folderId:e.id}).catch(()=>{j(h.s.error((0,_.t)("file_browser.api_folder.error_when_moving_to_trash")))}):j(C.to({type:(0,y.V)(),data:{folder:e}}))},disabled:!q}))),eE}}(r.id),J=Y?.data?.targetRect;if(!J)return null;let Q=X({folder:r,useLGPerms:n,onRenameClick:K,pendingTransfer:q});return a.createElement(N.fu,{name:"Folder Context Menu"},a.createElement(V.j,{className:e,items:Q,parentRect:J,showPoint:!1,lean:"right",dispatch:$,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},$,r),e.trackingProperties&&(0,L.Cu)({...Z.properties,trackingContext:e.trackingEventName||Z.name,...e.trackingProperties})},shouldUsePortal:!0,autofocusPrevOnDismount:!0}))}},664360:(e,r,n)=>{n.d(r,{W:()=>R});var a=n(411855),i=n(188507),o=n(991458),s=n(719334),l=n(76265),c=n(970331),d=n(883117),u=n(7842),m=n(47795),p=n(736041),h=n(19097),_=n(699256),g=n(920981),f=n(314540),E=n(749884),y=n(305216),b=n(510669),v=n(880146),T=n(331850),I=n(324225),S=n(479251),w=n(689954),A=n(729257),C=n(289906),N=n(880842),L=n(488527),O=n(142413);function R({className:e,team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P,canDeleteTeam:D}){let k=(0,i.d4)(e=>e.dropdownShown),M=(0,i.wA)(),F=(function(){let e=(0,i.d4)(e=>(0,b.getPermissionsState)(e)),r=(0,i.d4)(e=>e.selectedView),n=(0,i.d4)(e=>e.teamRoleRequests),w=(0,i.wA)();return({team:i,onRenameClick:R,onChangeTeamIconClick:P,teamRoleRequests:D,canDeleteTeam:k})=>{let M=()=>{w(m.oB()),w(p.to({type:N.p,data:{teamId:i.id}}))},F=(0,_.GR)(w,i.id),x=e=>{w(p.to({type:A.$,data:{team:e}}))},U=(0,_.GR)(w,i.id,T.e6.ADMIN),B=(0,_.GR)(w,i.id,T.e6.OWNER),V=e=>{if(!D)return;let r=D[e.id].id;w(h.lT({requestId:r}))},G=e=>{w(p.to({type:N.p,data:{teamId:e.id}}))},H=()=>{w(m.oB());let e=!!i.org_id,r=e=>{w(p.to({type:C.H,data:{team:i,subscriptionStatus:e}}))};e?r(!0):S.$.getSubscriptionStatus({teamId:i.id}).then(({data:e})=>{r(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{e.data?.message&&w(s.s.error(e.data.message))})},W=e.roles.byTeamId[i.id]||{},K=Object.keys(W).filter(e=>!W[e].pending).length,Y=(0,b.canAdminTeam)(i.id,e),$=i?.org_access===f.bU.PUBLIC||K>1,j=k??(0,b.hasAdminRoleAccessOnTeam)(i.id,e),z=(0,y.R$)(e.user,e.currentUserOrgId),q=window.innerWidth<=(0,o.hG)(L.tgj),Z=[{displayText:(0,l.t)("file_browser.copy_link"),callback:()=>{let e=(0,I.bL)(i.id,i.org_id);w(u.S({url:e}))}}];return"search"===r.view&&i.org_id!==e.currentUserOrgId||(i.canEditTeamContents&&q&&!z&&Z.push({displayText:(0,l.t)("file_browser.team.new_project"),callback:()=>{w((0,g.SX)({where:v.Ah.FolderListView,team:{...i,canAdmin:Y}}))}}),q&&Z.push({displayText:(0,l.t)("file_browser.team.invite"),callback:()=>{w(p.to({type:(0,c.T)(),data:{teamId:i.id,notifyOnSuccess:!0}}))}}),Y&&Z.push({displayText:(0,l.t)("team_view.toolbar.rename"),callback:()=>{w(m.oB()),R&&R(i)}}),Y&&P&&Z.push({displayText:(0,l.t)("team_view.toolbar.change_icon"),callback:()=>{w(m.oB()),P&&P(i)}}),Z.push(...(()=>{let r=[];return((0,b.hasViewerRoleAccessOnTeam)(i.id,e)?$&&r.push({displayText:(0,l.t)("team_view.toolbar.leave_team"),callback:M}):i.org_id&&(0,E.YP)(i,n[i.id],e,i.org_id)!==E.gO.CLICK_JOIN&&r.push({displayText:"",render:()=>a.createElement(d.m,{key:"main-cta",className:O.M,onBypassRequestOverride:B,onJoin:F,onJoinRequestOverride:x,onJoinAsAdmin:U,onLeave:G,onWithdrawRequestForTeamOverride:V,team:i,useLinks:!0,isCardActive:!1}),highlightWhenActive:!0}),j&&r.push({displayText:(0,l.t)("team_view.toolbar.delete_team"),callback:H}),0===r.length)?[]:[{displayText:"",separator:!0},...r]})())),Z}})()({team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P,canDeleteTeam:D});return a.createElement(w.j,{className:e,items:F,parentRect:k?.data?.targetRect,showPoint:!1,lean:"right",dispatch:M,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},M,r)},autofocusPrevOnDismount:!0})}},450771:(e,r,n)=>{n.d(r,{BT:()=>l,Un:()=>u});var a=n(236891),i=n(805014),o=n(245954),s=n(875877);let l=(0,n(263885).SG)(()=>i.Ez5.canvasGrid().canvasGridArray),c=(0,s.atom)(e=>{let r=e(l),n=[];return r.forEach((e,r)=>{e.forEach((e,a)=>{let i=(0,o.UN)().get(e);i&&n.push({id:e,coord:{row:r,col:a},node:i})})}),n}),d=(0,s.atom)(e=>{let r=e(c),n=new Map;return r.forEach(e=>n.set(e.id,e)),n}),u=(0,s.atom)(e=>{let r=e(l),n=e(d);return r.reduce((e,r,i)=>(e[i]=r.map(e=>n.get(e)).filter(a.Vq),e),{})})},75076:(e,r,n)=>{n.d(r,{$j:()=>o});var a=n(875877),i=n(450771);function o({row:e,x:r=0,y:n=0}){let o=a.atomStore.get(i.Un)[e];o&&o.forEach(e=>{var a;(a=e.node?.parentNode?.type==="MODULE"?e.node.parentNode:e.node)&&(a.overlayTransform.m02!==r||a.overlayTransform.m12!==n)&&(a.overlayTransform={...a.overlayTransform,m02:r,m12:n})})}},673466:(e,r,n)=>{n.d(r,{k:()=>a});let a=/_INTERNAL_PILL_KEY_[0-9]+_/g},228432:(e,r,n)=>{n.d(r,{cH:()=>i}),n(411855),n(217950),n(805014),n(841962);var a=n(875877);n(550479),n(250379),n(427494),n(176160),n(130774),n(506925),n(77513);let i=(0,a.atom)(!1)},506925:(e,r,n)=>{n.d(r,{Oq:()=>a}),n(411855),n(841962);let a=(0,n(875877).atom)(!1)},577883:(e,r,n)=>{n.d(r,{_:()=>l});var a=n(411855),i=n(693565),o=n(70424),s=n(256127);function l({is24x24:e}){return a.createElement(i.B,{svg:s.A,className:o.K,svgClassName:e?o.B:void 0})}},367554:(e,r,n)=>{n.d(r,{C2:()=>d,Gx:()=>u});var a=n(411855),i=n(76265),o=n(406379),s=n(51317),l=n(59555),c=n(924541);function d({badges:e},r,n){return e.some(e=>e===l.s.FIGMA_PARTNER)?a.createElement(o.c,{showBorder:r,is24x24:n}):null}function u(e){let r=a.createElement("a",{href:"https://www.figma.com/partners/",target:"_blank",className:c.RL,onClick:e=>{e.stopPropagation()}},(0,i.tx)("community.detail_view.figma_partner_this_creator_is"),a.createElement("span",{className:c.kz},(0,i.tx)("community.learn_more")));return a.createElement(s.m_,{preview:r},e.children)}},818630:(e,r,n)=>{n.d(r,{$3:()=>v,QP:()=>b,V6:()=>_,op:()=>y});var a=n(411855),i=n(188507),o=n(76265);n(960449);var s=n(86994),l=n(419378),c=n(968525),d=n(492366),u=n(781413),m=n(404469),p=n(498230);function h(e){let r=(0,l.bV)(e.resource.monetized_resource_metadata);return a.createElement(p.Ex,{background:"light",height:e.height},r)}function _({resource:e,showPrice:r=!1,height:n,isPaymentAnnualSubscription:i=!1,backgroundColor:c,border:d}){if(!(0,s.Us)()()&&e&&(0,m.Uv)(e.monetized_resource_metadata)){let s=i?(0,l.bV)(e.monetized_resource_metadata,!0):(0,l.bV)(e.monetized_resource_metadata);return a.createElement(p.Ex,{height:n,background:c||"light",border:d},r?(0,o.tx)("community.buyer.subscribed_with_price",{priceString:s}):(0,o.tx)("community.buyer.subscribed"))}return a.createElement(p.Ex,{height:n,background:c||"light",border:d},(0,o.tx)("community.buyer.purchased"))}function g(e){let r=(0,s.Us)();return a.createElement(p.Ex,{background:"light",height:e.height},r()?(0,o.tx)("community.resource_tiles.paid"):(0,o.tx)("community.detail_view.third_party_badge.off_platform"))}function f(e){let r=(0,s.Us)();return a.createElement(p.Ex,{background:"light",height:e.height},r()?(0,o.tx)("community.resource_tiles.paid"):(0,o.tx)("community.buyer.in_app_purchases"))}function E(e){return(0,s.Us)()()?a.createElement(p.Ex,{background:"light",height:e.height},(0,o.tx)("community.resource_tiles.free")):null}var y=(e=>(e.PURCHASED="purchased",e.OFF_PLATFORM="off_platform",e.FREEMUM="freemium",e.PRICE="price",e.FREE="free",e))(y||{});function b({resource:e,height:r,validBadges:n=Object.values(y)}){return v({resource:e,height:r,validBadges:n,authedActiveCommunityProfile:(0,i.d4)(e=>"authedActiveCommunityProfile"in e?e.authedActiveCommunityProfile:null)})}function v({resource:e,height:r,validBadges:n=Object.values(y),authedActiveCommunityProfile:i}){return e?!(i&&(0,c.cs)(i))&&(0,u.t)(e)&&e.community_resource_payment&&(0,l.QQ)(e.community_resource_payment)?n.includes("purchased")?a.createElement(_,{resource:e,height:r}):null:(0,d.PM)(e)?n.includes("freemium")?a.createElement(f,{height:r}):null:(0,d.m3)(e)?n.includes("price")?a.createElement(h,{resource:e,height:r}):null:(0,d.zF)(e)?n.includes("off_platform")?a.createElement(g,{height:r}):null:n.includes("free")?a.createElement(E,{height:r}):null:null}},488130:(e,r,n)=>{n.d(r,{w5:()=>c,mG:()=>l});var a=n(411855);n(629019);var i=n(777535);n(299009),n(265851),n(773991);var o=n(76265),s=n(864986);function l(e,r,n,a){(0,i.sx)("cmty_purchase_button_click",{context:r,resource_type:(0,s.Dl)(e),resource_id:e.id,user_id:n,profile_id:a})}function c({metadata:e,condensed:r}){return a.createElement("span",{className:r?"purchase_button_view--freeTrialCondensed--zoo-d text--fontPos9--naThA text--_fontBase--QdLsd":"purchase_button_view--freeTrial--KSIhj text--fontPos13--xW8hS text--_fontBase--QdLsd"},r?(0,o.tx)("community.resource.free_trial_days",{days:e.trial_length_in_days}):(0,o.tx)("community.resource.includes_free_trial_days",{days:e.trial_length_in_days}))}n(86994),n(419378),n(140835),n(314540),n(492366),n(404469),n(7395),n(688656),n(465424)},261466:(e,r,n)=>{n.d(r,{$O:()=>l,Jv:()=>s,TI:()=>i,rc:()=>o});var a=n(411855);function i(){return a.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75L7 10V1H1V10L4 7.75ZM0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625Z",fill:"var(--color-icon, black)"}))}function o(){return a.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0 0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625Z",fill:"var(--color-icon, black)"}))}function s(){return a.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 9.98876L9 13.2775V1.02772H1V13.2775L5 9.98876ZM0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148Z",fill:"var(--color-icon, black)"}))}function l(){return a.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0 0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787Z",fill:"var(--color-icon, black)"}))}},452627:(e,r,n)=>{n.d(r,{r5:()=>d});var a=n(411855);n(188507);var i=n(460845);n(777535),n(697737);var o=n(265851);n(76265);var s=n(28487),l=n(880355);n(456891),n(864986),n(504695);var c=n(522725);function d({authors:e}){return a.createElement("div",null,e.map(e=>a.createElement(i.N_,{className:"author_dropdown_preview--authorPreviewListRow--XiWec text--fontPos12--YsUAh text--_fontBase--QdLsd",to:new c.xn({profileHandle:e.profile_handle}).to,key:e.id},a.createElement(s.e,{entity:e}),a.createElement("div",{className:"author_dropdown_preview--authorPreviewListName--sVzBY"},a.createElement("span",{className:o.s.ellipsis.noWrap.overflowHidden.$},e.name),a.createElement(l.l,{profile:e})))))}n(140835),n(611495)},51317:(e,r,n)=>{n.d(r,{So:()=>c,m_:()=>d});var a=n(411855),i=n(629019),o=n.n(i);n(550479);let s=(()=>{let e=[];return["scroll","resize"].forEach(r=>{window.addEventListener(r,()=>{e=e.filter(e=>l(e.el,!1,e.initialHPosition,e.initialVPosition))})}),{set:(r,n,a)=>{e.push({el:r,initialHPosition:n,initialVPosition:a})}}})(),l=(e,r=!1,n,a)=>{if(!e||!("true"===e.parentNode.getAttribute("show-dropdown")||e.parentNode===document.activeElement||e.parentNode?.firstChild===document.activeElement||e===document.activeElement)&&!r)return!1;if(e.parentNode instanceof HTMLElement&&"true"===e.parentNode.dataset.disableRepositioning)return!0;e.dataset.vPosition=a||"below",e.dataset.hPosition="";let i=e.getBoundingClientRect();return i.bottom>window.innerHeight-20?e.dataset.vPosition="above":i.top<20&&(e.dataset.vPosition="below"),i.right>window.innerWidth-100?e.dataset.hPosition="right":i.left<20?e.dataset.hPosition="left":e.dataset.hPosition!==n&&(e.dataset.hPosition=n),!0};function c({children:e,preview:r,className:n,dropdownClassName:i,horizontalPosition:c,verticalPosition:d,disableRepositioning:u,borderRadius:m,allowHoverOnDropdownContents:p=!0}){let h=a.useRef(null),[_,g]=a.useState(!1),[f,E]=a.useState(0),y=e=>{window.innerWidth<500||(E(setTimeout(()=>{let r=h.current;r&&r.parentNode&&(r.parentNode.setAttribute("show-dropdown",e+""),!1===e?setTimeout(()=>{g(e)},150):(s.set(r,c,d),g(e)))},150)),clearTimeout(f))};return a.useLayoutEffect(()=>{_&&!u&&l(h.current,!0,c,d)},[_]),a.createElement("div",{className:n||"dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd","show-dropdown":"false",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),tabIndex:0,"data-disable-repositioning":u,"data-hover-dropdown":!0},a.createElement("div",{onMouseLeave:p?void 0:()=>y(!1)},e),a.createElement("div",{className:o()("dropdown--dropdownContents--BqcL5",i),style:m?{borderRadius:`${m}px`}:{},"data-v-position":d||"below","data-h-position":c||"",ref:h,"data-dropdown-contents":!0},_&&r))}function d({preview:e,children:r}){return a.createElement(c,{className:o()({"dropdown--tooltip--Sh4Vu dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":!0}),preview:e,horizontalPosition:"center"},r)}},421260:(e,r,n)=>{n.d(r,{O7:()=>l,Xy:()=>c});var a=n(411855),i=n(35927),o=n(416455),s=n(871312),l=(e=>(e.DETAIL="detail",e.UNIVERSAL_INSERT="universal_insert",e))(l||{});function c(e){let r={onLoad:e.onLoad,loading:"lazy",draggable:e.draggable};return a.createElement(i.c,{sizes:function(e){switch(e){case"universal_insert":return;case"detail":r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DETAIL;break;default:r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DEFAULT}var r,n=Object.entries(r).map(([e,r],n)=>`(min-width: ${e}px) ${r}vw`);return n.push("100vw"),n.join(", ")}(e.thumbnailContext),srcSet:function(e,r,n,a){let i;if(!e||!r)return"";let o=Object.entries(n||{});if(!n){let n=function(e){if(!e)return;let r=e.lastIndexOf("/"),n=e.indexOf(".",r);return e.substring(r+1,n)}(r);o=Object.keys(s.B.COMMUNITY_HUB_FILE_THUMBNAIL).map(r=>[r,`/community/file/${e}/thumbnail/${r}?signature=${n}`])}return(o.push(["1600",r]),"universal_insert"===a?o.map(([e,r])=>{let n=Math.round(parseInt(e)/80*10)/10;return`${r} ${n}x`}):o.map(([e,r])=>`${r} ${e}w`)).join(", ")}(e.hubFileId,e.image,e.resizedThumbnailUrls,e.thumbnailContext),src:e.image,image_type:o.y.COMMUNITY_HUB_FILE_THUMBNAIL,alt:e.alt,className:e.className,imageProps:r})}},256334:(e,r,n)=>{n.d(r,{Cv:()=>S,Mr:()=>I});var a=n(411855),i=n(629019),o=n.n(i);n(972142);var s=n(437256),l=n(238795);n(265851),n(76265);var c=n(158066),d=n(818630);n(880355);var u=n(421260),m=n(341270),p=n(456891),h=n(864986),_=n(86994),g=n(66683);n(522725),n(140835);var f=n(314540),E=n(492366);n(138157);var y=n(306325);n(452627);var b=n(130817),v=n(463974),T=n(851750);function I({resource:e,showMonetizationBadge:r}){let n=(0,d.QP)({resource:e,height:"24"});if(r&&n)return a.createElement("div",{className:v.BQ},n);let i=(0,c.n)({badges:e.badges});return i?a.createElement("div",{className:v.BQ},a.createElement(c.v,null,i)):null}function S({resource:e,isMetaHidden:r,onIntersectionChange:n,onClickOverride:i,index:c,subView:d}){let S=(0,p.J)(),w=(0,_.X5)(),A=(0,_.Us)(),C=(0,h.qD)(e),N=e.client_meta&&JSON.parse(e.client_meta)?.background_color,L=e.thumbnail_is_set;e.viewer_mode===f.y4.WHITEBOARD&&(N={r:1,g:1,b:1});let O=a.createElement(u.Xy,{image:e.thumbnail_url,hubFileId:e.id,onLoad:e=>e.target.style.opacity="1",alt:C.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),R=L?v.zA:e.viewer_mode===f.y4.WHITEBOARD?v.ZW:v.XO;return a.createElement("div",{className:v.Sl,"data-testid":"hub-file-tile"},a.createElement(s.a,{onIntersectionChange:e=>n?.(e)}),a.createElement(m.A6,{to:(0,h._t)({resource:e}),onClick:r=>{(0,g.cB)("hub_file",e.id,c,S,d)},onClickOverride:i,className:w?v.nJ:v.BN},a.createElement("div",{className:o()(R,{[v.$c]:w}),style:{backgroundColor:N&&`rgb(${255*N.r}, ${255*N.g}, ${255*N.b})`}},O,e.viewer_mode===f.y4.PROTOTYPE&&a.createElement(l.t,{svg:T.A,className:v.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:T.A}),a.createElement("div",{className:v.JM},a.createElement(y.dn,{editorType:(0,h.JJ)(e.viewer_mode)})),!r&&a.createElement(I,{resource:e,showMonetizationBadge:!A()}))),!r&&a.createElement(b.my,{resource:e,type:E.vt.HUB_FILE}))}},568914:(e,r,n)=>{n(411855),n(173283),n(777535);var a=n(742360);n(163773);var i=n(841962),o=n(875877);n(700509),n(748372),n(878762);var s=(e=>(e[e.CLOSED=0]="CLOSED",e[e.PRELOAD=1]="PRELOAD",e[e.OPEN=2]="OPEN",e))(s||{});let l=(0,i.kc)().iframe_triggered_one_tap?`/login_iframe?with_community_header=true&type=fixedmodal&one_tap_origin=${a.DT.COMMUNITY}`:"/login_iframe?with_community_header=true&type=fixedmodal";(0,o.atom)({state:0,url:l,mounted:!1}),(0,o.atom)(!1)},173283:(e,r,n)=>{n(411855);var a=n(875877);n(700509),n(693565),n(140835),n(643894),n(568914),n(748372),n(878762),(0,a.atom)(null)},7619:(e,r,n)=>{n(411855),n(629019),n(747484),n(693565),n(265851),n(76265),n(86994),n(419378),n(688656),n(51317)},937688:(e,r,n)=>{n.d(r,{X:()=>i});var a=n(411855);function i(e){let[r,n]=a.useState(!0);return a.useEffect(()=>{let r=new Image;r.onload=()=>{let e=r.width/r.height;n(!(Math.abs(e-2)<Math.abs(e-16/9)))},r.src=e||""},[e]),r}n(864986),n(945315)},960449:(e,r,n)=>{n.d(r,{I:()=>l});var a=n(728722),i=n(419378),o=n(183739),s=n(492366);function l(e){let r=e&&(0,s.m3)(e)?e.monetized_resource_metadata.id:"-1",n=(0,a.Rs)(o.oro,{monetizedResourceMetadataId:r},{enabled:!0});if("loaded"!==n.status||n.errors?.length)return e?.community_resource_payment;{let{communityResourcePayment:e}=n.data;if(!e)return;return(0,i.xs)(e)}}},818038:(e,r,n)=>{n.d(r,{aZ:()=>l}),n(841962);var a=n(76265),i=n(316581),o=n(179462);let s={[o.LJ.visualAssets]:()=>(0,a.t)("community.categories.visual_assets"),[o.LJ.development]:()=>(0,a.t)("community.categories.development"),[o.LJ.accessibility]:()=>(0,a.t)("categories.accessibility"),[o.LJ.brainstorming]:()=>(0,a.t)("categories.brainstorming"),[o.LJ.classroomActivities]:()=>(0,a.t)("categories.classroom_activities"),[o.LJ.designTemplates]:()=>(0,a.t)("community.categories.design_templates"),[o.LJ.designTools]:()=>(0,a.t)("community.categories.design_tools"),[o.LJ.desktopAppsWebsites]:()=>(0,a.t)("categories.desktop_apps_websites"),[o.LJ.diagramming]:()=>(0,a.t)("categories.diagramming"),[o.LJ.editingEffects]:()=>(0,a.t)("categories.editing_effects"),[o.LJ.education]:()=>(0,a.t)("community.categories.education"),[o.LJ.fileOrganization]:()=>(0,a.t)("categories.file_organization"),[o.LJ.fontsTypography]:()=>(0,a.t)("categories.fonts_typography"),[o.LJ.funGames]:()=>(0,a.t)("categories.fun_games"),[o.LJ.icons]:()=>(0,a.t)("community.categories.icons"),[o.LJ.illustrations]:()=>(0,a.t)("categories.illustrations"),[o.LJ.importExport]:()=>(0,a.t)("categories.import_export"),[o.LJ.libraries]:()=>(0,a.t)("categories.libraries"),[o.LJ.mobileApps]:()=>(0,a.t)("categories.mobile_apps"),[o.LJ.portfolios]:()=>(0,a.t)("categories.portfolios"),[o.LJ.calendarTemplates]:()=>(0,a.t)("categories.calendar_templates"),[o.LJ.presentations]:()=>(0,a.t)("categories.presentations"),[o.LJ.prototypingAnimation]:()=>(0,a.t)("categories.prototyping_animation"),[o.LJ.resumes]:()=>(0,a.t)("categories.resumes"),[o.LJ.shapesColors]:()=>(0,a.t)("categories.shapes_colors"),[o.LJ.stockPhotography]:()=>(0,a.t)("categories.stock_photography"),[o.LJ.strategicPlanning]:()=>(0,a.t)("categories.strategic_planning"),[o.LJ.teamMeetings]:()=>(0,a.t)("categories.team_meetings"),[o.LJ.tutorials]:()=>(0,a.t)("categories.tutorials"),[o.LJ.uiKits]:()=>(0,a.t)("categories.ui_kits"),[o.LJ.wireframes]:()=>(0,a.t)("categories.wireframes"),[o.LJ.whiteboarding]:()=>(0,a.t)("community.categories.whiteboarding")};function l(e){if(e.i18n_meta?.title)return(0,a.Yd)(e.i18n_meta.title,e.title);let r=(0,i.S)(e.url_slug,o.LJ);return r?s[r]?.()??e.title:e.title}},27147:(e,r,n)=>{n.d(r,{y$:()=>d,Lj:()=>l,EU:()=>c});var a=n(411855);n(629019),n(747484);var i=n(76265);n(452627),n(51317),n(522725),n(140835);var o=n(463974),s=n(193188);function l(e){let r=e.community_publishers.accepted;return 0===r.length?"":1===e.community_publishers.accepted.length?r[0].name:(0,i.t)("community.publisher_with_suffix",{publisherName:r[0].name,publishersSuffix:(0,i.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r.length-1})})}function c(e){let r=e.community_publishers.accepted;if(0===r.length)return"";let n=r.length>1,o=a.createElement("span",{className:n?s.sA:s.cy},r[0].name),l=a.createElement("span",{className:s.Zz},(0,i.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r.length-1})),c=(0,i.tx)("community.publisher_with_suffix",{publisherName:o,publishersSuffix:l});return a.createElement("span",{className:n?s.tF:s.cy},(0,i.tx)("community.resource_tiles.by_author",{author:n?c:o}))}function d(){return a.createElement("svg",{className:o.u1,viewBox:"0 0 50 50"},a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"}))}},864986:(e,r,n)=>{n.d(r,{Cg:()=>G,Co:()=>I,DV:()=>x,Dl:()=>P,HD:()=>S,JJ:()=>C,KG:()=>H,KH:()=>Y,ME:()=>K,N6:()=>W,Qy:()=>z,UI:()=>F,Uu:()=>V,_t:()=>M,cX:()=>R,iX:()=>L,lW:()=>U,nF:()=>$,qD:()=>A,r7:()=>O,rk:()=>N,ss:()=>D,vC:()=>B});var a=n(846288),i=n(511611),o=n(841563),s=n.n(o),l=n(163773);n(809242),n(841962);var c=n(972142),d=n(91193),u=n(709701),m=n(599110);n(114391),n(880486);var p=n(671694);n(91247);var h=n(535461),_=n(314540),g=n(492366),f=n(906597);n(754430);var E=n(45049),y=n(7395);n(945315);var b=n(758268);n(2373);var v=n(316581),T=n(243474);n(182032);let I=new RegExp(/^[\w.]{0,30}$/),S=new RegExp(/^\w{0,15}$/);function w(e){return"current_hub_file_version_id"in e?e.versions[e.current_hub_file_version_id]:"current_plugin_version_id"in e&&e.current_plugin_version_id?e.versions[e.current_plugin_version_id]:void 0}function A(e){return w(e)}function C(e){switch(e){case _.y4.SLIDE_TEMPLATE:return f.LE.SLIDES;case _.y4.WHITEBOARD:return f.LE.FIGJAM;case _.y4.SITE_TEMPLATE:return f.LE.SITES;case _.y4.CANVAS:case _.y4.PROTOTYPE:default:return f.LE.FIGMA}}function N(e){switch(e){case _._Y.DESIGN:return f.LE.FIGMA;case _._Y.WHITEBOARD:return f.LE.FIGJAM;case _._Y.SLIDES:return f.LE.SLIDES;case _._Y.SITES:return f.LE.SITES;case _._Y.COOPER:return null;default:(0,a.xb)(e)}}let L=[_.y4.CANVAS,_.y4.PROTOTYPE,_.y4.LIBRARY];function O(e){return"viewer_mode"in e&&e.viewer_mode===_.y4.LIBRARY}function R(e){return null!==e&&"viewer_mode"in e&&e.viewer_mode===_.y4.SLIDE_TEMPLATE}function P(e){return function(e){switch(e){case g.vt.HUB_FILE:return p.Uo.FILE;case g.vt.PLUGIN:return p.Uo.PLUGIN;case g.vt.WIDGET:return p.Uo.WIDGET}}((0,T.Vm)(e))}function D(e,{plural:r=!1}={}){let n=(0,T.Vm)(e);switch(n){case g.vt.HUB_FILE:return r?p.UF.FILE:p.Uo.FILE;case g.vt.PLUGIN:return r?p.UF.PLUGIN:p.Uo.PLUGIN;case g.vt.WIDGET:return r?p.UF.WIDGET:p.Uo.WIDGET;default:(0,a.xb)(n)}}var k=(e=>(e.HUB_FILES="hub_files",e.PLUGINS="plugins",e.WIDGETS="widgets",e))(k||{});function M({resource:e}){return F({path:P(e),id:e.id,name:w(e)?.name??""})}function F({path:e,id:r,name:n}){let a=(0,c.fs)(n||"");return`/community/${e}/${r}${""===a?"":"/"}${a}`}function x(e){return`${location.origin}${M({resource:e})}`}function U(e){var r=document.createElement("input");r.style.position="fixed",r.style.top="-1000px",r.value=e,r.classList.add(h.Dm),document.body.appendChild(r),r.select(),r.focus(),document.execCommand("copy"),r.parentNode.removeChild(r)}function B(e,r){if(r)return r+" | Figma";if("/community"===l.Ay.location.pathname||!e)return"Add a little magic to your files";if("/community/plugins"===l.Ay.location.pathname)return"Powerful Plugins Made Just For Figma";if("/community/widgets"===l.Ay.location.pathname)return"Customize your space with Widgets";let n=[];e.sort_by===d.e.Browse.PUBLISHED_AT?n.push("Newest"):e.sort_by===d.e.Browse.ALL_TIME?n.push("Top"):e.sort_by===d.e.Browse.POPULAR&&n.push("Trending");let a=(0,v.S)(e.editor_type,y.FW);return a===y.FW.FIGJAM?n.push("FigJam"):a===y.FW.FIGMA&&n.push("Figma"),e.resourceType===m.L.BrowseResourceTypes.FILES?n.push("Files"):e.resourceType===m.L.BrowseResourceTypes.WIDGETS?n.push("Widgets"):e.resourceType===m.L.BrowseResourceTypes.PLUGINS?n.push("Plugins"):n.push("Resources"),e.tags?.length>0&&n.push(`tagged as ${e.tags.join(", ")}`),e.query&&n.push(`matching "${e.query}"`),n.join(" ")+" | Figma"}function V(e){return e?.stripe_account_status&&e.stripe_account_status!==b.P5.NONE&&e.stripe_account_status!==b.P5.ACCEPTED}function G(e){return s()(e,(0,E.EB)())}async function H(e){try{let r=await fetch(e),n=new Uint8Array(await r.arrayBuffer());return{type:"image",url:e,sha1:(0,i.Et)(n),buffer:n}}catch{return null}}function W(e){let r={},n=(0,T.XW)(e)?e.carousel_media.images:e.carousel_media_urls,a=(0,T.XW)(e)?e.carousel_media.videos:"carousel_videos"in e&&e?.carousel_videos;return n&&Object.entries(n).forEach(([e,n])=>{r[e]={...n,type:"image"}}),a&&Object.entries(a).forEach(([e,n])=>{r[e]={...n,type:"video"}}),Object.entries(r).sort(([e],[r])=>parseInt(e)-parseInt(r)).map(([e,r])=>r)}function K(e,r){if(e===_._Y.DESIGN){if(r===_.y4.PROTOTYPE)return u.k.Editors.PROTOTYPE}else if(e===_._Y.WHITEBOARD||e===y.FW.FIGJAM)return u.k.Editors.FIGJAM;else if(e===_._Y.SLIDES)return u.k.Editors.SLIDES;else if(e===_._Y.SITES)return u.k.Editors.SITES;else if(e===y.FW.DEV)return u.k.Editors.DEV_MODE;return u.k.Editors.FIGMA}function Y(e,{pluralized:r,capitalized:n}={}){return function(e,{pluralized:r,capitalized:n}={}){return j((()=>{switch(e){case g.vt.PLUGIN:return"plugin";case g.vt.WIDGET:return"widget";case"comment":return"comment";case g.vt.HUB_FILE:return"hub file";default:throw Error("Unsupported Type")}})(),{pluralized:r,capitalized:n})}((0,T.Vm)(e),{pluralized:r,capitalized:n})}function $(e,{pluralized:r,capitalized:n}={}){return e?j(g.bD.WIDGET,{pluralized:r,capitalized:n}):j(g.bD.PLUGIN,{pluralized:r,capitalized:n})}function j(e,{pluralized:r,capitalized:n}={}){return e+=r?"s":"",n&&void 0!==e[0]&&(e=e[0].toUpperCase()+e.substr(1)),e}function z(e){let r=e.current_hub_file_version_id?e.current_hub_file_version_id:e.current_plugin_version_id||"";return e.versions[r]?.created_at||""}},86994:(e,r,n)=>{n.d(r,{Dw:()=>g,GM:()=>h,Oh:()=>u,Su:()=>f,Tg:()=>_,Us:()=>E,X5:()=>d,uY:()=>m,yl:()=>y});var a=n(411855),i=n(841962),o=n(875877),s=n(238311);n(343373),n(154267);var l=n(886231),c=n(314540);function d(){let{getConfig:e}=(0,s.I7)("cmty_resource_tile_and_row_redesign");return e().get("enabled",!1)}function u(){return(0,i.kc)().community_category_filter__by}function m(){let{getConfig:e}=(0,s.I7)("cmty_slides_publishing"),r=!!(0,i.kc)().piper_community_templates_publish;return(0,a.useCallback)(()=>e().get("enabled",!1)||r,[r,e])}var p=(e=>(e.ASSET_PANEL_ONLY="asset_panel_only",e.ASSET_PANEL_AND_TOOLBAR="asset_panel_and_toolbar",e))(p||{});function h(){let{getConfig:e}=(0,s.I7)("exp_cmty_visual_assets"),r=(0,o.useAtomValue)(l.UQ),n=(0,i.kc)().cmty_visual_assets;return(0,a.useCallback)(()=>n&&r?e().get("entrypoint",null):null,[e,r,n])}function _(){return!!(0,i.kc)().cmty_rdp_resource_platform}function g(e){return(0,a.useCallback)(()=>e&&[c._Y.DESIGN,c._Y.WHITEBOARD,c._Y.SITES].includes(e)&&!!(0,i.kc)().cmty_file_publishing_rearch,[e])}function f(){return!!(0,i.kc)().cmty_sites_full_file_publishing}function E(){let{getConfig:e}=(0,s.I7)("exp_cmty_m10n_rdp_feed_redesign");return(0,a.useCallback)(()=>!!(0,i.kc)().cmty_m10n_enable_3p_resources&&e().get("enabled",!1),[e])}function y(){return!!(0,i.kc)().cmty_resource_hub}},89670:(e,r,n)=>{n.d(r,{M:()=>o});var a=n(338584),i=(e=>(e.by_creator="by_creator",e.by_tags="by_tags",e))(i||{});function o(e){return a.object({types:a.array(a.nativeEnum(i)),content:a.array(e)})}},486592:(e,r,n)=>{n.d(r,{Gu:()=>I,MU:()=>p,gV:()=>S,sT:()=>_,wl:()=>m}),n(411855);var a=n(895925);n(163773);var i=n(2373),o=n(91193),s=n(313530),l=n(135591),c=n(709701),d=n(599110),u=n(302246);function m(e,r){return _(e,r)||(0,u.J5)(e,r)||function(e,r){let n=decodeURIComponent(e||location.pathname);if(!g.test(n)||f.test(n)||E.test(n))return;let a=("/"===n[0]?n.slice(1):n).split("/"),u={resourceType:d.L.BrowseResourceTypes.MIXED,tags:[],editor_type:c.k.Editors.ALL,sort_by:(0,o.H)(),price:i.C.ALL,category:null,creators:l.Z.ALL};for(let e=0;e<b.length&&0!==a.length;e++){let r=b[e](a,u);r&&r[0]&&(a=r[1],u={...u,...r[0]})}u.editor_type=(0,s.G)(u.editor_type,u.resourceType),u.resourceType=(0,s.l)(u.editor_type,u.resourceType);let m=new URLSearchParams(location.search),p=(()=>{let e=m.get("creators");return e&&e===l.Z.FOLLOWING?e:u.creators})();return{...u,creators:p}}(e)}function p(e){return"query"in e?function(e){let r=new URLSearchParams({resource_type:e.resourceType,sort_by:e.sort_by,query:e.query,editor_type:(0,s.G)(e.editor_type,e.resourceType),price:e.price,creators:e.creators&&l.Z.isSearchType(e.creators)?e.creators:l.Z.ALL}).toString();return`/community/search?${r}`}(e):"category"in e&&null!==e.category?(0,u.iB)(e):function(e){let r="/community";e.tags?.length&&(r+=`/tag/${e.tags.join(",")}`),e.resourceType=(0,s.l)(e.editor_type,e.resourceType),e.resourceType!==d.L.BrowseResourceTypes.MIXED&&(r+=`/${e.resourceType}`),"all"!==(0,s.G)(e.editor_type,e.resourceType)&&(r+=`/${e.editor_type}`),e.price&&i.C.FOR_URL_SLUG.indexOf(e.price)>-1&&(r+=`/${e.price}`),e.creators===l.Z.FIGMA_PARTNER&&(r+=`/${e.creators}`),e.sort_by&&e.sort_by!==(0,o.H)()&&(e.sort_by===o.e.Browse.PUBLISHED_AT?r+="/new":e.sort_by===o.e.Browse.POPULAR&&(r+="/trending")),v[r]&&(r=v[r]);let n={};e.creators===l.Z.FOLLOWING&&(n.creators=e.creators);let a=Object.keys(n).length>0?new URLSearchParams(n).toString():void 0;return a&&(r+=`?${a}`),r}(e)}let h=/^\/community\/search$/;function _(e,r){if(!(e||=location.pathname).match(h))return null;let n=new URLSearchParams(r||=location.search),a=n.get("query");if(!a)return null;let c=n.get("resource_type");if(!c)return null;let d=n.get("sort_by")||o.e.Search.RELEVANCY,u=(0,s.G)(n.get("editor_type"),c);return{resourceType:c,sort_by:d,editor_type:u,query:a,price:n.get("price")||i.C.ALL,creators:(()=>{let e=n.get("creators");return l.Z.isSearchType(e)?e:l.Z.ALL})()}}let g=/^\/community/,f=/^\/community\/collections?\/?/,E=/^\/community\/(file|plugin|widget)\//;var y=(e=>(e.NEW="new",e.POPULAR="popular",e.TRENDING="trending",e.TAG="tag",e.COMMUNITY="community",e))(y||{});let b=[function(e){return"community"===e[0]&&[{},e.slice(1)]},function(e){return"tag"===e[0]&&!!e[1]&&[{tags:e[1].split(",")},e.slice(2)]},function(e){let r=e[0];return Object.values(d.L.BrowseResourceTypes).indexOf(r)>-1&&[{resourceType:r},e.slice(1)]},function(e,r){let n=e[0];return Object.values(c.k.Editors).indexOf(n)>-1&&[{editor_type:(0,s.G)(n,r.resourceType)},e.slice(1)]},function(e){let r=e[0];return i.C.FOR_URL_SLUG.indexOf(r)>-1&&[{price:r},e.slice(1)]},function(e){let r=e[0];return r===l.Z.FIGMA_PARTNER&&[{creators:r},e.slice(1)]},function(e){let r=null;return"new"===e[0]&&(r=o.e.Browse.PUBLISHED_AT),"popular"===e[0]&&(r=o.e.Browse.ALL_TIME),"trending"===e[0]&&(r=o.e.Browse.POPULAR),!!r&&[{sort_by:r},e.slice(1)]}],v={"/community/mixed":"/community"};var T=(e=>(e.SEARCH="/community/search",e))(T||{});function I(){return{resourceType:d.L.BrowseResourceTypes.MIXED,sort_by:(0,o.H)(),editor_type:c.k.Editors.ALL,price:i.C.ALL,tags:[],category:null,creators:l.Z.ALL}}function S(e){return/\/community\/(file|plugin|widget)\/\d+/.test(e)?{reactRouterHandled:!0,subView:"resourcePage"}:/^\/@/.test(e)?{reactRouterHandled:!0,subView:"handle"}:/\/community*/.test(e)?{reactRouterHandled:!0,subView:"searchAndBrowse"}:(a.k.warn(`If this is firing, it means you're trying to use logged-out Community routing on a non-Community URL.
url: ${e}`),{reactRouterHandled:!1,subView:!1})}d.L.BrowseResourceTypes.MIXED,o.e.Search.RELEVANCY,c.k.Editors.ALL,i.C.ALL,l.Z.ALL},316581:(e,r,n)=>{n.d(r,{S:()=>a});function a(e,r,n){return Object.values(r).includes(e)?e:n}},419378:(e,r,n)=>{n.d(r,{F8:()=>_,Lt:()=>L,Mj:()=>f,QQ:()=>w,UO:()=>C,V4:()=>N,WD:()=>g,X2:()=>T,XR:()=>v,Yp:()=>E,ae:()=>h,bV:()=>b,mZ:()=>u,up:()=>I,vf:()=>p,vi:()=>S,wF:()=>m,xs:()=>O,zt:()=>y});var a=n(715149),i=n(76265),o=n(920447),s=n(727903),l=n(492366),c=n(895812),d=n(404469);let u=2,m=1e3;function p(e){if(e?.price){let{price:r}=e;return .01*r}}function h(e){return e?100*e:0}function _(e){return e%1!=0}function g(e,r){return r>e}function f(e,r){return r/e>1.5}function E(e){return e<u||e>=m}function y(e,r){if(!e||!r)return"";let n=1200*e*(1-r/100);return(0,i.t)("community.buyer.price_per_year",{priceString:I(n,n%100!=0)})}function b(e,r=!1){let{price:n,is_subscription:a}=e;if(!a)return I(n,!1);if(r){let r=e.annual_price||0;return(0,i.t)("community.buyer.price_per_year",{priceString:I(r,r%100!=0)})}return(0,i.t)("community.buyer.price_per_month",{priceString:I(n,n%100!=0)})}function v(e){let r=b(e),n=(0,d.Uv)(e)?(0,i.t)("community.buyer.subscribe"):(0,i.t)("community.buyer.buy");return`${n} ${r}`}function T(e){let{price:r,is_subscription:n}=e,a=I(r,r%100!=0);return n?(0,i.t)("community.buyer.price_per_month_subscription",{priceString:a}):(0,i.t)("community.buyer.price_one_time_payment",{priceString:a})}function I(e,r=!1){return new s.vr("usd").formatMoney(e,{showCents:r})}function S(e){switch(e){case d.bG.DOESNT_MEET_NEEDS:return(0,i.t)("community.buyer.refund_reason.doesnt_meet_needs");case d.bG.TECHNICAL_ISSUES:return(0,i.t)("community.buyer.refund_reason.technical_issues");case d.bG.TOO_EXPENSIVE:return(0,i.t)("community.buyer.refund_reason.too_expensive");case d.bG.FOUND_ALTERNATIVE:return(0,i.t)("community.buyer.refund_reason.found_alternative");case d.bG.OTHER:return(0,i.t)("community.buyer.refund_reason.other")}}function w(e){return!!e&&(e.subscription_expires_at&&!isNaN(Date.parse(e.subscription_expires_at))?new Date(e.subscription_expires_at).getTime()+864e5>new Date().getTime()&&!A(e,c.G3.DISPUTED):A(e,c.G3.SUCCEEDED))}function A(e,r){return!!e.status&&e.status===r}function C(e){return e.status===c.G3.SUBSCRIPTION_PAYMENT_FAILED||e.status===c.G3.INVOICE_FINALIZATION_FAILED}function N(e,r){if((0,l.I0)(r)||(0,l.xQ)(r)){let n=(r.plugin_publishers?.accepted||[]).map(e=>e.id),i=(r.plugin_publishers?.pending||[]).map(e=>e.id),o=new Set(n.concat(i)),{pass:s,fail:l}=(0,a.j)(e,e=>o.has(e.id)||e.id===r.creator.id);return{usersCanPurchase:l,publishers:s}}{let n=new Set((0,o.D)(r)),{pass:i,fail:s}=(0,a.j)(e,e=>n.has(e.id));return{usersCanPurchase:s,publishers:i}}}function L({resource:e,payment:r}){let n=e.monetized_resource_metadata;return!!(n&&(0,d.Uv)(n))&&!!n.trial_length_in_days&&(!r||!r.subscription_expires_at)}function O(e){return{status:c.QK[e.status],purchased_at:e.purchasedAt?new Date(e.purchasedAt).toISOString():null,subscription_expires_at:e.subscriptionExpiresAt?new Date(e.subscriptionExpiresAt).toISOString():null,subscription_canceled_at:e.subscriptionCanceledAt?new Date(e.subscriptionCanceledAt).toISOString():null,refund_reason:e.refundReason,monetized_resource_metadata_id:e.monetizedResourceMetadataId,subscription_interval:e.subscriptionInterval}}},22957:(e,r,n)=>{n.d(r,{c:()=>i});var a=n(754430);function i(e){return!!(e&&(e.entity_type===a.o1.ORG||e.entity_type===a.o1.TEAM))}},66683:(e,r,n)=>{n.d(r,{AC:()=>y,G8:()=>f,K2:()=>h,Pg:()=>T,Ul:()=>v,X_:()=>_,Y5:()=>b,cB:()=>I,mk:()=>E});var a=n(846288),i=n(891721),o=n.n(i),s=n(777535),l=n(76265),c=n(880486),d=n(314540);n(492366);var u=n(2019),m=n(864986),p=n(243474);function h(e){return(0,p.Gl)(e)?m.qD(e)?.name:e.name}function _(e,r,n){switch(e){case c.vt.WIDGET:case c.vt.PLUGIN:if(n&&r)return(0,l.tx)("community.using.try_in");return(0,l.tx)("community.using.open_in");case c.vt.FIGJAM_TEMPLATE:return(0,l.tx)("community.duplicate.open_in_figjam");case c.vt.SLIDE_TEMPLATE:return(0,l.tx)("community.use_slide_template");case c.vt.SITE_TEMPLATE:case c.vt.UI_KIT:case c.vt.DESIGN_TEMPLATE:case c.vt.PROTOTYPE:return(0,l.tx)("community.duplicate.open_in_figma");default:(0,a.xb)(e)}}function g(e){let r=document.createElement("div");return r.innerHTML=o().sanitize(e),r.innerText}function f(e,r,n){if(e.tagline)return e.tagline;if(!e.description)return"";let a=(r=r||g)(e.description);return n?function(e){let r=e?.match(/[^.!?\r\n]+[.!?\r\n]+/);return r?r[0].trim():e??""}(a):a}function E(e){return"user_count"in e?e.user_count??0:"unique_run_count"in e?e.unique_run_count:"duplicate_count"in e?e.duplicate_count:0}function y(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE,d.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishing_status)}function b(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE].includes(e.publishing_status)}function v(e){return e.publishing_status===d.KB.APPROVED_PUBLIC}function T(e){return!!e.publishing_status&&[d.KB.DELISTED,d.KB.DELISTED_CREATOR_STRIPE_DISABLED].includes(e.publishing_status)}function I(...e){let{trackingEventName:r,trackingProperties:n}=function(e,r,n,a,i="feed"){return{trackingEventName:"Community Resource Clicked",trackingProperties:{resource_type:e,community_resource_id:r,subView:i,scope:u.Rx.COMMUNITY,index:n,searchSessionId:a}}}(...e);(0,s.sx)(r,n)}},243474:(e,r,n)=>{n.d(r,{Gl:()=>d,Vm:()=>c,XW:()=>m,qY:()=>p,ws:()=>u});var a=n(846288),i=n(217950),o=n(550479);n(880486),n(200179);var s=n(314540),l=n(492366);function c(e){var r;return u(e)||"resource_type"in e&&(r=e).publishing_status&&[s.KB.ORG_PRIVATE,s.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(r.publishing_status)?e.resource_type:(0,l.U)(e)?l.vt.HUB_FILE:(0,l.xQ)(e)?l.vt.WIDGET:(0,l.I0)(e)?l.vt.PLUGIN:void(0,a.xb)(e)}function d(e){return!("resource_type"in e)}function u(e){return"resource_type"in e}function m(e){return"content"in e}function p(e){return e.content.hub_file?e.content.hub_file:e.content.plugin?e.content.plugin:e.content.widget?e.content.widget:void(0,o.$D)(i.e.COMMUNITY,Error("Resource has no content"),{extra:{resourceId:e.id}})}n(906597)},508303:(e,r,n)=>{n.d(r,{Ac:()=>o,aV:()=>c,nS:()=>s,pO:()=>l}),n(411855);var a=n(753178),i=n(750570);function o(e){}n(550479);class s{get params(){return this._params}get search(){return this._search}get state(){return this._state}constructor(...e){let[r,n,a]=e;this._params=r??{},this._search=n??{},this._state=a??{}}copyWith(e,r,n){return new this.constructor({...this._params,...e},{...this._search,...r},{...this._state,...n})}get pathname(){let e=this.constructor;return(0,a.tW)(e.path,"serializeParams"in e?e.serializeParams(this._params):this._params)}get queryString(){let e=Object.fromEntries(Object.entries(this._search).filter(([,e])=>void 0!==e));if(0===Object.keys(e).length)return"";let r=this.constructor,n="encodeQueryString"in r?r.encodeQueryString??i.lF:i.lF;return`?${n(e)}`}get href(){return`${this.pathname}${this.queryString}`}get to(){return{pathname:this.pathname,search:this.queryString,state:this._state}}}function l(e){return function(r,n={}){let i=(0,a.B6)(r,{...n,path:e.path});return i?{...i,params:"deserializeParams"in e?e.deserializeParams(i.params):i.params}:null}}function c(e,r){return`${e}${r}`}},915749:(e,r,n)=>{n.d(r,{c9:()=>o,oW:()=>l,tx:()=>s});var a=n(467014);let i="8065774696727";function o(e,r){(0,a.ny)({name:e.name,email:e.email},{ticketForms:["community"],fields:r,suppressAnswerBot:!0})}function s(e){return o(e,[{id:i,value:"community_product_question"}])}function l(e){return o(e,[{id:i,value:"community_refund"}])}},114391:(e,r,n)=>{n.d(r,{S:()=>s,to:()=>c});var a=n(338584),i=n(492366),o=n(880486),s=(e=>(e.file="hub_files",e.plugin="plugins",e.widget="widgets",e))(s||{});let l=a.object({model:o.UL,score:a.number()}),c=a.object({results:a.array(l),total_hits:a.number().optional()});a.object({comments:a.array(i.KS).nullable(),total_count:a.number().optional()});var d=(e=>(e.DescriptionView="descriptionViewSection",e.CommentsView="commentsViewSection",e))(d||{})},179462:(e,r,n)=>{function a(e){return!!e&&void 0!==e.query}n.d(r,{LJ:()=>i,OE:()=>a});var i=(e=>(e.accessibility="accessibility",e.brainstorming="brainstorming",e.classroomActivities="classroom-activities",e.dataTemplates="data-templates",e.designInspirations="design-inspirations",e.designTemplates="design-templates",e.designTools="design-tools",e.desktopAppsWebsites="website-templates",e.development="development",e.deviceMockups="device-mockups",e.diagramming="diagramming",e.editingEffects="editing-effects",e.education="education",e.fileOrganization="file-organization",e.fontsTypography="fonts-typography",e.funGames="fun-games",e.icons="icons",e.illustrations="illustrations",e.importExport="import-export",e.instagramTemplates="instagram-templates",e.laptopMockups="laptop-mockups",e.lessonPlans="lesson-plans",e.libraries="libraries",e.mobileApps="mobile-apps",e.portfolios="portfolio-templates",e.calendarTemplates="calendar-templates",e.presentations="presentations",e.prototypingAnimation="prototyping-animation",e.resumes="resume-templates",e.shapesColors="shapes-colors",e.stockPhotography="stock-photography",e.strategicPlanning="strategic-planning",e.teamMeetings="team-meetings",e.tutorials="design-tutorials",e.uiKits="ui-kits",e.visualAssets="visual-assets",e.whiteboarding="whiteboarding",e.wireframes="wireframes",e.workshopTemplates="workshop-templates",e))(i||{}),o=(e=>(e.LANDING="landing",e.NAV="nav",e))(o||{})},880486:(e,r,n)=>{n.d(r,{Bn:()=>I,Q3:()=>b,UL:()=>S,Y9:()=>w,_s:()=>v,vt:()=>g});var a=n(338584),i=n(89670),o=n(314540),s=n(59555),l=n(895812),c=n(38885),d=n(906597),u=n(754430),m=n(404469),p=n(7395),h=n(945315),_=n(429227),g=(e=>(e.DESIGN_TEMPLATE="design_template",e.FIGJAM_TEMPLATE="figjam_template",e.PLUGIN="plugin",e.WIDGET="widget",e.SLIDE_TEMPLATE="slide_template",e.UI_KIT="ui_kit",e.PROTOTYPE="prototype",e.SITE_TEMPLATE="site_template",e))(g||{});let f=a.object({id:a.string(),resource_type:a.nativeEnum(g),editor_types:a.array(a.nativeEnum(_.q)),created_at:a.string(),rdp_url:a.string(),name:a.string(),tagline:a.string().nullish(),description:a.string().nullish(),like_count:a.number(),user_count:a.number().nullish(),saved_at:a.string().nullish(),category_id:a.string().nullable(),category_slug:a.string().nullish(),parent_category_slug:a.string().nullish(),tags:a.array(a.string()).optional(),icon_url:a.string().nullish(),thumbnail_url:a.string().optional(),thumbnail_src_set:h.P1.nullish(),carousel_media:a.object({images:h.fE,videos:h.Fy.optional()}).optional(),unpublished_at:a.string().nullable(),publishing_status:a.nativeEnum(o.KB).nullable(),badges:a.array(a.nativeEnum(s.s)),monetized_resource_metadata:a.ignore(m.ii).optional(),community_resource_payment:l.fe.optional(),is_3rd_party_monetized:a.boolean(),third_party_m10n_url:a.string().nullable(),support_contact:a.string().nullable()}).and(u.xK),E=a.object({id:a.string(),resource_type:a.nativeEnum(g),editor_types:a.array(a.nativeEnum(_.q)),created_at:a.string(),name:a.string(),tagline:a.string().nullish(),description:a.string().nullish(),category_id:a.string().nullable(),category_slug:a.string().nullish(),parent_category_slug:a.string().nullish(),tags:a.array(a.string()).optional(),icon_url:a.string().nullish(),thumbnail_url:a.string().optional(),thumbnail_src_set:h.P1.nullish(),unpublished_at:a.string().nullable(),publishing_status:a.nativeEnum(o.KB).nullable()}).and(u.xK);a.object({id:a.string(),versions:a.record(a.string(),d.V_),duplicate_count:a.number(),created_at:a.string(),cover_image_carousel_media_id:a.string().optional(),redirect_canvas_url:a.string().optional(),current_hub_file_version_id:a.string(),viewer_mode:a.nativeEnum(o.y4),scaling_mode:a.ignore(),thumbnail_is_set:a.boolean().nullable(),saved_at:a.string().optional(),recently_duplicated:a.boolean().optional(),related_content:(0,i.M)(a.lazy(()=>a.ignore())),verification_status:a.nativeEnum(o.iS).optional(),monetization_status:a.nativeEnum(m.UC).optional(),community_resource_payment:l.fe.optional(),library_key:a.unknown().optional(),fig_file_metadata:a.object({key:a.string(),file:c.L,roles:a.array(a.ignore())}).optional()}),a.object({id:a.string(),versions:a.record(p.Px),current_plugin_version_id:a.string().nullable(),is_widget:a.coerce.boolean(),install_count:a.number(),roles:p.R2,org_id:a.string().nullable(),created_at:a.string(),current_user_has_run:a.boolean().optional(),current_user_first_ran_at:a.string().optional(),unique_run_count:a.number(),editor_type:a.nativeEnum(p.HK),saved_at:a.string().optional(),related_content:(0,i.M)(a.lazy(()=>p.Lz)),hide_related_content_by_others:a.boolean().optional(),install_status:a.nativeEnum(p.u8).optional(),profile_install_status:a.nativeEnum(p.u8).optional(),monetization_status:a.nativeEnum(m.UC).optional(),community_resource_payment:l.fe.optional(),third_party_m10n_status:a.nativeEnum(m.PN).optional(),creator_policy:a.string(),plugin_publishers:u.I7.optional()});let y=a.object({hub_file:a.ignore(d.NS).optional(),plugin:a.ignore(p.Lz).optional(),widget:a.ignore(p.sM).optional()}),b=f.and(a.object({content:y,carousel_media:a.object({images:h.fE,videos:h.Fy.optional()})}));E.and(a.object({content:y}));let v=a.object({dimensions:a.object({job_title:a.array(a.string()),paid_status:a.array(a.string())}),recommendations:a.array(a.object({resources:a.array(f),properties:a.object({job_title:a.string(),paid_status:a.string()})}))}),T=f.and(a.object({resource_type:a.enum(["design_template","figjam_template","slide_template"])})),I=a.object({recommended_resources:a.array(T),internal_resources:a.array(T)}),S=f.and(a.object({content:a.optional(y),carousel_media:a.object({images:h.fE,videos:h.Fy.optional()}).optional()})),w=a.array(S)},833979:(e,r,n)=>{n.d(r,{iB:()=>l});var a=n(841924),i=n(492366),o=n(69279),s=n(249099);let l=a.M4.Query({fetch:async e=>(await o.c.getAll({editorType:e})).data.meta});a.M4.Query({fetch:async({categorySlug:e,tagSlug:r})=>(await o.c.getCategoryBySlug(e,{tagSlug:r})).data.meta}),a.M4.Query({fetch:async e=>(await s.A.getCommunityShelves({categorySlug:e,shelfType:i.cS.CATEGORY_PAGE})).data.meta[0]})},302246:(e,r,n)=>{n.d(r,{J5:()=>y,iB:()=>b});var a=n(163773),i=n(750570),o=n(2373),s=n(316581),l=n(508303),c=n(91193),d=n(313530),u=n(135591),m=n(709701),p=n(599110),h=n(179462),_=n(274878),g=Object.getPrototypeOf,f=Reflect.get,E=(e,r,n)=>f(g(e),n,r);function y(e,r){let n;let i=decodeURIComponent(e||a.Ay.location.pathname);try{let e=(0,l.pO)(I)(i);if(!e)return null;n=e.params}catch(e){return null}let s=I.parseQueryString(r||a.Ay.location.search),_=n.categorySlug,g=n.tagSlug,f={category:_,resourceType:s.resource_type||p.L.BrowseResourceTypes.MIXED,editor_type:m.k.Editors.ALL,price:s.price||o.C.ALL,creators:u.Z.ALL,sort_by:(0,c.H)(),tags:g?[g]:[]};f.editor_type=_!==h.LJ.presentations||s.editor_type?(0,d.G)(s.editor_type,f.resourceType):m.k.Editors.SLIDES,f.resourceType=(0,d.l)(f.editor_type,f.resourceType);let E=s.sort_by;E&&[c.e.Browse.ALL_TIME,c.e.Browse.PUBLISHED_AT,c.e.Browse.POPULAR].includes(E)&&(f.sort_by=E);let y=s.creators;return y&&[u.Z.FIGMA_PARTNER,u.Z.FOLLOWING].includes(y)&&(f.creators=y),f}function b(e){let r=(0,s.S)(e.category,h.LJ);return void 0===r?"/community":new I({categorySlug:r,tagSlug:e.tags[0]},{resource_type:(0,d.l)(e.editor_type,e.resourceType),editor_type:(0,d.G)(e.editor_type,e.resourceType),price:e.price,sort_by:e.sort_by,creators:e.creators}).href}class v extends l.nS{}v.deserializeParams=e=>{let r=(0,s.S)(e.categorySlug,h.LJ);if(void 0===r)throw Error(`CategoryRoute: Invalid category slug ${e.categorySlug}`);return{...e,categorySlug:r}},v.serializeParams=e=>e,v.parseQueryString=e=>{let r=(0,i.xL)(e);return{resource_type:(0,s.S)(r.resource_type,p.L.BrowseResourceTypes),editor_type:(0,s.S)(r.editor_type,m.k.Editors),price:(0,s.S)(r.price,o.C.Price),sort_by:(0,s.S)(r.sort_by,c.e.Browse),creators:(0,s.S)(r.creators,u.Z.Browse)}};let T=class extends v{};(0,l.Ac)(T),T.path="/community/:categorySlug/:tagSlug?";let I=T,S=class extends v{};(0,l.Ac)(S),S.path=(0,l.aV)(_.VR,I.path),S.serializeParams=e=>({...(0,_.FZ)(e),...E(S,S,"serializeParams").call(void 0,e)}),S.deserializeParams=e=>({...(0,_.CS)(e),...E(S,S,"deserializeParams").call(void 0,e)}),S.parseQueryString=e=>({...(0,_.p7)(e),...E(S,S,"parseQueryString").call(void 0,e)}),Array.from(Object.values(h.LJ)).map(e=>new I({categorySlug:e}).href)},671694:(e,r,n)=>{n.d(r,{Tg:()=>_,UF:()=>u,Uo:()=>d});var a=n(750570),i=n(508303),o=n(839644),s=Object.getPrototypeOf,l=Reflect.get,c=(e,r,n)=>l(s(e),n,r),d=(e=>(e.FILE="file",e.WIDGET="widget",e.PLUGIN="plugin",e))(d||{}),u=(e=>(e.FILE="files",e.WIDGET="widgets",e.PLUGIN="plugins",e))(u||{});class m extends i.nS{constructor(e,r){super(e,r)}}m.deserializeParams=e=>({...e,apiResourceType:e.apiResourceType}),m.serializeParams=e=>e,m.parseQueryString=e=>{let r=(0,a.xL)(e);return{comment:r.comment,checkout:r.checkout,rating:r.rating}};let p=class extends m{};(0,i.Ac)(p),p.path="/community/:apiResourceType(file|plugin|widget)/:resourceId/:urlSlug?";let h=class extends m{constructor(e,r){super({...e,apiResourceType:"file"},r)}};(0,i.Ac)(h),h.path="/community/:apiResourceType(file)/:resourceId/:urlSlug?",h.serializeParams=e=>c(h,h,"serializeParams").call(void 0,{...e,apiResourceType:"file"}),h.parseQueryString=e=>{let r=(0,a.xL)(e);return{...c(h,h,"parseQueryString").call(void 0,e),preview:(()=>{let e=r.preview;if(void 0!==e)return parseInt(e)===o.G4.DEFAULT?o.G4.DEFAULT:e})(),freemium_preview:r.freemium_preview}};let _=h},274878:(e,r,n)=>{n.d(r,{CS:()=>d,FZ:()=>c,VR:()=>l,p7:()=>u}),n(411855);var a=n(750570),i=n(316581),o=n(508303),s=n(91247);let l=(0,o.aV)("/files/:team(team)?/:id([0-9]+)","/resources");function c(e){return"teamId"in e?{team:"team",id:e.teamId}:{id:e.orgId}}function d(e){return"team"===e.team?{teamId:e.id}:{orgId:e.id}}function u(e){return{fuid:(0,a.xL)(e).fuid}}let m=class extends o.nS{};(0,o.Ac)(m),m.path=(0,o.aV)(l,"/:tab(internal|community)"),m.serializeParams=e=>({...c(e),tab:e.tab}),m.deserializeParams=e=>({...d(e),tab:(0,i.S)(e.tab,s.N$,s.N$.INTERNAL)}),m.parseQueryString=u},499975:(e,r,n)=>{n.d(r,{U9:()=>a,hZ:()=>i});let a=function(){return!1},i=function(){return!1}},542651:(e,r,n)=>{n.d(r,{U5:()=>o});var a=n(411855);n(245459),n(254773),n(841962);var i=n(875877);n(586053),n(857877),n(427494),n(176160),n(245409),n(130774);let o=(0,i.atom)(!0);a.createContext({connectedInstancesByTlf:new Map,connectedInstancesByTlfGroupedSiblings:new Map,connectedInstancesByGuid:new Map,connectedInstanceTree:void 0,analyticsByComponentKey:new Map})},927202:(e,r,n)=>{n.d(r,{rZ:()=>G,yT:()=>H});var a=n(411855),i=n(109388),o=n(188507),s=n(834825),l=n(351966),c=n(596538),d=n(629019),u=n.n(d),m=n(875877),p=n(563192),h=n(758956),_=n(784986),g=n(132939),f=n(773991),E=n(76265),y=n(648800),b=n(673466),v=n(34671),T=n(209817),I=n(620799),S=n(755855),w=n(555987),A=n(800602),C=n(7842),N=n(47795),L=n(535461),O=n(688656),R=n(738402),P=n(495118),D=n(76237),k=n(822318),M=n(547098),F=n(865505),x=n(394145),U=n(522157);let B=(0,m.atom)(!1),V=(e,r={})=>(0,s.WI)(e.map(e=>e.lines.length>0?(0,S.kt)(e.lines,!0):null)).join("\n\n").replace(I.Z4,"").replace(I.M$,"").replace(I.NT,"").replace(I.Q6,"").replace(A.G6,"").replace(A.P1,"").replace(b.k,e=>{let n=r[e];return n?"INSTANCE"===n.type?`/* ${n.name} */`:`/* ${n.message} */`:"/* unknown instance */"});function G({source:e,title:r,selectedAll:n,...i}){let o=(0,R.ks)(),s=(0,v.v4)(),c=(0,a.useMemo)(()=>({name:"Copy code button",type:"code connect"!==e?s.type:void 0,pluginId:"code connect"!==e?s.id:void 0,selectedAll:n,source:e,title:r,isDevMode:o}),[o,s.id,s.type,n,e,r]),d=(0,T.TM)();return e?a.createElement(f.e6,{...i,className:u()(x.AF,x.cL,d&&x.BB),trackingProperties:c}):a.createElement(l.E,{...i,className:u()(x.AF,x.cL,d&&x.BB)})}function H(e){let{code:r,section:n,hasCodeDiff:s,collapseLongSections:l=!0,bottomPadding:d=!1,copyActionEnabled:h=!0,copyAllActionEnabled:_=!0,hideHints:f=!1,recordingKey:b,additionalHeaderActions:v=null,footerActions:T=null,type:I="default",leftHeaderActions:w=null,hideHeader:A=!1,copyButtonContainer:R}=e;n.collapseAfterIndex||(n={...n,collapseAfterIndex:15});let D=(0,o.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),k=(0,o.wA)(),F=function(e){let r=(0,o.wA)();return(0,M.IG)(e.lines,e.language,e.pills,r)}(n),[H,j]=a.useState(l),[z,q]=a.useState(!1),[Z,X]=(0,m.useAtom)(B),J=_&&Z;a.useEffect(()=>{j(l)},[D,l]);let Q=a.useMemo(()=>H&&n.collapseAfterIndex?F.slice(0,n.collapseAfterIndex):F,[F,n.collapseAfterIndex,H]),ee=n.collapseAfterIndex?F.length-n.collapseAfterIndex:0,et=e.codeToCopy||r,er=e.sectionToCopy||n,en=a.useCallback(()=>{if(!J)return V([er],er.pills);{let e=et.reduce((e,r)=>Object.assign(e,r.pills),{});return V(et,e)}},[et,er,J]),ea=a.useCallback(()=>{let e=en();e&&k(C.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[k,en]),ei=p.rf(p.Pt(b,"copy"),"click",ea),eo=a.useCallback(()=>{k(C.lW({stringToCopy:window.getSelection()?.toString()||en(),ignoreLineBreaks:!1}))},[k,en]),es=a.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:r,clientY:n}=e;k(N.j7({type:L.Sl,data:{clientX:r,clientY:n,onCopyText:eo}}))},[eo,k]),el=a.useCallback(e=>{_&&X(e.shiftKey),q(!0)},[X,_]),ec=p.rf(p.Pt(b,"copy"),"mouseenter",el),ed=a.useCallback(e=>{X(!1),q(!1)},[X]),eu=a.useCallback(e=>{X(z&&_&&e.shiftKey)},[z,X,_]);a.useEffect(()=>(document.addEventListener("keydown",eu),document.addEventListener("keyup",eu),()=>{document.removeEventListener("keydown",eu),document.removeEventListener("keyup",eu)}),[eu]);let em=function(e){switch(e){case"Modifier":return(0,E.t)("inspect_panel.code.modifier");case"Code":return(0,E.t)("inspect_panel.code.code");case"Style":return(0,E.t)("inspect_panel.code.style");case"Variables":return(0,E.t)("inspect_panel.code.variables");case"Layout":return(0,E.t)("inspect_panel.properties.layout");case"Position":return(0,E.t)("inspect_panel.code.position");case"Other":return(0,E.t)("inspect_panel.code.other");case"Typography":return(0,E.t)("inspect_panel.typography.title");default:return e}}("connected-playground"===I?"Code":n.name),ep=z||J,eh=a.useRef(null),e_=(0,a.useMemo)(()=>function(){return a.createElement(G,{onClick:ei,"aria-label":(0,E.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip":_?(0,E.t)("inspect_panel.code.copy_all_shift"):"","data-tooltip-type":O.Ib.TEXT,onMouseEnter:ec,onMouseLeave:ed},source:"codegen",title:n.name,selectedAll:J},a.createElement(g.U,{svg:U.A},a.createElement(c.X,null)))},[ei,_,ec,ed,n.name,J]);return a.createElement(a.Fragment,null,R&&R.current&&h&&(0,i.createPortal)(a.createElement(e_,null),R.current),a.createElement(P.VZ,{hideHeader:!0,noPadding:!d,noBorder:!0,recordingKey:`code:${n.name}`},a.createElement(M.GM.Provider,{value:{ref:eh}},a.createElement($,{type:"connected-playground"===I?"connected":I,header:!A&&a.createElement(K,{type:I,rowRef:eh,muted:n.isTextSegment,actions:a.createElement(a.Fragment,null,v||a.createElement(y.M,null),h&&a.createElement(e_,null)),title:em,leftActions:w,titleAccessory:e.titleAccessory}),content:a.createElement(W,{code:n,lines:Q,hideHints:f||ep,hasCodeDiff:s,isCopyHighlightActive:ep,onInstancePillClick:e.onInstancePillClick}),shouldShowMore:H&&ee>0,showMoreLinesCount:ee,onShowMore:()=>j(!1),copyHoverClassName:h&&ep?x.TJ:void 0,leftGutter:s?function(e,r=!1){return a.createElement("div",{className:u()(x.x4,{[x.R]:r})},e.map((e,r)=>a.createElement("div",{className:u()({[x.BJ]:!0,[x.L6]:e.diff===S.j5.ADDED,[x.pG]:e.diff===S.j5.REMOVED}),key:r},e.diff===S.j5.ADDED?"+":e.diff===S.j5.REMOVED?"-":null)))}(Q,ep):a.createElement("div",{className:x.BA},Q.map((e,r)=>a.createElement("div",{className:x.eT,key:r},r+1))),onContextMenu:es,footer:T?a.createElement(Y,{type:"connected-playground"===I?"connected":I},T):void 0}))))}function W({code:e,lines:r,hideHints:n,hasCodeDiff:i,isCopyHighlightActive:o=!1,onInstancePillClick:s}){let l=a.useCallback(e=>{let r;let n=e.target;n.classList.contains("instance-pill")?r=n:n.parentElement?.classList.contains("instance-pill")&&(r=n.parentElement),r&&s?.(r.dataset.id||"")},[s]),c=({index:s})=>{let c=r[s],d=8*(0,S.Gj)(c).length+16+8,m=a.createElement("span",{style:{display:"inline-block",paddingLeft:d,paddingRight:8,textIndent:-16,flexGrow:1},key:"code","data-testid":`${e.name}${s}`,onClick:l},c.code),p=c.hint,h=void 0!==p&&p.type===w.bv.Tooltip?a.createElement(k.A,{hint:(0,k.x)(p),hidden:n}):null,_=e.lines[s]?.diff;return a.createElement("div",{key:s,className:u()({[x.n8]:!0,[x.vN]:_===S.j5.ADDED&&!o,[x.rq]:_===S.j5.REMOVED&&!o,[x.R0]:i&&_!==S.j5.ADDED&&_!==S.j5.REMOVED&&!o,[x.r9]:i&&_===S.j5.REMOVED&&o})},m,h)};return a.createElement("code",{className:u()(x.Zh,F.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},r.map((e,r)=>c({index:r})))}function K({title:e,muted:r,actions:n,type:i,leftActions:o,rowRef:s,titleAccessory:l}){let c=(0,T.TM)();return a.createElement("div",{className:x.Tw,ref:s},a.createElement("div",{className:u()({[x.S7]:!0,[x.aW]:"connected"===i,[x.jW]:"manual"===i,[x.JM]:"connected-playground"===i})},o,c?a.createElement("div",{className:r?x.fH:x.Cq,"data-testid":"devHandoffFocusPanelTitle"},e):a.createElement(D.xw,{className:r?x.fH:x.Cq,"data-testid":"devHandoffFocusPanelTitle"},e),l,a.createElement("div",{className:x.zB},n)))}function Y({children:e,type:r}){return a.createElement("div",{className:x.p4},a.createElement("div",{className:u()({[x.I$]:!0,[x.aW]:"connected"===r,[x.jW]:"manual"===r})},e))}function $({header:e,content:r,leftGutter:n,footer:i,type:o,shouldShowMore:s,showMoreLinesCount:l,onShowMore:c,onContextMenu:d,copyHoverClassName:m}){let[p,g]=a.useState(null),f=p&&p.value?x.Lo:x.ZP,y=a.useCallback(e=>{g({value:e})},[]),b=!!n,v=!!i,I=a.useRef(null),S=(0,T.TM)();return a.createElement("div",{className:u()(x._X,S&&x.v2)},e,a.createElement("div",{className:u()(x.is,m,{[x.Eu]:b,[x.xP]:v,[x.aW]:"connected"===o,[x.jW]:"manual"===o})},b&&n,a.createElement("div",{className:x.jJ},a.createElement(h.Z,{onCanScrollChanged:y,className:u()(f),scrollBarAlways:!0,childRef:I},a.createElement("div",{onContextMenu:d,style:{width:"fit-content",minWidth:"100%"},ref:I},r)),s&&a.createElement("div",{className:x.cH},a.createElement(_.d,{label:(0,E.t)("dev_handoff.code.show_more",{count:l}),onClick:c})))),v&&i)}},34671:(e,r,n)=>{n.d(r,{A0:()=>f,AC:()=>I,Ap:()=>E,LK:()=>g,MT:()=>p,NU:()=>y,Pt:()=>T,S8:()=>b,XP:()=>v,p:()=>_,uz:()=>h,v4:()=>w,xv:()=>S});var a=n(411855),i=n(188507),o=n(875877),s=n(174233),l=n(76265),c=n(648735),d=n(263352),u=n(914077),m=n(526701);let p="FIGMA_PROPERTIES",h="WEB",_="IOS",g="ANDROID",f="CSSBUILDER",E="IOS_UIKIT",y="ANDROID_XML",b={[h]:{type:"first-party",id:h},[_]:{type:"first-party",id:_},[E]:{type:"first-party",id:E},[g]:{type:"first-party",id:g},[y]:{type:"first-party",id:y}};function v(e){let r="string"==typeof e?{type:"first-party",id:e}:e;return r&&r.id&&("first-party"!==r.type||b[r.id])?r:{type:"first-party",id:h}}function T(e){let r=(0,c.$1)(),n=(0,c.j8)();return(0,a.useMemo)(()=>({format(a){if(a?.type==="first-party")switch(a?.id){case f:return"CssBuilder";case h:return(0,l.t)("dev_handoff.code.lang_css");case _:return(0,l.t)("dev_handoff.code.lang_swiftui");case E:return(0,l.t)("dev_handoff.code.lang_uikit");case g:return(0,l.t)("dev_handoff.code.lang_compose");case y:return(0,l.t)("dev_handoff.code.lang_android_xml");case p:return(0,l.t)("dev_handoff.code.lang_figma")}if(e){let i=a?.type==="local-plugin"?r[a.id]:a?.type==="published-plugin"&&e.plugin_id===a?.id?n[a.id]??e:null;if(i)return 1===(0,m.m)(i).length?i.name:(0,m.X)(i,a?.pluginLanguage??"").label??i.name}return""}}),[n,r,e])}function I(e){let r=(0,i.d4)(e=>e.selectedView),n="fullscreen"===r.view?r.editorType:null,a=(0,c.S0)((e?.type!=="first-party"?e?.id:"")??"",{searchLocalPlugins:!0,searchPublishedPlugins:!0}),{plugin:o}=(0,c._P)((e?.type==="published-plugin"?e?.id:"0")??"0",e?.type==="published-plugin");if(!e||"orgAdminSettings"!==r.view&&n!==u.nT.DevHandoff)return null;let s=a||o;return s&&(0,d.M5)(s)?s:null}function S(e,r){if(!e||!e.codeSyntax)return null;switch(r){case h:case f:return e.codeSyntax[0]??null;case g:case y:return e.codeSyntax[1]??null;case _:case E:return e.codeSyntax[2]??null}return null}function w(){let e=(0,o.useAtomValue)(s.D),r=(0,i.d4)(e=>e.mirror.appModel.devHandoffCodeLanguage),n=(0,i.d4)(e=>e.selectedView),l=r;return"orgAdminSettings"===n.view&&e&&(l=e),(0,a.useMemo)(()=>v(l),[l])}},64251:(e,r,n)=>{n.d(r,{BT:()=>o,Ju:()=>l,q$:()=>s});var a=n(805014);let i=[];function o(e){i.push(e),i.length&&a.w3z.setIsNodeChangeCallbackRegistered(!0)}function s(e){(i=i.filter(r=>r!==e)).length||a.w3z.setIsNodeChangeCallbackRegistered(!1)}function l(){}},84062:(e,r,n)=>{function a(e){return!!e?.mirror&&1===Object.keys(e.mirror.sceneGraphSelection).length}n.d(r,{Mx:()=>a}),n(805014),n(245459),n(728722),n(176160),n(183739),n(756044)},857877:(e,r,n)=>{n(695024)},946503:(e,r,n)=>{n.d(r,{JW:()=>s});var a=n(411855);n(188507);var i=n(351966);n(805014),n(108982),n(875877);var o=n(563192);function s({text:e,isActive:r,onClick:n,recordingKey:s,isSingle:l}){return a.createElement(i.E,{recordingKey:o.Pt(s,"tab"),onClick:n,actionOnPointerDown:!0,className:l?"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabFocus--f8Y7h":r?"dev_handoff_panel_tab_group--tabActive--Ex7NX legacy_pages_panel--tabActive--hmo0j legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h":"dev_handoff_panel_tab_group--tab--Y0iYX legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h",htmlAttributes:{"data-label":e}},e)}n(265851),n(76265),n(648800),n(233950),n(796270),n(241162),n(343373),n(882898),n(317384),n(163092),n(138157),n(685389),n(760358),n(161021),n(485513)},17100:(e,r,n)=>{n.d(r,{HT:()=>l,RB:()=>c});var a=n(875877),i=n(927150);let o=(0,a.atom)(void 0),s=(0,i.bt)(e=>e.universalInsertModal.initialFdView),l=(0,a.atomWithDefault)(e=>{let r=e(s),n=e(o);return r||n||"recents_and_saved"}),c=(0,a.atom)(!1)},155251:(e,r,n)=>{n.d(r,{lz:()=>p,sX:()=>h}),n(411855);var a=n(805014),i=n(991458);n(841962);var o=n(875877),s=n(509343),l=n(488527);let c=(0,i.jz)(l.QBm),d=300+c,u=640+c;function m(e){return Math.max(d,Math.min(u,e||0))}function p(){return m((0,s.UX)())}function h(){return m(a.Ez5?.editorPreferences().devHandoffInspectSplitPosition.getCopy()??0)}(0,o.atom)(!1)},250450:(e,r,n)=>{n.d(r,{d1:()=>o,hj:()=>i});var a=n(875877);(0,a.atom)(null);let i=(0,a.atom)(null),o=(0,a.atom)({fn:null});(0,a.atom)(!1)},499573:(e,r,n)=>{n(411855),n(805014),n(245954),n(777535);var a=n(841962);n(875877),n(773991),n(76265),n(916348),n(278695),n(343414),n(515967),n(761263),n(737976),n(619107),n(695024),n(135891),n(946062),n(303596),n(43262),n(759240),n(250450),n(157544),(0,a.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8")},17455:(e,r,n)=>{var a=n(991458),i=n(875877),o=n(488527);let s=(0,a.jz)(o.YI7),l=(0,a.jz)(o.Qhc);(0,i.atom)(s+l)},662306:(e,r,n)=>{n.d(r,{e:()=>s}),n(411855);var a=n(875877);n(399991);var i=n(738402);let o=(0,a.atom)(!1);function s(){let e=(0,i.LS)(),[r]=(0,a.useAtom)(o);return r&&e}},666249:(e,r,n)=>{n.d(r,{Nc:()=>d,U4:()=>m,_I:()=>u,tn:()=>c,xo:()=>p});var a=n(188507),i=n(728722),o=n(176160),s=n(183739),l=n(401562);let c=(0,l.n)(e=>{let r=(0,o.tB)({openFile:e.openFile??null});return r?.canAccessFullDevMode??!0}),d=(0,l.n)(e=>{let r=(0,o.tB)({openFile:e.openFile??null});return r?.canAccessDevModeEntryPoint??!0});function u(){return(0,a.d4)(c)}function m(){return(0,a.d4)(d)}function p(){let e=(0,o.tS)(),r=(0,i.Rs)(s.F$0,{key:e||""},{enabled:!!e});return!!r.data?.file&&"error"!==r.data.file.status&&(r.data?.file?.data?.hasPermission??!1)}},331055:(e,r,n)=>{n.d(r,{O:()=>Y});var a=n(411855),i=n(188507),o=n(138225),s=n(865648),l=n(204254),c=n(148257),d=n(125279),u=n(805014),m=n(851169),p=n(33011),h=n(629019),_=n.n(h);n(758271);var g=n(777535),f=n(991458);n(875877);var E=n(399991),y=n(918091);n(300758);var b=n(693565),v=n(76265),T=n(678116),I=n(247846),S=n(250379),w=n(713865),A=n(47795);n(509343),n(761263);var C=n(963993);n(176160);var N=n(379352);n(797187),n(305216);var L=n(789722);n(617355);var O=n(756044),R=n(688656),P=n(23236);n(495118);var D=n(101835),k=n(471961),M=n(848969),F=n(453783),x=n(278317),U=n(182032),B=n(370938),V=n(139387),G=n(968109);let H=4*(0,f.jz)(U.devHandoffAssetPreviewMaxWidth),W=4*(0,f.jz)(U.devHandoffAssetPreviewMaxHeight),K=e=>e.stopPropagation(),Y={format:e=>e};a.memo(({assetInfo:e,openFileKey:r,disabled:n,media:h,showGuids:f,saveAsState:U,dropdownShown:$,isSelected:j})=>{let z=(0,E.nl)(),{assetId:q,assetName:Z,thumbnailVersion:X}=e,J=e.instancesGUIDs?.[0]??e.duplicateGUIDs?.[0]??q,Q=(0,T.O)({assetId:J,thumbnailVersion:X,width:H,height:W,scale:4}),ee=(0,N.e)(e.sourceLibraryKey??(0,p.l)(""),{enabled:!!e.sourceLibraryKey}),et=function(e,r){let{exportSettings:n}=(0,S.mJ)(e)??{exportSettings:null};return n?.[0]?.imageType??(r&O.PW.ASSET_ICON?"SVG":"PNG")}(q,e.type),er=(0,I.aT)(e),en=(0,i.wA)(),ea=a.useCallback(async e=>{e.stopPropagation(),(0,g.sx)("Asset Panel Export Clicked"),await (0,L.Dc)(L.hV.Export,U,en,"export-assets-handoff",[J],"export-assets-handoff",{[J]:et}),en(w.rg()),en(A.oB())},[J,en,et,U]),ei=a.useCallback(e=>{h.length>0&&r?en(A.j7({type:"save-media-select",data:{assetId:J}})):ea(e),e.stopPropagation()},[en,ea,h,J,r]),eo=(0,x.d)(!1,void 0,J),es=a.useCallback(e=>{eo?.(),e.stopPropagation()},[eo]),el=e?.instancesGUIDs??e?.duplicateGUIDs??[q],ec=a.useCallback(e=>{m.l7.user("image-type-change",()=>{u.glU.setDevHandoffAssetExport(q,e)})},[q]),ed=!!(e.type&O.PW.ASSET_COMPONENT),eu=!!(e.type&O.PW.ASSET_ICON),em=!!(e.type&O.PW.ASSET_IMAGE),ep=!!(e.type&O.PW.ASSET_GIF),eh=!!(e.type&O.PW.ASSET_VIDEO),e_=ep||eh,eg=(eu||em)&&!e_,ef=h.length>0&&null!==r?M.DK:M.K0,eE=!!e.sourceLibraryKey,ey=!!ee.data?.isHubFile,eb=a.useMemo(()=>[a.createElement(k.N5,{key:"png",value:"PNG"}),a.createElement(k.N5,{key:"jpeg",value:"JPEG"}),...eu?[a.createElement(k.N5,{key:"svg",value:"SVG"})]:[],a.createElement(k.N5,{key:"pdf",value:"PDF"})],[eu]),ev=e=>{let r=e.split(".");if(!r||!(r.length>1))return{name:e,extension:""};{let e=r[r.length-1];return{name:r.slice(0,r.length-2).join("."),extension:e}}};return a.createElement("div",{className:B.s,onMouseEnter:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set(el),onMouseLeave:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set([]),onClick:()=>C.tJ([e?.instancesGUIDs?.[0]??q]),role:"link",tabIndex:0},a.createElement("div",{className:_()(B.Re,{[B.Lq]:$?.type==="save-media-select"&&$.data.assetId===J||z})},a.createElement("div",{className:B.ZE,style:Q.backgroundStyle},Q&&a.createElement(P.J,{className:B.Wb,src:Q.url})),a.createElement("div",{className:B.DE},a.createElement("div",{className:B.SM},f?`${Z} (${q})`:Z),ed&&!j?a.createElement("div",{className:B._w},a.createElement(b.B,{svg:G.A}),a.createElement("div",{className:B.R5},(0,v.tx)("dev_handoff.assets.instance"))):a.createElement("div",{className:B.Rn},a.createElement(I.$R,{assetInfo:e,media:eg?h:[],dataTestId:"assetPanel",shouldShowTypeLabel:!0}))),a.createElement("div",{className:B.Uo},eg&&a.createElement(a.Fragment,null,a.createElement(k.SV,{id:`asset-image-type-${q}`,property:et,formatter:k.A3,onChange:ec,dispatch:en,dropdownShown:$,onMouseDown:K,dropdownWidth:150},eb),a.createElement("div",{className:B.yL},a.createElement(ef,{svg:V.A,onClick:ei,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":n?(0,v.t)("fullscreen.properties_panel.export_disabled"):(0,v.t)("fullscreen.export.export"),disabled:n,className:B.x6,containerClassName:B.Li,isBackgroundTransparent:!0,recordingKey:`export-${q}`}),$?.type==="save-media-select"&&a.createElement(a.Fragment,null,a.createElement("div",{className:B.Vx}),a.createElement(y.ms,{className:B.Yw},h.map(e=>{let{name:n,extension:i}=ev(e.name);return a.createElement(y.gS,{onClick:e=>{e.stopPropagation(),en(A.oB())},href:(0,D.ij)(r,e.hash),target:"_blank",key:e.hash,className:B.cu,"data-tooltip-type":R.Ib.TEXT,"data-dropdown-tooltip":e.name,recordingKey:"asset-export-source"},a.createElement("div",null,(0,v.t)("fullscreen.export.source")),a.createElement("div",{className:B.Mo},a.createElement(I.yP,{pxWidth:e.width,pxHeight:e.height,dataTestId:"assetPanel"}),a.createElement("div",{className:B.Om},"\xb7"),a.createElement("div",{className:B.VZ,"data-content-start":n,"data-content-end":i?`.${i}`:void 0})))}),a.createElement(y.gS,{key:"export",className:B.HL,onClick:ea,recordingKey:"asset-export-layer"},a.createElement("div",null,(0,v.t)("fullscreen.export.layer_export")),a.createElement("div",{className:B.Mo},a.createElement(I.$R,{assetInfo:e,dataTestId:"assetPanel",hideDot:!0}),a.createElement("div",{className:B.Om},"\xb7"),a.createElement("div",{className:B.VZ},k.A3.format(et)))))))),e_&&a.createElement(a.Fragment,null,a.createElement(F.uQ,{property:ep?"GIF":"MP4",formatter:Y,isDisabled:!0}),a.createElement("a",{href:er??"",target:"_blank"},a.createElement(o.K,{"aria-label":(0,v.t)("fullscreen.export.export"),disabled:!er,htmlAttributes:{"data-tooltip":(0,v.t)("fullscreen.export.export"),"data-tooltip-type":R.Ib.TEXT}},a.createElement(s.b,null)))),ed&&!j&&a.createElement(o.K,{onClick:es,"aria-label":ey?(0,v.t)("design_systems.instance_panel.view_library_in_community"):eE?(0,v.t)("dev_handoff.library.view"):(0,v.t)("design_systems.instance_panel.go_to_main_component"),htmlAttributes:{"data-tooltip":ey?(0,v.t)("design_systems.instance_panel.view_library_in_community"):eE?(0,v.t)("dev_handoff.library.view"):(0,v.t)("design_systems.instance_panel.go_to_main_component"),"data-tooltip-type":R.Ib.TEXT}},ey?a.createElement(l.c,null):eE?a.createElement(c.l,null):a.createElement(d.K,null)))))})},47426:(e,r,n)=>{n.d(r,{MW:()=>M});var a=n(411855),i=n(188507);n(217950),n(805014),n(777535),n(890882);var o=n(841962),s=n(875877);n(550479),n(437068),n(271646),n(403614),n(693565);var l=n(684526);n(265851);var c=n(76265);n(648800),n(228432);var d=n(927202);n(34671),n(209817),n(250379),n(512729),n(336427),n(265769),n(660055),n(736041),n(241162),n(963993),n(985814),n(125682),n(427494),n(176160),n(15092),n(746695),n(841924),n(404227),n(957020);var u=n(688656);n(495118),n(922611),n(76237),n(453783),n(245409);var m=n(263383);n(932045),m.H4.NONE,n(130774),n(757346);var p=n(471923),h=n(266838),_=n(556843),g=n(351966),f=n(520244),E=n(596538),y=n(254773),b=n(132939),v=n(7842),T=n(530494),I=n(710636),S=n(717134),w=n(522157),A=(e=>(e[e.REACT=0]="REACT",e[e.SWIFTUI=1]="SWIFTUI",e[e.COMPOSE=2]="COMPOSE",e[e.HTML=3]="HTML",e))(A||{});function C({language:e}){switch(e){case 0:return a.createElement(N,null);case 1:return a.createElement(L,null);case 2:return a.createElement(O,null);case 3:return a.createElement(R,null);default:return null}}function N(){let e=(0,i.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_react")),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install @figma/code-connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"react-step1"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"react-step2"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"react-step3"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))))}function L(){let e=(0,i.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_swiftui")),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step1"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.swift.add_snippet")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.as},'dependencies: [\n\u2003\u2003...,\n\u2003\u2003.package(url: "https://github.com/figma/code-connect", from: "1.0.0"),\n]'),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:`dependencies: [
		...,
		.package(url:"https://github.com/figma/code-connect", from: "1.0.0"),
]`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step2"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step3"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"4")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step4"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))))}function O(){let e=(0,i.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_compose")),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step1"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.compose.add_plugin_snippet")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.as},'plugins { \n\u2003\u2003...\n\u2003\u2003id("com.figma.code.connect") version "1.+"\n} \n\ndependencies { \n\u2003\u2003...\n\u2003\u2003implementation("com.figma.code.connect:plugin:1.+")\n}'),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:`plugins {
		...
		id("com.figma.code.connect") version "1.+"
}

dependencies {
		...
		implementation("com.figma.code.connect:plugin:1.+")
}`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step2"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step3"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"4")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step4"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))))}function R(){let e=(0,i.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_html")),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install @figma/code-connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"html-step1"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"html-step2"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))),a.createElement("div",{className:S.gY}," ",a.createElement("div",{className:S.YN},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"html-step3"},a.createElement(b.U,{svg:w.A},a.createElement(E.X,null))))))))}(0,I.Ju)(function(e){let[r,n]=(0,a.useState)(0),s=(0,y.hC)(),d=(0,i.wA)(),u=p.hS({...e,onClose:()=>{s("code_connect.connect_to_codebase.popup_closed"),e.onClose()}});return a.createElement(h.bL,{htmlAttributes:{"data-testid":"upgrade_choose_plan_modal"},manager:u,width:800},a.createElement(_.Wk,null,a.createElement("div",{className:S.kL},a.createElement("div",{className:S.pz},a.createElement("h1",{className:S.tb},(0,c.tx)("dev_handoff.code_connect.title")),a.createElement("h2",{className:S.J$},(0,c.tx)("dev_handoff.code_connect.modal_text")),a.createElement(g.E,{className:0===r?S.xR:S.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"react"}),n(0)}},(0,c.t)("dev_handoff.code.lang_react")),a.createElement(g.E,{className:1===r?S.xR:S.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"swiftui"}),n(1)}},(0,c.t)("dev_handoff.code.lang_swiftui")),a.createElement(g.E,{className:2===r?S.xR:S.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"compose"}),n(2)}},(0,c.t)("dev_handoff.code.lang_compose")),(0,o.kc)().dt_code_connect_modal_updates&&a.createElement(g.E,{className:3===r?S.xR:S.s6,onClick:()=>n(3)},a.createElement("div",{className:S.Sd},(0,c.t)("dev_handoff.code.lang_html"),a.createElement("span",{className:S.X4},(0,c.t)("dev_handoff.code.lang_html_examples")))),a.createElement("div",{className:S.jH}),a.createElement("span",{className:S.Iw},a.createElement(f.IK,{variant:"primary",onClick:()=>{s("code_connect.connect_to_codebase.view_docs_github_clicked"),d((0,T.RK)({rawInput:"https://github.com/figma/code-connect"}))},iconPrefix:a.createElement("div",{className:S.F9},a.createElement(l.f,null))},(0,c.tx)("dev_handoff.code_connect.modal_github_button")))),a.createElement("div",{className:S.Qs},a.createElement(C,{language:r})))))},"CodeConnectModal",I.ZU.YES);let P={Swift:"swift",TypeScript:"jsx"};function D({updatedAt:e}){let r=React.useMemo(()=>e?dayjs(e).fromNow():"",[e]);return React.createElement(Badge,{color:BadgeColor.DEFAULT,text:t("dev_handoff.figmadocs.connected"),icon:React.createElement(Icon16ApprovedCheckmark,null),className:styles.connectedBadge,dataTooltipType:TooltipType.TEXT,dataTooltip:t("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:r}),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})}function k(e){try{let{url:r}=e,n=new URL(r),a=n.pathname,i=a.split("/"),o="",s=-1;if(r.includes("github")||r.includes("gitlab")){let e=i.indexOf("blob");-1===e&&(e=i.indexOf("tree"));let r=i.slice(e+2).join("/");o=r.length>0?r:i[i.length-1]}else if(r.includes("bitbucket")){s=i.indexOf("src");let e=i.slice(s+2).join("/");o=e.length>0?e:i[i.length-1]}else r.includes("dev.azure")&&(o=n.searchParams.get("path")??a).startsWith("/")&&(o=o.slice(1));return React.createElement("span",{className:styles.linkFilePath},o)}catch(e){return null}}let M=(0,s.atom)(!1)},238368:(e,r,n)=>{n.d(r,{X:()=>I});var a=n(411855),i=n(138225),o=n(596538),s=n(805014),l=n(629019),c=n.n(l),d=n(468794);n(108982);var u=n(875877),m=n(76265),p=n(806556),h=n(515662),_=n(275258),g=n(495118),f=n(453783),E=n(642870),y=n(430772),b=n(209817),v=n(137901);let T={format:()=>(0,m.t)("inspect_panel.copy_as")};function I(e){let{basisContent:r="",changeContent:n=""}=e,i=a.useMemo(()=>(0,d.pR)(r,n).map(e=>{let r=e.added?v.Qs:e.removed?v.Tk:"";return a.createElement("span",{key:e.value,className:r},e.value)}),[r,n]);return a.createElement(S,{content:a.createElement(a.Fragment,null,i),contentToCopy:n,showVariable:!1})}function S({content:e,contentToCopy:r,collapsible:n=!0,noBorder:l=!1,hideHeader:d=!1,showVariable:I=!0}){let S=(0,b.Wu)(),w=S?v.Rd:v.O7,{value:A,eventHandlers:C,isHovered:N}=(0,g.ZQ)(w,w),[L,O]=a.useState(!1),R=a.useRef(null),{Dropdown:P,toggleDropdown:D,dropdownTargetRef:k,isDropdownShown:M}=(0,_.B)("CONTENT_COPY_DROPDOWN"),F=(0,E.oU)("TEXT_DATA",{type:s.Z_n.STRING,resolvedType:s.rXF.STRING,value:r}),x=F.variableDisplayName,U=!!x&&I,B=(0,h.t8)(F?.variable?.node_id),V=(0,g.Cm)(r,"text_content"),G=(0,g.Cm)(x,"text_variable"),H=[{displayText:(0,m.t)("inspect_panel.copy_variable_name"),callback:G},{displayText:(0,m.t)("inspect_panel.copy_variable_content"),callback:V}],W=N||L,K=U&&!S?a.createElement(a.Fragment,null,a.createElement(f.uQ,{ref:k,containerClassName:c()(v.$1,v.zv),formatter:T,property:null,onClick:D}),a.createElement(P,{items:H,showPoint:!0})):a.createElement(a.Fragment,null,a.createElement(p.$Q,{matchingVars:F?.matchingVars,rowRef:R,isHovered:W,recordingKey:"content_panel"}),a.createElement(i.K,{htmlAttributes:C,onClick:V,"aria-label":(0,m.t)("inspect_panel.copy")},a.createElement(o.X,null))),{collapsedInspectionPanelAtom:Y,collapseEnabled:$}=(0,g.QZ)(n?"content":void 0),[j]=(0,u.useAtom)(Y);return a.createElement(g.VZ,{title:(0,m.t)("inspect_panel.property.content"),hideHeader:!0,noPadding:!0,recordingKey:"content",noBorder:l},a.createElement("div",{className:c()(S?v.op:v.Om,!j&&v.iL),onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),ref:R},!d&&a.createElement(g.SH,{title:(0,m.t)("inspect_panel.property.content"),isHovered:W||M,recordingKey:"contentHeader",additionalHeaders:K,isCollapsedAtom:Y,collapseEnabled:$,thin:S,isSubsection:S}),a.createElement(g.ln,{isCollapsed:j,childrenWrapperClassname:v.eR},U&&!S&&a.createElement("div",{className:v.Zn},a.createElement(y.wG,{text:x,disableHover:!0,dataTestId:"textVariableName",tooltip:r})),a.createElement("div",{className:c()(v.P_,A),dir:"auto","data-testid":"textContent"},e),U&&S&&a.createElement(g._p,{copyValue:null,variableId:F.variable?.node_id,className:v.tl},a.createElement(y.wG,{text:x,onClick:G,dataTestId:"textVariableName",thumbnailValue:B,fullWidth:!0,ui3Height:!0})))))}},209817:(e,r,n)=>{n.d(r,{TM:()=>h,UP:()=>p,Wu:()=>_,lv:()=>m});var a=n(411855),i=n(841962),o=n(238311),s=n(666249),l=n(343373),c=n(985814),d=n(738402);function u(){let{getConfig:e}=(0,o.I7)("exp_dt_insp_improvements"),r=(0,l.GS)(),n=(0,d.ks)(),i=(0,s._I)(),u=!(0,c.T)()&&r&&n&&i;return a.useMemo(()=>{if(!u)return{};let r=e();return{isInInspectionImprovements:r.get("small_improvements",!1),isInUnifyCode:r.get("unify_code",!1),isInUnifyColors:r.get("unify_colors",!1),inBucketForExperience:u}},[e,u])}function m(){let{isInInspectionImprovements:e,inBucketForExperience:r}=u();return!!e||!!r&&!!(0,i.kc)().dt_insp_improvements}function p(){let{isInUnifyColors:e,inBucketForExperience:r}=u();return!!e||!!r&&!!(0,i.kc)().dt_insp_unify_color}function h(){let{isInUnifyCode:e,inBucketForExperience:r}=u();return!!e||!!r&&!!(0,i.kc)().dt_insp_unify_code}function _(){return m()}},796270:(e,r,n)=>{n.d(r,{xb:()=>b,Rk:()=>y,FO:()=>T,ev:()=>v});var a=n(411855),i=n(188507),o=n(841962),s=n(875877),l=n(684526),c=n(76265),d=n(161021),u=n(241162),m=n(738402),p=n(922611),h=n(801115);let _="hint_panels--hintPanel--MUqNV",g="hint_panels--icon--EMIdH",f=(0,o.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),E=(0,o.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),y="dev_handoff_dismissed_vscode_extension_hint",b="dev_handoff_dismissed_inspect_panel_plugins_hint";function v(){return(0,m.LS)()?null:a.createElement(p.u,{className:_,idForTests:"hintVSCodeForFigma",userFlag:y,title:(0,c.t)("dev_handoff.vscode.hint.title"),iconComponent:a.createElement("div",{className:"hint_panels--iconContainer--R8QBk"},a.createElement(h.M,null)),hintText:(0,c.t)("dev_handoff.vscode.hint"),hintLinkText:(0,c.t)("dev_handoff.vscode.hint.link"),hintLinkUrl:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension",hintLinkOnNewLine:!0})}function T(){let e=(0,m.LS)(),[r,n]=(0,s.useAtom)(d.H),o=(0,i.wA)(),h=a.useCallback(()=>{n(d._.PLUGIN),o(u.b({[b]:!0}))},[n,o]);return e?a.createElement(p.u,{className:_,idForTests:"hintInspectPlugins",userFlag:b,title:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.title"),hintText:a.createElement(a.Fragment,null,a.createElement("div",{className:"hint_panels--iconRow--SXq7J"},a.createElement("img",{alt:"",className:g,src:f}),a.createElement("div",{className:g},a.createElement(l.f,null)),a.createElement("img",{alt:"",className:g,src:E})),(0,c.tx)("dev_handoff.inspect_panel.plugins_hint")),hintLinkText:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.link"),hintLinkOnClick:h,hintLinkOnNewLine:!0}):null}},678116:(e,r,n)=>{n.d(r,{O:()=>c});var a=n(411855),i=n(805014),o=n(967111),s=n(542005);let l={};function c({assetId:e,thumbnailVersion:r,width:n,height:c,scale:d}){let u=function({assetId:e,width:r,height:n,scale:a}){return`${e}-${r}x${n}@${a}x`}({assetId:e,width:n,height:c,scale:d}),[m,p]=a.useState(l[u]?.url),h=(0,o.c6)(e);return(a.useEffect(()=>{let a=async()=>{await (0,s.Jr)().loadAllImagesUnder([e],i.MoD.NON_ANIMATED_ONLY,"handoff.assetPreview");let[a,o]=i.Vzr.generateThumbnailForNode(e,n,c,d,{});if(o.length>0){let e=l?.[u]?.url;e&&URL.revokeObjectURL(e);let n=URL.createObjectURL(new Blob([o]));l[u]={url:n,version:r,error:null},p(n)}},o=!!l?.[u],m=o&&l[u].version!==r,h=o&&!!l[u].error;o&&(!m||h)||a().catch(e=>{l[u]={error:e},console.error(e)})},[e,c,d,n,u,r]),m)?{url:m,backgroundStyle:h}:{backgroundStyle:h}}},247846:(e,r,n)=>{n.d(r,{$R:()=>g,aT:()=>E,yP:()=>_});var a=n(411855),i=n(188507),o=n(805014),s=n(76265);n(84062);var l=n(944415),c=n(357614),d=n(427494),u=n(176160),m=n(756044),p=n(101835),h=n(250379);function _({pxWidth:e,pxHeight:r,dataTestId:n}){let{unit:i}=(0,l.gc)(),s=i===o.tKW.SCALED,c=e=>(e??0).toLocaleString("en",{maximumFractionDigits:2}),d=c(e),u=c(r),m=a.createElement("span",{"data-testid":`${n}Width`},d),p=a.createElement("span",{"data-testid":`${n}Height`},u);return a.createElement(a.Fragment,null,m,"\u2009x\u2009",p,a.createElement("span",{"data-testid":`${n}Unit`},s?" (px)":""))}function g({assetInfo:e,media:r,dataTestId:n,shouldShowTypeLabel:i,hideDot:o}){let s=(0,h.mJ)(e.instancesGUIDs?.[0]??e.assetId),l=s?.size?.x??0,c=s?.size?.y??0;if(r&&r.length>0){let e=r[0];l=e.width,c=e.height}return a.createElement(f,{assetType:e.type,pxWidth:l,pxHeight:c,dataTestId:n,hideDot:o,shouldShowTypeLabel:i})}function f({assetType:e,pxWidth:r,pxHeight:n,dataTestId:i,hideDot:o,shouldShowTypeLabel:l}){let c=e&m.PW.ASSET_VIDEO?(0,s.t)("dev_handoff.assets.video"):e&m.PW.ASSET_GIF?(0,s.t)("dev_handoff.assets.gif"):e&m.PW.ASSET_IMAGE?(0,s.t)("dev_handoff.assets.image"):e&m.PW.ASSET_ICON?(0,s.t)("dev_handoff.assets.icon"):e&m.PW.ASSET_COMPONENT?(0,s.t)("dev_handoff.assets.instance"):void 0;return a.createElement("span",null,l&&c,!o&&a.createElement(a.Fragment,null,"\xa0","\xb7 "),a.createElement(_,{pxWidth:r,pxHeight:n,dataTestId:i}))}function E(e){let r=(0,i.d4)(u.sS),n=(0,d.eY)(),[o,s]=a.useState(null);if(o)return o;if(!(e.type&(m.PW.ASSET_GIF|m.PW.ASSET_VIDEO)))return null;let l=n.get(e.assetId);if(!l)return null;let h=c.N9(l?.fills)?.filter(e=>e.opacity>0&&e.visible);if(!h)return null;for(let e of h)if(e.animatedImage||e.video){if(!r)return null;(0,p.tW)({paint:e,fileKey:r}).then(e=>{s(e)});break}return o}},967111:(e,r,n)=>{n.d(r,{c6:()=>g});var a=n(411855),i=n(188507),o=n(805014),s=n(777535),l=n(789022),c=n(230208),d=n(758133),u=n(827473),m=n(77383),p=n(631762),h=n(957020),_=n(103785);function g(e){let r=function(e,r){let n=function(e){let r=(0,_.jY)(),n=(0,i.d4)(m.FZ),a=(0,i.d4)(p.c5);return(0,u.NY)(e,r,n,a)}(e),g=(0,d.DP)(),f=n?.containing_frame?.backgroundColor??"";return n?.type===h.PW.STATE_GROUP&&n.fill_color&&(f=n.fill_color),a.useCallback(()=>{let r=g&&("light"===g||"dark"===g)?g:"dark";if(!e)return f&&!(0,c.ty)(f)?(0,c.HD)(f)?"dark":"light":r;l.sn.start("dev_mode_calculate_component_color");let n=o.w3z.getApproximateNodeColor(e),a=l.sn.stop("dev_mode_calculate_component_color");return a&&(0,s.sx)("dev_mode_calculate_component_color",{elapsedMs:a},{forwardToDatadog:!0}),(0,c.HD)(n)?"light":"dark"},[f,e,void 0,g])}(e);return"dark"===(0,a.useMemo)(r,[r])?f:E}let f={background:"#383838"},E={background:"#f5f5f5"}},106620:(e,r,n)=>{n.d(r,{Bv:()=>_,wS:()=>h,x9:()=>g});var a=n(411855);n(188507),n(879058);var i=n(805014);n(245459);var o=n(245954);n(139879),n(76265);var s=n(481954);n(923219);var l=n(427494);n(176160);var c=n(841924),d=n(211270),u=n(198136);n(210317);var m=n(904510);n(625539),n(512030),n(806772),n(250379),c.M4.Query({fetch:async({componentKey:e})=>{try{let r=await d.Z.getLibraryComponentV2Destination({componentKey:e});if(!r||!r.data||!r.data.meta)return null;return{nodeId:r.data.meta.node_id,fileKey:r.data.meta.file_key,component:r.data.meta.component,componentSet:r.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),c.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let r=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,a=e.dataStorageKey,o=await s.Eo.getCanvas({canvas_url:e.canvasUrl});if(!o)return{};let l=i.glU.loadDetachedComponent(r??"",a,o,n);return l?{result:{...e,dataLocation:"temp-scene",dataComponentId:l}}:{}},enabled:e=>e.enabled});let p=a.createContext({status:"loading"});function h(){return a.useContext(p)||{status:"errors"}}function _(e,r){let n=h();return function(e,r){if("loaded"===r.status){let n="temp-scene"===r.result.dataLocation,a=r.result.dataComponentId??"",i=n?r.result.dataStateGroupId:(0,u.Yi)([a],e)??(0,m.nM)(e,[a]),o=n?g(a):e.get(a);return r.result.isVariant&&i?{backingSymbol:o,backingStateGroup:n?g(i):e.get(i)}:{backingSymbol:o,backingStateGroup:null}}}((0,l.eY)(),n)||{backingSymbol:e,backingStateGroup:r}}function g(e){return new o.qo(i.juq.DETACHED_COMPONENTS).get(e)}},155281:(e,r,n)=>{n.d(r,{$G:()=>_,Cs:()=>g,I9:()=>f,Ud:()=>E,oz:()=>p}),n(411855);var a=n(188507),i=n(834825),o=n(805014);n(704513);var s=n(76265),l=n(923219);n(357614),n(176160);var c=n(404227),d=n(241147);function u(e){return(0,l.gl)(e)?0:e??0}function m(e){return"NONE"!==e&&"GRID"!==e}function p(e,r){return m(e)||!!r&&m(r.stackMode)}function h(e,r,n){return m(e.stackMode)?e[r]:e.inferredAutoLayoutResult?.[n]}function _(e){let r;let n=(0,a.d4)(e=>e.mirror.selectionProperties),i=(0,a.d4)(c.AF);if(e)return{distance:{top:{distance:0,type:"distance"},bottom:{distance:0,type:"distance"},left:{distance:0,type:"distance"},right:{distance:0,type:"distance"}},border:{top:0,bottom:0,left:0,right:0},radius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},padding:{top:0,bottom:0,left:0,right:0},width:0,height:0};let o=i?.parentNode||null,s=function(e){let r=e?.borderStrokeWeightsIndependent;if((0,l.hS)(r)&&r){let{borderTopVisible:r,borderBottomVisible:n,borderLeftVisible:a,borderRightVisible:i,borderTopWeight:o,borderBottomWeight:s,borderLeftWeight:l,borderRightWeight:c}=e;return{top:r?u(o):0,bottom:n?u(s):0,left:a?u(l):0,right:i?u(c):0}}let n=e?.strokePaints;if((0,l.hS)(n)&&Array.isArray(n)&&n.length>0){let r=(n?.filter(e=>e?.visible&&(e?.opacity??0>0))||[]).length>0?u(e?.strokeWeight):0;return{top:r,bottom:r,left:r,right:r}}return{top:0,bottom:0,left:0,right:0}}(n),m=(0,d.AF)(n),_={topLeft:u(m.topLeft),topRight:u(m.topRight),bottomRight:u(m.bottomRight),bottomLeft:u(m.bottomLeft)},g=p(n.stackMode,n.inferredAutoLayoutResult);r=g?{top:u(h(n,"stackVerticalPadding","stackPaddingTop")),bottom:u(h(n,"stackPaddingBottom","stackPaddingBottom")),left:u(h(n,"stackHorizontalPadding","stackPaddingLeft")),right:u(h(n,"stackPaddingRight","stackPaddingRight"))}:{top:0,bottom:0,left:0,right:0};let f=g&&n.bordersTakeSpace?{top:r.top+s.top,bottom:r.bottom+s.bottom,left:r.left+s.left,right:r.right+s.right}:{...r},E=u(n.width)-f.left-f.right,y=u(n.height)-f.top-f.bottom;return{distance:o&&("HORIZONTAL"===o.stackMode||"VERTICAL"===o.stackMode)&&i?.stackPositioning!=="ABSOLUTE"?function(e,r){if(!e||!r||"NONE"===r.stackMode||"GRID"===r.stackMode)return{};let n=r.childrenNodes.filter(e=>e?.stackPositioning!=="ABSOLUTE").map(e=>e?.guid),a=n.indexOf(e.guid),i=0===a,o=a===n.length-1;return"HORIZONTAL"===r.stackMode?{top:{distance:r.stackTopPadding,type:"padding"},bottom:{distance:r.stackBottomPadding,type:"padding"},left:i?{distance:r.stackLeftPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},right:o?{distance:r.stackRightPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"}}:{top:i?{distance:r.stackTopPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},bottom:o?{distance:r.stackBottomPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},left:{distance:r.stackLeftPadding,type:"padding"},right:{distance:r.stackRightPadding,type:"padding"}}}(i,o):function(e,r){if(!e||!r||"CANVAS"===r.type||"DOCUMENT"===r.type||"SECTION"===r.type)return{};let n=r.absoluteBoundingBox.w,a=r.absoluteBoundingBox.h,i=r.absoluteBoundingBox.y,o=r.absoluteBoundingBox.x,s=e.absoluteBoundingBox.w,l=e.absoluteBoundingBox.h,c=e.absoluteBoundingBox.y,d=e.absoluteBoundingBox.x;return{top:{distance:c-i,type:"distance"},bottom:{distance:i+a-(l+c),type:"distance"},left:{distance:d-o,type:"distance"},right:{distance:n+o-(d+s),type:"distance"}}}(i,o),border:s,radius:_,padding:r,width:E,height:y}}let g=(e="NONE")=>"HORIZONTAL"===e||"VERTICAL"===e;function f(e=0,r,n){if(!n||(0,l.gl)(r))return e;let a={[o.mKm.FILL_CONTAINER]:(0,s.t)("inspect_panel.properties.fill"),[o.mKm.HUG_CONTENT]:(0,s.t)("inspect_panel.properties.hug"),[o.mKm.FIXED]:(0,s.t)("inspect_panel.properties.fixed")}[r||o.mKm.FIXED],i="string"==typeof e?e:(e||0).toLocaleString("en",{maximumFractionDigits:2})+"px";return`${a} (${i})`}function E(...e){let[r=0,n=0,a=0,o=0]=e;return(0,i.Ef)(e)?0!==r?[r]:void 0:[r,n,a,o]}},724009:(e,r,n)=>{n.d(r,{Fj:()=>l});var a=n(411855),i=n(188507);n(108982),n(875877),n(48929),n(300758),n(76265),n(34671),n(209817),n(250379),n(340704),n(827473);var o=n(77383),s=n(241094);function l(e=""){let r=(0,i.d4)(o.cM),n=(0,i.d4)(s.wi),c=a.useMemo(()=>Object.values(r).find(r=>r.key===e),[r,e]),d=a.useMemo(()=>Object.values(n).find(r=>r.key===e),[n,e]);return c??d}n(957020),n(738402),n(103785),n(775211),n(642870)},941367:(e,r,n)=>{n.d(r,{M4:()=>d,lA:()=>c});var a=n(188507);n(805014),n(209817),n(178035),n(427494);var i=n(404227),o=n(103785),s=n(106620),l=n(250379);function c(){let e=(0,o.jY)(),r=(0,s.wS)(),n=(0,a.d4)(e=>e.mirror.selectionProperties.symbolGUIDsBackingSelectionContainer),i=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected);if("loaded"===r.status&&r.result.dataComponentId)return"temp-scene"===r.result.dataLocation&&r.result.componentKey?(0,s.x9)(r.result.dataComponentId):(0,l.Zl)(e,r.result.dataComponentId);if(1!==i||!n)return null;let c=Object.keys(n)[0];return(0,l.Zl)(e,c)}function d(){let e=(0,o.jY)(),r=(0,s.wS)();return function e(r,n,a){let i=(0,l.Zl)(r,n);return i?"SYMBOL"===i.type||"INSTANCE"===i.type||i.isStateGroup||i.detachedInfo?i:i.parentGuid?e(r,i.parentGuid):null:null}(e,(0,a.d4)(i.vD),r)}},865327:(e,r,n)=>{n.d(r,{V0:()=>v,ls:()=>T});var a=n(411855),i=n(109388),o=n(188507),s=n(76265),l=n(34671);n(297643);var c=n(666249),d=n(535404),u=n(939380),m=n(47795),p=n(125682),h=n(661137),_=n(7395),g=n(688656),f=n(138157),E=n(689954),y=n(453783),b=n(114008);function v({codeLanguage:e,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:a,showAddInsteadOfBrowse:i,addCodegenPluginCallback:s,currentSavedCodeLanguage:c}){let u=(0,l.AC)(e),m=(0,l.Pt)(u),p=(0,h.sZ)(),g=(0,o.d4)(e=>e.whitelistedPlugins),f=(0,_.ow)(u,g,p)?e:{type:"first-party",id:"WEB"},E=(0,d.Z)({codeLanguage:f,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:a,formatter:m,showAddInsteadOfBrowse:i,addCodegenPluginCallback:s,currentSavedCodeLanguage:c});return{codeLanguage:f,onCodeLanguageChange:r,codeLanguageOptions:E,activeCodegenPlugin:u,formatter:m}}function T({dropdownId:e,disabled:r,codeLanguageApi:n,onDropdownHidden:i,parentElementId:o}){let{codeLanguage:s,activeCodegenPlugin:l,formatter:c,codeLanguageOptions:d}=n,u=l&&"first-party"!==s.type?a.createElement(f.d,{plugin:l}):null;return a.createElement(I,{dropdownId:e,onDropdownHidden:i,disabled:r,parentElementId:o,value:s,formatter:c,items:d,icon:u,activatePathOnMount:"local-plugin"!==s.type?[c.format(s)]:d[0]?[d[0].displayText]:void 0})}function I({dropdownId:e,disabled:r,onDropdownHidden:n,parentElementId:l,formatter:d,value:h,items:_,icon:f,activatePathOnMount:v}){let T=(0,c._I)(),I=(0,o.wA)();a.useEffect(()=>I(u.aq()),[I]);let S=(0,p.Um)(),w=a.useRef(null),A=S?.type===e;return a.createElement("div",{className:b.aD,"data-tooltip":(0,s.t)("dev_handoff.code.language"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},a.createElement("div",{className:b.lj},a.createElement(y.uQ,{formatter:d,property:h,icon:f,onClick:()=>{A?I(m.oB()):T&&I(m.j7({type:e}))},inputClassName:b.UD,ref:w,dataTestId:"code_language_dropdown",isDisabled:r})),A&&!r&&w.current&&(0,i.createPortal)(a.createElement("div",{className:b.aD},a.createElement(E.j,{items:_,onSelectItem:e=>{e.callback&&e.callback("",null,I)},dispatch:I,parentRect:w.current.getBoundingClientRect(),showPoint:!1,lean:"right",leanPadding:8,alwaysShowCheckMarkOffset:!0,onDropdownHidden:n,activatePathOnMount:v})),document.getElementById(l||"dev-handoff-inspect-panel")))}},386897:(e,r,n)=>{n.d(r,{$h:()=>c,Ar:()=>d,a9:()=>l,hq:()=>s}),n(411855);var a=n(875877),i=n(76265),o=n(849331);let s=(0,a.atomWithLocalStorage)("dev-mode-code-or-properties","code"),l=new class{format(e){switch(e){case"code":return(0,i.t)("inspect_panel.code.code");case"properties":return(0,i.t)("fullscreen.properties_panel.properties")}}};function c(){return(0,a.useAtom)(s)}function d(){return(0,o.AF)()?["code","properties"]:["properties"]}},144945:(e,r,n)=>{n.d(r,{n2:()=>O});var a=n(411855),i=n(109388),o=n(188507),s=n(28819),l=n(888624),c=n(591421),d=n(747579),u=n(805014);n(629019);var m=n(875877),p=n(746643),h=n(563192),_=n(76265);n(34671),n(297643);var g=n(946503),f=n(666249);n(47426);var E=n(865327),y=n(386897),b=n(47795),v=n(343373),T=n(761263),I=n(125682);n(427494);var S=n(473982);n(50474);var w=n(688656);n(138157);var A=n(689954),C=n(495118),N=n(453783);function L({parentElementId:e,dropdownPrefix:r,preferenceOptions:n,preferences:l,supportsAlternativeUnits:d}){let m=(0,f._I)(),p=(0,o.wA)(),h=(0,I.Um)(),g=a.useRef(null),E=r?`${r}_DEV_HANDOFF_PREFERENCES_DROPDOWN`:"DEV_HANDOFF_PREFERENCES_DROPDOWN",y=h?.type===E;return a.createElement(a.Fragment,null,a.createElement("div",{ref:g},a.createElement(s.d,{onClick:()=>{y?p(b.oB()):m&&p(b.j7({type:E}))},"aria-label":(0,_.t)("dev_handoff.inspect_settings"),"aria-expanded":y,disabled:!n||n?.length===0,recordingKey:"preferencesDropdownButton",htmlAttributes:{"data-tooltip":(0,_.t)("dev_handoff.inspect_settings"),"data-tooltip-type":w.Ib.TEXT,"data-tooltip-show-above":!0}},a.createElement(c.A,null))),y&&n&&l&&g.current&&(0,i.createPortal)(a.createElement(A.j,{items:n,onSelectItem:e=>{e.callback&&e.callback("",null,p)},recordingKey:"preferencesDropdown",dispatch:p,parentRect:g.current.getBoundingClientRect(),showPoint:!1,alwaysShowCheckMarkOffset:!0,activatePathOnMount:d?l.unit===u.tKW.PIXEL?n[1]?[n[1].displayText]:void 0:n[2]?[n[2].displayText]:void 0:void 0}),document.getElementById(e||"dev-handoff-inspect-panel")))}function O({dropdownPrefix:e,inspectionModeLayout:r="drop-down",preferencesApi:n,parentElementId:i}){let s=(0,o.wA)(),l=(0,f._I)(),{inspectionMode:c,setInspectionMode:u,inspectionModes:m,preferenceOptions:h,preferences:_,supportsAlternativeUnits:g}=n,b=e?`${e}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:"DEV_HANDOFF_LANGUAGE_DROPDOWN",v=(0,I.Um)(),S=a.useMemo(()=>m.map(e=>a.createElement(N.c$,{key:e,value:e,recordingKey:e})),[m]),w="ui3"===(0,d.DP)().version,A=T.z4.getIsExtension(),O=A||"code"===c;return a.createElement(C.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"preferences"},a.createElement("div",{className:"preferences--preferencesRow--uJxcE"},!A&&("drop-down"===r?a.createElement(N.l6,{id:`${e}_dev_handoff_inspection_mode`,property:c,formatter:y.a9,onChange:u,dispatch:s,dropdownShown:v,className:"preferences--preferencesTitle--Hnoyt",dropdownWidth:w?"120px":"auto",onShowDropdownOverride:l?void 0:p.lQ,recordingKey:"dev_handoff_inspection_mode"},S):a.createElement(R,{onTabClick:u,selectedTabKey:c,tabs:m.map(e=>({key:e,label:y.a9.format(e)})),recordingKey:"preferences-tabs"})),a.createElement("div",{className:"preferences--preferencesRight--UCEaD"},O&&a.createElement(E.ls,{dropdownId:b,codeLanguageApi:n.codeLanguageApi,parentElementId:i}),a.createElement(L,{parentElementId:i,dropdownPrefix:e,preferenceOptions:O?h:void 0,preferences:O?_:void 0,supportsAlternativeUnits:g}))))}function R({tabs:e,onTabClick:r,selectedTabKey:n,recordingKey:i}){let o=(0,v.GS)(),s=e.reduce((e,r)=>(e[r.key]=!0,e),{}),[c,,d]=l.t.useManagedTabs(s,n,r,{recordingKey:"devHandoffPanelTabs"});return a.createElement("div",{className:"preferences--preferencesInnerRow--o6o3N"},o?a.createElement(l.t.TabStrip,{manager:d},e.map(e=>a.createElement(l.t.Tab,{key:e.key,...c[e.key]},e.label))):e.map(o=>a.createElement(g.JW,{key:o.key,text:o.label,isActive:n===o.key,onClick:()=>r(o.key),recordingKey:h.Pt(i,o.key)||"",isSingle:1===e.length})))}n(130774),n(944415),n(340704),n(341510),(0,S.Wh)(()=>(0,m.atom)("figmadoc"),{preserveValue:!1})},296013:(e,r,n)=>{n.d(r,{j6:()=>L});var a=n(411855),i=n(188507),o=n(471923),s=n(266838),l=n(556843),c=n(462575),d=n(499325),u=n(368832),m=n(746643),p=n(76265),h=n(34671),_=n(865327),g=n(944415),f=n(863599),E=n(125682),y=n(710636),b=n(859877),v=n(453783),T=n(891720),I=n(332366);let S=new f.KD({min:.1}),w=[3,2,1,.5,1/3],A=new class{parse(e){return"1/3"===e?3:"1/2"===e?2:"2"===e||"3"===e?1/Number.parseInt(e):1}format(e=1){return"0.3"===e.toFixed(1)?"3":"0.5"===e.toFixed(1)?"2":2===e||3===e?`1/${e}`:(0,p.t)("dev_handoff.alternative_units.no_scale")}};function C({scaleFactor:e,onChange:r,onDropdownHidden:n,className:o,inputClassName:s,autoFocus:l}){let c=(0,i.wA)(),d=(0,E.Um)(),u=(0,T.R)();return a.createElement(v.l6,{dispatch:c,property:e,id:"SCALE_FACTOR",onChange:r,formatter:A,dropdownShown:d,className:o,inputClassName:s,dropdownWidth:u?"120px":"auto",autoFocus:l,onDropdownHidden:n},w.map(r=>a.createElement(v.c$,{key:r,value:r,selected:r===e,fullWidth:!0})))}function N({codeLanguage:e}){let r=(0,g.$s)(e);switch(e.id){case h.p:case h.Ap:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_ios");case h.LK:case h.NU:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_android");case h.uz:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_web")}return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_third_party",{unitName:r})}let L=(0,y.Ju)(function(e){let r=(0,h.v4)(),[n,i]=a.useState(r),f=(0,g.aq)(n),E=(0,g.gc)(n.id),y=(0,g.Bs)(),v=(0,T.R)(),w=o.hS(e),A=a.useCallback(e=>{e&&y(n,f,{scaleFactor:e})},[n,y,f]),L="first-party"===n.type&&(n.id===h.LK||n.id===h.NU||n.id===h.p||n.id===h.Ap),O="first-party"===n.type&&(n.id===h.uz||n.id===h.A0),R=(0,u.A)(()=>{O&&y(n,f,{customSettings:{onlyText:"true"===(E.customSettings?.onlyText||"false")?"false":"true"}})},250),P=E?.scaleFactor??1,D=(0,_.V0)({onChange:i,codeLanguage:n,shouldHideLanguagesWithNoAltUnitSupport:!0});return a.createElement(s.bL,{manager:w,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,p.t)("dev_handoff.alternative_units.unit_settings_modal_title")),a.createElement(l.jk,null,a.createElement(_.ls,{dropdownId:"DEV_HANDOFF_MODAL_CODE_LANGUAGE_DROPDOWN",codeLanguageApi:D}))),a.createElement(l.nB,null,L?a.createElement("div",{className:I.iF},a.createElement(C,{scaleFactor:P,onChange:A,onDropdownHidden:m.lQ,className:I.j8,autoFocus:!0}),a.createElement("div",{className:I.rc})):a.createElement("div",{className:I.hq},a.createElement(b.Q7,{className:I.IC,property:P,formatter:S,onChange:A,autoFocus:!0})),a.createElement("div",{className:I.A3},a.createElement(N,{codeLanguage:n})),O&&(v?a.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:a.createElement(d.J,null,(0,p.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:a.createElement("span",{className:I.D0},(0,p.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}):a.createElement("div",{className:I.sM},a.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:a.createElement(d.J,null,(0,p.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:a.createElement("span",{className:I.D0},(0,p.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}))))))},"SCALE_FACTOR_MODAL")},944415:(e,r,n)=>{n.d(r,{$s:()=>N,Bs:()=>T,Em:()=>A,SF:()=>P,aq:()=>w,b1:()=>L,gc:()=>b,lX:()=>v,qM:()=>S,wA:()=>R,wQ:()=>O});var a=n(411855),i=n(188507),o=n(805014),s=n(212046),l=n.n(s),c=n(885123),d=n(254773),u=n(76265),m=n(34671),p=n(826688),h=n(648735),_=n(761263),g=n(736918),f=n(7395),E=n(526701);let y={scaledWeb:"rem",scaledIOS:"pt",scaledAndroid:"dp",scaledAndroidText:"sp",pixel:"px"};function b(e){let r=(0,m.v4)().id,n=(0,i.d4)(e=>e.mirror.appModel.devHandoffPreferences),o=e??r;return(0,a.useMemo)(()=>n.codeExtensionPreferences?.[o]??{},[n,o])}function v(){let e=c.D.getState()?.mirror?.appModel,r=e?.devHandoffCodeLanguage?.id??"";return e?.devHandoffPreferences?.codeExtensionPreferences?.[r]??{}}function T(){let e=(0,i.d4)(e=>e.mirror.appModel.devHandoffPreferences),r=(0,d.U)();return(0,a.useCallback)((n,a,i)=>{let{customSettings:s,...c}=i;l()(c)||(void 0!==c.unit&&(c.unit=c.unit===o.tKW.PIXEL?y.pixel:C(n,a)),r("Dev Mode Preference Changed",{languageType:n.type,languageId:n.id,...c})),(0,p.D8)(e,n,i)},[e,r])}let I=({codeLanguage:e,preferences:r,options:n={}})=>!!_.z4.shouldAvoidScaling()||"first-party"===e.type&&(e.id===m.uz||e.id===m.A0)&&r.customSettings?.onlyText==="true"&&!n?.isTextProperty;function S(e,r,n,a){let i=function(e,r,n,a){let i=(0,m.v4)(),s=e??i,l=function(e,r,n=e=>e,a){let i=(0,m.v4)(),s=e??i,l=function(e){let r=(0,m.v4)(),n=e??r,{unit:a=o.tKW.PIXEL,scaleFactor:i=1}=b(n.id);return"first-party"===n.type&&n.id===m.MT?1:a===o.tKW.SCALED?i:1}(s),c=b(s.id);return 1===l||0===l||I({codeLanguage:s,preferences:c,options:a})?r.map(e=>void 0===e?void 0:n(e)):r.map(e=>void 0===e?void 0:n(e/l))}(s,r,n,a),c=function(e,r){let n=(0,m.v4)(),a=e??n,i=function(e){let r=(0,m.v4)(),n=e??r,a=b(n.id)?.unit??o.tKW.PIXEL;return"first-party"===n.type&&n.id===m.MT?o.tKW.PIXEL:a}(a),s=N(a,r);return i===o.tKW.PIXEL?y.pixel:s}(s,a),d=b(s.id);return I({codeLanguage:s,preferences:d,options:a})?l.map(e=>`${e}${y.pixel}`):l.map(e=>`${e}${c}`)}(e,[r],n,a);if(void 0!==r)return i[0]}function w(e){let{id:r,type:n}=e;return(0,h.S0)(r,{searchLocalPlugins:"local-plugin"===n,searchPublishedPlugins:"published-plugin"===n})}function A(e){let r=(0,m.v4)(),n=w(e??r);return(0,p.ZA)(e??r,n)}function C(e,r,n){let{id:a,type:i,pluginLanguage:o}=e;if("first-party"!==i&&r){let e=(0,E.X)(r,o),n=(0,p.K6)(r,e);if(n)return n.scaledUnit}switch(a){case m.uz:return y.scaledWeb;case m.p:case m.Ap:return y.scaledIOS;case m.LK:case m.NU:if(n?.isTextProperty)return y.scaledAndroidText;return y.scaledAndroid;default:return y.scaledWeb}}function N(e,r){let n=w(e);return C(e,n,r)}function L(e){switch(e){case m.uz:return(0,u.t)("dev_handoff.alternative_units.rem_unit");case m.LK:case m.NU:return(0,u.t)("dev_handoff.alternative_units.dp_unit");case m.p:case m.Ap:return(0,u.t)("dev_handoff.alternative_units.pt_unit");default:return(0,u.t)("dev_handoff.alternative_units.rem_unit")}}function O(e){let r=(0,m.v4)();return R(e??r)}function R(e){let r=N(e);return"first-party"===e.type?L(e.id):r}function P({localCodeLanguage:e,includeActions:r=!0,includeSelectSettings:n=!0}={}){let i=(0,m.v4)(),o=e??i,s=(0,m.AC)(o),l=b(o.id),c=T();return a.useMemo(()=>(function({includeActions:e=!1,includeSelectSettings:r=!0,codeLanguage:n,plugin:a,codeExtensionPreferences:i,onChangePreferences:o}){let s=[];if(!a||"first-party"===n.type||(0,p.GL)(a)!==n.id)return s;for(let l of(0,p.zZ)(a,(0,E.X)(a,n.pluginLanguage)))e&&(0,f.Wt)(l)&&s.push({name:l.propertyName,displayText:l?.label||l.propertyName,callback:()=>g.d1.codegenPreferencesChange({propertyName:l.propertyName}),recordingKey:l.propertyName}),r&&(0,f.ZV)(l)&&s.push({name:l.propertyName,recordingKey:l.propertyName,displayText:l?.label??l.propertyName,children:l.options.map((e,r)=>({name:e.value,displayText:e.label,isChecked:i?.customSettings?.[l.propertyName]?i?.customSettings?.[l.propertyName]===e.value:0===r,callback:()=>o(n,a,{customSettings:{...i?.customSettings,[l.propertyName]:e.value}}),recordingKey:e.value}))});return s})({includeActions:r,includeSelectSettings:n,codeLanguage:o,plugin:s,codeExtensionPreferences:l,onChangePreferences:c}),[r,n,o,s,l,c])}},341510:(e,r,n)=>{n.d(r,{q:()=>h});var a=n(411855),i=n(188507),o=n(805014),s=n(76265),l=n(34671),c=n(826688),d=n(296013),u=n(944415),m=n(736041),p=n(787017);function h(e){let r=(0,u.SF)(),n=function(e){let r=(0,l.v4)(),n=e??r,p=(0,l.AC)(n),h=(0,u.wQ)(n),_=(0,u.Em)(n),g=(0,u.gc)(n.id),f=(0,u.Bs)(),E=(0,i.wA)();return a.useMemo(()=>{let e=[];if(!_)return e;let r=g?.unit||o.tKW.PIXEL;return e.push({displayText:(0,s.t)("dev_handoff.alternative_units.dimension_unit"),header:!0},...c.zq.map(e=>{let a=e===o.tKW.PIXEL?(0,s.t)("dev_handoff.alternative_units.pixel_unit"):h;return{name:e.toString(),displayText:a,isChecked:r===e,callback:()=>f(n,p,{unit:e}),recordingKey:e===o.tKW.PIXEL?"pixel":"scaled"}}),{displayText:(0,s.t)("dev_handoff.alternative_units.unit_settings_menu_option"),callback:()=>E((0,m.to)({type:d.j6})),recordingKey:"setScaleFactor"}),e},[_,g?.unit,h,f,n,p,E])}(e),{updateDefaultCodegenSettings:h,isSetToDefault:_}=(0,p.Q)();return a.useMemo(()=>{let e=[];return n.length>0&&e.push(...n),r.length>0&&e.length>0&&e.push({displayText:"",separator:!0}),e.push(...r),e.length>0&&e.push({separator:!0,displayText:""}),e.push({displayText:(0,s.t)("dev_handoff.code.settings.set_as_default"),callback:()=>{h()},isChecked:_}),e},[r,_,n,h])}},686984:(e,r,n)=>{n.d(r,{Co:()=>R,Iy:()=>A,Me:()=>L,SD:()=>w,TU:()=>I,WV:()=>O});var a=n(217950),i=n(245459),o=n(640783),s=n(885123),l=n(657548),c=n(550479),d=n(972142),u=n(771952),m=n(697737),p=n(338584),h=n(190500),_=n(746695),g=n(841924),f=n(957020),E=n(84530),y=n(433216),b=n(198136);let v=p.object({id:p.string(),node_id:p.string(),file_key:p.string(),link_name:p.string(),link_url:p.string(),is_user_override:p.boolean(),link_preview_json:p.any()}),T=p.object({meta:p.array(v)});async function I({fileKey:e,nodeId:r,includeInheritedLinks:n}){let a=(await E.S.getRelatedLinks({nodeId:r,fileKey:e})).data,i=T.safeParse(a);if(!i.success)throw Error("Invalid response from server");let o=i.data.meta.map(e=>({id:e.id,nodeId:e.node_id,linkName:e.link_name,linkUrl:e.link_url,fileKey:e.file_key,isUserOverride:!!e.is_user_override,linkPreviewJson:e.link_preview_json}));if(!n)return o;let l=s.D.getState().mirror.sceneGraph,c=(0,b.k4)([r],l),d=(0,b.Yi)([r],l),u=await S(e,c),m=await S(e,d);return[...o,...u.map(e=>({...e,nodeId:r,mainComponentId:c})),...m.map(e=>({...e,nodeId:r,mainComponentId:d}))]}async function S(e,r){let n=s.D.getState().mirror.sceneGraph;if(!r)return[];let a=n.get(r);if(!a)return[];let{publishID:o}=a,l=i.fn(i.sH(o)),c=a.sourceLibraryKey,d=(await g.M4.fetch(_.Cs.LibrariesByLibraryKeysQuery({libraryKeys:[c],subscriptionFileKey:s.D.getState().openFile?.key??null,orgId:s.D.getState().currentUserOrgId})))[0],u=null;return d&&((0,f.ZA)(d)&&(0,f.xA)(d)?u=d.hub_file_id:"library_file_key"in d&&(u=d.library_file_key)),await I({fileKey:u??e,nodeId:l?o??"":r,includeInheritedLinks:!1})}async function w(e){let r=new Set([e]),n=new Map,a=new Map,o=s.D.getState().mirror.sceneGraph,l=(s,l,c)=>{if(!l)return;let d=o.get(l);if(!d)return;let{publishID:u,guid:m}=d,p=c.find(e=>e.library_key===d.sourceLibraryKey),h=null;if(p&&((0,f.ZA)(p)&&(0,f.xA)(p)?h=p.hub_file_id:"library_file_key"in p&&(h=p.library_file_key)),!h||!u||!i.fn(i.sH(u))||h===e){n.set(m,s),a.set(m,l);return}n.set(u,s),a.set(u,l),r.add(h)},c=o.get("0:0")?.findAllWithCriteria({types:["INSTANCE"]}).map(([e])=>e);if(c&&c.length>0){let e=new Set;for(let r of c){let n=o.get(r);if(!n||"INSTANCE"!==n.type)continue;let a=n.symbolId;if(!a)continue;let i=o.get(a);i?.sourceLibraryKey&&e.add(i?.sourceLibraryKey)}let r=await g.M4.fetch(_.Cs.LibrariesByLibraryKeysQuery({libraryKeys:Array.from(e),subscriptionFileKey:s.D.getState().openFile?.key??null,orgId:s.D.getState().currentUserOrgId}));for(let e of c){let n=o.get(e);if(!n||"INSTANCE"!==n.type)continue;l(e,n.symbolId,r);let a=(0,b.Yi)([e],o);l(e,a,r)}}let d=await m.Ay.post("/api/files/related_links",{file_keys:Array.from(r.values())}),u=[];return d.data.meta.forEach(r=>{let i=e===r.file_key&&!!o.get(o.guidFromDeveloperFriendlyId(r.node_id)),s={id:r.id,linkName:r.link_name,linkUrl:r.link_url,fileKey:r.file_key,isUserOverride:!!r.is_user_override,linkPreviewJson:r.link_preview_json};i&&u.push({...s,nodeId:r.node_id,mainComponentId:void 0}),n.has(r.node_id)&&u.push({...s,nodeId:n.get(r.node_id),mainComponentId:a.get(r.node_id)})}),u}async function A({fileKey:e,nodeId:r,url:n,name:a,nodeType:i,pluginId:o,source:s}){if((await I({fileKey:e??"",nodeId:r??""})).find(e=>e.linkUrl===n))throw Error(`Link already exists on node ${r} with url ${n}`);return N({fileKey:e,nodeId:r,url:n,name:a,nodeType:i,pluginId:o,source:s})}async function C(e){let r;try{let n=await y.E.getLinkMetadata({text:e}),a=n?.data?.meta;a?.title&&(r=decodeURIComponent(a?.title))}catch(e){}finally{if(!r){let n=(0,o.Gw)(e);r=n?(0,d.Zr)(n):"N/A"}}return r}async function N({url:e,nodeId:r,fileKey:n,name:a,onPost:i,nodeType:c,pluginId:d,source:p}){let _="";if(a)_=a;else{let r=(0,o.FB)(e);if(r?.toLowerCase()==="github.com")_="Github";else if(r?.toLowerCase()==="jira.com"||r?.toLowerCase()==="atlassian.net"){_="Jira";let r=function(e){for(let r of k){let n=e.match(r);if(n?.[1])return n[1]}return null}(e);r&&(_=`Issue ${r}`)}else _=await C(e)}let g={node_id:r??"",link_name:_,link_url:e},f=m.Ay.post(`/api/files/${n}/related_links`,g);return i&&i(),l.WB()?.optimisticallyCreate({DeveloperRelatedLink:{[`optimistic-link-${u.g()}`]:{nodeId:r??"",fileKey:n??"",linkName:_,linkUrl:e,isUserOverride:!1,linkPreviewJson:null}}},f),f.then(e=>((0,h.ds)("Dev Handoff Related Links Added New Link Success",n,s.D.getState(),{nodeId:r,nodeType:c,source:p,pluginId:d}),e))}async function L({fileKey:e,nodeId:r,currentUrl:n,newValue:a,nodeType:i,pluginId:o,source:c}){let d=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return d||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,name:a,url:i,isUserOverride:o,clearLinkPreview:c,nodeType:d,pluginId:u,source:p}){let _={node_id:r,link_id:n,new_link_name:a,new_link_url:i};void 0!==o&&(_.is_user_override=o),c&&(_.link_preview_json=null);let g=m.Ay.put(`/api/files/${e}/related_links`,_);return l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[n]:{linkName:a,linkUrl:i,isUserOverride:o,linkPreviewJson:c?"":void 0}}},g),g.then(n=>((0,h.ds)("Dev Handoff Related Links Edit Link Success",e,s.D.getState(),{nodeId:r,nodeType:d,source:p,pluginId:u}),n))}({fileKey:e,nodeId:r,linkId:d.id,name:a.name||d.linkName,url:a.url||d.linkUrl,isUserOverride:!1,clearLinkPreview:!0,nodeType:i,pluginId:o,source:c})}async function O({fileKey:e,nodeId:r,url:n,nodeType:a,pluginId:i,source:o}){let c=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return c||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,nodeType:a,pluginId:i,source:o}){let c=m.Ay.del(`/api/files/${e}/related_links`,{node_id:r,link_id:n});return l.WB()?.optimisticallyDelete({DeveloperRelatedLink:{[n]:null}},c),c.then(n=>((0,h.ds)("Dev Handoff Related Links Delete Link Success",e,s.D.getState(),{nodeId:r,nodeType:a,source:o,pluginId:i}),n))}({fileKey:e,nodeId:r,linkId:c.id,nodeType:a,pluginId:i,source:o})}async function R({fileKey:e,nodeId:r,url:n,linkPreviewJson:a}){let i=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return i||D({nodeId:r,url:n}),P({link:i,linkPreviewJson:a})}async function P({link:e,linkPreviewJson:r}){try{let n=m.Ay.put(`/api/files/${e.fileKey}/related_links/link_preview`,{node_id:e.nodeId,link_id:e.id,link_preview_json:r});l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[e.id]:{linkPreviewJson:JSON.stringify(r)}}},n),await n}catch(n){(0,c.$D)(a.e.DEVELOPER_TOOLS,n,{extra:{link:e,linkPreviewJson:r}})}}function D({nodeId:e,url:r}){throw Error(`url ${r} and nodeId ${e} not found`)}p.object({node_id:p.string(),link_name:p.string(),link_url:p.string()}),p.object({meta:v});let k=[/\/browse\/([A-Z]+-\d+)/,/selectedIssue=([A-Z]+-\d+)/,/issues\/([A-Z]+-\d+)/]},224623:(e,r,n)=>{n.d(r,{eS:()=>c});var a=n(717180),i=n(76265);n(106620);var o=n(941367),s=n(965636);n(575232),n(289765);var l=n(103785);function c(){let e=(0,s.kl)("numSelected"),r=(0,l.Vr)(),n=(0,o.lA)();return 1===e&&r&&r.isAlive?function(e,r){let n=e.isState?e.parentNode:null,o=n?.name||e.name,s=r?.isState?r?.parentNode?.name:r?.name,l="SYMBOL"===e.type||"INSTANCE"===e.type;return{id:e.guid,name:o,backingSymbolName:s,type:function(e,r,n=null,o=!1,s){if(!e?.isAlive)return null;let l=e.type;if((0,a.GI)(e)&&(l="STAMP"),n?.status==="loaded"&&"SYMBOL"!==l&&"INSTANCE"!==l)return(0,i.tx)("inspect_panel.node_type.detached_component");if("BOOLEAN_OPERATION"===l)switch(e.booleanOperation){case"UNION":return(0,i.tx)("inspect_panel.node_type.union");case"INTERSECT":return(0,i.tx)("inspect_panel.node_type.intersect");case"SUBTRACT":return(0,i.tx)("inspect_panel.node_type.subtract");case"XOR":return(0,i.tx)("inspect_panel.node_type.exclude")}switch(l){case"VECTOR":return(0,i.tx)("inspect_panel.node_type.vector");case"STAR":return(0,i.tx)("inspect_panel.node_type.star");case"LINE":return(0,i.tx)("inspect_panel.node_type.line");case"ELLIPSE":return(0,i.tx)("inspect_panel.node_type.ellipse");case"RECTANGLE":case"ROUNDED_RECTANGLE":return(0,i.tx)("inspect_panel.node_type.rectangle");case"REGULAR_POLYGON":return(0,i.tx)("inspect_panel.node_type.polygon");case"TEXT":return(0,i.tx)("inspect_panel.node_type.text");case"SLICE":return(0,i.tx)("inspect_panel.node_type.slice");case"GROUP":case"FRAME":if(e.isStateGroup)return(0,i.tx)("inspect_panel.node_type.main_component_set");if(o&&("HORIZONTAL"===e.stackMode||"VERTICAL"===e.stackMode))return(0,i.tx)("inspect_panel.node_type.frame_auto_layout");if("HORIZONTAL"===e.stackMode)return(0,i.tx)("inspect_panel.node_type.horizontal_al");if("VERTICAL"===e.stackMode)return(0,i.tx)("inspect_panel.node_type.vertical_al");else if(e.resizeToFit)return(0,i.tx)("inspect_panel.node_type.group");else return(0,i.tx)("inspect_panel.node_type.frame");case"SYMBOL":if(e.isState||r?.isStateGroup)return(0,i.tx)("inspect_panel.node_type.main_variant");return(0,i.tx)("inspect_panel.node_type.main_component");case"INSTANCE":return(0,i.tx)("inspect_panel.node_type.instance");case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"STAMP":return(0,i.tx)("inspect_panel.node_type.figjam");case"SECTION":return(0,i.tx)("inspect_panel.node_type.section");case"WIDGET":return(0,i.tx)("inspect_panel.node_type.widget");case"CANVAS":return(0,i.tx)("inspect_panel.node_type.page");case"TABLE":return(0,i.tx)("inspect_panel.node_type.table")}return null}(e,n,null),isSymbol:e.isStateGroup||l,isFrame:"FRAME"===e.type,isSection:"SECTION"===e.type,isText:"TEXT"===e.type}}(r,n):null}},801115:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(411855);function i(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},a.createElement("g",{clipPath:"url(#a)"},a.createElement("mask",{id:"b",width:16,height:16,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.346 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.14.14a.996.996 0 0 0-1.137.193L4.697 6.087 1.95 4.002a.666.666 0 0 0-.85.037l-.882.802a.667.667 0 0 0 0 .986L2.6 8 .217 10.173a.667.667 0 0 0 .001.986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.656-11.522L7.217 8l4.785 3.632V4.368Z",clipRule:"evenodd"})),a.createElement("g",{mask:"url(#b)"},a.createElement("path",{fill:"#0065A9",d:"M15.434 1.727 12.137.14A.997.997 0 0 0 11 .333L.208 10.173a.667.667 0 0 0 0 .986l.882.802a.667.667 0 0 0 .851.037L14.938 2.14A.662.662 0 0 1 16 2.667v-.039a1 1 0 0 0-.566-.9Z"}),a.createElement("g",{filter:"url(#c)"},a.createElement("path",{fill:"#007ACC",d:"m15.434 14.273-3.297 1.587A.996.996 0 0 1 11 15.667L.208 5.827a.667.667 0 0 1 0-.986l.882-.802a.667.667 0 0 1 .851-.037l12.997 9.859A.662.662 0 0 0 16 13.333v.039a1 1 0 0 1-.566.9Z"})),a.createElement("g",{filter:"url(#d)"},a.createElement("path",{fill:"#1F9CF0",d:"M12.137 15.86A.997.997 0 0 1 11 15.667a.586.586 0 0 0 1-.415V.747a.586.586 0 0 0-1-.414c.3-.3.755-.377 1.137-.193l3.296 1.585a1 1 0 0 1 .567.901v10.748a1 1 0 0 1-.567.901l-3.296 1.585Z"})),a.createElement("path",{fill:"url(#e)",fillRule:"evenodd",d:"M11.336 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.13.14a.996.996 0 0 0-1.137.193L4.687 6.087 1.94 4a.666.666 0 0 0-.85.038l-.882.802a.667.667 0 0 0 0 .986L2.59 8 .208 10.173a.667.667 0 0 0 0 .986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.657-11.522L7.208 8l4.785 3.632V4.368Z",clipRule:"evenodd",opacity:.25,style:{mixBlendMode:"overlay"}}))),a.createElement("defs",null,a.createElement("filter",{id:"c",width:32.676,height:28.759,x:-8.343,y:-4.467,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:4.167}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),a.createElement("filter",{id:"d",width:21.667,height:32.584,x:2.667,y:-8.292,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:4.167}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),a.createElement("linearGradient",{id:"e",x1:7.99,x2:7.99,y1:.041,y2:15.959,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#fff"}),a.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"}))))}},835408:(e,r,n)=>{n.d(r,{Ib:()=>F,Zy:()=>U,q1:()=>B,vY:()=>V});var a=n(411855),i=n(351966),o=n(690159),s=n(237104),l=n(805014),c=n(851169),d=n(245954),u=n(629019),m=n.n(u),p=n(885123),h=n(108982),_=n(875877),g=n(746643),f=n(693565),E=n(76265),y=n(678116),b=n(247846),v=n(190500),T=n(509343),I=n(963993),S=n(427494),w=n(700311),A=n(797187),C=n(289765),N=n(756044),L=n(688656),O=n(402816),R=n(23236),P=n(456809),D=n(150613),k=n(949207),M=n(432023);let F=(0,_.atom)(new Map);function x(e){let{isHovered:r,selection:n}=(0,h.R)(r=>({isHovered:r.mirror.appModel.hoveredNode===e.guid,selection:r.mirror.sceneGraphSelection})),[i,o]=a.useState(!1),s=a.useRef(null);a.useEffect(()=>{s.current&&e.isSelected&&s.current.scrollIntoView({block:"nearest"})},[e.isSelected]);let c="SYMBOL"===e.type||"INSTANCE"===e.type||e.isInstanceSublayer||e.isSymbolSublayer||B.includes(e.type),d=[D.nM,e._className];e.isSelected&&d.push(D.wH),r&&d.push(D.yo),c&&d.push(D.HR),e.isExpanded(e.guid)&&d.push(D.sz),e.isAncestorSelected&&d.push(D.bx),0!==e.indentation&&d.push(D.BT);let u=Array.from({length:e.indentation},(e,r)=>r+1);return a.createElement("div",{onMouseDown:r=>{(0,w.S)("html_tree"),e.didSelectRow(e.guid);let a=Object.keys(n);if(_.atomStore.set(O.m,null),_.atomStore.set(O.b,null),r.metaKey){var i;n[i=e.guid]?I.D$([i]):I.Dh([i])}else r.shiftKey&&a.length>0?I.GL(a[a.length-1],e.guid):l.w3z.selectAndPanToNode(e.guid)},onDoubleClick:r=>e.isExpandable&&e.toggleExpanded(r,e.guid),onContextMenu:r=>e.openContextMenu(r,e.guid),onMouseEnter:()=>{o(!0),I.Uc(e.guid)},onMouseLeave:()=>{o(!1),I.Uc(I.Hr)},role:"button",tabIndex:0,className:m()(d),ref:s,"data-fullscreen-intercept":!0},a.createElement("div",{className:D.M4},u.map(e=>a.createElement("div",{key:e,className:D.Mh})),e.children),a.createElement(K,{name:e.name,guid:e.guid,isRowHovered:i}))}function U(e){return a.createElement(f.B,{onMouseDown:e.visible?r=>{r.preventDefault(),r.stopPropagation(),e.onMouseDown?.(r)}:void 0,className:m()(D.GE,e.visible&&D.RK),svg:e.expanded?k.A:M.A,dataTestId:`devHandoffLayersRow.toggle-${e.name}`})}let B=["TABLE","TABLE_CELL","WASHI_TAPE","STAMP","STICKY","SHAPE_WITH_TEXT","WIDGET"];function V(e,r){let n=e?.type??N.PW.NOT_ASSET,a=n&(N.PW.ASSET_IMAGE|N.PW.ASSET_ICON);return r?a:n&N.PW.ASSET_IMAGE}function G(e){return"SYMBOL"===e||"INSTANCE"===e}function H({guid:e}){let r=(0,_.useAtomValue)(F).get(e);if(!r)return null;let n=r.state;return"added"===n?a.createElement("div",{className:D.vN}):"changed"===n?a.createElement("div",{className:D.tD}):"removed"===n?a.createElement("div",{className:D.rq}):null}function W(e){return a.createElement(x,{...e,_className:e.hasChildren?D.aw:void 0},a.createElement(U,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),a.createElement(P.Bf,{className:D.V3,guid:e.guid}),a.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement(H,{guid:e.guid}))}function K({isRowHovered:e,guid:r,name:n}){let l=(0,C.Fk)((e,r)=>e.get(r)?.isLockedInDevMode,r);return l||e?a.createElement(i.E,{actionOnPointerDown:!0,onClick:()=>{let e=(0,d.UN)().get(r);e&&c.l7.user("set-locked-in-dev-mode",()=>{e.isLockedInDevMode=!e.isLockedInDevMode;let r=p.D.getState(),n=r.openFile?.key;n&&(0,v.GS)("dev_mode.set_node_locked",n,r,{locked:e.isLockedInDevMode,nodeId:e.guid,nodeType:e.type,isLockedInDesignMode:e.locked,opacity:e.opacity,fillOpacity:e.fills[0]?.opacity})})},"aria-label":(0,E.t)("dev_handoff.layers_panel.locked_tooltip"),className:D.hz,"aria-pressed":l,htmlAttributes:{"data-testid":`devHandoffLayersRow.lockIcon-${n}`,"data-tooltip":(0,E.t)("dev_handoff.layers_panel.locked_tooltip"),"data-tooltip-type":L.Ib.TEXT,"data-tooltip-show-right":!0}},l?a.createElement(o.s,null):a.createElement(s.r,null)):null}function Y(e){return a.createElement(x,{...e,_className:D.aw},a.createElement(U,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),a.createElement(P.Bf,{className:D.V3,guid:e.guid}),a.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement(H,{guid:e.guid}))}function $(e){var r,n;let i;let o=(0,S.eY)(),s=e.inheritedTextStyle;if(s){let e=l.Pt4.getStyleNodeId(s.key,s.version);i=o.get(e)?.name}let c=e.isInstanceSublayer?(r=e.name,n=e.textContent,r===n?.trim().replace(/\s+/gm," ")):e.autoRename;return a.createElement(x,{...e,_className:D.yL},a.createElement(U,{visible:!1,expanded:!1,name:e.name}),a.createElement(P.Bf,{className:D.V3,guid:e.guid}),c?null:a.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement("span",{className:D.P_},e.textContent),a.createElement("span",{className:D.bT}," \xb7 ",i),a.createElement(H,{guid:e.guid}))}function j(e){return a.createElement(a.Fragment,null,a.createElement(P.Bf,{className:m()(D.V3,D.MS,{[D.hR]:!e.figJam}),guid:e.guid}),a.createElement("span",{className:m()(D.Hn,D.MS)},e.name,e.showGuids&&` (${e.guid})`))}function z(e){let r=e.guid;return a.createElement(x,{...e},a.createElement(U,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(r),onMouseDown:n=>e.toggleExpanded(n,r),name:e.name}),a.createElement(j,{guid:r,name:e.name,showGuids:e.showGuids}),a.createElement(H,{guid:e.guid}))}function q(e){let r=e.guid;return a.createElement(x,{...e},a.createElement(U,{visible:!1,expanded:!1,onMouseDown:g.lQ,name:e.name}),a.createElement(j,{guid:r,name:e.name,showGuids:e.showGuids,figJam:!0}),a.createElement(H,{guid:e.guid}))}function Z(e){let{assetInfo:r}=e;return r?a.createElement(J,{...e,assetInfo:r}):a.createElement(W,{...e})}function X({guid:e,assetInfo:r,hasEnabledStaticImagePaint:n}){let i=r.type&N.PW.ASSET_IMAGE||n,o=(0,y.O)({assetId:e,thumbnailVersion:r.thumbnailVersion,width:64,height:64,scale:2});return a.createElement(R.J,{className:m()(D.ZE,i?D.Ym:D.ye),style:o.backgroundStyle,src:o.url})}function J(e){let{assetInfo:r}=e;return a.createElement(x,{...e,_className:D.Re},a.createElement(U,{visible:!1,expanded:!1,name:e.name}),a.createElement(X,{guid:e.guid,assetInfo:r,hasEnabledStaticImagePaint:e.hasEnabledStaticImagePaint}),a.createElement(a.Fragment,null,G(e.type)?a.createElement(j,{guid:e.guid,name:e.name,showGuids:!1}):a.createElement(a.Fragment,null,a.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement("span",{className:D.UZ},a.createElement(b.$R,{assetInfo:r,dataTestId:"layerPanelAsset"})))))}a.memo(e=>{let r=(0,A.J2)((0,T.UK)().showGuids),n=(0,A.J2)(l.Ez5.devHandoffState().automaticIconDetection),i=a.useMemo(()=>l.w3z.getOrAddAssetInfo(e.guid),[e.guid]),o=(0,S.eY)().get(e.guid);if(!o)return null;let s=o.devToolsOrderedVisibleChildren,c=function(e,r,n){return B.includes(e.type)?q:n&&V(n,r)?Z:G(e.type)?z:"FRAME"===e.type&&e.isStack?Y:"TEXT"===e.type?$:W}(o,n,i);if(!c)return null;let d=s.length>0&&!(i&&V(i,n));return a.createElement(c,{toggleExpanded:e.toggleExpanded,isExpanded:e.isExpanded,openContextMenu:e.openContextMenu,indentation:e.indentation,hasChildren:d,isSelected:e.isSelected,isAncestorSelected:e.isAncestorSelected,didSelectRow:e.didSelectRow,guid:o.guid,type:o.type,name:o.name,textContent:o.textContent,absoluteBoundingBox:o.absoluteBoundingBox,hasEnabledStaticImagePaint:o.hasEnabledStaticImagePaint,inheritedTextStyle:o.inheritedTextStyle,autoRename:o.autoRename,stackMode:o.inferredAutoLayoutResult?o.inferredAutoLayoutResult.stackMode:o.stackMode,isInstanceSublayer:o.isInstanceSublayer,isSymbolSublayer:o.isSymbolSublayer,isExpandable:!e.isRoot&&d,showGuids:r,assetInfo:i})})},140583:(e,r,n)=>{n.d(r,{Ym:()=>u});var a=n(841962),i=n(666249),o=n(190500),s=n(314540),l=n(914077),c=n(73059);let d="Enter Inspect Mode";function u(e,r,n,m,p={}){let h=r===l.nT.DevHandoff?d:"Enter Design Mode",_={source:n,hasSeatForDevMode:(0,i.tn)(e),...p},g=e.openFile?.key;if((0,o.ds)(h,g,e,_,{forwardToDatadog:m}),(0,a.Ay)().org_id&&g&&"init"!==n){let e=h===d?s.Mr.DEV_MODE_FILE_SEEN:s.Mr.DESIGN_FILE_SEEN;c.L.postRecentActivity({fileKey:g,activityType:e})}}},138848:(e,r,n)=>{n.d(r,{d:()=>i});var a=n(780017);(0,a.Fu)("dev_mode_should_see_paywall_reminder");let i=(0,a.Fu)("dev_mode_seen_paywall_reminder")},660055:(e,r,n)=>{(0,n(875877).atom)([])},591465:(e,r,n)=>{n.d(r,{a:()=>en});var a=n(411855),i=n(188507),o=n(217950),s=n(138225),l=n(351966),c=n(344793),d=n(871432),u=n(113438),m=n(492277),p=n(292027),h=n(350447),_=n(207468),g=n(805014),f=n(629019),E=n.n(f),y=n(336427),b=n(666308),v=n(499875),T=n(663844),I=n(265851),S=n(854032),w=n(76265),A=n(553362),C=n(483331),N=n(209817),L=n(840325),O=n(415091),R=n(953927),P=n(86755),D=n(343373),k=n(692783),M=n(509343),F=n(515662),x=n(985814),U=n(125682),B=n(575232),V=n(688656),G=n(141604),H=n(172322),W=n(337707),K=n(103785),Y=n(49761),$=n(495118),j=n(244728),z=n(775211),q=n(453783),Z=n(934162),X=n(642870),J=n(113843),Q=n(430772),ee=n(742995),et=n(174103),er=n(52e3);function en({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:i,surface:o,entryPoint:s,maxHeight:l,canOpenLibrary:c}){let d=(0,F.u)(e),u=(0,x.T)()?"vscode":"dev_mode",m=d?.subscriptionStatus==="LOCAL"&&d.isSoftDeleted,p=a.useMemo(()=>({entrypoint:s,variableType:d?.resolvedType!==void 0?(0,J.Hr)(d.resolvedType):void 0,variableOrigin:d?.subscriptionStatus==="LOCAL"?"local":"library",product:u,isDeleted:m,surface:o}),[s,m,d?.resolvedType,d?.subscriptionStatus,o,u]);return a.createElement(P.gs,{name:"details",enabled:!!d,trackingProps:p},a.createElement(T.P,{maxHeight:l,className:er.PM},a.createElement(ea,{variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:i,canOpenLibrary:c})))}function ea({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:o,canOpenLibrary:l=!0}){let c=(0,i.wA)(),u=(0,P.ON)(),m=function({variableId:e,isDetailsModal:r}){let n=(0,F.u)(e),a=(0,F.G6)(n?.variableSetId),i=(0,F.Kd)(n?.node_id),o=a?.modes.find(e=>e.id===a?.defaultModeID),s=(0,X.yK)(n?.node_id);return{variable:n??void 0,variableSet:a,variableSetKey:i??void 0,modeForModal:r&&s?s.modeId.guid:o?.id}}({variableId:e,isDetailsModal:n}),p=(0,y.ZC)(e),h=m.variable?.variableSetId,_=(0,y.ZC)(h),[g,f]=a.useState(null);a.useEffect(()=>{n?p&&p!==e&&f(null):_&&_!==h&&f(null)},[n,p,e,_,h]);let E=!!m.variable&&!!m.variableSet&&!!m.variableSetKey&&!!m.modeForModal;a.useEffect(()=>{E||(c(A.F.enqueue({message:"Variable details could not be loaded"})),r())},[E,c,r]);let v=a.useCallback(e=>{e.event.keyCode===b.Uz.ESCAPE&&(u("escape_pressed"),e.event.preventDefault(),e.accept(),r())},[u,r]),T=a.useCallback(()=>{u("description_expanded")},[u]),{variable:I,variableSet:S,variableSetKey:N,modeForModal:L}=m??{},O=g??L,R=eg(e,N,O);if(!E)return null;let D="LOCAL"===I.subscriptionStatus&&I.isSoftDeleted;return a.createElement(G.vL,{handleKeyDown:v,name:"dev-mode-variable-details",focusOnMount:!0},a.createElement($.VZ,{title:"variable-info",hideHeader:!0,recordingKey:"dev-var-details-header",noPadding:!0},a.createElement("div",{className:er.Ct},o?a.createElement("div",{className:er.h6},a.createElement(ei,{variable:I}),a.createElement(s.K,{onClick:r,"aria-label":(0,w.t)("dev_handoff.variables.details_button_close_aria_label")},a.createElement(d.L,null))):a.createElement(ei,{variable:I}),n&&!D&&a.createElement(eo,{variableId:e,libraryKey:I?.subscriptionStatus==="SUBSCRIBED"?I.library_key:void 0,isLocal:I?.subscriptionStatus==="LOCAL",onClose:r,canOpenLibrary:l}),a.createElement(C.X,{description:I.description,containerClassName:er.h_,onExpand:T,dataTestId:"var-details-description"}))),a.createElement($.VZ,{title:"variable-value",hideHeader:!0,recordingKey:"dev-var-details-value",noPadding:!0},a.createElement("div",{className:er.Ct},a.createElement(ec,{name:(0,w.t)("dev_handoff.variables.details_collection"),value:S?.name,copyValue:null,trackingName:"collection"}),a.createElement(el,{setSelectedMode:f,selectedMode:O,modeOptions:S?.modes??[],jumpsCollection:R}),a.createElement(ef,{variableId:I.node_id,currentVarSetKey:N,currentlySelectedModeId:O,expandByDefault:!n,onClose:r,canOpenLibrary:l}),a.createElement(eE,{variableId:I.node_id}))),a.createElement(ey,{codeSyntax:I.codeSyntax}))}function ei({variable:e}){let r=(0,K.Cj)(e.name),n=(0,P.ON)(),i="LOCAL"===e.subscriptionStatus&&e.isSoftDeleted,{ref:o,...s}=(0,Y.X)(e.name),c=i?{"data-tooltip":(0,w.t)("variables.variable_was_deleted"),"data-tooltip-type":V.Ib.TEXT}:void 0,d=a.useCallback(()=>{r&&(n("row_copied",{type:"name"}),r())},[r,n]);return a.createElement(l.E,{className:er.L$,onClick:d,htmlAttributes:s??c},i&&a.createElement(Q.B3,null),a.createElement("span",{className:er.cG,ref:o,"data-testid":"var-details-name"},e.name))}function eo({variableId:e,libraryKey:r,isLocal:n,onClose:i,canOpenLibrary:s}){let l=(0,P.KP)("full_table",O.Nh.VariableDetailsModal),c=(0,k.b)({libraryKey:r,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!0,devModeVarsTableSelection:e,devModeFocusId:void 0}),d=(0,B.B)(r||"",{enabled:!!r}),u=(0,R.g)({onShow:i,entryPoint:O.Nh.VariableDetailsModal,variableId:e});return n||"loaded"===c.status&&"loaded"===d.status?s?a.createElement(v.tH,{boundaryKey:"varsTable_detailsEntry",fallback:v.H4.NONE_I_KNOW_WHAT_IM_DOING,team:o.e.DEVELOPER_TOOLS,sentryTags:{area:o.e.DEVELOPER_TOOLS}},a.createElement(L.J,{libraryName:d?.data,containerClassName:er.Yv,link:c.data,isLocal:n,localFallback:(0,w.t)("dev_handoff.variables.details_local"),onClickLocalFallback:u,onTrackClickName:l,dataTestId:"var-details-library",recordingKey:"library_name"})):a.createElement(L.J,{libraryName:d?.data,containerClassName:er.Yv,isLocal:n,dataTestId:"var-details-library"}):a.createElement(L.J,{containerClassName:er.Yv,loading:!0})}let es=new class{format(e){return e.name}};function el({selectedMode:e,setSelectedMode:r,modeOptions:n,jumpsCollection:o}){let s=(0,i.wA)(),l=(0,P.ON)(),c=(0,U.Um)(),d=a.useMemo(()=>n.find(r=>r.id===e),[e,n]),u=(0,N.UP)(),m=a.useCallback(n=>{l("change_mode",{previous:e,current:n.id}),r(n.id)},[e,r,l]);if(!d||!n||n.length<2)return null;let p=u?o?er.i2:er.y2:er.IZ;return a.createElement($._p,{className:er.VL,disableDetailModalEntry:!0},a.createElement("span",{className:er.xZ},(0,w.tx)("dev_handoff.variables.details_mode")),a.createElement("span",{className:p,"data-testid":"var-details-mode"},a.createElement(q.l6,{id:"mode_dropdown",dispatch:s,dropdownShown:c,property:d,onChange:m,formatter:es},n.map(e=>a.createElement(q.c$,{key:`${e.id}`,value:e},e.name)))))}function ec({name:e,trackingName:r,trackingProps:n={},value:i,copyValue:o,children:s}){let l=(0,P.ON)(),c=a.useCallback(()=>{null!==o?l("row_copied",{type:r,...n}):l("row_clicked",{type:r,...n})},[o,l,r,n]);return s?a.createElement($._p,{className:er.k$,copyValue:o,onCopy:c,disableDetailModalEntry:!0,showTooltipAbove:!0},s):a.createElement($._p,{className:er.k$,name:e,value:i,copyValue:o,onCopy:c,disableDetailModalEntry:!0,showTooltipAbove:!0})}function ed(e,r){let n=(0,X.Px)();return a.useMemo(()=>e&&r?{...n,[e]:r}:n,[n,e,r])}let eu=(0,et.ex)("variable_value_from_other_mode",function({modeName:e,collectionName:r}){return a.createElement("div",{className:I.s.cursorDefault.colorTextTooltip.wFitContent.$},(0,w.tx)("dev_handoff.variables.details_value_from_other_mode",{modeName:a.createElement("span",{className:I.s.fontSemiBold.$},e),collectionName:a.createElement("span",{className:I.s.fontSemiBold.$},r)}))},e=>({modeName:e.getAttribute("data-tooltip-mode"),collectionName:e.getAttribute("data-tooltip-collection")}));function em({variableId:e,onClose:r,canOpenLibrary:n}){let i=(0,D.GS)(),d=(0,F.u)(e),p=d?.subscriptionStatus==="LOCAL",h=d?.subscriptionStatus==="LOCAL"&&d.isSoftDeleted,_=d?.subscriptionStatus==="SUBSCRIBED"?d.library_key:void 0,g=(0,P.KP)("full_table",O.Nh.VariableDetailsModal),f=(0,k.b)({libraryKey:_,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!0,devModeVarsTableSelection:e,devModeFocusId:void 0}),y=f.data?.link,b=(0,R.g)({onShow:r,entryPoint:O.Nh.VariableDetailsModal,variableId:e}),T=a.useCallback(()=>{g({type:p?"local":"library"}),p&&b()},[p,g,b]);return d&&!h&&n&&(d?.subscriptionStatus!=="SUBSCRIBED"||"loaded"===f.status)?p?a.createElement("div",{className:er.Iw},i?a.createElement(s.K,{"aria-label":(0,w.t)("dev_handoff.variables.details_view_in_collection"),htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_view_in_collection")},onClick:T},a.createElement(u.E,null)):a.createElement(l.E,{"aria-label":(0,w.t)("dev_handoff.variables.details_view_in_collection"),className:er.YI,onClick:T,htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_view_in_collection")}},a.createElement(u.E,null))):f.data?.type==="community"?a.createElement(l.E,{disabled:!0,className:E()(er.WF,er.Iw),"aria-label":(0,w.t)("dev_handoff.variables.details_from_community"),htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_from_community")}},a.createElement(m.U,null)):y?a.createElement(v.tH,{boundaryKey:"varsTable_detailsEntry",fallback:v.H4.NONE_I_KNOW_WHAT_IM_DOING,team:o.e.DEVELOPER_TOOLS,sentryTags:{area:o.e.DEVELOPER_TOOLS}},a.createElement(c._,{className:E()(er.YI,er.Iw),newTab:!0,href:y,trusted:!0,onClick:T,"aria-label":(0,w.t)("dev_handoff.variables.details_view_in_collection"),htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_view_in_collection")}},a.createElement(u.E,null))):null:null}function ep({variableData:e,varSetKeyToModeID:r,originalSetID:n,showArrow:i,showDotDotDot:o,numberOfAliases:s,showCollapsedTooltip:c,someAliasOutsideCollection:d,onToggle:u,onClose:m,canOpenLibrary:f}){let y=(0,N.UP)(),b=(0,F.u)(e.value),v=(0,F.BQ)(e.value,r),T=(0,F.t8)(e.value,r),I=(0,F.G6)(b?.variableSetId),S=(0,F.Kd)(b?.node_id),A=(0,K.Cj)(b?.name),C=(0,P.ON)(),L=a.useCallback(()=>{A&&(A(),C("row_copied",{type:"alias"}))},[A,C]),O=a.useMemo(()=>{if(b?.variableSetId===n||!S||!I)return null;let e=r?.[S]??I?.defaultModeID,a=I?.modes.find(r=>r.id===e);return a?{modeName:a.name,collectionName:I.name}:null},[n,I,r,b,S]),R=(0,w.t)("dev_handoff.variables.details_value_show_more",{count:s-2}),{ref:D,...k}=(0,Y.X)(R),M="MIXED"!==v&&v?.type!==g.Z_n.COLOR,x=y&&!M;return a.createElement(a.Fragment,null,a.createElement("div",{className:E()(er.FO,y&&er.z4)},x?a.createElement(W.On,{color:v.value,variable:b,label:b?.name??(0,w.t)("variables.missing_name"),onClick:L,shouldStretch:!0}):a.createElement(Q.wG,{thumbnailValue:T,text:b?.name??(0,w.t)("variables.missing_name"),onClick:L,isDeleted:b?(0,J.eF)(b):void 0,fullWidth:y,containerClassName:y?er.dD:void 0}),d&&a.createElement("div",{className:er._Z},O&&a.createElement(p.B,{"data-tooltip-type":V.Ib.SPECIAL,"data-tooltip":eu,"data-tooltip-mode":O.modeName,"data-tooltip-collection":O.collectionName,className:er.LU})),!y&&a.createElement("div",{className:er.Dd}),a.createElement(em,{onClose:m,variableId:e.value,canOpenLibrary:f})),i?a.createElement("div",{className:E()(er.aI,M&&er.S5)},a.createElement(h.Q,null)):o?a.createElement("div",{className:E()(er.my,M&&er.mH)},a.createElement(l.E,{onClick:u,"aria-label":(0,w.t)("dev_handoff.variables.details_value_expand_aria_label"),className:er.X1,htmlAttributes:k},a.createElement(_.f,{className:er.Kk}),a.createElement("div",{className:er.Pn,ref:D},R)),c&&a.createElement(p.B,{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_values_not_all_from_same_mode"),className:er.Kk})):null)}function eh({value:e,noChain:r}){let n=e?.value?.toLocaleString(),i=(0,K.Cj)(n),o=(0,P.ON)(),{ref:s,...c}=(0,Y.X)(n),d=a.useCallback(()=>{i&&(i(),o("row_copied",{type:"value"}))},[i,o]);switch(e.type){case g.Z_n.STRING:case g.Z_n.BOOLEAN:case g.Z_n.FLOAT:return a.createElement(l.E,{onClick:d,className:E()(er.Uq,e.type===g.Z_n.STRING&&er.TQ),htmlAttributes:{...c,"data-testid":"var-details-value"},ref:s},n);case g.Z_n.COLOR:return a.createElement(e_,{value:e,noChain:r});default:return null}}function e_({value:e,noChain:r}){let n=(0,N.UP)(),i=(0,M.Ku)(),o=(0,z.Ig)(),s=(0,j.q)(e.value,i,o,{alphaInPercent:!0}).value,c=(0,K.Cj)(s),d=(0,P.ON)(),u=a.useCallback(()=>{c&&(c(),d("row_copied",{type:"value"}))},[c,d]),{ref:m,...p}=(0,Y.X)(s),h={...p,"data-testid":"var-details-value"};return n?a.createElement("div",{className:er.b0},a.createElement(W._z,{color:e.value,value:s,onClick:u,labelRef:m,htmlAttributes:h,pillClassName:r?er.Jd:void 0})):a.createElement(l.E,{onClick:u,className:er.du,htmlAttributes:h},a.createElement(H.J,{color:e.value}),a.createElement("div",{className:er.qn,ref:m},s))}function eg(e,r,n){let i=ed(r,n),o=(0,F.u)(e),s=(0,F.Xv)(e,i),l=(0,F.hg)((s??[]).map(e=>e.type===g.Z_n.ALIAS?e.value:void 0)),c=o?.variableSetId;return a.useMemo(()=>l.some((e,r)=>!!e&&r>0&&e?.variableSetId!==c),[l,c])}function ef({variableId:e,currentVarSetKey:r,currentlySelectedModeId:n,expandByDefault:i,onClose:o,canOpenLibrary:s}){let l=(0,N.UP)(),[c,d]=a.useState(!1),u=i||c,m=ed(r,n),p=(0,F.u)(e),h=(0,F.Xv)(e,m),_=(0,P.ON)(),f=a.useCallback(()=>{_("toggle_alias_chain",{type:u?"collapse":"expand"}),d(e=>!e)},[u,_]),y=eg(e,r,n);if(!p||!h||0===h.length)return null;let b=h.length>2,v=h[0],T=h[h.length-1],I=h.length>1?u?h:[v,T]:[T];if(1===h.length&&(T.type===g.Z_n.STRING||T.type===g.Z_n.BOOLEAN||T.type===g.Z_n.FLOAT)){let e=T.value.toString();return a.createElement(ec,{trackingName:"value",name:(0,w.t)("dev_handoff.variables.details_value"),value:e,copyValue:e})}return a.createElement("div",{className:er.e9},a.createElement("span",{className:er.xZ},(0,w.tx)("dev_handoff.variables.details_value")),a.createElement("div",{className:E()(er.n8,T.type!==g.Z_n.COLOR&&er.jl,l&&T.type===g.Z_n.COLOR&&er.ZK,l&&T.type!==g.Z_n.COLOR&&er.mu)},I.map((e,r)=>{let n=r===I.length-1;return e.type===g.Z_n.ALIAS?a.createElement(ep,{key:r,variableData:e,varSetKeyToModeID:m,originalSetID:p?.variableSetId,showArrow:b?!n&&u:!n,showDotDotDot:!!b&&!n&&!u,showCollapsedTooltip:b&&!u&&y,someAliasOutsideCollection:y,numberOfAliases:h.length,onToggle:f,onClose:o,canOpenLibrary:s}):a.createElement(eh,{key:r,value:e,noChain:1===h.length})})))}function eE({variableId:e}){let r=(0,F.u)(e),n=(0,P.ON)(),i=(0,w.t)("dev_handoff.variables.details_scope"),o=(0,Y.X)(i);return r?.scopes&&r.scopes.length>0&&r.scopes[0]!==g.j0r.ALL_SCOPES?a.createElement(S.c,{className:er.e9,onClick:()=>n("row_clicked",{type:"scopes"})},a.createElement("span",{className:er.xZ},a.createElement("span",{className:er.qg,...o},i),a.createElement("div",{"data-tooltip":(0,w.t)("dev_handoff.variables.details_scope_info"),"data-tooltip-type":V.Ib.TEXT,className:er.Kk},a.createElement(p.B,null))),a.createElement("div",{className:er.Wu},r.scopes.map(e=>a.createElement("div",{key:e.toString(),className:er.qg,"data-testid":`var-details-scope-${e.toString()}`},(0,ee.Us)(e,{devMode:!0}))))):null}function ey({codeSyntax:e}){return e&&Object.keys(e).length>0?a.createElement(a.Fragment,null,a.createElement("div",{className:I.s.h8.$}),a.createElement($.VZ,{title:(0,w.t)("dev_handoff.variables.details_code_syntax"),recordingKey:"dev-var-details-code-syntax"},Object.entries(e).map(([e,r])=>{let n=(0,Z.ov)(e);return null===n?null:a.createElement(ec,{key:n,trackingName:"code_syntax",trackingProps:{codeSyntaxPlatform:(0,Z.r8)(n)},name:(0,Z.lo)(n),value:r,copyValue:r})}))):null}},104502:(e,r,n)=>{n.d(r,{A8:()=>u,eT:()=>m});var a=n(411855),i=n(188507),o=n(336427),s=n(875877),l=n(250379);n(47795);var c=n(736041),d=n(515662);function u(){let e=(0,i.d4)(e=>"devModeVariablesTableSelectedVariable"in e.selectedView?e.selectedView.devModeVariablesTableSelectedVariable:void 0),r=(0,d.u)(e),n=(0,d.Rb)(),o=!!r,s=a.useMemo(()=>o&&"SUBSCRIBED"!==r.subscriptionStatus||!e?null:n.find(r=>e.includes(r.keyForPublish)),[o,e,n,r?.subscriptionStatus]);return s?s.node_id:r?.node_id??null}function m(){let e=(0,l.uQ)(),r=(0,o.ZC)(e),n=(0,i.wA)();a.useEffect(()=>{r&&e!==r&&n(c.AS())},[n,r,e])}n(926996),n(475464),(0,s.atomWithLocalStorage)("last-used-dev-mode-variable-set",null),(0,s.atom)("ALL_VARIABLES")},86755:(e,r,n)=>{n.d(r,{KP:()=>p,ON:()=>m,gs:()=>h});var a=n(411855),i=n(254773),o=n(34671),s=n(386897),l=n(140835);let c=a.createContext({}),d="dev_mode.variables.",u={};function m(){let e=(0,i.hC)(),{name:r,enabled:n=!0,trackingProps:o}=a.useContext(c);return a.useCallback((a,i=u)=>{r&&n&&e(d+r,{action:a,...o,...i})},[o,n,r,e])}function p(e,r){let n=(0,i.hC)();return a.useCallback((a=u)=>{n(d+e,{action:"click_on_entry_point",entrypoint:r,...a})},[r,e,n])}function h({children:e,enabled:r=!0,skipOpenAndClose:n=!1,name:m,trackingProps:p=u}){let h=(0,i.hC)(),_=(0,o.v4)().id,[g]=(0,s.$h)(),f=a.useMemo(()=>({codeLanguage:_,inspectView:g,...p}),[p,_,g]),E=a.useMemo(()=>({name:m,enabled:r,trackingProps:f}),[m,r,f]);return(a.useEffect(()=>{if(m&&r&&!n)return h(d+m,{action:"view_opened",...f}),()=>{h(d+m,{action:"view_closed",...f})}},[]),m)?a.createElement(l.fu,{name:m,enabled:r,properties:f},a.createElement(c.Provider,{value:E},e)):a.createElement(a.Fragment,null,e)}},475797:(e,r,n)=>{n.d(r,{cR:()=>l,d:()=>s,hv:()=>d,pc:()=>c});var a=n(875877),i=n(780017),o=n(392789);(0,a.atom)(void 0);let s=(0,a.atom)(!1),l=(0,a.atom)(!1),c=(0,a.atom)(!1),d=(0,i.Fu)(o.Ih)},895152:(e,r,n)=>{n.d(r,{D0:()=>s,zi:()=>o});var a=n(805014),i=n(76265);function o(e){switch(e){case a.zIx.BUILD:return(0,i.t)("dev_handoff.status.ready_for_dev");case a.zIx.COMPLETED:return(0,i.t)("dev_handoff.status.completed");case a.zIx.NONE:return null}}function s(e){if(e.length>0){let r=e[0].metadata;return{status:r?.status??null,nodes:e.map(e=>({id:e.node_id,name:e.node_name}))}}return{status:null,nodes:[]}}},178035:(e,r,n)=>{n.d(r,{Wl:()=>s,hA:()=>l,l7:()=>o,s4:()=>c}),n(411855);var a=n(188507);n(805014),n(900956),n(254773),n(108982),n(875877),n(666249),n(939946),n(140583),n(47795),n(644392),n(427494),n(797187),n(914077);var i=n(738402);function o(){return(0,a.d4)(e=>s(e.selectedView))}function s(e){return!!e&&e?.view==="fullscreen"&&e?.showOverview===!0}function l(){return(0,a.d4)(e=>c(e.selectedView)??null)}function c(e){if(e)return(0,i.$A)(e)?e.devModeFocusId:void 0}n(475797),n(585199)},409751:(e,r,n)=>{n.d(r,{L:()=>D});var a=n(236891),i=n(217950),o=n(805014),s=n(851169),l=n(885123),c=n(875877),d=n(198003),u=n(550479),m=n(677840),p=n(76265),h=n(870771),_=n(250450),g=n(666249),f=n(475797),E=n(895152),y=n(241162),b=n(190500),v=n(366172),T=n(298820),I=n(314540),S=n(183739),w=n(6253),A=n(769612),C=n(556381),N=n(939094);function L({status:e,prevStatus:r,source:n,numNodesUpdated:a,nodeId:i,nodeType:o,isReadOnly:s,description:c,isEdited:d}){let u=l.D.getState();(0,b.ds)("dev_handoff_edit_status",u.openFile?.key,u,{status:e,prevStatus:r,source:n,numNodesUpdated:a,nodeId:i,nodeType:o,isViewOnly:s,hasDescription:""!==c,description:c,isEdited:d},{forwardToDatadog:!0})}async function O(e,r,n,a,d){let m;let p=l.D.dispatch,h=l.D.getState(),_=h.openFile?.key||"",g=d??void 0,y=performance.now();if(c.atomStore.set(f.pc,!0),r===o.zIx.BUILD||r===o.zIx.COMPLETED)try{let e=await (0,w.m)(_,(0,E.zi)(r)??void 0,g,p,!0);m=e?.id,_&&!m&&(0,u.$D)(i.e.DEVELOPER_TOOLS,Error("[Dev mode activity] createSavepoint returned no id"))}catch(e){(0,u.$D)(i.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating version on status change: "+e.stack))}let v=!1;(0,s.l7)(s.zk.SYSTEM,"store-status-activity",()=>{A.e.recordStatusChange({fileKey:_,nodes:e,status:r,description:g,versionId:m}).then(()=>{v=!0}).catch(e=>{(0,u.$D)(i.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating activity: "+e.stack))}).finally(()=>{let r=performance.now()-y;(0,b.ds)("dev_handoff_status_activity",_,h,{elapsedMs:r,status:n,source:a,savedVersion:!!m,savedActivity:v,nodeIds:e.map(e=>e.id)},{forwardToDatadog:!0}),c.atomStore.set(f.pc,!1)})})}function R(e){switch(e){case o.zIx.BUILD:return"ready_for_dev";case o.zIx.COMPLETED:return"completed";default:return"none"}}async function P(e,r){let n=e.map(({id:e,isUpdated:n})=>n?{fileKey:r,nodeId:e}:null).filter(a.Vq);if(0===n.length)return{};let i=await (0,d.S8)(S.WND,n),o={};return i.forEach(({result:e},r)=>{if(e.data?.file.status==="loaded"){let a=e.data.file.data?.devModeActivity.filter(e=>e.activityType===I.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime())||[],i=n[r],s=a[0];i&&s&&(o[i.nodeId]=s.id)}}),o}async function D({nodeIds:e,status:r,description:n,sourceForLogging:a,editScopeType:i}){let d=l.D.getState(),u=d.mirror.sceneGraph,E=d.openFile?.key??"",I=d.user?.id??"",S=o.w3z.isReadOnly(o.SES.NODE_STATUS),w=R(r),A=l.D.dispatch;if(r===o.zIx.BUILD){A((0,y.b)({has_marked_ready_for_dev:!0})),(0,m.YQ)({id:"marked_ready_for_dev",properties:{nodeIds:e}});let r=c.atomStore.get(_.hj);if(r&&e.includes(r)){let e=c.atomStore.get(_.d1);e.fn?.()}}let D=new Map,k=new Map,M=[];for(let n of e){let e=u.get(n);if(e){let a=e.getStatusInfo().status;D.set(n,e.hasBeenEditedSinceLastStatusChange),k.set(n,R(a));let i=(0,N.S7)(u,n,e.containingCanvas||""),s=a===o.zIx.BUILD&&r===o.zIx.BUILD,l="";if(e.containingCanvas){let r=u.get(e.containingCanvas);r&&(l=r.name)}M.push({id:n,name:e.name,type:e.type,pageName:l,prevStatus:a,previewBackground:i,isUpdated:s})}}if(S){let s=d.openFile,l={status:w,canAccessDevModeRaw:s?.canAccessFullDevMode,canAccessDevModeEntryPoint:s?.canAccessDevModeEntryPoint,canAccessDevMode:(0,g.tn)(d),fileRepoId:s?.fileRepoId,userOrgId:d.user?.org_id,currentTeamId:d.currentTeamId,currentUserOrgId:d.currentUserOrgId,source:a,numNodes:e.length,editScopeType:i,userIdForMultiplayer:I,linkAccess:s?.linkAccess,fileCanEdit:s?.canEdit,fileCanEditCanvas:s?.canEditCanvas,fileCanEditIgnoreEduGracePeriod:s?.canEditIgnoreEduGracePeriod,canManage:s?.canManage,canView:s?.canView,isTeamTemplate:s?.isTeamTemplate,isTryFile:s?.isTryFile,viewerExportRestricted:s?.viewerExportRestricted,fileHasPartialOrgUser:!!s?.currentPartialOrgUser,fileHasCurrentTeamUser:!!s?.currentTeamUser,hasEditRole:s?.hasEditRole?.data};(0,b.ds)("temp_debug_set_status_view_only",s?.key,d,l);let c=!1;setTimeout(()=>{c||(0,b.ds)("temp_debug_set_status_view_only_failed",s?.key,d,l)},2e3),o.h3O.sendSetNodeStatus(e,r,n??"",I);let[u]=await Promise.all([P(M,E),(0,T.n)()]);if(c=!0,(0,g.tn)(d))for(let{id:e,name:a,type:i,pageName:o,prevStatus:s,previewBackground:l}of M)C.f.recordStatusChange({fileKey:E,nodeId:e,nodeName:a,nodeType:i,status:r,prevStatus:s,description:n||void 0,pageName:o,previewBackground:l,prevActivityId:u[e]||null});for(let{id:i,type:o}of(O(M,r,w,a,n),M))L({status:w,source:a,numNodesUpdated:e.length,nodeId:i,nodeType:o,isReadOnly:S,description:n??"",prevStatus:k.get(i)??w,isEdited:D.get(i)??!1})}else{if(!navigator.onLine){(0,h.j)("offlineSettingNodeStatus",!0,{message:(0,p.t)("dev_handoff.status.offline")});return}(0,s.l7)(i,"set-nodes-status",()=>{for(let{id:e}of M){let a=u.get(e);a&&a.setStatus(r,I,n??void 0)}v.Y5.triggerAction("commit")});let o=await P(M,E);for(let{id:e,name:a,type:i,pageName:s,prevStatus:l,previewBackground:c}of M)(0,g.tn)(d)&&C.f.recordStatusChange({fileKey:E,nodeId:e,nodeName:a,nodeType:i,status:r,prevStatus:l,description:n||void 0,pageName:s,previewBackground:c,prevActivityId:o[e]||null});for(let{id:i,type:o}of(O(M,r,w,a,n),M))L({status:w,source:a,numNodesUpdated:e.length,nodeId:i,nodeType:o,isReadOnly:S,description:n??"",prevStatus:k.get(i)??w,isEdited:D.get(i)??!1})}!function(e){let r=c.atomStore.get(f.d),n=c.atomStore.get(f.cR),a=c.atomStore.get(f.hv)?.data;e!==o.zIx.BUILD||r||n||a||c.atomStore.set(f.d,!0)}(r)}},585199:(e,r,n)=>{n(411855),n(188507),n(217950),n(777535),n(254773),n(512729);var a=n(875877);n(550479),n(666249),(0,n(473982).Wh)(()=>(0,a.atom)(!1),{preserveValue:!1}),(0,a.atom)(""),(0,a.atom)("");var i=(e=>(e.ALL="ALL",e.RECENTLY_VIEWED="RECENTLY_VIEWED",e.BUILD="BUILD",e.COMPLETED="COMPLETED",e))(i||{}),o=(e=>(e.RECENT="RECENT",e.PAGE="PAGE",e.ALPHABETICAL="ALPHABETICAL",e))(o||{})},11266:(e,r,n)=>{n.d(r,{E1:()=>l,ei:()=>s});var a=n(108982),i=n(841962);n(427494);var o=n(289765);function s(e,r=!1,n){return(0,o.Fk)((e,r,a)=>r&&function(e,r,n){let a=e.get(r)?.editInfo;return!a||n&&a.userId===i.Ay().user_data?.id||0===a.lastEditedAt?null:(a.lastEditedAt=1e3*a.lastEditedAt,a.createdAt=1e3*a.createdAt,a)}(n??e,r,a)||null,e,r)}function l(){let{lastViewedStamp:e,lastEditedStamp:r}=(0,a.R)(e=>({fileKey:e.openFile?.key,lastViewedStamp:e.versionHistory.lastViewed,lastEditedStamp:e.versionHistory.lastEdited}));return function(e,r){if(!e)return r?new Date(r):void 0;if(!r)return e?new Date(e):void 0;let n=new Date(e),a=new Date(r);return n>a?n:a}(e,r)}var c=(e=>(e.NOT_RECENT="NOT_RECENT",e.RECENTLY_EDITED="RECENTLY_EDITED",e.RECENTLY_CREATED="RECENTLY_CREATED",e))(c||{})},499706:(e,r,n)=>{n.d(r,{t:()=>E});var a=n(411855),i=n(109388),o=n(188507),s=n(841962),l=n(746643),c=n(76265),d=n(867283),u=n(82278),m=n(47795),p=n(942171),h=n(406214),_=n(689954);let g=(e,r,n,a={})=>e?[{displayText:r||"",callback:n,...a}]:[],f=()=>{let e=(0,o.d4)(e=>e.dropdownShown);return e&&e?.type===d.jU?e:null};function E(e){let r=(0,o.wA)(),n=(0,o.d4)(e=>e.currentTeamId),d=(0,o.d4)(e=>e.currentUserOrgId),E=(0,o.d4)(e=>e.mobileNavShown),y=(0,o.d4)(e=>e.favorites.collapsedCustomSections),b=a.useMemo(()=>(0,p.t$)(e.sections,e.customSectionOrdering),[e.sections,e.customSectionOrdering]),v=f();if(null==v)return null;let{updateFavorite:T,resourceId:I,resourceType:S,isFavorited:w,currentSectionId:A}=e,C=function(e){let{dispatch:r,currentOrgId:n,currentTeamId:a,collapsedCustomSections:i,updateFavorite:o,resourceId:d,resourceType:p,isFavorited:_,currentSectionId:f,sections:E}=e,y=(e,a)=>{o(e,a),r(m.oB()),e&&a&&(i.delete(a),r(u.U6({collapsedCustomSections:i})),h.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:a},!0))},b=E.map(e=>({displayText:""===e.name?(0,c.t)("sidebar.starred"):e.name,isChecked:_&&f===e.id,alwaysShowCheckMarkOffset:!0,callback:()=>y(!(_&&f===e.id),e.id)})),v=[...g(_,null,l.lQ,{separator:!0}),...g(_,(0,c.t)("favorited_resources.remove_from_sidebar"),()=>y(!1))],T=a&&(0,s.kc)().ps_benchmark,I=[...g(!e.showFavoriteOptionsOnly&&!T,(0,c.t)("favorited_resources.create_a_new_section"),()=>{void 0===e.mobileNavShown||e.mobileNavShown||r(m.PY());let n=f?E.findIndex(e=>e.id===f):0;p&&r(u.to({movingResource:{resourceId:d,isFavorited:!0,resourceType:p}})),r(u.pS({newCustomSectionIndex:n})),r(m.oB())})],S=[{displayText:"",separator:!0}],w=E.find(e=>e.id===f),A=_?`${(0,c.t)("favorited_resources.indicate_section_prefix")}: ${w?.name||(0,c.t)("sidebar.starred")}`:(0,c.t)("favorited_resources.add_to_sidebar");return E.length>4?[{displayText:A,children:[...b,...S,...I]},...v]:[...g(!0,(0,c.t)("favorited_resources.add_to_sidebar"),l.lQ,{disabled:!0}),...b,...S,...v,...S,...I]}({dispatch:r,currentOrgId:d,currentTeamId:n,collapsedCustomSections:y,updateFavorite:T,resourceId:I,resourceType:S,isFavorited:w,currentSectionId:A,sections:b,mobileNavShown:E}),N=a.createElement(_.j,{autofocusPrevOnDismount:!0,items:C,parentRect:v.data.targetRect,showPoint:!!e.showPoint,lean:"right",recordingKey:"organize-favorited-dropdown",dispatch:r,onSelectItem:(e,n)=>{e.callback?.("",{},r,n)}});return(0,i.createPortal)(N,document.body)}},713865:(e,r,n)=>{n.d(r,{E:()=>_,ce:()=>p,cv:()=>g,hZ:()=>f,rg:()=>h});var a=n(201863),i=n(885123),o=n(697737),s=n(719334),l=n(534294),c=n(708737),d=n(190500),u=n(949424);let m=e=>{let r=i.D.getState();if(!r.openFile)return;let n=r.openFile;n&&n.parentOrgId&&o.Ay.post(`/api/activity_logs/${n.key}`,{event_name:e})};function p(){m("fig_file_save_as")}let h=(0,l.nF)((e,r)=>{m("fig_file_export")}),_=(0,a.N)("GET_ACTIVITY_LOGS");(0,l.nF)((e,r)=>{let{newQuery:n,teamId:a,emails:i,eventName:o,date:l}=r,m=e.getState();u.J.getActivityLogs({pageSize:"30",orgId:m.currentUserOrgId,startTime:l.start,endTime:(0,c.H3)(l.end),...a?{teamId:a}:null,...o?{eventName:JSON.stringify(o)}:null,...i?{emails:i.join()}:null,...n?null:{after:m.activityLogs.cursor.after}}).then(({data:r})=>{let s=r.meta,u=s[0],p=s[1],h=n?u:e.getState().activityLogs.logs.concat(u);e.dispatch(f({logs:h,cursor:p})),(0,d.Fr)("Activity Logs Fetched",m.currentUserOrgId,m,{teamIdFilter:a,eventNamesFilter:o,startDateFilter:l.start,endDateFilter:(0,c.H3)(l.end),filtersOnActorEmail:!!i&&i.length>0,filtersOnActedOnEmail:!!i&&i.length>0,isNewQuery:n,numberOfResults:u.length})}).catch(r=>{let n=r.data?.message||"An error occurred while fetching activity logs.";e.dispatch(s.s.flash(n))}),e.dispatch(_(r))});let g=(0,a.N)("CLEAR_CURSOR_ACTIVITY_LOGS"),f=(0,a.N)("SET_ACTIVITY_LOGS")},8766:(e,r,n)=>{n.d(r,{ZH:()=>c,_M:()=>s,r$:()=>l,r5:()=>d});var a=n(201863),i=n(952979),o=n(281935);let s=(0,n(534294).nF)(e=>{i.R7.fullscreen&&(e.getState().appWindow.inFullScreenMode?(o.eD?.setFullScreen(!1),i.R7.getFullscreenElement()?i.R7.exitFullscreenFunc():e.dispatch(c())):(o.eD?.setFullScreen(!0),i.R7.requestFullscreenFunc.call(document.documentElement)))}),l=(0,a.N)("WINDOW_DID_ENTER_FULL_SCREEN"),c=(0,a.N)("WINDOW_DID_EXIT_FULL_SCREEN");function d(e){i.R7.fullscreen&&(document.addEventListener(i.R7.fullscreenChangeEventName,function(r){let n=e.getState();i.R7.getFullscreenElement()&&!n.appWindow.inFullScreenMode?e.dispatch(l()):n.appWindow.inFullScreenMode&&e.dispatch(c())}),document.addEventListener(i.R7.fullscreenErrorEventName,function(r){console.warn("failed to enter fullscreen:",r),e.getState().appWindow.inFullScreenMode&&e.dispatch(c())}))}},173428:(e,r,n)=>{n.d(r,{DF:()=>g,TP:()=>f,Y3:()=>y,h0:()=>b,vv:()=>h,zE:()=>E});var a=n(201863),i=n(777535),o=n(281935),s=n(875877),l=n(534294),c=n(47795),d=n(995573),u=n(31393),m=n(498913),p=n(841924);let h=(0,l.nF)(async(e,r)=>{let n=e.getState()?.user?.id;if(!n)return;let a=Object.keys(r);await (0,u.wI)(n,a),m.hp.sendToAllTabs(m.c6,a),(0,i.sx)("Delete New Autosave Files",{deletedCount:a.length})}),_=(0,l.nF)(async e=>{let r=e.getState(),n=r.user?.id;if(!n)return;await (0,u.JI)(n);let a=await (0,u.kl)(n);e.dispatch(y({filesWithChangesInIDB:a.unsyncedFiles,filesCreatedOffline:a.newFiles})),e.dispatch(f(a.nextGarbageCollectionTimestamp))}),g=(0,a.N)("SET_AUTOSAVE_ONBOARDING_TOOLTIP_VISIBLE"),f=(0,a.N)("SET_AUTOSAVE_NEXT_GARBAGE_COLLECTION_TIMESTAMP"),E=(0,a.N)("SET_AUTOSAVE_SNOOZE"),y=(0,a.N)("SET_UNCLAIMED_FILES");function b(e){m.hp.register(m.ec,()=>(function(e){let r=e.getState().user?.id??null;p.M4.fetch((0,u.OL)({userId:r}),{policy:"networkOnly"})})(e)),m.hp.register(m.c6,r=>(function(e,r){let n=s.atomStore.get(d.h);n&&r.includes(n)&&(o.eD?o.eD.close({suppressReopening:!0,shouldForceClose:!0}):e.dispatch(c.$T({view:"recentsAndSharing"}))),e.dispatch(_())})(e,r)),m.hp.register(m.m6,({localFileKey:e,realFileKey:r})=>(0,u.Gc)(e,r))}},217699:(e,r,n)=>{n.d(r,{AY:()=>v,PI:()=>y,_E:()=>f,nx:()=>E,pI:()=>T,s6:()=>I});var a=n(805014),i=n(201863),o=n(540162),s=n(697737),l=n(719334),c=n(76265),d=n(553362),u=n(534294),m=n(137209),p=n(989747),h=n(193285);n(434992);var _=n(886756),g=n(93008);function f(e,r,n,a){let i=document.createElement("canvas"),o=i.getContext("2d");return i.width=i.height=r,o.fillStyle="image/png"===a?"transparent":"#FFF",o.fillRect(0,0,r,r),o.drawImage(i,0,0),o.drawImage(e,n.x,n.y,n.width,n.height),"image/png"===a?i.toDataURL():i.toDataURL("image/jpeg",.92)}function E(e){let r=atob(e.slice(e.indexOf(",")+1)),n=[];for(let e=0;e<r.length;e++)n.push(r[e].charCodeAt(0));return new Uint8Array(n)}let y=(0,i.N)("AVATAR_EDITOR_RESET"),b=(0,u.nF)((e,r)=>{if(r.entityType===_.ck.CURRENT_USER)s.Ay.put("/api/user",{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;n?.img_url&&a.h3O?.setImgUrl(n.img_url),e.dispatch(h.yJ({user:n,userInitiated:!1})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),r),e.dispatch(y())});else if(r.entityType===_.ck.TEAM){let n=r.entity.id;s.Ay.put(`/api/teams/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(p.yJ({team:n,userInitiated:!1})),e.dispatch(y()),e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.team_icon_updated")}))},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon"))),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon")),e.dispatch(y())})}else if(r.entityType===_.ck.ORG){let n=r.entity.id;s.Ay.put(`/api/orgs/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(m.yJ({org:n})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred")+r.data?.message)),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_organization_icon"),r),e.dispatch(y())})}else if(r.entityType===_.ck.WORKSPACE){let n=r.entity.id;g.u.updateImage({workspaceId:n,img_url:r.smallUrl,img_url_500_500:r.largeUrl,onfulfilled:()=>{e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.workspace_icon_updated")}))},onrejected:r=>{let n=(0,c.t)("avatar_actions.an_error_occurred_while_setting_the_workspace_icon");e.dispatch(l.s.error(n)),console.error(n),e.dispatch(y())}})}}),v=(0,i.N)("AVATAR_EDITOR_UPLOAD"),T=(0,u.nF)((e,r)=>{Promise.all([(0,o.Q)("profile",r.small,r.contentType),(0,o.Q)("profile",r.large,r.contentType)]).then(function(n){let a=n[0].data.meta.url,i=n[1].data.meta.url;e.dispatch(b({entity:r.entity,entityType:r.entityType,smallUrl:a,largeUrl:i}))},()=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_uploading_the_image"))),e.dispatch(y())}),e.dispatch(v(r))}),I=(0,i.N)("AVATAR_EDITOR_INIT")},67489:(e,r,n)=>{n.d(r,{DI:()=>c,NY:()=>d,V2:()=>o,cL:()=>u,dY:()=>s,sV:()=>i,zx:()=>l});var a=n(201863);let i=(0,a.N)("CANVAS_SEARCH_SET_MODE"),o=(0,a.N)("CANVAS_SEARCH_SET_SCOPE"),s=(0,a.N)("CANVAS_SEARCH_CLEAR_CATEGORY_FILTERS"),l=(0,a.N)("CANVAS_SEARCH_SWITCH_CATEGORY_FILTER_EXCLUSIVE"),c=(0,a.N)("CANVAS_SEARCH_TOGGLE_CATEGORY_FILTER"),d=(0,a.N)("CANVAS_SEARCH_SET_QUERY"),u=(0,a.N)("CANVAS_SEARCH_RESET")},731556:(e,r,n)=>{n.d(r,{$0:()=>ea,$M:()=>eC,AY:()=>G,At:()=>q,C:()=>x,CX:()=>ei,Df:()=>eF,F8:()=>eo,Fm:()=>eh,Jc:()=>ek,Mv:()=>K,NJ:()=>ep,Oo:()=>em,PB:()=>eA,Q8:()=>el,QD:()=>eP,QY:()=>V,Qe:()=>e_,RI:()=>eE,RO:()=>eS,RP:()=>ed,Tb:()=>H,U3:()=>ew,UU:()=>en,We:()=>ef,Z5:()=>eO,_B:()=>er,_v:()=>z,a$:()=>es,bB:()=>X,cL:()=>eK,dB:()=>U,gi:()=>Q,hY:()=>$,hx:()=>Y,i4:()=>eg,js:()=>eY,k7:()=>eD,l5:()=>Z,lI:()=>et,lV:()=>ee,li:()=>eU,nL:()=>ey,nb:()=>eL,on:()=>eR,pD:()=>J,pI:()=>eG,q4:()=>eN,rW:()=>j,sQ:()=>eb,uy:()=>eM,uz:()=>ex,vV:()=>ec,wJ:()=>eB,wg:()=>eu,xH:()=>eT,y3:()=>eV,yH:()=>eH,z$:()=>W});var a=n(805014),i=n(245459),o=n(201863),s=n(777535),l=n(533132),c=n(151314),d=n(841962),u=n(875877),m=n(657548),p=n(606456),h=n(550479),_=n(653798),g=n(508794),f=n(697737),E=n(719334),y=n(76265),b=n(553362),v=n(534294),T=n(47795),I=n(576834),S=n(190500),w=n(834616),A=n(634929),C=n(366172),N=n(421023),L=n(804197),O=n(402816),R=n(244539),P=n(753399),D=n(736041),k=n(849013),M=n(622667),F=n(241162);async function x(e,r,n,a,i){await B(i.messageMeta,e,r,n,a).then(r=>{e(z({comment:i.comment,messageMeta:i.messageMeta,attachmentUpdates:i.attachmentUpdates,forceWithInvite:r,forceMention:r,onCommentValidationFailure:void 0}))}).catch(()=>{})}async function U(e,r,n,a,i,o,s,l){return await B(o.messageMeta,r,n,a,i).then(n=>{r(ek({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}})),r(ee({commentsWriteApi:e,threadId:o.threadId,threadUuid:o.threadUuid,uuid:s,forceWithInvite:n,forceMention:n,onCommentValidationFailure:void 0,commentsConfiguration:l}))}).catch(()=>{r(eN({threadId:o.threadId,resetStatusOnly:!0})),r(ek({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}}))})}function B(e,r,n,a,i){return new Promise(o=>{r((0,D.to)({type:P.VB,data:{messageMeta:e,dispatch:r,usersWithoutAccess:n,externalUsersWithoutAccess:a,uninvitableUsers:i,onConfirm:()=>o(!0),onCancel:()=>o(!1)}}))})}let V=(0,v.nF)((e,r)=>{let{receiptsAPI:n,comment:a}=r;n.markAsUnread(a.id).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_unread");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),G=(0,v.nF)((e,r)=>{let{receiptsAPI:n,thread:a}=r;n.markAsRead(a.comments.map(e=>e.id)).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),H=(0,v.nF)((e,r)=>{let{commentReceiptsAPI:n,canvasMentionReceiptsAPI:a}=r;n.markAllAsRead().catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}}),a.markAllAsRead().catch(r=>{let n=(0,y.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})});(0,v.nF)((e,r)=>{let{reactionsApi:n,id:a,emoji:i}=r,o=n.removeReaction(a,i),s=(0,y.t)("comments.an_error_occurred_while_removing_a_comment_reaction");e.dispatch((0,E.Q)({promise:o,fallbackError:s}))}),(0,v.nF)((e,r)=>{let n=e.getState(),{reactionsApi:a,id:i,emoji:o}=r,s=a.addReaction(i,o,{prototype_mode:"prototype"===n.selectedView.view,selectedView:n.selectedView.view,quickReply:!1}),l=(0,y.t)("comments.an_error_occurred_while_adding_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))});let W=(0,v.nF)((e,r)=>{let{reactionsApi:n,id:a}=r,{emoji:i}=r,o=e.getState();(0,c.uD)(i)&&null!==(0,c.$f)()&&(i=(0,c.Kh)(i)[0]+(0,c.$f)());let s=n.toggleReaction(a,i,{prototype_mode:"prototype"===o.selectedView.view,selectedView:o.selectedView.view,quickReply:r.quickReply}),l=(0,y.t)("comments.an_error_occurred_while_toggling_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))}),K=(0,v.nF)((e,r)=>{let n;let{comment:a}=r,{key:i,id:o,uuid:l,parent_id:c}=a,d=f.Ay.del(`/api/file/${i}/comments/${o}`),u=(0,y.t)("comments.an_error_occurred_while_deleting_this_comment");e.dispatch((0,E.Q)({promise:d,fallbackError:u})),I.O.remove(o),n=l?(0,m.WB)().optimisticallyDeleteWithUUID({Comment:{[l]:null}},d):(0,m.WB)().optimisticallyDelete({Comment:{[o]:null}},d),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setDeleted",isOptimistic:!!l}),(0,p.f)(n,e.dispatch,eH({comment:{id:o,parent_id:c}}))}),Y=(0,v.nF)((e,{thread:{key:r,id:n,uuid:a},resolved:i})=>{let o=e.getState();if(i&&o.comments.activeThread?.id===n&&!o.comments.showResolved&&e.dispatch(en()),(0,d.kc)().comments_undo_resolve&&i){let i={text:(0,y.t)("comments.undo"),action:()=>{e.dispatch(Y({thread:{key:r,id:n,uuid:a},resolved:!1}))}};e.dispatch(b.F.enqueue({message:(0,y.t)("comments.comment_resolved"),type:"comment-resolved",button:i,onDismiss:()=>{}}))}I.O.remove(n);let c=i?"true":"false",u=i?(0,y.t)("comments.an_error_occurred_while_resolving_this_comment"):(0,y.t)("comments.an_error_occurred_while_unresolving_this_comment");if(a&&(0,l.L4)(n)){let n=(0,m.WB)().getIdFromUuid("Comment",a).then(n=>{let a=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});return e.dispatch((0,E.Q)({promise:a,fallbackError:u})),a});(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:i?new Date:null}}},n),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolvedUsingGetIdFromUUID",isOptimistic:!0})}else{let o=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});e.dispatch((0,E.Q)({promise:o,fallbackError:u})),a?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:i?new Date:null}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{resolvedAt:i?new Date:null}}},o),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolved",isOptimistic:!!a})}}),$=(0,v.nF)((e,{thread:{key:r,id:n,uuid:a},clientMeta:i})=>{let o;a&&(0,l.L4)(n)?(o=(0,m.WB)().getIdFromUuid("Comment",a).then(e=>f.Ay.put(`/api/file/${r}/comments/${e}`,{client_meta:i})),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMetaWithGetIdFromUUID",isOptimistic:!0})):(o=f.Ay.put(`/api/file/${r}/comments/${n}`,{client_meta:i}),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMeta",isOptimistic:!!a}));let c=(0,y.t)("comments.an_error_occurred_while_moving_this_comment");e.dispatch((0,E.Q)({promise:o,fallbackError:c})),a?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,clientMeta:{x:i.x,y:i.y,pageId:void 0===i.page_id?null:i.page_id,nodeId:void 0===i.node_id?null:i.node_id,nodeOffset:void 0===i.node_offset?null:i.node_offset,inFrame:void 0===i.in_frame?null:i.in_frame,selectionBoxAnchor:i.selection_box_anchor?i.selection_box_anchor:null,stablePath:i.stable_path?i.stable_path:null}}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{clientMeta:{x:i.x,y:i.y,pageId:void 0===i.page_id?null:i.page_id,nodeId:void 0===i.node_id?null:i.node_id,nodeOffset:void 0===i.node_offset?null:i.node_offset,inFrame:void 0===i.in_frame?null:i.in_frame,selectionBoxAnchor:i.selection_box_anchor?i.selection_box_anchor:null,stablePath:i.stable_path?i.stable_path:null}}}},o)}),j=(0,o.N)("COMMENTS_SET_COMMENT_CONTENT"),z=(0,v.nF)((e,r)=>{let n=r.comment.key;if(!n||(0,l.I)(r.messageMeta)){e.dispatch(j());return}let a=(0,l.cs)(r.messageMeta),i=f.Ay.put(`/api/file/${n}/comments/${r.comment.id}`,{message_meta:r.messageMeta,attachment_updates:(0,L.Gq)(r.attachmentUpdates),share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,pending_mentions:a}).then(({data:r})=>{r.message?.warning_message&&0!==r.message.warning_message.length&&e.dispatch(b.F.enqueue({type:"at-mention-error",message:r.message.warning_message}))}).catch(e=>{let n=e.data?.reason?.failure_info;e.data?.reason?.reason!=="comment_validation_failure"||void 0===n||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite||r.onCommentValidationFailure(n.users_without_view,n.ext_users_without_view,n.uninvitable_users,{comment:r.comment,messageMeta:r.messageMeta})}),o=(0,y.t)("comments.an_error_occurred_while_editing_this_comment");e.dispatch((0,E.Q)({promise:i,fallbackError:o}));let c=r.comment.uuid,d=(0,l.Rc)(r.messageMeta);if(c?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[c]:{uuid:c,messageMeta:d,messageMetaStylized:d}}},i):(0,m.WB)().optimisticallyUpdate({Comment:{[r.comment.id]:{messageMeta:d,messageMetaStylized:d}}},i),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"updateCommentContent",isOptimistic:!!c}),r.attachmentUpdates){let e=(0,w.LO)(r.attachmentUpdates.deleted);e?(0,m.WB)().optimisticallyDelete({CommentAttachment:e},i):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_delete"});let n=(0,w.Mu)(Object.values(r.attachmentUpdates.attachments),r.comment.key,r.comment.id);n?(0,m.WB)().optimisticallyCreate({CommentAttachment:n},i):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_create"})}e.dispatch(j())}),q=(0,v.nF)(async(e,r)=>{let n=e.dispatch(Z(r));if(!n||r.thread.isPendingFromSinatra)return;let o=r.thread.comments[0];if(!o)return;let l=e.getState(),c=o.client_meta?.node_id,d=o.client_meta?.stable_path?o.client_meta.stable_path:i.EP;!d&&c&&(d=[c]);let u=r.thread.id,m=r.source;o.client_meta?.page_id&&"communityHub"===l.selectedView.view&&(u!==l.selectedView.commentThreadId&&e.dispatch(T.$T({...l.selectedView,commentThreadId:u})),l.selectedView.commentThreadId&&(0,s.sx)("Comment Thread Read",{commentThreadId:u,threadType:"community_preview"})),await n,e.dispatch(eh({threadId:u,source:m})),r.thread.comments.some(e=>e.isUnread)&&r.receiptsAPI&&!r.thread.isPendingFromSinatra&&!r.thread.isCanvasMention&&(e.dispatch(G({receiptsAPI:r.receiptsAPI,thread:r.thread})),(0,s.sx)("Comment Thread Read",{commentThreadId:u})),"fullscreen"===l.selectedView.view&&a.glU.setActiveCommentAnchorData({stablePath:`[${d.join(",")}]`})}),Z=(0,v.nF)((e,r)=>{let n=e.getState();if(n.comments.activeThread&&n.comments.activeThread.id!==r.thread.id&&!r.skipDeactivatingExistingActiveComment&&!e.dispatch(en()))return null;n=e.getState();let{thread:i,viewport:o,config:s,navigate:l,isOrphanedComment:c}=r,{setCurrentPageIdAsync:d,pageIdForNodeId:u}=o;if(!o.getViewportInfo())return null;let m=i.comments[0];if(!m)return null;let p=m.client_meta?.node_id,h=i.page||p&&u(p)||m.client_meta?.page_id,_=[],f=n.mirror?.appModel?.currentPage,E=!1;h&&(E=f!==h,_.push(d(h).then(async()=>{E&&await (0,g.yQ)()})));let y=n.mirror.appModel.currentTool===a.NLJ.COMMENTS;if(!c&&s.repositionViewportOnCommentSelection){let e=l((0,A.E)(i,o,n.selectedView,E,y),{jump:E,jumpOnAbort:!0});e&&_.push(e)}return Promise.all(_).then()}),X=(0,v.nF)((e,r)=>{let n=e.getState();n.comments.activeThread?.id===r.thread.id?e.dispatch(en()):(r.skipDeactivatingExistingActiveComment||e.dispatch(en()),(0,l.H3)(n.comments)&&(e.dispatch(q(r)),u.atomStore.set(O.m,null)))}),J=(0,o.N)("COMMENTS_STOP_EDITING"),Q=(0,o.N)("COMMENTS_SUBMIT_REPLY"),ee=(0,v.nF)((e,r)=>{let n=e.getState(),{commentsWriteApi:i,commentsConfiguration:o}=r,s=n.comments.threads[r.threadId],[l,c]=i.reply({threadId:r.threadId,threadUuid:r.threadUuid,uuid:r.uuid,messageMeta:s.reply.messageMeta,attachments:Object.values(s.reply.attachments||{})},{forceMention:r.forceMention||!1,forceWithInvite:r.forceWithInvite||!1,prototypeMode:"prototype"===n.selectedView.view,trackingContext:r.trackingContext});(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid})),e.dispatch(ek({threadId:r.threadId,reply:{messageMeta:[],attachments:{}}})),l.then(r=>{if(!r)return;let{data:i}=r;if(i.message?.warning_message&&0!==i.message.warning_message.length&&e.dispatch(b.F.enqueue({type:"at-mention-error",message:i.message.warning_message})),i.message&&i.message.is_new_file_follower){let r=o.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(en()),r.mirror.appModel.showUi||C.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&C.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(T.j7({type:R.a}))})}}:void 0;e.dispatch(b.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:r,onDismiss:()=>{}}))}let s=i.meta;e.dispatch(eW({comment:s,userInitiated:!1})),S.ds("Comment Submitted",s.key,n,{commentId:s.id,parentCommentId:s.id,selectedView:n.selectedView.view,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),(0,d.kc)().comments_faster_saving_ux_v2&&s.id&&s.uuid&&e.dispatch(eV({commentId:s.id,commentUuid:s.uuid})),e.getState().userFlags.has_created_comment||e.dispatch(F.b({has_created_comment:!0}))}).catch(n=>{let a=n.data?.reason?.failure_info;if(n.data?.reason?.reason!=="comment_validation_failure"||void 0===a||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite){let a=(0,y.Jv)(n,(0,y.t)("comments.an_error_occurred"));e.dispatch(E.s.error(a)),e.dispatch(eN({threadId:r.threadId,resetStatusOnly:!0})),e.dispatch(ek({threadId:r.threadId,reply:s.reply}));return}r.onCommentValidationFailure(a.users_without_view,a.ext_users_without_view,a.uninvitable_users,{threadId:r.threadId,messageMeta:s.reply.messageMeta,attachments:s.reply.attachments})}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eB({commentUuid:r.uuid}))}),e.dispatch(Q(r))}),et=(0,o.N)("COMMENTS_SUBMIT_NEW_COMMENT"),er=(0,v.nF)((e,r)=>{(0,s.sx)("New comment starting dispatched action",{uuid:r.uuid});let n=e.getState(),i=(0,N.U2)(n.selectedView);if(!i)return Promise.resolve();let o=r.newCommentState||n.comments.newComment,{canvasPosition:l,nodeId:c,nodeOffset:u,inFrame:m,pageId:p,viewport:h,stablePath:_}=r.destination,g=o.selectionBoxAnchor?o.selectionBoxAnchor:void 0;e.dispatch(en({force:!0})),e.dispatch(eC({resetStatusOnly:!1}));let{messageMeta:f,attachments:E}=o;(0,s.sx)("New comment creating promise",{uuid:r.uuid});let[v,I]=r.commentsWriteApi.create({fileKey:i,messageMeta:f,attachments:Object.values(E),pageId:p,uuid:r.uuid,clientMeta:{x:l.x,y:l.y,node_id:c,node_offset:u,page_id:p,viewport:h,in_frame:m,selection_box_anchor:g,stable_path:_}},{prototypeMode:"prototype"===n.selectedView.view,onValidationError:async(r,n,a)=>{if(await B(o.messageMeta,e.dispatch,r,n,a))return{forceMentions:!0,forceWithInvite:!0};if(0!==e.getState().comments.newComment.messageMeta.length){e.dispatch(eC({resetStatusOnly:!0}));let r={text:(0,y.t)("comments.view"),action(r,n){if(e.getState().comments.activeThread?.id===L.hm&&e.getState().comments.newComment.messageMeta.length>0)return e.dispatch(eI()),e.dispatch(b.F.update({id:n,message:(0,y.t)("comments.finish_or_clear_your_active_comment_then_hit_view")})),!1;e.dispatch(eA(o)),e.dispatch(ei())}};e.dispatch(b.F.enqueue({type:`comment-creation-failure: ${I}`,error:!1,message:(0,y.t)("comments.oops_one_of_your_comments_never_posted"),onDismiss:()=>{},button:r,timeoutOverride:1/0}));return}e.dispatch(eA(o)),e.dispatch(ei()),e.dispatch(eI())}});return(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid})),e.dispatch(et(r)),v.then(m=>{if((0,s.sx)("New comment promise resolved",{uuid:r.uuid}),!m)return;let{data:h}=m;if((0,N.U2)(e.getState().selectedView)!==i)return;if(h.message?.warning_message&&0!==h.message.warning_message.length&&e.dispatch(b.F.enqueue({type:"at-mention-error",message:h.message.warning_message})),h.message&&h.message.is_new_file_follower){let n=r.commentsConfiguration.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(en({force:!0})),r.mirror.appModel.showUi||C.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&C.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(T.j7({type:R.a}))})}}:void 0;e.dispatch(b.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:n,onDismiss:()=>{}}))}let g=h.meta,f=e.getState().comments.newComment!==o;e.dispatch(eC({resetStatusOnly:f})),(0,d.kc)().comments_faster_saving_ux_v2&&g.id&&g.uuid&&e.dispatch(eV({commentId:g.id,commentUuid:g.uuid})),S.ds("Comment Submitted",i,n,{commentId:g.id,locationX:l&&l.x,locationY:l&&l.y,nodeId:c,pageId:p,nodeOffsetX:u&&u.x,nodeOffsetY:u&&u.y,selectedView:n.selectedView.view,stablePath:_,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),e.getState().userFlags.has_created_comment||e.dispatch(F.b({has_created_comment:!0})),e.dispatch((0,k.zq)({lastCreatedCommentId:g.id}))}).catch(n=>{if(e.dispatch(eC({resetStatusOnly:!0})),!(n?.data?.status>=400&&n?.data?.status<500&&n?.data?.message))return e.dispatch(b.F.enqueue({type:`comment-creation-failure: ${I}`,message:(0,y.t)("comments.couldn_t_post_your_comment"),error:!0,button:{text:(0,y.t)("comments.retry"),action(){(0,s.sx)("New comment dispatching retry submission",{uuid:r.uuid}),e.dispatch(er({...r,newCommentState:o}))}}}));{let r=(0,y.Jv)(n);if(r)return e.dispatch(b.F.enqueue({type:`comment-creation-failure: ${I}`,message:r,error:!0}))}}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eB({commentUuid:r.uuid}))})}),en=(0,v.nF)((e,r)=>{let n=e.getState(),o=r instanceof Object&&r.force,{newComment:s}=n.comments,c=n.comments.activeThread?.id,d=(0,l.Kx)(s.messageMeta)&&0===Object.keys(s.attachments).length;if(!o&&!d&&!(0,l.H3)(n.comments))return e.dispatch(eI()),!1;let u=c&&n.comments.threads[c],m=u&&(0,l.Kx)(u.reply.messageMeta)&&0===Object.keys(u.reply.attachments||{}).length;if(!o&&c&&u&&!m&&(!u.discardAttempts||u.discardAttempts<1))return e.dispatch(ev(c)),!1;let p=n.comments.editingComment;return!o&&p?(e.dispatch(ev(p.id)),!1):("fullscreen"===n.selectedView.view&&a.glU.setActiveCommentAnchorData({stablePath:i.x7}),"communityHub"===n.selectedView.view&&e.dispatch(T.$T({...n.selectedView,commentThreadId:void 0})),e.dispatch(eK()),e.dispatch(eY()),e.dispatch(eC({resetStatusOnly:!1})),n.tooltip&&e.dispatch(M.jD()),!0)}),ea=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ACTIVE"),ei=(0,v.nF)((e,r)=>{let n=e.getState();if("fullscreen"===n.selectedView.view){if(n.comments.newComment.anchorPosition){let{x:e,y:i}=n.comments.newComment.anchorPosition,o=r?.stablePath;o?a.glU.setActiveCommentAnchorData({stablePath:`[${o.join(",")}]`}):a.glU.setActiveCommentAnchorData(a.glU.getCommentAnchorDataAtPosition(e,i))}else a.glU.setActiveCommentAnchorData({stablePath:i.x7})}e.dispatch(ea(r))}),eo=(0,o.N)("COMMENTS_SET_NEW_SELECTION_BOX_ANCHOR_POSITION"),es=(0,v.nF)((e,r)=>{e.getState().userFlags.has_created_selection_comment||e.dispatch(F.b({has_created_selection_comment:!0})),e.dispatch(eo(r))}),el=(0,o.N)("COMMENTS_SET_NEW_ANCHOR_POSITION"),ec=(0,v.nF)((e,r)=>{if("fullscreen"===e.getState().selectedView.view){let{x:e,y:n}=r.anchorPosition;a.glU.setActiveCommentAnchorData(a.glU.getCommentAnchorDataAtPosition(e,n))}e.dispatch(el(r))}),ed=(0,o.N)("COMMENTS_REMOVE_HOVERED_PIN"),eu=(0,o.N)("COMMENTS_ADD_HOVERED_PIN"),em=(0,o.N)("COMMENTS_REMOVE_EMPHASIZED_PIN"),ep=(0,o.N)("COMMENTS_ADD_EMPHASIZED_PIN"),eh=(0,o.N)("COMMENTS_SET_ACTIVE"),e_=(0,v.nF)(e=>{let r=e.getState(),n=r.selectedView;"subView"in n&&("hubFile"===n.subView||"plugin"===n.subView)&&(0,s.sx)("at_mention_search_started",{comment_type:r.comments.activeThread?.id?"community_pinned":"community_general",profile_id:r.user?.community_profile_id,resource_id:"hubFile"===n.subView?n.hubFileId:n.publishedPluginId,resource_type:"hubFile"===n.subView?"hub_file":"plugin"})}),eg=(0,o.N)("COMMENTS_SET_TYPEAHEAD_POSITION_OFFSET"),ef=(0,o.N)("COMMENTS_SET_TYPEAHEAD"),eE=(0,o.N)("COMMENTS_SHOW_EMOJI_PICKER"),ey=(0,o.N)("COMMENTS_SET_ACTIVE_SORT"),eb=(0,o.N)("COMMENTS_DISCARD_COMMENT_REPLY_ATTEMPT"),ev=(0,v.nF)((e,r)=>{let n=e.getState().comments,a=n.activeThread?.id,i=a&&n.threads[a];if(i&&i.discardAttempts===l.B2){let e=(0,l._Z)(i.reply.messageMeta),r=(0,l.Kx)(i.reply.messageMeta);(0,_.Lo)("Comment discard active thread attempt","comment info",{threadId:a,messageLength:e.length,isMessageDiscardable:r}),(0,h.kF)("isMessageDiscardable",String(r)),(0,h.kF)("messageType","reply"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eb(r))}),eT=(0,o.N)("COMMENTS_DISCARD_NEW_COMMENT_ATTEMPT"),eI=(0,v.nF)(e=>{let r=e.getState().comments.newComment;if(r.discardAttempt===l.B2){let e=(0,l._Z)(r.messageMeta),n=(0,l.Kx)(r.messageMeta);(0,_.Lo)("Comment discard new comment attempt","comment info",{messageLength:e.length,isMessageDiscardable:n}),(0,h.kF)("isMessageDiscardable",String(n)),(0,h.kF)("messageType","new"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eT())}),eS=(0,o.N)("COMMENTS_SET_SHOW_ONLY_MY_COMMENTS"),ew=(0,o.N)("COMMENTS_SET_SHOW_RESOLVED_COMMENTS"),eA=(0,o.N)("COMMENTS_REVERT_NEW_COMMENT"),eC=(0,o.N)("COMMENTS_RESET_NEW_COMMENT"),eN=(0,o.N)("COMMENTS_RESET_THREAD"),eL=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ATTACHMENT"),eO=(0,o.N)("COMMENTS_SET_NEW_COMMENT_MESSAGE"),eR=(0,o.N)("COMMENTS_SET_NEW_COMMENT"),eP=(0,o.N)("COMMENTS_SET_REPLY_ATTACHMENT"),eD=(0,o.N)("COMMENTS_SET_REPLY_MESSAGE"),ek=(0,o.N)("COMMENTS_SET_REPLY"),eM=(0,o.N)("COMMENTS_SET_EDITING_ATTACHMENT"),eF=(0,o.N)("COMMENTS_SET_EDITING"),ex=(0,o.N)("COMMENTS_SET_ACTIVE_DRAG_TARGET"),eU=(0,o.N)("COMMENTS_SET_SAVING"),eB=(0,o.N)("COMMENTS_CLEAR_SAVING"),eV=(0,o.N)("COMMENTS_STORE_SERVER_ID_FOR_LG_PENDING_UUID"),eG=(0,o.N)("COMMENTS_CLEAR_LG_PENDING_UUID"),eH=(0,o.N)("COMMENTS_DEL"),eW=(0,v.nF)((e,r)=>{let n=e.dispatch,a=e.getState(),{comment:i}=r;if(a.user&&a.user.id===i.user_id&&!r.userInitiated){if(i.parent_id){let e=a.comments.threads[i.parent_id];if(e&&e.state===L.EB.BUSY){let a=!function(e,r){if(!e)return!r;if(!r)return!e;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++){let a=e[n],i=r[n],o=new Set(Object.keys(a)),s=Object.keys(i);if(o.size!==s.length||!s.every(e=>!!o.has(e)&&a[e]===i[e]))return!1}return!0}(r.comment.message_meta,e.reply.messageMeta);n(eN({threadId:i.parent_id,resetStatusOnly:a}))}}else{let e=a.comments.newComment;e&&e.state===L.EB.BUSY&&n(en({force:!0})),n(eC({resetStatusOnly:!1}))}}}),eK=(0,o.N)("COMMENTS_RESET"),eY=(0,o.N)("COMMENTS_RESET_ACTIVE_ID")},705011:(e,r,n)=>{n.d(r,{Ad:()=>F,Ch:()=>O,Dg:()=>D,Hx:()=>H,LO:()=>K,RS:()=>k,Rx:()=>M,X2:()=>er,Zj:()=>B,_8:()=>Y,_F:()=>G,aP:()=>X,cO:()=>x,cR:()=>P,d6:()=>en,dL:()=>j,dv:()=>Q,e6:()=>ee,eg:()=>et,gT:()=>z,h1:()=>Z,ig:()=>V,oB:()=>J,qo:()=>$,r1:()=>U,rO:()=>R,vQ:()=>q});var a=n(201863),i=n(777535),o=n(298359),s=n(697737),l=n(719334),c=n(76265),d=n(956292),u=n(553362),m=n(864986),p=n(486592),h=n(534294),_=n(731556),g=n(47795),f=n(719971),E=n(843398),y=n(137209),b=n(12555),v=n(968525),T=n(305216),I=n(771491),S=n(682403),w=n(804197),A=n(492366),C=n(496203),N=n(881088),L=n(720327);let O=(0,a.N)("COMMUNITY_HUB_SHOW_ADMIN_PROFILE_BANNER"),R=(0,a.N)("COMMUNITY_HUB_HIDE_ADMIN_PROFILE_BANNER"),P=d.cR,D=(0,h.nF)((e,r)=>{let n;let{user:a,authedUsers:o,orgUsersByOrgId:s,authedTeamsById:l,teamAdminRolesForAuthedUsers:d,authedProfilesById:m,selectedView:h,currentUserOrgId:_}=e.getState(),E=r.profileId?m[r.profileId]:null,y=r.view?r.view:{view:"communityHub",subView:"searchAndBrowse",data:(0,p.Gu)()};if(!E){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_not_found"),type:"COMMUNITY_PROFILE_ERROR"})),e.dispatch(g.$T(y));return}let b=_;if(E.org_id){b=E.org_id;let e=s[E.org_id];n=Object.keys(o.byId).find(r=>{let n=e[r];if(n&&(0,T.Ay)(n.permission)>=C.jh.ADMIN)return n.user_id})}else E.team_id?(b=l[E.team_id]?.org_id||null,n=Object.keys(o.byId).find(e=>{let r=d[e];return r?.find(e=>e.team_id===E.team_id)?.user_id})):n=E.primary_user_id===a?.id?a?.id:o.orderedIds.find(e=>E.associated_users?.find(r=>r.user_id===e)?.user_id);if((0,S.Il)(E.id),(0,i.sx)("Community profile IA switched",{profileId:E.id,view:h.view}),e.dispatch(P(E)),e.dispatch(O()),n&&(n!==a?.id||_!==b)){let r={userId:n,orgId:b};e.dispatch(f._l({workspace:r,view:y}))}else e.dispatch(g.$T(y))}),k=(0,a.N)("COMMUNITY_HUB_ADD_FOLLOW"),M=(0,a.N)("COMMUNITY_HUB_DELETE_FOLLOW"),F=(0,a.N)("COMMUNITY_HUB_SAVE_PAGE_STATE"),x=(0,a.N)("COMMUNITY_HUB_RESET_COMMENT_STATE"),U=(0,a.N)("COMMUNITY_HUB_SET_COMMENTS"),B=(0,a.N)("COMMUNITY_HUB_SET_COMMENTS_ACTIVE_FEED_TYPE"),V=(0,a.N)("COMMUNITY_HUB_SET_COMMENT_REPLIES"),G=(0,a.N)("COMMUNITY_HUB_FLUSH_NEW_COMMENTS_QUEUE"),H=(0,a.N)("COMMENTS_INSERT_COMMUNITY_MENTION"),W=(e,r)=>{let n=/\?/.test(e)?"&":"?";return e+`${n}${r}`};(0,h.nF)((e,r)=>{if(!(0,o.u9)(r))return;let n=`/api/${(0,v.n)(r.resourceType)}/${r.resourceId}/comments`;r.selectedCommentId&&r.selectedCommentId!==w.hm&&!r.pagination?.selected_comment&&(n=W(n,`selected_comment_id=${r.selectedCommentId}`)),r.activeFeedType===A.Qv.ME&&(n=W(n,`feed_type=${r.activeFeedType}`),void 0===r.numCommentsForResource&&(n=W(n,"include_total_count=true"))),(0,o.En)(n,r.pageSizeOverride??o.vs,r,o.AS).then(e=>{let n=!e.selected_comment||e.comments.find(r=>r.id===e.selected_comment?.id),{commentsById:a,authorsById:i,feed:o}=(0,v.HR)(n?e.comments:[...e.comments,e.selected_comment]),s=e.pagination;e.selected_comment&&(s.selected_comment=e.selected_comment);let l={...e,pagination:e.pagination,totalNumberOfComments:e.total_count,commentsById:a,authorsById:i,feed:o,activeFeedType:r.activeFeedType,type:r.resourceType,id:r.resourceId,mentionedProfiles:e.mentioned_profiles};e.selected_comment&&(l.selectedCommentId=e.selected_comment.id),r.onSuccess&&r.onSuccess(l)}).catch(n=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_fetch_comments"))),r.onError&&r.onError()})});let K=(0,a.N)("COMMUNITY_HUB_RESTRICT_PROFILE"),Y=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:a})=>{s.Ay.post(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{a&&a()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_restrict_profile_error",{error:n}),type:"RESTRICT_PROFILE_ERROR"}))}),e.dispatch(K({profileId:r,blockedProfileId:n,onSuccess:a}))}),$=(0,a.N)("COMMUNITY_HUB_UNRESTRICT_PROFILE"),j=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:a})=>{s.Ay.del(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{a&&a()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_unrestrict_profile_error",{error:n}),type:"UNRESTRICT_PROFILE_ERROR"}))}),e.dispatch($({profileId:r,blockedProfileId:n,onSuccess:a}))}),z=(0,a.N)("COMMUNITY_HUB_SET_COMMENT_STATE");(0,h.nF)((e,r)=>{let{id:n,type:a}=r;(n!==e.getState().communityHub.comments.id||a!==e.getState().communityHub.comments.type)&&e.dispatch(x()),e.dispatch(U(r)),e.dispatch(z(r))}),(0,h.nF)((e,{profileId:r,on404Redirect:n},{loadingKey:a})=>{let i=N.s.getProfile({profileId:r});(0,I.N)(i,e,a),i.then(({data:r})=>{e.dispatch(L.Oo(r.meta.profile)),e.dispatch(g.$T(e.getState().selectedView))}).catch(r=>(404===r.status&&n?n():e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information"))),null))}),(0,h.nF)((e,{handle:r,on404Redirect:n},{loadingKey:a})=>{let i=e.getState().currentUserOrgId,o=N.s.getHandle({currentOrgId:i||void 0,handle:r});(0,I.N)(o,e,a),o.then(({data:r})=>{e.dispatch(L.Oo(r.meta.profile))}).catch(({data:r})=>{r?.status===404&&n&&n(),e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information")))})},({handle:e})=>`COMMUNITY_HUB_GET_PROFILE_BY_HANDLE_${e}`);let q=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:a,description:i,location:o,profileHandle:d,onSuccess:u,userId:m,teamId:p,orgId:h}=r,_=s.Ay.post("/api/profile",{website:a,description:i,location:o,profile_handle:d,primary_user_id:m,team_id:p,org_id:h});(0,I.N)(_,e,n),_.then(({data:r})=>{e.dispatch(L.HZ(r.meta)),e.dispatch(L.Oo(r.meta));let{currentUserOrgId:n,orgById:a}=e.getState(),i=n&&a[n];n&&i&&n===h&&e.dispatch(y.F6({id:n,community_profile_handle:r.meta.profile_handle,community_profile_id:r.meta.id})),u&&u(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({userId:e})=>`COMMUNITY_HUB_CREATE_PROFILE_${e}`),Z=(0,h.nF)((e,r)=>{s.Ay.post("/api/profile/generate_handle").then(({data:n})=>{e.dispatch(L.HZ(n.meta)),e.dispatch(L.Oo(n.meta)),r.onSuccess&&r.onSuccess(e)}).catch(({data:r})=>{e.dispatch(l.s.error(r.message))})}),X=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:a,twitter:i,instagram:o,pronouns:d,description:p,location:h,profileId:_,profileHandle:f,onSuccess:E}=r,b=e.getState().communityHub.currentProfile;if(_===b?.id&&Object.entries(r).every(([e,r])=>void 0===r||e in b&&b[e]===r))return;let T=i?.trim(),S=o?.trim();if(T&&b?.twitter!==T&&!m.HD.test(T)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_twitter_handle_is_not_valid",{handle:T}),error:!0}));return}if(S&&b?.instagram!==S&&!m.Co.test(S)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_instagram_handle_is_not_valid",{handle:S}),error:!0}));return}let w=s.Ay.put(`/api/profile/${_}`,{website:a,twitter:T,instagram:S,pronouns:d,description:p,location:h,profile_handle:f});(0,I.N)(w,e,n);let A=e.getState().user?.community_profile_handle;w.then(({data:n})=>{let{communityHub:a,currentUserOrgId:i,orgById:o}=e.getState();a.currentProfile?.id===n.meta.id&&e.dispatch(L.Oo(n.meta));let s=o[i];if(s&&"string"==typeof s.id&&s.id===n.meta.org_id&&e.dispatch(y.F6({id:n.meta.org_id,community_profile_handle:n.meta.profile_handle})),f){let r=e.getState().selectedView;(0,v.Cj)(r)&&r?.handle===A&&e.dispatch(g.$T({view:"communityHub",subView:"handle",handle:f})),n.meta.primary_user_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_profile_handle_was_set_to_profile_handle",{profileHandle:f}),type:"profile-handle"})):n.meta.team_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_team_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"team-handle"})):n.meta.org_id&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_organization_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"org-handle"}))}["twitter","location","instagram","website","description"].forEach(a=>{if(a in n.meta&&a in r){let r={twitter:(0,c.t)("community.actions.your_twitter_handle_was_updated"),location:(0,c.t)("community.actions.your_location_was_updated"),instagram:(0,c.t)("community.actions.your_instagram_handle_was_updated"),website:(0,c.t)("community.actions.your_website_url_was_updated"),description:(0,c.t)("community.actions.your_description_was_updated")};e.dispatch(u.F.enqueue({message:r[a],type:"profile-updated"}))}}),E&&E(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({profileId:e})=>`COMMUNITY_HUB_UPDATE_PROFILE_${e}`),J=(0,h.nF)((e,r,{loadingKey:n})=>{let{profileId:a,handle:i}=r;s.Ay.del(`/api/profile/${a}`).then(()=>{e.dispatch(L.cr(i));let{currentUserOrgId:r,orgById:n}=e.getState(),o=r&&n[r];r&&o&&o.community_profile_id===a&&e.dispatch(y.F6({id:r,community_profile_handle:void 0,community_profile_id:void 0})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_deleted")}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_delete_profile_please_try_again_later")))})});(0,h.nF)(async(e,{file:r,profileId:n,onSuccessCallback:a},{loadingKey:i})=>{let o=(0,b.c)(r).then(e=>(function(e,r,n,a){return r?s.Ay.post(e).then(({data:e})=>e.meta).then(async({cover_image_path:e,signature:r,fields:n})=>{let i=new FormData;return n&&Object.entries(n).forEach(([e,r])=>i.append(e,r)),i.set("content-type",a.type),i.append("file",a),await fetch(e,{method:"POST",body:i}),{cover_image_path:e,signature:r}}):Promise.resolve({cover_image_path:"",signature:""})})(`/api/profile/${n}/upload`,e,r.type,r));(0,I.N)(o,e,i),await o.then(({signature:e})=>s.Ay.put(`/api/profile/${n}`,{signature:e})).then(({data:r})=>{e.dispatch(L.Oo(r.meta)),a()}).catch(r=>{e.dispatch(l.s.error(r?(0,c.t)("community.actions.an_error_occurred_with_error",{error:r}):(0,c.t)("community.actions.an_error_occurred")))})},({profileId:e})=>`COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE_${e}`);let Q=(0,a.N)("COMMUNTY_HUB_FOLLOW_ENTITY"),ee=(0,h.nF)(async(e,r,{loadingKey:n})=>{let a=s.Ay.put("/api/follows",{followed_profile_id:r});(0,I.N)(a,e,n),await a.then(({data:n})=>{e.getState().user?.community_profile_id&&(e.dispatch(k({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.followed_profile_name",{profileName:n.meta.followed_profile.name}),type:"COMMUNITY_HUB_FOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unable_to_follow_this_profile_profile_name",{profileName:n}),type:"COMMUNITY_HUB_FOLLOW_FAILED",error:!0}))}),e.dispatch(Q(r))},e=>`COMMUNTY_HUB_FOLLOW_ENTITY_${e}`),et=(0,a.N)("COMMUNTY_HUB_UNFOLLOW_ENTITY"),er=(0,h.nF)((e,r,{loadingKey:n})=>{let a=s.Ay.del("/api/follows",{followed_profile_id:r});(0,I.N)(a,e,n),a.then(()=>{e.getState().user?.community_profile_id&&(e.dispatch(M({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unfollowed_profile"),type:"COMMUNITY_HUB_UNFOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:`Unable to unfollow this profile: ${n}`,type:"COMMUNITY_HUB_UNFOLLOW_FAILED",error:!0}))}),e.dispatch(et(r))},e=>`COMMUNTY_HUB_UNFOLLOW_ENTITY_${e}`);function en(e){return{updateStatus:(0,a.N)(`${e}_UPDATE_PUBLISH_STATUS`),updateMetadata:(0,a.N)(`${e}_UPDATE_PUBLISH_METADATA`),clearMetadata:(0,a.N)(`${e}_CLEAR_PUBLISH_METADATA`),clearMetadataAndStatus:(0,a.N)(`${e}_CLEAR_PUBLISHING`)}}(0,h.nF)(async(e,r)=>{let n;let{thread:a,resolved:i}=r,o=e.getState();i&&o.comments.activeThread?.id===a.id&&!o.comments.showResolved&&e.dispatch(_.UU()),n=i?s.Ay.put(`/api/community_comments/${a.id}/resolve`):s.Ay.put(`/api/community_comments/${a.id}/unresolve`),await n.then(({data:r})=>{e.dispatch(E.kE({comment:{id:a.id,resolved_at:r.meta.resolved_at}}))}).catch(r=>{e.dispatch(u.F.enqueue({error:!0,message:i?(0,c.t)("community.actions.failed_to_resolve_comment"):(0,c.t)("community.actions.failed_to_unresolve_comment")}))})})},632225:(e,r,n)=>{n.d(r,{M2:()=>h,Sp:()=>m,k3:()=>p});var a=n(201863),i=n(653798),o=n(437068),s=n(419378),l=n(534294),c=n(771491),d=n(56976);(0,l.nF)((e,r)=>{let{payments:n,source:a}=r,l=e.getState().user?.id;if(!l||!n)return;let c=n.filter(s.QQ),d=`${u}_${l}`,m=o.TQ()?.getItem(d);if(m){let e=JSON.parse(m);if(Array.isArray(e)){let r=new Set(c.map(e=>e.monetized_resource_metadata_id)),o=e.map(e=>e.monetized_resource_metadata_id).filter(e=>!r.has(e));o.length&&(0,i.x1)("community","[ActivePayments] mismatch detected",{source:a,userId:l,revoked:o,previousPayments:e,currentPayments:n},{reportAsSentryError:!0})}}let p=JSON.stringify(c);o.TQ()?.setItem(d,p)});let u="debug_succeeded_payments";(0,l.nF)((e,r,{loadingKey:n})=>{let a=d.C.getBuyerActivePayments();(0,c.N)(a,e,n),a.then(({data:r})=>{e.dispatch(h(r.meta))}).catch(()=>{})});let m=(0,a.N)("M10N_DEL_ACTIVE_USER_PAYMENT"),p=(0,a.N)("M10N_REALTIME_ACTIVE_USER_PAYMENT"),h=(0,a.N)("M10N_SET_ACTIVE_USER_PAYMENTS")},730676:(e,r,n)=>{n.d(r,{wJ:()=>p});var a=n(201863),i=n(653798),o=n(957755),s=n(341042),l=n(534294),c=n(968525),d=n(771491),u=n(492366),m=n(249099);let p=(0,a.N)("COMMUNITY_SET_SHELVES_FOR_SHELF_TYPE");function h(e,r){let n=[],a=[],i=[];r.forEach(e=>{let r=(0,c.x1)(e);r===u.Ug.HUB_FILE?n.push(e):r===u.Ug.PLUGIN?a.push(e):r===u.Ug.WIDGET&&i.push(e)}),e((0,o.Sb)({hubFiles:n,src:"fetchShelvesForShelfType"})),e((0,s.Qi)({publishedPlugins:[...a,...i],src:"fetchShelvesForShelfType"}))}(0,l.nF)((e,{shelfType:r,limit:n},{loadingKey:a})=>{let o={shelfType:r,limitShelfContent:n},s=m.A.getCommunityShelves(o);(0,d.N)(s,e,a),s.then(({data:n})=>{let a=n.meta;a.forEach(r=>h(e.dispatch,r.shelf_content)),e.dispatch(p({shelfType:r,shelves:a}))}).catch(e=>{(0,i.x1)("collections","error fetching collections",{...o,error:e.toString()})})},({shelfType:e,limit:r})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_${e}_${r}`),(0,l.nF)((e,{shelfType:r,filterLabel:n,limit:a},{loadingKey:i})=>{let o=m.A.getCommunityShelves({shelfType:r,filterLabel:n,limitShelfContent:a});(0,d.N)(o,e,i),o.then(({data:n})=>{let a=n.meta;a.forEach(r=>h(e.dispatch,r.shelf_content)),e.dispatch(p({shelfType:r,shelves:a}))})},({shelfType:e,filterLabel:r,limit:n})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL_${e}_${r}_${n}`)},196794:(e,r,n)=>{n.d(r,{Af:()=>eu,D3:()=>w.D3,FO:()=>em,L1:()=>w.L1,N4:()=>eN,QA:()=>ep,Ri:()=>ed,Sb:()=>w.Sb,VS:()=>eT,ax:()=>eL,bk:()=>ew,eq:()=>e_,i9:()=>eA,oO:()=>eS,p7:()=>ef,rH:()=>eb,ts:()=>ey,wO:()=>ev,yh:()=>eO});var a=n(217950),i=n(805014),o=n(33011),s=n(201863),l=n(777535),c=n(952979),d=n(163773),u=n(365257),m=n(841962),p=n(875877),h=n(657548),_=n(139879),g=n(747484),f=n(550479),E=n(653798),y=n(697737),b=n(544920),v=n(719334),T=n(76265),I=n(553362),S=n(456891),w=n(957755),A=n(566095),C=n(534294),N=n(705011),L=n(206908),O=n(47795),R=n(587626),P=n(736041),D=n(402511),k=n(628220),M=n(194338),F=n(91247),x=n(85867),U=n(190500),B=n(968525),V=n(468847),G=n(853770),H=n(178380),W=n(69441),K=n(314540),Y=n(841924),$=n(832617),j=n(771491),z=n(6253),q=n(77383),Z=n(689102),X=n(754430),J=n(567095),Q=n(839644),ee=n(324225),et=n(56976),er=n(483579),en=n(31314),ea=n(534173),ei=n(738625),eo=n(45531),es=n(842814),el=n(720327);let ec=n(738739).ZS,ed=(0,s.N)("PUT_FIG_FILE_PUBLISHED_AS_HUB_FILE"),eu=(0,s.N)("UPDATE_HUB_FILE_PAGE_TITILE"),em=(0,s.N)("DEL_FIG_FILE_PUBLISHED_AS_HUB_FILE"),ep=(0,s.N)("PUT_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),eh=(0,s.N)("DEL_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),e_=(0,s.N)("HUB_FILE_PUT_HUB_FILE_REMIX"),eg=e=>{let r=(0,T.t)("community.actions.log_in_or_create_an_account_to_duplicate_this_file");if(g.rr){window.location.href="/login";return}e.dispatch(b.Ts({origin})),e.dispatch(P.to({type:ea.x,data:{headerText:r}}))},ef=(0,C.nF)((e,r,{loadingKey:n})=>{let a=e.getState();if(!a.user){eg(e);return}let i={headers:{...y.Ay.defaults.headers,"X-Figma-User-ID":r.workspace.userId}},o=y.Ay.post(`/api/hub_files/v2/${r.hubFileId}/copy`,{org_id:r.workspace.orgId},i);(0,j.N)(o,e,n),o.then(({data:n})=>{let i=n.meta;(0,l.sx)(F.M5.HUB_FILE_DUPLICATED,{hubFileId:r.hubFileId,figFileKey:i.key,searchSessionId:(0,S.w)(a)}),"whiteboard"===i.editor_type&&e.dispatch(k.Hx({storeInRecentsKey:J.$A.FigJam,id:r.hubFileId,type:J.vt.CommunityResource}));let o=(0,W.to)(i);o=(0,c.dR)(o,{[H.pt.KEY]:H.pt.VALUE,fuid:r.workspace.userId}),d.Ay.redirect(o,g.rr?void 0:"_blank"),e.dispatch(O.oB())}).catch(r=>{e.dispatch(I.F.enqueue({error:!0,message:(0,T.t)("community.actions.failed_to_duplicate_file_error",{error:(0,T.Jv)(r,(0,T.t)("community.actions.try_again_or_contact_support_figma_com"))})}))})},({hubFileId:e})=>`DUPLICATE_HUB_FILE_${e}`),eE=(0,C.nF)((e,r)=>{let{canRetry:n=!0}=r,a=e.getState(),i=a.currentUserOrgId,o=(0,m.kc)().ps_benchmark?a.currentTeamId:null;if(r.folderId){let n=a.folders[r.folderId]?.team_id,i=n?a.teams[n]:null,o=(0,x.N)(a.hubFiles[r.hubFileId].viewer_mode),s=function(e){switch(e){case K._Y.WHITEBOARD:return{type:Z.sK.ADD_FIGJAM_FILE};case K._Y.SLIDES:return{type:Z.sK.ADD_SLIDES_FILE};default:return{type:Z.sK.ADD_DESIGN_FILE}}}(o);if(i&&!(0,Z.rR)(i,s)){e.dispatch(P.to({type:ei.Y,data:{teamId:i.id,createInDrafts:()=>{e.dispatch(eE({...r,folderId:void 0}))},teamName:i.name,editorType:o,dispatch:e.dispatch,action:ee.ZN.CREATE_FILE_FROM_TEMPLATE}}));return}}return y.Ay.post(`/api/hub_files/template/${r.hubFileId}/copy`,{folder_id:r.folderId,org_id:i,team_id:o||void 0}).then(({data:n})=>{let i=n.meta;(0,U.f5)("File Created",i,{selectedView:a.selectedView},{source:r.source}),r.callback&&r.callback(i?.key),"whiteboard"===i.editor_type&&e.dispatch(k.Hx({storeInRecentsKey:J.$A.FigJam,id:r.hubFileId,type:J.vt.CommunityResource}));let o=(0,W.to)(i);d.Ay.redirect(o,r.openInNewTab&&!g.rr?"_blank":void 0)}).catch(a=>{let i={error:!0,message:(0,T.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:r.hubFileName})};n&&(i.button={text:(0,T.t)("community.actions.retry"),action:()=>e.dispatch(eE({...r,canRetry:!1}))}),e.dispatch(I.F.enqueue(i))})}),ey=(0,C.nF)(async(e,{hubFileId:r,callback:n},{loadingKey:a})=>{let i=null,o=Promise.resolve(null),s=en.H.getVersions({id:r});o=s;try{i=(await s).data.meta}catch(e){return}(0,j.N)(o,e,a);let{fig_file_metadata:l,remixed_from_metadata:c,...d}=i,u=d.related_content,m=d.remixed_to_metadata,p=[...u?u.content:m||[],d];c&&p.push(c),e.dispatch((0,w.Sb)({hubFiles:p,src:"getHubFileVersions"})),l&&(e.dispatch(ed({hubFileId:d.id,fileKey:l.key})),l.file&&e.dispatch(L.yJ({file:l.file})),l.roles&&e.dispatch(M.uo({roles:l.roles}))),e.dispatch(eu({hubFileId:d.id}));let h=new Set(m?.map(e=>e.id));e.dispatch(e_({hubFileId:d.id,from:c?c.id:null,to:h})),n?.(d)},({hubFileId:e})=>`HUB_FILE_GET_VERSIONS_${e}`),eb=(0,C.nF)(async(e,{fileKey:r})=>{(0,m.Ay)().user_data&&await er.D.getHubFileMetadata({fileKey:r}).then(({data:n})=>{let a=n.meta.published_as;a?.id?e.dispatch(ed({hubFileId:a.id,fileKey:r})):e.dispatch(em({fileKey:r}));let i=n.meta.remixed_from_metadata,o=n.meta.is_preview;i?.id?e.dispatch(ep({hubFileId:i.id,fileKey:r,isPreview:!!o})):e.dispatch(eh({fileKey:r}));let s=[a,i].filter(e=>!!e);s.length>0&&e.dispatch((0,w.Sb)({hubFiles:s,src:"getHubFileMetadata"}))}).then(()=>{(0,m.kc)().ce_new_missing_fonts_logging&&(0,G.DI)()}).catch(e=>{console.error(e)}).finally(()=>{p.atomStore.set(u.x,!0)})}),ev=(0,N.d6)("HUB_FILE"),{updateMetadata:eT,updateStatus:eI,clearMetadataAndStatus:eS,clearMetadata:ew}=ev,eA=(0,C.nF)((e,r)=>{let n=[],a=r.viewerMode===K.y4.SLIDE_TEMPLATE;if(a){n=(0,q.AC)(e.getState());let a=(0,q.x6)(e.getState()),i=!!r.hubFileId&&n.length>0&&(0,$.aB)(Object.values(a),new Set(n));if(!r.hubFileId&&0===n.length||i){(0,es.Dl)(e.dispatch);return}p.atomStore.set(eo.UM,{state:eo.F4.PUBLISH_HUB_FILE_INITIATED})}e.dispatch(eI({id:r.fileKey,status:{code:X.aP.UPLOADING}})),eC(e,r).then(({hubFile:n,actingProfile:a,profileCreated:i})=>(e.dispatch((0,w.Sb)({hubFiles:[n],src:"createHubFile"})),e.dispatch(ed({hubFileId:n.id,fileKey:r.fileKey})),i&&(a.profile_created=i,e.dispatch(el.HZ(a))),e.dispatch(el.Oo(a)),e.dispatch(eI({id:r.fileKey,status:{code:X.aP.SUCCESS}})),r.suggestedCategory&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:n.id,categoryId:n.category_id,suggestedCategory:r.suggestedCategory},{forwardToDatadog:!0}),{hubFile:n})).then(({hubFile:n})=>{if(!a||null===ec)return;let s=(0,q.AC)(e.getState()),l=Object.values((0,q.x6)(e.getState())).map(e=>e.node_id),c=i.Ez5.slideThemeLibBindings().renameThemeForTemplatePublish(r.name)?l:s;if(c.length>0){n.library_key&&i.Ez5?.canvasGrid().updateSourceLibraryKey(o.l(n.library_key));let{onPublishSuccess:r,onPublishProgress:a,onPublishError:s}=(0,R.u)(K._Y.SLIDES);requestAnimationFrame(()=>{e.dispatch(ec({savepointDescription:"Community slide template publish",itemsToPublish:new Set(c),hubFileId:n.id,onPublishSuccess:r,onPublishProgress:a,onPublishError:s}))})}else p.atomStore.set(eo.UM,{state:eo.F4.PUBLISH_HUB_FILE_COMPLETED})}).catch(n=>{a&&p.atomStore.set(eo.UM,{state:eo.F4.PUBLISH_HUB_FILE_ERRORED}),e.dispatch(I.F.enqueue({message:n.message,type:"hub-file-created-error",error:!0})),e.dispatch(eI({id:r.fileKey,status:{code:X.aP.FAILURE,error:n.message}}))})});async function eC(e,r){let n;let{fileKey:o,name:s,description:l,categoryId:c,publisherIds:d,tags:u,tagsV2:m,creatorPolicy:p,thumbnailBuffer:h,viewerMode:_,scalingMode:g,authorOrgId:E,authorTeamId:y,hasCustomUploadedThumbnail:b,validPrototype:v,commentsSetting:I,agreedToTos:S,isPaid:w,price:A,supportContact:C,carouselMedia:N,customCarouselThumbnail:L}=r;if(E&&y)throw Error((0,T.t)("community.actions.attempting_to_set_both_author_org_id_and_author_team_id_while_publishing"));if(_===K.y4.PROTOTYPE&&i.X3B.firstPagePrototypeStatus()!==i.bOM.VALID)throw Error((0,T.t)("community.actions.attempting_to_publish_an_invalid_prototype_as_a_prototype"));let O=await (0,z.m)(o,"Published to Community hub",l,e.dispatch).then(e=>e.id).catch(e=>{throw(0,f.$D)(a.e.COMMUNITY,e),Error(e.data?.message||(0,T.t)("community.actions.could_not_connect_to_the_server"))});try{n=await (0,V.R1)(h,N||[],O)}catch(e){throw(0,f.$D)(a.e.COMMUNITY,e),Error((0,T.t)("community.actions.error_uploading_images_e"))}let R=(0,V.Z2)(n?.carousel_images||[],L),P={file_version_id:O,name:s,description:l,tags:u,tags_v2:m,category_id:c,creator_policy:p,signature:n?.cover_image.signature,cover_image_uploaded:n?.cover_image.cover_image_uploaded,publisher_ids:d,viewer_mode:_,scaling_mode:g,author_org_id:E,author_team_id:y,has_custom_uploaded_thumbnail:b,valid_prototype:v,comments_setting:I,agreed_to_tos:S,is_paid:w,price:A,support_contact:C,carousel_images:n?.carousel_images,cover_image_carousel_image:n?.carousel_images[R]};try{let e=await en.H.publishHubFile(P);return{hubFile:e.data.meta.hub_file,actingProfile:e.data.meta.acting_profile,profileCreated:e.data.meta.profile_created}}catch(e){throw(0,f.$D)(a.e.COMMUNITY,e),Error((0,T.Jv)(e,(0,T.t)("community.actions.could_not_publish_hub_file",{error:e.message})))}}let eN=(0,C.nF)(async(e,{payload:r,onSuccess:n})=>{let i;let{hubFileId:o,name:s,description:c,categoryId:d,suggestedCategory:u,creatorPolicy:m,publisherIds:p,tags:h,tagsV2:_,viewerMode:g,scalingMode:E,commentsSetting:y,price:b,supportContact:S,carouselMedia:A,customCarouselThumbnail:C,hasCustomUploadedThumbnail:N,thumbnailBuffer:L}=r;try{i=await (0,V.R1)(L,A||[],void 0,o)}catch(r){throw(0,f.$D)(a.e.COMMUNITY,r),e.dispatch(I.F.enqueue({message:(0,T.t)("community.actions.error_uploading_images_publish_update_from_editor"),type:"hub-file-updated-error",error:!0})),Error(r)}let O=(0,V.Z2)(i?.carousel_images||[],C),R={name:s,description:c,category_id:d,creator_policy:m,publisher_ids:p,tags:h,tags_v2:_,viewer_mode:g,scaling_mode:E,comments_setting:y,price:b,support_contact:S,carousel_images:i?.carousel_images,cover_image_carousel_image:i?.carousel_images[O],has_custom_uploaded_thumbnail:N,cover_image_uploaded:i?.cover_image.cover_image_uploaded,signature:i?.cover_image.signature};try{let r=(await en.H.updateHubFile(o,R)).data.meta;e.dispatch((0,w.Sb)({hubFiles:[r],src:"updateHubFile"})),u&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:r.id,categoryId:r.category_id,suggestedCategory:u},{forwardToDatadog:!0}),n?.(r)}catch(n){let r=(0,T.Jv)(n,(0,T.t)("community.actions.an_error_occurred_while_updating_please_refresh_and_try_again"));throw e.dispatch(v.s.error(r)),(0,f.$D)(a.e.COMMUNITY,n),Error(`Error updating file ${n}`)}}),eL=(0,C.nF)((e,{hubFileId:r,redirectLink:n,onSuccess:i,onError:o})=>{y.Ay.del(`/api/hub_files/${r}`).then(({data:r})=>{let n=r.meta;e.dispatch((0,w.Sb)({hubFiles:[n],src:"unpublishHubFile"}))}).then(()=>{n&&d.Ay.redirect(n),i?.()}).catch(e=>{(0,f.$D)(a.e.COMMUNITY,e),console.error(Error(`Error unpublishing file ${e}`)),o?.()})}),eO=(0,C.MM)("OPTIMISTIC_DUPLICATE_HUB_FILE",(e,{hubFileId:r,viewContext:n},{optimistId:a})=>{y.Ay.post(`/api/hub_files/v2/${r}/copy`).then(({data:i})=>{e.dispatch(D.c(a));let o=i.meta,s=(0,W.to)(o);s=(0,c.dR)(s,{[H.pt.KEY]:H.pt.VALUE}),d.Ay.redirect(s,g.rr?void 0:"_blank"),(0,l.sx)(F.M5.HUB_FILE_DUPLICATED,{hubFileId:r,figFileKey:o.key,viewContext:n,searchSessionId:(0,S.w)(e.getState())})}).catch(r=>{e.dispatch(D.r(a)),e.dispatch(I.F.enqueue({message:(0,T.t)("community.actions.unable_to_duplicate",{error:(0,T.Jv)(r,r.data.message)}),type:"HUB_FILE_DUPLICATE_FAILED",error:!0}))})}),eR=Y.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,A.m)({apiResourceType:"file",id:e}),e=>{e.like_count+=1}),en.H.likeHubFile({id:e})));(0,C.nF)((e,{hubFileId:r},{loadingKey:n})=>{let a=(0,_.Jl)(eR)({id:r});(0,j.N)(a,e,n),a.catch(r=>{e.dispatch(I.F.enqueue({message:(0,T.t)("community.actions.unable_to_like_this_file_error",{error:(0,T.Jv)(r,r.data?.message)}),type:"HUB_FILE_LIKE_FAILED",error:!0}))});let i=e.getState().user,o=i&&(0,B.sD)(i,e.getState().authedProfilesById);i?.id&&o&&(0,h.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${o.id}`]:{pluginId:null,hubFileId:r,profileId:o.id,resourceId:null,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},a)},e=>`LIKE_HUB_FILE_${e}`);let eP=Y.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,A.m)({apiResourceType:"file",id:e}),e=>{e.like_count-=1}),en.H.unlikeHubFile({id:e})));(0,C.nF)((e,{hubFileId:r,likeId:n},{loadingKey:a})=>{let i=(0,_.Jl)(eP)({id:r});(0,j.N)(i,e,a),i.catch(r=>{e.dispatch(I.F.enqueue({message:(0,T.t)("community.actions.unable_to_unlike_this_file_error",{error:(0,T.Jv)(r,r.data.message)}),type:"HUB_FILE_UNLIKE_FAILED",error:!0}))}),e.getState().user?.id&&n&&(0,h.WB)().optimisticallyDelete({CommunityHubLike:{[n]:null}},i)},e=>`UNLIKE_HUB_FILE_${e}`),(0,C.nF)((e,{hubFileId:r})=>y.Ay.post(`/api/hub_files/${r}/view`,{hubFileId:r}));let eD={};(0,C.nF)(async(e,{hubFileId:r})=>{let n=e.getState(),a=n.user?.id;a&&((0,l.sx)(F.M5.SLIDE_TEMPLATE_USED,{hubFileId:r}),eD[a]?.includes(r)||await et.C.updateSlideTemplateCommunityUsageCount({hubFileId:r}).then(()=>{eD[a]||(eD[a]=[]),eD[a].includes(r)||eD[a].push(r)}).catch(e=>{(0,E.x1)("Error updating Community Slide Template usage count",e,{hubFileId:r},{reportAsSentryError:!0})}))}),(0,C.nF)((e,r)=>{(r===Q.G4.FULLSCREEN||r===Q.G4.FULLSCREEN_WITH_COMMENTS)&&((0,l.sx)("Context Viewed",{name:"hub-file-canvas-enter-fullscreen"}),r===Q.G4.FULLSCREEN_WITH_COMMENTS&&(0,l.sx)("CTA Clicked",{name:"community_hub_preview_comments_viewed"}));let n={...e.getState().selectedView,fullscreenState:r};r===Q.G4.FULLSCREEN&&n.commentThreadId&&delete n.commentThreadId,e.dispatch(O.$T(n))})},950759:(e,r,n)=>{n.d(r,{JZ:()=>b,QF:()=>v,qR:()=>T});var a=n(777535),i=n(76265),o=n(553362),s=n(534294),l=n(578459),c=n(628220),d=n(985814),u=n(733050),m=n(263352),p=n(492366),h=n(7395),_=n(565315),g=n(811257),f=n(748940),E=n(539335);let y=(0,u.M)(),b=(0,s.nF)(async(e,{resourceType:r,localFileIdToRemove:n})=>{if(!y)return;let{added:s,existed:u}=await y.createMultipleNewLocalFileExtensions({title:(0,i.t)("community.actions.pick_extension_manifest_file"),filters:[{name:"Manifests",extensions:["json"]}],properties:["openFile"]},0),E=s[0]??u[0];if(null!=E)try{let s=await (0,m.c2)(E,{resourceType:r,isPublishing:!1});"unknown"===r&&(r=s.containsWidget?"widget":"plugin");let u=(0,m.T)();if(u&&!s.editorType?.includes(u))throw Error((0,h.am)({type:h.ho.VALIDATE,text:`The manifest editorType does not include "${u}".`}));if((0,a.sx)("Added new plugin",{how:"loaded",pluginId:s.id,version:s.api,isWidget:"widget"===r,productType:u?(0,m.Pz)(u):null,isVsCode:(0,d.T)()}),e.dispatch(v({localFileId:E,resourceType:r})),(0,l.s)({initialX:0,initialY:0,initialTab:"figjam"===u?"widget"===r?g.p.WIDGETS:g.p.PLUGINS:void 0,initialFdResourceTab:"figjam"!==u?"widget"===r?f.s.WIDGET:f.s.PLUGIN:void 0,initialFdView:"figjam"!==u?"development":void 0,scrollDevelopmentSectionIntoView:"figjam"===u,source:"extension-import"}),e.dispatch(o.F.enqueue({message:s.name?(0,i.t)("community.actions.manifest_name_has_been_imported",{manifestName:s.name}):"widget"===r?(0,i.t)("community.actions.widget_has_been_imported"):(0,i.t)("community.actions.plugin_has_been_imported")})),n){let r=e.getState().localPlugins[n],a=r?.lastKnownPluginId??r?.plugin_id??r?.manifest.id;(a===s.id||null==a)&&e.dispatch(T(n))}let y=s.editorType;y?.forEach(n=>{let a=m.Sb(n);r===p.bD.PLUGIN?e.dispatch(c.gU({storeInRecentsKey:a,id:s.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()})):r===p.bD.WIDGET&&e.dispatch(c.RH({storeInRecentsKey:a,id:s.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()}))})}catch(r){e.dispatch(o.F.enqueue({message:r.message,error:!0}))}}),v=(0,s.nF)(async(e,{localFileId:r,resourceType:n})=>{let a=await (0,m.t3)(r,{resourceType:n});e.dispatch((0,E.Po)(a))}),T=(0,s.nF)((e,r)=>{void 0!=r&&(y&&y.removeLocalFileExtension(r),e.dispatch((0,E.Zy)(r)))})},507921:(e,r,n)=>{n.d(r,{C:()=>m});var a=n(657548),i=n(697737),o=n(76265),s=n(553362),l=n(534294),c=n(968525),d=n(771491),u=n(492366);let m=(0,l.nF)((e,{id:r,resourceType:n},{loadingKey:l})=>{let m=i.Ay.post(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(m,e,l),m.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_like_this_plugin_error",{error:(0,o.Jv)(r,r.data.message)}):(0,o.t)("community.actions.unable_to_like_this_widget_error",{error:(0,o.Jv)(r,r.data.message)}),type:`${n.toUpperCase()}_LIKE_FAILED`,error:!0}))});let p=e.getState().user,h=p&&(0,c.sD)(p,e.getState().authedProfilesById);p?.id&&h&&(0,a.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${h.id}`]:{pluginId:r,hubFileId:null,resourceId:null,profileId:h.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},m)},({id:e})=>`LIKE_RESOURCE_${e}`);(0,l.nF)((e,{id:r,resourceType:n,likeId:l},{loadingKey:m})=>{let p=i.Ay.del(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(p,e,m),p.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_unlike_this_plugin_error",{error:r.data.message}):(0,o.t)("community.actions.unable_to_unlike_this_widget_error",{error:r.data.message}),type:`${n.toUpperCase()}_UNLIKE_FAILED`,error:!0}))}),e.getState().user?.id&&l&&(0,a.WB)().optimisticallyDelete({CommunityHubLike:{[l]:null}},p)})},539335:(e,r,n)=>{n.d(r,{Ob:()=>y,Po:()=>b,Zy:()=>v});var a=n(511445),i=n(201863),o=n(719334),s=n(534294),l=n(829115),c=n(733050),d=n(510669),u=n(263352),m=n(816750),p=n(301126),h=n(882898),_=n(7395),g=n(829274),f=n(30437),E=n(747327);let y=(0,i.N)("PLUGIN_INITIALIZE_LOCAL"),b=(0,i.N)("PLUGIN_UPDATE_LOCAL"),v=(0,i.N)("PLUGIN_DELETE_LOCAL"),T=!1,I=(0,c.M)();(0,s.nF)(async e=>{if(I){if(I.isCompatibleWith({desktopVersion:59})){let r=await I.getLocalManifestFileExtensionIdsToCachedMetadataMap()??{},n=Object.keys(r).map(e=>parseInt(e)),a=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};a.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId].cachedContainsWidget,e.lastKnownPluginId=r[e.localFileId].lastKnownPluginId||"",i[e.localFileId]=e}),e.dispatch(y(i))}else if(I.isCompatibleWith({desktopVersion:58})){let r=await I.getLocalManifestFileExtensionIdsToCachedContainsWidgetMap(),n=Object.keys(r).map(e=>parseInt(e)),a=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};a.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId],i[e.localFileId]=e}),e.dispatch(y(i))}else{let r=await I.getAllLocalFileExtensionIds(),n=await Promise.all(r.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};n.forEach(e=>{a[e.localFileId]=e}),e.dispatch(y(a))}if(!T){T=!0,I.registerManifestChangeObserver(r=>{if("added"===r.type||"changed"===r.type){let n;let a=r.id,i=(0,u.mm)(a,r.localLoadResult,{resourceType:"unknown"}),s=e.getState().localPlugins[a]?.plugin_id;e.dispatch(b(i));let l=e.getState(),{publishingPlugins:c,localPlugins:m,publishedPlugins:p,publishedWidgets:h,currentUserOrgId:_,authedProfilesById:g,modalShown:y}=l,v=c[a];i.plugin_id!==s&&y?.type!==f.o.type&&e.dispatch((0,E.Ij)({id:a}));try{n=(0,u.mI)({...(0,d.getPermissionsState)(l),currentUserOrgId:_,localPlugins:m,publishedPlugins:p,publishedWidgets:h,authedProfilesById:g},a)}catch(r){e.dispatch(o.s.error(r.message));return}v&&v.metadata&&(0,u.L1)(v.metadata)&&!i.error&&e.dispatch((0,E.fy)({id:a,metadata:n}))}else"removed"===r.type&&e.dispatch(v(r.id))});let r=(0,a.s)(r=>{if("added"===r.type||"changed"===r.type){let n=e.getState().mirror?.selectionProperties?.selectedWidgetInfo;n&&n.pluginID&&l.x.mountWidget(n.pluginID,n.widgetID,"hot-reloading re-render");let a=m.SH()?.plugin,i=m.SH()?.triggeredFrom,o=e.getState();"manifestFileId"in r&&a&&(0,_.ZQ)(a)&&o.mirror.appModel.hotReloadPluginDev&&r.manifestFileId===a.localFileId&&(0,p.hM)()&&(async()=>{await (0,h.wY)(),"codegen"!==i&&(0,p.A9)({newTriggeredFrom:null}),(0,g.c)()})()}});I.registerCodeChangeObserver(r),I.registerManifestChangeObserver(r),I.registerUiChangeObserver(r)}}})},747327:(e,r,n)=>{n.d(r,{$Z:()=>$,Cf:()=>Z,Dl:()=>eo,GV:()=>g.GV,Ij:()=>ea,KJ:()=>et,L4:()=>F,LP:()=>X,O8:()=>q,Qi:()=>g.Qi,R8:()=>ec,Vp:()=>es,Vx:()=>g.Vx,W9:()=>j,a8:()=>J,aT:()=>G,b6:()=>H,et:()=>ed,f1:()=>z,fd:()=>B,fs:()=>K,fy:()=>er,gD:()=>en,l5:()=>g.l5,l7:()=>g.l7,pm:()=>ei,se:()=>U,t2:()=>V,uF:()=>x,uV:()=>g.uV,uX:()=>W,uw:()=>Y,wx:()=>eu,zn:()=>el});var a=n(217950),i=n(201863),o=n(777535),s=n(885123),l=n(841962),c=n(988927),d=n(550479),u=n(697737),m=n(719334),p=n(76265),h=n(553362),_=n(864986),g=n(341042),f=n(66683),E=n(534294),y=n(705011),b=n(720327),v=n(20174),T=n(12555),I=n(468847),S=n(841924),w=n(510669),A=n(135820),C=n(263352),N=n(771491),L=n(492366),O=n(754430),R=n(944846),P=n(500597),D=n(519616),k=n(122328),M=n(687456);let F=(0,i.N)("PLUGIN_REPLACE_FEATURED"),x=(0,E.nF)((e,r,{loadingKey:n})=>{if(!e.getState().user)return;let a=P.V.getPlugins(),i=D.U.getWidgets();a.then(({data:r})=>{let n=r.meta;e.dispatch((0,g.Qi)({publishedPlugins:n,src:"initializeUserPublishedPlugins"}))}),i.then(({data:r})=>{let n=r.meta;e.dispatch((0,g.Qi)({publishedPlugins:n,src:"initializeUserPublishedWidgets"}))}),(0,N.N)(i,e,n)}),U=S.M4.Query({fetch:async e=>(await P.V.getUnpublishedPlugins()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),B=S.M4.Query({fetch:async e=>(await D.U.getUnpublishedWidgets()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),V=S.M4.Query({fetch:async e=>(await P.V.getPlugins()).data.meta,output:({data:e})=>{let r={};if(null!=e)for(let n of e)r[n.id]=n;return r}}),G=S.M4.Query({fetch:async e=>(await D.U.getWidgets()).data.meta,output:({data:e})=>{let r={};if(null!=e)for(let n of e)r[n.id]=n;return r}}),H=(0,E.nF)((e,{widgetIDToVersions:r})=>{let{publishedCanvasWidgetVersions:n,currentUserOrgId:a}=e.getState();for(let[e,i]of Object.entries(r))i.forEach(i=>{let o=n[e]?.[i];o&&new Set(r[e]).forEach(e=>{A.F.getAndCache({...o,id:e},a??void 0)})})}),W=(0,E.nF)(async(e,{resourceId:r,resourceType:n})=>{let a=n===L.bD.WIDGET?D.U.getWidgets({id:r}):P.V.getPlugins({id:r}),{data:i}=await a,o=i.meta.find(e=>e.id===r);o&&e.dispatch((0,g.Qi)({publishedPlugins:[o],src:"getPublishedResource"}))}),K=(0,i.N)("UPDATE_PUBLISHED_CANVAS_WIDGET_VERSIONS"),Y=(0,i.N)("UPDATE_FETCHED_CANVAS_WIDGET_VERSIONS");async function $(e,r,n){let a=await j({[e]:[r]},n);return a[e]?.[r]}async function j(e,r){let n=s.D.getState(),a=n.openFile?.key,i=await u.Ay.post("/api/widgets/v2/versions",{ids_to_versions:e,org_id:r,file_key:a}),o=i?.data?.meta||{};return s.D.dispatch(K(o)),s.D.dispatch(Y(Object.fromEntries(Object.entries(e).map(([e,r])=>[e,Object.fromEntries(r.map(e=>[e,!0]))])))),o}let z=(0,E.nF)(async(e,{pluginIds:r})=>{let{currentUserOrgId:n,publishedPlugins:a}=e.getState(),i=r.filter(e=>!a[e]);if(i.length)try{let e=await P.V.postPluginsBatch(i,n),r=e.data?.meta??[];s.D.dispatch((0,g.Qi)({publishedPlugins:r,src:"fetchPublishedPlugins",overrideInstallStatus:!0}))}catch{return}}),q=(0,E.nF)(async(e,{widgetIds:r})=>{let{currentUserOrgId:n,publishedWidgets:a}=e.getState(),i=r.filter(e=>!a[e]);if(i.length)try{let e=await u.Ay.post("/api/widgets/batch",{ids:i,org_id:n}),r=e.data?.meta??[];s.D.dispatch((0,g.Qi)({publishedPlugins:r,src:"fetchPublishedWidgets",overrideInstallStatus:!0}))}catch{return}}),Z=(0,E.nF)(async(e,{widgetIDAndVersions:r})=>{let{currentUserOrgId:n}=e.getState(),a=[],i={};r.forEach(({widgetID:e,widgetVersionID:r})=>{i[e]?i[e].includes(r)||i[e].push(r):(a.push(e),i[e]=[r])}),0!==a.length&&(await j(i,n),e.dispatch(H({widgetIDToVersions:i})),e.dispatch(q({widgetIds:Object.keys(i)})))});(0,E.nF)((e,r,{loadingKey:n})=>{let a=P.V.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,M.UM)(r.profileId);return(0,N.N)(a,e,n),a.then(async({data:r})=>{let n=[...await i,...r.meta];return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getCommunityProfilePlugins"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_PLUGINS_${e}`),(0,E.nF)((e,r,{loadingKey:n})=>{let a=D.U.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,M.Jr)(r.profileId);return(0,N.N)(a,e,n),a.then(async({data:r})=>{let n=[...await i,...r.meta];return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getCommunityProfileWidgets"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_WIDGETS_${e}`);let X=(0,E.nF)((e,r,{loadingKey:n})=>{let a=P.V.getOrg({orgId:r});return(0,N.N)(a,e,n),a.then(({data:r})=>{let n=r.meta;return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getOrgPublishedPlugins"})),n})},e=>`GET_ORG_PUBLISHED_PLUGINS_${e}`),J=(0,E.nF)(async(e,r,{loadingKey:n})=>{try{e.dispatch(v.Cx({key:n}));let a=await D.U.getOrg({orgId:r}),i=a?.data?.meta||[];return e.dispatch((0,g.Qi)({publishedPlugins:i,src:"getOrgPublishedWidgets"})),e.dispatch(v.x2({key:n})),i}catch(r){return m.s.flash(r.message||(0,p.t)("community.actions.an_error_occurred_while_trying_to_fetch_the_org_widgets_list")),e.dispatch(v.of({key:n})),[]}},e=>`GET_ORG_PUBLISHED_WIDGETS_${e}`);async function Q(e,r,n){if(null===e.current_plugin_version_id||!e.id)throw Error((0,p.t)("community.actions.resource_is_invalid"));let i=0;r.iconBlob&&(i=(0,C.wf)(r.iconBlob));let s=0;r.coverBlob&&(s=(0,C.oD)(r.coverBlob));let l=r.carouselMedia,{uploadImages:c,uploadVideos:m,allMedia:h}=(0,I.Kg)(l),g=await R.w.postPluginImagesUpload(e.id,e.is_widget,c),f=Promise.resolve(!1),E=r.iconBlob;void 0!==E&&(f=(0,T.c)(E).then(e=>(0,I.Ac)(g.iconUploadUrl,E,e)).then(()=>!0).catch(r=>{(0,d.$D)(a.e.COMMUNITY,r);let n=(0,p.Jv)(r,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error((0,L.xQ)(e)?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:n}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:n}))}));let y=Promise.resolve(!1),b=r.coverBlob;void 0!==b&&(y=(0,T.c)(b).then(e=>(0,I.Ac)(g.coverImageUploadUrl,b,e)).then(()=>!0).catch(r=>{throw(0,d.$D)(a.e.COMMUNITY,r),Error((0,L.xQ)(e)?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:(0,p.Jv)(r,r.data?.message||"unknown error")}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:(0,p.Jv)(r,r.data?.message||"unknown error")}))}));let{snapshotBlob:v}=r,S=Promise.resolve(!1);void 0!==v&&(S=(0,T.c)(v).then(e=>{if(!g.snapshotUploadUrl)throw Error("Snapshot upload url is missing");return(0,I.Ac)(g.snapshotUploadUrl,v,e)}).then(()=>!0).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}));let w=(0,I.Rd)(g.carouselImages,l),[A,N,O]=await Promise.all([f,y,S,...w]),P=m.map(r=>(0,I.Gf)((0,_.KH)(e,{pluralized:!0}),e.id,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1).then(e=>{h.push({carousel_position:r.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}));await Promise.all(P);let{data:D}=await u.Ay.put(`/api/${(0,_.KH)(e,{pluralized:!0})}/${e.id}/versions/${r.id}`,{icon_uploaded:A,cover_image_uploaded:N,snapshot_uploaded:O,carousel_media:h,name:r.name,description:r.description,tagline:r.tagline,creator_policy:r.creatorPolicy,release_notes:r.releaseNotes,comments_setting:e.comments_setting,category_id:e.category_id,image_upload_nonce:g.imageUploadNonce,playground_fig_file_key:r.playground_fig_file_key,playground_file_publish_type:n}).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}),k=D.meta,M=k.plugin;if(M.id!==e.id)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Update Version",{pluginId:e.id,isWidget:e.is_widget,iconFileSize:i,coverFileSize:s}),{publishedPlugin:M,profile:k.profile}}async function ee(e,r,n,i,s,c,m,h,g,f,E){let y;if(!e)throw Error((0,p.t)("community.actions.plugin_id_is_invalid"));let[b,v]=await Promise.all([(0,C.c2)(r,{resourceType:(0,_.nF)(f),isPublishing:!0}),(0,C.MB)(r)]),S=(0,C.ZT)(v),w=0;n.iconBlob&&(w=(0,C.wf)(n.iconBlob));let A=0;n.coverBlob&&(A=(0,C.oD)(n.coverBlob));let N=n.carouselMedia,{uploadImages:L,uploadVideos:O,allMedia:P}=(0,I.Kg)(N),D={manifest:b,release_notes:n.releaseNotes,name:n.name,description:n.description,tagline:n.tagline,creator_policy:n.creatorPolicy,tags:c,tags_v2:m,category_id:s,images_sha1:L};try{y=await R.w.postPluginUpload(D,e,f)}catch(e){throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server")))}let{codeUploadUrl:k,iconUploadUrl:M,coverImageUploadUrl:F,snapshotUploadUrl:x,signature:U,versionId:B,imageUploadNonce:V,carouselImages:G}=y,H=e=>{let r=e.data;if(!r||"string"!=typeof r)return;let n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("Code");if(n&&n[0]&&"EntityTooLarge"===n[0].textContent)return(0,p.t)("community.actions.file_too_large")},W=Promise.resolve(!1);v&&(W=(e=>{let{fields:r,codePath:n,signedCloudfrontUrl:a}=e,i=new FormData;return(Object.entries(r).forEach(([e,r])=>i.append(e,r)),i.set("Content-Type","text/javascript"),i.append("file",v),a&&(0,l.kc)().ext_s3_url_use_figma_domains)?u.Ay.crossOriginPut(a,v,{raw:!0,headers:{"Content-Type":"text/javascript","Cache-Control":"private, max-age=86400","x-amz-acl":"bucket-owner-full-control"}}):u.Ay.crossOriginPost(n,i,{raw:!0,headers:{"Content-Type":"multipart/form-data","Cache-Control":"private, max-age=86400"}})})(k).then(()=>!0).catch(e=>{(0,d.$D)(a.e.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error(f?(0,p.t)("community.actions.error_uploading_widget_code_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_code_error",{error:r}))}));let K=Promise.resolve(!1),Y=n.iconBlob;null!=Y&&(K=(0,T.c)(Y).then(e=>(0,I.Ac)(M,Y,e)).then(()=>!0).catch(e=>{(0,d.$D)(a.e.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,e.data?.message||"unknown error");throw Error(f?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:r}))}));let $=Promise.resolve(!1),j=n.coverBlob;null!=j&&($=(0,T.c)(j).then(e=>(0,I.Ac)(F,j,e)).then(()=>!0).catch(e=>{(0,d.$D)(a.e.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error(f?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:r}))}));let{snapshotBlob:z}=n,q=Promise.resolve(!1);null!=z&&x&&(q=(0,T.c)(z).then(e=>(0,I.Ac)(x,z,e)).then(()=>!0).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:H(e)??(0,p.Jv)(e,e.data?.message||"unknown error")}))}));let Z=(0,I.Rd)(G,N),[X,J,Q,ee]=await Promise.all([W,K,$,q,...Z]),et=O.map(async r=>{try{let n=await (0,I.Gf)(f?"widgets":"plugins",e,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1);return P.push({carousel_position:r.carousel_position,sha1:n.sha1,video_file_uuid:n.videoFileUuid,video_thumbnail_sha1:n.videoThumbnailSha1}),!0}catch(e){throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}});await Promise.all(et);let{data:er}=await u.Ay.put(`/api/${(0,_.nF)(!!f,{pluralized:!0})}/${e}/versions/${B}`,{icon_uploaded:J,cover_image_uploaded:Q,snapshot_uploaded:ee,carousel_media:P,code_uploaded:X,comments_setting:i,category_id:s,signature:U,image_upload_nonce:V,agreed_to_tos:h,org_id:g,playground_fig_file_key:n.playground_fig_file_key,playground_file_publish_type:E}).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error(f?(0,p.t)("community.actions.error_finalizing_widget_error",{error:(0,p.Jv)(e,e.data?.message||"")}):(0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.Jv)(e,e.data?.message||"")}))}),en=er.meta,ea=en.plugin;if(ea.id!==e)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Publish Version",{pluginId:e,hasUI:!!b.ui,apiVersion:b.api,codeLength:S,iconFileSize:w,coverFileSize:A,isWidget:f,editorType:b.editorType?.sort().join(", ")}),{publishedPlugin:ea,profile:en.profile}}let et=(0,y.d6)("PLUGIN"),{updateMetadata:er,updateStatus:en,clearMetadataAndStatus:ea,clearMetadata:ei}=et,eo=(0,E.nF)(async(e,r)=>{let{pluginVersion:n,localFileId:i,pluginId:o,commentsSetting:s,categoryId:l,callback:u,agreedToTos:m,orgId:_,isWidget:f,playgroundFilePublishType:E,tags:y,tagsV2:v}=r;e.dispatch(en({id:i,status:{code:O.aP.UPLOADING}}));try{let{publishedPlugin:r,profile:a}=await ee(o,i,n,s,l,y,v,m,_,f,E);e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"publishPluginVersion"})),a&&(e.dispatch(b.HZ(a)),e.dispatch(b.Oo(a))),e.dispatch(en({id:i,status:{code:O.aP.SUCCESS}})),e.dispatch(ei({id:i})),u()}catch(n){e.dispatch(en({id:i,status:{code:O.aP.FAILURE,error:n.message}}));let r=(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.Jv)(n,n.message)});throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):n.message.includes("invalid word")||e.dispatch(h.F.enqueue({message:r,error:!0})),(0,d.$D)(a.e.COMMUNITY,n),Error(r)}}),es=(0,E.nF)(async(e,r)=>{let{resource:n,pluginVersion:i,callback:o,playgroundFilePublishType:s,localFileIdOrPluginId:l}=r;try{e.dispatch(en({id:l,status:{code:O.aP.UPLOADING}}));let{profile:r,publishedPlugin:a}=await Q(n,i,s);e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"updatePublishedPluginRole"})),r&&e.dispatch(b.Oo(r)),e.dispatch(en({id:l,status:{code:O.aP.SUCCESS}})),o()}catch(n){let r=(0,p.Jv)(n,n.message);throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):e.dispatch(h.F.enqueue({message:r,error:!0})),e.dispatch(en({id:l,status:{code:O.aP.FAILURE,error:r}})),(0,d.$D)(a.e.COMMUNITY,n),Error(`Failed plugin patchVersion: ${n.message}`)}}),el=(0,E.nF)(async(e,{pluginId:r,role:n,agreedToTos:i,isWidget:s})=>{let l;let c={org_id:n.org?n.org.id:void 0,is_public:n.is_public,agreed_to_tos:i};l=s?u.Ay.put(`/api/widgets/${r}/roles`,c):u.Ay.put(`/api/plugins/${r}/roles`,c),await l.then(({data:n})=>{let a=n.meta;(0,o.sx)("Hub Plugin Publish Role",{pluginId:r,toPublic:a.roles.is_public,toOrg:!!a.roles.org,needApproval:(0,f.AC)(a),isWidget:s}),e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"updatePublishedPluginRole"}))}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(a.e.COMMUNITY,r)})}),ec=(0,E.nF)(async(e,r)=>{let n;if(r.authorOrgId&&r.authorTeamId){console.error("Attempting to set both authorOrgId and authorTeamId while publishing");return}let{isWidget:i,pluginId:o}=r,s={tags:r.tags,tags_v2:r.tagsV2,support_contact:r.supportContact,author_org_id:r.authorOrgId,author_team_id:r.authorTeamId,publisher_ids:r.publisherIds,hide_related_content_by_others:r.hideRelatedContentByOthers,agreed_to_tos:r.agreedToTos,is_paid:r.isPaid,is_subscription:r.isSubscription,price:r.price,has_freemium_code:r.hasFreemiumCode,category_id:r.categoryId,is_public:r.isPublic,annual_discount_percentage:r.annualDiscount,is_annual_discount_active:r.isAnnualDiscountActive};n=i?u.Ay.put(`/api/widgets/${o}`,s):u.Ay.put(`/api/plugins/${o}`,s),await n.then(({data:n})=>{let a=n.meta;e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"updatePublishedPlugin"})),r.onSuccess?.()}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(a.e.COMMUNITY,r)})}),ed=(0,E.nF)((e,{resource:r})=>{u.Ay.del(`/api/${(0,_.KH)(r,{pluralized:!0})}/${r.id}`).then(({data:n})=>{let a=n.meta;e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"unpublishPublishedPlugin"})),(0,o.sx)("Hub Unpublish Plugin",{pluginId:r.id,...(0,C.L8)(r)})}).catch(n=>{e.dispatch(h.F.enqueue({message:(0,L.xQ)(r)?(0,p.t)("community.actions.could_not_publish_widget_error",{error:(0,p.Jv)(n,n.data?.message)}):(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.Jv)(n,n.data?.message)}),error:!0})),(0,d.$D)(a.e.COMMUNITY,n)})});(0,E.nF)((e,{id:r,resourceType:n},{loadingKey:a})=>{let i=r=>e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"getResourceVersions",overrideInstallStatus:!0})),o=n===L.bD.WIDGET?D.U.getVersions({widgetId:r}):P.V.getVersions({pluginId:r});(0,N.N)(o,e,a),o.then(({data:e})=>{i(e.meta.plugin)}).catch(e=>{console.log(`Versions of ${n} with id ${r} cannot be fetched at this time:`,e.data?.message)})},({id:e})=>`GET_PLUGIN_VERSIONS_${e}`);let eu=(0,E.nF)(async(e,r)=>{let{role:n,userId:i,resource:o}=r;try{let r=(o.is_widget?await u.Ay.put(`/api/widgets/${o.id}/publishers/${i}`,{role:n}):await u.Ay.put(`/api/plugins/${o.id}/publishers/${i}`,{role:n})).data.meta.plugin,a=e.getState().user;n===O.kM.NONE&&i===a?.id&&(r.plugin_publishers={accepted:[],pending:[]}),e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"setPluginPublisherRole"}));let s=e.getState(),{publishingPlugins:l,localPlugins:c,publishedPlugins:d,publishedWidgets:m,currentUserOrgId:p,authedProfilesById:h}=s,_=Object.values(c).find(e=>e.plugin_id===o.id),f=_?.localFileId??o.id,E=(0,C.mI)({...(0,w.getPermissionsState)(s),currentUserOrgId:p,localPlugins:c,publishedPlugins:d,publishedWidgets:m,authedProfilesById:h},_?.localFileId),y={...l[f].metadata,author:E.author,publishers:E.publishers,creators:E.creators,blockPublishingOnToS:E.blockPublishingOnToS};e.dispatch(er({id:f,metadata:y}))}catch(r){throw e.dispatch(h.F.enqueue({message:(0,p.Jv)(r,r.message),error:!0})),(0,d.$D)(a.e.COMMUNITY,r),Error(r.message)}})},845331:(e,r,n)=>{n.d(r,{d6:()=>I,g3:()=>v,oj:()=>C,s1:()=>S,uR:()=>T});var a=n(201863),i=n(777535),o=n(657548),s=n(771952),l=n(697737),c=n(76265),d=n(553362),u=n(534294),m=n(747327),p=n(402511),h=n(91247),_=n(648735),g=n(968525),f=n(492366),E=n(500597),y=n(519616),b=n(401562);let v=(0,a.N)("SET_SAVED_PLUGIN_VERSIONS");(0,u.nF)((e,r)=>{let n={};Object.keys(r).forEach(e=>{n[e]=[r[e].id]}),e.dispatch(m.b6({widgetIDToVersions:n}))});var T=(e=>(e.COMMUNITY_HUB="community_hub",e.INSERTS_MODAL="inserts_modal",e))(T||{});let I=(0,b.n)((0,u.MM)("SAVE_EXTENSION",(e,{id:r,resourceType:n,versionId:a,orgId:u,onSuccess:E,hideSuccessVisualBell:y,onFail:b,source:v,optimisticData:T},{optimistId:I})=>{let S=e.getState(),w={plugin_version_id:a,org_id:u,current_org_id:S.currentUserOrgId};w.can_handle_first_time_install=!0,w.use_upgraded_version=!0,w.profile_id=e.getState().authedActiveCommunityProfile?.id,n===f.vt.WIDGET&&(w.current_org_id=void 0);let A=`/api/${(0,g.n)(n)}/${r}/install`,C=l.Ay.post(A,w);if(S.user&&T?.resource){let e=`optimistic-plugin-install-${(0,s.g)()}`,r=(0,_.N3)(T.resource,{userId:u?null:S.user.id,orgId:u??null});r&&(0,o.WB)().optimisticallyCreate({PluginInstall:{[e]:r}},C)}C.then(({data:r})=>{e.dispatch(p.c(I));let a=r.meta,o=n===f.vt.WIDGET?{publishedPlugins:[a],src:"installResource",isWidget:!0}:{publishedPlugins:[a],src:"installResource"};if(e.dispatch(m.Qi({...o,overrideInstallStatus:!0})),E?.(),!y){let r=(()=>{if("inserts_modal"===v)return n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_saved"):(0,c.t)("community.saves.widget_saved");if(u){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===u);return(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_saved_for_everyone_at":"community.saves.widget_saved_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_saved_for_your_account_and_profile":"community.saves.widget_saved_for_your_account_and_profile"):n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_saved_for_your_account"):(0,c.t)("community.saves.widget_saved_for_your_account")})();e.dispatch(d.F.enqueue({message:r,type:"plugin-installed"}))}(0,i.sx)((0,f.xQ)(a)?h.M5.WIDGET_INSTALLED:h.M5.PLUGIN_INSTALLED,{communityHubEntity:(0,f.xQ)(a)?h.ZO.WIDGETS:h.ZO.PLUGINS,communityHubEntityId:a.id,source:v})}).catch(r=>{b?.(),e.dispatch(p.r(I)),403===r.data.status?e.dispatch(d.F.enqueue({message:n===f.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_error",{error:(0,c.Jv)(r,r.data?.message)}):(0,c.t)("community.actions.unable_to_save_widget_error",{error:(0,c.Jv)(r,r.data?.message)}),type:"PLUGIN_INSTALL_FAILED",error:!0})):e.dispatch(d.F.enqueue({message:n===f.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_please_try_again"):(0,c.t)("community.actions.unable_to_save_widget_please_try_again"),type:"PLUGIN_INSTALL_FAILED",error:!0}))})})),S=(0,u.MM)("UNSAVE_EXTENSION",(e,{id:r,resourceType:n,orgId:a,hideSuccessVisualBell:s,source:u,optimisticData:_},{optimistId:E})=>{let y={org_id:a,current_org_id:e.getState().currentUserOrgId};y.use_upgraded_version=!0,y.profile_id=e.getState().authedActiveCommunityProfile?.id,n===f.vt.WIDGET&&(y.current_org_id=void 0);let b=`/api/${(0,g.n)(n)}/${r}/install`,v=l.Ay.del(b,y);_?.pluginInstallId&&(0,o.WB)().optimisticallyDelete({PluginInstall:{[_.pluginInstallId]:null}},v),v.then(({data:o})=>{let l=o.meta,_=n===f.vt.WIDGET?{publishedPlugins:[l],src:"uninstallResource",isWidget:!0}:{publishedPlugins:[l],src:"uninstallResource"};if(e.dispatch(m.Qi({..._,overrideInstallStatus:!0})),e.dispatch(p.c(E)),!s){let i={message:(()=>{if("inserts_modal"===u)return n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_removed_from_your_account"):(0,c.t)("community.saves.widget_removed_from_your_account");if(a){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===a);return(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_removed_for_everyone_at":"community.saves.widget_removed_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_removed_from_your_account_and_profile":"community.saves.widget_removed_from_your_account_and_profile"):n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_removed_from_your_account"):(0,c.t)("community.saves.widget_removed_from_your_account")})(),type:"PLUGIN_UNINSTALL_SUCCESS",button:{text:(0,c.t)("community.undo"),action:()=>{e.dispatch(d.F.dequeue({matchType:"PLUGIN_UNINSTALL_SUCCESS"})),e.dispatch(I({id:r,resourceType:n,orgId:a,hideSuccessVisualBell:!0,source:u}))}}};e.dispatch(d.F.enqueue(i))}(0,i.sx)((0,f.xQ)(l)?h.M5.WIDGET_UNINSTALLED:h.M5.PLUGIN_UNINSTALLED,{communityHubEntity:(0,f.xQ)(l)?h.ZO.WIDGETS:h.ZO.PLUGINS,communityHubEntityId:l.id,source:u})}).catch(r=>{e.dispatch(p.r(E)),console.error(r)})}),w={[f.bD.PLUGIN]:function(e){return E.V.getInstallStatus({orgId:e})},[f.bD.WIDGET]:function(e){return y.U.getInstallStatus({orgId:e})}},A=(0,u.nF)((e,r)=>{let n={plugin_id:r.id};r.orgId&&(n.org_id=r.orgId);let a=w[r.resourceType];a&&a(r.orgId).then(({data:e})=>{r.callback(!e.meta.previously_installed_plugin)}).catch(n=>{e.dispatch(d.F.enqueue({type:"plugin-save-error",message:r.resourceType===f.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_error",{error:(0,c.Jv)(n,n.data.message||"unknown error")}):(0,c.t)("community.actions.unable_to_save_widget_error",{error:(0,c.Jv)(n,n.data.message||"unknown error")}),error:!0}))})}),C=(0,u.nF)((e,r)=>{let{orgId:n,id:a,resourceType:i,communityProfile:o}=r;e.dispatch(A({orgId:n,id:a,resourceType:i,callback:()=>{e.dispatch(I({id:a,resourceType:i,orgId:n,communityProfile:o,source:"community_hub"}))}}))})},893461:(e,r,n)=>{n.d(r,{aI:()=>$,cx:()=>Y,s0:()=>j});var a=n(217950),i=n(777535),o=n(841962),s=n(753222),l=n(747484),c=n(550479),d=n(544920),u=n(76265),m=n(553362),p=n(960579),h=n(17718),_=n(899023),g=n(456891),f=n(603239),E=n(534294),y=n(736041),b=n(628220),v=n(419899),T=n(968525),I=n(22293),S=n(461666),w=n(941302),A=n(985146),C=n(510669),N=n(263352),L=n(682403),O=n(492366),R=n(914077),P=n(893850),D=n(7395),k=n(386149),M=n(710636),F=n(11012),x=n(874360),U=n(347483),B=n(109226),V=n(685121);let G=()=>async e=>{let r="org-admin-team-creation";e(m.F.enqueue({message:(0,u.t)("resources_tab.create_team_modal.team_creation_loading"),type:r,icon:p.zX.SPINNER}));try{let n=(await k.G.createStarterTeam()).data.meta;return e(m.F.dequeue({matchType:r})),e(y.Lo()),n}catch(n){return e(m.F.dequeue({matchType:r})),e(y.Lo()),e(m.F.enqueue({message:(0,u.t)("general.an_error_occurred"),error:!0})),Promise.reject()}},H=(0,M.Ju)(x.Rw),W=(e,r,n)=>a=>{a(y.to({type:H,data:{confirmationTitle:(0,u.t)("resources_tab.create_team_modal.modal_title",{extensionName:e}),content:(0,u.t)("resources_tab.create_team_modal.content",{orgName:r}),confirmText:(0,u.t)("general.continue"),onConfirm:()=>{a(G()).then(n)},hideCancel:!0}}))},K=(0,E.nF)(async(e,r)=>{let{workspaces:n,plans:a}=r,i=e.getState(),{authedUsers:o,orgById:s}=i,l=n.map(e=>({...e,workspaceName:(0,w.HE)(i,e),user:o.byId[e.userId]})),c=await Promise.all(l.map(async e=>{let n=e.orgId&&s[e.orgId],o=!0,l=!0;if(n&&(o=await (0,I.hb)(r.resource,n),l=(0,I.VT)(r.resource,n)),(0,N.Rt)(r.resource)&&!(0,C.canMemberOrg)(e.orgId,i,e.userId))return;let c=(0,f.y)(e,(0,R.wN)(r.editorType),i,a);return c.publicPluginsOrWidgetDisabled=!o,c.extensionRequestsAllowed=l,c})),d=[];if(c.forEach(e=>{void 0!==e&&d.push(e)}),d.length<=1){let e=d.length?d[0]:void 0;r.onSelectWorkspace(e);return}e.dispatch(y.to({type:_._,data:{payload:{extension:r.resource,workspaces:d,onSelectWorkspace:r.onSelectWorkspace,mode:"new_file"}}}))}),Y=(0,E.nF)((e,r)=>{if(l.rr){window.location.href="/login";return}let n=r.isWidget?(0,u.t)("community.logged_out.sign_up_modal_widget_header"):(0,u.t)("community.logged_out.sign_up_modal_plugin_header");e.dispatch(d.Ts({origin:"plugin_try_signed_out"})),e.dispatch(y.to({type:F.l,data:{headerText:n,icon:r.isWidget?V.A:B.A,dispatch:e.dispatch,redirectPath:r.redirectPath}}))});(0,E.nF)((e,r)=>{let n=e.getState().user,a=!!r.extension.isWidget,i=r.extension.currentPluginVersion;if(!i||!n)return;let o=i.hasPlaygroundFile,s=r.fullscreenEditorType===R.nT.DevHandoff,l={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:i.id,tryPluginName:i.name??"",isWidget:a,isPlaygroundFile:!!(o||s),fuid:n.id,tryPluginParams:void 0};(0,L.Y9)(n.id,!1,null),(0,U.j)(l,null,null,n.id),(()=>{let o={storeInRecentsKey:(0,v.B)(r.fullscreenEditorType),id:r.extension.id,version:i.id,currentUserId:n.id};a?e.dispatch(b.RH(o)):e.dispatch(b.gU(o))})()}),(0,E.nF)((e,r)=>{let n=e.getState(),a=n.user,i=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!a)return;let l=()=>{let n={storeInRecentsKey:(0,v.B)(r.fullscreenEditorType),id:r.extension.id,version:o.id,currentUserId:a.id};i?e.dispatch(b.RH(n)):e.dispatch(b.gU(n))},c=o.hasPlaygroundFile,d=r.fullscreenEditorType===R.nT.DevHandoff,u={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:i,isPlaygroundFile:!!(c||d),fuid:a.id,tryPluginParams:void 0},m=n.plans.filter(e=>e.plan_type===P.O.TEAM).map(e=>{let r=(0,s.O)(e,a.id);return{...r,workspaceName:(0,w.HE)(n,r),user:a}});if(0===m.length){e.dispatch(W(o.name,n.orgById[n.currentUserOrgId].name,e=>{(0,L.Y9)(a.id,!1,null,void 0,e.id),(0,U.j)(u,null,e.id,a.id),l()}));return}1===m.length?((0,L.Y9)(a.id,!1,null,void 0,m[0].teamId??null),(0,U.j)(u,null,m[0].teamId??null,a.id),l()):e.dispatch(y.to({type:_._,data:{payload:{workspaces:m,onSelectWorkspace:e=>{(0,L.Y9)(a.id,!1,null,void 0,e?.teamId??null),(0,U.j)(u,null,e?.teamId??null,a.id),l()},mode:"new_file"}}}))}),(0,E.nF)((e,r)=>{let n=e.getState(),a=n.user,i=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!a)return;let s=o.hasPlaygroundFile,l=r.fullscreenEditorType===R.nT.DevHandoff,c={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:i,isPlaygroundFile:!!(s||l),fuid:a.id,tryPluginParams:void 0},d=n.plans.find(e=>e.plan_type===P.O.ORG&&e.plan_id===n.currentUserOrgId);(0,L.Y9)(a.id,!1,d.plan_id,void 0,null),(0,U.j)(c,d.plan_id,null,a.id),(()=>{let n={storeInRecentsKey:(0,v.B)(r.fullscreenEditorType),id:r.extension.id,version:o.id,currentUserId:a.id};i?e.dispatch(b.RH(n)):e.dispatch(b.gU(n))})()});let $=(0,E.nF)(async(e,r)=>{let n=e.getState(),{user:s,authedActiveCommunityProfile:l}=n,d=(0,g.w)(n),p=(0,O.xQ)(r.resource),h=(0,N.uF)(r.resource);if(!s){e.dispatch(Y({isWidget:p}));return}let _=()=>{let n={storeInRecentsKey:(0,v.B)(r.fullscreenEditorType),id:r.resource.id,version:h.id,currentUserId:s.id};p?e.dispatch(b.RH(n)):e.dispatch(b.gU(n))},f=(0,T.Gg)(n).length>1,E=(0,T.cs)(l),y=!!(s?.id&&(0,w.Tt)([s.id],n)),C=[],P=null;if((0,o.kc)().ps_benchmark)try{P=await e.dispatch((0,S.nm)(!0)),C=(0,A.F)(n,r.resource,P)}catch(n){let r=n?.data?.message||(0,u.t)("file_browser.error_try_again");e.dispatch(m.F.enqueue({message:r,type:"error"}))}else C=(0,A.F)(n,r.resource,{plansByUserId:{},teams:[],orgs:[]});let k=(f||y)&&!E&&!r.fileKey;(0,o.kc)().ps_benchmark&&(k=C.length>1&&!r.fileKey);let M={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.resource.id,tryPluginVersionId:h.id,tryPluginName:h.name,tryPluginEditorType:h.manifest.editorType?.[0]??D.FW.FIGMA,isWidget:p,isPlaygroundFile:!!r.isPlaygroundFile,tryPluginParams:void 0,fileKey:r.fileKey};if((0,i.sx)("CTA Clicked",{name:"Try it out",pluginId:r.resource.id,isWidget:p,editorType:r.fullscreenEditorType,isMonetized:(0,O.m3)(r.resource),fileKey:r.fileKey,searchSessionId:d}),k)(0,i.sx)("try_it_out_drafts_picker_menu_opened",{pluginId:r.resource.id,isWidget:p,searchSessionId:d}),e.dispatch(K({plans:P,workspaces:C,resource:r.resource,editorType:(0,R.oD)(r.fullscreenEditorType),onSelectWorkspace:e=>{e?(M.fuid=e.userId,(0,L.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),(0,U.j)(M,e.orgId,e.teamId??null,e.userId)):(0,U.j)(M,null,null,s.id),_()}}));else{if((0,o.kc)().ps_benchmark){if(r.fileKey)M.fuid=r.userId??s.id,(0,U.j)(M,null,null,M.fuid);else if(1===C.length){let a=C[0];if(a.orgId&&!(0,I.VT)(r.resource,n.orgById[a.orgId])&&!await (0,I.hb)(r.resource,n.orgById[a.orgId])){e.dispatch(W(h.name,(0,w.HE)(n,a),e=>{(0,L.Y9)(s.id,!1,null,void 0,e.id),(0,U.j)(M,null,e.id,s.id),_()}));return}(0,L.Y9)(a.userId,!1,a.orgId,void 0,a.teamId??null),(0,U.j)(M,a.orgId,a.teamId??null,a.userId)}else(0,c.$D)(a.e.COMMUNITY,Error("No workspaces found")),e.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.error_try_again"),error:!0}))}else r.userId?(M.fuid=r.userId,(0,L.Y9)(r.userId,!1),(0,U.j)(M,null,null,r.userId)):(0,U.j)(M,null,null,s.id);_()}});function j(e,r){e(y.to({type:h.t,data:{onContinue:r}}))}},939380:(e,r,n)=>{n.d(r,{MZ:()=>E,Nn:()=>g,Xt:()=>v,aq:()=>b,dx:()=>f,gI:()=>T});var a=n(697737),i=n(719334),o=n(76265),s=n(957755),l=n(534294),c=n(747327),d=n(578459),u=n(190500),m=n(263352),p=n(162790),h=n(811257),_=n(748940),g=(e=>(e.INVITE_TILE="invite_tile",e.COMMUNITY_PAGE="community_page",e))(g||{});(0,l.nF)((e,r)=>{a.Ay.put("/api/community_publishers/accept",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let f=(0,l.nF)((e,r)=>{let{src:n,plugin_id:s,widget_id:l}=r;a.Ay.put("/api/plugin_publishers/accept",{plugin_id:s,widget_id:l}).then(({data:r})=>{let a=y(r.meta);a&&e.dispatch(a),(0,u.ye)("plugin_publisher_invite_accepted",{src:n,userId:e.getState().user?.id,pluginId:s??l,isWidget:!!l});let i=(0,m.T)();s?(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===i?h.p.PLUGINS:void 0,initialFdResourceTab:"figma"===i?_.s.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===i,initialFdView:"figma"===i?"development":void 0,source:`extension-publisher-invite-${n}`}):l&&(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===i?h.p.WIDGETS:void 0,initialFdResourceTab:"figma"===i?_.s.WIDGET:void 0,scrollDevelopmentSectionIntoView:"figjam"===i,initialFdView:"figma"===i?"development":void 0,source:`extension-publisher-invite-${n}`})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});(0,l.nF)((e,r)=>{a.Ay.del("/api/community_publishers/remove",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let E=(0,l.nF)((e,r)=>{a.Ay.del("/api/plugin_publishers/remove",r).then(({data:n})=>{let a=n.meta;if(n.meta.plugin){let{plugin_publishers:e}=n.meta.plugin;n.meta.plugin.plugin_publishers=e??{accepted:[],pending:[]}}else if(n.meta.widget){let{plugin_publishers:e}=n.meta.widget;n.meta.widget.plugin_publishers=e??{accepted:[],pending:[]}}let i=y(a);i&&e.dispatch(i),(0,u.ye)("plugin_publisher_invite_removed",{src:r.src,userId:e.getState().user?.id,pluginId:r.plugin_id||r.widget_id,isWidget:!!r.widget_id})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});function y(e){return e.hub_file?(0,s.Sb)({hubFiles:[e.hub_file],src:"removeCommunityPublisher"}):e.plugin?c.Qi({publishedPlugins:[e.plugin],src:"removeCommunityPublisher"}):e.widget?c.Qi({publishedPlugins:[e.widget],src:"removeCommunityPublisher"}):void 0}let b=(0,l.nF)(e=>{p.R.loadPluginsPublishedByUser(e),p.R.loadPluginsAuthoredByCurrentOrg(e)}),v=(0,l.nF)(e=>{p.R.loadPluginsAuthoredByCurrentOrg(e)}),T=(0,l.nF)(async e=>{await p.R.loadWidgetsAuthoredByCurrentOrg(e)})},646869:(e,r,n)=>{n.d(r,{r:()=>y});var a=n(805014),i=n(841962),o=n(76265),s=n(553362),l=n(66683),c=n(534294),d=n(736041),u=n(190500),m=n(510669),p=n(263352),h=n(492366),_=n(30437),g=n(245623),f=n(707924),E=n(747327);let y=(0,c.nF)((e,{localFileId:r,publishedPluginId:n,entryPoint:c,initialTab:y,initialAllowedTabs:b,localSnapshotUrl:v,localSnapshotBlob:T})=>{let I=e.getState(),{localPlugins:S,publishedPlugins:w,publishedWidgets:A,publishingPlugins:C,currentUserOrgId:N,authedProfilesById:L,user:O}=I,R=n&&w[n]||n&&A[n],P=null!=r&&S[r];if(R&&!(0,h.m3)(R)&&(0,l.Ul)(R)&&P&&P.manifest.permissions?.includes("payments")&&O&&!O.has_passed_visual_compliance){e.dispatch(d.$O({type:f.O.type}));return}if((0,i.kc)().ext_plugin_publish_modal_query_fix){if(null!=r&&C[r])try{if(v&&C[r].metadata.widgetSnapshotImageSrc!==v){let{metadata:n}=C[r];n.widgetSnapshotImageSrc=v,n.widgetSnapshotImageBlob=T,e.dispatch((0,E.fy)({id:r,metadata:n}))}}catch(r){e.dispatch(s.F.enqueue({message:(0,o.Jv)(r)||r.message,error:!0}));return}}else if(null==r||C[r]){if(null!=r&&C[r])try{if(v&&C[r].metadata.widgetSnapshotImageSrc!==v){let{metadata:n}=C[r];n.widgetSnapshotImageSrc=v,n.widgetSnapshotImageBlob=T,e.dispatch((0,E.fy)({id:r,metadata:n}))}}catch(r){e.dispatch(s.F.enqueue({message:(0,o.Jv)(r)||r.message,error:!0}));return}else if(void 0===r&&n&&R)try{let r=(0,p.mI)({...(0,m.getPermissionsState)(I),currentUserOrgId:N,localPlugins:S,publishedPlugins:w,publishedWidgets:A,authedProfilesById:L},void 0,n,v);e.dispatch((0,E.fy)({id:R.id,metadata:r}))}catch(r){e.dispatch(s.F.enqueue({message:(0,o.Jv)(r)||r.message,error:!0}));return}}else try{let a=(0,p.mI)({...(0,m.getPermissionsState)(I),currentUserOrgId:N,localPlugins:S,publishedPlugins:w,publishedWidgets:A,authedProfilesById:L},r,n,v,T);e.dispatch((0,E.fy)({id:r,metadata:a}))}catch(r){e.dispatch(s.F.enqueue({message:(0,o.Jv)(r)||r.message,error:!0}));return}a.glU&&a.glU.triggerAction("set-tool-default",null),(0,u.uE)("show_publish_plugin_modal",I,{entryPoint:c,userId:I.user?.id,orgId:I.currentUserOrgId,resourceType:R?R.is_widget?"widget":"plugin":void 0,publishedResourceId:R?R.id:void 0,initialTab:y??g.KM.PUBLISH}),e.dispatch(d.to({type:_.o,data:{localFileId:r,entryPoint:c,initialTab:y,initialAllowedTabs:b??g.x5,publishedPluginId:R?R.id:void 0,existingSecurityFormResponse:null}}))})},169213:(e,r,n)=>{n.d(r,{Ri:()=>O,c3:()=>P,j3:()=>L,mg:()=>N,on:()=>R});var a=n(511445),i=n(201863),o=n(777535),s=n(311606),l=n(281935),c=n(163773),d=n(753222),u=n(47795),m=n(61707),p=n(365347),h=n(31393),_=n(314540),g=n(468260),f=n(510669),E=n(421023),y=n(507121),b=n(914077),v=n(505534),T=n(2019),I=n(333167),S=n(839644),w=n(534294),A=n(617254);let C=(0,w.nF)((e,{viewport:r})=>{let{selectedView:n}=e.getState();if("fullscreen"===n.view){e.dispatch(u.$T({...n,viewport:r}));let a=h.ZG()?.fileKey||n.fileKey;a&&l.eD?.updateViewport(a,r)}});(0,w.nF)(e=>{let r=e.getState(),n=function(e){let r=(0,f.getPermissionsStateMemoized)(e);return r.currentUserOrgId?(0,f.canMemberOrg)(r.currentUserOrgId,r)?T.Rx.ORG:T.Rx.ORG_GUEST:T.Rx.PERSONAL}(r);e.dispatch(A.Rz({query:r.desktopNewTab.searchQuery,searchScope:n,searchModelType:T.uH.FILES})),e.dispatch(A.r0({entryPoint:"desktop_new_tab"})),r=e.getState();let a=(0,E.xS)(r,{view:"search",entryPoint:"desktop_new_tab",previousView:r.selectedView&&((0,S.QB)(r.selectedView)||(0,S.bN)(r.selectedView))?r.selectedView:void 0});c.Ay.redirect(a)});let N=(0,i.N)("DESKTOP_NEW_TAB_SET_LOADING_BACKGROUND_COLOR"),L=(0,i.N)("DESKTOP_NEW_TAB_SET_IS_SEARCH_BAR_FOCUSED"),O=(0,i.N)("DESKTOP_NEW_TAB_SET_SEARCH_QUERY");function R(e,r){return null==r?"#00000000":"whiteboard"===r?"#ffffff":`#${(0,y.w2)(e)}`}(0,w.nF)((e,r)=>{let n=e.getState(),a=r.result,i=a.model,o={position:r.index,resource_id:i.key,resource_type:a.search_model_type.toString(),matched_queries:a.matched_queries,result:a},s={plan:(0,d.S)(n)};new I.vj.Analytics(n.search,o,s).click(a.search_model_type,n.selectedView,{action:r.clickAction}),e.dispatch(A.ky()),e.dispatch(u.$T({view:"fullscreen",fileKey:i.key,editorType:(0,b.wN)(i.editor_type??_._Y.DESIGN)}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey);(0,o.sx)("Desktop New Tab Open Recent",{itemType:"prototype",fileKey:a.key}),e.dispatch(u.$T({view:"prototype",file:(0,g.ge)(a),nodeId:r.pageId,pageId:r.pageId}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey);(0,o.sx)("Desktop New Tab Open Recent",{itemType:"file",fileKey:a.key}),e.dispatch(u.$T({view:"fullscreen",fileKey:a.key,editorType:(0,b.wN)(a.editor_type??_._Y.DESIGN)}))}),(0,w.nF)((e,r)=>{let n=e.getState();if(!n.desktopNewTab.isCreatingFile){let a=(0,s.ce)()?v.ai.SAME_TAB:v.ai.NEW_TAB,i=(0,p.xA)(e.getState(),a,r.projectId?{folderId:r.projectId}:"drafts",{from:v.f6.DESKTOP_NEW_TAB_BUTTON,selectedView:n.selectedView},r.editorType,void 0);e.dispatch(m.uM(i))}});let P=(0,a.s)((e,r)=>{e.dispatch(C({viewport:r}))},1e3)},501391:(e,r,n)=>{n.d(r,{A3:()=>K,CE:()=>V,Cs:()=>j,HS:()=>R,I4:()=>eh,Ir:()=>P,N9:()=>J,NL:()=>Y,Np:()=>X,OC:()=>en,OJ:()=>O,Ox:()=>U,Pg:()=>er,Qv:()=>ed,UX:()=>q,V9:()=>F,VV:()=>eu,Vk:()=>ep,WA:()=>L,_1:()=>em,bA:()=>ec,e9:()=>es,g6:()=>N,h8:()=>ei,he:()=>k,iy:()=>G,k1:()=>ee,ks:()=>H,lV:()=>et,lu:()=>ea,mI:()=>el,n0:()=>Q,ne:()=>e_,oI:()=>C,ot:()=>B,wk:()=>W});var a=n(511445),i=n(805014),o=n(201863),s=n(895925),l=n(841962),c=n(76265),d=n(553362),u=n(190500),m=n(365347),p=n(23478),h=n(38711),_=n(736918),g=n(914077),f=n(446979),E=n(609782),y=n(287381),b=n(986743),v=n(606276),T=n(650604),I=n(534294);function S(e){return e.multiplayer.allUsers.length}function w(e){return e?e.isPaused?e.lastReceivedSongTimestampMs:e.lastReceivedSongTimestampMs+(performance.now()-e.timeOrigin):0}async function A(e,r){let n=e;return await (0,b._s)({songID:e,onSuccess:()=>{},onNotFound:()=>{r.dispatch(z({selectedSongID:"",musicStartTimeMs:0})),n="",r.dispatch(Z()),r.dispatch(d.F.enqueue({message:(0,c.t)("whiteboard.timer.song_not_available_error"),error:!0,type:"active-song-not-found"}))}}),n}let C=(0,o.N)("SET_SELECTED_SONG_ID_MUSIC");(0,I.nF)((e,r)=>{let{music:n}=e.getState().music,a=!r.dontTransmitWhenPaused;if(n&&!n.isStopped&&(!n.isPaused||a)){let a=e.getState().music.activeSongs.find(e=>e.song_id===r.selectedSongID);e.dispatch(x({eventName:"update-music-song-id",isPaused:!n||n.isPaused,selectedSongID:r.selectedSongID,lastReceivedSongTimestampMs:a?.start_at_ms||0,isStopped:!n||n.isStopped}))}e.dispatch(C(r))});let N=(0,I.nF)(e=>{e.dispatch(L()),(0,b.I8)(),(0,b.om)()}),L=(0,o.N)("RESET_LOCAL_MUSIC"),O=(0,I.nF)((e,r)=>{if(e.dispatch(R(r)),r.isPaused||r.isStopped||!r.selectedSongID)(r.isPaused||r.isStopped)&&(0,b.c4)()&&(0,b.I8)();else{let n=M(r.selectedSongID,e.getState().music.activeSongs);(0,b.$_)(n,()=>{e.dispatch(D())})}}),R=(0,o.N)("SET_MUSIC_STATE"),P=(0,o.N)("RESUME_MUSIC");(0,I.nF)(async(e,r)=>{let n=w(r),a=e.getState(),i=a.music.music?.selectedSongID;i&&(i=await A(i,e)),e.dispatch(x({eventName:"resume-music",isPaused:!1,selectedSongID:i||"",lastReceivedSongTimestampMs:n,isStopped:!1})),e.dispatch(P(r))}),(0,I.nF)((e,r)=>{let n=w(r),a=e.getState(),i=a.music.music?.selectedSongID;e.dispatch(x({eventName:"pause-music",isPaused:!0,selectedSongID:i||"",lastReceivedSongTimestampMs:n,isStopped:!1}))});let D=(0,I.nF)(e=>{let r=e.getState(),n=r.music.music?.selectedSongID;e.dispatch(x({eventName:"stop-music",isPaused:!0,selectedSongID:n||"",lastReceivedSongTimestampMs:0,isStopped:!0}))}),k=(0,o.N)("START_MUSIC");(0,I.nF)(async(e,{musicStartTimeMs:r=0})=>{let{music:n}=e.getState().music,a="";n&&(a=n.selectedSongID),a&&(a=await A(a,e)),e.dispatch(x({eventName:"start-music",isPaused:!1,selectedSongID:a,lastReceivedSongTimestampMs:r,isStopped:!1})),e.dispatch(k({musicStartTimeMs:r}))});let M=(e,r)=>r.find(r=>r.song_id===e),F=(0,o.N)("SEND_MUSIC_MESSAGE"),x=(0,I.nF)((e,r)=>{let n=e.getState().music;i.h3O.sendMusic(r.isPaused,(n?.music?.musicMessageID||0)+1,r.selectedSongID||"",r.lastReceivedSongTimestampMs||0,r.isStopped),e.dispatch(F(r))});(0,I.nF)((e,r)=>{"open"===r.state&&(0,T.D)(()=>{e.getState().music?.modalState==="open"&&e.dispatch(U({state:"closed",userInitiated:!1}))}),e.dispatch(U(r))});let U=(0,o.N)("SET_MUSIC_MODAL"),B=(0,o.N)("RESET_LOCAL_TIMER"),V=(0,o.N)("SET_MUSIC_STANDALONE_VOLUME");(0,I.nF)((e,r)=>{$(e.getState(),r),e.dispatch(V(r))});let G=(0,o.N)("SET_MUSIC_IS_MUTED");(0,I.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(G({isMuted:r,userInitiated:n}))});let H=(0,o.N)("SET_TIMER_AND_MUSIC_ARE_MUTED");(0,I.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(H({isMuted:r,userInitiated:n}))});let W=(0,o.N)("SET_STANDALONE_MUSIC_PLAYER"),K=(0,o.N)("SET_MAIN_MUSIC_PLAYER"),Y=(0,o.N)("SET_MUSIC_VOLUME");(0,I.nF)((e,r)=>{$(e.getState(),r),e.dispatch(Y(r))});let $=(0,a.s)((e,r)=>(0,y.qV)(e,r),1e3,!1),j=(0,o.N)("SET_SELECTED_SONG_ID"),z=(0,I.nF)((e,r)=>{let{time:n}=e.getState().timer;if(n&&n.totalTimeMs>0){let a=(0,v.P$)(n);e.dispatch(eo({eventName:"update-timer-song-id",totalTimeMs:n.totalTimeMs,timeRemainingMs:a,isPaused:n.isPaused,songID:r.selectedSongID,lastReceivedSongTimestampMs:r.musicStartTimeMs})),_.d1.timerChange("timerupdatesongid")}e.dispatch(j(r))}),q=(0,o.N)("GET_ACTIVE_SONGS_SUCCESS"),Z=(0,I.nF)(async e=>{try{let r=await f.N.getSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw s.k.warn("Failed to fetch active songs"),Error("Api error while fetching active songs");e.dispatch(q(r.data.meta))}catch(e){throw s.k.warn("Failed to fetch active songs"),e}}),X=(0,o.N)("GET_ALL_SONGS_SUCCESS");(0,I.nF)(async e=>{if(!(0,l.kc)().figjam_more_tracks_listen)throw Error("Fetching all songs disabled");try{let r=await f.N.getAllSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw s.k.warn("Failed to fetch all songs"),Error("Api error while fetching all songs");e.dispatch(X(r.data.meta))}catch(e){throw s.k.warn("Failed to fetch all songs"),e}});let J=(0,o.N)("SET_SHOWING_FILE_FOOTER"),Q=(0,o.N)("SET_SELECTED_TYPED_PROP_DEF_ID"),ee=(0,o.N)("SET_START_CHIME_PLAYED"),et=(0,o.N)("SET_TIMER_NOTIFICATION"),er=(0,o.N)("SET_TIMER_AUDIO_ENABLED"),en=(0,o.N)("SET_TIMER_MODAL"),ea=(0,I.nF)((e,r)=>{if("open"===r.state&&(0,v.FR)()&&(0,T.D)(()=>{let r=(0,v.FR)();e.getState().timer?.modalState==="open"&&r&&e.dispatch(ea({state:"closed",userInitiated:!1}))}),r.userInitiated){let n=e.getState(),a=n.timer.time?.timeRemainingMs>0;(0,u.ds)(`timer-modal-${r.state}`,n.openFile?.key,n,{"multiplayer-users":S(n),"timer-active":a,source:r.source})}e.dispatch(en(r))}),ei=(0,o.N)("SEND_TIMER"),eo=(0,I.nF)((e,r)=>{let n=e.getState(),a=n.timer,o=a.setBy;if("start-timer"===r.eventName){let e=n.multiplayer.allUsers.find(e=>e.sessionID===n.multiplayer.sessionID);o=e?e.name:l.Ay().user_data?.handle||"anonymous user"}if(i.h3O.sendTimer(r.totalTimeMs||0,r.timeRemainingMs||0,!!r.isPaused,(a?.time?.timerID||0)+1,o,r.songID||"",r.lastReceivedSongTimestampMs||0),r.eventName){let e={"multiplayer-users":S(n)};if("adjust-timer"===r.eventName){let a=Math.round((r.totalTimeMs-n.timer.time.totalTimeMs)/1e3);e["time-added-s"]=a}else"start-timer"===r.eventName&&(e["duration-s"]=Math.round(r.totalTimeMs/1e3));(0,u.ds)(r.eventName,n.openFile?.key,n,e,{forwardToDatadog:!0})}e.dispatch(ei(r))}),es=(0,o.N)("SET_TIMER"),el=(0,I.nF)((e,r)=>{if(0===r.totalTimeMs){let r=e.getState(),n=(0,m.d1)(r);if(n){let e=(0,p.L8)(n,r.repos);!function(e,r,n){if(!e)return;let a=new E.a().selectedViewNameHelper(e,r);(0,h.hL)(a,(0,g.wN)(e.editor_type),"")}(n,e)}}e.dispatch(es(r))}),ec=(0,o.N)("START_TIMER"),ed=(0,I.nF)(async(e,{totalTimeMs:r,musicStartTimeMs:n=0})=>{let a=e.getState().timer.selectedSongID;a&&(a=await A(a,e)),e.dispatch(eo({eventName:"start-timer",totalTimeMs:r,timeRemainingMs:r,isPaused:!1,songID:a,lastReceivedSongTimestampMs:n})),_.d1.timerChange("timerstart"),e.dispatch(ec({totalTimeMs:r,musicStartTimeMs:n}))}),eu=(0,I.nF)((e,r)=>{let n=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"adjust-timer",totalTimeMs:r.timer.totalTimeMs+r.deltaMs,timeRemainingMs:(0,v.P$)(r.timer)+r.deltaMs,isPaused:r.timer.isPaused,songID:n,lastReceivedSongTimestampMs:r.timer.lastReceivedSongTimestampMs})),_.d1.timerChange("timeradjust")}),em=(0,I.nF)((e,r)=>{let n=(0,v.P$)(r),a=w(r),i=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"pause-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:n,isPaused:!0,songID:i,lastReceivedSongTimestampMs:a})),_.d1.timerChange("timerpause")}),ep=(0,I.nF)(e=>{let r=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"stop-timer",totalTimeMs:0,timeRemainingMs:0,isPaused:!0,songID:r,lastReceivedSongTimestampMs:0})),_.d1.timerChange("timerstop")}),eh=(0,o.N)("RESUME_TIMER"),e_=(0,I.nF)(async(e,r)=>{let n=e.getState().timer.selectedSongID;n&&(n=await A(n,e)),e.dispatch(eo({eventName:"resume-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:r.timeRemainingMs,isPaused:!1,songID:n,lastReceivedSongTimestampMs:r.lastReceivedSongTimestampMs})),_.d1.timerChange("timerresume"),e.dispatch(eh(r))})},82278:(e,r,n)=>{n.d(r,{DN:()=>P,EX:()=>L,Fb:()=>x,Mv:()=>O,N9:()=>A,U6:()=>I,X7:()=>D,dy:()=>C,gG:()=>F,iN:()=>k,jv:()=>N,lF:()=>T,ox:()=>R,pS:()=>w,qP:()=>M,to:()=>S});var a=n(846288),i=n(201863),o=n(438252),s=n(657548),l=n(283972),c=n(60077),d=n(697737),u=n(719334),m=n(76265),p=n(553362),h=n(534294),_=n(23478),g=n(942171),f=n(959130),E=n(880633),y=n(314540),b=n(50558),v=n(402511);let T=(0,i.N)("SET_FAVORITES_COUNT"),I=(0,i.N)("UPDATE_EXPANDED_CUSTOM_SECTIONS"),S=(0,i.N)("SET_MOVING_RESOURCE"),w=(0,i.N)("SET_NEW_SECTION_INDEX");(0,h.nF)((e,r)=>{let{name:n,orderedFavoriteIds:a}=r,i=d.Ay.put(`/api/user_sidebar_sections/${r.sectionId}`,{ordered_favorited_resource_ids:a,name:n}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))});(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{...n?{name:n}:{},...a?{orderedFavoritedResourceIds:a}:{}}}},i),r.name&&(0,o.K2)(r.sectionId,r.name)}),(0,h.nF)((e,r)=>{let n=d.Ay.del(`/api/user_sidebar_sections/${r.sidebarSectionId}`).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))});(0,o.Pe)(r.sidebarSectionId),(0,s.WB)().optimisticallyDelete({UserSidebarSection:{[r.sidebarSectionId]:null}},n)}),(0,h.nF)((e,r)=>{let n={favorited_resource_ids:r.favoriteIds,team_id:r.teamId};(0,o.Dr)(r.favoriteIds,r.teamId),d.Ay.put("/api/planless_favorited_resource_plan_id",n).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))})}),(0,h.nF)((e,r)=>{let n={section_id:r.sectionId,ordered_favorite_ids:r.orderedFavoriteIds},a=d.Ay.put(`/api/favorited_resources/${r.favoriteId}`,n).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))});r.sectionId&&(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:r.orderedFavoriteIds}}},a);let i={[r.favoriteId]:{sidebarSectionId:r.sectionId}};switch(r.resourceType){case y.bk.TEAM:(0,s.WB)().optimisticallyUpdate({FavoritedTeam:i},a);break;case y.bk.FOLDER:(0,s.WB)().optimisticallyUpdate({FavoritedProject:i},a);break;case y.bk.FILE:(0,s.WB)().optimisticallyUpdate({FavoritedFile:i},a);break;case y.bk.PROTOTYPE:(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:i},a);break;case y.bk.WORKSPACE:(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:i},a)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,a={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},i=d.Ay.post("/api/user_sidebar_sections",a).then(n=>{if(!n?.data.meta){e.dispatch(S({movingResource:void 0}));return}B(e.dispatch,r.newResourceForSection.resourceType,r.newResourceForSection.isFavorited,r.newResourceForSection.resourceId,void 0,n.data.meta),e.dispatch(S({movingResource:void 0}))}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))});if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[G]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},i),r.prefs&&r.currentOrderedSections){let a=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),G,...r.currentOrderedSections.slice(r.insertAtIndex,a)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,b.ah)(s,e.getState().user?.id,n,null,i)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,a={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},i=d.Ay.post("/api/user_sidebar_sections",a).then(e=>{(0,o.SX)(e?.data.meta,r.name)}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))}),l="optimistic-id-custom-section-id";if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[l]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},i),r.prefs&&r.currentOrderedSections){let a=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),l,...r.currentOrderedSections.slice(r.insertAtIndex,a)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,b.ah)(s,e.getState().user?.id,n,null,i)}});let A=(0,h.MM)("BULK_RESOURCE_SET_FAVORITE",(e,r,{optimistId:n,liveStore:a})=>{let{files:i,repos:c,prototypes:m,orgId:h,teamId:_,selectedView:g,entrypoint:f}=r,E=e.getState().currentTeamId,T=e.getState().currentUserOrgId,I=E??T,S=i.filter(e=>!e.is_favorited&&(e.team_id===I||e.parent_org_id===I)),w=S.map(e=>e.key),A=c.filter(e=>!e.is_favorited&&(e.team_id===I||e.parent_org_id===I)).filter(Boolean),C=A.map(e=>e.default_file_key),N=m.filter(e=>!e.is_favorited&&(e.parent_team?.id===I||e.parent_org?.id===I)),L=N.map(e=>e.file_key+","+e.page_id),O={files:C.concat(w),org_id:h,team_id:_,prototypes:L,insert_at_index:r.insertAtIndex,ordered_favorites:r.orderedFavorites,section_id:r.sectionId};i.forEach(e=>{(0,o.gB)(e.key,g,f,y.bk.FILE,e.editor_type,!0)}),c.forEach(e=>{(0,o.gB)(e.default_file_key??void 0,g,f,y.bk.FILE,"design",!0)}),m.forEach(e=>{(0,o.gB)(e.file_key,g,f,y.bk.PROTOTYPE,"design",!0)});let R=d.Ay.put("/api/bulk_favorite_resources",O).then(()=>{e.dispatch(v.c(n))}).catch(r=>{e.dispatch(v.r(n));try{e.dispatch(p.F.enqueue({message:r.message}))}catch(r){e.dispatch(u.s.error("An error occurred while favoriting these items"))}}),P=e.getState().user?.id;if(!P)return;let D={},k={},M=[];if(N.forEach(e=>{M.push(`optimistic-id-${e.fig_file.key}`),k[`optimistic-id-${e.fig_file.key}`]=(0,l.XJ)(e,P,h,r.sectionId)}),A.forEach(e=>{let n=e.default_file_key;if(n){let e=a.readCachedFile(n);e&&(M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId))}}),S.forEach(e=>{M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId)}),(0,s.WB)().optimisticallyCreate({FavoritedFile:D,FavoritedPrototype:k},R),null===r.insertAtIndex)return;let F=[...r.orderedFavorites.slice(0,r.insertAtIndex),...M,...r.orderedFavorites.slice(r.insertAtIndex)];if(r.sectionId)(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:F}}},R);else{let e={id:r.fileBrowserPrefs?.id||"optimistic-id",orderedFavoritedResourceIds:F,orderedTeamIds:r.fileBrowserPrefs?.orderedTeamIds,orderedLicenseGroupIds:r.fileBrowserPrefs?.orderedLicenseGroupIds};(0,b.ah)(e,P,h,null,R)}}),C=(0,h.nF)((e,r)=>{let{tile:n,entrypoint:i,favoriteId:o,fileBrowserEntryPoint:s}=r;switch(n.type){case f.nb.FILE:case f.nb.PINNED_FILE:e.dispatch(M({entrypoint:i,favoriteId:o,file:n.file,fileBrowserEntryPoint:s}));return;case f.nb.PROTOTYPE:e.dispatch(D({entrypoint:i,favoriteId:o,prototype:n.prototype,fileBrowserEntryPoint:s}));return;case f.nb.REPO:e.dispatch(M({entrypoint:i,favoriteId:o,file:E.F.toLiveGraph((0,_.mr)(n.repo,n.branches,{})),repoId:n.repo.id,fileBrowserEntryPoint:s}));return;case f.nb.OFFLINE_FILE:return;default:(0,a.xb)(n)}}),N=(0,h.MM)("REMOVE_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:a,sectionId:i}=r;(0,o.to)(a.id,e.getState().selectedView.view,r.entrypoint,y.bk.FOLDER);let l=B(e.dispatch,y.bk.FOLDER,!1,a.id,n,i);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedProject:{[r.favoriteId]:null}},l)}),L=(0,h.nF)(async(e,r,{liveStore:n})=>{let{tile:i,entrypoint:o,favoriteId:s,sectionId:l,fileBrowserEntryPoint:c}=r;switch(i.type){case f.nb.FILE:e.dispatch(x({entrypoint:o,favoriteId:s,sectionId:l,file:i.file,fileBrowserEntryPoint:c}));return;case f.nb.PINNED_FILE:let d=await n.fetchFile(i.file.key);e.dispatch(x({entrypoint:o,favoriteId:s,sectionId:l,file:E.F.toLiveGraph(d),fileBrowserEntryPoint:c}));return;case f.nb.PROTOTYPE:e.dispatch(k({entrypoint:o,favoriteId:s,sectionId:l,prototype:i.prototype,fileBrowserEntryPoint:c}));return;case f.nb.REPO:e.dispatch(x({entrypoint:o,favoriteId:s,sectionId:l,file:E.F.toLiveGraph((0,_.mr)(i.repo,i.branches,e.getState().selectedBranchKeyByRepoId)),repoId:i.repo.id,fileBrowserEntryPoint:c}));return;case f.nb.OFFLINE_FILE:return;default:(0,a.xb)(i)}}),O=(0,h.MM)("ADD_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:a,sectionId:i}=r;(0,o.gB)(a.id,e.getState().selectedView.view,r.entrypoint,y.bk.FOLDER);let c=B(e.dispatch,y.bk.FOLDER,!0,a.id,n,i),d=e.getState().user?.id,u=e.getState().currentUserOrgId;d&&(r.favoriteId&&r.sectionId&&(0,s.WB)().optimisticallyUpdate({FavoritedProject:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c),"is_favorited"in a&&(r.favoriteId||(0,s.WB)().optimisticallyCreate({FavoritedProject:{[`optimistic-id-${a.id}`]:(0,l.ad)(a,d,u,i)}},c)))});(0,h.nF)((e,r)=>{let{workspace:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,y.bk.WORKSPACE);let a=B(e.dispatch,y.bk.WORKSPACE,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedWorkspace:{[r.favoriteId]:null}},a)}),(0,h.nF)((e,r)=>{let{workspace:n,sectionId:a}=r,i=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,y.bk.WORKSPACE);let c=B(e.dispatch,y.bk.WORKSPACE,!0,n.id,void 0,a),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedWorkspace:{[`optimistic-id-${n.id}`]:(0,l.Nc)(n,d,i,a)}},c))});let R=(0,h.nF)((e,r)=>{let{team:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,y.bk.TEAM);let a=B(e.dispatch,y.bk.TEAM,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedTeam:{[r.favoriteId]:null}},a)}),P=(0,h.nF)((e,r)=>{let{team:n,sectionId:a}=r,i=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,y.bk.TEAM);let c=B(e.dispatch,y.bk.TEAM,!0,n.id,void 0,a),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedTeam:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedTeam:{[`optimistic-id-${n.id}`]:(0,l.zb)(n,d,i,a)}},c))}),D=(0,h.MM)("REMOVE_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:a,entrypoint:i,fileBrowserEntryPoint:l}=r;(0,o.to)(a.file_key,e.getState().selectedView.view,i,y.bk.PROTOTYPE,void 0,l);let c=B(e.dispatch,y.bk.PROTOTYPE,!1,a.file_key,n,void 0,a.page_id);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedPrototype:{[r.favoriteId]:null}},c)}),k=(0,h.MM)("ADD_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:a,entrypoint:i,sectionId:c,fileBrowserEntryPoint:d}=r,u=e.getState().currentUserOrgId;(0,o.gB)(a.file_key,e.getState().selectedView.view,i,y.bk.PROTOTYPE,"prototype",d);let m=B(e.dispatch,y.bk.PROTOTYPE,!0,a.fig_file.key,n,c,a.page_id),p=e.getState().user?.id;p&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},m):(0,s.WB)().optimisticallyCreate({FavoritedPrototype:{[`optimistic-id-${a.fig_file.key}`]:(0,l.XJ)(a,p,u,c)}},m))}),M=(0,h.MM)("REMOVE_FILE_FAVORITE",(e,r,{optimistId:n})=>{let a=e.getState().selectedView.view,{file:i,entrypoint:l,fileBrowserEntryPoint:c}=r;(0,o.to)(i.key,a,l,y.bk.FILE,i.editorType??"design",c);let d="fullscreen"===a?U(e.dispatch,y.bk.FILE,!1,i.key,(0,g.D6)(e.getState().currentUserOrgId)):B(e.dispatch,y.bk.FILE,!1,i.key,n);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedFile:{[r.favoriteId]:null}},d)}),F=(0,i.N)("ADD_FILE_FAVORITE"),x=(0,h.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(F(r)),{file:a,entrypoint:i,sectionId:c,fileBrowserEntryPoint:d}=r;(0,o.gB)(a.key,e.getState().selectedView.view,i,y.bk.FILE,a.editorType??"design",d);let u=B(e.dispatch,y.bk.FILE,!0,a.key,n,c,void 0,(0,g.D6)(e.getState().currentUserOrgId)),m=e.getState().user?.id;if(m){if(r.favoriteId&&r.sectionId)(0,s.WB)().optimisticallyUpdate({FavoritedFile:{[r.favoriteId]:{sidebarSectionId:r.sectionId,orgId:e.getState().currentUserOrgId??null,resourceType:y.bk.FILE,userId:m}}},u);else if(e.getState().currentTeamId&&e.getState().currentTeamId===r.file.teamId||e.getState().currentUserOrgId&&r.file.parentOrgId){let n=(0,l.h7)(E.F.toSinatra(a));(0,s.WB)().optimisticallyCreate({FavoritedFile:{[`optimistic-id-${a.key}`]:{userId:m,orgId:e.getState().currentUserOrgId??null,teamId:e.getState().currentTeamId??null,sidebarSectionId:r.sectionId??null,createdAt:new Date,updatedAt:new Date,resourceId:a.key,resourceType:y.bk.FILE,readableFile:n}}},u)}}}),U=(e,r,n,a,i)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,file_key:a}).then(()=>{let r=i?(0,m.t)("tile.favoriting.file_removed_from_sidebar"):(0,m.t)("tile.favoriting.file_removed_from_favorites"),a=i?(0,m.t)("tile.favoriting.file_added_to_sidebar"):(0,m.t)("tile.favoriting.file_added_to_favorites");e(p.F.enqueue({message:n?a:r}))}).catch(r=>{let n=(0,m.Jv)(r);if(n)try{e(p.F.enqueue({message:n}))}catch(r){e(u.s.error("An error occurred while favoriting this item"))}}),B=(e,r,n,a,i,o,s,l)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,resource_id_or_key:a,page_id:s,section_id:o}).then(()=>{if(i&&e(v.c(i)),l||r!==y.bk.FILE){let r=n?(0,m.t)("sidebar.item_added_bell_message"):(0,m.t)("sidebar.item_removed_bell_message");e(p.F.enqueue({message:r}))}}).catch(r=>{let a=(0,m.Jv)(r);if(a){i&&e(v.r(i));try{e(p.F.enqueue({message:a}))}catch(a){let r=n?"favoriting this item":"removing this favorite";e(u.s.error(`An error occurred while ${r}`))}}}),V=e=>((0,o.j4)(e.favorited_resource_ids),d.Ay.del("/api/favorited_resources",c.td.toAPIParameters(e)));(0,h.nF)((e,r)=>{V({favorited_resource_ids:r.favoriteIds}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))})});let G="optimistic-id-custom-section-id"},894756:(e,r,n)=>{n.d(r,{EG:()=>l,Ji:()=>i,lr:()=>o,qC:()=>s});var a=n(201863);let i=(0,a.N)("FIGJAM_SET_IS_MAKE_SOMETHING_V2_ACTIVE"),o=(0,a.N)("FIGJAM_SET_DELIGHTFUL_TOOLBAR_OVERFLOW_MENU"),s=(0,a.N)("FIGJAM_SET_IMAGE_DIALOG"),l=(0,a.N)("FIGJAM_SET_QUICK_ACCESS_TOOL")},303433:(e,r,n)=>{n.d(r,{fC:()=>p,o2:()=>u,s7:()=>m});var a=n(201863),i=n(534294),o=n(196794),s=n(747327),l=n(20174),c=n(354465),d=n(992335);let u=(0,a.N)("UPDATE_FACE_STAMPS"),m=(0,a.N)("PUT_DEFAULT_FIGJAM_INSERT_ITEMS");(0,i.nF)(e=>{let r=e.getState().selectedView;r&&"fullscreen"===r.view&&h(e)});let p="FETCH_FIGJAM_DEFAULT_INSERTS";async function h(e){let r=e.getState();if((0,c.Sc)(r.loadingState,p)){e.dispatch(l.Cx({key:p}));try{let n=await d.d.getDefaultInserts({orgId:r.currentUserOrgId||void 0}),a=[...n.data.meta.plugins,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&!e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],i=[...n.data.meta.widgets,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],c=[...n.data.meta.templates,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"viewer_mode"in e&&e.viewer_mode&&r.push(e);return r}(n.data.meta.use_cases)];e.dispatch((0,o.Sb)({hubFiles:c,src:"figjam-inserts"})),e.dispatch(m(n.data.meta)),e.dispatch(s.Vx(a)),e.dispatch(s.uV(i));let u={},h={};i.forEach(e=>{let n=e.current_plugin_version_id;!(n&&r.publishedCanvasWidgetVersions[e.id]?.[n])&&(u[e.id]=Object.keys(e.versions),e.current_plugin_version_id&&(h[e.id]={[e.current_plugin_version_id]:e.versions[e.current_plugin_version_id]}))}),e.dispatch((0,s.fs)(h)),e.dispatch((0,s.b6)({widgetIDToVersions:u})),e.dispatch(l.x2({key:p}))}catch(r){e.dispatch(l.of({key:p}))}}}},206908:(e,r,n)=>{n.d(r,{$m:()=>j,FE:()=>B,GZ:()=>$,Ip:()=>z,Lk:()=>em,Nw:()=>en,P6:()=>X,PB:()=>es,PF:()=>Q,Rh:()=>Y,S:()=>er,SQ:()=>ee,U2:()=>ei,VK:()=>J,YF:()=>q,YK:()=>Z,YW:()=>H,Yn:()=>et,Yp:()=>ea,ZN:()=>W,bE:()=>eo,c3:()=>eu,jO:()=>U,og:()=>V,rA:()=>K,sF:()=>G,uo:()=>el,yJ:()=>ec});var a=n(342971),i=n(511445),o=n(805014),s=n(201863),l=n(281935),c=n(449233),d=n(163773),u=n(841962),m=n(657548),p=n(198003),h=n(977235),_=n(750570),g=n(653798),f=n(697737),E=n(719334),y=n(76265),b=n(553362),v=n(534294),T=n(736041),I=n(190500),S=n(23478),w=n(69441),A=n(826016),C=n(183739),N=n(468260),L=n(841924),O=n(410690),R=n(305216),P=n(773283),D=n(84530),k=n(380334),M=n(401562),F=n(64210),x=n(763575);function U(e){return void 0!==e.file_repo}function B(e,r){return f.Ay.put(`/api/files/${e}/thumbnail_guid`,{thumbnail_guid:r}).then(()=>{o.Ez5.canvasViewState().thumbnailNodeId.set(r)})}let V=(0,v.nF)((e,r)=>{r.file.created_at&&console.error("It looks like you are PUT-ting to the API with the entire file object; please only pass the key and file permission attributes");let n=D.S.putFile(r).then(()=>{r.onSuccess?.()}).catch(n=>{if(r.onError?.(),e.dispatch(b.F.enqueue({message:(0,y.t)("file_permissions.generic_error"),error:!0})),(0,u.b5)())throw n}),a=r.file,i={...(0,N.Ns)(a,a.key),...(0,N.yT)(a,r.linkExpirationConfigId,r.currentUser)},o=(0,N.TP)(a,r.linkExpirationConfigId,r.currentUser);Object.keys(i).length>0&&(0,m.WB)().optimisticallyUpdate(i,n),o&&(0,m.WB)().optimisticallyCreate(o,n)}),G=(0,s.N)("FILE_PERMISSIONS_PUT"),H=(0,v.nF)(async(e,r)=>{let n=e.getState(),i={},o=r.file,s=o.folderId,c=!1;if(s){let e=(0,h.oA)((await (0,p.Ek)(C.zCd,{projectId:s})).project);c=!!e&&!!o.editorType&&(0,R.Jf)(e,o.editorType)}c&&(i.folder_id=s),r.versionId&&(i.version_id=r.versionId),e.dispatch(b.F.enqueue({type:"file_duplicating",message:(0,y.t)("visual_bell.duplicating")})),f.Ay.post(`/api/multiplayer/${o.key}/copy?${(0,_.lF)(i)}`).then(i=>{e.dispatch(b.F.dequeue({}));let s=!!n.openFile;if(!i.data.error&&i.data.meta&&s){let s=i.data.meta;if((0,I.ds)("File Duplicated",o.key,e.getState(),{duplicatedFileKey:s.key,duplicatedContainingFolderId:s.folder_id,duplicatedFileTeamId:s.team_id}),r.checkOssSalesExperiment&&(0,O.Lb)(s.key),l.eD){l.eD.openFile({fileKey:s.key,title:s.name,fileEditorType:s.editor_type,target:a.a.FOCAL_TAB,isBranch:(0,S.Xm)(s),isLibrary:!!s.last_published_at,isTeamTemplate:!1,userId:n.user?.id});return}d.Ay.redirect((0,w.to)(s),"_blank")}}).catch(()=>{e.dispatch(b.F.dequeue({})),e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.file_copy_error")))})}),W=(0,v.nF)((e,r)=>{let n=r.file_key;n&&(e.getState().fileByKey[n]||D.S.getFiles({fileKey:n}).then(r=>e.dispatch(ec({file:r.data.meta}))))}),K=(0,v.nF)(async(e,r)=>{try{await f.Ay.del(`/api/files/${r.file_key}/workshop`)}catch(e){}}),Y=(0,v.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey),i=f.Ay.post(`/api/files/${r.fileKey}/workshop`).then(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_started_notification"),button:{text:(0,y.t)("whiteboard.open_sessions.open_session_started_notification_copy_link"),action:()=>{e.dispatch(er({fileKey:r.fileKey,url:(0,w.to)(a),source:A.d.WORKSHOP_VISUAL_BELL}))}}}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_start_failed_notification"),error:!0}))}),o=e.getState().user?.id;if(o){let e=new Date;e.setDate(e.getDate()+1),(0,m.WB)().optimisticallyCreate({FigFileWorkshopMode:{[`optimistic-${r.fileKey}`]:{fileKey:r.fileKey,expiresAt:e,userId:o}}},i)}}),$=(0,v.nF)(async(e,r)=>{await f.Ay.post(`/api/files/${r.fileKey}/view`).then(({data:n})=>{let{last_view_at:a,last_edit_at:i}=n.meta;e.dispatch(x.FB({lastViewed:a,lastEdited:i})),e.dispatch((0,P.Ul)({openFileKey:r.fileKey,versionHistory:e.getState().versionHistory}))}).catch(e=>{(0,g.x1)("recent files","Error marking file view / retrieving last seen times",{error:e})})}),j=(0,v.nF)((e,r)=>{B(r.file_key,r.thumbnail_guid).then(()=>{let n=(0,u.kc)().dse_library_pg_thumbnails?r.thumbnail_guid?(0,y.t)("file_browser.file_browser_actions.file_thumbnail_set"):(0,y.t)("file_browser.file_browser_actions.default_file_thumbnail_restored"):r.thumbnail_guid?(0,y.t)("file_browser.file_browser_actions.thumbnail_set"):(0,y.t)("file_browser.file_browser_actions.default_thumbnail_restored");e.dispatch(b.F.enqueue({message:n}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("file_browser.error_try_again"),error:!0}))})}),z=L.M4.Mutation((e,{objects:r})=>{e.forEach(e=>{r.File.update(e,e=>{e.trashed_at=null})})}),q=(0,s.N)("RESTORE_TRASHED_FILES"),Z=(0,s.N)("DELETE_FILES_PERMANENTLY"),X=(0,s.N)("DELETE_FILES"),J=(0,v.nF)((e,r)=>{e.dispatch(X(r)),e.dispatch((0,F.sM)({fileKeys:Object.keys(r.fileKeys)}))}),Q=(0,s.N)("FILE_RESTORE"),ee=(0,v.nF)((e,r)=>{let{fileKey:n,version:a}=r,i=e.getState().versionHistory.versions.filter(e=>e.created_at).sort((e,r)=>e.created_at<r.created_at?-1:1),o=i.findIndex(e=>e.id===a.id);if(-1===o||0===o){e.dispatch(E.s.error("Unable to find version to restore"));return}let s=i[o-1];s?e.dispatch(Q({fileKey:n,versionId:s.id})):e.dispatch(E.s.error("Unable to find version to restore"))}),et=(0,v.nF)((e,r)=>{(0,c.Dk)(r.embedCode).then(()=>{(0,I.ds)("Embed Code Copied",r.fileKey,e.getState()),e.dispatch(b.F.enqueue({type:"embeded_code_copied_to_clipboard",message:(0,y.t)("file_browser.file_browser_actions.embed_code_copied")}))}).catch(()=>{e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.embed_code_copy_error")))})}),er=(0,M.n)((0,v.nF)((e,r)=>{let n;let a=r.url,i=r.label;if(i){let e=document.createElement("a");e.href=a,e.innerText=i;let r=e.outerHTML;n=(0,c.wY)(r,a)}else n=(0,c.Dk)(a);n.then(()=>{(0,I.ds)("File Share Link Copied",r.fileKey,e.getState(),{copyLinkSource:A.d[r.source],...r.trackingProperties}),r.skipVisualBell||e.dispatch(b.F.enqueue({type:"link_copied_to_clipboard",message:r.visualBellMessageOverride??(0,y.t)("copy_to_clipboard.link_copied_to_clipboard"),button:r.visualBellButton}))}).catch(()=>{e.dispatch(T.to({type:k.o,data:{link:a}}))})})),en=(0,v.nF)((e,r)=>{if(r.name.length<=100){let n={key:r.file.key,name:r.name,updated_at:new Date().toISOString()};e.dispatch(ec({file:n,userInitiated:!0})),(0,I.ds)("File Renamed",n.key,e.getState(),{fileName:n.name})}}),ea=(0,s.N)("FILE_REMOVE_FROM_PROJECT"),ei=(0,s.N)("FILE_MOVE"),eo=(0,s.N)("FILE_POST"),es=(0,s.N)("FILE_BATCH_SUBSCRIBE_TO_REALTIME"),el=(0,s.N)("FILE_BATCH_PUT"),ec=(0,s.N)("FILE_PUT"),ed=(0,i.s)((e,r)=>{let n=r.getState();n.activeFileUsers&&(e=e.filter(e=>!(e in n.activeFileUsers))),e.length&&f.Ay.post("/api/active_file_users",{keys:e}).then(({data:e})=>{!function(e,r,n=!1){let a=r.getState();for(let i in e){if(n&&a.activeFileUsers&&i in a.activeFileUsers)continue;let o=e[i],s=[];if(o)for(let e in o){let r=JSON.parse(o[e]);s.push(r)}r.dispatch(em({fileKey:i,users:s}))}}(e.meta.active_file_users,r,!0)}).catch(e=>{})},1e3);(0,v.nF)((e,r)=>{ed(r.fileKeys,e)});let eu=(0,s.N)("FILE_CLEAR_ACTIVE_USERS"),em=(0,s.N)("FILE_SET_ACTIVE_USERS")},50558:(e,r,n)=>{n.d(r,{ah:()=>l});var a=n(841962),i=n(657548),o=n(697737),s=n(534294);function l(e,r,n,a,o){e.id&&"optimistic-id"!==e.id?i.WB()?.optimisticallyUpdate({FileBrowserPreferences:{[e.id]:{orderedTeamIds:e.orderedTeamIds,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds,orderedSidebarSections:e.orderedSidebarSections,orgId:n,teamId:a,orderedLicenseGroupIds:e.orderedLicenseGroupIds}}},o):null!=r&&i.WB()?.optimisticallyCreate({FileBrowserPreferences:{"optimistic-id":{userId:r,migratedToSections:!0,sidebarMigrationStatus:null,orderedTeamIds:e.orderedTeamIds||null,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds||null,orderedSidebarSections:e.orderedSidebarSections||null,updatedAt:new Date,createdAt:new Date,orgId:n,teamId:a,orderedLicenseGroupIds:e.orderedLicenseGroupIds||null}}},o)}(0,s.nF)((e,r)=>{let n=e.getState().user?.id,i=e.getState().currentUserOrgId,s=(0,a.kc)().ps_benchmark?e.getState().currentTeamId:null,c=o.Ay.put("/api/file_browser_preferences",{ordered_team_ids:r.prefs.orderedTeamIds,ordered_favorites:r.prefs.orderedFavoritedResourceIds,org_id:i,team_id:s,ordered_license_group_ids:r.prefs.orderedLicenseGroupIds,ordered_sidebar_sections:r.prefs.orderedSidebarSections});l(r.prefs,n,i,s,c)}),(0,s.nF)((e,r)=>{let n=e.getState().user?.id,a=e.getState().currentTeamId,i=r.teamUser,s=r.prefs.orderedFavoritedResourceIds,c=[];if(s)for(var d of s)(i.favoritedFiles?.some(e=>e.id===d)||i.favoritedPrototypes?.some(e=>e.id===d))&&c.push(d);let u=i.favoritedProjects?.filter(e=>r.orderedFolderSubscriptions.includes(e.resourceId)).map(e=>e.id)??[];c.push(...u);let m=o.Ay.put("/api/file_browser_preferences",{ordered_favorites:c,team_id:a});l({id:"optimistic-id",orderedFavoritedResourceIds:c},n,null,a,m)})},719971:(e,r,n)=>{n.d(r,{Dl:()=>ei,Dw:()=>X,Ef:()=>z,Fs:()=>q,RH:()=>ea,UN:()=>j,V3:()=>K,Z8:()=>er,_l:()=>H,cz:()=>ee,dm:()=>$,gN:()=>Y,gR:()=>W,hm:()=>V,kg:()=>Z,q0:()=>G,qj:()=>B,rg:()=>en});var a=n(777535),i=n(952979),o=n(281935),s=n(163773),l=n(841962),c=n(453261),d=n(238311),u=n(508794),m=n(697737),p=n(76265),h=n(553362),_=n(970567),g=n(916348),f=n(190500),E=n(968525),y=n(901152),b=n(985814),v=n(841924),T=n(771491),I=n(421023),S=n(682403),w=n(637213),A=n(38885),C=n(880146),N=n(45049),L=n(386582),O=n(839644),R=n(333581),P=n(260105),D=n(966862),k=n(837508),M=n(484060),F=n(534294),x=n(47795),U=n(736041);let B=(0,F.nF)((e,r)=>{e.getState().modalShown?.type!=null&&e.dispatch((0,U.Ce)()),e.getState().dropdownShown?.type!=null&&e.dispatch((0,x.oB)()),e.dispatch((0,x.DE)({show:!0})),r?.until.then(()=>{e.dispatch(x.DE({show:!1}))}),_.q_.addDependency("FILE_BROWSER_SET_LOADING",r?.until||"pending")}),V=(0,F.nF)(e=>{P.H.getState().then(r=>{e.dispatch((0,x.os)(r.data.meta)),e.dispatch(G(r.data.meta))}).catch(r=>{let n=r.data?.message||(0,p.t)("file_browser.file_browser_actions.error_on_data_update");e.dispatch(h.F.enqueue({error:!0,message:n}))})}),G=(0,F.nF)((e,r)=>{new c.P().sendToOtherTabs(R.y,r)}),H=(0,F.nF)((e,r)=>{let n=e.getState(),a=r.view||{view:"recentsAndSharing"},l=(0,I.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},a),c=!(0,E.d9)(n.selectedView)&&(0,E.d9)(a);if(o.eD&&c){o.eD.openCommunity(l,r.workspace.userId);return}function d(){let e=(0,E.d9)(n.selectedView)&&!(0,E.d9)(a);o.eD&&e&&s.Ay.redirect((0,i.dR)((0,I.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},n.selectedView),{fuid:r.workspace.userId}))}if(e.dispatch(B()),r.path){(0,f.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,teamId:n.currentTeamId,newTeamId:r.workspace.teamId,view:n.selectedView.view,newPath:r.path}),s.Ay.redirect((0,i.dR)(r.path,{fuid:r.workspace.userId})),d();return}(0,f.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,view:n.selectedView.view,newView:a.view,newTeamId:r.workspace.teamId,teamId:n.currentTeamId}),(r.workspace.orgId&&!l.includes(r.workspace.orgId)||r.workspace.teamId&&!l.includes(r.workspace.teamId)||(0,E.d9)(a)&&!r.workspace.orgId&&n.currentUserOrgId)&&(0,S.Y9)(r.workspace.userId,(0,E.d9)(a),r.workspace.orgId,void 0,r.workspace.teamId),(0,y.ck)()?M.m({action:"reloadPage",payload:{fuid:r.workspace.userId}}):(s.Ay.redirect((0,i.dR)(l,{fuid:r.workspace.userId})),d())});(0,F.nF)(e=>{m.Ay.post("/api/session/app_auth",{app_type:"desktop"}).then(({data:r})=>{let n=r.meta.id,a=`/app_auth/${n}/grant`,i=e.getState().authedUsers.orderedIds;i.length>0&&(a+=`?authed_ids=${i.join(",")}`),o.eD?.startAppAuth(a),e.dispatch(h.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.desktop_go_to_your_browser")}))}).catch(r=>{console.error(r),e.dispatch(h.F.enqueue({message:(0,p.t)("file_browser.error_try_again"),error:!0}))})}),(0,F.nF)((e,r)=>{e.getState().dropdownShown||e.dispatch((0,x.j7)(r))});let W=(0,F.nF)((e,r)=>{let n=e.getState().dropdownShown;n?.type===r.type?e.dispatch((0,x.oB)()):e.dispatch((0,x.j7)(r))}),K=(0,F.nF)((e,r)=>{(0,b.T)()?(0,w.Qn)(r.url):s.Ay.redirect(r.url,"_blank")});function Y(e,r={}){return(0,x.$T)({view:"folder",folderId:e,...r})}function $(e,r={},n){return(0,x.$T)({view:"team",teamId:e,...r,teamViewTab:n})}(0,F.nF)((e,{index:r})=>{(0,a.sx)("Recent File Clicked",{index:r},{forwardToDatadog:!0})});let j=(0,F.nF)((e,{fileKey:r,entrypoint:n,currentPlanFilter:a,currentSharedByFilter:i,viewMode:o})=>{(0,f.k1)(r,{state:e.getState(),entrypoint:n,planFilterId:a?.planId,planFilterType:a?.planType,sharedByFilter:i,viewMode:o})}),z=(0,F.nF)(e=>{(0,f.uE)("Font Installer Downloaded",e.getState())}),q=(0,F.nF)(e=>{(0,f.uE)("Font Uninstaller Downloaded",e.getState())}),Z=(0,F.nF)((e,{clickedResourceType:r,resourceIdOrKey:n})=>{(0,f.uE)("File Browser Nav Tree Clicked",e.getState(),{clickedResourceType:r,resourceIdOrKey:n})});v.M4.Query({fetch:async e=>(await D.p.getTrashedFilesV2(e)).data.meta,schema:e=>e.object({files:e.array(A.L.nullable()),repos:e.array(e.object({repo:L.z.nullable(),main_file:A.L.nullable()}))}),output:({data:e})=>({files:e.files.filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1),repos:e.repos.filter(e=>!!e.repo&&!!e.repo.trashed_at&&!e.repo.deleted_at).sort((e,r)=>new Date(e.repo.trashed_at)<new Date(r.repo.trashed_at)?1:-1)})}),v.M4.Query({fetch:async e=>(await k.V.getTrashedFolders(e)).data.meta,schema:e=>e.object({folders:e.array(C.lH.extend({touched_at:e.string()}))}),output:({data:e})=>({folders:e.folders.map(e=>({...e,touched_at:""})).filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1)})}),(0,F.nF)((e,{orgId:r,teamId:n},{loadingKey:a})=>{let i=D.p.getTrashedFilesV2({orgId:r||"",teamId:n||""});(0,T.N)(i,e,a),i.then(r=>{let n=JSON.parse(r.response);e.dispatch((0,x.pB)({deletedFiles:n.meta.files})),e.dispatch((0,x.pg)({deletedRepos:n.meta.repos}))})});let X=(0,F.nF)(async(e,{previousView:r,openInNewTab:n,onSubmitReturnToPrevView:a,isEduTeam:i,ignoreCurrentPlan:o})=>{let s=e.getState();if(n){let r=(0,I.xS)(s,{view:"teamCreation",ignoreCurrentPlan:o});e.dispatch(K({url:r}));return}if(s.user&&(0,l.kc)().close_starter_team_loophole){let n=(0,d.hW)("starter_team_loophole_experiment_m0"),a=(0,d.hW)("starter_team_loophole_experiment_m1"),[l,c]=await Promise.all([n,a]);if((0,g.e5)({userId:s.user.id,teams:Object.values(s.teams),rolesByTeamId:s.roles.byTeamId,getM0Config:()=>l,getM1Config:()=>c})){e.dispatch((0,x.$T)({view:"teamUpgrade",teamFlowType:O.SC.CREATE_AND_UPGRADE,teamId:null,paymentStep:N.tn.PLAN_COMPARISON,previousView:r,isEduTeam:i,ignoreCurrentPlan:o}));return}}s.user&&(0,g.Mk)(s.user.id,Object.values(s.teams),s.roles.byTeamId)?e.dispatch((0,x.$T)({view:"teamUpgrade",teamFlowType:O.SC.CREATE,teamId:null,paymentStep:N.tn.CREATE_TEAM,previousView:r,isEduTeam:i,ignoreCurrentPlan:o})):e.dispatch((0,x.$T)({view:"teamCreation",previousView:r,onSubmitReturnToPrevView:a,isEduTeam:i,ignoreCurrentPlan:o}))}),J=["fullscreen","prototype"],Q=[...O.gu,"desktopNewTab"];function ee(e,r){if(J.includes(e.view));else if(Q.includes(e.view))return!0;else if(r&&r.includes(e.view))return!0;return!1}let et=null,er=(0,F.nF)((e,r)=>{et&&ee(r.selectedView,et.additionalViewsToReload)&&s.Ay.reload(et.reason,et.metadata)});function en(){return null!=et}var ea=(e=>(e[e.DEFAULT=2e3]="DEFAULT",e[e.NONE=0]="NONE",e))(ea||{});let ei=(0,F.nF)(async(e,r)=>{await (0,u.fm)(r.delay),ee(e.getState().selectedView,r.additionalViewsToReload)?s.Ay.reload(r.reason,r.metadata):et={reason:r.reason,metadata:r.metadata,additionalViewsToReload:r.additionalViewsToReload}});(0,F.nF)((e,r)=>{let n=e.getState().selectedView;"orgSelfServe"===n.view?e.dispatch((0,x.$T)({view:n.view,step:n.step,orgMigrated:!0,upsellSource:n.upsellSource})):e.dispatch(ei(r))})},942754:(e,r,n)=>{n.d(r,{$l:()=>k,$o:()=>I,HA:()=>A,IU:()=>N,Kc:()=>P,MR:()=>w,Q2:()=>v,TI:()=>F,WC:()=>x,ZJ:()=>O,bE:()=>M,gO:()=>S,ub:()=>b,vt:()=>L,y2:()=>R,yH:()=>C,yJ:()=>D,z6:()=>T});var a=n(201863),i=n(829466),o=n(697737),s=n(719334),l=n(76265),c=n(553362),d=n(47795),u=n(736041),m=n(190500),p=n(643225),h=n(314540),_=n(236123),g=n(331850),f=n(376812),E=n(534294),y=n(194338);let b=(0,E.nF)((e,r)=>o.Ay.put(`/api/folders/${r.folderId}/description`,{description:r.description}).then(({data:r})=>{e.dispatch(D({folder:r.meta}))}).catch(r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_subscription_error")))})),v=(0,a.N)("FOLDER_UNPIN_FILE"),T=(0,E.nF)((e,r)=>{let n=e.optimisticDispatch(v(r));return o.Ay.del(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit()}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_unpin_error")))})}),I=(0,a.N)("FOLDER_PIN_FILE"),S=(0,E.nF)(async(e,r)=>{let n=e.optimisticDispatch(I(r));(0,m.xr)("file_browser_folder_pin_file",r.folderId,null,e.getState(),{fileKey:r.fileKey}),await o.Ay.post(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit(),e.dispatch(c.F.enqueue({error:!1,message:(0,l.t)("file_browser.file_browser_actions.file_pinned_to_project")}))}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_pin_error")))})}),w=(0,a.N)("FOLDER_SET_PINNED_FILE"),A=(0,a.N)("FOLDER_DELETE_LG_SHIM"),C=(0,a.N)("FOLDER_DELETE"),N=(0,a.N)("FOLDER_CLEAR"),L=(0,E.nF)((e,r)=>{let n=(0,p.SS)(r.name);if(n)return e.dispatch(s.s.error(n)),null;if(e.dispatch(u.Lo()),e.dispatch(d.bx()),void 0===r.isInviteOnly&&void 0===r.isViewOnly&&void 0===r.teamAccess)return e.dispatch(s.s.error("inviteOnly and viewOnly fields or teamAccess field must be defined")),null;let a={id:(0,p.d)(),name:r.name,description:null,path:r.name,team_id:r.teamId,is_subscribed:!1,is_favorited:!1,created_at:`${new Date}`,updated_at:`${new Date}`,is_invite_only:!1,is_view_only:!1,settings:{webhooks:{}},deleted_at:null,sharing_audience_control:null,team_access:null,trashed_at:null,trashed_user_id:null,is_abandoned_drafts:!1},c=o.Ay.post("/api/folders",{team_id:r.teamId,path:r.name,is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly,sharing_audience_control:r.sharingAudienceControl,team_access:r.teamAccess}).then(({data:n})=>{e.dispatch(C({folderIds:[a.id]}));let i=n.meta;for(let n of i)if(n.name===r.name){e.dispatch(M(n)),r.onFolderCreated&&r.onFolderCreated(n.id,n.name),(0,m.xr)("Folder Created",n.id,n.team_id,e.getState(),{sharingAudienceControl:r.sharingAudienceControl,teamAccess:r.teamAccess});let a=e.getState().user;r.inviteEmails?.length&&r.teamAccess&&e.dispatch((0,_.rq)({emails:r.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:h.vt.FOLDER,resourceIdOrKey:n.id,level:r.inviteLevel||g.e6.VIEWER,source:"new_project_creation_modal"})),f.G.getRoles({resourceId:n.id,resourceType:h.vt.FOLDER}).then(({data:r})=>{for(let n of r.meta)e.dispatch(y.bE({role:n}))}),r.shouldRedirect&&e.dispatch(d.$T({view:"folder",folderId:n.id}));break}return i});return(0,i.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.create_project_error"),next:e.dispatch,action:M(a)})}),O=(0,E.nF)((e,{folderId:r,teamId:n,isSubscribed:a})=>{let s=a?"Folder Subscriber Added":"Folder Subscriber Deleted";(0,m.xr)(s,r,n,e.getState());let c=o.Ay.put(`/api/folders/${r}`,{is_subscribed:a});(0,i.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.update_project_error"),next:e.dispatch,action:D({folder:{id:r,is_subscribed:a}})})});(0,a.N)("FOLDER_LOAD");let R=(0,a.N)("FOLDER_PUT_UPDATED_AT"),P=(0,a.N)("FOLDER_LOADED"),D=(0,a.N)("FOLDER_PUT"),k=(0,a.N)("FOLDER_BATCH_POST"),M=(0,a.N)("FOLDER_POST"),F=(0,a.N)("FOLDER_STOP_RENAME"),x=(0,a.N)("FOLDER_BEGIN_RENAME")},225371:(e,r,n)=>{n.d(r,{Bs:()=>ea,CN:()=>ey,D9:()=>H,Dr:()=>J,FP:()=>V,Gm:()=>U,J4:()=>ef,JM:()=>G,Jt:()=>M,Kx:()=>$,M3:()=>eN,Mt:()=>z,OB:()=>eO,PQ:()=>D,QA:()=>O,Ql:()=>X,Qm:()=>eT,R5:()=>x,Rw:()=>P,ST:()=>R,U8:()=>K,UC:()=>eL,UM:()=>eg,Uv:()=>q,VB:()=>el,Wk:()=>eo,XE:()=>er,XQ:()=>ep,Y:()=>j,Y6:()=>eh,Z1:()=>eb,Z_:()=>e_,aK:()=>ev,bO:()=>eA,bS:()=>Z,eH:()=>eC,fG:()=>Y,fk:()=>ed,fy:()=>ec,ho:()=>eR,il:()=>W,kP:()=>em,lp:()=>eI,lz:()=>F,nA:()=>ew,nN:()=>ei,p5:()=>eu,pj:()=>k,re:()=>eE,sx:()=>B,u1:()=>en,vg:()=>es,yv:()=>eS});var a=n(805014),i=n(201863),o=n(777535),s=n(952979),l=n(281935),c=n(163773),d=n(841962),u=n(360495),m=n(677840),p=n(76265),h=n(47795),_=n(736041),g=n(267369),f=n(535461),E=n(190500),y=n(366172),b=n(214773),v=n(368933),T=n(597185),I=n(421023),S=n(689102),w=n(505534),A=n(893850),C=n(616937),N=n(336335),L=n(534294);let O=(0,i.N)("SET_SHOW_EDIT_BUTTON"),R=(0,i.N)("CLEAR_SELECTED_VIEW_COMMENT_ID"),P=(0,i.N)("UPDATE_RECENTLY_USED_QUICK_COMMAND"),D=(0,i.N)("RECENTLY_USED_QUICK_COMMANDS"),k=(0,i.N)("FULLSCREEN_UPDATE_CANVAS_MENTION_POPUP_POSITION"),M=(0,i.N)("FULLSCREEN_SET_CANVAS_MENTION_POPUP"),F=(0,i.N)("FULLSCREEN_UPDATE_HYPERLINK_POPUP_POSITION"),x=(0,i.N)("FULLSCREEN_SET_HYPERLINK_POPUP"),U=(0,i.N)("FULLSCREEN_SET_EYEDROPPER"),B=(0,L.nF)((e,r)=>{let n=e.getState(),a=r.params||{},{fileKey:i}=n.selectedView;(0,E.ds)(r.name,i??null,n,a)}),V=(0,i.N)("FULLSCREEN_SET_LEFT_PANEL_TAB"),G=(0,i.N)("FULLSCREEN_SHOW_FILE_CREATION_FAILURE_BANNER"),H=(0,i.N)("FULLSCREEN_HIDE_UPGRADE_BANNER"),W=(0,i.N)("FULLSCREEN_SHOW_UPGRADE_BANNER"),K=(0,i.N)("FULLSCREEN_SET_PREFERRED_VALUES_PICKER_LIST_LAYOUT"),Y=(0,i.N)("FULLSCREEN_SET_INSTANCE_SWAP_PICKER_LIST_LAYOUT"),$=(0,i.N)("FULLSCREEN_SET_PICKER_LIST_LAYOUT"),j=(0,L.nF)((e,r)=>{(0,o.sx)("Style Picker View Changed",{styleType:"FILL",oldViewMode:r.isListLayout?"GRID":"LIST",newViewMode:r.isListLayout?"LIST":"GRID"}),e.dispatch($(r))}),z=(0,i.N)("FULLSCREEN_SHOULD_SHOW_STACK_ALIGNMENT_PICKER"),q=(0,i.N)("FULLSCREEN_HIDE_STYLE_PICKER"),Z=(0,i.N)("FULLSCREEN_SHOW_STYLE_PICKER"),X=(0,i.N)("FULLSCREEN_HIDE_PICKER"),J=(0,i.N)("FULLSCREEN_SHOW_PICKER");function Q(e){return e&&e.startsWith(f.F7)}function ee(e){return e&&e.startsWith(f.yJ)}function et(e,r,n){let i=e&&e.id,s=r&&r.id,l=i!==f.k8&&s===f.k8,c=i===f.k8&&s!==f.k8,d=i!==f.$T&&s===f.$T,u=i===f.$T&&s!==f.$T,m=i!==f.AB&&i!==f.h2&&(s===f.AB||s===f.h2),p=(i===f.AB||i===f.h2)&&s!==f.AB&&s!==f.h2,h=i!==f._V&&s===f._V,_=i===f._V&&s!==f._V,E=!Q(i)&&Q(s),b=Q(i)&&!Q(s),v=!ee(i)&&ee(s),T=ee(i)&&!ee(s);l?a.Ez5.uiState().backgroundPickerOpen.set(!0):c?a.Ez5.uiState().backgroundPickerOpen.set(!1):d?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!0}):u?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!1}):m?(a.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!0),(0,o.sx)("Type Details Panel Opened")):p&&a.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!1),E?a.Osy.setIsPaintPickerOpen(!0):b&&a.Osy.setIsPaintPickerOpen(!1),v?a.Osy.setIsStylePickerOpen(!0):T&&a.Osy.setIsStylePickerOpen(!1),h?a.Ez5.uiState().minMaxModalShown.set(!0):_&&a.Ez5.uiState().minMaxModalShown.set(!1),b&&n(g.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))}let er=(0,L.nF)(e=>{let r=e.getState().pickerShown;e.dispatch(X()),et(r,e.getState().pickerShown,e.dispatch)}),en=(0,L.nF)((e,r)=>{let n=e.getState().pickerShown;e.dispatch(J(r)),et(n,e.getState().pickerShown,e.dispatch)}),ea=(0,i.N)("FULLSCREEN_UPDATE_LOCAL_FONT_AGENT_VERSION"),ei=(0,i.N)("FULLSCREEN_UPDATE_FONT_LIST"),eo=(0,i.N)("FULLSCREEN_STOP_RENAMING"),es=(0,i.N)("FULLSCREEN_BEGIN_RENAMING"),el=(0,L.nF)((e,r)=>{let n=e.getState(),i=r.newSelectedView;if(n.saveStatus&&n.saveStatus.hasUnsavedChanges&&n.saveStatus.tabCloseText!==a.E63.SUPPRESS_UNSAVED_CHANGES_UI){if(!(0,v.Ed)(()=>e.dispatch(eC()))){let r=(0,p.t)("autosave.unable_to_leave_document.unsaved_changes_save_in_background");e.dispatch(_.to({type:N.v,data:{message:r}}))}c.Ay.push((0,I.Np)(n,i),{...e.getState().selectedView,previousSelectedView:r.oldSelectedView,jsCommitHash:(0,d.tl)().release_manifest_git_commit}),e.dispatch(h.$T(r.oldSelectedView))}else n.saveStatus&&n.saveStatus.tabCloseText===a.E63.SUPPRESS_UNSAVED_CHANGES_UI&&(0,o.sx)("suppress_unsaved_changes_ui",{},{forwardToDatadog:!0}),e.dispatch(h.$T({...i,fromPopstate:!0}))}),ec=(0,i.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_THUMBNAIL_URL"),ed=(0,i.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_PROPERTIES"),eu=(0,i.N)("FULLSCREEN_UPDATE_MIRROR"),em=(0,i.N)("FULLSCREEN_SET_NEEDS_UPGRADE"),ep=(0,i.N)("FULLSCREEN_SET_FILE_VERSION"),eh=(0,i.N)("FULLSCREEN_SET_PROGRESS_BAR_STATE"),e_=(0,i.N)("FULLSCREEN_STOP_OBSERVING_OTHER_USER"),eg=(0,i.N)("FULLSCREEN_UPDATE_MULTIPLAYER_STATE"),ef=(0,L.nF)((e,r)=>{void 0!==r.allUsers&&(b.k6(r.allUsers.length,r.presenterSessionID),(0,m.YQ)({id:w.M8})),e.dispatch(eg(r))}),eE=(0,i.N)("FULLSCREEN_SHOW_DOWNTIME_BANNER"),ey=(0,i.N)("FULLSCREEN_HIDE_DOWNTIME_BANNER"),eb=(0,i.N)("FULLSCREEN_HIDE_OPEN_DESKTOP_APP_MODAL"),ev=(0,i.N)("FULLSCREEN_SHOW_OPEN_DESKTOP_APP_MODAL"),eT=(0,i.N)("FULLSCREEN_RECONNECTING_SUCCEEDED"),eI=(0,L.nF)(e=>{b.Dg(),e.dispatch(eT())}),eS=(0,i.N)("FULLSCREEN_RECONNECTING_STARTED"),ew=(0,L.nF)(e=>{b.Ug(),e.dispatch(eS())}),eA=(0,i.N)("FULLSCREEN_ATTEMPT_CLOSE"),eC=(0,L.nF)((e,r)=>{if(l.eD){l.eD.showFileBrowser(),r?.closeCurrentDesktopTab&&l.eD.close({suppressReopening:!0,shouldForceClose:!0});return}if(s.GZ()){if((0,d.kc)().integ_zoom_allow_file_switching&&(0,u.LR)())return;c.Ay.redirect("/","_blank");return}let n=e.getState(),{openFile:i,selectedView:o}=n,m=i?.project?.id,p=(0,d.kc)().ps_benchmark,_={view:"recentsAndSharing"};if(i&&o){let e=i.parentOrgId||C.P;if(p&&"fullscreen"===o.view&&n.lastVisitedPlan&&n.lastVisitedPlan.planId!==(n.lastVisitedPlan.planType===A.O.ORG?i?.parentOrgId:i?.teamId)){let e=(0,I.xS)(n,_);o.prevSelectedView&&(e=(0,I.xS)(n,o.prevSelectedView));let r=(0,T.nX)(e),a=(0,S.Eq)(e);(r||a)&&(e=(0,I.Tk)(e,r?A.O.ORG:A.O.TEAM,r||a,n.lastVisitedPlan.planType,n.lastVisitedPlan.planId)),c.Ay.redirect(e);return}if(!p&&"fullscreen"===o.view&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==e){let e=(0,I.xS)(n,_);o.prevSelectedView&&(e=(0,I.xS)(n,o.prevSelectedView));let r=(0,T.nX)(e);if(!r&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==C.P){let r=e.split("files/");e=r[0]+`files/${n.lastVisitedPlanId}/`+r[1]}else if(r&&r!==n.lastVisitedPlanId){let a=n.lastVisitedPlanId===C.P?"":n.lastVisitedPlanId,i=n.lastVisitedPlanId===C.P?`/${r}`:r;e=e.replace(i,a)}c.Ay.redirect(e);return}"fullscreen"===o.view&&o.prevSelectedView?_=o.prevSelectedView:i&&m&&(_={view:"folder",folderId:m})}if(a.Ez5?.uiState().isRecovery.getCopy()){let e=(0,I.xS)(n,_);c.Ay.redirect(e)}y.Y5.dispatchIfSaved(h.$T(_)),b.V(),e.dispatch(eA(r))}),eN=(0,i.N)("FILE_SELECTED_SHARE_MODAL_TAB"),eL=(0,i.N)("UPDATE_OPEN_FILE"),eO=(0,i.N)("NEW_FILE_LOADED"),eR=(0,i.N)("FULLSCREEN_OPEN")},843398:(e,r,n)=>{n.d(r,{HF:()=>h,QA:()=>E,TW:()=>g,Zv:()=>p,kE:()=>m,mH:()=>_,tG:()=>u,zs:()=>f});var a=n(201863),i=n(697737),o=n(76265),s=n(553362),l=n(534294),c=n(402511),d=n(804197);let u=(0,a.N)("GENERIC_COMMENT_COMMIT_CREATED_COMMENT"),m=(0,a.N)("GENERIC_COMMENT_COMMIT_EDITED_COMMENT"),p=(0,a.N)("GENERIC_COMMENT_COMMIT_DELETED_COMMENT"),h=(0,a.N)("GENERIC_COMMENT_COMMIT_HIDE_COMMENT");(0,l.nF)(async(e,r)=>{let{authorId:n,removeCommentsCallback:a}=r,i=e.getState().communityHub.comments,{activeFeedType:o,commentsById:s,id:l,type:c}=i;if(!l||!c||!i.feeds[o]?.feed)return;let d=[];for(let e in s)s[e]?.author.id===n&&d.push(s[e]);await a(d),e.dispatch(p({resourceType:c,resourceId:l,comments:d}))});let _=(0,a.N)("GENERIC_COMMENT_SET_SHOW_RESOLVED");(0,a.N)("GENERIC_COMMENT_SAVE_PAGE_SCROLL_POSITION");let g=(0,a.N)("GENERIC_COMMENT_RESET_COMMENT_STATUS"),f=(0,a.N)("GENERIC_COMMENT_SUBMIT");(0,l.nF)(async(e,r)=>{let{messageMeta:n,resourceId:a,resourceType:l,onSuccess:c,onError:m,clientMeta:p,pageId:h,parentId:_,isReply:E}=r;await i.Ay.post("/api/community_comments",{message_meta:n,resource_id:a,resource_type:l,client_meta:p,page_id:h,parent_id:_}).then(({data:r})=>{e.dispatch(u({comment:r.meta,resourceId:a,resourceType:l,isReply:E})),c&&c(r.meta)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_create_comment",{errorMessage:n})})),_?e.dispatch(g({commentId:_})):e.dispatch(g({commentId:d.hm})),m&&m())}),e.dispatch(f(r))},({resourceId:e})=>`GENERIC_COMMENT_SUBMIT_${e}`);let E=(0,l.MM)("GENERIC_COMMENT_EDIT",async(e,r,{optimistId:n})=>{let{commentId:a,messageMeta:l,callback:d,clientMeta:u}=r;await i.Ay.put(`/api/community_comments/${a}`,{message_meta:l,client_meta:u}).then(({data:r})=>{e.dispatch(c.c(n)),d(r.meta),e.dispatch(m({comment:r.meta}))}).catch(r=>{e.dispatch(c.r(n)),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_edit_comment"),error:!0}))})});(0,l.nF)((e,r,{loadingKey:n})=>{let{commentId:a,onFinish:l}=r,{type:c,id:d}=e.getState().communityHub.comments;if(null===c||null===d)return;let u=e.getState().communityHub.comments.commentsById[a];i.Ay.del(`/api/community_comments/${a}`).then(()=>{e.dispatch(p({resourceType:c,resourceId:d,comments:[u]})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_deleted")})),l?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_delete_comment",{errorMessage:n})})),l?.(!0))})},({commentId:e})=>`GENERIC_COMMENT_DELETE_${e}`),(0,l.nF)((e,r)=>{let n;let{commentId:a,userIsAdmin:l,onFinish:c}=r,{type:d,id:u}=e.getState().communityHub.comments;null!==d&&null!==u&&(l&&(n={hide:!0}),i.Ay.post(`/api/community_comments/${a}/report`,n).then(()=>{e.dispatch(h({commentId:a,resourceId:u,resourceType:d})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_reported_and_hidden"),type:"COMMENT_REPORTED"})),c?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_report_comment",{errorMessage:n}),type:"COMMENT_REPORT_ERROR"})),c?.(!0))}))})},558603:(e,r,n)=>{n.d(r,{f:()=>m});var a=n(719334),i=n(76265),o=n(553362),s=n(736041),l=n(771491),c=n(624631),d=n(582473),u=n(534294);let m=(0,u.nF)((e,{fileKey:r,emailAddress:n,isResentEmail:s,onSuccess:d},{loadingKey:u})=>{let m=c.L.setClaimEmail({fileKey:r,emailAddress:n});(0,l.N)(m,e,u),m.then(()=>{if(s){e.dispatch(o.F.enqueue({message:(0,i.t)("google_device_try_file_modal.resent_email.visual_bell")}));return}d?.(n)}).catch(r=>{if(r.data?.message==="Hit Claim Email Job timeout lock"){e.dispatch(o.F.enqueue({message:(0,i.t)("google_device_try_file_modal.resent_email.email_resent")}));return}e.dispatch(a.s.error((0,i.t)("google_device_try_file_modal.enter_email.failed_to_send")))})});(0,u.nF)((e,{fileKey:r},{loadingKey:n})=>{let o=c.L.claimDeviceFile({fileKey:r});(0,l.N)(o,e,n),o.then(()=>{e.dispatch(s.to({type:d.$,data:{}}))}).catch(r=>{e.dispatch(a.s.error((0,i.t)("google_device_try_file.save_board.generic_error")))})})},585564:(e,r,n)=>{n.d(r,{FU:()=>s,v6:()=>c,yu:()=>l});var a=n(201863),i=n(677840),o=n(534294);let s=(0,a.N)("SET_KEYBOARD_SHORTCUT_PANEL_TAB"),l=(0,a.N)("USED_KEYBOARD_SHORTCUT"),c=(0,o.nF)((e,r)=>{"paste"===r.key&&(0,i.YQ)({id:"Used Keyboard Shortcut Paste"}),e.dispatch(l(r))})},788843:(e,r,n)=>{n.d(r,{QC:()=>U,fi:()=>M,zK:()=>x});var a=n(236891),i=n(217950),o=n(841962),s=n(875877),l=n(550479),c=n(697737),d=n(650981),u=n(957755),m=n(534294),p=n(206908),h=n(888807),_=n(524940),g=n(20174),f=n(387583),E=n(827473),y=n(396065),b=n(285024),v=n(598378),T=n(354465),I=n(421023),S=n(682403),w=n(914077),A=n(957020),C=n(567095),N=n(211270),L=n(767731);let O=new Map;async function R(e,r){let n=(0,I.zg)(e.getState().selectedView),a=!(0,o.Ay)().user_data;if(a&&!n)return;if((O.get(r)||0)>20){(0,E.LC)();return}let c=(0,L.yD)(r);if(!(0,T.Sc)(e.getState().loadingState,c)){(0,E.LC)();return}e.dispatch(g.Cx({key:c}));let d=e.getState();try{let n=d.selectedView.editorType,m=function(e){switch(e){case w.nT.Whiteboard:return"figjam";case w.nT.Slides:return"slides";default:return"design"}}(n),_=N.Z.getLibrarySubscribedComponentsEditorType({key:r,editorType:m}),[y]=await Promise.all([_]);a||await S.kb.promise,e.dispatch(p.uo({files:y.data.meta.files,subscribeToRealtime:!0})),y.data.meta.files.forEach(e=>{(0,E.Ve)(e.key)});let v=s.atomStore.get(f.qp),T=y.data.meta.hub_files;T&&(T.forEach(e=>{(0,E.Ve)(e.id)}),e.dispatch((0,u.D3)(T)));let I=y.data.meta.state_groups.map(e=>({...e,team_id:v[e.library_key]?.team_id})),C=y.data.meta.components.map(e=>({...e,team_id:v[e.library_key]?.team_id}));if(e.dispatch(h.uo({items:I,type:A.PW.STATE_GROUP})),e.dispatch(h.uo({items:C,type:A.PW.COMPONENT})),(0,o.kc)().dse_lk_realtime_audit){let e=C.filter(e=>!e.library_key),r=I.filter(e=>!e.library_key);(e.length>0||r.length>0)&&(0,l.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("Missing library keys for components or state groups"),{tags:{numComponentsWithMissingLibraryKeys:e.length,numStateGroupsWithMissingLibraryKeys:r.length}})}(0,E.LC)(),e.dispatch(g.x2({key:c})),b.YG.queryDidChange(e)}catch(n){(0,E.LC)(),O.set(r,(O.get(r)||0)+1),e.dispatch(g.of({key:c}))}}async function P(e){let r=e.getState().openFile;if(!r)return;let n=(0,E.iw)(r.key),i=e.getState().loadingState;if(!((0,T.D2)(i,n)||(0,T.VP)(i,n))){e.dispatch(g.Cx({key:n}));try{let r=e.getState().selectedView;if("fullscreen"!==r.view)return;let i=await N.Z.getDefaultLibraries({editorType:(0,w.Bu)(r.editorType)});k(e,i.data.meta.components,A.PW.COMPONENT),k(e,i.data.meta.state_groups,A.PW.STATE_GROUP),i.data.meta.files.forEach(r=>{r.team_id=A.Yu,e.dispatch(p.yJ({file:r}))});let o=i.data.meta.files.map(y.l).filter(a.Vq);e.dispatch(h.lx({libraryKeys:o})),(0,E.kG)(),e.dispatch(g.x2({key:n}))}catch(r){(0,E.kG)(),e.dispatch(g.of({key:n})),b.YG.queryDidChange(e)}}}let D=(0,d.fv)(),k=(e,r,n)=>{let a={[A.Yu]:{}},i={};r.forEach(e=>{let r=D(e=(0,v.aV)(e));a[A.Yu][r]=a[A.Yu][r]||{},a[A.Yu][r][e.node_id]=e,(i[e.library_key]??={})[e.node_id]=e}),e.dispatch(h.Ho({publishedItemsByTeamId:a,publishedItemsByLibraryKey:i,type:n}))};(0,m.nF)(e=>{let r=e.getState(),n=!!r.user;if(!r.openFile?.key)return;let a=e.getState().selectedView;a&&"fullscreen"===a.view&&(a.editorType===w.nT.Whiteboard||a.editorType===w.nT.Slides||a.editorType===w.nT.Cooper?P(e):(0,E.kG)(),n&&F(e,a.editorType===w.nT.Whiteboard?C.$A.FigJam:C.$A.Design)),n&&(e.dispatch(_.tg()),_.xZ(e))});let M="FETCH_RECENTLY_USED_LIBRARY_ITEMS";async function F(e,r){let n;if((0,T.VP)(e.getState().loadingState,M))return;e.dispatch(g.Cx({key:M})),(0,o.kc)().dse_instance_swap_perf||await E.NW;let a=e.getState();if("fullscreen"!==a.selectedView.view){e.dispatch(g.x2({key:M}));return}let i=new Set,l=new Set;for(let e of a.recentlyUsed.libraryItems[r]){let r=e.library_key;e.type===A.PW.COMPONENT&&e.key&&!a.library.publishedByLibraryKey.components[e.team_id]?.[r]?.[e.node_id]?i.add(e.key):e.type===A.PW.STATE_GROUP&&e.key&&!a.library.publishedByLibraryKey.stateGroups[e.team_id]?.[r]?.[e.node_id]&&l.add(e.key)}if(0===i.size&&0===l.size){e.dispatch(g.x2({key:M}));return}try{n=await c.Ay.post("/api/design_systems/components_state_groups",{component_keys:Array.from(i),state_group_keys:Array.from(l),org_id:a.openFile?.parentOrgId})}catch(r){e.dispatch(g.of({key:M}));return}e.dispatch(g.x2({key:M})),e.dispatch(p.uo({files:n.data.meta.files,subscribeToRealtime:!1})),e.dispatch(h.dC({subscribedOldKeyToNewKey:n.data.meta.move_remappings,localOldGuidToNewKey:{}}));let d=s.atomStore.get(f.qp);_.VF(n.data.meta.components,A.PW.COMPONENT,d,e.dispatch),_.VF(n.data.meta.state_groups,A.PW.STATE_GROUP,d,e.dispatch)}let x=(0,m.nF)(e=>{let r=e.getState().openFile;r&&R(e,r.key)});function U(e){e.dispatch(x())}},524940:(e,r,n)=>{n.d(r,{$h:()=>eY,AV:()=>e2,As:()=>e0,BK:()=>eH,Bs:()=>eq,D6:()=>tE,EY:()=>tG,Ee:()=>ej,Kd:()=>tr,Kk:()=>tV,Ky:()=>tf,NW:()=>tD,Oe:()=>te,PI:()=>tk,Qn:()=>e7,Tn:()=>tw,VF:()=>t$,Yb:()=>tI,Yf:()=>e$,Yi:()=>e9,Yx:()=>tP,Z:()=>tv,Zn:()=>tK,_K:()=>e8,a9:()=>tm,b$:()=>ez,e$:()=>ti,f$:()=>e3,ff:()=>e6,fv:()=>tb,jD:()=>eB,jR:()=>eZ,n8:()=>tB,nh:()=>e5,nz:()=>tR,rX:()=>e1,t5:()=>e4,tL:()=>ts,tg:()=>to,u7:()=>tu,uO:()=>eW,uP:()=>eV,wV:()=>tS,x:()=>tH,xZ:()=>ty,zn:()=>tg});var a=n(411855),i=n(188507),o=n(650437),s=n(217950),l=n(879058),c=n(805014),d=n(791236),u=n(851169),m=n(694676),p=n(245459),h=n(33011),_=n(245954),g=n(636149),f=n.n(g),E=n(89865),y=n.n(E),b=n(201863),v=n(777535),T=n(71803),I=n(885123),S=n(163773),w=n(336427),A=n(841962),C=n(875877),N=n(728722),L=n(139879),O=n(892078),R=n(550479),P=n(653798),D=n(697737),k=n(677840),M=n(719334),F=n(76265),x=n(650981),U=n(553362),B=n(960579),V=n(534294),G=n(206908),H=n(888807),W=n(20174),K=n(736041),Y=n(272008),$=n(241162),j=n(864941),z=n(190500),q=n(365347),Z=n(639215),X=n(481954),J=n(387583),Q=n(615875),ee=n(690757),et=n(90939),er=n(265769),en=n(366172),ea=n(867243),ei=n(99804),eo=n(59147),es=n(746695),el=n(827473),ec=n(431244),ed=n(183739),eu=n(841924),em=n(354465),ep=n(73526),eh=n(65292),e_=n(771491),eg=n(837384),ef=n(689102),eE=n(682403),ey=n(734668),eb=n(743221),ev=n(957020),eT=n(523118),eI=n(211270),eS=n(816961),ew=n(694274),eA=n(920432),eC=n(376545),eN=n(845804),eL=n(645404),eO=n(60329),eR=n(775338),eP=n(767731),eD=n(401562),ek=n(323917),eM=n(912355),eF=n(900183),ex=n(932514),eU=n(564854);async function eB(e,r=c.ZiZ.ACTIVE_SCENE){let n;if(!e.canvas_url&&r===c.ZiZ.PLAYGROUND_SCENE)return{newSymbolOrStateGroupGuid:c.BXd.upsertLocalProductComponentToPlaygroundScene(e.node_id)};let a=await X.Eo.getCanvas(e);if(e.type===ev.PW.COMPONENT){let i=u.l7.system("upsert-shared-symbol",()=>c.BXd.upsertSharedSymbol(e.component_key??l.ii.INVALID,e.content_hash??l.F7.INVALID,e.library_key,c.zol.NO,a,r));if(!i||(0,o.Im)(i)||i.fileUpdateRequired)return;i.localGUID||(0,P.x1)(s.e.DESIGN_SYSTEMS_EDITOR,"no local GUID in response",{response:JSON.stringify(i)},{reportAsSentryError:!0}),n=i.localGUID}else if(e.type===ev.PW.STATE_GROUP){let i=u.l7.system("upsert-shared-state-group",()=>c.BXd.upsertSharedStateGroup(e.key,e.version,e.library_key,c.zol.NO,a,r));if(!i||(0,o.Im)(i)||i.fileUpdateRequired)return;if(!i.localGUID)throw Error("Swap to Shared Component Error, no local GUID");if(i.C2)throw Error(i.C2);n=i.localGUID}else throw Error(`Unexpected type for dragging library item: ${e.type}`);return{newSymbolOrStateGroupGuid:n,buffer:a}}let eV=(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:o,alwaysFetch:l,targetUpsertScene:d=c.ZiZ.ACTIVE_SCENE}=r,u=(0,q.d1)(e.getState());if(u){if(!(0,Z.N2)(n,u)||l){let r=async()=>{try{let e=await eB(n,d);e&&(a?.(e.newSymbolOrStateGroupGuid),e.buffer&&i?.(e.buffer))}catch(r){e.dispatch(M.s.error("An error occurred while retrieving the component or state group.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eM.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eM.jE.LOAD_COMPONENT}))}else a?.(n.node_id)}}),eG=(0,x.fv)(),eH=(0,b.N)("SWAP_TO_SHARED_COMPONENT_OR_STATE_GROUP"),eW=(0,V.nF)((e,r)=>{let{item:n,instanceGUIDs:a,usedSwapInstanceKeyboardShortcut:i,storeInRecentsKey:o,queryId:l}=r,d=(0,eP.Ml)(n,a);e.dispatch(W.Cx({key:d}));let m=e.getState(),p=(0,ei.s)(m);e.dispatch(tk({storeInRecentsKey:o,item:n,userId:p}));let h=(0,q.d1)(m);if(!h){e.dispatch(W.of({key:d}));return}let _=async()=>{try{let r=await eB(n);if(r){let o=n.type===ev.PW.STATE_GROUP?c.glU.getSimilarStates(a,r.newSymbolOrStateGroupGuid,n.default_state_key):{[r.newSymbolOrStateGroupGuid]:a};u.l7.user("replace-symbol-backing-instances",()=>{c.glU.replaceSymbolBackingInstances(o,i)}),e.dispatch(W.x2({key:d})),(0,ek.V)(h.key,n,!0,!!e.getState().userFlags.apple_eula_accepted)}}catch(r){e.dispatch(W.of({key:d})),e.dispatch(M.s.error("An error occurred while adding an instance of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),(0,ek.V)(h.key,n,!1,!!e.getState().userFlags.apple_eula_accepted)}(0,z.ds)("Instance Swapped To Shared Component",h.key,e.getState(),{componentFileKey:eG(n),componentLibraryKey:n.library_key,componentId:n.id,source:r.sourceForTracking,queryId:l})};e.dispatch((0,eM.vQ)({assetLibraryKey:n.library_key,onInsertAsset:_,source:eM.jE.SWAP_TO_COMPONENT})),e.dispatch(eH(r))});function eK(e){return e(U.F.enqueue({type:"insert_instance",message:(0,F.t)("design_systems.subscriptions.inserting_instance"),icon:B.zX.SPINNER,delay:1e3})),function(){e(U.F.dequeue({matchType:"insert_instance"}))}}let eY=(0,b.N)("INSERT_SHARED_COMPONENT"),e$=(0,V.nF)((e,r)=>{e.dispatch(eY(r));let{item:n}=r,{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:o,isFromDoubleClick:d,useSmartPositioning:m,insertionCallback:h,storeInRecentsKey:g,fromPlayground:f,insertLogArgsOverride:E,isClick:y,selectAfterInsert:b}=r,v=e.getState(),T=!!(0,A.kc)().presets_baseline&&C.atomStore.get(eO.TG).has(n.library_key),I=async()=>{let r=(0,ei.s)(v);e.dispatch(tk({storeInRecentsKey:g,item:n,userId:r}));let I=(0,q.d1)(v);if(!I)return;let S=(r,n)=>{let s=u.l7.user("insert-component",()=>f?c.glU.insertPlaygroundInstance({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},T):c.glU.insertInstance(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},n,o,m??!1,T,b??!0));if((0,eA.Lj)(a,s),h?.([s],a,y),e.dispatch(K.ES({type:eN.V})),(0,A.kc)().presets_baseline&&s!==p.AD){let n=(0,ep.C$)((0,_.UN)().get(r)),a=v.mirror.sceneGraph.get(s),i=Object.keys(a&&"INSTANCE"===a.type&&a.componentProperties()||{}).length>0;n&&i?(e.dispatch(Y.E({nodeId:s})),(0,k.YQ)({id:eT.sh})):n?(e.dispatch(Y.E({nodeId:s})),(0,k.YQ)({id:eT.Sp})):i?(0,k.YQ)({id:eT.An}):(0,k.YQ)({id:eT.fe})}en.Y5.triggerAction("commit"),en.Y5.triggerAction("set-tool-default")};if((0,Z.N2)(n,I)){let r=v.library.local.components[n.node_id];if(!r||!v.mirror.sceneGraph.get(r.node_id)){e.dispatch(K.to({type:eL.Q}));return}try{S(r.node_id,E),(0,z.ds)("Component Local Symbol Inserted",I.key,e.getState(),{componentLibraryKey:n.library_key,componentId:n.id,ComponentCanvasPositionX:a.x,ComponentCanvasPositionY:a.y}),(0,ek.V)(I.key,r,!0,!!e.getState().userFlags.apple_eula_accepted),e.dispatch(tW())}catch(n){e.dispatch(M.s.error("An error occurred while adding an instance of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),(0,ek.V)(I.key,r,!1,!!e.getState().userFlags.apple_eula_accepted)}}else{let r=performance.now();if(tl&&tl===n.component_key&&tc){let e=(await tc).component;e&&e.updated_at>n.updated_at&&(n=e)}let i=eK(e.dispatch);X.Eo.getCanvas(n).then(e=>{let r=u.l7.system("upsert-shared-symbol",()=>c.BXd.upsertSharedSymbol(n.component_key??l.ii.INVALID,n.content_hash??l.F7.INVALID,n.library_key,c.zol.NO,e,c.ZiZ.ACTIVE_SCENE));if(!r)throw(0,P.x1)("design-systems","response from upsertSharedSymbol was nullish",{componentKey:n.component_key??l.ii.INVALID,contentHash:n.content_hash??l.F7.INVALID},{reportAsSentryError:!0}),Error("An error occurred while adding an instance of this component.");if(r.fileUpdateRequired||!r.localGUID)throw Error("An error occurred while adding an instance of this component.");S(r.localGUID,E)},e=>{let r=c.glU.getSymbolNodeId(n.component_key,n.content_hash);if(!r){if(e?.status===403)throw Error("A 403 error occurred while adding an instance of this component.");throw Error("An error occurred while adding an instance of this component.")}S(r,E)}).then(()=>{let i=performance.now()-r;(0,z.ds)("Component Shared Symbol Inserted",I.key,e.getState(),{elapsedMs:i,componentLibraryKey:n.library_key,componentId:n.id,componentName:n.name,ComponentCanvasPositionX:a.x,ComponentCanvasPositionY:a.y,isFromDefaultLibrary:(0,el.td)(v.library.defaultPublished,n.library_key),isFromDoubleClick:!!d,useSmartPositioning:!!m}),(0,ek.V)(I.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:i}),e.dispatch(tW())}).catch(a=>{e.dispatch(M.s.error(a.message)),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,a),(0,ek.V)(I.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:performance.now()-r})}).finally(()=>{i()})}};e.dispatch((0,eM.vQ)({assetLibraryKey:n.library_key,onInsertAsset:I,source:eM.jE.INSERT_SHARED_COMPONENT}))}),ej=(0,b.N)("INSERT_SHARED_STATE_GROUP"),ez=(0,V.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:o,isFromDoubleClick:d,useSmartPositioning:m,insertionCallback:h,storeInRecentsKey:_,fromPlayground:g,insertLogArgsOverride:f,isClick:E}=r,y=e.getState(),b=!!(0,A.kc)().presets_baseline&&C.atomStore.get(eO.TG).has(n.library_key),v=async()=>{let r=(0,ei.s)(y);e.dispatch(tk({storeInRecentsKey:_,item:n,userId:r}));let v=(0,q.d1)(y);if(!v)return;let T=(r,s,l)=>{let d=u.l7.user("insert-state-group",()=>g?c.glU.insertPlaygroundInstance({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},b):c.glU.insertStateGroup(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},l,o,m??!1,s,b));return(0,eA.Lj)(a,d),(0,A.kc)().anticipation_props_shadow_reads&&(C.atomStore.set(ew.xB,d),C.atomStore.set(ew.fu,n.key)),h?.([d],a,E),e.dispatch(K.ES({type:eN.V})),en.Y5.triggerAction("commit"),en.Y5.triggerAction("set-tool-default"),d};if((0,Z.N2)(n,v)){let r=y.library.local.stateGroups[n.node_id];if(!r||!y.mirror.sceneGraph.get(r.node_id)){e.dispatch(K.to({type:eL.Q}));return}T(r.node_id,"",f),(0,z.ds)("State Group Local Symbol Inserted",v.key,e.getState(),{stateGroupLibraryKey:n.library_key,stateGroupId:n.id,StateGroupCanvasPositionX:a.x,StateGroupCanvasPositionY:a.y}),e.dispatch(tW())}else{let r=performance.now();if(tp&&tp===n.key&&th){let e=await th;e&&e.updated_at>n.updated_at&&(n=e)}let i=eK(e.dispatch);X.Eo.getCanvas(n).then(r=>{let a=u.l7.system("upsert-shared-state-group",()=>c.BXd.upsertSharedStateGroup(n.key??l.q.INVALID,n.version,n.library_key,c.zol.NO,r,c.ZiZ.ACTIVE_SCENE));if(!a||a.fileUpdateRequired||!a.localGUID)throw Error("An error occurred while adding an instance of this component.");let i=T(a.localGUID,n.default_state_key,f);if((0,A.kc)().presets_baseline){let r=y.mirror.sceneGraph.get(a.localGUID)?.childrenNodes[0];r&&((0,ep.C$)(r)&&i!==p.AD?(e.dispatch(Y.E({nodeId:i})),(0,k.YQ)({id:eT.sh})):(0,k.YQ)({id:eT.An}))}},e=>{let r=c.glU.getStateGroupNodeId(n.key,n.version);if(!r)throw Error("An error occurred while adding an instance of this component.");T(r,"",f)}).then(()=>{(0,z.ds)("State Group Shared Symbol Inserted",v.key,e.getState(),{stateGroupLibraryKey:n.library_key,stateGroupId:n.id,stateGroupName:n.name,StateGroupCanvasPositionX:a.x,StateGroupCanvasPositionY:a.y,isFromDefaultLibrary:(0,el.td)(y.library.defaultPublished,n.library_key),isFromDoubleClick:!!d}),(0,ek.V)(v.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r}),e.dispatch(tW())}).catch(a=>{e.dispatch(M.s.error(a.message)),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,a),(0,ek.V)(v.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r})}).finally(()=>{i()})}};await e.dispatch((0,eM.vQ)({assetLibraryKey:n.library_key,onInsertAsset:v,source:eM.jE.INSERT_SHARED_STATE_GROUP})),e.dispatch(ej(r))}),eq=(0,V.nF)(async(e,r)=>{let{item:n}=r;if(!(0,eR.RX)(n))return;let{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:o,useSmartPositioning:l,insertLogArgsOverride:d,insertionCallback:m,storeInRecentsKey:p,fromPlayground:h,selectAfterInsert:_,isClick:g,shouldShowVisualBell:f=!0,errorCallback:E}=r,y=e.getState(),b=(0,ei.s)(y);e.dispatch(tk({storeInRecentsKey:p,item:n,userId:b}));let v=(r,n)=>{let s=u.l7.user("insert-module",()=>h?c.glU.insertPlaygroundModuleUsage({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y}):c.glU.insertModule(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},n,o,l??!1,_??!0));return m?.(s,a,g),e.dispatch(K.ES({type:eN.V})),en.Y5.triggerAction("set-tool-default"),s},T=(0,q.d1)(y);if((0,Z.N2)(n,T))v(n.node_id,d),e.dispatch(tW());else{let r=()=>{};f&&(r=function(e){return e(U.F.enqueue({type:"insert_template",message:(0,F.t)("design_systems.subscriptions.inserting_template"),icon:B.zX.SPINNER,delay:1e3})),function(){e(U.F.dequeue({matchType:"insert_template"}))}}(e.dispatch));try{let e=await eX(n);v(e.localGUID,d)}catch(r){e.dispatch(M.s.error(r.message)),E?E(r):(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}finally{f&&r()}}});(0,V.nF)(async(e,r)=>{let{modules:n,canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:o,afterSlideModulesInsertion:l,useSmartPositioning:d,insertLogArgsOverride:m,storeInRecentsKey:p,selectAfterInsert:h,errorCallback:_}=r;if(n.some(e=>e.moduleSource!==c.QjO.SLIDES_TEMPLATE||!(0,eR.RX)(e)))return;let g=e.getState(),f=(0,ei.s)(g),E=(e,r)=>u.l7.user("insert-module",()=>c.glU.insertModule(e,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},r,o,d??!1,h??!0));try{let r=(await Promise.all(n.map(eX))).map(e=>E(e.localGUID,m));n.forEach(r=>{e.dispatch(tk({storeInRecentsKey:p,item:r,userId:f}))}),l(n,r),en.Y5.triggerAction("set-tool-default")}catch(e){_?_(e):(0,R.$D)(s.e.SLIDES,e)}});let eZ=(0,V.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:o,useSmartPositioning:l,insertLogArgsOverride:d,selectAfterInsert:m,errorCallback:p}=r,h=a?{x:a.x,y:a.y,percentOffsetX:i?.x||.5,percentOffsetY:i?.y||.5}:null;(0,Q.e)(n);let _=(r,n)=>{let a=u.l7.user("insert-responsive-set",()=>c.glU.insertResponsiveSet(r,h,n,o,l??!1,m??!0));return e.dispatch(K.ES({type:eN.V})),en.Y5.triggerAction("commit"),en.Y5.triggerAction("set-tool-default"),a};if("LIBRARY"!==n.subscriptionStatus)_(n.assetId,d);else try{let e=await eJ(n);_(e,d)}catch(r){e.dispatch(M.s.error(r.message)),p?p(r):(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}});async function eX(e){let r=await X.Eo.getCanvas(e),n=u.l7.system("upsert-shared-module",()=>c.BXd.upsertSharedModule(e.key??l.mW.INVALID,e.version??l.Pg.INVALID,e.library_key,c.zol.NO,r,c.ZiZ.ACTIVE_SCENE));if(!n||n.fileUpdateRequired||!n.localGUID)throw Error("An error occurred while inserting this template.");return n}async function eJ(e){if("LIBRARY"!==e.subscriptionStatus)return e.assetId;let r=await X.Eo.getCanvas({canvas_url:e.canvasUrl});if(!u.l7.system("upsert-shared-library-asset",()=>c.BXd.upsertSharedLibraryAsset((0,ey.Hk)(e.type),e.key,e.version,e.sourceLibraryKey,c.zol.NO,r,c.ZiZ.ACTIVE_SCENE)).success)throw Error("An error occurred while inserting this asset.");return e.assetId}function eQ(e,r,n){return(0,T.a)(r,n,{batchSize:5,onBatchFinish(r,n){e(ex.qB({delta:n}))}})}let e0=(0,V.nF)(async(e,r)=>{let{stateGroups:n,usedItemsByKey:a,instanceIdsToUpdate:i,updateStartTime:o,subscribedLibraryKeys:l,fileSubscribedLibraryKeys:m}=r,p=e.getState(),h=p.openFile;if(h)try{let r=await Promise.all(n.map(e=>X.Eo.getCanvas(e))),s=new Set;await eQ(e.dispatch,n,(e,n)=>{let m=r[n];if(u.l7.user("update-shared-state-group",()=>{c.BXd.updateSharedStateGroup(e.key,e.library_key,e.newStateKeyToOutdatedItems,i.map(d.v.toString),m,o)}),Object.keys(e.newStateKeyToOutdatedItems).length)for(let r of Object.values(e.newStateKeyToOutdatedItems)){let{localIdsToUpdate:n,oldSubscribedKeysToUpdate:i}=r;if((0,el.GA)(p.library,h,n,i,a,l)){s.has(e.library_key)||s.add(e.library_key);break}}}),en.Y5.triggerAction("commit");let _=n.map(e=>e.id);(0,z.ds)("Components Updated",h.key,e.getState(),{stateGroups:_,isSgShimFFEnabled:!0}),s.size>0&&tM(e,Array.from(s),m)}catch(r){e.dispatch(M.s.error("An error occurred while updating the instances of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e1=(0,V.nF)(async(e,r)=>{let{components:n,usedItemsByKey:a,instanceIdsToUpdate:i,updateStartTime:o,subscribedLibraryKeys:m,fileSubscribedLibraryKeys:p}=r,h=e.getState(),_=h.openFile;if(_)try{let r=await Promise.all(n.map(e=>X.Eo.getCanvas(e))),s=new Set;await eQ(e.dispatch,n,(e,n)=>{let p=r[n];u.l7.user("update-shared-symbol",()=>{c.BXd.updateSharedSymbol(e.component_key??l.ii.INVALID,e.library_key,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,i.map(d.v.toString),p,o)}),(e.localIdsToUpdate.length||e.oldSubscribedKeysToUpdate.length)&&(0,el.GA)(h.library,_,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,a,m)&&!s.has(e.library_key)&&s.add(e.library_key)}),en.Y5.triggerAction("commit");let g=n.map(e=>e.id);(0,z.ds)("Components Updated",_.key,e.getState(),{components:g,isShimFFEnabled:!0}),s.size>0&&tM(e,Array.from(s),p)}catch(r){e.dispatch(M.s.error("An error occurred while updating the instances of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e2=(0,V.nF)((e,r)=>{let{style:n,inheritStyleKeyField:a,fromSearch:i,targetGuids:o}=r,s=e.getState(),l=(0,q.d1)(s),d=l&&!(0,Z.N2)(n,l),m=s.openFile,p=(0,et.ZR)((0,et.cO)(n,d??!1),m),h=(0,er.X)(p);e.dispatch(e5({style:n,callback:(r,s)=>{if(s){(0,e.dispatch)(U.F.enqueue({type:"missing-font",message:(0,F.t)("design_systems.missing_font_cant_make_changes"),button:{text:(0,F.t)("design_systems.missing_font_learn_more"),action:()=>{S.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/360039956894-Add-a-font-to-Figma-design","_blank")}}}));return}o?u.l7.user("apply-style-to-nodes",()=>c.glU.applyStyleToNodes(a,r,!0,o)):u.l7.user("apply-style-to-selection",()=>{(0,eC.f)(c.VD3.STYLE_ATTACH,c.e0R.DIRECT,()=>{c.glU.applyStyleToSelection(a,r,!0)})}),(0,v.sx)("Style Applied",{styleType:n.style_type,isShared:!!d,viewMode:e.getState().stylePickerListLayout?"LIST":"GRID",fromSearch:!!i,nonInteraction:0,styleKey:n.key,consumedVariableIds:c.CWU.getConsumedVariableIDs(n.node_id),styleLibraryKey:p,consumingFileKey:m?.key,fileTeamId:m?.teamId,fileParentOrgId:m?.parentOrgId,partnerType:h,success:!0,appleEulaAccepted:!!e.getState().userFlags.apple_eula_accepted},{forwardToDatadog:!0})},errorCallback:()=>{(0,v.sx)("Style Applied Error",{partnerType:h},{forwardToDatadog:!0})}}))}),e5=(0,V.nF)((e,r)=>{let n=e.getState(),{style:a}=r,i=(0,q.d1)(n);if(!i)return;let o=!(0,Z.N2)(a,i),d="GRID"===a.style_type&&!c.Ez5.editorPreferences().showFrameGrids.getCopy();if(o){let n=async()=>{try{let n=await X.Eo.getCanvas(a);r.bufferCallback?.(n);let i=u.l7.system("ensure-style-is-loaded",()=>c.BXd.getOrCreateSubscribedStyleNodeId(a.key,a.content_hash??l.IA.INVALID,a.library_key,n));if(i?.fileUpdateRequired)return;r.omitFullscreenCommit||en.Y5.triggerAction("commit"),d&&((0,ea.c6)(),c.Ez5.editorPreferences().showFrameGrids.set(!0));let o=!1;if("TEXT"===a.style_type&&i&&i.localGUID){let r=e.getState().mirror.sceneGraph.get(i.localGUID),n=r&&r.fontName;n&&await (0,m.VC)(n.family,n.style).catch(()=>{console.error(`Text style font did not load: ${n.family} ${n.style}`),o=!0})}r.callback?.(i.localGUID,o)}catch(n){e.dispatch(M.s.error("An error occurred while applying the style to the selection.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),r.errorCallback?.()}};e.dispatch((0,eM.vQ)({assetLibraryKey:a.library_key,onInsertAsset:n,source:eM.jE.LOAD_STYLE}))}else d&&((0,ea.c6)(),c.Ez5.editorPreferences().showFrameGrids.set(!0)),r.callback?.(a.node_id,!1),r.bufferCallback?.(void 0)}),e4=(0,V.nF)(async(e,r)=>{let{styles:n,updateStartTime:a,subscribedLibraryKeys:i,fileSubscribedLibraryKeys:o}=r,d=e.getState().openFile;if(d)try{let r=await Promise.all(n.map(e=>X.Eo.getCanvas(e))),s=new Set,m=e.getState();await eQ(e.dispatch,n,(e,n)=>{let o=r[n];u.l7.user("update-shared-style",()=>{c.BXd.updateSharedStyle(e.key,e.library_key,e.content_hash??l.IA.INVALID,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,o,a)}),(0,el.GA)(m.library,d,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,m.library.used__LIVEGRAPH.styles,i)&&!s.has(e.library_key)&&s.add(e.library_key)}),en.Y5.triggerAction("commit");let p=n.map(e=>e.id);(0,z.ds)("Styles Updated",m.openFile?.key,e.getState(),{styles:p}),s.size>0&&tM(e,Array.from(s),o)}catch(r){e.dispatch(M.s.error("An error occurred while updating this style.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e7=(0,V.nF)((e,r)=>{let n=c.BXd.getTimestampForLibraryUpdateStart(),{styleUpdateInfo:a,oldStyleGUID:i,consumerGUIDsToUpdate:o}=r,{updateAsset:l}=a;X.Eo.getCanvas(l).then(r=>{let a=e.getState(),{content_hash:s}=l;if(!i)throw Error("guid to update can not be empty");if(!s)throw Error("content_hash not specified on style");let d=u.l7.user("update-selected-shared-style-consumers",()=>c.BXd.updateSelectedSharedStyleConsumers(l.key,l.library_key,s,l.oldSubscribedKeysToUpdate,l.localIdsToUpdate,o,i,r,n));if(en.Y5.triggerAction("commit"),!d)throw Error("unable to update");(0,z.ds)("Styles Updated",a.openFile?.key,e.getState(),{styles:[l.id]})}).catch(r=>{e.dispatch(M.s.error("An error occurred while updating this style.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),e8=(0,V.nF)((e,r)=>{let{variableSets:n,updateStartTime:a}=r;if(e.getState().openFile)return Promise.all(n.map(e=>X.Eo.getCanvas(e))).then(r=>eQ(e.dispatch,n,(e,n)=>{let i=r[n];u.l7.user("update-shared-variable-set",()=>{c.BXd.updateSharedVariableSet(e.node_id,(0,ev.GI)(e)?[]:e.libraryVariableIdsForUpdate,i,a)})})).then(()=>{en.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(M.s.error("An error occurred while updating this variable collection")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),e3=(0,V.nF)((e,r)=>{let{assets:n,updateStartTime:a}=r;return Promise.all(n.map(e=>X.Eo.getCanvas({canvas_url:e.canvasUrl}))).then(r=>eQ(e.dispatch,n,(e,n)=>{let i=r[n];if(i)u.l7.user("update-shared-library-asset",()=>{c.BXd.updateSharedLibraryAsset((0,ey.Hk)(e.type),e.assetId,e.sourceLibraryKey,i,a)});else throw Error("Missing buffer in updateSharedLibraryAssets")})).then(()=>{en.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(M.s.error("An error occurred while updating this asset")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})});async function e6(e){let r=await X.Eo.getCanvas(e);if(!u.l7.system("upsert-shared-variable",()=>c.BXd.upsertSharedVariable(e.node_id,c.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let e9=(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:o}=r;if(!(0,q.d1)(e.getState())){o?.(Error("editing file not found"));return}if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await e6(n);e&&(a?.(n.node_id),i?.(e.buffer))}catch(r){e.dispatch(M.s.error("An error occurred while retrieving the variable.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),v.az.trackDefinedEvent("variables.variable_load.error",{partnerType:(0,er.X)(n.library_key)}),o?.(r)}};e.dispatch((0,eM.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eM.jE.LOAD_VARIABLE}))}else a?.(n.node_id)}),te=(0,V.nF)((e,r)=>new Promise((n,a)=>{e.dispatch(e9({item:r,callback:n,errorCallback:a}))}));async function tt(e){let r=await X.Eo.getCanvas(e);if(!u.l7.system("upsert-shared-variable-set",()=>c.BXd.upsertSharedVariableSet(e.node_id,c.zol.NO,r)).fileUpdateRequired)return{buffer:r}}(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:o}=r;if((0,q.d1)(e.getState())){if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await tt(n);e&&(a?.(n.node_id),i?.(e.buffer))}catch(r){e.dispatch(M.s.error("An error occurred while retrieving the variable collection.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eM.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eM.jE.LOAD_VARIABLE_SET}))}else a?.(n.node_id)}});let tr=(0,V.nF)((e,r)=>{e.dispatch(W.yH({key:(0,eP.yD)(r.openFileKey)})),e.dispatch(W.yH({key:(0,el.iw)(r.openFileKey)}))}),tn=new Set,ta=new Set;function ti(){tn=new Set,ta=new Set}let to=(0,V.nF)(async e=>{let r=e.getState();r.user&&(await eh.gi,ts((0,eg.OQ)(r),(0,eg.LL)(r),e))}),ts=async(e,r,n,a)=>{if(0===e.length&&0===r.length)return;let i=n.getState().openFile;if(!i)return;let o=(a=a??(0,el.lG)(n)).loadingKey;(0,em.VP)(n.getState().loadingState,o)&&await a.promise,n.dispatch(W.Cx({key:o})),"whiteboard"===i.editorType&&await el.kw;let s=n.getState(),l=[];if(e.length>0){let r=new Set([...(0,el.vu)(s.library.publishedByLibraryKey.components).map(e=>e.component_key),...(0,el.$j)(s.library.defaultPublished.componentsByLibraryKey).map(e=>e.component_key)]);l=e.filter(e=>!r.has(e)&&!tn.has(e))}let c=[];if(r.length>0){let e=new Set([...(0,el.vu)(s.library.publishedByLibraryKey.stateGroups).map(e=>e.key),...(0,el.$j)(s.library.defaultPublished.stateGroupsByLibraryKey).map(e=>e.key)]);c=r.filter(r=>!e.has(r)&&!ta.has(r))}try{if(l.length>0||c.length>0){let e=await D.Ay.post("/api/design_systems/components_state_groups",{component_keys:l,state_group_keys:c,org_id:i.parentOrgId});l.forEach(e=>{tn.add(e)}),c.forEach(e=>{ta.add(e)});let r=e.data.meta.components,a=e.data.meta.state_groups,o=e.data.meta.files;n.dispatch(G.uo({files:o,subscribeToRealtime:!0})),n.dispatch(H.dC({subscribedOldKeyToNewKey:e.data.meta.move_remappings,localOldGuidToNewKey:{}}));let s=C.atomStore.get(J.qp);t$(r,ev.PW.COMPONENT,s,n.dispatch),t$(a,ev.PW.STATE_GROUP,s,n.dispatch)}a.callbackForComponent?.(!0)}catch(e){a.callbackForComponent?.(!1)}a.resetPromise(),n.dispatch(W.yH({key:o})),a.callback()},tl=null,tc=null,td=(0,x.fv)();async function tu(e,r,n){try{let a,i;let o=await eI.Z.getLibraryComponentV2({componentKey:r,source:n}),s=o.data.meta.file;s&&e.dispatch(G.yJ({file:s}));let l=o.data.meta.component||null,c=o.data.meta.component_set||null,d=e.getState().fileByKey,u=C.atomStore.get(J.qp);if(l&&(i=u[l.library_key]?.team_id,a=d[td(l)]?.team_id,l.team_id=(0,A.kc)().ds_lk_get_team_id_for_components?i:a,(0,A.kc)().ds_lk_get_team_id_for_components_audit&&a!==i&&(0,P.x1)("library-keys","Mismatch of team id for component when using library keys vs file keys",{teamIdByFileKey:a,teamIdByLibraryKey:i,libraryKey:l.library_key,fileKey:td(l)},{reportAsSentryError:!0})),c&&(i=u[c.library_key]?.team_id,a=d[td(c)]?.team_id,c.team_id=(0,A.kc)().ds_lk_get_team_id_for_components?i:a,(0,A.kc)().ds_lk_get_team_id_for_components_audit&&a!==i&&(0,P.x1)("library-keys","Mismatch of team id for parent state group when using library keys vs file keys",{teamIdByFileKey:a,teamIdByLibraryKey:i,libraryKey:c.library_key,fileKey:td(c)},{reportAsSentryError:!0})),s){let r={};r[l.node_id]=l,o.data.meta.state_components.forEach(e=>{r[e.node_id]=e}),e.dispatch((0,eU.vP)({itemsById:r,fileKey:s.key,libraryKey:(0,h.l)(s.library_key),teamId:s.team_id,type:ev.PW.COMPONENT})),o.data.meta.component_set&&e.dispatch((0,eU.vP)({itemsById:{[o.data.meta.component_set.key]:o.data.meta.component_set},fileKey:s.key,libraryKey:(0,h.l)(s.library_key),teamId:s.team_id,type:ev.PW.STATE_GROUP})),l&&X.Eo.getCanvas(l)}return{component:l,parentStateGroup:o.data.meta.component_set||null}}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/component_v2/key");(0,O.t)("component"),console.error(e)}return{component:null,parentStateGroup:null}}}let tm=(0,V.nF)((e,r)=>{tl=r.componentKey,tc=tu(e,r.componentKey,r.callsite)}),tp=null,th=null,t_=(0,x.fv)();async function tg(e,r){try{let n=(await eI.Z.getLibraryStateGroup({stateGroupKey:r})).data.meta,a={[n.node_id]:n},i=C.atomStore.get(J.qp),o=(0,A.kc)().ds_lk_get_team_id_for_components?i[n.library_key]:e.getState().fileByKey[t_(n)];if(!o)return n;return n.team_id=o.team_id,e.dispatch((0,eU.vP)({itemsById:a,fileKey:o.key,libraryKey:(0,h.l)(o.library_key),teamId:o.team_id,type:ev.PW.STATE_GROUP})),X.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/state_group/key");(0,O.t)("state"),console.error(e)}return null}}async function tf(e,r){try{let{style:n,file:a}=(await eI.Z.getLibraryStyleByKey({styleKey:r})).data.meta;return a&&e.dispatch(G.yJ({file:a})),X.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/styles/key");(0,O.t)("style"),console.error(e)}return null}}let tE=(0,V.nF)((e,r)=>{tp=r.stateGroupKey,th=tg(e,r.stateGroupKey)});async function ty(e){let{loadingState:r}=e.getState(),n=e.getState().openFile;if(null==n)return;let a=(0,el.Mb)((0,h.l)(n.libraryKey));if(!(0,em.Sc)(r,a))return;let i=eI.Z.getLibraryPublishedAndMovedComponents({openFileKey:n.key});(0,e_.N)(i,{dispatch:e.dispatch},a),el.Ys.add(a);try{let r=await i;e.dispatch(G.uo({files:r.data.meta.files,subscribeToRealtime:!0})),(0,el.Ve)(n.key);let a=C.atomStore.get(J.qp);t$(r.data.meta.state_groups,ev.PW.STATE_GROUP,a,e.dispatch),t$(r.data.meta.components,ev.PW.COMPONENT,a,e.dispatch),e.dispatch(H.dC({subscribedOldKeyToNewKey:{},localOldGuidToNewKey:r.data.meta.move_remappings}))}catch(e){console.warn("Failed to get published and moved components for editing file")}(0,el._B)()}let tb=eu.M4.Query({fetch:async e=>(await eS.PT.getOrgMigrationStatus({orgId:e})).data.meta,enabled:e=>!!e}),tv=eu.M4.Query({fetch:async e=>await tT(I.D.dispatch,e),key:"libraryStats"}),tT=async(e,r)=>{let n=eS.PT.getLibraries({orgId:r,fv:eb.O}),a=function(e){return`LIBRARY${e?"_"+e:""}'_STATS'`}(r);(0,e_.N)(n,{dispatch:e},a);try{let r=await n,a=r&&r.data&&r.data.meta||[],i=0,o=0,s=0,l=0,c=0,d=0,u=0,m=0,p=[],h=[],_=new Set,g={};for(let e of a)(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(e.team_id&&!_.has(e.team_id)&&(_.add(e.team_id),u++),p.push(e),h.push(e.file),e.thumbnail_url&&(g[e.library_key]=e.thumbnail_url),i+=e.num_components,s+=e.num_styles,l+=e.num_variable_collections,c+=e.num_variables,e.num_state_groups=0,o+=e.num_state_groups,d+=e.num_module_assets,m++);return h.length>0&&e(G.uo({files:h,subscribeToRealtime:!1})),{totalComponents:i,totalStateGroups:o,totalStyles:s,totalVariableCollections:l,totalVariables:c,totalModuleAssets:d,teamsWithLibraries:u,totalLibraries:m,files:p,libraryThumbnailByLibraryKey:g}}catch(e){return ev.wg}},tI=eu.M4.Query({fetch:e=>tA(e),key:"libraryInfo"}),tS=eu.M4.Query({fetch:async e=>(await eI.Z.getLibrariesV2(e)).data.meta??[],key:"libraryInfoV2"});function tw(e,r={}){let n=(0,eu.IT)(tI(e),r),a=(0,i.wA)(),[o]=n,s=(0,C.useSetAtom)(es.qU);return(0,L.DC)(o,e=>{let r=e.files.map(e=>e.file);r.length>0&&a(G.uo({files:r,subscribeToRealtime:!1})),s(e.files.map(e=>(0,eo.E)(e)))}),n}let tA=(0,eD.D)(async({currentOrgId:e,excludeDrafts:r,subscriptionFileKey:n,includeThumbnails:a,includeSharingGroupInfo:i})=>{let o=eI.Z.getLibraries({orgId:e,subscriptionFileKey:n||void 0,includeThumbnails:a,includeSharingGroupInfo:i});try{let e=await o,n=e&&e.data&&e.data.meta||[],i=0,s=0,l=0,c=0,d=0,u=0,m=0,p=0,h=[],_=[],g=new Set,f={};for(let e of n)e.num_state_groups=0,(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(!r||e.team_id)&&(e.team_id&&!g.has(e.team_id)&&(g.add(e.team_id),m++),h.push(a?{...e,thumbnail_url:e.file.thumbnail_url}:e),_.push(e.file),e.thumbnail_url&&(f[e.library_key]=e.thumbnail_url),i+=e.num_components,l+=e.num_styles,c+=e.num_variable_collections,d+=e.num_variables,s+=e.num_state_groups,u+=e.num_module_assets,p++);return{totalComponents:i,totalStateGroups:s,totalStyles:l,totalVariableCollections:c,totalVariables:d,totalModuleAssets:u,teamsWithLibraries:m,totalLibraries:p,files:h,libraryThumbnailByLibraryKey:f}}catch(e){return{...ev.wg}}});function tC(e){return(0,h.l)(e.libraryKey||"")}function tN(e,r,n){if(!r||!n)return;r=r.filter(e=>e.library||e.communityLibrary),n=n.filter(e=>e.library||e.communityLibrary);let a=y()(r,tC);for(let r of n){let n=tC(r),i=a[n];i&&i.isSubscribed===r.isSubscribed&&i.figJamSubscribed===r.figJamSubscribed&&i.slidesSubscribed===r.slidesSubscribed||e.dispatch((0,eF.F$)({libraryKey:n,subscriptions:{design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed}}))}}function tL(e,r,n){tN(e,r?.map(tO),n?.map(tO))}let tO=e=>({...e}),tR=function(){let e=(0,i.Pj)(),r=(0,j.Ck)(),n=(0,ec.LH)(),{data:o}=(0,N.Rs)(ed.Lew,{}),s=(0,w.ZC)(o);(0,a.useEffect)(()=>{if(!s||!o)return;let r=o?.currentUser?.libraryUserSubscriptions;tL(e,s?.currentUser?.libraryUserSubscriptions,r)},[e,o,s]);let l=(0,ee.Nn)(),c=(0,w.ZC)(l);(0,a.useEffect)(()=>{if(!l||!c)return;let r=(0,ee.sj)(l);tN(e,(0,ee.sj)(c),r)},[e,l,c]);let{data:d}=(0,N.Rs)(ed.AXx,{orgId:n},{enabled:!!n}),u=(0,w.ZC)(d);(0,a.useEffect)(()=>{if(!u||!d)return;let r=d?.orgLibrarySubscriptions;tL(e,u?.orgLibrarySubscriptions,r)},[e,d,u]);let m=(0,ef.cD)(),p=(0,N.Rs)(ed.f19,{}),{data:h}=(0,a.useMemo)(()=>p.transform(e=>{let a=(e.allTeamRoles||[]).filter(e=>e.team&&!e.team.deletedAt&&(e.team.orgId===n||e.team.id===m)).map(e=>e.team),i={};for(let e of a){let n=e.libraryTeamSubscriptionOverrides.map(tO).filter(e=>r()||!e.communityLibrary);i[e.id]=n}return i}),[r,n,m,p]),_=(0,w.ZC)(h);(0,a.useEffect)(()=>{_&&h&&tN(e,Object.values(_).flat(),Object.values(h).flat())},[e,h,_])},tP=(0,V.nF)(async e=>{if(await eE.kb.promise,!e.getState().user)return;let r=Promise.resolve(null),n=Promise.resolve(null),a=Promise.resolve(null);try{await Promise.all([r,a,n])}catch(e){}});async function tD(e){if(!e)return 0;try{return(await eS.PT.getNumTeams({orgId:e})).data.meta.num_teams}catch(e){}return 0}let tk=(0,b.N)("ADD_ASSET_TO_RECENTS"),tM=(e,r,n)=>{let a=e.getState(),i=a.openFile?.key||null,o=a.openFile?.libraryKey||null;i&&r.forEach(r=>{r!==o&&e.dispatch((0,eF.am)({libraryFileSubscription:{file_key:i,library_key:r,is_subscribed:!0},userInitiated:!0,fileSubscribedLibraryKeys:n}))})},tF="LIBRARY_REMAPPING_PROGRESS_VISUAL_BELL",tU=null,tB=(0,V.nF)((e,r)=>{tU={done:0,total:r.total},e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connecting_fraction",{current:0,total:r.total}),type:tF,icon:B.zX.SPINNER,timeoutOverride:1/0}))}),tV=(0,V.nF)((e,r)=>{tU&&(tU.done+=r.done,e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connecting_fraction",{current:tU.done,total:tU.total}),type:tF,icon:B.zX.SPINNER,timeoutOverride:1/0})))}),tG=(0,V.nF)(e=>{tU=null,e.dispatch(U.F.dequeue({matchType:tF})),e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connected"),type:tF,icon:B.zX.CHECK}))}),tH=(0,V.nF)(e=>{tU=null,e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connection_failed"),type:tF,error:!0}))}),tW=(0,V.nF)(e=>{e.getState().userFlags.has_inserted_component||e.dispatch($.b({has_inserted_component:!0}))}),tK=(0,V.nF)(e=>{e.getState().userFlags.has_opened_libraries_modal||e.dispatch($.b({has_opened_libraries_modal:!0}))}),tY=(0,x.fv)();function t$(e,r,n,a){for(let[i,o]of(e=e.map(e=>({...e,team_id:n[e.library_key]?.team_id})),Object.entries(f()(e,e=>e.library_key)))){let e=(0,h.l)(i);a((0,eU.vP)({itemsById:y()(o,e=>e.node_id),fileKey:tY(o[0]),libraryKey:e,teamId:n[e]?.team_id??null,type:r}))}}},643859:(e,r,n)=>{n.d(r,{c:()=>f});var a=n(612724),i=n(76265),o=n(73584),s=n(553362),l=n(534294),c=n(524940),d=n(365347),u=n(366172),m=n(695024),p=n(827473),h=n(396065),_=n(926295);let g="\x3c!--(figcomponent)";(0,l.nF)((e,r)=>{let n=r.dataTransfer?.getData("text/html");if(n){let i=n.indexOf(g)+g.length,o=n.indexOf("(/figcomponent)--\x3e");if(i>=0&&o>=0&&i<o){let s=n.substring(i,o).trim();try{let n=JSON.parse(s);if("object"==typeof n){let i=n.fileKey,o=n.nodeId;if(i&&o){let n=u.Y5.getViewportInfo(),s=new a.Mi(n.x,n.y),l=new a.Mi(r.clientX,r.clientY).subtract(s),c=(0,m.$$)(n,l);e.dispatch(f({fileKey:i,nodeId:o,canvasX:c.x,canvasY:c.y}))}}}catch(e){}}}});let f=(0,l.nF)(async(e,r)=>{let{fileKey:n,nodeId:l,canvasX:u,canvasY:m}=r,g=e.getState(),f=(0,d.d1)(g),E=null;if(f&&f.key===n)E=g.library.local.components[l]??null;else{g.fileByKey[n]||(await e.dispatch((0,_.n)({libraryKey:(0,o.$)(n)})),g=e.getState());let r=g.fileByKey[n],a=r?(0,h.l)(r):void 0;!a||(E=(0,p.HK)(g.library.publishedByLibraryKey.components,a)[l]??null)||(await e.dispatch((0,_.n)({libraryKey:(0,o.$)(n)})),g=e.getState(),E=(0,p.HK)(g.library.publishedByLibraryKey.components,a)[l]??null)}E?e.dispatch(c.Yf({item:E,canvasPosition:new a.Mi(u,m),percentageOffset:new a.Mi(.5,.5),insertAsChildOfCanvas:!1})):e.dispatch(s.F.enqueue({type:"insert_component_error",message:(0,i.t)("design_systems.subscriptions.this_component_is_not_available"),error:!0}))})},900183:(e,r,n)=>{n.d(r,{F$:()=>I,am:()=>S,fR:()=>w,nE:()=>A});var a=n(217950),i=n(805014),o=n(777535),s=n(657548),l=n(550479),c=n(76265),d=n(553362),u=n(534294),m=n(20174),p=n(365347),h=n(827473),_=n(210830),g=n(747765),f=n(957020),E=n(558303),y=n(767731),b=n(926295);let v="file_key_optimistic_update",T="hub_file_id_optimistic_update",I=(0,u.nF)((e,{libraryKey:r,subscriptions:n})=>{if(!n||(0,h.td)(e.getState().library.defaultPublished,r))return;let a=(0,p.d1)(e.getState());if(a){let o=a.editor_type??"design";(!0===n||"design"===o&&n.design||"whiteboard"===o&&n.figjam)&&(e.getState().leftPanel.activeTab===i.xae.ASSETS||e.getState().universalInsertModal.showing?e.dispatch((0,b.n)({libraryKey:r})):e.dispatch(m.yH({key:(0,y.yD)(a.key)})))}}),S=(0,u.nF)(async(e,r)=>{let{libraryFileSubscription:n,userInitiated:i,publishedLibrary:o,fileSubscribedLibraryKeys:u}=r,{file_key:m,is_subscribed:p,id:h,library_key:_}=n,g=e.getState().openFile?.key||null;if(g===m&&e.dispatch(I({libraryKey:_,subscriptions:p})),u.has(_)&&p||!i)return;let y=E.A.postFileSubscriptionByLibraryKey({libraryKey:_,fileKey:m,isSubscribed:p});h?s.WB()?.optimisticallyUpdate({LibraryFileSubscription:{[h]:{isSubscribed:p}}},y):p&&o&&s.WB()?.optimisticallyCreate({LibraryFileSubscription:{[`optimistic-id-${_}`]:{isSubscribed:p,fileKey:m,hubFileId:T,libraryKey:_??null,libraryFileKey:v,canRead:!0,library:{updatedAt:new Date,createdAt:new Date,numComponents:o.num_components,numStateGroups:o.num_state_groups??0,numStyles:o.num_styles,numStylesFill:0,numStylesText:0,numStylesEffect:0,numStylesGrid:0,numVariables:o.num_variables,numVariablesBoolean:0,numVariablesColor:0,numVariablesFloat:0,numVariablesString:0,numLibraryAssets:0,numVariableSets:o.num_variable_collections,numModuleAssets:o.num_module_assets,fileKey:v,file:{_id:`optimistic-id-${v}`,_name:null,key:v,name:o.library_name,libraryKey:o.library_key,signedThumbnailUrl:o.thumbnail_url,signedThumbnailUrlOverride:null,thumbnailUrl:o.thumbnail_url,thumbnailUrlOverride:null,parentOrgId:null,thumbnailGuid:f.Nf(o)?o.thumbnail_guid:null},hubFileId:T,canRead:!0},communityLibrary:null}}},y);try{await y}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{openFileKey:g,fileKey:m,libraryKey:_,isSubscribed:p}})}}),w=(0,u.nF)(async(e,r)=>{let{libraryUserSubscription:n,userInitiated:i,existingSubscription:s}=r,{library_key:u,subscriptions:m}=n;if(e.dispatch(I({libraryKey:u,subscriptions:m})),!i)return;let p={libraryKey:u,userId:e.getState().user?.id,library:{libraryKey:u,fileKey:v}},h=E.A.postUserSubscriptionByLibraryKey({libraryKey:u,subscriptions:m});(0,_.J)(s,g.Qh.USER,m.design,m.figjam,m.slides,p,h);try{if(!u)throw Error("Library key is required for user subscription");await h,o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:m.design,figjamSubscribed:m.figjam,slidesSubscribed:m.slides,subscriptionType:"user",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:m.design,figjamSubscribed:m.figjam,slidesSubscribed:m.slides,subscriptionType:"user",outcome:"error"}),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:u,designSubscribed:m.design,figjamSubscribed:m.figjam,slidesSubscribed:m.slides}})}}),A=(0,u.nF)(async(e,r)=>{let{libraryTeamSubscription:n,userInitiated:i,existingSubscription:s}=r,{library_key:u,subscriptions:m,team_id:p}=n;if(e.dispatch(I({libraryKey:u,subscriptions:m})),!i)return;let h=E.A.postTeamSubscriptionByLibraryKey({libraryKey:u,subscriptions:m,teamId:p});(0,_.J)(s,g.Qh.TEAM,m.design,m.figjam,m.slides,{libraryKey:u,teamId:p,library:{libraryKey:u,fileKey:v,hubFileId:T}},h);try{if(!u)throw Error("Team subscription requires a library key");await h,o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:m.design,figjamSubscribed:m.figjam,slidesSubscribed:m.slides,subscriptionType:"team",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:m.design,figjamSubscribed:m.figjam,slidesSubscribed:m.slides,subscriptionType:"team",outcome:"error"}),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:u,designSubscribed:m.design,figjamSubscribed:m.figjam,slidesSubscribed:m.slides}})}});(0,u.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:a,workspaceName:i}=r,{libraryKey:o,subscriptions:l,workspaceId:u}=n,m=E.A.postWorkspaceSubscriptionByLibraryKey({libraryKey:o,subscriptions:l,workspaceId:u});n.id?(0,s.WB)().optimisticallyUpdate({LibraryWorkspaceSubscription:{[n.id]:{isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides}}},m):(0,s.WB)().optimisticallyCreate({LibraryWorkspaceSubscription:{[`library-workspace-sub-${performance.now()}`]:{fileKey:v,workspaceId:u,libraryKey:o,isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides,canRead:!0,hubFileId:T}}},m);try{await m,e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:a,orgOrWorkspaceName:i})}))}catch(r){e.dispatch(d.F.enqueue({message:r?.message??(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,u.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:a,workspaceName:i}=r,{libraryKey:o,workspaceId:l}=n,u=E.A.deleteWorkspaceSubscriptionByLibraryKey({libraryKey:o,workspaceId:l});n.id&&(0,s.WB)().optimisticallyDelete({LibraryWorkspaceSubscription:{[n.id]:null}},u);try{await u,e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:a,orgOrWorkspaceName:i})}))}catch(r){e.dispatch(d.F.enqueue({message:r?.message??(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,u.nF)(async(e,r)=>{let{libraryOrgSubscription:n,libraryTeamId:i,userInitiated:s}=r,{orgId:u,subscriptions:m,libraryKey:p}=n;if(e.dispatch(I({libraryKey:p,subscriptions:m})),s){if(r.currentSubscription){let e=n.subscriptions.design;!(r.currentSubscription?.design||r.currentSubscription?.figjam)&&e?(0,o.sx)("Org Library File Enabled",{orgId:u,libraryKey:p,fileTeamId:i}):(0,o.sx)("Org Library File Disabled",{orgId:u,libraryKey:p,fileTeamId:i}),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,subscriptionType:"org"})}try{await E.A.postOrgSubscriptionByLibraryKey({libraryKey:n.libraryKey,subscriptions:m,orgId:u}),e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:r.libraryName,orgOrWorkspaceName:r.orgName})})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,subscriptionType:"org",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,subscriptionType:"org",outcome:"error"}),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:n.libraryKey,designSubscribed:m.design,figjamSubscribed:m.figjam,slidesSubscribed:m.slides}})}}})},254760:(e,r,n)=>{n.d(r,{Fw:()=>S,GT:()=>R,T1:()=>L,rb:()=>O,sA:()=>T,t9:()=>I,us:()=>C,xp:()=>N});var a=n(846288),i=n(236891),o=n(488336),s=n(217950),l=n(879058),c=n(805014),d=n(124497),u=n(201863),m=n(777535),p=n(550479),h=n(653798),_=n(508794),g=n(534294),f=n(888807),E=n(481954),y=n(542005),b=n(598378),v=n(957020);function T(e,r){return`/variable_set/${e}/thumbnails?ver=${r}`}function I(e,r,n,a,i){let o=r[e];if(!o||!o.variableThumbnails)return null;let s=o.variableThumbnails[n]??null;for(;s?.type===c.Z_n.ALIAS;){let e=i[s.variableCollectionKey];if(e&&s.values&&s.values[e]){s=s.values[e];continue}e&&"MIXED"!==e&&(0,m.sx)("Fallback to default variable thumbnail",{variableId:n,variableType:a,mode:e});let r=s.defaultMode;if(!r||!s.values||!s.values[r])return null;s=s.values[r]}return s}let S=(0,g.nF)((e,r)=>{let{variableSet:n,variableId:a,variableType:i,modeContext:o,callback:s}=r,l=d.sH(n.node_id);if(!l){console.error(`Invalid variableId in loading thumbnails: ${n.id}`);return}w(n).then(e=>{let r=I(d.dI(l),e.thumbnails,a,i,o);s?.(r)}).catch(e=>{console.error(`Variable thumbnail did not load: ${a}`),console.error(e)})});async function w(e){return{thumbnails:await E.Eo.getVariableSetThumbnails(T(e.key,e.checkpoint_id))}}function A(e,r){let n=e.style_type,a=e.meta?e.meta.style_thumbnail:null;if((0,b.Kb)(n)&&(!r||r.content_hash!==e.content_hash||!a))try{a=(0,E.oU)(e.style_type,e.node_id)}catch(r){(0,h.x1)("thumbnails","error generating local style css thumbnail",{name:e.name,type:e.style_type,libraryKey:e.library_key,key:e.key}),(0,p.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}if(a&&((0,b.lP)(e.style_type)||(0,E.UE)(a)))return{contentHash:e.content_hash,nodeId:e.node_id,styleThumbnail:a,type:v.PW.STYLE,url:void 0};if(!r||r.content_hash!==e.content_hash||!r.url||r.url===E.u0||r.url===E.r8){let r=P.acquire(e.node_id,e.content_hash);return r?("FILL"!==e.style_type?Promise.resolve():(0,_.i$)((0,y.Jr)().loadAllImagesUnder([e.node_id],c.MoD.NON_ANIMATED_ONLY,"style-thumbnail"),()=>{(0,h.x1)("thumbnails","image manager failed to load",{name:e.name,key:e.key,libraryKey:e.library_key})},1e4)).then(()=>scheduler.postTask(()=>(0,E.aV)(e.node_id,e.style_type),r).catch(r=>("AbortError"!==r.name&&((0,h.x1)("thumbnails","error generating local style url thumbnail",{name:e.name,type:e.style_type,libraryKey:e.library_key,key:e.key}),(0,p.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)),E.r8)).then(r=>({contentHash:e.content_hash,nodeId:e.node_id,styleThumbnail:a,type:v.PW.STYLE,url:r}))):null}return null}let C=(0,u.N)("LIBRARY_ADD_THUMBNAIL_FOR_DANGLING_STYLE"),N=(0,u.N)("LIBRARY_THUMBNAIL_REPLACE_LOCAL_THUMBNAILS"),L=(0,g.nF)((e,r)=>{let n=e.getState(),i=n.library.local.thumbnails,o=n.library.local.components,s=n.library.local.stateGroups,l=n.library.local.styles,c=n.library.local.modules,d=null,u=null;for(let{nodeId:e,url:n,contentHash:m,styleThumbnail:p,type:h}of r.thumbnails){let _;if(h===v.PW.COMPONENT)_=o;else if(h===v.PW.STATE_GROUP)_=s;else if(h===v.PW.STYLE)_=l;else{if(h===v.PW.VARIABLE||h===v.PW.VARIABLE_SET||h===v.PW.VARIABLE_OVERRIDE||h===v.PW.RESPONSIVE_SET||h===v.PW.CONSTRAINED_TEMPLATE||h===v.PW.CODE_LIBRARY||h===v.PW.CODE_FILE||h===v.PW.MANAGED_STRING||h===v.PW.CODE_COMPONENT)continue;h===v.PW.MODULE?_=c:(0,a.xb)(h)}if(r.source===v.$1.LOCAL&&!(e in _))continue;let g=i[e]&&i[e].url;g&&n&&(0,E.qv)(g);let f=r.source===v.$1.LOCAL?_[e]:r.item,y=(()=>{if(null!=m)return m;if(f)switch(f.type){case v.PW.COMPONENT:case v.PW.STYLE:return f.content_hash;case v.PW.STATE_GROUP:case v.PW.VARIABLE:case v.PW.VARIABLE_SET:case v.PW.MODULE:case v.PW.RESPONSIVE_SET:case v.PW.CODE_COMPONENT:return f.version;default:(0,a.xb)(f,"Unhandled item type")}})(),b=(d||i)[e];if(b&&b.url===n&&b.content_hash===y||(d||(d={...i}),d[e]={kind:r.source===v.$1.LOCAL?v.AT.LOCAL:v.AT.LIBRARY,url:n,content_hash:y}),h===v.PW.STYLE&&r.source===v.$1.LOCAL){let r=(u||l)[e];r&&(!r.meta||r.meta.style_thumbnail!==p)&&(u||(u={...l}),u[e]={...r,meta:{...r.meta,style_thumbnail:p}})}}d&&e.dispatch(N({thumbnails:d})),u&&r.source===v.$1.LOCAL&&e.dispatch(f.I0({local:u,type:v.PW.STYLE}))}),O=(0,g.nF)(async(e,r)=>{if(r.styleKind===v.AT.LOCAL){let n=e.getState().library.local.styles[r.styleNodeId],a=e.getState().library.local.thumbnails[r.styleNodeId];if(n){let r;let i=A(n,a);i instanceof Promise?(r=await i,P.release(r.nodeId,r.contentHash)):i&&(r=i),r&&e.dispatch(L({thumbnails:[r],source:v.$1.LOCAL}))}}else if(r.styleKind===v.AT.DANGLING){if(e.getState().library.local.thumbnails[r.styleNodeId])return;let n=(0,E.aV)(r.styleNodeId,"FILL");e.dispatch(C({styleID:r.styleNodeId,url:n}))}}),R=(0,g.nF)(async(e,r)=>{let n=e.getState().library.local.styles,a=e.getState().library.local.thumbnails,s=r.styleType,l=[],c=[];for(let e in n){let r=n[e];if(r.style_type!==s)continue;let i=A(r,a[e]);i instanceof Promise?c.push(i):null!=i&&l.push(i)}if(l.length>0&&e.dispatch(L({thumbnails:l,source:v.$1.LOCAL})),c.length>0)for(let r=0;r<c.length;r+=50){let n=(await (0,o._7)(c.slice(r,r+50))).map(e=>e.resolve).filter(i.Vq);for(let e of n)P.release(e.nodeId,e.contentHash);e.dispatch(L({thumbnails:n,source:v.$1.LOCAL}))}}),P=(()=>{let e=new Map;return{acquire(r,n=l.IA.INVALID){let a=e.get(r);if(a?.contentHash===n)return null;a&&a.controller.abort();let i=new TaskController({priority:"user-visible"});return e.set(r,{controller:i,contentHash:n}),i.signal},release(r,n=l.IA.INVALID){let a=e.get(r);a?.contentHash===n&&e.delete(r)}}})()},564854:(e,r,n)=>{n.d(r,{Nf:()=>u,aW:()=>p,vP:()=>m});var a=n(217950),i=n(841962),o=n(550479),s=n(534294),l=n(888807),c=n(827473),d=n(957020);let u=(0,s.nF)(e=>{(0,c.KQ)(e)}),m=(0,s.nF)((e,r)=>{e.dispatch(l.$I(r)),e.getState().openFile&&e.dispatch(u()),!r.libraryKey&&(0,i.kc)().dse_lk_realtime_audit&&(0,o.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("putProductComponents called without a libraryKey"),{tags:{libraryFileKey:r.fileKey,openFileKey:e.getState().openFile?.key,teamId:r.teamId,type:r.type}})}),p=(0,s.nF)((e,r)=>{let{stateGroups:n,components:a,fileKeyOrHubFileId:i,libraryKey:o,teamId:s}=r;if(0!==n.length){let r=n.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(m({itemsById:r,fileKey:i,libraryKey:o,teamId:s??null,type:d.PW.STATE_GROUP}))}if(0!==a.length){let r=a.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(m({itemsById:r,fileKey:i,libraryKey:o,teamId:s??null,type:d.PW.COMPONENT}))}})},738739:(e,r,n)=>{n.d(r,{De:()=>j,Sb:()=>K,TS:()=>z,WM:()=>$,ZS:()=>et,df:()=>Y,sb:()=>X});var a=n(846288),i=n(236891),o=n(217950),s=n(805014),l=n(414796),c=n(636149),d=n.n(c),u=n(201863),m=n(777535),p=n(841962),h=n(703079),_=n(94489),g=n(988927),f=n(550479),E=n(653798),y=n(677840),b=n(76265),v=n(717288),T=n(563846),I=n(960579),S=n(534294),w=n(888807),A=n(736041),C=n(241162),N=n(365347),L=n(265769),O=n(801394),R=n(722199),P=n(827473),D=n(832617),k=n(6253),M=n(77383),F=n(689102),x=n(384894),U=n(957020),B=n(211270),V=n(622233),G=n(816403),H=n(605501),W=n(564854);let K=(0,u.N)("START_PUBLISH"),Y=(0,u.N)("PUBLISH_PROGRESS"),$=(0,u.N)("PUBLISH_REQUEST_FINISHED"),j=(0,u.N)("SAVE_PUBLISH_DESCRIPTION"),z=(0,S.nF)(e=>{e.dispatch(T.Q.dequeue({type:v._.MOVE_COMPONENTS_PROMPT})),(0,y.YQ)({id:"Finished publishing components"}),e.dispatch($())}),q="library publish SSP";var Z=(e=>(e.PublishStart="publish_start",e.CreateSavepoint="create_savepoint",e.GetPresignedPost="get_presigned_post",e.UploadThumbnails="upload_thumbnails",e.UploadParams="upload_params",e.AssetValidation="asset_validation",e.NonS3Error="non_s3_error",e.GenericError="generic_error",e))(Z||{});let X=(0,S.nF)((e,{hubFileId:r,localAssetsWithDenormalizedPublishInfo:n})=>{let a=e.getState(),i=(0,p.kc)().ds_remove_redux_library_status;if(!i){let r=e=>{for(let r in e={...e})(0,P.HF)(e[r].status)?e[r].status=U.E8.DELETED:e[r].status===U.E8.NEW&&(e[r].status=U.E8.NOT_STAGED);return e},n=r(a.library.local.components),i=r(a.library.local.stateGroups),o=r(a.library.local.styles);e.dispatch(w.I0({local:n,type:U.PW.COMPONENT})),e.dispatch(w.I0({local:i,type:U.PW.STATE_GROUP})),e.dispatch(w.I0({local:o,type:U.PW.STYLE}))}e.dispatch(Y({state:U.Qx.NONE})),e.dispatch(et({unpublishAll:i,hubFileId:r,localAssetsWithDenormalizedPublishInfo:n}))});async function J(e,r,n,a){let i=new _.jk("publish.client.generate_and_upload_thumbnails",{});if(i.start(),!e.length)return{s3Paths:[],failedThumbnailNodeIds:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let s=e.length,l=0,c=()=>{!function(e,r,n){e.dispatch(Y({state:U.Qx.ASSEMBLING_COMPONENTS,progress:r,publishType:n,publishStartMs:Q(e.getState().library.publishProgress)}))}(a,(l+=1)/s,r?U.M$.UNPUBLISH:U.M$.PUBLISH)},d=Object.create(null),u=[],p=[];if(await Promise.all(e.map(async e=>{try{let r=await scheduler.postTask(()=>(0,G.I6)(e,n),{priority:"user-blocking"});if(!r||0===r.length)throw Error("Unable to generate thumbnail");let[a,i]=e.node_id.split(":").map(e=>Number(e));if(isNaN(a))throw Error("Unable to parse sessionId");if(isNaN(i))throw Error("Unable to parse localId");p.push({sessionId:a,localId:i,thumbnail:r}),e.type===U.PW.STYLE&&(d[e.node_id]=JSON.stringify((0,G.fn)(e,n)))}catch(r){(0,E.x1)("publish","Failed to upload thumbnail for asset",{guid:e.node_id},{reportAsSentryError:!0}),u.push(e.type===U.PW.COMPONENT&&e.containing_frame?.containingStateGroup?.nodeId||e.node_id)}finally{c()}})),0===p.length)return{s3Paths:[],failedThumbnailNodeIds:u,styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let y=[];for(;p.length;)y.push(p.splice(0,U.v$));let b=V.b.getThumbnailsBufferPresignedPostUrl(y.length),v=y.map(e=>e.reduce(({buffer:e,offset:r,guids:n},{sessionId:a,localId:i,thumbnail:o})=>(e.set([(0xff000000&a)>>24,(0xff0000&a)>>16,(65280&a)>>8,255&a,(0xff000000&i)>>24,(0xff0000&i)>>16,(65280&i)>>8,255&i,(0xff000000&o.byteLength)>>24,(0xff0000&o.byteLength)>>16,(65280&o.byteLength)>>8,255&o.byteLength],r),r+=12,e.set(o,r),r+=o.byteLength,n.push(`${a}:${i}`),{buffer:e,offset:r,guids:n}),{buffer:new Uint8Array(e.reduce((e,{thumbnail:r})=>e+r.byteLength+12,0)),offset:0,guids:[]})),T=[],I=(await b).data.meta.presigned_posts,S=!1;await Promise.allSettled(I.map(async({url:e,fields:r})=>{let n=v.shift();if(!n){(0,f.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Popped a concatenated buffer that does not exist"));return}try{T.push(await (0,g.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"uploadThumbnails",e,r,n.buffer,"application/octet-stream")),(0,h.S3)("publish.thumbnails_buffer.bytes",n.buffer.byteLength)}catch(e){e instanceof g.qW&&(S=!0),u.push(...n.guids)}})),S&&(0,f.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("uploadThumbnails: encountered non-S3 presigned POST error"));let w=i.stop();return w&&(0,m.sx)("Library generate and upload thumbnails",{elapsedMs:w,duration:w},{forwardToDatadog:!0}),{s3Paths:T,styleMetaByNodeId:d,failedThumbnailNodeIds:u,uploadDurationMs:w,encounteredNonS3PresignedPostError:S}}function Q(e){return e.state===U.Qx.NONE?((0,E.x1)(q,"Attempted to update progress while not assembling components",e),null):e.publishStartMs}function ee(e,r,n,a){let i=Q(e);if(i){let e=performance.now()-i;(0,m.sx)(r,{duration:e}),(0,h.S3)(n,e,{error:a})}else(0,E.x1)(q,"Publish start time was null")}let et=(0,S.nF)(async(e,r={})=>{let n,c,u,y,v,T,S;let w=e.getState(),V=r.onPublishSuccess??H.cc,$=r.onPublishProgress??H.UN,Z=r.onPublishError??H.tZ,X=r.localAssetsWithDenormalizedPublishInfo??{};if(w.library.publishProgress.state!==U.Qx.NONE){e.dispatch(z());return}let et=(0,N.d1)(w);if(!et){console.error("library publishChanges: file is null"),Z({error:H.jO.NoFile,dispatch:e.dispatch}),e.dispatch(z());return}let er=r.itemsToPublish;if(void 0!==er&&0===er.size){console.error("No items selected to publish"),Z({error:H.jO.NoItemsToPublish,dispatch:e.dispatch}),e.dispatch(z());return}let en=[U.PW.CODE_COMPONENT,U.PW.RESPONSIVE_SET].every(e=>!(0,x.O)(e)||(0,D.aB)(Object.values(X).filter(r=>r.type===e),er)),ea=r.unpublishAll||(0,D.aB)(Object.values((0,M.MH)(w)),er)&&(0,D.aB)(Object.values((0,M.dM)(w)),er)&&(0,D.aB)(Object.values((0,M.cM)(w)),er)&&(0,D.aB)(Object.values((0,M.bh)(w)),er)&&(!(0,x.O)(U.PW.MODULE)||(0,D.aB)(Object.values((0,M.x6)(w)),er))&&en;(0,h.Rh)(`${ea?U.M$.UNPUBLISH:U.M$.PUBLISH}.start`),e.dispatch(K({unpublishAll:!!ea})),e.dispatch(C.b({has_published_library_items:!0}));let ei=(n,a,i,o)=>{e.dispatch((0,W.Nf)());let l=o?.encounteredNonS3PresignedPostError?"non_s3_error":a;ee(e.getState().library.publishProgress,n,`${ea?U.M$.UNPUBLISH:U.M$.PUBLISH}.error.duration`,l);let c=o?.error;(0,E.x1)(q,n,{...r,name:c?.name,message:c?.message,stack:c?.stack},{logToConsole:s.NUh.ALWAYS,reportAsSentryError:!0,forwardToDatadog:!0}),null!==i&&(0,m.sx)("Publish ended",{savepointId:i,hadException:!0}),function(e,r,n,a,i,o,s,l){0===r?function(e,r,n,a){if(r.state===U.Qx.UPLOADING){let e=Q(r);if(e){let a=performance.now(),i=a-e,o=n?{totalDurationMs:i}:{totalDurationMs:i,uploadBuffersDurationMs:a-r.commitUpdatesDurationMs,clientPreWorkDurationMs:r.clientPreWorkDurationMs,createSavePointDurationMs:r.createSavePointDurationMs};for(let[e,n]of((0,m.sx)(`Client perceived ${r.publishType} duration`,o),Object.entries(o))){let a=`${r.publishType}.success.${e}`;(0,h.S3)(a,n)}}else(0,E.x1)(q,"Publish start time was null")}a({publishProgress:r,publishType:n?U.M$.UNPUBLISH:U.M$.PUBLISH,dispatch:e}),e(j(""))}(a,e,n,i):function(e,r,n,a,i,o,s){let l=a?U.M$.UNPUBLISH:U.M$.PUBLISH;if(o&&e(j(o)),s){i({error:H.jO.NonS3PresignedPost,publishType:l,dispatch:e});return}"number"!=typeof n?i({error:H.jO.GenericError,publishType:l,dispatch:e}):(ee(r,"Partial publish failure",`${l}.partial_error.duration`,"asset_validation"),i({error:H.jO.PartialPublish,publishType:l,dispatch:e,numPublishSkippedDueToError:n}))}(a,e,r,n,o,s,l)}(e.getState().library.publishProgress,o?.numSkippedDueToError??{__tag:"UNKNOWN"},ea,e.dispatch,V,Z,r.savepointDescription,o?.encounteredNonS3PresignedPostError),e.dispatch(z()),e.dispatch(A.Ce())},eo=(0,D.jx)((0,M.dM)(w),(0,M.MH)(w),(0,M.cM)(w),(0,M.tK)(w),(0,M.bh)(w),(0,M.x6)(w),X,et,w.teams,{overridePublishPermissions:!!r.hubFileId,moveRemappings:r.moveInformation?.moveRemappings??{},itemsToPublish:er,forcePublish:r.forcePublish,unpublishAll:r.unpublishAll});(0,p.kc)().ds_ssp_thumbnailing_for_text_styles_client_prep&&function(e){let r=new _.jk("publish.client.prep_nodes_for_thumbnailing",{});r.start();let n=e[U.PW.STYLE][U.M$.PUBLISH].filter(e=>e.style_type===l.s4.TEXT);n.forEach(e=>{s.glU.prepNodeForAssetThumbnailRendering(e.node_id)});let a=r.stop();a&&(0,m.sx)("Prepared node fields used for thumbnail rendering",{elapsedMs:a,textStylesCount:n.length},{forwardToDatadog:!0})}(eo);let es=performance.now(),el="slides"===et.editor_type,ec=el?(0,b.t)("design_systems.publish_actions.savepoint_for_unpublish_slides"):(0,b.t)("design_systems.publish_actions.savepoint_for_unpublish"),ed=el?(0,b.t)("design_systems.publish_actions.savepoint_for_publish_slides"):(0,b.t)("design_systems.publish_actions.savepoint_for_publish");try{n=await (0,k.m)(et.key,ea?ec:ed,r.savepointDescription,e.dispatch,!0)}catch(r){navigator.onLine?ei("Unable to create savepoint during library publish","create_savepoint",null,{error:r}):(Z({error:H.jO.Offline,publishType:ea?U.M$.UNPUBLISH:U.M$.PUBLISH,dispatch:e.dispatch}),e.dispatch(z()));return}if(!n){ei("Created savepoint is null","create_savepoint",null);return}let eu=performance.now()-es;(0,m.sx)("Publish start: savepoint successfully created",{savepointId:n.id});let em=d()(Object.values(w.library.local.components).filter(e=>e.isLocal),e=>(0,P.E2)(e)||U.Nv),ep=(0,F.H7)(w),{orderedUpdates:eh}=function(e){let r=[],n=e=>{e.assets.length&&r.push(e)},a=e[U.PW.VARIABLE_SET][U.M$.PUBLISH];n({publishType:U.M$.PUBLISH,assetType:U.PW.VARIABLE_SET,assets:a}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.VARIABLE_SET,assets:e[U.PW.VARIABLE_SET][U.M$.UNPUBLISH]}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.VARIABLE,assets:e[U.PW.VARIABLE][U.M$.UNPUBLISH]});let i=e[U.PW.STATE_GROUP][U.M$.PUBLISH],o=e[U.PW.COMPONENT][U.M$.UNPUBLISH].filter(e=>null===(0,P.E2)(e));return n({publishType:U.M$.PUBLISH,assetType:U.PW.STATE_GROUP,assets:i}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.STATE_GROUP,assets:e[U.PW.STATE_GROUP][U.M$.UNPUBLISH]}),n({publishType:U.M$.PUBLISH,assetType:U.PW.COMPONENT,assets:e[U.PW.COMPONENT][U.M$.PUBLISH].filter(e=>!(0,P.E2)(e))}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.COMPONENT,assets:o}),n({publishType:U.M$.PUBLISH,assetType:U.PW.STYLE,assets:e[U.PW.STYLE][U.M$.PUBLISH]}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.STYLE,assets:e[U.PW.STYLE][U.M$.UNPUBLISH]}),(0,x.O)(U.PW.MODULE)&&(n({publishType:U.M$.PUBLISH,assetType:U.PW.MODULE,assets:e[U.PW.MODULE][U.M$.PUBLISH]}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.MODULE,assets:e[U.PW.MODULE][U.M$.UNPUBLISH]})),(0,x.O)(U.PW.RESPONSIVE_SET)&&(n({publishType:U.M$.PUBLISH,assetType:U.PW.RESPONSIVE_SET,assets:e[U.PW.RESPONSIVE_SET][U.M$.PUBLISH]}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.RESPONSIVE_SET,assets:e[U.PW.RESPONSIVE_SET][U.M$.UNPUBLISH]})),(0,x.O)(U.PW.CODE_COMPONENT)&&(n({publishType:U.M$.PUBLISH,assetType:U.PW.CODE_COMPONENT,assets:e[U.PW.CODE_COMPONENT][U.M$.PUBLISH]}),n({publishType:U.M$.UNPUBLISH,assetType:U.PW.CODE_COMPONENT,assets:e[U.PW.CODE_COMPONENT][U.M$.UNPUBLISH]})),{orderedUpdates:r}}(eo),e_=eh.reduce((e,{publishType:r,assetType:n,assets:i})=>{let o="";switch(n){case U.PW.COMPONENT:o="numComponentBuffers";break;case U.PW.STATE_GROUP:o="numStateGroupBuffers";break;case U.PW.STYLE:o="numStyleBuffers";break;case U.PW.VARIABLE_SET:o="numVariableSetBuffers";break;case U.PW.MODULE:o="numTemplateBuffers";break;case U.PW.VARIABLE:case U.PW.VARIABLE_OVERRIDE:break;case U.PW.RESPONSIVE_SET:o="numResponsiveSetBuffers";break;case U.PW.CODE_LIBRARY:case U.PW.CODE_FILE:case U.PW.CODE_COMPONENT:case U.PW.CONSTRAINED_TEMPLATE:case U.PW.MANAGED_STRING:break;default:(0,a.xb)(n)}r===U.M$.UNPUBLISH&&(o=`${o}Unpublished`);let s=o;return s in e&&(e[s]=i.length),e},{numComponentBuffers:0,numStateGroupBuffers:0,numStyleBuffers:0,numVariableSetBuffers:0,numTemplateBuffers:0,numResponsiveSetBuffers:0,numComponentBuffersUnpublished:0,numStateGroupBuffersUnpublished:0,numStyleBuffersUnpublished:0,numVariableSetBuffersUnpublished:0,numTemplateBuffersUnpublished:0,numResponsiveSetBuffersUnpublished:0});(0,m.sx)("Library publish upload",{fileKey:et.key,publishMode:(0,L.z)((0,M.Io)(w)),publishScope:r.publishScope,libraryModalSessionId:r.libraryModalSessionId,orgId:ep?.org_id,workspaceId:ep?.workspace_id,teamId:ep?.id,...e_});let eg=eh.flatMap(e=>e.publishType===U.M$.PUBLISH?e.assets:[]).reduce((e,r)=>r.type!==U.PW.VARIABLE&&r.type!==U.PW.VARIABLE_SET&&(0,x.O)(r.type)?r.type===U.PW.MODULE?e.concat(r):e.concat(r).concat(em[r.node_id]||[]):e,[]);if((0,p.kc)().ssp_stop_client_gen_thumb_generation)c={failedThumbnailNodeIds:[],s3Paths:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};else try{c=await J(eg,ea,w.library.local.thumbnails,e)}catch(e){ei("Unable to upload thumbnails during library publish","upload_thumbnails",n.id,{error:e});return}let{failedThumbnailNodeIds:ef,s3Paths:eE,styleMetaByNodeId:ey,uploadDurationMs:eb,encounteredNonS3PresignedPostError:ev}=c,eT=eh.flatMap(e=>e.assets).length;if(ef.length===eT){ei("All thumbnails failed to upload"+(ev?" (non-s3 error)":""),"upload_thumbnails",n.id,{numSkippedDueToError:eT,encounteredNonS3PresignedPostError:ev});return}let eI=eh.map(({publishType:e,assetType:r,assets:n})=>{let a=n.filter(e=>!ef.includes(e.node_id));return a.length>0?{publishType:e,assetType:r,assets:a}:null}).filter(i.Vq);if((0,p.kc)().first_draft_publish_ux&&(r.publishAsFirstDraftKit||r.unpublishAll)){let e=s.XJn.getLocalDesignSystemKits();if(e.length>1)(0,E.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:e.map(e=>e.name)});else if(1===e.length){let n=e[0];if(!n){(0,E.xi)("first_draft","No kit found for publishing",{kits:e});return}S=await (0,O.Hj)(n.pageId,n.name,{publishType:R.tf.LIBRARY_PUBLISH,localComponents:(0,M.MH)(w),localStateGroups:(0,M.dM)(w),localVariableSets:(0,M.bh)(w),isDirectGenCompatible:r.isDirectGenCompatible??!1},r.firstDraftVariablesForTheme,r.unpublishAll)}}let eS={updates:eI.map(e=>({publishType:e.publishType,assetType:e.assetType,guids:e.assets.map(e=>{let r=(0,G.p$)(e);return r||(console.warn("Asset with null nodeId:",e),(0,f.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Asset with null node ID found during publish"))),r}).filter(i.Vq)})),moveRemappings:r.moveInformation?.moveRemappings??{},s3ThumbnailBufferPaths:eE,styleMetaByNodeId:ey,clientProtocolVersion:window.mpGlobal.version,themeMetaData:r.themePublishData??{},...S?{kitMetaData:S}:{}};try{let e=(await B.Z.postUploadPublishParams()).data.meta;u=e.url,y=e.fields}catch(e){ei("Unable to get presigned post url for params","get_presigned_post",n.id,{error:e});return}try{let e=new TextEncoder;v=await (0,g.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",u,y,e.encode(JSON.stringify(eS)),"application/json")}catch(r){let e=r instanceof g.qW;ei("Unable to upload publishing params"+(e?" (non-s3 error)":""),"upload_params",n.id,{error:r,encounteredNonS3PresignedPostError:e});return}try{T=(await B.Z.postLibraryPublish({fileKey:et.key,checkpointKey:n.checkpoint_key,paramsPath:v,publishToCommunity:!!r.hubFileId,publishScope:r.publishScope})).data.meta.library_publish_id}catch(e){ei("Unable to publish","generic_error",n.id,{error:e});return}try{!function(e,r,n,a,i,o,s,l){let c=performance.now(),d=r?U.M$.UNPUBLISH:U.M$.PUBLISH;e.dispatch(Y({state:U.Qx.UPLOADING,publishType:d,progress:0,libraryPublishId:n,savepoint:a,numSkippedPriorToPublish:i,publishStartMs:Q(e.getState().library.publishProgress),commitUpdatesDurationMs:c,clientPreWorkDurationMs:o,createSavePointDurationMs:s})),l({publishType:d,dispatch:e.dispatch,icon:I.zX.SPINNER})}(e,ea,T,n,ef.length,eb,eu,$)}catch(e){ei("Unable to notify publish start","generic_error",n.id,{error:e});return}})},536737:(e,r,n)=>{n.d(r,{F6:()=>h,Ho:()=>m,K6:()=>u,PU:()=>g,V9:()=>f,mu:()=>_,sm:()=>d,sp:()=>E,yc:()=>p});var a=n(805014),i=n(201863),o=n(190500),s=n(266316),l=n(786140),c=n(534294);let d=(0,i.N)("MULTIPLAYER_EMOJI_UPDATE_EMOJI_WHEEL_POSITION"),u=(0,i.N)("MULTIPLAYER_EMOJI_CLEAR_STATE"),m=(0,c.nF)(e=>{a.glU.setIsInCursorChat(!1),e.dispatch(u())}),p=(0,i.N)("MULTIPLAYER_EMOJI_START_CHATTING"),h=(0,c.nF)((e,r)=>{let n=e.getState();0>[a.NLJ.HAND,a.NLJ.SELECT,a.NLJ.HAND_SELECT].indexOf(n.mirror.appModel.currentTool)&&a.glU.triggerAction("set-tool-default",null),(0,l.q)().then(e=>{e||(a.glU.setIsInCursorChat(!0),(0,o.ds)("Started chatting",n.openFile?.key,n,{source:r.source}))}),e.dispatch(p(r))}),_=(0,i.N)("MULTIPLAYER_EMOJI_STOP_REACTING"),g=(0,i.N)("MULTIPLAYER_EMOJI_START_REACTING");(0,c.nF)((e,r)=>{s.R9.resetReactions(),e.dispatch(g(r))});let f=(0,i.N)("MULTIPLAYER_EMOJI_TOGGLE_EMOJI_WHEEL"),E=(0,c.nF)((e,r)=>{let n=e.getState();(0,o.ds)("Toggled emoji wheel",n.openFile?.key,n,{wheelType:r.wheelType,...r.source&&{source:r.source}}),e.dispatch(f(r))})},19097:(e,r,n)=>{n.d(r,{Jd:()=>w,QC:()=>I,UF:()=>A,aJ:()=>v,kN:()=>T,lT:()=>S});var a=n(777535),i=n(657548),o=n(697737),s=n(719334),l=n(76265),c=n(553362),d=n(534294);n(736041);var u=n(137209),m=n(829911),p=n(831396),h=n(682403),_=n(961143),g=n(331850),f=n(159806),E=n(871290),y=n(47795),b=n(194338);let v="team_join_request_submitted",T="permission_request_submitted",I=(0,d.nF)(async(e,r)=>{let n={team_id:r.teamId,level:r.level,message:r.message},i=e.getState().user?.id,c=e.getState().roles.byTeamId,d=i&&c&&c[r.teamId]?c[r.teamId][i]?.level:null,u={level:r.level,team_id:r.teamId,team_type:r.teamOrgAccess,source:r.source,folder_id:r.folderId};r.actionType===T?(0,a.sx)(T,u):(0,a.sx)(v,u),await o.Ay.post("/api/team_role_requests",n).then(({data:n})=>{let a=n.meta;a.status===f.c.APPROVED?e.dispatch((0,p.vr)({teamId:a.team_id})):r.level===g.e6.EDITOR&&d===g.e6.VIEWER?e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_edit_files_in_this_team"))):e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_join_this_team")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),S=(0,d.nF)((e,r)=>{o.Ay.del(`/api/team_role_requests/${r.requestId}`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_withdrawn")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),w=(0,d.nF)((e,r)=>{o.Ay.post(`/api/team_role_requests/${r.requestId}/approve`,{level:`${r.level}`}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_approved"))),e.dispatch(b.bE({role:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})}),A=(0,d.nF)((e,r)=>{o.Ay.post(`/team_role_requests/${r.requestId}/deny`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_denied")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})});(0,d.nF)((e,{orgId:r})=>{o.Ay.put(`/api/orgs/${r}`,{public_plugins_allowed:!0}).then(({data:r})=>{e.dispatch(u.yJ({org:r.meta}))})}),(0,d.nF)((e,{payload:r,successMessage:n})=>{let a=e.getState().currentUserOrgId;o.Ay.put(`/api/orgs/${a}`,r).then(r=>{e.dispatch(u.yJ({org:r.data.meta})),n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,googleSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{google_sso_only:n}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,samlSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{saml_sso_only:n}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,attribute:n})=>{o.Ay.put(`/api/orgs/${r}`,{featured_scim_metadata:n}).then(r=>{e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{onFailure:r,onSuccess:n,orgId:a,timeoutDurationInSecs:i})=>{o.Ay.put(`/api/orgs/${a}`,{idle_timeout_duration_in_secs:i}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_idle_session_timeout"))),e.dispatch(u.yJ({org:r.data.meta})),n()}).catch(n=>{r(),e.dispatch(s.s.error((0,l.Jv)(n)||(0,l.t)("org_actions.an_error_occurred")))})}),(0,d.nF)((e,{orgId:r,ipAllowlistEnabled:n,ipAllowlistRanges:a,onSuccess:i})=>o.Ay.put(`/api/orgs/${r}/ip_allowlist_ranges`,{ip_ranges:n?a:void 0,ip_allowlist_enabled:n}).then(a=>{let o={...e.getState().orgById[r].shared_org_license_group_settings,ip_allowlist:n};e.dispatch(u.F6({id:r,shared_org_license_group_settings:o})),e.dispatch(s.s.flash("Updated IP allowlist settings")),i()}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})),(0,d.nF)((e,{orgId:r})=>{o.Ay.post(`/api/org/${r}/deletion_request`).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.deletion_request_submitted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{let n=r.successMessage,a=r.autogenPasswordControl,o=r.settingsId,d=E.Eh.apiAutogenControls({orgId:r.orgId,autogen_password_controls:a});d.then(()=>{n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}),o?(0,i.WB)().optimisticallyUpdate({SharedOrgLicenseGroupSetting:{[o]:{autogenPasswordControls:a}}},d):(0,i.WB)().optimisticallyCreate({SharedOrgLicenseGroupSetting:{[`optimistic-id-${r.orgId}`]:{autogenPasswordControls:a,externalCollaborationControls:!1,publicLinkControlsSetting:null,teamCreationControls:null,publicLinkControlsMaxExpiration:null,resourceType:"Org",resourceId:r.orgId}}},d)}),(0,d.nF)((e,r)=>{o.Ay.post(`/api/org/${r.orgId}/delete_org_users`,{org_user_ids:r.orgUserIds}).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.user_data_deleted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{(0,_.yP)(e.getState(),r.selectedView)?((0,h.nt)(r.orgId),(0,a.sx)("file-browser-hydrate",{location:"selectViewAndLoadItsResources"}),(0,h._X)("orgSelectViewAndLoadItsResources").then(n=>{e.dispatch(m.cL()),e.dispatch(y.Qv(n.data.meta)),e.dispatch(y.$T(r.selectedView))})):(r.actionsIfNotHydrating&&r.actionsIfNotHydrating.forEach(e.dispatch),e.dispatch(y.$T(r.selectedView)))}),(0,d.nF)((e,{orgId:r,slidesDisabled:n,successMessage:a})=>{E.Eh.putToggleSlidesDisabled({orgId:r,slidesDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{e.dispatch(u.F6({id:r,is_slides_disabled:n})),a&&e.dispatch(s.s.flash(a))})})},491912:(e,r,n)=>{n.d(r,{hZ:()=>p,wc:()=>u,yH:()=>m});var a=n(201863),i=n(697737),o=n(719334),s=n(76265),l=n(553362),c=n(534294),d=n(736041);(0,c.nF)((e,r)=>{let n=e.getState(),{emails:a,isResentInvite:o,licenseGroupId:c,workspaceId:m,billableProductKey:h}=r;e.dispatch(u({creating:!0})),i.Ay.post("/api/org_invites",{org_id:n.currentUserOrgId,emails:a,billable_product_key:h,license_group_id:c,workspace_id:m}).then(({data:r})=>{let n=r.meta;e.dispatch(p(n)),e.dispatch(u({creating:!1})),e.dispatch(d.Lo());let i=(0,s.t)("org_invite.invite_resent");if(!o){let e=(0,s.t)("org_invite.new_members_message",{numInvites:n.length}),r=a.length-n.length,o=(0,s.t)("org_invite.existing_members_message",{numExisting:r});n.length>0?(i=e,r>0&&(i=[i,o].join(" "))):i=o}e.dispatch(l.F.enqueue({message:i}))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_creation_error");e.dispatch(u({creating:!1})),e.dispatch(l.F.enqueue({message:n,error:!0}))})}),(0,c.nF)((e,r)=>{let{idpUser:n}=r,a=e.getState();i.Ay.del(`/api/org_invites/${n.id}`,{org_id:a.currentUserOrgId}).then(r=>{e.dispatch(m({org_invite_id:n.id})),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_deletion_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_deletion_error");e.dispatch(o.s.flash(n))})});let u=(0,a.N)("IS_CREATING_ORG_INVITES"),m=(0,a.N)("DELETE_ORG_INVITE"),p=(0,a.N)("SET_ORG_INVITES")},93825:(e,r,n)=>{n.d(r,{E:()=>l,hZ:()=>c});var a=n(201863),i=n(719334),o=n(534294),s=n(768699);let l=(0,a.N)("ORG_SAML_CONFIG_GET");(0,o.nF)(e=>{let r=e.getState().currentUserOrgId;s.P.getOrgSamlConfig({orgId:r}).then(r=>{e.dispatch(c({orgSamlConfig:r.data.meta}))}).catch(r=>{e.dispatch(i.s.flash(r.data?.message||"An error occurred while fetching org saml config.",5e3)),console.error(r)}),e.dispatch(l())});let c=(0,a.N)("ORG_SAML_CONFIG_SET")},699256:(e,r,n)=>{n.d(r,{E:()=>y,GR:()=>I,Lx:()=>b,MT:()=>v,hZ:()=>T}),n(411855),n(188507);var a=n(88823),i=n.n(a),o=n(201863),s=n(697737),l=n(719334),c=n(76265),d=n(534294),u=n(989747),m=n(831396),p=n(749884),h=n(771491),_=n(871290),g=n(93008),f=n(20174);(0,d.nF)(async(e,r)=>{let n=r.team.id;try{let a=(await s.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess})).data.meta;e.dispatch(T({teams:[a]}))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_changing_team_s_org_access"))))}}),(0,d.nF)(async(e,r)=>{let n={};if(r.teams.forEach(e=>{let r=e.workspace_id;r&&(r in n||(n[r]=[]),n[r].push(e.id))}),Object.keys(n).length)try{let r=Object.keys(n).map(e=>{let r=n[e];return s.Ay.del(`/api/workspace/${e}/teams`,{team_ids:r})}),a=await Promise.all(r),i=[].concat(...a.map(e=>e.data.meta));e.dispatch(T({teams:i})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_unassigned",{numTeams:i.length})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.teams.map(e=>e.id),a=r.workspaceId;try{let i=(await s.Ay.post(`/api/workspace/${a}/teams`,{team_ids:n})).data.meta;e.dispatch(T({teams:i})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:i.length,workspaceName:r.workspaceName})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.workspaceId;e.dispatch(b("loading"));try{let r=(await g.u.getTeams({includeSecretTeams:!0,workspaceId:n})).data.meta;e.dispatch(T({teams:r})),e.dispatch(b("loaded"))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(b("errors"))}}),(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,a=r.teamIds,i={team_ids:a};r.level&&(i.level=r.level);let o=(0,p.n1)(a);e.dispatch(f.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,i).then(()=>{e.dispatch((0,m.UM)({teamIds:a,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining_teams")))),e.dispatch(f.of({key:o}))})});let E=(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,a=r.teamId,i={team_ids:[a]};r.level&&(i.level=r.level);let o=(0,p.p9)(a);e.dispatch(f.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,i).then(()=>{e.dispatch((0,m.vr)({teamId:a,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining")))),e.dispatch(f.of({key:o}))})});(0,d.nF)((e,r,{loadingKey:n})=>{let a=e.getState().currentUserOrgId,{teamId:i,disableFlashError:o}=r,s=_.Eh.getTeam({orgId:a,teamId:i});(0,h.N)(s,e,n),s.then(r=>{let n=r.data.meta;e.dispatch(u.yJ({team:n,userInitiated:!1}))}).catch(r=>{o||e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_this_team"))))})},({teamId:e})=>`ORG_FETCH_TEAM_${e}`);let y=(0,o.N)("ORG_FETCH_DISCOVERABLE_TEAMS");(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,{includeProjectCount:a,includeMemberCount:i,includeTopMembers:o,includeSecretTeams:s}=r||{};_.Eh.getTeams({orgId:n,includeMemberCount:i,includeProjectCount:a,includeTopMembers:o,includeSecretTeams:s}).then(r=>{let n=r.data.meta;e.dispatch(T({teams:n}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_teams_within_the_organization"))))}),e.dispatch(y(r))});let b=(0,o.N)("SET_ORG_TEAMS_STATUS"),v=(0,o.N)("RESET_ORG_TEAMS"),T=(0,o.N)("ORGS_SET_DISCOVERABLE_TEAMS");function I(e,r,n){return i()(()=>e(E({teamId:r,level:n})),500,{leading:!0,trailing:!1})}},593874:(e,r,n)=>{n.d(r,{$h:()=>R,Ay:()=>N,Az:()=>G,Bq:()=>j,Ef:()=>P,I2:()=>U,Je:()=>B,Lj:()=>L,Lo:()=>W,M2:()=>V,MN:()=>S,Mv:()=>$,Nj:()=>k,Qe:()=>D,Qg:()=>F,Ts:()=>Y,WG:()=>w,WX:()=>q,Wc:()=>M,XS:()=>C,bJ:()=>O,eK:()=>I,i:()=>A,js:()=>H,pv:()=>z,qU:()=>K,yy:()=>x});var a=n(201863),i=n(890882),o=n(281935),s=n(841962),l=n(480051),c=n(697737),d=n(719334),u=n(76265),m=n(47795),p=n(313449),h=n(421023),_=n(45049),g=n(839644),f=n(425028),E=n(534294),y=n(719971),b=n(736041),v=n(989747),T=n(162671);(0,E.nF)((e,{teamId:r,showBreadcrumbs:n,onCloseOrComplete:a})=>{e.dispatch(m.$T({view:"eduReview",teamId:r,showBreadcrumbs:n,onCloseOrComplete:a})),e.dispatch(W({billingPeriod:_.tY.STUDENT}))});let I=(0,a.N)("PAYMENT_RESTORE_SAVED_CART"),S=(0,a.N)("PAYMENT_SET_CURRENCY"),w=(0,a.N)("PAYMENT_SET_TOKEN"),A=(0,a.N)("PAYMENT_SET_TAXES"),C=(0,a.N)("PAYMENT_SET_PROMO"),N=(0,E.nF)((e,r)=>{r.promo||(0,l._H)(),e.dispatch(C(r))}),L=(0,a.N)("PAYMENT_SET_SUBMIT_PUT_ANNUAL_QUANTITY_PENDING"),O=(0,a.N)("PAYMENT_PUT_ANNUAL_QUANTITY");(0,E.nF)((e,r)=>{let{teamId:n,annualQuantity:a,annualWhiteboardQuantity:i}=r;c.Ay.put(`/api/subscriptions-2018-11-08/team/${n}`,{annual_quantity:a,annual_whiteboard_quantity:i||0}).then(()=>{e.dispatch(T.Be({teamId:n})),e.dispatch(b.Ce()),e.dispatch(L({submitPending:!1})),e.dispatch(d.s.flash((0,u.t)("flash.updated_annual_seats")))}).catch(r=>{(0,p.UE)(r,e.dispatch),e.dispatch(L({submitPending:!1}))}),e.dispatch(O())});let R=(0,a.N)("PAYMENT_SET_VAT_GST_ID"),P=(0,a.N)("PAYMENT_SET_REGIONAL_VAT_GST_ID"),D=(0,a.N)("PAYMENT_MAKE_STUDENT_TEAM"),k=(0,E.nF)((e,r)=>{let n=e.getState(),a=n.user?.id,i=(0,s.kc)().ps_benchmark;c.Ay.put(`/api/teams/${r.teamId}/student_team`,{student_team:!0}).then(()=>{i&&a?e.dispatch(y._l({workspace:{userId:a,teamId:r.teamId,orgId:null},view:{view:"allProjects"}})):e.dispatch(m.$T({view:"team",teamId:r.teamId})),e.dispatch(d.s.flash((0,u.t)("flash.successfully_upgraded_to_an_education_team"))),e.dispatch(U({submitPending:!1})),r.onCloseOrComplete?.()}).catch(r=>{(0,p.UE)(r,e.dispatch),e.dispatch(U({submitPending:!1}))}),e.dispatch(D())}),M=(0,E.nF)((e,{teamId:r})=>{let n=e.getState().teams[r];n.student_team?c.Ay.put(`/api/teams/${r}/student_team`,{student_team:!1}).then(()=>{e.dispatch(T.Be({teamId:r})),e.dispatch(d.s.flash((0,u.t)("flash.successfully_downgraded_to_a_starter_team")))}).catch(r=>(0,p.UE)(r,e.dispatch)):c.Ay.del(`/api/subscriptions-2018-11-08/team/${r}`).then(({data:a})=>{let o=a.meta&&a.meta.team;o&&e.dispatch(v.yJ({team:o,userInitiated:!1})),e.dispatch(T.Be({teamId:r}));let{annual_subscription:s,monthly_subscription:l}=e.getState().teamBilling.summary,c=s?.quantity?s.current_period_end:null,m=l?.quantity?l.current_period_end:null,p=c&&m?(0,i.A)(c).isAfter((0,i.A)(m))?c:m:c||m;e.dispatch(d.s.flash(p?(0,u.t)("flash.team_will_become_free_starter_team_on_date",{teamName:n.name,cancelDate:(0,i.A)(p).toDate()}):(0,u.t)("flash.team_will_be_downgraded_at_the_end_of_the_current_subscription_period",{teamName:n.name}),8e3))}).catch(r=>(0,p.UE)(r,e.dispatch))}),F=(0,a.N)("PAYMENT_SHOW_ERROR");(0,E.nF)((e,{teamId:r})=>{let n=e.getState(),a=n.user?.id,i=(0,s.kc)().ps_benchmark,o={annual_quantity:n.payment.numDesignEditors||0,annual_whiteboard_quantity:n.payment.numWhiteboardEditors||0};c.Ay.put(`/api/subscriptions-2018-11-08/team/${r}`,o).then(({data:n})=>{let o=n.meta&&n.meta.team;o&&e.dispatch(v.yJ({team:o,userInitiated:!1})),e.dispatch(T.Be({teamId:r})),i&&a?e.dispatch(y._l({workspace:{userId:a,teamId:r,orgId:null},view:{view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:f.Iv.BILLING}})):e.dispatch(m.$T({view:"team",teamId:r,teamViewTab:f.A$.BILLING})),e.dispatch(d.s.flash((0,u.t)("flash.successfully_added_an_annual_plan"))),e.dispatch(U({submitPending:!1}))}).catch(r=>{e.dispatch(U({submitPending:!1})),(0,p.UE)(r,e.dispatch)})});let x=(0,a.N)("PAYMENT_SET_COMPANY_DETAILS"),U=(0,a.N)("PAYMENT_SET_SUBMIT_PENDING"),B=(0,a.N)("PAYMENT_SET_EDITOR_STATUS_CHANGES"),V=(0,a.N)("PAYMENT_SET_NUM_FIGMA_EMAIL_TEAM_USERS"),G=(0,a.N)("PAYMENT_SET_NUM_WHITEBOARD_EDITORS"),H=(0,a.N)("PAYMENT_SET_NUM_EDITORS"),W=(0,a.N)("PAYMENT_SET_BILLING_PERIOD"),K=(0,a.N)("PAYMENT_SET_CAMPFIRE_SEATS"),Y=(0,a.N)("PAYMENT_INIT"),$=(0,a.N)("PAYMENT_START_ORG_UPGRADE_FLOW"),j=(0,E.nF)((e,r)=>{let{openInNewTab:n,newTeamProps:a,entryPoint:i,upsellSource:s}=r;if(n&&!(0,o.y3)()){let r=e.getState(),n=new URL((0,h.Np)(r,{view:"orgSelfServe",upsellSource:s,entryPoint:i}),document.baseURI).href;e.dispatch(y.V3({url:n}))}else e.dispatch(b.Ce()),e.dispatch(m.$T({view:"orgSelfServe",newTeamProps:a,upsellSource:s,entryPoint:i}));e.dispatch($({currency:r.currency}))}),z=(0,a.N)("PAYMENT_START_PRO_UPGRADE_FLOW"),q=(0,E.nF)((e,r)=>{let{teamId:n,billingPeriod:a,entryPoint:i,onBillingCompleteRedirectInfo:s}=r,l={view:"teamUpgrade",teamFlowType:g.SC.UPGRADE_EXISTING_TEAM,teamId:n,paymentStep:_.tn.CHOOSE_PLAN,billingPeriod:a,planType:g.Sc.TEAM,entryPoint:i,...s?{searchParams:{onCompleteRedirectFileKey:s.fileKey,onCompleteRedirectNodeId:s.nodeId}}:{}};if(r.openInNewTab&&!(0,o.y3)()){let r=e.getState(),n=new URL((0,h.Np)(r,l),document.baseURI).href;e.dispatch(y.V3({url:n}))}else{let n=r.openInNewTab?void 0:r.selectedView;e.dispatch(b.Ce()),l.previousView=n,e.dispatch(m.$T(l))}e.dispatch(z({newTeam:r.newTeam,currency:r.currency}))})},399953:(e,r,n)=>{n.d(r,{S_:()=>O,gk:()=>R});var a=n(217950),i=n(777535),o=n(163773),s=n(841962),l=n(480051),c=n(550479),d=n(62244),u=n(697737),m=n(719334),p=n(76265),h=n(4035),_=n(534294),g=n(47795),f=n(736041),E=n(190500),y=n(831396),b=n(313449),v=n(872704),T=n(914077),I=n(45049),S=n(839644),w=n(670266),A=n(719971),C=n(593874),N=n(989747),L=n(162671);(0,_.nF)((e,{teamId:r,teamName:n,previousView:a})=>{e.dispatch(g.$T({view:"promoReview",teamId:r,teamName:n,previousView:a}))});let O=(0,_.nF)((e,r)=>{let{promoCode:n,teamId:a,teamName:i,onSuccess:o,onError:s}=r;u.Ay.post("/api/teams/redeem_promo",{promo_code:n,team_id:a}).then(()=>{o(),e.dispatch(m.s.flash((0,p.t)("flash.redeem_promo.success",{teamName:i})))}).catch(r=>{s(),e.dispatch(m.s.error((0,p.t)("flash.redeem_promo.failure")))})});(0,_.nF)((e,r)=>{let{teamId:n,surveyResult:a}=r,i=e.getState(),o=i.user?.id,l=(0,s.kc)().ps_benchmark;u.Ay.post(`/api/teams/${n}/pro_trial`).then(()=>{l&&o?e.dispatch(A._l({workspace:{userId:o,orgId:null,teamId:n},view:{view:"allProjects"}})):e.dispatch(g.$T({view:"team",teamId:n})),e.dispatch(m.s.flash((0,p.t)("payments.pro_trial.start_pro_trial_success"))),v.R_.trackInitiationSubmit(a,!0)}).catch(r=>{l&&o?e.dispatch(A._l({workspace:{userId:o,orgId:null,teamId:n},view:{view:"recentsAndSharing"}})):e.dispatch(g.$T({view:"recentsAndSharing"})),e.dispatch(m.s.error((0,p.t)("payments.pro_trial.start_pro_trial_error"))),v.R_.trackInitiationSubmit(a,!1)})});let R=(0,_.nF)((e,{teamName:r,invites:n,teamId:_,selectedCurrency:v,hasSelectedStudentTeam:O,displayedCostBreakdown:R,teamFlowType:P,onSuccess:D,isCampfireCart:k,displayedPriceKeys:M})=>{let F;let x=e.getState(),U=(0,s.kc)().ps_benchmark,B=(0,s.kc)().pro_onboarding_launch,V=x.user?.id,G=(e,r)=>({annual_quantity:(0,b.fD)(e,r),monthly_quantity:(0,b.Rq)(e,r)}),H=(0,b.ne)(x.payment.billingPeriod);if(!H){e.dispatch(m.s.error((0,p.t)("payments.invalid_billing_interval_error")));return}let W=null,K=null;if(k){let r=x.payment.cartSelections?.selectedUserSeatTypes,n=Object.values(_?x.teamUserByTeamId[_]:{}).map(e=>e.user_id??"");if(r&&(0,h.HG)(r,n))K=(0,h.VB)(r)??null,W=x.payment.cartSelections?.countBySeatType??null;else{e.dispatch(m.s.error((0,p.t)("payments.errors.error_processing_upgrade_request"))),(0,c.$D)(a.e.MONETIZATION_UPGRADES,Error("Unable to retrieve valid selectedUserSeatTypes while submitting Pro upgrade request"),{extra:{teamId:_,selectedUserSeatTypes:r}});return}}else W={design:x.payment.numDesignEditors,figjam:x.payment.numWhiteboardEditors};let Y={...G(x.payment.billingPeriod,x.payment.numDesignEditors),annual_whiteboard_quantity:G(x.payment.billingPeriod,x.payment.numWhiteboardEditors).annual_quantity,monthly_whiteboard_quantity:G(x.payment.billingPeriod,x.payment.numWhiteboardEditors).monthly_quantity,editor_status_changes:x.payment.editorStatusChanges,subscription_monthly_quantity_figjam:G(x.payment.billingPeriod,x.payment.numWhiteboardEditors).monthly_quantity,subscription_annual_quantity_figjam:G(x.payment.billingPeriod,x.payment.numWhiteboardEditors).annual_quantity,vat_gst_id:x.payment.vatGstId||null,regional_vat_gst_id:x.payment.regionalVatGstId||null,legal_name:x.payment.legalName||null,display_name:x.payment.displayName||null,selected_user_seat_types:K,count_by_billable_product:W,billing_interval:H,displayed_cost_breakdown:R,displayed_price_keys:M};if(null===_){let e=x.payment.promo,a=!!x.user&&(0,d.cn)(x.user);if(null!=e)F={...Y,team_name:r,invite_emails:n,promo_code:e.code};else if(a&&O)F={...Y,team_name:r,invite_emails:n,student_team:!0};else{let e=(0,s.DC)();F={...Y,team_name:r,invite_emails:n,subscribe_to_pro:!0,address:e?.address,payment_method_id:e?.payment_method_id,selected_currency:v}}}else F={...Y,selected_currency:v};let $=_?`/api/subscriptions-2018-11-08/team/${_}`:"/api/teams/create",j=x.selectedView,z=x.payment.upgradingNewTeam;u.Ay.post($,F).then(({data:r})=>{let a="team"in r.meta?r.meta.team:r.meta,s=()=>{if(U&&V){let r={userId:V,teamId:a.id,orgId:null};e.dispatch(A._l({workspace:r,view:{view:"allProjects",isProUpgrade:B||void 0}}))}else e.dispatch(g.$T({view:"team",teamId:a.id})),B?e.dispatch(f.to({type:w.C,data:{teamId:a.id}})):e.dispatch(m.s.flash((0,p.t)("flash.successfully_upgraded_to_a_professional_team")))};_||(0,y.P8)(a,e,{dontRedirect:!0,inviteEmails:n,teamFlowType:P}),e.dispatch(C.I2({submitPending:!1})),e.dispatch(C.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]}}})),a&&e.dispatch(N.yJ({team:a,userInitiated:!1})),a.student_team&&e.dispatch(C.Lo({billingPeriod:I.tY.UNSPECIFIED})),x.payment.promo&&((0,l._H)(),e.dispatch(C.Ay({promo:null})));let c=new URLSearchParams(o.Ay.location.search);if(z){if(c.get("onCompleteRedirectFileKey")){let r=decodeURIComponent(c.get("onCompleteRedirectFileKey")),n=decodeURIComponent(c.get("onCompleteRedirectNodeId")),i={view:"fullscreen",fileKey:r,...n?{nodeId:n}:{}};e.dispatch(g.$T({...i,teamToMoveFileToOnNavigate:a.id,editorType:T.nT.Design}))}else s()}else if(e.dispatch(L.Be({teamId:a.id})),c.get("onCompleteRedirectFileKey")){let r=decodeURIComponent(c.get("onCompleteRedirectFileKey")),n=decodeURIComponent(c.get("onCompleteRedirectNodeId")),i={view:"fullscreen",fileKey:r,...n?{nodeId:n}:{}};e.dispatch(g.$T({...i,teamToMoveFileToOnNavigate:a.id,editorType:T.nT.Design}))}else s();(0,i.sx)("Pro Team Purchased (GTM)"),D&&D()}).catch(r=>{let n=(r,n={})=>{let a=new URLSearchParams(o.Ay.location.search),i=a.get("onCompleteRedirectFileKey"),s=a.get("onCompleteRedirectNodeId");e.dispatch(g.$T({...j,view:"teamUpgrade",teamFlowType:r?S.SC.UPGRADE_EXISTING_TEAM:S.SC.CREATE_AND_UPGRADE,teamId:r||n.freeTeamId||null,paymentStep:I.tn.PAYMENT_AND_ADDRESS,previousView:j.previousView,planType:S.Sc.TEAM,...i?{searchParams:{onCompleteRedirectFileKey:i,onCompleteRedirectNodeId:s}}:{}}))};e.dispatch(C.I2({submitPending:!1}));let s=r.data?.message||r.message;null!==_?(0,E._J)("Pro Checkout Error",_,x,{error_message:s,request_params:JSON.stringify(F)}):(0,i.sx)("Pro Checkout Error"),(0,c.$D)(a.e.BILLING,Error(`[Billing] Pro checkout API failed: ${s}`),{extra:{countByBillableProduct:W,selectedUserSeatTypes:K,billingInterval:H,displayedCostBreakdown:R,displayedPriceKeys:M,isCampfireCart:k}}),((r,a)=>{let i=(0,p.Jv)(r);i&&("PROMO_CODE"===r.data.reason?(e.dispatch(C.Ay({promo:null})),n(a,{}),e.dispatch(C.Qg({error:i}))):"CARD_ERROR"===r.data.reason?(e.dispatch(C.WG({token:null})),n(a,{}),e.dispatch(C.Qg({error:i}))):e.dispatch(m.s.error(i)))})(r,_)})})},628220:(e,r,n)=>{n.d(r,{F9:()=>v,Hx:()=>N,KA:()=>E,Kq:()=>x,Ks:()=>S,QN:()=>k,RH:()=>M,TN:()=>V,Vg:()=>R,Vu:()=>w,WR:()=>T,ay:()=>y,cu:()=>L,f0:()=>O,fR:()=>B,gU:()=>D,jS:()=>I,jX:()=>P,lD:()=>F,nM:()=>A,pj:()=>C,v8:()=>b});var a=n(201863),i=n(895925),o=n(697737),s=n(76265),l=n(800769),c=n(534294),d=n(747327),u=n(587613),m=n(968525),p=n(293800),h=n(263352),_=n(255600),g=n(492366),f=n(567095);let E=(0,a.N)("SET_RECENT_WHITEBOARD_TOOLS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.WHITEBOARD_TOOL);e.dispatch(E({storeInRecentsKey:r.storeInRecentsKey,recentWhiteboardTools:n}))});let y=(0,a.N)("ADD_WHITEBOARD_TOOL_TO_RECENTS"),b=(0,a.N)("SET_RECENT_FACE_STAMPS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.FACE_STAMP);e.dispatch(b({storeInRecentsKey:r.storeInRecentsKey,recentFaceStamps:n}))});let v=(0,a.N)("ADD_FACE_STAMP_TO_RECENTS"),T=(0,a.N)("SYNC_RECENT_PLUGINS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.PLUGIN);e.dispatch(S({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let a=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:a})),e.dispatch(T(r))});let I=(0,a.N)("SYNC_RECENT_WIDGETS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.WIDGET);e.dispatch(w({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let a=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:a})),e.dispatch(I(r))});let S=(0,a.N)("SET_RECENT_PLUGINS"),w=(0,a.N)("SET_RECENT_WIDGETS"),A=l.nM,C=l.pj,N=l.Hx,L=(0,a.N)("ADD_FETCHED_PLUGIN_VERSION"),O=(0,a.N)("ADD_FETCHED_WIDGET_VERSION"),R=(0,c.nF)((e,r)=>{V(e,r)}),P=(0,a.N)("ADD_PLUGIN_TO_RECENTS"),D=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedPlugins[r.id],e.getState().recentlyUsed.plugins[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(P(r))}),k=(0,a.N)("ADD_WIDGETS_TO_RECENTS"),M=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedWidgets[r.id],e.getState().recentlyUsed.widgets[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(k(r))}),F=(0,a.N)("REMOVE_RECENTLY_USED_PLUGIN"),x=(0,a.N)("REMOVE_RECENTLY_USED_WIDGET"),U=(e,r,n,a,l,c,d)=>{if(a&&a.current_user_has_run||!r||(0,p.Vi)(e)||c)return;let m=l.find(r=>r.id===e);m?.run_by_user_ids?.includes(r)||o.Ay.post(`/api/plugin_runs/${e}`,{org_id:n}).then(({data:r})=>{d(u.R({resourceId:e,userFirstRanAt:r.meta.created_at}))}).catch(e=>{i.k.error((0,s.Jv)(e))})},B=(e,r)=>n=>{let a=(0,h.uF)(e),i=(a.manifest?.editorType??[]).map(h.Sb),o=(0,g.xQ)(e)?M:D;i.forEach(i=>n(o({storeInRecentsKey:i,id:e.id,version:a.id,currentUserId:r})))};function V(e,r){let n={},a=({id:a,version:i,status:o})=>{let s=r.resourceType===g.bD.PLUGIN?L:O;return i&&(n[a]=i),e.dispatch(s({id:a,version:i,status:o}))},i=[];if(r.resourceIds.forEach(o=>{let s=r.resourceType===g.bD.PLUGIN?e.getState().installedPluginVersions.plugins[o]:void 0;if(s){a({id:o,version:s,status:f.Lx.FETCHED});return}let l=r.resourceType===g.bD.PLUGIN?e.getState().recentlyUsed.plugins.fetchedResources[o]:e.getState().recentlyUsed.widgets.fetchedResources[o];l&&l.status!==f.Lx.NOT_FETCHED&&l.status!==f.Lx.FETCHING&&(l.status!==f.Lx.FETCHED||l.version)?l.version&&(n[o]=l.version):i.push(o)}),!i.length)return Promise.resolve(n);i.forEach(e=>{a({id:e,status:f.Lx.FETCHING})});let s={ids:i,org_id:e.getState().currentUserOrgId,include_pending:!0};return o.Ay.post(`/api/${(0,m.n)(r.resourceType)}/batch`,s).then(({data:r})=>(e.dispatch(d.Qi({publishedPlugins:r.meta,src:"fetchExtensionVersions",overrideInstallStatus:!0})),i.forEach(e=>{let n;let i=r.meta.find(r=>r.id===e);i&&(n=(0,_.ul)(i)),a({id:e,version:n,status:f.Lx.FETCHED})}),n)).catch(()=>(i.forEach(e=>{a({id:e,status:f.Lx.NOT_FETCHED})}),{}))}},358275:(e,r,n)=>{n.d(r,{MV:()=>E,N:()=>g,Xk:()=>u,cq:()=>p,hh:()=>_,lX:()=>f,q0:()=>h,zT:()=>y,zU:()=>m});var a=n(805014),i=n(201863),o=n(449233),s=n(437068),l=n(534294),c=n(421023),d=n(187167);let u="seen_try_onboarding",m=(0,i.N)("SET_WORKSHOP_USER_NAME"),p=(0,l.nF)((e,r)=>{let n=r.name.trim().substring(0,170),i=e.getState(),o="fullscreen"===i.selectedView.view&&i.selectedView.workshopModeInfo;if(o)a.h3O.setName(n),(0,d.Vv)(o.id,n),e.dispatch(m(r))}),h=(0,i.N)("SET_STARTER_KIT_HAS_BEEN_HIDDEN"),_=(0,i.N)("SET_FIGJAM_EDITOR_ONBOARDING_FINISHED_OR_DISMISSED"),g=(0,i.N)("SET_FIGJAM_EDITOR_ONBOARDING_STARTED");(0,l.nF)(e=>{(0,s.DN)().set(u,!0),e.dispatch(g())});let f=(0,i.N)("SET_WORKSHOP_MODE_UNTIL"),E=(0,i.N)("CLEAR_TRY_PLUGIN"),y=(0,l.nF)((e,r)=>{let n=e.getState();return(0,o.Dk)((0,c.xS)(n,r))})},674505:(e,r,n)=>{n.d(r,{Ev:()=>d,FL:()=>c,nH:()=>m,rk:()=>u,sw:()=>l});var a=n(201863),i=n(841962),o=n(653798),s=n(534294);let l=(0,a.N)("FULLSCREEN_HIDE_STYLE_PREVIEW");(0,s.nF)(e=>{let r=e.getState().stylePreviewShown;r.isShown&&!r.isCreating&&e.dispatch(l())}),(0,s.nF)((e,r)=>{let{rowTop:n,rowLeft:a,styleType:i,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}=r;e.dispatch(c({rowTop:n,rowLeft:a,styleType:i,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}))});let c=(0,a.N)("SHOW_CREATE_STYLE_PREVIEW"),d=(0,a.N)("FULLSCREEN_SHOW_STYLE_PREVIEW"),u=(0,s.nF)((e,r)=>{(0,i.kc)().ds_pubfile_log_discrepancy_web&&!r.style.library_key&&(0,o.x1)("library-keys","Missing library key in style",{payload:r},{reportAsSentryError:!0}),e.dispatch(d(r))}),m=(0,a.N)("STYLE_FILE_PUT_STYLE_SET");(0,a.N)("STYLE_FILE_GET_STYLE_SET")},989747:(e,r,n)=>{n.d(r,{$I:()=>O,$V:()=>y,$w:()=>N,Jt:()=>k,TI:()=>T,WC:()=>I,_E:()=>f,aB:()=>A,bE:()=>D,bQ:()=>C,ii:()=>b,m$:()=>E,mw:()=>v,n9:()=>w,r1:()=>S,uo:()=>L,yH:()=>P,yJ:()=>R});var a=n(201863),i=n(163773),o=n(697737),s=n(719334),l=n(76265),c=n(956292),d=n(553362),u=n(534294),m=n(838503),p=n(314540),h=n(771491),_=n(479251),g=n(402511);let f=(0,u.MM)("BATCH_DEL_TEAM_MEMBERS",(e,{teamId:r,userIds:n},{optimistId:a})=>{o.Ay.del(`/api/teams/${r}/users`,{user_ids:n}).then(()=>{e.dispatch(g.c(a))}).catch(r=>{e.dispatch(g.r(a))})});(0,u.nF)(async(e,r)=>{let{teamId:n}=r;await o.Ay.put(`/api/teams/${n}/restore`).then(()=>{let r=`/files/team/${n}`;i.Ay.redirect(r),e.dispatch(s.s.flash((0,l.t)("file_browser.file_browser_actions.restore_team_success")))}).catch(r=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.restore_team_error",{errorMsg:r.data.message||(0,l.t)("file_browser.file_browser_actions.unknown_error")})))})}),(0,u.nF)(async(e,r)=>{await o.Ay.put(`/api/teams/${r.teamId}`,{description:r.description}).then(()=>{e.dispatch(R({team:{id:r.teamId,description:r.description},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_description_error")))})}),(0,u.nF)(async(e,r)=>{let n=r.figma_provided_libraries_disabled;await _.$.updatePresetsDisabled({teamId:r.teamId,presetsDisabled:n}).then(()=>{e.dispatch(d.F.enqueue({message:n?(0,l.t)("settings_tab.ui_kits_disabled"):(0,l.t)("settings_tab.ui_kits_enabled"),type:"team.ui_kit_toggle",error:!1})),e.dispatch(R({team:{id:r.teamId,figma_provided_libraries_disabled:n},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r},{loadingKey:n})=>{let a=_.$.getTeam({teamId:r});(0,h.N)(a,e,n),a.then(({data:r})=>{e.dispatch(R({team:r.meta,userInitiated:!1}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})});let E=(0,u.nF)((e,{teamId:r,userInitiated:n=!0},{loadingKey:a})=>{let i=_.$.getMembers({teamId:r});n&&(0,h.N)(i,e,a),i.then(({data:n})=>{let a={};n.meta.forEach(e=>{a[e.email]=e}),e.dispatch(y({members:a,teamId:r}))},r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.team_member_fetch_error")))})},e=>`TEAM_FETCH_MEMBERS_LIST::teamId::${e.teamId}`),y=(0,a.N)("TEAM_SET_MEMBERS"),b=(0,a.N)("TEAM_BATCH_JOIN"),v=(0,a.N)("TEAM_JOIN"),T=(0,a.N)("TEAM_STOP_RENAME"),I=(0,a.N)("TEAM_BEGIN_RENAME"),S=(0,a.N)("TEAM_CREATION_SET_LOADING"),w=(0,a.N)("TEAM_CHANGE_DEFAULT_PERMISSION"),A=(0,a.N)("TEAM_CHANGE_SHARING_SETTINGS"),C=(0,a.N)("TEAM_CHANGE_ORG_ACCESS");(0,a.N)("TEAM_LOADED");let N=(0,a.N)("TEAM_RENAME"),L=(0,a.N)("TEAM_BATCH_PUT"),O=c.RF,R=(0,u.nF)((e,r)=>{let n=r.team.id,a=e.getState().teams[n];e.dispatch(O(r));let i=e.getState(),o=e.getState().teams[n];!r.userInitiated&&o.subscription&&o.subscription!==p.Qh.INCOMPLETE&&a&&(null==a.subscription||a.subscription===p.Qh.INCOMPLETE)&&"teamUpgrade"===i.selectedView.view&&i.selectedView.teamId===o.id&&e.dispatch(m.zn({teamId:o.id}))}),P=c.Nh,D=(0,a.N)("TEAM_POST"),k=(0,a.N)("TEAM_GET")},162671:(e,r,n)=>{n.d(r,{Be:()=>f,H3:()=>v,OP:()=>b,l0:()=>y,tp:()=>E,wn:()=>T});var a=n(201863),i=n(697737),o=n(719334),s=n(76265),l=n(553362),c=n(534294);n(736041);var d=n(162671),u=n(825408),m=n(314540),p=n(354465);n(727903);var h=n(771491),_=n(205995);let g=(0,c.nF)((e,{teamId:r},{loadingKey:n})=>{let a=_.T.getTeamInvoices({teamId:r});(0,h.N)(a,e,n),a.then(({data:r})=>{r.meta.forEach(e=>{e.design_quantity||(e.design_quantity=e.quantity)}),e.dispatch(E({invoices:r.meta}))}).catch(r=>{400!==r.status&&e.dispatch(o.s.error((0,s.t)("flash.team_invoices_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_INVOICES::teamId::${e.teamId}`),f=(0,c.nF)((e,{teamId:r},{loadingKey:n})=>{let a=_.T.getTeamSummary({teamId:r});(0,h.N)(a,e,n),a.then(({data:r})=>{e.dispatch(y({summary:r.meta}))}).catch(()=>{e.dispatch(o.s.error((0,s.t)("flash.team_billing_summary_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_BILLING_SUMMARY::teamId::${e.teamId}`);(0,c.nF)((e,{teamId:r,shouldForceFetch:n})=>{let a=f.loadingKeyForPayload({teamId:r}),i=e.getState();(0,p.VP)(i.loadingState,a)||!n&&(0,p.D2)(i.loadingState,a)||e.dispatch(f({teamId:r}));let o=g.loadingKeyForPayload({teamId:r});(0,p.VP)(i.loadingState,o)||!n&&(0,p.D2)(i.loadingState,o)||e.dispatch(g({teamId:r}))});let E=(0,a.N)("TEAM_ADMIN_POST_INVOICE"),y=(0,a.N)("TEAM_ADMIN_SET_SUMMARY"),b=(0,a.N)("TEAM_ADMIN_UPDATE_INVOICE_RECEIVER");function v(e){let{teamId:r,dispatch:n,annualSeatCounts:a,onSuccess:c,onFailure:p}=e;return i.Ay.post(`/api/subscriptions/team/${r}/annual_subscription`,{count_by_billable_product:a}).then(async()=>{c(),n(d.Be({teamId:r})),n(l.F.enqueue({message:(0,s.t)("billing_modals.renewal.toast.success"),type:"team-billing-renewal"})),await (0,u.jL)({planType:m.OL.TEAM,planId:r})}).catch(e=>{throw n(o.s.error(e.data?.message||(0,s.t)("billing_modals.renewal.toast.failure"),5e3)),p(),e})}function T(e){let{teamId:r,dispatch:n,annualSeatCounts:a,onSuccess:c,onFailure:u}=e;return i.Ay.put(`/api/subscriptions/team/${r}/coterm_annual_seats`,{count_by_billable_product:a}).then(()=>{c(),n(d.Be({teamId:r})),n(l.F.enqueue({message:(0,s.t)("billing_modals.renewal.toast.success"),type:"team-billing-renewal"}))}).catch(e=>{throw n(o.s.error(e.data?.message||(0,s.t)("billing_modals.renewal.toast.failure"),5e3)),u(),e})}},635558:(e,r,n)=>{n.d(r,{BC:()=>y,EF:()=>N,FJ:()=>S,Oy:()=>A,Y9:()=>_,au:()=>g,cx:()=>b,gX:()=>v,hK:()=>E,t9:()=>T,v6:()=>O,yu:()=>f});var a=n(201863),i=n(777535),o=n(533132),s=n(841962),l=n(657548),c=n(771952),d=n(697737),u=n(534294),m=n(771491),p=n(804197),h=n(530550);let _=(0,a.N)("REFRESH_FEED"),g=(0,u.nF)((e,r,{loadingKey:n})=>{if(!(0,s.kc)().xr_debounce_threshold)return;let a=h.K.getFeedBellStates();(0,m.N)(a,e,n),a.then(r=>{e.dispatch(E({bellStates:r.data.meta}))})}),f=(0,a.N)("TEAM_FEED_SET_BELL_STATE"),E=(0,a.N)("TEAM_FEED_SET_INITIAL_BELL_STATES"),y=(0,u.nF)((e,r)=>{let n=e.getState().user,a=(0,l.WB)(),i=r.uuid;if(!n||!a||!i||r.commentId.startsWith(O))return;let o=a.getIdFromUuid("FeedComment",i).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}`));a.optimisticallyDeleteWithUUID({FeedComment:{[i]:null}},o)}),b=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,a=(0,l.WB)(),s=r.uuid;if(!n||!a||!s)return;let c=a.getIdFromUuid("FeedComment",s).then(e=>d.Ay.put(`/api/feed_posts/comments/${e}`,{message_meta:r.messageMeta,attachment_updates:(0,p.Gq)(r.attachmentUpdates)}));(0,i.sx)("Team Feed Comment Edited",{text:(0,o._Z)(r.messageMeta)});let u=(0,o.Rc)(r.messageMeta);a.optimisticallyUpdateWithUUID({FeedComment:{[s]:{messageMeta:u}}},c)}),v=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,a=(0,l.WB)();if(!n||!a)return;let s=(0,c.g)(),u=d.Ay.post(`/api/feed_posts/${r.postUuid}/comments`,{message_meta:r.messageMeta,uuid:s,attachment_ids:r.attachmentIds}),m=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EMOJI),p=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EDITOR_MENTION);(0,i.sx)("Team Feed Comment Added",{emojiUsed:m,mentionUsed:p,text:(0,o._Z)(r.messageMeta),postUuid:r.postUuid});let h=(0,o.Rc)(r.messageMeta);a.optimisticallyCreateWithUUID({FeedComment:{[s]:{feedPostPublicUuid:r.postUuid,uuid:s,userId:n.id,user:{id:n.id,handle:n.handle,imgUrl:n.img_url},messageMeta:h,createdAt:new Date,reactions:[]}}},u)}),T=(0,u.nF)((e,r)=>{let{commentUuid:n,emoji:a,reactionId:i}=r,o=I(n,a);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[i]:null}},o)}),I=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),S=(0,u.nF)((e,r)=>{let{commentUuid:n,commentId:a,emoji:o}=r,s=e.getState().user;if(!s||a.startsWith(O))return;let c=w(n,o);(0,i.sx)("Team Feed Reaction Added",{commentId:a,type:o});let d=`optimistic-id-comment-${a}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:a,feedResourceType:"FeedComment",userId:s.id}}},c)}),w=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.post(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),A=(0,u.nF)((e,r)=>{let{feedPostUuid:n,emoji:a,reactionId:i}=r,o=C(n,a);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[i]:null}},o)}),C=(e,r)=>d.Ay.del(`/api/feed_posts/${e}/reactions`,{emoji:r}),N=(0,u.nF)((e,r)=>{let{feedPostUuid:n,feedPostId:a,emoji:o}=r,s=e.getState().user;if(!s)return;let c=L(n,o);(0,i.sx)("Team Feed Reaction Added",{postUuid:n,type:o});let d=`optimistic-id-${n}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:a,feedResourceType:"FeedPost",userId:s.id,user:{id:s.id,handle:s.handle,imgUrl:s.img_url}}}},c)}),L=(e,r)=>d.Ay.post(`/api/feed_posts/${e}/reactions`,{emoji:r}),O="pending-feed-comment"},638051:(e,r,n)=>{n.d(r,{m:()=>h});var a=n(697737),i=n(719334),o=n(76265),s=n(553362),l=n(156737),c=n(736041),d=n(611390),u=n(534294),m=n(402511),p=n(238753);(0,u.nF)((e,{members:r,team:n,teamUsers:a,usersWithNoTeamUserIds:i=[],paidStatusType:u,paidStatus:m,entryPoint:p,showModalsBeneath:_=!1,costMessaging:g})=>{e.dispatch((0,c.to)({type:(0,l.j)(),data:{onConfirm:()=>{let l;e.dispatch(h({teamId:n.id,teamUsers:a,usersWithNoTeamUserIds:i,paidStatus:m,paidStatusType:u,userInitiated:!0,entryPoint:p}));let c=r.length,_={productName:u===d.j4.WHITEBOARD?(0,o.t)("general.figjam"):(0,o.t)("general.figma_design"),nameOrEmail:r[0].name||r[0].email,numTeamMembers:c};switch(m){case d.Zf.FULL:l=(0,o.t)("team_user.actions.team_members_upgraded.seat_rename",_);break;case d.Zf.STARTER:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer.seat_rename",_);break;case d.Zf.RESTRICTED:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer_restricted.seat_rename",_)}e.dispatch(s.F.enqueue({type:"team-paid-status-updated",message:l}))},members:r,team:n,paidStatusType:u,paidStatus:m,costMessaging:g},showModalsBeneath:_}))});let h=(0,u.MM)("TEAM_USER_UPDATE_DESIGN_PAID_STATUS",async(e,{teamId:r,teamUsers:n,usersWithNoTeamUserIds:s,paidStatus:l,paidStatusType:c,userInitiated:u,entryPoint:h},{optimistId:_})=>{if(u){let u=n.map(e=>e.user_id).concat(s||[]);await a.Ay.put(`/api/teams/${r}/team_user_batch`,{team_user_deltas:u.map(e=>{let r={user_id:e};return c===d.j4.WHITEBOARD?r.whiteboard_paid_status=l:r.design_paid_status=l,r}),entry_point:h}).then(function({data:n}){e.dispatch(m.c(_)),e.dispatch((0,p.yJ)({teamUsers:n.meta,teamId:r}))}).catch(function(r){e.dispatch(m.r(_));let n=(0,o.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status");e.dispatch(i.s.error(n)),console.error(r)})}},e=>`$TEAM_USER_UPDATE_DESIGN_PAID_STATUS::teamId::${e.teamId}`)},749441:(e,r,n)=>{n.d(r,{c0:()=>p});var a=n(201863),i=n(697737),o=n(338584),s=n(957755),l=n(534294),c=n(841924),d=n(38885),u=n(84530),m=n(31314);let p=(0,a.N)("ONBOARDING_TEMPLATES_PUT_ALL");(0,l.nF)(e=>{m.H.getTemplates({type:"onboarding"}).then(({data:r})=>{let n=r.meta;Object.keys(n).forEach(r=>{e.dispatch((0,s.Sb)({hubFiles:n[r],src:"getOnboardingTemplates"}))}),e.dispatch(p(n))})}),(0,l.nF)((e,r)=>i.Ay.post("/api/files/first_template_type",{template_type:r.type})),c.M4.Query({fetch:async e=>{let r=await u.S.getTaggedUserFiles({...e});return 200!==r.status||r.data.meta.files.length<1?[]:r.data.meta.files},key:"starter_files",schema:o.array(d.L)}),c.M4.Query({fetch:async()=>{let e=await m.H.getStartingPointsTemplates();if(200!==e.status)throw Error("Failed to fetch starting points templates");return e.data.meta},key:"starting_points_templates"})},193285:(e,r,n)=>{n.d(r,{C$:()=>P,S5:()=>A,WJ:()=>R,hz:()=>O,yJ:()=>D});var a=n(217950),i=n(201863),o=n(777535),s=n(281935),l=n(163773),c=n(453261),d=n(550479),u=n(653798),m=n(697737),p=n(76265),h=n(956292),_=n(553362),g=n(904703),f=n(47795),E=n(736041),y=n(190500),b=n(31393),v=n(968525),T=n(333581),I=n(260105),S=n(534294),w=n(719971);(0,S.nF)(async()=>{try{await m.Ay.post("/api/user/migrate_personal_drafts")}catch(e){(0,u.Lo)("planSpaces","Personal drafts not auto-migrated for user",e)}});let A=(0,S.nF)(async e=>{try{let r=e.getState();for(let a of r.authedUsers.orderedIds)if(await (0,b.z$)(a)){N();let a=n(797834).xv;e.dispatch(E.to({type:a,data:{users:Object.values(r.authedUsers.byId),onLogOut:()=>{e.dispatch(C())}}}));return}}catch(e){(0,d.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user"))}e.dispatch(C())}),C=(0,S.nF)(e=>{if(s.eD){l.Ay.redirect("/logout");return}let r=(0,v.d9)(e.getState().selectedView);I.H.logoutAllUsers().then(()=>{(0,y.Pg)(),g.U2.clear(),new c.P().sendToAllTabs(T.y,T.J),l.Ay.redirect(`${r?"/community":""}/?fuid=`)}).catch(r=>{let n=r.data?.message||(0,p.t)("file_browser.file_browser_actions.logout_error_without_email");e.dispatch(_.F.enqueue({error:!0,message:n}))})});(0,S.nF)(async(e,r)=>{try{if(await (0,b.z$)(r.user.id)){N();let a=n(797834).xv;e.dispatch(E.to({type:a,data:{users:[r.user],onLogOut:()=>{e.dispatch(L(r))}}}))}else e.dispatch(L(r))}catch(n){(0,d.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user")),e.dispatch(L(r))}});let N=()=>{try{(0,o.sx)("autosave_modal_shown",{},{forwardToDatadog:!0,batchRequest:!0})}catch(e){}},L=(0,S.nF)((e,r)=>{I.H.logoutOneUser(r.user.id).then(n=>{e.dispatch(f.os(n.data.meta)),e.dispatch(w.q0(n.data.meta)),n.data?.meta?.users?.length===0&&((0,y.Pg)(),g.U2.clear());let a=n.data?.meta?.redirect_url;a?l.Ay.redirect(a):e.dispatch(_.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.successfully_logged_out",{emailAddress:r.user.email})}))}).catch(n=>{let a=n.data?.message||(0,p.t)("file_browser.file_browser_actions.logout_error_with_email",{emailAddress:r.user.email});e.dispatch(_.F.enqueue({error:!0,message:a}))})}),O=(0,i.N)("DELETE_USER_LOADING"),R=(0,i.N)("USER_ERASE_SECRETS"),P=(0,i.N)("USER_TOGGLE_TWO_FACTOR"),D=h.vv},35879:(e,r,n)=>{n.d(r,{Q$:()=>y});var a=n(805014),i=n(201863),o=n(697737),s=n(76265),l=n(717288),c=n(563846),d=n(553362),u=n(534294),m=n(365347),p=n(366172),h=n(244539),_=n(731556),g=n(47795);let f=e=>{let r=e.getState();e.dispatch(_.UU({force:!0})),r.mirror.appModel.showUi||p.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&p.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(g.j7({type:h.a}))})};(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n={text:(0,s.t)("comments.manage"),action:()=>f(e)},a="all"===r.preference?(0,s.t)("comments.you_will_be_notified_about_file_comments"):(0,s.t)("comments.you_will_be_notified_about_replies_and_at_mentions");e.dispatch(d.F.enqueue({message:a,type:"comments-opted-in",button:n,onDismiss:()=>{},timeoutOverride:15e3}))}});let E=(e,r)=>{let n;return"exp_notification_catfile"===r?n=`/api/user_notifications/catfile_optin/${e}`:"exp_notification_catfic"===r&&(n=`/api/user_notifications/catfic_optin/${e}`),e=>{o.Ay.post(n,{opted_in:e})}};(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName),a={text:(0,s.t)("comments.turn_on"),action:()=>{n(!0)}};setTimeout(()=>{e.dispatch(d.F.enqueue({message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),type:"get_notified_about_all_comments_prompt",button:a,onDismiss:()=>n(!1),timeoutOverride:15e3}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName);setTimeout(()=>{e.dispatch(c.Q.enqueue({notification:{type:l._.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS,message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),acceptCallback:()=>n(!0),dismissCallback:()=>n(!1)}}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let r={text:(0,s.t)("comments.manage"),action:()=>f(e)},n=(0,s.t)("dev_mode.you_will_be_notified_about_status_changes");e.dispatch(d.F.enqueue({message:n,type:"dev-mode-opted-in",button:r,onDismiss:()=>{},timeoutOverride:15e3}))}});let y=(0,i.N)("USER_NOTIFICATIONS_SET_COMMUNITY_PROFILE_BELL")},463713:(e,r,n)=>{n.d(r,{D6:()=>R,H1:()=>A,Ho:()=>P,U6:()=>C,Vw:()=>b,au:()=>N,cx:()=>I,gA:()=>y,hL:()=>O,rT:()=>v,w9:()=>T});var a=n(805014),i=n(707062),o=n(201863),s=n(777535),l=n(875877),c=n(657548),d=n(606456),u=n(697737),m=n(719334),p=n(76265),h=n(553362),_=n(534294),g=n(963993),f=n(452863),E=n(20174);let y=(0,o.N)("UNSET_HOVERED_IN_MODAL_VOTE_PIN"),b=(0,o.N)("SET_HOVERED_IN_MODAL_VOTE_PIN"),v=(0,o.N)("DESELECT_VOTE_PIN"),T=(0,o.N)("SELECT_VOTE_PIN"),I=(0,o.N)("INITIATED_VOTING_SESSION");(0,_.nF)(async(e,{uiSurface:r})=>{let n=e.getState(),{fileKey:a}=n.selectedView,i=n.mirror.appModel.votingSessionInfo.sessionId;if(!a||!i)return;let o=S(a),s="end-voting-session-failed",c=()=>{e.dispatch(E.of({key:o})),e.dispatch(h.F.enqueue({type:s,message:(0,p.t)("voting.visual_bell.end_voting_session_failed")}))};e.dispatch(E.Cx({key:o})),e.dispatch(h.F.dequeue({matchType:s})),await u.Ay.put(`/api/file/${a}/voting_sessions/${i}`,{in_progress:!1}).then(({status:n})=>{200===n?(e.dispatch(E.x2({key:o})),"MeetingsPanel"===r&&l.atomStore.set(f.Qs,{type:"SET_VIEW",payload:f.iN.PAST_VOTES})):c()}).catch(e=>{throw c(),e})});let S=e=>`end_voting_session_${e}`;(0,_.nF)((e,{source:r,usedCustomTitle:n,requestBody:a,uiSurface:i})=>{let{fileKey:o}=e.getState().selectedView;if(!o)return;let c=w(o),d=()=>{e.dispatch(E.of({key:c})),e.dispatch(h.F.enqueue({type:"start-voting-session-failed",message:(0,p.t)("voting.visual_bell.start_voting_session_failed")}))};e.dispatch(E.Cx({key:c})),e.dispatch(h.F.dequeue({matchType:"start-voting-session-failed"})),u.Ay.post(`/api/file/${o}/voting_sessions`,a).then(a=>{200===a.status?(e.dispatch(I({votingSessionId:a.data.meta.id})),"MeetingsPanel"===i&&l.atomStore.get(f.Qs).activeToolModal===f.sx.VOTING&&l.atomStore.set(f.Qs,{type:"SET_TOOL",payload:null}),e.dispatch(E.x2({key:c})),(0,s.sx)("start_voting_session",{source:r,usedCustomTitle:n,votingSessionId:a.data.meta.id,fileKey:o})):d()}).catch(e=>{throw d(),e})});let w=e=>`create_voting_session_${e}`;(0,_.nF)((e,{votingSessionId:r})=>{let n=e.getState().selectedView;if(!n.fileKey)return null;let a=u.Ay.del(`/api/file/${n.fileKey}/voting_sessions/${r}`);e.dispatch((0,m.Q)({promise:a,fallbackError:(0,p.t)("voting.modal.delete_voting_session_error")})),e.dispatch(h.F.enqueue({message:(0,p.t)("voting.modal.delete_voting_session_visual_bell")})),(0,d.f)(a,e.dispatch,L({votingSessionId:r})),(0,c.WB)().optimisticallyDelete({VotingSession:{[r]:null}},a)});let A=(0,_.nF)((e,r)=>{let n;let o=r.votingStage,s=e.getState(),l=s?.mirror?.appModel?.currentPage;if(o===a.W8Y.NO_SESSION){a.ofk.setVotingSessionInfo("",a.W8Y.NO_SESSION,0,l);return}let c=s?.openFile?.votingSessions;if(o===a.W8Y.ENDED){let e=r.sessionId;n=c?.find(r=>r.id===e&&!r.inProgress)}else n=c?.find(e=>e.inProgress);if(!n)return;let d=(0,i.oA)(n.pageNodeId);d&&(a.ofk.setVotingSessionInfo(n.id,o,n.userVoteLimit,d),o===a.W8Y.JOINED&&(e.dispatch(C()),s.mirror.selectionProperties.whiteboardNumSelectedByType?.STAMP&&(0,g.wr)()))}),C=(0,o.N)("DISMISS_JOIN_CONFIRMATION"),N=(0,o.N)("HIDE_JOIN_VOTING_SESSION_MODAL"),L=(0,o.N)("DELETE_VOTING_SESSION"),O=(0,o.N)("SET_VOTES_PER_USER_LIMIT"),R=(0,o.N)("SET_TITLE"),P=(0,o.N)("CLEAR_STATE")},965361:(e,r,n)=>{n.d(r,{$J:()=>s.qZS,AK:()=>g,H5:()=>l,I_:()=>E,Le:()=>h,Tv:()=>f,j9:()=>c,jp:()=>m,n6:()=>y,qN:()=>p,wq:()=>_});var a=n(411855),i=n(151314),o=n(977235),s=n(183739);let l="You are trying to use comments functionality but didn't wire a provider for comments",c=(0,a.createContext)(void 0);function d(){return(0,a.useContext)(c)}let u={};function m(){return function(e,r){let n=(0,a.useMemo)(()=>e?.status!=="loaded"?u:r(e.data),[e,r]),i=e?.status||"loading",s=e?.errors||[];return(0,a.useMemo)(()=>n===u||"loading"===i?(0,o.Xm)():"errors"===i?{status:i,data:null,errors:s}:{status:"loaded",errors:s,data:n},[i,s,n])}((0,a.useContext)(c),e=>e.file?.currentUserFileFollower||null)}function p(){let e=d();return!!e&&e.isUnresolvedLoaded}function h(){let e=d();return!!e&&e.isUnresolvedLoaded&&e.isResolvedLoaded}function _(){let e=d();return e?e.threads:(0,o.Xm)()}function g(e){let r=(0,a.useContext)(c);return(0,a.useMemo)(()=>{if(!r)throw Error(l);if("loaded"!==r.status||!r.data||!r.api.reactionsApi)return 0;let n=r.api.reactionsApi?.getReactions(e);return n?.length||0},[e,r])}function f(e,r){let n=(0,a.useContext)(c);return(0,a.useMemo)(()=>{if(!n)throw Error(l);return"loaded"===n.status&&n.data?{status:"loaded",data:function(e,r){if(!r)return{typed:[],users:[],yours:0,total:0};let n={};return r.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()).reduce((r,a)=>{let[o,s]=(0,i.Kh)(a.emoji);r.total++;let l=n[o];if(!l){let e={count:0,selected:!1,users:[],emoji:o,skinTonesToUsers:{}};r.typed.push(e),l=e,n[o]=e}let c={id:a.user.id,handle:a.user.handle,img_url:a.user.imgUrl};return null!==s&&(void 0===l.skinTonesToUsers[s]&&(l.skinTonesToUsers[s]=[]),l.skinTonesToUsers[s].push(c)),l.count++,l.users.push(c),l.selected=l.selected||a.userId===e,r},{typed:[],yours:0,total:0,users:[]})}(r,n.api.reactionsApi?.getReactions(e)),errors:n.errors}:(0,o.Xm)()},[e,r,n])}function E(){let e=(0,a.useContext)(c);if(!e)throw Error(l);return e.api}function y(){return function(e){if("loaded"!==e.status)return 0;let r=0;for(let n of e.data)if((n.anchored||n.isCanvasMention)&&!n.comments[0].resolved_at)for(let e of n.comments)e.isUnread&&r++;return r}(_())}},585875:(e,r,n)=>{n.d(r,{NX:()=>W});var a=n(411855),i=n(188507),o=n(48451),s=n(777535),l=n(533132),c=n(336427),d=n(841962),u=n(657548),m=n(728722),p=n(977235),h=n(866415),_=n(550479),g=n(583502),f=n(653798),E=n(771952),y=n(427606),b=n(697737),v=n(731556),T=n(874051),I=n(73041),S=n(834616),w=n(619560),A=n(723337),C=n(662310),N=n(15092),L=n(183739),O=n(914077),R=n(938441),P=n(965361),D=n(312489),k=n(651698),M=n(538389),F=n(576834);class x{constructor(e){this.client=e}toggleReaction(e,r,n){if("loaded"!==this.client.subscription.status)throw Error("Unable to toggle reactions for unloaded subscription");return this.getReactions(e).find(n=>n.emoji===r&&n.fileCommentId===e&&n.userId===this.client.user.id)?this.removeReaction(e,r):this.addReaction(e,r,n)}async addReaction(e,r,n){let a=b.Ay.post(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r,prototype_mode:n?.prototype_mode||!1,selected_view:n?.selectedView||"",quick_reply:n?.quickReply||!1});return this.client.optimistically(async(n,i,o)=>{let s=new Date,l=`${e}_${r}_${o.id}`;await i.optimisticallyCreate({CommentReaction:{[l]:{fileCommentId:e,emoji:r,fileKey:n.file.id,userId:o.id,user:{id:o.id,handle:o.handle,imgUrl:o.img_url},createdAt:s,sortTimestamp:s}}},a)}),await a}async removeReaction(e,r){let n=b.Ay.del(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r});return this.client.optimistically(async(a,i,o)=>{let s=o.id,l=this.getReactions(e).filter(e=>e.emoji===r&&e.userId===s).map(e=>e.id),c=l?.reduce((e,r)=>({...e,[r]:null}),Object.create(null));await i.optimisticallyDelete({CommentReaction:c},n)}),await n}getReactions(e){if("loaded"!==this.client.subscription.status)throw Error("Unable to get reaction for unloaded subscription");let r=this.client.subscription.data.file;if(!r)throw Error("Unable to get reaction for unloaded subscription");if("reactions"in r)return r.reactions.filter(r=>r.fileCommentId===e);{let n=r.mobileCommentThread.find(r=>r.id===e);return n?n.reactions:[]}}}function U(e){return e.map(e=>({...e,id:e.id.toString()}))}class B{constructor(e){this.client=e}trackMissingCommentData(e,r,n,a,i,o){let s=!1;F.O.records[n.id]={parentId:n.parent_id,report:(r,l)=>{if(!s&&(s=!0,(0,_.kF)("comments_optimistic_updates","true"),(0,_.kF)("isLoadedComments",i.isLoadedComments?"true":"false"),(0,_.kF)("commentType",e),(0,f.x1)(r,l,{id:n.id,fileKey:this.client.fileKey,parentId:n.parent_id,pageId:n.client_meta?.page_id,userId:this.client.user.id,clientMeta:n.client_meta,...o}),this.client.livegraphClient)){let e=a(),n=null,i=null,o=null;for(let a of e)if("VIEW_QUERY_NODE.REMOVE_RESULT"===a.type||"STORE.ADD_INSTANCE"===a.type||"STORE.REMOVE_INSTANCE"===a.type||"SESSION.APPLY_MUTATIONS"===a.type||"SESSION.APPLY_SHADOW_MUTATIONS"===a.type||"SESSION.REMOVE_SHADOW_MUTATIONS"===a.type||"REQUEST_MESSAGE"===a.type&&"sync"===a.message.messageType||"RESPONSE_MESSAGE"===a.type&&"synced"===a.message.messageType||"RESPONSE_MESSAGE"===a.type&&"pendingMutations"===a.message.messageType)(0,f.Lo)(r,JSON.stringify(a));else if("VIEW_QUERY_NODE.ADD_RESULT"===a.type||"VIEW_QUERY_NODE.UPDATE_RESULT"===a.type){if(a.type===n&&a.queryId===i&&a.instance===o)continue;(0,f.Lo)(r,JSON.stringify(a)),n=a.type,i=a.queryId,o=a.instance}else"SESSION.NOTIFY_OBSERVERS"===a.type&&a.view._name.includes("Comments")&&(0,f.Lo)(r,JSON.stringify({type:"SESSION.NOTIFY_OBSERVERS",viewName:a.view._name}));(0,f.x1)(r,l)}}},setTimeout(()=>{let i=F.O.records[n.id];if(i||a(),delete F.O.records[n.id],"loaded"!==this.client.subscription.status)return;let o=this.client.loadedComments.some(e=>e.id===n.id||e.id===r);i&&!o?i.report(`${e} Never Appeared`,"Comment failed to appear within ten seconds of creation"):a()},1e4)}create(e,r){let n=(0,u.S6)(),{fileKey:a,messageMeta:i,attachments:o,clientMeta:c,pageId:m,uuid:p}=e;(0,s.sx)("New comment API create",{uuid:p});let h=(0,d.kc)().show_at_mention_invited_users?[...new Set((0,l.cs)(i))]:[],_=async e=>{let n=e.data?.reason;if(!n||"comment_validation_failure"!==n.reason||!r?.onValidationError)throw e;let l=n.failure_info,d=await r.onValidationError(U(l.users_without_view),U(l.ext_users_without_view),U(l.uninvitable_users));return d?((0,s.sx)("New comment API handling validation",{uuid:p}),b.Ay.post(`/api/file/${a}/comments`,{file_key:a,message_meta:i,attachments:o.map(e=>e.id),client_meta:c,page_id:m,prototype_mode:r?.prototypeMode,share_to_mentions:d.forceWithInvite,force:d.forceMentions,uuid:p,pending_mentions:h}).catch(_)):null},g=(0,k.e)(this.client.subscription),f=this.client.subscription.data?.file?.currentUserCommentReadStatus,E=b.Ay.post(`/api/file/${a}/comments`,{file_key:a,message_meta:i,attachments:o.map(e=>e.id),client_meta:c,page_id:m,prototype_mode:r?.prototypeMode,share_to_mentions:null===r.onValidationError,force:null===r.onValidationError,pending_mentions:h,uuid:p,...!f&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically((e,r)=>{let n=this.client.loadedComments.map(e=>e.orderId||0),s=n.length>0?Math.max(...n):0,d=(0,l.Rc)(i);r.optimisticallyCreateWithUUID({Comment:{[p]:{uuid:p,key:a,userId:this.client.user.id,parentId:null,orderId:s+1,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:{x:c.x,y:c.y,nodeId:c.node_id||null,pageId:c.page_id||null,nodeOffset:c.node_offset||null,inFrame:c.in_frame||null,selectionBoxAnchor:c.selection_box_anchor||null,stablePath:c.stable_path||null},messageMeta:d,messageMetaStylized:d,user:{id:this.client.user.id,handle:this.client.user.handle,imgUrl:this.client.user.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},E);let u=(0,S.Mu)(o,a,p);if(u&&r.optimisticallyCreate({CommentAttachment:u},E),!e.file.currentUserCommentReadStatus){let e=new Date;r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${e.getTime()}`]:{userId:this.client.user.id,fileKey:this.client.fileKey,createdAt:e,allReadAt:w.gj.allReadAt,readComments:{},unreadComments:{}}}},E)}}),[E.catch(_).then(e=>{if(!e)return null;try{let a=e.data.meta;this.trackMissingCommentData("New Comment",p,a,n,{isLoadedComments:g},r)}catch{}return e}),p]}reply(e,r){let n=(0,u.S6)(),{threadId:a,threadUuid:i,messageMeta:o,attachments:c,uuid:d}=e,{fileKey:m}=this.client,p=(0,l.cs)(o),h=b.Ay.post(`/api/file/${m}/comments/${e.threadId}`,{file_key:m,uuid:d,message_meta:o,attachments:c.map(e=>e.id),prototype_mode:r?.prototypeMode,share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,tracking_context:r.trackingContext,pending_mentions:p}),_=(0,l.Rc)(o),g=(0,k.e)(this.client.subscription),{user:f}=this.client;return this.client.optimistically((e,r)=>{i?r.optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:null}}},h):r.optimisticallyUpdate({Comment:{[a]:{resolvedAt:null}}},h),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"reply",isOptimistic:!!i}),r.optimisticallyCreateWithUUID({Comment:{[d]:{uuid:d,key:m,userId:f.id,parentId:a,orderId:null,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:null,messageMeta:_,messageMetaStylized:_,user:{id:f.id,handle:f.handle,imgUrl:f.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null,attachments:c.map(e=>(0,S.QG)(e,m,d))}}},h);let n=(0,S.Mu)(c,m,d);n&&r.optimisticallyCreate({CommentAttachment:n},h)}),[h.then(e=>{if(!e)return null;let a=e.data.meta;return this.trackMissingCommentData("Reply Comment",d,a,n,{isLoadedComments:g},r),e}),d]}}class V{constructor(e){this.client=e}get commentReceipts(){return this}async markAsUnread(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=b.Ay.post(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:[e],...!r&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically(async(r,a,i)=>{let o=r.file.currentUserCommentReadStatus,s=new Date;if(o){let{[e]:r,...i}=o.readComments;await a.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,allReadAt:w.gj.allReadAt,readComments:i,unreadComments:{...o.unreadComments,[e]:"true"}}}},n)}else await a.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:w.gj.allReadAt,readComments:{},unreadComments:{[e]:"true"}}}},n)}),await n}async markAllAsRead(){let e=this.client.subscription.data?.file?.currentUserCommentReadStatus,r=b.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{...!e&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically(async(e,n,a)=>{let i=e.file.currentUserCommentReadStatus,o=new Date;i?await n.optimisticallyUpdate({CommentReadStatus:{[i.id]:{...i,allReadAt:o,readComments:{},unreadComments:{}}}},r):await n.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:o,readComments:{},unreadComments:{}}}},r)}),await r}async markAsRead(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=b.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:e,...!r&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically(async(r,a,i)=>{let o=r.file.currentUserCommentReadStatus,s=new Date,l=e.reduce((e,r)=>({...e,[r]:s.toUTCString()}),{});o?await a.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,readComments:{...o.readComments,...l},unreadComments:Object.keys(o.unreadComments).filter(r=>!e.includes(r)).reduce((e,r)=>(e[r]="true",e),{})}}},n):await a.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:w.gj.allReadAt,readComments:l,unreadComments:{}}}},n)}),await n}}let G=(0,h.xx)(e=>{let r=e=>(e.hasOwnProperty("transform")||Object.defineProperty(e,"transform",{get:function(){return{filter:n=>r(e.filter(n)),map:n=>r(e.map(n)),join:n=>r([...e,...n||[]])}}}),e);return r(e)});function H(e,r,n){let i=a.useMemo(()=>{if("loaded"!==n.status)return new Set([]);let e=n.data.file;return new Set(e?"comments"in e?e.comments.map(e=>e.id):e.resolvedComments.map(e=>e.id):[])},[n]),o=(0,c.ZC)(i),{removed:s}=a.useMemo(()=>(0,g.Zv)(i,o),[i,o]),l=a.useCallback(e,r);a.useEffect(()=>{s.forEach(e=>{l(e)})},[l,s])}function W(e){let{userId:r,file:n,activeId:s,anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:h,getPageIdsForNodes:_,children:g}=e,f=a.useRef({}),b=(0,I.E3)()===O.nT.Whiteboard,S=!!(0,d.kc)().xr_debounce_threshold,w=!!(0,d.kc)().async_spotlight,U=n?.key,W=!!U,K=a.useMemo(()=>({fileKey:U??""}),[U]),Y=a.useMemo(()=>(0,E.g)(),[K]),$=(0,m.Rs)(P.$J,K,{enabled:W,traceId:Y}),j=(0,m.Rs)(L.ZBn,K,{enabled:W}),z=(0,m.Rs)(L.qRE,K,{enabled:S&&W}),q=(0,m.Rs)(L.bCq,K,{enabled:w&&W}),Z=(0,m.Rs)(L.gkf,K,{enabled:b&&W}),X=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap),J=(0,i.wA)(),Q=a.useMemo(()=>{if("loaded"!==$.status||!$.data.file)return $;let e=G($.data.file.comments).transform.filter(e=>null===e.resolvedAt);if("loaded"===j.status){let r=j.data.file?.resolvedComments;e=e.transform.join(r)}let r={...$.data.file,comments:e};return{...$,data:{...$.data,file:r}}},[$,j]);a.useMemo(()=>{"loaded"===Q.status&&Q.data?.file?.comments?.forEach(e=>{e.id in X?(f.current[e.id]=e,e.id=X[e.id]):e.uuid&&e.uuid in X&&f.current[e.uuid]&&f.current[e.uuid]!==e&&(J(v.pI({commentUuid:e.uuid})),delete f.current[e.uuid])})},[J,Q,X]);let ee=(0,i.d4)(e=>e.mirror.appModel.pagesList),{commentsAttachedToNodes:et,commentThreadNodeIds:er,commentThreadStablePaths:en}=a.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file)return{commentThreadsNodeIds:[],commentsAttachedToNodes:[]};let e=[],r=new Set,n=new Set;return Q.data.file.comments.forEach(a=>{if(null===a.parentId){let i=a.clientMeta?.nodeId,o=a.clientMeta?.stablePath;o&&h?(e.push(a),n.add(`[${o.join(",")}]`)):i&&u&&(e.push(a),r.add(i))}}),{commentsAttachedToNodes:e,commentThreadNodeIds:r,commentThreadStablePaths:n}},[Q,u,h]),ea=a.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file||S&&!z.data?.file)return[];let e=new Set(er);return S&&(0,C.N)(z.data.file.feedPosts).forEach(r=>{e.add(r)}),Array.from(e)},[Q,z,S,er]),ei=a.useMemo(()=>"loaded"===Q.status&&Q.data.file?Array.from(new Set(en)):[],[Q,en]);a.useEffect(()=>{u&&u(ea),h&&h(ei)},[u,ea,h,ei]);let eo=(0,A.W9)(r,Q,s,l,_,ee),es=(0,A.gu)(r,Z,e.activeId),el=(0,R.i)(z,e.activeId,_,c),ec=(0,y.Z)(q),ed=a.useMemo(()=>{if("loaded"!==Q.status||S&&"loaded"!==z.status||b&&"loaded"!==Z.status)return(0,p.gB)([]);let e=[];return eo.data&&(e=e.concat(eo.data)),es.data&&(e=e.concat(es.data)),el.data&&(e=e.concat(el.data)),ec.data&&(e=e.concat(ec.data)),(0,p.gB)(e)},[Q.status,S,z.status,b,Z.status,eo.data,es.data,el.data,ec.data]),eu=function(e){let r=(0,m.ZA)(),n=(0,N.iZ)(),{args:i,subscription:s}=e,[l,c]=a.useState(()=>{if(n)return new k.I(i,s,n)});return a.useEffect(()=>{if(!n){c(void 0);return}if(!l||!(0,o.c2)(l.args,i)){c(new k.I(i,s,n));return}},[l,i,s,n,r]),l&&(n&&(l.user=n),l.subscription=s,l.livegraphClient=r),a.useMemo(()=>l?{commentReceipts:new V(l),reactionsApi:new x(l),writeAPI:new B(l),pinApi:new M.xI(l)}:{},[l])}({args:K,subscription:Q}),em=(0,D.r)({args:K,subscription:z});eu.canvasMentionReceipts=(0,T.pf)({canvasMentionArgs:K,canvasMentionSubscription:Z}),(0,A.Hu)(et,{enabled:!!(0,d.kc)().comments_absolute_positioning}),H(e=>{F.O.records[e]?.report?.("New Comment Missing","Comment disappeared within ten seconds of creation")},[],$),H(e=>{F.O.records[e]?.report?.("New Resolved Comment Missing","Resolved comment disappeared within ten seconds of creation")},[],j);let ep=a.useMemo(()=>W?{...Q,api:eu,feedApi:em,threads:ed,isUnresolvedLoaded:"loaded"===$.status,isResolvedLoaded:"loaded"===j.status}:{status:"loading",data:null,errors:null,threads:(0,p.Xm)(),api:{},isUnresolvedLoaded:!1,isResolvedLoaded:!1},[W,Q,eu,em,ed,$.status,j.status]);return a.createElement(P.j9.Provider,{value:ep},g)}},969959:(e,r,n)=>{n.d(r,{t:()=>o});var a=n(841962),i=n(76265);function o(){let e=(0,a.kc)().ce_tv_fill_hug_suggest?[{separator:!0},{action:"set-selection-hug-horizontal",displayText:(0,i.t)("fullscreen_actions.set-hug-width")},{action:"set-selection-hug-vertical",displayText:(0,i.t)("fullscreen_actions.set-hug-height")},{action:"set-selection-fill-horizontal",displayText:(0,i.t)("fullscreen_actions.set-fill-width")},{action:"set-selection-fill-vertical",displayText:(0,i.t)("fullscreen_actions.set-fill-height")}]:[];return{name:"multi-stack-selection-submenu",featureFlags:["auto_auto_layout"],flags:["design","edit","slides"],children:[{action:"run-multi-stack-auto-layout",displayText:(0,i.t)("fullscreen_actions.run-multi-stack-auto-layout")},{action:"destroy-all-auto-layout",displayText:(0,i.t)("fullscreen_actions.destroy-all-auto-layout")},{separator:!0},{action:"resize-to-fit",displayText:(0,i.t)("fullscreen_actions.resize-to-fit")},...e]}}},91247:(e,r,n)=>{n.d(r,{E2:()=>p,M5:()=>i,N$:()=>f,Tb:()=>u,WX:()=>_,W_:()=>s,XG:()=>l,YN:()=>h,ZO:()=>a,_O:()=>m,aY:()=>d,s0:()=>o,xP:()=>g});var a=(e=>(e.USERS="users",e.TEAMS="teams",e.ORGS="orgs",e.PLUGINS="plugins",e.WIDGETS="widgets",e.HUB_FILES="hub_files",e.PROFILES="profiles",e.CATEGORIES="community_categories",e))(a||{}),i=(e=>(e.HUB_FILE_DUPLICATED="Hub File Duplicated",e.PLUGIN_INSTALLED="Hub Plugin Installed",e.PLUGIN_UNINSTALLED="Hub Plugin Uninstalled",e.WIDGET_INSTALLED="Hub Widget Installed",e.WIDGET_UNINSTALLED="Hub Widget Uninstalled",e.SLIDE_TEMPLATE_USED="slide_template_used",e.RESOURCE_LIKE="resource_like",e.RESOURCE_UNLIKE="resource_unlike",e.SEARCH_QUERY_RESULT="search_query_result",e))(i||{}),o=(e=>(e.PLUGIN_INSTALL="community_hub_plugin_install",e.PLUGIN_UNINSTALL="community_hub_plugin_uninstall",e.PROFILE_FOLLOW="community_hub_follow",e.PROFILE_UNFOLLOW="community_hub_unfollow",e.HUB_FILE_LIKE="community_hub_file_like",e.HUB_FILE_UNLIKE="community_hub_file_unlike",e.PLUGIN_LIKE="community_plugin_like",e.PLUGIN_UNLIKE="community_plugin_unlike",e.WIDGET_LIKE="community_widget_like",e.WIDGET_UNLIKE="community_widget_unlike",e.SHARE_TWITTER="community_hub_share_twitter",e.LANDING_PAGE_TO_CURATED_PAGE_BUTTON="landing_page_to_curated_page_button",e.SHARE_FACEBOOK="community_hub_share_facebook",e.SHARE_LINK="community_hub_share_link",e.CREATE_PROFILE="community_hub_create_profile",e.COMMUNITY_OPT_IN="community_hub_opt_in",e.UPDATE_PROFILE_HANDLE="community_hub_update_handle",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN="community_hub_plugin_install_warning_shown",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_CANCEL="community_hub_plugin_install_warning_cancel",e.SEE_MORE_IN_COMMUNITY="see_more_in_community",e.FIND_MORE_PLUGINS="find_more_plugins",e))(o||{}),s=(e=>(e.PROFILE_ADMIN_MENU_OPEN="Community browse menu opened",e))(s||{}),l=(e=>(e.PLUGINS="plugins",e.FILES="files",e.CREATORS="creators",e.FIGJAM_PLUGINS="figjam_plugins",e.FIGMA_DESIGN_PLUGINS="figma_design_plugins",e.WIDGETS="widgets",e.FIGJAM_WIDGETS="figjam_widgets",e.FIGMA_DESIGN_WIDGETS="figma_design_widgets",e))(l||{}),c=(e=>(e.POPULAR="popular",e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e.INSTALLS_DESC="installs",e.RUNS_DESC="runs",e.LAST_UPDATED_DESC="updated_at",e.INSTALLS_ASC="installs_asc",e.RUNS_ASC="runs_asc",e.LAST_UPDATED_ASC="updated_at_asc",e))(c||{}),d=(e=>(e.FREE_HUB_FILE_LICENSE="https://creativecommons.org/licenses/by/4.0/",e.FREE_PLUGIN_LICENSE="https://www.figma.com/community-resource-license/",e.FREE_RESOURCE_LICENSE="https://www.figma.com/community-free-resource-license/",e.PAID_RESOURCE_LICENSE="https://www.figma.com/community-paid-resource-license/",e))(d||{});let u="checkout",m="freemium_preview",p="1",h="community_publish_modal";var _=(e=>(e.OPENED="opened",e.EDIT_NAME="edit_name",e.EDIT_DESCRIPTION="edit_description",e.DETAILS="details",e.ERROR="error",e.PUBLISH="publish",e.CLOSED="closed",e.ADD_CAROUSEL_MEDIA="add_carousel_media",e.DELETE_CAROUSEL_MEDIA="delete_carousel_media",e.ADD_CUSTOM_THUMBNAIL="add_custom_thumbnail",e))(_||{}),g=(e=>(e.FILE_INPUT="file_input",e.DROP="drop",e))(g||{}),f=(e=>(e.INTERNAL="internal",e.COMMUNITY="community",e))(f||{})},688581:(e,r,n)=>{n.d(r,{BG:()=>S,Fh:()=>C,LM:()=>v,L_:()=>A,UV:()=>b,WT:()=>T,hY:()=>d,ln:()=>w,qt:()=>I});var a=n(236891),i=n(999682),o=n(809998),s=n(841108),l=n(223149);let c=[{deviceName:"Slide 16:9",framePresetSize:{x:1920,y:1080}},{deviceName:"Slide 4:3",framePresetSize:{x:1024,y:768}}],d=Object.create(null);for(let e of[o.eo,s.o,l.t,i.E])for(let r of e)d[r.presetIdentifier]=r;function u(e,r){let n=new Set,a=[];for(let i of e)n.has(i.deviceName)||(n.add(i.deviceName),i.archived?r?.push(i.deviceName):a.push(i.deviceName));return a}let m=[],p=u(o.eo,m),h=u(s.o,m),_=u(l.t,m),g=u(i.E,m),f=Object.create(null);for(let e in d){let r=d[e],n=r.deviceName;n in f||(f[n]=[]),f[n].push(r)}let E=(e,r)=>{for(let n of[o.eo,s.o,l.t,i.E])for(let a of n)if(a.framePresetSize.x===e&&a.framePresetSize.y===r)return a;return null};var y=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PHONE=1]="PHONE",e[e.TABLET=2]="TABLET",e[e.WATCH=3]="WATCH",e[e.DESKTOP=4]="DESKTOP",e))(y||{});let b={1:p,2:h,3:_,4:g,0:[]},v={1:u(o.eo.filter(function(e){return!0===e.isSuggested})).slice(0,5),2:u(s.o).slice(0,5),3:u(l.t).slice(0,5),4:u(i.E).slice(0,5),0:[]};function T(e,r){let n=d[r.presetIdentifier];return e.map(e=>e===n.deviceName?null:C(e,r)).filter(a.Vq)}function I(e){let r=d[e];if(null==r)return 0;let n=r.deviceName;return -1!==p.indexOf(n)?1:-1!==h.indexOf(n)?2:-1!==_.indexOf(n)?3:-1!==g.indexOf(n)?4:0}function S(e,r){for(let n of c)if(n.framePresetSize.x===e&&n.framePresetSize.y===r)return{type:"PRESENTATION",presetIdentifier:"",portraitDeviceSize:{x:0,y:0},rotation:"NONE"};let n=E(e,r);return null!=n?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"NONE"}:null!=(n=E(r,e))&&function(e,r){if("NONE"===e||"PRESENTATION"===e)return!1;if("CUSTOM"===e)return!0;if("PRESET"===e&&null!=r){let e=d[r];if(null!=e){let r=-1!==_.indexOf(e.deviceName),n=-1!==g.indexOf(e.deviceName);return!r&&!n}}return!1}("PRESET",n.presetIdentifier)?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"CCW_90"}:null}function w(e){let r=I(e||"");return 4!==r&&0!==r}let A=e=>!!function(e){let r=d[e];return r?.inlinePreviewInfo||null}(e);function C(e,r){let n=d[e]||f[e][0];if(r&&"PRESET"===r.type){let a=d[r.presetIdentifier],i=a.hideUnlessActive&&!a.archived&&n.framePresetSize.x===a.framePresetSize.x&&n.framePresetSize.y===a.framePresetSize.y;if(a&&a.deviceName===e)n=a;else if(!i&&n.hideUnlessActive&&!n.archived)return null}else if(n.hideUnlessActive&&!n.archived)return null;return n}},379480:(e,r,n)=>{n.d(r,{$W:()=>u,fS:()=>m});var a=n(76265);let i=[{name:"Android Compact",width:412,height:917,i18nName:()=>(0,a.t)("presets.android_compact")},{name:"Android Medium",width:700,height:840,i18nName:()=>(0,a.t)("presets.android_medium")},{name:"iPhone 16",width:393,height:852,i18nName:()=>(0,a.t)("presets.i_phone_16")},{name:"iPhone 16 Pro",width:402,height:874,i18nName:()=>(0,a.t)("presets.i_phone_16_pro")},{name:"iPhone 16 Pro Max",width:440,height:956,i18nName:()=>(0,a.t)("presets.i_phone_16_pro_max")},{name:"iPhone 16 Plus",width:430,height:932,i18nName:()=>(0,a.t)("presets.i_phone_16_plus")},{name:"iPhone 14 & 15 Pro Max",width:430,height:932,i18nName:()=>(0,a.t)("presets.i_phone_14_and_15_pro_max")},{name:"iPhone 14 & 15 Pro",width:393,height:852,i18nName:()=>(0,a.t)("presets.i_phone_14_and_15_pro")},{name:"iPhone 13 & 14",width:390,height:844,i18nName:()=>(0,a.t)("presets.i_phone_13_and_14")},{name:"iPhone 14 Plus",width:428,height:926,i18nName:()=>(0,a.t)("presets.i_phone_14_plus")},{name:"iPhone 13 mini",width:375,height:812,i18nName:()=>(0,a.t)("presets.i_phone_13_mini")},{name:"iPhone SE",width:320,height:568,i18nName:()=>(0,a.t)("presets.i_phone_se")}],o=[{name:"Android Expanded",width:1280,height:800,i18nName:()=>(0,a.t)("presets.android_expanded")},{name:"Surface Pro 8",width:1440,height:960,i18nName:()=>(0,a.t)("presets.surface_pro_8")},{name:"iPad mini 8.3",width:744,height:1133,i18nName:()=>(0,a.t)("presets.i_pad_mini_8_3")},{name:'iPad Pro 11"',width:834,height:1194,i18nName:()=>(0,a.t)("presets.i_pad_pro_11")},{name:'iPad Pro 12.9"',width:1024,height:1366,i18nName:()=>(0,a.t)("presets.i_pad_pro_12_9")}],s=[{name:"MacBook Air",width:1280,height:832,i18nName:()=>(0,a.t)("presets.mac_book_air_m2")},{name:'MacBook Pro 14"',width:1512,height:982,i18nName:()=>(0,a.t)("presets.mac_book_pro_14")},{name:'MacBook Pro 16"',width:1728,height:1117,i18nName:()=>(0,a.t)("presets.mac_book_pro_16")},{name:"Desktop",width:1440,height:1024,i18nName:()=>(0,a.t)("presets.desktop")},{name:"Wireframe",width:1440,height:1024,i18nName:()=>(0,a.t)("community.categories.wireframe")},{name:"TV",width:1280,height:720,i18nName:()=>(0,a.t)("presets.tv")}],l=[{name:"Slide 16:9",width:1920,height:1080,i18nName:()=>(0,a.t)("presets.slide_16_9")},{name:"Slide 4:3",width:1024,height:768,i18nName:()=>(0,a.t)("presets.slide_4_3")}],c=[{name:"A4",width:595,height:842,i18nName:()=>(0,a.t)("presets.a_4")},{name:"A5",width:420,height:595,i18nName:()=>(0,a.t)("presets.a_5")},{name:"A6",width:297,height:420,i18nName:()=>(0,a.t)("presets.a_6")},{name:"Letter",width:612,height:792,i18nName:()=>(0,a.t)("presets.letter")},{name:"Tabloid",width:792,height:1224,i18nName:()=>(0,a.t)("presets.tabloid")}],d=p(Object.values({phonePresets:i,tabletPresets:o,desktopPresets:s,presentationPresets:l,watchPresets:[{name:"Apple Watch Series 10 42mm",width:187,height:223,i18nName:()=>(0,a.t)("presets.apple_watch_series_10_42_mm")},{name:"Apple Watch Series 10 46mm",width:208,height:248,i18nName:()=>(0,a.t)("presets.apple_watch_series_10_46_mm")},{name:"Apple Watch 41mm",width:176,height:215,i18nName:()=>(0,a.t)("presets.apple_watch_41_mm")},{name:"Apple Watch 45mm",width:198,height:242,i18nName:()=>(0,a.t)("presets.apple_watch_45_mm")},{name:"Apple Watch 44mm",width:184,height:224,i18nName:()=>(0,a.t)("presets.apple_watch_44_mm")},{name:"Apple Watch 40mm",width:162,height:197,i18nName:()=>(0,a.t)("presets.apple_watch_40_mm")}],paperPresets:c,socialMediaPresets:[{name:"Twitter post",width:1200,height:675,i18nName:()=>(0,a.t)("presets.twitter_post")},{name:"Twitter header",width:1500,height:500,i18nName:()=>(0,a.t)("presets.twitter_header")},{name:"Facebook post",width:1200,height:630,i18nName:()=>(0,a.t)("presets.facebook_post")},{name:"Facebook cover",width:820,height:312,i18nName:()=>(0,a.t)("presets.facebook_cover")},{name:"Instagram post",width:1080,height:1080,i18nName:()=>(0,a.t)("presets.instagram_post")},{name:"Instagram story",width:1080,height:1920,i18nName:()=>(0,a.t)("presets.instagram_story")},{name:"Dribbble shot",width:400,height:300,i18nName:()=>(0,a.t)("presets.dribbble_shot")},{name:"Dribbble shot HD",width:800,height:600,i18nName:()=>(0,a.t)("presets.dribbble_shot_hd")},{name:"LinkedIn cover",width:1584,height:396,i18nName:()=>(0,a.t)("presets.linked_in_cover")}],figmaPresets:[{name:"Plugin icon",width:128,height:128,i18nName:()=>(0,a.t)("presets.plugin_icon")},{name:"Profile banner",width:1680,height:240,i18nName:()=>(0,a.t)("presets.profile_banner")},{name:"Plugin / file cover",width:1920,height:1080,i18nName:()=>(0,a.t)("presets.plugin_file_cover")}],archivedPresets:[{name:"iPhone 13 Pro Max",width:428,height:926,i18nName:()=>(0,a.t)("presets.i_phone_13_pro_max")},{name:"iPhone 13 / 13 Pro",width:390,height:844,i18nName:()=>(0,a.t)("presets.i_phone_13_13_pro")},{name:"iPhone 11 Pro Max",width:414,height:896,i18nName:()=>(0,a.t)("presets.i_phone_11_pro_max")},{name:"iPhone 11 Pro / X",width:375,height:812,i18nName:()=>(0,a.t)("presets.i_phone_11_pro_x")},{name:"iPhone 8 Plus",width:414,height:736,i18nName:()=>(0,a.t)("presets.i_phone_8_plus")},{name:"iPhone 8",width:375,height:667,i18nName:()=>(0,a.t)("presets.i_phone_8")},{name:"Android Small",width:360,height:640,i18nName:()=>(0,a.t)("presets.android_small")},{name:"Android Large",width:360,height:800,i18nName:()=>(0,a.t)("presets.android_large")},{name:"Google Pixel 2",width:411,height:731,i18nName:()=>(0,a.t)("presets.google_pixel_2")},{name:"Google Pixel 2 XL",width:411,height:823,i18nName:()=>(0,a.t)("presets.google_pixel_2_xl")},{name:"iPad mini 5",width:768,height:1024,i18nName:()=>(0,a.t)("presets.i_pad_mini_5")},{name:"Surface Pro 4",width:1368,height:912,i18nName:()=>(0,a.t)("presets.surface_pro_4")},{name:"MacBook",width:1152,height:700,i18nName:()=>(0,a.t)("presets.mac_book")},{name:"MacBook Pro",width:1440,height:900,i18nName:()=>(0,a.t)("presets.mac_book_pro")},{name:"Surface Book",width:1500,height:1e3,i18nName:()=>(0,a.t)("presets.surface_book")},{name:"Apple Watch 42mm",width:156,height:195,i18nName:()=>(0,a.t)("presets.apple_watch_42_mm")},{name:"Apple Watch 38mm",width:136,height:170,i18nName:()=>(0,a.t)("presets.apple_watch_38_mm")},{name:"iMac",width:1280,height:720,i18nName:()=>(0,a.t)("presets.i_mac")},{name:"Macintosh 128k",width:512,height:342,i18nName:()=>(0,a.t)("presets.mac_128k")}]})),u=p([i,s,l]);function m(e,r=d){let n=null;for(let a of Object.values(r)){if(e.width===a.width&&e.height===a.height)return a;e.width!==a.height||e.height!==a.width||n||(n=a)}return n}function p(e){return e.reduce((e,r)=>{for(let n of r)e[n.name]=n;return e},{})}p([i,o,c])},535461:(e,r,n)=>{n.d(r,{$O:()=>C,$T:()=>u,AB:()=>m,C9:()=>g,DT:()=>x,Dm:()=>a,F:()=>c,F7:()=>f,J6:()=>_,K9:()=>w,LO:()=>L,Pr:()=>p,Qx:()=>i,Sl:()=>N,Uu:()=>o,VJ:()=>M,Vl:()=>U,WJ:()=>D,W_:()=>A,XX:()=>k,Yr:()=>y,Z7:()=>P,ZR:()=>l,_V:()=>v,aN:()=>I,h2:()=>h,k8:()=>d,ku:()=>O,o$:()=>T,s4:()=>s,si:()=>F,t4:()=>R,vu:()=>b,wi:()=>S,yJ:()=>E});let a="js-fullscreen-prevent-event-capture",i="js-fullscreen-prevent-event-capture-keys",o="js-fullscreen-wheel-event-passthrough",s="js-fullscreen-wheel-event-capture",l="js-fullscreen-no-mod-wheel-event-capture",c=0x7fffffff,d="background-panel-color-picker",u="prototype-background-panel-color-picker",m="type-settings",p="text-decoration-paint-picker",h="style-preview-type-settings",_="font-picker",g="export-picker",f="selection-paint-item",E="selection-style-item",y=`${f}-slides`,b="slides-rewrite-text-picker",v="stacking-advanced-sizing",T="prototype-interaction-settings",I="accessible-reading-order",S="DROPDOWN_TYPE_SELECT_LAYER_CONTEXT_MENU",w="DROPDOWN_TYPE_SELECTION_CONTEXT_MENU",A="DROPDOWN_TYPE_CANVAS_CONTEXT_MENU",C="DROPDOWN_TYPE_SAVEPOINT_CONTEXT_MENU",N="DROPDOWN_TYPE_DEV_HANDOFF_CODE_CONTEXT_MENU",L="DROPDOWN_TYPE_PLUGIN_RUN_CONTEXT_MENU",O="DROPDOWN_TYPE_TEXT_EDIT_MODE_CONTEXT_MENU",R="DROPDOWN_TYPE_RULER_GUIDE_CONTEXT_MENU",P="DROPDOWN_TYPE_COMMENT_CONTEXT_MENU",D="DROPDOWN_TYPE_READY_STATUS_CONTEXT_MENU",k="DROPDOWN_TYPE_ANNOTATIONS_BUTTON_CONTEXT_MENU",M="DROPDOWN_TYPE_THREAD_COMMENT_OVERFLOW_MENU",F="DROPDOWN_TYPE_SECTION_PRESET_PICKER_CONTEXT_MENU",x="DROPDOWN_TYPE_COMMENT_ATTACHMENT_CONTEXT_MENU",U="DROPDOWN_TYPE_GRADIENT_STOP_CONTEXT_MENU"},375887:(e,r,n)=>{function a(e){return"children"in e||"childDropdown"in e}function i(e){return"action"in e||"callback"in e}function o(e){return"separator"in e}function s(e){return"header"in e}function l(e){return"render"in e}function c(e,r){var n;return!!r.checked||null!=r.property&&("string"==typeof(n=r.property)?e[n]:n.getCopy())===r.propertyValue}function d(e,r){return"string"==typeof r?e[r]:r.getCopy()}function u(e){return e.action||e.name}n.d(r,{Dz:()=>u,M3:()=>h,MH:()=>g,TV:()=>a,WJ:()=>c,_o:()=>i,_p:()=>p,f4:()=>d,gN:()=>s,hV:()=>y,id:()=>l,k$:()=>o,lW:()=>E,pn:()=>f,rH:()=>m,u2:()=>_});let m="edit-menu",p="view-menu",h="object-menu",_="vector-menu",g="text-menu",f="arrange-menu",E="preferences-menu",y="figma-account-menu"},916348:(e,r,n)=>{n.d(r,{CT:()=>R,Cv:()=>U,Gm:()=>D,Mh:()=>O,Mk:()=>v,Mx:()=>S,Ns:()=>V,Xs:()=>G,Xt:()=>F,Yz:()=>P,cK:()=>M,e5:()=>y,fh:()=>x,fn:()=>L,ih:()=>N,jb:()=>I,ji:()=>C,kO:()=>T,tk:()=>H,uL:()=>w,vm:()=>A,y:()=>E,yq:()=>B,zq:()=>k});var a=n(411855);n(188507);var i=n(841962);n(424652);var o=n(875877),s=n(747484),l=n(238311),c=n(593587),d=n(17607);n(643225);var u=n(886231),m=n(176160);n(661137),n(303480);var p=n(314540);n(313449);var h=n(940795),_=n(269049),g=n(689102),f=n(331850);function E(){let{getConfig:e}=(0,l.I7)("exp_at_mention_invited_users");return(0,a.useCallback)(r=>!!function({showExpAtMentionInvite:e,isDraftFile:r,isFigmaDesign:n,inOrg:a,isMobile:i}){return!(r||i||!e||!n||a)}(r)&&"variant"===e().get("treatment",""),[e])}function y({userId:e,teams:r,rolesByTeamId:n,getM0Config:a,getM1Config:o}){if(!(0,i.kc)().close_starter_team_loophole)return!1;let s=b(e,r,n);return 0!==s&&(1===s?a().get("should_block_second_starter_team",!1):o().get("should_block_more_than_one_starter_team",!1))}function b(e,r,n){let a=0,i={};for(let o of(r.forEach(e=>i[e.id]=e),Object.keys(n))){let r=i[o],s=n[o][e];r&&s&&s.level===f.e6.OWNER&&r.starter_team&&!r.org_team&&!r.student_team&&null===r.subscription&&null===r.deleted_at&&a++}return a}function v(e,r,n){return!!(0,i.kc)().close_starter_team_loophole&&0===b(e,r,n)&&(0,i.kc)().close_starter_loophole_team_one}function T(){let{getConfig:e}=(0,l.I7)("exp_pro_tier_onboarding");return(0,a.useCallback)(()=>e().get("show_pro_onboarding",!1),[e])}function I(){let{getConfig:e}=(0,l.I7)("exp_pro_viewer_to_editor_v1");return(0,a.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function S(){let{getConfig:e}=(0,l.I7)("exp_in_product_sales_contact_form");return!!e().getValue("has_updated_sales_contact_form",!1)}function w(){let{getConfig:e}=(0,l.I7)("exp_org_viewer_to_editor_v1");return(0,a.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function A(e){return e().get("hide_toolbar_request_cta",!1)}function C(e){return!!(0,i.tl)().org_id&&e().get("hide_toolbar_request_cta",!1)}var N=(e=>(e.CONTROL="control",e.VARIANT_A="variantA",e.VARIANT_B="variantB",e))(N||{});function L(){let{getConfig:e}=(0,l.I7)("exp_fbg_navigation_updates"),r=(0,h.tJ)().unwrapOr(null),n=r?.key.type===p.OL.TEAM&&(0,i.kc)().ps_benchmark,a=r?.tier===p.Ag.STARTER;return n&&a?e().getValue("treatment","control"):"control"}function O(){let{getConfig:e}=(0,l.I7)("exp_separate_billing_and_shipping_addresses");return!!e().getValue("is_enabled",!1)}function R(){let{getConfig:e}=(0,l.I7)("seat_billing_terms");return!!e().getValue("enabled",!1)}function P(){let{getConfig:e}=(0,l.I7)("exp_resurrect_locked_teams"),r=(0,g.cD)();return(0,a.useCallback)(n=>!!r&&!!n&&!!e().getValue("show_locked_state_redesign",!1),[e,r])}function D(){let e=(0,l.I7)("slides_starter_team_limits_exp");return!!e?.getConfig().getValue("is_frontend_on",!1)}function k(){let{getConfig:e}=(0,l.I7)("exp_viewer_upgrade_awareness");return(0,a.useCallback)(()=>!!e().getValue("enabled",!1),[e])}async function M(){return(await (0,l.hW)("exp_viewer_upgrade_awareness")).get("enabled",!1)}function F(e){let{getConfig:r}=(0,l.I7)(e?"exp_drafts_copy_link_org":"exp_drafts_copy_link_team"),n=x();return(0,i.kc)().statsig_aa_flag_plan_key_web,(!!e||!n)&&!!r().getValue("has_drafts_copy_link_experience",!1)}function x(){return!(0,c.R)()&&!!(0,i.kc)().pro_cost_messaging&&!!(0,i.tl)().cohorted_in_pro_team_cost_messaging_xp}function U(){let e=(0,h.nW)({component:"useIsAdminNavRevampEnabled",migrationGroup:_.L.GROUP_2});return(0,a.useCallback)(()=>e?(0,i.kc)().admin_revamp_rollout_edu:(0,i.kc)().admin_revamp_rollout,[e])}function B(){return(0,a.useCallback)(()=>!0,[])}function V(e){let{getConfig:r}=(0,l.I7)("exp_slides_audience_google_sso");return(0,a.useCallback)(()=>!(0,s.C8)()&&!s.rr&&null==e&&r().get("should_see_google_sso",!1),[r,e])}function G(){let e=(0,g.cD)();return(0,a.useCallback)(r=>!!e&&!!r&&!!(0,i.kc)().locked_pro_team_revamp_ui_enabled,[e])}function H(e){let r=(0,o.useAtomValue)(u.UQ),n=(0,c.R)(),s=(0,m.q5)(),{getConfig:h}=(0,l.I7)("exp_dev_mode_one_click_request");return(0,a.useCallback)(()=>!r&&(!(0,i.kc)().one_click_exclude_billing_remodel_users||!n)&&!!s&&s.editorType===p._Y.DESIGN&&e===d.i$.BlockingModal&&"variant"===h().getValue("treatment","control"),[r,n,s,e,h])}},927030:(e,r,n)=>{n.d(r,{I1:()=>h,S$:()=>_,U6:()=>u,k3:()=>p,pL:()=>g,wN:()=>d,yo:()=>m});var a=n(411855);n(281935);var i=n(538971),o=n(841962),s=n(875877);n(747484);var l=n(238311),c=n(314540);function d(e){return!1}function u(){return!!(0,o.kc)().rollout_pinned_comments_ff}function m({user:e,file:r,numPinnedCommentThreads:n}={}){return!!u()&&!!e&&!!r&&r.editorType===c._Y.DESIGN&&(!!n&&n>0||!!((0,o.b5)()&&(0,i.jm)(e.email))||!!r.team&&!r.parentOrgId)}function p(){let{getConfig:e}=(0,l.I7)("rollout_pinned_comments_ff");return e().getValue("can_pin_comments",!1)}function h(){let{getConfig:e}=(0,l.I7)("exp_browser_notifications");return{browserNotificationConfig:()=>e().get("has_browser_notifications",!1)}}function _(){return(0,o.kc)().google_federated_cm??!1}function g(){let{getConfig:e}=(0,l.I7)("file_browser_ia_overhaul_m1_cards");return(0,a.useCallback)(()=>e().get("use_redesigned_cards",!1),[e])}var f=(e=>(e.DEFAULT="default",e.PZ_THEN_PRODUCT="pz_then_product",e.PRODUCT_THEN_PZ="product_then_pz",e))(f||{});(0,s.atom)(null)},581163:(e,r,n)=>{n.d(r,{d:()=>l});var a=n(411855),i=n(188507);n(238311);var o=n(176160),s=n(597185);function l({file:e}){let{currentOrg:r,currentTeam:n}=function(){let e=(0,i.d4)(e=>(0,s.wA)(e)),r=(0,o.q5)();return{currentOrg:e,currentTeam:r?.team??null,currentFile:r}}();(0,a.useEffect)(()=>{if(r||!n||e?.editorType!=="design")return},[r,n,e])}},140835:(e,r,n)=>{n.d(r,{$z:()=>v,L0:()=>I,QE:()=>_,T8:()=>E,fu:()=>g,h3:()=>b,j6:()=>S,jm:()=>T,kp:()=>f,tf:()=>y});var a=n(411855),i=n(188507),o=n(460845),s=n(777535),l=n(653798),c=n(677840),d=n(76265),u=n(580034),m=n(190500);let p=null;function h(){p=null}let _=a.createContext({properties:{},trackEvent:()=>null});function g({name:e,properties:r={},trackingTargets:n=u.K.ALL,enabled:o=!0,ignoreParent:d=!1,children:h}){let{name:g,properties:f}=(0,a.useContext)(_),E=(0,a.useRef)({}),y=(0,a.useRef)(null);E.current&&(0,i.bN)(E.current,r)||(E.current=r),r=E.current;let b=(0,a.useMemo)(()=>{let n=g&&!d?`${g} > ${e}`:e,a={...f,...r};return{name:n,properties:a,trackEvent:(e,r)=>(0,s.sx)(e,{trackingContext:n,...a,...r})}},[e,r,g,f,d]);return(0,a.useEffect)(()=>{if(!o||n===u.K.NONE)return;let e=b.name,r=b.properties;if(y.current&&y.current.name===e&&(0,i.bN)(y.current.properties,r))return;if(n===u.K.RCS){let n={};for(let e of Object.keys(r))null!==r[e]&&void 0!==r[e]&&(n[e]=r[e]);(0,c.YQ)({id:e,properties:n});return}let a={name:e,...null!=p&&{ctaClickedReferrer:p},...r};(0,l.ED)("Context Viewed",e,a),(0,m.qD)(a),y.current=b},[n,b,o]),a.createElement(_.Provider,{value:b},h)}function f(e,r){var n;return(n=class extends a.PureComponent{render(){return a.createElement(g,{name:r||e.displayName},a.createElement(e,{...this.props}))}}).displayName=e.displayName,n}function E(e,r,n={},i=!0){return a.createElement(g,{name:r,properties:n,enabled:i},e)}function y(e,r){let n=a.forwardRef((n,i)=>a.createElement(_.Consumer,null,o=>{let s=e=>{if(n.disabled)return;let i={...o.properties,...n.trackingProperties};o.name&&(i.trackingContext=o.name);let s=function(e,r){if(r)return r;if(e&&"string"==typeof e)return e;{let r=a.Children.map(e,e=>{if(e?.type!==d.qD)return e;{let{id:r,options:n}=e.props;return(0,d.t)(r,n)}});if(r?.every(e=>"string"==typeof e))return r.join("")}}(n.children,n.innerText);s&&(i.text=s),(0,m.Cu)(i,n.trackingEventName,r),p=`${i.trackingContext} : ${i.text}`,n.onClick?.(e),setTimeout(h,150)},{trackingProperties:l,innerText:c,useMouseDown:u,trackingEventName:_,...g}=n;return a.createElement(e,{ref:i,...g,...n.useMouseDown?{onMouseDown:s}:{onClick:s}})}));return n.displayName=`Tracked(${e.displayName||e.name})`,n}function b(e){return class extends a.Component{render(){return a.createElement(_.Consumer,null,r=>{let{trackingProperties:n,trackingPopulationLevel:i,trackingFieldName:o,...s}=this.props;return a.createElement(e,{...s,onBlur:e=>{let n={...r.properties,...this.props.trackingProperties,fieldName:this.props.trackingFieldName,populationLevel:this.props.trackingPopulationLevel};r.name&&(n.trackingContext=r.name),(0,m.fy)(n),this.props.onBlur&&this.props.onBlur(e)}})})}}}let v=y(({dataTestId:e,...r})=>a.createElement("button",{...r,"data-testid":e})),T=y(e=>a.createElement("div",{...e})),I=y(e=>a.createElement("a",{...e},e.children),!0);function S(){return(0,a.useContext)(_)}y(e=>a.createElement(o.N_,{...e})),y(e=>a.createElement("input",{...e}))},588799:(e,r,n)=>{n.d(r,{FN:()=>l,Fy:()=>s,iR:()=>o});var a=n(411855),i=n(238311);function o(){let{getConfig:e}=(0,i.I7)("exp_signup_optimization_deferred_password");return(0,a.useCallback)(()=>!!e().getValue("enabled",!1),[e])}function s(){let{getConfig:e}=(0,i.I7)("exp_one_tap_prototype_desktop");return(0,a.useCallback)(()=>!!e().getValue("show_one_tap",!1),[e])}function l(){let{getConfig:e}=(0,i.I7)("exp_login_deferred_password");return(0,a.useCallback)(()=>!!e().getValue("enabled",!1),[e])}},589026:(e,r,n)=>{n.d(r,{Nh:()=>l,S3:()=>c,bf:()=>d,pI:()=>s});var a=n(276769),i=n(163021);function o(e){let r="insert-local-widget"===e.menuAction.type,n="run-local-plugin"===e.menuAction.type;return(0,i.qs)(e)?r?"Widgets Development":"Widgets":n?"Plugins Development":"Plugins"}function s(){return(0,a.gn)()}function l(e,r){let n=e.path;if("plugin-name"!==e.name.type)return"";let a=o(e);return s()&&r?[...n.slice(1),e.name.plugin].join(" "):[a,...n,e.name.plugin].join(" ")}function c(e){return e.submenu.find(e=>"run-menu-action"===e.type)}function d(e){let r=c(e);return r?[o(r),e.name].join(" "):e.name}},779297:(e,r,n)=>{n.d(r,{NG:()=>m,UK:()=>function e(r){let{item:n,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:m,isItemSubmenu:p}=r,h=[];if("run-menu-action"===n.type){if(n.disabled&&!l)return h;if("plugin-name"===n.name.type){if(!s.userCanRunPlugins)return h;let e=(0,d.qs)(n)?(0,i.t)("widgets.insert_widget",{widgetName:n.name.plugin}):n.name.plugin,r=[...n.path,e],a=("run-installed-plugin"===n.menuAction.type||"run-local-plugin"===n.menuAction.type)&&n.menuAction.parameterOnly,o={name:"plugins-menu-item",extensionSearchString:(0,u.Nh)(n,m),itemPath:r,itemParameterArgs:(0,c.o0)(n.menuAction),callback:()=>(0,d.Im)(s,"quick-actions",n.menuAction),menuActionType:n.menuAction.type,pluginId:"run-installed-plugin"===n.menuAction.type||"insert-installed-widget"===n.menuAction.type?n.menuAction.pluginId:void 0,pluginLocalFileId:"run-local-plugin"===n.menuAction.type||"insert-local-widget"===n.menuAction.type?n.menuAction.localFileId:void 0,disabled:n.disabled,flags:["edit"],parametersRequired:a};h.push(o)}else{if(o&&n.disabled)return h;let e={name:n.name.key,callback:()=>(0,d.Im)(s,"filemenu",n.menuAction),disabled:n.disabled,iconType:n.iconType,property:n.property,propertyValue:n.propertyValue};h.push(e)}}else if("submenu"===n.type){if((0,u.pI)()&&!m&&"manifest"===n.subtype){let r={name:"plugins-menu-item",extensionSearchString:(0,u.bf)(n),itemPath:[n.name],callback:a.lQ,submenu:n.submenu.map(r=>e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isItemSubmenu:!0})).flat()},i=(0,u.S3)(n);i&&(r.menuActionType=i.menuAction.type,"pluginId"in i.menuAction&&(r.pluginId=i.menuAction.pluginId),"localFileId"in i.menuAction&&(r.pluginLocalFileId=i.menuAction.localFileId)),h.push(r)}if(p)return h;for(let r of n.submenu){let n=e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:!0});h.push(...n)}}return h}});var a=n(746643),i=n(76265),o=n(559098),s=n(227362),l=n(7395),c=n(947145),d=n(163021),u=n(589026);function m(e){let{extension:r,canRun:n}=e;return r.manifest.menu&&r.manifest.menu.length>0?{type:"submenu",subtype:"manifest",name:r.name,submenu:(0,o.z)(r.manifest.menu,r)}:{type:"run-menu-action",name:{type:"plugin-name",plugin:r.name},menuAction:(0,s.IK)(r),disabled:!n,isWidget:(0,l.k0)(r),path:[]}}},1518:(e,r,n)=>{n.d(r,{C1:()=>d,TI:()=>m,rC:()=>c,z5:()=>u});var a=n(230208),i=n(76265),o=n(923219),s=n(583200);class l extends s.A{constructor(e={}){super(),this.options=e}parse(e,r){let n=r?.a??1,i=(0,a.H0)(e,this.options.parseAlpha?n:void 0);if(!i)throw Error("Could not parse hex");return this.options.parseAlpha?i:(0,a.X9)(i,n)}format(e){if(!e)return"";let r=this.floatToHex(e.r),n=this.floatToHex(e.g),a=this.floatToHex(e.b);if(this.options.formatAlpha&&1!==e.a){let i=this.floatToHex(e.a);return`#${r}${n}${a}${i}`.toUpperCase()}return`#${r}${n}${a}`.toUpperCase()}formatForAndroid(e){if(1===e.a)return this.format(e);let r=this.floatToHex(e.a),n=this.floatToHex(e.r),a=this.floatToHex(e.g),i=this.floatToHex(e.b);return`#${r}${n}${a}${i}`.toUpperCase()}getIncrementTargets(e,r){let{start:n,end:a}=r,i=n===a,o={};return(n<=2||i&&3===n)&&(o.r=!0),(n<=4&&a>3||i&&5===n)&&(o.g=!0),(n<=6&&a>5||i&&7===n)&&(o.b=!0),o}getSelection(e,r){let n={start:1,end:1};return r.r?n.start=1:r.g?n.start=3:n.start=5,r.b?n.end=7:r.g?n.end=5:n.end=3,n}floatToHex(e){let r=this.normalize255(e).toString(16);return 1===r.length&&(r="0"+r),r}}class c extends l{constructor(e={}){super(e)}format(e,{withAlpha:r=!1,showDot:n=!1}={}){let a=this.floatToHex(e.r),i=this.floatToHex(e.g),o=this.floatToHex(e.b),s=this.floatToHex(e.a),l=(100*e.a).toLocaleString("en",{maximumFractionDigits:2})+"%";return r?n?`${a}${i}${o} \xb7 ${l}`.toUpperCase():`${a}${i}${o}${s}`.toUpperCase():`${a}${i}${o}`.toUpperCase()}getIncrementTargets(e,r){let{start:n,end:a}=r,i=n===a,o={};return(n<=1||i&&2===n)&&(o.r=!0),(n<=3&&a>2||i&&4===n)&&(o.g=!0),(n<=5&&a>4||i&&6===n)&&(o.b=!0),o}getSelection(e,r){let n={start:1,end:1};return r.r?n.start=1:r.g?n.start=3:n.start=5,r.b?n.end=7:r.g?n.end=5:n.end=3,n.start-=1,n.end-=1,n}}class d extends c{constructor(e={}){super(e)}parse(e,r){return"auto".startsWith(e.toLowerCase())?o.Q8:super.parse(e,r)}format(e){return e?(0,o.gl)(e)?(0,i.t)("fullscreen.mixed"):(0,o.SX)(e)?(0,i.t)("fullscreen.properties_panel.stack_panel.auto"):super.format(e):""}clamp(e){return(0,o.SX)(e)?e:super.clamp(e)}}let u=new l;new l({parseAlpha:!0,formatAlpha:!0});let m=new c;new d},863599:(e,r,n)=>{n.d(r,{GW:()=>I,KD:()=>h,LN:()=>v,LS:()=>p,Lk:()=>_,NB:()=>E,PZ:()=>f,X9:()=>w,cu:()=>S,f0:()=>b,h7:()=>C,k$:()=>g,mz:()=>L,o1:()=>A,t6:()=>T,wf:()=>N});var a=n(834825),i=n(588172),o=n(650437),s=n(777535),l=n(386543),c=n(653798),d=n(76265),u=n(923219),m=n(834240);class p extends Error{constructor(e,r){super(`${e}: ${JSON.stringify(r)}`),this.errorInfo=r}}class h{constructor(e={}){this.options=e,this.allowedUnits=""}format(e){return`${e}`}parse(e,r){e=this.preProcessForExpressionEvaluation(e);let n=(0,l.O4)(e,r);if(null!==n.value&&isFinite(n.value))return n.value;throw(0,c.Lo)("NumberFormatter::parse","Could not parse input",{str:e,currentValue:r}),new p("Could not parse input",n.error)}onParseThrow(e,r){if(e instanceof p&&e.errorInfo)return this.options.onEvaluateExpressionError?.(e.errorInfo,r)}getNudgeAmount(e){return e?this.bigNudgeAmount():this.smallNudgeAmount()}incrementBy(e,r){return e+r}clamp(e){return(0,i.KY)(e,this.min(),this.max())}min(){return this.options.min??this.defaultMin}max(){return this.options.max??this.defaultMax}smallNudgeAmount(){return this.options.smallNudgeAmount??m.bA}bigNudgeAmount(){return this.options.bigNudgeAmount??m._q}preProcessForExpressionEvaluation(e){return e.replace(RegExp(this.allowedUnits,"g"),"").replace(/[\u0660-\u0669]/g,e=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e).toString()).replace(/[\u06F0-\u06F9]/g,e=>"\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9".indexOf(e).toString()).replace(/\u066B/g,",").replace(/\u066C/g,",").replace(/\u060C/g,",")}}class _ extends h{constructor(e){super(e),this.floatingPointFormat=e.floatingPointFormat}format(e){if(null==e)return"";let r=String(parseFloat(e.toFixed(2))),n=r.includes(".");return this.floatingPointFormat&&n&&r.length-1>this.floatingPointFormat.maxNumDigits?String(parseFloat(e.toFixed(1))):r}parse(e,r){return/[0-9]+\,[0-9]+/g.test(e)&&(0,s.sx)("editor-parsing-float-input-with-comma",{input:e}),super.parse(e,r)}}class g extends h{format(e){return null==e?"":String(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"}).format(e).replace("USD","").trim())}parse(e,r){return parseFloat(super.parse(e,r).toFixed(0))}}class f{constructor(e){this.pixelFormatter=new _(e),this.allowEmpty=!!e.allowEmpty,this.allowUnformatted=!!e.allowUnformatted}parse(e,r){e=e.trim().toLocaleLowerCase();let n=(0,d.t)("fullscreen.auto").toLocaleLowerCase();return(!this.allowEmpty||e.length)&&n.startsWith(e)?u.Q8:this.pixelFormatter.parse(e,r)}format(e){if((0,u.SX)(e))return(0,d.t)("fullscreen.properties_panel.stack_panel.auto");if(this.allowUnformatted)try{return this.pixelFormatter.format(e)}catch{return e}return this.pixelFormatter.format(e)}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.incrementBy(e,r)}clamp(e){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.clamp(e)}}class E{constructor(e){this.pixelFormatter=new _(e)}parse(e,r){let n=new RegExp(/[^\,\s]*(\s*[+\-*\/\^]\s*[^\,\s]*)*/g),a=e.match(n);return a?a.filter(e=>e.length).map((e,n)=>{let a=this.pixelFormatter.parse(e,r&&r[n]);if(!isFinite(a))throw Error("could not parse padding input");return a}).map(e=>Math.max(e,0)):[]}format(e){return null==e?"":(0,a.Ef)(e)?this.pixelFormatter.format(e[0]):e.map(e=>this.pixelFormatter.format(e)).join(", ")}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r,n){return e.map((e,a)=>!n||n[a]?this.pixelFormatter.incrementBy(e,r):e)}clamp(e){return e.map(e=>this.pixelFormatter.clamp(e))}snap(e,r){return e.map(e=>(0,i.YE)(e,r))}isEqual(e,r){return(0,a.lu)(e,r)}getIncrementTargets(e,{start:r,end:n}){let a={};if(0===r&&n>=e.length)return null;let i=r===n;if(i&&r>=e.length)return{[e.split(",").length-1]:!0};let o=0;for(let s=0,l=e.length;s<l;++s){let l=","===e[s];if(i){if(s===r)return{[o]:!0};l&&++o}else if(l&&++o,r<=s&&s<n&&(a[o]=!0),s>=n)break}return a}getSelection(e,r){let n;let a=Object.keys(r).map(Number),i=e.length,o=0;for(let r=0,s=e.length;r<s;++r){if(","===e[r]){++o;continue}if(a.includes(o)){if(null==n){if(/[\s,]/.test(e[r]))continue;n=r}for(;r<s&&/[^,]/.test(e[r]);)++r;i=r,--r}}return{start:n??0,end:i}}}var y=(e=>(e[e.SECONDS=0]="SECONDS",e[e.MILLISECONDS=1]="MILLISECONDS",e))(y||{});class b extends h{constructor(e,r=!1,n=!0){super({min:0,max:e,smallNudgeAmount:1,bigNudgeAmount:10}),this.allowedUnits="s",this.displayFractions=!1,this.padMinutes=!0,this.displayFractions=r,this.padMinutes=n}parse(e,r){if(e.includes(":")){let n=e.split(":");if(n.length>3)throw Error("Format must match HH:MM:SS");let[a,i,o]=n.reverse().map(e=>e.trim()),s=a?super.parse(a,r):0,l=i?super.parse(i,r):0,c=o?super.parse(o,r):0,d=![l,c].every(Number.isInteger),u=!this.displayFractions&&!Number.isInteger(s);if(d||u)throw Error("Cannot have fractional parts in timestamp");return 3600*c+60*l+s}let[n,a]=e.split(".",2),i=`${n.slice(-6,-4)}:${n.slice(-4,-2)}:${n.slice(-2)}`,o=a?`${i}.${a}`:i;return this.parse(o)}format(e){if(null==e)return"";let r=Math.floor(e/3600);e%=3600;let n=`${Math.floor(e/60)}`;this.padMinutes&&(n=n.padStart(2,"0")),e%=60;let a=this.displayFractions?e:Math.floor(e),i=Number.isInteger(a)?a:a.toFixed(2),o=Number.isInteger(a)?`${a}`.padStart(2,"0"):`${i}`.padStart(5,"0");return r?`${r}:${n}:${o}`:`${n}:${o}`}}class v extends h{constructor({decimals:e,hidePercentSign:r,...n}={}){super(n),this.allowedUnits="%|px",this.defaultMin=0,this.defaultMax=1,this.decimals=2,this.hidePercentSign=!1,null!=e&&(this.decimals=e),null!=r&&(this.hidePercentSign=r)}format(e){if(null==e)return"";let r=`${parseFloat((100*e).toFixed(this.decimals))}`;return this.hidePercentSign||(r+="%"),r}parse(e,r){return super.parse(e,null!=r?100*r:void 0)/100}getNudgeAmount(e){return e?.1:.01}}class T extends h{constructor(){super(...arguments),this.defaultMin=0,this.defaultMax=1}format(e){return null==e?"":`${parseFloat(e.toFixed(2))}`}}class I extends h{constructor(){super(...arguments),this.allowedUnits="%",this.defaultMin=1,this.defaultMax=95}format(e){return null==e?"":`${e}%`}}class S extends h{constructor(e={}){super((0,o.b$)({smallNudgeAmount:-1,bigNudgeAmount:-15},e)),this.allowedUnits="\xb0|px"}format(e){return null==e?"":(-180==(e=(e+180+360)%360-180)&&(e=180),`${parseFloat(e.toFixed(2))}\xb0`)}}class w extends h{constructor(){super(...arguments),this.allowedUnits="px"}parse(e,r){return Math.round(super.parse(e,r))}}class A extends h{constructor(e={}){super(e),this.normalizeFactor=e.normalizeFactor||1}parse(e,r){return super.parse(e,r)/this.normalizeFactor}format(e){let r=e*this.normalizeFactor;return`${Math.round(r)}`}getNudgeAmount(e){return e?10/this.normalizeFactor:1/this.normalizeFactor}}class C{constructor(e){this.min=e.min,this.max=e.max,this.bigPixelNudgeAmount=e.bigPixelNudgeAmount||m._q,this.smallPixelNudgeAmount=e.smallPixelNudgeAmount||m.bA,this.bigPercentageNudgeAmount=e.bigPercentageNudgeAmount||10,this.smallPercentageNudgeAmount=e.smallPercentageNudgeAmount||1}static parse(e){let r=-1!==e.indexOf("%")?"PERCENT":-1!==e.indexOf("px")?"PIXELS":void 0;e=(e=e.toLowerCase()).replace(RegExp("%|px","g"),"");let n=(0,l.O4)(e,NaN);if(null!==n.value&&isFinite(n.value))return[n.value,r]}parse(e,r){let n=C.parse(e);if(void 0===n)throw Error("Could not parse input");let[a,i]=n;return void 0===i&&(i=null==r?"PERCENT":r.units),{value:a,units:i}}format(e){if(!e)return"";let r=parseFloat((e.value??0).toFixed(2));return"PERCENT"===e.units?`${r}%`:"RAW"===e.units?`${100*r}%`:`${r}px`}getNudgeAmount(e,r){return e?"PIXELS"===r.units?this.bigPixelNudgeAmount:this.bigPercentageNudgeAmount:"PIXELS"===r.units?this.smallPixelNudgeAmount:this.smallPercentageNudgeAmount}incrementBy(e,r){return{value:e.value+r,units:e.units}}clamp(e){return{value:(0,i.KY)(e.value,this.min,this.max),units:e.units}}snap(e,r){return{value:(0,i.YE)(e.value,r),units:e.units}}isEqual(e,r){return e.units===r.units&&e.value===r.value}}let N=new C({bigPixelNudgeAmount:m._q,smallPixelNudgeAmount:m.bA});class L{constructor(){this.MAX_SCALE=1024,this.MAX_SIZE=32768}parse(e){let r=(e=e.toLowerCase()).includes("w")?"CONTENT_WIDTH":e.includes("h")?"CONTENT_HEIGHT":"CONTENT_SCALE";e=e.replace(/x|w|h/g,"");let n=(0,l.O4)(e);if(null!==n.value&&isFinite(n.value))return{value:n.value,type:r};throw new p("Could not parse input",n.error)}format(e){if(null==e)return"";let r=parseFloat(e.value.toFixed(2));switch(e.type){case"CONTENT_SCALE":return`${r}x`;case"CONTENT_WIDTH":return`${r}w`;case"CONTENT_HEIGHT":return`${r}h`}}getNudgeAmount(e){return e?1:.5}incrementBy(e,r){return{value:(0,i.YE)(e.value+r,r),type:e.type}}clamp(e){let r=e.value;return(r=Math.min(r,"CONTENT_SCALE"===e.type?this.MAX_SCALE:this.MAX_SIZE))<=0&&(r=1),{value:r,type:e.type}}snap(e,r){return{value:(0,i.YE)(e.value,r),type:e.type}}isEqual(e,r){return e.type===r.type&&e.value===r.value}}},373247:(e,r,n)=>{n.d(r,{D:()=>m,VG:()=>T,Xi:()=>y,ZB:()=>u,_r:()=>c,cP:()=>_,el:()=>g,ey:()=>h,js:()=>E,mj:()=>f,qj:()=>p,ro:()=>d});var a=n(846288),i=n(245459);n(895925);var o=n(841962),s=n(76265),l=n(923219);n(863599);class c{constructor(){this.format=e=>e?e.replace(/_/g," ").toLowerCase().replace(/^./g,e=>e.toUpperCase()):""}}class d{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.pass_through");case"NORMAL":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.normal");case"DARKEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.darken");case"MULTIPLY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.multiply");case"LINEAR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_burn");case"COLOR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_burn");case"LIGHTEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.lighten");case"SCREEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.screen");case"LINEAR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_dodge");case"COLOR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_dodge");case"OVERLAY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.overlay");case"SOFT_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.soft_light");case"HARD_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hard_light");case"DIFFERENCE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.difference");case"EXCLUSION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.exclusion");case"HUE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hue");case"SATURATION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.saturation");case"COLOR":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color");case"LUMINOSITY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.luminosity");default:return""}}}}class u{constructor(e){this.getPaint=e,this.format=e=>{switch(e){case"SOLID":return(0,s.t)("fullscreen.properties_panel.solid");case"VIDEO":return(0,s.t)("fullscreen.properties_panel.video");case"IMAGE":return null!=this.getPaint().animatedImage?(0,s.t)("fullscreen.properties_panel.gif"):(0,s.t)("fullscreen.properties_panel.image");case"GRADIENT_LINEAR":return(0,s.t)("fullscreen.properties_panel.linear");case"GRADIENT_RADIAL":return(0,s.t)("fullscreen.properties_panel.radial");case"GRADIENT_ANGULAR":return(0,s.t)("fullscreen.properties_panel.angular");case"GRADIENT_DIAMOND":return(0,s.t)("fullscreen.properties_panel.diamond");case"PATTERN":return(0,s.t)("fullscreen.properties_panel.pattern");default:return""}}}}class m{constructor(){this.format=e=>{switch(e){case"FILL":return(0,s.t)("fullscreen.properties_panel.image_scale.fill");case"FIT":return(0,s.t)("fullscreen.properties_panel.image_scale.fit");case"STRETCH":return(0,s.t)("fullscreen.properties_panel.image_scale.crop");case"TILE":return(0,s.t)("fullscreen.properties_panel.image_scale.tile");default:return""}}}}class p{constructor(){this.format=e=>{switch(e){case"INNER_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.inner_shadow");case"DROP_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.drop_shadow");case"FOREGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.layer_blur");case"BACKGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.background_blur");case"REPEAT":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.symmetry");case"GRAIN":return(0,s.t)("fullscreen.properties_panel.effects.grain");default:return""}}}}class h{constructor(){this.format=e=>{switch(e){case"REPEAT":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.symmetry");default:return""}}}}class _{constructor(e){this.scene=e}hasNameForNode(e){return e===i.AD||null==e||!!this.scene.get(e)}format(e){if((0,l.gl)(e))return(0,s.t)("fullscreen.mixed");if(e===i.AD||null==e)return(0,s.t)("proto.node_name_formatter.none");let r=this.scene.get(e);return r?r.stateAbbreviatedName||r.name:(0,s.t)("proto.node_name_formatter.missing")}}class g{constructor(e){this.useNoneInsteadOfInstant=!1,this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return this.useNoneInsteadOfInstant?(0,s.t)("slides.properties_panel.slide_transition.option.none"):(0,s.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,s.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,s.t)("proto.transition_behavior.push");case"MOVE":return(0,s.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,s.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,s.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,s.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,s.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,s.t)("proto.transition_behavior.animate")}return""},e&&(this.useNoneInsteadOfInstant=e)}}function f(e){if(!e)return"NONE";if("URL"===e.connectionType)return"OPEN_URL";if("BACK"===e.connectionType)return"GO_BACK";if("CLOSE"===e.connectionType)return"CLOSE_OVERLAY";if("INTERNAL_NODE"===e.connectionType)switch(e.navigationType){case void 0:case null:case"NAVIGATE":return"NAVIGATE_TO";case"SCROLL_TO":return"SCROLL_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}if("SET_VARIABLE"===e.connectionType)return"SET_VARIABLE";if("SET_VARIABLE_MODE"===e.connectionType)return"SET_VARIABLE_MODE";if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case void 0:case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}return"CONDITIONAL"===e.connectionType?"CONDITIONAL":("NONE"===e.connectionType||console.warn("Unknown connection type",e.connectionType),"NONE")}class E{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to");case"GO_BACK":return(0,s.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay");case"OPEN_URL":return(0,s.t)("proto.action_open_link");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_component_property");return(0,s.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_only");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_only");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_only");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_only");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_jump_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_jump_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_to_specific_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_video");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_video");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_forward_backward");case"CONDITIONAL":return this.isUI3&&!(0,o.kc)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else"):(0,s.t)("proto.action_conditional");default:return""}}}class y{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none_interaction");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to_interaction");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay_interaction");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to_interaction");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay_interaction");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to_interaction");case"GO_BACK":return(0,s.t)("proto.action_back_interaction");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay_interaction");case"OPEN_URL":return(0,s.t)("proto.action_open_link_interaction");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_property_interaction");return(0,s.t)("proto.action_set_variable_interaction");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode_interaction");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_interaction");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_interaction");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle_interaction");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_interaction");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_interaction");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_forward_interaction");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_backward_interaction");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_time_interaction");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_interaction");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_interaction");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_time_interaction");case"CONDITIONAL":return this.isUI3&&!(0,o.kc)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else_interaction"):(0,s.t)("proto.action_conditional_interaction");default:return""}}}let b=()=>(0,s.t)("proto.interaction.type.mouse_enter_deprecated"),v=()=>(0,s.t)("proto.interaction.type.mouse_leave_deprecated");class T{constructor(){this.format=e=>{if(null==e)return(0,s.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,s.t)("proto.interaction.type.none");case"ON_CLICK":return(0,s.t)("proto.interaction.type.on_click");case"ON_HOVER":return(0,s.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,s.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,s.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return b();case"MOUSE_OUT":return v();case"MOUSE_ENTER":return(0,s.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,s.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,s.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,s.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,s.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,s.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,s.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,s.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,s.t)("proto.interaction.type.when_video_ends");default:(0,a.xb)(e)}}}}},581713:(e,r,n)=>{n.d(r,{UE:()=>i,dG:()=>s,ft:()=>o,wo:()=>l});var a=n(747484);function i(e){return e?.nodeType===1&&function(e){for(;e;){if(e.classList&&(e.classList.contains("js-fullscreen-prevent-event-capture")||e.dataset?.fullscreenPreventEventCapture))return!0;e=e.parentElement}return!1}(e)}function o(){return(!!a.Ay.isIpadNative||!!a.Ay.ios&&!!a.Ay.isInNativeApp)&&!!window.FigmaMobile.shouldHandleMultiTouchInFullscreen||!!a.Ay.isMeetDevice||!!a.Ay.isIpad}function s(e){e.stopPropagation()}function l(e){e.preventDefault()}},85867:(e,r,n)=>{n.d(r,{N:()=>i});var a=n(314540);function i(e){switch(e){case a.y4.WHITEBOARD:return a._Y.WHITEBOARD;case a.y4.SLIDE_TEMPLATE:return a._Y.SLIDES;default:return a._Y.DESIGN}}},292689:(e,r,n)=>{n.d(r,{i:()=>o});var a=n(747484),i=(e=>(e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e))(i||{});function o(e){return"which"in e?3===e.which||a.Ay.mac&&1===e.which&&e.ctrlKey:"button"in e&&(2===e.button||a.Ay.mac&&0===e.button&&e.ctrlKey)}},835918:(e,r,n)=>{n.d(r,{mc:()=>o,vx:()=>i});var a=n(48451);function i(e,r){return null!==e[r]&&!!e[r]}function o(e,r){return Object.keys(e).some(n=>n in e&&!(0,a.c2)(r[n],e[n],!1))}n(923219)},843816:(e,r,n)=>{n.d(r,{B:()=>c}),n(411855);var a=n(717180),i=n(245954),o=n(354549);class s{constructor(){this.allTemplateInfo=new Set,this.nodeGUIDsToTemplate=new Map,s.instance=this}static removeInstance(){s.instance=void 0}trackNodesAsTemplate(e,r,n,a){let o=(0,i.UN)();if(Array.from(r).forEach(e=>{l(o.get(e))||r.delete(e)}),0===r.size)return;let s=Math.floor(.1*r.size),c={templateId:e,fileKey:n,nodeGUIDs:r,trackedNodeCount:r.size,deletionThreshold:s,creationMethod:a};this.allTemplateInfo.add(c),r.forEach(e=>this.nodeGUIDsToTemplate.set(e,c))}checkForTemplateNodesDeletion(e){0!==this.allTemplateInfo.size&&e.forEach(e=>this.checkForTemplateNodeDeletion(e))}checkForTemplateNodeDeletion(e){let r=this.nodeGUIDsToTemplate.get(e);if(!r)return;this.nodeGUIDsToTemplate.delete(e);let n=r.nodeGUIDs;n.delete(e),n.size<=r.deletionThreshold&&(this.stopTrackingTemplate(r),(0,o._)("template_deleted",{templateId:r.templateId,fileKey:r.fileKey,productType:"figjam",trackedNodeCount:r.trackedNodeCount,creationMethod:r.creationMethod}))}stopTrackingTemplate(e){this.allTemplateInfo.delete(e),e.nodeGUIDs.forEach(e=>this.nodeGUIDsToTemplate.delete(e))}}let l=e=>!!e&&("CANVAS"===e.type?e.visible:l(e.parentNode));async function c(e,r,n,i,{enableTracking:o=!0}={}){let l=s.instance;if(!o||!l)return await i();let d=(0,a.UP)(),u=await i(),m=new Set((0,a.UP)());return d.forEach(e=>m.delete(e)),r||="null",l.trackNodesAsTemplate(e(),m,r,n),u}},616171:(e,r,n)=>{n(245459),n(245954),n(875877),n(237392)},537393:(e,r,n)=>{n.d(r,{Fq:()=>h,I8:()=>g,Ln:()=>O,SG:()=>R,SK:()=>T,Tc:()=>C,Y$:()=>p,cw:()=>f,ic:()=>S,jv:()=>L,vK:()=>I,vu:()=>P,yF:()=>v});var a=n(236891),i=n(217950),o=n(675551),s=n.n(o),l=n(736942),c=n(550479);n(811567);var d=n(927486),u=n(841924),m=n(517171),p=(e=>(e.CURRENT="current",e.AT_NEXT_RENEWAL="atNextRenewal",e))(p||{}),h=(e=>(e.ADMIN_SETTINGS="admin-settings",e.ORG_CART="org-cart",e.PRO_CART="pro-cart",e.UPSELL_MODALS="upsell-modals",e.UPSELL_MODALS_CONTRACT="upsell-modals-contract",e))(h||{});function _(e){(0,c.$D)(i.e.BILLING,e,r=>(r.setExtras({error:e}),r))}u.M4.Query({fetch:()=>m.n.getCampfireRates().then(e=>e.data.meta).catch(e=>{throw _(e),e}),key:"billing_prices_campfire_rates"});let g=u.M4.Query({fetch:e=>m.n.getRates(e).then(e=>e.data.meta).catch(e=>{throw _(e),e}),key:"billing_prices_active_rates"}),f=u.M4.Query({fetch:e=>m.n.getContractRates(e).then(e=>e.data.meta).catch(e=>{throw _(e),e}),key:"billing_prices_contract_rates"}),E=u.M4.Query({fetch:async({planKey:e})=>{try{return(await m.n.getContractRates({planType:e.type,planParentId:e.parentId||""})).data.meta}catch(e){throw _(e),e}},enabled:({planKey:e})=>null!==e.parentId&&""!==e.parentId,key:"billing_prices_current_contract_rates"}),y=u.M4.Query({fetch:async({planKey:e})=>{try{return(await m.n.getPricesAtContractRenewal({planType:e.type,planParentId:e.parentId||""})).data.meta}catch(e){throw _(e),e}},enabled:({planKey:e})=>null!==e.parentId,key:"billing_prices_at_contract_renewal"});function b(e,r){try{return e.transform(e=>s()(r,r=>(0,d.y)(e,r)))}catch(e){return(0,c.$D)(i.e.BILLING,e),l.Qw.errorSuspendable(e,{release:()=>{}})}}function v(e,r,n,a={}){let[i]=(0,u.IT)(n,a);return b(i,r)}function T(e,r,n={}){let a=g(null),[i]=(0,u.IT)(a,n);return b(i,e)}function I(e,r={}){!function(e){let{planParentId:r,planType:n}=e;return""!==r&&!(0,a.uy)(n)}(e)&&(r.enabled=!1);let[n]=(0,u.IT)(f(e),r);return n.transform(({product_prices:e})=>e[0]?.currency??null)}function S(e,r,n,a={}){return v(n,e,E({planKey:{type:r.planType,parentId:r.planParentId}}),a)}u.M4.Query({fetch:async({planKey:e})=>{try{return(await m.n.getAdminContractRates({planType:e.type,planParentId:e.parentId||""})).data.meta}catch(e){throw _(e),e}},enabled:({planKey:e})=>null!==e.parentId,key:"billing_prices_admin_current_contract_rates"}),u.M4.Query({fetch:async({planKey:e})=>{try{return(await m.n.getAdminPricesAtContractRenewal({planType:e.type,planParentId:e.parentId||""})).data.meta}catch(e){throw _(e),e}},enabled:({planKey:e})=>null!==e.parentId,key:"billing_prices_admin_at_contract_renewal"});class w extends Error{}function A(e,r){let n=e[0]?.[r];if(n&&e.every(e=>e[r]===n))return n;throw new w(`Could not infer value for ${r} from price data`)}function C(e){return A(Object.values(e),"currency")}function N(e,r,n,a){try{return e.transform(e=>{if(a&&0===e.product_prices.length)return null;let i="currency"in n?n.currency:A(e.product_prices,"currency"),o="tier"in n?n.tier:A(e.product_prices,"tier");return r.dict(r=>{let a={billableProductKey:r,...n,currency:i,tier:o};return(0,d.y)(e,a)})})}catch(e){return(0,c.$D)(i.e.BILLING,e),l.Qw.errorSuspendable(e,{release:()=>{}})}}function L({billableProductKeys:e,baseQuery:r,planKey:n,options:a={}}){let i=g(n??null),[o]=(0,u.IT)(i,a);return N(o,e,r)}function O(e,r,n,a={}){let i=E({planKey:e}),[o]=(0,u.IT)(i,a);return N(o,r,n,!0)}function R(e,r,n,a={}){let i=y({planKey:e}),[o]=(0,u.IT)(i,a);return N(o,r,n,!0)}function P(e){if("loaded"===e.status)return e;if("errors"===e.status){let r=[e.errors].flat()[0];if(r)throw r}throw Error(`Unexpected result status: ${JSON.stringify(e)}`)}},324295:(e,r,n)=>{n.d(r,{J:()=>h});var a=n(411855),i=n(188507),o=n(269685),s=n(805014),l=n(230208),c=n(108982),d=n(475824),u=n(73041),m=n(30057),p=n(758133);function h(){let e=(0,u.ow)(),r=(0,m.sO)(),n=(0,i.d4)(e=>e.mirror.appModel.currentPage),h=(0,c.R)(e=>e.mirror.sceneGraph?.get(n)?.backgroundColor),_=(0,p.DP)(),g=(0,a.useMemo)(()=>d.F.format(h),[h]);if(e){let e=s.DV9?.getWhiteboardCanvasColor();return e?d.F.format((0,o.aH)(e)):"#ffffff"}return r&&s.Ez5?d.F.format((0,o.aH)((0,o.R0)(s.Ez5.getFSCanvasDefaultFill()))):h?g:(0,l.Bx)(_)}},403386:(e,r,n)=>{n.d(r,{JT:()=>d});var a=n(188507),i=n(728722),o=n(399991),s=n(314540),l=n(183739),c=n(906597);function d(){let e=(0,a.d4)(e=>e.openFile?.key);if((0,o.lZ)())return(0,a.d4)(r=>{let{hubFiles:n,figFilePublishedAsHubFile:a}=r,i=e&&a[e];return i?(0,c.B4)(n[i]):null});let r=(0,i.Rs)(l.ehp,{fileKey:e||""},{enabled:!!e});if("loaded"!==r.status)return null;let n=r.data.file?.publishedHubFile;return n?.publishingStatus!==s.KB.APPROVED_PUBLIC?null:n}},73041:(e,r,n)=>{n.d(r,{E3:()=>h,Em:()=>p,HW:()=>d,JV:()=>f,XE:()=>c,iq:()=>u,lg:()=>l,my:()=>g,ow:()=>m,pQ:()=>_,u8:()=>E});var a=n(188507),i=n(927150),o=n(314540),s=n(914077);function l(){return(0,a.d4)(e=>{var r;return(r=e.selectedView)&&"fullscreen"===r.view?(0,s.oD)(r.editorType):o._Y.DESIGN})}function c(e){return e&&"fullscreen"===e.view?e.editorType:s.nT.Design}function d(){return(0,a.d4)(e=>"prototype"===e.selectedView.view)}function u(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view)}function m(){return l()===o._Y.WHITEBOARD}function p(){return l()===o._Y.DESIGN}function h(){return(0,a.d4)(_)}function _(e){let r=e.selectedView;return"fullscreen"!==r.view?s.nT.Design:r.editorType}function g(){return(0,a.d4)(e=>f(e.selectedView))}function f(e){return"fullscreen"!==e.view?null:e.editorType}let E=(0,i.bt)(e=>f(e.selectedView))},552650:(e,r,n)=>{n.d(r,{Ol:()=>l,xy:()=>s});var a=n(411855);n(875877),n(17100);var i=n(73041),o=n(263352);function s(e,r){let n=(0,i.my)();return(0,a.useMemo)(()=>(0,o.NW)(n,e,r),[n,r,e])}function l(e){let r=(0,i.my)();return(0,a.useMemo)(()=>(0,o.AG)(r,e),[r,e])}n(738402)},334440:(e,r,n)=>{n(188507),n(952979),n(163773),n(544920),n(76265),n(736041),n(534173),n(142420)},815153:(e,r,n)=>{n.d(r,{$D:()=>m,DG:()=>u,dk:()=>p});var a=n(411855),i=n(188507),o=n(875877),s=n(728722),l=n(183739),c=n(401562);let d=(0,o.atom)(null),u=(0,c.D)((e,r=!1)=>{let n=(0,s.Rs)(l.a8q,{fileKey:e},{enabled:!!e});return(0,a.useMemo)(()=>"loaded"!==n.status?r?{enabled:!0,until:new Date,id:"fallback"}:{enabled:!1}:n.data.figFileWorkshopMode&&new Date<n.data.figFileWorkshopMode.expiresAt?{enabled:!0,until:n.data.figFileWorkshopMode.expiresAt,id:n.data.figFileWorkshopMode.id}:{enabled:!1},[n,r])});function m(e=!1){return function(e=!1){let r=(0,i.d4)(e=>e.openFile);return u(r?.key||"",e)}(e).enabled}function p(e){let r=o.atomStore.get(d);return!!e&&!!r&&new Date<r&&!e.isTryFile}},854386:(e,r,n)=>{n.d(r,{V:()=>m}),n(411855),n(188507);var a=n(302245);n(108982),n(875877),n(437901),n(965361);var i=n(777829),o=n(978747);n(407498);var s=n(176160);n(681254);var l=n(510669);n(77383);var c=n(689102),d=n(779099);n(584421),n(374629),n(696441);let u=(0,a.Mz)([s.tB,l.getPermissionsStateMemoized,e=>e.selectedView.editorType,e=>e.mirror.appModel.topLevelMode,e=>e.mirror.appModel.multiplayerSessionState,e=>(0,c.ZT)(e)||null,(e,r)=>r],(e,r,n,a,i,s,l)=>(0,o.gW)(e,r,n,l.warningLevel,a,i,l.isRecovery,s,l.isUserInLimitedSpace,l.isBillingRemodelEnabled));function m(e,{fullscreenMemoryWarningLevel:r,unreadCommentCount:n,pluginAndWidgetMenuArgs:a,isRecovery:u,isUserInLimitedSpace:m,isPublishingModalDisabled:p,isBillingRemodelEnabled:h}){let _=(0,c.ZT)(e)||null;return(0,i.p)({fileMenuArgs:{branchingActionsStatus:(0,o.gW)((0,s.tB)(e),(0,l.getPermissionsState)(e),e.selectedView.editorType,r,e.mirror.appModel.topLevelMode,e.mirror.appModel.multiplayerSessionState,u,_,m,h),saveAsState:e.saveAsState,topLevelMode:e.mirror.appModel.topLevelMode,unreadCommentCount:n,isOrgMember:(0,l.canMemberOrg)(e.currentUserOrgId,e),shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:a,theme:e.theme.themePreference,backToFileArgs:{shouldShowBackToFiles:!1},zoomArgs:{canZoomIn:(0,d.Yh)(e.mirror.appModel,"zoom-in"),canZoomOut:(0,d.Yh)(e.mirror.appModel,"zoom-out")},publishingModalArgs:{isPublishingModalDisabled:p}})}(0,a.Mz)([u,e=>e.saveAsState,e=>e.mirror.appModel.topLevelMode,(e,r)=>r],(e,r,n,a)=>({branchingActionsStatus:e,saveAsState:r,topLevelMode:n,unreadCommentCount:a.unreadCommentCount,isOrgMember:a.isOrgMember,shouldShowSlideConversionEntrypoint:a.shouldShowSlideConversionEntrypoint}))},180307:(e,r,n)=>{n.d(r,{v:()=>c});var a=n(411855);n(841563);var i=n(728722),o=n(23478),s=n(183739),l=n(285560);function c(e){let r=(0,i.Rs)(s.ZzU,{figFileKey:null!=e?(0,o.Kz)(e)?e.sourceFileKey:e.key:""},{enabled:null!=e});return a.useMemo(()=>{if("loaded"!==r.status)return;let e=r.data?.figFileLinkExpirationConfig,n=r.data?.file;if(!e)return;let a=(0,l.d4)(e);return{file:n,accessReverted:!!e.accessReverted,expiresAt:e.expiresAt?.toISOString(),activeExpiration:a?.toISOString()}},[r])}},343362:(e,r,n)=>{n.d(r,{cQ:()=>i}),n(217950),n(841962),n(977235),n(550479),n(548759),n(437069),n(314540),n(174136),n(871290);let a=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,9})?Z?$/;function i(e,r,n=()=>!1,a){let o=[],l=[],c={},d=r.reduce((e,r)=>(e.set(r[a],r),e),new Map),u=e.reduce((e,r)=>(e.set(r[a],r),e),new Map);for(let r of e){let e=r[a],i=d.get(e);if(i){let o=s(r,i,n,[],"",e);o.length&&(c[r[a]]=o)}else o.push(e);d.delete(r[a])}for(let e of d.values()){let r=e[a],i=u.get(r);if(i){let a=s(i,e,n,[],"",r);a.length&&(c[r]=a)}else l.push(r)}return{lgMissingIds:o,lgExtraIds:l,differences:c}}function o(e){return"object"==typeof e&&null!==e}function s(e,r,n,i,l,c){if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return i.push({id:c,key:l,sinatraValue:e,lgValue:r}),i;let a=Math.max(e.length,r.length);for(let d=0;d<a;d++){let a=e[d],u=r[d];if(o(a)&&o(u)){s(a,u,n,i,`${l}[${d}]`,c);continue}a!==u&&i.push({id:c,key:`${l}[${d}]`,sinatraValue:a,lgValue:u})}return i}for(let d of new Set([...Object.keys(e),...Object.keys(r)])){if(n(d))continue;let u=e[d],m=r[d],p=l?`${l}.${d}`:d;if(o(u)&&o(m)){s(u,m,n,i,p,c);continue}d.endsWith("_at")&&"string"==typeof u&&"string"==typeof m&&a.test(u)&&a.test(m)&&u?.substring(0,17)===m?.substring(0,17)||u===m||i.push({id:c,key:p,sinatraValue:u,lgValue:m})}return i}},450795:(e,r,n)=>{n(885123);var a=n(875877),i=n(728722);n(977235),n(700509);var o=n(176160);n(15092);var s=n(183739),l=n(401562);n(334440),(0,l.D)(()=>{let e=(0,a.useAtomValue)(o.ze);return(0,i.Rs)(s.jmg,{fileKey:e||""},{enabled:!!e})}),(0,a.atom)(!1)},84888:(e,r,n)=>{n.d(r,{z:()=>o});var a=n(411855),i=n(834825);function o(e,r,n){let[o,s]=a.useState(e),l=a.useCallback(e=>{s({columnName:e,isReversed:o.columnName===e&&!o.isReversed})},[o.columnName,o.isReversed]),c=a.useMemo(()=>{let e=[...r],a=n.find(e=>e.name===o.columnName);return a&&a.getSortValue&&function(e,r,n){if(!r.getSortValue)return;let a=n.isReversed,o=a;r.sortReversed&&(a=!a),r.sortSecondaryReversed&&(o=!o),r.sortNumerically?(0,i.hR)(e,r.getSortValue,a,r.getSecondarySortValue,o):(0,i.v7)(e,r.getSortValue,{isDescending:a,isSecondaryDescending:o},r.getSecondarySortValue)}(e,a,o),e},[n,r,o]);return[o,l,c]}},374629:(e,r,n)=>{n.d(r,{Cb:()=>m,U5:()=>p,Yo:()=>u.Yo,i6:()=>_,yy:()=>h});var a=n(188507);n(850784);var i=n(139879),o=n(736942),s=n(661137),l=n(314540),c=n(183739),d=n(940795),u=n(968525);function m(){let e=(0,s.sZ)();return(0,a.d4)(r=>{let n=e&&r.orgUsersByOrgId[e.id];return n&&n[r.user.id]?.permission===l._D.GUEST})}function p(){let e=(0,s.sZ)(),r=(0,a.d4)(r=>e&&r.orgUsersByOrgId[e.id][r.user.id]?.permission);return r&&r!==l._D.GUEST}function h(){return(0,a.d4)(e=>e.openFile?.parentOrgId&&e.orgById[e.openFile.parentOrgId]||void 0)}function _(){let e=(0,s.dq)(),r=(0,d.rs)(),[n,a]=(0,i.IT)((0,c.Nm8)({orgId:e}),{enabled:!!e}),u=(0,i.mI)(r,n),m=o.Qw.all(u);return o.Qw.useTransform(m,([e,r])=>e.tier===l.Ag.ENTERPRISE&&!!r.org?.orgSamlConfigs?.some(e=>"loaded"===e.hasSeatManagedViaScim.status&&e.hasSeatManagedViaScim.data))}},408407:(e,r,n)=>{n.d(r,{LQ:()=>c,a9:()=>o,ar:()=>l}),n(411855);var a=n(188507);n(841563),n(777535),n(493685),n(895925),n(336427),n(626918),n(657548),n(198003),n(728722),n(977235),n(863297),n(771952),n(719334),n(76265),n(593587),n(74721),n(491912),n(598958),n(223400),n(190253),n(314540),n(183739),n(598338),n(69964),n(650278);var i=n(782125);n(940795),n(490267),n(496203),n(871290),n(343362);function o(){return(0,a.d4)(e=>(0,i.xw)(e))}class s extends null{}function l(e,r){return!!(e&&r)}function c(e){var r;let n=(0,i.xw)(e);return!!((r=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null)&&r.are_custom_templates_allowed&&n)}},48806:(e,r,n)=>{n.d(r,{NV:()=>S,OX:()=>I,Pt:()=>w,qi:()=>N,qu:()=>C,x2:()=>A});var a=n(188507),i=n(846288),o=n(76265),s=n(66683),l=n(950759),c=n(646869),d=n(736041),u=n(310020),m=n(58590),p=n(15092),h=n(733050),_=n(263352),g=n(492366),f=n(754430),E=n(7395),y=n(245623),b=n(749995),v=n(908262),T=n(298326);function I(e){let r;let n=(0,a.wA)(),i=(0,p.TA)();if(!e||i!==e.creator.id)return null;if((0,s.AC)(e))r=(0,o.t)("community.plugins.cancel_review");else if((0,g.m3)(e)){if((0,s.Pg)(e))return null;r=(0,o.t)("community.resource.delist")}else r=(0,o.t)("community.resource.unpublish");return{displayText:r,callback:()=>{n((0,d.to)({type:b.H,data:{plugin:e},showModalsBeneath:!0}))}}}function S(e,r){let n=(0,a.wA)(),i=(0,m.LR)(),{close:s}=(0,v.cq)(),l=e&&!e.error?r?(0,o.t)("community.plugins.publish_new_version"):(0,o.t)("community.resource.publish"):r?r.is_widget?(0,o.t)("community.plugins.edit_resource_details.widget"):(0,o.t)("community.plugins.edit_resource_details.plugin"):void 0;return l?{displayText:l,callback:()=>{i(),s(),n((0,c.r)({localFileId:e?.localFileId,publishedPluginId:r?.id,entryPoint:f.k2.EDITOR}))}}:null}function w(e,r){let n=(0,a.wA)();if(!e||!r)return null;switch(e){case E.ho.LOAD:return{action:()=>{let e=r.localFileId;n((0,l.JZ)({resourceType:(0,E.k0)(r)?"widget":"plugin",localFileIdToRemove:e}))},msg:(0,o.t)("universal_insert.missing_manifest"),buttonText:(0,o.t)("universal_insert.locate"),displayText:(0,o.t)("universal_insert.locate_missing_manifest")};case E.ho.VALIDATE:case E.ho.PARSE:return{action:()=>{n((0,d.to)({type:T.K,data:{localPlugin:r}}))},msg:(0,o.t)("universal_insert.manifest_error"),buttonText:(0,o.t)("universal_insert.see_details"),displayText:(0,o.t)("universal_insert.manifest_error_view")};default:(0,i.xb)(e)}}function A(e,r,n){let i=(0,a.wA)(),{close:s}=(0,v.cq)();return{displayText:(0,o.t)("universal_insert.manage_permissions"),callback:()=>{n&&n(),s();let a=e&&(0,E.ZQ)(e)?e.localFileId:void 0;i((0,c.r)({localFileId:a,publishedPluginId:r?.id,initialTab:y.KM.PERMISSIONS,entryPoint:f.k2.EDITOR}))}}}function C(e){let r=(0,h.M)();return e?{displayText:(0,u.A)((0,_.YQ)()),callback:()=>{r&&r.openExtensionDirectory(e.localFileId)}}:null}function N(e,r){return{displayText:e?(0,o.t)("universal_insert.remove_local_version"):(0,o.t)("universal_insert.remove"),callback:r}}},266911:(e,r,n)=>{n.d(r,{a:()=>l});var a=n(411855),i=n(728722),o=n(183739);let s=(e,r,n)=>{let s=(0,i.Rs)(o.i1D,{orgId:e},{enabled:!!e});return a.useMemo(()=>{if("loaded"===s.status){let e=s.data?.currentUser?.baseOrgUser?.pluginRequests;if(e)return e.filter(e=>{let a=n?e.workspaceId===n:!!e.workspaceId==!!n;return e.pluginId===r&&a})}return[]},[s,n,r])};function l(e,r,n){return s(e,r,n).filter(e=>"pending"===e.status).length>0}},227362:(e,r,n)=>{n.d(r,{Bi:()=>O,Gt:()=>N,IK:()=>R,RK:()=>A,dR:()=>D,ee:()=>L,hN:()=>P});var a=n(411855),i=n(188507),o=n(217950),s=n(108982),l=n(875877),c=n(550479),d=n(297643),u=n(161021),m=n(826688),p=n(140583),h=n(47795),_=n(867479),g=n(163021),f=n(73041),E=n(968525),y=n(305216),b=n(263352),v=n(914077),T=n(7395),I=n(482868),S=n(648735);function w(){let e=(0,f.E3)(),{orgEntity:r,org:n,openFile:i,isReadOnly:o,userCanRunPlugins:l,activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}=(0,s.R)(e=>({orgEntity:(0,E.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,y.GP)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets})),m=(0,S.$1)();return a.useMemo(()=>({openFile:i,localExtensions:m,orgEntity:r,org:n,isReadOnly:o,userCanRunPlugins:l,editorType:e,allSavedPlugins:{},activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}),[i,m,r,n,o,l,e,c,d,u])}function A(e){let r=(0,S.Be)(),n=r.plugins[e]||r.orgPlugins[e],a=(0,S.cW)()[e];return n||(a?(0,b.Ar)(a):null)}function C(e){return{type:"run-installed-plugin",pluginId:e.plugin_id,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function N(e,r){let n=A(e),s=w(),p=(0,I.b)(),h=(0,d.gB)(),_=(0,i.Pj)(),[f,E]=(0,l.useAtom)(u.H);return a.useCallback(e=>{if(!n){console.error("Plugin version not found"),(0,c.$D)(o.e.EXTENSIBILITY,Error("Plugin version not found"));return}let a=C(n);if((0,b.YG)(n)&&k(_),(0,b.mx)(n)){h((0,m.$n)(n)),k(_),E(u._.PRIMARY);return}(0,g.Im)({...s,allSavedPlugins:{[n.plugin_id]:n}},r,e||a),p()},[n,s,r,p,_,h,E])}function L(e){return{type:"insert-local-widget",localFileId:e.localFileId,command:void 0}}function O(e){return{type:"insert-installed-widget",pluginId:e.plugin_id,command:void 0}}function R(e){return(0,T.ZQ)(e)?(0,T.k0)(e)?L(e):P(e):(0,T.k0)(e)?O(e):C(e)}function P(e){return{type:"run-local-plugin",localFileId:e.localFileId,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function D(e,r){let n=w(),o=Object.values((0,S.$1)()).find(r=>r.plugin_id===e),s=(0,I.b)(),c=(0,d.gB)(),p=(0,i.Pj)(),[h,_]=(0,l.useAtom)(u.H);return a.useCallback(e=>{if(!o){console.error("Plugin not found");return}let a=P(o);if((0,b.YG)(o)&&k(p),(0,b.mx)(o)){c((0,m.$n)(o)),k(p),_(u._.PRIMARY);return}(0,g.Im)(n,r,e||a),s()},[o,n,r,s,p,c,_])}function k(e){let{selectedView:r}=e.getState();"fullscreen"===r.view&&r.editorType===v.nT.Design&&(e.dispatch(h.$T({...r,view:"fullscreen",editorType:v.nT.DevHandoff})),(0,p.Ym)(e.getState(),v.nT.DevHandoff,"plugin_run"))}},648735:(e,r,n)=>{n.d(r,{$1:()=>M,B7:()=>V,Be:()=>z,F1:()=>ep,JI:()=>eu,N3:()=>H,S0:()=>es,U6:()=>eo,Ud:()=>G,WK:()=>F,YN:()=>ed,YW:()=>Z,ZT:()=>U,_P:()=>q,b4:()=>et,cW:()=>x,j1:()=>eh,j8:()=>el,ll:()=>ei,mf:()=>W,op:()=>e_,qr:()=>J,sR:()=>em,tB:()=>er});var a=n(411855),i=n(188507),o=n(48451),s=n(217950),l=n(889012),c=n.n(l);n(777535);var d=n(108982),u=n(841962),m=n(728722);n(94489);var p=n(550479);n(653798);var h=n(76265),_=n(17094),g=n(553362);n(66683),n(599110);var f=n(706485),E=n(747327),y=n(73041);n(613611);var b=n(375900),v=n(427494);n(798361);var T=n(176160),I=n(661137),S=n(15092),w=n(314540),A=n(183739),C=n(354465),N=n(305216),L=n(263352),O=n(914077),R=n(7395);n(161857);var P=n(738402),D=n(552650),k=n(419899);function M(e){let r=(0,i.d4)(e=>e.localPlugins);return(0,D.xy)(r,e)}function F(e){return Object.values(M()).find(r=>r.plugin_id===e)}function x(){let e=(0,i.d4)(e=>e.publishedPlugins),r=(0,y.my)();return(0,a.useMemo)(()=>(0,L.xC)(r,e),[e,r])}function U(){let e=(0,i.d4)(e=>e.publishedWidgets),r=em(),n=(0,a.useMemo)(()=>({}),[]);return r?e:n}function B({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=x();return(0,a.useMemo)(()=>{if(!r)return[];let a=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(a,r,e))},[n,r,e])}function V(e){return Object.values(B({includePendingPublishers:!1})).find(r=>r.id===e)}function G(e){return Object.values(function({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=U();if(!r)return[];let a=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(a,r,e))}({includePendingPublishers:!1})).find(r=>r.id===e)}function H(e,r){if(null===e.current_plugin_version_id)return null;let n=e.versions[e.current_plugin_version_id],a={id:e.current_plugin_version_id,pluginId:e.id,resourceStagingSignature:null,updatedAt:new Date(Date.now()),iconUrl:n.redirect_icon_url,coverImageUrl:n.redirect_cover_image_url,name:n.name,version:n.version,releaseNotes:n.release_notes,description:n.description,tagline:n.tagline,creatorPolicy:n.creator_policy,manifest:JSON.stringify(n.manifest),createdAt:new Date(n.created_at),iconPath:n.redirect_icon_url,coverImagePath:n.redirect_cover_image_url,codePath:n.redirect_code_url,plugin:{currentPluginVersionId:n.id},playgroundFigFileKey:n.playground_fig_file_key??null,hasPlaygroundFile:!!n.playground_fig_file_key,playgroundFileVersionId:n.playground_file_version_id??null,userId:"",snapshotPath:""},i={id:e.id,currentPluginVersionId:e.current_plugin_version_id,publishingStatus:e.publishing_status,isWidget:e.is_widget,orgId:e.org_id,thumbnailUrl:"",userId:"",updatedAt:new Date(Date.now()),createdAt:new Date(e.created_at),unpublishedAt:null,supportContact:e.support_contact,approvedAt:new Date(Date.now()),installCount:e.install_count,likeCount:0,viewCount:e.view_count,blockedAt:null,profileId:"",commentCount:e.comment_count,hideRelatedContentByOthers:e.hide_related_content_by_others??null,isPublic:e.publishing_status===w.KB.APPROVED_PUBLIC,isInspect:"inspect"===e.editor_type,isSlides:n?.manifest.editorType?.includes(R.FW.SLIDES)||!1,widgetsWhitelistEnforced:null,pluginsWhitelistEnforced:null,monetizedResourceMetadataId:e.monetized_resource_metadata?.id??null,thirdPartyM10nStatus:e.third_party_m10n_status??null,monetizationStatus:e.monetization_status??null,canRead:!0,categoryId:"",uniqueRunCount:0,pluginEditorType:0,commentsSetting:"",currentUserFirstRanAt:"",profileInstallStatus:2,redirectThumbnailUrl:"",communityPublishers:e.community_publishers?.accepted.map(r=>({id:r.id,isPending:!1,role:w.un.CREATOR,userId:r.primary_user_id,profileId:r.id,pluginId:e.id,hubFileId:null,profile:{id:r.id,profileHandle:r.profile_handle,team:"team"===r.entity_type?{id:r.id,name:r.name}:null,org:"org"===r.entity_type?{id:r.id,name:r.name}:null,user:"user"===r.entity_type?{id:r.primary_user_id,name:r.name}:null,teamId:"team"===r.entity_type?r.id:null,orgId:"org"===r.entity_type?r.id:null,primaryUserId:"user"===r.entity_type?r.primary_user_id:null,publicAt:new Date(Date.now()),website:null,description:null,location:null,twitter:null,instagram:null,createdAt:new Date(Date.now()),updatedAt:new Date(Date.now()),followerCount:0,followingCount:0,coverImagePath:null,pronouns:null,badges:[],communityUserIsFollowing:r.current_user_is_following,communityUserIsFollowed:r.current_user_is_followed,entityType:r.entity_type,currentUserIsFollowing:!1,currentUserIsFollowed:!1,name:r.name,imgUrl:null,imgUrls:{}}}))||[],currentPluginVersion:a,viewableInEditor:!0,publishingStatusUpdatedAt:null,isSeoIndexingAllowed:null};return{pluginId:e.id,createdAt:new Date(Date.now()),userId:r.userId,orgId:r.orgId,pluginVersionId:e.current_plugin_version_id,plugin:i,pinnedStatus:w.hM.UNPINNED}}function W(e,r,n,a){if(!e||e.publishingStatus&&[w.KB.ORG_PRIVATE,w.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishingStatus)&&(!e.orgId||e.orgId!==r)&&!(0,u.kc)().community_hub_admin)return;let i=e.currentPluginVersion;if(!i)return;if(!i.manifest){(0,p.$D)(s.e.EXTENSIBILITY,Error("manifest missing"),{extra:{plugin:e}});return}let o=e.isWidget?"widget":"plugin",l=function(e){try{let r="string"==typeof e?JSON.parse(e):e;"dynamic-page"!==r.documentAccess&&delete r.documentAccess;let n=R.pL.safeParse(r);if(!n.success)return(0,p.$D)(s.e.EXTENSIBILITY,Error("manifest schema parse error"),{extra:{jsonParsedResult:JSON.stringify(r,null,2),rawManifest:JSON.stringify(e,null,2),errors:n.error.format()}}),r;return n.data}catch(r){(0,p.$D)(s.e.EXTENSIBILITY,Error("manifest JSON parse error"),{extra:{rawManifest:e}});return}}(i.manifest);if(!l)return;let c=`?resource_type=${o}&resource_id=${e.id}`;n&&(c+=`&fuid=${n}`);let d={id:i.id,plugin_id:e.id,name:i.name||"",current_plugin_version_id:i.plugin?.currentPluginVersionId||void 0,version:i.version||"",release_notes:i.releaseNotes||"",is_private:!!e.orgId,description:i.description||"",creator_policy:i.creatorPolicy??"",manifest:l,installed_by:a,tagline:i.tagline||"",created_at:i.createdAt.toString(),redirect_icon_url:`/community/icon${c}`,redirect_cover_image_url:`/community/thumbnail${c}`,redirect_code_url:`/community/${o}/${e.id}/code`};return e.communityPublishers&&(d.community_publishers=e.communityPublishers),e.isWidget&&(d.redirect_snapshot_url=`/community/snapshot${c}`),e.orgId&&(d.org_id=e.orgId),d}let K=(e,r,n)=>{let a={},i={},o={},s={},l={},c={};if("loaded"!==e.status)return{plugins:{},widgets:{},orgPlugins:{},orgWidgets:{},userPlugins:{},userWidgets:{}};let d=e.data;for(let e of[{source:"org",savedExtensions:d.org?.installedPlugins},{source:"user",savedExtensions:d.currentUser?.installedPlugins}]){let{source:d,savedExtensions:u}=e;if(u)for(let e of u){let{plugin:u}=e;if(!u||!u.viewableInEditor)continue;let m=W(u,r,n,d);m&&(u.isWidget?(i[e.pluginId]=m,"org"===d?s[e.pluginId]=m:"user"===d&&(c[e.pluginId]=m)):(a[e.pluginId]=m,"org"===d?o[e.pluginId]=m:"user"===d&&(l[e.pluginId]=m)))}}return{plugins:a,widgets:i,orgPlugins:o,orgWidgets:s,userPlugins:l,userWidgets:c}},Y=new Set,$=new Set,j=c()(e=>{Y.size>0&&(e(E.f1({pluginIds:Array.from(Y)})),Y.clear()),$.size>0&&(e(E.O8({widgetIds:Array.from($)})),$.clear())},300);function z(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,m.Rs)(A.BB3,{orgId:r}),o=(0,S.TA)(),s=em();return a.useMemo(()=>{if("loaded"!==n.status)return{loaded:!1,plugins:{},widgets:{},orgWidgets:{},orgPlugins:{},userWidgets:{},userPlugins:{}};let{plugins:a,widgets:i,orgPlugins:l,orgWidgets:c,userPlugins:d,userWidgets:u}=K(n,r,o);return!function(e,r,n){let a=Object.keys(r),i=Object.keys(n);a.forEach(e=>Y.add(e)),i.forEach(e=>$.add(e)),j(e)}(e,a,s?i:{}),{loaded:!0,plugins:a,widgets:s?i:{},orgPlugins:l,orgWidgets:s?c:{},userPlugins:d,userWidgets:s?u:{}}},[e,n,r,o,s])}function q(e,r){let n=I.sZ()?.id??null,i=(0,S.TA)(),o=(0,m.Rs)(A.k_1,{orgId:n,pluginId:e},{enabled:r}),s=o.data?.plugin,l=o.status;return a.useMemo(()=>"loaded"!==l?{loaded:!1,plugin:null}:{loaded:!0,plugin:s?W(s,n,i,null)??null:null},[l,s,n,i])}function Z(e,r){return e.name.localeCompare(r.name)}let X={loaded:!0,plugins:{}};function J(){return ee(function(){let e=(0,i.d4)(e=>e.recentlyUsed.widgets),r=function(){let e=M();return(0,a.useMemo)(()=>{let r={};for(let n in e){let a=e[n];(0,R.k0)(a)&&(r[n]=a)}return r},[e])}(),n=(0,k.o)(),o=(0,S.TA)(),s=em();return(0,a.useMemo)(()=>{let a=[];return s&&n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let i=e.fetchedResources[n.id];if(i&&i.version){a.push(i.version);return}if(r[n.id]){a.push(r[n.id]);return}}),a},[n,r,e,o,s])}())}function Q(){let e=(0,i.d4)(e=>e.recentlyUsed.plugins),r=function(e){let r=M(void 0);return(0,a.useMemo)(()=>{let e={};for(let n in r){let a=r[n];(0,R.k0)(a)||(e[n]=a)}return e},[r])}(),n=(0,k.o)(),o=(0,S.TA)(),s=(0,a.useMemo)(()=>{let a=[];return n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let i=e.fetchedResources[n.id];if(i&&i.version){a.push(i.version);return}if(r[n.id]){a.push(r[n.id]);return}}),a},[n,e,r,o]);return(0,D.Ol)(s)}function ee(e){let r={};return e.filter(e=>!r[e.plugin_id]&&(r[e.plugin_id]=!0,!0))}function et(){let e=ee(Q());return a.useMemo(()=>{let r={};return e.forEach(e=>r[e.plugin_id]=e),r},[e])}function er(){let e=(0,i.d4)(e=>e.recentlyUsed.plugins),r=(0,i.d4)(e=>e.recentlyUsed.widgets),n=(0,S.TA)(),o=(0,k.o)();return(0,a.useMemo)(()=>{let a={};return o&&n&&(e[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(a[e.id]=r)}),r[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(a[e.id]=r)})),a},[o,n,e,r])}function en(e,r,n){let a=Object.keys(e).reduce((e,n)=>{if(r[n]){let a=r[n],i=(0,L.Ar)(a);if(!i)return e;e[n]=i}return e},{});return(0,L.NW)(n,a)}function ea(e){let r=I.sZ()?.id??"",n=(0,i.wA)(),a=(0,i.d4)(r=>"plugin"===e?r.whitelistedPlugins:r.whitelistedWidgets),s=!!r,l=function(e,r=!0){let n=I.sZ()?.id??"",a=(0,T.tS)(),i=(0,b.CR)(e,r&&!!a),o=(0,b.kA)(n??"",e,r&&!!n&&!a);return a?i:o}(e,s),c=l.loaded?l.data:[];if(!s)return a;if(!l.loaded)return{};let d={};return c.forEach(e=>{e&&(d[e]=!0)}),(0,o.c2)(d,a)||n(("plugin"===e?_.P:_.o)(d)),d}function ei(){let e=(0,y.my)(),r=(0,I.sZ)(),n=x(),o=!!(r&&r.plugins_whitelist_enforced),s=ea("plugin"),l=(0,i.wA)(),c=(0,T.tS)(),d=(0,R.Gb)(r?.id??"",c),u=(0,i.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));return a.useEffect(()=>{o&&!u&&l(f.Vl({}))},[o,l,u]),a.useMemo(()=>en(s,n,e),[e,s,n])}function eo(){let e=(0,y.my)(),r=(0,I.sZ)(),n=U(),o=!!(r&&r.widgets_whitelist_enforced),s=ea("widget"),l=(0,i.wA)(),c=(0,T.tS)(),d=(0,R.n_)(r?.id??"",c),u=(0,i.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));a.useEffect(()=>{o&&!u&&l(f.mV({}))},[o,l,u]);let m=a.useMemo(()=>en(s,n,e),[s,n,e]),p=em(),h=(0,a.useMemo)(()=>({}),[]);return p?m:h}function es(e,{searchLocalPlugins:r,searchPublishedPlugins:n}){let i=M(),o=x();return a.useMemo(()=>(0,L.DM)({idToSearch:e,localExtensionsByFileId:r?i:void 0,publishedExtensions:n?o:void 0}),[e,r,n,i,o])}function el(){let e=function(){let e=(0,i.d4)(e=>e.selectedView),r=(0,i.d4)(e=>e.installedPluginVersions);if("fullscreen"!==e.view)return X;let n=(0,L.GX)(e.editorType);if(!r.loaded)return r;let a={};for(let i of Object.values(r.plugins))(0,L.EK)(n,i.manifest.editorType)?a[i.plugin_id]=i:((0,P.$A)(e)&&(0,L.M5)(i)||"figma"===n&&(0,L.M5)(i))&&(a[i.plugin_id]=i);let o="fullscreen"===e.view?e.editorType:null;return{loaded:!0,plugins:(0,L.NW)(o,a)}}(),r=B(),n=Q(),a={};return Object.values(e.plugins).forEach(e=>{a[e.plugin_id]||(a[e.plugin_id]=e)}),Object.values(r).map(L.uF).forEach(e=>{a[e.plugin_id]||(0,R.ZQ)(e)||(a[e.plugin_id]=e)}),n.forEach(e=>{a[e.plugin_id]||(0,R.ZQ)(e)||(a[e.plugin_id]=e)}),a}function ec(e){let r={};return Object.keys(e).forEach(e=>{r[e]=!0}),r}function ed(){let e=(0,y.E3)(),r=ec(ei()),n=ec(eo()),i=(0,d.R)(e=>({currentUserOrgId:e.currentUserOrgId,orgById:e.orgById,selectedView:e.selectedView,openFile:e.openFile})),o=(0,v.p8)("isReadOnly");return a.useCallback(a=>{let{canRun:s}=(0,L.JT)({plugin:a,editorType:e,canRunPluginState:{...i,mirror:{appModel:{isReadOnly:o}},whitelistedPlugins:r,whitelistedWidgets:n}});return s},[e,i,r,n,o])}function eu(){return(0,i.d4)(N.GP)}function em(){let e=(0,y.E3)();return e!==O.nT.Slides&&e!==O.nT.Sites}function ep(e){let r=(0,y.pQ)(e);return r!==O.nT.Slides&&r!==O.nT.Sites}function eh(e){let r=(0,i.wA)(),n=(0,I.sZ)(),o=!!(n&&n.plugins_whitelist_enforced),s=(0,i.d4)(e=>e.whitelistedPlugins)[e],l=M(),c=a.useMemo(()=>Object.values(l).find(r=>r.plugin_id===e),[l,e]),d=(0,i.d4)(r=>r.publishedPlugins[e]),u=!o||c||d?.org_id,m=!s&&!u;return{validatePublishedPluginInOrgAllowlist:a.useCallback(()=>!m||(r(g.F.enqueue({message:(0,h.t)("universal_insert.plugin_not_in_allowlist"),error:!0})),!1),[m,r]),isPluginBlockedByAllowlist:m}}function e_(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:r}=function(e){let r=(0,I.sZ)(),n=!!(r&&r.plugins_whitelist_enforced),i=!!(r&&r.widgets_whitelist_enforced),o=!!r&&!r.public_plugins_allowed,s=ei(),l=eo(),c=e?l:s,d=e?i:n,u=r?.id??"",m=(0,T.tS)(),p=(0,C.oh)(e?(0,R.n_)(u,m):(0,R.Gb)(u,m)),h=a.useCallback(e=>d?e.filter(e=>!(0,R.LR)(e)||!!c[e.plugin_id]):e,[c,d]),_=a.useCallback(e=>o?e.filter(e=>!(0,R.LR)(e)):e,[o]);return{publicExtensionsDisallowed:o,allowList:c,hasAllowList:d,allowListIsLoading:p,hasPluginAllowList:n,hasWidgetAllowList:i,filterByPublicResourcesAllowed:_,filterByAllowlist:h}}(!1);return e(r(ee(Q())))}},972311:(e,r,n)=>{n.d(r,{Yk:()=>g}),n(411855);var a=n(188507),i=n(747579);n(805014);var o=n(991458);n(841962);var s=n(875877),l=n(372653);n(622268);var c=n(662306);n(178035);var d=n(73041);n(509343),n(695024),n(985814),n(798361),n(797187);var u=n(738402);n(465573);var m=n(692494),p=n(873137);n(788894);var h=n(540680);n(408879);var _=n(488527);function g(){let e=(0,h.FF)(),r=(0,s.useAtomValue)(p.gT),n=(0,h.bz)(),g=(0,h.oV)(),f=(0,h.rD)(),E=(0,m.N)(),y=(0,c.e)(),b=(0,u.ks)(),v=(0,a.d4)(e=>!!e.prototype?.isFooterVisible),T=(0,l.z)()&&!b?(0,o.jz)(_.F6W):0,I="ui3"===(0,i.DP)().version,S=(0,d.ow)(),w=(0,a.d4)(e=>e.mirror?.appModel.showUi),A=I?_.LQy:_.IuL,C=64+E+T;return S?e&&!r&&(n||g||f)?(0,o.jz)(A)+(0,o.jz)(_.jl4):e&&r?C:e?(0,o.jz)(A):0:y?I?C+40:(0,o.jz)(_.ZB$):v?(0,o.jz)(_.P4e):I&&w?C:0}(0,o.hG)(_.xEX),(0,s.atom)(0)},15721:(e,r,n)=>{n.d(r,{iT:()=>m});var a=n(411855),i=n(188507),o=n(805014);n(336427),n(40211),n(963993);var s=n(427494),l=n(797187),c=n(846836);n(30057);var d=n(73041),u=n(343373);function m(){let e=(0,u.GS)(),r=!(0,l.ut)(o.Ez5?.uiState()?.showPropertiesPanel,!0),n=function(){let e=(0,u.GS)(),r=(0,d.ow)(),n=(0,c.Ye)(),a=(0,s.aV)(),l=(0,s.ax)(),m=(0,s.dH)(),p=m===o.NLJ.FRAME||m===o.NLJ.COMMENTS||m===o.NLJ.VECTOR_PENCIL,h=(0,i.d4)(e=>e.mirror.appModel.activeUserAction===o.QOV.DEFAULT);return!!e&&!!h&&!!n&&!a&&!r&&!l&&!p}(),m=e&&(r||n),p=(0,a.useCallback)(e=>{r!==e&&o.Ez5?.uiState().showPropertiesPanel.set(!e)},[r]),h=(0,a.useCallback)(()=>{p(!m)},[m,p]);return{isPropertiesPanelCollapsed:m,setPropertiesPanelCollapsed:p,togglePropertiesPanelCollapsed:h}}},413645:(e,r,n)=>{n.d(r,{w:()=>o,y:()=>s});var a=n(841962),i=n(374629);function o(){let e=(0,i.U5)();return(0,a.kc)().xr_debounce_threshold&&e}function s(){return(0,a.kc)().xr_debounce_threshold}},45362:(e,r,n)=>{n.d(r,{Et:()=>C,J3:()=>I,JU:()=>S,UF:()=>w,b2:()=>N,kD:()=>A,kN:()=>E,mZ:()=>T,tS:()=>v}),n(411855);var a=n(188507),i=n(846288);n(771654),n(108982);var o=n(841962),s=n(875877);n(728722),n(139879);var l=n(643225),c=n(176160),d=n(661137),u=n(314540);n(183739),n(597185);var m=n(313449),p=n(940795),h=n(269049);n(77383);var _=n(689102);n(773283),n(662750),n(543424),n(544950);var g=n(73041),f=n(408407),E=(e=>(e.NOT_ENABLED="NOT_ENABLED",e.CAN_PUBLISH="CAN_PUBLISH",e.FILE_IN_DRAFTS="FILE_IN_DRAFTS",e.FILE_IN_DRAFTS_CANNOT_MOVE="FILE_IN_DRAFTS_CANNOT_MOVE",e.DISABLED_IN_SETTINGS="DISABLED_IN_SETTINGS",e.CANNOT_PUBLISH="CANNOT_PUBLISH",e))(E||{});function y(e){let r=(0,g.lg)(),n=(0,p.bv)(e);return(0,p.yN)({...e,attribute:"canBrowseOrgTemplates",legacy:(e,a)=>a?(0,f.ar)(a?.are_custom_templates_allowed,n):!!(e&&r&&("student_team"in e?(0,m.w5)(e):(0,m.XX)(e)))&&(r===u._Y.SLIDES||r===u._Y.WHITEBOARD&&!!(0,o.kc)().pro_templates_figjam),migrated:(e,a)=>a?.key.type===u.OL.ORG?(0,f.ar)(!!a?.customTemplatesAllowed,n):a?.key.type===u.OL.TEAM&&!!a&&!!r&&a.tier!==u.Ag.STARTER&&(r===u._Y.SLIDES||r===u._Y.WHITEBOARD&&!!(0,o.kc)().pro_templates_figjam)})}function b(){let e=(0,d.sZ)(),r=(0,_.ol)();if(y({component:"useCurrentEntityForTemplates",migrationGroup:h.L.GROUP_5})){if(e)return{type:"org",entity:e,name:e.name};if(r)return{type:"team",entity:r,name:r.name}}return null}function v(){return!!b()}function T(e){let r=y({component:"useFileEntityCanAccessTemplates",migrationGroup:h.L.GROUP_5});return!!e&&r}function I(){let e=(0,c.q5)(),r=function(){let e=b(),r=(0,c.q5)();return(0,a.d4)(n=>!!r&&!!r.folderId&&(e?.type==="team"?(0,l.ye)(n.folders[r.folderId]):e?.type==="org"&&(0,l.Gi)(n.folders[r.folderId])))}(),n={component:"usePublishTemplateStatus",migrationGroup:h.L.GROUP_5},i=(0,p.UP)(n),o=y(n),s=!!e?.canPublishTemplate,d=!!e?.canEdit;return(i===u.OL.ORG||o)&&e?.editorType!==u._Y.DESIGN?s?"CAN_PUBLISH":d?i!==u.OL.ORG||o?r?e?.canDelete?"FILE_IN_DRAFTS":"FILE_IN_DRAFTS_CANNOT_MOVE":"CANNOT_PUBLISH":"DISABLED_IN_SETTINGS":"CANNOT_PUBLISH":"NOT_ENABLED"}function S(e){switch(e){case"CAN_PUBLISH":case"FILE_IN_DRAFTS":return!0;case"DISABLED_IN_SETTINGS":case"NOT_ENABLED":case"CANNOT_PUBLISH":case"FILE_IN_DRAFTS_CANNOT_MOVE":return!1;default:(0,i.xb)(e)}}function w({fileCanEdit:e,editor_type:r,team_id:n,state:a}){let i=a.currentUserOrgId&&a.orgById[a.currentUserOrgId];return!!(i&&e&&r===u._Y.WHITEBOARD&&i.are_custom_templates_allowed&&n)}function A(){let e=(0,c.q5)(),r=C(e);return e?.template&&r?e?.template:null}function C(e){let r=T(e);return!!e&&!!e.template&&!e.template.unpublishedAt&&r}let N=(0,s.atom)(null)},117736:(e,r,n)=>{n.d(r,{Fz:()=>G,_R:()=>$,dT:()=>U,eE:()=>H,jd:()=>K});var a=n(411855),i=n(188507),o=n(846288),s=n(805014),l=n(851169),c=n(777535),d=n(163773);n(771654);var u=n(626918),m=n(863297),p=n(94489),h=n(697737),_=n(76265),g=n(553362),f=n(534294),E=n(20174),y=n(560664),b=n(628220),v=n(241162),T=n(843816),I=n(354549),S=n(328099),w=n(596159),A=n(529947),C=n(176160),N=n(15092),L=n(69441),O=n(354465);n(940795),n(269049);var R=n(662750),P=n(567095);n(544950);let D=(e,r)=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${M(e)}/${r}/prepare_insert`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${M(e)}/${r}/prepare_insert`}},k=e=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${M(e)}/template_canvas`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${M(e)}/template_canvas`}},M=({type:e,template:r})=>{switch(e){case R.n.HubFile:return r.id;case R.n.TeamTemplate:return r.file_key;case R.n.TeamTemplateLg:return r.fileKey;default:(0,o.xb)(e)}},F=({template:e,type:r})=>{switch(r){case R.n.HubFile:return{type:P.vt.CommunityResource,id:e.id};case R.n.TeamTemplate:return{type:P.vt.TeamTemplate,file_key:e.file_key};case R.n.TeamTemplateLg:return{type:P.vt.TeamTemplate,file_key:e.fileKey};default:(0,o.xb)(r)}};async function x({insert:e,dispatch:r,fileKey:n,template:a,onSuccess:i,onFailure:o,userTriggered:s=!0,isPreview:l=!1,triggeredFrom:d}){let u=new p.jk(`template_insert.${d}`,{key:n??""});u.start();let m=e=>{let r=u.stop();(0,c.sx)(e,{elapsedMs:r,triggeredFrom:d,isPreview:l},{forwardToDatadog:!0,batchRequest:!0})},h=M(a);try{await (0,T.B)(()=>h,n,I.T.STANDARD,async()=>{await e()&&(i&&i(),m("template_insert_success"),(0,I._)(l?"resource_previewed":"resource_inserted",{fileKey:n,resourceType:"template",resourceName:(0,S.gY)(a),resourceId:h,triggeredFrom:d,templateType:a.type,templateCategory:a.type===R.n.HubFile?a.category:void 0}),s)&&(r(v.b({inserted_figjam_template:!0})),a.type===R.n.TeamTemplate&&r(y.D([a.template])),"section-preset"!==d&&"sites-templates-modal"!==d&&r(b.Hx({storeInRecentsKey:P.$A.FigJam,...F(a)})))},{enableTracking:!l})}catch(e){r(g.F.enqueue({message:(0,_.t)("whiteboard.inserts.insert_template_failed_v2"),error:!0})),o&&o(),m("template_insert_failure")}}async function U({template:e,fileKey:r,fileVersion:n}){if(!r)throw Error("Missing file key");if(!n)throw Error("Missing file version");let a=D(e,r),i=k(e),o=e.type===R.n.HubFile?{fv:`${n}`}:void 0,s=(0,w.n)(i,(e,r)=>h.Ay.post(e,{fv:`${r}`},{responseType:"arraybuffer"}).then(({data:e})=>e)),[[l]]=await Promise.all([s,h.Ay.post(a,o)]);return l}async function B(e){let{userTriggered:r=!0,templateInsertionDirection:n=s.hKj.RIGHT,templateCustomPosition:a,selectTemplateAfterInsertion:i}=e,o=e.editScopeType;o||(o=r?s.zkO.USER:s.zkO.SYSTEM),await x({insert:async()=>await U(e).then(e=>((0,l.l7)(o,"insert-figjam-template",()=>s.glU.insertTemplateInCanvas(e,n,i??r,!a,a?a.x:null,a?a.y:null)),!0)),...e})}function V(e,r){return`INSERT_FIGJAM_TEMPLATE_${e}_${r}`}function G(){let e=(0,i.wA)(),r=(0,C.tS)(),n=(0,i.d4)(e=>e.fileVersion),a=(0,i.d4)(e=>e.loadingState);return{insertTemplate:async({onSuccess:i,onFailure:o,...s})=>{let l=V(r,M(s.template));(0,O.VP)(a,l)||(e(E.Cx({key:l})),await B({dispatch:e,fileKey:r,fileVersion:n,...s,onSuccess:()=>{e(E.yH({key:l})),i&&i()},onFailure:()=>{e(E.yH({key:l})),o&&o()}}))},isInsertingTemplate:e=>{let n=V(r,e);return(0,O.VP)(a,n)}}}function H(e){let r=(0,i.d4)(e=>e.recentlyUsed.templates),n=(0,i.d4)(e=>e.hubFiles),s=(0,i.d4)(e=>e.recentCustomTemplates);return(0,a.useMemo)(()=>r[e].map(e=>{let{type:r}=e;switch(r){case P.vt.CommunityResource:return{type:R.n.HubFile,template:n[e.id]};case P.vt.TeamTemplate:return{type:R.n.TeamTemplate,template:s[e.key]};default:(0,o.xb)(r)}}).filter(({template:e})=>!!e),[r,n,s,e])}async function W({dispatch:e,templateIdentifier:r,onSuccess:n,onFailure:a,templateName:i,openInNewTab:o,folderId:s}){await h.Ay.post(`/api/templates/${r.file_key}/duplicate`,{folder_id:s}).then(({data:a})=>{let{fig_file:i,template:s}=a.meta;n(),e(y.D([s])),e(b.Hx({storeInRecentsKey:P.$A.FigJam,...r})),d.Ay.redirect((0,L.to)(i),o?"_blank":void 0)}).catch(()=>{let r={error:!0,message:(0,_.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:i})};e(g.F.enqueue(r)),a()})}let K=(0,f.nF)((e,r)=>{var n;let a=(n=r.templateIdentifier.file_key,`DUPLICATE_FIGJAM_TEMPLATE_${n}`),{dispatch:i}=e,{loadingState:o}=e.getState();(0,O.VP)(o,a)||(i(E.Cx({key:a})),W({...r,dispatch:i,onSuccess:()=>{i(E.yH({key:a})),r.onSuccess&&r.onSuccess()},onFailure:()=>{i(E.yH({key:a})),r.onFailure&&r.onFailure()}}))}),Y={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII="};function $(e){let r=(0,N.iZ)(),n=(0,u.J)(()=>r?(0,A.$)(e,r):Promise.reject(Error("User not logged in")),[e,r]),[i,o]=(0,a.useState)(Y);return(0,a.useEffect)(()=>{n.status===m.r.SUCCESS&&o(n.value),n.status===m.r.FAILURE&&o(Y)},[n]),i}},343373:(e,r,n)=>{n.d(r,{GS:()=>i}),n(411855);var a=n(747579);function i(){return"ui3"===(0,a.DP)().version}n(805014),n(47865),n(163773),n(841962),n(215587),n(747484),n(550479),n(73041),n(440475),n(761263),n(309494),n(254903),n(914077),n(30057)},421331:(e,r,n)=>{n(411855);var a=n(875877);n(581713),(0,a.atom)(null),(0,a.atom)(null)},864941:(e,r,n)=>{n.d(r,{Ck:()=>_,MJ:()=>g,Pp:()=>f,n1:()=>b,rM:()=>y});var a=n(411855),i=n(188507),o=n(707062),s=n(841962),l=n(875877),c=n(183739),d=n(940795),u=n(269049),m=n(689102),p=n(212552),h=n(401562);function _(){let e=b();return a.useCallback(()=>e,[e])}let g=(0,h.n)((e,r,n)=>{let a=e?.figma_provided_libraries_disabled||r?.figma_provided_libraries_disabled;return!!(!(0,s.sL)()&&!n&&!a)}),f=(0,h.n)((e,r,n)=>!((0,s.sL)()||n||e?.figmaProvidedLibrariesDisabledAt&&(0,o.oA)(e.figmaProvidedLibrariesDisabledAt)||r?.canAccessProFeature&&r.figmaProvidedLibrariesDisabledAt&&(0,o.oA)(r.figmaProvidedLibrariesDisabledAt))),E=(0,h.n)((e,r)=>!!(!(0,s.sL)()&&!r&&e?.figmaProvidedLibrariesEnabled));function y(e){if("loaded"!==e.status)return!1;let r=e.data.team,n=e.data.org;return(!r||"loaded"===r.figmaProvidedLibrariesDisabledAt.status)&&(!n||"loaded"===n.figmaProvidedLibrariesDisabledAt.status)}function b(){let e=(0,m.cD)(),r=(0,m.jv)(e)?e:null,n=(0,i.d4)(({openFile:e,currentUserOrgId:r})=>e?e.parentOrgId:r),a=(0,l.useAtomValue)(c.U8U.Query(r||n?{teamId:r||"-1",orgId:n}:null)),o=(0,l.useAtomValue)(p.AS).enabled,s=(0,d.yN)({component:"useDsePresetsEnabled",migrationGroup:u.L.GROUP_4,attribute:"isDsePresetsEnabled",legacy:(e,r)=>g(r,e,o),migrated:(e,r)=>E(r,o)});return"loaded"===a.status&&y(a)?f(a.data.org,a.data.team,o):s}},948813:(e,r,n)=>{n(411855),n(695024),n(421331)},440475:(e,r,n)=>{n.d(r,{k:()=>l});var a=n(841962),i=n(15092),o=n(914077),s=n(73041);function l(){let e=!(0,i.iZ)(),r=(0,s.my)(),n=r===o.nT.Design;if((0,a.kc)().logged_out_comments_more_editors){let a=r===o.nT.Slides,i=r===o.nT.Sites,s=r===o.nT.Cooper;return e&&(n||a||i||s)}return e&&n}},402532:(e,r,n)=>{n.d(r,{K:()=>o});var a=n(411855);function i(e,r){if(!r)return e;let n=new Set(r.map(e=>e.id)),a=e.filter(e=>!n.has(e));return a.length===e.length?e:a}function o(e,r=50){let[n,s]=a.useState([]),l=a.useMemo(()=>i(n,e),[e,n]);return a.useEffect(()=>{s(l)},[l]),{optimisticIds:l,addOptimisticIds:a.useCallback(e=>s(n=>{let a=[...n,...e];return a.length>r?a.slice(a.length-r):a}),[r]),setServerData:a.useCallback(e=>{s(r=>i(r,e))},[])}}},573626:(e,r,n)=>{n.d(r,{FC:()=>_});var a=n(217950),i=n(841962),o=n(875877),s=n(657548),l=n(198003);n(728722);var c=n(550479),d=n(183739),u=n(60282);class m{constructor(e){this.pendingIncrementCount=0,this.makeDebouncedUpsertRequest=p(e=>u.H.upsertUserFlagWithCount(this.userFlagName,e),1e3),this.makeDebouncedResetRequest=p(()=>u.H.resetUserFlag(this.userFlagName),1e3),this.increment=async()=>{let e;let r=i.Ay().user_data?.id;if(!r){(0,c.$D)(a.e.GROWTH_PLATFORM,Error(`Attempted to increment user flag counter ${this.userFlagName} for anonymous user; this is a no-op.`));return}this.pendingIncrementCount+=1;try{e=await (0,l.Ek)(d.sMZ,{name:this.userFlagName})}catch(e){throw this.pendingIncrementCount-=1,e}let n=e.currentUser.userFlagByName;if(0===this.pendingIncrementCount)return;let o=(n?n.count??1:0)+this.pendingIncrementCount;this.pendingIncrementCount=0;let u=this.makeDebouncedUpsertRequest(o),m=new Date;return n?(0,s.WB)().optimisticallyUpdate({UserFlag:{[n.id]:{count:o,updatedAt:m}}},u):(0,s.WB)().optimisticallyCreate({UserFlag:{[`optimistic-id-${this.userFlagName}`]:{userId:r,name:this.userFlagName,count:o,createdAt:m,updatedAt:m}}},u)},this.reset=async()=>{if(!i.Ay().user_data?.id){(0,c.$D)(a.e.GROWTH_PLATFORM,Error(`Attempted to reset user flag counter ${this.userFlagName} for anonymous user; this is a no-op.`));return}let e=await (0,l.Ek)(d.sMZ,{name:this.userFlagName}),r=e.currentUser?.userFlagByName;if(!r)return;let n=this.makeDebouncedResetRequest();return(0,s.WB)().optimisticallyDelete({UserFlag:{[r.id]:null}},n)},this.userFlagName=e}}function p(e,r=200){let n;let a=[];return function(...i){return clearTimeout(n),n=setTimeout(()=>{let r=e(...i);a.forEach(e=>e(r)),a=[]},r),new Promise(e=>a.push(e))}}let h=(0,o.atomFamily)(e=>(0,o.atom)(()=>new m(e)));function _(e){return o.atomStore.get(h(e)).increment()}},76850:(e,r,n)=>{var a=n(163773);n(841962);var i=n(750570);n(404240);let o=new URL(window.location.href),s=(o.searchParams.get("mode")||"interaction").toLowerCase().split(","),l=(s.find(e=>e.includes("interaction")),!!s.find(e=>e.includes("perf-bench")||"perf"===e)),c=!!s.find(e=>e.includes("perf-regression")||"perf"===e);o.hostname,function(){let e=o.searchParams.get("playback");switch(e){case null:return;case"sync":case"async":case"realtime":return;default:throw Error(`Unknown playback mode ${e}. Options are "sync", "async", and "realtime".`)}}();let d=i.qg(window.location.search);d["additional-ffs"],d.playwright,d.only,d.skip,d.testGroupFilter,d.onlyPrintSpecs,d.secondary,d.popout,parseInt(d.repeat??"1"),d.logFigmentRequests,d.rolloutFlags,d.stopOnSpecFailure,d.reportV2,d.updateScreenshots,d.bisectDecisions,d.asan;let u=i.qg(a.Ay.location.hash),m=d.initialOptions||u.initialOptions;m&&JSON.parse(decodeURIComponent(m)),(()=>{let e=d["additional-ffs"];if(!e)return;let r={};e.split(",").forEach(e=>{if(!e)return;let[n,a]=e.split("=");r[n]=!a||a.startsWith("t")})})(),(l||c)&&d.noShowPerfReport,(d.test_categories||"").split(",").filter(e=>e.length>0)},945142:(e,r,n)=>{function a(e){return e?.file?.activeFileUsers?.map(e=>e)??[]}function i(e){return!!e.imageUrl&&!!e.id&&!!e.handle}function o(e){return{id:e.id,handle:e.handle,img_url:e.imageUrl}}n.d(r,{ZF:()=>a,q3:()=>i,rR:()=>o})},708737:(e,r,n)=>{n.d(r,{H3:()=>i});var a=n(890882);function i(e){return e?(0,a.A)(e).add(1,"day").subtract(1,"second").format():null}n(538971)},190500:(e,r,n)=>{n.d(r,{Cu:()=>W,Dc:()=>p,E9:()=>w,FE:()=>N,Fr:()=>M,GS:()=>S,Nb:()=>b,OH:()=>L,PB:()=>O,Pg:()=>v,WL:()=>z,Ws:()=>H,Yg:()=>j,_J:()=>k,_R:()=>K,ak:()=>P,ds:()=>T,f5:()=>I,fy:()=>Y,k1:()=>C,oP:()=>V,pf:()=>R,pi:()=>h,qD:()=>$,uE:()=>F,v5:()=>_,xr:()=>D,ye:()=>B,ys:()=>E,z_:()=>U});var a=n(805014),i=n(777535),o=n(550479),s=n(653798),l=n(314540),c=n(914077),d=n(428064),u=n(401562),m=n(82497);function p(e){switch(e){case c.nT.Design:return"design";case c.nT.Whiteboard:return"figjam";case c.nT.DevHandoff:return"dev_handoff";case c.nT.Slides:return"slides";case c.nT.Sites:return"sites";default:return"unknown"}}function h(e){switch(e&&e.editorType){case l._Y.DESIGN:return"design";case l._Y.WHITEBOARD:return"figjam";case l._Y.SLIDES:return"slides";case l._Y.SITES:return"sites";default:return"unknown"}}function _(e,r){return e?.view==="fullscreen"?p(e.editorType):r?h({editorType:r}):"unknown"}let g=(e,r)=>{switch(r?.selectedView?.view){case"prototype":case"mobileViewer":if(r.selectedView.file?.key===e)return r.selectedView.file||null;return null;default:return e&&r.fileByKey[e]||null}},f=null;function E(e){f=e}let y=(e,r,n,i={})=>{let o=_(n?.selectedView,r&&r.editor_type),s={...i,...b(o,n?.selectedView?.view)};return s.productType=o,s.fileKey=e||"new",s.fileParentOrgId=r&&r.parent_org_id,s.fileTeamId=r&&r.team_id,r&&r.file_repo_id&&(s.fileRepoId=r.file_repo_id),s.fileTeamId=r&&r.team_id,s.containingFolderId=r&&r.folder_id,s.entrypoint=i.entrypoint,s.figmaBasicsExperiment=r?.track_tags?.figma_basics_experiment,f&&(s.loadID=f),s.fileIsIncremental=!!a.h3O?.isIncrementalSession(),s.fileIsValidatingIncremental=!!a.h3O?.isValidatingIncremental(),s};function b(e,r){return e===l._Y.SLIDES&&"fullscreen"===r?{slide_view:a.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()?"ssv":"grid"}:{}}function v(){(0,i.Pg)()}let T=(0,u.n)((e,r,n,a={},o)=>{let s=g(r,n),l=y(r,s,n,a);(0,i.sx)(e,l,o)}),I=(0,u.n)((e,r,n,a={},o)=>{let s=y(r.key,r,n,a);(0,i.sx)(e,s,o)}),S=(0,u.n)((e,r,n,a)=>{let o=g(r,n),s=y(r,o,n,a);i.az.trackDefinedEvent(e,s)});function w(e,r,n={},a){n.productType=r&&h(r),n.fileKey=r?.key||"new",n.fileParentOrgId=r?.parentOrgId,n.fileTeamId=r?.teamId,n.containingFolderId=r?.folderId,r&&r.fileRepoId&&(n.fileRepoId=r.fileRepoId),(0,i.sx)(e,n,a)}let A="File Browser File Clicked";function C(e,r,n){if(r.state){var a;T(A,e,r.state,{selectedView:"recentsAndSharing"===(a=r.state).selectedView.view?a.selectedView.tab||d.G.RECENTLY_VIEWED:"folder"===a.selectedView.view&&a.selectedView.folderId===a.user?.drafts_folder_id?"drafts":a.selectedView.view,entrypoint:r.entrypoint,planFilterId:r.planFilterId,planFilterType:r.planFilterType,sharedByFilter:r.sharedByFilter,viewMode:r.viewMode},n)}else r.selectedViewName?(0,i.sx)(A,{fileKey:e,selectedView:r.selectedViewName,entrypoint:r.entrypoint},n):(0,i.sx)(A,{fileKey:e,entrypoint:r.entrypoint},n)}function N(e,r,n){(0,i.sx)("file_browser_plan_filter_selected",{planId:e,entryPoint:r,planType:n})}function L(e,r,n={},a){n.fileKeys=r.map(e=>e.key),n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileParentOrgIds.push(e.parent_org_id),n.fileTeamIds.push(e.team_id),n.containingFolderIds.push(e.folder_id)}),(0,i.sx)(e,n,a)}function O(e,r,n,a={},o){let s=r.map(e=>n.fileByKey[e]);a.fileKeys=r,a.fileParentOrgIds=[],a.fileTeamIds=[],a.containingFolderIds=[],s.forEach(e=>{a.fileParentOrgIds.push(e.parent_org_id),a.fileTeamIds.push(e.team_id),a.containingFolderIds.push(e.folder_id)}),(0,i.sx)(e,a,o)}function R(e,r,n={},a){n.fileKeys=[],n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileKeys.push(e.key),n.fileParentOrgIds.push(e.parentOrgId),n.fileTeamIds.push(e.teamId),n.containingFolderIds.push(e.folderId)}),(0,i.sx)(e,n,a)}function P(e,r,n,a){let i=e.map(e=>e.key),o=[],s=[],l=[];i.forEach((e,n)=>{let a=r[n];o.push(a.key),s.push(a.folder_id),l.push(a.team_id)}),O("File Copied",i,n,{copiedFileKeys:o,copiedContainingFolderIds:s,copiedFileTeamIds:l},a)}function D(e,r,n,a,o={},s){let l=a.folders[r];o.folderId=l?.id||r,o.folderTeamId=l?.team_id||n,(0,i.sx)(e,o,s)}function k(e,r,n,a={},o){let s=(0,m._)(r,n);a.teamId=s?.id,a.teamName=s?.name,(0,i.sx)(e,a,o)}function M(e,r,n,a={},o){let s=n.orgById[r];a.orgId=s.id,a.orgName=s.name,(0,i.sx)(e,a,o)}function F(e,r,n={},a){n.userId=r.user&&r.user.id,(0,i.sx)(e,n,a)}let x={[l.vt.FILE]:"fileKey",[l.vt.FILE_REPO]:"fileRepoId",[l.vt.FOLDER]:"folderId",[l.vt.TEAM]:"teamId"};function U(e,r,n={},a){let o=x[r.resource_type];n.roleId=r.id,n[o]=r.resource_id_or_key,r.user_id&&(n.roleUserId=r.user_id),(0,i.sx)(e,n,a)}function B(e,r){(0,i.sx)(e,r)}function V(e){return{canEdit:e.canEdit,fileKey:e.key,productType:h(e)}}var G=(e=>(e.DESIGN="DESIGN",e.WHITEBOARD="WHITEBOARD",e))(G||{});let H="CTA Clicked";function W(e,r,n){let a=r||H;(0,s.Lo)(a,e.text||"",e,{logToConsole:o.NU.NEVER});let l={...e,nonInteraction:0};(0,i.sx)(a,l,{forwardToDatadog:!0,sendAsBeacon:n})}var K=(e=>(e.NOT_POPULATED="not_populated",e.POPULATED_INCOMPLETE="populated_incomplete",e.POPULATED_COMPLETE="populated_complete",e))(K||{});function Y(e,r){let n={...e,nonInteraction:0};(0,i.sx)("Input Blurred",n,r)}function $(e,r={}){(0,i.sx)("Context Viewed",e,{forwardToDatadog:!0,...r})}let j="User Submits Reupgrade Request",z=5e3},328099:(e,r,n)=>{n.d(r,{fG:()=>h,gY:()=>p,gp:()=>m});var a=n(411855),i=n(846288),o=n(33011),s=n(314540),l=n(940795),c=n(269049),d=n(662750),u=n(178380);function m(e){switch(e.type){case d.n.HubFile:return e.template.id;case d.n.TeamTemplate:return e.template.file_key;case d.n.TeamTemplateLg:return e.template.fileKey;default:return(0,i.xb)(e)}}function p(e){switch(e.type){case d.n.HubFile:return(0,u.a6)(e.template).name;case d.n.TeamTemplate:case d.n.TeamTemplateLg:return e.template.name;default:return(0,i.xb)(e)}}function h(){let e=(0,l.yN)({migrationGroup:c.L.GROUP_3,component:"useGetGenericTemplateDisplayProps",attribute:"imgUrl",legacy:(e,r)=>r?.img_url,migrated:(e,r)=>r?.imgUrl||void 0}),r=(0,l.dh)({migrationGroup:c.L.GROUP_3,component:"useGetGenericTemplateDisplayProps"});return(0,a.useCallback)(n=>{let a=m(n),l=p(n),c=function(e){switch(e.type){case d.n.HubFile:return(0,u.a6)(e.template).description;case d.n.TeamTemplate:case d.n.TeamTemplateLg:return e.template.description;default:return(0,i.xb)(e)}}(n),{type:h,template:_}=n;switch(h){case d.n.HubFile:return{imageUrl:_.thumbnail_url||void 0,clientMeta:_.client_meta,thumbnailIsSet:!!_.thumbnail_is_set,isWhiteboard:_.viewer_mode===s.y4.WHITEBOARD,name:l,description:c,hubFileId:_.id,publishers:_.community_publishers?.accepted||[],primaryKey:a,duplicateLink:`${window.location.origin}/community/file/${_.id}/duplicate`,viewSourceFileUrl:null,resizedThumbnailUrls:_.resized_thumbnail_urls,libraryKey:_.library_key};case d.n.TeamTemplate:{let n=_.published_by_user?[{name:_.published_by_user.handle,img_url:_.published_by_user.img_url}]:r?[{name:r,img_url:e}]:[];return{imageUrl:_.signed_thumbnail_url,clientMeta:_.client_meta,thumbnailIsSet:!!_.has_custom_thumbnail,isWhiteboard:!0,name:l,description:c,publishers:n,primaryKey:a,duplicateLink:`${window.location.origin}/new/template/${_.file_key}`,viewSourceFileUrl:`/file/${_.file_key}`,libraryKey:_.library_key}}case d.n.TeamTemplateLg:{let n=_.publishedByUserNullable?[{name:_.publishedByUserNullable.handle,img_url:_.publishedByUserNullable.imgUrl}]:r?[{name:r,img_url:e}]:[];return{imageUrl:_.signedThumbnailUrl,clientMeta:_.checkpointClientMeta,thumbnailIsSet:_.hasCustomThumbnail,isWhiteboard:_.editorType===s._Y.WHITEBOARD,name:l,description:c,publishers:n,primaryKey:a,duplicateLink:`${window.location.origin}/new/template/${_.fileKey}`,viewSourceFileUrl:`/file/${_.fileKey}`,libraryKey:(0,o.l)(_.libraryKey)}}default:(0,i.xb)(h)}},[e,r])}},31393:(e,r,n)=>{n.d(r,{$3:()=>es,GT:()=>eR,Gc:()=>eM,Gg:()=>ex,I4:()=>eF,JI:()=>ee,OL:()=>eA,Ww:()=>eu,ZG:()=>ev,ZW:()=>et,bD:()=>j,b_:()=>eN,dm:()=>eD,go:()=>ec,gp:()=>ew,kl:()=>er,lu:()=>eO,mu:()=>eT,oE:()=>eC,t:()=>eI,wI:()=>el,yn:()=>eS,z$:()=>ea});var a=n(411855),i=n(188507),o=n(720125),s=n(834825),l=n(236891),c=n(217950),d=n(805014),u=n(851169),m=n(194812),p=n(777535),h=n(550495),_=n(885123),g=n(841962),f=n(875877),E=n(728722),y=n(736942),b=n(94489),v=n(747484),T=n(550479),I=n(653798),S=n(402985),w=n(677840),A=n(76265),C=n(717288),N=n(563846),L=n(206908),O=n(190500),R=n(886231),P=n(644392),D=n(698787),k=n(627254),M=n(183739),F=n(841924),x=n(6253),U=n(660401),B=n(60462),V=n(699171),G=n(995573),H=n(313761),W=n(626614),K=n(498913),Y=n(416062);function $(e,r){let n="unknown";e?"string"==typeof e?n=e:"message"in e&&(n=e.message):n="no error message",(0,I.x1)("Autosave",n,{message:r})}function j(){return 7776e6}async function z(e,r,n,a){let i=a.objectStore(H.Sp),o=await i.index(H.SW).get([e,r,n]);return o&&o.id?{id:o.id,...o}:void 0}async function q(e,r,n,a){let i=await z(e,r,n,a);return i?.id}async function Z(e,r,n){let a=e.objectStore(H.Sp),i=e.objectStore(H.jP),o=e.objectStore(H.DV),s=e.objectStore(H.w8),l=[];for(let e of n){let r=await a.index(H.SW).get([e.userID,e.fileKey,e.sessionID]);r&&r.id&&l.push(r)}if(0===l.length)return await e.done,{changesByNode:new Map,referencedNodeMap:new Map,fileVersion:-1};l.sort((e,r)=>r.fileVersion-e.fileVersion);let c=l[0],u=new Map,m=new Map;for(let e of(await i.getAll((0,H.iM)(c.id))))u.set(e.nodeID,[e.changes,e.snapshots]);for(let e of(await s.getAll((0,H.iM)(c.id))))m.set(e.nodeID,e.buffer);let p=c.lastUpdatedAt;for(let e of l.slice(1)){let r=e.fileVersion===c.fileVersion;if(r){for(let r of(await i.getAll((0,H.iM)(e.id)))){let e=u.get(r.nodeID),n=r.changes,a=r.snapshots;if(e){let[i,o]=e;n=d.i6g.mergeMultiplayerMessages(i,r.changes,c.fileVersion),a={...o,...r.snapshots}}u.set(r.nodeID,[n,a]),i.put({editorSessionID:c.id,nodeID:r.nodeID,changes:n,snapshots:a}).catch(e=>$(e,"mergeAndClaimChanges: updating session IDs"))}for(let r of(await s.getAll((0,H.iM)(e.id))))m.set(r.nodeID,r.buffer),s.put({editorSessionID:c.id,nodeID:r.nodeID,buffer:r.buffer}).catch(e=>$(e,"mergeAndClaimChanges: merge referenced nodes"));p=Math.max(p,e.lastUpdatedAt)}i.delete((0,H.iM)(e.id)).catch(e=>$(e,"mergeAndClaimChanges: node changes for session")),s.delete((0,H.iM)(e.id)).catch(e=>$(e,"mergeAndClaimChanges: referenced nodes for session"));let n=await o.openCursor((0,H.iM)(e.id));for(;n;)r&&o.put({...n.value,editorSessionID:c.id}).catch(e=>$(e,"mergeAndClaimChanges: merge images")),n.delete().catch(e=>$(e,"mergeAndClaimChanges: remove old image")),n=await n.continue();a.delete(e.id).catch(e=>$(e,"mergeAndClaimChanges: delete old session id"))}return await a.put({...c,sessionID:r,lastUpdatedAt:p}),(0,H.dU)(e),await e.done,(0,I.Lo)("Autosave",`Found claimed autosave changes from ${l.length} sessions`,void 0,{logToConsole:d.NUh.ALWAYS}),{changesByNode:u,referencedNodeMap:m,fileVersion:c.fileVersion}}async function X(e,r){let n=(0,H.Zt)(e,r),a=[];return await k.xK.timeAsync("checkForAutosave",async()=>{let e=await (0,H.Z4)();if(!e)return;let r=e.transaction(H.Sp),i=r.objectStore(H.Sp),o=await i.index(H.SW).openCursor(n);for(;o;)a.push(o.value),o=await o.continue();await r.done}),a.length>0&&(0,I.ED)("Autosave","Found auto-saved data for this file",void 0,{logToConsole:d.NUh.ALWAYS}),a}async function J(e){return await k.xK.timeAsync("filterAutosaveSessions",async()=>{let r=await Promise.all(e.map(e=>(0,Y.mc)(e))),n=Date.now()-j(),a=e.filter((e,a)=>!r[a]&&e.lastUpdatedAt>n);return 0===a.length&&(0,I.Lo)("Autosave","Changes not available or already claimed by another tab",void 0,{logToConsole:d.NUh.ALWAYS}),a})}let Q=null;async function ee(e){async function r(){for(let e of["figma-autosave-v2","figma-autosave-darklaunch-v2"])(0,m.MR)(e).catch(()=>{});try{let r=await ec((0,H.cu)(e),e=>Date.now()-e.lastUpdatedAt<j());if(r.length>0){let e=r.map(e=>e.lastUpdatedAt);(0,p.sx)("autosave garbage collect",{numSessions:r.length,localSessionCount:r.reduce((e,r)=>e+(r.isLocalFile?1:0),0),nodeCount:r.reduce((e,r)=>e+r.nodeCount,0),imageCount:r.reduce((e,r)=>e+r.imageCount,0),referencedNodeCount:r.reduce((e,r)=>e+r.referencedNodeCount,0),oldestSession:Math.min(...e),newestSession:Math.max(...e)})}}catch(e){(0,W.Lf)("Failed to garbage collect autosave changes",e)}(0,B.L_)()}Q||(Q=r()),await Q}async function et(e){let r={};for(let n of e){let e=await er(n);(e.unsyncedFiles.length>0||e.newFiles.length>0)&&(r[n]=e)}return r}async function er(e){let r=await (0,H.Z4)();if(!r)return{unsyncedFiles:[],newFiles:[],nextGarbageCollectionTimestamp:-1};let{editorSessionRowsWithChanges:n,newFilesByKey:a,newFilesWithChanges:i}=await en(r,e),s=new Set,l=new Map,c=-1,d=[];for(let r of n)s.has(r.fileKey)||d.push((0,Y.mc)({userID:e,fileKey:r.fileKey,sessionID:r.sessionID}).then(e=>{if(!e){s.add(r.fileKey);let e=Math.max(l.get(r.fileKey)||0,r.lastUpdatedAt);l.set(r.fileKey,e),c=-1===c?r.lastUpdatedAt:Math.min(c,r.lastUpdatedAt)}}));return await Promise.all(d),{unsyncedFiles:Array.from(s).filter(e=>!(0,o.T)(e)).map(e=>({type:"autosave-file",fileKey:e,lastUpdatedAt:l.get(e)})),newFiles:Array.from(s).filter(e=>(0,o.T)(e)&&a.has(e)).map(e=>{let r=a.get(e);return eo(r,l,i.has(r.fileKey))}).filter(({hasChanges:e})=>e),nextGarbageCollectionTimestamp:c}}async function en(e,r){let n=e.transaction([H.Sp,H.jP,H.JR]),a=Error("original async stack");n.done.catch(e=>{e.cause=a,(0,T.$D)(c.e.UNOWNED,e)});let i=n.objectStore(H.Sp),o=await i.index(H.SW).getAll((0,H.cu)(r)),s=[],l=n.objectStore(H.jP);for(let e of o)if(await l.count((0,H.iM)(e.id))>0){for(let r of(await l.getAll((0,H.iM)(e.id))))if(!((0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation)||d.i6g&&!d.i6g.changesAreOnlyNewFileSystemChanges(r.changes,e.fileVersion)){s.push(e);break}}let u=new Map,m=n.objectStore(H.JR),p=new Set;for(let e of(await m.getAll((0,H.cu)(r)))){u.set(e.fileKey,e);let r=o.find(r=>r.fileKey===e.fileKey);if(r){let n=await l.getAll((0,H.iM)(r.id));(eh(e.fileKey,n)||e.hasChangedMetadata)&&p.add(e.fileKey)}}return{editorSessionRowsWithChanges:s,newFilesByKey:u,newFilesWithChanges:p}}async function ea(e){let r=await er(e);return r.unsyncedFiles.length>0||r.newFiles.length>0}async function ei(e){if((0,W.rQ)())return[];let r=await (0,H.Z4)();if(!r)return[];let{editorSessionRowsWithChanges:n,newFilesByKey:a,newFilesWithChanges:i}=await en(r,e),o=new Set,s=new Map;for(let e of n)o.add(e.fileKey),s.set(e.fileKey,Math.max(s.get(e.fileKey)||0,e.lastUpdatedAt));let c=Array.from(o).map(e=>{let r=a.get(e);return r?eo(r,s,i.has(r.fileKey)):null}).filter(l.Vq);return eb?.fileCreationManager?.updateNewFileInfoFromFiles(c),c}function eo(e,r,n){return{type:"new-autosave-file",fileKey:e.fileKey,editorType:e.editorType,name:e.name,creatorId:e.userID,createdAt:e.createdAt,lastUpdatedAt:r.get(e.fileKey),orgId:e.orgID??null,hasChanges:n,hasChangedMetadata:e.hasChangedMetadata??!1}}async function es(e,r){if((0,W.rQ)())return;let n=async(e,n)=>{let a=n.objectStore(H.jP);return eh(r,await a.getAll((0,H.iM)(e.id)))};await ec((0,H.Zt)(e,r),n)}async function el(e,r){await ec((0,H.cu)(e),e=>!r.includes(e.fileKey))}async function ec(e,r){let n=await (0,H.Z4)();if(!n)return[];let a=n.transaction([H.Sp,H.jP,H.DV,H.w8,H.JR],"readwrite"),i=Error("original async stack");a.done.catch(e=>{e.cause=i,(0,T.$D)(c.e.UNOWNED,e)});let s=a.objectStore(H.Sp),l=a.objectStore(H.jP),d=a.objectStore(H.DV),u=a.objectStore(H.w8),m=a.objectStore(H.JR),p=!1,h=await s.index(H.SW).getAll(e),_=[],g=[];for(let e of h)if(!(r&&await r(e,a))){let[r,n,a]=await Promise.all([l.count((0,H.iM)(e.id)),d.count((0,H.iM)(e.id)),u.count((0,H.iM)(e.id))]);g.push({userID:e.userID,fileKey:e.fileKey,sessionID:e.sessionID,isLocalFile:(0,o.T)(e.fileKey),nodeCount:r,imageCount:n,referencedNodeCount:a,lastUpdatedAt:e.lastUpdatedAt}),s.delete(e.id).catch(e=>$(e,"deleteAutosaveDataForSessions: delete editor session")),l.delete((0,H.iM)(e.id)).catch(e=>$(e,"deleteAutosaveDataForSessions: delete node changes")),d.delete((0,H.iM)(e.id)).catch(e=>$(e,"deleteAutosaveDataForSessions: delete images")),u.delete((0,H.iM)(e.id)).catch(e=>$(e,"deleteAutosaveDataForSessions: delete referenced nodes")),p=!0,(0,o.T)(e.fileKey)&&_.push({localFileKey:e.fileKey,userID:e.userID})}for(let{localFileKey:e,userID:r}of _)0===await s.index(H.SW).count((0,H.Zt)(r,e))?await m.delete((0,H.Zt)(r,e)):(0,W.W6)("Local file has remaining sessions");return await s.count()===0&&(await l.count()>0&&((0,W.W6)("Found leftover node changes in IDB"),l.delete((0,H.BE)()).catch(e=>$(e,"deleteAutosaveDataForSessions: delete leftover node changes"))),await d.count()>0&&((0,W.W6)("Found leftover images in IDB"),d.delete((0,H.IE)()).catch(e=>$(e,"deleteAutosaveDataForSessions: delete leftover images"))),await u.count()>0&&((0,W.W6)("Found leftover referenced node buffers in IDB"),u.delete((0,H.Ab)()).catch(e=>$(e,"deleteAutosaveDataForSessions: delete leftover referenced nodes")))),(0,H.dU)(a),await a.done,p&&(0,K.HZ)(),g}async function ed(e,r){await r.objectStore(H.jP).count((0,H.iM)(e))===0&&await r.objectStore(H.DV).count((0,H.iM)(e))===0&&await r.objectStore(H.w8).count((0,H.iM)(e))===0&&r.objectStore(H.Sp).delete(e).catch(e=>$(e,"deleteEditorSessionRowIfUnused: delete editor session"))}async function eu(e,r){let n=await (0,H.Z4)();if(!n)throw Error("Could not open autosave data");let a=n.transaction([H.Sp,H.jP,H.DV,H.w8]),i=a.objectStore(H.Sp),o=a.objectStore(H.jP),s={};for(let e of(await i.getAll()))s[e.id]=e,s[e.id].changes={},s[e.id].snapshotsByNodeField__DEPRECATED={};for(let n of(s.unknown={changes:{},snapshotsByNodeField__DEPRECATED:{}},(await o.getAll()).slice(0,e)))n.editorSessionID in s?(s[n.editorSessionID].changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,s[n.editorSessionID].fileVersion,!!r)),s[n.editorSessionID].snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots):(s.unknown.changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,1,!!r)),s.unknown.snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots);return await a.done,s}async function em(e){let{transaction:r,commitPolicy:n,userID:a,fileKey:i,fileVersion:s,sessionID:l,oldSessionID:c,pendingChanges:u,pendingImages:m,pendingReferencedNodes:p,reason:h,isFirstCommitOfAutosaveSession:_}=e,f=r.objectStore(H.Sp),E=r.objectStore(H.jP),y=r.objectStore(H.DV),b=r.objectStore(H.w8),v=await z(a,i,c,r),T=0;v&&(T=(v.offlineEditingTime||0)+(_?0:Date.now()-v.lastUpdatedAt));let I=v?.id,w={userID:a,fileKey:i,sessionID:l,lastUpdatedAt:Date.now(),releaseTag:(0,g.Ay)().release_git_tag||"",fileVersion:s,lastCommitReason:h,offlineEditingTime:T,originalTrackingSessionId:(0,S.f)()};for(let e of(null==I?I=await f.add(w):(n===d.W2B.REPLACE_CHANGES&&(E.delete((0,H.iM)(I)).catch(e=>$(e,"commitChanges: replace node changes")),b.delete((0,H.iM)(I)).catch(e=>$(e,"commitChanges: replace referenced nodes"))),f.put({id:I,...w}).catch(e=>$(e,"commitChanges: update session"))),u))e.changes?E.put({editorSessionID:I,nodeID:e.nodeID,changes:e.changes}).catch(e=>$(e,"commitChanges: put node changes")):E.delete([I,e.nodeID]).catch(e=>$(e,"commitChanges: clear node changes"));for(let e of m)if(await y.count([I,e])===0){let r=d.Bko.getCompressedImage(e);r&&y.add({editorSessionID:I,hash:e,blob:r}).catch(e=>$(e,"commitChanges: add images"))}for(let e of p)b.add({editorSessionID:I,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>$(e,"commitChanges: add referenced nodes"));let A=await E.count((0,H.iM)(I));return 0===A&&(await y.delete((0,H.iM)(I)),await b.delete((0,H.iM)(I))),await ed(I,r),(0,H.dU)(r),await r.done,(0,o.T)(i)&&(0,K.HZ)(),A}async function ep(e,r,n){(0,I.Lo)("Autosave","assigning file key for new file",{localFileKey:r,newFileKey:n}),await (0,H.DB)([H.Sp,H.JR],async a=>{let i=a.objectStore(H.Sp);(await i.index(H.SW).getAll((0,H.Zt)(e,r))).map(e=>{e.fileKey=n,i.put(e)}),a.objectStore(H.JR).delete((0,H.Zt)(e,r))},"readwrite"),(0,K.HZ)()}function eh(e,r){if(!(0,o.T)(e))return r.length>0;if(r.length>2)return!0;for(let{nodeID:e}of r)if(!["0:0","0:1"].includes(e))return!0;return!1}class e_{constructor(){this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}onCommitEvent(){this.nextEventPromiseResolve(),this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}waitForNextCommit(){return this.nextEventPromise}}class eg{constructor(e,r){this.userID=e,this._state={type:"connecting"},this._fileKey="",this._hasReportedError=!1,this.fileCreationManager=null,this.fileKey=r,(0,W.rQ)()?(this._sessionsToRestore=Promise.resolve([]),this._state={type:"terminated"}):(0,o.T)(r)?this._sessionsToRestore=X(e,r):this._sessionsToRestore=X(e,r).then(e=>J(e))}get fileKey(){return this._fileKey}get managerState(){return this._state.type}session(){return"connected"===this._state.type?this._state.session:null}set fileKey(e){this._fileKey=e;let r=(0,o.T)(e)?e:null;f.atomStore.set(G.h,r)}async assignFileKeyForLocalFile(e){if("connected"!==this._state.type){"connecting"===this._state.type&&(0,W.W6)("Still connecting");return}try{await this._state.session.enqueueAssignFileKeyForLocalFile(e,()=>{this.fileKey=e,this.fileCreationManager=null})}catch(e){this.terminateDueToError("unable to update file key",!0)}}async terminateAndWaitForCleanup(){let e="connected"===this._state.type?this._state.session:null;this._state={type:"terminated"},f.atomStore.set(G.h,null),await e?.destroy().catch(()=>W.W6("Failed to destroy autosave session"))}terminateDueToError(e,r){(0,I.xi)("Autosave","autosave disabled",{message:e}),r&&(0,W.W6)(e);let n="connected"===this._state.type;this._hasReportedError||((0,p.sx)("autosave_disabled",{message:e,hasSessionInProgress:n},{forwardToDatadog:!0}),this._hasReportedError=!0),this.terminateAndWaitForCleanup().catch(r=>(0,W.W6)("Failed to terminate autosave",{message:e,error:r.message}))}async onConnect(e){if("connecting"!==this._state.type)return;try{await (0,H.Fy)()}catch(e){(0,I.Lo)("Autosave","IDB is not available in the current browser session.",void 0,{logToConsole:d.NUh.ALWAYS}),(0,p.sx)("autosave_db_failure",{message:e.message}),this.terminateDueToError("unable to open DB",!1);return}let r=new b.M4;r.start();let n=await this._sessionsToRestore;(0,o.T)(this.fileKey)&&(n.length>1?((0,W.W6)("Local file has multiple sessions",{sessionCount:n.length,sessionIds:n.map(e=>e.sessionID).slice(0,5).join(", ")}),this.terminateDueToError("Local file has multiple sessions",!1)):1===n.length&&0!==n[0].sessionID&&((0,W.W6)("Local file with changes from non-zero session",{existingSessionId:n[0].sessionID}),this.terminateDueToError("Local file with changes from non-zero session",!1)));let a=await (0,Y.A2)({userID:this.userID,fileKey:this.fileKey,sessionID:e});if(!a){this.terminateDueToError("unable to acquire lock",!0);return}this._state={type:"connected",session:new ey(e,this,r,n,a)}}async onConnectNewFile(e){let r=this.fileKey;if((0,o.T)(r))try{await (0,H.DB)([H.JR],async n=>{let a=n.objectStore(H.JR);if(await a.get((0,H.Zt)(this.userID,r)))return;let i={fileKey:r,userID:this.userID,editorType:e.editorType,name:e.fileName??(0,A.t)("fullscreen.fullscreen_view_selector.untitled"),createdAt:Date.now(),orgID:e.org_id};await a.put(i)},"readwrite"),this.fileCreationManager&&(0,W.W6)("File creation manager already exists",{fileKey:r}),this.fileCreationManager=new eE(r,e)}catch(e){this.terminateDueToError("unable to set new file info",!0);return}await this.onConnect(0)}}async function ef(e,r,n){if((0,o.T)(r)&&e)try{await (0,H.DB)([H.JR],async a=>{let i=a.objectStore(H.JR),o=await i.get((0,H.Zt)(e,r));o&&await i.put({...o,name:n,hasChangedMetadata:!0})},"readwrite"),(0,K.HZ)()}catch(e){(0,T.$D)(c.e.SCENEGRAPH_AND_SYNC,Error("unable to update new file info"))}}class eE{constructor(e,r){this._pendingRealFileKey=null,this.fileKey=e,this._newFileInfo=r}get newFileInfo(){return this._newFileInfo}updateNewFileInfo(e){this._newFileInfo={...this._newFileInfo,...e}}updateNewFileInfoFromFiles(e){let r=e.find(e=>e.fileKey===this.fileKey);if(r){let e=(0,U.B)(r,this.newFileInfo.openNewFileIn);this.updateNewFileInfo(e)}}get pendingRealFileKey(){return this._pendingRealFileKey}assignPendingRealFileKey(e){this._pendingRealFileKey=e,K.hp.sendToAllTabs(K.m6,{localFileKey:this.fileKey,realFileKey:e})}}class ey{constructor(e,r,n,a,i){this.sessionID=e,this.manager=r,this.restoreTimer=n,this.changesToRestore=a,this.webLock=i,this.transactionQueue=new V.O,this.commitEventListener=new e_,this.restoring=!1,this.consecutiveCommitsAddingChanges=0,this.activityLogger=navigator.storage?.estimate?new B.hS:null,this.restoreAnalytics={hadChangesToRestore:!1,fileKey:"",time:0,timeToStartSession:0,timeToApply:0,timeToSync:0,sessionsCheckTime:0,numberOfBytes:0,numberOfNodes:0,numberOfReferencedNodes:0,numberOfRestoredReferencedNodes:0,numberOfSessions:0,numberOfImages:0,neededToMigrate:!1,persistentStorage:!1,changesAreAllDerivedData:!1,nodeFields:[],stagingDump:void 0,lastUpdatedAt:void 0,releaseTag:void 0,isLocalFile:!1,offlineEditingTime:void 0,lastCommitReason:void 0,originalTrackingSessionId:void 0,storageUsageBytes:void 0,storageQuotaBytes:void 0,isIncremental:!1},this.reportedFullQueue=!1,this.reportedStorageError=!1,this.hasCommitted=!1,this.restoreAnalytics.timeToStartSession=this.restoreTimer.getElapsedTime()}getActivityLogger(){return this.activityLogger}async destroy(){await this.webLock.release().catch(e=>$(e,"AutosaveSession.destroy: releasing session lock"))}sessionTransaction(e,r,n,a){let i=(0,H.DB)(r,n,a);return i.catch(r=>{(0,p.sx)("autosave_transaction_failure",{transactionName:e,message:r.message}),this.manager.terminateDueToError(`${e} transaction failed`,!1)}),i}readyToAcceptChanges(){let e=this.transactionQueue.length>=10;return e&&!this.reportedFullQueue&&(this.reportedFullQueue=!0,(0,W.W6)("Autosave transaction queue is backed up.")),!this.restoring&&!e}hasOngoingCommitTask(){return!this.transactionQueue.isComplete()}async tryToFlushAutosave(){this.readyToAcceptChanges()&&(d.i6g.flushAutosave(),await this.transactionQueue.waitForCompletion())}async enqueueAutosaveCommit(e){await this.transactionQueue.enqueue(()=>this.commitAutosave(e))}async commitAutosave(e){let{changes:r,commitPolicy:n,fileVersion:a,fileKey:i,newSessionID:o,numberOfUncleanRegisters:s,reason:l}=e;if(!this.readyToAcceptChanges()){this.manager.terminateDueToError("Committing, but not ready to accept changes",!0);return}if(o<0){this.manager.terminateDueToError("Unexpected sessionID < 0",!0);return}if(i&&i!==this.manager.fileKey){(0,W.W6)("Web file key out of sync with fullscreen file key",{"web file key":this.manager.fileKey,"fullscreen file key":i}),this.manager.terminateDueToError("Web file key out of sync with fullscreen file key",!1);return}this.activityLogger?.recordAutosaveCommit(this.manager.fileKey,this.manager.userID,this.sessionID,e);let c=this.sessionID,u=null;if(o!==this.sessionID){u=this.webLock,this.sessionID=o;let e=await (0,Y.A2)({userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID});if(!e){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=e}if(!(0,Y.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let m=r.changedNodes.length,p=r.changedNodes.map(e=>({nodeID:e.nodeID,changes:e.changes})).concat(r.clearedNodes.map(e=>({nodeID:e,changes:null,snapshots:null}))),h=[];for(let e of r.referencedNodes)h.push({nodeID:e.nodeID,buffer:e.changes});let g=new Set;for(let e of r.imageHashes)g.add(e);let f=await this.sessionTransaction("commit",[H.Sp,H.jP,H.DV,H.w8],async e=>await em({transaction:e,commitPolicy:n,userID:this.manager.userID,fileKey:this.manager.fileKey,fileVersion:a,oldSessionID:c,sessionID:this.sessionID,pendingChanges:p,pendingImages:g,pendingReferencedNodes:h,reason:l,isFirstCommitOfAutosaveSession:!this.hasCommitted}),"readwrite");this.hasCommitted=!0;let E={stored_node_changes:f,unclean_registers:s,changed_nodes:m,cleared_nodes:r.clearedNodes.length,referenced_nodes:h.length,pending_images:g.size,commit_policy:d.W2B[n],session_id:this.sessionID,new_session_id:o,commit_reason:void 0!==l?d.uXP[l]:void 0,file_key:i,manager_file_key:this.manager.fileKey};if((0,I.Lo)("Autosave","commit completed",E),(0,O.ds)("autosave_commit_completed",i,_.D.getState(),E),!this.reportedStorageError&&void 0!==s&&s!==f){if(f>0&&0===s){let e=e=>{if(!(e.length>5))return e;{let r=e.slice(0,5);return r.push("..."),r}},n=await eu(5,!0);(0,I.x1)("Autosave","Dumping autosave since we expect IDB to be empty",{debug:n,changedNodes:e(r.changedNodes.map(e=>e.nodeID)),clearedNodes:e(r.clearedNodes),referencedNodes:e(r.referencedNodes.map(e=>e.nodeID)),imageHashes:e(r.imageHashes),currentSessionID:d.h3O.currentSessionID(),commitQueueLength:this.transactionQueue.length}),this.manager.terminateDueToError("Expected IDB to be empty after synchronizing with multiplayer",!0)}else f>s?this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has more)",!0):f<s&&this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has less)",!0);this.reportedStorageError=!0}null!=u&&u.release().catch(e=>$(e,"commitAutosave: release lock")),this.commitEventListener.onCommitEvent(),n===d.W2B.ADD_CHANGES?(this.consecutiveCommitsAddingChanges++,this.consecutiveCommitsAddingChanges>=4&&(0,w.YQ)({id:K.Cr})):this.consecutiveCommitsAddingChanges=0}async restoreAutosaveIfNeeded(){if(d.i6g.fileIsReadOnly())return;this.restoreAnalytics.fileKey=this.manager.fileKey,this.restoreAnalytics.isLocalFile=(0,o.T)(this.manager.fileKey),this.restoring=!0;let e=function(){if(!v.Ay.chrome||!navigator.storage?.persist)return Promise.resolve(!1);let e=new Promise(e=>setTimeout(()=>e(!1),200));return Promise.race([navigator.storage.persist(),e])}(),r=(0,W.U4)(),n=this.changesToRestore;if(this.changesToRestore=[],this.restoreAnalytics.sessionsCheckTime=this.restoreTimer.getElapsedTime(),this.restoreAnalytics.numberOfSessions=n.length,n.length>0){let e=n[0];this.restoreAnalytics.lastUpdatedAt=e.lastUpdatedAt,this.restoreAnalytics.offlineEditingTime=e.offlineEditingTime,this.restoreAnalytics.originalTrackingSessionId=e.originalTrackingSessionId,this.restoreAnalytics.lastCommitReason=e.lastCommitReason?d.uXP[e.lastCommitReason]:void 0,this.restoreAnalytics.releaseTag=e.releaseTag,await this.restoreChangesForSessionRows(n)}this.restoreAnalytics.persistentStorage=await e;let{usageBytes:a,quotaBytes:i}=await r;this.restoreAnalytics.storageUsageBytes=a,this.restoreAnalytics.storageQuotaBytes=i,this.restoreAnalytics.isIncremental=d.h3O.isIncrementalSession(),this.restoreTimer.stop(),this.restoreAnalytics.time=this.restoreTimer.getElapsedTime(),(0,O.ds)("autosave_restore_on_load",this.restoreAnalytics.fileKey,_.D.getState(),this.restoreAnalytics,{forwardToDatadog:!0}),this.restoring=!1}async restoreChangesForSessionRows(e){if(!(0,Y.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let{changesByNode:r,referencedNodeMap:n,fileVersion:a}=await this.sessionTransaction("restore",[H.Sp,H.jP,H.DV,H.w8],async r=>await Z(r,this.sessionID,e),"readwrite"),i=r.size>0;for(let e of(i?((0,o.T)(this.manager.fileKey)||await (0,x.m)(this.manager.fileKey,"Offline sync","Before syncing changes",_.D.dispatch).catch(e=>(0,W.W6)("Failed to create before savepoint",{status:e.status,message:e.data?.message})),(0,I.Lo)("Autosave","Restoring auto-saved data",void 0,{logToConsole:d.NUh.ALWAYS}),await this.restoreChanges(r,n,a)):(0,I.Lo)("Autosave","Changes are empty!",void 0,{logToConsole:d.NUh.ALWAYS}),this.commitEventListener.waitForNextCommit().then(()=>{K.hp.sendToOtherTabs(K.a)}).catch(e=>$(e,"restoreChangesForSessionRows: waitForNextCommit")),this.restoreAnalytics.hadChangesToRestore=i,this.restoreAnalytics.numberOfBytes=0,this.restoreAnalytics.numberOfNodes=r.size,this.restoreAnalytics.numberOfReferencedNodes=n.size,r.values()))this.restoreAnalytics.numberOfBytes+=e.length}async restoreChanges(e,r,n){let a=Array.from(e.entries()).sort(([e,r],[n,a])=>e<n?-1:1),i=(0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation&&a.every(([e,[r]])=>d.i6g.changesAreOnlyNewFileSystemChanges(r,n));for(let[e,[r,i]]of a)d.i6g.loadAutosavedNodeChanges(e,r,i,n);if(this.restoreAnalytics.changesAreAllDerivedData=d.i6g.changesAreAllDerivedData(),this.restoreAnalytics.nodeFields=d.i6g.restoredNodeFieldNames(),this.restoreAnalytics.neededToMigrate=d.i6g.currentFileVersion()>n,(0,P.Ff)()){(0,O.ds)("autosave_load_containing_pages_start",this.manager.fileKey,_.D.getState(),{node_count:e.size,fileKey:this.manager.fileKey});let r=performance.now(),n=new Set(e.keys());for(let e of d.i6g.getParentIndexChanges())n.add(e);await (0,P.Xl)(n),(0,O.ds)("autosave_load_containing_pages_end",this.manager.fileKey,_.D.getState(),{node_count:e.size,timeElapsed:performance.now()-r,fileKey:this.manager.fileKey})}let s=d.i6g.getImagesUsedInAutosavedChanges().split(" ");this.restoreAnalytics.numberOfImages=await this.restoreImagesIfAvailable(s);let l=this.restoreAvailableReferencedNodes(r);d.i6g.migrateAndSetAutosaveChanges(l,n),u.l7.autosave("autosave",()=>d.i6g.applyAutosavedChanges()),this.restoreAnalytics.timeToApply=this.restoreTimer.getElapsedTime(),(0,I.Lo)("Autosave","Successfully applied auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS});let c=()=>{_.D.dispatch(N.Q.enqueueFront({notification:{type:C._.AUTOSAVE_CHANGES_RESTORED,message:"Your offline changes were synced"}})),(0,I.Lo)("Autosave","Successfully synced auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS})};if((0,o.T)(this.manager.fileKey))(0,D.l)().then(()=>{this.manager.fileKey!==_.D.getState().openFile?.key||i||c()});else{let e=async()=>{await (0,D.l)(),this.restoreAnalytics.timeToSync=this.restoreTimer.getElapsedTime(),await (0,x.m)(this.manager.fileKey,"Offline sync","After syncing changes",_.D.dispatch).catch(e=>{(0,O.ds)("autosave_skip_after_checkpoint",this.manager.fileKey,_.D.getState(),{error:e.data?.message}),(0,W.W6)("Failed to create after savepoint",{status:e.status,message:e.data?.message})}),i||c()};(0,g.kc)().autosave_dont_wait_for_sync?e():await e()}}async restoreImagesIfAvailable(e){let r=0;return await this.sessionTransaction("restore images",[H.Sp,H.DV],async n=>{let a=await this.currentEditorSessionID(n);if(!a)return;let i=n.objectStore(H.DV);for(let n of e){let e=await i.get([a,n]);e&&(d.i6g.restoreImageBytes(n,e.blob),r++)}await n.done}),r}restoreAvailableReferencedNodes(e){let r=[];for(let[n,a]of e)d.i6g.restoreReferencedNodeFile(n,a),r.push(n);return r}currentEditorSessionID(e){return q(this.manager.userID,this.manager.fileKey,this.sessionID,e)}async getNodeChangesForSession(){let e=await (0,H.Z4)();if(!e)throw Error("Unable to get DB");let r=e.transaction([H.Sp,H.jP],"readonly"),n=r.objectStore(H.jP),a=await this.currentEditorSessionID(r);return a?await n.getAll((0,H.iM)(a)):[]}async getNodeChangeCount(){return(await this.getNodeChangesForSession()).length}async hasPersistedUserChanges(){let e=await this.getNodeChangesForSession();return eh(this.manager.fileKey,e)}async enqueueAssignFileKeyForLocalFile(e,r){let n=this.manager.fileKey;if(!(0,o.T)(n)){(0,W.W6)("Only local file keys can be reassigned");return}if((0,o.T)(e)){(0,W.W6)("Cannot reassign file key to a local file key");return}await this.transactionQueue.enqueue(async()=>{let a=this.webLock,i=await (0,Y.A2)({userID:this.manager.userID,fileKey:e,sessionID:this.sessionID});if(!i){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=i,await ep(this.manager.userID,n,e),r(),await a?.release()})}}let eb=null;function ev(){return eb}function eT(e,r){if(eb){if(eb.fileKey===e)return(0,I.Lo)("Autosave","Autosave manager already exists"),eb;(0,W.W6)("Manager already exists. Updating file key",{"current fileKey":eb.fileKey,"new fileKey":e}),eb.terminateAndWaitForCleanup(),eb=null}return(0,I.ED)("Autosave","Create autosave manager",{fileKey:e}),eb=new eg(r,e)}function eI(){eS().catch(e=>$(e,"failed to destroy autosave manager"))}async function eS(){if((0,I.ED)("Autosave","Destroy autosave manager"),!eb){(0,I.Lo)("Autosave","No manager to destroy");return}let e=eb;eb=null,await e.terminateAndWaitForCleanup()}function ew(e,{offlineFiles:r}){let n={};for(let a in e){let e=r[a];e&&(n[a]=e)}return n}let eA=F.M4.Query({async fetch({userId:e}){if(!e)return{};let r=await ei(e),n={};for(let e of r)n[e.fileKey]=e;return n}});var eC=(e=>(e.OFFLINE_FILE_TILE="OFFLINE_FILE_TILE",e.EDITOR="EDITOR",e))(eC||{});let eN=F.M4.Mutation(({fileKey:e,name:r,source:n},{atomStore:a,query:i,reduxStore:o})=>{if(a.set(eP,null),!r)return;let s=o.getState().user?.id??null;i.mutate(eA({userId:s}),n=>{let a=n[e];a&&(a.name=r)});let l=eb?.fileCreationManager;return l&&(l.fileKey===e?(l.updateNewFileInfo({fileName:r}),l.pendingRealFileKey&&_.D.dispatch(L.yJ({file:{key:l.pendingRealFileKey,name:r},userInitiated:!0}))):(0,W.W6)("File key in rename mutation does not match current FileCreationManager file key",{mutationFileKey:e,fileCreationManagerFileKey:l.fileKey})),(0,p.sx)("Rename New Autosave File",{source:n,isOffline:!navigator.onLine}),ef(s,e,r)}),eL=(0,f.atom)(e=>{let r=e(R.kS),n={};if(r){let a=e(eA({userId:r}));for(let[e,r]of Object.entries(a?.data??{}))r.hasChanges&&(n[e]=r)}return n}),eO=(0,f.atom)(e=>{let r=e(G.h),n=e(R.kS);if(r&&n){let a=e(eA({userId:n})),i=a?.data??{};if(r in i)return i[r]}return null});function eR(){return f.atomStore.get(eO)}let eP=(0,f.atom)(null);function eD(e){f.atomStore.set(eP,e.fileKey)}let ek=(0,f.atom)({});function eM(e,r){let n=f.atomStore.get(ek);f.atomStore.set(ek,{...n,[e]:r})}function eF(e){let r=(0,i.d4)(r=>!!r.autosave.unclaimedFilesWithChangesInIDB.find(r=>r.fileKey===e)),n=(0,h.l)(M.dDF,r?e:"");return r?n:y.Qw.loaded(!1)}function ex(){let e=(0,i.d4)(e=>e.autosave.unclaimedFilesWithChangesInIDB),r=(0,i.d4)(e=>e.autosave.unclaimedFilesCreatedOffline),n=(0,E.p)(M.dDF,a.useMemo(()=>e.map(({fileKey:e})=>({key:e})),[e])),o=a.useMemo(()=>n.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[n]),l=(0,i.d4)(e=>e.fileByKey);return a.useMemo(()=>({unsyncedFiles:(0,s.WI)(e.map(({fileKey:e,lastUpdatedAt:r},n)=>{let a=l[e];return a&&!a.trashed_at&&o[n].unwrapOr(!1)?{type:"autosave-file",fileKey:e,lastUpdatedAt:r,file:a}:null})),localUnsyncedFiles:r}),[e,r,l,o])}(0,f.atom)(e=>{let r={...e(eL)},n=e(eP),a=e(ek),i={};for(let e in r)e in a||(i[e]=r[e]);if(n&&n in i){let e=i[n];i[n]={...e,isRenaming:!0}}return i})},365791:(e,r,n)=>{n.d(r,{X:()=>d});var a=n(265851),i=n(534294),o=n(217699),s=n(736041),l=n(886756),c=n(753236);let d=(0,i.nF)((e,{entity:r,entityType:n,shape:i})=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.className=a.s.hidden.$,l.style.display="none",l.onchange=()=>{let a=l.files;null!==a&&a.length>0&&(e.dispatch(o.s6({entity:r,entityType:n,file:a[0],shape:i||"CIRCLE"})),e.dispatch(s.to({type:c._,showModalsBeneath:!0})))},document.body.appendChild(l),l.click()});(0,i.nF)((e,{team:r})=>{e.dispatch(d({entity:r,entityType:l.ck.TEAM,shape:"SQUARE"}))})},642769:(e,r,n)=>{n.d(r,{Pn:()=>N,Yh:()=>A,iJ:()=>I,JJ:()=>T,Yo:()=>R,mW:()=>S,xQ:()=>C,YL:()=>O});var a=n(411855),i=n(188507),o=n(217950);n(298845),n(850784);var s=n(890882),l=n(841962),c=n(728722),d=n(139879),u=n(736942),m=n(550479);n(863247),n(994987),n(593587),n(479696).T;var p=n(537393),h=n(314540),_=n(183739),g=n(727903);n(313449);var f=n(689965),E=n(45049),y=n(548759),b=n(811567);function v(e,r,n,a){let i=(e===p.Y$.CURRENT?p.Ln:p.SG)(r,b.N_,{renewalTerm:n,unit:a}),[s]=(0,d.mI)(i),l=s.data;if(!l)return(0,m.$D)(o.e.SCALE,Error("Plan renewal modal could not load price information"),{extra:{planKey:r,prices:l}}),{prices:null,localizeCurrency:null};let c=(0,p.Tc)(l);return{prices:l,localizeCurrency:new g.vr(c)}}function T(e){return v(p.Y$.AT_NEXT_RENEWAL,e,f.IX.YEAR,f.IX.YEAR)}function I(e,r){return v(e,r,f.IX.YEAR,f.IX.MONTH)}function S(e,r){return v(e,r,f.IX.MONTH,f.IX.MONTH)}function w(e){let r=(0,l.tl)().analyze_data_flow_v2_until,n=r&&(0,s.A)().isBefore(r)?e.postGaRenewal:e.nextRenewal;return n?(0,s.A)(n).toDate():null}function A(e){let r=e.annual_subscription;return!r||r.canceled_at?null:w({postGaRenewal:e.analyze_data_contract_v2_start,nextRenewal:r?.current_period_end})}function C(){let e=(0,i.d4)(e=>e.teamBilling),r=e.summary.monthly_subscription?.current_period_end;return(0,a.useMemo)(()=>r?(0,s.A)(r).toDate():null,[r])}function N(e){return w({postGaRenewal:e?.analyze_data_contract_v2_start,nextRenewal:e?.annual_renewal})}function L(e,r){if(!r)return null;let n=e.pendingConfirmedRenewalSeatCounts?.filter(e=>s.A(e.billingPeriodStart).add(1,"day").toDate()>r&&s.A(e.billingPeriodStart).subtract(1,"day").toDate()<r);if(!n||!n.length)return null;let a=b.N_.dict(e=>0),i=b.N_.dict(e=>0);return n.forEach(e=>{if(!e.billableProductKey||!(0,y.dA)(e.billableProductKey)){(0,m.$D)(o.e.SCALE,Error(`Confirmed seat count with unexpected billable product key: ${e.billableProductKey}`));return}let r=e.billableProductKey;a[r]=parseInt(e.surplusSeatCount??"0"),i[r]=parseInt(e.totalSeatCount??"0")}),{surplus:a,total:i}}function O(e,r){let n=function(e,r,n={enabled:!0}){let[i]=(0,d.IT)((0,_.JRW)({planParentId:e.parentId,planParentType:e.type===h.OL.ORG?h.iX.ORG:h.iX.TEAM,billingInterval:E.NW.YEAR}),{enabled:!!e.parentId&&n.enabled});return(0,a.useMemo)(()=>i.transform(e=>L(e,r)),[r,i])}(e,r),[i]=(0,d.mI)(n);if("loaded"!==i.status){let e=Error("Error fetching next annual renewal confirmed seat counts");throw(0,m.$D)(o.e.SCALE,e),e}return i.data}function R(e){var r;let n=!!e,i=e?.nextRenewalDate,o=i&&!!(r=i)&&(0,s.A)().add(30,"days").isAfter(r),l=(0,c.Rs)(_.JRW,{planParentId:e?.planKey.parentId??"",planParentType:e?.planKey.type===h.OL.ORG?h.iX.ORG:h.iX.TEAM,billingInterval:E.NW.YEAR},{enabled:n&&o});return(0,a.useMemo)(()=>n?o?l.transform(e=>!!L(e,i)):u.Qw.loaded(!1):u.Qw.disabled(),[n,i,o,l])}},437069:(e,r,n)=>{n.d(r,{AG:()=>T,Aj:()=>E,GV:()=>A,KS:()=>v,NT:()=>g,TA:()=>N,Zx:()=>p});var a=n(217950),i=n(550479),o=n(19569),s=n(314540),l=n(611390),c=n(548759),d=n(811567),u=n(190253);let m={design:c.ud.DESIGN,whiteboard:c.ud.FIGJAM,figjam:c.ud.FIGJAM,dev_mode:c.ud.DEV_MODE,slides:c.ud.SLIDES,collaborator:c.ud.COLLABORATOR,developer:c.ud.DEVELOPER,expert:c.ud.EXPERT};function p(e){return m[e]??e}(0,o.x)()(m);let h={design:s.ud.DESIGN,whiteboard:s.ud.WHITEBOARD,figjam:s.ud.WHITEBOARD,dev_mode:s.ud.DEV_MODE,slides:s.ud.SLIDES,collaborator:s.ud.COLLABORATOR,developer:s.ud.DEVELOPER,expert:s.ud.EXPERT};(0,o.x)()(h);let _={design:u.lM.DESIGN,whiteboard:u.lM.FIGJAM,figjam:u.lM.FIGJAM,dev_mode:u.lM.DEV_MODE,slides:u.lM.SLIDES};function g(e){return _[e]??e}(0,o.x)()(_);let f={design:u.oM.DESIGN,whiteboard:u.oM.WHITEBOARD,figjam:u.oM.WHITEBOARD,dev_mode:u.oM.DEV_MODE,slides:u.oM.SLIDES};function E(e){return f[e]??e}(0,o.x)()(f);let y={design:l.j4.DESIGN,whiteboard:l.j4.WHITEBOARD,figjam:l.j4.WHITEBOARD};(0,o.x)()(y);let b={[c.ud.DESIGN]:10,[c.ud.DEV_MODE]:20,[c.ud.FIGJAM]:30,[c.ud.SLIDES]:40,[c.ud.EXPERT]:50,[c.ud.DEVELOPER]:60,[c.ud.COLLABORATOR]:70,[c.Gu.VIEW]:80};function v(e){return b[e]}function T(e,r){return b[e]-b[r]}let I={[u.lM.DESIGN]:10,[u.lM.DEV_MODE]:20,[u.lM.FIGJAM]:30,[u.lM.SLIDES]:40};function S(e,r){return I[e]-I[r]}let w={[c.ud.EXPERT]:[u.lM.DESIGN,u.lM.DEV_MODE,u.lM.FIGJAM,u.lM.SLIDES],[c.ud.DEVELOPER]:[u.lM.DEV_MODE,u.lM.FIGJAM,u.lM.SLIDES],[c.ud.COLLABORATOR]:[u.lM.FIGJAM,u.lM.SLIDES]};function A(e){return w[e].sort(S)}let C=d.N_.dict();function N(e){if(!e)return null;let r=C[p(e.key)];return r?{key:r,license_types:e.licenseTypes.map(e=>g(e))}:((0,i.$D)(a.e.BILLING,Error(`convertLgSeatTypeProduct encountered unexpected seat type key: ${e.key}`)),null)}},345294:(e,r,n)=>{n(411855),n(188507),n(621847),n(265851),n(76265),n(47795),n(736041),n(291756),n(45049)},291756:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(657548),c=n(621847),d=n(265851),u=n(719334),m=n(137235),p=n(76265),h=n(736041),_=n(593874),g=n(479251),f=n(710636),E=n(499008),y=n(205287);let b=a.memo(function(e){let r=(0,i.wA)(),{displayName:n,legalName:o}=e,[f,b]=a.useState(n||""),[v,T]=a.useState(o||""),{isLoading:I,withLoading:S}=(0,m.R)(),w=()=>{r(h.Ce())},A=async n=>{n.preventDefault(),await S(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,l.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:f}}},g.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:f})):await (0,l.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:f}}},g.$.updateTeamName({teamId:e.team.id,updatedDisplayName:f,updatedLegalName:v}))}catch(a){let n=e.canSeeBillingAddressExp?(0,p.t)("update_company_details_modal.update_display_name.error"):(0,p.t)("update_company_details_modal.update_team_name.error");throw r(u.s.error((0,p.Jv)(a)||n)),a}else r(_.yy({legalName:v,displayName:f}));w()})};return a.createElement(E.XV,{onClose:w,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0},a.createElement("form",{onSubmit:A,className:d.s.p16.$},a.createElement("div",{className:d.s.mt4.$},a.createElement("label",{htmlFor:"teamName",className:d.s.colorTextSecondary.$},a.createElement("strong",{className:d.s.block.colorText.$},(0,p.tx)("pro_cart.review.edit_details.team_name_label")),(0,p.tx)("pro_cart.review.edit_details.team_name_description")),a.createElement(c.ks,{value:f,id:"teamName",onChange:e=>{b(e.target.value)},dataTestId:"company-team-name",className:d.s.block.mt8.wFull.$})),!e.canSeeBillingAddressExp&&a.createElement("div",{className:d.s.mt20.$},a.createElement("label",{htmlFor:"legalName",className:d.s.colorTextSecondary.$},a.createElement("strong",{className:d.s.block.colorText.$},(0,p.tx)("pro_cart.review.edit_details.company_name_label")),(0,p.tx)("pro_cart.review.edit_details.company_name_description")),a.createElement(c.ks,{value:v,id:"legalName",onChange:e=>{T(e.target.value)},dataTestId:"company-name",className:d.s.block.mt8.wFull.$})),a.createElement("div",{className:s()(y.v0,y.hF)},a.createElement(c.tM,{onClick:w,disabled:I},(0,p.tx)("pro_cart.review.edit_details.cancel")),a.createElement(c.vd,{className:y.pL,disabled:I,type:"submit"},(0,p.tx)("pro_cart.review.edit_details.save")))))});(0,f.Ju)(b,"UpdateCompanyDetailsModal")},223400:(e,r,n)=>{n.d(r,{AG:()=>s,H5:()=>o});var a=n(653599),i=n(190253);let o=new a.X([i.G_.DESIGN,i.G_.FIGJAM,i.G_.DEV_MODE]);function s(e,r){let n={[i.vu]:0,[i.PE]:1,[i.Mg]:2,[i.tL]:2};return n[e]-n[r]}new a.X([i.G_.DESIGN,i.Mg,i.G_.DEV_MODE])},190253:(e,r,n)=>{n.d(r,{G_:()=>m,Mg:()=>d,PE:()=>u,Te:()=>p,_R:()=>v,if:()=>E,iy:()=>y,lM:()=>h,oM:()=>g,tL:()=>c,vc:()=>f,vu:()=>l,wR:()=>b,wk:()=>_});var a=n(846288),i=n(338584),o=n(314540),s=(e=>(e.DESIGN="design",e.FIGJAM="figjam",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.SITES="sites",e))(s||{});let l="design",c="figjam",d="whiteboard",u="dev_mode",m={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode"};i.nativeEnum(m);let p={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode"};i.nativeEnum(p);let h={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode",SLIDES:"slides"},_=i.nativeEnum(h),g={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode",SLIDES:"slides"};function f(e){switch(e){case o._Y.DESIGN:case o._Y.SLIDES:case o._Y.SITES:case o._Y.COOPER:case null:return p.DESIGN;case o._Y.WHITEBOARD:return p.WHITEBOARD;default:(0,a.xb)(e)}}function E(e){switch(e){case o._Y.DESIGN:case o._Y.SITES:case o._Y.COOPER:case null:return g.DESIGN;case o._Y.WHITEBOARD:return g.WHITEBOARD;case o._Y.SLIDES:return g.SLIDES;default:(0,a.xb)(e)}}function y(e){return function(e){switch(e){case"design":case"dev_mode":case"sites":return o._Y.DESIGN;case"whiteboard":case"figjam":return o._Y.WHITEBOARD;case"slides":return o._Y.SLIDES;default:(0,a.xb)(e)}}(function(e){switch(e){case o.G_.DESIGN:return h.DESIGN;case o.G_.DEV_MODE:return h.DEV_MODE;case o.G_.WHITEBOARD:return h.FIGJAM;case o.G_.SLIDES:return h.SLIDES;default:(0,a.xb)(e)}}(e))}function b(e){switch(e){case o._Y.DESIGN:case o._Y.COOPER:case o._Y.SITES:case null:return o.G_.DESIGN;case o._Y.WHITEBOARD:return o.G_.WHITEBOARD;case o._Y.SLIDES:return o.G_.SLIDES;default:(0,a.xb)(e)}}function v(e,r){return e===o._Y.WHITEBOARD?r?.whiteboardPaidStatus===o.dQ.RESTRICTED:e===o._Y.DESIGN&&r?.designPaidStatus===o.dQ.RESTRICTED}i.nativeEnum(g)},467432:(e,r,n)=>{n.d(r,{vK:()=>u}),n(217950),n(550479),n(972142);var a=n(338584);n(76265);var i=(e=>(e.ACH_DEBIT="ach_debit",e.CARD="card",e.SEPA_DEBIT="sepa_debit",e.UNKNOWN="unknown",e))(i||{}),o=(e=>(e.AMEX="amex",e.DINERS="diners",e.DISCOVER="discover",e.EFTPOS_AU="eftpos_au",e.JCB="jcb",e.MASTERCARD="mastercard",e.UNIONPAY="unionpay",e.VISA="visa",e.UNKNOWN="unknown",e))(o||{});let s=a.object({type:a.literal("ach_debit"),last4:a.string().nullable()}),l=a.object({type:a.literal("card"),brand:a.nativeEnum(o).nullable(),last4:a.string().nullable()}),c=a.object({type:a.literal("sepa_debit"),last4:a.string().nullable()}),d=a.object({type:a.literal("unknown"),stripe_type:a.string()}),u=a.union([s,l,c,d])},243989:(e,r,n)=>{n.d(r,{ar:()=>g,fA:()=>h,qH:()=>d}),n(217950),n(740222),n(890882),n(550479),n(972142);var a=n(338584);n(76265);var i=n(314540),o=n(113464),s=n(45049),l=n(548759),c=n(467432),d=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e))(d||{}),u=(e=>(e.MANUAL="manual",e.SUBSCRIPTION_CREATED="subscription_created",e.SUBSCRIPTION_RENEWED="subscription_renewed",e.CATCH_UP="catch_up",e.TRUE_UP="true_up",e))(u||{}),m=(e=>(e.OPEN="open",e.PAID="paid",e.CANCELED="canceled",e))(m||{});let p=a.object({status:a.nativeEnum(m),payment_method:c.vK.nullable()});var h=(e=>(e.LEGACY="legacy",e.PRORATED="prorated",e))(h||{});let _=(0,l.g7)(a.object({net_quantity:a.number(),amount:a.number(),seats_quantity:a.number(),seats_amount:a.number(),adjustments_quantity:a.number(),adjustments_amount:a.number(),charges_quantity:a.number(),charges_amount:a.number(),credits_quantity:a.number(),credits_amount:a.number()})),g=a.object({id:a.string(),issued_at:a.string(),paid_at:a.string().nullable(),period_starts_at:a.string(),period_ends_at:a.string(),past_due_at:a.string(),plan_parent_type:a.nativeEnum(i.OL),billing_interval:a.nativeEnum(s.NW),total:a.number(),state:a.nativeEnum(d),subtype:a.nativeEnum(u),currency:o.D,hosted_invoice_url:a.string().nullable(),invoice_pdf_url:a.string().nullable(),number:a.string().nullable(),total_tax_amount:a.number(),subtotal:a.number(),payments:p.array(),billing_mechanics:a.nativeEnum(h),billable_products_kind:a.nativeEnum(i.FE),org_invoice_details:a.object({is_locked:a.boolean().nullable(),is_skipped_trueup:a.boolean().nullable(),seat_floors:(0,l.g7)(a.number().nullable()).nullable(),billable_seats_now:(0,l.g7)(a.number().nullable()).nullable()}).nullish(),is_empty:a.boolean(),invalid_amounts_or_quantities:a.boolean().optional(),seats_breakdown:_});var f=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e.OVERDUE="overdue",e))(f||{}),E=(e=>(e.REVIEW="review",e.LOCKED="locked",e))(E||{})},293890:(e,r,n)=>{n.d(r,{p:()=>i}),n(139879),n(537393),n(689965);var a=n(45049);function i(e,r){return"promoReview"===e.view||"teamUpgrade"===e.view&&e.paymentStep===a.tn.CONFIRM_PAY&&r.promo}n(548759),n(811567)},459403:(e,r,n)=>{n.d(r,{q:()=>d}),n(411855),n(188507);var a=n(707062);n(841962);var i=n(198003),o=n(76265),s=n(553362),l=(e=>(e.AdminUpgradeEmail="admin_upgrade_email",e.UnknownDeeplink="unknown_deeplink",e))(l||{});n(423900);var c=n(183739);async function d(e,r){try{let n=await (0,i.Ek)(c.s7T,{requestId:e}),l=(0,a.oA)(n.accountTypeRequest);if(!l){u(r,(0,o.t)("admin_dashboard.requests.not_found"));return}if("pending"!==l.status){r(s.F.enqueue({message:(0,o.t)("admin_dashboard.requests.this_request_has_already_been_handled"),type:l?.status==="approved"?"requests-approved":"requests-denied"}));return}return l}catch(e){u(r)}}n(765886);let u=(e,r)=>{e(s.F.enqueue({message:r||(0,o.t)("admin_dashboard.requests.error_generic"),error:!0}))}},548846:(e,r,n)=>{n.d(r,{If:()=>l});var a=n(841962),i=n(841924),o=n(775086);let s=i.M4.Query({fetch:async()=>(await o.Cn.maintenancePoc1()).data.meta});function l(e){let{data:r,status:n}=function(e){let[r]=(0,i.IT)(s(null),{enabled:(0,a.kc)().campfire_i18n_verbiage&&e});return r}(e);if("loaded"===n&&r?.strings.cart_banner)return{info:r.strings.cart_banner.cart_banner_info,edu_info:r.strings.cart_banner.cart_banner_edu_info}}},825408:(e,r,n)=>{n.d(r,{jL:()=>h}),n(411855);var a=n(89865),i=n.n(a),o=n(895925),s=n(875877);n(76265);var l=n(243989),c=n(841924);n(807373);var d=n(179317);let u=(0,s.atom)({});function m(e){let r=e.filter(e=>e.state===l.qH.PENDING),n=i()(r,e=>e.id);s.atomStore.set(u,e=>({...e,...n}))}c.M4.Query({fetch:async e=>{let r=(await d.V.getPlanInvoices(e)).data.meta.invoices;return m(r),r}});let p=c.M4.Query({fetch:async({planType:e,planId:r})=>{let n=(await d.V.getUpcomingPlanInvoices({planType:e,planId:r})).data.meta.invoices;return m(n),n}});async function h(e){await c.M4.fetch(p(e),{policy:"networkOnly"}).catch(e=>{o.k.error(e)})}},978747:(e,r,n)=>{n.d(r,{$n:()=>O,ac:()=>k,gW:()=>N});var a=n(411855),i=n(188507),o=n(224231),s=n(805014),l=n(715924),c=n(841962),d=n(875877),u=n(728722),m=n(736942),p=n(593587),h=n(23478),_=n(407498),g=n(176160),f=n(314540),E=n(183739),y=n(510669),b=n(914077),v=n(190253),T=n(849331),I=n(681254),S=n(913117),w=n(797187),A=n(305216),C=n(689102);function N(e,r,n,a,i,o,l,c,d,u){var m;return{createBranch:R(e,r,l,c,d,u,n,a),openBranchSource:e&&(0,h.Kz)(e)?{status:"enabled"}:{status:"hidden"},viewBranches:e&&e.fileRepoId?l?{status:"hidden",reason:"Recovery mode"}:{status:"enabled"}:{status:"hidden"},viewBranchDiff:(m=e?.sourceFile||null,e?(0,h.Kz)(e)?e.canView?m?.canView?l?{status:"hidden",reason:"Recovery mode"}:i!==s.lyf.BRANCHING&&a!==_.Wy.SAFE?{status:"disabled",reason:"Low memory"}:{status:"enabled"}:{status:"hidden",reason:"Can't view source"}:{status:"hidden",reason:"Can't view branch"}:{status:"hidden",reason:"Not a branch"}:{status:"hidden"}),mergeBranch:function(e,r,n,a,i,o){if(!e)return{status:"hidden"};if(!(0,h.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canManage)return{status:"hidden",reason:"Can't edit source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(o)return{status:"hidden",reason:"Recovery mode"};if(a!==s.lyf.BRANCHING){if(n!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(i!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,a,i,o,l),viewSourceDiff:function(e,r,n,a,i,o,l){if(!e)return{status:"hidden"};if(!(0,h.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canView)return{status:"disabled",reason:"Can't view branch"};if(!r?.canView)return{status:"disabled",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],d=n.fileByKey[e.key];if(!c||!D(d,c))return{status:"disabled",reason:"No changes"};if(i!==s.lyf.BRANCHING){if(a!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,a,i,o,l),updateBranch:function(e,r,n,a,i,o,l){if(!e||!(0,h.Kz)(e))return{status:"hidden"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canView)return{status:"hidden",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],d=n.fileByKey[e.key];if(!c||!D(d,c))return{status:"disabled",reason:"No changes"};if(i!==s.lyf.BRANCHING){if(a!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,a,i,o,l)}}function L(){return(0,w.ut)(s.Ez5?.uiState().isRecovery,!1)}function O(){let e=(0,T.FC)(),r=(0,g.q5)(),n=(0,I.d)(),o=(0,i.d4)(e=>e.selectedView.editorType),s=L(),l=(0,d.useAtomValue)(_.eE),h=(0,i.d4)(e=>e.mirror.appModel.topLevelMode),f=(0,i.d4)(e=>e.mirror.appModel.multiplayerSessionState),y=r?.teamId??null,b=(0,p.R)(),v=r?.sourceFile??r,S=(0,c.kc)().fc_branch_creation&&!!(v&&v.key),w=(0,u.Rs)(E.QrR,{fileKey:v?.key},{enabled:S}),A=(0,a.useMemo)(()=>S?m.Qw.from(w).transform(e=>P({file:e.file,isRecovery:s,isUserInLimitedSpace:n,isBillingRemodelEnabled:b,plan:e.file?.plan,planUser:e.file?.currentPlanUser})):m.Qw.loaded({status:"hidden",reason:"Not enabled"}),[s,n,b,w,S]),C=(0,a.useMemo)(()=>N(r,e,o,l,h,f,s,y,n,b),[r,e,o,l,h,f,s,y,n,b]),O=A.transform(e=>e.status);return S&&"loaded"===O.status?{...C,createBranch:{status:O.data}}:C}function R(e,r,n,a,i,o,s,l){if(!e)return{status:"hidden",reason:"No file"};if(n)return{status:"hidden",reason:"Recovery"};if(i)return{status:"hidden",reason:"User is in limited space"};if(s!==b.nT.Design)return{status:"hidden",reason:"Invalid editor type"};if(void 0!==l&&l!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if((0,A.Pe)(e))return{status:"disabled",reason:"File is copy/export restricted"};if((0,y.isOrgUserExternallyRestrictedFromState)(r))return{status:"hidden",reason:"Your organization doesn't allow you to create branches in external spaces."};if((0,S.XD)({currentTeamId:a,hasCurrentOrg:!!r.currentUserOrgId}))return{status:"upsell-org",reason:"Not in org but can upsell into it"};if(!e.parentOrgId)return{status:"hidden",reason:"File is not in org"};if(!r.currentUserOrgId)return{status:"hidden",reason:"Not in org"};let c=(0,h.up)(e,r.repos);if(c&&!(0,h.SA)(e,c))return{status:"hidden",reason:"Not the main file"};let d=r.user&&r.orgUsersByOrgId[e.parentOrgId]&&r.orgUsersByOrgId[e.parentOrgId][r.user.id]?r.orgUsersByOrgId[e.parentOrgId][r.user.id]:null,u=d&&d.design_paid_status,m=o?d?.active_seat_type?.license_types?.includes(v.vu):u===f.El.FULL;return null===u?{status:"hidden",reason:"Unknown account type"}:m?{status:"enabled"}:o||u===f.El.STARTER?{status:"hidden"}:{status:"upsell-org-seat"}}function P({file:e,isRecovery:r,isUserInLimitedSpace:n,isBillingRemodelEnabled:a,plan:i,planUser:s}){return e?r?{status:"hidden",reason:"Recovery"}:n?{status:"hidden",reason:"User is in limited space"}:e.editorType!==f._Y.DESIGN?{status:"hidden",reason:"Invalid editor type"}:e.canCreateBranch?{status:"enabled"}:(0,A.Pe)(e)?{status:"disabled",reason:"File is copy/export restricted"}:i&&![o.Agb.ENTERPRISE,o.Agb.ORG].includes(i.tier)?{status:"upsell-org",reason:"Not in org but can upsell into it"}:s?(a?s?.seatTypeLicenseTypes?.includes(f.G_.DESIGN):s?.designPaidStatus===f.dQ.FULL)||a||s?.designPaidStatus===f.dQ.STARTER?{status:"hidden"}:{status:"upsell-org-seat"}:{status:"hidden",reason:"Unknown account type"}:{status:"hidden",reason:"No file"}}function D(e,r){return r.checkpoint_id&&e.source_checkpoint_id&&e.source_checkpoint_id!==r.checkpoint_id}function k(e){let r=(0,C.cD)(),n=(0,I.d)(),i=e?.key,o=(0,u.Rs)(E.XRI,{fileKey:i},{enabled:!!i}),s=(0,u.Rs)(E.QrR,{fileKey:i},{enabled:!!i}),d=(0,T.FC)(),h=L(),_=(0,p.R)(),g=(0,a.useMemo)(()=>e?m.Qw.from(s).transform(e=>P({file:e.file,isRecovery:h,isUserInLimitedSpace:n,isBillingRemodelEnabled:_,plan:e.file?.plan,planUser:e.file?.currentPlanUser})):m.Qw.loaded({status:"hidden",reason:"No file"}),[e,h,n,_,s]),f=(0,a.useMemo)(()=>e?m.Qw.from(o).transform(a=>R(a.file&&e?{key:e.key,parentOrgId:e.parentOrgId||null,fileRepoId:e.fileRepoId,canEdit:a.file.canEdit,canExport:a.file.canExport,viewerExportRestricted:a.file.viewerExportRestricted}:null,d,!!h,r,n,_,(0,b.sL)(e.editorType))):m.Qw.loaded({status:"hidden",reason:"No file"}),[r,h,d,n,e,o,_]),y=g.transform(e=>e.status);return(0,l.T)({oldValue:f.data?.status,newValueQueryResult:y,label:"canCreateBranch",callSite:"useCreateBranchActionStatus",args:{oldReason:f.data?.reason,newReason:g.data?.reason,fileKey:e?.key},oldValueQueryResultStatus:f.status}),(0,c.kc)().can_create_branch_pv2?g:f}},608701:(e,r,n)=>{n.d(r,{Al:()=>E,dT:()=>f,kt:()=>_,lX:()=>h,nt:()=>v,pI:()=>g});var a=n(411855),i=n(188507),o=n(48451),s=n(336427),l=n(437068),c=n(314540),d=n(401562),u=n(15092),m=n(313449);let p=e=>`SAVED_CART::${e}`;function h({teamId:e,userId:r}){if(!r)return null;let n=b(r);return n?.teamId===e?n:null}let _=["","",""];function g({loadingPaidEditors:e,teamId:r,teamName:n,setTeamName:l,collaborators:d,setCollaborators:p}){let h=(0,u.iZ)(),g=(0,i.d4)(e=>(r?e.teamUserByTeamId[r]:{})||{}),E=(0,i.d4)(e=>e.payment.numDesignEditors),y=(0,i.d4)(e=>e.payment.numWhiteboardEditors),v=(0,i.d4)(e=>e.payment.editorStatusChanges),T=(0,i.d4)(e=>e.payment.cartSelections),I=(0,s.ZC)(e),S=(0,m.BR)(g,h),w=(0,m.O1)(E,(0,m.Ky)(S,v,c._Y.DESIGN)),A=(0,m.O1)(y,(0,m.Ky)(S,v,c._Y.WHITEBOARD)),C=(0,a.useCallback)(()=>{let e=b(h?.id);if(!e)return null;let{createdAt:r,updatedAt:n,...a}=e;return a},[h?.id]);(0,a.useEffect)(()=>{let a=C(),i=null!==r||n?n:a?.newTeamName,s=null===r&&!d||(0,o.c2)(d,_)?a?.newCollaborators??_:d,c={teamId:r,editorStatusChanges:v,numEmptyDesignSeats:w,numEmptyWhiteboardSeats:A,newTeamName:i,newCollaborators:s,is3DS:a?.is3DS,cartSelections:T};!e&&h&&((0,o.he)(a,c)||f(h.id,c),I&&(l&&i!==n&&l(i||""),p&&!(0,o.c2)(d,s)&&p(s||_)))},[e,I,h,r,v,w,A,C,n,l,d,p,T])}let f=(0,d.D)((e,r)=>{try{let n=new Date().toISOString(),a={...r,createdAt:n,updatedAt:n};l.TQ()?.setItem(p(e),y(a))}catch(e){console.error("Failed to save cart state to Local Storage")}});function E(e){if(e)try{l.TQ()?.removeItem(p(e))}catch(e){}}let y=e=>JSON.stringify(e),b=e=>{if(!e)return null;try{let r=l.TQ()?.getItem(p(e));if(r)return JSON.parse(r);return null}catch(e){return null}};function v(e,r){let n=r.map(e=>e.id),a=e=>e?.filter(e=>n.includes(e))??[];return{upgrade:{design:a(e.upgrade.design),slides:a(e.upgrade.slides),sites:a(e.upgrade.sites),whiteboard:a(e.upgrade.whiteboard),cooper:a(e.upgrade.cooper)},downgrade:{design:a(e.downgrade.design),slides:a(e.downgrade.slides),sites:a(e.downgrade.sites),whiteboard:a(e.downgrade.whiteboard),cooper:a(e.upgrade.cooper)}}}},619560:(e,r,n)=>{n.d(r,{CR:()=>L,F$:()=>U,GV:()=>b,JG:()=>w,PK:()=>y,Zz:()=>B,eR:()=>A,gj:()=>P,hx:()=>E,k0:()=>F,mz:()=>S,o8:()=>C,rN:()=>v,ro:()=>D,t$:()=>I,us:()=>x,vl:()=>k,wB:()=>f});var a=n(846288),i=n(533132),o=n(991458),s=n(841962),l=n(977235),c=n(866415),d=n(612724),u=n(874051),m=n(343373),p=n(695024),h=n(804197),_=n(297713),g=n(488527);let f=1,E={x:16,y:-4},y={top:0,right:0,bottom:0,left:0,width:0,height:0},b={messageMeta:[],attachments:{},state:h.EB.READY,anchorPosition:null,selectionBoxAnchor:null,discardAttempt:0};function v(e,r){return!r||(0,d.gR)(r,e)}function T(e){return(0,o.jz)(e?g.NJv:g.QP5)}function I(){return T((0,m.GS)())}function S(){var e;return e=(0,m.GS)(),(0,o.jz)(e?g.oGx:g.RdL)}function w(e,r,n){let{messageMeta:a,attachments:i,anchorPosition:o,selectionBoxAnchor:s}=r;return{id:h.hm,key:h.hm,uuid:h.hm,anchored:!0,canvasPosition:o,selectionAnchorCanvasPosition:s,page:n,isActive:e===h.hm,comments:[],messageMeta:a,attachments:Object.values(i),pageName:null,isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD}}function A(e){return e===h.hm}let C=(0,c.cm)(e=>e.map(e=>e.user?{user_id:e.user.id,user_annotated:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl}}:{t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,children:e.children?.length?C(e.children):void 0})),N=(0,c.cm)(e=>({x:e.x,y:e.y,...e.nodeId?{node_id:e.nodeId}:{},...e.inFrame?{in_frame:e.inFrame}:{},...e.nodeOffset?{node_offset:e.nodeOffset}:{},...e.selectionBoxAnchor?{selection_box_anchor:e.selectionBoxAnchor}:{},...e.stablePath?{stable_path:e.stablePath}:{}})),L=(0,c.cm)(e=>({id:e.id,handle:e.handle,img_url:e.imgUrl})),O=(e,r,n)=>{if("publicUuid"in e&&e.publicUuid)return!1;if(r.unreadComments[e.id])return!0;if(r.readComments[e.id])return!1;let a=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=a.getTime())&&e.user.id!==n},R=new Date,P={id:"",userId:"",fileKey:"",createdAt:R,allReadAt:R,readComments:{},unreadComments:{}};function D(e,r,n,a,o,c,d,u){if("loaded"!==r.status)return r;let m=r.data.file;if(!m)return(0,l.gB)([]);let p=m?.comments.filter(e=>!e.parentId),_=m.comments.filter(e=>e.parentId).reduce((e,r)=>{let n=e[r.parentId]||[];return n.push(r),e[r.parentId]=n,e},{}),g=m.commentAttachments.reduce((e,r)=>{if(!r.fileCommentId)return e;let n=e[r.fileCommentId]||[];return n.push(r),e[r.fileCommentId]=n,e},{}),f=o(p.filter(e=>e.clientMeta?.nodeId).map(e=>e.clientMeta.nodeId)),E=p.map(r=>{let o=r.clientMeta&&r.clientMeta.nodeId,l=a[r.id]||r.uuid&&a[r.uuid],p=null;if(l&&r.clientMeta?.selectionBoxAnchor){let e=r.clientMeta.x-r.clientMeta.selectionBoxAnchor.x,n=r.clientMeta.y-r.clientMeta.selectionBoxAnchor.y;p={x:l.x-e,y:l.y-n}}let E=o?f[o]||r.clientMeta?.pageId||null:r.clientMeta?.pageId||"0:1",y=_[r.id]||[],b=[r,...y.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime())],v=m.currentUserCommentReadStatus||P,T=b.map(n=>{let a=g[n.id]??(n.uuid&&g[n.uuid]);return function(e,r,n,a,o,l,c){let d=O(n,a,e),u=(0,i.L4)(n.id),m=n.messageMeta;n.messageMetaStylized?.length&&(m=n.messageMetaStylized);let p=(0,s.kc)().comments_faster_saving_ux?!!n.uuid&&o.has(n.uuid):void 0,h=(0,s.kc)().comments_faster_saving_ux_v2?u||!!r.uuid&&r.uuid in l:void 0;return{id:n.id,uuid:n.uuid,key:r.key,parent_id:n.parentId,user_id:n.user.id,created_at:n.createdAt.toISOString(),resolved_at:r.resolvedAt?r.resolvedAt.toISOString():null,deleted_at:null,message_meta:C(m),attachments:c,client_meta:n.clientMeta?N(n.clientMeta):null,order_id:null!==n.orderId?n.orderId.toString():null,isUnread:d,isPendingFromSinatra:u,isSaving:p,isPendingFromLg:h,user:L(n.user)}}(e,r,n,v,d,u,a)}),I=(0,i.L4)(r.id),S=(0,s.kc)().comments_faster_saving_ux?!!r.uuid&&d.has(r.uuid):void 0,w=(0,s.kc)().comments_faster_saving_ux_v2?I||!!r.uuid&&r.uuid in u:void 0;return{id:r.id,uuid:r.uuid||void 0,key:r.key,anchored:!!l,canvasPosition:l,selectionAnchorCanvasPosition:p,page:E,pageName:E&&c[E]||null,isActive:n===r.id,isPendingFromSinatra:I,isSaving:S,isPendingFromLg:w,comments:T,messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD,commentPin:r.commentPin}});return(0,l.gB)(E)}function k(e,r,n,i){let{canvasPosition:o}=r,s=o&&e?(0,p.Z0)(e,o):null,l=function(e,r,n,i,o,s){if(!e||!r)return null;let l=(function(e){switch(e){case h.kT.COMMENT_THREAD:return _.XC;case h.kT.FEED_POST:return _.b1;case h.kT.WALKTHROUGH_MEDIA:return _.Yp;default:(0,a.xb)(e)}})(i).getPinSize(n).width,c=l+E.x+T(o)+25;return e.width-r.x-(s??0)<c?{x:-1*T(o)-E.x,y:-55}:{x:l+E.x,y:-55}}(e,s,new Set(r.comments.map(e=>e.user_id)).size,r.sidebarItemType,n,i),c=s&&l?d.Mi.add(s,l):null;return{...r,anchorPosition:s,threadPosition:c,threadOffset:l}}let M=(e,r,n)=>{let a=e.id;if(r.unreadCanvasMentions[a])return!0;if(r.readCanvasMentions[a])return!1;let i=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=i.getTime())&&n!==e.id};function F(e,r,n){if("loaded"!==r.status)return r;let a=r.data.file;if(!a)return(0,l.gB)([]);let i=a.fileCanvasMentions,o=a.currentUserFileCanvasMentionReadStatus||u.ih,s=i.map(r=>(function(e,r,n,a){let i=`canvas_mention_${r.id.replace(/-/g,"_")}`,o=r.id,s=M(r,n,e);return{id:i,uuid:o,key:r.fileKey,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,page:(0,l.oA)(r.pageId,null),pageName:null,isActive:a===i,isPendingFromSinatra:void 0,comments:[{id:i,uuid:o,key:o,parent_id:null,user_id:r.fileKey,created_at:r.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:C(r.messageMeta),client_meta:null,order_id:null,isUnread:s,isPendingFromSinatra:!1,user:L(r.mentionedByUser)}],messageMeta:C(r.messageMeta),attachments:[],isCanvasMention:!0,replyCount:void 0,sidebarItemType:h.kT.COMMENT_THREAD,nodeId:r.nodeIdPath[0]}})(e,r,o,n));return(0,l.gB)(s)}function x(){return{reply:{messageMeta:[],attachments:{}},state:h.EB.READY}}function U(e){let r=[];for(let n=0;n<e.message_meta.length;n++){let a=e.message_meta[n];a.hasOwnProperty("user_id")&&r.push(a.user_id)}return r}function B(e){return e.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))}},723337:(e,r,n)=>{n.d(r,{Hu:()=>w,Kq:()=>L,W9:()=>C,gu:()=>N,kx:()=>A});var a=n(411855),i=n(188507),o=n(805014),s=n(245459);n(717180);var l=n(245954),c=n(636149),d=n.n(c),u=n(777535),m=n(841962),p=n(612724),h=n(731556);n(413645),n(662310),n(366172),n(948692);var _=n(427494),g=n(345526),f=n(114750),E=n(619560),y=n(911982),b=n(309494),v=n(619107),T=n(940379);(0,m.kc)().comments_new_observer;let I=(e,r)=>({anchorPositionById:r(a.useMemo(()=>{if("loaded"!==e.status||!e.data.file)return{commentNodeInfoById:{},commentNodeIds:new Set,commentThreads:[]};let r=e.data.file,n=Object.create(null),a=new Set,i=r.comments.filter(e=>null===e.parentId);for(let e of i)if(e.clientMeta){let{x:r,y:i,nodeId:o,nodeOffset:s,stablePath:l}=e.clientMeta;n[e.id]={canvasPosition:{x:r,y:i},nodeId:o,nodeOffset:s,stablePath:l?`[${l.join(",")}]`:void 0},null!=o&&a.add(o)}return{commentNodeInfoById:n,commentNodeIds:a,commentThreads:i}},[e]).commentNodeInfoById)}),S="COMMENTS_ABSOLUTE_POSITIONING_UPDATER";function w(e,r){let n=a.useMemo(()=>d()(e,e=>e.clientMeta?.nodeId),[e]),s=a.useMemo(()=>Object.keys(n),[n]),l=a.useRef({}),c=(0,i.wA)(),u=(0,b.g)(),m=a.useCallback(e=>{let{nodeId:r,position:a,eventOrigins:i}=e,o=l.current[r],s=i.includes("LOCAL"),d=navigator.onLine;if(s&&d){if(null===a){let e=n[r]||[];o&&e.forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},a=p.Mi.add(o.position,n);(r.x!==a.x||r.y!==a.y)&&c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:a.x,y:a.y,page_id:r.pageId||void 0,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}else a&&a.page!==o?.position?.page&&(n[r]||[]).forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},i=p.Mi.add(a,n);c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:i.x,y:i.y,page_id:a.page,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}l.current[r]=e},[n,l,c]);a.useEffect(()=>{if(r.enabled&&o.glU&&u){let{currentNodePosition:e}=(0,v.EE)(S,s,m);l.current=e}return()=>{o.glU&&u&&(0,v.lB)(S)}},[s,m,r.enabled,u])}function A(e){return a.useCallback(r=>r.reduce((r,n)=>{let a=e?.pageIdForNodeId(n)||null;return a&&l.UN().get(a)?.isInternalOnlyNode&&(a=null),r[n]=a,r},{}),[e])}function C(e,r,n,o,s,l){let c=I(r,o),d=(0,i.d4)(e=>e.comments.savingCommentUuids),m=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap);a.useEffect(()=>{if("errors"===r.status){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load comments: ${e}`),(0,u.sx)("Livegraph Comments Errors",{errors:e})}},[r]),(0,T.t)(e=>{if("loading"!==r.status){if("errors"===r.status){e("comments_fetched",{status:r.status});return}e("comments_fetched",{count:r.data?.file?.comments?.length,status:r.status})}},[r]);let p=a.useMemo(()=>l.filter(e=>!!("nodeId"in e?e.nodeId:e.id)).reduce((e,r)=>(e["nodeId"in r?r.nodeId:r.id]=r.name,e),{}),[l]),h=a.useMemo(()=>(0,E.ro)(e,r,n,c.anchorPositionById,s,p,d,m),[e,r,n,c.anchorPositionById,s,p,d,m]);return(0,y.E)("loaded"===h.status&&h.data||[]),h}function N(e,r,n){return a.useEffect(()=>{if(r.errors&&r.errors.length){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load canvas mentions: ${e}`),(0,u.sx)("Livegraph Canvas Mention Comments Errors",{errors:e})}},[r.errors]),a.useMemo(()=>(0,E.k0)(e,r,n),[n,r,e])}function L(e){let r;let n=(0,g.s)(),a=(0,_.eY)();if(!(0,f.Qf)(a))return!1;switch(n.orphanedBy){case"deleted_pages":return!e.pageName;case"deleted_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!1;return!a.get(r);case"non_slide_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!0;let i=(0,l.UN)().get(r);if(!i)return!0;return i.containingSlideId===s.AD;default:return!1}}},968525:(e,r,n)=>{n.d(r,{CR:()=>N,CW:()=>P,Cj:()=>ea,D:()=>Y,Gg:()=>ei,Gq:()=>B,HE:()=>F,HN:()=>$,HR:()=>Z,Hc:()=>y,IZ:()=>q,Jl:()=>w,Lg:()=>k,MZ:()=>G,T9:()=>Q,UP:()=>et,Uc:()=>x,V4:()=>O,Wi:()=>K,Yo:()=>A,Yp:()=>b,ax:()=>E,b:()=>M,cV:()=>eo,cs:()=>X,d9:()=>er,eL:()=>W,gS:()=>C,jI:()=>H,kc:()=>J,n:()=>el,nR:()=>ec,oH:()=>v,ou:()=>I,pH:()=>V,qA:()=>es,sD:()=>ee,uS:()=>R,vr:()=>T,x1:()=>z,xp:()=>L,yO:()=>U,z7:()=>D,zU:()=>en});var a=n(188507);n(48451);var i=n(777535),o=n(866415),s=n(76265),l=n(22957),c=n(91247),d=n(349628),u=n(136716);n(15092);var m=n(314540),p=n(510669);n(567155);var h=n(492366),_=n(914077),g=n(754430);n(496203);var f=n(567095);function E(e,r){return{...e&&e.versions||{},...r&&r.versions||{}}}function y(e,r,n){return e&&r&&r[e]||n}function b(e){return e&&e.trim()||""}function v(e){return e&&e.status||{code:g.aP.EDIT}}function T(e,r){let n=(0,s.t)("community.profiles.your_handle_text");return e&&0!==e.length?e.length>15?(0,s.t)("community.profiles.profile_max_15_characters_in_length",{errorStringPrefix:n}):/^[a-zA-Z0-9_]{1,15}$/.test(e)?null:(0,s.t)("community.profiles.profile_cannot_contain_special_characters",{errorStringPrefix:n}):(0,s.t)("community.publishing.profile_handle_cannot_be_empty",{errorStringPrefix:n})}function I(e,r){if(!("user"in r))return!1;let n=r.authedProfilesById[e];return n?.primary_user_id?!!r.user&&!!n.associated_users?.find(e=>e.user_id===r.user.id):n?.team_id?!!(r.user&&r.teamAdminRolesForAuthedUsers[r.user.id].some(e=>e.team_id===n.team_id))||(0,p.hasAdminRoleAccessOnTeam)(n.team_id,r):!!n?.org_id&&(0,p.canAdminOrg)(n.org_id,r)}let S=(0,o.xx)((e,r,n,a)=>{let i=null;if(e&&r[e]){let o=(0,p.canAdminOrg)(e,{currentUserOrgId:e,user:n,orgById:r,orgUsersByOrgId:a,fileByKey:{}}),s=r[e];i={isAdmin:o,id:s.id,name:s.name}}return i});function w(e){return S(e.currentUserOrgId,e.orgById,e.user,e.orgUsersByOrgId)}function A(){let e=(0,a.d4)(e=>e.currentUserOrgId);return S(e,(0,a.d4)(e=>"orgById"in e?e.orgById:{}),(0,a.d4)(e=>e.user),(0,a.d4)(e=>"orgUsersByOrgId"in e?e.orgUsersByOrgId:{}))}let C=(0,o.xx)((e,r,n)=>{let a;let i=r.plugins.fetchedResources;switch(e){case _.nT.Design:a=f.$A.Design;break;case _.nT.DevHandoff:a=f.$A.Handoff;break;case _.nT.Slides:a=f.$A.Slides;break;case _.nT.Cooper:a=f.$A.Cooper;break;default:a=f.$A.FigJam}let o=[];for(let e of r.plugins[a]){let r=i[e.id];if(r&&r.version){o.push(r.version);continue}let a=n[e.id];a&&o.push(a)}return o});function N(e){return C(e.selectedView.editorType,e.recentlyUsed,e.localPlugins)}function L(e){return!!(e.plugin_install||e.plugin||e.widget||e.whitelisted_plugin||e.hub_file||e.community_comment||e.community_resource_payment)}function O(e,r){let n=e.find(e=>e.id===r);return n?.tags||[]}function R(e){return(0,s.Yd)(e.i18n_meta?.text,e.text)}function P(e){return e.replace(/[\s_-]+/g," ").trim().toLocaleLowerCase()}function D(e){return e.match(/^[\P{Script_Extensions=Common} _\-0-9]*$/gu)?e.match(/^[\P{Script_Extensions=Common}0-9](.*[\P{Script_Extensions=Common}0-9])?$/gu)?e.toLocaleLowerCase()!==e?(0,s.t)("community.publishing.tags_can_only_contain_lowercase_characters"):e.length>25?(0,s.t)("community.publishing.tags_can_only_have_up_to_25_characters"):e.match(/[ _-]{2,}/)?(0,s.t)("community.publishing.tags_cannot_have_consecutive_dashes_underscores_or_spaces"):(e.match(/[ _-]/g)||[]).length>2?(0,s.t)("community.publishing.tags_cannot_be_longer_than_3_words"):null:(0,s.t)("community.publishing.tags_must_begin_and_end_with_a_letter_or_number"):(0,s.t)("community.publishing.tags_can_only_contain_certain_characters")}function k(e){return e.length>$?(0,s.t)("community.publishing.tagline_must_be_at_most_100_characters_long"):null}let M={name:"",description:"",tags:[],categoryId:null,creatorPolicy:"",viewerMode:m.y4.CANVAS,scalingMode:null,author:{user_id:""},commentsSetting:u.Ni.ENABLED,publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1},F=["Tab","Enter",","],x=5242880,U=0xf00000,B=0x6400000,V=100,G=12,H=5,W=5,K=10,Y=60,$=100;function j(e){return"is_widget"in e&&e.is_widget?h.vt.WIDGET:"current_plugin_version_id"in e?h.vt.PLUGIN:h.vt.HUB_FILE}function z(e){return"profile_handle"in e?h.Ug.PROFILE:j(e)===h.vt.HUB_FILE?h.Ug.HUB_FILE:j(e)===h.vt.WIDGET?h.Ug.WIDGET:h.Ug.PLUGIN}function q(e){return e>=K-1?(0,s.t)("community.publishing.cannot_have_more_than_max_publishers",{MAX_PUBLISHERS_PER_RESOURCE:K}):null}function Z(e){let r={},n={},a=e.map(e=>(r[e.id]=e,n[e.author.id]=e.author,e.id));return{commentsById:r,authorsById:n,feed:a}}let X=l.c;function J(){return(0,a.d4)(e=>e.authedActiveCommunityProfile)}function Q({authedProfilesById:e,profileId:r,userId:n,orgId:a,teamId:i}){return r?e[r]:a?Object.values(e).find(e=>e.org_id===a)||null:i?Object.values(e).find(e=>e.team_id===i)||null:n&&Object.values(e).find(e=>e.associated_users?.find(e=>e.user_id===n))||null}function ee(e,r){return e&&Object.values(r).find(r=>r.associated_users?.find(n=>n.user_id===e.id&&r.public_at))||null}function et(){return(0,a.d4)(e=>er(e.selectedView))}function er(e){return"communityHub"===e.view||en(e)||!1}function en(e){return"search"===e.view&&("url:community"===e.entryPoint||"community"===e.entryPoint||"community:header"===e.entryPoint)}function ea(e){return"communityHub"===e.view&&"handle"===e.subView}function ei(e){return(0,d.G)(e)}function eo(e){return e.community_publishers?.accepted.find(e=>X(e))||null}function es(e,r){let n=eo(r);if(n)return e.authedProfilesById[n.id]||null;let a=e.user&&ee(e.user,e.authedProfilesById);return a&&r.community_publishers?.accepted.find(e=>e.id===a.id)?a:null}function el(e){switch(e){case h.bD.PLUGIN:return"plugins";case h.bD.WIDGET:return"widgets";case h.bD.COMMENT:return"comments";case h.bD.HUB_FILE:return"hub_files";default:throw Error("Unsupported Type")}}function ec(e,r){(0,i.sx)(c.W_.PROFILE_ADMIN_MENU_OPEN,{source:e,view:r})}},920447:(e,r,n)=>{n.d(r,{D:()=>l,VH:()=>s});var a=n(972142),i=n(76265),o=n(968525);function s(e){let r=(0,o.cV)(e);if(r)return r.name;let n=e.community_publishers.accepted;return function(e,r,n){if(0===e.length)return"";if(1===e.length)return n(e[0]);let o=e.slice(0,r-1),s=e.slice(r-1);0===s.length&&(s=[o[o.length-1]],o=o.slice(0,o.length-1));let l=1===s.length?n(s[0]):(0,i.t)("community.resource.by_x_others",{numPublishers:s.length}),c=o.map(n);return l&&c.push(l),(0,a.Yx)(c)}(n,n.length,e=>e.name)}function l(e){let r=e.community_publishers.accepted;return e.community_publishers.pending&&(r=r.concat(e.community_publishers.pending)),r.reduce((e,r)=>{let n=r.associated_users?.map(e=>e.user_id)||[];return r.primary_user_id&&e.push(r.primary_user_id),e.concat(n)},[])}},613611:(e,r,n)=>{n.d(r,{Ro:()=>o,jY:()=>s,o0:()=>l});var a=n(697737),i=n(864986);function o(e,r){return!!e&&!!e.plugin_publishers?.accepted?.some(e=>e.id===r)}function s(e,r){return!!e&&!!e.plugin_publishers?.pending?.some(e=>e.id===r)||o(e,r)}async function l(e,r){let{data:n}=await a.Ay.post(`/api/${(0,i.KH)(e,{pluralized:!0})}/${e.id}/publisher_invites`,{emails:r});return{resource:n.meta.plugin,errors:n.meta.errors}}},944813:(e,r,n)=>{n(314540),n(782125);var a=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.ACCEPTED=2]="ACCEPTED",e[e.ADMIN=3]="ADMIN",e))(a||{})},468847:(e,r,n)=>{n.d(r,{$W:()=>ef,$x:()=>ea,Ac:()=>eE,CW:()=>ee,Dd:()=>M,En:()=>F,Gf:()=>ey,Gp:()=>ei,Ii:()=>q,JJ:()=>$,Kg:()=>ec,MO:()=>G,N8:()=>eo,R1:()=>eu,Rd:()=>ed,Rv:()=>K,T$:()=>x,Tn:()=>U,UU:()=>z,Wl:()=>et,Z2:()=>em,Z7:()=>H,f7:()=>V,gO:()=>k,j4:()=>Z,jr:()=>W,kN:()=>X,l8:()=>er,mH:()=>Q,mN:()=>Y,nK:()=>eh,o1:()=>J,oB:()=>D,of:()=>j,vC:()=>es,xw:()=>eg});var a=n(188507),i=n(396405),o=n(511611),s=n(217950),l=n(121985),c=n(885123),d=n(841962),u=n(988927),m=n(550479),p=n(697737),h=n(76265),_=n(316581),g=n(66683);n(243474);var f=n(677034),E=n(968525);n(941302);var y=n(510669),b=n(492366),v=n(754430),T=n(797618),I=n(7395),S=n(207726),w=n(31314),A=n(881088),C=n(12555);n(944813),n(841924);var N=n(493941),L=n(782125),O=n(611908),R=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.DISPLAY_ONLY=2]="DISPLAY_ONLY",e[e.ADMIN_IN_DIFFERENT_WORKSPACE=3]="ADMIN_IN_DIFFERENT_WORKSPACE",e[e.ADMIN=4]="ADMIN",e[e.NONE_WITH_INHERITED_ADMIN=5]="NONE_WITH_INHERITED_ADMIN",e[e.PENDING_WITH_INHERITED_ADMIN=6]="PENDING_WITH_INHERITED_ADMIN",e[e.DISPLAY_ONLY_WITH_INHERITED_ADMIN=7]="DISPLAY_ONLY_WITH_INHERITED_ADMIN",e[e.EXPLICIT_ADMIN=8]="EXPLICIT_ADMIN",e))(R||{});let P=e=>!0===e.is_public||null!=e.org;function D(e,r,n,a){return(0,b.m3)(e)||a?I.Lu.PUBLIC:P(e.roles)?e.roles.is_public||(0,g.AC)(e)?I.Lu.PUBLIC:I.Lu.ORG:null!=r&&n?I.Lu.ORG:I.Lu.PUBLIC}function k(e,r,n,a){let i=K(r.team_id,n,e,r.parent_org_id||null);if(0===i.length)throw Error("Called getDefaultHubFilePublishingMetadataAuthor when no valid author exists");return B(e,i,n.authedProfilesById,n.user?.id,a)}function M(e,r){return e.creator.id===r}function F(e,r){if(e){let n=j(r,e);if(n)return n}let n=z(r,e);if(0===n.length)throw Error("Called getDefaultPluginPublishingMetadataAuthor when no valid author exists");return B(e,n,r.authedProfilesById,r.user?.id)}function x(e,r,n){return e?.id&&Object.keys(e.versions).length>0?function(e,r,n){if((e.community_publishers?.accepted||[]).length>0){let a=(0,E.cV)(e),i=a&&r[a.id];return i?.team_id?{team_id:i.team_id}:i?.org_id?{org_id:i.org_id}:{user_id:n||e.creator.id}}let a=r[e.publisher.id];return a?.org_id?{org_id:a.org_id}:a?.team_id?{team_id:a.team_id}:{user_id:a?.primary_user_id||e.creator.id}}(e,r,n):null}function U(e){let r;return e?.team_id?r={team_id:e.team_id}:e?.org_id&&(r={org_id:e.org_id}),r}function B(e,r,n,i,o){if(0===r.length)throw Error("Called getDefaultPublishingMetadataAuthor when no valid author exists");let s=x(e,n,i);if(s&&r.some(e=>V(e,s)))return s;if(o&&r.find(e=>(0,a.bN)(e,o)))return o;let l=r.find(W);if(l)return l;let c=r.find(G);return c?c:r.find(H)||r[0]}function V(e,r){return"team_id"in e?"team_id"in r&&e.team_id===r.team_id:"org_id"in e?"org_id"in r&&e.org_id===r.org_id:"user_id"in e&&"user_id"in r&&e.user_id===r.user_id}let G=e=>"org_id"in e,H=e=>"team_id"in e,W=e=>"user_id"in e;function K(e,r,n,a){let i=[];if((n?.community_publishers?.accepted||[]).length>0){if(!e&&!a)return[{user_id:r.user.id}];let i=n&&(0,E.cV)(n),o=i?r.authedProfilesById[i.id]:null;if(o?.team_id)return(0,y.hasAdminRoleAccessOnTeam)(o?.team_id,r)?[{team_id:o.team_id}]:[];if(o?.org_id)return(0,y.canAdminOrg)(o?.org_id,r)?[{org_id:o.org_id}]:[]}if(r.currentUserOrgId){let n=r.orgById[r.currentUserOrgId];if(!n)return[];if((0,y.canAdminOrg)(r.currentUserOrgId,r)&&(i.push({org_id:r.currentUserOrgId}),n.cmty_publish_as_user_enabled&&i.push({user_id:r.user.id})),e&&r.teams[e]){if(r.teams[e]?.org_access==="secret")return[];((0,O.Bg)(n.shared_org_license_group_settings)?(0,y.canAdminOrg)(r.currentUserOrgId,r):(0,y.hasAdminRoleAccessOnTeam)(e,r))&&i.push({team_id:e})}return i}return e?((0,y.hasAdminRoleAccessOnTeam)(e,r)&&i.push({team_id:e}),i.push({user_id:r.user.id}),i):[{user_id:r.user.id}]}async function Y(e){let{data:r,status:n}=await A.s.getEditors({fileKey:e.key});if(200===n)return r.meta}function $(e,r,n,a){let i;if(!r)return(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.you_do_not_have_edit_permissions"):(0,h.t)("general.error");if("is_template"in e&&e.is_template||e.trackTags?.isTemplate||"is_new_user_playground_library"in e&&e.is_new_user_playground_library||e.track_tags?.source==="default")return(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_default_files"):(0,h.t)("general.error");if(e.has_file_link_password||e.hasFileLinkPassword)return(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_password_protected_files"):(0,h.t)("general.error");if(i="parent_org_id"in e?e.parent_org_id:"parentOrgId"in e?e.parentOrgId:null,0===K("team_id"in e?e.team_id:e.teamId,n,a,i||null).length)return(0,h.t)("community.permissions_modal_publish_tab.footer.publish_admins_only");let o=!!n.figFileDuplicatedFromHubFile[e.key],s=!a;return o&&s?(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.remixes_unavailable_until_first_publish"):(0,h.t)("general.error"):null}function j(e,r){if(r.publisher.id&&e.user)switch(r.publisher.entity_type){case v.o1.ORG:{let n=Object.values(e.orgById).find(e=>e.community_profile_id===r.publisher.id);return{org_id:n?.id??e.currentUserOrgId??""}}case v.o1.TEAM:{let n=Object.values(e.teams).find(e=>e.community_profile_id===r.publisher.id);return{team_id:n?.id||""}}default:return{user_id:r.creator.id}}return null}function z(e,r,n=!0){let a=[],i=n&&r?j(e,r):null;return e.currentUserOrgId&&(0,y.canAdminOrg)(e.currentUserOrgId,e)&&a.push({org_id:e.currentUserOrgId}),Object.keys(e.teams).forEach(r=>{let n=e.teams[r];n&&"secret"!==n.org_access&&(0,y.hasAdminRoleAccessOnTeam)(r,e)&&a.push({team_id:r})}),a.push({user_id:e.user.id}),i&&!a.some(e=>V(e,i))&&a.unshift(i),a}function q(e,r){if(!e)return!1;let{team_id:n,org_id:a}=e;if("user_id"in r){let n=e.associated_users;return!!r.user_id&&r.user_id===e.primary_user_id||n?.some(e=>e.user_id===r.user_id)}return"team_id"in r&&n===r.team_id||"org_id"in r&&a===r.org_id}function Z(e){let r=c.D.getState();return"user_id"in e?r.authedUsers.byId[e.user_id]:"org_id"in e?r.orgById[e.org_id]:"team_id"in e?r.teams[e.team_id]:void 0}function X(e,r){if("org_id"in e)return r.orgById[e.org_id]?.name??null;if("team_id"in e)return r.teams[e.team_id]?.name??null;{let e=r.user&&(0,E.sD)(r.user,r.authedProfilesById);return e?.public_at&&e?.name?e.name:e?.public_at&&e?.profile_handle?`@${e.profile_handle}`:r.user?.handle||null}}function J(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?(0,h.t)("community.publishing.org_name",{org:n.name}):(0,h.t)("general.fallback_org_name")}if("team_id"in e){let n=r.teams[e.team_id];return n?(0,h.t)("community.publishing.team_name",{team:n.name}):(0,h.t)("general.fallback_team_name")}{let n=r.authedUsers.byId[e.user_id]??r.user,a=(0,E.sD)(n,r.authedProfilesById);return a?a.name:n?.name||(0,h.t)("general.fallback_user_name")}}function Q(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?.community_profile_handle||null}if("team_id"in e){let n=r.teams[e.team_id];return n?.community_profile_handle||null}{let n=r.authedUsers.byId[e.user_id]??r.user,a=(0,E.sD)(n,r.authedProfilesById);return a?a.profile_handle:n?.handle||null}}let ee=[T.yj.PNG,T.yj.JPEG];function et(e,r="Image"){if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));let n=(0,_.S)(e.type,T.yj);if(!n||!ee.includes(n))throw Error((0,h.t)("community.publishing.error_thumbnail_image_wrong_format",{filename:r}));if(e.size>E.Uc)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(E.Uc/1e6)}));return e.size}function er(e){return new Promise((r,n)=>{let a=new Image;a.onload=()=>r(a),a.onerror=n,a.src=e})}let en=new Set;async function ea(e,r){if(null===e.files||!e.files[0])throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found_no_filename"));r&&eh(r);let n=e.files[0];et(n,(0,h.t)("community.publishing.thumbnail_image"));let[a,i]=await Promise.all([er(URL.createObjectURL(n)),(0,C.c)(n)]);return en.add(a.src),{url:a.src,buffer:new Uint8Array(i)}}async function ei(e,r,n=f.en){let a=[];for(let i of Array.from(e).slice(0,n))if(r&&i.type.startsWith("video/")){!function(e){let r=e.name;if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));if(!T.VY.includes(e.type))throw Error((0,h.t)("community.publishing.error_video_wrong_format",{filename:r}));if(e.size>E.Gq)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(E.Gq/1e6)}))}(i);let e=URL.createObjectURL(i),[r,n]=await Promise.all([e_(i),(0,N.jm)(e),el(e,i.name)]),s=URL.createObjectURL(new Blob([n]));en.add(e),en.add(s),a.push({url:e,buffer:r.bytes,sha1:r.sha1,type:"video",thumbnail_url:s,thumbnail_buffer:n,thumbnail_sha1:(0,o.Et)(n)})}else{et(i,(0,h.t)("community.publishing.carousel_media_image"));let[e,r]=await Promise.all([er(URL.createObjectURL(i)),(0,C.c)(i)]);en.add(e.src);let n=new Uint8Array(r);a.push({url:e.src,buffer:n,sha1:(0,o.Et)(n),type:"image"})}return a}async function eo(e,r){return null===e.files||0===e.files.length?Promise.resolve([]):await ei(e.files,r)}function es(e){if(!e||!e.length)return(0,h.t)("community.publishing.upload_at_least_one_image")}async function el(e,r){if(await new Promise((r,n)=>{let a=document.createElement("video");a.preload="metadata",a.addEventListener("error",e=>{n(e.message)}),a.addEventListener("loadedmetadata",()=>{r(a.duration)}),a.src=e,a.currentTime=0,a.load(),setTimeout(()=>{n("Video load timeout during video length validation")},1e4)})>f.GT)throw(0,h.t)("community.publishing.error_video_too_long",{filename:r,max_length:f.GT})}function ec(e){let r=[],n=[],a=[];return e&&e.forEach((e,i)=>{if("buffer"in e){if("video"===e.type){if(!e.thumbnail_buffer)throw Error((0,h.t)("community.publishing.error_video_thumbnail_not_found"));let r={carousel_position:i,sha1:(0,o.Et)(e.buffer),bytes:e.buffer,video_thumbnail_buffer:e.thumbnail_buffer,video_thumbnail_sha1:(0,o.Et)(e.thumbnail_buffer)};n.push(r)}else{let n={carousel_position:i,sha1:(0,o.Et)(e.buffer)};r.push(n),a.push(n)}}else if("id"in e){let r="video"===e.type?{carousel_position:i,sha1:e.sha1,video_file_uuid:e.video_file_uuid,video_thumbnail_sha1:e.thumbnail_sha1}:{carousel_position:i,sha1:e.sha1};a.push(r)}}),{uploadImages:r,uploadVideos:n,allMedia:a}}function ed(e,r){return r&&r?.length&&e?.length?e.map(async({url:e,fields:n,carouselPosition:a,signedCloudfrontUrl:i})=>{let o=r[a];if(!o||!("buffer"in o)||!o.buffer)return!1;let c=new FormData;Object.entries(n).forEach(([e,r])=>c.append(e,r)),c.set("content-type",(0,l.i)(o.buffer)??"image/png");let u=new Blob([o.buffer]);try{if(i&&(0,d.kc)().ext_s3_url_use_figma_domains){let e=await (0,C.c)(u);await p.Ay.crossOriginPut(i,e,{raw:!0,headers:{"Content-Type":u.type,"x-amz-acl":"bucket-owner-full-control"}})}else{let r=new FormData;Object.entries(n).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,l.i)(o.buffer)??"image/png"),r.append("file",u),await fetch(e,{method:"POST",body:r})}}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,h.t)("community.actions.error_uploading_carousel_image_error",{error:(0,h.Jv)(e,e.data?.message||"unknown error")}))}return!0}):[]}async function eu(e,r,n,a){let i,o,c,d;let{uploadImages:u,allMedia:p}=ec(r);if(!e?.length&&!u?.length)return{cover_image:{cover_image_uploaded:!1,signature:null},carousel_images:p};try{let e=await w.H.setupMultiImageUploadForHubFile({file_version_id:n,hub_file_id:a,images_sha1:u});({cover_image:{cover_image_upload_url:i,signature:o,fields:c},carousel_images:d}=e.data.meta)}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,h.Jv)(e,(0,h.t)("community.actions.could_not_connect_to_the_server")))}let _=d.map(({url:e,fields:n,carousel_position:a})=>{let i=r[a];if(!i||!("buffer"in i)||!i.buffer)return;let o=new FormData;return Object.entries(n).forEach(([e,r])=>o.append(e,r)),o.set("content-type",(0,l.i)(i.buffer)??"image/png"),o.append("file",new Blob([i.buffer])),fetch(e,{method:"POST",body:o})});if(e?.length){let r=new FormData;Object.entries(c).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,l.i)(e)??"image/png"),r.append("file",new Blob([e])),_.push(fetch(i,{method:"POST",body:r}))}try{return await Promise.all(_),{cover_image:{cover_image_uploaded:!!e?.length,signature:o},carousel_images:p}}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,h.Jv)(e,(0,h.t)("community.actions.error_connecting_to_server_to_upload_file_images")))}}function em(e,r){return r?e.findIndex(e=>e.sha1===r.sha1):-1}function ep(e){en.has(e)&&(URL.revokeObjectURL(e),en.delete(e))}function eh(e){e&&(e.url&&ep(e.url),"type"in e&&"video"===e.type&&ep(e.thumbnail_url))}async function e_(e){let r=new Uint8Array(await (0,C.c)(e));return{sha1:(0,o.Et)(r),bytes:r}}function eg(e){if(!e.currentUserOrgId)return!1;let r=(0,L.xw)(e);return!(r&&r.agreed_to_community_tos_at)}function ef(e,r){return Object.entries(r).reduce((r,[n,a])=>r+Number(e.includes(n)&&!!a),0)}function eE(e,r,n){if("object"==typeof e&&"fields"in e&&"imagePath"in e){let{fields:a,imagePath:i,signedCloudfrontUrl:o}=e;if(o&&(0,d.kc)().ext_s3_url_use_figma_domains)return p.Ay.crossOriginPut(o,n,{raw:!0,headers:{"Content-Type":r.type,"x-amz-acl":"bucket-owner-full-control"}});let s=new FormData;return Object.entries(a).forEach(([e,r])=>s.append(e,r)),s.set("Content-Type",r.type),s.append("file",r),p.Ay.crossOriginPost(i,s,{raw:!0,headers:{"Content-Type":r.type}})}return"string"==typeof e?p.Ay.crossOriginPut(e,n,{raw:!0,headers:{...p.Ay.defaults.headers,"Content-Type":r.type}}):Promise.reject(Error("Invalid presigned_url"))}async function ey(e,r,n,a,s){let{video:l,videoThumbnail:c}=await S.v.getVideoUploadUrl({resourceType:e,id:r,sha1:n.sha1,thumbnail_sha1:s}),m=null;if(l){let{url:e,fields:r,signedCloudfrontUrl:a}=l;if(a&&(0,d.kc)().ext_s3_url_use_figma_domains&&(0,d.kc)().ext_s3_url_videos_use_figma_domains){let e=(0,i.lF)((0,o.aD)(n.sha1));m=p.Ay.crossOriginPut(a,n.bytes,{raw:!0,headers:{"Content-Type":"video/mp4","x-amz-acl":"bucket-owner-full-control","x-amz-checksum-sha1":e}}).then(()=>r.key||"")}else m=(0,u.VV)(e,r,n,"video/mp4")}let _=new Blob([a],{type:"image/png"}),g=eE({imagePath:c.url,fields:c.fields,signedCloudfrontUrl:c.signedCloudfrontUrl},_,a).catch(e=>{throw Error((0,h.t)("community.actions.error_uploading_plugin_video_thumbnail_error",{error:(0,h.Jv)(e,e.data?.message||"unknown error")}))}),[f]=await Promise.all([m,g]);return await eb(n.sha1,r,e,f??"",s,l?.blobUploadCommitKey||"")}async function eb(e,r,n,a,i,o){let s=new URLSearchParams;return s.append("sha1",e),s.append("uploadPath",a),s.append("resourceId",r),s.append("resourceType",n),s.append("blobUploadCommitKey",o),{videoFileUuid:(await p.Ay.post(`/api/upnode/video?${s.toString()}`)).data.meta.video_file_uuid,sha1:e,videoThumbnailSha1:i}}},154267:(e,r,n)=>{n.d(r,{$Q:()=>E,GS:()=>b,JB:()=>T,N4:()=>y,hT:()=>v,wJ:()=>f});var a=n(411855);n(188507);var i=n(33011),o=n(875877),s=n(864941),l=n(906597),c=n(957020),d=n(212552);n(60329),n(744297);var u=n(401562),m=n(804970),p=n(176160),h=n(661137),_=n(183739);n(747765);var g=n(689102);let f=(0,u.D)(e=>22!==e.length&&!e.match(/\D/));function E(e){return(0,a.useMemo)(()=>e&&f(e)?e:null,[e])}function y(e){let r=(0,l.oA)(e),{id:n,thumbnail_url:a,library_key:o,publisher:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:a,library_key:o??(0,i.l)(""),author_name:s.name,author_handle:s.profile_handle}}function b(e){let{library_file_name:r,library_file_key:n,thumbnail_url:a,library_key:i,author_name:o,author_handle:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:a,library_key:i,author_name:o,author_handle:s}}function v(e){let{file:r,components:n,stateGroups:a,styles:i,variables:o,variableSets:s}=e,{name:l,key:c,type:d,thumbnail_url:u,library_key:m,author_name:p,author_handle:h}=r;return{library_file_key:c,library_file_name:l,thumbnail_url:u,num_components:n.length,num_state_groups:a.length,num_styles:i.length,num_variable_collections:s.length,num_variables:o.length,num_module_assets:0,num_library_assets:0,type:d,library_key:m,author_name:p,author_handle:h}}let T=(0,o.atom)(e=>{let r=e(g.Me),n=(0,g.jv)(r?.id)?r?.id:null,a=e(h.h0),i=e(p.yV),o=i?i.parentOrgId:a,l=e(m.mQ),c=o?l[o]:null,u=e(_.U8U.Query(n||o?{teamId:n||"-1",orgId:o}:null)),f=e(d.AS).enabled;return"loaded"===u.status&&(0,s.rM)(u)?(0,s.Pp)(u.data.org,u.data.team,f):(0,s.MJ)(c,r,f)})},973393:(e,r,n)=>{n.d(r,{EO:()=>U,FP:()=>x,OY:()=>B,Qj:()=>K,Rm:()=>V,Y8:()=>z,aQ:()=>Z,ej:()=>D,gn:()=>X,kA:()=>P,lt:()=>$,ul:()=>q,vT:()=>k,vl:()=>M,xp:()=>j,y1:()=>W,zH:()=>H});var a=n(411855),i=n(188507),o=n(777535),s=n(895925),l=n(885123),c=n(163773),d=n(841962),u=n(437068),m=n(544920);n(719334);var p=n(76265),h=n(960449),_=n(864986),g=n(419378),f=n(66683);n(870355);var E=n(736041),y=n(628220),b=n(648735),v=n(349628),T=n(492366);n(895812);var I=n(7395),S=n(534173),w=n(829126),A=n(810273),C=n(304547),N=n(401562),L=n(15092),O=n(263352);function R(e,r,n,a){return i=>{i(E.$O({type:w.h.type,data:{userId:e.id,resource:r,onSuccess:()=>{i(n=>{((0,T.I0)(r)||(0,T.xQ)(r))&&n(y.fR(r,e.id))}),n&&n()},onCancel:a}}))}}let P=(0,N.n)((e,r,n,a,i,o)=>{let l=(0,d.kc)().community_hub_admin&&n&&(0,f.AC)(n);return new Promise(d=>{let u=()=>{if(r){if(a||l){var i;e((i=()=>{K({type:"PAID"}),d()},e=>{e(E.$O({type:w.h.type,data:{userId:r.id,resource:n,localResource:a,onSuccess:i,onCancel:d,noInteractionMode:!0}}))}));return}(0,T.m3)(n)?e(R(r,n,()=>d(),()=>d())):s.k.error("Can only initiate checkout for a monetized or local resource.")}else{e(e=>{e(m.Ts({origin:"freemium_checkout_modal_in_open_session",redirectUrl:c.Ay.location.pathname,signedUpFromOpenSession:!0})),e((0,E.to)({type:S.x,data:{headerText:(0,p.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam")}}))});return}};o===A.P.SKIP?u():e(E.$O({type:A.V.type,data:{type:r?o||A.P.PAID_FEATURE:A.P.LOGGED_OUT,onContinue:u,onClose:d,plugin:n&&(0,O.uF)(n)||a||i,monetizedResourceMetadata:n?.monetized_resource_metadata}}))})});function D(e){let r=(0,i.wA)(),n=(0,i.d4)(e=>e.authedActiveCommunityProfile),s=(0,i.d4)(e=>e.authedUsers),l=(0,h.I)(e);return a.useCallback(()=>{if(!e)return;let a=(0,g.QQ)(l),i=(0,T.m3)(e);if((0,o.sx)("cmty_resource_usage_action",{resourceType:(0,_.Dl)(e),resourceId:e.id,profileId:n?.id,hasActiveCommunityResourcePayment:a,isMonetizedResource:i}),!i||a||!1===function(e,r,n){if(!(0,T.m3)(n))return!1;let a=(0,v.G)({authedActiveCommunityProfile:e,authedUsers:r}),{usersCanPurchase:i,publishers:o}=(0,g.V4)(a,n);return(0!==i.length||0!==o.length)&&(0!==i.length||0===o.length)}(n,s,e))return;let c=(0,v.G)({authedActiveCommunityProfile:n,authedUsers:s}),{usersCanPurchase:d,publishers:u}=(0,g.V4)(c,e);if((0,o.sx)("Checkout Flow Entered",{resourceType:(0,_.Dl)(e),resourceId:e.id,numLoggedInAssociatedUsersThatCanPurchase:d.length,numLoggedInAssociatedPublishers:u.length}),1===d.length&&0===u.length){r(R(d[0],e));return}r((0,E.to)({type:C.I,data:{onUserSelect:n=>{(0,o.sx)("Pre Purchase User Selector Modal - User Selected",{resourceType:(0,_.Dl)(e),resourceId:e.id,userIdForPurchase:n.id}),r(R(n,e))},resource:e}}))},[e,l,n,s,r])}function k(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return(0,g.QQ)(n)}function M(e,r){let{publishers:n}=(0,g.V4)([r],e);return n.length>0}function F(e,r,n){return!(!e||!(0,T.m3)(e)||(0,T.PM)(e)||!(0,T.U)(e)&&((0,I.f5)(e)||(0,T.zF)(e))||n&&M(e,n))&&!(k(e,r)&&!function(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return n&&(0,g.UO)(n)}(e,r))}function x(){return(0,i.d4)(e=>e.communityPayments)}function U(e){return F(e,x(),(0,L.iZ)()||void 0)}function B(e){let r=x();return(0,T.m3)(e)&&k(e,r)}function V(e){return F(e,l.D&&l.D.getState().communityPayments,l.D&&l.D.getState().user||void 0)}let G="local-resource-payment";var H=(e=>(e.PAID="PAID",e.UNPAID="UNPAID",e.NOT_SUPPORTED="NOT_SUPPORTED",e))(H||{});function W(){return(0,u.DN)().get(G)}function K(e){(0,u.DN)().set(G,e)}function Y(e,r){if(r&&(0,T.m3)(r))return e?.[r.monetized_resource_metadata.id]||r.community_resource_payment}function $(e){return Y(x(),e)}function j(e){let r=(0,i.d4)(r=>(0,O.my)(e,r.publishedPlugins)),n=$(r);return a.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function z({extension:e,publishedPlugins:r,publishedWidgets:n,communityPaymentsState:a}){let i=((0,I.k0)(e)?n:r)[e.plugin_id];if(!i)return;let o=Y(a,i);return{...i,community_resource_payment:o}}function q(e){let r=(0,b.cW)()[e],n=$(r);return a.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function Z(e){let r=(0,i.d4)(r=>r.publishedWidgets[e]),n=$(r);return a.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function X(e){let r=$(e);return!!r&&(0,g.UO)(r)}},903600:(e,r,n)=>{n.d(r,{c6:()=>d,hI:()=>u,Ay:()=>c});var a,i=n(790522);!function(e){e[e.STARTING=0]="STARTING",e[e.FRONTMATTER=1]="FRONTMATTER",e[e.BODY=2]="BODY",e[e.FOOTER=3]="FOOTER"}(a||(a={}));var o=n(329933),s=n(703079),l=n(254903);let c=(0,i.yu)({onError:e=>{(0,s.Rh)("web.cortex.error",{route:e})},buildExtraHeaders:()=>{let e={};return l.nt.aiFeaturesUseBedrockLlama.getValue()&&(e[o.H1.INTERNAL_USE_LLM_PROVIDER]="amazon-bedrock"),e}});class d{constructor(e){this.stream=e}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read(),{done:n,value:a}=await r;if(n)break;yield a}}finally{e.releaseLock()}}}class u{constructor(e,r){this.stream=e,this.timeoutMs=r}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read();try{let e=new Promise((e,r)=>{setTimeout(()=>{r(Error("Timeout"))},this.timeoutMs)}),{done:n,value:a}=await Promise.race([r,e]);if(n)break;yield a}catch(e){if(e instanceof Error&&"Timeout"===e.message)break;throw e}}}finally{e.releaseLock()}}}},626673:(e,r,n)=>{n.d(r,{BQ:()=>m,Ay:()=>u,sZ:()=>p,_0:()=>h});var a=n(104352),i=n(465251),o=n(875877),s=n(402985),l=n(804970),c=n(886231),d=n(176160);function u(){return{orgId:o.atomStore.get(l._s)||null,teamId:o.atomStore.get(d.As)||null,fileKey:o.atomStore.get(d.ze)||null,userId:o.atomStore.get(c.kS)||null,trackingSessionId:(0,s.f)()}}var m=(e=>(e.RATE_LIMIT_EXCEEDED="rate_limit_exceeded",e.CONTENT_LENGTH_LIMIT="content_length_limit",e.UNSAFE_OR_HARMFUL_CONTENT="unsafe_or_harmful_content",e.GENERIC="generic",e.OFFLINE="offline",e.METER_EXCEEDED="meter_exceeded",e.NOT_IMPLEMENTED="not_implemented",e))(m||{});function p(e){if(e instanceof TypeError&&!navigator.onLine)return"offline";if(e instanceof i.CortexErrorV2){if(i.ProviderRateLimitExceededError.isInstance(e)||i.CortexRateLimitExceededError.isInstance(e))return"rate_limit_exceeded";if(i.ClientContentLengthLimitExceededError.isInstance(e)||i.ProviderContentLengthLimitExceededError.isInstance(e))return"content_length_limit";if(i.UnsafeOrHarmfulPromptError.isInstance(e)||i.ProviderUnsafeOrHarmfulContentError.isInstance(e))return"unsafe_or_harmful_content";if(i.NotImplementedError.isInstance(e))return"not_implemented";else if(i.OfflineError.isInstance(e))return"offline";else if(i.MeterExceededError.isInstance(e))return"meter_exceeded";else if(i.PayloadTooLargeError.isInstance(e)||e?.statusCode===413)return"content_length_limit"}if(e instanceof a.G1)switch(e.type){case"rate_limit_exceeded":return"rate_limit_exceeded";case"content_length_limit_exceeded":case"payload_too_large":return"content_length_limit";case"unsafe_or_harmful_content":return"unsafe_or_harmful_content";case"offline":return"offline";case"meter_exceeded":return"meter_exceeded";case"generic":if(e.data&&"status"in e.data&&413===e.data.status)return"content_length_limit"}return"generic"}function h(e){return e instanceof a.G1&&"meter_exceeded"===e.type&&!!e.data.resetsAt}},253544:(e,r,n)=>{n.d(r,{PD:()=>g,wg:()=>y});var a=n(875877),i=n(570423),o=n(176160),s=n(927150),l=n(313449),c=n(532847),d=n(187167),u=n(11814),m=n(467737),p=n(804970),h=n(955597),_=n(780017);let g=(0,m.Z1)(h.Z_,(e,r)=>{let n=r(o.yV);if(null==n||null==e)return!1;let a=e.map(e=>e.team).find(e=>null!=e&&e.id===n.teamId);return null!=a&&c.ng.getProTrialStatus({grace_period_end:a.gracePeriodEnd?a.gracePeriodEnd.toISOString():null,grace_period_type:a.gracePeriodType})===u.a.IN_TRIAL});(0,m.J9)([h.Hh],([e],r)=>{let n=r(o.yV),a=r(p._s)?null:e;return!!n&&!!a&&!n.teamId&&!n.parentOrgId&&n.folderId===a}),(0,s.bt)(({openFile:e})=>{let r=e?.parentOrgId!=null,n=e?.team==null;return r&&n});let f=(0,s.bt)(({progressBarState:e})=>(0,i.T)(e?.mode));(0,a.atom)(e=>new Promise(r=>{e(f)||r(!1)})),(0,_.r1)("figjam_editor_onboarded");let E=(0,m.Z1)(h.Vm,(e,r)=>{let n=r(o.yV);return n?.teamId?e?.find(e=>e.id===n?.teamId):null});(0,m.J9)([p.KI,E],([e,r],n)=>{let a=n(o.yV),i=a?.parentOrgId?e[a.parentOrgId]:null,s=r?{id:r.id,subscription:r.subscription,student_team:!!r.studentTeamAt,grace_period_end:r.gracePeriodEnd?.toDateString()||null}:null;return(0,d.M_)({editorType:a?.editorType??null,org:i,team:s})}),(0,s.bt)(({showEditButton:e})=>e??!1),(0,a.atom)(e=>{let r=e(o.yV);if(!r)return!1;let{team:n}=r;return null!=n&&null==n.orgId&&!(0,l.w5)({subscription:n.subscription,student_team:null!=n.studentTeamAt,grace_period_end:n.gracePeriodEnd?.toISOString()??null})});let y=(0,a.atom)(e=>{let r=e(o.yV);return r?.canEdit??!1});(0,a.atom)(e=>{let r=e(o.yV);return!!r&&r.canView&&!r.canEdit})},804970:(e,r,n)=>{n.d(r,{KI:()=>u,UC:()=>_,ZS:()=>p,_s:()=>m,mQ:()=>h,rg:()=>d});var a=n(875877),i=n(927150),o=n(314540),s=n(183739),l=n(965467),c=n(467737);let d=(0,c.Z1)(s.Tej.Query({}),e=>e.currentUser.orgUsers),u=(0,c.Z1)(d,e=>{let r=e?.map(e=>e.org);if(void 0===r)return{};let n={};for(let e of r)null!=e&&(n[e.id]={...e,bigmaEnabled:!!e.bigmaEnabledAt,voiceEnabled:!e.voiceDisabledAt,widgetsWhitelistEnforced:!!e.widgetsWhitelistEnforced});return n}),m=(0,i.bt)(e=>e.currentUserOrgId),p=(0,c.J9)([u],([e],r)=>{let n=r(m);return null!=n?e[n]:null}),h=(0,i.bt)(e=>e.orgById),_=(0,a.atomFamily)(e=>(0,c.Z1)(s.s5h.Query({orgId:e}),e=>!!e.org?.workspaces?.length&&!!e.org?.bigmaEnabledAt));(0,c.J9)([p,d,l.N],([e,r,n],a)=>{if(!e)return!1;let i=a(h)[e.id];if(!i.bigma_enabled||!i.workspaces_nux_active_at)return!1;let s=r?.find(r=>r.orgId===e.id&&r.userId===n);return!!s&&s.permission!==o._D.GUEST}),(0,c.J9)([s.Tej.Query({}),p],([e,r])=>{let{orgUsers:n}=e.currentUser;if(null!=r){let e=n?.find(e=>e.orgId===r.id);if(e)return"full"===e.designPaidStatus?"design":"full"===e.devModePaidStatus?"dev mode":"none"}return null}),(0,c.Z1)(u,e=>!!Object.values(e).find(e=>e.k12GoogleOrg))},300574:(e,r,n)=>{n.d(r,{e:()=>l});var a=n(314540),i=n(313449),o=n(467737),s=n(955597);(0,o.Z1)(s.Vm,e=>(e??[]).some(e=>null!=e&&!(0,i.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})&&!e.orgId&&e.canEdit));let l=(0,o.Z1)(s.Vm,e=>(e??[]).filter(e=>null!=e&&e.subscription===a.Qh.OK&&null==e.gracePeriodEnd&&!e.orgId&&e.canEdit))},955597:(e,r,n)=>{n.d(r,{Fy:()=>g,Hh:()=>f,Vm:()=>b,Z_:()=>y,mp:()=>_,t:()=>I,zN:()=>E});var a=n(538971),i=n(841962),o=n(424652),s=n(875877),l=n(927150),c=n(183739),d=n(313449),u=n(380906),m=n(465424),p=n(467737),h=n(804970);(0,p.J9)([c.Tej.Query({}),h.ZS],([e,r])=>null!=e.currentUser.id&&r?.canRead?m.qo.ORG:m.qo.PERSONAL);let _=(0,p.Z1)(c.Tej.Query({}),e=>e.currentUser.createdAt),g=(0,p.Z1)(_,e=>e.getTime()<=Date.now()-12096e5),f=(0,p.J9)([h.rg,c.Tej.Query({})],([e,r],n)=>{let a=n(h._s);if(!a)return r.currentUser.draftsFolderId;{let r=e?.find(e=>e.orgId===a);return r?.draftsFolderId||null}});(0,p.Z1)(c.Tej.Query({}),e=>{let r=e.currentUser.email;return(0,a.jm)(r)||!!r?.endsWith("@dev.figma.com")});let E=(0,p.Z1)(c.Tej.Query({}),e=>null!=e.currentUser.studentValidatedAt);(0,p.Z1)(c.UpR.Query({}),e=>e.currentUser.eduPeriodEnd);let y=(0,p.Z1)(c.Tej.Query({}),e=>e.currentUser.teamRoles),b=(0,p.Z1)(y,e=>e?.map(e=>e.team).filter(e=>null!=e)),v=(0,l.bt)(e=>e.isFreeUser),T=(0,p.J9)([h.rg,b],([e,r])=>(!e?.length||!(e.length>0))&&(null==r||!r.some(e=>e.canEdit&&(0,d.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})))),I=(0,p.Z1)(T,(e,r)=>(0,i.kc)().ps_benchmark?r(v):e);(0,p.Z1)(h.rg,e=>!!e?.length&&e.length>0),(0,p.Z1)(c.Tej.Query({}),e=>{let r=e.currentUser.email;return null!=r?(0,a.qe)(r):void 0});let S=(0,p.Z1)(c.Tej.Query({}),e=>e.currentUser.profile?.jobTitle);(0,p.Z1)(S,e=>{let r=(0,o.HB)(e);return"designer"!==r&&"other"!==r&&"unknown"!==r}),(0,p.Z1)(c.Tej.Query({}),e=>e.currentUser.profile?.usagePurpose);let w=(0,l.bt)(e=>e.authedProfilesById);(0,s.atom)(e=>Object.values(e(w)).some(e=>!!e.org_id||!!e.team_id)),(0,p.Z1)(c.Tej.Query({}),e=>e.currentUser.email),(0,p.Z1)(c.Tej.Query({}),e=>e.currentUser.emailValidatedAt);let A=(0,l.bt)(e=>e.userAnalyticsData);(0,s.atomFamily)(e=>(0,s.selectAtom)(A,r=>{if(null==r)return;let n=r[e];return u.bW.includes(e)&&n?new Date(n):n})),(0,p.J9)([c.Tej.Query({}),h.ZS],([e,r])=>{let n="loaded"===e.currentUser.externalRestrictedOrgId.status?e.currentUser.externalRestrictedOrgId.data:null;return!!(e.currentUser&&n&&r?.id!==n)})},780017:(e,r,n)=>{n.d(r,{Fu:()=>c,r1:()=>u});var a=n(875877),i=n(183739),o=n(966048),s=n(467737);let l=(0,s.Z1)(i.Tej.Query({}),e=>e.currentUser.userFlags.reduce((e,r)=>({...e,[r.name]:r}),{})),c=(0,a.atomFamily)(e=>(0,s.Z1)(l,r=>r[e])),d=e=>e.length>0?new Date(Math.max(...e.map(Number))):void 0;(0,s.Z1)(l,e=>d(Array.from(o.V5).map(r=>e[r]?.updatedAt).filter(e=>null!=e)));let u=(0,a.atomFamily)(e=>(0,s.Z1)(l,r=>null!=r[e]));u("file_browser_onboarded"),c("not_gen_0")},737686:(e,r,n)=>{function a(e,r){return!!e[r]}function i(e){return document.querySelectorAll(`[data-onboarding-key=${JSON.stringify(e)}]`).length>0}n.d(r,{KI:()=>i,mW:()=>a}),n(314540),n(313449),n(532847),n(187167),n(11814),n(966048),n(465424)},8153:(e,r,n)=>{n.d(r,{X:()=>a});let a="curator_global_request_close";var i=(e=>(e.FigjamUniversalInsertsMenuOpen="figjam_universal_inserts_menu_open",e.FigjamDLTSubmenuOpen="figjam_DLT_submenu_open",e))(i||{})},452749:(e,r,n)=>{n.d(r,{RI:()=>u});var a=n(777535),i=n(890882),o=n(841962),s=n(670848);n(573626);var l=n(759240),c=n(763650);let d=new Set([l.koo.id,l.dvJ.id,l.L6E.id,l.Nh9.id]),u=new c.m("LimitDevModeUpsellFrequency","Prevent showing more than on dev mode upsell in a 24 hour period",(e,r)=>{if(!(0,o.kc)().limit_dev_mode_upsell_frequency)return!0;let n=(0,s.y)(r.id);return!d.has(n)||!e.lastSeenDevModeUpsell||!(e.lastSeenDevModeUpsell>(0,i.A)().subtract(1,"day").toDate())||(a.az.trackDefinedEvent("dev_mode.upsell_supressed",{upsell:n,reason:"seen_in_last_day"}),!1)})},345087:(e,r,n)=>{n.d(r,{Op:()=>i,gV:()=>o,nr:()=>s});var a=n(800572);function i(e){let r=new Map,n=new Map;for(let{id:a,...i}of e.states){if(r.has(a))throw Error(`Duplicate state ID ${a.toString()} found when building state machine`);if(r.set(a,i),null==i.transitions)continue;let e=new Map;for(let{event:r,...o}of(n.set(a,e),i.transitions)){let n=e.get(r);null==n&&(n=[],e.set(r,n)),n?.push(o)}}return{config:e,isComplete(e){let n=r.get(e);return n?.terminal??!1},isInitial:r=>r===e.initial,start:()=>e.initial,transition(e,r){let a=n.get(e)?.get(r.id);if(null==a)return null;for(let n of a)if(null==n.condition||n.condition({from:e,to:n.target,event:r}))return n.target;return null}}}function o(e){let r=new Set;for(let n of e.config.states)if(null!=n.transitions)for(let e of n.transitions)e.event===a.b&&e.meta?.userEvents!=null&&e.meta.userEvents.forEach(e=>r.add(e));return r}function s(e,r,n){var i,o;let s=new Set("string"==typeof e?[e]:e),l={userEvents:[...s]};return i=a.b,o={condition:e=>s.has(e.event.type)&&(n?.condition?.(e)??!0),meta:l},{event:i,target:r,condition:o?.condition,meta:o?.meta}}},201545:(e,r,n)=>{n.d(r,{zl:()=>o});var a=n(411855),i=n(875877);function o({_atom:e,machine:r}){let[{currentState:n,lastEvent:o,previousState:s},l]=(0,i.useAtom)(e),c=r.isComplete(n);return(0,a.useMemo)(()=>({completed:c,currentState:n,lastEvent:o,previousState:s,reset:l}),[c,n,o,s,l])}n(677840)},424281:(e,r,n)=>{n.d(r,{Op:()=>a.Op,nr:()=>a.nr,rn:()=>i.rn});var a=n(345087),i=n(657382);n(201545)},919558:(e,r,n)=>{n.d(r,{HZ:()=>u,u8:()=>h});var a=n(411855),i=n(975887),o=n.n(i),s=n(777535),l=n(32050),c=n(108982),d=n(841962);function u({oldValue:e,newValue:r,contextArgs:n,label:a,debug:i=!1,enableFullRead:l=!1,comparisonConfig:c,maxReports:u}){return(0,d.kc)().use_shadow_read_reporting&&function({oldValue:e,newValue:r,label:n,contextArgs:a,comparisonConfig:i,debug:l,maxReports:c}){if(void 0!==c){let e=p.get(n)??0;if(e>=c)return;p.set(n,e+1)}let d=function e(r,n,a,i){if(_(i.ignore,a))return[];let s=_(i.strictLists,a);if(Array.isArray(r)!==Array.isArray(n)||f(r)!==f(n))return[{path:a,oldValue:r,newValue:n,severity:"high"}];let l=[];if(Array.isArray(r)&&Array.isArray(n)){let c=(e,r=0)=>{if(!f(e))return null;if("id"in e)return["id"];if("key"in e)return["key"];if(0===r)for(let n in e){let a=c(e[n],r+1);if(a)return[n,...a]}return null},d=e=>{let r=new Map;for(let n of e){let e=c(n);e&&r.set(o()(n,e),n)}return r},u=d(r),m=d(n),p=!1;for(let[o,c]of(s&&u.size!==m.size&&(p=!0),0!==u.size||0!==m.size||0===r.length&&0===n.length||l.push({path:a,oldValue:r,newValue:n,severity:"high"}),u)){if(!m.has(o)){s&&(p=!0);continue}l.push(...e(c,m.get(o),[...a,o],i))}p&&l.push({path:a,severity:"high",oldValue:Array.from(u.keys()),newValue:Array.from(m.keys())})}else if(f(r)&&f(n))for(let o in r){let s=[...a,o],c=_(i.strictRecords,s);(o in n||c)&&l.push(...e(r[o],n[o],s,i))}else l.push(...function(e,r,n){if(e===r||"function"==typeof e||"function"==typeof r)return[];let a=[null,void 0,!1];return a.includes(e)&&a.includes(r)&&e!==r?[{path:n,oldValue:e,newValue:r,severity:"low"}]:typeof e!=typeof r?[{path:n,oldValue:e,newValue:r,severity:"high"}]:e instanceof Date&&r instanceof Date?Math.abs(e.getTime()-r.getTime())>=1e3?[{path:n,oldValue:e.toISOString(),newValue:r.toISOString(),severity:"high"}]:[]:e!==r?[{path:n,oldValue:e,newValue:r,severity:"high"}]:[]}(r,n,a));return l}(e,r,[],{...g,...i});l&&(d.length>0?console.log(`[Shadow read] '${n}' has discrepancies \u26A0\uFE0F`,d):console.log(`[Shadow read] '${n}' has no discrepancies \u2705`));let u={label:n,contextArgs:m(a??{})};if(d.length>0){let e=d.reduce((e,r)=>"high"===r.severity?"high":e,"low");s.az.trackDefinedEvent("data_migrations.shadow_read_discrepancy",{...u,discrepancy_maxSeverity:e})}else s.az.trackDefinedEvent("data_migrations.shadow_read_match",u);d.length>0&&(d.sort((e,r)=>e.severity===r.severity?0:"high"===e.severity?-1:1),d.slice(0,10).forEach(e=>{s.az.trackDefinedEvent("data_migrations.shadow_read_discrepancy_details",{...u,discrepancy_path:e.path.join("."),discrepancy_oldValue:m(e.oldValue),discrepancy_newValue:m(e.newValue),discrepancy_severity:e.severity})}))}({oldValue:e,newValue:r,label:a,contextArgs:n,comparisonConfig:c,debug:i,maxReports:u}),l?r:e}function m(e){return JSON.stringify(e,(e,r)=>void 0===r?"undefined":r)}let p=new Map;function h(e){let r=(0,c.R)(e=>({currentTeamId:e.currentTeamId,currentOrgId:e.currentUserOrgId,currentUserId:e.user?.id??null,openFileKey:e.openFile?.key??null}));return function({oldValue:e,newValue:r,label:n,contextArgs:i,enableFullRead:o=!1,debug:s=!1,comparisonConfig:c,maxReports:d}){let m=(0,l.k9)(()=>i,[i]),p=(0,l.k9)(()=>c,[c]),h=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{h.current||"loaded"!==r.status||"loaded"!==e.status||(u({oldValue:e.data,newValue:r.data,label:n,contextArgs:m,debug:s,comparisonConfig:p,maxReports:d}),h.current=!0)},[e,r,n,m,s,p,d]),o?r:e}({...e,contextArgs:{...r,...e.contextArgs}})}function _(e,r){return"function"==typeof e?e(r):e}let g={ignore:!1,strictRecords:!0,strictLists:!0};function f(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e&&!(e instanceof Date)}},634561:(e,r,n)=>{n.d(r,{A3:()=>m,IK:()=>u});var a=n(217950),i=n(281935);n(163773);var o=n(657548);n(747484);var s=n(550479);n(47795),n(341541),n(329995);var l=n(175906);let c=new Map,d=new l.vY;function u(e){let r=(0,o.WB)();if(i.S8?.setListener({name:"updateRealtimeTokens",listener(n){d.updateSubscriptions(e,n,r)}}),r&&(0,l.cz)(r),i.S8){let n=i.S8.getRealtimeTokens();if(null==n&&((0,s.$D)(a.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${n} from getRealtimeTokens() on first try`),{level:"warning"}),n=i.S8.getRealtimeTokens()),null==n){(0,s.$D)(a.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${n} from getRealtimeTokens() on second try`));return}d.updateSubscriptions(e,n,r)}}function m(e){d.handleFileMessage(e)}i.S8?.setListener({name:"notificationClicked",listener(e){c.get(e)?.(),c.delete(e)}})},646534:(e,r,n)=>{n.d(r,{Ck:()=>s,Fl:()=>u,Ho:()=>l,fV:()=>c});var a=n(411855),i=n(875877),o=n(826495);function s(e,r){let n=d(r);return!!e&&n.has(e)}function l(e){let r=(0,i.useAtomValue)(o.S0);return!!e&&r.has(e)}function c(e,r){let n=s(e,r),a=l(e);return n||a}function d(e){return(0,i.useAtomValue)(e?o.Gg:o.bJ)}function u(e){let r=d(e),n=(0,i.useAtomValue)(o.S0);return a.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}},811407:(e,r,n)=>{n.d(r,{FX:()=>T,KP:()=>b,L1:()=>v});var a=n(411855),i=n(244431),o=n(49324),s=n(629019),l=n.n(s),c=n(875877),d=n(132939),u=n(265851),m=n(940795),p=n(269049),h=n(646534),_=n(264259),g=n(826495),f=n(651520),E=n(109903);function y({isForSelect:e,orgNameForTooltip:r,workspaceNameForTooltip:n,tooltipDelay:s=250,tooltipLocation:c="above",size:u="small",variant:m}){let p=r||n?(0,_.wZ)({orgName:r,workspaceName:n,tooltipLocation:c,tooltipDelay:s}):{};return a.createElement(d.U,{className:l()("secondary"===m?f.Wo:f.Kk,e?f.cH:void 0),svg:E.A,...p},a.createElement("div",{className:l()("secondary"===m?f.Wo:f.Kk,e?f.cH:void 0),...p},"large"===u?a.createElement(i.U,null):a.createElement(o.x,null)))}function b({libraryKey:e,...r}){let n=(0,c.useAtomValue)(g.d$),i=(0,m.dh)({migrationGroup:p.L.GROUP_8,component:"ApprovedLibraryIconForFullScreen"}),o=(0,h.Ho)(e);return a.createElement(y,{...r,orgNameForTooltip:o?i:void 0,workspaceNameForTooltip:n?.name})}function v(e){let r=(0,c.useAtomValue)(g.G7),n=(0,m.dh)({migrationGroup:p.L.GROUP_8,component:"ApprovedLibraryIconForUserDefaultSubscriptions"}),i=(0,h.Ho)(e.libraryKey);return a.createElement(y,{...e,orgNameForTooltip:i?n:void 0,workspaceNameForTooltip:r?.name})}function T(){return a.createElement("div",{className:u.s.flex.alignCenter.justifyCenter.flexShrink0.ml4.mr4.$},a.createElement(y,{isForSelect:!0}))}},264259:(e,r,n)=>{n.d(r,{NX:()=>y,Qy:()=>_,k9:()=>h,sF:()=>E,wZ:()=>f}),n(537876);var a=n(33011),i=n(991458),o=n(875877),s=n(663295),l=n(827473),c=n(688656),d=n(160149),u=n(826495),m=n(488527);let p=(0,i.jz)(m.UEm);function h({libraries:e,approvedLibraryKeysByResourceType:r,currentTeamId:n=null,shouldSortByTeam:a=!1}){e.sort((e,i)=>_({libraryA:e,libraryB:i,approvedLibraryKeysByResourceType:r,currentTeamId:n,shouldSortByTeam:a}))}function _({libraryA:e,libraryB:r,approvedLibraryKeysByResourceType:n,currentTeamId:i=null,shouldSortByTeam:o=!1}){let{workspaceApprovedLibraryKeys:c,orgApprovedLibraryKeys:d}=n;if(o&&"file"in e&&"file"in r&&e.team_id!==r.team_id)return(0,l.r9)(e,r,i);let u=(0,a.l)(e.library_key??""),m=(0,a.l)(r.library_key??""),p=d.has(u)?1:0,h=d.has(m)?1:0;if(p!==h)return h-p;let _=c.has(u)?1:0,f=c.has(m)?1:0;return _!==f?f-_:s.f.LEXICOGRAPHICALLY(g(e),g(r))}function g(e){return"name"in e?e.name:e.library_file_name}function f({orgName:e,workspaceName:r,tooltipLocation:n,tooltipDelay:a}){let i=e??r;if(!i)return{};let o=function(e){try{if(e){let r=function(e){let r=document.createElement("span");r.textContent=e,r.style.visibility="hidden",r.style.fontWeight="bold",r.style.display="inline-block",document.body.appendChild(r);let n=r.offsetWidth;return document.body.removeChild(r),n}(e);if(r){if(r>p)return p;if(r>p/2)return Math.max(116,r);return 116}}}catch(e){console.error(e)}return p}(i);return{"data-tooltip-type":c.Ib.SPECIAL,"data-tooltip":d.A,..."below"===n?{"data-tooltip-show-below":!0}:{"data-tooltip-show-above":!0},...a?{"data-tooltip-timeout-delay":a}:{"data-tooltip-show-immediately":!0},"data-tooltip-max-width":o,"data-tooltip-workspace-name":r,"data-tooltip-org-name":e}}function E(e){if(!e)return!1;let r=o.atomStore.get(u.bJ).has(e),n=o.atomStore.get(u.S0).has(e);return r||n}function y({workspaceApprovedLibraryKeys:e,orgApprovedLibraryKeys:r}){return e.size>0||r.size>0}},365315:(e,r,n)=>{n.d(r,{V:()=>o});var a=n(827473),i=n(957020);function o(e){return(0,i.Do)(e)?"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key:e.isLocal?(0,a.Gj)(e):(0,a.Av)(e)??(0,a.Gj)(e)}},615875:(e,r,n)=>{n.d(r,{e:()=>d});var a=n(33011),i=n(875877),o=n(338584),s=n(176160),l=n(416630);let c=(0,i.atomFamily)(e=>(0,l.P)(`recently-used-${e}s`,"key",o.object({type:o.literal(e),key:o.string(),libraryKey:o.string()}),{transform:(e,r)=>{let n=r(s.yV);return{type:e.type,key:"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key,libraryKey:"LOCAL"===e.subscriptionStatus?(0,a.l)(n?.libraryKey??""):e.sourceLibraryKey}}}));function d(e){i.atomStore.set(c(e.type),e)}},692783:(e,r,n)=>{n.d(r,{b:()=>l,c:()=>c});var a=n(728722),i=n(736942),o=n(69441),s=n(183739);function l({libraryKey:e,disabled:r,nodeId:n,mainComponent:o,stateGroupId:l,isDevHandoff:d,isDevModeVarsTable:u,devModeVarsTableSelection:m,isDevModeOverview:p,devModeFocusId:h}){let _=(0,a.Rs)((0,s.iAs)({libraryKey:e??""}),{enabled:!r&&!!e});return i.Qw.useTransform(_,e=>c({data:e,nodeId:n,stateGroupId:l,isDevHandoff:d,isDevModeOverview:p,isDevModeVarsTable:u,devModeVarsTableSelection:m,devModeFocusId:h,mainComponent:o}))}function c({data:e,nodeId:r,stateGroupId:n,isDevHandoff:a,isDevModeVarsTable:i,devModeVarsTableSelection:s,isDevModeOverview:l,devModeFocusId:c,mainComponent:d}){let u=e.libraryKeyToFile;return u?u.fileCanAccess?{type:"team",link:(0,o.jN)({file:{key:u.fileCanAccess.key},nodeId:r,mainComponent:d,stateGroupId:n,isDevHandoff:a,isDevModeOverview:l,isDevModeVarsTable:i,devModeVarsTableSelection:s,devModeFocusId:c})}:u.hubFile?{type:"community",link:(0,o.X$)(u.hubFile.id)}:void 0:void 0}},10865:(e,r,n)=>{n.d(r,{R8:()=>l});var a=n(411855),i=n(728722),o=n(183739),s=n(957020);function l({assetKey:e,type:r}){let n=function({assetKey:e,type:r}){let n=(0,i.Rs)(o.ftA,{key:e??""},{enabled:r===s.PW.COMPONENT&&!!e}),l=(0,i.Rs)(o.iL6,{key:e??""},{enabled:r===s.PW.STATE_GROUP&&!!e}),c=(0,i.Rs)(o.bUF,{key:e??""},{enabled:r===s.PW.STYLE&&!!e}),d=(0,i.Rs)(o.EW,{key:e??""},{enabled:r===s.PW.VARIABLE_SET&&!!e}),u=a.useMemo(()=>r!==s.PW.COMPONENT?null:n,[n,r]),m=a.useMemo(()=>r!==s.PW.STATE_GROUP?null:l,[l,r]),p=a.useMemo(()=>r!==s.PW.STYLE?null:c,[c,r]),h=a.useMemo(()=>r!==s.PW.VARIABLE_SET?null:d,[d,r]);return a.useMemo(()=>null!=u?"loaded"!==u.status?u:{status:u.status,data:{user:u.data?.component?.user,communityProfile:u.data?.component?.hubFile?.profile},errors:u.errors}:null!=m?"loaded"!==m.status?m:{status:m.status,data:{user:m.data?.stateGroup?.user,communityProfile:m.data?.stateGroup?.hubFile?.profile},errors:m.errors}:null!=p?"loaded"!==p.status?p:{status:p.status,data:{user:p.data?.style?.user,communityProfile:p.data?.style?.hubFile?.profile},errors:p.errors}:null!=h?"loaded"!==h.status?h:{status:h.status,data:{user:h.data?.variableCollection?.user,communityProfile:h.data?.variableCollection?.hubFile?.profile},errors:h.errors}:{status:"disabled",data:null,errors:null},[u,m,p,h])}({assetKey:e,type:r});return a.useMemo(()=>{if("loaded"!==n.status)return n;let e=n.data.communityProfile;return null!=e?{status:"loaded",data:{type:"community",communityProfile:e},errors:n.errors}:null!=n.data.user?{status:"loaded",data:{type:"team",user:n.data.user},errors:n.errors}:{status:"loaded",data:null,errors:n.errors}},[n])}},739641:(e,r,n)=>{n.d(r,{P:()=>g});var a=n(411855),i=n(629019),o=n.n(i),s=n(764428),l=n(176160),c=n(940795),d=n(269049),u=n(744297),m=n(646534),p=n(811407),h=n(200179),_=n(343070);function g({libraryKey:e,showPresetTooltip:r,tooltipDelay:n,tooltipLocation:i,compact:g,colorPrimaryOnHover:f}){let E=(0,c.wb)({migrationGroup:d.L.GROUP_5,component:"LibraryBadge"}),y=(0,l._G)(),b=(0,m.fV)(e),v=(0,h.fd)(e),T=(0,u.H)(e),I=o()(_.iE,{[_.oE]:g,[_.FT]:f});return E&&e!==y&&b?a.createElement("div",{className:I},a.createElement(p.KP,{libraryKey:e,tooltipDelay:n,tooltipLocation:i})):e!==y&&(v||T)?a.createElement("div",{className:I},a.createElement(s.E,{showTooltip:r,libraryKey:e,tooltipDelay:n,tooltipLocation:i})):null}},470426:(e,r,n)=>{n.d(r,{Nz:()=>s,o:()=>l}),n(834825);var a=n(957020),i=n(200179);let o=/^Examples *\//;function s(e,{isPreset:r}){return!!r&&o.test(e.name)}function l(e,r){if((0,a.Do)(e)||!(e.type===a.PW.COMPONENT||e.type===a.PW.STATE_GROUP))return!1;let n=(0,i.lR)(e,r);return s(e,{isPreset:n})}},664135:(e,r,n)=>{n.d(r,{M:()=>o});var a=n(841962),i=n(314540);function o(){return(0,a.kc)().dse_preset_group_internal?i.wl.INTERNAL:i.wl.DEFAULT}},200179:(e,r,n)=>{n.d(r,{Ag:()=>C,B8:()=>b,E_:()=>w,HA:()=>E,Os:()=>M,Ps:()=>f,TX:()=>A,fd:()=>y,fn:()=>I,ku:()=>F,lR:()=>v,nT:()=>k,p9:()=>D,qA:()=>S,xm:()=>T});var a=n(411855),i=n(33011),o=n(707062),s=n(777535),l=n(875877),c=n(198003),d=n(238311),u=n(26910),m=n(154267),p=n(183739),h=n(841924),_=n(60329),g=n(744297);function f(e,r,n){return n?{...e,libraryKey:r.libraryKey}:(0,m.wJ)(r.fileKey)?{...e,hubFileId:r.fileKey}:{...e,fileKey:r.fileKey}}function E(e,r){if("loaded"===e.status){let n=e.data.libraryPresetSubscriptionsV2?.find(e=>o.oA(e.libraryKey)===r);if(n)return n.partner_type??void 0}}function y(e){let r=(0,l.useAtomValue)(_.TG);return!!e&&r.has(e)}function b(){return(0,a.useCallback)(e=>{let r=l.atomStore.get(_.TG);return!!e&&r.has(e)},[])}function v(e,r){return r.has(e.library_key)}function T(){let e=(0,l.useAtomValue)(_.TG);return(0,a.useCallback)(r=>v(r,e),[e])}h.M4.Query({fetch:async e=>e?(await (0,d.w0)("ui_kits_feedback_urls")).get(e,""):""});let I=(0,l.atom)(null),S=(0,l.atom)({value:(0,u.N)(),updateSource:"page_load"});function w(e){let r=(0,l.useAtomValue)(_.qq);return!!e&&r.has((0,i.l)(e))}function A(e){return!!e&&l.atomStore.get(_.qq).has((0,i.l)(e))}function C(e){if(!e)return!1;let r=l.atomStore.get(g.QN),n=l.atomStore.get(g.r9);return r.includes(e)||n.includes(e)}let N={VariableByKey:null,VariableCollectionByKey:null,StyleByKey:null,CommunityLibraryComponentsAndStateGroups:null},L=[p.Lom,p.bsh,p.yFE,p.vsj],O=e=>L.some(r=>r._name===e),R=e=>O(e)?e:void 0,P=e=>h.M4.Query({fetch:async r=>{let n=(0,c.S8)(e,r.arguments),a=R(e._name);if(a){let n=N[a];(null===n||r.nonce.value>n)&&(s.az.trackDefinedEvent("preset_libraries.static_update_fetch",{viewName:R(e._name),batchSize:r.arguments.length,updateSource:r.nonce.updateSource}),N[a]=r.nonce.value)}return await n}}),D=P(p.Lom),k=P(p.bsh);P(p.yFE);let M=P(p.vsj);function F(e,r,n){let a=n(I),i=n(S),o=n(e({arguments:r,nonce:i}));return"loading"===o.status&&null!==a&&(o=n(e({arguments:r,nonce:a}))),o}},215802:(e,r,n)=>{n.d(r,{Ew:()=>g,GZ:()=>f,Gq:()=>y,Hu:()=>E});var a=n(411855),i=n(188507),o=n(846288),s=n(190500),l=n(176160),c=n(131776),d=n(835301),u=n(747765),m=n(957020),p=n(784202),h=n(835173),_=n(516352);function g({assetKey:e,assetLibraryKey:r,assetType:n,isList:u,sectionNameforTracking:g,sectionPosition:b,sourceForTracking:v,sectionDepth:T,aiScore:I,lexicalScore:S,isExample:w,partnerType:A}){let C=(0,l.q5)(),{searchSessionId:N}=y(),L=(0,i.d4)(e=>e.search.queryId),O=a.useContext(p.U),R=O?.assetTypeDropdownSelection,{query:P}=(0,c.I)(d.Cn.AssetsPanel),D=E(r),k=f(r,D),M=(0,h.M)(),F=function(){let[e]=(0,_.MA)();return e}(),x=M?F:u?"LIST":"GRID",U=(0,h.k)();return a.useMemo(()=>({assetKey:e,assetLibraryKey:r,assetTypeDropdownSelection:R,libraryType:D,viewMode:x,searchQuery:P,searchSessionId:N??void 0,source:v,sourceSection:g,type:function(e){if("embed"===e)return"embed";switch(e){case m.PW.COMPONENT:return"component";case m.PW.STATE_GROUP:return"state_group";case m.PW.MODULE:return"module";case m.PW.RESPONSIVE_SET:return"responsive_set";case m.PW.CODE_COMPONENT:return"code_component";case m.PW.CODE_LIBRARY:case m.PW.CODE_FILE:case m.PW.STYLE:case m.PW.VARIABLE:case m.PW.VARIABLE_OVERRIDE:case m.PW.VARIABLE_SET:case m.PW.CONSTRAINED_TEMPLATE:case m.PW.MANAGED_STRING:return;default:(0,o.xb)(e,"Can't get asset type for logging")}}(n),sectionPosition:b,subscriptionLevel:k,sectionDepth:T,assetsPanelVersion:U,fileKey:C?.key,fileTeamId:C?.teamId??void 0,fileOrgId:C?.parentOrgId??void 0,scoreAi:I,scoreLexical:S,isExample:w,partnerType:A,productType:(0,s.pi)({editorType:C?.editorType}),queryId:L??void 0}),[e,r,R,D,x,P,N,v,g,n,b,k,T,U,C?.key,C?.teamId,C?.parentOrgId,C?.editorType,I,S,w,A,L])}function f(e,r){let n=(0,u.Ly)();return a.useMemo(()=>n.file?.has(e)?"file":n.user?.has(e)?"user":n.team?.has(e)?"team":n.org?.has(e)?"org":"SUBSCRIBED"===r?"other":"",[e,n,r])}function E(e){let r=(0,l._G)(),n=(0,u.He)();return r===e?"LOCAL":n.has(e)?"SUBSCRIBED":"UNSUBSCRIBED"}function y(){let e=(0,i.d4)(e=>e.library.assetsPanelSearch.query),r=(0,i.d4)(r=>e?r.search.lastLoadedQuery?.sessionId??r.search.sessionId:null);return{query:e,searchSessionId:r}}},654375:(e,r,n)=>{n.d(r,{Ci:()=>o,WJ:()=>a,vO:()=>s,yc:()=>i}),n(254773);var a=(e=>(e.PASTE="PASTE",e.MODAL="MODAL",e.PLUGIN="PLUGIN",e))(a||{}),i=(e=>(e.ATTEMPT="figjam_link_metadata_attempt",e.ERROR="figjam_link_metadata_error",e.SUCCESS="figjam_link_metadata_success",e.EMBED_CLICK="figjam_link_embed_click",e.CONVERT_TO_TEXT="figjam_link_metadata_convert_to_text",e.OPEN_PREVIEW="figjam_link_preview_open",e.EMBED_EXPAND="figjam_link_embed_expand",e.COPY_LINK="figjam_link_metadata_copy_url",e.SWITCH_ORIENTATION_VERTICAL="figjam_link_preview_orientation_vertical",e.SWITCH_ORIENTATION_HORIZONTAL="figjam_link_preview_orientation_horizontal",e.EMBED_DEACTIVATE="figjam_embed_deactivate",e))(i||{}),o=(e=>(e.EMBED="embed",e.LINK_PREVIEW="preview",e))(o||{});function s(e){try{return new URL(e).hostname}catch(e){return"Could not parse"}}},375900:(e,r,n)=>{n.d(r,{BF:()=>h,CR:()=>m,RW:()=>_,XL:()=>p,kA:()=>u});var a=n(707062),i=n(728722),o=n(977235),s=n(642487),l=n(183739),c=n(176160);function d(e,r,n){let i=[],o=[];for(let r of e){var s;if(!r.plugin)continue;if("status"in r.plugin){if(r.plugin.status!==a.tT.Loaded)continue;s=r.plugin.data}else s=r.plugin;if(!s)continue;let e="Workspace"===r.allowlistGroupType,l=r.allowlistedWorkspace;if(e&&!l||e&&!n)continue;let c=l?.id;n&&c&&c!==n||(s.isWidget?o.push(s.id):i.push(s.id))}return"plugin"===r?i:o}function u(e,r,n=!0){let a=_(),o=(0,i.Rs)(l.M9I,{orgId:e},{enabled:n}),s=o.data?.org;return"loading"!==o.status&&a.loaded?"errors"!==o.status&&s?{loaded:!0,data:d(s.allowlistedPlugins,r,a.data?.workspaceId)}:{loaded:!0,data:[]}:{loaded:!1}}function m(e,r=!0){let n=(0,s.c)(r);if(!n.loaded)return{loaded:!1};let a=n.data;return{loaded:!0,data:d(a?.allowlistedExtensions??[],e,a?.workspaceId??void 0)}}function p({workspace:e,hasPendingRequest:r,extension:n}){return!!(e.publicPluginsOrWidgetDisabled&&!r&&e.extensionRequestsAllowed&&!n?.roles.org)}function h({org:e,extensionVersion:r,isWidget:n,allowlistedExtensions:a}){return!!e&&!!r&&!!(function({org:e,isWidget:r}){if(!e)return!1;let n=r?e.widgets_whitelist_enforced:e.plugins_whitelist_enforced,a=r?e.widget_requests_allowed:e.plugin_requests_allowed;return n&&a}({org:e,isWidget:n})&&!r.is_private&&!a[r.plugin_id])}function _(){let e=(0,c.q5)(),r=!!e,n=(0,i.Rs)(l.iJD,{fileKey:e?.key??""},{enabled:r});return r?"loaded"!==n.status?{loaded:!1}:{loaded:!0,data:{workspaceId:n.data?.file?.workspaceId||void 0,workspaceName:o.oA(n.data?.file?.computedWorkspace)?.workspace?.name,fileKey:e.key,fileName:e.name}}:{loaded:!0,data:void 0}}},942171:(e,r,n)=>{n.d(r,{D6:()=>c,T0:()=>u,TF:()=>_,UL:()=>T,ds:()=>g,eU:()=>m,gV:()=>E,kK:()=>d,sb:()=>v,t$:()=>b,tW:()=>y});var a=n(846288),i=n(777535),o=n(841962);n(283972),n(47795);var s=n(959130),l=n(314540);function c(e){return null!=e||(0,o.kc)().ps_benchmark}function d(e){return e?1e3:(0,o.kc)().ps_benchmark?50:20}function u(e,r){return g(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).find(e=>e.resource.resourceId===r)}function m(e,r){switch(r){case l.bk.FILE:return e.favoritedResource?.favoritedFile!=null?{id:e.favoritedResource?.id,resourceType:l.bk.FILE,resource:e.favoritedResource?.favoritedFile}:void 0;case l.bk.PROTOTYPE:return e.favoritedResource?.favoritedPrototype!=null?{id:e.favoritedResource?.id,resourceType:l.bk.PROTOTYPE,resource:e.favoritedResource?.favoritedPrototype}:void 0;case l.bk.FOLDER:return e.favoritedResource?.favoritedProject?{id:e.favoritedResource?.id,resourceType:l.bk.FOLDER,resource:e.favoritedResource?.favoritedProject}:void 0;case l.bk.TEAM:return e.favoritedResource?.favoritedTeam?{id:e.favoritedResource?.id,resourceType:l.bk.TEAM,resource:e.favoritedResource?.favoritedTeam}:void 0;case l.bk.WORKSPACE:return e.favoritedResource?.favoritedWorkspace?{id:e.favoritedResource?.id,resourceType:l.bk.WORKSPACE,resource:e.favoritedResource?.favoritedWorkspace}:void 0;default:return}}function p(e,r,n,a,o,s){(0,i.sx)("data_drift_favorited_resource_corrected",{favoritedResourceId:e,resourceType:r,resourceTeamId:n,underlyingResourceTeamId:a,resourceOrgId:o,underlyingResourceOrgId:s},{forwardToDatadog:!0})}function h(e,r){return e.has(r.resourceId)?null:(e.add(r.resourceId),r)}function _(e,r,n){if(!(0,o.kc)().ps_benchmark_favorites_data_client_side_fix||!(0,o.kc)().ps_benchmark)return{favoritedFiles:e.currentTeamUser?.favoritedFiles,favoritedProjects:e.currentTeamUser?.favoritedProjects,favoritedPrototypes:e.currentTeamUser?.favoritedPrototypes,favoritedFilesKeySet:new Set,favoritedPrototypesIdSet:new Set,favoritedFoldersIdSet:new Set};let a=new Set((n??[]).map(e=>e.plan_id)),i=new Set,s=new Set,l=new Set;return{favoritedFiles:(e?.favoritedFiles??[]).map(e=>{if(null!=r){if(r===e.file?.teamId)return e.teamId!==e.file?.teamId&&(p(e.resourceId,"file",e.teamId,e.file.teamId,null,null),e.teamId=e.file?.teamId),h(i,e);if(e.teamId===r&&!a.has(e.file?.teamId??""))return h(i,e)}}).filter(e=>null!=e),favoritedProjects:(e?.favoritedProjects??[]).map(e=>{if(null!=r){if(r===e.project?.teamId)return e.teamId!==e.project?.teamId&&(p(e.resourceId,"folder",e.teamId,e.project?.teamId,null,null),e.teamId=e.project?.teamId),h(l,e);if(e.project?.orgId===null&&e.teamId===r&&!a.has(e.project?.teamId??""))return h(l,e)}}).filter(e=>null!=e),favoritedPrototypes:(e?.favoritedPrototypes??[]).map(e=>{if(null!=r){if(r===e.prototype?.file?.teamId)return e.teamId!==e.prototype?.file?.teamId&&(p(e.resourceId,"prototype",e.teamId,e.prototype?.file?.teamId,null,null),e.teamId=e.prototype?.file?.teamId),h(s,e);if(e.prototype?.file?.parentOrgId===null&&e.teamId===r&&!a.has(e.prototype?.file?.teamId??""))return h(s,e)}}).filter(e=>null!=e),favoritedFilesKeySet:i,favoritedPrototypesIdSet:s,favoritedFoldersIdSet:l}}function g(e,r,n,a,i){return f(e?.filter(e=>e.file?.canView)??[],r??[],n?.filter(e=>e.project&&!e.project.deletedAt)??[],a?.filter(e=>e.team&&!e.team.deletedAt)??[],i??[])}let f=(e,r,n,a,i)=>{let o=e.map(e=>({id:e.id,resourceType:l.bk.FILE,resource:e})),s=r.map(e=>({id:e.id,resourceType:l.bk.PROTOTYPE,resource:e}));return[...o,...s,...n.map(e=>({id:e.id,resourceType:l.bk.FOLDER,resource:e})),...a.map(e=>({id:e.id,resourceType:l.bk.TEAM,resource:e})),...i.map(e=>({id:e.id,resourceType:l.bk.WORKSPACE,resource:e}))]};function E(e,r){let n=d(r);return g(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,(0,o.kc)().ps_benchmark||r?e.currentUser.favoritedProjects:[],e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).length>=n}function y(e){return!!e&&e>=1e3}function b(e,r){let n={};e.forEach(e=>{n[e.id]=e});let a=e.find(e=>""===e.name)?.id,i=r?.map(e=>n[e]).filter(e=>e)??[],o=e.filter(e=>!(r&&r.includes(e.id))),s=o.findIndex(e=>""===e.name);return -1!==s&&o.splice(s,1),o.sort((e,r)=>new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime()),-1!==s&&a?[n[a],...i,...o]:[...i,...o]}function v(e,r){let n={};e.forEach(e=>{n[e.resource.id]=e});let a=r?.map(e=>n[e]).filter(e=>e)??[],i=e.filter(e=>!(r&&r.includes(e.resource.id)));return i.sort((e,r)=>new Date(e.resource.createdAt).getTime()-new Date(r.resource.createdAt).getTime()),[...a,...i]}function T(e){switch(e){case s.nb.FILE:case s.nb.PINNED_FILE:case s.nb.REPO:return l.bk.FILE;case s.nb.PROTOTYPE:return l.bk.PROTOTYPE;case s.nb.OFFLINE_FILE:return l.bk.FILE;default:(0,a.xb)(e)}}},662310:(e,r,n)=>{function a(e){let r=[];return e.forEach(e=>{e.content.forEach(e=>{let n=JSON.parse(e);n.nodeId&&r.push(n.nodeId)})}),r}n.d(r,{N:()=>a}),n(805014)},38711:(e,r,n)=>{let a;n.d(r,{D4:()=>G,De:()=>U,OR:()=>x,Qr:()=>k,Tq:()=>B,Wq:()=>H,hL:()=>F,jm:()=>W,nz:()=>V});var i=n(188507),o=n(777535),s=n(311606),l=n(281935),c=n(163773),d=n(841962),u=n(747484),m=n(76265),p=n(456891),h=n(179462),_=n(534294),g=n(47795),f=n(719971),E=n(225371),y=n(736041),b=n(90225),v=n(617254),T=n(73041),I=n(23478),S=n(366172),w=n(914077),A=n(893850),C=n(616937),N=n(573225),L=n(365347),O=n(31393),R=n(741332),P=n(15092),D=n(421023);function k(){return(0,d.Ay)().release_manifest_git_commit}function M(e,r,n=""){if((0,s.ce)()){document.title=r?`${n}${r}`:e;return}if(e!==(a?a+document.title:document.title)){if("safari"!==u.Ay.browserType){let r;let n=(0,R.AE)(e);r=document.getElementById("custom-emoji-favicon"),n?(a=n,r||((r=document.createElement("link")).id="custom-emoji-favicon",r.rel="icon",document.head.appendChild(r)),r.href="data:image/svg+xml,"+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">{text}</text></svg>'.replace("{text}",n)):(r&&r.remove(),a=void 0),n&&(e=(0,R.Nn)(e,n))}document.title=e,l.eD&&r&&l.eD.setTitle(r,n)}}function F(e,r=null,n=""){let a=function(e){switch(e){case w.nT.Whiteboard:return" \u2013 FigJam";case w.nT.Slides:return" \u2013 Figma Slides";case w.nT.Cooper:return" \u2013 Figma Buzz";default:return" \u2013 Figma"}}(r);M(`${n}${e}${a}`,e,n)}function x(e,r){let n=(0,D.Iu)(e,r);if(!n){M("Figma",null);return}if("fullscreen"===r.view&&r.tryPluginName){e.openFile?M(e.openFile.name,n):M((0,m.t)("community.try.plugin_name_with_community",{pluginName:r.tryPluginName}),n);return}if("prototype"===r.view){let a,i="";if((0,N.f)(r.file.editor_type))a=i=`${r.isPresenterView?(0,m.t)("slides.general.presenter"):(0,m.t)("slides.general.slide_deck")} \xb7 ${n} - ${(0,m.t)("slides.general.slides")}`;else{let r=function(e){let r=e.prototype;for(let e of r.pages)if(e.nodeId===r.currentPageId)return e.name;return""}(e);r&&e.prototype.pages.length>1?(i=`\u25B6 ${n} - ${r}`,a=`${n} - ${r}`):(i=`\u25B6 ${n}`,a=n)}M(i,a);return}if("fullscreen"===r.view&&!e.openFile){let e=(0,O.GT)();e?.name?n=e.name:r?.localFileName&&(n=r.localFileName)}let a=(0,L.yt)(e);if(a&&(0,I.Xm)(a)){M(`\u2325 ${n}`,`${n}`);return}F(n,(0,T.XE)(r))}let U=(0,_.nF)(e=>c.Ay.listen(r=>{"POP"===r&&function(r){if(r){let n=e.getState(),a=n.selectedView;if(!(0,c.s0)(r))return;let{jsCommitHash:i,searchSessionId:o,...s}=r;if(void 0!==i&&i!==k()){c.Ay.reload("Navigating to a state that was pushed by an older version of this application");return}if("fullscreen"===a.view&&!S.Y5.isReady()){c.Ay.reload("User navigated before fullscreen fully initialized");return}if("fullscreen"===s.view&&!s.fileKey){window.history.back();return}if("fullscreen"===a.view&&("fullscreen"!==s.view||a.fileKey!==s.fileKey))e.dispatch(E.VB({oldSelectedView:a,newSelectedView:s}));else{if(e.dispatch(y.Ce()),"communityHub"===s.view&&"searchAndBrowse"===s.subView&&(0,h.OE)(s.data)){let r=(0,p.w)(n);r&&e.dispatch(v.NR({sessionId:r}))}e.dispatch(g.$T({...s,fromPopstate:!0})),x(n,s)}}}(c.Ay.location.state),(0,c.s0)(c.Ay.location.state)||function(){let r=e.getState(),n=(0,D.vU)(r,c.Ay.location.pathname,c.Ay.location.search,c.Ay.location.hash,null);null!==n&&e.dispatch(g.$T({...n,fromPopstate:!0}))}()}));function B(e,r,n,a){e(f.UN({fileKey:r.key}));let i=n||a,o=n?A.O.ORG:A.O.TEAM;e((0,d.kc)().ps_benchmark&&i?b.c5({planId:i,planType:o}):b.p4({planId:n||C.P})),e(g.$T({view:"fullscreen",fileKey:r.key,editorType:r.editorType?(0,w.wN)(r.editorType):w.nT.Design}))}function V(e,r,n,a){(0,o.sx)("Open File in New Tab Click",{fileKey:r,uiSelectedView:JSON.stringify(n)}),a(f.UN({fileKey:r})),c.Ay.redirect(e,"_blank")}function G(e,r,n,a){(0,o.sx)("Open Prototype in New Tab Click",{fileKey:r,pageId:n,uiSelectedView:JSON.stringify(a)}),c.Ay.redirect(e,"_blank")}function H(e,r){r(f.V3({url:e}))}function W(e,r){let n=(0,P.TA)(),a=e||r,o=(0,i.d4)(e=>(0,d.kc)().limited_plan_spaces?e.plans:n?e.authedUsers.byId[n]?.plans:null);return!!o?.find(e=>e.plan_id===a)}},936777:(e,r,n)=>{n.d(r,{b4:()=>k,g4:()=>x,n_:()=>F});var a=n(488336),i=n(89865),o=n.n(i),s=n(841962),l=n(198003),c=n(750570),d=n(697737),u=n(719334),m=n(76265),p=n(553362),h=n(534294),_=n(229694),g=n(47795),f=n(736041),E=n(487487),y=n(802597),b=n(190500),v=n(353428),T=n(390038),I=n(929103),S=n(314540),w=n(183739),A=n(841924),C=n(305216),N=n(689102),L=n(487388),O=n(914077),R=n(324225),P=n(816146),D=n(574431);let k=(0,h.nF)(async(e,r)=>{let{fileKeys:n,repoIds:a}=r;if(n.length>0){let r=e.getState(),[a,...i]=await Promise.all([(0,N.R5)(n),...n.map(e=>A.M4.fetchFile(e))]);if(a){let o=r.teams[a],s=new Set(i.map(e=>e.editor_type)),l=s.size>1?null:s.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:o,action:R.ZN.RESTORE_FILES,editorType:l,resource:L.vL.FILE,multipleResources:n.length>1,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO}}))}else e.dispatch(_.R({fileKeys:o()(i,"key"),userInitiated:!0}))}if(a&&a.length>0){let r=await Promise.all(a.map(e=>A.M4.fetchRepo(e)));e.dispatch((0,E.i)({reposById:o()(r,"id"),userInitiated:!0}))}e.dispatch(y.an())});async function M({selectedFileKeys:e,isPlanSpacesEnabled:r,currentSpaceDraftsFolderId:n,personalDraftsFolderId:a,currentUserId:i,state:o,toDraft:s}){let c=await (0,l.S8)(w.M5e,e.map(e=>({fileKey:e}))),d=[],u=new Set;return c.forEach(({result:{data:e}})=>{let l;let{file:c}=e??{};if(!c)return;let{project:m,editorType:p,key:h}=c;null!=p&&u.add(p);let _=r?n:a;if(c.parentOrgId){let e=i&&o.orgUsersByOrgId[c.parentOrgId]?.[i];l=e?e.drafts_folder_id:_}else if(c.teamId&&r){let e=o.roles.byTeamId[c.teamId],r=i&&e&&o.teamUserByTeamId[c.teamId]?.[i];l=r?r.drafts_folder_id:_}else l=_;let g=(l||m?.id)??"",f=!s&&m&&(0,C.Jf)(m,p??S._Y.DESIGN)?m.id:g;d.push({key:h,folderId:f})}),{copyFiles:d,editorTypes:u}}let F=(0,h.nF)(async(e,r)=>{let n=(0,s.kc)().ps_benchmark,i=e.getState(),o=i.user?.id,l=i.user?.personal_drafts_folder_id,h=i.user?.drafts_folder_id,_=[l];o&&(_.push(...(0,T.x)(i.orgUsersByOrgId,o).map(e=>e.drafts_folder_id)),n&&_.push(...(0,I._)(i.teamUserByTeamId,o).map(e=>e.drafts_folder_id||void 0)));let E=Object.keys(i.tileSelect&&i.tileSelect[P.F.FILES]||{}).concat(Object.keys(i.tileSelect&&i.tileSelect[P.F.PINNED_FILES]||{})),y=Object.keys(i.tileSelect&&i.tileSelect[P.F.REPOS]||{});(await Promise.all(y.map(e=>A.M4.fetchRepo(e)))).forEach(e=>{let r=e.default_file_key;r&&E.push(r)});let{copyFiles:w,editorTypes:C}=await M({selectedFileKeys:E,isPlanSpacesEnabled:n,currentSpaceDraftsFolderId:h,personalDraftsFolderId:l,currentUserId:o,state:i,toDraft:r.toDraft}),k=await (0,N.mx)(w);if(k){let r=i.teams[k],n=C.size>1?null:C.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:r,action:R.ZN.DUPLICATE_FILES,editorType:n,resource:L.vL.FILE,multipleResources:w.length>1,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO}}));return}let F=w.map(({key:r,folderId:n})=>()=>{let a=d.Ay.post(`/api/multiplayer/${r}/copy?${(0,c.lF)({folder_id:n})}`);return a.catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))}),a});(0,a.Ed)(F,8).then(r=>{if(!r.some(e=>"reject"===e.type)){let n=w.filter(e=>!!e.folderId&&_.includes(e.folderId)).length,a=r=>r&&r.editor_type?{text:(0,m.t)("general.open"),action:()=>{e.dispatch(g.$T({view:"fullscreen",fileKey:r.key,editorType:(0,O.wN)(r.editor_type)})),e.dispatch(p.F.dequeue({}))}}:void 0;if(n>0&&("folder"!==i.selectedView.view||i.selectedView.folderId!==h)){let i,o="",s=1===w.length;o=s?(0,m.t)("user_view.file_duplicated_to_your_drafts"):n===w.length?(0,m.t)("user_view.files_duplicated_to_your_drafts",{intArg:n}):(0,m.t)("user_view.some_files_duplicated_to_your_drafts"),i=s?a(r[0].resolve?.data?.meta):{text:(0,m.t)("general.show"),action:()=>{h&&e.dispatch(g.$T({view:"folder",folderId:h})),e.dispatch(p.F.dequeue({}))}},e.dispatch(p.F.enqueue({type:"file_duplicated",message:o,button:i}))}else if("folder"===i.selectedView.view){let n=a(1===w.length?r[0].resolve?.data?.meta:void 0);e.dispatch(p.F.enqueue({type:"file_duplicated",message:1===w.length?(0,m.t)("user_view.file_duplicated"):(0,m.t)("user_view.files_duplicated",{intArg:w.length}),button:n}))}let o=r.map(e=>null!=e.resolve?e.resolve.data.meta:null).filter(e=>null!=e).map(e=>e);(0,b.ak)(w,o,e.getState())}})}),x=(0,h.nF)(e=>{e.dispatch(F({toDraft:!0}))});(0,h.nF)((e,r)=>{let n=e.getState(),a=n.user?.drafts_folder_id;return d.Ay.post(`/api/multiplayer/${r.file.key}/copy?${(0,c.lF)({folder_id:a})}`).then(()=>{e.dispatch(u.s.flash((0,m.t)("user_view.file_duplicated_to_your_drafts")))}).catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))})})},920981:(e,r,n)=>{n.d(r,{Ct:()=>X,LK:()=>$,Nr:()=>en,Q3:()=>et,Q4:()=>Z,SX:()=>ei,Xg:()=>q,iT:()=>ee,jl:()=>z,k4:()=>J,mq:()=>Q,xT:()=>er});var a=n(188507),i=n(236891),o=n(657548),s=n(139879),l=n(697737),c=n(338584),d=n(719334),u=n(76265),m=n(553362),p=n(990067),h=n(534294),_=n(206908),g=n(47795),f=n(942754),E=n(736041),y=n(402511),b=n(99990),v=n(194338),T=n(190500),I=n(353428),S=n(643225),w=n(314540),A=n(183739),C=n(841924),N=n(689102),L=n(39971),O=n(721782),R=n(487388),P=n(38885),D=n(880146),k=n(505534),M=n(386582),F=n(331850),x=n(839644),U=n(324225),B=n(524840),V=n(479251),G=n(961317),H=n(574431),W=n(273278);let K=(0,h.nF)((e,{folderId:r,folderData:n})=>{(0,a.vA)(()=>{e.getState().folders[r]?e.dispatch(f.yJ({folder:n.folder})):e.dispatch(f.bE(n.folder)),e.dispatch(_.uo({files:n.files,subscribeToRealtime:!1})),e.dispatch(b.nX({repos:n.repos})),e.dispatch(v.uo({roles:n.roles})),e.dispatch(f.Kc({folderId:r,state:"loaded"}))})}),Y=C.M4.Query({fetch:async(e,{reduxStore:r})=>{let n=await B.W.getFiles({folderId:e.folderId,shouldShowOnlyTrashedFiles:!!e.shouldShowOnlyTrashedFiles});return r.dispatch(_.uo({files:n.data.meta.files})),r.dispatch(b.nX({repos:n.data.meta.repos})),r.dispatch(v.uo({roles:n.data.meta.roles})),r.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),n.data.meta},schema:e=>e.object({folder:D.lH.nullable(),files:e.array(P.L),repos:e.array(M.z)}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let a=new Date(new Date().setHours(0,0,0,0));return n.subscribe(A.m0h,{projectId:e,updatedAtTimestamp:a},n=>{r(r=>{let a=r.files;(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{a.find(r=>r.key===e.key)||r.files.unshift((0,O.W$)(e))})})})},syncObjects:!0,output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===w.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)&&!e.file_repo_id),a=e.repos.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===w.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)),o=e.repos.filter(e=>!e.trashed_at&&!e.deleted_at).map(r=>e.files.find(e=>e.key===r.default_file_key)).filter(i.Vq),s={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());s[r.id]=n}),{folder:e.folder,files:n,repos:a,previewFiles:[...n,...o],filesByRepoId:s}}});function $(e,r=!0,n=!1){let[a]=(0,C.IT)(Y({folderId:e,shouldShowOnlyTrashedFiles:n}),{enabled:r});return a}let j=c.object({folder:D.lH.nullable(),files:c.array(P.L),repos:c.array(M.z),roles:c.array(F.an)});C.M4.PaginatedQuery({fetch:async(e,{pageParam:r,reduxStore:n})=>{let a;if(r)a=r;else{let{folderId:r,...n}=e,i=new URLSearchParams({...n,page_size:"50"}).toString();a=`/api/folders/${r}/paginated_files?${i}`}let i=await (0,l.GD)(a),o=i.data.meta;return n.dispatch(_.uo({files:o.files})),n.dispatch(b.nX({repos:o.repos})),n.dispatch(v.uo({roles:o.roles})),n.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),{data:i.data.meta,nextPage:i.data.pagination?.next_page,prevPage:i.data.pagination?.prev_page}},joinPages:e=>({files:e.flatMap(e=>e.data.files),repos:e.flatMap(e=>e.data.repos),roles:e.flatMap(e=>e.data.roles),folder:e.length>0?e[e.length-1].data.folder:null}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let a=new Date(new Date().setHours(0,0,0,0));return n.subscribe(A.m0h,{projectId:e,updatedAtTimestamp:a},n=>{r(r=>{let a=r[0];a&&(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{r.find(r=>!!r.files.find(r=>r.key===e.key))||a.files.unshift((0,O.W$)(e))})})})},output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&!e.trashed_at&&!e.file_repo_id),a=e.repos.filter(e=>e.folder_id===r.folderId&&!e.trashed_at),i={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());i[r.id]=n}),{folder:e.folder,files:n,repos:a,filesByRepoId:i}},schema:j,syncObjects:!0});let z=(0,h.nF)(async(e,{folderId:r,loadedFolders:n})=>{if(!n[r]){e.dispatch(f.Kc({folderId:r,state:"loading"}));try{let n=(await B.W.getFiles({folderId:r})).data.meta;e.dispatch(K({folderId:r,folderData:n}))}catch(n){404===n.status||403===n.status?e.dispatch(g.$T({view:"resourceUnavailable",resourceType:x.Ft.PROJECT})):n.status>=400&&n.status<500?e.dispatch(f.Kc({folderId:r,state:"loaded"})):e.dispatch(f.Kc({folderId:r,state:null}))}}}),q=C.M4.Query({fetch:async e=>(await V.$.getFolders({teamId:e.teamId})).data.meta.folder_rows,schema:e=>e.array(D.lH.extend({touched_at:e.string()})),syncObjects:!0,enabled:e=>!!e.teamId,output:({data:e})=>e.filter(e=>!(e.trashed_at||e.deleted_at))});C.M4.Mutation((e,{reduxStore:r})=>B.W.delete({folderId:e.folderId}).then(()=>{r.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_deleted_forever")}))}));let Z=C.M4.Mutation((e,{reduxStore:r})=>B.W.permanentlyDelete({folderId:e.folderId}).then(()=>{r.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_deleted_forever")}))})),X=C.M4.Mutation(({folderId:e},{objects:r,reduxStore:n})=>{let a=B.W.trash({folderId:e}).then(()=>{r.Folder.update(e,e=>{e.trashed_at=Date.now().toString()}),n.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_trashed")}))});n.dispatch((0,d.Q)({promise:a,fallbackError:(0,u.t)("file_browser.api_folder.error_when_moving_to_trash")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:new Date}}},a)}),J=C.M4.Mutation(({folderId:e,team:r},{objects:n,reduxStore:a})=>{let i=B.W.restore({folderId:e}).then(()=>{n.Folder.update(e,e=>{e.trashed_at=null}),a.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_restored"),button:{text:(0,u.t)("visual_bell.show_in_toast",{destination:r?.name??"Recents"}),action:()=>{r?a.dispatch(g.$T({view:"team",teamId:r.id})):a.dispatch(g.$T({view:"recentsAndSharing"}))}}}))});a.dispatch((0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.error_when_restoring")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:null}}},i)});C.M4.Mutation(e=>B.W.batchDelete({folderIds:e.folderIds}));let Q=C.M4.Mutation(({folderId:e,folderName:r},{objects:n,reduxStore:a})=>{let i=(0,S.SS)(r);if(i){a.dispatch(d.s.error(i));return}n.Folder.update(e,e=>{e.name=r,e.path=r}),(0,T.xr)("Folder Renamed",e,null,a.getState(),{folderName:r});let s=l.Ay.put("/api/folders/rename",{folder_id:e,name:r});return a.dispatch((0,d.Q)({promise:s,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_renaming_this_project")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{name:r,path:r}}},s),s}),ee=(0,h.MM)("FOLDER_UPDATE_FOLDER_ACCESS",(e,r,{optimistId:n})=>{let a=l.Ay.put(`/api/folders/${r.folderId}`,{is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly}).then(()=>{e.dispatch(y.c(n))}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:a,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_access")})}),et=(0,h.MM)("FOLDER_UPDATE_SHARING_AUDIENCE_CONTROLS",(e,r,{optimistId:n})=>{let a=B.W.updateFolderSharingAudienceControls({folderId:r.folder.id,sharingAudienceControl:r.sharingAudienceControl}).then(()=>{e.dispatch(y.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"sharing_audience",oldSharingAudienceControl:r.folder.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:a,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_sharing_audience_control")})}),er=(0,h.MM)("FOLDER_UPDATE_TEAM_ACCESS",(e,r,{optimistId:n})=>{let a=B.W.updatedFolderTeamAccess({folderId:r.folder.id,teamAccess:r.teamAccess}).then(()=>{e.dispatch(y.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"team_access",oldTeamAccess:r.folder.team_access,newTeamAccess:r.teamAccess})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:a,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_team_access")})}),en=(0,h.nF)(async(e,r)=>{let n=r.folder,a=r.team,i=(0,k.Ws)(a);if(n.inviteOnlyAt||n.viewOnlyAt){e.dispatch(E.to({type:G.z,data:{folder:n}}));return}try{await B.W.getCanMove({teamId:a.id,folderId:n.id})}catch(r){r.data?.failure_info?.code==="ERR_FILE_LIMIT"||r.data?.failure_info?.code==="ERR_PROJECT_LIMIT"?e.dispatch(E.to({type:H.DV,data:{team:i,resource:R.vL.FOLDER,action:U.ZN.MOVE_FOLDER,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO,editorType:null,upsellSource:L.b.FOLDER_MOVE_MODAL}})):e.dispatch(d.s.error(r.data?.message));return}if(n.teamId&&i){e.dispatch(E.to({type:W.o,data:{folder:n,destinationTeam:i,onConfirm:()=>{(0,s.Jl)(ea)({folder:n,team:i})}}}));return}(0,s.Jl)(ea)({folder:n,team:i}),r.onSuccess&&r.onSuccess()}),ea=C.M4.Mutation((e,{query:r,objects:n,reduxStore:a})=>{let{folder:i,team:s}=e;(0,T.xr)("Folder Moved",i.id,null,a.getState(),{destTeamId:s.id});let c=l.Ay.put("/api/folders/move",{folder_id:i.id,team_id:s.id}).then(()=>{a.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.folder_move.project_moved_toast",{folderName:i.path,teamName:s.name})}))});return a.dispatch((0,d.Q)({promise:c,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_moving_this_project")})),o.WB()?.optimisticallyUpdate({Project:{[i.id]:{teamId:s.id}}},c),i.teamId&&(r.mutate(q({teamId:i.teamId}),e=>{let r=e.findIndex(e=>e.id===i.id);-1!==r&&e.splice(r,1)}),n.Folder.update(i.id,e=>{e.team_id=s.id})),c}),ei=(0,h.nF)((e,r)=>{let n=e.getState(),a=r.where,i=r.team.id,o=n.creatingNewFolder&&n.creatingNewFolder.where===a&&n.creatingNewFolder.teamId===i,s=r.team;if(!o){if(s.canEdit)(0,N.rR)(s,{type:N.sK.ADD_PROJECT})?(e.dispatch(g.sf({where:a,teamId:i})),e.dispatch(E.to({type:(0,p.p)(),data:{teamId:s.id,modalShown:n.modalShown,onFolderCreated:r.onFolderCreated}}))):e.dispatch(E.to({type:H.DV,data:{team:s,resource:R.vL.FOLDER,action:U.ZN.CREATE_FOLDER,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO,editorType:null}}));else{let r=s?(0,u.t)("file_browser.api_folder.no_create_permissions_team_name",{teamName:s.name}):(0,u.t)("file_browser.api_folder.no_create_permissions_this_team");e.dispatch(d.s.flash(r))}}})},461666:(e,r,n)=>{n.d(r,{nm:()=>h});var a=n(841962),i=n(875877),o=n(863297),s=n(534294),l=n(137209),c=n(90225),d=n(989747),u=n(759833),m=n(364934),p=n(651804);(0,s.nF)(async(e,{loadedPlans:r})=>{if(!r||!(r.length>0))try{let r=await m.k.getPlans();e.dispatch(c.uo({plans:r.data.meta.plans})),e.dispatch(d.uo({teams:r.data.meta.teams})),e.dispatch(l.uo({orgs:r.data.meta.orgs}));let n=r.data.meta.teams,i=(0,a.kc)().ps_benchmark,o=(0,a.kc)().close_starter_team_loophole;i&&o&&await Promise.all(n.map(r=>(0,u.xN)(r.id,e)))}catch(e){}});let h=(e=!1)=>async r=>{try{return await _(r,e)}catch(e){return Promise.reject(e)}};async function _(e,r=!1){if(!(0,a.kc)().ps_benchmark)return Promise.reject();let n=i.atomStore.get(p.g);if(!r&&n!==o.r.INIT&&n!==o.r.LOADING)return n;try{n===o.r.INIT&&i.atomStore.set(p.g,o.r.LOADING);let r=await m.k.getPlansForAuthedUsers();return i.atomStore.set(p.g,r),e(d.uo({teams:r.teams})),e(l.uo({orgs:r.orgs})),r}catch(e){return n===o.r.LOADING&&i.atomStore.set(p.g,o.r.INIT),Promise.reject(e)}}},831396:(e,r,n)=>{n.d(r,{IA:()=>O,KQ:()=>N,P8:()=>L,UM:()=>D,vr:()=>P,zK:()=>R});var a=n(777535),i=n(841962),o=n(657548),s=n(829466),l=n(697737),c=n(719334),d=n(76265),u=n(553362),m=n(534294),p=n(47795),h=n(719971),_=n(20174),g=n(194338),f=n(989747),E=n(743236),y=n(190500),b=n(314540),v=n(749884),T=n(236123),I=n(682403),S=n(331850),w=n(839644),A=n(376812),C=n(673364);let N=(0,m.nF)((e,r)=>{let{teamName:n,orgAccess:a,workspaceId:i,description:o,defaultPermission:s,sharingAudienceControl:u,orgBrowsable:m,hidden:p,ignoreCurrentPlan:h}=r,_=e.getState().currentUserOrgId,g={team_name:n};!_||h||(g.org_id=_,u||(g.org_access=a)),i&&(g.workspace_id=i),o&&(g.description=o),s&&!u&&(g.default_permission=s),u&&(g.sharing_audience_control=u),m&&(g.org_browsable=m),p&&(g.hidden=p),e.dispatch(f.r1({loading:!0})),l.Ay.post("/api/teams/create",g).then(({data:n})=>{let a="team"in n.meta?n.meta.team:n.meta;(0,y._J)("Team Created",a.id,e.getState(),{sharing_audience_control:u,org_browsable:m,hidden:p}),r.onSuccessNoRedirect&&r.onSuccessNoRedirect(a),L(a,e,r)}).catch(r=>{let n=(0,d.Jv)(r,r?.response?.message||(0,d.t)("team_creation.an_error_occurred_while_creating_this_team"));e.dispatch(c.s.error(n)),e.dispatch(f.r1({loading:!1}))})});function L(e,r,n){let a=r.getState().user,o=r.getState().currentUserOrgId;r.dispatch(f.bE({team:e}));let{ignoreCurrentPlan:s}=n;return o&&!s&&n.inviteEmails?.length&&n.inviteLevel?r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:n.inviteLevel,source:"new_team_creation_modal"})):n.teamFlowType===w.SC.CREATE&&n.inviteEmails?.length&&r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:S.e6.EDITOR,source:"team_creation_flow"})),A.G.getTeam({teamId:e.id}).then(({data:o})=>{for(let e of o.meta)r.dispatch(g.bE({role:e}));let l=(0,i.kc)().ps_benchmark;l||r.dispatch(f.r1({loading:!1}));let c=r.getState().currentUserOrgId&&!s;if(n.dontRedirect)l&&r.dispatch(f.r1({loading:!1}));else if(n.onSuccess&&(l&&r.dispatch(f.r1({loading:!1})),n.onSuccess()),c||n.teamFlowType===w.SC.CREATE)l&&r.dispatch(f.r1({loading:!1})),r.dispatch(p.$T({view:"team",teamId:e.id})),r.dispatch(u.F.enqueue({type:"new_team_created",message:(0,d.t)("team_creation.you_have_created_a_new_team")}));else if(l&&a?.id){let n={view:"addCollaborators",teamId:e.id},i={userId:a.id,teamId:e.id,orgId:null};r.dispatch(h._l({workspace:i,view:n}))}else l&&r.dispatch(f.r1({loading:!1})),r.dispatch(p.$T({view:"addCollaborators",teamId:e.id}))})}let O=(0,m.nF)((e,r)=>{let n=r.team,a=n.id,i=n.name,c=r.name;(0,y._J)("Team Renamed",a,e.getState());let m=l.Ay.put(`/api/teams/${a}`,{name:r.name}).then(({data:n})=>{r.skipVisualBell||e.dispatch(u.F.enqueue({message:(0,d.t)("change_team_name_visual_bell.text",{oldTeamName:i,newTeamName:c}),button:{text:(0,d.t)("change_team_name_visual_bell.undo"),action:()=>{e.dispatch(O({team:n.meta,name:i,skipVisualBell:!0}))}}}))});return o.WB()?.optimisticallyUpdate({Team:{[a]:{name:c}}},m),(0,s.Q)({requestPromise:m,fallbackError:"An error occurred while renaming this team.",store:e,next:e.dispatch,action:f.$w(r)})}),R=(0,m.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Share Settings Updated",n,e.getState(),{share_settings_type:"share_audience",oldSharingAudienceControl:r.team.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl,oldOrgBrowsable:r.team.org_browsable,newOrgBrowsable:r.orgBrowsable,oldHidden:r.team.hidden,newHidden:r.hidden}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{sharing_audience_control:r.sharingAudienceControl,org_browsable:r.orgBrowsable,hidden:r.hidden}),fallbackError:"An error occurred while changing the sharing settings of this team.",store:e,next:e.dispatch,action:f.aB(r)})});(0,m.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Org Access Changed",n,e.getState(),{oldOrgAccess:r.team.org_access,newOrgAcccess:r.orgAccess}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess}),fallbackError:"An error occurred while changing the org access of this team.",store:e,next:e.dispatch,action:f.bQ(r)})});let P=(0,m.nF)((e,r)=>{(0,a.sx)("file-browser-hydrate",{location:"team.onJoin"});let n=(0,v.p9)(r.teamId);(0,I._X)("onJoinTeam").then(a=>{let i=r.teamId;e.dispatch(p.Qv(a.data.meta));let o=e.getState().teams[i].name;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_owner.text",{teamName:o})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_admin.text",{teamName:o})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_flash.text",{teamName:o})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.mw(r))}),D=(0,m.nF)((e,r)=>{(0,a.sx)("file-browser-hydrate",{location:"team.onBatchJoin"});let n=(0,v.n1)(r.teamIds);(0,I._X)("onBatchJoinTeams").then(a=>{e.dispatch(p.Qv(a.data.meta));let i=r.teamIds.length;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_owner.text",{teamCount:i})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_admin.text",{teamCount:i})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.text",{teamCount:i})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.ii(r))});(0,m.nF)(e=>{let r=e.getState().currentUserOrgId;C.c.getTeamRoleRequestsOrgId({orgId:r}).then(r=>{e.dispatch(E.b({teamRoleRequests:r.data.meta}))})})},941302:(e,r,n)=>{n.d(r,{HE:()=>_,O_:()=>m,Pn:()=>u,Tt:()=>g,U8:()=>h,vp:()=>d});var a=n(841962),i=n(866415),o=n(653798),s=n(76265),l=n(507790),c=n(510669);function d(e,r,n){if(!e)return null;let i={userId:e.id,orgId:r};return(0,a.kc)().ps_benchmark&&(i.teamId=n||null),i}let u=(0,i.xx)(d);function m(e,r){let n=d(e.user,e.currentUserOrgId,e.currentTeamId);return(0,a.kc)().ps_benchmark?!!n&&n.userId===r.userId&&(!!n.orgId&&n.orgId===r.orgId||!!n.teamId&&n.teamId===r.teamId):!!n&&n.userId===r.userId&&n.orgId===r.orgId}let p=l.p;function h(e,r){let n={};return r.forEach(r=>{n[r]=p(e,r)}),n}function _(e,r,n,i){let l=(0,s.t)("navbar.workspaces.default_workspace_name");if(!r)return l;if(r.orgId){let a=n?.[r.orgId]||e.orgById[r.orgId];return a?.name||(0,s.t)("navbar.workspaces.default_org_workspace_name")}let d=(0,a.kc)().ps_benchmark;if(d&&r.teamId){let n=i?.[r.teamId]||e.teams[r.teamId];return n?.name||(0,s.t)("navbar.workspaces.default_team_workspace_name")}return d&&e.user?.id!=="-1"&&(0,o.Lo)("planSpaces","User with Plan Spaces enabled saw External Teams."),(0,c.userIsAMemberOfAnOrg)(e,r.userId)?(0,s.t)("navbar.profile_switcher.external_teams"):(0,s.t)("navbar.profile_switcher.your_teams")}function g(e,r){return 0!==e.length&&(e.length>1||p(r,e[0]).length>1)}},698003:(e,r,n)=>{n.d(r,{Ad:()=>w,Ir:()=>N,Jj:()=>I,bY:()=>y,dE:()=>C,m1:()=>S,nk:()=>E});var a=n(707062),i=n(512495),o=n.n(i),s=n(890882),l=n(841962),c=n(972142),d=n(76265),u=n(919558),m=n(880633),p=n(314540),h=n(468260),_=n(914077);n(250606);var g=n(522917),f=n(643225),E=(e=>(e.fileBrowserContextMenu="file_browser_context_menu",e.fileBrowserFavoritedContextMenu="file_browser_favorited_context_menu",e.fileBrowserTileActionMenu="file_browser_tile_action_menu",e.prototypeHeader="prototype_header",e.fullscreenToolbar="fullscreen_toolbar",e.expFigJamOnboardingShareVariant="exp_figjam_onboarding_share_variant",e.fullscreenCopyLinkButtonVisualBell="fullscreen_copy_link_button_visual_bell",e.prototypeCopyLinkButtonVisualBell="prototype_copy_link_button_visual_bell",e.customTemplatePublishNudge="custom_template_publish_nudge",e.expProTrialsV3CardStackWidget="exp_pro_trials_v3_card_stack_widget",e.editRequestTooltip="edit_request_tooltip",e.editRequestExternal="edit_request_external",e.shareToGoogleClassroomOnboarding="share_to_google_classroom_onboarding",e.googleClassroomIntegration="google_classroom_integration",e))(E||{});function y(e){return{...e,canEdit:!1,canEditCanvas:!1,hasEditRole:!1,hasViewRole:!1,canView:!1,canViewPrototype:!1,canViewPrototypeLinks:!1,canMove:!1,isOwner:!1,mainFileLinkExpirationConfig:null,passwordSetAt:null,passwordSetByUser:null,isPublishedHubFile:!1,folderAccessEnabled:!0,isDraftFileLG:!1,isAbandonedDraftFile:!1,mustUpgradeToShareDraft:!1}}function b(e){return{file:y(e),repo:null,rolesByUserId:{},fileRoleRequests:[],folder:null,folderRoles:[],isInDraftsFolder:!1,orgDraftsOwner:null,org:null,orgUser:null,currentOrg:null,team:null,workspace:null,orgs:{},dataLoaded:!1,fileSeenStatesByUserId:{},currentUser:null,sharedOrgLicenseGroupSetting:null,editorType:(0,_.wN)(e.editor_type),numProjectTeamMembersWithAccess:0}}function v(e){return e.fileLinkExpirationConfig||e.sourceFileLinkExpirationConfig}function T(e){return e.repo?.defaultFileKey===e.key}function I(e){let r=v(e),n=T(e),i=e.pwdConfig?.updatedAt||null,o=e.pwdConfig?.setByUser?(0,h.Um)(e.pwdConfig.setByUser):null,s=(0,u.HZ)({oldValue:(0,h.tJ)(e),newValue:{...m.F.toSinatra(e),client_meta:e.clientMeta||"",created_at:e.createdAt?.toString()||"",creator_id:e.creator.id,description:e.description||"",is_template:!!e.trackTags?.isTemplate,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,touched_at:"",trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,c.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,c.sy)(e.name||"")}`},label:"figFileWithFilePermissionsExtraFromLivegraph.figFile.v2",contextArgs:{fileKey:e.key},enableFullRead:(0,l.kc)().types_convergence_to_figfile,maxReports:4});return{canEdit:e.canEdit,canEditCanvas:e.canEditCanvas,hasEditRole:e.hasEditRole,hasViewRole:e.hasViewRole,canView:e.canView,canViewPrototype:e.canViewPrototype,canViewPrototypeLinks:e.hasViewPrototypeRole,canMove:e.canMove,passwordSetAt:i,passwordSetByUser:o,isOwner:n?!!e.repo?.roleOnObjectForUser?.isOwnerOfResource:!!e.roleOnObjectForUser?.isOwnerOfResource,isPublishedHubFile:!!e.publishedHubFile&&!e.publishedHubFile.unpublishedAt,mainFileLinkExpirationConfig:(0,h.Nl)(r),folderAccessEnabled:e.folderAccessEnabled&&(0,a.oA)(e.folderAccessEnabled)||!1,isDraftFileLG:e.isDraftFile&&(0,a.oA)(e.isDraftFile)||!1,isAbandonedDraftFile:e.isAbandonedDraftFile||!1,mustUpgradeToShareDraft:(0,a.oA)(e.mustUpgradeToShareDraft)||!1,...s}}function S(e,r){if("loaded"!==e.status)return b(r);let n=e.data.file;if(!n)return b(r);let i=v(n),o=T(n),s="loaded"===e.status&&e.data.file?I(e.data.file):y(r),l={};n.repo&&n.repo.roles.forEach(e=>{e.userId&&(l[e.userId]=e)});let c=n.project,d=null;c&&(d="loaded"===c.teamAccess.status?c.teamAccess.data:null);let u=new Set,m={};n.project&&n.project.roles.forEach(e=>{e.userId&&(m[e.userId]=e,u.add(e.userId))});let E={};n.team&&n.team.roles.forEach(e=>{e.userId&&(E[e.userId]=e,d&&d!==p.eD.TEAM_ACCESS_DISABLED&&u.add(e.userId))});let S={};(o?n.repo.roles:n.roles).forEach(e=>{let r=e.user?(0,h.Um)(e.user):null;if(r){let n=e.user?.orgUser||e.user?.guestOrgUser,a=l[r.id],i=E[r.id],o=m[r.id],s=e.user?.teamUser?{...e.user.teamUser,designPaidStatus:e.user.teamUser.designPaidStatus,whiteboardPaidStatus:e.user.teamUser.whiteboardPaidStatus}:null,c=(0,h.aU)(e,r,n||null,s||null);S[r.id]=c.pending?c:{...c,folderLevel:o?.level||null,teamLevel:i?.level||null,repoLevel:a?.level||null}}else e.pending&&(S[`pending-${e.id}`]=(0,h.aU)(e,null,null,null))});let w={};(0,g.zb)(r)&&n.fileSeenStates.forEach(e=>{let r=e.user?(0,h.Um)(e.user):null;if(r){let n=l[r.id],a=E[r.id],i=m[r.id],o=(0,h.WP)(e,r);w[o.user_id]={...o,folderLevel:i?.level||null,teamLevel:a?.level||null,repoLevel:n?.level||null}}});let C={};e.data.currentUser?.allBaseOrgUsers&&e.data.currentUser.allBaseOrgUsers.forEach(e=>{e.org&&(C[e.org.id]={})});let N=n.repo?{...(0,h.Xs)(n.repo),canEdit:n.repo.canEdit,mainFileLinkExpirationConfig:(0,h.Nl)(i)}:null;if(A(i)){let e={link_access:i.prevPrivateLinkAccess,proto_link_access:i.prevPrivateProtoLinkAccess,org_browsable:i.prevOrgBrowsable};s={...s,...e},N&&(N={...N,...e})}let L=n.project?.orgDraftsFolderOwnerBaseOrgUser?{id:n.project.orgDraftsFolderOwnerBaseOrgUser.id,design_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.accountType,whiteboard_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.whiteboardPaidStatus||p.El.STARTER,user_id:n.project.orgDraftsFolderOwnerBaseOrgUser.userId,user:(0,h.Um)(n.project.orgDraftsFolderOwnerBaseOrgUser.user)}:null;var O=void 0;n.org&&null!==n.org.imgUrl&&(O=n.org.imgUrl);let R=n.org&&n.org.k12GoogleOrg&&(0,a.oA)(n.org.k12GoogleOrg);return{file:s,repo:N,rolesByUserId:S,fileSeenStatesByUserId:w,fileRoleRequests:n.fileRoleRequests,folder:c&&{name:c.path,is_view_only:!!c.viewOnlyAt,is_invite_only:!!c.inviteOnlyAt,team_id:c.teamId,team_access:d,canRead:c.canRead&&(0,a.oA)(c.canRead)||!1},folderRoles:c&&c.roles||[],isInDraftsFolder:(0,f.VA)(c),orgDraftsOwner:L,org:n.org?{id:n.org.id,name:n.org.name,img_url:O,domain_capture:!!n.org.domainCapture,workshop_enabled:!n.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:n.org.inviteWhitelist?.guestInviteSetting,figjam_disabled_at:n.org.figjamDisabledAt,org_domains:(0,h.vy)(n.org.orgDomains),bigma_enabled:!!n.org.bigmaEnabledAt,k12_google_org:!!R}:null,orgUser:n.org?.currentBaseOrgUser?{id:n.org.currentBaseOrgUser.id,org_id:n.org.id,user_id:e.data.currentUser?.id,permission:n.org.currentBaseOrgUser.permission,license_group_member:n.org.currentBaseOrgUser.licenseGroupMember?{license_group_id:n.org.currentBaseOrgUser.licenseGroupMember.licenseGroupId}:void 0,design_paid_status:n.org.currentBaseOrgUser.designPaidStatus,whiteboard_paid_status:n.org.currentBaseOrgUser.whiteboardPaidStatus}:null,currentOrg:e.data.org?{domain_capture:!!e.data.org.domainCapture,id:e.data.org.id,invite_whitelist_guest_invite_setting:e.data.org.inviteWhitelist?.guestInviteSetting||null,figjam_disabled_at:e.data.org.figjamDisabledAt}:null,team:n.team?{id:n.team.id,name:n.team.name,img_url:n.team.imgUrl??void 0,subscription:n.team.subscription,student_team:!!n.team.studentTeamAt,grace_period_end:n.team.gracePeriodEnd?n.team.gracePeriodEnd.toISOString():null,canRead:n.team.canRead,org_access:n.team.orgAccess}:null,workspace:n.team?.workspace??null,orgs:C,dataLoaded:!0,currentUser:e.data.currentUser,sharedOrgLicenseGroupSetting:(0,h.Td)(n.org?{id:n.org.id,bigma_enabled:!!n.org?.bigmaEnabledAt}:null,n.org?.sharedOrgLicenseGroupSetting??e.data.org?.sharedOrgLicenseGroupSetting,n.team?.workspaceSharedSetting),editorType:(0,_.wN)(s.editor_type),numProjectTeamMembersWithAccess:u.size}}function w(e,r){let n;let a=null,i=null;return"loaded"===e.status&&"loaded"===r.status?(n="loaded",a=o()(e.data,r.data)):"errors"===e.status||"errors"===r.status?(n="errors",i=o()(e.errors||[],r.errors||[])):n="loading",{status:n,data:a,errors:i}}let A=e=>{if(!e)return!1;let{accessReverted:r,expiresAt:n}=e;return!r&&!!n&&(0,s.A)().isAfter(n)};function C({startingPointNodeId:e,startingPointsData:r}){if(r&&r.length>1&&e){let n=r.find(r=>r.id===e);if(n)return(0,d.t)("permissions.copy_link_button.visual_bell.copy_prototype_link_name",{name:n.name})}return(0,d.t)("permissions.copy_link_button.visual_bell.copy_prototype_link")}function N(e){return!!(!e.canEdit&&e.viewer_export_restricted&&e.link_access===p.PQ.INHERIT)}},225315:(e,r,n)=>{var a=n(569304);a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR},130258:(e,r,n)=>{n.d(r,{hP:()=>_,zD:()=>f}),n(411855),n(104352);var a=n(511611),i=n(851169),o=n(841962),s=n(76265),l=n(903600),c=n(542005);n(284406);var d=n(370884);n(393914),n(638731);var u=n(401562),m=n(503444);let p=(0,o.ck)("ea5973fed84d89957eddd325cdb8549719adbc15"),h=e=>({prompt:e.description,negativePrompt:"blurry, bad",cfgScale:8,seed:Math.floor(1e4*Math.random()),height:e.size.height,width:e.size.width,numImages:1}),_=(0,u.n)(async(e,r,n=!1)=>{let a=(0,m.Lp)({clientLifecycleId:r}),i=(await l.Ay.design.generateImages({...h(e),markUserAction:n},a)).images[0];return`data:image/png;base64,${i}`});async function g({node:e,base64:r,name:n,scaleMode:o,backgroundFill:s,shouldContinueStream:l}){if(!e.isAlive)return;let u=await (0,d.xF)(r,["*"]),m=await (0,c.UD)(u,"image/png",n);if(!e.isAlive||!l())return;let p=[...e.fills];i.l7.ai("first-draft-set-image-fill",()=>{e.insertImageInFillPaint(m)});let h=e.fills[p.length],_=(0,a.B9)(h.image?.hash||[]);return i.l7.ai("first-draft-set-image-fill",()=>{h.imageScaleMode=o,e.fills=function(e,r){let n=e.findIndex(e=>"IMAGE"===e.type);return n>=0?e.map((e,a)=>a===n?r:e).flat():r}(p,s?[s,h]:[h]),e.name=n}),_}async function f({node:e,shouldContinueStream:r=()=>!0}){await g({node:e,base64:p,shouldContinueStream:r,name:(0,s.t)("ai_image_tools.blocked"),scaleMode:"FIT",backgroundFill:{type:"SOLID",color:{r:1,g:1,b:1,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}})}async function E(e){let r=document.createElement("canvas"),n=r.getContext("2d");await new Promise((a,i)=>{let o=new Image;o.onload=function(){r.width=o.naturalWidth,r.height=o.naturalHeight,n.drawImage(o,0,0),a()},o.onerror=i,o.src=e});let a=r.width,i=r.height,o=n.getImageData(0,0,a,i),s=0,l=i,c=0,d=a,u=(e,r)=>0===o.data[r*a*4+4*e+3],m=e=>{for(let r=c;r<d;r++)if(!u(r,e))return!1;return!0},p=e=>{for(let r=s;r<l;r++)if(!u(e,r))return!1;return!0};for(;s<l&&m(s);)s++;for(;l-1>s&&m(l-1);)l--;for(;c<d&&p(c);)c++;for(;d-1>c&&p(d-1);)d--;let h=n.getImageData(c,s,d-c,l-s),_=r.ownerDocument.createElement("canvas");return _.width=h.width,_.height=h.height,_.getContext("2d").putImageData(h,0,0),_.toDataURL()}},612615:(e,r,n)=>{n(512671),n(104352);var a=n(217950),i=n(805014),o=n(851169),s=n(245954),l=n(885123);n(841962),n(875877);var c=n(550479);n(653798);var d=n(697737),u=n(481954);n(695024),n(176160);var m=n(421023),p=n(697435),h=n(401562);n(878001),n(724086),n(374937);var _=n(503444);function g(e,r,n){let a;let s=(0,_._F)(e,["FRAME","INSTANCE"]);a="LOCAL"===r.type?{type:i.AZ4.LOCAL,key:i.XJn.getKitKey(r.pageId)||""}:{type:i.AZ4.LIBRARY,key:r.key},o.l7.ai("first-draft-set-native-field",()=>{for(let e of s)e.firstDraftData={generationId:n??"",kit:a}})}n(130258);(0,h.n)(async function({dsKit:e,instanceNode:r,iconDescription:n,clientLifecycleId:l}){let d;if(!r.symbolId)return;let m=(0,s.UN)(),h=m.get(r.symbolId);if(!h)return;let{key:f,version:E}=(await p.Gh.getFirstDraftMatchGroup({kit_key:e.key,is_local:!1,group_name:_.C,description:n})).data.meta;if(!f){(0,c.$D)(a.e.AI_GENERATION,Error("first-draft: Grouped components: Could not find component for grouped component"),{extra:{dsKit:e,iconDescription:n,mainComponentId:h.guid}});return}let y=E?`/component/${f}/canvas?ver=${E}`:`/component/${f}/canvas`;if(!(d=await u.Eo.getCanvas({canvas_url:y})))return;let b=i.NfO.deserializeProductComponentFromBuffer(f,d),v=m.get(b);v&&"SYMBOL"===v.type&&o.l7.ai("first-draft-swap-grouped-component",()=>{r.swapComponent(v),g(r,e,l)})});(0,h.n)(async function(e,r){let n=(0,m.U2)(l.D?.getState().selectedView),a=await d.Ay.post(`/api/first_draft/kit_contents/${e.key}/detach_info`,{keys:r,file_key:n});return a.data?.meta?.should_detach??[]})},224588:(e,r,n)=>{n.d(r,{Py:()=>S,RI:()=>v,gZ:()=>T});var a=n(512671),i=n(563988),o=n(846288),s=n(724086),l=n(245954),c=n(841962),d=n(569304),u=n(503444),m=n(723501),p=n(683565),h=n(521389);function _(e){return e.classPropName??"className"}function g(e){if("INSTANCE"===e.type&&e.symbolId){let r=(0,a.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(r?.jsxName)return r.jsxName}let r=e.getSharedPluginData("jsx","type");return r&&"HStack"!==r&&"VStack"!==r?r:null}function f(e,r){let n={};if(!r.skipNodeIds&&(!r.skipNodeIdsWithoutType||g(e))&&(n.id=(0,l.UN)().developerFriendlyIdFromGuid(e.guid)),r.includeName&&(n.name=e.name),r.includeType&&!("INSTANCE"===e.type&&!r.detachInstances)){let r=g(e);r&&(n.type=r)}if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let a=e.componentPropertyReferences();if(a&&"visible"in a){let e=a.visible,i=r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e);i&&(n.visible=`{${b(i.devFriendlyProp)}}`)}}return n}let E=["SYMBOL","INSTANCE","FRAME","GROUP","SECTION","RECTANGLE","ELLIPSE","LINE"];function y(e,r){let n=f(e,r);n.type=e.type;let a=(0,i.Ed)(e,{...d.LW,position:!0,size:!0});return a.length&&(n[_(r)]=a.join(" ")),`<Unhandled ${(0,p.d)(n)} />`}function b(e){let r="DERIVED_BOOLEAN"===e.type?e.devFriendlyProp:e,n=r.key;if("index"in r){if(!(0,c.kc)().first_draft_ts_arrays)return r.nonArrayKey;n+=`[${r.index}]`}return"DERIVED_BOOLEAN"===e.type?`!!${n}`:n}function v(e,r){if("INSTANCE"!==e.type)throw Error(`Expected INSTANCE, got ${e.type} for node ${e.guid}`);if(!e.symbolId)throw Error(`INSTANCE has no symbolId ${e.guid}`);let n=(0,a.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!n)throw Error(`Could not get typeInfo for component ${e.symbolId}`);let o=f(e,r);if(!r.skipClassNames){let n=(0,i.Ed)(e,{...d.LW,position:!0});n.length&&(o[_(r)]=n.join(" "))}let m=(0,u.vR)(n);if(m&&e.symbolId){let r=(0,u.So)(e.symbolId,"SYMBOL");return Object.assign(o,(0,u.Kp)(m,r)),`<${(0,u.PJ)(m)} ${(0,p.d)(o)}/>`}Object.assign(o,function e(r,n,i){if(!r.symbolId)return{};let o=!!(0,c.kc)().first_draft_ts_arrays,d=(0,a.getComponentInfoById)(r.symbolId,{enableTsArrays:o});if(!d)throw Error(`Could not find mainComponent for node ${r.guid}`);if(!(0,l.UN)().get(r.symbolId))throw Error(`Could not find symbol ${r.symbolId} for node ${r.guid}`);let m=(0,u.Au)(r.guid,["INSTANCE"]),p={};m.forEach(e=>{let r=e.componentPropertyReferences();"mainComponent"in r&&(p[r.mainComponent]=e.visible)});let h={};for(let[e,n]of Object.entries(r.componentProperties()))h[(0,a.cleanComponentPropNameForUsage)(e)]=n;let _={},g={};for(let e of d.parsedDefs){if("DERIVED_BOOLEAN"===e.devFriendlyProp.type)continue;let a="ARRAY"===e.devFriendlyProp.type?e.devFriendlyProp.nonArrayKey:e.devFriendlyProp.key;if(a in h){if("SIMPLE"===e.devFriendlyProp.type){let r=h[a].value;(n||e.def.defaultValue!==r)&&(g[a]=r);continue}if("SIMPLE_CHOICE"===e.devFriendlyProp.type){let r=e.devFriendlyProp.validOptions;if("INSTANCE_SWAP"===e.def.type){let e=(0,s.c)(h[a].value);if(!e)throw Error("Could not find component for componentProp");if("SYMBOL"===e.type){let n=Object.values(e.variantProperties??{})[0];-1!==r.indexOf(n)?g[a]=n:console.error(`Could not find ${n} in ${JSON.stringify(r)}`)}continue}if("VARIANT"===e.def.type){let e=h[a].value;-1!==r.indexOf(e)?g[a]=e:console.error(`Could not find ${e} in ${JSON.stringify(r)}`)}}if("GROUPED_INSTANCE_SWAP"===e.def.type&&i){let r=h[a].value;if(n||e.def.defaultValue!==r){let n=(0,l.UN)().get(r);if(!n)throw Error(`Could not find icon symbol ${r}`);if(!p[e.rawProp])continue;let i={description:n.name};o&&"ARRAY"===e.devFriendlyProp.type?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],i]:g[a]=i}}}if("IMAGE"===e.def.type){if(i){g[a]={id:"0"};continue}let n=e.def.guidByParentComponentId[r.symbolId];if(n){let e=(0,u.uN)(r.guid,n);if(e){let r=(0,l.UN)().get(e),n=r?w(r):null;n&&(g[a]={description:n})}}}else if("NESTED_INSTANCE"===e.def.type)for(let r of Object.values(e.def.guidByParentComponentId))_[r]=e}let f=(0,l.UN)().developerFriendlyIdFromGuid(r.guid),E=f.startsWith("I")?`${f};`:`I${f};`;for(let s of(0,u.g5)(r.guid)){let r=(0,l.UN)().developerFriendlyIdFromGuid(s.guid).replace(E,"").split(";"),c=r[0];if(c&&1===r.length&&s.isBubbled&&s.symbolId){let r=e(s,n,i);if(Object.keys(r).length){let e=_[c];e&&"key"in e.devFriendlyProp?"ARRAY"===e.devFriendlyProp.type?o?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],r]:g[e.devFriendlyProp.nonArrayKey]=r:g[e.devFriendlyProp.key]=r:g[(0,a.cleanComponentPropNameForUsage)(s.name)]=r}}}if(o)for(let[e,r]of Object.entries((0,a.groupByCommonPrefixSorted)(Object.keys(g))))for(let n of(g[e]=r.map(e=>g[e]),r))delete g[n];return g}(e,r.includeDefaultValues??!1,r.includeCustomImageAndIconProps??!1));let h="";if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let i=e.componentPropertyReferences().mainComponent,s=r.componentDefinitionTypeInfo.parsedDefs.find(n=>{if(e.isBubbled&&"NESTED_INSTANCE"===n.def.type){for(let i of(0,a.getInstanceIdsForDef)(r.componentDefinitionTypeInfo?.componentId??"",n))if(i===e.guid)return!0}return!!i&&n.rawProp===i});if(s){if("SLOT"===s.def.type)return`{${b(s.devFriendlyProp)}}`;if(1===n.parsedDefs.length){let e=n.parsedDefs[0].devFriendlyProp.key;e in o?o[e]=`{${b(s.devFriendlyProp)} ?? ${JSON.stringify(o[e])}}`:o[e]=`{${b(s.devFriendlyProp)}}`}else h=`{...${b(s.devFriendlyProp)}}`}}return`<${[n.jsxName,(0,p.d)(o),h].filter(Boolean).join(" ")} />`}function T(e,r){return function(e,r={},n={includePropsType:!1},i){if(!("SYMBOL"===e.type||e.isStateGroup))throw Error(`Expected SYMBOL or isStateGroup, got: ${e.type}`);let s=i??(0,a.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!s)throw Error(`Could not find typeInfo for node: ${e.guid}`);let l=Object.values(s.prefixTypes),d={...r,componentUsageOrDefinition:"DEFINITION",componentDefinitionTypeInfo:s},p=new h.f,_=s.parsedDefs.map(e=>"DERIVED_BOOLEAN"===e.devFriendlyProp.type?"":"SIMPLE_CHOICE"===e.devFriendlyProp.type?"VARIANT"===e.def.type&&"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"GROUPED_INSTANCE_SWAP"===e.devFriendlyProp.type||"IMAGE"===e.devFriendlyProp.type?e.devFriendlyProp.key:"SIMPLE"===e.devFriendlyProp.type?"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"ARRAY"===e.devFriendlyProp.type?(0,c.kc)().first_draft_ts_arrays?0!==e.devFriendlyProp.index?"":e.devFriendlyProp.key:e.devFriendlyProp.nonArrayKey:void(0,o.xb)(e.devFriendlyProp)).filter(Boolean);if(n.includePropsType?(_.length>0&&s.propsTypeRepr.typeDefBody&&(p.append(`type ${s.jsxName}Props = `),p.append((0,m.CT)(s.propsTypeRepr.typeDefBody)),p.newline()),p.append(`function ${s.jsxName}(`),_.length>0&&(p.append(`{ ${_.join(", ")} }`),p.append(`: ${s.jsxName}Props`)),p.append(") {")):(p.append(`const ${s.jsxName}: React.FC<${s.propsTypeRepr.typeDefBody??"{}"}> = (`),_.length>0&&p.append(`{${_.join(", ")}}`),p.append(") => {")),p.newline(),"SYMBOL"===e.type)p.append(d.formatJSX?(0,m.uG)(I(e,d)):`  return ${I(e,d)}`),p.newline(),p.append("}");else if(e.isStateGroup){let r=!0;if((0,c.kc)().first_draft_serialize_all_variants){for(let n of(0,u.Au)(e.guid,["COMPONENT"])){if("SYMBOL"!==n.type)continue;let e=n.variantProperties();e&&(r&&d.formatJSX&&p.append(m.BH),r||p.append(" else "),p.append("if ("),p.append(Object.entries(e).map(([e,r])=>`${(0,a.toCamelCase)(e)} === ${JSON.stringify(r)}`).join(" && ")),p.append(") {"),d.formatJSX?(p.newline(),p.append((0,m.C5)((0,m.uG)(I(n,d)),m.BH)),p.newline(),p.append(`${m.BH}}`)):(p.append(`    return ${I(n,d)}`),p.newline(),p.append("}")),r=!1)}d.formatJSX?(p.newline(),p.append(`${m.BH}return null`)):p.append("  return null;")}else{let r=e.defaultVariant;r?p.append(d.formatJSX?(0,m.uG)(I(r,d)):`  return ${I(r,d)}`):p.append("return null")}p.newline(),p.append("}")}return{nodeId:e.guid,prefixTypes:d.formatJSX?l.map(e=>(0,m.S3)(e)):l,jsxStr:p.toString()}}(e,{skipNodeIds:!0,autoLayoutTagName:"div",frameTagName:"div",tailwindOptions:{size:!0,position:!0,flex:!0,radius:!1,color:!1,typography:!1},formatJSX:!0},{includePropsType:!0},r)}function I(e,r){if("SYMBOL"!==e.type)throw Error(`Unexpected node type: ${e.type}`);return S(e,{...r,parentComponentId:e.guid,tailwindOptions:r.tailwindOptions?{...r.tailwindOptions,position:!1}:{position:!1}})||"null"}function S(e,r){if(!1===e.visible)return null;let n={indent:"",...r},o=[];switch(e.type){case"INSTANCE":case"SYMBOL":case"SECTION":case"GROUP":case"FRAME":{if("INSTANCE"===e.type&&!n.detachInstances){o.push(`${n.indent}${v(e,n)}`);break}if("SYMBOL"===e.type&&"DEFINITION"!==n.componentUsageOrDefinition){o.push(`${n.indent}${function(e,r){if("SYMBOL"!==e.type)throw Error(`Expected SYMBOL, got ${e.type} for node ${e.guid}`);let n=f(e,r),i=(0,a.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!i)throw Error(`Could not find typeInfo for component: ${e.guid}`);return n.name=i.jsxName,"variantProperties"in e&&Object.assign(n,e.variantProperties),`<ComponentType ${(0,p.d)(n)} />`}(e,n)}`);break}let[r,s,l]=function(e,r){if(-1===E.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);let n=f(e,r),o=w(e);o&&(n.description=o);let s=a.IMAGE_NAME_FORMAT.test(e.name),l=e.fills.some(e=>"IMAGE"===e.type),c=!!o||s||l,d=(0,i.Ed)(e,r.tailwindOptions);d.length&&(n[_(r)]=d.join(" "));let u=function(e,r,n,a){if(-1===E.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);switch(e.type){case"SYMBOL":case"INSTANCE":case"FRAME":case"GROUP":if(n)return"Image";return r?a.autoLayoutTagName??"AutoLayout":a.frameTagName??"Frame";case"SECTION":return"Section";default:return"UNKNOWN"}}(e,-1!==d.indexOf("flex"),c,r);if(c&&"DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo&&r.parentComponentId){let a=r.componentDefinitionTypeInfo,i=r.parentComponentId,o=a.parsedDefs.find(r=>"IMAGE"===r.def.type&&r.def.guidByParentComponentId[i]===e.guid);if(o){let e=`{...${b(o.devFriendlyProp)}}`;return[`<${u} ${(0,p.d)(n)} ${e}>`,`<${u} ${(0,p.d)(n)} ${e} />`,`</${u}>`]}}return[`<${u} ${(0,p.d)(n)}>`,`<${u} ${(0,p.d)(n)} />`,`</${u}>`]}(e,n),d=e.childrenNodes.map(e=>S(e,{...n,tailwindOptions:{...n.tailwindOptions,position:!0},indent:n.formatJSX?n.indent+m.BH:n.indent}));if(d.length&&d.some(e=>e)){for(let e of(o.push(`${n.indent}${r}`),d))e&&o.push(e);o.push(`${n.indent}${l}`)}else o.push(`${n.indent}${s}`);break}case"TEXT":o.push(`${n.indent}${function(e,r){if("TEXT"!==e.type)throw Error(`Expected TEXT, got ${e.type} for node ${e.guid}`);let n=f(e,r),o=(0,i.Ed)(e,r.tailwindOptions);if(o.length&&(n[_(r)]=o.join(" ")),"DEFINITION"===r.componentUsageOrDefinition){let i=e.componentPropertyReferences();if(i&&"characters"in i){let e=i.characters,o=r.componentDefinitionTypeInfo&&r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e),s=o?b(o.devFriendlyProp):(0,a.cleanComponentPropNameForUsage)(e);return`<Text ${(0,p.d)(n)}>{${s}}</Text>`}}let s=e.characters&&e.characters.includes('"')?`{${JSON.stringify(e.characters)}}`:e.characters??"";return`<Text ${(0,p.d)(n)}>${s}</Text>`}(e,n)}`);break;case"RECTANGLE":case"ROUNDED_RECTANGLE":case"LINE":case"ELLIPSE":o.push(`${n.indent}${function(e,r){if(!("ELLIPSE"===e.type||"RECTANGLE"===e.type||"ROUNDED_RECTANGLE"===e.type||"LINE"===e.type))throw Error(`Unexpected standalone node type ${e.type} for node ${e.guid}. Expected ELLIPSE, RECTANGLE, or LINE`);let n=f(e,r),a=(0,i.Ed)(e,r.tailwindOptions);switch(a.length&&(n[_(r)]=a.join(" ")),e.type){case"ELLIPSE":return`<Ellipse ${(0,p.d)(n)}/>`;case"ROUNDED_RECTANGLE":case"RECTANGLE":return`<Rectangle ${(0,p.d)(n)}/>`;case"LINE":return`<Line ${(0,p.d)(n)}/>`;default:return y(e,r)}}(e,n)}`);break;default:o.push(`${n.indent}${y(e,n)}`)}return o.length>0?n.formatJSX?o.join("\n"):o.join(""):null}function w(e){return"fills"in e&&e.fills.some(e=>"IMAGE"===e.type)&&"true"===e.getSharedPluginData("jsx","isImage")&&e.fills.find(e=>"IMAGE"===e.type)&&(e.getSharedPluginData("jsx","description")||e.getSharedPluginData("jsx","altText"))||null}},626084:(e,r,n)=>{n.d(r,{Qy:()=>p,v$:()=>h});var a=n(846288),i=n(805014),o=n(851169),s=n(32079),l=n(696306),c=n(245954),d=n(503444),u=n(366172),m=n(374937);function p(e,r=!1){let n=e[0];if(!n||"FRAME"!==n.type||n.isInstanceSublayer)return;let s=(0,c.UN)();if(r){let r=function(e){let r=function(e){switch(e){case"buildingBlocks":return m.vh;case"icons":return d.C;case"atoms":return"Atoms";case"copiedDesigns":return"Copied Designs";default:(0,a.xb)(e)}}(e),n=c.UN().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===r);if(n)return n;{let e=g((0,c.UN)().getCurrentPage());return o.l7.user("create-section",()=>{let n=(0,c.UN)().createNode("SECTION");return n.name=r,n.relativeTransform={...n.relativeTransform,m02:e.right()+100,m12:e.top()},n})}}("icons");for(let n of e)!function(e,r){let n=i.XJn.findIcons(e.guid),a=(0,c.UN)(),o=n.map(e=>a.get(e)),s={x:g(r).right()+50,y:50},l={};for(let e of o){if(!e)continue;let n=i.XJn.findSimilarNodes(e.guid,r.guid,!1,!0,!1),o=n[0]?a.get(n[0]):null;o||((o=a.createComponentFromNode(e.clone())).visible=!0,r.appendChild(o),o.relativeTransform={...o.relativeTransform,m02:s.x,m12:s.y},s.y+=o.size.y+20),l[e.guid]=o.guid,_(e,o)}}(n,r)}let l=n.absoluteBoundingBox,u=s.createComponentFromNode(n.clone());u.visible=!0,s.getCurrentPage()?.appendChild(u),u.x=l.x+l.w+200,u.y=l.y;let f=h(e,u);return{component:u,nodeMapping:f}}function h(e,r){let n=new Map;for(let a of e){let e=_(a,r);e&&(n=new Map([...n,...e]))}return u.Y5.commit(),n}function _(e,r){let n=e.parentNode;if(!n||n.isPrimaryInstance||n.isInstanceSublayer||"SYMBOL"!==r.type)return;let a=n.childrenGuids.findIndex(r=>r===e.guid),o=r.createInstance();if(!o)return;let s=i.XJn.applyOverridesToInstanceToMatchNode(o.guid,e.guid);return n.insertChild(o,a+1),"NONE"===n.stackMode&&(o.x=e.x,o.y=e.y),o.visible=e.visible,e.removeSelfAndChildren(),s}function g(e){let r=null;for(let n of e.childrenNodes){let e=new s.r(new l.M(n.x,n.y),new l.M(n.size.x,n.size.y));r=r?r.unionWith(e):e}return r??new s.r}},801394:(e,r,n)=>{n.d(r,{Hj:()=>f});var a=n(217950),i=n(805014),o=n(841962),s=n(988927),l=n(550479),c=n(653798),d=n(829188),u=n(957020),m=n(697435),p=n(622233),h=n(722199);function _(e,r){if(!r)return{publishAssets:[],unpublishAssets:[]};let n=new Set(r.added.concat(r.modified)),a=[],i=r.removed;return e.forEach(e=>{n.has(e.key)&&a.push(e)}),{publishAssets:a,unpublishAssets:i}}function g(e){return e&&e!==u.E8.DELETED&&e!==u.E8.NOT_STAGED}async function f(e,r,n,a,s){let l=i.XJn.getKitKey(e);if(!l)return;let u=n.publishType,p=u===h.tf.LOCAL_GENERATION,f=await (0,d.LQ)(e);if(0===f.length)return;let y={},b=await (0,d.vg)(e),v={},T=i.XJn.getLocalExamples(e,f),I={},S=(0,d.pX)(),w={};!s&&(f.forEach(e=>{(u!==h.tf.LIBRARY_PUBLISH||g((n.localComponents[e.componentId]||n.localStateGroups[e.componentId])?.status))&&e.version&&(y[e.key]=e.version)}),b.forEach(e=>{(u!==h.tf.LIBRARY_PUBLISH||g(n.localComponents[e.defaultNodeId]?.status))&&e.version&&(v[e.key]=e.version)}),T.forEach(e=>{I[e.key]=e.version}),S&&(u===h.tf.LIBRARY_PUBLISH&&g(n.localVariableSets[S.nodeId]?.status),w[S.key]=S.version));let A=await m.Gh.postFirstDraftPublishStatus({productComponentKeyToVersion:y,groupedComponentKeyToVersion:v,exampleKeyToVersion:I,variableSetKeyToVersion:w,publishType:u,kitKey:l}),{publishAssets:C,unpublishAssets:N}=_(f,A.data.meta.product_component_status),{publishAssets:L,unpublishAssets:O}=_(b,A.data.meta.grouped_component_status),{publishAssets:R,unpublishAssets:P}=_(T,A.data.meta.example_status),D=await E(R),k={};for(let e of R){let n=(0,o.kc)().first_draft_direct_gen?await (0,d.tV)(e.nodeId):await (0,d.au)(r,e.nodeId);n&&(k[e.key]=n)}let{publishSets:M,unpublishSets:F}=function(e,r){if(!r)return{publishSets:[],unpublishSets:[]};let n=r.removed;return{publishSets:e.filter(e=>!n.includes(e.key)),unpublishSets:n}}(S?[S]:[],A.data.meta.variable_set_status);if(M.length>0&&!a&&!s){(0,c.x1)("First draft publish","Skipping kit publish because no theme variables were supplied");return}let x=!0===(0,o.kc)().first_draft_direct_gen&&!1===p&&n.isDirectGenCompatible;return{kit:{name:r,key:l,is_local:p,use_direct_generation:x},publish_product_components:C.map(e=>({name:e.name,jsx_name:e.jsxName,key:e.key,version:e.version,description:e.description,type_info:{jsx_name:e.jsxName,type_str:e.typeStr,jsx_component_def:e.jsxComponentDef?.jsxStr,prefix_types:e.prefixTypes,prefix_comments:e.prefixComments,description:e.description,type_info_version:(0,o.kc)().first_draft_direct_gen?h.Rd:h.Q6}})),unpublish_product_components:N,publish_grouped_components:L.map(e=>({name:e.name,key:e.key,version:e.version,description:e.description,group_name:e.groupName})),unpublish_grouped_components:O,publish_examples:R.map(e=>({key:e.key,version:e.version,example_info:{componentKeys:e.componentKeys,componentJsxNames:e.componentJsxNames,nodeId:e.nodeId,name:e.name,jsxInfo:k[e.key]??null},thumbnail_url:D[e.key]})),unpublish_examples:P,publish_variable_sets:a?M.map(e=>({key:e.key,name:e.name,version:e.version,theme_info:{theme_info_version:h.$5,customizable_variables:a,modes:e.modes}})):[],unpublish_variable_sets:F}}async function E(e){let r={};if(0===e.length)return r;let n={};for(let r of e){let[e,a]=i.Vzr.generateThumbnailForNode(r.nodeId,768,768,1,{});n[r.key]=a}let o=(await p.b.getUploadThumbnailsPresignedPostUrls(Object.keys(n).length)).data.meta.presigned_posts;return o.length<Object.keys(n).length?(0,l.$D)(a.e.AI_GENERATION,Error("Mismatch between number of thumbnails and presigned URLs")):await Promise.allSettled(Object.entries(n).map(async([e,n],i)=>{let{url:c,fields:d}=o[i];try{let i=await (0,s.ET)(a.e.AI_GENERATION,"uploadThumbnails",c,d,n,"application/octet-stream");r[e]=i}catch(e){(0,l.$D)(a.e.AI_GENERATION,Error("Unable to upload example thumbnail to S3"))}})),r}},251670:(e,r,n)=>{n(851169),n(245954),n(230208),n(403816);var a=(e=>(e[e.XXXS=4]="XXXS",e[e.XXS=8]="XXS",e[e.XS=12]="XS",e[e.S=16]="S",e[e.M=24]="M",e[e.L=32]="L",e[e.XL=48]="XL",e[e.XXL=64]="XXL",e[e.XXXL=96]="XXXL",e))(a||{})},855975:(e,r,n)=>{n.d(r,{Cr:()=>o,ZO:()=>i,k_:()=>a}),n(217950),n(903570),n(805014),n(851169),n(694676),n(245954),n(550479),n(374937),n(612615),n(503444),n(366172),n(434992),n(394150),n(159330);let a=6,i={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/content-primary",cornerRadius:"\u2726/cornerRadius/small",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"},o={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/text-default",cornerRadius:"\u2726/cornerRadius/medium",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"}},844882:(e,r,n)=>{var a=(e=>(e.LIGHT="light",e.DARK="dark",e))(a||{}),i=(e=>(e.DEFAULT="default",e.BRAND="brand",e))(i||{}),o=(e=>(e.BG="bg",e.CONTENT="content",e.BORDER="border",e))(o||{}),s=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e))(s||{})},394150:(e,r,n)=>{n(7408),n(230208),n(141630),n(653798),n(844882)},159330:(e,r,n)=>{n(851169),n(694676),n(230208),n(663295),n(225315),n(569304),n(251670),n(844882),n(394150);var a=(e=>(e.Mobile="mobile",e.Website="website",e))(a||{})},569304:(e,r,n)=>{n.d(r,{GS:()=>s,LW:()=>h,lu:()=>l,u7:()=>o,vj:()=>c});var a=n(338584);let i=a.object({type:a.string(),props:a.record(a.any())}).extend({children:a.lazy(()=>a.union([a.string().array(),i.array()]))});var o=(e=>(e.SPACING="spacing",e.CORNER_RADIUS="cornerRadius",e.FONT="font",e.COLOR="color",e.DARK_MODE="dark",e))(o||{}),s=(e=>(e.DEFAULT="default",e.SERIF="serif",e))(s||{}),l=(e=>(e.TITLE="title",e.BODY="body",e.LABEL="label",e))(l||{}),c=(e=>(e.BOLD="bold",e.MEDIUM="medium",e.REGULAR="regular",e))(c||{});let d=a.object({value:a.number(),units:a.enum(["RAW","PIXELS","PERCENT"])}),u=a.object({fontName:a.object({family:a.string(),style:a.string()}),letterSpacing:d.optional()}),m=a.object({r:a.number(),g:a.number(),b:a.number(),a:a.number()}),p=a.object({colorVariableMap:a.record(a.string(),m),numberVariableMap:a.record(a.string(),a.number()),fontVariableMap:a.record(a.string(),u).optional()});a.object({accentColor:m.optional(),darkMode:a.boolean(),variableMaps:p.optional()}),a.object({position:a.boolean(),size:a.boolean(),flex:a.boolean(),color:a.boolean(),radius:a.boolean(),typography:a.boolean()});let h={position:!1,size:!1,flex:!1,color:!1,radius:!1,typography:!1};a.object({nodeId:a.string().nullable(),jsxStr:a.string(),prefixTypes:a.array(a.string())});let _=a.object({children:a.string().optional(),className:a.string().optional()});a.object({componentName:a.string().optional(),overrides:a.record(_)}),a.object({key:a.string(),nodeId:a.string(),version:a.string(),descriptionLegacy:a.string(),componentKeys:a.array(a.string()),componentJSXNames:a.array(a.string())})},829188:(e,r,n)=>{n.d(r,{LQ:()=>b,_:()=>I,au:()=>L,pX:()=>S,tV:()=>C,vg:()=>y});var a=n(512671),i=n(274614),o=n(878001),s=n(217950),l=n(724086),c=n(805014),d=n(245954),u=n(829531),m=n(841962),p=n(550479),h=n(653798),_=n(374937),g=n(224588),f=n(503444);let E=e=>{let r=(0,d.UN)().get(e);return!!r&&(r.isStateGroup?r.childrenNodes.every(e=>e.isIconLikeContainer):r.isIconLikeContainer)};async function y(e){let{info:r}=await v({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},useAllPages:(0,m.kc)().first_draft_publish_all_components,pageChildrenName:(0,m.kc)().first_draft_publish_all_components?void 0:f.C},includeJSX:!1});return r.filter(e=>(0,m.kc)().first_draft_publish_all_components?E(e.componentId):(0,a.isPartOfGroup)(e.componentGroupPath,f.C))}async function b(e){let r=(0,m.kc)().first_draft_publish_all_components&&!e,{info:n}=await v({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},useAllPages:r},includeJSX:!!(0,m.kc)().first_draft_direct_gen&&!!(0,m.kc)().first_draft_full_component_def}),i=(0,_.VN)(e),o=await T(i,!0);return n.filter(e=>(0,m.kc)().first_draft_publish_all_components?!E(e.componentId):(0,a.isPartOfGroup)(e.componentGroupPath,_.vh)).concat(o)}async function v(e){let r=(0,o.__)(e),n=(0,l.B)([...r],{followInstances:!1}).filter(e=>"SYMBOL"===e.type?e.isSymbolPublishable:!!e.isStateGroup&&!e.hiddenFromPublishing);return{info:await T(n,e.includeJSX)}}async function T(e,r){return(0,a.resetTypeInfoCache)(),(await Promise.all(e.map(async e=>{try{let n=(0,a.getTypeInfoCached)(e,{enableTsArrays:!!(0,m.kc)().first_draft_ts_arrays});if(!r)return n;let i=(0,m.kc)().first_draft_share_jsx?await (0,u.gZ)(e,{topLevelComponentProps:!0},{useDivTagsForFrames:!0,inlineVectorData:!1,useCustomGroupAndImageFormatForFirstDraft:!0}):(0,g.gZ)(e,n);return{...n,jsxComponentDef:i}}catch(r){(0,p.$D)(s.e.AI_GENERATION,r,{extra:{nodeId:e.guid}})}}))).filter(Boolean)}function I(){return c.CWU.getLocalVariableSetsInfo().filter(e=>!e.isSoftDeleted&&(0,f.n6)(e.name,_.i2)).map(e=>({key:e.keyForPublish,name:e.name,version:e.userFacingVersion,nodeId:e.id,defaultModeId:e.defaultModeID,modes:e.modes}))}function S(){let e=I().sort((e,r)=>e.nodeId.localeCompare(r.nodeId));if(0!==e.length&&!(e.length>1))return e[0]}async function w(e){return(await (0,u.oy)(e,{tailwind:!0,includeIDs:!1,topLevelComponentProps:!0,strict:!1,transformUnhandledNodes:!!(0,m.kc)().first_draft_debug,useCustomGroupAndImageFormatForFirstDraft:!0,useDivTagsForFrames:!0})).jsxStr}async function A(e){return(0,m.kc)().first_draft_share_jsx?await w(e):(0,g.Py)(e,{skipNodeIds:!0,autoLayoutTagName:"Frame",frameTagName:"Frame",formatJSX:!0,includeDefaultValues:!0,includeCustomImageAndIconProps:!0})}async function C(e){let r=(0,d.UN)().get(e);if(!r||"FRAME"!==r.type)return null;let n=await A(r);return n?{jsx:n,buildingBlockToRegion:{}}:null}function N(e){let{layoutName:r,header:n,mainContent:a,footer:i,sidebar:o}=e,s={};for(let e of(s[n.name]="header",a))s[e.name]="mainContent";if(o)for(let e of o.blocks)s[e.name]="sidebarContent";return s[i.name]="footer",{jsx:`<${r} header={${n.tag}} mainContent={[${a.map(e=>e.tag).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tag).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${i.tag}} />`,jsxWithProps:`<${r} header={${n.tagWithProps}} mainContent={[${a.map(e=>e.tagWithProps).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tagWithProps).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${i.tagWithProps}} />`,buildingBlockToRegion:s}}async function L(e,r){let n=async e=>{let r=(0,a.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,m.kc)().first_draft_ts_arrays});if(!r||r.componentType!==i.J.BUILDING_BLOCK)throw Error("Expected building block");return{name:r.jsxName,tag:`<${r.jsxName} />`,tagWithProps:(0,m.kc)().first_draft_share_jsx?await w(e):(0,g.RI)(e,{skipNodeIds:!0,includeDefaultValues:!0,includeCustomImageAndIconProps:!0})}},o=e=>"FRAME"===e.type&&((0,f.n6)(e.name,"spacer")||(0,f.n6)(e.name,"filler"));try{let s=function(e){let r=e.toLowerCase();return r.includes("mobile")||r.includes("app")?"mobile":r.includes("site")?"website":"vstack-only"}(e);if("vstack-only"===s)return null;let l=(0,d.UN)().get(r);if(!l||"FRAME"!==l.type)return null;for(let e of function e(r){if(r.isPrimaryInstance)return[r];if(r.isInstanceSublayer)return[];let n=[];for(let a of r.childrenNodes)n.push(...e(a));return n}(l)){let r=(0,a.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,m.kc)().first_draft_ts_arrays});if(!r||r.componentType!==i.J.BUILDING_BLOCK)return null}if("VERTICAL"===l.stackMode&&l.childrenNodes.filter(e=>"INSTANCE"===e.type).length>=3&&l.childrenNodes.every(e=>"INSTANCE"===e.type||o(e))){let e=l.childrenNodes.filter(e=>"INSTANCE"===e.type),r=await Promise.all(e.map(n));return N({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:r[0],mainContent:r.slice(1,r.length-1),footer:r[r.length-1]})}if("VERTICAL"===l.stackMode&&3===l.childCount&&"INSTANCE"===l.childrenNodes[0].type&&"FRAME"===l.childrenNodes[1].type&&"VERTICAL"===l.childrenNodes[1].stackMode&&l.childrenNodes[1].childrenNodes.every(e=>"INSTANCE"===e.type||o(e))&&"INSTANCE"===l.childrenNodes[2].type){let e=await n(l.childrenNodes[0]),r=await n(l.childrenNodes[2]),a=l.childrenNodes[1].childrenNodes.filter(e=>"INSTANCE"===e.type),i=await Promise.all(a.map(n));return N({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:e,mainContent:i,footer:r})}if("website"===s&&"VERTICAL"===l.stackMode&&3===l.childCount&&"INSTANCE"===l.childrenNodes[0].type&&"FRAME"===l.childrenNodes[1].type&&"HORIZONTAL"===l.childrenNodes[1].stackMode&&2===l.childrenNodes[1].childCount&&l.childrenNodes[1].childrenNodes.every(e=>"FRAME"===e.type&&"VERTICAL"===e.stackMode&&e.childrenNodes.every(e=>"INSTANCE"===e.type))&&"INSTANCE"===l.childrenNodes[2].type){let e=await n(l.childrenNodes[0]),r=await n(l.childrenNodes[2]),a=l.childrenNodes[1].childrenNodes[0],i=l.childrenNodes[1].childrenNodes[1];if(!a||!i)return null;let o=a.absoluteRenderBounds.w<i.absoluteRenderBounds.w,s=o?i:a,c=o?a:i,d=c.absoluteRenderBounds.w,u=await Promise.all(s.childrenNodes.map(n)),m=await Promise.all(c.childrenNodes.map(n));return N({layoutName:o?"DesktopTwoColWithLeftSidebar":"DesktopTwoColWithRightSidebar",header:e,mainContent:u,footer:r,sidebar:{width:d,blocks:m}})}}catch(n){(0,h.xi)("getNodeJSXFromExample","unhandled error",{error:n,kitName:e,exampleNodeId:r})}return null}},522749:(e,r,n)=>{n.d(r,{Gs:()=>i});var a=n(338584);function i(e){return"INSTANCE"===e.type&&"true"===e.getSharedPluginData("first_draft_make_kit","is_kit_instance")}a.object({componentPropertyDefinitions:a.array(a.object({name:a.string(),type:a.string()})),componentPropertyReferences:a.record(a.string(),a.record(a.string(),a.string()))})},503444:(e,r,n)=>{n.d(r,{Au:()=>m,C:()=>_,Kp:()=>g,Lp:()=>v,PJ:()=>f,So:()=>T,_F:()=>I,g5:()=>p,iR:()=>y,n6:()=>h,uN:()=>S,vR:()=>b});var a=n(512671);n(805014);var i=n(245954),o=n(875877),s=n(653798),l=n(402985),c=n(804970),d=n(886231),u=n(176160);function m(e,r,n,a){if(!e)return[];let o=a??(0,i.UN)(),s=o.get(e);if(!s)return[];let l=s.findAllWithCriteriaGUIDs({types:r,...n}),c=[];for(let e of l){let r=o.get(e);r&&c.push(r)}return c}function p(e){let r=(0,i.UN)().get(e);return r?(r.update(),m(r.guid,["INSTANCE"])):[]}function h(e,r){return(e=e.replace(/[^0-9a-z]/gi,"").toLowerCase())===(r=r.replace(/[^0-9a-z]/gi,"").toLowerCase())}let _="Icons";function g(e,r){return{description:r.name||""}}function f(e){var r;return e=e.endsWith("s")?e.slice(0,e.length-1):e,`Custom${r=(r=(r=e).replace(/[^0-9a-z]/gi,"")).charAt(0).toUpperCase()+r.substr(1)}`}let E=[_];function y(e){for(let r of E)if((0,a.isPartOfGroup)(e,r))return r;return null}function b(e){return y(e.componentGroupPath)}function v({clientLifecycleId:e}){return{orgId:o.atomStore.get(c._s)||null,teamId:o.atomStore.get(u.As)||null,fileKey:o.atomStore.get(u.ze)||null,userId:o.atomStore.get(d.kS)||null,clientLifecycleId:e,trackingSessionId:(0,l.f)()}}function T(e,r){let n=(0,i.UN)().get(e);if(!n||n.type!==r)throw Error(`Unexpected node type for id=${e}. Expected ${r} got: ${n?.type}`);return n}function I(e,r,n,a){let i=[];if(r.includes(e.type)){if(n){if(n.sharedPluginData){let r=e.getSharedPluginDataKeys(n.sharedPluginData.namespace),a=n.sharedPluginData.keys||[];(0===a.length&&r.length>0||r.some(e=>a.includes(e)))&&i.push(e)}}else i.push(e)}return i.push(...m(e.guid,r,n,a)),i}function S(e,r){let n=(0,i.UN)().get(r);return n?n.getSublayerIdForInstanceOfSymbol(e):((0,s.xi)("first-draft","No component sublayer found for",{symbolSublayer:n}),null)}},631016:(e,r,n)=>{n.d(r,{C_:()=>d,WU:()=>h,cw:()=>p,fB:()=>g,hx:()=>_});var a=n(411855);n(188507);var i=n(652894),o=n(708967);n(885123),n(841962);var s=n(666308),l=n(747484);n(47795),n(585564),n(110124),n(914077),n(141604),n(806273),n(926996);let c=[];function d(e,r){a.useEffect(()=>{if(r)return;let n=e.current;if(n)return function(e,r){let n={element:e};if(!c.length){c.push(n);return}for(let[r,{element:a}]of c.entries()){let i=a.compareDocumentPosition(e);if(i===Node.DOCUMENT_POSITION_PRECEDING||i===Node.DOCUMENT_POSITION_CONTAINS){if(c[r-1]?.element===e)return;c.splice(r,0,n);return}}c.push(n)}(n),()=>{(function(e){let r=c.findIndex(r=>r.element===e);c.splice(r,1)})(n)}},[e,r])}function u(e){var r;if(e.focus)return e.focus();let n=((r=e.element)?(0,i.Kr)(r,{getShadowRoot:!0})[0]:null)||e.element;return n?.focus(),n}function m(e){for(let[r,{element:n}]of c.entries())if(n.contains(document.activeElement)){let n=c.length,a=c[(n+r+("forward"===e?1:-1))%n],i=a&&u(a);if(i)return i}let r="forward"===e?c[0]:c[c.length-1];return r?u(r):null}function p(e){m("backward"),(0,o.f)(o.h.FOCUS_CYCLE_PREVIOUS_AREA,{key:e})}function h(e){m("forward"),(0,o.f)(o.h.FOCUS_CYCLE_NEXT_AREA,{key:e})}function _(e){let{e:r,onClickHandler:n,onEscapeHandler:a}=e;n&&r.keyCode===s.Uz.ENTER&&n(r),a&&r.keyCode===s.Uz.ESCAPE&&a(r)}function g(e){return function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&0===(0,s.sN)(e)||r&&"ArrowRight"===e.key}(e)||function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT|s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT)||r&&"ArrowLeft"===e.key}(e)}},643225:(e,r,n)=>{n.d(r,{B_:()=>h,CI:()=>f,D:()=>c,Gi:()=>u,N5:()=>E,SS:()=>b,T9:()=>d,VA:()=>p,cU:()=>v,d:()=>m,gj:()=>_,jd:()=>I,oq:()=>y,sp:()=>g,ye:()=>T});var a=n(841962);n(728722),n(736942),n(183739);var i=n(510669),o=n(880146),s=n(957020),l=n(331850);function c(e,r){return u(e[r])}function d(e){let r=!!e&&""===e.path;return(0,a.kc)().ps_benchmark?r:r&&!e.teamId}function u(e){let r=!!e&&""===e.path;return(0,a.kc)().ps_benchmark?r:r&&!e.team_id}function m(){return`temp-${+new Date}`}function p(e){return(0,a.kc)().ps_benchmark?e?.path==="":e?.path===""&&!e?.teamId}function h(e){return e?.path===""&&!!e?.teamId}function _(e,r,n,a){if(!e)return null;if(a)return r[a.drafts_folder_id]||null;for(let a in r){let i=r[a],o=n[a]?n[a][e]:null;if(!i.teamId&&""===i.path&&null==i.orgId&&o&&o.level===l.e6.OWNER)return i}return null}function g(e){return e&&!e.team_id&&""!==e.path&&!!e.org_id}function f(e){return e?.path===""?(0,s.Tb)():e?.path}function E(e,r){return null!=r&&r in e}function y(e,r){let n=r.folders[e];if(n&&n.org_id)return n.org_id;if(n&&n.team_id){let e=r.teams[n.team_id];if(e&&e.org_id)return e.org_id}}function b(e){return e.length<=0?"Please provide a name":e.length>255?"Sorry, name must be at max 255 characters.":e.match(/[\/\\:?*"|]/)?'The following characters are not allowed:  / : ? * " |':void 0}function v(e,r,n,s){if(!(0,a.kc)().ps_benchmark)return(0,o.EE)(e,r);let l=n&&(0,i.canViewTeam)(n,s);return r?`${location.origin}/files/${r}/project/${e}`:l?`${location.origin}/files/team/${n}/project/${e}`:s.user?.personal_drafts_folder_id===e?`${location.origin}/files/drafts-to-move`:`${location.origin}/files/project/${e}`}function T(e){return!!e&&!!e.team_id&&!e.path}function I(e){return!!e&&!!e.teamId&&!e.path}n(161935)},294601:(e,r,n)=>{n.d(r,{Zb:()=>f});var a=n(511445),i=n(269685),o=n(805014),s=n(809461),l=n(76265),c=n(553362),d=n(73041),u=n(779099),m=n(122678),p=(e=>(e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.RIGHT=4]="RIGHT",e[e.LEFT=8]="LEFT",e[e.UP_RIGHT=5]="UP_RIGHT",e[e.UP_LEFT=9]="UP_LEFT",e[e.DOWN_RIGHT=6]="DOWN_RIGHT",e[e.DOWN_LEFT=10]="DOWN_LEFT",e))(p||{}),h=(e=>(e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e))(h||{}),_=(e=>(e[e.NONE=0]="NONE",e[e.DECREASED=1]="DECREASED",e[e.INCREASED=2]="INCREASED",e))(_||{});class g{constructor(e){this.store=e,this.store=e,this.debounceNodeResizeUpdate=(0,a.s)(e=>{this.announceDomChange(o.x8F.NODE_RESIZED,e);let r=o.AlE.getActiveDocument();o.yGz.resetStoredSelectedNodeBounds(r)},200),this.debounceNodeMovementUpdate=(0,a.s)(e=>{this.announceDomChange(o.x8F.NODE_MOVED,e);let r=o.AlE.getActiveDocument();o.yGz.resetStoredSelectedNodeBounds(r)},200)}announceDomChange(e,r){let n=(0,d.XE)(this.store.getState().selectedView),a=this.store.getState();if(!a.screenreader.enabled)return;let i=function(e,r,n,a){let i=r.targetNodeType?E(r.targetNodeType,a):"";switch(e){case o.x8F.NODE_CREATED:if(r.targetNodeType===o.Z6A.STAMP&&r.stickableHostType)return(0,l.t)("fullscreen.accessibility.stamp_attached_announcement",{hostType:E(r.stickableHostType,a)});return(0,l.t)("fullscreen.accessibility.node_created_announcement",{node_type:i});case o.x8F.NODE_DELETED:return r.multiSelection?(0,l.t)("fullscreen.accessibility.multiple_node_deleted_announcement"):(0,l.t)("fullscreen.accessibility.node_deleted_announcement",{node_type:i});case o.x8F.TEXT_SELECTION:return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:i});case o.x8F.TOOL:if(r.targetNodeType===o.Z6A.STAMP)return;return r.targetNodeType!==o.Z6A.NONE?(0,l.t)("fullscreen.accessibility.tool_selected",{nodeType:i,shortcut:(0,u.c1)(n,"toggle-menu")}):(0,l.t)("fullscreen.accessibility.tool_unselected");case o.x8F.TABLE_CELL_TEXT_SELECTION:if(null!=r.tableCellCol&&null!=r.tableCellRow)return(0,l.t)("fullscreen.accessibility.next_table_cell_announcement",{r:r.tableCellRow,c:r.tableCellCol});return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:i});case o.x8F.NODE_RESIZED:let s,c,d;let m=r.nodeSizeDelta;if(!m)return;let p=0,h=0,_=0;switch(0!==m.x&&(p|=1,h=m.x>0?2:1),0!==m.y&&(p|=2,_=m.y>0?2:1),p){case 0:return;case 1:s=(0,l.t)("fullscreen.accessibility.node_resize_horizontal"),c=y(h),d=Math.abs(m.x);break;case 2:s=(0,l.t)("fullscreen.accessibility.node_resize_vertical"),c=y(_),d=Math.abs(m.y);break;default:let g=Math.abs(m.x),f=y(h),b=Math.abs(m.y),v=y(_);return(0,l.t)("fullscreen.accessibility.node_resize_bidirectional",{nodeType:i,resizedComparisonX:f,nodeResizeXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:g}),resizedComparisonY:v,nodeResizeYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:b})})}return(0,l.t)("fullscreen.accessibility.node_resize_unidirectional",{nodeType:i,nodeSizeDelta:d,resizeComparison:c,nodeDirection:s});case o.x8F.NODE_MOVED:let T,I,S=0,w=r.nodeMovementDelta;if(!w)return;switch(w.x>0?S|=4:w.x<0&&(S|=8),w.y<0?S|=1:w.y>0&&(S|=2),S){case 0:return;case 1:T=(0,l.t)("fullscreen.accessibility.node_movement_up"),I=Math.abs(w.y);break;case 2:T=(0,l.t)("fullscreen.accessibility.node_movement_down"),I=Math.abs(w.y);break;case 4:T=(0,l.t)("fullscreen.accessibility.node_movement_right"),I=Math.abs(w.x);break;case 8:T=(0,l.t)("fullscreen.accessibility.node_movement_left"),I=Math.abs(w.x);break;default:let A=(4&S)==4?(0,l.t)("fullscreen.accessibility.node_movement_right"):(0,l.t)("fullscreen.accessibility.node_movement_left"),C=Math.abs(w.x),N=(1&S)==1?(0,l.t)("fullscreen.accessibility.node_movement_up"):(0,l.t)("fullscreen.accessibility.node_movement_down"),L=Math.abs(w.y);return(0,l.t)("fullscreen.accessibility.node_movement_bidirectional",{nodeType:i,nodePositionXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:C}),nodeDirectionX:A,nodePositionYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:L}),nodeDirectionY:N})}return(0,l.t)("fullscreen.accessibility.node_movement_unidirectional",{nodeType:i,nodePositionDelta:I,nodeDirection:T});default:return}}(e,r,a.mirror.appModel.keyboardShortcuts,n),s=function(e){switch(e){case o.x8F.NODE_CREATED:case o.x8F.NODE_DELETED:return"creation-deletion";case o.x8F.NODE_RESIZED:return"resize";case o.x8F.NODE_MOVED:return"movement";case o.x8F.TEXT_SELECTION:case o.x8F.TABLE_CELL_TEXT_SELECTION:return"selection";case o.x8F.TOOL:return"tool";default:return}}(e);i&&s&&this.store.dispatch(c.F.enqueue({type:`accessibility-screen-reader-announcement-${s}`,message:i,role:"status",timeoutOverride:500}))}debounceNodeResizeUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedResizeUpdate(e)}debounceNodeMovementUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedMovementUpdate(e)}prefersReducedMotion(){return matchMedia("(prefers-reduced-motion: reduce)").matches}getWCAG2Contrast(e,r){return(0,s.f)((0,i.aH)(e),(0,i.aH)(r))}}function f(e){new g(e)}function E(e,r){let n=o.Z6A[e];return(0,m.r)(n,r)}function y(e){switch(e){case 1:return(0,l.t)("fullscreen.accessibility.node_resize_decrease");case 2:return(0,l.t)("fullscreen.accessibility.node_resize_increase");default:return(0,l.t)("fullscreen.accessibility.node_resize_none")}}},910084:(e,r,n)=>{n.d(r,{fh:()=>u,tO:()=>h});var a=n(879058),i=n(805014),o=n(875877),s=n(366172),l=n(384894),c=n(957020);let d={[c.PW.CODE_COMPONENT]:{idl:i.PWo.CODE_COMPONENT,key:(0,a.Sm)(""),version:(0,a.j6)("")}},u={[c.PW.CODE_COMPONENT]:{subscribed:function(e){let r=d[e].idl,n=(0,o.atom)({}),a=(0,o.withReducer)(n,(r,n)=>{if("changed"in n){if(!(0,l.e)(e))return r;let a=n.changed;return{...r,...a.reduce((e,r)=>(e[r.key]={sourceLibraryKey:r.sourceLibraryKey,pagesByVersion:{...e[r.key]?.pagesByVersion,...function(e){let r={};for(let{version:n,consumingPages:a}of e)r[n]=a;return r}(r.pagesByVersion)}},e),{})}}return"reset"in n?{}:r}),c=`consumedAssetVersionsByKey(${i.PWo[r]})`;return a.debugLabel=c,a.onMount=n=>{var a;let o=()=>{(0,l.e)(e)&&n({changed:i.IXA?.getAllSubscribedAssetConsumptions(r)??[]})};s.Y5.isReady()?o():s.Y5.onReady().then(o);let c=(a=e=>{n(e)},m[r]=a,()=>{m[r]=null});return()=>{c(),n({reset:!0})}},a}(c.PW.CODE_COMPONENT)}},m={[i.PWo.CODE_COMPONENT]:null};class p{syncChangedSubscribedConsumptions(e,r){m[e]?.({changed:r})}resetMirrorCache(){for(let e of Object.values(m))e?.({reset:!0})}}function h(){new p}},144400:(e,r,n)=>{n.d(r,{Mk:()=>f,WY:()=>v});var a=n(805014),i=n(802691),o=n.n(i),s=n(875877),l=n(653798),c=n(366172),d=n(468683),u=n(354354),m=n(533127),p=n(809656),h=n(354592),_=n(957020);_.PW.RESPONSIVE_SET,a.PWo.RESPONSIVE_SET,_.PW.CODE_LIBRARY,a.PWo.CODE_LIBRARY,_.PW.CODE_FILE,a.PWo.CODE_FILE,_.PW.CODE_COMPONENT,a.PWo.CODE_COMPONENT,_.PW.MANAGED_STRING,a.PWo.MANAGED_STRING;let g={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:h.X1,[a.Ocq.SUBSCRIBED]:h._t},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:m.V,[a.Ocq.SUBSCRIBED]:m.Q},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:u.y,[a.Ocq.SUBSCRIBED]:u.d},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:d.r,[a.Ocq.SUBSCRIBED]:d.I},[a.PWo.MANAGED_STRING]:{[a.Ocq.LOCAL]:p.fA,[a.Ocq.SUBSCRIBED]:p.cx}},f={[_.PW.RESPONSIVE_SET]:{local:E(a.PWo.RESPONSIVE_SET,a.Ocq.LOCAL),subscribed:E(a.PWo.RESPONSIVE_SET,a.Ocq.SUBSCRIBED)},[_.PW.CODE_LIBRARY]:{local:E(a.PWo.CODE_LIBRARY,a.Ocq.LOCAL),subscribed:E(a.PWo.CODE_LIBRARY,a.Ocq.SUBSCRIBED)},[_.PW.CODE_FILE]:{local:E(a.PWo.CODE_FILE,a.Ocq.LOCAL),subscribed:E(a.PWo.CODE_FILE,a.Ocq.SUBSCRIBED)},[_.PW.CODE_COMPONENT]:{local:E(a.PWo.CODE_COMPONENT,a.Ocq.LOCAL),subscribed:E(a.PWo.CODE_COMPONENT,a.Ocq.SUBSCRIBED)},[_.PW.MANAGED_STRING]:{local:E(a.PWo.MANAGED_STRING,a.Ocq.LOCAL),subscribed:E(a.PWo.MANAGED_STRING,a.Ocq.SUBSCRIBED)}};function E(e,r){let n=g[e][r],i=(0,s.atom)({}),l=(0,s.withReducer)(i,(e,r)=>{if("changed"in r){let n=r.changed;return{...e,...n.reduce((e,r)=>(e[r.assetId]=r,e),{})}}if("removed"in r){let n=new Set(r.removed);return o()(e,e=>e&&!n.has(e.assetId))}return"reset"in r?{}:e}),d=`assetByKeyAtom(${a.PWo[e]}, ${a.Ocq[r]})`;return l.debugLabel=d,l.onMount=i=>{var o;let s=()=>{i({changed:a.P5M.getAllAssets(e,r).map(n).filter(e=>null!==e)})};c.Y5.isReady()?s():c.Y5.onReady().then(s);let l=(o=e=>{i(e)},y[e][r]=o,()=>{y[e][r]=null});return()=>{l(),i({reset:!0})}},l}let y={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.MANAGED_STRING]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null}};class b{syncAddedOrChangedAssets(e,r,n){if(r===a.Ocq.SUBSCRIBED){let i=g[e]?.[a.Ocq.SUBSCRIBED];if(!i){(0,l.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[a.Ocq.SUBSCRIBED]?.({changed:n.map(i).filter(e=>null!==e)})}else if(r===a.Ocq.LOCAL){let i=g[e]?.[a.Ocq.LOCAL];if(!i){(0,l.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[a.Ocq.LOCAL]?.({changed:n.map(i).filter(e=>null!==e)})}else(0,l.x1)("design-systems",`Invalid subscription status for AssetMirror: ${r}`)}syncRemovedAssets(e,r,n){y[e]?.[r]?.({removed:n})}resetMirrorCache(){for(let e of Object.values(y))for(let r of Object.values(e))r?.({reset:!0})}}function v(){new b}},118505:(e,r,n)=>{n.d(r,{h:()=>a});let a=(0,n(875877).atom)("ok")},260990:(e,r,n)=>{n.d(r,{Z:()=>o});var a=n(661137),i=n(927150);let o=(0,i.bt)(({currentUserOrgId:e,orgById:r})=>(0,a.td)(e,r));(0,i.bt)(({orgUsersByOrgId:e})=>e)},886231:(e,r,n)=>{n.d(r,{UQ:()=>l,kS:()=>s,p9:()=>o});var a=n(875877),i=n(927150);let o=(0,i.bt)(e=>e.user),s=(0,a.atom)(e=>e(o)?.id);(0,a.atom)(e=>e(o)?.created_at),(0,i.bt)(e=>e.userStateLoaded);let l=(0,i.bt)(e=>e.isStarterUser)},744615:(e,r,n)=>{n.d(r,{gh:()=>C});var a=n(805014),i=n(245954),o=n(777535),s=n(885123),l=n(841962),c=n(875877),d=n(653798),u=n(677840),m=n(76265),p=n(553362),h=n(190500),_=n(339176),g=n(832341),f=n(982981),E=n(826301),y=n(284406);let b=(0,c.atom)(new Set),v=(0,c.atom)(new Set),T=(0,c.atom)("");function I(e){let r=e=>{let n=0;for(let a of e)"FRAME"===a.type&&(n+=1),"children"in a&&(n+=r(a.children));return n};return r(e)}function S(e,r=1){let n=JSON.parse(JSON.stringify(e));return n.length<1?n:r<1&&"opacity"in n[0]?n.map(e=>({...e,opacity:e.opacity*r})):n}function w(e,r,n,a=!0,i=1){if(Array.isArray(e[n])&&Array.isArray(r[n])){let o=a?[...S(r[n]),...S(e[n],i)]:[...S(e[n],i),...S(r[n])];r[n]=o}}class A{async autoSegmentNodesByRegion(e,r){let n=(0,y.D)(),a=[],i=[];for(let n of e){let{rootNode:e,newNodes:o}=await this.autoSegmentNodes(n,r);e&&i.push(e),o.forEach(e=>a.push(e))}c.atomStore.set(b,new Set(a.map(({id:e})=>e))),c.atomStore.set(v,new Set(i.map(({id:e})=>e))),(0,_.z)(i,a);let o=n.currentPage;return o.selection=o.selection.concat(i),!0}async autoSegmentNodes(e,r){let n;let c=(0,y.D)();try{var u;let d=performance.now(),h=(await Promise.all(e.map(e=>c.getNodeByIdAsync(e)))).filter(e=>e),_=I(h),y=function(e){let r=[...e],n=[];for(;r.length;){let e=r.pop();if(!e)break;n.push(e.id),"children"in e&&e.children.forEach(e=>{r.push(e)})}return n}(h),b=(n=await (0,g.N7)(h,c,r))?I([n]):0;if(u=b-_,(0,s.D.dispatch)(p.F.enqueue({type:"msal-frames-created",message:(0,m.t)("fullscreen.properties_panel.stack_panel.msal_crated_frames_count",{count:u})})),(0,l.kc)().ce_al_track_msal_duration&&(0,o.sx)("autolayout_auto_segment_selection",{duration_ms:performance.now()-d,selectionSizeBeforeMSAL:_,selectionSizeAfterMSAL:b},{forwardToDatadog:!0}),n){!function e(r,n){if(!r||"FRAME"!==r.type)return;for(let a of r.children)e(a,n);let i=a.Qa7.getBackgroundNodeCandidatesByGUID(r.id);if(0===i.backgroundNodes.length)return;let o=n.getNodeById(i.backgroundNodes[0]);if(r.resize(o.width,o.height),o.absoluteBoundingBox&&r.absoluteBoundingBox){let e=o.absoluteBoundingBox.x-r.absoluteBoundingBox.x,n=o.absoluteBoundingBox.y-r.absoluteBoundingBox.y;r.x+=e,r.y+=n}for(let e of i.backgroundNodes){let a=n.getNodeById(e);a&&function(e,r,n=!0,a="transferAndMaybeRemoveBackgroundNode",i=!0){if((0,f.Rm)(`${a}`,`Merging background node (${e.id}) into: ${r}`,3),e.removed)return;let o=1;i&&"opacity"in e&&(o=e.opacity),w(e,r,"fills",n,o),w(e,r,"effects",n,o),w(e,r,"strokes",n,o),"strokes"in e&&e.strokes.length>0&&(r.strokeWeight=e.strokeWeight,r.strokeJoin=e.strokeJoin,r.dashPattern=e.dashPattern,r.strokeAlign=e.strokeAlign,"strokeCap"in e&&!r.strokeCap&&(r.strokeCap=e.strokeCap),"strokeMiterLimit"in e&&(r.strokeMiterLimit=e.strokeMiterLimit),"strokeLeftWeight"in e&&"number"==typeof e.strokeLeftWeight&&0===r.strokeLeftWeight&&(r.strokeLeftWeight=e.strokeLeftWeight),"strokeRightWeight"in e&&"number"==typeof e.strokeRightWeight&&0===r.strokeRightWeight&&(r.strokeRightWeight=e.strokeRightWeight),"strokeTopWeight"in e&&"number"==typeof e.strokeTopWeight&&0===r.strokeTopWeight&&(r.strokeTopWeight=e.strokeTopWeight),"strokeBottomWeight"in e&&"number"==typeof e.strokeBottomWeight&&0===r.strokeBottomWeight&&(r.strokeBottomWeight=e.strokeBottomWeight)),"cornerRadius"in e&&"number"==typeof e.cornerRadius&&0===r.cornerRadius&&(r.cornerRadius=e.cornerRadius),"topLeftRadius"in e&&"number"==typeof e.topLeftRadius&&0===r.topLeftRadius&&(r.topLeftRadius=e.topLeftRadius),"bottomLeftRadius"in e&&"number"==typeof e.bottomLeftRadius&&0===r.bottomLeftRadius&&(r.bottomLeftRadius=e.bottomLeftRadius),"topRightRadius"in e&&"number"==typeof e.topRightRadius&&0===r.topRightRadius&&(r.topRightRadius=e.topRightRadius),"bottomRightRadius"in e&&"number"==typeof e.bottomRightRadius&&0===r.bottomRightRadius&&(r.bottomRightRadius=e.bottomRightRadius),"ELLIPSE"===e.type&&(0,E.n4)(e.width,e.height)&&(r.cornerRadius=r.width),function(e,r){if(!e||!e.boundVariables)return;let n=e.boundVariables;for(let e of["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","minWidth","maxWidth","minHeight","maxHeight","counterAxisSpacing","strokeWeight","strokeTopWeight","strokeRightWeight","strokeBottomWeight","strokeLeftWeight"]){let a=n[e];a&&r.setBoundVariable(e,a.id)}}(e,r),i&&e.remove()}(a,r,!0,"recursivelyMergeBackgroundFillToTLF")}}(n,c);let e=(0,i.UN)().get(n.id);return!e||e.isTopLevelFrame()||e.isState||(n.name="Frame"),{rootNode:n,newNodes:function e(r,n){let a=[];return n.has(r.id)||a.push(r),"children"in r&&r.children.forEach(r=>{let i=e(r,n);a=a.concat(i)}),a}(n,new Set(y))}}}catch(n){(0,d.x1)("auto-layout","Error running AAL segmentation",{e:n});let r=s.D.dispatch;"GraphResolutionError"===n.name?((0,h.ds)("msal_error_try_again",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(p.F.enqueue({type:"msal-failure-graph-resolution",message:(0,m.t)("fullscreen.visual_bell.try_again_msal")}))):(c.commitUndo(),c.triggerUndo(),(0,h.ds)("msal_error_couldnt_suggest_auto_layout",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(p.F.enqueue({type:"msal-failure-other",message:(0,m.t)("fullscreen.visual_bell.could_not_suggest_auto_layout")})))}return{rootNode:null,newNodes:[]}}async makeResponsive2(e){let r=(0,y.D)();for(let n of e)for(let e of n)await (0,g.cx)(e,r);return r.commitUndo(),!0}shouldRunSimpleStackDetection(e){let r=(0,y.D)();return(0,g.sg)(e,r)}runMakeResponsiveHeuristics(e){let r=(0,y.D)();(0,g.cx)(e,r)}trackShouldShowMSALOnboarding(e){c.atomStore.set(T,e),(0,u.YQ)({id:"would-have-used-msal-onboarding-event"})}async destroyAllAutoLayout(e){let r=(0,y.D)(),n=await (0,g.vk)(e,r),a=s.D.dispatch,i=n>0?(0,m.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast",{numAutoLayoutsRemoved:n}):(0,m.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast-zero");return a(p.F.enqueue({message:i})),(0,o.sx)("action_destroy_all_auto_layout",{numAutoLayoutsRemoved:n}),r.commitUndo(),!0}}function C(){new A}},394080:(e,r,n)=>{n.d(r,{z4:()=>d});var a=n(805014),i=n(885123),o=n(653798),s=n(31393),l=n(626614);class c{readyToAcceptAutosaveChanges(){return!!s.ZG()?.session()?.readyToAcceptChanges()}hasOngoingCommitTask(){return!!s.ZG()?.session()?.hasOngoingCommitTask()}async enqueueAutosaveCommit(e,r,n,i,o,c){let d=(0,s.ZG)();if(!d)return(0,l.W6)("AutosaveManager should not be null when committing"),!0;let u=d.session();return!u||(await u.enqueueAutosaveCommit({changes:e,commitPolicy:r,fileVersion:n,fileKey:i,newSessionID:a.h3O.currentSessionID(),numberOfUncleanRegisters:o,reason:c}),!0)}createAutosaveManager(e){let r=i.D.getState().user;if(!r){(0,o.Lo)("Autosave","Not creating manager for logged out user");return}(0,s.mu)(e,r.id)}destroyAutosaveManager(){(0,s.t)()}isConnected(){return s.ZG()?.managerState==="connected"}}function d(){new c}},551984:(e,r,n)=>{n.d(r,{$W:()=>c});var a=n(841962),i=n(771952),o=n(732767),s=n(356466);class l{isEnabled(){return(0,o.W7)()&&!!(0,a.kc)().aip_magnolia}generateRequestId(){return(0,i.g)()}async getSuggestion(e,r){let n=await (0,s.O)(e,r);return{text:n?.text,inputTokens:n?.inputTokens,firstTokenProbability:n?.firstTokenProbability,serializationLatencyMs:n?.serializationLatencyMs,requestLatencyMs:n?.requestLatencyMs}}}function c(){new l}},366172:(e,r,n)=>{let a,i;n.d(r,{$q:()=>p,QT:()=>h,XT:()=>l,Y5:()=>a,Zi:()=>m,_W:()=>d,fT:()=>u,lQ:()=>o,s$:()=>s,uF:()=>c});let o=new Promise(e=>{i=e});function s(e){a=e,window._fullscreen_=a,i()}function l(e){}function c(e){d=e}let d=null;function u(e){}function m(e){}function p(e){}function h(e){}},948692:(e,r,n)=>{n.d(r,{Iu:()=>s}),n(805014);let a=new Set;class i{nodeBoundsChanged(){for(let e of a)e()}}let o=null;function s(){return o||(o=new i),o}},901574:(e,r,n)=>{n.d(r,{n:()=>i}),n(202895),n(805014),n(632001),n(885123);var a=n(181270);function i(e){(0,a.o)()}n(369010),n(799287),n(48929),n(76265),n(553362),n(67489),n(160496),n(322330),n(413100)},714266:(e,r,n)=>{n.d(r,{C4:()=>g,D2:()=>m,Er:()=>u,FJ:()=>l,H3:()=>d,cB:()=>_,cu:()=>p,fG:()=>E,fb:()=>h,gU:()=>c,l7:()=>y,yH:()=>f});var a=n(229808),i=n(396405),o=n(805014),s=n(972142);let l="\x3c!--(figma)",c="(/figma)--\x3e",d='<span data-buffer="'+l,u=c+'"></span>',m="\x3c!--(figmeta)",p="(/figmeta)--\x3e",h='<span data-metadata="'+m,_=p+'"></span>';function g(e,r,n){let a='<meta charset="utf-8">'+d+(0,i.lF)(r)+u+(0,s.hX)(n);try{e.setData("text/html",a)}catch(e){console.warn("DataTransfer failed in clipboard event")}}function f(e){let r;try{r=e.getData("text/html")}catch(e){return console.warn("DataTransfer failed in clipboard event"),null}return function(e){let r=e.indexOf(l),n=e.indexOf(c);return r>=0&&n>=0&&r<n?(0,i.D4)(e.slice(r+l.length,n)):null}(r)}function E(e,r){let n=a.w.encodeMessage({type:"STYLE",pasteFileKey:null!=e?e:void 0,sessionID:0,ackID:0,nodeChanges:[{guid:{sessionID:0,localID:0},phase:"CREATED",...r}]});return o.glU.encodeClipboardData(n)}function y(e){return a.w.decodeMessage(o.glU.decodeClipboardData(e))}},345256:(e,r,n)=>{n.d(r,{A$:()=>l,X0:()=>s});var a=n(846288),i=n(805014);n(230208);var o=n(76265);function s(e){switch(e){case i.daH.CODE_BLOCK_DRACULA:return"DRACULA";case i.daH.CODE_BLOCK_DUOTONE_LIGHT:return"DUOTONE_LIGHT";case i.daH.CODE_BLOCK_DUOTONE_SEA:return"DUOTONE_SEA";case i.daH.CODE_BLOCK_DUOTONE_SPACE:return"DUOTONE_SPACE";case i.daH.CODE_BLOCK_DUOTONE_EARTH:return"DUOTONE_EARTH";case i.daH.CODE_BLOCK_DUOTONE_FOREST:return"DUOTONE_FOREST";default:return"DRACULA"}}n(889148);let l={format:e=>{switch(e){case"FIGJAM_DARK":return(0,o.t)("whiteboard.code_blocks.theme.figjam_dark");case"DRACULA":return(0,o.t)("whiteboard.code_blocks.theme.dracula");case"DUOTONE_SEA":return(0,o.t)("whiteboard.code_blocks.theme.duotone_sea");case"DUOTONE_SPACE":return(0,o.t)("whiteboard.code_blocks.theme.duotone_space");case"DUOTONE_EARTH":return(0,o.t)("whiteboard.code_blocks.theme.duotone_earth");case"DUOTONE_FOREST":return(0,o.t)("whiteboard.code_blocks.theme.duotone_forest");case"DUOTONE_LIGHT":return(0,o.t)("whiteboard.code_blocks.theme.duotone_light");default:return(0,a.xb)(e)}}}},795590:(e,r,n)=>{n.d(r,{l:()=>d});var a=n(805014),i=n(885123),o=n(366172),s=n(914077),l=n(593273),c=n(958961);let d=new class{constructor(){this.canvasColorProfile=a.RYP.SRGB}getDefaultDocumentColorProfile(){if((i.D?.getState()?.selectedView).editorType===s.nT.Whiteboard)return a.ywP.SRGB;switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return a.ywP.SRGB;case c.M.DISPLAY_P3:return a.ywP.DISPLAY_P3}}getCanvasColorProfile(){return this.canvasColorProfile}setCanvasColorProfile(e){this.canvasColorProfile=e,a.glU?.updateImageColorspaceConversions(),o.Y5?.triggerAction("redraw-canvas",{})}getUserColorProfile(){switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return a.RYP.SRGB;case c.M.DISPLAY_P3:return a.RYP.DISPLAY_P3}}}},438244:(e,r,n)=>{n.d(r,{Eh:()=>c,dM:()=>u,dX:()=>m});var a=n(841962),i=n(653798),o=n(276805),s=(e=>(e[e.Unknown=0]="Unknown",e[e.No=1]="No",e[e.Yes=2]="Yes",e))(s||{});let l=0;function c(e,r){if("srgb"===r)return e.getContext("2d");{let n=(0,o.p3)();return e.getContext("2d",{colorSpace:n?"srgb":r})}}let d=document.createElement("canvas").getContext("2d",{colorSpace:"srgb",willReadFrequently:!0})?.canvas;function u({canvas:e,canvasWidth:r,canvasHeight:n,renderCanvas:c,value:u,colorSpace:m,initializeCanvasColorSpace:p=!1}){if(p&&e.getContext("2d",{colorSpace:m}),((0,a.kc)().ee_color_management_force_canvas||(0,o.p3)())&&1!==l){if(d){d.width=r,d.height=n,c(d,u);let m=d.getContext("2d"),p=e.getContext("2d");if(m&&p)try{!function(e,r){if(e.canvas.width!==r.canvas.width||e.canvas.height!==r.canvas.height)throw Error("source ctx and target ctx dimensions don't match");if("getContextAttributes"in e&&"srgb"!==e.getContextAttributes().colorSpace)throw Error("source ctx is not srgb");if("getContextAttributes"in r&&"display-p3"!==r.getContextAttributes().colorSpace&&!((0,a.kc)().ee_color_management_force_canvas&&"srgb"===r.getContextAttributes().colorSpace))throw Error("target ctx is not display-p3");let[n,i]=[r.canvas.width,r.canvas.height],o=e.getImageData(0,0,n,i),s=new ImageData(o.data,o.width,o.height,{colorSpace:"getContextAttributes"in e?r.getContextAttributes().colorSpace:"srgb"});r.clearRect(0,0,n,i),r.putImageData(s,0,0)}(m,p),0===l&&(l=2)}catch{(0,i.Lo)("color management","polyfill failed",{ee_color_management_force_canvas:(0,a.kc)().ee_color_management_force_canvas,shouldUseCssColorLevel4Polyfill:(0,o.p3)(),is2dCanvasPolyfillSupportedByBrowser:s[l]}),c(e,u),l=1}}}else c(e,u)}function m(e){switch(e){case"fullscreen":case"mobile-viewer":return document.querySelector("#fullscreen-root canvas");case"prototype":return document.querySelector("#viewerContainer canvas");case"mirror":return document.querySelector("#mobileAppView canvas")}}},28072:(e,r,n)=>{n.d(r,{q:()=>d});var a=n(805014),i=n(870571),o=n(841962),s=n(653798),l=n(963057),c=n(795590);let d=new class{constructor(){this.onFrameCb=null,this.switchWebglColorSpace=(e,r)=>{let n=e.drawingBufferColorSpace;switch(r){case a.RYP.SRGB:if("srgb"===n)return;e.drawingBufferColorSpace="srgb",c.l.setCanvasColorProfile(a.RYP.SRGB);break;case a.RYP.DISPLAY_P3:if("display-p3"===n)return;e.drawingBufferColorSpace="display-p3",c.l.setCanvasColorProfile(a.RYP.DISPLAY_P3);break;default:(0,s.x1)("color management","unsupported color space",{targetColorSpace:r})}}}onFrame(){(0,l.L)(i.B3,l.K.DEFAULT,()=>{this.onFrameCb&&this.onFrameCb()})}queueSwitchWebglColorSpace(e,r,n,a){let i=()=>{this.switchWebglColorSpace(e,r),(0,o.kc)().viewer_p3_fix&&a&&a.invalidateCanvas()};"mirror"===n?i():this.onFrameCb=i}}},541302:(e,r,n)=>{n.d(r,{ZH:()=>S,il:()=>L,Ep:()=>T,R6:()=>I});var a=n(411855),i=n(805014),o=n(841962),s=n(875877),l=n(597338),c=n(499875),d=n(366172),u=n(795590),m=n(783657),p=n(797187),h=n(438244),_=n(915430),g=n(439134),f=n(28072);let E=(0,s.atom)(!1);function y(e){let[r,n]=(0,s.useAtom)(E);return a.useEffect(()=>{r&&n(!1)},[r,n]),r?null:a.createElement(a.Fragment,null,e.children)}var b=n(593273);let v=a.createContext({canvasColorProfile:i.RYP.SRGB,documentColorProfile:i.ywP.LEGACY,documentExportColorProfile:i.RYP.SRGB});function T(){return a.useContext(v).canvasColorProfile}function I(){return a.useContext(v).documentColorProfile}let S=v.Consumer;function w(e){let{children:r,colorManagementStateJs:n}=e,o=(0,p.ut)(n?.documentColorProfile(),i.ywP.LEGACY),s=(0,_.H)(o),{colorProfilePreference:l}=(0,b.jK)(),c=a.useMemo(()=>({documentColorProfile:o,documentExportColorProfile:(0,g.j)(o,l),canvasColorProfile:s}),[l,o,s]);return a.createElement(v.Provider,{value:c},r)}function A(e){return(0,b.jK)(),a.createElement(w,{colorManagementStateJs:i.H4l},e.children)}function C({target:e,viewer:r}){let[n,s]=a.useState(null),c=a.useCallback(()=>{if(o.kc()?.fullscreen_use_threaded_rendering)return!1;if(n)return!0;if(i.PcT?.usingWebGPU())return!1;let r=(0,h.dX)(e);if(r){let n=null;switch(e){case"fullscreen":case"mobile-viewer":n=(0,l.ap)()?r.getContext("webgl2"):r.getContext("webgl");break;case"prototype":case"mirror":n=(0,l.WQ)()?r.getContext("webgl2"):r.getContext("webgl")}return s(n),!0}return!1},[e,n]);a.useEffect(()=>{if(!c())switch(e){case"fullscreen":case"mobile-viewer":d.Y5.onReady().then(()=>{c()});break;case"prototype":case"mirror":r&&r.on("documentIsLoaded",()=>{c()})}},[c,e,r]);let m=T();return a.useEffect(()=>{if(i.PcT?.usingWebGPU()){u.l.setCanvasColorProfile(m);return}n&&f.q.queueSwitchWebglColorSpace(n,m,e,r)},[m,e,n,r]),null}function N({viewer:e,target:r}){return a.createElement(c.tH,{boundaryKey:"color-management",fallback:c.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:m.y4},a.createElement(s.AtomsProvider,null,a.createElement(y,null,a.createElement(A,null,a.createElement(C,{target:r,viewer:e})))))}function L({viewer:e}){return a.createElement(N,{target:"prototype",viewer:e})}},276805:(e,r,n)=>{n.d(r,{Av:()=>v,Pv:()=>p,VG:()=>l,p3:()=>_,tK:()=>f});var a=n(411855),i=n(805014),o=n(281935),s=n(401562);function l(e){switch(e){case i.RYP.SRGB:return"srgb";case i.RYP.DISPLAY_P3:return"display-p3";default:throw Error(`unrecognized color profile: ${e}`)}}let c=e=>{try{if(e===i.RYP.SRGB)return!0;let r=document.createElement("canvas").getContext("webgl");if(!r)throw Error("failed to create webgl canvas context to determine support");if(!("drawingBufferColorSpace"in r))throw Error("webgl context does not contain drawingBufferColorSpace attribute");let n=l(e);if(r.drawingBufferColorSpace=n,r.drawingBufferColorSpace!==n)throw Error(`webgl context does not support color space: ${n}`);return!0}catch(e){return!1}},d=new Map,u=(0,s.n)(e=>{if(d.has(e))return d.get(e);let r=c(e);return d.set(e,r),r}),m=(0,s.n)(e=>{try{if(e===i.RYP.SRGB)return!0;let r=document.createElement("canvas"),n=l(e),a=r.getContext("2d",{colorSpace:n});if(a){if("getContextAttributes"in a){if(a.getContextAttributes().colorSpace!==n)throw Error("2d canvas context does not match the desired color space")}else throw Error("2d canvas context does not support getContextAttributes")}else throw Error("failed to create 2d canvas context to determine support");if(_()){let e=new ImageData(new Uint8ClampedArray([0,0,0,0]),1,1,{colorSpace:n});if(!("colorSpace"in e)||e.colorSpace!==n)throw Error(`image does not support color space: ${n}`)}return!0}catch(e){return!1}}),p=()=>"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("color","color(display-p3 1 1 1)"),h=()=>window.matchMedia("(color-gamut: p3)").matches,_=()=>!p();async function g(){if(!o.eD)return;let e=await o.eD.getActiveNSScreens();if(e){for(let r of e)if(!r.isCurrentWindow&&r.canRepresentDisplayGamutP3)return r.localizedName}}function f(e){switch(e.status){case"SupportedNatively":case"SupportedWithPolyfill":return!0;case"MonitorNotSupported":case"ClientNotSupported":return!1}}let E=()=>{let[e,r]=a.useState();return a.useEffect(()=>{g().then(r)},[]),e},y=()=>{let[e,r]=a.useState(h());return a.useEffect(()=>{let e=setInterval(()=>{r(h())},5e3);return()=>{clearInterval(e)}},[]),e},b=()=>o.eD&&"unmanaged"===o.eD.getColorSpace();function v(){let e=a.useMemo(()=>u(i.RYP.DISPLAY_P3),[]),r=a.useMemo(()=>m(i.RYP.DISPLAY_P3),[]),n=a.useMemo(()=>p(),[]),s=b(),l=E(),c=y();return e&&r?s?{status:"ClientNotSupported",diagnostics:{client:"desktop-app",shouldRestartDesktopAppInManagedColorSpace:!0}}:c?n?{status:"SupportedNatively",diagnostics:null}:{status:"SupportedWithPolyfill",diagnostics:null}:{status:"MonitorNotSupported",diagnostics:{alternativeMonitorName:l}}:{status:"ClientNotSupported",diagnostics:{client:o.eD?"desktop-app":"browser"}}}},593273:(e,r,n)=>{n.d(r,{YN:()=>E,eu:()=>_,hP:()=>f,it:()=>b,jK:()=>y}),n(411855);var a=n(805014),i=n(201863),o=n(885123),s=n(875877),l=n(627805),c=n(657548),d=n(697737),u=n(190500),m=n(314540),p=n(958961);let h={colorProfilePreference:m.E9.DEFAULT,id:""},_=(0,i.N)("USER_UPDATE_COLOR_PROFILE"),g=(0,s.atom)(e=>{let r=e((0,l.Zx)({})),n=h.colorProfilePreference;"loading"===r.status&&void 0!==o.D&&o.D?.getState()?.user?.color_profile?n=o.D.getState().user?.color_profile:r.data?.userColorProfilePreference?.colorProfilePreference&&(n=r.data?.userColorProfilePreference?.colorProfilePreference);let a={colorProfilePreference:function(e){switch(e){case m.E9.DEFAULT:return p.M.DEFAULT;case m.E9.SRGB:return p.M.SRGB;case"display-p3":case m.E9.DISPLAY_P3:return p.M.DISPLAY_P3}}(n),id:r.data?.userColorProfilePreference?.id??h.id};return void 0!==o.D&&o.D?.getState()?.user?.color_profile!==a.colorProfilePreference&&o.D.dispatch(_({color_profile:a.colorProfilePreference})),a});function f(e){switch(e){case p.M.DEFAULT:case p.M.SRGB:return a.RYP.SRGB;case p.M.DISPLAY_P3:return a.RYP.DISPLAY_P3}}function E(){return s.atomStore.get(g)}function y(){return(0,s.useAtomValue)(g)}function b({colorProfilePreference:e,id:r,eventName:n="user_manual_change",additionalDataToLog:a}){if(e===h.colorProfilePreference)return;!function(e){let r=o.D.getState();(0,u.uE)("color_profile_preference",r,{userColorProfile:e.userColorProfilePreference.colorProfilePreference,userColorProfileId:e.userColorProfilePreference.id,eventName:e.eventName,...e.additionalDataToLog??{}})}({userColorProfilePreference:{colorProfilePreference:e,id:r},eventName:n,additionalDataToLog:a});let i=d.Ay.put("/api/user",{color_profile:e});if(r)c.WB()?.optimisticallyUpdate({UserColorProfilePreference:{[r]:{colorProfilePreference:e}}},i);else{let r=o.D.getState().user?.id;if(!r)return;c.WB()?.optimisticallyCreate({UserColorProfilePreference:{"optimistic-id":{colorProfilePreference:e,userId:r,createdAt:new Date,updatedAt:new Date}}},i)}}},404839:(e,r,n)=>{n.d(r,{YL:()=>s});var a=n(269685),i=n(141630);class o{calculateColorWithRampValue(e,r){let n=(0,i.jA)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}calculateColorWithRelativeAdjustment(e,r){let n=(0,i.Hd)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}getRampValueForColor(e){return(0,i.Wn)((0,a.aH)(e))}}function s(){new o}},387401:(e,r,n)=>{let a;n.d(r,{AU:()=>c,T6:()=>m,lS:()=>a,on:()=>l});var i=n(885123),o=n(731556);let s={mousedown:new Set,mousemove:new Set,mouseup:new Set};function l(e,r){s[e].add(r)}function c(e,r){s[e].delete(r)}function d(e){return(r,n)=>{for(let a of s[e])a({x:r,y:n})}}function u(e,r,n){i.D.dispatch(o.vV({anchorPosition:{x:r,y:n}})),i.D.dispatch(o.CX({stablePath:e}))}function m(){a={handleMouseDown:d("mousedown"),handleMouseMove:d("mousemove"),handleMouseUp:d("mouseup"),createNewCommentAtPosition:u}}},296605:(e,r,n)=>{n.d(r,{vk:()=>m});var a=n(650437),i=n(717180),o=n(534294),s=n(765061),l=n(779099),c=n(753392);class d{constructor(){this.indexer={}}next(e){return null==this.indexer[e]?this.indexer[e]=0:this.indexer[e]++,this.indexer[e]}}let u={PNG:".png",JPEG:".jpg",SVG:".svg",PDF:".pdf"};function m(e,r,n,a){let i,o;if("CANVAS"===e)""===(i=n).trim()&&(i="Untitled"),o=i=i.replace(/\//g,"_");else{(i=r).endsWith("/")&&(i=i.substr(0,i.length-1));let e=i.lastIndexOf("/");for(let r of(o=-1!==e?i.substr(e+1,i.length):i,a)){let e=r.substr(0,r.lastIndexOf("/"));e.length>0&&(i=e+"/"+i)}}return{name:i,title:o}}function p(e){return("FRAME"===e.type||"SYMBOL"===e.type)&&!e.resizeToFit}(0,o.nF)(e=>{let r=e.getState(),n=[],o=[],h=r.mirror,_=h.sceneGraph,g=e=>{(null!=e.exportSettings&&e.exportSettings.length>0||p(e))&&n.push(e)};if((0,a.Im)(h.sceneGraphSelection)){let e=_.get((0,l.Nf)(h.appModel));e&&((0,i.hV)(e,g),(0,i.hV)(e,e=>{let r=e.parentNode;p(e)&&null!=r&&"CANVAS"===r.type&&o.push({nodeID:e.guid,name:e.name})}))}else(0,c.y2)(_,h.sceneGraphSelection,g),(0,c.YI)(_,h.sceneGraphSelection,e=>{p(e)&&o.push({nodeID:e.guid,name:e.name})});let f="Untitled";r.openFile&&(f=r.openFile.name);let E=[],y=new d,b=new d;for(let e of n){let r=(0,i.DS)(h.sceneGraph,e.guid).filter(e=>!e.visible);if(!e.visible||r.length>0)continue;let n=e.exportSettings;if(null!=n)for(let r of n){if(null==r.imageType)continue;let n=(0,i.DS)(h.sceneGraph,e.guid).map(e=>e.name),{name:a,title:o}=m(e.type,e.name,f,n),s=function(e,r,n,a){let i=`${e}-${r}-${n.imageType}-${n.suffix}`;return`${i}-${a.next(i)}`}(e.guid,a,r,b),{filename:l,isDuplicate:c}=function(e,r,n,a){let i;let o=!1;""===e.trim()&&(e="Untitled"),i=`${e}${r}${n}`;let s=a.next(`${i}`);return s>0&&(i=`${e}${r}-${s}${n}`,o=!0),{filename:i,isDuplicate:o}}(a,r.suffix||"",u[r.imageType],y);E.push({itemID:s,nodeID:e.guid,title:o,filename:l,exportSetting:r,warning:c?"Name duplicated":void 0,warningTooltip:c?`Renamed to ${l}`:void 0})}}e.dispatch(s.j({items:E,frames:o}))})},989149:(e,r,n)=>{n.d(r,{pH:()=>d});var a=n(777535),i=n(841962),o=n(697737),s=n(314540),l=n(816961);class c{constructor(e){this.store=e}trackComponentInstanceInsertion(e){let r=this.state.openFile?.key,n=!!this.state.user;if(null==r||!n||this.state.openFile?.editorType===s._Y.SLIDES||(0,i.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile())return;let a=[];for(let r in e){let n={component_key:r,count:e[r]};a.push(n)}try{o.Ay.post(`/api/component/${r}/insertions`,{insertions:a})}catch(e){}}trackComponentInstanceDetachment(e){let r=this.state.openFile,n=r?.key,l=!!this.state.user;if(null==r||null==n||!l)return;let c=r.editorType;if(c===s._Y.SLIDES||(0,i.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){a.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:n,componentKey:e,editorType:c||void 0});return}try{o.Ay.post(`/api/component/${n}/detachment/${e}`)}catch(e){}}trackComponentAction(e,r,n){let o=this.state.openFile,c=o?.key,d=!!this.state.user;if(null==o||null==c||!d)return;let u=o.editorType;if(u===s._Y.SLIDES||(0,i.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){e===l.Wc.DETACHMENT&&a.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:c,componentKey:Object.keys(r??{})[0],editorType:u||void 0});return}let m=Object.entries(r).map(([e,r])=>({key:e,count:r}));try{l.PT.recordComponentAction({action:e,action_source:n,fileKey:c,components:m})}catch(e){}}trackStyleAction(e,r,n){let a=!!this.state.user;if(!this.isInDesignFile()||!a)return;let i=[];for(let[e,n]of Object.entries(r))i.push({key:e,count:n});if(0!==i.length)try{l.PT.recordStylesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,styles:i})}catch(e){}}trackVariableAction(e,r,n){let a=!!this.state.user;if(!this.isInDesignFile()||!a)return;let i=[];for(let[e,n]of Object.entries(r))i.push({key:e,count:n});if(0!==i.length)try{l.PT.recordVariablesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,variables:i})}catch(e){}}isInDesignFile(){let e=this.state.openFile,r=e?.key;return null!=e&&null!=r&&e.editorType===s._Y.DESIGN}get state(){if(!this.store)throw Error("Calling _state without a valid store");return this.store.getState()}}function d(e){new c(e)}},311550:(e,r,n)=>{n.d(r,{zs:()=>i}),n(399991),n(553362);class a{constructor(e){this.store=e}showErrorBellInLocalDev(e){}onMissingEditScope(){this.showErrorBellInLocalDev("No edit scope is active")}onGuardrailViolation(){this.showErrorBellInLocalDev("Edit scope guardrail violated")}}function i(e){new a(e)}},391482:(e,r,n)=>{n.d(r,{A0:()=>b,Mc:()=>E,R4:()=>y});var a=n(411855),i=n(224231),o=n(805014),s=n(245954),l=n(841962),c=n(875877),d=n(176160),u=n(732767),m=n(253244),p=n(119925),h=n(802425),_=n(276769),g=n(745594),f=n(63114);function E(e,r=!1){let n=[];r?e.map(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&n.push(r)}):e.forEach(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&function e(r,n){if(r.visible&&0!==r.opacity)for(let a of(n.push(r),r.childrenNodes??[]))e(a,n)}(r,n)});let a=n.length>f.NB,i=[];return n.map(e=>{if((0,f.jX)(e,!1))return i.push(e.guid)}),{detectedUnnamedLayers:i.length>0,exceedingLayerLimit:a,renamableNodeGuids:i}}function y(e){let{detectedUnnamedLayers:r,exceedingLayerLimit:n,renamableNodeGuids:i}=E(e);r&&!n&&(0,_.$I)({moduleToOpen:{type:"custom",module:a.createElement(g.A,{source:o.uQ6.READY_FOR_DEV,numRenamableNodesForHandoff:i.length}),beforeModuleOpen:()=>{(0,p.B3)(m.JT.AUTO_RENAME_LAYERS)},name:h.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"ready_for_dev_auto_rename_layers"}})}function b(e){if(!(0,u.W7)())return!1;let r=c.atomStore.get(d.yV);if(!r?.canEdit||r.editorType!==i._YF.DESIGN)return!1;switch(e){case o.uQ6.READY_FOR_DEV:return!!(0,l.kc)().aip_rename_layers_ready_for_dev;case o.uQ6.EXPORT_FRAME:case o.uQ6.EXPORT_PICKER:return!!(0,l.kc)().ai_prod_rename_layers_dev_export;case o.uQ6.CREATE_COMPONENT:case o.uQ6.CREATE_FRAME:case o.uQ6.DRAW_FRAME_AROUND_NODES:case o.uQ6.STACK_SELECTION:return!!(0,l.kc)().ai_prod_rename_layers_moments;case o.uQ6.LAYERS_PANEL_ACTION_ROW:return!!(0,l.kc)().aip_lpe;case o.uQ6.LAYERS_PANEL_OVERFLOW_MENU:return!0;default:return!1}}},509343:(e,r,n)=>{n.d(r,{EU:()=>b,Ku:()=>_,RU:()=>y,UK:()=>h,UX:()=>f,W_:()=>S,dP:()=>g,lK:()=>T,qw:()=>E,sT:()=>v});var a=n(805014),i=n(841962),o=n(76265),s=n(834240),l=n(681483),c=n(797187),d=n(738402),u=n(938983),m=n(867243),p=n(722073);function h(){return a.Ez5.editorPreferences()}function _(){let e=(0,d.ks)(),r=(0,c.J2)(h().colorFormat);return r===a.NVY.CSS&&e||r===a.NVY.UIColor&&!e?a.NVY.RGB:r}function g(){return(0,c.ut)(a.Ez5?.editorPreferences()?.sidebarSplitPosition,l.R.sidebarSplitPosition)}function f(){return(0,c.ut)(a.Ez5?.editorPreferences()?.devHandoffInspectSplitPosition,320)}function E(){return(0,c.ut)(a.Ez5?.editorPreferences()?.propertiesPanelSplitPosition,l.R.propertiesPanelSplitPosition)}function y(){return(0,c.ut)(a.Ez5?.editorPreferences().bigNudgeAmount,s._q)}function b(){return(0,c.ut)(a.Ez5?.editorPreferences().smallNudgeAmount,s.bA)}function v(){return{smallNudgeAmount:b(),bigNudgeAmount:y()}}function T(){return(0,c.ut)(a.Ez5?.editorPreferences().renderRulers,!1)}let I=[{getObservable:()=>h().activeCanvasPixelPreview,getMessage:e=>({message:e?(0,o.t)("visual_bell.pixel_preview_enabled",{scaling:(0,u.d)().activeCanvasRetinaMode.getCopy()?"2x":"1x"}):(0,o.t)("visual_bell.pixel_preview_disabled")})},{getObservable:()=>h().renderGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.render_grid_visible"):(0,o.t)("visual_bell.render_grid_hidden")})},{getObservable:()=>h().snapToPixelGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_pixel_grid_enabled"):(0,o.t)("visual_bell.snap_to_pixel_grid_disabled")})},{getObservable:()=>h().showMasks,getMessage:e=>({message:e?(0,o.t)("visual_bell.show_masks_visible"):(0,o.t)("visual_bell.show_masks_hidden")})},{getObservable:()=>(0,i.kc)().figjam_snap_to_dot_grid_reset?h().snapToDotGridStagingReset:h().snapToDotGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_dot_grid_enabled"):(0,o.t)("visual_bell.snap_to_dot_grid_disabled")})},{getObservable:()=>h().snapToGeometry,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_geometry_enabled"):(0,o.t)("visual_bell.snap_to_geometry_disabled")})},{getObservable:()=>h().snapToObjects,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_objects_enabled"):(0,o.t)("visual_bell.snap_to_objects_disabled")})},{getObservable:()=>h().showFrameGrids,getMessage:e=>(0,m.jH)()?((0,m.Gk)(),{message:(0,o.t)("visual_bell.show_frame_grids_visible"),button:{text:(0,o.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),a.Ez5.editorPreferences().showFrameGrids.set(!1)}}}):{message:e?(0,o.t)("visual_bell.show_frame_grids_visible"):(0,o.t)("visual_bell.show_frame_grids_hidden")}}];function S(){(0,p.Mo)(I)}},618335:(e,r,n)=>{n.d(r,{XR:()=>c});var a=n(707599),i=n(875877),o=n(828453),s=n(99981);class l{convertEmojiNameToString(e){let r=e.toLocaleLowerCase(),n=a.dN.searchSynchronized(r).filter(e=>e.id===r);return 0===n.length?"":function(e){let r=a.il.getDefaultSkin()||1;return String.fromCodePoint(...(e.skins[r-1]?e.skins[r-1].unified:e.skins[0].unified).split("-").map(e=>parseInt(e,16)))}(n[0])}setEmojiTypeaheadQuery(e){let r=e&&e.length>1?(0,o.oQ)(e):null;i.atomStore.set(s.ph,r)}clearEmojiTypeaheadQuery(){i.atomStore.set(s.ph,null)}isShowingEmojiTypeaheadResults(){let e=i.atomStore.get(s.ph);return!!e?.emojis?.length}setEmojiTypeaheadImageSet(e){i.atomStore.set(s.KG,e)}setEmojiTypeaheadTargetRect(e,r,n){i.atomStore.set(s.kh,{x:e,y:r,height:n,width:0})}}function c(){new l}},252207:(e,r,n)=>{let a;n.d(r,{CB:()=>a,eY:()=>m});var i=n(805014),o=n(885123),s=n(536737),l=n(49039),c=n(914077),d=n(786140);class u{constructor(){this._wheelActivatedAtMs=-1,this._triggerActiveWheelButtonListeners=[]}startChat(e,r,n){(0,d.q)().then(a=>{a||o.D.dispatch(s.F6({position:{x:e,y:r},source:n}))})}closeWheel(){o.D.dispatch(s.Ho())}handleShortcutPressWithType({viewportX:e,viewportY:r,source:n,openedViaHover:a,wheelType:d}){let u=o.D.getState();if("fullscreen"!==u.selectedView.view||u.selectedView.editorType!==c.nT.Whiteboard||this._wheelActivatedAtMs>0)return;this._wheelActivatedAtMs=window.performance.now();let m=u.multiplayerEmoji;"WHEEL"===m.type?(e=m.viewportX,r=m.viewportY,a=a??m.openedViaHover):a||i.glU.triggerAction("set-tool-default",null),o.D.dispatch(s.sp({wheelType:d&&("STAMP"===d?"STAMP2":"REACTION1"),isReadonly:u.mirror.appModel.isReadOnly,isJoinedToActiveVotingSession:(0,l.gR)(u),viewportX:e,viewportY:r,source:n,openedViaHover:a}))}handleShortcutPress(e,r,n){this.handleShortcutPressWithType({viewportX:e,viewportY:r,source:n})}addTriggerActiveWheelButtonListener(e){this._triggerActiveWheelButtonListeners.push(e)}removeTriggerActiveWheelButtonListener(e){let r=this._triggerActiveWheelButtonListeners.indexOf(e);r>=0&&this._triggerActiveWheelButtonListeners.splice(r,1)}handleShortcutRelease(e,r){if(this._wheelActivatedAtMs<0)return;let n=window.performance.now()-this._wheelActivatedAtMs;if(this._wheelActivatedAtMs=-1,n>300)for(let n of this._triggerActiveWheelButtonListeners)n({x:e,y:r})}updateEmojiWheelPosition(e,r){let n=o.D.getState();"fullscreen"===n.selectedView.view&&n.selectedView.editorType===c.nT.Whiteboard&&o.D.dispatch(s.sm({viewportX:e,viewportY:r}))}}function m(){a=new u}},19776:(e,r,n)=>{n.d(r,{BI:()=>f,W0:()=>m,f7:()=>E,jr:()=>g,nB:()=>_});var a=n(805014),i=n(666308),o=n(199699),s=n(746643),l=n(747484),c=n(621847),d=n(736730);n(622667);var u=n(366172),m=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(m||{}),p=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(p||{});let h=s.lQ;function _(e){h=e}function g(e,r=0,n=1){return!!function(e,r=0,n=1){return!!(u.Y5&&u.Y5.isRootElementVisible())&&!f(e,r,n)}(e,r,n)&&E(e,!0)}function f(e,r=1,n=1){let a=e.keyCode,o=(0,i.Fo)(e);if(a===i.Uz.TAB&&(0,i.sC)(e,i.xH.SHIFT));else if(l.Ay.mac&&e.ctrlKey&&(a===i.Uz.A||a===i.Uz.B||a===i.Uz.D||a===i.Uz.E||a===i.Uz.F||a===i.Uz.H||a===i.Uz.K||a===i.Uz.L||a===i.Uz.N||a===i.Uz.O||a===i.Uz.P||a===i.Uz.T||a===i.Uz.V));else if(a===i.Uz.DELETE||a===i.Uz.BACKSPACE||a===i.Uz.NUMPAD_DELETE||a===i.Uz.SPACE||a===i.Uz.ENTER||a===i.Uz.HOME||a===i.Uz.END||a===i.Uz.PAGE_UP||a===i.Uz.PAGE_DOWN||a===i.Uz.A&&1===n);else if(o&&a===i.Uz.Z&&1===r);else if(o||e.ctrlKey)return!1;return!0}function E(e,r=!1){let n;if("keydown"===e.type)n=a.Bx4.KEY_PRESS,h();else{if("keyup"!==e.type)return console.error("Invalid event passed to forwardKeyboardEvent"),!1;n=a.Bx4.KEY_RELEASE}let s=(0,o.v7)(),l={type:n,which:e.which,modifierKeys:(0,i.sN)(e),isRepeat:e.repeat,code:e.code??e.nativeEvent?.code,shouldUseLayoutAndCode:s!==a.aTn.UNKNOWN,layout:s},c=a.glU.handleKeyboardShortcut(l);return c&&e.preventDefault(),c}(0,c.ny)(g),(0,d.n)(g)},165781:(e,r,n)=>{n.d(r,{jx:()=>i});class a{constructor(e){this._store=e}get _state(){if(!this._store)throw Error("Calling _state without a valid store");return this._store.getState()}isInOrg(){return!!this._state.currentUserOrgId}}function i(e){new a(e)}},393591:(e,r,n)=>{n.d(r,{U2:()=>l,mr:()=>o});var a=n(701753);let i=new a.b("action");function o(e){i.trigger("action",e)}let s=new a.b("action");function l(e,r){s.trigger("action",[e,r])}},460783:(e,r,n)=>{n.d(r,{f:()=>_});var a=n(534294),i=n(736041),o=n(365347),s=n(353428),l=n(118781),c=n(689102),d=n(487388),u=n(324225),m=n(79466),p=n(574431),h=n(75993);(0,a.nF)(e=>{if(!l.F)return;let r=e.getState(),n=(0,o.e9)(r),a=n&&n.team_id&&r.teams[n.team_id];!a||(0,c.rR)(a,{type:c.sK.ADD_DESIGN_FILE})||(0,c.rR)(a,{type:c.sK.ADD_FIGJAM_FILE})||(0,c.rR)(a,{type:c.sK.ADD_SLIDES_FILE})?e.dispatch(i.to({type:m.O})):e.dispatch(i.to({type:p.DV,data:{team:a,resource:d.vL.FILE,action:u.ZN.CREATE_FILE,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO,editorType:null}}))});let _=(0,a.nF)(e=>{l.F&&e.dispatch((0,h.u)({multiple:!1,accept:".sketch"}))})},787095:(e,r,n)=>{n.d(r,{Aq:()=>w,Ax:()=>l,Ay:()=>L,Bb:()=>v,E_:()=>h,Fx:()=>E,H0:()=>p,IM:()=>C,JT:()=>s,NY:()=>S,QU:()=>I,Re:()=>_,Ub:()=>d,Yc:()=>A,ZG:()=>N,_t:()=>u,bH:()=>y,co:()=>b,iL:()=>T,ju:()=>c,kO:()=>g,pA:()=>m,xe:()=>f});var a=n(245954),i=n(76265),o=n(829115);let s=[],l=8,c=436,d=36,u=524,m=4,p=24,h=24,_=6,g=18,f=12,E="#C4C4C4",y=4,b=[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:1},blur:3},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:3},blur:8},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.18},offset:{x:0,y:0},blur:.5}],v={fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:24,letterSpacing:-.084,width:436},T=8*v.fontSize/14,I={fontFamily:"Roboto Mono",fontSize:11,fontWeight:400,lineHeight:24,width:c};class S{static copySummaryDataToClipboard(e,r){let n=w(e,r);navigator.clipboard.writeText(n)}}function w(e,r){let n="";return n+=`${C(r)}

`,e.forEach(e=>{switch("h2"===e.type&&(n+="\n"),e.type){case"p":case"h1":case"h2":default:n+=e.content+"\n";break;case"li":n+=`\u2022 ${e.content}
`}}),n+=`
${(0,i.t)("whiteboard.ai.summary.summary_footer_disclaimer")}`}function A(e){return e.endsWith("...")?N():e+"."}function C(e){let r=new Date,n=parseInt(e,10);return n?(r.setTime(n),(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer",{summaryGenerationDate:r})):(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer_no_date")}function N(){return(0,i.t)("whiteboard.ai_summary.loading_text")}function L(e,r,n){let i=r.length>0,s=n&&n.length>0;if(!i||s)return!1;let l=(0,a.UN)().get(e);return!!l&&(!function(e,r,n=!0){e.isAlive&&(e.setWidgetSyncedState("syncedState:ai-summary-items",JSON.stringify(r)),n&&o.x.renderFirstPartyWidget(e.widgetId,e.guid))}(l,function(e){let r=JSON.parse(e),n=[{type:"p",context:"tldr",content:r.summary}];return r.supporting_points.forEach(({header:e,two_to_five_supporting_points:r})=>{n.push({type:"h2",content:e,context:"main_theme"}),r.forEach(e=>{n.push({type:"li",content:e,context:"supporting_point"})})}),n}(r)),!0)}},390125:(e,r,n)=>{n.d(r,{HP:()=>g,Nd:()=>A});var a=n(805014),i=n(136540),o=n(885123),s=n(76265),l=n(530494),c=n(190500),d=n(365347),u=n(654375),m=n(237718),p=n(617019),h=n(889148);function _(e,r){let n=d.d1(o.D.getState())?.key??"";(0,c.ds)(e,n,o.D.getState(),{domain:null!=r?(0,u.vO)(r):"",linkRenderType:u.Ci.LINK_PREVIEW,userId:o.D.getState().user?.id})}var g=(e=>(e.OPEN="open",e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e.CONVERT_TO_TEXT="convert_to_text",e))(g||{});let f=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/>
</svg>
`,E=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.7072 14L20.3536 16.6465L19.6465 17.3536L16.1465 13.8536L15.793 13.5L16.1465 13.1465L19.6465 9.64648L20.3536 10.3536L17.7072 13H21.5001C25.0762 13 28.0001 15.9239 28.0001 19.5C28.0001 21.3202 27.167 22.5686 26.3445 23.35C25.9353 23.7387 25.5272 24.0141 25.2208 24.1929C25.0671 24.2825 24.9377 24.3486 24.8448 24.393C24.7983 24.4153 24.7608 24.4322 24.7339 24.444C24.7204 24.4499 24.7095 24.4545 24.7014 24.4579L24.6914 24.462L24.688 24.4634L24.6868 24.4639L24.6862 24.4641C24.686 24.4642 24.6858 24.4643 24.5001 24C24.3144 23.5358 24.3142 23.5359 24.314 23.536L24.316 23.5351L24.3337 23.5275C24.3506 23.5201 24.3776 23.508 24.4131 23.491C24.4843 23.457 24.5893 23.4035 24.7169 23.3291C24.9729 23.1797 25.3148 22.9489 25.6557 22.625C26.3332 21.9814 27.0001 20.9799 27.0001 19.5C27.0001 16.4762 24.5239 14 21.5001 14H17.7072Z" fill="white" fill-opacity="0.8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 20H12V21H16.5V29H17.5V21H22V20H17.5H16.5Z" fill="white" fill-opacity="0.8"/>
</svg>
`,y=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white"/>
</svg>
`,b=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white" fill-opacity="0.8"/>
</svg>
`,v=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white"/>
</svg>
`,T=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white" fill-opacity="0.8"/>
</svg>
`,I=`
<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.52518 13.6568L8.17683 11.0052L8.88394 11.7123L6.23229 14.3639C4.96308 15.6331 2.9053 15.6331 1.63609 14.3639C0.366889 13.0947 0.366889 11.0369 1.63609 9.76772L4.28774 7.11607L4.99485 7.82317L2.3432 10.4748C1.46452 11.3535 1.46452 12.7781 2.3432 13.6568C3.22188 14.5355 4.6465 14.5355 5.52518 13.6568ZM11.7124 8.88383L11.0053 8.17673L13.6569 5.52508C14.5356 4.6464 14.5356 3.22177 13.6569 2.34309C12.7782 1.46441 11.3536 1.46442 10.4749 2.34309L7.82328 4.99475L7.11617 4.28764L9.76782 1.63599C11.037 0.366784 13.0948 0.366784 14.364 1.63599C15.6332 2.90519 15.6332 4.96298 14.364 6.23218L11.7124 8.88383ZM6.26175 10.5043L10.5044 6.26164L9.73836 5.49561L5.49572 9.73825L6.26175 10.5043Z" fill="black" fill-opacity="0.5"/>
</svg>
`;function S(e,r){let n=(0,m.l)(r,e,"thumbnailImageHash"),[a]=e.useSyncedState("thumbnailImageWidth",null),[i]=e.useSyncedState("thumbnailImageHeight",null);return{thumbnailImageHash:n,thumbnailAspectRatio:a&&i?a/i:void 0}}function w(e,r){let{thumbnailImageHash:n}=S(e,r),[a]=e.useSyncedState("url",null),i=a?decodeURIComponent(a):"null",[o]=e.useSyncedState("title",null),[s]=e.useSyncedState("description",null),[l]=e.useSyncedState("provider",""),c=!!o,d=!!n,u=!!s;return{url:i,rawTitle:o,rawDescription:s,rawProvider:l,hasTitle:c,hasThumbnail:d,hasTitleOrDescription:c||u,hasUrlOnly:!(c||u||d),hasTitleXorDescription:c!==u,isTwitterLinkPreview:"Twitter"===l||"X (formerly Twitter)"===l}}function A({figma:e}){let{widget:r}=e,{Frame:n,AutoLayout:c,Text:d,SVG:g}=r;r.register(function(){let A=r.useWidgetId(),{url:C,hasTitle:N,hasThumbnail:L,hasTitleXorDescription:O,hasUrlOnly:R,hasTitleOrDescription:P}=w(r,e),{thumbnailImageHash:D,thumbnailAspectRatio:k}=S(r,e),M=(0,m.l)(e,r,"faviconImageHash"),F=480-(L?112:8)-32-16,[x,U]=r.useSyncedState("orientation",R?"horizontal":"vertical"),{title:B,description:V,fullUrlProvider:G}=function({figma:e,widget:r,titleFontSize:n,titleLineHeight:a,descriptionFontSizeWithTitle:i,descriptionFontSizeWithoutTitle:o,descriptionLineHeight:s,verticalTextWidth:l,horizontalTextWidth:c,faviconDimension:d,hasTitleXorDescription:u,orientation:m}){let{hasTitleOrDescription:h,isTwitterLinkPreview:_}=w(r,e),g=(0,p.H)(r,"title",{name:"Inter Medium",size:n,lineHeight:a},"vertical"===m?l:c,("vertical"===m?2:1)+(u?1:0)+(_?4:0),!1),f=(0,p.H)(r,"description",{name:"Inter",size:g?i:o,lineHeight:s},"vertical"===m?l:c,("vertical"===m?2:1)+(u?1:0),!1);return{title:g,description:f,fullUrlProvider:(0,p.H)(r,"url",{name:"Inter",size:n,lineHeight:a},("vertical"===m?l:c)-(d+8),1+(h?0:1),!0)}}({figma:e,widget:r,titleFontSize:16,titleLineHeight:22,descriptionFontSizeWithTitle:13,descriptionFontSizeWithoutTitle:14,descriptionLineHeight:20,verticalTextWidth:240,horizontalTextWidth:F,hasTitleXorDescription:O,faviconDimension:16,orientation:x}),H=P?(0,i.Js)(C):G,W=()=>{_(u.yc.OPEN_PREVIEW,C),o.D.dispatch((0,l.RK)({rawInput:C}))};r.usePropertyMenu([{itemType:"action",propertyName:"open",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.open_link"),icon:f},{itemType:"separator"},{itemType:"action",propertyName:"vertical",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_vertical"),icon:"vertical"===x?y:b},{itemType:"action",propertyName:"horizontal",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_horizontal"),icon:"horizontal"===x?v:T},{itemType:"separator"},{itemType:"action",propertyName:"convert_to_text",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.change_back_to_text"),icon:E}],({propertyName:e})=>{switch(e){case"open":W();break;case"convert_to_text":_(u.yc.CONVERT_TO_TEXT,C),a.glU.replaceNodeWithText(A,C);break;case"vertical":_(u.yc.SWITCH_ORIENTATION_VERTICAL,C),U("vertical");break;case"horizontal":_(u.yc.SWITCH_ORIENTATION_HORIZONTAL,C),U("horizontal");break;default:console.error("Unhandled property name for LinkPreview widget: %s",e)}});let K={fontFamily:"Inter",horizontalAlignText:"left",verticalAlignText:"bottom",width:"fill-parent",fill:{type:"solid",color:{r:0,g:0,b:0,a:.8},blendMode:"normal"}},Y=r=>{let a=r?e.widget.h(n,{name:"container-frame",width:16,height:16,fill:{type:"image",imageHash:r,scaleMode:"fill"},cornerRadius:3}):e.widget.h(g,{src:I});return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"start",padding:{left:0,right:0,top:P?0:3,bottom:0}},a)},$=(r,a,i)=>e.widget.h(n,{name:"container-frame",width:r,height:a,fill:i?{type:"image",imageHash:i,scaleMode:"fill"}:h.De,effect:[{type:"inner-shadow",color:{r:0,g:0,b:0,a:.1},offset:"vertical"===x?{x:0,y:-1}:{x:-1,y:0},blur:0}],onClick:W}),j=r=>{if(r)return e.widget.h(d,{fontSize:16,fontWeight:500,lineHeight:22,...K},r)},z=(r,n)=>{if(n)return e.widget.h(d,{fontSize:r?13:14,lineHeight:20,fontWeight:400,...K,fill:{...K.fill,color:{r:0,g:0,b:0,a:r?.5:.8}}},n)},q=(r,n)=>e.widget.h(d,{fontSize:r?13:16,lineHeight:r?20:22,fontWeight:400,textDecoration:"underline",...K,fill:{...K.fill,color:{r:0,g:0,b:0,a:.5}},onClick:W},n);return"vertical"===x?function(...r){return e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"hug-contents",height:"hug-contents",fill:h.Vm,cornerRadius:12,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6}]},...r)}(!L&&e.widget.h(n,{width:304,height:.01}),L&&$(304,k?Math.max(Math.min(304/k,608),160):160,D),P&&((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:{left:24,right:24,bottom:0,top:r?16:24}},...n))(L,j(B),z(N,V)),((r,...n)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:r?"center":"start",horizontalAlignItems:"start",width:"fill-parent",spacing:8,padding:r?{left:24,right:24,top:8,bottom:24}:20},...n))(P,Y(M),q(P,H))):"horizontal"===x?function(r,...n){return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"start",width:480,height:"hug-contents",fill:h.Vm,cornerRadius:12,spacing:r?16:0,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.08},offset:{x:0,y:0},blur:2}]},...n)}(L,!L&&e.widget.h(n,{width:.01,height:.01}),L&&$(112,112,D),((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"start",width:"fill-parent",height:"fill-parent",fill:h.Vm,spacing:r?4:8,padding:r?{left:0,right:0,bottom:16,top:16}:20},...n))(L,P&&((...r)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:0},...r))(j(B),z(N,V)),((...r)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:P?"center":"start",horizontalAlignItems:"center",width:"fill-parent",spacing:8},...r))(Y(M),q(P,H)))):void 0})}},843977:(e,r,n)=>{n.d(r,{Z:()=>s}),n(805014),n(777535);var a=n(885123);n(841962);var i=n(851390),o=n(882345);let s={fetchFontFile:(e,r,n)=>(0,o.M1)({source:e,id:r,postscriptName:n,fileKey:i.hk()?.openFileKey()||null,teamId:null,orgId:null}),fetchFontFileWithoutPickerInfo(e,r,n){var s;let l=i.hk()?.openFileKey();return l?(0,o.co)(e,r,n,l,!(s=a.D.getState())||!s.openFile||!!s.openFile.parentOrgId):Promise.reject()}}},470538:(e,r,n)=>{n.d(r,{qb:()=>o});var a=n(214773);class i{onFrameDistributionTrackedEvent(e){a.jp(e)}}function o(){new i}},394829:(e,r,n)=>{n.d(r,{_v:()=>o,kJ:()=>s});var a=n(238311);let i=class e{logFeatureGateExposure(e,r){a.w$.logExposureForFeatureGate(e,r)}getDynamicConfigNumberAsRoundedInt(r,n,i){return Math.round(a.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString))}getExperimentNumberAsRoundedInt(r,n,i){return Math.round(a.w$.getExperimentNumber(r,n,i,e.SourceLoggingString))}getDynamicConfigNumberAsFloat(r,n,i){return a.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString)}getExperimentNumberAsFloat(r,n,i){return a.w$.getExperimentNumber(r,n,i,e.SourceLoggingString)}getDynamicConfigString(r,n,i){return a.w$.getDynamicConfigString(r,n,i,e.SourceLoggingString)}getExperimentString(r,n,i){return a.w$.getExperimentString(r,n,i,e.SourceLoggingString)}getDynamicConfigBoolean(r,n,i){return a.w$.getDynamicConfigBoolean(r,n,i,e.SourceLoggingString)}getExperimentBoolean(r,n,i){return a.w$.getExperimentBoolean(r,n,i,e.SourceLoggingString)}};i.SourceLoggingString="fullscreen";let o=i;function s(){new o}},901152:(e,r,n)=>{n.d(r,{MP:()=>s,U1:()=>o,ck:()=>i,pb:()=>l});var a=n(841962);function i(){return a.Ay().frame_context?.type==="integration"}function o(){return i()&&"google-meet"===(0,a.Ay)().integration_host&&!!(0,a.Ay)().is_meet_hardware}function s(){return i()&&"zoom"===(0,a.Ay)().integration_host}class l{static isGoogleClassroomIntegration(){return i()&&"google-classroom"===(0,a.Ay)().integration_host}}},747952:(e,r,n)=>{n.d(r,{Yq:()=>s,u1:()=>l,zi:()=>c}),n(217950);var a=n(805014),i=(n(245954),n(777535),n(885123),n(841962),n(550479),n(653798),n(190500),n(711942),n(847156));n(627254);let o=null;function s(){return o?.bufferedAmount||0}function l(){if(o){let e=o.url;(function(e){if(null!==o){o.onopen=null,o.onmessage=null,o.onclose=null,o.onerror=null;try{o.close()}catch(e){}o=null,(0,i.II)(),a.cgc.disconnect(e)}})("breakMultiplayerWebsocketForTesting"),console.log(`breakMultiplayerWebsocketForTesting: disconnected from ${e}`)}}function c(e=!1){o||(a.h3O.reconnect(e),console.log(`unbreakMultiplayerWebsocketForTesting: reconnected to ${o?o.url:null}`))}},487229:(e,r,n)=>{n.d(r,{F:()=>s});var a=n(812272),i=n(677840);let o=new Set;function s(e,r,n){let s=function(e){let r=Object.keys(e);return 0===r.length?new Set:new Set(r)}(r),l=!(0,a.yZ)(s,o);(0,i.YQ)({id:"Selection Changed",properties:{...n,numSelectedTextNodes:n.numSelectedByType&&n.numSelectedByType.TEXT||0,didSelectedNodeIdsChange:l}}),o=s}},169678:(e,r,n)=>{n.d(r,{bJ:()=>l});var a=n(875877),i=n(761263),o=n(298820),s=n(515662);function l(){new c}class c{constructor(){this.developerRelatedLinksManager=new i.GK}submitDeveloperRelatedLinks(e){this.developerRelatedLinksManager.addLinks(e)}didGetNodeStatusChange(){(0,o.Q)()}isVariableAvailableInLibraryAsset(e){let r=a.atomStore.get(s.e3);return r?.status==="loaded"&&r.data.some(r=>r.node_id===e)}}},197334:(e,r,n)=>{n.d(r,{_I:()=>p,eE:()=>m});var a=n(805014),i=n(777535),o=n(281935),s=n(163773),l=n(437068),c=n(76265),d=n(553362);let u="hardware_acceleration_disabled_warning_shown";function m(){if(o.eD)return null;let e=a.CeL.getGpuDeviceInfo();return e?e.vendor.includes("Google Inc.")&&e.graphicsCardName.includes("SwiftShader"):null}function p(e,r){if(null!==e){if(!e){l.x4&&l.x4.getItem(u)&&((0,i.sx)("Hardware Acceleration Turned On"),delete l.x4[u]);return}if(!l.x4||!l.x4.getItem(u)){let e=()=>{l.x4.setItem(u,"1")};(0,i.sx)("Hardware Acceleration Warning Bell"),r(d.F.enqueue({type:"hardware_acceleration_disabled_warning",message:(0,c.t)("hardware_acceleration_detector.message"),button:{text:(0,c.t)("hardware_acceleration_detector.learn_more"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039828614-Configure-your-browser-for-Figma#Advanced","_blank"),r(d.F.dequeue({})),e(),(0,i.sx)("Hardware Acceleration Warning Clicked",{dismissed:!1})}},timeoutOverride:1/0,onDismiss:()=>{(0,i.sx)("Hardware Acceleration Warning Clicked",{dismissed:!0}),e()}}))}}}},309494:(e,r,n)=>{n.d(r,{g:()=>s});var a=n(411855),i=n(875877),o=n(366172);function s(){let[e,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(o.Y5.isReady()){r(!0);return}let e=!1;return o.Y5.onReady().then(()=>{e||r(!0)}),()=>{e=!0}},[r]),e}(0,i.atomWithDefault)(()=>o.Y5.isReady()||o.Y5.onReady())},726692:(e,r,n)=>{n.d(r,{T:()=>i});var a=n(180704);async function i(e,r){if(e in r){let n=r[e];switch(n.type){case"bytes":return Promise.resolve(n.bytes);case"promise":return n.promise}}let n=(0,a.Nd)(e);r[e]={type:"promise",promise:n};let i=await n;return r[e]={type:"bytes",bytes:i},i}},180704:(e,r,n)=>{let a;n.d(r,{B0:()=>B,DK:()=>k,Dl:()=>U,EC:()=>D,Nd:()=>F,d$:()=>f,w6:()=>x});var i=n(396405),o=n(805014),s=n(986162),l=n(379945),c=n(747484),d=n(653798),u=n(697737),m=n(95390),p=n(42887),h=n(483866),_=n(755693);let g=document.createElement("canvas"),f=4096,E=g.getContext("2d"),y=document.createElement("canvas"),b=function(){try{return y.getContext("2d",{colorSpace:"display-p3"})}catch{return null}}();async function v(e,r,n,a){let i=o.RYP.SRGB;if("image/png"===r){let r=(0,p.Ll)(e);if(e=r.withoutColorSpace,r.iccProfileRawData)try{i=(0,m.Y)(r.iccProfileRawData)}catch(e){}}let s=null;if("image/jpeg"===r){try{let r=(0,p.yy)(e);r&&(i=(0,m.Y)(r)??o.RYP.SRGB)}catch(e){}s=l.f.getOrientation(e),O&&(s=null)}let c=!1;"image/gif"===r&&(c=(0,p.fB)(e));let d=URL.createObjectURL(new Blob([e],{type:r}));try{let e=await x({url:d,height:null,width:null});return{...T(e,n,a,s,c),colorProfile:i}}finally{URL.revokeObjectURL(d)}}function T(e,r,n,a,i){let{width:o,height:s,originalWidth:c,originalHeight:d,isRotated:u}=function(e,r,n,a,i){let o=l.f.angleFromOrientation(i),s=l.f.orientationIsFlipped(i),c=e,d=r,u=e,m=r;if(90===o||270===o){let n=r;r=e,e=n,n=m,m=u,u=n}return n>0&&a>0&&(e>n&&(r=Math.round(r*n/e),e=n),r>a&&(e=Math.round(e*a/r),r=a),e=Math.max(1,e),r=Math.max(1,r)),g.width=e,g.height=r,E.translate(e/2,r/2),E.scale(e/u,r/m),s&&E.scale(-1,1),E.rotate(Math.PI/180*o),E.translate(-c/2,-d/2),{originalHeight:m,originalWidth:u,width:e,height:r,isRotated:0!==o}}(e.width,e.height,r,n,a);return E.drawImage(e,0,0),{width:o,height:s,originalWidth:c,originalHeight:d,isMultiFrameGIF:i,isRotated:u,bitmap:null,rgba:new Uint8Array(E.getImageData(0,0,o,s).data.buffer)}}function I(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function S(){let e="/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z";if(!L.works)return 16==(await x({url:`data:image/jpeg;base64,${e}`,height:null,width:null})).width;{let r=new Blob([I(e)],{type:"image/jpeg"});return 16==(await createImageBitmap(r)).width}}async function w(){if(!L.works)return!1;let e=document.createElement("canvas");e.width=16,e.height=8;let r=e.getContext("2d"),n=new Blob([Uint8Array.from(atob("/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z"),e=>e.charCodeAt(0))],{type:"image/jpeg"});r.drawImage(await createImageBitmap(n),0,0);let a=r.getImageData(0,0,16,8);r.clearRect(0,0,e.width,e.height);let i=URL.createObjectURL(n),o=new Image;await new Promise(e=>{o.onload=e,o.src=i}),r.drawImage(await createImageBitmap(o),0,0);let s=r.getImageData(0,0,16,8);if(a.data.length!==s.data.length)return!1;for(var l=0;l<a.data.length;++l)if(a.data[l]!==s.data[l])return!1;return!0}async function A(e,r){if(!e)return!1;try{let a=await createImageBitmap(r),i=a.width,o=a.height,s=!1,l=e.getParameter(e.ACTIVE_TEXTURE);e.activeTexture(e.TEXTURE0);let c=e.getParameter(e.FRAMEBUFFER_BINDING),d=e.getParameter(e.TEXTURE_BINDING_2D),u=null,m=null;try{if(m=e.createTexture(),e.bindTexture(e.TEXTURE_2D,m),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.bindTexture(e.TEXTURE_2D,null),u=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){var n=new Uint8Array(4*i*o);e.readPixels(0,0,i,o,e.RGBA,e.UNSIGNED_BYTE,n),255===n[0]&&(s=!0)}}catch{}return e.bindFramebuffer(e.FRAMEBUFFER,c),e.bindTexture(e.TEXTURE_2D,d),e.deleteTexture(m),e.deleteFramebuffer(u),e.activeTexture(l),s}catch{return!1}}async function C(){O=await S(),c.Ay.webkit&&await w()}async function N(e){let r=new Blob([(0,i.D4)("iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQBAMAAAAlsQiEAAAALVBMVEX///////////////////////////////////////////////////////8AAACgbBYXAAAAD3RSTlPx5NXDsJ2Ic19LOCgYDQAksqQSAAAAJklEQVQI12MAAQEGBQYDBgeGAIYEhgKGBoYJDAsYNjAcYHjAcAEAP7AGkQT7krEAAAAASUVORK5CYII=")],{type:"image/png"});try{try{return await createImageBitmap(r,{premultiplyAlpha:"none"}),{works:!0,allowsOptions:!0}}catch(n){return{works:await A(e,r),allowsOptions:!1}}}catch{return{works:!1,allowsOptions:!1}}}let L={works:!1,allowsOptions:!1},O=!1,R=null,P=null,D={init(e){P=(async()=>{if(e===o.UF0.YES)L={works:!0,allowsOptions:!0};else{let e=(a||(a=(0,s.iL)()),a).ctx;if(!e)throw Error("Cannot find GL context");L=await N(e)}await C()})()},reset(){null!==R&&R.forgetCallbacks()},encode(e,r,n,a,s,l,c=o.RYP.SRGB,d=!1){let u,m=g,p=E;c===o.RYP.DISPLAY_P3&&y&&b&&(m=y,p=b);let h=e*r*4,_=p.createImageData(e,r);l&&(n=function(e,r){let n=new Uint8Array(r);for(let a=0;a<r;a+=4){let r=e[a+3|0],i=255.999/r;n[a]=e[a]*i,n[a+1|0]=e[a+1|0]*i,n[a+2|0]=e[a+2|0]*i,n[a+3|0]=r}return n}(n,h)),d&&(n=function(e,r){let n=new Uint8Array(r);return e.forEach((r,a)=>{a%4==3?n[a]=255:n[a]=e[a]}),n}(n,h)),new Uint8Array(_.data.buffer).set(n),m.width=e,m.height=r,p.putImageData(_,0,0),u=a?m.toDataURL("image/jpeg",s):m.toDataURL();let f=";base64,";return(0,i.D4)(u.slice(u.indexOf(f)+f.length))},async decodeAsync(e,r,n,a,i){if(await P,!L.works)return await v(e,r,n,a);R??=new _.o;let o=null,{bitmap:s,isMultiFrameGIF:d,colorProfile:u}=await M(r,e);if(!s)return console.warn("Something wrong in createImageBitmap thread.  Bitmap is null ... falling back to decode using image"),await v(e,r,n,a);let m=!1;"image/jpeg"===r&&(m=o!==l.a.ROTATE_0,null!==o&&o!==l.a.ROTATE_0&&O&&c.Ay.chrome&&0>c.Ay.compareVersions([c.Ay.version.toString(),"86"])&&(i=!1),O&&(o=null));let p=s.width,h=s.height;return i&&(null===o||o===l.a.ROTATE_0)&&(0===n||p<=n)&&(0===a||h<=a)?{width:p,height:h,originalWidth:p,originalHeight:h,isMultiFrameGIF:d,isRotated:m,bitmap:s,colorProfile:u}:{...T(s,n,a,o,d),colorProfile:u}},thumbnailSize(e,r){let n=Math.max(e,r),a=0;for(;n>512;)a++,n=Math.floor((n+1)/2);let i=D.dropMips(e,r,a);return{w:i[0],h:i[1],mipsToDrop:a}},dropMips(e,r,n){if(0===e||0===r)return(0,d.x1)("images","Width and height should not be zero"),[e,r];for(let a=0;a<n;++a)e=Math.floor((e+1)/2),r=Math.floor((r+1)/2);return[e,r]},scaleImageBitmap(e,r,n,a){g.width=r,g.height=n,E.translate(0,0),E.scale(1,1),E.rotate(0),E.drawImage(e,0,0,r,n);let i=g.toDataURL(a),o=i.indexOf(",");return I(i.slice(o+1))},async createCanvasAndDrawImage(e,r,n,a){let i,o;"undefined"!=typeof OffscreenCanvas?i=new OffscreenCanvas(e,r):i=U(e,r);let s=i.getContext("2d");if(!s)throw Error("Failed to get 2D context");return n(s),i instanceof OffscreenCanvas?o=await i.convertToBlob({type:a}):o=await new Promise((e,r)=>i.toBlob(n=>{n?e(n):r(Error("Failed to create blob from canvas"))},a)),{canvas:i,blob:o}},async generateThumbnail(e,r,n){if(e.bitmap){let{canvas:a,blob:i}=await this.createCanvasAndDrawImage(r,n,a=>{a.drawImage(e.bitmap,0,0,r,n)},e.mimeType),o=await i.arrayBuffer(),s=await createImageBitmap(a);return{compressedData:new Uint8Array(o),bitmap:s}}{let a=e.rgba;if(!a)throw Error("Failed to decode image");let i=new ImageData(new Uint8ClampedArray(a),e.width,e.height),{canvas:o}=await this.createCanvasAndDrawImage(e.width,e.height,a=>{a.putImageData(i,0,0),a.drawImage(a.canvas,0,0,e.width,e.height,0,0,r,n)},e.mimeType),s=o.getContext("2d");if(!s)throw Error("Failed to get context");let l=new Uint8Array(s.getImageData(0,0,r,n).data);return{compressedData:this.encode(r,n,l,"image/jpeg"===e.mimeType,60,!1),decompressedData:l}}}},k=128;async function M(e,r){if(!R)throw Error("Worker not initialized");return"image/heic"===e&&(0,h._)()?{bitmap:await (0,h.g)(r),isMultiFrameGIF:!1,colorProfile:o.RYP.SRGB}:await R.sendMessage({type:e,array:r,supportsCreateBitmapOptions:L.allowsOptions})}async function F(e){return new Uint8Array((await u.Ay.crossOriginGet(e,void 0,{responseType:"arraybuffer",retryCount:3})).data)}function x(e){return new Promise((r,n)=>{let a=new Image;e.height&&(a.height=e.height),e.width&&(a.width=e.width),a.crossOrigin="";let i=Error();a.onerror=e=>{e.cause=i,n(e)},a.onload=()=>r(a),a.src=e.url})}function U(e,r){let n=document.createElement("canvas");return n.width=e,n.height=r,n}function B(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}},542005:(e,r,n)=>{n.d(r,{Jr:()=>P,Mj:()=>b,UD:()=>D,xY:()=>O});var a=n(511445),i=n(217950),o=n(627969),s=n(805014),l=n(788922),c=n(777535),d=n(467783),u=n(841962),m=n(868292),p=n(550479),h=n(653798),_=n(697737),g=n(180704),f=n(366172);let E=new Uint8Array([171,75,84,88,32,50,48,187,13,10,26,10]).toString();var y=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(y||{});async function b(e,r,n,a){let i="figFile"===r.type?`/file/${r.fileKey}/image/batch`:`/community/file/${r.hubFileId}/image/batch`;try{let r=await _.Ay.post(i,{sha1s:e,max_size:n,needs_compressed_textures:a},{retryCount:1/0});if(200!==r.status||r.data.error)throw Error("api error while resolving images");return{s3_urls:r.data.meta.s3_urls,compressed_texture_s3_urls:r.data.meta.compressed_texture_s3_urls}}catch(r){throw console.warn(`Couldn't download image(s) with hashes ${e}`),r}}class v extends Error{constructor(e="IMAGE_MISSING"){super(e),Object.setPrototypeOf(this,v.prototype)}}class T extends Error{constructor(e="FILE_KEY_MISSING"){super(e),Object.setPrototypeOf(this,T.prototype)}}class I extends Error{constructor(e="IMAGE_EXPIRED"){super(e),Object.setPrototypeOf(this,I.prototype)}}var S=(e=>(e[e.AWAITING_SINATRA_LOOKUP=0]="AWAITING_SINATRA_LOOKUP",e[e.LOOKUP=1]="LOOKUP",e[e.AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP=2]="AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP",e[e.LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY=3]="LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY",e[e.UPLOADING=4]="UPLOADING",e[e.READY=5]="READY",e[e.MISSING=6]="MISSING",e[e.FAILED=7]="FAILED",e[e.PRESENT=8]="PRESENT",e))(S||{});let w=class e{constructor(e,r){this.hash=e,this._priority=r,this.compressedTextureS3Path=null,this.shouldDownloadCompressedTexture=null,this.retries=0,this.state=0,this._downloadPromise=null,this._imageIsReady=()=>{},this._readyPromise=new Promise(e=>{this._imageIsReady=e})}set priority(r){this._priority!==e.MAX_PRIORITY&&(this._priority=r)}get priority(){return this._priority}imageIsReady(){this._imageIsReady()}readyPromise(){return this._readyPromise}isExpired(){let e=null;try{if(!(e=new URL(this.s3Path).searchParams.get("Expires")))return!1;e=parseInt(e,10)}catch{return!1}return e<Date.now()/1e3}downloadFromS3(){if(!this.shouldDownloadCompressedTexture&&null==this.s3Path)throw Error("Called downloadFromS3 without s3Path");if(this.shouldDownloadCompressedTexture&&null==this.compressedTextureS3Path)throw Error("Called downloadFromS3 without compressedTextureS3Path when downloading compressed texture");return _.Ay.crossOriginGetAny(this.shouldDownloadCompressedTexture?this.compressedTextureS3Path:this.s3Path,null,{responseType:"arraybuffer"}).then(e=>e.data).catch(e=>{if(this.isExpired())throw new I;if(0!==e.status&&e.status<500){let r=this.s3Path?.includes("resize")?"Can't load image! Make sure Pixie service is running locally":"Image is missing from S3!";(0,h.x1)("image",r,{hash:this.hash,status:e.status}),(0,p.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Image missing from S3"))}throw e})}download(e){if(!this._downloadPromise){let e=this.downloadFromS3();e.finally(()=>{this._downloadPromise=null}).catch(e=>{}),this._downloadPromise=e}return this._downloadPromise}};w.MAX_PRIORITY=Number.MAX_SAFE_INTEGER;class A{constructor(){this.queue=[],this.byHash=new Map,this.needsSort=!1}get length(){return this.queue.length}ensureSorted(){this.needsSort&&(this.queue.sort((e,r)=>r.priority-e.priority),this.needsSort=!1)}numEligible(e){this.ensureSorted();let r=this.queue.findIndex(r=>r.priority<e);return r<0?this.queue.length:r}push(...e){for(let r of(this.queue.push(...e),e))this.byHash.set(r.hash,r);this.needsSort=!0}updatePriority(e,r){let n=this.byHash.get(e);return null!=n&&(n.priority=r,this.needsSort=!0,!0)}pop(e){if(this.ensureSorted(),0===this.queue.length||this.queue[0].priority<e)return null;let r=Date.now(),n=1/0;for(let e=0;e<this.queue.length;e++){let a=this.queue[e].retryTime;if(null==a||r>=a){let[r]=this.queue.splice(e,1);return this.byHash.delete(r.hash),{found:!0,image:r}}n=a<n?a:n}return{found:!1,retryDelay:n-r}}find(e){return this.byHash.get(e)??null}erase(e){let r=this.byHash.get(e);if(r){this.byHash.delete(e);let n=this.queue.findIndex(e=>e===r);n>=0&&this.queue.splice(n,1)}}debugString(){return this.queue.map(e=>`${e.hash}(${e.priority})`).join(",")}}function C(){return f.Y5.openFilePromise()}class N extends Error{constructor(e,r){super(e),this.lookupImages=r}}let L=class e{constructor(){this.pendingPasteRequests={},this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={},this.imagesNeedingDirectUpload=new Set,this.imageTimingLog=new Map,this.MAX_REQUESTS=3,this.SINATRA_BATCH_SIZE=100,this.verbose=(0,u.kc)().image_verbose,this.incomingImages=new Map,this.pendingLookupCallback=null,this.downloadQueue=new A,this.minPriority=0,this.downloadsPaused=!1,this.allImages=new Map,this.pendingDecodes=new Set,this.pendingDownloads=new Set,this.cancelDownloads=new Set,this.alreadyDownloaded=new Set,this.pendingUploads=new Set,this.uploadedImagesNeedingUrl=new Set,this.pendingImagesCallback=null,this.imageQueueEmpty=null,this.incomingImagesLookedUp=null,this.allImagesUploaded=null,this.progressCallbacks=[],this.imageMaxSize=void 0,this.compressedTextureLookupQueue=[],this.compressedTextureRetryCount=new Map,this.LOGGING_RATE=.1,this.flushPendingRecordImages=(0,a.s)(async()=>{let r=this.pendingImagesToRecord,n=this.pendingRecordImagesTasks,a=this.pendingImagesToRecordByLibraryKey,i=this.pendingRecordImagesTasksByLibraryKey,o=Object.keys(r),l=Object.keys(a),d=o.map(e=>({fileKey:e,type:"fileKey"})).concat(l.map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={};let u=await this.getEditingFileKey();d.forEach(async o=>{if("fileKey"===o.type&&u===o.fileKey){n[o.fileKey].resolve();return}if("fileKey"===o.type&&!o.fileKey){n[o.fileKey].reject("Invalid originFileKey");return}let l=1,d="fileKey"===o.type?r[o.fileKey]:a[o.libraryKey];for(;;){try{let r=await _.Ay.put(`/api/files/${u}`,{image_sha1s:d,image_origin_file_key:"fileKey"===o.type?o.fileKey:void 0,image_origin_library_key:"libraryKey"===o.type?o.libraryKey:void 0}),{success:a,failed:l}=e.parseFileUpdateResponseForImages(d,r);for(let e of(s.Bko.imagePermissionsCopied(a),l))this.markImageMissing(e);for(let e of(l.length>0&&(0,c.sx)("image_permission_copy_failed",{shas:l.join(",")}),d))delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():i[o.libraryKey].resolve();return}catch(e){if(e.status>=400&&e.status<500){for(let e of((0,m.Jj)(),(0,c.sx)("image_permission_copy_failed",{shas:d.join(",")}),d))this.markImageMissing(e),delete this.pendingPasteRequests[e];("fileKey"===o.type?n[o.fileKey]:i[o.libraryKey]).reject(`4xx error when pasting images ${e}`);return}}let r=1e3*l*Math.random();await new Promise(e=>setTimeout(e,r)),l=Math.min(2*l,64)}})},100)}static shouldUseCompressedTextures(){return e._shouldUseCompressedTextures}getEditingFileKey(){return f.Y5.openFileKeyPromise()}getOrCreateImageLogData(e){let r=this.imageTimingLog.get(e);return r||(r={},this.imageTimingLog.set(e,r)),r}recordImagesFromLibraryKey(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originLibraryKey specified");if(this.pendingImagesToRecordByLibraryKey[e]??=[],this.pendingImagesToRecordByLibraryKey[e].push(...r),!this.pendingRecordImagesTasksByLibraryKey[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordImagesTasksByLibraryKey[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasksByLibraryKey[e].promise;let n=this.pendingRecordImagesTasksByLibraryKey[e].promise;return this.flushPendingRecordImages(),n}recordImages(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingImagesToRecord[e]=this.pendingImagesToRecord[e]||[],this.pendingImagesToRecord[e].push(...r),!this.pendingRecordImagesTasks[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordImagesTasks[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasks[e].promise;let n=this.pendingRecordImagesTasks[e].promise;return this.flushPendingRecordImages(),n}static parseFileUpdateResponseForImages(e,r){try{if(r?.data?.meta?.missing_shas){let n=new Set(r.data.meta.missing_shas);return{success:e.filter(e=>!n.has(e)),failed:Array.from(n)}}}catch{}return{success:e,failed:[]}}async resolveImageUrls(r){let n=await C(),a=await b(r,n,this.imageMaxSize,e.shouldUseCompressedTextures()),i=r.filter(e=>!(e in a.s3_urls));if(i.length>0){let r=await f.Y5.sourceFileKeyPromise();if(r){let n=await b(i,{type:"figFile",fileKey:r},void 0,e.shouldUseCompressedTextures());return{s3_urls:{...a.s3_urls,...n.s3_urls},compressed_texture_s3_urls:{...a.compressed_texture_s3_urls,...n.compressed_texture_s3_urls}}}}return{s3_urls:a.s3_urls,compressed_texture_s3_urls:a.compressed_texture_s3_urls}}queueImageForLookup(e){let r=e.hash;this.verbose&&(0,h.Lo)("image","incoming",{hash:r}),e.state=0,this.incomingImages.set(r,e),null==this.pendingLookupCallback&&(this.pendingLookupCallback=setTimeout(()=>{this.pendingLookupCallback=null,this.lookupImages().catch(e=>(0,p.$D)(i.e.SCENEGRAPH_AND_SYNC,e))},0))}setExternalSource(e,r){let n=new w(e,w.MAX_PRIORITY);n.s3Path=r,this.allImages.set(e,n),this.downloadQueue.push(n),this.imagesNeedingDirectUpload.add(e),this.maybeDownloadMoreImages()}triggerCompressedTextureAvailabilityLookup(e,r){let n=this.allImages.get(e);n&&2===n.state&&new Promise((e,n)=>{let a=this.compressedTextureLookupQueue.splice(0,this.SINATRA_BATCH_SIZE);if(0===a.length)return null;for(let e of a)this.markImageLookingUpCompressedTextureAvailability(e);try{_.Ay.post(`/file/${r}/compressed_texture_available/batch`,{sha1s:a}).then(r=>{e(r)}).catch(e=>{n(new N(e.message,a))})}catch(e){n(new N(e.message,a))}}).then(e=>{if(!e)return;let n=e.data.meta.results;for(let e of Object.keys(n))this.resolveCompressedTextureAvailabilityLookup(e,r,n[e])}).catch(e=>{for(let n of e.lookupImages)this.resolveCompressedTextureAvailabilityLookup(n,r,null)})}resolveCompressedTextureAvailabilityLookup(e,r,n){let a=this.allImages.get(e),i=this.compressedTextureRetryCount.get(e)||0;if("generating"===n&&i<20){let n=500*(1<<Math.min(i,4));this.compressedTextureLookupQueue.push(e),this.markImageNeedsCompressedTextureAvailabilityLookup(e),this.compressedTextureRetryCount.set(e,i+1),setTimeout(()=>this.enqueueImageToCheckCompressedTextureAvailability(e,r),n)}else{this.markImagePresent(e),this.downloadQueue.push(a);let r=this.getOrCreateImageLogData(e);switch(r.compressedTextureRetryCount=i,r.compressedTextureResult=n,n){case"generated":a.shouldDownloadCompressedTexture=!0;break;case"failed":case null:case"generating":this.compressedTextureRetryCount.delete(e),a.shouldDownloadCompressedTexture=!1}this.maybeDownloadMoreImages()}}enqueueImageToCheckCompressedTextureAvailability(e,r){setTimeout(()=>{this.triggerCompressedTextureAvailabilityLookup(e,r)},0)}setImageDownloadPriority(e,r){let n=this.getOrCreateImageLogData(e);if(n.downloadPriority=r,n.downloadPriorityTimestamp=performance.now(),!e){(0,h.xi)("setImageDownloadPriority","invalid hash");return}let a=this.allImages.get(e);if(null==a){a=new w(e,r),this.allImages.set(e,a),this.queueImageForLookup(a);return}4===a.state&&(0,h.x1)("image","Got download request for currently uploading image",{hash:e},{reportAsSentryError:!0}),a.priority=r,this.downloadQueue.updatePriority(e,r)&&this.maybeDownloadMoreImages()}setMinimumImagePriority(e){this.minPriority=e,this.maybeDownloadMoreImages()}pauseImageDownloads(){this.downloadsPaused=!0}resumeImageDownloads(){this.downloadsPaused=!1,this.maybeDownloadMoreImages()}maybeDownloadMoreImages(){for(;this.pendingDownloads.size<this.MAX_REQUESTS&&this.downloadQueue.length>0&&!this.downloadsPaused;){let r=this.downloadQueue.pop(this.minPriority);if(null==r)break;if(!r.found){let e=r.retryDelay;!Number.isFinite(e)||e<=0?(0,p.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Logic error in download queue, cannot compute next retry")):setTimeout(()=>this.maybeDownloadMoreImages(),e);break}let n=r.image,a=this.getOrCreateImageLogData(n.hash);if(n.hash){this.verbose&&(0,h.Lo)("image","download start",{hash:n.hash,ok:!this.pendingDownloads.has(n.hash)});let e=performance.now();a.downloadStartedTimestamp=e,this.pendingDownloads.add(n.hash)}n.download(this.imageMaxSize).then(r=>{if(this.cancelDownloads.delete(n.hash))return;this.verbose&&((0,h.Lo)("image","download done",{hash:n.hash,ok:!this.alreadyDownloaded.has(n.hash)}),this.getOrCreateImageLogData(n.hash).downloadFinishedTimestamp=performance.now()),this.alreadyDownloaded.add(n.hash);let a=null;if(this.imagesNeedingDirectUpload.has(n.hash))s.Bko.imageDownloadedForPaste(n.hash,r),this.imagesNeedingDirectUpload.delete(n.hash);else{let i=r;if(e.shouldUseCompressedTextures()&&r.slice(0,12).toString()===E){let e=(0,l.LF4)(r);a={width:e.pixelWidth,height:e.pixelHeight},s.Bko.setCompressedTextureMetadata(n.hash,a),i=e.levels[0].levelData,this.clearImageDecodePending(n.hash,!0)}s.Bko.imageDownloaded(n.hash,i)}a||this.pendingDecodes.has(n.hash)||((0,h.xi)("ImageManager","missing pending decode after download",{hash:n.hash}),(0,p.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("missing pending decode after image marked as downloaded")),n.imageIsReady())},e=>{if(this.pendingDecodes.delete(n.hash)&&this.maybeResolveImageQueueEmptyAndPendingImages(),this.cancelDownloads.delete(n.hash))return;if(e instanceof v)this.markImageMissing(n.hash);else if(e instanceof T)(0,p.$D)(i.e.SCENEGRAPH_AND_SYNC,e),this.markImageFailed(n.hash);else if(e instanceof I)this.queueImageForLookup(n);else{if(e instanceof _.Dr&&403===e.status){this.markImageFailed(n.hash);return}let r=5e3*(1<<Math.min(n.retries,4));r+=r*Math.random(),n.retries+=1,(429===e.status||503===e.status)&&(r*=4),n.retryTime=Date.now()+r,this.downloadQueue.push(n)}let r=this.getOrCreateImageLogData(n.hash),a=this.allImages.get(n.hash);a&&(r.decodedImageState=a.state),r.errorOccurredTimestamp=performance.now()}).finally(()=>{this.pendingDownloads.delete(n.hash),this.maybeDownloadMoreImages()})}this.pendingImagesCallback?.(this.pendingImages),this.maybeResolveImageQueueEmptyAndPendingImages()}forceDownloadImage(e){this.setImageDownloadPriority(e,w.MAX_PRIORITY)}setImageDecodePending(e){this.verbose&&(0,h.Lo)("image","decode start",{hash:e,ok:!this.pendingDecodes.has(e)}),this.getOrCreateImageLogData(e).downloadFinishedTimestamp=performance.now(),this.pendingDecodes.add(e)}getSignedUrls(e){let r=new Map;for(let n of e){let e=this.allImages.get(n);e&&e.s3Path&&r.set(n,e.s3Path)}return r}clearImageDecodePending(e,r){this.verbose&&(0,h.Lo)("image","decode done",{hash:e,ok:this.pendingDecodes.has(e)});let n=this.getOrCreateImageLogData(e);n.decodeFinishedTimestamp=performance.now(),this.pendingDecodes.delete(e)&&this.maybeResolveImageQueueEmptyAndPendingImages(),r?(this.markImageReady(e),n.decodedImageState=5):(this.markImageFailed(e),n.decodedImageState=7),(0,u.kc)().image_log_timing&&Math.random()<this.LOGGING_RATE&&(0,c.sx)("image_log_timing",{hash:e,...n})}markImagePresent(e){let r=this.allImages.get(e);r&&(r.state=8,s.Bko.imageIsPresent(e))}markImageMissing(e){let r=this.allImages.get(e);r&&(r.state=6,s.Bko.imageIsMissing(e),r.imageIsReady())}markImageFailed(e){let r=this.allImages.get(e);r&&(r.state=7,r.imageIsReady())}markImageReady(e){let r=this.allImages.get(e);r&&(r.state=5,r.imageIsReady())}markImageNeedsCompressedTextureAvailabilityLookup(e){let r=this.allImages.get(e);r&&(r.state=2,this.lookupCompressedTextureAvailabilities(e))}markImageLookingUpCompressedTextureAvailability(e){let r=this.allImages.get(e);r&&(r.state=3)}async lookupImages(){let r=[];for(let e of this.incomingImages.values())0===e.state&&(r.push(e),e.state=1,this.verbose&&(0,h.Lo)("image","lookup",{hash:e.hash}));try{for(;r.length>0;){let n=r.splice(0,this.SINATRA_BATCH_SIZE);for(let e of n){let r=this.pendingPasteRequests[e.hash];if(r)try{await r}catch(r){(0,h.x1)("lookupImages","pastePromise failed",{hash:e.hash})}}let a=await this.resolveImageUrls(n.map(e=>e.hash));for(let r of n){let n=a.s3_urls[r.hash],i=null;e.shouldUseCompressedTextures()&&(i=a.compressed_texture_s3_urls[r.hash]),n?(r.s3Path=n,i?(r.compressedTextureS3Path=i,this.compressedTextureLookupQueue.push(r.hash),this.markImageNeedsCompressedTextureAvailabilityLookup(r.hash),this.lookupCompressedTextureAvailabilities(r.hash)):(this.markImagePresent(r.hash),this.downloadQueue.push(r)),this.verbose&&(0,h.Lo)("image","enqueued-batch",{hash:r.hash})):(this.markImageMissing(r.hash),this.verbose&&(0,h.Lo)("image","missing",{hash:r.hash})),this.incomingImages.delete(r.hash)}}}finally{for(let e of r)this.incomingImages.delete(e.hash)&&(0,h.xi)("image","incoming fallback delete",{hash:e.hash});null!=this.incomingImagesLookedUp&&this.incomingImagesLookedUp.resolve()}e.shouldUseCompressedTextures()||this.maybeDownloadMoreImages()}lookupCompressedTextureAvailabilities(e){C().then(r=>{"figFile"===r.type&&this.enqueueImageToCheckCompressedTextureAvailability(e,r.fileKey)})}forgetImage(e){if(this.imagesNeedingDirectUpload.has(e))return;this.verbose&&(0,h.Lo)("image","forget",{hash:e}),this.incomingImages.delete(e),this.downloadQueue.erase(e),this.pendingDownloads.has(e)&&this.cancelDownloads.add(e),this.alreadyDownloaded.delete(e),this.pendingDecodes.delete(e),this.imageTimingLog.delete(e),this.maybeResolveImageQueueEmptyAndPendingImages(),this.maybeResolveImagesLookedUp();let r=this.allImages.get(e);r&&(this.allImages.delete(e),5!==r.state&&r.imageIsReady())}getNumEligibleForDownload(){return this.downloadQueue.numEligible(this.minPriority)}get pendingImages(){let e=this.getNumEligibleForDownload();return this.verbose&&(0,h.Lo)("image","pendingImages",{incoming:this.incomingImages.size,eligible:e,downloads:this.pendingDownloads.size,decode:this.pendingDecodes.size}),this.incomingImages.size+e+this.pendingDownloads.size+this.pendingDecodes.size}setPendingImagesCallback(e){this.pendingImagesCallback=e}imageQueueEmptyPromise(){if(!this.imageQueueEmpty){let e=performance.now();this.imageQueueEmpty=(0,d.v)(),this.verbose&&(0,h.Lo)("image","queue empty defer installed",{start:e}),this.imageQueueEmpty.promise.finally(()=>{this.imageQueueEmpty=null;let r=performance.now()-e;this.verbose?(0,h.Lo)("image","queue empty defer cleared",{start:e,elapsed:r}):r>1e4&&(0,h.xi)("image","queue empty finished after a long time",{start:e,elapsed:r})}),this.emptyQueueCheck(this.imageQueueEmpty,e,3e4)}let e=this.imageQueueEmpty.promise;return this.maybeResolveImageQueueEmptyAndPendingImages(),e}imageLookupPromise(){this.incomingImagesLookedUp||(this.incomingImagesLookedUp=(0,d.v)(),this.incomingImagesLookedUp.promise.finally(()=>{this.incomingImagesLookedUp=null}));let e=this.incomingImagesLookedUp.promise;return this.maybeResolveImagesLookedUp(),e}emptyQueueCheck(e,r,n){setTimeout(()=>{if(e===this.imageQueueEmpty){let a=Math.round(.001*(performance.now()-r));(0,h.xi)("image","queue empty is taking a long time",{elapsedSec:a,pending:this.pendingImages,downloads:this.pendingDownloads.size,decodes:this.pendingDecodes.size}),this.verbose&&(0,h.Lo)("image","slow",{downloads:this.pendingDownloads,decodes:this.pendingDecodes});let i=Math.min(2*n,9e5);this.emptyQueueCheck(e,r,i)}},n)}maybeResolveImageQueueEmptyAndPendingImages(){let e=this.pendingImages;for(let r of this.progressCallbacks)r(e);this.imageQueueEmpty&&0===e&&(this.verbose&&(0,h.Lo)("image","resolve queue empty!"),this.imageQueueEmpty.resolve(),this.progressCallbacks=[]),this.maybeResolveImagesLookedUp()}maybeResolveImagesLookedUp(){0===this.incomingImages.size&&this.incomingImagesLookedUp?.resolve()}unresolvedImagesUnder(e,r,n){let a=n??s.AlE.getMutableActiveDocument();return s.Bko.findImagesUnder(a,e,r).map(e=>this.allImages.get(e)).filter(e=>void 0!==e&&5!==e.state&&4!==e.state)}loadAllImagesUnder(e,r,n,a=null,i){return this.loadAllImages(e,r,n,a,!0,i)}waitForImagesUnder(e,r,n,a=null,i){return this.loadAllImages(e,r,n,a,!1,i)}async loadAllImages(e,r,n,a=null,i,o){let s=performance.now();this.verbose&&(0,h.Lo)("image","loadAllImagesUnder",{reason:n,guids:e,start:s}),e.includes("0:0")&&"playground.initialLoad"!==n&&(0,h.x1)("image","loadAllImagesUnder called with full document",{reason:n});let l=0,c=new Promise(n=>{let s=this.unresolvedImagesUnder(e,r,o);if(0===(l=s.length))n({totalImages:l});else{var c;let e=l;for(let r of(c=e,a&&a(c,l),s))i&&this.setImageDownloadPriority(r.hash,w.MAX_PRIORITY),r.readyPromise().finally(()=>{var r;r=--e,a&&a(r,l),0===e&&n({totalImages:l})})}});return await c}async loadImageByHash(e){this.verbose&&(0,h.Lo)("image","loadImageByHash",{hash:e});let r=this.allImages.get(e);if(r)switch(r.state){case 4:case 5:case 6:case 7:return}this.setImageDownloadPriority(e,w.MAX_PRIORITY),await this.imageQueueEmptyPromise()}setImageMaxSize(e){this.imageMaxSize=e}setShouldUseCompressedTextures(r){e._shouldUseCompressedTextures=r}markImageUploading(e){this.pendingUploads.add(e)}markImageUploaded(e){this.pendingUploads.has(e)||(0,h.xi)("image","markImageUploaded called for unknown image",{imageHash:e}),this.pendingUploads.delete(e),this.uploadedImagesNeedingUrl.add(e),this.maybeResolveImagesUploaded()}startUploadingImage(e,r,n,a){if(this.pendingUploads.has(a))return;this.pendingUploads.add(a);let i=new w(a,0);i.state=4,this.allImages.set(a,i);let o=`/api/upnode/image?purpose=canvas&sha1=${a}&fileKey=${e}`,l=0;_.Ay.post(o,r,{retryCount:1/0,headers:{..._.Ay.defaults.headers,"Content-Type":n},rawBody:!0,uploadEvents:{loadstart:()=>{i.retries=l,l+=1}}}).then(e=>{if(200!==e.status){(0,h.x1)("image","unexpected status code from image upload",{hash:a,status:e.status},{reportAsSentryError:!0});return}(0,h.Lo)("image","uploaded new image",{hash:a}),this.pendingUploads.delete(a),s.Bko.imageUploadFinished(a,s.d8m.SUCCESS),i.state=5,this.uploadedImagesNeedingUrl.add(a),this.maybeResolveImagesUploaded()},e=>{let r;415===e.status?((0,h.x1)("image","image upload failed, removing invalid image",{hash:a}),r=s.d8m.UNSUPPORTED_MEDIA):r=s.d8m.OTHER_FAILURE,this.pendingUploads.delete(a),s.Bko.imageUploadFinished(a,r),this.maybeResolveImagesUploaded()})}pendingUploadStats(){let e=new Set;for(let r of this.pendingUploads){let n=this.allImages.get(r);n&&n.retries>0&&e.add(r)}return[this.pendingUploads,e]}async maybeResolveImagesUploaded(){if(0===this.pendingUploads.size){let e=Array.from(this.uploadedImagesNeedingUrl);this.uploadedImagesNeedingUrl.clear();for(let r=0;r<e.length;r+=this.SINATRA_BATCH_SIZE){let n=e.slice(r,r+this.SINATRA_BATCH_SIZE),a=await this.resolveImageUrls(n);for(let e of n){let r=a.s3_urls[e];if(r){let n=this.allImages.get(e);if(n)n.s3Path=r;else{let n=new w(e,0);n.s3Path=r,n.state=5,this.allImages.set(e,n)}}}}this.allImagesUploaded?.resolve()}}imageUploadPromise(){this.allImagesUploaded||(this.allImagesUploaded=(0,d.v)(),this.allImagesUploaded.promise.finally(()=>{this.allImagesUploaded=null}));let e=this.allImagesUploaded.promise;return this.maybeResolveImagesUploaded(),e}logDebugInfo(e){for(let r of e){let e=this.allImages.get(r),n=new Set;for(let e of Object.values(this.pendingImagesToRecord))for(let r of e)n.add(r);(0,h.Lo)("ImageManager","Blocking image info",{hash:r,state:e?e.state:"NO IMAGE",inIncoming:r in this.incomingImages,inQueue:null!=this.downloadQueue.find(r),inPending:r in this.pendingDownloads,inFinished:r in this.alreadyDownloaded,inPendingRecord:r in n})}let[r,n]=this.pendingUploadStats(),a=Array.from(this.incomingImages.values()).map(e=>e.hash).join(","),i=Array.from(this.pendingDownloads).join(","),o=Array.from(this.alreadyDownloaded).join(","),s=this.downloadQueue.debugString(),l=Array.from(r).join(","),c=Array.from(n).join(",");(0,h.Lo)("ImageManager","ImageManager debug info",{incomingImages:a,downloadQueue:s,pendingDownloads:i,alreadyDownloaded:o,pendingUploads:l,uploadBackoffs:c,pendingImagesToRecord:this.pendingImagesToRecord})}getDebugState(){let e=s.Bko.getImageResourceDebugInfo(),r=new Map;return e.forEach(e=>{r.set(e.hash,{...e,tsState:this.allImages.get(e.hash)?.state})}),this.allImages.forEach((e,n)=>{r.has(n)||r.set(n,{hash:n,tsState:e.state})}),r}static includeOutsideContents(e){return e.some(e=>!1===e.contentsOnly)}};L._shouldUseCompressedTextures=!1;let O=L,R=new class{constructor(){this.imageManager=new O}copyImagePermissions(e,r){return this.imageManager.recordImages(e,r)}copyImagePermissionsFromLibraryKey(e,r){return this.imageManager.recordImagesFromLibraryKey(e,r)}setImageDownloadPriority(e,r){this.imageManager.setImageDownloadPriority(e,r)}forceDownloadImage(e){this.imageManager.forceDownloadImage(e)}setMinimumImagePriority(e){this.imageManager.setMinimumImagePriority(e)}forgetImage(e){this.imageManager.forgetImage(e)}setImageDecodePending(e){this.imageManager.setImageDecodePending(e)}clearImageDecodePending(e,r){this.imageManager.clearImageDecodePending(e,r)}async downloadEmoji(e){return(await _.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"})).data}markImageUploading(e){this.imageManager.markImageUploading(e)}markImageUploaded(e){this.imageManager.markImageUploaded(e)}startUploadingImage(e,r,n,a){this.imageManager.startUploadingImage(e,r,n,a)}pendingUploadStats(){return this.imageManager.pendingUploadStats()}logDebugInfo(e){this.imageManager.logDebugInfo(e)}pauseImageDownloads(){this.imageManager.pauseImageDownloads()}resumeImageDownloads(){this.imageManager.resumeImageDownloads()}getSignedUrls(e){return this.imageManager.getSignedUrls(e)}getImageHostDomain(){return window.location.hostname}setExternalSource(e,r){this.imageManager.setExternalSource(e,r)}staticAssetWithPath(e){return(0,u.CZ)(e)}};function P(){return R.imageManager}async function D(e,r,n){if(!s.Bko.imageTypeDecodeSupported(r))throw Error(`Image type ${r} is not supported and cannot be decoded`);let a=await g.EC.decodeAsync(e,r,g.d$,g.d$,!0),i=await crypto.subtle.digest("SHA-1",e),o={width:a.width,height:a.height,compressedData:e,hash:new Uint8Array(i),bitmap:a.bitmap?a.bitmap:void 0,mimeType:r,rgba:a.rgba?a.rgba:new Uint8Array,name:n},l=g.EC.thumbnailSize(a.width,a.height),c=await g.EC.generateThumbnail(o,l.w,l.h),d=await crypto.subtle.digest("SHA-1",c.compressedData);return{fullResolution:o,thumbnail:{width:l.w,height:l.h,compressedData:c.compressedData,hash:new Uint8Array(d),bitmap:c.bitmap,mimeType:r,rgba:c.decompressedData,name:n}}}async function k(e,r){let n=!!O.includeOutsideContents(r);await P().loadAllImagesUnder([n?e.containingCanvas||"-1:-1":e.guid],s.MoD.NON_ANIMATED_ONLY,"plugins.loadImagesAndExport")}(0,o.c)(k)},409992:(e,r,n)=>{n.d(r,{ZI:()=>eD,c3:()=>eP}),n(411855);var a=n(429223),i=n(454040),o=n(868895),s=n(525383),l=n(5296),c=n(335985),d=n(372522),u=n(525071),m=n(935526),p=n(44508),h=n(177731),_=n(352638),g=n(797146),f=n(125279),E=n(141171),y=n(16530),b=n(999388),v=n(469102),T=n(266196),I=n(684068),S=n(190952),w=n(712830),A=n(415408),C=n(91114),N=n(499233),L=n(478404),O=n(721501),R=n(839536),P=n(945091),D=n(865648),k=n(120022),M=n(279037),F=n(212876),x=n(562419),U=n(283045),B=n(338581),V=n(335153),G=n(229525),H=n(337934),W=n(126491);n(805014);var K=n(219077),Y=n(923e3),$=n(353598),j=n(279207),z=n(770184),q=n(348119),Z=n(615780),X=n(931853),J=n(390497),Q=n(704728),ee=n(661865),et=n(400232),er=n(805869),en=n(732431),ea=n(638157),ei=n(721935),eo=n(809586),es=n(206186),el=n(963563),ec=n(713122),ed=n(342811),eu=n(309620),em=n(396090),ep=n(805538),eh=n(394757),e_=n(297745),eg=n(457272),ef=n(338659),eE=n(81297),ey=n(507721),eb=n(403203),ev=n(527920),eT=n(952545),eI=n(91521),eS=n(593865),ew=n(607055),eA=n(577777),eC=n(416799),eN=n(733715),eL=n(964854),eO=n(199409),eR=n(969537);Q.A,a.V,er.A,i.V,ee.A,o.c,ew.A,s.i,ew.A,s.i,ei.A,a.V,ec.A,l.U,ed.A,c.R,eu.A,d.A,em.A,u.N,ep.A,m.n,eE.A,p.y,eA.A,a.V,h.p,_.E,eC.A,a.V,eN.A,a.V,eL.A,a.V,eO.A,a.V,$.A,a.V,j.A,a.V,z.A,a.V,q.A,a.V,Z.A,a.V,X.A,a.V,en.A,a.V,ea.A,a.V,eo.A,g.p,et.A,f.K,ey.A,E.N,Y.A,y.m,eh.A,b.P,es.A,v.a,J.A,T.O,es.A,v.a,eT.A,I.i,eT.A,S.A,el.A,w.r,eb.A,a.V,e_.A,A.H,C.K,ef.A,A.H,C.K,eI.A,K.V,C.K,eS.A,K.y,C.K,eg.A,N.O,ef.A,N.O,N.O,eR.A,L.F,O.U,R.m,P.m,D.b,k.n,E.N,M._,F.U,x.a,U.E,B.e,V.U,G.V,H.x,W.h,ev.A;let eP=new Path2D("M5 0C2.23857 0 0 2.23857 0 5V35C0 37.7614 2.23857 40 5 40H35C37.7614 40 40 37.7614 40 35V5C40 2.23857 37.7614 0 35 0H5ZM16.2875 29.6971L21.2875 9.69726L23.7127 10.3035L18.7127 30.3034L16.2875 29.6971ZM11.6163 14.1165L6.61626 19.1165L5.73251 20.0005L6.61626 20.8843L11.6163 25.8843L13.384 24.1165L9.268 20.0005L13.384 15.8843L11.6163 14.1165ZM28.384 14.1165L33.384 19.1165L34.268 20.0005L33.384 20.8843L28.384 25.8843L26.6163 24.1165L30.7326 20.0005L26.6163 15.8843L28.384 14.1165Z"),eD=40},192191:(e,r,n)=>{n.d(r,{fG:()=>b});var a=n(913974),i=n(573702),o=n(171929),s=n(732004),l=n(991022),c=n(135844),d=n(849294),u=n(640985),m=n(585164),p=n(611299),h=n(470653),_=n(403453),g=n(26732),f=n(491732);let E={ArrangeAsListBehavior:l.b,ConnectorToolBehavior:c.a,TableBehavior:h.H,TemplatePreviewBehavior:g.Z,VideoBehavior:f.s,SectionPresetBehavior:p.V,DevHandoffAnnotationsMouseBehavior:i.l,ResponsiveSetBehavior:u.j,SitesBlockBehavior:m.Y,SlideDeckAddBehavior:o.w,SlideDeckReorderRowBehavior:s.M,CooperGridAddBehavior:a.u,CooperGridReorderRowBehavior:a.G,FrameQuickAddBehavior:d._};class y{createMouseBehavior(e){if(e in E)return new E[e](e);throw Error("unexpected mouse behavior name: "+e)}tableUiReorderHandleHoveredLength(){return _.Ro.reorderHandleHoveredLength}tableUiAddButtonHoveredRadius(){return _.Ro.addButtonHoveredRadius}}function b(){new y}},715265:(e,r,n)=>{n.d(r,{_p:()=>_});var a=n(615816),i=n(841962),o=n(866905),s=n(375887),l=n(854386),c=n(696441),d=n(407498),u=n(254903),m=n(51004),p=n(41893);class h{constructor(e){this.getFullscreenMenuItem=e=>{let r=this.store?.getState();if(!r){console.warn("[CustomKeyboardShortcuts] no state found");return}if("fullscreen"!==r.selectedView.view){console.warn("[CustomKeyboardShortcuts] attempted to dispatch an action outside of fullscreen");return}let a=(0,c.b)(r),o=!!(0,i.Ay)().campfire_model_enabled,s=(0,l.V)(r,{isRecovery:!1,isUserInLimitedSpace:!1,fullscreenMemoryWarningLevel:d.Wy.SAFE,unreadCommentCount:void 0,pluginAndWidgetMenuArgs:a,isPublishingModalDisabled:!1,isBillingRemodelEnabled:o}),u=n(937767).M({isReadOnly:r.mirror.appModel.isReadOnly,extensionMenuProps:a,includeDisabled:!1});return new m.xm(r.mirror.appModel,r.selectedView,[...s,...u]).getItem(r.mirror.appModel,e)},this.getCallback=e=>{let r=this.getFullscreenMenuItem(e);return r&&r.callback&&this.store?.dispatch?(console.log("[CustomKeyboardShortcut] found action and running callback",{menuItem:r,itemDisplayText:e}),()=>r.callback((0,s.Dz)(r),r.args,this.store.dispatch)):(console.warn("[CustomKeyboardShortcut] could not find item for given action",{menuItem:r,itemDisplayText:e}),null)},this.store=e.store}getCustomKeyboardShortcuts(){if(!this.store||!u.nt.customKeyboardShortcuts.getValue())return[];let e=(0,a.Uc)(),r=[];return Object.entries(e).forEach(([e,{type:n,action:i}])=>{let o;try{o=this.getKeyboardShortcutFromText(e,null)}catch(e){o=null}let s=a.iZ.get(n);if(null===o||void 0===s){console.warn("[CustomKeyboardShortcuts] unable to parse shortcut or shortcutActionType",{actionType:s,text:e});return}r.push({keyboardShortcut:o,type:s,action:i})}),console.log("[CustomKeyboardShortcuts] received request to fetch custom keyboard shortcuts",{shortcutsStorage:e,shortcuts:r}),r}dispatchAction(e){console.log("[CustomKeyboardShortcuts] received request to dispatch",{action:e});let r=this.getCallback(e);return!!r&&(r(),!0)}getDisplayStringFromKey(e){let r=p.y.isApple();switch(e.toUpperCase()){case"'":return"\u2032";case"-":return"\u2013";case"ESCAPE":return"\u238B";case"ENTER":return"\u21A9";case"RETURN":return"\u23CE";case"TAB":return"\u21E5";case"LEFT":return"\u2190";case"RIGHT":return"\u2192";case"UP":return"\u2191";case"DOWN":return"\u2193";case"DELETE":return"\u2326";case"BACKSPACE":return"\u232B";case"CAPS LOCK":return"\u21EA";case"CONTROL":return r?"\u2303":"Ctrl";case"ALT":case"RIGHTALT":return r?"\u2325":"Alt";case"SHIFT":return r?"\u21E7":"Shift";case"META":return r?"\u2318":p.y.isWindows()?"Win":"Meta";default:return e}}getKeyboardShortcutFromText(e,r){let n=o.NF,a=0,i=e.split("+");for(let e of(i.length>0&&""===i[i.length-1]&&(i.pop(),i.length>0&&(i[i.length-1]=i[i.length-1]+"+")),i)){if(""===e)continue;let r=o.cy[e.toUpperCase()];if(e===o.NF||r&&(a&r)>0)return null;if(r&&(r&o.QI)!=0)a|=r;else{if(n!==o.NF)return null;n=e}}return n===o.NF&&0===a?null:{key:n,modifierMask:a,originalText:e,displayName:r}}getTextFromKeyboardShortcut(e){let r=p.y.isApple(),n=(e.displayName?this.getKeyboardShortcutFromText(e.displayName,null):null)??e,a=[];return n.modifierMask&o.pP&&a.push(this.getDisplayStringFromKey("Control")),n.modifierMask&o.xC&&a.push(this.getDisplayStringFromKey("Alt")),n.modifierMask&o.IL&&a.push(this.getDisplayStringFromKey("Shift")),n.modifierMask&o.No&&a.push(this.getDisplayStringFromKey("Meta")),n.modifierMask&o.eb&&a.push(this.getDisplayStringFromKey("RightAlt")),n.key!==o.NF&&a.push(this.getDisplayStringFromKey(n.key)),r?a.join(""):a.join("+")}}function _(e){new h({store:e})}},972019:(e,r,n)=>{n.d(r,{$K:()=>o,F0:()=>g,Fx:()=>m,GN:()=>N,QI:()=>E,Qu:()=>k,RG:()=>O,Te:()=>l,ax:()=>d,cQ:()=>S,ck:()=>A,db:()=>P,hu:()=>b,lR:()=>T,uN:()=>h}),n(411855),n(188507),n(805014),n(841962),n(524940);var a=n(927150);n(827473),n(797187);let{action:i,reducer:o}=(0,a.B5)("SYNC_PUBLISHABLE_SYMBOLS",[]),{action:s,reducer:l}=(0,a.B5)("SYNC_PUBLISHABLE_STATE_GROUPS",[]),{action:c,reducer:d}=(0,a.B5)("SYNC_PUBLISHABLE_STYLES",[]),{action:u,reducer:m}=(0,a.B5)("SYNC_PUBLISHABLE_MODULES",[]),{action:p,reducer:h}=(0,a.B5)("SYNC_SUBSCRIBED_SYMBOLS",[]),{action:_,reducer:g}=(0,a.B5)("SYNC_SUBSCRIBED_SYMBOLS_ON_CURRENT_PAGE",[]),{action:f,reducer:E}=(0,a.B5)("SYNC_SUBSCRIBED_STATE_GROUPS",[]),{action:y,reducer:b}=(0,a.B5)("SYNC_SUBSCRIBED_STATE_GROUPS_ON_CURRENT_PAGE",[]),{action:v,reducer:T}=(0,a.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES",[]),{action:I,reducer:S}=(0,a.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES_ON_CURRENT_PAGE",[]),{action:w,reducer:A}=(0,a.B5)("SYNC_INDIRECTLY_SUBSCRIBED_STYLES",[]),{action:C,reducer:N}=(0,a.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES",[]),{action:L,reducer:O}=(0,a.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]),{action:R,reducer:P}=(0,a.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES",[]),{action:D,reducer:k}=(0,a.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[])},496962:(e,r,n)=>{n.d(r,{LC:()=>o});var a=n(115304);class i{updateViolationsForNodes(e,r){let n=(0,a.r)();return n?n.updateViolationsForNodes(e,r):Promise.reject()}}function o(){new i}},138053:(e,r,n)=>{n.d(r,{F4:()=>h,Yc:()=>b,aW:()=>y,bM:()=>f,cF:()=>d,dn:()=>p,le:()=>E,o_:()=>c});var a=n(805014),i=n(163773),o=n(841962),s=n(653798),l=n(366172);let c=1048576,d=0x40000000,u=(0,o.kc)().wasm_4gb&&i.Ay.location&&"1"===new URLSearchParams(i.Ay.location.search).get("wasm-4gb"),m=i.Ay.location&&"true"===new URLSearchParams(i.Ay.location.search).get("recovery"),p=u?a.rCR.MAXIMUM:m?a.rCR.RECOVERY:a.rCR.DEFAULT;function h(e){let r=a.hMR.setHeapMemoryMode(e);return(0,s.Lo)("memory",`setHeapMemoryMode(${e}) ${r?"success":"failed"}`),r}let _=null,g=null;function f(e,r){"fullscreen-app"===e?_=r:g=r}function E(e){return"fullscreen-app"===e?_?.()??0:"prototype-lib"===e?g?.()??0:_?.()||g?.()||0}function y(){if(window.performance){let e=window.performance.memory;if(e)return e.usedJSHeapSize}return 0}function b(){return(a.hMR?.getTotalUsedHeapMemory()||0)+l.Y5.memorySpikeOnFileLoadBytes()}(0,o.kc)().memory_profiling_local&&(0,o.b5)()&&(window.startMemoryProfile=async()=>{let e=await window.showSaveFilePicker(),r=await e.createWritable({keepExistingData:!0});window.memoryProfileOperationsWritable=r}),(0,o.b5)()&&(window.getTopMemoryFunctions=()=>{let e=a.YyC.getAll(),r=new Map,n=new Map,i=new Map;for(let o of e)o.includes("allocCallCount")?r.set(o,a.YyC.getCount(o)):o.includes("allocMaxDelta")?n.set(o,a.YyC.getCount(o)):o.includes("allocTotalDelta")&&i.set(o,a.YyC.getCount(o));console.log("call count events",Array.from(r).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("max delta events",Array.from(n).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("total delta events",Array.from(i).sort((e,r)=>r[1]-e[1]).slice(0,10))},window.resetPerformanceEventCounters=()=>{a.YyC.resetAll()})},859418:(e,r,n)=>{n.d(r,{qZ:()=>p});var a=n(805014),i=n(875877),o=n(76265),s=n(837982),l=n(553362),c=n(220970),d=n(216448),u=n(366172);class m{setMentionsTypeaheadQuery(e){i.atomStore.set(d.h1,e)}clearMentionsTypeaheadQuery(e,r){if(e){let e=i.atomStore.get(d.h1),n=i.atomStore.get(d.LQ)?.index||null,a=i.atomStore.get(d.wm);(0,c.W)(e,r,n,a)}i.atomStore.set(d.h1,null),this.endSearchSession()}isShowingMentionsTypeaheadResults(){let e=i.atomStore.get(d.LQ);return!!e?.mentions?.length}setMentionsTypeaheadTargetRect(e,r,n){i.atomStore.set(d.MX,{x:e,y:r,height:n,width:0})}startSearchSession(){let e=(0,s.MZ)();return i.atomStore.set(d.wm,e),e}endSearchSession(){let e=i.atomStore.get(d.wm);return i.atomStore.set(d.wm,""),e}showVisualBellForPastedMentions(e,r){u.Y5.dispatch(l.F.enqueue({message:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions",{numUsers:r}),button:{text:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions_action"),action:()=>{a.fp8.allowSendNotificationsForPastedMentions(e)}}}))}}function p(){new m}},6428:(e,r,n)=>{n.d(r,{LZ:()=>i}),n(411855);var a=n(805014);n(336427),n(511002);let i=new class{isMinimizedInUI3(){var e,r;return!!a.Ez5&&(e=a.Ez5.uiState().leftPanelCollapsedUI3.getCopy(),r=!a.Ez5.uiState().showPropertiesPanel.getCopy(),e||r)}}},963993:(e,r,n)=>{n.d(r,{Br:()=>k,D$:()=>b,Dh:()=>y,G9:()=>w,GL:()=>I,Hr:()=>E,NT:()=>D,T8:()=>F,Uc:()=>L,XP:()=>H,aB:()=>R,aY:()=>P,bw:()=>O,gX:()=>N,hq:()=>C,i:()=>S,iT:()=>A,n_:()=>G,tJ:()=>v,wr:()=>T});var a=n(229808),i=n(846288),o=n(511445),s=n(805014),l=n(245459),c=n(777535),d=n(789022),u=n(281935),m=n(403008),p=n(753141),h=n(885123);n(754807);var _=n(366172),g=n(923219),f=n(756044);let E=l.dI(l.Hr);function y(e){s.Egt.addToSelection(e)}function b(e){s.Egt.removeFromSelection(e)}function v(e,r=!0){s.Egt.replaceSelection(e,r)}function T(){s.Egt.clearSelection()}function I(e,r){s.Egt.selectNodesInRange(e,r)}function S(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.name=r)}function w(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isSymbolPublishable=r)}function A(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isPublishable=r)}function C(e){s.Egt.expandUpToRoot(e)}function N(e){s.glU?.updateAppModel(e)}function L(e){N({hoveredNode:e})}function O(e){N({devHandoffCodeLanguage:e})}function R(e){N({devHandoffPreferences:e})}function P(){return s.Ez5?.propertiesPanelState()?.propertiesPanelTab}function D(e){return P()?.set(e)}function k(e){N({activeTextReviewPlugin:e})}let M=["x","y","width","height","minWidth","minHeight","maxWidth","maxHeight","angle","canBecomeFrame","canBecomeGroup","canBecomeSection","aspectRatioLockToggled","miterLimitAngle","terminalCap","dashCap","availableOTFeaturesForSelection","availableOTFeaturesForFonts","toggledOnOTFeaturesForSelection","toggledOffOTFeaturesForSelection","mixedStateOTFeaturesForSelection","detectedList","destinationOverlayPositionType","destinationOverlayBackgroundInteraction","destinationOverlayBackgroundType","destinationOverlayBackgroundColor","name","numSelected","numSelectedByType","arcStart","arcSweep","arcRadius","fontFamily","previewFontFamily","fontStyle","fontVariations","intrinsicLineHeight","textContent","textPathStartForward","prototypeInteractions","prototypeInheritedInternalInteractions","isValidPrototypingSourceSelected","selectionIsHyperlink","whiteboardControls","whiteboardColor","whiteboardDividedSwatchColors","whiteboardStrokeColor","whiteboardFontFamilies","whiteboardFontSizes","whiteboardTextAlignHorizontal","whiteboardTextAlignVertical","whiteboardStrokeStyle","whiteboardNumSelected","whiteboardNumSelectedByType","whiteboardSelectionCanSummarize","whiteboardSelectionCanCluster","whiteboardSelectionCanShowAiOnboardingBadge","whiteboardStickyAIControlsShown","whiteboardMindmapAIControlsShown","nodeSelectedValidForQuickAdd","whiteboardStrokeWeight","washiTapePaint","washiTapePaintIsMixed","connectorLineStyleForSelection","connectorStartCapForSelection","connectorEndCapForSelection","connectorTextBackgroundTransparent","codeBlockLanguage","codeBlockTheme","leftEndCap","rightEndCap","maxStrokeWeight","shapeWithTextTypeForSelection","shapeWithTextFillType","shapeWithTextOpacityOverride","platformShapeFillType","platformShapeOpacityOverride","authorVisibility","imageAspectRatio","imageHasNoStroke","imageOverlayPaint","sectionContentsHidden","isSection","variableConsumptionInfo","borderTopVisible","borderRightVisible","borderBottomVisible","borderLeftVisible","borderSharedWeight","stackCounterSpacing","gridRowCount","gridColumnCount","directlySubscribedAssetKeys","numVideosSelected","videoAutoplay","videoMediaLoop","videoMuted","videoShowControls","themeId","objectAnimationType","objectAnimationDuration","objectAnimationPhase","shadow","blur","htmlWidgetYouTubeVideoURL","htmlWidgetGoogleMapLocation","htmlWidgetGoogleMapZoom","htmlWidgetMailchimpFormURL","htmlWidgetMailchimpInputPlaceholder","htmlWidgetMailchimpSubmitButtonLabel","htmlWidgetMailchimpLayoutIsVertical","htmlWidgetGenericEmbedUrl","htmlWidgetGenericEmbedCodeType","htmlWidgetGenericEmbedIframeHtml","link","appear","hover","press","focus","scrollParallax","scrollTransform","cursor","marquee","code"];function F(e,r,n,o,l){d.rH.start("update-selection-properties");try{!function(e,r,n,o,l){let c={...e},d=function(e){let r=Object.create(null);for(let n of M)if(n in e){let a=e[n];a!==g.oV&&(r[n]=a),delete e[n]}return r}(c),u=function(e){let r={guid:{sessionID:0,localID:0}};for(let n in e){let a=e[n];a!==g.oV&&(r[n]=a)}return r}(c);if(o=function(e){switch(e){case f.zk.YES:case f.zk.YES_FORCE_TRACKING_AS_EDIT:case f.zk.YES_WITHOUT_TRACKING_AS_EDIT:return f.zk.YES;default:return f.zk.NO}}(o),r?.guid){if(d){let e=d.fontFamily&&d.fontStyle;if((0,i.KF)(!e,"UI should never simultaneously update font family and style"),d.fontFamily&&r.fontStyle&&(u.fontName={family:d.fontFamily,style:r.fontStyle,postscript:""}),r.fontFamily&&d.fontStyle&&(u.fontName={family:r.fontFamily,style:d.fontStyle,postscript:""}),d.fontVariations&&(u.fontVariations=d.fontVariations),d.variableConsumptionInfo?.variableConsumptionMap){let e=d.variableConsumptionInfo.variableConsumptionMap;u.variableConsumptionMap=(0,f.w3)(e)}}let e=a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.glU?.updateSelectedStyleProperties(e,n,o===f.zk.YES),(0,i.KF)(null!=r.styleType,"unknown style type"),x(r.styleType)}else{let e=a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.Egt.updateSelectionProperties(d,n,l,o===f.zk.YES,e)}}(e,r,n,o,l)}catch(e){throw e}finally{d.rH.stop("update-selection-properties")}}let x=(0,o.s)(e=>{(0,c.sx)("Style Edited",{styleType:e})},500),U=Object.create(null);var B=(e=>(e[e.SceneGraph=0]="SceneGraph",e[e.AppModel=1]="AppModel",e[e.Selection=2]="Selection",e[e.SelectionProperties=3]="SelectionProperties",e))(B||{});let V=new Set([0,1,2,3]);function G(e=V){e.has(0)&&_.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",W),e.has(2)&&(_.Y5.fromFullscreen.on("selection:addSelectors",Y),_.Y5.fromFullscreen.on("selection:removeSelectors",$),_.Y5.fromFullscreen.on("selection:replaceSelectors",j)),e.has(1)&&_.Y5.fromFullscreen.on("updateAppModel",z),e.has(3)&&_.Y5.fromFullscreen.on("selectionPropertiesUpdate",q)}function H(){let e=U;return U=Object.create(null),e}function W(e){(0,i.KF)(!U.invalidateSceneGraph,"We should get at most one sceneGraphMirrorUpdate per frame. We got two."),U.invalidateSceneGraph={rebuildRows:!e||e.rebuildRows}}function K(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24}function Y(e){(0,i.KF)(!U.selection?.replace,"addSelectors and replaceSelectors called on the same frame"),U.selection||=Object.create(null),U.selection.add||=Object.create(null),U.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=K(r,e),a=K(r,e+4),i=l.dI({sessionID:n,localID:a});U.selection.add[i]=!0}}function $(e){(0,i.KF)(!U.selection?.replace,"removeSelectors and replaceSelectors called on the same frame"),U.selection||=Object.create(null),U.selection.remove||=Object.create(null),U.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=K(r,e),a=K(r,e+4),i=l.dI({sessionID:n,localID:a});U.selection.remove[i]=!0}}function j(e){(0,i.KF)(!U.selection?.add,"addSelectors and replaceSelectors called on the same frame"),(0,i.KF)(!U.selection?.remove,"removeSelectors and replaceSelectors called on the same frame"),U.selection||=Object.create(null),U.selection.replace||=Object.create(null),U.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=K(r,e),a=K(r,e+4),i=l.dI({sessionID:n,localID:a});U.selection.replace[i]=!0}}function z({changes:e,shouldIgnoreUserPrefs:r}){if(u.eD){let r;let n={},a={},i="actionEnabled__";for(let r of Object.keys(e))if(r.startsWith(i))n[r.substr(i.length)]=e[r].value;else{let n=(0,m.m)(r);if(void 0!==n){let i=e[r].value;for(let{name:e,propertyValue:r}of n.actions)a[e]=i===r}}e.keyboardShortcuts&&(r=(0,p.K)(e.keyboardShortcuts.value));let o=Object.keys(n).length>0,s=Object.keys(a).length>0,l=void 0!==r;(o||s||l)&&u.eD.updateFullscreenMenuState({actionEnabledState:o?n:void 0,actionCheckedState:s?a:void 0,actionShortcuts:r})}let n=Object.create(null),a=Object.create(null);for(let i in e)n[i]=e[i].value,a[i]=r?.[i];U.appModelChanges={...U.appModelChanges,...n},U.appModelChangesShouldIgnoreUserPrefs={...U.appModelChangesShouldIgnoreUserPrefs,...a}}function q(e){let r=e.buffer&&e.buffer.length>0?a.w.decodeMessage(e.buffer):null;delete e.buffer,(0,i.KF)(!U.selectionProperties,"Updating selectionProperties multiple times on a frame"),U.selectionProperties={message:r,derivedProperties:e}}},853770:(e,r,n)=>{n.d(r,{DI:()=>u,Ds:()=>g,e8:()=>m,vS:()=>p});var a=n(805014),i=n(885123),o=n(190500);let s=!1,l=!1,c=!1,d=!1;function u(){l=!0,h()}function m(){s=!1,l=!1,c=!1,d=!1}function p(e,r){let n=i.D.getState(),a=n.openFile?.key;a&&!d&&((0,o.ds)("Show Missing Fonts Popover",a,n,{fontListLoaded:e,counts:r,timeNow:performance.now()}),d=!0)}function h(){if(s&&l&&!c){let e=i.D.getState(),r=new Set(Object.values(e.fonts).map(e=>Object.values(e)).flat().map(e=>e.source)),n=e.openFile?.key,s=e.figFileDuplicatedFromHubFile,l=!1;void 0!==n&&void 0!==s&&(l=null!=s[n]),(0,o.ds)("has_missing_font",n,e,{has_google_fonts:r.has(a.jXp.GOOGLE),has_local_fonts:r.has(a.jXp.LOCAL),has_shared_fonts:r.has(a.jXp.SHARED),is_community_duplicated_file:l}),c=!0}}class _{markMissingFontScannerAsComplete(){s=!0,h()}}function g(){new _}},644392:(e,r,n)=>{n.d(r,{AW:()=>f,Ak:()=>I,Cd:()=>E,Ff:()=>b,IL:()=>C,Ki:()=>S,LD:()=>g,PV:()=>w,W5:()=>y,WA:()=>N,Xk:()=>A,Xl:()=>L});var a=n(805014);n(245954),n(841962);var i=n(875877),o=n(653798),s=n(399991),l=n(366172),c=n(317384),d=n(401562),u=n(165270);let m=null,p=0,h=!1,_=!1;function g(e){switch(e){case a.kul.UNJOINED:return"unjoined";case a.kul.UNJOINED_FROM_ERROR:return"unjoined_from_error";case a.kul.UNJOINED_FROM_VALIDATION_FAILURE:return"unjoined_from_validation_failure";case a.kul.GOT_SCHEMA:return"got_schema";case a.kul.JOINING_INITIAL_LOAD:return"joining_initial_load";case a.kul.JOINING_RECONNECT:return"joining_reconnect";case a.kul.JOINING_RECONNECT_AWAITING_QUERY_REPLY:return"joining_reconnect_awaiting_query_reply";case a.kul.JOINED:return"joined";case a.kul.SHOULD_UPGRADE:return"should_upgrade";case a.kul.UPGRADING:return"upgrading";case a.kul.WAITING_FOR_RELOAD:return"waiting_for_reload";case a.kul.DETACHED:return"detached";default:return"unknown"}}function f(){_||(_=!0,setInterval(()=>l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!1),250),window.addEventListener("online",()=>{navigator.onLine&&l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!0)}),window.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!0)}))}function E(e){m||(m=function(){try{let e=new Blob(["("+function(){onmessage=e=>setTimeout(()=>self.postMessage(""),e.data)}+")()"],{type:"text/javascript"}),r=new Worker(URL.createObjectURL(e));return(e,n)=>{r.onmessage||(r.onmessage=()=>{r.onmessage=null,e()},r.postMessage(n))}}catch(e){return console.error(e),(e,r)=>{setTimeout(e,r)}}}()),p=e,h||function e(){p&&(h=!0,m(function(){h=!1,p&&a.h3O.flush(),e()},p))}()}function y(e){let r=I(),n=S(r);return a.h3O.startLoadingAllPages(r,e),n.then(()=>{i.atomStore.set(c.nc,!1)}),n}let b=(0,d.n)(()=>a.h3O.isIncrementalSession()||a.h3O.isValidatingIncremental()),v=1,T=new Map,I=()=>v++;function S(e){return new Promise((r,n)=>{T.set(e,[r,n])})}function w(e){let r=T.get(e);if(r){let[n,a]=r;n(),T.delete(e)}}function A(){T.forEach((e,r)=>{let[n,a]=e;a()}),T.clear()}function C(e,r,n=a.DPQ.CONTAINING_PAGE){(0,s.nl)();let i=I(),o=S(i),l=n===a.DPQ.PLUGIN;return a.h3O.subscribeToContainingPage__DO_NOT_USE_DIRECTLY(e,i,r,l),o}function N(e,r,n=a.DPQ.CONTAINING_PAGE){if(0===e.length)return Promise.resolve();(0,s.nl)();let i=I(),o=S(i),l=n===a.DPQ.PLUGIN;return a.h3O.subscribeToContainingPages__DO_NOT_USE_DIRECTLY(e,i,r,l),o}function L(e){let r=()=>{let n=I();return new Promise(async(r,i)=>{e.delete("0:0"),(0,o.Lo)("Autosave",`Requesting dependencies for ${e.size} nodes while loading incrementally`,void 0,{logToConsole:a.NUh.ALWAYS}),await (0,u.oJ)(a.kul.JOINED),T.set(n,[r,i]),a.h3O.autosaveSubscribeToContainingPages(e,n)}).catch(()=>r())};return r()}},619107:(e,r,n)=>{n.d(r,{EE:()=>o,Om:()=>l,lB:()=>s}),n(411855),n(109388);var a=n(805014);n(245954);let i={};function o(e,r,n){return i[e]=n,a.glU.addNodePositionSubscription(e,r)}function s(e){delete i[e],a.glU.removeNodePositionSubscription(e)}function l(e,r){let n=i[e];n&&n(r)}},212507:(e,r,n)=>{n.d(r,{$P:()=>I,Bc:()=>y,dh:()=>S,i:()=>b,uS:()=>v}),n(411855),n(188507);var a=n(805014);n(851169);var i=n(245459),o=n(245954),s=n(841962),l=n(553362),c=n(939094);n(736041);var d=n(763575);n(916348),n(754807);var u=n(569161);n(353428),n(366172),n(963993),n(644392);var m=n(695024);n(427494);var p=n(407498);n(176160),n(314540);var h=n(313449),_=n(620552),g=n(289765),f=n(773283);n(487388),n(324225);var E=n(765273);function y(e){return e.match(/^\s+$/)?null:e.match(/^[-\u2013\u2014\*\s]+([^-\u2013\u2014\*]+?)[-\u2013\u2014\*\s]*$/)}function b(e,r){if(!e)return!1;let n=!!y(r),a=e.parentNode?.childrenNodes.find(r=>r?.guid!==e.guid&&r?.isPageDivider&&!!y(r?.name))!==void 0;return!!r.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/)||((0,s.kc)().ce_page_separators_titles||a)&&!(0,s.O_)()&&n}function v({openFile:e,loadedPageNode:r,pageName:n}){return!!(!(!(0,s.kc)().ce_page_separators||!r||!e||(0,h.KI)(e))&&b(r,n))&&r?.childCount===0}n(574431);let T=0;async function I(e,r,n,s,h,g,y,b,v,I){let S;if(I&&(0,c._$)(s,I,"overview_set_current_page"),e===r)return;let w=performance.now(),A=T+=1;g("action_page_switch_initiated",{pageSwitchId:T,oldPageNodeId:r,newPageNodeId:e,isIncremental:a.h3O.isIncrementalSession(),isAlreadyLoaded:h,currentNodeCount:a.CeL?.getFileNodeCount()},{forwardToDatadog:!0});let C=new Promise(e=>{S=e});a.Ez5.currentPageState().requestedPageChange.set(e),requestAnimationFrame(()=>{(0,u.J)(async()=>{if(await (0,o.UN)().setCurrentPageFromNodeAsync(e),r!==e){let o=(0,f.vw)(n),c=(0,p.P3)()>=75,u=c?new Set:n.fetchedPageIds||new Set;if(o&&(c&&s((0,d.EB)({fetchedPageIds:u})),s((0,d.SR)({isLoadingPage:!0})),s((0,f.yH)({version:o,currentPageNodeId:e,fetchedPageIds:u,eventType:"INCREMENTALLY_LOAD_NEW_PAGE"}))),v&&y&&b){let r=a.glU.navigateToFirstVisibleOrClosestChangeForPage(e);r===i.AD?s(l.F.dequeue({matchType:"view_changes"})):(a.Egt.setSelectedNodeAndCanvas(r,!0),y((0,m.QZ)({nodeId:r,...E.ob}),E.kh),b(r))}_.F.trackFromFullscreen("action_page_switch",{oldPageNodeId:r,newPageNodeId:e,pageSwitchIdForTracking:A,duration:performance.now()-w,currentNodeCount:a.CeL?.getFileNodeCount()},!0)}a.Ez5.currentPageState().requestedPageChange.set(""),S()})}),await C}function S(e=!0){return(0,g.Fk)(r=>{if(!e)return"0:1";let n=r.getCurrentPage();return n?n.guid:"0:1"})}},357614:(e,r,n)=>{n.d(r,{E3:()=>C,JX:()=>k,Lt:()=>B,N9:()=>O,OO:()=>M,Ou:()=>w,Tm:()=>F,XE:()=>P,Z3:()=>D,bn:()=>A,c4:()=>G,iC:()=>V,n_:()=>U,qg:()=>R,rC:()=>E,sb:()=>N,x$:()=>S,y7:()=>L});var a=n(229808),i=n(846288),o=n(236891),s=n(269685),l=n(805014),c=n(339185),d=n(689136),u=n.n(d),m=n(230208),p=n(885123),h=n(190500),_=n(366172),g=n(417370),f=n(923219);let E={r:196/255,g:196/255,b:196/255,a:1},y=[{position:0,color:{r:1,g:1,b:1,a:1}},{position:1,color:{r:1,g:1,b:1,a:0}}],b=y.map(g.Ug),v=e=>{let r=c.s.identity();return r.translate(.5,.5),e&&(T(e.leftEndCap)||T(e.rightEndCap))&&(e.angle>=90||e.angle<-90)?r.rotate(Math.PI):!e||e.height>0&&e.width/e.height<=3?(r.rotate(-Math.PI/2),e&&(e.angle<-45&&e.angle>=-135?r.rotate(Math.PI/2):e.angle<-135||e.angle>135?r.rotate(Math.PI):e.angle>45&&e.angle<=135&&r.rotate(-Math.PI/2))):(e.angle>45||e.angle<-135)&&r.rotate(Math.PI),e&&e.hasReflection&&r.rotate(Math.PI),r.translate(-.5,-.5),r.toFigMatrix()};function T(e){if(!e)return!1;switch(e){case"ARROW_LINES":case"ARROW_EQUILATERAL":case"TRIANGLE_FILLED":case"CIRCLE_FILLED":case"DIAMOND_FILLED":return!0;case"ROUND":case"SQUARE":case"NONE":case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return!1}}let I=null;function S(e){if(!A(e.type))return null;if(0===e.stops.length){let r=p.D.getState();(0,h.ds)("zero_stop_gradient_detected",r.openFile?.key,r),e.stops.push({color:m.FN,position:0})}return e}function w(e){return N(e.type)?e:null}function A(e){return null!=e&&-1!==["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].indexOf(e)}function C(e){return null!=e&&-1!==["IMAGE","VIDEO"].indexOf(e)}function N(e){return null!=e&&"SOLID"===e}function L(e){return"IMAGE"!==e.type&&"VIDEO"!==e.type?null:e}function O(e){return!e||(0,f.gl)(e)?null:e.map(L).filter(o.Vq)}function R(e){return Array.from(e.hash).map(e=>(e<16?"0":"")+e.toString(16)).join("")}function P(e){return"PATTERN"!==e.type?null:e}function D(e){return"NOISE"!==e.type?null:e}function k(e){return"CENTER"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_CENTER:"START"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_LEFT:"END"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_RIGHT:"CENTER"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_CENTER:"START"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_LEFT:"END"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_RIGHT:"CENTER"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_CENTER:"START"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_LEFT:"END"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_RIGHT:l.eVK.TOP_LEFT}function M(e){switch(e){case l.eVK.TOP_LEFT:return{horizontalAlignment:"START",verticalAlignment:"START"};case l.eVK.TOP_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"START"};case l.eVK.TOP_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"START"};case l.eVK.MIDDLE_LEFT:return{horizontalAlignment:"START",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"CENTER"};case l.eVK.BOTTOM_LEFT:return{horizontalAlignment:"START",verticalAlignment:"END"};case l.eVK.BOTTOM_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"END"};case l.eVK.BOTTOM_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"END"}}}let F=new class{constructor(){this.clearCache=e=>{null!=e?delete this.cache[e]:this.cache={}},this.getId=(e,r,n)=>`${n}-${r}-${e}`,this.initPaint=(e,r,n,a,i,o)=>this.initPaintWithDefaultImagePaint(e,r,n,a,I,o??!1,i),this.getPaintStopsAndStopsVar=(e,r,n,a)=>{let i=a?[{position:0,color:n},{position:1,color:e}]:[{position:0,color:e},{position:1,color:n}],o=i.map(g.Ug);return r&&(o[a?1:0].colorVar=r),{stops:i,stopsVar:o}},this.initPaintWithDefaultImagePaint=(e,r,n,a,i,o,s)=>{let l={type:e,opacity:1,visible:!0,blendMode:"NORMAL"};if("SOLID"===e?l.color=r:A(e)?(l.stops=y,l.stopsVar=b,l.transform=v(s)):C(e)&&i&&("VIDEO"===e?this.transferVideoAttributes(i,l):this.transferImageAttributes(i,l)),!n)return l;let c=this.cachePaint(n,a);if(this.transferGeneralAttributes(c,l),"SOLID"===e)c.color?this.transferColorAttributes(c,l):c.stops&&c.stops.length&&this.transferColorAttributes(c.stops[0],l);else if(A(e)){if(c.stops)this.transferGradientAttributes(c,l);else if(c.color){let e=G(c.color,o),r=(s&&T(s.rightEndCap))??!1,{stops:n,stopsVar:a}=this.getPaintStopsAndStopsVar({...c.color,a:1},c.colorVar,e,o?!r:r);l.stops=n,l.stopsVar=a}}else"IMAGE"===e?c.image&&c.imageThumbnail&&(this.transferImageAttributes(c,l),l.transform=c.imageTransform):"VIDEO"===e&&c.video&&this.transferVideoAttributes(c,l);return l},this.cachePaint=(e,r)=>(this.cache[r]=this.cache[r]||u()(e),A(e.type)?this.transferGradientAttributes(e,this.cache[r]):"SOLID"===e.type?this.transferColorAttributes(e,this.cache[r]):"IMAGE"===e.type?(this.transferImageAttributes(e,this.cache[r]),this.cache[r].imageTransform=e.transform):"VIDEO"===e.type&&this.transferVideoAttributes(e,this.cache[r]),this.cache[r]),this.transferGeneralAttributes=(e,r)=>{r.opacity=e.opacity,r.blendMode=e.blendMode,r.visible=e.visible},this.transferColorAttributes=(e,r)=>{r.color=e.color},this.transferGradientAttributes=(e,r)=>{r.stops=e.stops,r.stopsVar=e.stopsVar,r.transform=e.transform},this.transferImageAttributes=(e,r)=>{r.image=e.image,r.imageThumbnail=e.imageThumbnail,r.animatedImage=e.animatedImage,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.imageShouldColorManage=e.imageShouldColorManage,r.video=void 0},this.transferVideoAttributes=(e,r)=>{r.imageThumbnail=e.imageThumbnail,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.video=e.video,r.image=void 0},this.clearCache()}},x=!1;function U(){x||(x=!0,_.Y5.onReady().then(()=>{let e=l.glU.requestDefaultImageStyle(),r=a.w.decodeMessage(e);r.nodeChanges&&r.nodeChanges.length>0&&r.nodeChanges[0].fillPaints&&(I=r.nodeChanges[0].fillPaints[0])}))}function B(e,r){let n=L(e);if(!n)return e;if("STRETCH"===n.imageScaleMode){let e=c.s.identity();return e.translate(.5,.5),e.rotate(-(Math.PI/180*r)),e.translate(-.5,-.5),e.multiply(c.s.fromFigMatrix(n.transform)),{...n,transform:e.toFigMatrix()}}return{...n,rotation:n.rotation+r}}function V(e,r){let n=S(e);if(n){let e=n.stops;return r.index<e.length?e[r.index].color:n.stops[0].color}{let r=w(e);return(0,i.KF)(!!r,"paint is neither a gradient nor a solid"),{...r.color,a:r.opacity??1}}}function G(e,r=!1){var n={...e,a:0};if(!r){let r=(0,s.qN)(e),a=r.v>=.5?r.v-.4:r.v+.4;n=(0,s.kE)({...r,v:a})}return n}},602564:(e,r,n)=>{n.d(r,{Q:()=>i,r:()=>a});var a,i,o=n(511445),s=n(805014),l=n(777535),c=n(841962),d=n(747484),u=n(851390),m=n(138053);class p{constructor(e){for(let r of(this.reported=!1,this.initializationStart=null,this.events={},["applyNodeChanges","multiplayerMessageSize","initializePrototypeLib","viewerSceneDidCompleteInitialLoad","transferSentToWorker","transferMemory","transferMemorySize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.events={}}start(e){this.logTime(e+"Start"),"initializePrototypeLib"===e&&(this.initializationStart=performance.now())}end(e){this.logTime(e+"End")}logValue(e,r){this.events[e]=r}logTime(e){this.events[e]=Math.round(performance.now())}report(){this.logTime("reportedAt");let e={version:2,firstReport:!this.reported,totalUsedHeapMemory:s.hMR?.getTotalUsedHeapMemory(),maxUsedHeapMemory:s.hMR?.getMaxUsedHeapMemory(),fileKey:u.hk()?.openFileKey(),...this.events};setTimeout(()=>{(0,l.sx)("Prototype Lib Loaded",e),this.reported=!0})}}class h{constructor(e){for(let r of(this.startTimes={},this.meta={},this.track=(0,o.s)(e=>{(0,c.kc)().prototype_lib_perf_report&&(0,l.sx)("Prototype Lib Function",e)},200),["applyNodeChanges","getNodeChangesForSwap","multiplayerMessageSize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.startTimes={},this.meta={}}logValue(e,r){this.meta[e]=r}start(e){this.startTimes[e]=performance.now()}end(e){if(void 0!==this.startTimes[e]){let r=s.hMR.getTotalUsedHeapMemory(),n=s.hMR.getMaxUsedHeapMemory(),a={name:e,start:this.startTimes[e],end:performance.now(),totalUsedHeapMemory:r,maxUsedHeapMemory:n,...this.meta};this.track(a),this.reset()}}}(e=>{let r={},n=new h(r);e.loadTimer=new p(r);let a=[n,e.loadTimer];e.reset=function(){for(let e of a)e.reset()},e.start=function(e){r[e]?.forEach(r=>r.start(e))},e.end=function(e){r[e]?.forEach(r=>r.end(e))},e.logValue=function(e,n){r[e]?.forEach(r=>r.logValue(e,n))};let i=!0;e.reportOOM=function(r){if(!i)return;i=!1;let n=e.loadTimer.initializationStart?Math.round(performance.now()-e.loadTimer.initializationStart):0,a={totalMemoryInBytes:(0,m.le)(),failedSize:r,currentAllocatedBytes:s.hMR.getTotalUsedHeapMemory(),maxAllocatedBytes:s.hMR.getMaxUsedHeapMemory(),timeSinceInitialization:n,is64BitBrowser:d.Ay.is64BitBrowser};(0,l.sx)("Prototype Lib Out Of Memory",a)}})(a||(a={})),(e=>{let r=null;e.setLoadTimeTracker=function(e){r=e},e.getLoadTimeTracker=function(){return r}})(i||(i={}))},214773:(e,r,n)=>{n.d(r,{Ad:()=>j,B8:()=>K,Cd:()=>er,Cr:()=>ec,Dd:()=>W,Dg:()=>$,E7:()=>ei,H0:()=>X,HF:()=>Z,JA:()=>et,LH:()=>ee,P2:()=>en,PY:()=>eu,Ts:()=>eb,Ug:()=>Y,V:()=>H,Zp:()=>es,fl:()=>eE,iW:()=>z,jp:()=>ep,k6:()=>G,kq:()=>el,o3:()=>em,p7:()=>Q,se:()=>J,sl:()=>eo,vK:()=>q,w4:()=>ea,wl:()=>ed,ye:()=>L,zw:()=>O});var a=n(236891),i=n(650437),o=n(805014),s=n(777535),l=n(789022),c=n(272128),d=n(924794),u=n(841962),m=n(229419),p=n(453439),h=n(143982),_=n(190500),g=n(366172),f=n(758121),E=n(542005);let y={"frame.react-render":.1,"frame.scene-render":.2,"frame.scene-render.render-tree-generation":.2},b=["react","frame","frame.react-render","frame.scene-render","frame.scene-render.render-tree-generation","frame.style-updater","frame.symbol-updater","frame.trigger-action","fullscreen-handle-event","fullscreen-handle-event.trigger-action","frame.comments-render"],v=1,T=!1,I=null,S=0,w=null,A=0,C=-1/0,N=0,L=null,O=null,R=null,P=null,D=new d.zF,k=new d.zF,M=new d.zF,F=new d.zF,x=new d.zF,U=new d.xV,B={},V=!1;function G(e,r){v=e,T=(0,a.Vq)(r),L&&L.setMultiplayerPerfInfo({multiplayerUserCount:v,ongoingSpotlight:T})}function H(){I=null,w=null,L?.stopRecordingAndLog("closing-file"),L?.setFileInfo(null,"unknown")}function W(e,r){L&&(L.setFileInfo(e,(0,_.Dc)(r)),L.startRecording(!0),(0,E.Jr)().setPendingImagesCallback(L.pendingImagesChanged)),I=e,w=performance.now(),S++;let n=(0,u.tl)().editing_file;1===S&&n&&(0,s.sx)("Cold Boot Document Load",{fileKey:I,fileVersion:o.i6g.currentFileVersion(),loadedTime:w,fileNodeCount:o.CeL.getFileNodeCount(),fileTeamId:n.team_id,fileParentOrgId:(0,u.tl)().org_id})}function K(e){L?.setFileInfo(I,_.Dc(e))}function Y(){L?.stopRecordingAndLog("about-to-rebuild-scene")}function $(){L?.startRecording(!1)}function j(){L?.recordSingleFrameNamedEvent("tileRenderingActive")}function z(){L?.recordSingleFrameNamedEvent("createTableActive")}function q(){L?.recordSingleFrameNamedEvent("editTableTextActive")}function Z(){L?.recordSingleFrameNamedEvent("reorderTableSpanActive")}function X(){L?.recordSingleFrameNamedEvent("connectDiagramShapeWithConnectorActive")}function J(){L?.onNodeDragStart()}function Q(){L?.onNodeDragEnd()}function ee(e){L?.onTileRendererChanged(e)}function et(){L?.onContextRestored()}function er(e){L?.updateMaxRenderLayerCount(e)}function en(e){L?.updateMaxRenderedTileBytesUsed(e)}function ea(){L?.incrementNumAnimationsFromCpp()}function ei(){L?.incrementNumAnimationsFromTs()}function eo(){D.setIsActive()}function es(){k.setIsActive()}function el(){M.setIsActive()}function ec(){F.setIsActive()}function ed(){x.setIsActive()}function eu(){L?.recordSingleFrameNamedEvent("createStickyActive")}function em(){L?.recordSingleFrameNamedEvent("differentSectionClicked")}function ep(e){L?.recordSingleFrameNamedEvent(c.jY(e))}let eh=["ALT","META","SHIFT","CONTROL","RIGHT_ALT"];function e_(e){let{fileKey:r,fileNodeCount:n,multiplayerUserCount:a,ongoingSpotlight:o,recentInteractions:s,secondsSinceLoaded:l,version:c,randomID:d}=e,u={fileKey:r,fileNodeCount:n,multiplayerUserCount:a,ongoingSpotlight:o,secondsSinceLoaded:l,version:c,randomID:d,reportCount:A};for(let e=0;e<s.length;e++)u[`recentInteractions.${e}`]=JSON.stringify(s[e]);return(0,m.q)(e.gpuDeviceInfo,u),(0,i.Dy)(e.nodeTypeHistogram,u,"nodeTypeHistogram"),u}function eg(e){(0,s.sx)("Slow Editor Interaction",e),C=performance.now(),N=e.duration}function ef(...e){}function eE(){if(!g.Y5?.isReady())return;let e={},r=l.rH.report(),n=0;for(let a of r)!function r(n,a=""){let i=a.length>0?`${a}.${n.name}`:n.name,o=B[i]||n.hitCount,s=n.hitCount-o;s>n.elapsedTimes.length&&(V||(console.warn(`Too many elapsed hits of ${i} since last report`),V=!0),s=n.elapsedTimes.length);let l=0,c=n.elapsedTimes.length;for(let e=c-s;e<c;e++)l+=n.elapsedTimes[e];for(let a of(e[i]=l,B[i]=n.hitCount,n.children))r(a,i)}(a),n+=e[a.name];!function(){if(n/1e3<.2)return;let[r,a]=null===I||null===w?[null,[]]:[{gpuDeviceInfo:(0,m.l)(),fileKey:I,fileNodeCount:o.CeL.getFileNodeCount(),multiplayerUserCount:v,ongoingSpotlight:T,nodeTypeHistogram:o.CeL.getNodeTypeHistogram(),recentInteractions:o.CeL.getRecentInteractions(),secondsSinceLoaded:(performance.now()-w)/1e3,version:1,randomID:(0,f.ds)(),reportCount:A},o.CeL.getSlowInteractions()];if(null==r)return;let s={};for(let r in e)-1!==b.indexOf(r)&&(s[r]=e[r]/1e3);let l=a.map(e=>{let n=e.interaction,a={kind:"interaction",type:n.type,subtype:n.subtype,frame:e.frame,collapsed:!1,duration:e.duration,...e_(r)};if(eh.forEach(e=>a["modifier."+e]=null),"MOUSE"===n.type)for(let e of(a.collapsed=n.collapsed,eh))a["modifier."+e]=-1!==n.modifiers.indexOf(e);return(0,i.Dy)(s,a,"timer"),a});for(let n in e){let a=e[n]/1e3,o=y[n];if("number"==typeof o&&a>=o){let e={kind:"timer",type:n,subtype:null,frame:null,collapsed:!1,duration:a,...e_(r)};(0,i.Dy)(s,e,"timer"),eh.forEach(r=>e["modifier."+r]=null),l.push(e)}}if(0===l.length)return;let c=[],d=l,u=60-(performance.now()-C)/1e3;if(0===(d=d.filter(e=>u<=0||e.duration>=2*N)).length&&c.push(`we're in the report cooldown period (${u}s to go) and no reports were long enough to override it (the last report duration was ${N}s)`),u>0&&d.length,null===w)return;let p=60-(performance.now()-w)/1e3;p>0&&c.push(`we're in the document loading cooldown period (${p}s to go)`),c.length>0?function(e){if(1===e.length)return e[0];if(2===e.length)return e[0]+" and "+e[1];let r=e.slice(0,e.length-1).join(", ");return r+=", and ",r+=e[2]}(c):((d=d.sort((e,r)=>e.duration-r.duration)).forEach(eg),A++)}(),o.CeL.clearNodeTypeHistogram(),o.CeL.clearSlowInteractions()}function ey(e){let r=0,n=0,a=[];for(let i of e)1===i.path.length&&"frame"===i.path[0]?(n=i.elapsedTime,a.push(i)):i.path.length>1&&"frame"===i.path[0]?(r+=i.elapsedTime,a.push(i)):1===i.path.length&&a.push(i);if(r>0){let e=n-r;a.push({path:["frame","unaccounted-time"],elapsedTime:e})}return a}function eb(){if(!L&&(0,u.kc)().frame_distribution_tracker_edit){let e=e=>{let r=o.AiE.getAndClearHistogramBatchFields(),n=new Map;r.forEach((e,r)=>{n.set(r,e>0)}),e.optimizationExposures=JSON.stringify(Object.fromEntries(n))};(L=new c.AH("editor_frame_distributions",ey,2,!0,new h.s,r=>{e(r)},!1,(e,r=!1)=>{let n=o.AiE.getAndClearSlowFrameTrackerFields(),a=new Map;n.forEach((e,r)=>{a.set(r,e>0)}),e[p.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(a));let i=o.yuz.getFullscreenCurrentFrameGpuMetricsJSON();e[p.N.gpuMetricsCurrentFrameKey]=i.toString();let s=o.fZb.getCurrentFrameCpuTimerTreeJSON();if(e[p.N.cpuTimerTreeCurrentFrameKey]=s.toString(),r){let r=o.yuz.getFullscreenPreviousFrameGpuMetricsJSON();e[p.N.gpuMetricsPreviousFrameKey]=r.toString();let n=o.fZb.getPreviousFrameCpuTimerTreeJSON();e[p.N.cpuTimerTreePreviousFrameKey]=n.toString()}let l=o.Ez5.activeRunningAnimations();e[p.N.activeAnimationsKey]=l},e=>{o.AiE.clearSlowFrameTrackerFields(),o.yuz.nextFrame(e),o.fZb?.nextFrame(e)})).addEventTracker("zoomActive",new d.vu),L.addEventTracker("panActive",new d.H0),L.addEventTracker("viewportHasGaps",new d.as(o.pWM.DEFINITELY_COVERED_ONLY)),L.addEventTracker("viewportIncludingOutdatedHasGaps",new d.as(o.pWM.DEFINITELY_COVERED_AND_OUTDATED)),L.addEventTracker("multipleMultiplayerUsersInFile",new d.nc(2,()=>v)),L.addEventTracker("multipleMultiplayerUsersInFileAndPanningOrZooming",new d.Pn(2,()=>v)),L.addEventTracker("viewportHasBlurryRegions",new d.eO(1)),L.addEventTracker("viewportHasVeryBlurryRegions",new d.eO(.5)),L.addEventTracker("viewportIsBlurry",new d.I7(1)),L.addEventTracker("viewportIsVeryBlurry",new d.I7(.5)),L.addEventTracker("timeSlicedEditRenderingActive",new d.t8),L.addEventTracker("stalenessIsHigh",new d.bF(1e3)),L.addEventTracker("stalenessIsVeryHigh",new d.bF(2e3)),L.addEventTracker("moveCursorActive",new d.vw),O=new d.Ti,L.addEventTracker("cursorChatActive",O),R=new d.W,L.addEventTracker("cursorReactionActive",R),L.trackOtherUserCursorMoved(),P=new d.Fy,L.addEventTracker("devModeAnnotationsVisible",P),L.addEventTracker("independentLayerAnimationActive",D),L.addEventTracker("nonIndependentLayerAnimationActive",k),L.addEventTracker("independentLayerActive",M),L.addEventTracker("independentLayerAdded",F),L.addEventTracker("independentLayerRemoved",x),L.addEventTracker("isTypingTextActive",U)}}},714989:(e,r,n)=>{n.d(r,{Ts:()=>w,Z_:()=>b,rE:()=>v,yQ:()=>y});var a=n(805014),i=n(777535),o=n(281935),s=n(885123),l=n(841962),c=n(875877),d=n(747484),u=n(399991),m=n(190500),p=n(138053),h=n(644392),_=n(118505),g=n(287535);let f={periodMs:36e5,frequentPeriodMs:6e4},E={periodMs:3e5,frequentPeriodMs:6e4};function y(e,r){return Object.keys(e).reduce((n,a)=>{let i=r[a],o=e[a];return null!=i&&null!=o&&(n[a]=i-o),n},{})}function b(){let e=a.P2e.getHeapMemoryBreakdown(),r={};for(let n of Object.keys(e))r[`heap_breakdown_${n}`]=e[n];let n=v(),i=a.P2e.getRendererMemoryBreakdown()||{};function o(e){return"number"==typeof e?e:parseInt(e)}return{...n,renderer_gpu_memory:o(a.P2e.getRendererGpuMemory()),renderer_textures_memory:o(i.textures),renderer_vertex_buffers_memory:o(i.vertexBuffers),renderer_render_buffers_memory:o(i.renderBuffers),renderer_uniform_buffers_memory:o(i.uniformBuffers),image_memory:o(a.P2e.getTotalImageMemory()),...r}}function v(){let e=(0,p.aW)()??0,r=a.hMR,n=r.getTotalUsedHeapMemory();return{process_memory:e,cpp_memory:n,js_memory:e>n?e-n:void 0,cpp_max_memory:r.getMaxUsedHeapMemory(),alloc_total:r.getAllocTotal(),alloc_call_count:r.getAllocCallCount(),emscripten_reserved_memory:(0,p.le)(),indirect_buffer_memory:r.getJsBufferMemory(),texture_image_memory:r.getTextureMemStatsTotal(a.aDE.IMAGE),texture_tile_atlas_memory:r.getTextureMemStatsTotal(a.aDE.TILE_ATLAS),texture_tile_stack_memory:r.getTextureMemStatsTotal(a.aDE.TILE_STACK),texture_glyph_data_memory:r.getTextureMemStatsTotal(a.aDE.GLYPH_DATA),compressed_images:r.getImageMemStatsTotal(a.fLc.BITMAP),uncompressed_images_arraybuffer:r.getImageMemStatsTotal(a.fLc.COMPRESSED),uncompressed_images_imagebitmap:r.getImageMemStatsTotal(a.fLc.BUFFER)}}async function T(){if(o.eD){let e=await o.eD.getCPUUsage();if(e)return e.percent}return null}async function I(e,r,n,o,l){let p="Fullscreen Periodic Metrics"===e;if(!(!a.hMR||"ok"!==c.atomStore.get(_.h)||(0,u.PN)())){if(p){let i=b();n&&(i.cpu_usage=await T());let c=(0,g.dd)(),u=(0,g.PH)();(0,m.ds)(e,o,s.D.getState(),{reporting_interval:r,file_key:o,is_hidden:document.hidden,product_type:l,is64BitBrowser:d.Ay.is64BitBrowser,multiplayer_state:(0,h.LD)(a.h3O.getSessionState()),...i,...c,...u},{forwardToDatadog:!0})}else{let a=v();n&&(a.cpu_usage=await T());let s=(0,g.dd)(),l=(0,g.PH)();(0,i.sx)(e,{reporting_interval:r,file_key:o,is_hidden:document.hidden,is64BitBrowser:d.Ay.is64BitBrowser,...a,...s,...l},{forwardToDatadog:!0})}}}let S=!1;function w(e,r,n){if(S)return;S=!0;let a=(0,l.kc)().cpu_monitoring_enabled||!1,i="Fullscreen Periodic Metrics"===e?f:E,o=i.periodMs;(0,l.kc)().frequent_periodic_metrics&&(o=i.frequentPeriodMs),setTimeout(()=>{I(e,0,a,r(),n())},3e5),setInterval(()=>{I(e,o,a,r(),n())},o)}},147643:(e,r,n)=>{n.d(r,{U:()=>o});var a=n(805014);let i=[];function o(e){for(let r of i)r(e===a.dYj.YES)}},604072:(e,r,n)=>{n.d(r,{av:()=>S});var a=n(411855),i=n(538280),o=n(713134),s=n(198291),l=n(337934),c=n(712830),d=n(396692),u=n(879109),m=n(743837),p=n(415408),h=n(834182),_=n(801037),g=n(621249),f=n(897061),E=n(185182),y=n(764586),b=n(52636),v=n(446101),T=n(308688),I=n(841962);function S(e){switch(e){case"CLOSE_OVERLAY":return a.createElement(i.r,null);case"GO_BACK":return a.createElement(o.E,null);case"NAVIGATE_TO":default:return a.createElement(s.N,null);case"OPEN_OVERLAY":return a.createElement(l.x,null);case"OPEN_URL":return a.createElement(c.r,null);case"SCROLL_TO":return a.createElement(d.M,null);case"SWAP_WITH":return a.createElement(u.M,null);case"SWAP_STATE_TO":return a.createElement(m.x,null);case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":return a.createElement(p.H,null);case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return a.createElement(h.D,null);case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":return a.createElement(_.s,null);case"UPDATE_MEDIA_SKIP_TO":return a.createElement(g.C,null);case"SET_VARIABLE":if((0,I.kc)().ds_variable_props_unified_ui)return a.createElement(f.u,null);return a.createElement(E.D,null);case"SET_VARIABLE_MODE":if((0,I.kc)().ds_variable_props_unified_ui)return a.createElement(y.x,null);return a.createElement(b.E,null);case"CONDITIONAL":return a.createElement(v.$,null);case"NONE":return a.createElement(T.i,null)}}},788308:(e,r,n)=>{n.d(r,{h:()=>i});let a=[];function i(e){for(let r of a)r(e)}},610704:(e,r,n)=>{n.d(r,{$4:()=>b,jI:()=>E,up:()=>y});var a=n(777535),i=n(281935),o=n(885123),s=n(581751),l=n(190500),c=n(366172),d=n(309330),u=n(550083),m=n(120436),p=n(257674),h=n(279041),_=n(471899),g=n(959848);let f=new class{constructor(){this._suggestionsCache=new s.q(100),this._textReviewPluginRunner=new _.X,this._currentPromise=null}async setCurrentImplementation(e,r){let n=await (0,m.LJ)(),i=await (0,m.N_)(),s=(0,m.oz)();await e.initialize(r,[...n,...i,...s]),this._current=e;let c=await (0,m.LE)();console.log(`[spell-check] using implementation: ${this._current?.name}. Current language: ${r}. Supported languages: ${c}`);let d=o.D.getState().selectedView,u=(0,l.Dc)(d.editorType);(0,a.sx)("Spell Check Ready",{productType:u,language:r,implementationName:this._current?.name,userIgnoreWordsCount:(n||[]).length})}get current(){return this._currentPromise||(this._currentPromise=(async()=>(await this.ensureImplementationLoaded(),this._current))()),this._currentPromise}async ensureImplementationLoaded(){if(this._current)return;let e=await (0,m.x5)(),r=(0,h.up)(e),n=(0,m.Ev)(r);switch(e){case g.QC.DESKTOP:await this.setCurrentImplementation(new u.f,n);break;case g.QC.AGENT:await this.setCurrentImplementation(new d.UV,n);break;case g.QC.HUNSPELL:await this.setCurrentImplementation(new p.mz,n)}}async getSuggestionsForWord(e){return this._suggestionsCache.has(e)?Promise.resolve(this._suggestionsCache.get(e)||[]):(await this.current).getSuggestionsForWord(e).then(r=>(this._suggestionsCache.set(e,r),r))}async spellCheckText(e){return(await this.current).spellCheckText(e)}async runTextReviewPlugin(e){return _.X.shouldUsePluginForSpellChecking()?await this._textReviewPluginRunner.reviewText(e):[]}getAPIName(){return this._current?.name||"N/A"}shouldEnableWhenFirstActivated(){let e=navigator.languages||[navigator.language];return function(e,r){if(e)return!0;try{let e=r.map(e=>(e||"").toLowerCase()).map(e=>e.split("-")[0]);if(!(e.includes("en")||e.includes("ru")))return!1}catch(e){}return!0}(!!i.eD,e)}reset(){this._current=void 0,this._currentPromise=null,this._suggestionsCache.reset()}};async function E(e){return await f.ensureImplementationLoaded(),f._suggestionsCache.reset(),f._current.setLanguage(e)}async function y(e){await E((0,m.Ev)(e)),c.Y5&&c.Y5.isReady()&&c.Y5.triggerAction("redo-spell-checking")}let b=f},735041:(e,r,n)=>{n.d(r,{no:()=>c});var a=n(217950),i=n(245954),o=n(550479),s=n(787095);class l{getSummaryAsClipboardText(e){let r;let n=(0,i.UN)().get(e),l=n?.getWidgetSyncedState()["syncedState:ai-summary-items"],c=n?.getWidgetSyncedState()["syncedState:summarized-at"];try{r=JSON.parse(l)}catch(e){(0,o.$D)(a.e.AI_PRODUCTIVITY,Error(`Could not parse summary data, error: ${e}`))}return(0,s.Aq)(r,c)}}function c(){new l}},972297:(e,r,n)=>{n.d(r,{hR:()=>o});var a=n(201535);class i{rgbaToThumbhash(e,r,n){if(e>100||r>100){let a=e,i=r,o=e/r;e<r?e=Math.round((r=100)*o):r=Math.round((e=100)/o);let s=new OffscreenCanvas(a,i),l=s.getContext("2d"),c=new ImageData(new Uint8ClampedArray(n),a,i);l.putImageData(c,0,0);let d=new OffscreenCanvas(e,r).getContext("2d");d.drawImage(s,0,0,a,i,0,0,e,r),n=new Uint8Array(d.getImageData(0,0,e,r).data)}return(0,a.WB)(e,r,n)}thumbhashToRgba(e){let{w:r,h:n,rgba:i}=(0,a.Oe)(e);return{width:r,height:n,rgba:i}}}function o(){new i}},601411:(e,r,n)=>{n.d(r,{fT:()=>c});var a=n(805014),i=n(841962),o=n(215587),s=n(41893);class l{isUI3(){return a.Ez5?.uiState().isUI3.getCopy()??!1}showUI3Colors(){return a.Ez5?.uiState().showUI3Colors.getCopy()??!1}showUI3ColorsInitialValue(){return s.y.isIpad()?(0,o.Dz)()&&!!(0,i.kc)().figjam_ui3_color_palette:!!(0,i.kc)().figjam_ui3_color_palette}}function c(){new l}},269797:(e,r,n)=>{n.d(r,{nd:()=>s});var a=n(805014),i=n(677840);let o=null;function s(e,r){o&&o.pasteID===e&&o.fileKey===r?o.offset=o.offset+1:o={pasteID:e,fileKey:r,offset:1},2===o.offset&&a.glU.shouldNudgeComponentCreationForSelection()&&(0,i.YQ)({id:"Upsell Libraries Valid Paste For Nudge"})}},999538:(e,r,n)=>{n.d(r,{Zr:()=>o});var a=n(188507);n(108982);var i=n(779099);function o(e){return(0,a.d4)(r=>(0,i.Yh)(r.mirror.appModel,e))}},696366:(e,r,n)=>{n.d(r,{_:()=>h});var a=n(805014),i=n(777535),o=n(885123),s=n(163773),l=n(841962),c=n(697737),d=n(76265),u=n(553362),m=n(366172);class p{async pasteVariablesWithLocalizationPopupDEPRECATED(e,r,n){let p=Array.from(e.entries()).map(([e,r])=>`${e}-${r}`).join(","),h=`/api/variables/publish_state?keys=${p}`,_=(await (0,c.GD)(h)).data.meta,g=new Set;return Object.keys(_).forEach(e=>!1===_[e]?g.add(e):null),g.size>0&&((0,i.sx)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=a.CWU.performVariableLocalizationFromPopup(g,r,n);if(m.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}async pasteVariablesWithLocalizationPopup(e,r,n){let p=[];for(let r=0;r<e.size;r+=25){let n=Array.from(e.entries()).slice(r,r+25).map(([e,r])=>`${e}|${r}`).join(","),a=`/api/variables/publish_state?keysAndLibrary=${n}`;p.push(c.Ay.post(a))}let h={};(await Promise.all(p)).forEach(e=>{Object.assign(h,e.data.meta)});let _=new Set;return Object.keys(h).forEach(e=>!1===h[e]?_.add(e):null),_.size>0&&((0,i.sx)("prototype.variables_pasted",{numPublished:e.size-_.size,numUnpublished:_.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=a.CWU.performVariableLocalizationFromPopup(_,r,n);if(m.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}}function h(){new p}},515662:(e,r,n)=>{n.d(r,{AZ:()=>S,BQ:()=>V,EP:()=>ei,G6:()=>P,JG:()=>X,K6:()=>D,Kd:()=>W,L5:()=>eo,M6:()=>es,Pt:()=>L,Rb:()=>N,SG:()=>ea,SR:()=>A,Xv:()=>H,bL:()=>k,e3:()=>Z,hg:()=>U,iC:()=>et,jI:()=>j,kf:()=>Y,lC:()=>R,nN:()=>w,nR:()=>O,pN:()=>J,qd:()=>B,rW:()=>I,t8:()=>G,tZ:()=>F,u:()=>x,u5:()=>$,wM:()=>K,wX:()=>M,yp:()=>C});var a=n(411855),i=n(236891),o=n(879058),s=n(805014),l=n(677469),c=n.n(l),d=n(32050),u=n(841962),m=n(875877),p=n(736942),h=n(154267);n(176160);var _=n(575232),g=n(747765),f=n(957020),E=n(113843),y=n(742995),b=n(671917),v=n(401562),T=n(581346);function I(e){let r=(0,m.useAtomValue)(b.Gc);return er(e?r[e]??[]:[])}function S(e){return(0,m.useAtomValue)((0,b.A6)(e))}function w(){return(0,m.useAtomValue)(b.qy)}function A(){N(),C(),(0,m.useAtomValue)(b.xA),L(),O(),(0,m.useAtomValue)(b.jt)}function C(){return er((0,m.useAtomValue)(b.TD))}function N(){return er((0,m.useAtomValue)(b.uk))}function L(){return(0,m.useAtomValue)(b.bO)}function O(){return(0,m.useAtomValue)(b.LC)}function R(e){return(0,m.useAtomValue)((0,b.ZG)(e))}function P(e){let r=(0,a.useMemo)(()=>e?(0,b.Eo)(e):(0,m.atom)(null),[e]),n=(0,m.useAtomValue)(r);if(n)return n;if(!e)return;let i=s.CWU.getSubscribedVariableSetInfo(e);if(i)return(0,f.Rn)(i)}function D(e,r){let n=function(e){let r=e?(0,b.hy)(e):(0,m.atom)(null);return(0,m.useAtomValue)(r)}(e);return n?.modeValues?.[r]??void 0}function k(e,r){return x(e)?.modeValues?.[r]??void 0}function M(e){let r=(0,d.wm)(()=>e,[e]),n=(0,a.useMemo)(()=>(0,m.atom)(e=>r.map(r=>(0,i.Vq)(r)?e(b.Cg)[r]??null:null)),[r]);return(0,m.useAtomValue)(n)}function F(e){return x(e)?.name||(e?s.CWU.getVariableNameInStyleSelection(e)??void 0:void 0)}function x(e){let r=(0,a.useMemo)(()=>e?(0,b.Ev)(e):(0,m.atom)(null),[e]),n=(0,m.useAtomValue)(r);if(n)return n;if(!e)return null;let i=s.CWU.getSubscribedVariableInfo(e);return i?(0,f.ZI)(i):null}function U(e,r){let n=(0,d.wm)(()=>e,[e]),i=(0,a.useMemo)(()=>(0,m.atom)(e=>n.map(n=>{if(!n)return null;let a=e((0,b.Ev)(n));if(a)return a;if(r){let e=s.CWU.getSubscribedVariableInfo(n);if(e)return(0,f.ZI)(e)}return null})),[r,n]);return(0,m.useAtomValue)(i)}function B(e,r){let n=(0,d.wm)(()=>e,[e]),i=(0,a.useMemo)(()=>(0,m.atom)(e=>{let a={};return n.forEach(n=>{if(!n)return;let i=(0,b.BJ)(n,r??{});if(i){a[n]=e(i);return}a[n]=null}),a}),[n,r]);return(0,m.useAtomValue)(i)}function V(e,r){let n=(0,a.useMemo)(()=>e?(0,b.BJ)(e,r??{}):(0,m.atom)(null),[e,r]);return(0,m.useAtomValue)(n)}function G(e,r){let n=V(e,r);return(0,i.Vq)(n)&&"MIXED"!==n?n:void 0}function H(e,r){return(0,a.useMemo)(()=>{if(!e||!r)return null;let n=new Map(Object.entries(r));return s.CWU.getVariableChainForModes(e,n)},[e,r])}function W(e){let r=x(e),n=P(r?.variableSetId);return n?"LOCAL"===n.subscriptionStatus?n.keyForPublish:n.key:null}function K(e){let r=(0,a.useMemo)(()=>(0,b.Oj)(e),[e]),n=(0,m.useAtomValue)(r);return(0,d.k9)(()=>{let e={};for(let r of Object.values(n))if("loaded"===r.status)for(let n of r.data.variableCollection?.variables??[])e[(0,o.ey)(n.key)]=n;return e},[n])}function Y(e){let r=(0,a.useMemo)(()=>!e||(0,h.wJ)(e)?(0,m.atom)(null):(0,b.cp)(e),[e]),n=(0,h.$Q)(e),i=(0,b.Ri)(n),o=(0,m.useAtomValue)(r),s=(0,m.useAtomValue)(i),l=(0,g.je)(),c=!!l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return p.Qw.loaded([]);if(o?.status==="loading"||o?.status==="disabled"||s?.status==="loading")return p.Qw.loading();let e=o&&p.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return p.Qw.loaded((0,T.cM)(r,!1))},[c,o,s])}function $(e){let r=(0,a.useMemo)(()=>!e||(0,h.wJ)(e)?(0,m.atom)(null):(0,b.cp)(e),[e]),n=(0,h.$Q)(e),i=(0,b.Ri)(n),o=(0,m.useAtomValue)(r),s=(0,m.useAtomValue)(i),l=(0,g.je)(),c=l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return p.Qw.loaded([]);if(o?.status==="loading"||s?.status==="loading")return p.Qw.loading();let e=o&&p.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return p.Qw.loaded((0,T.kX)(r,!1))},[c,o,s])}function j(e={}){let r=e?.enabled??!0,n=!!(0,u.kc)().dse_lk_asset_updates_vars,a=z({enabled:r&&!n}),i=q({enabled:r&&n});return n?i:a}let z=(0,v.n)((e={})=>{let r=!1===e.enabled,n=(0,g.je)(),i=(0,d.wm)(()=>n.data?.map(e=>e.fileKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,b.Jo)(i):(0,b.H2)(i),[r,i]),s=(0,m.useAtomValue)(o);return(0,d.wm)(()=>{let e=p.Qw.all(Object.values(s));return"loaded"!==e.status?e:p.Qw.loaded({items:c()(Object.values(s).map(e=>(0,T.kX)({type:"team",value:e},!1)))})},[s])}),q=(0,v.n)((e={})=>{let r=!1===e.enabled,n=(0,g.je)(),i=(0,d.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,b.Jo)(i):(0,b.wh)(i),[r,i]),s=(0,m.useAtomValue)(o);return(0,d.wm)(()=>{let e=p.Qw.all(Object.values(s));return"loaded"!==e.status?e:p.Qw.loaded({items:Object.values(s).flatMap(e=>(0,T.C$)(e,!1))})},[s])}),Z=(0,m.atom)(null);function X({enabled:e=!0}){let r=en({enabled:e}),[n,i]=(0,m.useAtom)(Z);return(0,a.useEffect)(()=>{(null===n||n.status!==r.status)&&i(r)},[r,i,n]),"loaded"===r.status}function J(e){let r=e?.enabled??!0,n=!!(0,u.kc)().dse_lk_asset_updates_vars,a=Q({enabled:r&&!n}),i=ee({enabled:r&&n});return n?i:a}let Q=(0,v.n)(e=>{let r=(0,g.je)(),n=(0,d.wm)(()=>r.data?.filter(e=>!h.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),i=(0,d.wm)(()=>r.data?.filter(e=>h.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),o=e?.enabled===!1,s=(0,a.useMemo)(()=>{if(o){let e={};return n.forEach(r=>{e[r]=p.Qw.disabled()}),(0,m.atom)(e)}return(0,b.Yt)(n)},[o,n]),l=(0,m.useAtomValue)(s),u=(0,a.useMemo)(()=>{if(o){let e={};return i.forEach(r=>{e[r]=p.Qw.disabled()}),(0,m.atom)(e)}return(0,b.hz)(i)},[o,i]),_=(0,m.useAtomValue)(u);return(0,d.wm)(()=>{let e=p.Qw.all(Object.values({...l,..._}));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):p.Qw.loaded({libraryVariableSets:[...c()(Object.values(l).map(e=>(0,T.kX)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,T.kX)({type:"community",value:e},!1)))],libraryVariables:[...c()(Object.values(l).map(e=>(0,T.cM)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,T.cM)({type:"community",value:e},!1)))]})},[l,_])}),ee=(0,v.n)(e=>{let r=e?.enabled===!1,n=(0,g.je)(),i=(0,d.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,b.Jo)(i):(0,b.Ho)(i),[r,i]),s=(0,m.useAtomValue)(o);return(0,d.wm)(()=>{let e=p.Qw.all(Object.values(s));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):p.Qw.loaded({libraryVariableSets:Object.values(s).flatMap(e=>(0,T.C$)(e,!1)),libraryVariables:Object.values(s).flatMap(e=>(0,T.q0)(e,!1))})},[s])});function et(e,r,n){if(e)return s.w3z.getIdsOfVariablesWithValue(e,r,{type:n.type,value:n.value})}function er(e){return a.useMemo(()=>e.filter(e=>!(0,E.eF)(e)),[e])}function en(e){let r=N(),n=J(e);return(0,a.useMemo)(()=>n?.status!=="loaded"?n.transform(()=>[]):p.Qw.loaded([...n.data?.libraryVariables??[],...r??[]]),[r,n])}function ea(e,r){let n=(0,y.iG)(e),i=en(r);return(0,a.useMemo)(()=>{if("loaded"!==i.status)return i.transform(()=>[]);let r=i.data?.filter(e=>y.AQ(e,n))??[],a=[];for(let n of e){let e=E.Io[n];e&&i&&(a=a.concat(r.filter(r=>e.includes(r.resolvedType))))}return p.Qw.loaded([...a])},[e,i,n])}function ei(e){let r=e?.subscriptionStatus==="SUBSCRIBED"?e.library_key:void 0,n=(0,_.U)(r?[r]:[],{enabled:!0}).data;return r?n?.[r]:void 0}function eo(e){let r=e&&(0,f.GI)(e),n=P(r?e.rootVariableSetId:void 0);return(r?n:e)??null}function es(){return(ea(["FONT_STYLE"]).data??[]).length>0}},65791:(e,r,n)=>{n.d(r,{RW:()=>E,Vr:()=>l,_n:()=>d,j2:()=>m,uE:()=>g,xQ:()=>v,xb:()=>h});var a=n(109388),i=n(701753),o=n(805014);let s=null;function l(e){return s=e,()=>{s=null}}let c=null;function d(e){return c=e,()=>{c=null}}let u=null;function m(e){return u=e,()=>{u=null}}let p=null;function h(e){return p=e,()=>{p=null}}let _=null;function g(e){return _=e,()=>{_=null}}let f=new i.b("VariableMirrorVariableResolvedValueEmitter");function E(e,r,n){return o.u4j.subscribeToLocalVariableResolvedValue(e,r),f.on(e,n),()=>{o.u4j.unsubscribeFromLocalVariableResolvedValue(e,r),f.removeListener(e,n)}}let y=new i.b("VariableMirrorExplicitModeEmitter");class b{localVariableSetUpdated(e){(0,a.unstable_batchedUpdates)(()=>{s?.({added:[e]})})}localVariableSetDeleted(e){(0,a.unstable_batchedUpdates)(()=>{s?.({deleted:e}),u?.({setDeleted:e})})}subscribedVariableSetUpdated(e,r){(0,a.unstable_batchedUpdates)(()=>{c?.({added:[e]}),_?.({setDeleted:e.id}),_?.({added:r})})}subscribedVariableSetDeleted(e){(0,a.unstable_batchedUpdates)(()=>{c?.({deleted:e}),_?.({setDeleted:e})})}localVariablesUpdated(e){u?.({added:e})}localVariableOverridesUpdated(e){p?.({added:e})}localVariableOverridesDeleted(e){p?.({deleted:e})}localVariablesDeleted(e){u?.({deleted:e}),e.forEach(e=>{f.trigger(e,{})})}variableResolvedValueUpdated(e,r){f.trigger(e,r)}explicitModeUpdated(e,r){y.trigger(e,r)}resetMirrorCache(){(0,a.unstable_batchedUpdates)(()=>{s?.(null),u?.(null),p?.(null),c?.(null),_?.(null)}),f.removeAllListeners()}}function v(){new b}},733763:(e,r,n)=>{n.d(r,{tG:()=>g});var a=n(511445),i=n(805014),o=n(841962),s=n(697737),l=n(7002),c=n(84530),d=n(366172),u=n(542005),m=n(988286),p=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(p||{});class h{constructor(){this.pendingPasteRequests={},this.pendingVideosToRecordByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingRecordVideosTasksByLibraryKey={},this.allVideos={},this.flushPendingRecordVideos=(0,a.s)(async()=>{let e=this.pendingVideosToRecordByFileKey,r=this.pendingVideosToRecordByLibraryKey,n=this.pendingRecordVideosTasksByFileKey,a=this.pendingRecordVideosTasksByLibraryKey,o=Object.keys(e).map(e=>({fileKey:e,type:"fileKey"})).concat(Object.keys(r).map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingVideosToRecordByFileKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByLibraryKey={};let l=await this.getEditingFileKey();o.forEach(async o=>{if("fileKey"===o.type&&o.fileKey===l){n[o.fileKey].resolve();return}if("fileKey"===o.type&&!o.fileKey){n[o.fileKey].reject("Invalid originFileKey");return}let c=1,d="fileKey"===o.type?e[o.fileKey]:r[o.libraryKey];for(;;){try{let e=await s.Ay.put(`/api/files/${l}`,{video_sha1s:d,image_origin_file_key:"fileKey"===o.type?o.fileKey:void 0,image_origin_library_key:"libraryKey"===o.type?o.libraryKey:void 0}),{success:r,failed:c}=u.xY.parseFileUpdateResponseForImages(d,e);for(let e of(i.tHB.markVideoPermissionsCopied(r),c))i.tHB.videoIsMissing(e);for(let e of d)delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():a[o.libraryKey].resolve(),this.getAllVideoUrls();return}catch(e){if(e.status>=400&&e.status<500){for(let e of d)i.tHB.videoIsMissing(e),delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():a[o.libraryKey].resolve();return}}let e=1e3*c*Math.random();await new Promise(r=>setTimeout(r,e)),c=Math.min(2*c,64)}})},100)}async getAllVideoUrls(){if(!(0,o.kc)().cross_env_paste)return;let e=await c.S.getVideos({fileKey:await this.getEditingFileKey()});this.allVideos=e.data.meta.videos}getSignedUrls(e){let r=new Map;for(let n of e)r.set(n,this.allVideos[n]);return r}recordVideos(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingVideosToRecordByFileKey[e]=this.pendingVideosToRecordByFileKey[e]||[],this.pendingVideosToRecordByFileKey[e].push(...r),!this.pendingRecordVideosTasksByFileKey[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordVideosTasksByFileKey[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByFileKey[e].promise;let n=this.pendingRecordVideosTasksByFileKey[e].promise;return this.flushPendingRecordVideos(),n}recordVideosFromLibraryKey(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No sourceLibraryKey specified");if(this.pendingVideosToRecordByLibraryKey[e]??=[],this.pendingVideosToRecordByLibraryKey[e].push(...r),!this.pendingRecordVideosTasksByLibraryKey[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordVideosTasksByLibraryKey[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByLibraryKey[e].promise;let n=this.pendingRecordVideosTasksByLibraryKey[e].promise;return this.flushPendingRecordVideos(),n}getEditingFileKey(){return d.Y5.openFileKeyPromise()}}let _=new class{constructor(){this.videoManager=new h,this.thumbnailGenerator=m.t}copyVideoPermissions(e,r){return this.videoManager.recordVideos(e,r)}copyVideoPermissionsFromLibraryKey(e,r){return this.videoManager.recordVideosFromLibraryKey(e,r)}createVideo(){return this.thumbnailGenerator.createVideo()}deleteVideo(e){this.thumbnailGenerator.deleteVideo(e)}getWidth(e){return this.thumbnailGenerator.getWidth(e)}getHeight(e){return this.thumbnailGenerator.getHeight(e)}getCoverImage(e){return this.thumbnailGenerator.getCoverImage(e)}loadVideo(e,r,n){return this.thumbnailGenerator.loadVideo(e,r,n)}getSignedUrls(e){return this.videoManager.getSignedUrls(e)}async setExternalSource(e,r){let n=await fetch(r),a=new Uint8Array(await n.arrayBuffer()),i=await d.Y5.openFileKeyPromise();(0,l.Cb)([{sha1:e,bytes:a}],i)}loadAllVideos(){return this.videoManager.getAllVideoUrls()}};function g(){return _.videoManager}},20835:(e,r,n)=>{n.d(r,{i:()=>i});let a=[];function i(e,r){for(let n of a)n(e,r)}},695024:(e,r,n)=>{let a;n.d(r,{$$:()=>b,Cj:()=>U,D6:()=>A,HD:()=>I,PD:()=>w,Pl:()=>P,QZ:()=>F,Qt:()=>y,Yb:()=>v,Z0:()=>f,_X:()=>D,gc:()=>a,kE:()=>E,lc:()=>M,ni:()=>k,qc:()=>T,th:()=>S});var i=n(411855),o=n(109388),s=n(805014),l=n(991458),c=n(866415),d=n(653798),u=n(612724),m=n(132165),p=n(549147),h=n(366172),_=n(509343),g=n(182032);function f(e,r,n=!0){let a={x:e.width/2+(r.x-e.offsetX)*e.zoomScale,y:e.height/2+(r.y-e.offsetY)*e.zoomScale};return n?u.Mi.rounded(a):a}function E(e,r){return Math.round(e/r-.5)}function y(e,r,n,a){return Math.round(a/2+(e-r)*n)}function b(e,r){return u.Mi.rounded({x:(r.x-e.width/2)/e.zoomScale+e.offsetX,y:(r.y-e.height/2)/e.zoomScale+e.offsetY})}function v(e,r,n){let a=f(e,{x:r.x,y:r.y},n);return{x:a.x,y:a.y,width:r.width*e.zoomScale,height:r.height*e.zoomScale}}function T(e){if(e.height<0||e.width<0||e.zoomScale<=0)throw(0,d.x1)("Viewport","invalid values",{info:e}),Error("Invalid Viewport");return{x:e.offsetX-e.width/e.zoomScale/2,y:e.offsetY-e.height/e.zoomScale/2,width:e.width/e.zoomScale,height:e.height/e.zoomScale}}function I(e,r){return{x:e.x+r.x,y:e.y+r.y,width:e.width,height:e.height}}function S(e){return(0,c.xx)((e,r,n,a)=>({x:e,y:r,height:n,width:a}))(e.x,e.y,e.height,e.width)}function w({subscribeToUpdates_expensive:e}){let r=D({subscribeToUpdates_expensive:e}),n=i.useContext(p.QZ).current||r,a=r.offsetX-n.offsetX,o=r.offsetY-n.offsetY,s=r.zoomScale-n.zoomScale;return{...r,deltaOffsetX:a,deltaOffsetY:o,deltaZoomScale:s}}function A(e,r){i.useEffect(()=>{h.Y5?.isReady()&&e.subscribeToUpdates_expensive&&(r(h.Y5.getViewportInfo()),(0,m.H)())},[r,e.subscribeToUpdates_expensive]),i.useEffect(()=>{if(h.Y5&&e.subscribeToUpdates_expensive){let e=e=>{(0,o.flushSync)(()=>{r(e)})};return h.Y5.viewport.on("onSetViewport",e),()=>{h.Y5.viewport.removeListener("onSetViewport",e)}}},[r,e.subscribeToUpdates_expensive])}function C(e){return i.useContext(e),i.useContext(p.HA).current||p.t4}function N(e){return C(e.subscribeToUpdates_expensive?p.k9:p.cY).x}function L(e){return C(e.subscribeToUpdates_expensive?p.lG:p.cY).y}function O(e){return C(e.subscribeToUpdates_expensive?p.Os:p.cY).width}function R(e){return C(e.subscribeToUpdates_expensive?p.zE:p.cY).height}function P(e){return C(e.subscribeToUpdates_expensive?p.zx:p.cY).zoomScale}function D(e){let r=N(e),n=L(e),a=O(e),o=R(e),s=C(e.subscribeToUpdates_expensive?p.j0:p.cY).offsetX,l=C(e.subscribeToUpdates_expensive?p.u7:p.cY).offsetY,c=P(e),d=C(e.subscribeToUpdates_expensive?p.l9:p.Vl).isPanning,u=C(e.subscribeToUpdates_expensive?p.b8:p.Vl).isZooming;return i.useMemo(()=>({x:r,y:n,width:a,height:o,offsetX:s,offsetY:l,zoomScale:c,isPanning:d,isZooming:u}),[r,n,a,o,s,l,c,d,u])}function k(){let e={subscribeToUpdates_expensive:!0},r=N(e),n=L(e),a=O(e),o=R(e);return i.useMemo(()=>({x:r,y:n,width:a,height:o}),[r,n,a,o])}function M(){a=void 0}function F(e){let r=new Promise(e=>{a=e});return s.glU.computeViewportSettingsForNode__DO_NOT_USE_DIRECTLY(e),r}let x=(0,l.jz)(g.rulerThickness);function U(){let e={subscribeToUpdates_expensive:!0},r=(0,_.lK)()?x:0,n=N(e)+r,a=L(e)+r,o=O(e)-r,s=R(e)-r;return i.useMemo(()=>({x:n,y:a,width:o,height:s}),[n,a,o,s])}},368933:(e,r,n)=>{n.d(r,{Ed:()=>u,Js:()=>d,QY:()=>l,Yu:()=>p,pi:()=>m});var a=n(217950),i=n(805014),o=n(875877),s=n(550479),l=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(l||{});let c=(0,o.atom)({status:1,timeoutHandle:null});function d(){return o.atomStore.get(c)}function u(e){return!!(0===d().status&&i.i6g&&i.i6g.hasOnlyNewFileSystemChanges())&&!!navigator.onLine&&(function(e){let r=o.atomStore.get(c);r.status=2,r.timeoutHandle=e,o.atomStore.set(c,r)}(setTimeout(()=>{m(!0),e()},1e4)),!0)}function m(e){let r=o.atomStore.get(c);r.status=3,e||(r.timeoutHandle?clearTimeout(r.timeoutHandle):(0,s.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Finished waiting but no timeout handle"))),r.timeoutHandle=null,o.atomStore.set(c,r)}function p(e){let r=o.atomStore.get(c);r.status=e?0:1,r.timeoutHandle&&clearTimeout(r.timeoutHandle),r.timeoutHandle=null,o.atomStore.set(c,r)}},239183:(e,r,n)=>{n.d(r,{bJ:()=>c});var a=n(269685),i=n(230208),o=n(875877),s=n(668581);class l{isCustomPaletteColor(e,r){let n=o.atomStore.get(s.$R);if(n){let o=(0,a.aH)(e);for(let e of(0,s.Uh)(r))if(n[e].some(e=>(0,i.DA)(o,e)))return!0}return!1}}function c(){new l}},426734:(e,r,n)=>{n.d(r,{pP:()=>d});var a=n(269685),i=n(875877),o=n(668581),s=n(383462),l=n(594687);class c{getEyedropperContext(){return i.atomStore.get(s.B)}updateEditPaletteModalColor(e){let r=i.atomStore.get(o.Jq),n=i.atomStore.get(o.rN),s=[...n.slice(0,r),(0,a.aH)(e),...n.slice(r+1)];i.atomStore.set(o.rN,s)}isCustomPaletteApplied(){return!!i.atomStore.get(o.$R)}showSectionPresets(){return i.atomStore.get(l.w)}}function d(){new c}},440534:(e,r,n)=>{n.d(r,{A9:()=>o});var a=n(107315);class i{constructor(){this.getDefaultPencilStrokeWeight=()=>a.wv,this.getDefaultHighlighterStrokeWeight=()=>a.g5}}function o(){new i}},293800:(e,r,n)=>{n.d(r,{Vi:()=>u,uE:()=>d});var a=n(76265),i=n(241478),o=n(657775),s=n(835163),l=n(390125),c=n(117753);let d={[c.k.EMBED_WIDGET]:s.g,[c.k.LINK_PREVIEW_WIDGET]:l.Nd,[c.k.AI_SUMMARY_WIDGET]:o.V,[c.k.HTML_WIDGET]:i.u};function u(e){return!!c.k[e]}c.k.EMBED_WIDGET,s.w.OPEN,s.w.CONVERT_TO_TEXT,c.k.LINK_PREVIEW_WIDGET,l.HP.OPEN,l.HP.VERTICAL,l.HP.HORIZONTAL,l.HP.CONVERT_TO_TEXT,c.k.AI_SUMMARY_WIDGET,c.k.HTML_WIDGET},783657:(e,r,n)=>{n.d(r,{Bz:()=>F,F$:()=>x,bY:()=>k,e3:()=>W,g4:()=>V,wl:()=>M,y4:()=>K});var a=n(488336),i=n(217950),o=n(805014),s=n(986162),l=n(777535),c=n(281935),d=n(449233),u=n(163773),m=n(841962),p=n(747484),h=n(550479),_=n(653798),g=n(399991),f=n(740090),E=n(423900),y=n(627254),b=n(138053),v=n(996027);function T(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.wasm"]:Fig.fullscreenURLs["compiled_wasm.wasm"]}function I(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.js"]:Fig.fullscreenURLs["compiled_wasm.js"]}async function S(e,r){await (0,d.k0)(I(r));let n={wasmBinaryFile:T(r),preRun(){(n.emscripten_realloc_buffer??n.growMemory)(0x60000000)}};window.Module=n,(0,s.jS)({callMain:(0,s.eS)(),tsApisForCpp:e,registerRefreshCallback:e=>{(0,v.vw)(r,e)},leakBindings:!0})}async function w(e){try{await y.xK.timeAsync("loadingCode",()=>window.FULLSCREEN_PRELOADS?.js||(0,d.k0)(I(e)))}catch(e){throw Error("Failed to load fullscreen JS code")}return(0,s.N4)({isProduction:!0,executeEmscriptenJS:(0,s.eS)()})}async function A(e,r){let n=y.xK.time("instantiateStreaming",async()=>{try{return await WebAssembly.instantiateStreaming(e,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiateStreaming",()=>n)}async function C(e,r){if(!e.ok)throw Error(`Downloading wasm failed with ${e.status}`);let n=await e.arrayBuffer(),a=y.xK.time("instantiate",async()=>{try{return await WebAssembly.instantiate(n,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiate",()=>a)}let N=!1,L=null;async function O(e){!L||L===e||(0,g.nl)()||M()||("fullscreen-app"===L?(0,h.$D)(i.e.CLIENT_PLATFORM,Error("Previously downloaded fullscreen wasm, but is now downloading prototype-lib")):"prototype-lib"===L&&(0,h.$D)(i.e.CLIENT_PLATFORM,Error("Previously downloaded prototype-lib wasm, but is now downloading fullscreen")));let r=T(e);y.xK.start("loadingBinaryStart");let[n,a]=await Promise.all([window.FULLSCREEN_PRELOADS?.wasm||fetch(r),w(e)]);delete window.FULLSCREEN_PRELOADS;let{imports:o,receiveInstance:s,getReservedHeapSize:l}=a;if((0,b.bM)(e,l),"true"===n.headers.get("x-figma-local-build")&&(N=!0),WebAssembly.instantiateStreaming)try{let r=await A(n,o);return L=e,{receiveInstance:s,wasmResult:r}}catch(e){if(e&&(!e.message||e.message.includes("Incorrect response MIME type")||e.message.includes("Unexpected response MIME type")))console.warn('Detected a proxy interfering with the "application/wasm" MIME type. Falling back to a slower WebAssembly instantiation method instead.'),(0,h.$D)(i.e.UNOWNED,Error(`Working around error instantiating streaming fullscreen WASM: ${e}`)),n=await fetch(r);else throw(0,_.xi)("loader","Error loading wasm",{url:r,message:e?.message}),e}let c=await C(n,o);return L=e,{receiveInstance:s,wasmResult:c}}let R=(0,a.Kt)(async()=>await O("fullscreen-app")),P=(0,a.Kt)(async()=>await O("prototype-lib")),D=async e=>{switch(e){case"fullscreen-app":return await R();case"prototype-lib":return await P()}};function k(e){let r=e||H||L;if(r){let e=T(r).split("/");if(e.length<2)return;let n=e[e.length-2];if("fullscreen-wasm"===n)return{fullscreen_variant:"wasm"};if("prototype-lib"===n)return{prototype_variant:"lib"};if(n.startsWith("fullscreen-wasm-"))return{fullscreen_variant:n.replace("fullscreen-wasm-","")};if(n.startsWith("prototype-lib-"))return{prototype_variant:n.replace("prototype-lib-","")}}return{}}function M(){let e=u.Ay.location.pathname;for(let r of["/c","/community","/@","/user","/org","/team"])if(e.startsWith(r))return!0;return!1}let F=!/Mobi/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent);function x(e="fullscreen-app"){return D(e).then(()=>{})}let U=document.location.pathname;function B(e){return"/preload-editor"===e||"/preload-android-proto"===e}function V(){return B(U)&&(0,p.KR)()&&p.m0||(0,f.Sh)(U)||c.eD&&c.eD.isFileBrowserTab()||c.S8||M()||B(u.Ay.location.pathname)&&!c.eD?"never":!(0,m.kc)().preload_fullscreen_on_load||"complete"===document.readyState||(0,u.Cs)()?"immediately":"eventually"}let G=null,H=null;async function W(e,r="fullscreen-app"){if(H&&H!==r&&!(0,g.nl)()&&("fullscreen-app"===H?(0,h.$D)(i.e.UNOWNED,Error("Previously initialized fullscreen wasm, but is now initializing prototype-lib")):"prototype-lib"===H&&(0,h.$D)(i.e.UNOWNED,Error("Previously initialized prototype-lib wasm, but is now initializing fullscreen"))),!T(r)||!window.WebAssembly)return location.href="/unsupported_browser",new Promise(()=>null);if((0,E.QL)("asan"))return H=r,S(e,r);try{G&&G!==e&&await u.Ay.reloadAndWaitForever("tsApisForCpp changed",{from:o.uCV[G.CommonApp().appType()],to:o.uCV[e.CommonApp().appType()]}),G=e;let{receiveInstance:n,wasmResult:a}=await D(r);(0,s.jS)({callMain:()=>{y.xK.time("callMain",()=>n(a.instance,a.module))},tsApisForCpp:G,registerRefreshCallback:e=>{(0,v.vw)(r,e)}}),H=r,(0,g.nl)()&&o.msz.setIsRunningInteractionTests();let i=k(r);(0,l.sx)("Fullscreen Loaded",{...i})}catch(e){throw(0,l.sx)("Fullscreen Load Failure",{error:e+""}),!e||"Failed to fetch"===e.message||"Could not download wasm module"===e.message||e.message.includes("NetworkError")||e.message.toLowerCase().includes("network error")||(e instanceof Error||(e=Error(`Fullscreen load failure: ${e}`)),(0,h.$D)(i.e.UNOWNED,e)),e.reportedToSentry=!0,e}}function K(){if(N)return!0;let e=Fig.fullscreenURLs["compiled_wasm.js"];return!!(e&&e.startsWith("/"))}},136716:(e,r,n)=>{n.d(r,{Ni:()=>i});var a=(e=>(e.COMMUNITY="community",e))(a||{}),i=(e=>(e.ALL_DISABLED="all_disabled",e.PINNED_DISABLED="pinned_disabled",e.ENABLED="enabled",e))(i||{}),o=(e=>(e.REPORT="report",e.REPORT_AND_HIDE="report_and_hide",e))(o||{})},959130:(e,r,n)=>{n.d(r,{Tf:()=>I,nb:()=>y,YC:()=>A,fA:()=>b,yF:()=>v,Y6:()=>T,hi:()=>w,c_:()=>S}),n(411855),n(188507);var a=n(846288),i=n(875877),o=n(977235),s=n(736942),l=n(23478),c=n(880633),d=n(272314),u=n(816764);let m=(0,u.x)(d.Y,e=>({default_library_file_treatment_id:e.camel().custom({toLiveGraph:e=>void 0===e?null:e,toSinatra:e=>e}),figma_basics_experiment:e.camel().custom({toLiveGraph:e=>void 0===e?null:e,toSinatra:e=>e}),is_template:e.camel().custom({toLiveGraph:e=>void 0===e?null:e,toSinatra:e=>e}),migrated_from_drafts_folder_id:e.camel().custom({toLiveGraph:e=>void 0===e?null:e,toSinatra:e=>e}),source:e.camel().custom({toLiveGraph:e=>void 0===e?null:e,toSinatra:e=>e}),starter_library_src_file_key:e.camel().custom({toLiveGraph:e=>void 0===e?null:e,toSinatra:e=>e})}));(0,u.Q)((e,r,n)=>[e()(m),r(m)(),n(m)()]);var p=n(314540),h=n(183739),_=n(816146),g=n(31393),f=n(522917),E=n(69441),y=(e=>(e.FILE="FILE",e.PROTOTYPE="PROTOTYPE",e.REPO="REPO",e.PINNED_FILE="PINNED_FILE",e.OFFLINE_FILE="OFFLINE_FILE",e))(y||{});function b(e,r){return{type:"FILE",file:{...c.F.toLiveGraph(e),owner:e.owner,trackTags:e.track_tags?m.toLiveGraph(e.track_tags):null,UserFileRecentAny:e.accessed_at?{actionAt:new Date(e.accessed_at)}:void 0},sharedWithYouFields:r??null}}function v(e){let r=(0,l.LH)(e.repo,e.branches,e.selectedBranchKey);return r?r:(e.repo.default_file_key?(0,l.LH)(e.repo,e.branches,e.repo.default_file_key):null)||e.branches[0]}let T=(0,i.atom)(null);class I{static getId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key+","+e.prototype.page_id+","+e.prototype.id;case"REPO":return e.repo.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,a.xb)(e)}}static sameObject(e,r){if(e.type!==r.type)return!1;switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key===r.file.key;case"PROTOTYPE":return e.prototype.id===r.prototype.id;case"REPO":return e.repo.id===r.repo.id;case"OFFLINE_FILE":return e.file.fileKey===r.file.fileKey;default:(0,a.xb)(e)}}static getName(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.name;case"PROTOTYPE":return e.prototype.fig_file.name+" - "+e.prototype.name;case"REPO":return(0,l.oj)(e.repo);default:(0,a.xb)(e)}}static getAccessedAt(e){switch(e.type){case"FILE":return e.file.UserFileRecentAny?.actionAt.toISOString();case"PROTOTYPE":return e.prototype.accessed_at;case"REPO":return e.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,a.xb)(e)}}static getSharedAt(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedAt?.toISOString()??null;case"PROTOTYPE":return e.prototype.shared_at;case"REPO":return e.repo.shared_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getCreatedAt(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.createdAt.toISOString();case"PROTOTYPE":return e.prototype.fig_file.created_at;case"REPO":return e.branches.reduce((e,r)=>e<r.created_at?e:r.created_at,e.repo.created_at);case"OFFLINE_FILE":return new Date(e.file.createdAt).toISOString();default:(0,a.xb)(e)}}static getTouchedAt(e){switch(e.type){case"FILE":return e.file.touchedAt??e.file.updatedAt;case"REPO":return e.branches.reduce((e,r)=>null!==e&&e>r.touched_at?e:r.touched_at,null);case"PROTOTYPE":return e.prototype.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,a.xb)(e)}}static getTrashedAt(e){switch(e.type){case"FILE":return e.file.trashedAt?e.file.trashedAt.toISOString():null;case"PROTOTYPE":return e.prototype.fig_file.trashed_at;case"REPO":return e.repo.trashed_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getTrashedUserId(e){switch(e.type){case"FILE":return e.file.trashedUserId;case"PROTOTYPE":case"REPO":case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getIsFavorited(e){switch(e.type){case"FILE":return!!e.file.isFavorited;case"PROTOTYPE":return!!e.prototype.is_favorited;case"REPO":return!!e.repo.is_favorited;case"PINNED_FILE":case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getFavoritedResourceType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"REPO":case"OFFLINE_FILE":return p.bk.FILE;case"PROTOTYPE":return p.bk.PROTOTYPE;default:(0,a.xb)(e)}}static getFileKey(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return e.repo.default_file_key??void 0;case"OFFLINE_FILE":return;default:(0,a.xb)(e)}}static getUrl(e,r){switch(e.type){case"FILE":return(0,E.to)(e.file);case"PINNED_FILE":return(0,E.jN)(e);case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,l.mr)(e.repo,e.branches,r);return n?(0,l.CE)(n,e.repo,"file"):"";case"OFFLINE_FILE":return"";default:(0,a.xb)(e)}}static getEditUrl(e,r){switch(e.type){case"FILE":return(0,E.rl)(e.file);case"PINNED_FILE":return(0,E.jN)({...e,allowDefaulting:!0});case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,l.mr)(e.repo,e.branches,r);return n?(0,E.rl)(n):"";case"OFFLINE_FILE":return"";default:(0,a.xb)(e)}}static getFavoriteResourceId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.id;case"REPO":return e.repo.default_file_key;case"OFFLINE_FILE":return e.file.fileKey;default:(0,a.xb)(e)}}static getIsTeamTemplate(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.isTeamTemplate;case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getOrgId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.parentOrgId;case"PROTOTYPE":return e.prototype.fig_file.parent_org_id??e.prototype.fig_file.parent_org_id;case"REPO":return e.repo.parent_org?.id??e.repo.parent_org_id;case"OFFLINE_FILE":return e.file.orgId;default:(0,a.xb)(e)}}static getFavoriteResourceTeamId(e){switch(e.type){case"FILE":return e.file.teamId;case"PINNED_FILE":default:return null;case"PROTOTYPE":return e.prototype.parent_team?.id??e.prototype.fig_file?.team_id;case"REPO":return e.repo.parent_team?.id??e.repo.team_id}}static getSharedBy(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedByUser?.id;case"PROTOTYPE":return e.prototype.shared_by_user?.id??e.prototype.shared_by;case"REPO":return e.repo.shared_by_user?.id??e.repo.shared_by;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getSharedByName(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedByUser?.name;case"PROTOTYPE":return e.prototype.shared_by_user?.name;case"REPO":return e.repo.shared_by_user?.name;case"PINNED_FILE":return(0,a.KF)(!0,"Cannot get shared by name from a pinned file"),null;case"OFFLINE_FILE":return(0,a.KF)(!0,"Cannot get shared by name from an offline file"),null;default:(0,a.xb)(e)}}static getOwner(e){switch(e.type){case"FILE":return e.file.owner;case"PINNED_FILE":case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":(0,a.KF)(!0,"Did not expect to render owner for non-file tiles");return;default:(0,a.xb)(e)}}static useIsRenaming(e){let r=(0,i.useAtomValue)(T);return I.isRenaming(e,r)}static isRenaming(e,r){if(!r)return!1;switch(e.type){case"FILE":return"FILE"===r.type&&r.id===e.file.key;case"OFFLINE_FILE":return"FILE"===r.type&&r.id===e.file.fileKey;case"REPO":return"REPO"===r.type&&r.id===e.repo.id;case"PINNED_FILE":case"PROTOTYPE":return!1;default:(0,a.xb)(e)}}static getIsPasswordProtected(e){switch(e.type){case"FILE":return(0,f.Ph)(e.file);case"REPO":return(0,l.yR)(e.repo);case"PROTOTYPE":return(0,f.Uj)(e.prototype.fig_file)||(0,f.i4)(e.prototype.fig_file);case"PINNED_FILE":return(0,f.i4)({has_file_link_password:e.file.hasFileLinkPassword,link_access:e.file.linkAccess});case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getFolderId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.folderId;case"REPO":return e.repo.folder_id;case"PROTOTYPE":return e.prototype.fig_file.folder_id;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getTeamId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.teamId;case"PROTOTYPE":return e.prototype.parent_team?.id??null;case"REPO":return e.repo.team_id;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getThumbnailUrl(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.thumbnailUrlOverride??e.file.thumbnailUrl;case"REPO":let r=v(e);return r?r.thumbnail_url_override??r.thumbnail_url:null;case"PROTOTYPE":return e.prototype.thumbnail_url;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getIsThumbnailFullWidth(e){switch(e.type){case"FILE":case"PINNED_FILE":return!!e.file.thumbnailGuid;case"REPO":let r=v(e);return r?r.thumbnail_guid:null;case"PROTOTYPE":return!0;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getEditorType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.editorType;case"REPO":return p._Y.DESIGN;case"PROTOTYPE":return null;default:(0,a.xb)(e)}}static getClientMeta(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.clientMeta;case"REPO":let r=v(e);return r?r.client_meta:null;case"PROTOTYPE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getPreviewThumbnailUrls(e){return"FILE"===e.type?e.file.signedPreviewThumbnailUrls:"REPO"===e.type?v(e)?.preview_thumbnail_urls:void 0}static getFileKeyForAutosaveChanges(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return v(e)?.key;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}}function S(e){let r=I.getFileKeyForAutosaveChanges(e);return(0,g.I4)(r||"")}let w=(0,i.atomFamily)(e=>(0,i.atom)(r=>"FILE"===e.type||"PINNED_FILE"===e.type?r(h.sMs.Query({key:e.file.key})).transform(e=>!!e.file?.hasPermission):"REPO"===e.type?r(h.cfd.Query({repoId:e.repo.id})).transform(e=>!!o.oA(e.repo)?.canView):"PROTOTYPE"===e.type?r(h.eSI.Query({prototypeId:e.prototype.id})).transform(e=>!!o.oA(e.prototype)?.canRead):"OFFLINE_FILE"===e.type?s.Qw.loaded(!0):void(0,a.xb)(e)),I.sameObject),A={FILE:_.F.FILES,PROTOTYPE:_.F.PROTOTYPES,REPO:_.F.REPOS,PINNED_FILE:_.F.PINNED_FILES,OFFLINE_FILE:_.F.OFFLINE_FILES}},773236:(e,r,n)=>{n.d(r,{H:()=>_});var a=n(411855),i=n(351966),o=n(629019),s=n.n(o),l=n(693565),c=n(265851),d=n(960557),u=n(926996),m=n(507121),p=n(586887),h=n(366370);function _({children:e,large:r,brandTextColor:n,...o}){let _=(0,u._6)(),g=a.useRef(null);(0,d.Z)("light",g);let f=(0,m.ju)(_);return a.createElement("div",{ref:g,"data-editor-theme":f},a.createElement(i.E,{htmlAttributes:{"data-test-id":"google-btn"},className:s()(p.x6,p.zB,r?p.as:p.Hg,n&&c.s.colorTextBrand.$),...o},a.createElement("span",{className:p._d},a.createElement(l.B,{className:p.Kk,svg:h.A,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("span",{className:p.IO},e))))}},58590:(e,r,n)=>{n.d(r,{LR:()=>b,_i:()=>T,kg:()=>v,ts:()=>y});var a=n(411855),i=n(188507),o=n(511445),s=n(805014),l=n(991458),c=n(612724),d=n(845331),u=n(315145),m=n(73041),p=n(343373),h=n(968525),_=n(220482),g=n(708862),f=n(81818),E=n(488527);function y(e,r=552,n=320){let[i,s]=a.useState(),[d,u]=a.useState(),[h,g]=a.useState(!1),b=(0,p.GS)(),v=(0,m.ow)();return a.useLayoutEffect(()=>{let a=()=>{let a,i;switch(e.kind){case"mountCenter":a=window.innerWidth/2,i=window.innerHeight/2;break;case"buttonTarget":let o=(0,_.Tc)(e.buttonTarget);if(!o)return;let d=o.getBoundingClientRect();a=d.x+d.width/2,i=d.y;break;case"sourceRect":a=e.sourceRect.x+e.sourceRect.width/2,i=e.sourceRect.y}let u=a-n/2,m=i-r-12;window.innerWidth-u<n?(h||g(!0),u=window.innerWidth-n-f.wR):h&&g(!1);let p=b?(0,l.hG)(E.kLt)+(0,l.hG)(E.M$q):(0,l.hG)(E.tui);m=Math.max((v?p:0)+f.wR,m),s(new c.Mi(u,m))};setTimeout(a,0);let i=(0,o.s)(a,100);return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[e,r,n,h,b,v]),{initialModalPosition:i,modalPosition:d,setModalPosition:u,modalWasClippedByRightSide:h}}function b(){let e=(0,i.wA)();return a.useCallback((r=!0)=>{s.glU&&r&&s.glU.triggerAction("set-tool-default",null),e(u.KE())},[e])}function v(e){return e.mirror.appModel.currentTool===s.NLJ.NONE&&e.universalInsertModal.showing&&e.universalInsertModal.pinned===g.t.NOT_PINNED}function T(e,r,n,o){let s=(0,i.wA)(),l=(0,i.d4)(e=>(0,h.T9)({authedProfilesById:e.authedProfilesById,userId:e.user?.id}));return{unsave:a.useCallback(n=>{e&&s((0,d.s1)({id:e,resourceType:r,communityProfile:l||void 0,hideSuccessVisualBell:n,source:d.uR.INSERTS_MODAL,optimisticData:{pluginInstallId:o}}))},[e,s,r,l,o]),save:a.useCallback((a,i)=>{e&&s((0,d.d6)({id:e,resourceType:r,communityProfile:l||void 0,onSuccess:a,hideSuccessVisualBell:i,source:d.uR.INSERTS_MODAL,optimisticData:{resource:n}}))},[e,s,r,l,n])}}},125682:(e,r,n)=>{n.d(r,{BK:()=>l,Um:()=>s});var a=n(411855),i=n(188507),o=n(47795);function s(){return(0,i.d4)(e=>e.dropdownShown)}function l(e){let r=(0,i.wA)(),n=s();return(0,a.useMemo)(()=>{let{type:a,...i}=n||{},s=a===e;function l(){r(o.oB())}function c(n={}){r(o.j7({...n,type:e}))}return{...i,showing:s,hide:l,show:c,toggle:function(e={}){s?l():c(e)}}},[r,n,e])}(0,n(927150).bt)(e=>e.dropdownShown)},230865:(e,r,n)=>{n.d(r,{vD:()=>a}),n(730676),n(492366);let a=(0,n(401562).n)(e=>(function(e){if(!e)return"OTH";let r={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in r)return r[e];let n={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in n?n[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"})(e?.profile?.job_title??"OTH"))},663194:(e,r,n)=>{n.d(r,{T:()=>d});var a=n(707062),i=n(777535),o=n(841962),s=n(728722),l=n(238311),c=n(183739);function d(e){let{getConfig:r}=(0,l.I7)("file_view_history_exp_team"),n=(0,s.Rs)(c.X7G,{teamId:e||""},{enabled:!!e});if((0,o.kc)().file_view_history)return!0;let d=!!(0,a.oA)(n.data?.team?.canEnterFileViewHistoryExp);return!!d&&((0,i.sx)("file_view_history_exp_team_exposure",{teamId:e,canEnterFileViewHistoryExp:d,file_view_history_ff:(0,o.kc)().file_view_history}),!!r().getValue("enabled",!1))}},427494:(e,r,n)=>{n.d(r,{B9:()=>E,KH:()=>u,aV:()=>_,ax:()=>m,dH:()=>h,eY:()=>d,f4:()=>p,p8:()=>g});var a=n(411855),i=n(188507);n(48451);var o=n(650437);n(805014),n(245954),n(108982);var s=n(570423);let l=e=>e?.mirror?.sceneGraph,c=()=>(0,i.Pj)();function d(){return(0,i.d4)(l)}let u=()=>(0,i.d4)(e=>e.mirror.sceneGraphSelection);function m(){return!(0,i.d4)(e=>(0,o.Im)(e.mirror.sceneGraphSelection))}function p(e){let r=c(),n=u(),i=(0,a.useRef)();i.current=()=>{e(r.getState())},(0,a.useEffect)(()=>{i.current()},[n])}function h(){return(0,i.d4)(e=>e?.mirror?.appModel?.currentTool)}function _(){return(0,i.d4)(e=>(0,s.T)(e?.progressBarState?.mode))}function g(e){return(0,i.d4)(r=>r.mirror.appModel[e])}let f=(0,a.createContext)(null);function E(){let e=(0,i.d4)(e=>e.mirror.sceneGraph);return(0,a.useContext)(f)||e}},407498:(e,r,n)=>{n.d(r,{KV:()=>y,P3:()=>_,Tm:()=>h,Wy:()=>d,Zz:()=>b,eE:()=>E,rq:()=>m,xk:()=>c});var a=n(805014),i=n(875877),o=n(138053),s=n(927150),l=n(751160);let c=60;var d=(e=>(e[e.SAFE=0]="SAFE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.OOM=3]="OOM",e))(d||{});let u=(0,i.atom)(null);function m(e){}(0,i.atom)(e=>!!e(u));let p=(0,i.withEffect)((0,i.atomWithReducer)({mallocLevelBytes:0,heapMemoryLimit:1/0},()=>({mallocLevelBytes:(0,o.Yc)(),heapMemoryLimit:a.hMR.getHeapMemoryLimit()})),({setSelf:e})=>{e();let r=setInterval(e,5e3);return()=>clearInterval(r)}),h=(0,i.atom)(e=>{let{mallocLevelBytes:r,heapMemoryLimit:n}=e(p),a=e(u),i=r/n*100;return a&&(i=a),i=Math.round(100*(i=Math.max(0,i=Math.min(100,i)))+Number.EPSILON)/100},(e,r)=>{r(p)});function _(){return i.atomStore.set(h),i.atomStore.get(h)}let g=(0,s.bt)(e=>e.modalShown?.type===l.Lu),f=(0,i.atom)(e=>{let r=e(h);return e(g)?3:r>=75?2:r>=c?1:0},(e,r)=>{r(h)}),E=(0,i.withChangeListener)(f,e=>a.glU.setMemoryWarningLevel(e));function y(e,r){return(0,o.Yc)()/r*e/a.hMR.getHeapMemoryLimit()}function b(){let e=a.Hcu.getSubtreeMemoryUsage(["0:2"]);return(0,o.Yc)()/a.Hcu.getSubtreeMemoryUsage(["0:0"])*e*100/a.hMR.getHeapMemoryLimit()}},73424:(e,r,n)=>{n.d(r,{Fy:()=>y,QR:()=>g,VI:()=>E,_Z:()=>_,lH:()=>f});var a=n(411855),i=n(188507),o=n(805014),s=n(245954),l=n(875877),c=n(475824),d=n(758133),u=n(923219),m=n(797187),p=n(507121),h=n(317384);function _(){return function({selectedView:e,isLoadingVersionHistory:r,theme:n}){let i=e?.view==="prototype",d=i?null:(0,s.UN)().getCurrentPage(),_=a.useMemo(()=>d?.backgroundColor,[d]),f=!!(0,m.ut)(o.Ez5?.currentPageState().requestedPageChange,""),E=(0,l.useAtomValue)(h.s6),y=(0,l.useAtomValue)(h.rp),b=(0,l.useAtomValue)(g),v=(0,l.useAtomValue)(h.nc);return a.useMemo(()=>{let e;if(i)return{isLoading:!1};let a=(0,u.E7)(_);return(e=null!==a?c.F.format(a):n&&"dark"===(0,p.i_)(n)?"rgba(30, 30, 30, 1)":"rgba(229, 229, 229, 1)",null!=a?(a.a=.7,e=c.F.format(a)):e="rgba(229, 229, 229, 0.1)",E)?{background:e,isLoading:!1}:{background:e,isLoading:!!r||f||v||y||b,isLoadingMissingFonts:b}},[i,_,n,E,r,f,v,y,b])}({selectedView:(0,i.d4)(e=>e.selectedView),isLoadingVersionHistory:i.d4(e=>e.versionHistory)?.isLoadingPage,theme:(0,d.DP)()})}let g=(0,l.atom)(!1);function f(e){return e.some(e=>e.status!==o.xal.LOADED)}function E(e){return e.every(e=>e.status===o.xal.LOADED)}function y(e,r){for(let n of e)if(n.nodeId===r)return n.status;return null}},568116:(e,r,n)=>{n.d(r,{g5:()=>d});var a=n(411855),i=n(188507);n(336427);var o=n(841962);n(728722),n(524940),n(431244),n(183739);var s=n(957020),l=n(775338);n(176160);var c=n(15092);function d(e){let r=(0,i.d4)(e=>e.library),n=(0,l.OC)(),d=(0,c.TA)(),u=(0,i.d4)(e=>e.recentlyUsed.libraryItems);return(0,a.useMemo)(()=>{let a=[],i=[];for(let l of u[e])if(null!==d?l.last_added_at_by_user_id?.[d]:void 0){if(l.type===s.PW.COMPONENT||l.type===s.PW.STATE_GROUP){let e=function(e,r){let n=e.library_key,a=e.team_id,i=e.node_id;return e.type===s.PW.COMPONENT?r.publishedByLibraryKey.components[a]?.[n]?.[i]||r.defaultPublished.componentsByLibraryKey[n]?.[i]:e.type===s.PW.STATE_GROUP?r.publishedByLibraryKey.stateGroups[a]?.[n]?.[i]||r.defaultPublished.stateGroupsByLibraryKey[n]?.[i]:void 0}(l,r);e&&a.push(e)}else if(l.type===s.PW.MODULE&&(0,o.kc)().dse_editor_templates_v1&&n.data){let e=function(e,r){if(e.library_key)return r[e.library_key]?.find(r=>r.node_id===e.node_id)}(l,n.data);e&&i.push(e)}}return{productComponents:a,templates:i}},[u,e,r,n,d])}},136389:(e,r,n)=>{n.d(r,{p:()=>i});var a=n(188507);function i(){return(0,a.d4)(e=>e.sharingAttributionContextKey||null)}},798361:(e,r,n)=>{n.d(r,{BI:()=>c,F4:()=>d,Jj:()=>o,Jp:()=>l,Kx:()=>u,Rf:()=>i,Yi:()=>_,e8:()=>p,h4:()=>m,m0:()=>h,sc:()=>s});var a=n(747484);function i(){return window.FigmaMobile}function o(){return window.FigmaMobile}function s(){return o()}function l(){return window.FigmaMobile}function c(){return window.FigmaMobile}function d(){return window.FigmaMobile}function u(){return d()}function m(){return window.FigmaMobile}function p(){return window.FigmaMobile}function h(){return window.FigmaMobile}function _(e){let r=window.FigmaMobile;return"prototype"===e.view?a.Ay.isMobileBrowser&&!e.commentsEnabled:"fullscreen"===e.view&&!!r?.shouldOptimizeForIpadApp&&!e.commentsEnabled}},489118:(e,r,n)=>{n.d(r,{$P:()=>v,d0:()=>b,kn:()=>T});var a=n(411855),i=n(188507),o=n(48451),s=n(336427),l=n(746643),c=n(83952),d=n(731556),u=n(965361),m=n(366172),p=n(737976),h=n(695024),_=n(804197),g=n(297713),f=n(110545),E=n(345526),y=n(798361);function b(e,r,n,o,s){let c=(0,y.h4)(),g=(0,i.wA)(),f=(0,u.I_)(),b=(0,E.s)(),v=(0,p.Z)();a.useEffect(()=>{c&&(c._select_comment=e=>{let a=r.find(r=>r.id===e);a&&g(d.At({receiptsAPI:f.commentReceipts,thread:a,viewport:n,skipDeactivatingExistingActiveComment:!0,config:b,navigate:v}))})},[c,g,r,f,n,b,v]),a.useEffect(()=>{c&&(c._add_draft_comment=e=>{let r=(0,h.$$)(n.getViewportInfo(),e);g(d.vV({anchorPosition:r})),g(d.CX())})},[c,g,n]),a.useEffect(()=>{c&&(c._deselect_comment=e=>{g(d.UU())},c._remove_draft_comment=()=>{e===_.hm&&g(d.UU())})},[c,e,g]),a.useEffect(()=>{c&&(c._submit_comment_draft=e=>{g(d.Z5({messageMeta:e})),s()})},[c,e,g,s]),a.useEffect(()=>{c&&o&&(c._set_comments_visibility=e=>{m.Y5.triggerAction("toggle-show-comments",{source:"mobile_app"})})},[c,o]),a.useEffect(()=>{c&&(c._pan_canvas=e=>{let r=n.getViewportInfo();n.navigateTo({x:r.offsetX+e.x/r.zoomScale,y:r.offsetY+e.y/r.zoomScale},r.zoomScale)})},[c,n]),a.useEffect(()=>{c&&!c._recenter_comment&&(c._recenter_comment=l.lQ),c&&!c._recenter_draft_comment&&(c._recenter_draft_comment=l.lQ)},[c])}function v(e,r,n,l,c){let d=(0,y.sc)();a.useEffect(()=>{d?.updateCommentVisibility&&!l&&d.updateCommentVisibility(null!==c)},[d,l,c]);let u=(0,i.d4)(e=>e.comments.newComment),m=a.useMemo(()=>{if(e===_.hm){if(!u.anchorPosition)return null;{let e=(0,h.Z0)(n.getViewportInfo(),u.anchorPosition);return{x:e.x,y:e.y,width:36.8,height:36.8}}}let a=r.find(r=>r.id===e);if(!a||!a.canvasPosition)return null;let i=(0,h.Z0)(n.getViewportInfo(),a.canvasPosition),o=(0,f.c4)(a.comments).length,s=g.XC.getPinSize(o);return{x:i.x,y:i.y,width:1.15*s.width,height:1.15*s.height}},[e,u,r,n]),p=(0,s.ZC)(e),E=(0,s.ZC)(m);a.useEffect(()=>{e&&m&&e===p&&E&&!(0,o.c2)(m,E)&&(e===_.hm?d?.updateDraftCommentPinPosition?.(m):d?.updateCommentPinPosition?.(e,m))},[d,e,m,E,p])}function T(e,r){let n=(0,y.sc)(),i=a.useContext(c.W);a.useEffect(()=>{n?.updateCommentVisibility&&n.updateCommentVisibility(e)},[n,e]),a.useEffect(()=>{!e&&i&&r?.current&&(i.uninstallTapGestureRecognizer(r.current),i.uninstallMultiTouchLongPressGestureRecognizer(r.current,1))},[e,i,r])}},857012:(e,r,n)=>{n.d(r,{A8:()=>f,AD:()=>v,D4:()=>b,Py:()=>A,Q2:()=>g,Wq:()=>y,_i:()=>I,pl:()=>E,uC:()=>S,wF:()=>w});var a=n(411855),i=n(188507),o=n(236891),s=n(336427),l=n(841962),c=n(728722),d=n(977235),u=n(15721),m=n(343373),p=n(183739),h=n(663194),_=n(176160);let g=4,f=8,E=22;function y(e){let r=(0,m.GS)(),n=b(),a=function(e){let{isPropertiesPanelCollapsed:r}=(0,u.iT)(),n=(0,l.kc)().async_spotlight?2:3;return!e||r?n:Math.max(n,Math.min(Math.floor(e/E),f))}(e);return r?a:n}function b(){let[e,r]=a.useState(g);return a.useEffect(()=>{let e=()=>{window.innerWidth<786?r(2):r(g)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function v(e){return"sessionID"in e}let T=e=>{let{user:r,sessionID:n,presenterSessionID:a,lastObservedSessionID:i,fileCreatorID:o,mostActiveSpeakerID:s,observingSessionID:c}=e;return v(r)&&r.sessionID===n?0:v(r)&&a&&r.sessionID===a?1:v(r)&&c&&r.sessionID===c?2:(0,l.kc)().live_feedback_large_meetings&&v(r)&&i&&r.sessionID===i?3:v(r)&&r.userID===o?4:r.userID===s?5:r.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function I(e,r){let n=e;return r&&(n=n.filter(e=>v(e)&&e.deviceName===r)),n=n.filter(e=>!v(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}function S(e,r,n,l,c){let d=(0,i.d4)(e=>e.multiplayer.sessionID),u=(0,i.d4)(e=>e.multiplayer.observingSessionID),m=(0,i.d4)(e=>e.multiplayer.presenterSessionID),p=(0,i.d4)(e=>e.multiplayer.deviceNameFilter),h=(0,_.q5)(),[g,f]=a.useState(null),E=(0,s.ZC)(u);E!==u&&(0,o.Vq)(E)&&-1!==E&&E!==g&&f(E);let y=a.useMemo(()=>({sessionID:d,observingSessionID:u,presenterSessionID:m,lastObservedSessionID:g,mostActiveSpeakerID:c,fileCreatorID:h?.creatorId,deviceNameFilter:p}),[d,u,m,g,c,h?.creatorId,p]),{users:b,overflowUsers:S}=a.useMemo(()=>(function(e,r,n,a,i){let{deviceNameFilter:o}=i,s=[],l=[...e];return l&&0!==l.length?(l.sort((e,r)=>{let n=T({...i,user:e})-T({...i,user:r});if(0!==n)return n;let a=e.name.toLocaleLowerCase(),o=r.name.toLocaleLowerCase();return v(e)&&v(r)&&a===o?e.sessionID-r.sessionID:a>o?1:-1}),(l=I(l,o)).length>=a&&(s=l.slice(a-1),l=l.slice(0,a-1)),{users:l,overflowUsers:s}):r&&!n?{users:[r],overflowUsers:[]}:{users:[],overflowUsers:[]}})(e,r,n,l,y),[e,r,n,l,y]);return{users:b,overflowUsers:S}}function w(){let e=(0,_.q5)(),r=e?.key,n=e?.teamId,i=(0,h.T)(n),o=(0,c.Rs)(p.JvY,{fileKey:r??""},{enabled:!!r&&i});return a.useMemo(()=>{if("loaded"!==o.status)return;let e=(0,d.oA)(o.data?.file?.fileViewHistory);return(e?.map(e=>({userID:e.user.id,name:e.user.name,imageUrl:e.user.imgUrl,viewedAt:e.viewedAt}))||[]).sort((e,r)=>r.viewedAt.getTime()-e.viewedAt.getTime())},[o])}function A(e){return"viewedAt"in e}},176160:(e,r,n)=>{n.d(r,{As:()=>S,Cq:()=>M,Dz:()=>y,Hu:()=>I,K5:()=>O,MY:()=>b,XJ:()=>C,_G:()=>L,_S:()=>N,bv:()=>F,q5:()=>D,sS:()=>w,tB:()=>v,tS:()=>k,vu:()=>R,yV:()=>T,ze:()=>A});var a=n(188507),i=n(33011),o=(n(598002),n(777535),n(336427),n(108982)),s=n(841962),l=n(875877),c=n(198003),d=n(728722),u=(n(139879),n(736942)),m=n(746643),p=n(274585),h=n(927150);n(314540);var _=n(183739),g=n(785965),f=n(505534),E=n(401562);async function y(e){let r=e.getState().selectedView,n="fullscreen"===r.view&&r.fileKey;return n&&(await (0,c.Ek)(_.ehp,{fileKey:n})).file||null}function b(){let e=(0,a.d4)(e=>e.selectedView),r=e?.view==="fullscreen"?e.fileKey:void 0,n=(0,d.Rs)(_.ehp,{fileKey:r||""},{enabled:!!r});return u.Qw.useTransform(n,({file:e})=>e)}function v(e){return e.openFile}let T=(0,h.bt)(v),I=(0,l.atom)(e=>{let r=e(T),n=e(g.m);return r?.teamId?n[r.teamId]??null:null}),S=(0,l.selectAtom)(T,e=>e?.teamId??void 0);function w(e){return e.openFile?.key||null}(0,l.selectAtom)(T,e=>e?.team?.workspaceId??void 0);let A=(0,h.bt)(w);function C(e){let r=v(e);return r?(0,i.l)(r.libraryKey):null}let N=(0,h.bt)(C),L=(0,E.D)(()=>(0,l.useAtomValue)(N));function O(){let e=k(),r=L();return(0,p.i)(e,r)}function R(e){return e.openFile?.key&&e.fileByKey[e.openFile.key]||null}function P(){return(0,a.d4)(v)}let D=(0,s.kc)().preload_open_editor_file_data?function(){let e=(0,a.d4)(e=>e.selectedView),r=function(){let e=(0,a.d4)(e=>e.selectedView?.view==="fullscreen"?e.selectedView.fileKey:null),r=(0,d.rp)((0,_.ehp)(e?{fileKey:e}:null));return u.Qw.useTransform(r,({file:e})=>e)}(),n=P();return e?.view==="prototype"?n:r.data??null}:P,k=(0,E.D)(()=>D()?.key||null);function M(e){return F((0,o.R)(e=>({openFile:e.openFile,fileByKey:e.fileByKey})),e)}function F(e,r){let n=R(e);return r?.useSinatraType?n:n?(0,f.UE)(n):null}(0,s.kc)().preload_open_editor_file_data||m.lQ},849331:(e,r,n)=>{n.d(r,{AF:()=>l,FC:()=>s,h:()=>c,sj:()=>d});var a=n(188507);n(728722),n(736942),n(183739);var i=n(305216),o=n(510669);function s(){return(0,a.d4)(o.getPermissionsState,a.bN)}function l(){return(0,a.d4)(e=>(0,i.Pq)({copyExportRestrictedArgs:e.openFile}))}function c(){return(0,a.d4)(e=>!!e.openFile&&(0,i.Pe)(e.openFile))}function d(e){let r=s();return(0,o.isFileFigjamDisabled)(e,r)}},58799:(e,r,n)=>{n.d(r,{$0:()=>k,By:()=>B,D_:()=>C,HG:()=>U,Lt:()=>L,Pi:()=>x,VA:()=>F,Ww:()=>D,c3:()=>N,dR:()=>M,oW:()=>P,y:()=>V});var a=n(411855),i=n(188507),o=n(846288),s=n(236891),l=n(805014),c=n(336427),d=n(875877),u=n(747484),m=n(705158),p=n(399991),h=n(851390),_=n(76265),g=n(553362),f=n(620532),E=n(178035),y=n(534294),b=n(225371),v=n(761263),T=n(963993),I=n(49039),S=n(926996),w=n(608520);let A=(0,p.nl)()?0:6e3;var C=(e=>(e.INITIAL="initial",e.NEXT="next",e))(C||{});let N=(0,y.nF)((e,r)=>{let n=e.getState().multiplayer.allUsers.find(e=>e.sessionID===r.presenterSessionID),a=n?.name??"",i=n?(0,_.t)("collaboration.spotlight.visual_bell.user_left_the_spotlight",{userName:a}):(0,_.t)("collaboration.spotlight.visual_bell.the_presenter_left_the_spotlight");e.dispatch(g.F.enqueue({message:i,type:"presentation_stopped_alert"}))}),L=(0,y.nF)((e,r)=>{e.dispatch(g.F.dequeue({matchType:"presentation_stopped_alert"}))}),O=(e,r,n,a)=>{let i=(0,s.Vq)(r)&&e!==r,o=n===r,l=a===r;return i&&!o&&!l};function R(){let e=(0,S.z3)(),r=(0,i.wA)(),n=(0,i.d4)(e=>e.multiplayer),o=a.useCallback(e=>{r(b.J4({...n,observingSessionID:e}))},[n,r]),s=a.useCallback(e=>{l.h3O.observeUser(e)},[]);return"prototype"===e?o:s}function P(e){let{multiplayer:{observingSessionID:r,presenterSessionID:n,sessionID:l}}=e,u=(0,i.wA)(),p=(0,S.z3)(),h=(0,d.useAtomValue)(m.Dv),[_,g]=a.useState("initial"),f=(0,c.ZC)(n),E=r===n,y=l===n||h,b=O(f,n,r,l),[v,I]=a.useState(null);a.useEffect(()=>{let e=null;return null!=v&&(e=setTimeout(()=>I(null),1e3)),()=>{e&&clearTimeout(e)}},[v]);let C=R(),P=a.useCallback(()=>{(0,s.Vq)(n)&&("prototype"!==p&&(0,T.wr)(),C(n))},[n,C,p]),D=a.useCallback(()=>{P(),n&&I(n)},[n,P]);v===r&&I(null);let{isActive:k,start:M,cancel:F,complete:x}=(0,w.Z)(D),U=a.useCallback(()=>{F(),I(null)},[F]),B=b&&r===f,V=b&&!B,G=(0,s.uy)(n)&&(0,s.Vq)(f)&&r===f;k&&y&&U(),a.useEffect(()=>{B&&(u(L()),M(2e3),g("next"))},[u,B,M]),a.useEffect(()=>{V&&(u(L()),M(A),g("initial"))},[u,V,M]),a.useEffect(()=>{G&&(C(-1),U(),u(N({presenterSessionID:f})))},[U,u,f,G,e.multiplayer,C]),a.useEffect(()=>{k&&E&&U()},[E,U,k]);let H=(()=>{switch(_){case"next":return 2e3;case"initial":return A;default:(0,o.xb)(_)}})();return{isAutoFollowPending:!y&&(V||B||k||null!=v),cancelAutoFollowCallback:U,completeAutoFollowCallback:x,observeCurrentPresenter:P,autoFollowType:_,autoFollowDelayMs:H}}function D(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.sessionID)??null}function k(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.observingSessionID)??null}function M(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.presenterSessionID)??null}function F({multiplayer:e}){let r=function(){let e=U(),r=(0,I.XM)(),n=(0,E.hA)(),a=(0,E.l7)(),i=(0,f.e)();return!!e&&!r&&!n&&!a&&!i}(),n=e.presenterSessionID===e.sessionID,i=(0,S.z3)(),o=a.useCallback(()=>{"prototype"===i?h.hk()?.stopPresenting():l.h3O.stopPresenting()},[i]);a.useEffect(()=>{!r&&n&&o()},[r,n,o])}function x({multiplayer:e}){let r=R(),n=!B(),i=-1!==e.observingSessionID;a.useEffect(()=>{!n&&i&&r(-1)},[n,i,r])}function U(){return!((0,u.o4)()&&(0,u.Q1)()&&!(0,u.wg)()||v.z4?.getIsExtension())}function B(){let e=(0,I.XM)(),r=(0,I.e2)(),n=(0,E.hA)(),a=(0,E.l7)();return!!e||!!r||!!n||!!a}function V(){let e=(0,i.d4)(e=>e.multiplayer),r=e.sessionsNominatingCurrentUser[0];return r?e.allUsers.find(e=>e.sessionID===r)??null:null}},340638:(e,r,n)=>{n.d(r,{TN:()=>l});var a=n(188507),i=n(510669),o=n(532847),s=n(163962);function l(e){let r=!!(0,s.q)({teamId:e,flag:o.uU}),n=(0,a.d4)(r=>r.teams[e]),l=(0,a.d4)(e=>(0,i.getPermissionsStateMemoized)(e));return o.ng.getProTrial(n,r,l)}},988523:(e,r,n)=>{n.d(r,{Fl:()=>b,ug:()=>T,wW:()=>E});var a=n(411855),i=n(188507),o=n(108982);n(807767);var s=n(399991),l=n(20174),c=n(483717),d=n(15092),u=n(354465),m=n(364934),p=n(60077);new class{constructor(){this.BatchedSchemaValidator=(0,p.vh)()}getBatched(e){return this.BatchedSchemaValidator.validate(async({xr:r})=>await r.get("/api/users/batched",p.td.toAPIParameters({userIds:e.userIds.join(",")})))}};let h=e=>r=>e&&r.publicUsers.byId[e]||null,_=e=>r=>{let n=r.multiplayer.allUsers.find(r=>r.userID===e);return n?v(n):null},g=e=>r=>{let n=r.user,a=_(e)(r);return n&&n.id===e?n:a||null},f=e=>r=>{let n=g(e)(r),a=h(e)(r);return n||a||null};function E(e){let r=(0,o.R)(g(e)),n=function(e){let r=(0,i.wA)(),n=`PUBLIC_USER_FETCH_${e}`,o=(0,i.d4)(e=>e.loadingState),s=(0,i.d4)(h(e)),m=function(e){let r=!!(0,d.iZ)();return!!e&&!b(e)&&r}(e),p=!!s,_=!p&&(0,u.VP)(o,n),g=!p&&(0,u.aF)(o,n),f=!p&&m&&!_&&!g;return(0,a.useEffect)(()=>{f&&(r(l.Cx({key:n})),y(e).then(e=>{r(c.yJ({user:e})),r(l.yH({key:n}))}).catch(()=>{r(l.of({key:n}))}))},[r,e,f,n]),{user:s,loading:_,hasError:g}}(r?null:e);return r?{user:r,loading:!1,hasError:!1}:n}let y=e=>m.k.getUser({userId:e}).then(e=>e.data.meta).catch(e=>{throw(0,s.Lg)()||console.warn("Failed to get public user"),e}),b=e=>e.startsWith("VISITOR-"),v=e=>({id:e.userID,name:e.name,handle:e.name,img_url:e.imageURL});async function T({state:e,dispatch:r,userId:n}){let a=f(n)(e);if(a)return a;if(b(n))return null;let i=e.user,o=b(n);if(!(!a&&!o&&i))return null;let s=await y(n);return r(c.yJ({user:s})),s}},473675:(e,r,n)=>{n.d(r,{N:()=>i});var a=n(411855);function i(e,r=!0){(0,a.useEffect)(()=>{if(!r)return;let n=!0,a=performance.now(),i=r=>{if(!n)return;let o=r-a;a=r,e(o),requestAnimationFrame(i)};return requestAnimationFrame(i),()=>{n=!1}},[r,e])}},368418:(e,r,n)=>{n.d(r,{t:()=>T});var a=n(411855),i=n(188507),o=n(512729),s=n(747484),l=n(563192),c=n(612724),d=n(622667),u=n(366172),m=n(963993),p=n(695024),h=n(798361);let _=e=>{let r=e.target;for(;r&&"body"!==r.tagName.toLowerCase();){let e=getComputedStyle(r).overflowY;if("scroll"===e||"auto"===e)return!0;r=r.parentElement}return!1};var g=n(787348);function f(){return Array.from(document.querySelectorAll('[data-cancel-insertable-resource-drag-and-drop="true"]')).map(e=>e.getBoundingClientRect())}function E(e,r){return(0,c.gR)(u.Y5.getViewportInfo(),e)&&!r.some(r=>(0,c.gR)(r,e))}var y=n(921249),b=n(983878),v=n(554147);function T(e,r){let n=(0,i.Pj)(),T=(0,i.wA)(),I=new Image,S=a.useRef(!1),w=a.useRef(void 0),A=a.useRef([]),[C,N,L]=(0,b.J)(null),{state:O,dispatch:R}=a.useContext(v.nS);(0,o.h)(()=>{r.preloadThumbnail&&(I.src=r.getDragPreviewSrc())});let P=function(e){let{onDelayedDragSuccess:r,onDelayedDragCancelled:n}=e,i=(0,h.BI)(),o=a.useRef(void 0),l=a.useRef(-1),d=a.useCallback(e=>{e.preventDefault()},[]),u=()=>{clearTimeout(l.current),l.current=-1},m=a.useCallback(e=>{-1!==l.current&&e.pointerId===o.current?.pointerId&&c.Mi.distance(new c.Mi(o.current.clientX,o.current.clientY),new c.Mi(e.clientX,e.clientY))>10&&(n(),u(),document.removeEventListener("touchmove",d),document.removeEventListener("pointermove",m),o.current=void 0)},[n,d]),p=a.useCallback(e=>{document.removeEventListener("touchmove",d),document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",p),o.current=void 0,u()},[d,m]);return e=>{"mouse"!==e.pointerType&&(i?.shouldOptimizeForIpadApp||s.Ay.isMeetDevice)&&_(e)?(document.addEventListener("pointermove",m),document.addEventListener("pointerup",p),o.current=e,l.current=setTimeout(()=>{document.addEventListener("touchmove",d,{passive:!1}),r(e)},250)):r(e)}}({onDelayedDragSuccess:n=>{document.addEventListener("pointermove",k,{passive:!1}),w.current=new c.Mi(n.clientX,n.clientY),I.src=r.getDragPreviewSrc(),r.onPointerDownCallback?.();let a=n.currentTarget;a||console.error("Expected dragTarget to be non-null, but it's null. If this is an interaction test, you may need to add a currentTarget argument to the args in t.do()");let i=a.getBoundingClientRect(),o=new c.Mi(n.clientX,n.clientY);L(r=>({...r,draggingResource:e.resource,isDraggingOverCanvas:!1})),I.onload=()=>{let n=I.naturalWidth/2,a=I.naturalHeight/2,{dragOffset:s,pointerPercentageOffset:l,draggingThumbSize:d}=(0,g.T)(r.dragPreviewPointerPosition,new c.Mi(n,a),o,i);L(r=>r?{...r,dragOffset:s,grabbedPointerPercentageOffset:l,draggingThumbSize:d,draggingThumbMaxDimensions:e.draggingThumbMaxDimensions}:r)}},onDelayedDragCancelled:()=>{S.current=!1}}),D=l.BV(l.Pt("insertableResource",r.recordingKey||""),"pointerdown",e=>{2===e.button||e.ctrlKey||(e.stopPropagation(),s.Ay.isMeetDevice&&R({type:"start click"}),A.current=f(),document.addEventListener("pointerup",M),s.Ay.isMeetDevice&&document.addEventListener("touchend",M),S.current=!0,P(e))}),k=a.useCallback(l.BV(l.Pt("insertableResource",r.recordingKey||""),"pointermove",r=>{let a=n.getState().mirror.sceneGraphSelection,i=C.current;if(!i)return;r.preventDefault();let o=new c.Mi(r.clientX,r.clientY),s=E(o,A.current),l=i.draggingResource,p={dragPosition:o,isDraggingOverCanvas:s};S.current&&i.dragPosition&&w.current&&w.current.distanceTo(o)>y.Nq&&(a&&l&&(m.wr(),u.Y5.commit(),T(d.jD())),e.onDragStart?.(),S.current=!1),L(e=>({...e,...p}))},{recordMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),a=new c.Mi(e.clientX,e.clientY).subtract(n),i=(0,p.$$)(r,a);return{shiftKey:e.shiftKey,metaKey:e.metaKey,canvasPosition:i}},playbackMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),a=(0,p.Z0)(r,e.canvasPosition),i=c.Mi.add(a,n);return{shiftKey:e.shiftKey,metaKey:e.metaKey,clientX:i.x,clientY:i.y}}}),[n,C,L,e.onDragStart]),M=a.useCallback(l.BV(l.Pt("insertableResource",r.recordingKey||""),"pointerup",n=>{let a=C.current;if((e.recomputeCancelRectsOnPointerUp&&a?.dragPosition?E(a?.dragPosition,f()):a?.isDraggingOverCanvas)&&a?.dragPosition||S.current&&e.clickToInsert_DEPRECATED){s.Ay.isMeetDevice&&R({type:"end insert"});let i=(0,y.zR)(S.current?void 0:a?.dragPosition);r.insertAction({e:n,dropPosition:i,pointerPercentageOffset:a?.grabbedPointerPercentageOffset,isClick:S.current}).then(()=>e.afterSuccessfulInsert?.(n))}else r.onPointerUpWithoutInsert?.();r.onPointerUpCallback?.(),L(null),s.Ay.isMeetDevice&&document.removeEventListener("touchend",M),document.removeEventListener("pointerup",M),document.removeEventListener("pointermove",k)},{recordMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),a=new c.Mi(e.clientX,e.clientY).subtract(n),i=(0,p.$$)(r,a);return{shiftKey:e.shiftKey,metaKey:e.metaKey,canvasPosition:i}},playbackMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),a=(0,p.Z0)(r,e.canvasPosition),i=c.Mi.add(a,n);return{shiftKey:e.shiftKey,metaKey:e.metaKey,clientX:i.x,clientY:i.y}}}),[C,e,r,L,k]);return{onInsertableResourcePointerDown:D,dragState:S.current?null:N}}},721278:(e,r,n)=>{n.d(r,{M:()=>u});var a=n(411855),i=n(109388),o=n(629019),s=n.n(o),l=n(826943),c=n(43434),d=n(589781);function u(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let r=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,c.AE)(e.dragState.draggingResource);return(0,i.createPortal)(void 0!==e.icon?a.createElement("div",{className:s()(d.Az,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon):a.createElement(l.oW,{src:n,alt:"",className:s()(d._D,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},787348:(e,r,n)=>{n.d(r,{N:()=>i,T:()=>o});var a=n(612724),i=(e=>(e[e.RELATIVE=0]="RELATIVE",e[e.CENTERED=1]="CENTERED",e))(i||{});function o(e,r,n,i){switch(e){case 0:return function(e,r,n){let i,o;let s=e.x,l=e.y;s>l?(i=Math.min(s,n.width),o=l/s*i):(o=Math.min(l,n.height),i=s/l*o);let c=new a.Mi(n.width/2-i/2,n.height/2-o/2),d=r.subtract(n).subtract(c),u=new a.Mi(d.x/i,d.y/o);return{dragOffset:d,pointerPercentageOffset:u,draggingThumbSize:new a.Mi(i,o)}}(r,n,i);case 1:return{dragOffset:r.scale(.5),pointerPercentageOffset:new a.Mi(.5,.5),draggingThumbSize:r}}}},921249:(e,r,n)=>{n.d(r,{M5:()=>m,Nq:()=>u,zR:()=>d});var a=n(411855),i=n(336427),o=n(612724),s=n(366172),l=n(737976),c=n(695024);function d(e){let r=s.Y5.getViewportInfo(),n=e?e.subtract(r):new o.Mi(r.width/2,r.height/2),a=(0,c.$$)(r,n);return new o.Mi(a.x,a.y)}let u=5;function m(e,r,n){let c=(0,i.ZC)(e?.isDraggingOverCanvas),d=(0,l.Z)(),[u,m]=a.useState(null);return a.useEffect(()=>{if(!c&&e?.isDraggingOverCanvas&&r&&n){let r=function(e,r){if(void 0===e||void 0===r)return null;let{width:n,height:a}=s.Y5.getViewportInfo();return Math.min(n/e*.5,a/r*.5)}(...n);if(null!==r){let{zoomScale:a,offsetX:i,offsetY:l}=s.Y5.getViewportInfo();r<a&&(m(new o.Mi(...n).scale(r)),setTimeout(()=>{d({centerX:i,centerY:l,scale:r})?.then(()=>{m(null)}),e.grabbedPointerPercentageOffset=new o.Mi(.5,.5)},0))}}},[e,d,n,r,c]),u}},765312:(e,r,n)=>{n.d(r,{V7:()=>s});var a=n(846288);let i=["Table","CodeBlock","MindMap","Text","Section"],o=["Timer","Image","Link"];function s(e){return"string"==typeof e&&i.includes(e)||"string"==typeof e&&o.includes(e)?e:"object"==typeof e&&e.id&&e.name&&e.img?"FaceStamp":void(0,a.xb)(e)}},43434:(e,r,n)=>{n.d(r,{AE:()=>_,E:()=>g,Ik:()=>f});var a=n(846288),i=n(841962),o=n(528087),s=n(563192),l=n(76265),c=n(73041),d=n(811257),u=n(594259),m=n(368418),p=n(787348),h=n(765312);function _(e){switch(e){case"Table":return(0,i.ck)("ac41ded88c50f0359c02ec3927394b7b33e210b6");case"CodeBlock":return(0,i.ck)("8a035152916712353b045f442c2c6c5879ef3e17");case"MindMap":return(0,i.ck)("1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e");default:return""}}function g(e){switch(e){case"Table":return(0,l.t)("whiteboard.inserts.table_title");case"CodeBlock":return(0,l.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,l.t)("whiteboard.inserts.mind_map_title");case"Text":return(0,l.t)("whiteboard.inserts.text_title");case"Section":return(0,l.t)("whiteboard.inserts.section_title");default:(0,a.xb)(e)}}function f(e){let r="whiteboard"===(0,c.lg)(),n=(0,u.F5)(),a=(0,h.V7)(e.resource),i=async i=>(e.insertAction(i),r&&(0,u.oM)({type:d.p.MORE,id:a,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,m.t)(e,{insertAction:i,dragPreviewPointerPosition:p.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,o.F)(e.icon):()=>_(e.resource),recordingKey:s.Pt(e.triggeredFrom,"whiteboardResource",a)})}},700311:(e,r,n)=>{n.d(r,{S:()=>a}),n(411855),n(188507),n(805014),n(717180),n(108982),n(666249),n(178035),n(190500),n(738402),n(176160);function a(e){}},192680:(e,r,n)=>{n.d(r,{B:()=>s});var a=n(108982),i=n(719971),o=n(849331);function s(e){let r=(0,o.FC)(),n=(0,a.R)(r=>({selectedView:e?i.gN(e).payload:r.selectedView,currentOrgId:r.currentUserOrgId,orgById:r.orgById,currentTeamId:r.currentTeamId,teams:r.teams}));return{...r,...n}}},424819:(e,r,n)=>{n.d(r,{Xo:()=>s}),n(411855);var a=n(188507),i=n(875877);n(225371);let o=(0,n(927150).bt)(e=>e.pickerShown);function s(){return(0,a.d4)(e=>e.pickerShown)}(0,i.atomFamily)(e=>(0,i.atom)(r=>{let n=r(o);return n?.id===e}))},983878:(e,r,n)=>{n.d(r,{J:()=>i});var a=n(411855);function i(e){let[r,n]=a.useState(e),i=a.useRef(e);return a.useEffect(()=>{i.current=r},[r]),[i,r,n]}},200222:(e,r,n)=>{n.d(r,{U3:()=>s,aq:()=>o});var a=n(411855),i=n(48451);function o(){let e=a.useRef(!1);return a.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),a.useCallback(()=>e.current,[])}function s(e,r,n){let o=function(e,r){let n=a.useRef(null),i=r(e,n.current);return a.useEffect(()=>{i||(n.current=e)}),i?n.current:e}(n,i.c2);a.useEffect(()=>(window.addEventListener(e,r,o),()=>{window.removeEventListener(e,r,o)}),[e,r,o])}},395049:(e,r,n)=>{n.d(r,{Au:()=>p,LM:()=>g,P:()=>h,eO:()=>m,z4:()=>_});var a=n(411855);n(834825);var i=n(728722),o=n(977235),s=n(736942),l=n(314540),c=n(183739),d=n(873439),u=n(819633);function m(e){let r=e?.baseOrgUser?.workspaceUsers,n=r?.find(e=>e.isMainWorkspace);return n?.workspaceId??null}function p(e){let r=(0,i.Rs)(c.TKM,{orgId:e});return s.Qw.useTransform(r,e=>m(e.currentUser))}function h(e,r){let n=(0,i.Rs)(c.aON,{orgId:e??"",workspaceId:r??""},{enabled:!!e&&!!r});return null===r?(0,o.gB)(u.O):n.transform(e=>e.workspace)}var _=(e=>(e[e.IS_GUEST=1]="IS_GUEST",e[e.WRONG_WORKSPACE=2]="WRONG_WORKSPACE",e[e.TEAM_CREATION_CONTROL=3]="TEAM_CREATION_CONTROL",e[e.LG_LOADING=4]="LG_LOADING",e))(_||{});function g(e,r){let n=(0,i.Rs)(c.Pn8,{orgId:e?.id??null}),{permission:o,workspaceMember:s,canCreateTeamInWorkspace:u,teamCreationControls:m,loading:p}=a.useMemo(()=>{if("loaded"!==n.status)return{permission:l._D.GUEST,workspaceMember:null,canCreateTeamInWorkspace:!1,loading:!0};let e=n.data?.currentUser?.baseOrgUser,a=e?.permission;return{permission:a,workspaceMember:e?.workspaceUsers?.find(e=>e.isMainWorkspace),canCreateTeamInWorkspace:!!n.data?.org?.workspaces?.find(e=>e.canCreateTeam&&e.id===r),teamCreationControls:n.data?.org?.sharedOrgLicenseGroupSetting?.teamCreationControls,loading:!1}},[n,r]);if(p)return{canCreateTeam:!1,cannotCreateTeamReason:4};let h=m===d.$q.TEAM_CREATION_CONTROLS_ADMIN_ONLY;return o===l._D.GUEST?{canCreateTeam:!1,cannotCreateTeamReason:1}:o===l._D.ADMIN?{canCreateTeam:!0,cannotCreateTeamReason:null}:o!==l._D.MEMBER?{canCreateTeam:!1,cannotCreateTeamReason:null}:r?u?{canCreateTeam:!0,cannotCreateTeamReason:null}:s?.workspaceId!==r?{canCreateTeam:!1,cannotCreateTeamReason:2}:h?{canCreateTeam:!1,cannotCreateTeamReason:3}:{canCreateTeam:!1,cannotCreateTeamReason:null}:s?{canCreateTeam:!1,cannotCreateTeamReason:2}:h?{canCreateTeam:!1,cannotCreateTeamReason:3}:{canCreateTeam:!0,cannotCreateTeamReason:null}}},178380:(e,r,n)=>{n.d(r,{HF:()=>x,M3:()=>w,Rj:()=>P,Vz:()=>B,a6:()=>A,al:()=>D,bH:()=>M,cU:()=>k,cp:()=>L,ow:()=>N,pt:()=>I,re:()=>T,t0:()=>F,vK:()=>R,x0:()=>C,yS:()=>O,zv:()=>U});var a=n(846288),i=n(805014),o=n(538971),s=n(163773),l=n(666308),c=n(972142),d=n(76265),u=n(864986),m=n(419378),p=n(468847),h=n(314540),_=n(567155),g=n(754430),f=n(839644),E=n(150898),y=n(968525),b=n(69441);let v={id:"",hub_file_id:"",fig_file_version_id:"",name:"",version:"",release_notes:"",description:"",creator_policy:"",created_at:"",valid_prototype:!0,thumbnail_guid:null},T={id:"",category_id:null,creator:{id:"",handle:"",img_url:""},publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:g.o1.USER,badges:[],description:""},community_publishers:{accepted:[],pending:[]},versions:{},current_hub_file_version_id:"",redirect_canvas_url:"",thumbnail_url:"",created_at:"",unpublished_at:null,duplicate_count:0,like_count:0,view_count:0,comment_count:0,viewer_mode:h.y4.CANVAS,scaling_mode:null,realtime_token:"",client_meta:"",thumbnail_is_set:!1,comments_setting:null,publishing_status:h.KB.APPROVED_PUBLIC,badges:[]};var I=(e=>(e.KEY="is-community-duplicate",e.VALUE="1",e))(I||{}),S=(e=>(e.CURRENT_FILE="currentFile",e.NEW_FILE="newFile",e))(S||{});function w(e,r){return(0,y.Hc)(e,r,T)}function A(e,r){let n=r||e.current_hub_file_version_id;return(0,y.Hc)(n,e.versions,v)}function C(e){if(!e)return h.y4.CANVAS;switch(e){case h._Y.DESIGN:return h.y4.CANVAS;case h._Y.WHITEBOARD:return h.y4.WHITEBOARD;case h._Y.SLIDES:return h.y4.SLIDE_TEMPLATE;case h._Y.SITES:return h.y4.SITE_TEMPLATE;case h._Y.COOPER:return h.y4.CANVAS;default:(0,a.xb)(e)}}function N(e,r,n,a){let o;let s=e.figFilePublishedAsHubFile[r],l=w(s,e.hubFiles),c=A(l),g=y.b,f=e.fileByKey[r];!a&&!n&&(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id)&&(o=(0,p.Tn)(e.authedActiveCommunityProfile));let b=(0,p.gO)(l,f,e,o),v=n?l.viewer_mode:C(f.editor_type);!n&&l.viewer_mode===h.y4.PROTOTYPE&&a&&i.X3B?.firstPagePrototypeStatus()===i.bOM.VALID&&(v=h.y4.PROTOTYPE);let T={...(0,E.Rs)(),tokens:(l.community_publishers?[...l.community_publishers.accepted,...l.community_publishers.pending||[]]:[]).reduce((r,n)=>{let a=e.authedProfilesById[n.id];return(0,p.Ii)(a,b)?r:r.concat([{state:_.d.OK,content:n}])},[])};return{name:c.name||(f.name===(0,d.t)("fullscreen.fullscreen_view_selector.untitled")?"":f.name),description:c.description||g.description,categoryId:l.category_id,creatorPolicy:c.creator_policy||g.creatorPolicy,tags:s&&l?.tags?l.tags:f?.editor_type==="whiteboard"?["figjam"]:void 0,tagsV2:l.tags_v2&&Object.keys(l.tags_v2),viewerMode:v,scalingMode:l.scaling_mode,author:b,publishers:T,commentsSetting:l.comments_setting||g.commentsSetting,blockPublishingOnToS:(0,p.xw)(e),price:(0,m.vf)(l.monetized_resource_metadata),isPaid:!!l.monetized_resource_metadata,supportContact:l.support_contact||e.user?.email,carouselMedia:(0,u.N6)(l),coverImageCarouselMediaId:l.cover_image_carousel_media_id}}function L(e,r){return e?r?(0,m.Yp)(r)?r<m.mZ?(0,d.t)("community.seller.paid_resource_minimum_err"):(0,d.t)("community.seller.paid_resource_maximum_err"):(0,m.F8)(r)?(0,d.t)("community.seller.prices_must_follow_format"):void 0:(0,d.t)("community.publishing.price_is_required_for_paid_resources"):void 0}function O(e){let r=(0,y.Yp)(e||null).length;return 0===r?(0,d.t)("community.publishing.name_must_not_be_empty"):r<4?(0,d.t)("community.publishing.name_must_be_4_characters_long"):r>100?(0,d.t)("community.publishing.name_must_be_at_most_100_characters_long"):void 0}function R(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.description_must_be_at_most_10000_characters_long")}function P(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")}function D(e,r){return e&&!r?(0,d.t)("community.publishing.support_contact_must_not_be_empty"):!r||(0,o.xf)(r)||(0,c.gU)(r)?void 0:(0,d.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")}function k(e){if(!e)return(0,d.t)("community.publishing.category_cant_be_empty")}function M(e){let r={name:O(e.name),description:R(e.description),creatorPolicy:P(e.creatorPolicy)};e.publisherIds&&(r.publisherIds=(0,y.IZ)(e.publisherIds.length)||void 0),r.carouselMedia=(0,p.vC)(e.carouselMedia),r.categoryId=k(e.categoryId);let n="isPaid"in e&&!!e.isPaid;return r.price=L(n,e.price),r.supportContact=D(n,e.supportContact),Object.keys(r).forEach(e=>!r[e]&&delete r[e]),r}function F(e){return e===f.G4.FULLSCREEN||e===f.G4.FULLSCREEN_WITH_COMMENTS}function x(e){return!!e&&!e.unpublished_at}function U(e){return!!e&&e.publishing_status===h.KB.APPROVED_PUBLIC}function B(e){let r=(0,b.X$)(e);return(0,l.Gc)(e=>{e?.preventDefault(),s.Ay.redirect(r,"_blank")})}},921443:(e,r,n)=>{n.d(r,{Z:()=>i});var a=n(41893);function i(e,r=!1){let n=e.deltaY,o=e.ctrlKey&&!r&&(a.y.isChrome()||a.y.isFirefox());return o?n/=-100:0!==n&&(n=n/Math.abs(n)*Math.min(Math.abs(n),10*Math.cbrt(Math.abs(n)))),o?Math.pow(4,n):Math.pow(.995,n)}},204421:(e,r,n)=>{n.d(r,{FB:()=>l,UA:()=>a,W4:()=>o,Wg:()=>s,s3:()=>c,sf:()=>i});let a=[["Afghanistan","AF"],["\xc5land Islands","AX"],["Albania","AL"],["Algeria","DZ"],["American Samoa","AS"],["Andorra","AD"],["Angola","AO"],["Anguilla","AI"],["Antarctica","AQ"],["Antigua and Barbuda","AG"],["Argentina","AR"],["Armenia","AM"],["Aruba","AW"],["Australia","AU"],["Austria","AT"],["Azerbaijan","AZ"],["Bahamas","BS"],["Bahrain","BH"],["Bangladesh","BD"],["Barbados","BB"],["Belarus","BY"],["Belgium","BE"],["Belize","BZ"],["Benin","BJ"],["Bermuda","BM"],["Bhutan","BT"],["Bolivia (Plurinational State of)","BO"],["Bonaire, Sint Eustatius and Saba","BQ"],["Bosnia and Herzegovina","BA"],["Botswana","BW"],["Bouvet Island","BV"],["Brazil","BR"],["British Indian Ocean Territory","IO"],["Brunei Darussalam","BN"],["Bulgaria","BG"],["Burkina Faso","BF"],["Burundi","BI"],["Cabo Verde","CV"],["Cambodia","KH"],["Cameroon","CM"],["Canada","CA"],["Cayman Islands","KY"],["Central African Republic","CF"],["Chad","TD"],["Chile","CL"],["China","CN"],["Christmas Island","CX"],["Cocos (Keeling) Islands","CC"],["Colombia","CO"],["Comoros","KM"],["Congo","CG"],["Congo (Democratic Republic of the)","CD"],["Cook Islands","CK"],["Costa Rica","CR"],["C\xf4te d'Ivoire","CI"],["Croatia","HR"],["Cuba","CU"],["Cura\xe7ao","CW"],["Cyprus","CY"],["Czechia","CZ"],["Denmark","DK"],["Djibouti","DJ"],["Dominica","DM"],["Dominican Republic","DO"],["Ecuador","EC"],["Egypt","EG"],["El Salvador","SV"],["Equatorial Guinea","GQ"],["Eritrea","ER"],["Estonia","EE"],["Eswatini","SZ"],["Ethiopia","ET"],["Falkland Islands (Malvinas)","FK"],["Faroe Islands","FO"],["Fiji","FJ"],["Finland","FI"],["France","FR"],["French Guiana","GF"],["French Polynesia","PF"],["French Southern Territories","TF"],["Gabon","GA"],["Gambia","GM"],["Georgia","GE"],["Germany","DE"],["Ghana","GH"],["Gibraltar","GI"],["Greece","GR"],["Greenland","GL"],["Grenada","GD"],["Guadeloupe","GP"],["Guam","GU"],["Guatemala","GT"],["Guernsey","GG"],["Guinea","GN"],["Guinea-Bissau","GW"],["Guyana","GY"],["Haiti","HT"],["Heard Island and McDonald Islands","HM"],["Holy See","VA"],["Honduras","HN"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["India","IN"],["Indonesia","ID"],["Iran (Islamic Republic of)","IR"],["Iraq","IQ"],["Ireland","IE"],["Isle of Man","IM"],["Israel","IL"],["Italy","IT"],["Jamaica","JM"],["Japan","JP"],["Jersey","JE"],["Jordan","JO"],["Kazakhstan","KZ"],["Kenya","KE"],["Kiribati","KI"],["Korea (Democratic People's Republic of)","KP"],["Korea (Republic of)","KR"],["Kuwait","KW"],["Kosovo","XK"],["Kyrgyzstan","KG"],["Lao People's Democratic Republic","LA"],["Latvia","LV"],["Lebanon","LB"],["Lesotho","LS"],["Liberia","LR"],["Libya","LY"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macao","MO"],["Macedonia (the former Yugoslav Republic of)","MK"],["Madagascar","MG"],["Malawi","MW"],["Malaysia","MY"],["Maldives","MV"],["Mali","ML"],["Malta","MT"],["Marshall Islands","MH"],["Martinique","MQ"],["Mauritania","MR"],["Mauritius","MU"],["Mayotte","YT"],["Mexico","MX"],["Micronesia (Federated States of)","FM"],["Moldova (Republic of)","MD"],["Monaco","MC"],["Mongolia","MN"],["Montenegro","ME"],["Montserrat","MS"],["Morocco","MA"],["Mozambique","MZ"],["Myanmar","MM"],["Namibia","NA"],["Nauru","NR"],["Nepal","NP"],["Netherlands","NL"],["New Caledonia","NC"],["New Zealand","NZ"],["Nicaragua","NI"],["Niger","NE"],["Nigeria","NG"],["Niue","NU"],["Norfolk Island","NF"],["Northern Mariana Islands","MP"],["Norway","NO"],["Oman","OM"],["Pakistan","PK"],["Palau","PW"],["Palestine, State of","PS"],["Panama","PA"],["Papua New Guinea","PG"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Pitcairn","PN"],["Poland","PL"],["Portugal","PT"],["Puerto Rico","PR"],["Qatar","QA"],["R\xe9union","RE"],["Romania","RO"],["Russian Federation","RU"],["Rwanda","RW"],["Saint Barth\xe9lemy","BL"],["Saint Helena, Ascension and Tristan da Cunha","SH"],["Saint Kitts and Nevis","KN"],["Saint Lucia","LC"],["Saint Martin (French part)","MF"],["Saint Pierre and Miquelon","PM"],["Saint Vincent and the Grenadines","VC"],["Samoa","WS"],["San Marino","SM"],["Sao Tome and Principe","ST"],["Saudi Arabia","SA"],["Senegal","SN"],["Serbia","RS"],["Seychelles","SC"],["Sierra Leone","SL"],["Singapore","SG"],["Sint Maarten (Dutch part)","SX"],["Slovakia","SK"],["Slovenia","SI"],["Solomon Islands","SB"],["Somalia","SO"],["South Africa","ZA"],["South Georgia and the South Sandwich Islands","GS"],["South Sudan","SS"],["Spain","ES"],["Sri Lanka","LK"],["Sudan","SD"],["Suriname","SR"],["Svalbard and Jan Mayen","SJ"],["Sweden","SE"],["Switzerland","CH"],["Syrian Arab Republic","SY"],["Taiwan","TW"],["Tajikistan","TJ"],["Tanzania, United Republic of","TZ"],["Thailand","TH"],["Timor-Leste","TL"],["Togo","TG"],["Tokelau","TK"],["Tonga","TO"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["Turkmenistan","TM"],["Turks and Caicos Islands","TC"],["Tuvalu","TV"],["Uganda","UG"],["Ukraine","UA"],["United Arab Emirates","AE"],["United Kingdom of Great Britain and Northern Ireland","GB"],["United States of America","US"],["United States Minor Outlying Islands","UM"],["Uruguay","UY"],["Uzbekistan","UZ"],["Vanuatu","VU"],["Venezuela (Bolivarian Republic of)","VE"],["Viet Nam","VN"],["Virgin Islands (British)","VG"],["Virgin Islands (U.S.)","VI"],["Wallis and Futuna","WF"],["Western Sahara","EH"],["Yemen","YE"],["Zambia","ZM"],["Zimbabwe","ZW"]],i=["CU","IR","KP","SY"],o=[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"],["District of Columbia","DC"],["American Samoa","AS"],["Guam","GU"],["Northern Mariana Islands","MP"],["Puerto Rico","PR"],["United States Minor Outlying Islands","UM"],["Virgin Islands, U.S.","VI"],["Armed Forces (AA)","AA"],["Armed Forces (AE)","AE"],["Armed Forces (AP)","AP"]].sort((e,r)=>e[1].localeCompare(r[1])),s=[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Northwest Territories","NT"],["Yukon","YT"]].sort((e,r)=>e[1].localeCompare(r[1])),l=[["Andhra Pradesh","AP"],["Arunachal Pradesh","AR"],["Assam","AS"],["Bihar","BR"],["Chhattisgarh","CT"],["Goa","GA"],["Gujarat","GJ"],["Haryana","HR"],["Himachal Pradesh","HP"],["Jharkhand","JH"],["Karnataka","KA"],["Kerala","KL"],["Madhya Pradesh","MP"],["Maharashtra","MH"],["Manipur","MN"],["Meghalaya","ML"],["Mizoram","MZ"],["Nagaland","NL"],["Odisha","OR"],["Punjab","PB"],["Rajasthan","RJ"],["Sikkim","SK"],["Tamil Nadu","TN"],["Telangana","TG"],["Tripura","TR"],["Uttar Pradesh","UP"],["Uttarakhand","UT"],["West Bengal","WB"],["Andaman and Nicobar Islands","AN"],["Chandigarh","CH"],["Dadra and Nagar Haveli and Daman and Diu","DH"],["Delhi","DL"],["Jammu and Kashmir","JK"],["Ladakh","LA"],["Lakshadweep","LD"],["Puducherry","PY"]].sort((e,r)=>e[1].localeCompare(r[1])),c=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].concat(["GF","GP","MQ","ME","YT","RE","MF","GI","AX","IS","NO","AD","LI","MC","SM","VA","GB","GG","JE","PM","GL","BL","SX","AW","CW","WF","PF","NC","TF","AI","BM","IO","VG","KY","FK","MS","PN","SH","GS","TC"])},473982:(e,r,n)=>{n.d(r,{Wh:()=>l,rt:()=>d});var a=n(885123),i=n(875877),o=n(176160);let s={preserveValue:!1};function l(e,r=s){let n=(0,i.atomFamily)(e);return(0,i.atom)(e=>{let i=a.D?e(o.ze):"FILE_KEY";return r.preserveValue||n.setShouldRemove((e,r)=>r!==i),e(n(i))},(e,r,...a)=>r(n(e(o.ze)),...a))}let c=[];function d(e){let r=(0,i.atom)(e);return c.push({atomRef:new WeakRef(r),initialValue:e}),r}},990448:(e,r,n)=>{n.d(r,{ZN:()=>s,dO:()=>o});var a=n(281935),i=n(428539);async function o(e){try{let e=null;if(a.eD&&(e=await a.eD.getKeyboardLayout()),!window.isSecureContext)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in secure context, no navigator.keyboard object"};if(window.top!==window.self)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in top-level browser context, navigator.keyboard not available"};let r=navigator.keyboard;if(!r||!r.getLayoutMap)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"No keyboard in navigator object"};let n=await r.getLayoutMap(),{detectedLayoutsWeb:o,layoutJSON:s}=function(e){let r={};return e.forEach((e,n)=>{r[n]=e}),{layoutJSON:r,detectedLayoutsWeb:i.WH.map(r=>{let n=Object.entries(r.list).map(([r,n])=>null==n?!(r in e):e.get(r)===n).filter(e=>!e).length;return{name:r.name,isValid:0===n}}).filter(e=>e.isValid).map(e=>e.name)}}(n);return{desktopLayout:e,detectedLayouts:o,layoutJSON:s}}catch(e){return console.error("Keyboard layout detection logging failed:",e),{detectedLayouts:[],layoutJSON:{},desktopLayout:null,errorMessage:"Unknown failure"}}}function s(e){return(e.desktopLayout?(0,i.pB)(e.desktopLayout):null)||(1===e.detectedLayouts.length&&i.g7[e.detectedLayouts[0]]?i.g7[e.detectedLayouts[0]]:null)}},254903:(e,r,n)=>{n.d(r,{Xo:()=>w,nt:()=>S,o3:()=>v}),n(188507);var a=n(846288),i=n(805014),o=n(956013),s=n(885123),l=n(841962),c=n(875877),d=n(550479),u=n(653798),m=n(519654),p=n(76265),h=n(553362),_=n(241162),g=n(43617),f=n(190500),E=n(927150);function y(){return s.D||((0,u.ED)("Labs","No global redux store set, so creating a mock store with empty userFlags"),(0,o.y$)(()=>({userFlags:{},isStarterUser:!1})))}class b{constructor({name:e,getDisplayName:r,getCanOverride:n,getDefaultValue:a,getVisualBellMessage:i}){this.name=e,this.getDisplayName=r,this.getVisualBellMessage=i||this.getDefaultVisualBellMessage,this.defaultValue=a,this.trueOverrideUserFlag=`${e}_override_true`,this.falseOverrideUserFlag=`${e}_override_false`,this.atom=(0,E.bt)(e=>this.getEffectiveValue(e.userFlags),y),this.canOverrideAtom=(0,E.bt)(e=>n(e),y)}getValue(){return c.atomStore.get(this.atom)}getEffectiveValue(e){let r=this.isUserOverriddenToTrue(e),n=this.isUserOverriddenToFalse(e);if(r&&n){(0,u.xi)("Labs","Unexpected state: both lab flags are set",{falseOverrideFlagId:e[this.falseOverrideUserFlag]?.id,falseOverrideFlagCreatedAt:e[this.falseOverrideUserFlag]?.createdAt,falseOverrideUserFlagUpdatedAt:e[this.falseOverrideUserFlag]?.updatedAt,trueOverrideFlagId:e[this.trueOverrideUserFlag]?.id,trueOverrideFlagCreatedAt:e[this.trueOverrideUserFlag]?.createdAt,trueOverrideFlagUpdatedAt:e[this.trueOverrideUserFlag]?.updatedAt},{modeEventName:"labs_both_flags_set",figmentOnly:!0,logToConsole:d.NU.ALWAYS});let a=e[this.trueOverrideUserFlag]?.updatedAt,i=e[this.falseOverrideUserFlag]?.updatedAt;a===i||(a>i?n=!1:r=!1)}return(0,g.Y)({trueOverrideUserFlag:r,falseOverrideUserFlag:n,canOverride:this.canOverride(),defaultValue:this.defaultValue()})}isUserOverriddenToTrue(e){return!!e[this.trueOverrideUserFlag]}isUserOverriddenToFalse(e){return!!e[this.falseOverrideUserFlag]}canOverride(){return c.atomStore.get(this.canOverrideAtom)}isOverridden(e){return this.canOverride()&&(this.isUserOverriddenToTrue(e)||this.isUserOverriddenToFalse(e))}toggleValue(e,r,n){if(!this.canOverride())return;let a=this.getValue(),i=!a,o={[this.trueOverrideUserFlag]:!1,[this.falseOverrideUserFlag]:!1};o[i?this.trueOverrideUserFlag:this.falseOverrideUserFlag]=!0,r(_.b(o)),r(h.F.enqueue({message:this.getVisualBellMessage(i)})),this.trackChange({user:e,previousValue:a,newValue:!a,source:n})}getDefaultVisualBellMessage(e){return e?(0,p.t)("lab.enabled",{labName:this.getDisplayName()}):(0,p.t)("lab.disabled",{labName:this.getDisplayName()})}resetToDefault(e,r){let n=this.getValue();r(_.b({[this.trueOverrideUserFlag]:!1,[this.falseOverrideUserFlag]:!1})),this.trackChange({user:e,previousValue:n,newValue:this.defaultValue(),source:"reset"})}trackChange({user:e,previousValue:r,newValue:n,source:a}){(0,f.uE)("labs",{user:e},{name:this.name,canOverride:this.canOverride(),previousValue:r,newValue:n,defaultValue:this.defaultValue(),source:a,canToggleFF:null,defaultValueFF:null})}}function v(e){return(0,c.useAtomValue)(e.atom)}var T=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.OVERRIDDEN=1]="OVERRIDDEN",e))(T||{});let I="prod"!==(0,l.Ay)().cluster_name,S=Object.freeze({customKeyboardShortcuts:new b({name:"ce_custom_keyboard_shortcuts",getDisplayName:()=>(0,p.t)("keyboard_settings.custom_keyboard_shortcuts"),getCanOverride:()=>!!(0,l.kc)().ce_custom_keyboard_shortcuts,getDefaultValue:()=>!!(0,l.kc)().ce_custom_keyboard_default}),ui3:new b({name:"unified_index_v3_endpoint",getDisplayName:()=>(0,p.t)("lab.ui3"),getVisualBellMessage:e=>e?(0,p.t)("lab.ui3_enabled_message"):(0,p.t)("lab.ui3_disabled_message"),getCanOverride:()=>!0,getDefaultValue:m.Mx}),ui3ForceDevOnly:new b({name:"force_ui3_dev_only",getDisplayName:()=>"[Dev only] Force UI3 everywhere",getCanOverride:()=>I,getDefaultValue:()=>!1}),ui3ReactivationOverlay:new b({name:"ui3_reactivation_overlay",getDisplayName:()=>"UI3: Reactivation campaign Curator modal",getCanOverride:()=>I,getDefaultValue:()=>!!(0,l.kc)().ui3_reactivation_overlay}),trackableDebug:new b({name:"lab_trackable_debug_toggle",getDisplayName:()=>(0,p.t)("lab.trackable_debug"),getCanOverride:()=>!!(0,l.kc)().lab_trackable_debug_toggle,getDefaultValue:()=>!!(0,l.kc)().lab_trackable_debug_default}),figjamUi3:new b({name:"unified_index_v3_figjam_toggle",getDisplayName:()=>(0,p.t)("lab.figjam_ui3"),getVisualBellMessage:e=>e?(0,p.t)("lab.ui3_figjam_enabled_message"):(0,p.t)("lab.ui3_figjam_disabled_message"),getCanOverride:m.Q4,getDefaultValue:()=>!0}),figjamUI3Toolbelt:new b({name:"figjam_ui3_toolbelt_toggle",getDisplayName:()=>(0,p.t)("lab.figjam_ui3_toolbelt"),getVisualBellMessage:e=>e?(0,p.t)("lab.figjam_ui3_toolbelt_enabled_message"):(0,p.t)("lab.figjam_ui3_toolbelt_disabled_message"),getCanOverride:()=>!!(0,l.kc)().figjam_ui3_toolbelt_lab,getDefaultValue:()=>!!(0,l.kc)().figjam_ui3_toolbelt_default}),sitesRuntimeDebugTools:new b({name:"sites_runtime_debug_tools",getDisplayName:()=>(0,p.t)("lab.sts_runtime_debug_tools"),getCanOverride:()=>!!(0,l.kc)().sts_runtime_debug_tools,getDefaultValue:()=>!!(0,l.kc)().sts_runtime_debug_tools}),sitesRuntimeExpandedNodes:new b({name:"sites_runtime_expanded_nodes",getDisplayName:()=>(0,p.t)("lab.sites_runtime_expanded_nodes"),getCanOverride:()=>!!(0,l.kc)().sts_runtime_expanded_nodes,getDefaultValue:()=>!!(0,l.kc)().sts_runtime_expanded_nodes}),ui3PropertyLabelsDiscoverability:new b({name:"ui3_property_labels_discoverability_improvements",getDisplayName:()=>"UI3: Property Labels Discoverability",getCanOverride:()=>"prod"!==(0,l.Ay)().cluster_name,getDefaultValue:()=>!!(0,l.kc)().ui3_property_labels_discoverability_improvements}),aiFeaturesUseBedrockLlama:new b({name:"ai_features_use_bedrock_llama",getDisplayName:()=>(0,p.t)("lab.ai_features_use_bedrock_llama"),getCanOverride:()=>I,getDefaultValue:()=>!1}),toolbeltAccessibility:new b({name:"ui3_toolbelt_accessibility",getDisplayName:()=>"UI3: Toolbelt accessibility improvements",getCanOverride:()=>I,getDefaultValue:()=>!!(0,l.kc)().toolbelt_accessibility}),selectionActionsInToolbelt:new b({name:"ui3_toolbelt_selection_actions",getDisplayName:()=>"UI3: Selection actions in secondary toolbelt",getCanOverride:()=>I,getDefaultValue:()=>!!(0,l.kc)().ui3_toolbelt_selection_actions}),useGrid:new b({name:"fpl_grid",getDisplayName:()=>"UI3: FPL Grid",getCanOverride:()=>I,getDefaultValue:()=>!!(0,l.kc)().fpl_a11y_grid}),forceUI3Tooltips:new b({name:"ui3_tooltips",getDisplayName:()=>"Force Tooltips to render in UI3",getCanOverride:()=>I,getDefaultValue:()=>!!(0,l.kc)().ui3_tooltips})});function w(e){switch(e){case i.zGX.PLACEHOLDER:return!1;case i.zGX.TOOLBELT_A11y:return S.toolbeltAccessibility.getValue();default:(0,a.xb)(e)}}},345319:(e,r,n)=>{n.d(r,{n:()=>i}),n(411855),n(188507);var a=n(538971);function i(e,r){return!!(e?.is_ipad_user||(0,a.jm)(r))}n(885123),n(728722),n(747484),n(771952),n(76265),n(669034),n(717288),n(73041),n(314540),n(183739),n(190500),n(200222)},601242:(e,r,n)=>{n.d(r,{Bh:()=>f,SS:()=>y,bO:()=>E,oz:()=>b,z5:()=>v});var a=n(411855);n(188507);var i=n(236891),o=n(33011);n(695956),n(89865),n(184058),n(841962),n(875877);var s=n(728722),l=n(977235),c=n(866415);n(888807),n(564854);var d=n(864941),u=n(176160);n(827473);var m=n(183739),p=n(468260);n(979733),n(775338);var h=n(154267),_=n(274585);n(515662);let g=a.createContext(null);function f(e){let{subscriptions:r,requestLibraryItems:n,releaseLibraryItems:o}=(0,i.sR)(a.useContext(g),"Must call `useLibraryData` from within <LibraryDataProvider>"),s=e?.fileKey;return a.useEffect(()=>{if(s)return n(s),()=>o(s)},[n,o,s]),s&&r[s]||(0,l.Xm)()}function E(){let{subscriptions:e}=(0,i.sR)(a.useContext(g),"Must call `useLibraryDataSubscriptions` from within <LibraryDataProvider>");return e}function y({fileKey:e,libraryKey:r}){return f((0,_.i)(e,r)),null}function b(e,r){let n=[];for(let a of e.libraryHierarchyPaths)for(let e of a.styles)r?e.style_type===r&&n.push(e):n.push(e);return n}function v(e,r){return b(e.data,r)}a.memo(function({fileKey:e,onChange:r}){let n=e!==(0,u.tS)(),i=(0,h.wJ)(e),o=(0,d.Ck)(),{view:l,args:c,options:p}=i?{view:m.Acj,args:{hubFileId:e},options:{enabled:o()}}:{view:n?m.tIY:m.s5n,args:{fileKey:e},options:void 0},_=(0,s.Rs)(l,c,p);return a.useEffect(()=>{r(e,_)},[r,e,_]),null}),(0,c.cm)(function(e){if("loaded"!==e.status)return e;let r=e.data;if("communityLibraryByHubFileId"in r){let e=r.communityLibraryByHubFileId;if(!e)return(0,l.e1)([]);let n=e.libraryHierarchyPaths.map(r=>{let n=r.styles.map(r=>(0,p.KC)(r,{type:"hubFile",file:{id:e.hubFileId,libraryKey:e.libraryKey}}));return{pageName:r.pageName??void 0,containingFrameName:r.containingFrameName??void 0,nameHierarchyPath:r.nameHierarchyPath??void 0,components:[],stateGroups:[],styles:n}});return(0,l.gB)({fileKey:e.hubFileId,libraryKey:(0,o.l)(e.libraryKey),name:e.name,numComponents:0,numStateGroups:0,numStyles:e.numStyles??0,libraryHierarchyPaths:n})}let n="libraryKeyToFile"in r?r.libraryKeyToFile?.file:r.file;if(!n)return(0,l.e1)([]);let a=n.libraryHierarchyPaths.map(e=>({components:"components"in e?e.components.map(e=>(0,p.Qp)(e,{type:"team",file:n})):[],stateGroups:"stateGroups"in e?e.stateGroups.map(e=>(0,p.SS)(e,{type:"team",file:n})):[],styles:e.styles.map(e=>(0,p.KC)(e,{type:"team",file:n}))}));return(0,l.gB)({fileKey:n.key,libraryKey:(0,o.l)(n.libraryKey),name:n.name,numComponents:n.library&&"numComponents"in n.library&&n.library.numComponents||0,numStateGroups:n.library&&"numStateGroups"in n.library&&n.library.numStateGroups||0,numStyles:n.library?.numStyles??0,libraryHierarchyPaths:a})})},827473:(e,r,n)=>{n.d(r,{$N:()=>e_,$j:()=>eE,A0:()=>eT,Av:()=>es,Bt:()=>eD,CG:()=>tG,Cj:()=>tU,Dg:()=>ed,E2:()=>tH,ET:()=>ts,El:()=>e7,FS:()=>tz,Fl:()=>tj,G$:()=>tk,GA:()=>ex,Gg:()=>e9,Gj:()=>t2,Gp:()=>tm,HF:()=>ea,HK:()=>eh,Hb:()=>tM,IW:()=>eu,J1:()=>e5,Jc:()=>en,KQ:()=>ej,LB:()=>eX,LC:()=>tE,LI:()=>tB,LT:()=>t$,LX:()=>eG,Lk:()=>eV,MA:()=>tY,MF:()=>eo,Mb:()=>e1,Mj:()=>eO,Mw:()=>t7,NW:()=>ty,NY:()=>tK,QO:()=>tv,QT:()=>eC,Q_:()=>t6,Qb:()=>ey,RQ:()=>tf,T4:()=>tq,Tu:()=>tZ,UB:()=>e3,VJ:()=>el,VO:()=>tF,Ve:()=>e8,WV:()=>th,X0:()=>eb,X7:()=>ec,Ys:()=>e2,_B:()=>tb,_Q:()=>tD,aD:()=>er,ad:()=>tW,ah:()=>t0,bd:()=>tN,bp:()=>t_,cU:()=>tr,dx:()=>tV,eD:()=>t5,eS:()=>tc,f0:()=>tJ,f2:()=>ta,fc:()=>eM,gA:()=>eH,gi:()=>tR,gy:()=>tP,iP:()=>ep,i_:()=>eZ,iw:()=>e6,kG:()=>tw,kw:()=>tA,lG:()=>tS,lg:()=>ei,nJ:()=>t9,nn:()=>t8,oH:()=>tC,og:()=>ew,ov:()=>to,pD:()=>t3,pq:()=>ti,r9:()=>tO,rC:()=>e$,rt:()=>eS,sv:()=>t4,td:()=>td,th:()=>eg,ti:()=>ev,uH:()=>tp,uJ:()=>eW,uN:()=>tX,v2:()=>tQ,vu:()=>ef,w$:()=>t1,w3:()=>eR,w8:()=>eJ,wn:()=>eP,yh:()=>em,zE:()=>tg});var a=n(411855),i=n(188507),o=n(834825),s=n(846288),l=n(511445),c=n(217950),d=n(879058),u=n(805014),m=n(33011);n(414796);var p=n(758271),h=n.n(p),_=n(777535),g=n(885123),f=n(108982),E=n(841962),y=n(875877),b=n(977235),v=n(866415),T=n(357272),I=n(550479),S=n(583502),w=n(653798),A=n(972142),C=n(697737),N=n(677840),L=n(76265),O=n(73584),R=n(650981),P=n(669034),D=n(717288),k=n(206908),M=n(888807),F=n(254760),x=n(20174),U=n(365347),B=n(481954),V=n(710443),G=n(598378),H=n(957020),W=n(671056),K=n(771614),Y=n(690757),$=n(596159),j=n(176160),z=n(661137),q=n(431244),Z=n(314540),X=n(841924),J=n(488006),Q=n(837384),ee=n(747765),et=n(773283),er=(e=>(e.CURRENT="current",e.ALL="all",e))(er||{});let en=a.createContext(null);function ea(e){return e===H.E8.CURRENT||e===H.E8.CHANGED||e===H.E8.DELETED}function ei(e){return e===H.E8.NEW||e===H.E8.CHANGED||e===H.E8.DELETED}function eo(e){switch(e.type){case H.PW.COMPONENT:return{type:e.type,key:e.component_key,version:e.content_hash};case H.PW.STATE_GROUP:return{type:e.type,key:e.key,version:e.version};case H.PW.STYLE:return{type:e.type,key:e.key,version:e.content_hash};case H.PW.VARIABLE_SET:case H.PW.VARIABLE:case H.PW.MODULE:return{type:e.type,key:e.key,version:e.version};case H.PW.RESPONSIVE_SET:case H.PW.CODE_COMPONENT:if("LOCAL"===e.subscriptionStatus)return{type:e.type,key:e.keyForPublish,version:e.version};return{type:e.type,key:e.key,version:e.version};case H.PW.MANAGED_STRING:return{type:e.type,key:e.keyForPublish,version:e.version};default:(0,s.xb)(e,`Unknown type ${e?.type}`)}}function es(e){let{key:r}=eo(e);return(0,s.KF)(void 0!==r,"Asset had no key",{asset:e}),r}function el(e){switch(e.type){case H.PW.CODE_COMPONENT:case H.PW.RESPONSIVE_SET:return"LIBRARY"===e.subscriptionStatus?e.sourceLibraryKey:null;case H.PW.COMPONENT:case H.PW.STATE_GROUP:case H.PW.STYLE:case H.PW.VARIABLE:case H.PW.VARIABLE_SET:case H.PW.MODULE:case H.PW.MANAGED_STRING:return e.library_key}}function ec(e){return e.map(es)}function ed(e){return eo(e).version}function eu(e){return!e.isShown||e.isCreating?null:e.style.isLocal?null:e.style}function em(e,r,n){for(let n of Object.values(r))if("loaded"===n.status&&n.data.key===e)return n.data;for(let r of Object.values(n))if(r.key===e)return r;return null}function ep(e,r){let n=Object.create(null);if(!r||!r.library_key)return n;let a=(0,m.l)(r.library_key),i=r.team_id||H.Yu,o=e[i]?.[a]??Object.create(null);for(let e in o)null==o[e].unpublished_at&&(n[e]=o[e]);return n}function eh(e,r){return r?eg(e)[r]??{}:{}}function e_(e,r){return Object.values(eh(e,r))}function eg(e){let r={};for(let n of Object.values(e))for(let[e,a]of Object.entries(n))r[(0,m.l)(e)]=a;return r}function ef(e){let r=[];return ey(e,(e,n,a,i)=>{r.push(i)}),r}function eE(e){let r=[];for(let n of Object.keys(e))for(let a of Object.values(e[(0,m.l)(n)]??{}))r.push(a);return r}function ey(e,r){for(let[n,a]of Object.entries(e))for(let[e,i]of Object.entries(a)){let a=(0,m.l)(e);for(let[e,o]of Object.entries(i))r(n,a,e,o)}}function eb(e){return Object.keys(e).map(r=>e[r]).filter(e=>!e.deletedFromSceneGraph)}function ev(e,r){let n=[];for(let a in e){let i=e[a];i.style_type!==r||i.deletedFromSceneGraph||n.push(i)}return n}function eT(e,r,n,a,i){let o=[];if((0,E.kc)().dse_lk_subscribed_items)for(let r of Object.keys(n)){let s=(0,m.l)(r);if(eF(e.defaultPublished,a,s,i)){let e=n[s]??{};o.push(...Object.values(e))}}else for(let n of Object.values(r))for(let[r,s]of Object.entries(n)){let n=(0,O.$)(r);eF(e.defaultPublished,a,n,i)&&o.push(...Object.values(s))}return o}let eI=new Set;async function eS(e){let r=new Map((e=e.filter(e=>e.canvas_url&&!B.Eo.hasKeyInCache((0,$.P)(e.canvas_url).url)&&!eI.has(e.key))).map(e=>[e.key,e.canvas_url])),n=e.map(e=>e.key);if(n.forEach(e=>eI.add(e)),(0,E.kc)().ds_file_proxy_for_style_assets)await Promise.all(n.map(e=>B.Eo.getCanvas({canvas_url:r.get(e)})));else{if(0===n.length)return;try{let e=await C.Ay.post("/style/canvases",{style_keys:n});for(let[n,a]of Object.entries(e.data.meta.urls))C.Ay.crossOriginGetAny(a,null,{responseType:"arraybuffer"}).then(({data:e})=>{let a=r.get((0,d.n3)(n));if(a){let r=(0,$.P)(a).url;B.Eo.putCanvas(r,e)}eI.delete((0,d.n3)(n))}).catch(()=>{eI.delete((0,d.n3)(n))})}catch(e){n.forEach(e=>eI.delete(e))}}}let ew=["TEXT","FILL","EFFECT","GRID"],eA=(e,r)=>{let n=r?1:2;switch(e){case"TEXT":return(0,L.t)("design_systems.styles.text_style",{numStyles:n});case"FILL":return(0,L.t)("design_systems.styles.color_style",{numStyles:n});case"EFFECT":return(0,L.t)("design_systems.styles.effect_style",{numStyles:n});case"GRID":return(0,L.t)("design_systems.styles.grid_style",{numStyles:n});case"EXPORT":return(0,L.t)("design_systems.styles.export_style");case"STROKE":return(0,L.t)("design_systems.styles.stroke_style");default:return(0,_.sx)("Unknown style type",{styleType:e}),(0,L.t)("design_systems.styles.styles",{numStyles:n})}};function eC(e){return eA(e,!1)}function eN(e,r,n){return r in e?{design:!!e[r]?.design,figjam:!!e[r]?.figjam,slides:!!e[r]?.slides,subscriptionType:n,subscriptionId:e[r]?.subscriptionId}:{design:null,figjam:null,slides:null,subscriptionType:null}}let eL=e=>null!==e.design&&null!==e.figjam&&null!==e.slides;function eO(e){let r=(0,y.useAtomValue)(Y.GO),n=function(e){let r=(0,Y.Nn)();return a.useMemo(()=>e?r?(0,b.gB)(eN(r,e.libraryKey,ee.Qh.COMMUNITY)):(0,b.Xm)():(0,b.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null}),[e,r])}(e);return a.useMemo(()=>{if(!e)return(0,b.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==r.status)return r;if("loaded"!==n.status)return n;let a=eN(r.data,e.libraryKey,ee.Qh.ORGANIZATION);return eL(a)?(0,b.gB)(a):n},[e,r,n])}function eR(e,r){let n=(0,y.useAtomValue)((0,Y.pD)(r)),i=eO(e);return a.useMemo(()=>{if(!e)return(0,b.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==n.status)return n;if("loaded"!==i.status)return i;let r=eN(n.data,e.libraryKey,ee.Qh.WORKSPACE);return eL(r)?(0,b.gB)(r):i},[e,n,i])}function eP(e,r){let n=(0,y.useAtomValue)((0,Y.Lr)(r)),i=eR(e,r);return a.useMemo(()=>{if(!e||!r)return(0,b.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==n.status)return n;if("loaded"!==i.status)return i;let a=eN(n.data,e.libraryKey,ee.Qh.TEAM);return eL(a)?(0,b.gB)(a):i},[e,n,i,r])}function eD(e){let r=(0,y.useAtomValue)(Y.zK),n=eO(e);return a.useMemo(()=>{if(!e)return(0,b.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==r.status)return r;if("loaded"!==n.status)return n;let a=eN(r.data,e.libraryKey,ee.Qh.USER);return eL(a)?(0,b.gB)(a):n},[e,r,n])}let ek=(e,r)=>(0,O.$)(e.key)===r||!!e.source_file_key&&(0,O.$)(e.source_file_key)===r;function eM(){let e=(0,j.q5)(),r=(0,i.d4)(e=>e.library),n=(0,ee.He)();return a.useCallback(a=>!!e&&eF(r.defaultPublished,{key:e.key,team_id:e.teamId,editor_type:e.editorType,source_file_key:e.sourceFileKey},a,n),[e,r.defaultPublished,n])}function eF(e,r,n,a){return!(!r||!n||ek(r,n))&&(!!td(e,n)||a.has(n))}function ex(e,r,n,a,i,o){if(n.length)return!0;for(let n of a){let a;let s=i[n];if(s&&(a="library_key"in s?s.library_key:"loaded"===s.status&&s.data.library_key)&&eF(e.defaultPublished,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},a,o))return!0}return!1}let eU=(e,r)=>e.style_type===r.style_type?0:ew.indexOf(e.style_type)<ew.indexOf(r.style_type)?-1:1,eB=(e,r)=>-(0,T.Ez)(e.sort_position||"",r.sort_position||"");function eV(e,r){let n=eU(e,r);return 0===n?eB(e,r):n}function eG(e){e.sort(eB)}function eH(e,r){let n=e=>e&&e.toLowerCase?e.toLowerCase():"",a=e.containing_frame||{},i=r.containing_frame||{};return a.pageId!==i.pageId?n(a.pageName)<n(i.pageName)?-1:1:a.nodeId!==i.nodeId?n(a.name)<n(i.name)?-1:1:n(e.name)<n(r.name)?-1:1}function eW(e){let r=[...e];return eG(r),{stylesByPrefix:r.reduce((e,r)=>{let n=(0,V.In)(r.name);return e[n]=e[n]||[],e[n].push(r),e},Object.create(null)),sortedPrefixes:(0,W.wM)(r)}}let eK=!0;function eY(e,r){if(!e||!r)return!0;for(let n in e){if(!(n in r))return!0;let a=e[n],i=r[n];for(let e in a)if(a[e]!==i[e])return!0;for(let e in i)if(!(e in a))return!0}for(let n in r)if(!(n in e))return!0;return!1}function e$(e,r,n,a,i,o,s,l,c,d){let u=Object.create(null),m=0;for(let p in r.forEach(r=>{let c=r.nodeId,p=a[c];o[c]=e0(i[c]),u[c]=e(p,n[c],r,s,l,d);let h=u[c];h.status===H.E8.NEW&&h.type===H.PW.COMPONENT&&(m+=1)}),a)if(!(p in u)){let e=i[p];e&&e.url&&(0,B.qv)(e.url);let r=a[p];if(r.type===H.PW.COMPONENT||r.type===H.PW.STATE_GROUP){let e=(r.type,H.PW.COMPONENT,r);e.old_key&&c.add(e.node_id)}}for(let r in n)r in u||(o[r]=e0(i[r]),u[r]=e(a[r],n[r],null,s,l,d));return{newLocal:u,numNewComponents:m}}function ej(e){let r=e.getState();if(r.versionHistory.activeId&&r.versionHistory.activeId!==et.V_||!r.mirror?.sceneGraph)return;let n=(0,U.d1)(r),a=n?n.key:"",i=n?.library_key?(0,m.l)(n.library_key):(0,m.l)(""),o=new Set,s={},{newLocal:l,numNewComponents:c}=e$(eZ,r.library.publishableSymbols,r.library.openFilePublished__LIVEGRAPH.components,r.library.local.components,r.library.local.thumbnails,s,a,i,o,H.PW.COMPONENT),{newLocal:d}=e$(eX,r.library.publishableStateGroups,r.library.openFilePublished__LIVEGRAPH.stateGroups,r.library.local.stateGroups,r.library.local.thumbnails,s,a,i,o,H.PW.STATE_GROUP),{newLocal:u}=e$(eJ,r.library.publishableStyles,r.library.openFilePublished__LIVEGRAPH.styles,r.library.local.styles,r.library.local.thumbnails,s,a,i,o,H.PW.STYLE),{newLocal:p}=e$(eQ,r.library.publishableModules,r.library.openFilePublished__LIVEGRAPH.modules,r.library.local.modules,r.library.local.thumbnails,s,a,i,o,H.PW.MODULE);if(eY(r.library.local.components,l)&&e.dispatch(M.I0({local:l,type:H.PW.COMPONENT})),eY(r.library.local.stateGroups,d)&&e.dispatch(M.I0({local:d,type:H.PW.STATE_GROUP})),eY(r.library.local.styles,u)&&e.dispatch(M.I0({local:u,type:H.PW.STYLE})),eY(r.library.local.modules,p)&&(0,E.kc)().dse_module_publish&&e.dispatch(M.I0({local:p,type:H.PW.MODULE})),function(e,r){if(!e&&!r)return!1;if(!e||!r||Object.keys(e).length!==Object.keys(r).length)return!0;for(let n in e)if(!r[n]||e[n].url!==r[n].url||e[n].content_hash!==r[n].content_hash)return!0;return!1}(r.library.local.thumbnails,s)&&e.dispatch(F.xp({thumbnails:s})),c>0&&eK&&((0,N.YQ)({id:"Parsed first components"}),eK=!1),o.size>0){let n=r.notifications.filter(e=>e.type===D._.MOVE_COMPONENTS_PROMPT);if(n.length>0){let r=n[0].type===D._.MOVE_COMPONENTS_PROMPT&&n[0].movableItemIds;r&&(0,S.Bq)(r,o)&&e.dispatch(P.$.dequeue({type:D._.MOVE_COMPONENTS_PROMPT}))}}}let ez="Generating a local library item that is neither in the library nor in the scene graph. Why.",eq=(e,r,n,a,i,o)=>{var s;if(!n){if(r)return{...r,status:H.E8.DELETED,deletedFromSceneGraph:!0};throw Error(ez)}let l=r&&null==r.unpublished_at,c=!!n.isPublishable,d=H.E8.NOT_STAGED;l&&!c?d=H.E8.DELETED:!l&&c?d=H.E8.NEW:l||c||(d=H.E8.NOT_STAGED);let{description:u,description_rt:m}=(s=n.description,{description:n.descriptionPlain??"",description_rt:s??""});return{node_id:n.nodeId,name:n.name,description:u,description_rt:m,file_key:a,file_key_source:R.Ps.LOCAL_FILE,library_key:i,isPublishable:c,deletedFromSceneGraph:!1,meta:e?e.meta:void 0,isLocal:!0,status:d,type:o,thumbnail_url:r&&r.thumbnail_url||void 0}};function eZ(e,r,n,a,i){let o={...eq(e,r,n,a,i,H.PW.COMPONENT),type:H.PW.COMPONENT,height:n?.height,width:n?.width,x:n?.x,y:n?.y,componentPropDefError:n?.componentPropDefError,containing_frame:n?.containingFrame||r?.containing_frame||void 0,component_key:r?.component_key||void 0,content_hash:n?.versionHash||r?.content_hash||void 0,userFacingVersion:n?.userFacingVersion??d.F7.INVALID,old_key:n?.oldKey||void 0};if(!r)return o;let s=null==r.unpublished_at,l=!!n?.isPublishable;return s&&l&&(r&&r.content_hash===o.content_hash&&!t6(r.containing_frame,n?.containingFrame)&&t3(r.name,n?.name)&&t3(r.description,o.description)?o.status=H.E8.CURRENT:o.status=H.E8.CHANGED),o}function eX(e,r,n,a,i){let o=eq(e,r,n,a,i,H.PW.STATE_GROUP);if(!r){if(!n)throw Error(ez);return{...o,type:H.PW.STATE_GROUP,version:n.versionHash,userFacingVersion:n.userFacingVersion,containing_frame:n.containingFrame,width:n.width,height:n.height,stateGroupError:n.stateGroupError,componentPropDefError:n.componentPropDefError,fill_color:n.fill_color,default_state_key:n.default_state_key,old_key:n.oldKey||void 0}}let s={...o,type:H.PW.STATE_GROUP,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Rf.INVALID,containing_frame:n?.containingFrame||r.containing_frame,width:n?.width||r.min_node_width,height:n?.height||r.min_node_height,key:r.key||void 0,stateGroupError:n?.stateGroupError||u.bwI.NONE,componentPropDefError:n?.componentPropDefError||u.uXg.NONE,fill_color:n?.fill_color||r?.fill_color,default_state_key:n?.default_state_key||r?.default_state_key,old_key:n?.oldKey||void 0},l=null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!t6(r.containing_frame,n?.containingFrame)&&t3(r.name,n?.name)&&t3(r.description,s.description)?s.status=H.E8.CURRENT:s.status=H.E8.CHANGED),s}function eJ(e,r,n,a,i){let o=eq(e,r,n,a,i,H.PW.STYLE),s=r&&null==r.unpublished_at,l=!!n?.isPublishable,c=!1;if(s&&l&&(r&&r.content_hash===n?.versionHash&&t3(r.name,n?.name)&&t3(r.description,o.description)?t3(r.sort_position,n?.sortPosition)?o.status=H.E8.CURRENT:(o.status=H.E8.CHANGED,c=!0):o.status=H.E8.CHANGED),n)return{...o,type:H.PW.STYLE,key:n.styleKey,style_type:n.styleType,is_soft_deleted:n.isSoftDeleted,sort_position:n.sortPosition,content_hash:n.versionHash,userFacingVersion:n.userFacingVersion,hasOnlyBeenReordered:c,old_key:n.oldKey||void 0};if(r)return{...o,type:H.PW.STYLE,key:r.key,style_type:r.style_type,is_soft_deleted:!0,sort_position:r.sort_position,content_hash:r.content_hash,userFacingVersion:r.userFacingVersion,hasOnlyBeenReordered:c};throw Error(ez)}function eQ(e,r,n,a,i){let o=eq(e,r,n,a,i,H.PW.MODULE);if(!r){if(!n)throw Error(ez);return{...o,type:H.PW.MODULE,moduleSource:n.moduleSource,height:n.height,width:n.width,x:n.x,y:n.y,containing_frame:n.containingFrame,version:n.versionHash,userFacingVersion:n.userFacingVersion,old_key:n.oldKey||void 0}}let s={...o,type:H.PW.MODULE,moduleSource:n?.moduleSource||r.moduleSource,height:n?.height||r.height,width:n?.width||r.width,x:n?.x,y:n?.y,containing_frame:n?.containingFrame||r.containing_frame||void 0,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Pg.INVALID,old_key:n?.oldKey||void 0,key:r.key},l=r&&null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!t6(r.containing_frame,n?.containingFrame)&&t3(r.name,n?.name)&&t3(r.description,s.description)?s.status=H.E8.CURRENT:s.status=H.E8.CHANGED),s}function e0(e){return{kind:e&&e.kind||void 0,url:e&&e.url||void 0,content_hash:e&&e.content_hash||void 0}}function e1(e){return`GET_PUBLISHED_COMPONENTS_FOR_${e}`}let e2=new Set;function e5(e){for(let r of e2)e(x.yH({key:r}))}let e4=new Set;function e7(e,r){return e4.has(e)||e4.has(r)}function e8(e){e4.add(e)}function e3(){e4.clear()}let e6=e=>`GET_DEFAULT_LIBRARIES_FOR_${e}`;function e9(e,r){let n={};return r.forEach(e=>{if(e.containing_frame?.containingStateGroup?.nodeId){let r=e.containing_frame?.containingStateGroup?.nodeId;n[r]||(n[r]=[]),n[r].push(e.name)}}),e.map(e=>({...e,stateNames:n[e.node_id]}))}let te=new Set,tt=(0,R.fv)();async function tr(e,r=[],n,a,i,o,s){if(!r.length)return{usedStylesByFileKey:{},usedStylesByLibraryKey:{}};let l={};for(let n of r){let r=e.get(n);r&&r.styleKeyForPublish&&0!==u.glU.getNumUsagesOfStyle(r.styleKeyForPublish,!0)&&(l[r.styleKeyForPublish]=n)}let c=Object.keys(l).map(d.n3),p=await X.M4.fetch(J._x.UnpublishedStylesQuery({styleKeys:c,orgId:i})),_=h()([...p,...Object.values(n).filter(e=>e.key in l)],e=>e.key),g=new Set(_.map(e=>e.key)),f=c.filter(e=>e&&!g.has((0,d.n3)(e))),[E,y]=await Promise.all([X.M4.fetch(J.qE.MissingStyleKeysQuery({styleKeys:f})),X.M4.fetch(J.qE.MissingStyleKeyToLibraryKeyQuery({styleKeys:f}))]);o&&(delete E[o.fileKey],delete y[o.libraryKey]);let b=[],v={},T={};for(let e of _){let r=tt(e),n=e.library_key,i=v[r]??=[],o=T[n]??=[];i.push(e),o.push(e),a[n]||te.has(n)||(te.add(n),b.push(n))}for(let[r,n]of Object.entries(E)){let a=v[r]??=[];for(let i of n){let n=l[i],o=n?e.get(n):null;o&&a.push({type:H.PW.STYLE,name:o.name,file_key:r,file_key_source:R.Ps.REST_API,key:i,thumbnail_url:tn(i,o.styleVersionHash),canvas_url:tn(i,o.styleVersionHash),content_hash:o.styleVersionHash||void 0,userFacingVersion:(0,d.IA)(o.userFacingVersion),node_id:o.guid,isLocal:!1,style_type:o.styleType,library_key:o.sourceLibraryKey})}}for(let[r,n]of Object.entries(y)){let a=(0,m.l)(r),i=T[a]??=[];for(let r of n){let n=l[r]&&e.get(l[r]);n&&i.push({type:H.PW.STYLE,name:n.name,file_key:"MISSING_STYLE_FAKE_FILE_KEY",file_key_source:R.Ps.REST_API,key:r,thumbnail_url:tn(r,n.styleVersionHash),canvas_url:tn(r,n.styleVersionHash),content_hash:n.styleVersionHash||void 0,userFacingVersion:(0,d.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!1,style_type:n.styleType,library_key:n.sourceLibraryKey})}}return await ta(b,s),{usedStylesByFileKey:v,usedStylesByLibraryKey:T}}function tn(e,r){return`/style/${e}/thumbnail?ver=${r}`}async function ta(e,r){if(e.length>0){let a=[];async function n(e){try{let n=await C.Ay.post("/api/files/batch",{library_keys:e});n.data.meta||(0,w.x1)("designSystems","Unexpected empty API response",{data:JSON.stringify(n.data??null),numFiles:e.length,status:n.status}),r(k.uo({files:n.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,I.$D)(c.e.DESIGN_SYSTEMS_EDITOR,e)}}for(let r=0;r<e.length;r+=200){let i=e.slice(r,r+200);a.push(n(i))}await Promise.all(a)}}async function ti(e,r,n){if(0===r.length)return[];let{styles:a,files:i}=(await C.Ay.post("/api/styles",{style_keys:r,org_id:n})).data.meta;return e(k.uo({files:i,subscribeToRealtime:!0})),a}function to(e,r=[],n=[],a,i,o,s=!1){let l={},c=r.concat(n),m=eg(a.components),p=eg(a.stateGroups),h=[];for(let r of c){let n=e.get(r);if(!n)continue;let a=n.sourceLibraryKey,o=n.publishID;if(!o||!a)continue;p[a]||m[a]||te.has(a)||(te.add(a),h.push(a));let c=n.isStateGroup,_=c?n.sharedStateGroupVersion:n.sharedSymbolVersion,g=c?n.stateGroupKey:n.componentKey,f=(c?p[a]??{}:m[a]??{})[o];if(f?.type===H.PW.COMPONENT){let e=f.containing_frame?.containingStateGroup?.nodeId;if(e){let r=p[a];f=r?.[e],c=!0}}if(f)l[es(f)]=f;else if(c){if(!g||l[g]||!n.reversedChildrenGuids.some(r=>{let n=e.get(r)?.componentKey;return n&&!l[n]}))continue;let a=u.glU.getDefaultStateForLocalStateGroup(r),s=e.get(a),[c,m]=s?[s.size.x,s.size.y]:[0,0];l[g]={type:H.PW.STATE_GROUP,name:n.name,library_key:n.sourceLibraryKey,key:g,thumbnail_url:`/state_group/${g}/thumbnail?ver=${_}&fv=${i}`,canvas_url:`/state_group/${g}/canvas?ver=${_}&fv=${i}`,node_id:o||"",isLocal:!1,version:_||d.Rf.INVALID,userFacingVersion:(0,d.Rf)(n.userFacingVersion),containing_frame:{},min_node_width:m,min_node_height:c,default_state_key:""}}else{if(!g||l[g]||n.isState&&!s||null===i)continue;l[g]={type:H.PW.COMPONENT,name:n.name,library_key:n.sourceLibraryKey,component_key:g,thumbnail_url:`/component/${g}/thumbnail?ver=${_}&fv=${i}`,canvas_url:`/component/${g}/canvas?ver=${_}&fv=${i}`,node_id:o||"",content_hash:n.sharedSymbolVersion||void 0,userFacingVersion:(0,d.F7)(n.userFacingVersion),isLocal:!1,min_node_height:n.size.x,min_node_width:n.size.y}}}return ta(h,o),Object.values(l)}function ts(e,r){return new Set(to(e.mirror.sceneGraph,(0,Q.C9)(e),(0,Q.jf)(e),e.library.publishedByLibraryKey,e.fileVersion,r).map(e=>es(e)))}let tl=(e,r,n,a,i,o)=>to(e,r,n,a,i,o,!0).reduce((e,r)=>(r.type===H.PW.COMPONENT?r.component_key&&(e[r.component_key]=r):e[r.key]=r,e),Object.create(null));function tc(e){let r=(0,i.wA)(),{library:n,sceneGraph:o,fileVersion:s,subscribedComponents:l,subscribedStateGroups:c,subscribedComponentsOnCurrentPage:d,subscribedStateGroupsOnCurrentPage:u}=(0,f.R)(e=>({library:e.library,sceneGraph:e.mirror.sceneGraph,fileVersion:e.fileVersion,subscribedComponents:(0,Q.C9)(e),subscribedStateGroups:(0,Q.jf)(e),subscribedComponentsOnCurrentPage:(0,Q.J5)(e),subscribedStateGroupsOnCurrentPage:(0,Q.EY)(e)})),[m,p]="current"===e?[d,u]:[l,c];return a.useMemo(()=>tl(o,m,p,n.publishedByLibraryKey,s,r),[o,m,p,n.publishedByLibraryKey,s,r])}function td(e,r){let n=e.libraryKeys.includes(r),a=y.atomStore.get(K.e3).has(r);return!!n||!!a}let tu=(0,v.xx)(e=>{let r={},n=e.local.styles;for(let e in n){let a=n[e];r[a.key]=a}return r});function tm(e,r,n){let a=tu(n)[e];if(a)return{kind:H.AT.LOCAL,value:a};let i=n.used__LIVEGRAPH.styles[e];return i?.status==="loaded"?{kind:H.AT.LIBRARY,value:i.data}:r&&r.length?{kind:H.AT.DANGLING,value:{key:e,node_id:r[0]}}:void 0}function tp(e,r){if(!e)return"";if(e.kind!==H.AT.DANGLING)return e.value.name;{let n=r.get(e.value.node_id);return n?n.name:""}}function th(e){let r={};for(let n in e){let a=e[n];a.containing_frame?.containingStateGroup&&(r[n]={...a})}return r}function t_(e,r,n,a){let i=r?a[r]:null;if(!i||!e)return null;let o=i[e];return o?o[n]:null}function tg(e){let r=e.type===H.PW.STATE_GROUP&&!!(e.stateGroupError&&e.stateGroupError!==u.bwI.TOO_MANY_STATES_ERROR);return!!(e.componentPropDefError&&(e.componentPropDefError===u.uXg.CONFLICTING_NAMES_ERROR||e.componentPropDefError===u.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR||e.componentPropDefError===u.uXg.UNUSED_DEF_ERROR)||r)}function tf(e){return e.variableSetError!==u.HG$.NONE}let tE=()=>{},ty=new Promise(e=>{tE=e}),tb=()=>{},tv=new Promise(e=>{tb=e}),tT=()=>{},tI=new Promise(e=>{tT=e}),tS=e=>({callback:tT,promise:tI,resetPromise:tL,loadingKey:`GET_USED_COMPONENTS_STATE_GROUPS_FOR_${e.getState().openFile?.key}`}),tw=()=>{},tA=new Promise(e=>{tw=e}),tC=new Promise(e=>{});function tN(){tE(),tb(),tw(),ty=new Promise(e=>{tE=e}),tv=new Promise(e=>{tb=e}),tA=new Promise(e=>{tw=e}),tL()}function tL(){tT(),tI=new Promise(e=>{tT=e})}function tO(e,r,n){return e.team_id===n?-1:r.team_id===n?1:(e.team_name||"").localeCompare(r.team_name||"")}function tR(e,r,n){return e.sort((e,a)=>{var i;let o=(i=n?.groupByFolders,e.team_id!==a.team_id?tO(e,a,r):i&&e.file.folder_id!==a.file.folder_id?e.folder_name<a.folder_name?-1:1:(e.library_file_name||"").localeCompare(a.library_file_name||""));return n?.isDescending?o:-o})}function tP(e,r,n,a){return e.sort((e,i)=>{var o,s,l,c,d;let u=(o=e,s=i,l=r,c=n,d=a?.groupByFolders,o.team_id!==s.team_id?o.team_id===l?-1:s.team_id===l?1:(o.team_name||"").localeCompare(s.team_name||""):d&&o.folder_id!==s.folder_id?(c[o.folder_id]?.path??"")<(c[s.folder_id]?.path??"")?-1:1:(o.library_name||"").localeCompare(s.library_name||""));return a?.isDescending?u:-u})}function tD(e,r,n){let a;let i=e.node_id,o=r[i]||{},l=o.url||null;switch(e.type){case H.PW.COMPONENT:case H.PW.STYLE:a=e.content_hash;break;case H.PW.VARIABLE:case H.PW.VARIABLE_SET:case H.PW.STATE_GROUP:case H.PW.MODULE:case H.PW.RESPONSIVE_SET:case H.PW.CODE_COMPONENT:case H.PW.MANAGED_STRING:a=e.version;break;default:(0,s.xb)(e)}return(n||o.content_hash!==a||!(0,B.OM)(l))&&(e.type===H.PW.COMPONENT||e.type===H.PW.STATE_GROUP||e.type===H.PW.MODULE||e.type===H.PW.RESPONSIVE_SET||e.type===H.PW.CODE_COMPONENT?l=(0,B.r2)(i):e.type===H.PW.STYLE?l=(0,G.fP)(e)?(0,B.jh)():(0,B.aV)(i,e.style_type):e.type===H.PW.VARIABLE||e.type===H.PW.VARIABLE_SET||e.type===H.PW.MANAGED_STRING?l=(0,B.jh)():(0,s.xb)(e)),l}function tk({numProductComponents:e,numStyles:r,numVariables:n,numVariableCollections:a,numModuleAssets:i}){let s=r>0?(0,L.t)("design_systems.libraries_modal.plural.num_style",{numStyles:r}):null,l=e>0?(0,L.t)("design_systems.libraries_modal.plural.num_component",{numComponents:e}):null,c=n>0?(0,L.t)("design_systems.libraries_modal.plural.num_variables",{numVariables:n}):null,d=(0,E.kc)().dse_editor_templates_v1&&i>0?(0,L.t)("design_systems.libraries_modal.plural.num_templates",{numTemplates:i}):null,u=0===n&&a>0?(0,L.t)("design_systems.libraries_modal.plural.variable_collections",{numVariableCollections:a}):null,m=(0,o.WI)([l,s,c,u,d]);return 0===m.length?(0,E.kc)().dse_editor_templates_v1?(0,L.t)("design_systems.libraries_modal.no_publishable_assets"):(0,L.t)("design_systems.libraries_modal.no_components_styles_variables"):(0,A.Yx)(m,"unit")}let tM=e=>e!==H.E8.DELETED&&e!==H.E8.NOT_STAGED;function tF(e,r,n,a){let i=r[e];if(!i)return null;let o=ef(n).find(e=>e.type===H.PW.COMPONENT?e.component_key===i:e.key===i),s="another file";if(!o)return s;let l=a[o.library_key];return l?l.name:s}function tU(e,r,n){let a=e.reduce((n,a)=>(r[a]?n[a]=r[a]:(0,s.KF)(!1,"Expected nodeIdsToMove to be a subset of movableNodeIdToOldKey",{nodeIdsToMove:e,movableNodeIdToOldKey:r}),n),Object.create(null));for(let e of n){let n=e.containing_frame?.containingStateGroup?.nodeId,i=r[e.node_id];if(!n||!i)continue;let o=!!r[n];a[n]||!o?a[e.node_id]=i:a[e.node_id]&&delete a[e.node_id]}return{moveRemappings:a,movableItemsToPublishAsNew:new Set(Object.keys(r).filter(e=>!a[e]))}}function tB(e){return e.isStateGroup||"SYMBOL"===e.type&&!e.isState||e.isCodeComponent}function tV(e){return H.YJ.includes(e.type)}function tG(e){return e.isLocal?u.Egt.getAssetKeyForPublish(e.node_id):es(e)}function tH(e){return e.containing_frame?.containingStateGroup?.nodeId??null}function tW(e){return!!tH(e)}function tK(e,r,n,a){let i;if(!e)return;let o=r.get(e);if(o&&o.containingStateGroupId&&(o=r.get(o.containingStateGroupId)),o){if(o.isSubscribedAsset){let e=o.componentKey??o.stateGroupKey;e&&(i=a?.[e])}else i=n?.[o.guid];return i}}function tY(e,r){function n(e){return e.toLowerCase()}let a=n(e.name),i=n(r.name);return a<i?-1:a>i?1:0}function t$(e){switch(e){case H.jg.THIRTY_DAYS:return(0,L.t)("design_systems.libraries_modal.30_days");case H.jg.SIXTY_DAYS:return(0,L.t)("design_systems.libraries_modal.60_days");case H.jg.NINETY_DAYS:return(0,L.t)("design_systems.libraries_modal.90_days");case H.jg.YEAR:return(0,L.t)("design_systems.libraries_modal.year");default:(0,s.xb)(e)}}function tj(e){return!!((0,E.kc)().dse_templates_proto&&e.description?.startsWith("Figma.TemporaryIsTemplate"))}function tz(e){return!!((0,E.kc)().dse_module_publish&&"MODULE"===e.type)}function tq(e,r){return(null!==e.design||null!==e.figjam||null!==e.slides)&&(!!e.design||!!e.figjam||!!e.slides)&&(!!e.design&&!r.designSubscribed||!!e.figjam&&!r.figjamSubscribed||!!e.slides&&!r.slidesSubscribed)}function tZ(e){return e?.publishFile__DEPRECATED??null}function tX(e,r){return e?(r||(r=t0(g.D.getState().library.publishedByLibraryKey.components)),r[e]?.library_key??null):null}function tJ(e,r){return e?(r||(r=t0(g.D.getState().library.publishedByLibraryKey.stateGroups)),r[e]?.library_key??null):null}function tQ(e){let r={};return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(a=>{Object.keys(e[n][a]).forEach(i=>{r[a]=r[a]||{},r[a][i]=e[n][a][i]})})}),r}function t0(e){let r={};return ey(e,(e,n,a,i)=>{r[es(i)]=i}),r}function t1(e){let r=(0,i.wA)(),n=a.useMemo(()=>(0,l.s)(()=>{e&&e.value.node_id&&r(F.rb({styleNodeId:e.value.node_id,styleKind:e.kind}))}),[r,e]);a.useEffect(n)}function t2(e){switch(e.type){case H.PW.CODE_COMPONENT:case H.PW.RESPONSIVE_SET:return"LIBRARY"===e.subscriptionStatus?`${e.sourceLibraryKey}:${e.assetId}`:`${e.library_key}:${e.node_id}`;default:return`${e.library_key}:${e.node_id}`}}function t5(e){return(0,q.ag)(e.openFile,e.currentUserOrgId)}function t4(){let e=(0,q.LH)(),r=(0,i.d4)(e=>e.orgById);return(0,z.td)(e,r)}function t7(e){let r=(0,ee.je)();return a.useMemo(()=>{if(e&&"loaded"===r.status)return r.data?.find(r=>r.libraryKey===e)?.id},[e,r.data,r.status])}function t8(e){return e===Z.pk.ORG||e===Z.pk.WORKSPACE}function t3(e,r){return!e&&!r||e===r}function t6(e,r){let n=e?e.nodeId:void 0,a=e?e.name:void 0,i=e?e.backgroundColor:void 0,o=e?e.pageId:void 0,s=r?r.nodeId:void 0,l=r?r.name:void 0,c=r?r.backgroundColor:void 0,d=r?r.pageId:void 0;return(n!==s||a!==l||i!==c||!!o||!d)&&!(null==e&&null==r||null!=e&&null!=r&&t3(e.nodeId,r.nodeId)&&t3(e.name,r.name)&&t3(e.backgroundColor,r.backgroundColor)&&t3(e.pageName,r.pageName)&&t3(e.pageId,r.pageId)&&function(e,r){if(null==e&&null==r)return!0;if(null==e||null==r)return!1;for(let n of["nodeId","name"])if(!t3(e[n],r[n]))return!1;return!0}(e.containingStateGroup,r.containingStateGroup))}function t9(e,r){return!e&&!r||!!e&&!!r&&e.nodeId==r.nodeId}},379352:(e,r,n)=>{n.d(r,{V:()=>_,e:()=>h});var a=n(411855),i=n(236891),o=n(33011),s=n(89865),l=n.n(s),c=n(841962),d=n(728722),u=n(736942),m=n(653798),p=n(183739);function h(e,{enabled:r=!0}={}){let n=(0,d.Rs)(p.o27,{libraryKey:e},{enabled:r});return a.useMemo(()=>n.transform(g),[n])}function _(e,{enabled:r=!0}={}){let n=a.useMemo(()=>e.map(e=>({libraryKey:e})),[e]),o=(0,d.p)(p.o27,n,{enabled:r}),s=a.useRef(new Set([]));return a.useMemo(()=>u.Qw.all(o.map(e=>e.result)).transform(e=>{let r=e.map(e=>g(e,s.current)).filter(i.Vq);return l()(r,e=>e.libraryKey)}),[o])}function g(e,r){if(!e.libraryKeyToFile)return null;let{file:n,hubFile:a,libraryKey:i}=e.libraryKeyToFile,s=(0,o.l)(i);return a?.currentHubFileVersion?{libraryKey:s,isHubFile:!0,name:a.currentHubFileVersion.name,thumbnailUrl:a.thumbnailUrl}:n?{libraryKey:s,isHubFile:!1,name:n.name,thumbnailUrl:n.thumbnailUrl,thumbnailUrlOverride:n.thumbnailUrlOverride,thumbnailGuid:n.thumbnailGuid}:(r?.has(i)||(e.libraryKeyToFile&&(0,c.kc)().dse_lk_library_metadata_sentry&&(0,m.x1)("designSystems","Unexpectedly failed to access library by key",{libraryKey:i},{reportAsSentryError:!0}),r?.add(i)),null)}},285024:(e,r,n)=>{n.d(r,{B0:()=>er,Ow:()=>Q,QB:()=>q,Wg:()=>Z,YG:()=>z,dO:()=>Y,u2:()=>ee,vz:()=>K});var a=n(846288),i=n(33011),o=n(35645),s=n.n(o),l=n(740222),c=n.n(l),d=n(777535),u=n(885123),m=n(841962),p=n(875877),h=n(703079),_=n(238311),g=n(399991),f=n(837982),E=n(534294),y=n(888807),b=n(617254),v=n(73041),T=n(190500),I=n(365347),S=n(639215),w=n(481954),A=n(365315),C=n(387583),N=n(827473),L=n(354465),O=n(143037),R=n(484930),P=n(914077),D=n(957020),k=n(333167),M=n(920432),F=n(27365),x=n(744297),U=n(767731),B=n(732767),V=n(401562),G=n(835878),H=n(611209),W=n(800115);let K=[{name:"name",weight:.6},{name:"stateNames",weight:.4},{name:"containing_frame.name",weight:.1},{name:"containing_frame.pageName",weight:.1},{name:"description",weight:.05}],Y={threshold:.3,tokenize:!0,shouldSort:!0},$=new R.KH({keys:K,...Y});class j extends H.a{constructor(){super(...arguments),this.lastUpdatedQuery=(0,g.PN)()?0:Date.now(),this.expSearchUnpublishedAssetsEnabled=void 0,this.initSources=e=>{let r=e.getState(),n=(0,I.d1)(r);n&&((e,a,i)=>{let o=[],s=new Set,l=e=>{for(let r of e){let e=(0,A.V)(r);e&&s.has(e)||(e&&s.add(e),o.push({...r}))}};l((0,N.X0)(a)),r.library.assetsPanelSearch.shouldSearchDefaultLibraries&&(l((0,N.A0)(r.library,(0,w.Po)(r.library.defaultPublished.components),(0,w.cO)(r.library.defaultPublished.componentsByLibraryKey),n,this.subscribedLibraryKeys)),l((0,N.A0)(r.library,r.library.defaultPublished.stateGroups,r.library.defaultPublished.stateGroupsByLibraryKey,n,this.subscribedLibraryKeys)));let c=Object.values((0,N.WV)(r.library.local.components)),d=Object.values(r.library.local.stateGroups);l((0,N.Gg)(d,c)),(0,m.kc)().dse_editor_templates_v1&&l(Object.values(i)),e.set(o)})($,(0,w.Jl)(r.library.local.components),r.library.local.modules)},this.computeLocalResultsPromise=async(e,r)=>{let n=(0,W.dm)($,e);return{normalizedSearchResults:(await n).filter(e=>(0,S.Oo)(e,r)),unsubscribedSearchResults:[]}},this.computeFileResultsPromise=async(e,r,n,a,i,o,s,l,c,d,u=!1,m)=>await (0,G.Og)(e,r,n,a,i,o,s,l,c,d,u,m),this.computeAllResultsPromise=async(e,r,n,a,i,o,s,l,c,d,u,m,p,h,_,g,f=!1,E,y)=>await (0,G.BG)(e,r,n,a,i,o,s,l,c,d,u,m,$,this.subscribedLibraryFileKeys,this.subscribedLibraryKeys,p,h,_,g,f,E,y),this.computeResultsReduxSearchTypeHelper=async(e,r,n,o,s,l,d,m,h,g,f)=>{let E;let y=u.D.getState(),b=(0,N.ET)(y,u.D.dispatch),v=p.atomStore.get(x.lj).length>0,I=await (0,_.hW)("exp_search_asset_server_reranking_v4"),S=I.get("is_sinatra",!1),w=I.get("ml_rerank",!1);switch(r?.type){case F.I.LOCAL:return this.computeLocalResultsPromise(e,y.openFile?.key);case F.I.FILE:E=this.computeFileResultsPromise(e,c()(r,["fileKey","libraryKey"]),y.selectedView?.view==="fullscreen"&&y.selectedView?.fileKey||y.openFile?.key,n,s,S,w,y.openFile?.editorType?.toString(),d,l,v,f);break;case F.I.RECENT:case void 0:case F.I.ALL:E=this.computeAllResultsPromise(e,n,y.fileVersion,y.openFile?.parentOrgId??null,y.openFile,y.selectedView,y.fileByKey,o,s,b,S,w,d,l,h,g,v,f,!1);break;case F.I.SITE_KIT:return Promise.resolve({normalizedSearchResults:[],unsubscribedSearchResults:[]});default:return(0,a.xb)(r,"unknown search type")}let A=await (0,B.Ci)(!0),C=await E;return await z.trackTopKResults({results:C.normalizedSearchResults,sessionId:s??"",queryId:d??"",entryPoint:l??"",queryType:"text",aiResultsEnabled:A,productType:(0,T.pi)({editorType:y.openFile?.editorType}),libraryKey:(0,i.l)(y.openFile?.libraryKey??""),fileKey:y.openFile?.key,query:e,searchType:r?.type??F.I.ALL}),E},this.trackTopKResults=async e=>{let{results:r,sessionId:n,queryId:a,entryPoint:i,queryType:o,aiResultsEnabled:s,productType:l,libraryKey:c,fileKey:u,query:m,searchType:p}=e,h=(await (0,_.w0)("max_asset_search_results_to_log")).get("count",20);r.slice(0,h).forEach((e,r)=>{let h=e.library_key,_=(0,G.ko)(h,c,this.subscribedLibraryKeys),g=e.server_score||e.ai_score||e.lexical_score?"server":"fuse";d.az.trackDefinedEvent("asset_search.top_k_results",{sessionId:n,queryId:a,entryPoint:i,fileKey:u,position:r,aiResultsEnabled:s,assetKey:ee(e),assetLibraryKey:h,libraryType:_,assetType:e.type,queryType:o,isInSubscribedLibrary:!!h&&this.subscribedLibraryKeys.has(h),productType:l,query:m,source:g,score:"score"in e?e.score:void 0,scoreFuse:e.fuse_score??void 0,scoreServer:e.server_score??void 0,searchType:p})})},this.computeResultsRedux=async e=>{let r=er(),n=e.getState(),a=(0,k.Ei)(),i=p.atomStore.get(C.qp),o=await (0,B.Ci)(!0),l=n.library.assetsPanelSearch.query,c=n.openFile?.key,u=n.openFile?.teamId,m=n.openFile?.parentOrgId;if(!l||!c){e.dispatch(y.xI()),e.dispatch((0,b.eK)({queryId:null}));return}e.dispatch((0,b.eK)({queryId:a}));let h=n.library.assetsPanelSearch.searchOptions;if(h&&!(0,G.eu)(h)){e.dispatch(y.xI()),e.dispatch((0,b.eK)({queryId:null}));return}let _=(0,v.XE)(n.selectedView)===P.nT.Design;d.az.trackDefinedEvent("assets_panel.component_search",{query:l,inDesignEditor:_,searchSessionId:n.search.sessionId??"",assetsPanelVersion:n.library.assetsPanelSearch.versionForTracking,fileKey:c,fileTeamId:u??void 0,fileOrgId:m??void 0,queryId:a}),n.search.sessionId&&e.dispatch(f.pY());let g=Date.now();if(g<=this.lastUpdatedQuery)return;let E=await this.computeResultsReduxSearchTypeHelper(l,h,_,i,n.search.sessionId,n.library.assetsPanelSearch.entryPoint,a),T={aiResultsEnabled:o,query:l,queryId:a,assetsPanelVersion:n.library.assetsPanelSearch.versionForTracking,entryPoint:n.library.assetsPanelSearch.entryPoint,fileKey:c,fileOrgId:m??void 0,fileTeamId:u??void 0,selectedViewFileKey:"fullscreen"===n.selectedView.view&&n.selectedView.fileKey?n.selectedView.fileKey:void 0,totalShownResults:E.normalizedSearchResults.length,tier:function(){let e=p.atomStore.get((0,O.rQ)(!0));return e.data?.tier}()};if(h?.type===F.I.LOCAL){e.dispatch(y.Y1(E)),e.dispatch((0,b.w2)({sessionId:n.search.sessionId,query:l,queryId:a})),null===n.search.sessionId&&(0,d.sx)("asset_search.missing_session_id",{previousSessionId:n.search.lastLoadedQuery.sessionId,entryPoint:n.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let{elapsedTime:i,backgrounded:o}=r(),s={elapsedTime:i,backgrounded:o,localSearchResultCount:E.normalizedSearchResults.length,searchType:h?.type};d.az.trackDefinedEvent("assets_panel.search_time",{...T,...s,searchSessionId:n.search.sessionId??""}),d.az.trackDefinedEvent("asset_search.query_result",{...T,...s,sessionId:n.search.sessionId??"",componentSuggestionSessionId:(0,M.r6)()}),this.lastUpdatedQuery=g;return}if(l!==e.getState().library.assetsPanelSearch.query)return;e.dispatch(y.Y1(E)),e.dispatch((0,b.w2)({sessionId:n.search.sessionId,query:l,queryId:n.search.queryId}));let[I,w]=s()(E.normalizedSearchResults,e=>(0,S.Oo)(e,c));null===n.search.sessionId&&(0,d.sx)("asset_search.missing_session_id",{previousSessionId:n.search.lastLoadedQuery.sessionId,entryPoint:n.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let{elapsedTime:A,backgrounded:N}=r(),L={elapsedTime:A,backgrounded:N,localSearchResultCount:I.length,subscribedSearchResultCount:w.length,unsubscribedSearchResultsCount:E.unsubscribedSearchResults.length,searchType:h?.type??F.I.ALL},R={},D=n.selectedView;if("fullscreen"===D.view&&D.editorType===P.nT.Sites&&h?.type&&[F.I.ALL,F.I.SITE_KIT].includes(h?.type)){let e=p.atomStore.get(et);R={siteKitSearchResultsCount:e,totalShownResults:T.totalShownResults+e}}d.az.trackDefinedEvent("assets_panel.search_time",{...T,...L,...R,searchSessionId:n.search.sessionId??""}),d.az.trackDefinedEvent("asset_search.query_result",{...T,...L,...R,sessionId:n.search.sessionId??"",componentSuggestionSessionId:(0,M.r6)()}),this.lastUpdatedQuery=g}}}let z=new j,q=(0,E.nF)((e,{ignoreLoadingState:r=!1}={})=>{e.getState().search.sessionId||e.dispatch(f.Dy({entryPoint:"editor:assets_panel"})),Z(e.getState(),{ignoreLoadingState:r})&&z.runComputeResultWithSourceChange(e)}),Z=(0,V.n)((e,{ignoreLoadingState:r=!1}={})=>r?!!(e.openFile&&e.fileVersion):!!(e.openFile&&e.fileVersion&&(0,L.D2)(e.loadingState,(0,U.yD)(e.openFile.key)))),X=e=>e.type===D.PW.COMPONENT,J=e=>e.type===D.PW.STATE_GROUP,Q=e=>e.filter(e=>X(e)||J(e));function ee(e){if((0,D.Do)(e))return"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key;switch(e.type){case D.PW.COMPONENT:return e.component_key;case D.PW.STATE_GROUP:case D.PW.MODULE:return e.key}}let et=(0,p.atom)(0);function er(){let e=new h.rw;return()=>{let r;return e.stop(e=>{r=e},{skipIfIdle:!1}),{elapsedTime:r,backgrounded:e.backgrounded||e.offlined}}}},835878:(e,r,n)=>{n.d(r,{BG:()=>m,Og:()=>u,PS:()=>p,UQ:()=>c,eu:()=>d,ko:()=>h}),n(35645);var a=n(841962),i=n(154267);n(957020);var o=n(27365),s=n(732767),l=n(800115);let c=e=>e.library.assetsPanelSearch;function d(e){return e.type===o.I.ALL||e.type===o.I.LOCAL||e.type===o.I.FILE||e.type===o.I.SITE_KIT}async function u(e,r,n,c,d,m,p,h,_,g,f=!1,E){let y=!(0,a.kc)().dse_lk_asset_search&&(0,i.wJ)(r.fileKey)?await (0,l.cC)(e,r.fileKey,c,f):await (0,l.KK)(e,r,n??"",d??"",m,p,h,_,g,E),b=await (0,s.Ci)(!0);return{normalizedSearchResults:(0,l.AG)([],y,e,o.I.FILE,b,m),unsubscribedSearchResults:[]}}async function m(e,r,n,a,i,o,c,d,u,h,_,g,f,E,y,b,v,T,I,S=!1,w,A){let C=(0,l.dm)(f,e),N=new Set(E),L=new Set(y);void 0!==I&&(N.add(I.fileKey),L.add(I.libraryKey));let O=(0,l.ik)(e,n,a,i,o,c,d,N,L,u??"",h,_,g,b,v,w,A),R=(0,l.hH)(e,N,L,r,h,S),P=(0,s.Ci)(!0),[D,{subscribedSearchResults:k,unsubscribedSearchResults:M},{communitySearchResults:F,unsubscribedCommunitySearchResults:x},U]=await Promise.all([C,O,R,P]);return p(D,k,M,F,x,e,_,T??!1,U)}function p(e,r,n,a,i,s,c,d,u){let m=e,p=r;d?(p=(0,l.Yl)(r,e,a||[]),m=e.filter(e=>!e.server_score&&!e.ai_score&&!e.lexical_score||(e.score=e.lexical_score||e.ai_score||e.server_score||e.score,p.push(e),!1))):m=(0,l.Yl)(e,r,a||[]);let h=(0,l.AG)(m,p,s,o.I.ALL,u,c),_=(0,l.Yl)(a||[],h),g=(0,l.Yl)(n,m),f=(0,l.Yl)(i||[],g);return{normalizedSearchResults:[...h,..._],unsubscribedSearchResults:[...g,...f]}}function h(e,r,n){return r===e?"LOCAL":n.has(e)?"SUBSCRIBED":"UNSUBSCRIBED"}},800115:(e,r,n)=>{n.d(r,{AG:()=>W,Cc:()=>L,K4:()=>O,KK:()=>K,UR:()=>A,Yl:()=>H,cC:()=>B,cu:()=>k,d5:()=>x,dm:()=>V,f$:()=>$,hH:()=>F,ik:()=>N,lR:()=>U});var a=n(33011),i=n(35645),o=n.n(i),s=n(740222),l=n.n(s),c=n(777535),d=n(885123),u=n(841962),m=n(875877),p=n(238311),h=n(650981),_=n(639215),g=n(23478),f=n(154267),E=n(254903),y=n(827473),b=n(598378),v=n(314540),T=n(841924),I=n(957020),S=n(161857),w=n(27365);let A=40,C=(0,h.fv)();async function N(e,r,n,a,i,o,s,l,c,d,u,m,p,h,_,g,f=!1){return O(await L(e,r,n,a,i,l,c,d,m,p,h,_,g,f),a,o,s,l,c,u)}async function L(e,r,n,i,o,s,l,m,p,h,_,g,f,y=!1){try{let c=i?.editorType===v._Y.WHITEBOARD,b=((0,u.kc)().dse_lk_asset_search?l:s).size<A,T=o?.view==="fullscreen"&&o?.fileKey||i?.key||"",I=i?.libraryKey?(0,a.l)(i?.libraryKey):null,w=new Set(s),C=new Set(l);y&&(w.add(T),I&&C.add((0,a.l)(I)));let{usedProductComponentsOnPage:N,usedProductComponentsFromUnsubscribedLibrary:L}=await k(d.D.getState(),l,I),O=(0,u.kc)().dse_lk_asset_search?{subscribedLibraryKeys:b?Array.from(C):void 0}:{subscribedLibraryFileKeys:b?JSON.stringify(Array.from(w)):void 0},R={query:e,openFileKey:T,fv:r||0,orgId:n||void 0,excludeAIResults:c,...O,searchSessionId:m,isUi3:E.nt.ui3.getValue(),productType:i?.editorType?.toString(),queryId:_,selectedItems:f,usedProductComponents:N,usedProductComponentsFromUnsubscribedLibrary:L,serverRerank:p,mlRerank:h,entryPoint:g,includeOnlySubscribed:y&&b};return(await S.$W.postComponents(R)).data.meta}catch(r){return c.az.trackDefinedEvent("assets_panel.server_search_for_all_components_failure",{query:e}),[]}}function O(e,r,n,a,i,s,l){let c=r?r.key:"",d=r&&((0,g.Kz)(r)?r.sourceFileKey:""),m=e.filter(e=>!(0,_.Oo)(e,d)&&(0,u.u4)("dse_lk_asset_search",e.library_key in a,C(e)in n)).map(e=>({...e,server_score:e.score})),[p,h]=o()(m,e=>((0,u.kc)().dse_lk_asset_search?s.has(e.library_key)||r?.libraryKey===e.library_key:i.has(C(e))||C(e)===c)||l.has((0,y.Av)(e)));return{subscribedSearchResults:p,unsubscribedSearchResults:h}}function R(e,r,n){let a=e/2,i=Math.min(r.length,a),o=Math.min(n.length,a);return[...r.slice(0,i),...n.slice(0,o),...r.slice(i),...n.slice(o)].slice(0,e)}function P(e){let r=e.mirror.sceneGraph;return{components:e.library.subscribedSymbolsOnCurrentPage.filter(e=>{let n=r.get(e.nodeId);return!n?.containingStateGroupId}).map(e=>({key:e.key,type:I.PW.COMPONENT})),stateGroups:e.library.subscribedStateGroupsOnCurrentPage.map(e=>({key:e.key,type:I.PW.STATE_GROUP}))}}function D(e,r){let n=e=>new Set(e.map(e=>e.key)),a=(e,r)=>e.filter(e=>!r.has(e.key)),i=n(e),o=r.filter(e=>i.has(e.key)),s=n(o);return{itemsOverlapping:o,itemsOnPageFromSubscribedLib:a(e,s),itemsNotOnPageFromUnsubscribedLib:a(r,s)}}async function k(e,r,n){let{components:a,stateGroups:i}=P(e),{components:o,stateGroups:s}=function(e,r,n){let a=(0,y.ah)(n.library.publishedByLibraryKey.components),i=(0,y.ah)(n.library.publishedByLibraryKey.stateGroups),o=n.mirror.sceneGraph;return{components:n.library.subscribedSymbolsFromLoadedPages.filter(n=>{let i=o.get(n.nodeId),s=(0,y.uN)(n.key,a);return!i?.containingStateGroupId&&s&&!e.has(s)&&s!==r}).map(e=>({key:e.key,type:I.PW.COMPONENT})),stateGroups:n.library.subscribedStateGroupsFromLoadedPages.map(e=>({key:e.key,type:I.PW.STATE_GROUP})).filter(n=>{let a=(0,y.f0)(n.key,i);return a&&!e.has(a)&&a!==r})}}(r,n,e),{itemsOverlapping:l,itemsOnPageFromSubscribedLib:c,itemsNotOnPageFromUnsubscribedLib:d}=D(a,o),{itemsOverlapping:u,itemsOnPageFromSubscribedLib:m,itemsNotOnPageFromUnsubscribedLib:h}=D(i,s),_=(await (0,p.w0)("max_product_components_to_log")).get("count",1e3),g=(await (0,p.w0)("percent_used_product_components_on_page")).get("percent",.5),f=R(_,l,u),E=_-f.length,b=R(Math.max(Math.floor(g*E),E-d.length-h.length),c,m),v=R(_-(f=f.concat(b)).length,d,h);return{usedProductComponentsOnPage:f,usedProductComponentsFromUnsubscribedLibrary:v}}let M=(0,h.fv)();async function F(e,r,n,a,i,o=!1){return U(await x(e,a,o),r,n,i)}async function x(e,r,n=!1){if(!r)return[];try{if(!m.atomStore.get(f.JB))return[];let{results:r}=(await S.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,S.in)([I.PW.COMPONENT,I.PW.STATE_GROUP]).join(","),includeVisualAssets:!!n||void 0})).data.meta;return r}catch(r){return c.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),[]}}function U(e,r,n,a){let[i,s]=o()(e,function(e){return!!a.has((0,y.Av)(e))||((0,u.kc)().dse_lk_asset_search?n.has(e.library_key):r.has(M(e)))});return{communitySearchResults:i,unsubscribedCommunitySearchResults:s}}async function B(e,r,n,a=!1){if(!n)return[];try{if(!m.atomStore.get(f.JB))return[];let{results:n}=(await S.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,S.in)([I.PW.COMPONENT,I.PW.STATE_GROUP]).join(","),hubFileIds:[r],includeVisualAssets:!!a||void 0})).data.meta;return n}catch(r){return c.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),[]}}function V(e,r){return e.search(r).then(e=>e.map(e=>({...e.item,score:e.score,fuse_score:e.score})))}function G(e,r){let n=r.split(" ").filter(e=>e.length>2),a=e.name.toLowerCase().substring(e.name.lastIndexOf("/")+1);return n.length>0&&n.every(e=>a.includes(e.toLowerCase()))}function H(e,...r){let n={};r.forEach(e=>{e.forEach(e=>{n[(0,y.Av)(e)]=e})});let a=[];return e.forEach(e=>{let r=(0,y.Av)(e);r in n?(e.ai_score&&(n[r].ai_score=e.ai_score),e.lexical_score&&(n[r].lexical_score=e.lexical_score),e.server_score&&(n[r].server_score=e.server_score),e.fuse_score&&(n[r].fuse_score=e.fuse_score)):a.push(e)}),a}function W(e,r,n,a,i,s){if(0===r.length)return e;if(a===w.I.FILE&&!i)return r;let l=r;i&&!s&&(l=function(e,r){let n=e.filter(e=>e.lexical_score),[a,i]=o()(n,e=>G(e,r)),s=e.filter(e=>e.ai_score),l=Math.max(...a.map(e=>e.lexical_score)),c=Math.min(...a.map(e=>e.lexical_score)),d=Math.max(...i.map(e=>e.lexical_score)),u=Math.min(...i.map(e=>e.lexical_score)),m=Math.max(...s.map(e=>e.ai_score)),p=Math.min(...s.map(e=>e.ai_score));return e=(e=e.map(e=>{if(e.lexical_score){let n;return n=G(e,r)?l===c?1:.9+.09999999999999998*((e.lexical_score-c)/(l-c)):d===u?.89:.89*(e.lexical_score-u)/(d-u),{...e,score:n}}return e})).map(e=>{if(e.ai_score){let r=m===p?.89:(e.ai_score-p)/(m-p)*.89;return e.lexical_score&&(r=Math.max(r,e.score)),{...e,score:r}}return e})}(l,n));let c=Math.max(...l.map(e=>e.score));return[...e.map(e=>{let r=e.server_score||1-e.fuse_score,n=(1-e.score)*.95*c;return{...e,score:s?r:n}}),...l].sort((e,r)=>r.score-e.score)}async function K(e,r,n,a,i,o,s,l,m,h){try{let{components:c,stateGroups:_}=P(d.D.getState()),g=(await (0,p.w0)("max_product_components_to_log")).get("count",1e3),{libraryKey:f,fileKey:y}=r,b={query:e,...(0,u.kc)().dse_lk_asset_search?{libraryKey:f}:{fileKey:y},openFileKey:n,searchSessionId:a,isUi3:E.nt.ui3.getValue(),productType:s,queryId:l,selectedItems:h,usedProductComponents:R(g,c,_),serverRerank:i,mlRerank:o,entryPoint:m};return(await S.$W.postComponentsFromFile(b)).data.meta}catch(n){return c.az.trackDefinedEvent("assets_panel.server_search_for_file_failure",{query:e,fileKey:r.fileKey}),[]}}T.M4.Query({fetch:async({query:e,libraryId:r,assetTypes:n})=>{let{results:a}=(await S.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,S.in)(n).join(","),hubFileIds:[r]}).catch(()=>({data:{meta:{results:[]}}}))).data.meta;return a},output:({data:e})=>e.map(b.aV),enabled:({query:e})=>null!=e&&e.trim().length>0});var Y=(e=>(e.OPEN_FILE="OPEN_FILE",e.FILE_VERSION="FILE_VERSION",e.LOADING_STATE="LOADING_STATE",e))(Y||{});function $(e){return e?l()(e,["key","libraryKey","fileRepoId","sourceFileKey","editorType","name","_name","parentOrgId"]):null}},917887:(e,r,n)=>{n.d(r,{u5:()=>o,vQ:()=>l});var a=n(202895);n(76265),n(379426);var i=n(449461);let o="originTab",s=[i.J7.BILLING];function l(e){let r=(0,a.K)(i.J7,e);if(r)return s.includes(r)?r:void 0}},801914:(e,r,n)=>{n.d(r,{Cz:()=>h,EO:()=>d,EQ:()=>p,MX:()=>u,XY:()=>m});var a=n(411855),i=n(188507),o=n(834825),s=n(890882);n(719334),n(76265),n(496203),n(871290);var l=n(661137),c=n(650278);let d=e=>`LICENSE_GROUP_GET_${e}`;function u(e){let r=(0,i.d4)(({licenseGroups:e})=>e),n=(0,l.dq)();return(0,a.useMemo)(()=>{let a=Object.values(r).filter(r=>r&&r.org_id===(e??n));return(0,o.KQ)(a,"name"),a},[r,n,e])}function m(e){return(0,i.d4)(r=>{var n,a;return!!e&&(n=r.orgById[e],a=r.licenseGroups,!!n?.bigma_enabled&&(!!n?.license_groups_count||!!Object.keys(a).length))})}function p(e,r,n){let a=[],i=[];e.forEach(e=>{e.admin_users_metadata.length>0?e.admin_users_metadata.some(e=>e.id===r)?a.push(e):n||i.push(e):n||a.push(e)});let s=a.concat(i);return(0,o.KQ)(a,"name"),(0,o.KQ)(i,"name"),(0,o.KQ)(s,"name"),{groupsUserIsAdminOf:a,otherLicenseGroups:i,allAdminableLicenseGroups:s}}function h(e,r){let n=[],a=[];return e.forEach(e=>{(function(e,r){var n;let a=(0,c.C5)(r??[],"upcoming");return!!(r&&a&&(0,c.D1)(a))&&(0,c.hX)(r)&&(n=a.due_at,!(e.last_reviewed_at&&(0,s.A)(e.last_reviewed_at).add(14,"days").isAfter(n)))})(e,r)?n.push(e):a.push(e)}),{groupsToReview:n,groupsAlreadyReviewed:a}}},314540:(e,r,n)=>{n.d(r,{A$:()=>eJ,Ag:()=>em,B0:()=>et,BQ:()=>en,D8:()=>eP,Dh:()=>M,E9:()=>E,El:()=>X,FE:()=>d,Fd:()=>N,GP:()=>k,G_:()=>U,Go:()=>eW,Hi:()=>eZ,Il:()=>p,JB:()=>eK,K:()=>eo,KB:()=>eT,Lb:()=>eG,Lc:()=>m,Mr:()=>i,NW:()=>u,OL:()=>ep,P4:()=>eU,P5:()=>eN,PQ:()=>B,PW:()=>s,Pn:()=>ef,Pu:()=>eE,QK:()=>ev,Qh:()=>eR,R:()=>e$,R2:()=>eO,Rc:()=>f,Se:()=>ey,UX:()=>eu,Uu:()=>er,We:()=>Z,XI:()=>eY,Xn:()=>ed,Zf:()=>eV,_D:()=>ee,_Y:()=>C,a0:()=>V,bQ:()=>e_,bU:()=>q,bk:()=>L,bp:()=>eq,cA:()=>J,dQ:()=>el,eD:()=>eM,h4:()=>eh,h9:()=>g,hM:()=>es,hX:()=>ew,ho:()=>ei,iS:()=>ej,iU:()=>eB,iX:()=>ec,kI:()=>eD,kU:()=>eL,o6:()=>w,pk:()=>F,sC:()=>eF,sm:()=>eI,tK:()=>A,tw:()=>R,ud:()=>c,un:()=>y,vt:()=>eS,wl:()=>eg,xj:()=>o,xw:()=>l,xy:()=>ek,y4:()=>ez,zI:()=>z,zd:()=>ex});var a=n(104180),i=(e=>(e.FILE_SEEN="file_seen",e.DESIGN_FILE_SEEN="design_file_seen",e.WHITEBOARD_FILE_SEEN="whiteboard_file_seen",e.FILE_EDIT="file_edit",e.DESIGN_FILE_EDIT="design_file_edit",e.WHITEBOARD_FILE_EDIT="whiteboard_file_edit",e.DEV_MODE_FILE_SEEN="dev_mode_file_seen",e))(i||{});let o=(0,a.fc)(i);var s=(e=>(e.RESPONSIVE_SET="responsive_set",e.CONSTRAINED_TEMPLATE="constrained_template",e.CODE_COMPONENT="code_component",e))(s||{}),l=(e=>(e.INHERIT="INHERIT",e.NONE="NONE",e.OVERRIDE="OVERRIDE",e))(l||{}),c=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e))(c||{}),d=(e=>(e.STANDALONE="standalone",e.BUNDLE="bundle",e.ADD_ON="add_on",e))(d||{}),u=(e=>(e.MONTH="month",e.YEAR="year",e))(u||{}),m=(e=>(e.ORGANIZATION="Organization",e.ENTERPRISE="Enterprise",e))(m||{}),p=(e=>(e.ORG="Org",e))(p||{}),h=(e=>(e.PENDING="Pending",e.ACTIVE="Active",e.EXPIRED="Expired",e.DEACTIVATED="Deactivated",e))(h||{}),_=(e=>(e.PLAN="plan",e.PRODUCT="product",e))(_||{}),g=(e=>(e.PUBLISHED_PLUGIN="published-plugin",e.FIRST_PARTY="first-party",e))(g||{}),f=(e=>(e.INHERIT="INHERIT",e.OVERRIDE="OVERRIDE",e))(f||{}),E=(e=>(e.DEFAULT="default",e.SRGB="srgb",e.DISPLAY_P3="display_p3",e))(E||{}),y=(e=>(e.CREATOR="creator",e.PUBLISHER="publisher",e))(y||{}),b=(e=>(e.PENDING="pending",e.SUCCEEDED="succeeded",e.CANCELED="canceled",e.REFUNDED="refunded",e.TRIALING="trialing",e.SUBSCRIPTION_PAYMENT_FAILED="subscription_payment_failed",e.INVOICE_FINALIZATION_FAILED="invoice_finalization_failed",e.DISPUTED="disputed",e))(b||{}),v=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.PROFILE="profile",e.WIDGET="widget",e))(v||{}),T=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e))(T||{}),I=(e=>(e.ALLOW="ALLOW",e.DISABLE="DISABLE",e))(I||{}),S=(e=>(e.DESKTOP="desktop",e.IPAD="ipad",e))(S||{}),w=(e=>(e.STATUS_CHANGE="status_change",e))(w||{}),A=(e=>(e.PIXEL="PIXEL",e.SCALED="SCALED",e))(A||{}),C=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.SITES="sites",e.COOPER="cooper",e))(C||{});let N=(0,a.fc)(C);var L=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e.FOLDER="folder",e.TEAM="team",e.WORKSPACE="workspace",e))(L||{}),O=(e=>(e.COST_CENTER="costCenter",e.ORGANIZATION="organization",e.DIVISION="division",e.DEPARTMENT="department",e))(O||{});let R=(0,a.fc)(O);var P=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.EXTERNAL="external",e))(P||{}),D=(e=>(e.ALLOWED="allowed",e.MEMBERS_ONLY="members_only",e.BANNED="banned",e))(D||{}),k=(e=>(e.PRO_TRIAL="pro_trial",e.DOWNGRADED_ORG_TEAM="downgraded_org_team",e.PROMO_CODE="promo_code",e.ADMIN_OVERRIDE="admin_override",e))(k||{});let M=(0,a.fc)(k);var F=(e=>(e.ORG="Org",e.WORKSPACE="Workspace",e.TEAM="Team",e))(F||{}),x=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(x||{}),U=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e))(U||{}),B=(e=>(e.ORG_VIEW="org_view",e.ORG_EDIT="org_edit",e.WORKSPACE_EDIT="workspace_edit",e.WORKSPACE_VIEW="workspace_view",e.VIEW="view",e.EDIT="edit",e.INHERIT="inherit",e.INVITE_ONLY="invite_only",e))(B||{});let V=(0,a.fc)(B);var G=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(G||{}),H=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(H||{}),W=(e=>(e.PENDING="pending",e.NEEDS_REVIEW="needs_review",e.REVIEW_REJECTED="review_rejected",e.REVIEW_ACCEPTED="review_accepted",e.AUTO_ACCEPTED="auto_accepted",e))(W||{}),K=(e=>(e.NOT_STARTED="not_started",e.MATCH="match",e.MISMATCH="mismatch",e))(K||{}),Y=(e=>(e.APPROVED="approved",e.REJECTED="rejected",e.UNREVIEWED="unreviewed",e))(Y||{}),$=(e=>(e.NOT_STARTED="not_started",e.AWAITING_BUILDS="awaiting_builds",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.FAILED="failed",e.CLOSED="closed",e))($||{}),j=(e=>(e.FIGMA_FIRST_PARTY="figma_first_party",e.FIGMA_PARTNER="figma_partner",e.OFF_PLATFORM="off_platform",e.HAS_FREEMIUM_CODE="has_freemium_code",e))(j||{}),z=(e=>(e.BUILD="build",e.COMPLETED="completed",e.NONE="none",e))(z||{}),q=(e=>(e.PUBLIC="public",e.PRIVATE="private",e.SECRET="secret",e))(q||{});let Z=(0,a.fc)(q);var X=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(X||{});let J=(0,a.fc)(X);var Q=(e=>(e.IP_ALLOWLIST="ip_allowlist",e.NETWORK_ACCESS_RESTRICTION="network_access_restriction",e))(Q||{}),ee=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(ee||{});let et=(0,a.fc)(ee);var er=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.ORG_INVITE_REDEEM="org_invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.RESOURCE_MOVED_TO_ORG="resource_moved_to_org",e.DRAFTS_SHARE="drafts_share",e.ACCESS_EDIT_LINK="access_edit_link",e.CREATE_TEAM="create_team",e.JOIN_TEAM="join_team",e.JOIN_TEAM_REQUEST="join_team_request",e.ADMIN_UPGRADE="admin_upgrade",e.SCIM="scim",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.RUN_PLUGIN="run_plugin",e.RESOURCE_MOVED_FROM_ORG_DRAFTS="resource_moved_from_org_drafts",e.DEFAULT_PAID_STATUS="default_paid_status",e.FJ_GA_REUPGRADE="fj_ga_reupgrade",e.EDIT_BUTTON="edit_button",e.EDIT_ACTION="edit_action",e.ACTIVE_EDIT_ACTION="active_edit_action",e.ORG_MERGE="org_merge",e.DEV_MODE_PRE_COMMIT_BETA_USE="dev_mode_pre_commit_beta_use",e.UNKNOWN="unknown",e.UNKNOWN_POPULATED_THROUGH_BACKFILL="unknown_populated_through_backfill",e.SCIM_RECOVERY="scim_recovery",e.ROLE_FALLBACK="role_fallback",e.PAID_STATUS_ON_ORG_CREATION="paid_status_on_org_creation",e.TEAM_ADDED_TO_ORG_THROUGH_FIGMA_ADMIN="team_added_to_org_through_figma_admin",e.SEAT_MANAGEMENT_AT_SELF_SERVE_CHECKOUT="seat_management_at_self_serve_checkout",e.DEV_MODE="dev_mode",e.SUPPORT_DRIVEN_ORG_MIGRATION="support_driven_org_migration",e.SUPPORT_DRIVEN_ORG_MERGE="support_driven_org_merge",e.SUPPORT_DRIVEN_TEAM_ADDITION="support_driven_team_addition",e))(er||{});let en=(0,a.fc)(er);var ea=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.ORG="org",e))(ea||{});let ei=(0,a.fc)(ea);var eo=(e=>(e.FOLDER="Folder",e.WORKSPACE="Workspace",e))(eo||{}),es=(e=>(e.UNPINNED="unpinned",e.PINNED="pinned",e))(es||{}),el=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(el||{}),ec=(e=>(e.ORG="Org",e.TEAM="Team",e))(ec||{}),ed=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(ed||{}),eu=(e=>(e.INCOMPLETE="incomplete",e.ACTIVE="active",e.UNPAID="unpaid",e.SUSPENDED="suspended",e.SUSPENDED_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="suspended_monthly_sub_editor_count_exceeded",e.DEACTIVATED="deactivated",e))(eu||{}),em=(e=>(e.STARTER="starter",e.STUDENT="student",e.PRO="pro",e.ORG="org",e.ENTERPRISE="enterprise",e))(em||{}),ep=(e=>(e.ORG="organization",e.TEAM="team",e))(ep||{}),eh=(e=>(e.ORG_USER="org_user",e.TEAM_USER="team_user",e))(eh||{}),e_=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e))(e_||{}),eg=(e=>(e.DEFAULT="default",e.INTERNAL="internal",e.CONFIG24="config24",e.APPLE_ALPHA="apple_alpha",e.GOOGLE_ALPHA="google_alpha",e))(eg||{}),ef=(e=>(e.FIGMA="figma",e.APPLE="apple",e.GOOGLE="google",e))(ef||{}),eE=(e=>(e.ORG_VIEW="org_view",e.VIEW="view",e.INHERIT="inherit",e))(eE||{});let ey=(0,a.fc)(eE);var eb=(e=>(e.ACTIVE="active",e.DEACTIVATED="deactivated",e.EXPIRED="expired",e))(eb||{}),ev=(e=>(e.TEST="test",e.FILE_DENY_CONNECTED_GUEST_CAN_MOVE="file_deny_connected_guest_can_move",e.FILE_REPO_DENY_CONNECTED_GUEST_CAN_MOVE="file_repo_deny_connected_guest_can_move",e.CONNECTED_FOLDER_DENY_CAN_TRASH_DESPITE_CAN_MANAGE_LIFECYCLE="connected_folder_deny_can_trash_despite_can_manage_lifecycle",e))(ev||{}),eT=(e=>(e.BLOCKED="blocked",e.ORG_PRIVATE="org_private",e.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",e.PENDING_3P_M10N_CHECK="pending_3p_m10n_check",e.PENDING_PUBLIC="pending_public",e.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",e.DELISTED="delisted",e.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",e.APPROVED_PUBLIC="approved_public",e))(eT||{}),eI=(e=>(e.PENDING="pending",e.APPROVED="approved",e.DENIED="denied",e.REVOKED="revoked",e))(eI||{}),eS=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e))(eS||{}),ew=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e.VIEW="view",e))(ew||{}),eA=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.PROTOTYPE="prototype",e))(eA||{}),eC=(e=>(e.MIGRATION_NOT_NEEDED="migration_not_needed",e.MIGRATION_NEEDED="migration_needed",e.MIGRATED="migrated",e))(eC||{}),eN=(e=>(e.NONE="NONE",e.ACCEPTED="ACCEPTED",e.STARTED_ONBOARDING="STARTED_ONBOARDING",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e))(eN||{}),eL=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(eL||{});let eO=(0,a.fc)(eL);var eR=(e=>(e.OK="ok",e.GRACE_PERIOD="grace_period",e.PAST_DUE="past_due",e.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="no_monthly_sub_editor_count_exceeded",e.INCOMPLETE="incomplete",e))(eR||{});let eP=(0,a.fc)(eR);var eD=(e=>(e.UNVERIFIED="unverified",e.VERIFIED="verified",e.PENDING="pending",e.UNAVAILABLE="unavailable",e))(eD||{});let ek=(0,a.fc)(eD);var eM=(e=>(e.TEAM_ACCESS_VIEW="team_view",e.TEAM_ACCESS_EDIT="team_edit",e.TEAM_ACCESS_DISABLED="team_access_disabled",e))(eM||{}),eF=(e=>(e.VIEW="view",e.EDIT="edit",e))(eF||{});let ex=(0,a.fc)(eF);var eU=(e=>(e.LOCKED="locked",e.EDITORS_LIMITED="editors_limited",e.PROJECTS_LIMITED="projects_limited",e.FILES_LIMITED="files_limited",e.PROJECTS_LIMITED_LEGACY="projects_limited_legacy",e.FILES_LIMITED_LEGACY="files_limited_legacy",e.WHITEBOARD_FILES_LIMITED="whiteboard_files_limited",e.WHITEBOARD_FILES_LIMITED_BETA="whiteboard_files_limited_beta",e.SLIDE_FILES_LIMITED="slide_files_limited",e.SLIDE_FILES_LIMITED_BETA="slide_files_limited_beta",e))(eU||{});let eB=(0,a.fc)(eU);var eV=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(eV||{}),eG=(e=>(e.SEATS_MODEL_BILLING_2025="seats_model_billing_2025",e))(eG||{}),eH=(e=>(e.FLAGGED="flagged",e.MIGRATING="migrating",e.PENDING_AUTO_VALIDATION="pending_auto_validation",e))(eH||{}),eW=(e=>(e.FOLDER="folder",e))(eW||{});let eK=(0,a.fc)(eW);var eY=(e=>(e.AUTO_APPROVED="auto_approved",e.AUTO_APPROVED_AVAILABLE_SEAT="auto_approved_available_seat",e.AUTO_APPROVED_EDU="auto_approved_edu",e.ADMIN_INITIATED="admin_initiated",e.FIGMA_ADMIN="figma_admin",e.MANUAL_APPROVED="manual_approved",e.MANUAL_APPROVED_NO_AVAILABLE_SEAT="manual_approved_no_available_seat",e.SCIM="scim",e))(eY||{});let e$=(0,a.fc)(eY);var ej=(e=>(e.VERIFIED="verified",e.UNVERIFIED="unverified",e.BLOCKED="blocked",e))(ej||{}),ez=(e=>(e.CANVAS="canvas",e.PROTOTYPE="prototype",e.WHITEBOARD="whiteboard",e.LIBRARY="library",e.SLIDE_TEMPLATE="slide_template",e.SITE_TEMPLATE="site_template",e))(ez||{}),eq=(e=>(e.ADMIN="admin",e.MEMBER="member",e))(eq||{});let eZ=(0,a.fc)(eq);var eX=(e=>(e.SELF_SELECTED="self",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e.SCIM_GROUP="scim_group",e))(eX||{});let eJ=(0,a.fc)(eX)},183739:(e,r,n)=>{n.d(r,{$cq:()=>tu,$kt:()=>em,AXx:()=>tg,AbW:()=>eQ,Acj:()=>F,Aqu:()=>rH,BB3:()=>e9,BVX:()=>P,BXv:()=>v,B_E:()=>rL,BbB:()=>tT,Bu2:()=>tn,CfA:()=>M,CrP:()=>H,Csd:()=>tr,D2i:()=>eT,DSh:()=>rk,DtB:()=>rD,EEx:()=>_,EW:()=>r5,EZU:()=>tD,Ej3:()=>C,EmG:()=>rp,F$0:()=>eE,FBc:()=>rn,FHz:()=>es,FWW:()=>ra,FqP:()=>tQ,Fr3:()=>e7,FuG:()=>h,G0Y:()=>c,G9Z:()=>r6,GgD:()=>eP,GyZ:()=>rY,H1b:()=>r$,H2R:()=>ea,H5I:()=>rK,H6B:()=>ti,HSg:()=>t0,HdA:()=>eC,Hhe:()=>rg,HpJ:()=>p,I2e:()=>e2,ISl:()=>r9,IiJ:()=>tP,Ipg:()=>tI,J2w:()=>ew,JJY:()=>t7,JM$:()=>rv,JRW:()=>t$,JS_:()=>r1,JgS:()=>tz,JuA:()=>tX,JvY:()=>ex,KLE:()=>R,KiY:()=>tJ,L1I:()=>eM,Lbw:()=>tp,Lew:()=>tb,Lom:()=>r2,Lqr:()=>rV,M5e:()=>eD,M7X:()=>B,M9I:()=>g,M9q:()=>tH,N63:()=>ry,N8H:()=>rF,NI1:()=>t8,NLL:()=>k,NSA:()=>ep,Nm8:()=>tk,OCJ:()=>eI,OiG:()=>er,P0r:()=>G,P4:()=>j,P8Q:()=>e0,PG0:()=>ez,Pn8:()=>N,QD8:()=>eg,QEv:()=>rq,QrR:()=>A,Ra2:()=>rJ,SMQ:()=>eh,SWF:()=>t5,Sc8:()=>b,Sq1:()=>te,Std:()=>tF,Stx:()=>eW,T0:()=>rE,TJi:()=>tq,TKM:()=>$,TNJ:()=>rU,Tej:()=>rX,Thl:()=>e4,U8U:()=>t1,UAQ:()=>rT,UpR:()=>ei,V15:()=>rm,Vny:()=>rw,WF4:()=>tU,WIM:()=>tt,WKb:()=>rh,WND:()=>J,X$D:()=>rN,X7G:()=>eK,X9s:()=>nn,XGw:()=>ec,XKS:()=>rx,XRH:()=>s,XRI:()=>eH,Xw7:()=>rd,Y9I:()=>tC,YOu:()=>eL,Yh6:()=>z,Yrz:()=>ek,Z5M:()=>Q,ZBn:()=>r_,ZzU:()=>eS,_iU:()=>w,a8q:()=>ej,aNI:()=>eV,aON:()=>nt,aQv:()=>td,aRw:()=>e6,abL:()=>S,apG:()=>e8,bCq:()=>r3,bEy:()=>E,bUF:()=>rR,bUn:()=>na,bel:()=>rG,bsh:()=>r4,c2_:()=>rC,cBJ:()=>eG,cQi:()=>eA,cfd:()=>rl,cmY:()=>r7,d0w:()=>eB,dA6:()=>eF,dDF:()=>e_,dTR:()=>eO,dq_:()=>t4,dxg:()=>rQ,eHy:()=>x,eSI:()=>re,efs:()=>tm,ehp:()=>tL,f19:()=>ty,ftA:()=>V,fy7:()=>tf,g0U:()=>rS,gDr:()=>y,gk5:()=>tN,gkf:()=>eb,grH:()=>tw,hCR:()=>rz,hbX:()=>rO,hj8:()=>L,hqi:()=>u,i1D:()=>ne,iAs:()=>tl,iJD:()=>q,iL6:()=>rA,iY3:()=>eR,ib2:()=>eu,imP:()=>r0,jXq:()=>tS,jl4:()=>tB,jmg:()=>et,k$m:()=>e5,kJx:()=>I,kQI:()=>rB,k_1:()=>tZ,kdQ:()=>K,lVt:()=>ee,lrh:()=>r8,ly7:()=>e3,m0h:()=>eq,mCn:()=>eJ,n8_:()=>ef,n8j:()=>eZ,nD6:()=>f,nJE:()=>tV,nXJ:()=>tR,nn0:()=>e$,o27:()=>tc,o6H:()=>t3,o8f:()=>tK,o9k:()=>tv,oBY:()=>eN,oGE:()=>t6,oSh:()=>tW,oe:()=>tA,ohc:()=>ts,op7:()=>rc,oro:()=>U,pFu:()=>t9,qBf:()=>Z,qNg:()=>eX,qRE:()=>el,qYc:()=>ri,qZS:()=>eY,qjT:()=>eo,qn8:()=>rM,rRb:()=>rb,rwE:()=>ru,s0Z:()=>T,s5h:()=>tM,s5n:()=>ta,s7T:()=>d,sBg:()=>t2,sMZ:()=>rZ,sMs:()=>ey,saW:()=>nr,sdp:()=>ro,sn$:()=>e1,tIY:()=>tE,tWm:()=>X,u3q:()=>tj,u6n:()=>th,uXs:()=>to,vE:()=>rt,vgO:()=>en,vhY:()=>tY,vnC:()=>rs,vsj:()=>D,vtM:()=>tG,w2r:()=>tO,wVD:()=>rI,wZi:()=>ed,wj_:()=>W,wtK:()=>m,x8f:()=>rr,xSN:()=>O,yFE:()=>rP,yU5:()=>rW,y_L:()=>rj,yf7:()=>eU,zCd:()=>ev,zkh:()=>t_,zqW:()=>Y,zz3:()=>rf});var a=n(737859),i=n(140784);let o=new Set;function s(){return[...o]}function l(e,r,n){let s={_name:e,_argKeys:r,_hash:n,_data:null,_args:null};o.add(s);let l=null;return Object.assign(r=>({view:s,args:r,name:e,[a.rP]:void 0}),{...s,Query:(...e)=>(l||(l=(0,i.gc)(s)),l(...e)),_name:e})}let c=l("AccessibleFoldersV2",["orgId"],"e1796f0a9d5dc9e4e9928d7f57fb4a318c6d061ecaebfd1506f2f24978cb9399"),d=l("AccountTypeRequestByIdView",["requestId"],"6ea5d0dce8a3b6d2ab6dd85aa536eec1f468e0c35787670b4bef987b5e7e337c"),u=l("ActiveFileUsersForFileView",["fileKey"],"768cab43ea3477df4fa1db3a25b51b7f6aa8b8f91205e41e2ffb4880c16e4376"),m=l("AddWorkspacePinnedFileView",["fileKey"],"7d89f3c41e235706fbef11faac608b80a7b08f49059b861a16f444a3719d1465"),p=l("AdminRequestDashOrgInfo",["orgId"],"28ec984f718edf4b13194f4033efff34feb2b5550a5a8284f8ba18b278f34224"),h=l("AdminRequestDashboardRowIds",["filterParams","planId","planType"],"4054be2b8252b89df39588b61596563ac77c2e7992a80b4b32184ba40fb2c617"),_=l("AdminRequestDashboardView",["filterParams","firstPageSize","planId","planType","sortOrder"],"278bb2d9cad7175a694d5a5e2a7a675ffb45cdac542c37fc97768e03ab2cb584"),g=l("AllowlistPluginsSectionView",["orgId"],"0937e424588471b45470cea9535a4ead965252a7ca29ee66e6fee246fc3cd6bf"),f=l("AppliedColorPaletteForFile",["fileKey"],"c169e81fb76d7b941291f6a4d9f19505770e9b46f65cdfc087145de3f8b7fcfb"),E=l("ApprovedLibrariesForOrgViewV2",["orgId"],"b99af2707ec541171a162036f37dcb936f78e1728a831387199ad95b318791bf"),y=l("ApprovedLibrariesForWorkspaceView",["workspaceId"],"6552920e298f34a3b7322962990db225ff8394d53dccd8869dc669db60e61a4f"),b=l("AutoRunPluginsView",["targetOrgId","targetUserId"],"89bba8315c16d184e051918223d8f5fbdfe9ba5d95fbad6fa24208827b9770f4"),v=l("BillingTrialForResource",["resourceId","resourceType"],"c1b16e47b9f97b468aea7d2d9e08f2d7bf3eb2c96fc07ad23eeff4edd863bf9b"),T=l("BlockConnectedFileMove",["fileKey"],"63021786780bc12af34c3630a99283e4379b7edcc3934a0c47235243718a7077"),I=l("BlockingPrototypeData",["fileKey"],"fedae2cad9ffe55336c1e09eb72284ab3c85678cc2ab99de6da9586ce7dc4082"),S=l("BlockingUserState",[],"42211fd2ccab68fbcff704930440f548b7ee07e8bace9d4c5cf8bb8296569fa0"),w=l("BranchOpenMergeRequest",["branchFileKey"],"2e391b1f947e9b20072e4a05a93622a653326397930ad3b9007013bdf6b64a2d"),A=l("BranchingPermissionsView",["fileKey"],"de926329a886b5ddfdfd67c4c328f3b83c3beb66b5ad52d6cac0aefcf4aa7b86"),C=l("BranchingSourceViewSidebarView",["branchKey"],"3e30a33946802d60062bc23736b8b7767192bcfb05549f5bae677ecb980dbbde"),N=l("CanCreateTeamView",["orgId"],"d1eaf342d5532833357de639a054ffbf3043a9a587c94213955bb9ec553ed72f"),L=l("ChurnFrictionPersonalizedModalView",["teamId"],"077420f20a35c52035097aa51b9573e9f58738d8a6433618d93775c0990aec6d"),O=l("CollectionFieldSchemaView",["id"],"cdb95e8e6419879277256af99cf990a59ceffe6cad545a525a41c9f1d499f162"),R=l("CommunityHubLikeForProfile",["hubFileId","pluginId","profileId"],"e7b1cd676e4b60ddadf01ff132eebb269291a7b440e3ac7858121a1b3aba1da3"),P=l("CommunityHubLikeForProfileFromResourceId",["profileId","resourceId"],"84e136e8449de50a856db49dcfcba37629e123d58526c18ad9278dbc7ceb80bf"),D=l("CommunityLibraryComponentsAndStateGroups",["hubFileId"],"f365ff60d2fdbe1bb2905abe89103f31011eda33e2af71403de38882c9e7bb36"),k=l("CommunityLibraryModalAssetsData",["hubFileId"],"8d7795559b09acfdd0a10d84c9ccdbb379b18f551dfc1ecf635c48f295e9539f"),M=l("CommunityLibraryModules",["hubFileId"],"d0486bd3c9f3851a82bd67efa798ed909527a4e644ffbbb364dab357036562dd"),F=l("CommunityLibraryStyleData",["hubFileId"],"72df746e22af64b5ba7b6ad79513136a6fadac0b25e63686a87f8f85bac33968"),x=l("CommunityLibraryVariableCollectionDataWithVariables",["hubFileId"],"31c05708890e10b2588cf47109cb089df11c6d571f81050b4bbaf4172246d5e5"),U=l("CommunityPayment",["monetizedResourceMetadataId"],"d4ed25df6ed5142cc9479c6680b70af08788b6d4255d6a811de68be0679faddc"),B=l("CommunityPaymentsForRealtimeShim",[],"1366f230cc0e4dc015521524b4e198a4e90067b7df851b64f55f08f95d626bea"),V=l("ComponentAttribution",["key"],"a5e691a909658049a3b1bf65453e03fdf21bc5d99dfcf0081c6a31690810766d"),G=l("ComponentUpdatesForFile",["fileKey"],"e1e60018942784662bf2effe9650dd37d487766035e636c485f6c3c75d8207ac"),H=l("ComponentUpdatesForProject",["projectId"],"24eef379838bd05e43a2d53b617d423f4c211472810e8bf9f9ae9e3ad3716b74"),W=l("ComponentUpdatesForTeam",["teamId"],"2b85571652eb0a38d1ccbea3899dcadb576d0d296c3c9a63c9cc70021f8432a1"),K=l("ConfiguredUpgradeRequestModalView",["orgId","permission"],"b512c23324f0e30f360588f5d9d9e574725652e889c997a1879a3579c0582efd"),Y=l("CurrentOrgBillingPeriodView",["orgId","userId"],"d243061354756b25f54772f2f3c05c6c08c4df724e801c401b887aad344b5005"),$=l("CurrentUserAssignedWorkspaceView",["orgId"],"b71bef59abd6e5ce766b977623eae73de44191f62f2e22773ea36ac7595b98b0"),j=l("CurrentUserInStudentPlusPlanView",[],"d67f174300205a6ac054ba3515219b3234f15aab289dbdb8a420772a783d5f5a"),z=l("CurrentUserIsMfaRequiredByMembershipOrgView",[],"fa4f6b62631cdd8a2ebc1a5f7a8b0753f1a26bcd3275072f499da4a66088619c"),q=l("CurrentWorkspaceView",["fileKey"],"b142e34f1381bdf54f893c26ec3cdda299cad8db22cdad6e7a30e96cfd3be446"),Z=l("DeleteWorkspacePinnedFileView",["pinnedFileId"],"f3ad94fa48f21d527e1582d2ecaa8fdcb16218d5470a3a879f1537bb503be24a"),X=l("DestinationProjectsForTeam",["teamId"],"394d5c4e1b8b69b5d6895d58390ebfdb728fbc9dc28532efe84f6f8e9d74eb13"),J=l("DevModeActivity",["fileKey","nodeId"],"b797b0d6f9e85042f0e50ac0d474970199bf82f95027c605ca98fa947ca88b6e"),Q=l("DevModeOptIn",["orgId"],"de4af23a45897dcaf59f3a3af0c96b8f05bcbcd6f786e9b9b1649e3be48dbc43"),ee=l("DevModeOptInInfo",["orgId"],"835f4a2745376fa297e9982e2c5f9fff39c856975fdce525ea8800af9b4b28a3"),et=l("DeviceTryFileView",["fileKey"],"57262db6a4c99d03c727ef6e8a734ac28b5bc6fb68fcf7f7134381d122629cdc"),er=l("EditButtonView",["fileKey","orgId"],"c790d0fab98077b5b2671a545d0af715b757430833af21da1c9f90324a3755c7"),en=l("EditWorkspacePinnedFileView",["pinnedFileId"],"202c59d019b9d9f7ebcaf0035804ce59424a321908daea42c95a68fc85a46375"),ea=l("EduGracePeriodsForUser",["updatedAtTimestamp"],"41e2b08f041b6550406b58126ff133269214f733a89ee88949b271d2263b272c"),ei=l("EduOffboardingData",[],"142e22b55e058172ed60177c7ba0d8053b7efa4a50d5eaf11ee7645b90a95707"),eo=l("FavoritesByResourceId",["orgId","resourceId","resourceType","teamId"],"98acb1db21b17d955bb5a5d8ed7e97c111d40221cfc80ffb05f9a1bc805787b0"),es=l("FeedPostWithDetails",["publicUuid"],"f4013e80d2857291d46921e8c88932f0d4f27a1e6389f2e8083c1c34795a6181"),el=l("FeedPostsByFileKey",["fileKey"],"1124bcf780616ccc8bbbb3b7a7abedaaf6c7f7a44da587a0383c0352a2497cce"),ec=l("FileAccountTypeRequest",["key"],"5428370d7b499540dbd9ba6edb84197e605cd47d088003a8936e89812c597e6b"),ed=l("FileBrowserRecentFilesView",[],"f53c6ad3b9c4e58c7caa96bba394248997b857d978d54d8c82ce6cf6f0dc21dd"),eu=l("FileBrowserSearchBarData",["currentOrgId"],"386767aad56b079fccc0c7edb22ffc192d73383bd92f429f783bb0ae5e2b96e5"),em=l("FileBrowserSidebarData",["currentOrgId","currentTeamId"],"b5c747a8c20baecfae40cbff794b1b14072c0aad5fb2eb80f9f83f902cb0d165"),ep=l("FileByKey",["fileKey"],"0c9a038e8f8e1e48b27a88274c9d139f997d1a7d47e6ade37b4015dd3a309b59"),eh=l("FileByKeyForRealtimeShim",["fileKey"],"2525bdb5062c507d9fa86ad01c052ef00bc60a67fb049fe249b1103d9e0f1a1d"),e_=l("FileCanEdit",["key"],"892009b05de2728c2a280d850f21d4f0730a99cf40251147bb082af6dbc39023"),eg=l("FileCanManage",["key"],"9f2ac0cc5f240713e5687ad46c98239e9e1dc443166b552ba869b94f307d37ba"),ef=l("FileCanMoveWithReasons",["key"],"da223217b0433a10b00391396a1b36b5f56f334ae89da5af1ee820a8d0eb4de1"),eE=l("FileCanUseDevModeDemoFile",["key"],"4e9c04368e2585ebbd3cd62f672674df9747c2ace21f08cc314690bc667c0bfb"),ey=l("FileCanView",["key"],"510dbf10b97bea26850939d45d8d8c35e26990da08af7118f70063657152b0ae"),eb=l("FileCanvasMentionsByFileKey",["fileKey"],"79c810ce05ba276dd1aeb6d61c99447aea1b20026a97c8b8c5772db7f8c833bc"),ev=l("FileCreationPermissionsView",["projectId"],"d59bbfa8784b875fe91ab20db8b891f97e91e6b85947d31a78cfed08e2eb7afa"),eT=l("FileDevModeTrialRequestPending",["key"],"9f014e8a3b6a61f31ebe9c9f11811761a95c13fd34bcd9ea901046cd61cfd05c"),eI=l("FileEditRequestExistence",["fileKey"],"793d3d72634e07bdd1f3c3070254736663ad625f33ea3bf1f8ebc44e53e4fa24"),eS=l("FileExpirationView",["figFileKey"],"16656fca5adcba0390c0807246f043832d76095caa298c06491d04d04370aa5e"),ew=l("FileFeaturesEnabled",["fileKey"],"d5b7489f72a6f32b5e703a1168282a4cc5d89c83225536f3cf979b5f2995af7b"),eA=l("FileImport",["projectId"],"6fbf1817634120d2b3a55d410b40cb1e3a058930aad7b2a00aaef24e291ab86b"),eC=l("FileIsEligibleForDevModeTrial",["key"],"d673e5c076cbe2eebfdf8fc713f500f8d059e944082dce8b3168314c94f3df51"),eN=l("FileIsInDevModeTrial",["key"],"a7ccc69c2bfcc2fe8e13d668ab29cb9efe64de75b42e3706084f8ac476dbc36e"),eL=l("FileLastPublishedAt",["fileKey"],"fd7d6bd5f797df0744e0822085cd7af883cdac00ee32e220d06d095cfb71aaea"),eO=l("FileManagePermission",["fileKey"],"382f1e37f8dc834aadb844e3f3b1f8bb00f0f3fa75e7112e73be7b6b044acfb3"),eR=l("FileNameViewDropdown",["branchFileKey"],"7dc1bdce6f5ce386a4d5e0e0d58eee349d978c5b51143e00979fff84dd683b92"),eP=l("FileNameViewRepoFiles",["repoId"],"dc4a198b26c874f8130eb7bb6b60b2259acfb9f641889c35f3f454999b52f024"),eD=l("FileOperationsView",["fileKey"],"99cadafddea66211572dd3b4bdd501c98ba745f79d68384e2e6f5f6ffa9c13bd"),ek=l("FileOrgExtensionSettingsView",["fileKey"],"6ea2fe80fe0ecbac68881517cc9ce1205ac9991e53f96331c60974eefe403d78"),eM=l("FilePermissionsV2",["currentOrgId","fileKey","projectId","repoId","teamId"],"0afa03ff0bc710a3f50bd596137ea3ef879f27813250142db6aeb4913d3a5c6e"),eF=l("FilePresenterData",["fileKey"],"a8ede6dc855a0a46700381b448baa3c9a6a752ba87843ad27d2aa01006c44168"),ex=l("FileRecentViewers",["fileKey"],"aeeba8763efdd5378bcf96ffbfe87ab899b1dfcf090a44a1e22b4b19ff3c854d"),eU=l("FileSearchResult",["projectId"],"5772523f6ac484d88b7d02f902bf5fe4419b87a01cec0dfe14d0b25a8718341a"),eB=l("FileShareModalCurrentUserPermissions",["fileKey"],"a8335fc0d31a88931e2868441ba725495cbd4acf45d5b6a341ffe759f3f47a0d"),eV=l("FileShareModalPermissionsV3",["currentOrgId","fileKey","projectId","repoId","teamId"],"3ffaf47967f88750a1ddec742d0f82165e16cad755e6bd9c3ddd604943b4282d"),eG=l("FileTemplateView",["fileKey"],"9851612863a6952e349e2d69656736e57767049403e4c1c3af1a22b2280e2a35"),eH=l("FileTilePermissions",["fileKey"],"2c2e2822b8844c367fc24f521eaf9dbc6ec1a7eff5475cf05bae89d31a6dee81"),eW=l("FileVersions",["fileKey"],"716dfdc92d32ddf9d0df28e4c96449f7ca1b9c14831345813d9760fde92cacd3"),eK=l("FileViewHistoryExp",["teamId"],"4d465ce00ab1b6e165462e6df33854ffbd0b3031b626a580fa3ae8220b2e7094"),eY=l("FileWithCommentsAndReactions",["fileKey"],"723125296d8b810a06f16abf65b7191fa812ad4a7ba8a128e115fbee130f7272"),e$=l("FileWithRoleRequests",["fileKey"],"7706a7b11cf23ca3573ac7f18616f4e26672a85d911f0e5d56da00707c675cf8"),ej=l("FileWorkshopMode",["fileKey"],"03c41ae834e3e855f331489a3c84dbd9044466e7b6cfc8b6788aa392d071c138"),ez=l("FileWorkspacePinActionsView",["fileKey","orgId"],"f49ae3f1503813b431a9a496b0edc58b66359fd6a30b1c8e6e72a7b744d94e83"),eq=l("FilesForProject",["projectId","updatedAtTimestamp"],"1d9923b6bc6cf2715af5aa016abe57080082e886968a65eb4d8e15a7a7df8d8b"),eZ=l("FilesForRepo",["repoId"],"2c6a5321296c18cc87edc0b01d476f73414167f34e83f1688673cac27dd1d783"),eX=l("FilesForTeam",["teamId","updatedAtTimestamp"],"60c7187ade0b79c40b50931f05a922b785059cd2deb22b00541bf23f168c0345"),eJ=l("FolderCreation",["teamId"],"f09835a34dbf2aef2b3f6c0a9132a9557672b0ce9da0e95651d04c7137010d99"),eQ=l("FolderMoveModalView",["currentOrgId","currentTeamId"],"06c8911e2dfaae17b45033a25573a464960deb0b405a877ef77fed21951ec223"),e0=l("FolderPermissions",["currentOrgId","projectId"],"f9fee6c89f5b82922af7672deb3590b7be7ddd4ca1bc78a6d5e17da32413ef53"),e1=l("FolderSearchResult",["teamId"],"2ebd0a8b8ccbbda8101245583d2c6808ed415073ff2f2efd4cc588eaa5d1e661"),e2=l("FolderUntrashedFilesAndSitesView",["projectId"],"a3b131edc3ed41460d8cc439d41f2accfd14bef7ea4d69933308fd19f1c3891d"),e5=l("FontFileForOrgView",["orgId","updatedAtTimestamp"],"324ae763a501526c1700b40ccdac7431ac0a3a728e795442be4bfe44c30714ef"),e4=l("FontFileForTeamView",["teamId","updatedAtTimestamp"],"19811dd196b88bcb9b6594f86574daec62978a0818202c4952fc16e43c04a57c"),e7=l("FrecencyHistoryView",[],"2961d39c324c66b95366f3004eeee4c65b4a7481ba2d71b18f15bab0f92babf5"),e8=l("GraftingUpdateSloData",["id"],"7a8d81b59a88816b12349b489d3be848ed5086caff723551cd96df9cacb94f25"),e3=l("HasConnectedPlanUserInOrg",["license_type","org_id"],"809d53701a4ae0afd100fb21083239f1d7cc8a66eb233c4ae9d1d0dd025c2e99"),e6=l("IdpUserView",["orgId"],"7d558ee5071f305ac1aeace49be936f851b664f139ed89c20b31a7b4fd35b119"),e9=l("InstalledPlugins",["orgId"],"639696c89429757237b28755bd60331e157a7a3d2887c1c5cc9835b9b02a3552"),te=l("LibrariesViewFilterStatesView",["orgId"],"93cdae6354ee31395f409657e97c5db5c5e941d67b493834271fe6726204a71e"),tt=l("LibraryAssetByKey",["key","libraryKey"],"240e80a4ae91e3cdf98087602a207a9965ccd57d7e1a2136dc024200f78e2051"),tr=l("LibraryAssetData",["libraryKey"],"6f5491f47b3ed41b29f3ec9a8c72380002e2ab32a009a9465f49da602551233a"),tn=l("LibraryAssetDataOfType",["assetType","libraryKey"],"cebe62ec7252d8a604cc0873ecb1a1c0efd1e9a9243d70fd7b2e58751065e05a"),ta=l("LibraryData",["fileKey"],"7f0df20cc5f98acf34be492a9775c65ef7c4627ca5040fd937d8c53de922d1dd"),ti=l("LibraryDataByLibraryKey",["libraryKey"],"1da95fe4da9596df5420817d34de80fc7075b80918a3587abd49757a94498f9c"),to=l("LibraryFileSelect",["projectId"],"ce06f52487dabce0499dc85b49d35bbaeefb680ec4a2c3ea2fd9db24b944d238"),ts=l("LibraryIsBranch",["libraryKey"],"49202d792e43e53e3d3be4834398ac95b02d0d1a13f346c57eacedbca3c0d795"),tl=l("LibraryKeyToFileLink",["libraryKey"],"b9baeaf69d3326991c4f5ad10e3023518f0538d7f59f8729491174888e0b92d1"),tc=l("LibraryMetadataByLibraryKey",["libraryKey"],"8ada83185ffdf305fd1f22bdf0b70e424f55a055cf190c529813872ac3730c81"),td=l("LibraryModalAssetsData",["fileKey"],"fa26f9cfa1ffc938be3f9a032c7e2bd9c95c258a5b22dce1836639b3b666c822"),tu=l("LibraryModalAssetsDataByLibraryKey",["libraryKey"],"3abf0553024f346c7e93e3d9b0a19031173528edf521df66a8579a15d0b64c27"),tm=l("LibraryModalVariablesData",["fileKey"],"10ae38dffd1118159e14edf0b9e013052ab7c8c4835056123a42e689ec07e7af"),tp=l("LibraryModalVariablesDataByLibraryKey",["libraryKey"],"6933acafb54b705b0db947a1180082751c196def5f0595dc8444540fab4c24ee"),th=l("LibraryModuleData",["fileKey"],"f2bfa8633ba4238222100599b37c3b481d4fe5a36817f702f8b7ab3ff140dec9"),t_=l("LibraryModuleDataByLibraryKey",["libraryKey"],"87bccf3ce1998fe7f72e16f9bb9793b4d1fa8c798abcbdeacda5d28a59b68a2f"),tg=l("LibraryOrgSubscriptions",["orgId"],"0740caf02b4ba0c4f78909484842113ca42b160bf375e8d5ae1bf8e79ee95b2e"),tf=l("LibraryPresetSubscriptionsV2",["group"],"af14c174276af4821193e594cf09b1bbf3180b7dc973882894dbae9e26b715c9"),tE=l("LibraryStyleData",["fileKey"],"afa9c4c78d44b4d3f101e42db2f82c68a7963eef2517a83041cc3999fe44ff29"),ty=l("LibraryTeamSubscriptions",[],"7326a867dae05a64c2fd9a758af5f1d9efe4297642c8fd086b7b04e7ae7f053d"),tb=l("LibraryUserSubscriptions",[],"25f679cf10d92e5959a827ab87f77023907fb7b024efa92378dcfedc21dd7391"),tv=l("LibraryVariableCollectionData",["fileKey"],"71791b0861c947c8cf6d4f6707839d4cedf1676e7bdc0ca66aee85ce67ccd4b7"),tT=l("LibraryVariableCollectionDataByLibraryKey",["libraryKey"],"58a73b9a17ac9690c69a4c4c9ab0551f7d4a4b8e469c7d2e8b46e19f195f62e0"),tI=l("LibraryVariableCollectionDataByLibraryKeyWithVariables",["libraryKey"],"9681647c88429d40fab7355efb8bec300405d91dffc75899366e7cd75bceb6b0"),tS=l("LibraryVariableCollectionDataWithVariables",["fileKey"],"9b1e2d897458509f9f0c0da4c6289cb14c74d1030b196b59e01eb9fd588bad03"),tw=l("MergeStatusRepoFiles",["repoId"],"92697a2007529c1a87aedf80c2d8ced0366b6e9be6e2230dd681cd5a218bbcb5"),tA=l("ModifyPlanUserSeatModalView",["planType","targetPlanUserId","targetUserId"],"21a5360d59505318f6def7442ddf8998b09c92bcfb20d6b1b6a9dc437e019dd4"),tC=l("MoveFileCurrentProject",["projectId"],"38382cc092c20aa32c23f07fed570914d9bdd411f756b985e7d112a67130a77f"),tN=l("MoveFileDestination",["projectId"],"0bdaf003e512baa4f1179a14ae8cc129b87274b7e42e69ba23b92c2dc5174126"),tL=l("OpenEditorFileData",["fileKey"],"99d00d9e4fdd30e92adcdd582e03629863a172adc9a31b7575e12f392207e007"),tO=l("OrgAdminUserView",["firstPageSize","orgId","queryParams","refetchToken"],"a761ad2f970edc01b61bbe55f4811b7bbfffe6ae253f0531310aa5e55b6e387c"),tR=l("OrgByIdForPlanUserView",["orgId"],"4630249a0f26a58baee385969284d74a7dcb24d7c3b5baeff2f3d41dd627c79b"),tP=l("OrgByIdForPlanView",["orgId"],"c1542952f860affbf4119e73382b8b98486876651633b126613953adb4a4b345"),tD=l("OrgByIdForRealtimeShim",["orgId"],"0d6dcc336201134307c58470666d00ac8e5421bb99779dfb6d4925e3418ebbeb"),tk=l("OrgHasSeatsManagedViaScimView",["orgId"],"97d7690822fc0dbaf68f4e10add5ada4e5e6eb153d6232a1f58a84832810b44e"),tM=l("OrgHasWorkspacesView",["orgId"],"43335cefae937cdc351a1915ae3445b9d664f4c053e3d51b5405cc16f5002398"),tF=l("OrgJoinRequestExistence",["orgId"],"fa785d914fb48bfdb4817e34b521c9ae08652b74e05d0338cc3247ebc5a0f15d"),tU=l("OrgProductTermsEligibleInfo",["orgId"],"766512edfd21a3ddc48ff4790858b2d79d24da2ed94eddcef95cb0c3877eea43"),tB=l("OrgTeamView",["extraTeamIds","firstPageSize","orgId","queryParams"],"4cabf7c26c7e027e008749e14d1953ae5856ec374bfa30af21b950578bb97033"),tV=l("OrgUpgradeRequestView",["orgId"],"663360f3d3165d56edba6bac9ea74ff2b0904be563912f7532f9a6851a67478d"),tG=l("OrgUserDraftFolder",["orgId"],"656b5eee5c96afd84ef4d8f0c7d45ed32056453f6893edfe661c7c7bf5f9e828"),tH=l("OrgUserIsMfaRestrictedView",["orgId"],"5464d61e3db24d16e6104b9dc85732fa9bbe7742bd0bbfa8866c6ab396eadb35"),tW=l("OrgUsersByIdView",["orgId","orgUserIds"],"b0eddfe117692883d9de454020ab7f28111117a5342ebab535d81c7e7027b6a4"),tK=l("OrgUsersForRealtimeShim",[],"2d72c3a6c32f02eb171be4dffae693253d98c53d4d1e642929ddb0918fa4bc9d"),tY=l("PendingAssetTransferRequestByResource",["folderId"],"629604aa4cf3a4080ff6e2c7355d339b6afbf2199a674418087f4c174464b778"),t$=l("PendingConfirmedRenewalSeatCountsView",["billingInterval","planParentId","planParentType"],"ab531cfe4acce15986329d6a320d0e0c5bc6d5daaeccfb75e62558d070c81e4c"),tj=l("PendingUserMentionByCommentView",["fileCommentId"],"efecd35aa66317aca80ed84db84e594d6e77a552179e842a856411863d592852"),tz=l("PersistentUserNotificationBellData",[],"88a32875f096628dca6878388b8b210fbb36c1664f60444a71b468f536dea7f2"),tq=l("PlanIsConnectEnabled",["planParentId","planType"],"a86e1542c6a723b2f0b4c7d5e6ea145eee11c958efe044bcde0f8670787018c5"),tZ=l("Plugin",["orgId","pluginId"],"73119d76931a7b88b2a223f38e4f3a206d845bf98908ad282e3f3ca3731f0750"),tX=l("PluginPreferencesView",["targetOrgId","targetUserId"],"046a257f73aa854a4878ea1e0f21b7f35e00853c75d0d850d0607f37a55e8027"),tJ=l("PluginRequests",["orgId"],"f51331df46a2598769b1334a7bb1b20bb7141ec6ef6907ea282052898764fc45"),tQ=l("PluginSecurityFormResponse",["pluginId"],"37483618df3083a7448e1d3a000e4bf0a58736833bd5e277b74bf5206298a404"),t0=l("PluginUpdatesForOrg",["orgId","updatedAtTimestamp"],"1f108b4f6d91abc335a2c3fef816441d1e1683977ba256b5ac38120121ba0cbd"),t1=l("PresetsDisabledView",["orgId","teamId"],"151c8f4bd21169576f77e1603e503619222d9175d36948824ce1e05421ccee79"),t2=l("ProRequestUpgradeModalData",["teamId"],"48e461aaa5580f6b60d0dbd6b169b946ec5ed7db57b8acd737fa0daf0eee713a"),t5=l("ProjectByIdForFolderSettings",["projectId"],"7da48b88b1b38f10c15b3d22dbcdef33b92fca0b3d1be6e95e003aeac6197b86"),t4=l("ProjectByIdForRealtimeShim",["projectId"],"dc32e25283d2d1dffab0e3de9ab839f9e992b7c787e50945d5c95ce7cbd3f271"),t7=l("ProjectFileCount",["projectId"],"fb7602771925aba9daee0c54da0ae5b19e112f419af3561b23186b9ab8edae75"),t8=l("ProjectNameById",["projectId"],"3424a13606e93d2f552e7240b55752325d244f0acd70d53c09706db931441cec"),t3=l("ProjectNameForFile",["fileKey"],"b699205ee33e2c12c100086c7f25be9108c4394ffaa125b6c9b76274ee0b1004"),t6=l("ProjectTilePermissions",["projectId"],"8c21060a83330501e75991c1136f9612e7722a773a8438854033ef7b0368d2c6"),t9=l("ProjectsForTeam",["teamId"],"a1e18b94f5df242987585953049dae9cfb8f16891534b04ee2274b487c207900"),re=l("PrototypeCanView",["prototypeId"],"39b6cb87330b27137dfe9ed80a64b3b264e26f8429d5144fb040372acf31b437"),rt=l("PrototypeTilePermissions",["prototypeId"],"686bb44822bd234fb3b8e7407935f4f3a8c4cc479f7826e075744c8dcfc39b8b"),rr=l("PublishUpsellTeamRoles",[],"e5f4e71dea66d8b75e5ada7d8a7a0bbefb0c042a933d1d03efb6fd7b20e15623"),rn=l("PublishedHubFileForFile",["fileKey"],"ec2a1599754bb7e25c18d80d228b02090e6602b4047532b49cec92deeab5f5db"),ra=l("PublishingModalView",["fileKey"],"74f30a17ba3ae062e39b542a68e751284ac518804e2fdabf76c90d1bd87be8ba"),ri=l("RepoByIdForRealtimeShim",["repoId"],"e47c13772b98f3d704233af4abe7f0f9cfa4e8fbda3ac9096a424b5991d54709"),ro=l("RepoCanMove",["id"],"a87a1cec41725cb8d5f717cb42aba3efa5f10174b94a55ac83368065e993bac0"),rs=l("RepoCanMoveWithReasons",["id"],"58d3ed324b0fb335270b9a4017a497c72a61b987f24221181cc4172a1e42149e"),rl=l("RepoCanView",["repoId"],"f25a56bf74b724efc41118fabbbd8029682f5ce97a97db3ac5cf7c8117b07d82"),rc=l("RepoFiles",["repoId"],"8dcca6615517ac59b23419a460c584bd57c3ed65b216910884d93aba7ad82aeb"),rd=l("RepoReviewerSuggestions",["repoId"],"00a150b6b24d02a9be19f0f7d564147419eb690e585d07493f4f93d1c497c547"),ru=l("RepoTilePermissions",["repoId"],"385a261e59de4c6b65010d6110aa286a2b2bac94a0825db23d4b577557afe540"),rm=l("ReposForFile",["fileKey"],"cdffd0fec08be265d27e7c23312a45d59fb5c512fd4dc18999b36530f3d99105"),rp=l("ReposForProject",["folderId","updatedAtTimestamp"],"2c0d9b289096f0d9de911e0830601fa513514ce91dfe484a5186838df2ffae5d"),rh=l("ReposForTeam",["teamId","updatedAtTimestamp"],"e9f4229805e5712b14b53f5f36376f04ef52c4cf05da0b5c9cf9c3538b1f1e4d"),r_=l("ResolvedComments",["fileKey"],"06e6244ece9b634678a5cde5f459d166abfa3956ca9016084bf1f2b32876964c"),rg=l("ResourceConnectionSharingGroupUsersByFile",["fileKey"],"ecbb6d74d2aa036f933d0d65ae365b6ce590e73a88302c2ca4961af9ed7a0063"),rf=l("RoleUpdatesForTeam",["teamId","updatedAtTimestamp"],"c171e60c6b33af43423b74645bbf62fb609495fd733808c66f99d941fa59e1f3"),rE=l("RoleUpdatesForUser",["updatedAtTimestamp"],"8927303465978d5e6550ac1f65716e54f5a4b8dbd71cb7889b291f00da616d6c"),ry=l("SearchFilterWorkspaceView",["orgId"],"e1690e5b59052f65ab1e98fbd14356b263f7eeec40a4f03ba33cc3130f282cf4"),rb=l("SeatCountDataForPlan",["planParentId","planType"],"50f61b4a5233d89f5aa9d08095c65972a96ad2c4369f1d4b54a14e1e93fd3678"),rv=l("SharedFontsModalOrgPermissions",["orgId"],"a46eb218576f562a97506d614998ce064bbb504276b0fc3b65525b4617948ffb"),rT=l("SharedFontsModalTeamPermissions",["teamId"],"5602f0653629aed8d112f6493fbca9e1ced7f0d814c30c46865d2294ff424ec2"),rI=l("SharingGroupsByLibraryKey",["libraryKey"],"0198fea9ec5e08bf09ef5295059d5faaf675a5db31fbcece8eebe2317600246a"),rS=l("SharingGroupsByResourceConnection",["resourceConnectionId"],"d3fb68d40a03a603b1ea9bae4005f8cd247936acb5a7eed2e6970a1f8c434fec"),rw=l("SiteMount",["fileKey"],"80d6ae672bee05e4a828c8b0c63c64ff07d69207f7af7ac04cf22ce7a1c84dbd"),rA=l("StateGroupAttribution",["key"],"bba7f6b914518829da80ef81f87ccdc0b3a40779b6718f6f297511bfdc44ebac"),rC=l("StateGroupUpdatesForFile",["fileKey"],"fe07915d055e4c301bb8e6915bf0697790fd336854f331712b6a959deef876f7"),rN=l("StateGroupUpdatesForProject",["projectId"],"7775ed5408bd32fc69176a39ef04ee4c18932bc81e88eeb6d32a277d901ba938"),rL=l("StateGroupUpdatesForTeam",["teamId"],"39809fdb849dffea08b8fbe0f6289c9d4996a4cc5933b7a6bf7b2bb9cfd07a40"),rO=l("StatsigTeamsOrderView",["currentOrgId"],"025bdb490f60869d799a95df72a6a6f771442389c6002df8e61ea5a71194901e"),rR=l("StyleAttribution",["key"],"8f49a968942f65daa47f5bc8ce67d87f8888b00a1d3fdcbecc484aa8cafaa17d"),rP=l("StyleByKey",["key","openFileKey"],"08e2b6479829f04586bf91bf87628cb8291b1b25364b6259657f551745118831"),rD=l("SubscribedLibrariesForFile",["fileKey","group","orgId","teamId","workspaceId"],"76741b396aced51ccb007f594eb2dff158e915387eb8efdcd3d48d34ed9177fd"),rk=l("SubscriptionUpdateSloData",["id"],"85603882b711eeacdbd2c903c6491bb3779a3781cd443cc532c9f6929bf388df"),rM=l("TeamByIdForPlanUserView",["teamId"],"f1e9733d7b4000bfa9ef990814e5af6ef2efee374356755782dc2135b688b00d"),rF=l("TeamByIdForPlanView",["teamId"],"650bf00c450ab44dd68974cc019336d7395a6b5a3f0ee37a8b7d79547645580f"),rx=l("TeamByIdForRealtimeShim",["teamId"],"7d762150c80a44ed046470fa55f807ba21bcf9d9ae956fb378a0a68e8d90ab5b"),rU=l("TeamCanAdmin",["id"],"a15d8b8af116e99e982bde58a443fa38d3f51756c266019952f16d6de898286d"),rB=l("TeamCanEdit",["id"],"bda96537d0ca79878c42caa722d235331db0954d2df1a32cbe0681af9bca3881"),rV=l("TeamCreationWorkspaceView",["orgId"],"d13686ce2c80731820b24473472ede39e6dc131201e0c789743d0f565e1d0c3a"),rG=l("TeamFileCountsByTeamId",["teamId"],"1a53e47b53b59ef7610c9131ef835e3a918c3e76c44e2e53af87505d85e84031"),rH=l("TeamFileLimitsInfo",["teamId"],"3c9745ec4a6650ccaf57016f3fae770ea79cf9a211ef10b27a4c330efca9cd46"),rW=l("TeamFileLimitsInfoByProject",["projectId"],"785d9b9641d8e92c11bef892f55ce3ce0aa0853f6ae44f17a97099cdff26bc90"),rK=l("TeamOrphanedStatus",["teamId"],"2805618ee305853637591f1e5f287aed2d89f4e4a3c2caf44ac7cc9c62c607d2"),rY=l("TeamPermissions",["teamId"],"1a220f479d5884093bdd8949915a3cf5a6283d6dc3dc662bca1b2ff1ce4bdfd1"),r$=l("TeamRoles",["teamId"],"2d56ddd05d0a89b5aba0ff285dd042ebd1c973dfbee1d9c22fbe1b5f672f3726"),rj=l("TeamTilePermissions",["teamId"],"3fe00506605cd0fedd91a0900a6e003cf46bdc48eb00ca32b791e633eacd787e"),rz=l("UpgradeEligibilityView",["fileKey","projectId"],"cc866594ef20b05078893b2502f363f06fdb159ecb275da48033a9378c33c061"),rq=l("UserColorProfilePreferenceView",[],"d63161ffc7150ae6d1010ec70ba9a4d2082ddb1426e097a472eb98eae521eb5c"),rZ=l("UserFlagByName",["name"],"ab2c3ed110dea4ce838ba35403bb3a9aae32cfba320a45c2d19b02362be53c56"),rX=l("UserForRcs",[],"9fac12bafa906637bcd0f846ee79e6ba14d01da0df3b78ca4705fdf335161e40"),rJ=l("UserForRealtimeShim",[],"6eb6767b765d789f69e66b0b9e0da0b30bfb46833df78253392df819165eaff7"),rQ=l("UserLicensesForFile",["fileKey","userId"],"45526c07d3bc659670f6b3a0c90fe44dbe05d0c2bb2762a907763ba1cf0f6516"),r0=l("UserPreferences",[],"d413c96cd93779816ef501e3520d665c7f6e4ad2e7aeb4999edd60f287bd2ef3"),r1=l("UserTeamRoleRequestView",["updatedAtTimestamp"],"4d4825452cf41818cc4118acf4867f7161dcaa2f68b63b13bb47ef0e962b7c98"),r2=l("VariableByKey",["key"],"2c1793874674367f87ca3581282b62eac3a4943ea6856c462003e165b03954e6"),r5=l("VariableCollectionAttribution",["key"],"5bbc5e2c766fc8d58ca816d423af1a9c5efcd32d652c57a1797eaf45ca297ada"),r4=l("VariableCollectionByKey",["key"],"37edb5233225659e5ba2e27ce3d3feedd24822cff483a0d8d5ae702b1e802a05"),r7=l("VariablesByVariableCollectionKey",["variableCollectionKey"],"c3f7c7c9b167a7c344aac4ca76d1fb97f0ae7d64148a60afa53a0936094f6ea9"),r8=l("ViewerRestrictedDraftAccessLog",["fileKey","orgId","teamId"],"86e317879a2bb46b2552f6749919e7e179b86c686ea6974f4ef5a1f91bd9daee"),r3=l("WalkthroughMediaByFileKey",["fileKey"],"e4adbe3d6a6ae8c61787a291f2ac0a342b0cf8a0643718f5cbf0fdd0687dc0d3"),r6=l("WhitelistedPluginsForOrg",["orgId"],"8d225a26fcb53ff99c368f566f42529602c163fa00f1e23182b9dacff718aab8"),r9=l("WidgetUpdatesForOrg",["orgId","updatedAtTimestamp"],"5f662446c86f544fa3bfa1dc9c293cdc1c221c335a12971a0109749a96f3bd30"),ne=l("WorkspaceModalPluginRequests",["orgId"],"09e49c1d071cb7a048dfbd41ff480667be899b03aff71db49ab9344a49cea0d5"),nt=l("WorkspacePageView",["orgId","workspaceId"],"9f5c2837edec92850ccebf36703a249ffd19ac462a102ad39c08c1c8152c5de1"),nr=l("WorkspaceSelectorView",["orgId"],"3e57d9a0edc4f7b82d83093187902ade15f296f06ff742484915bc6537e807ab"),nn=l("WorkspaceSubscribedLibrariesForTeam",["teamId"],"45b1e49428694572be0348ab1e03a248cbbcba61d5751cc88ca1f1b98568013a"),na=l("WorkspacesDirectoryView",["orgId"],"5700171c687701dec5abc103a8768b23bb4d4d691f24e09778110fbb609da929")},468260:(e,r,n)=>{n.d(r,{Bp:()=>$,GA:()=>G,J4:()=>W,KC:()=>U,Nl:()=>z,Ns:()=>b,Qp:()=>F,SS:()=>x,TP:()=>I,Td:()=>j,U5:()=>R,U7:()=>D,Um:()=>C,V1:()=>y,WP:()=>O,WW:()=>T,Xs:()=>L,YN:()=>J,ZW:()=>P,Zt:()=>Z,aU:()=>N,aX:()=>B,cE:()=>H,ge:()=>w,iP:()=>X,tJ:()=>A,uW:()=>K,vy:()=>q,yT:()=>S});var a=n(846288),i=n(879058),o=n(805014),s=n(245459),l=n(33011),c=n(7408),d=n(124497),u=n(887184),m=n(841962),p=n(972142),h=n(650981),_=n(314540),g=n(957020),f=n(756044),E=n(598378);function y(e,r){if(null===e)return null;let n={};for(let r in e)n[(0,p._5)(r)]=e[r];return Object.assign(n,r||{})}function b(e,r){let n={};return(e.link_access&&(n.linkAccess=e.link_access),"proto_link_access"in e&&(n.protoLinkAccess=e.proto_link_access),"has_file_link_password"in e&&(n.hasFileLinkPassword=e.has_file_link_password),"has_proto_link_password"in e&&(n.hasProtoLinkPassword=e.has_proto_link_password),"org_audience"in e&&(n.orgAudience=e.org_audience),"org_browsable"in e&&(n.orgBrowsable=e.org_browsable),"viewer_export_restricted"in e&&(n.viewerExportRestrictedAt=e.viewer_export_restricted?new Date:null),e.name&&(n._name=e.name,n.name=e.name),n&&r)?{File:{[r]:n}}:null}let v=e=>{let r={};return(e.link_access&&(r.linkAccess=e.link_access),"proto_link_access"in e&&(r.protoLinkAccess=e.proto_link_access),"org_audience"in e&&(r.orgAudience=e.org_audience),"org_browsable"in e&&(r.orgBrowsable=e.org_browsable),e.name&&(r.name=e.name),r&&e.id)?{Repo:{[e.id]:r}}:null};function T(e){if(!e.id)return null;let r=v(e);return r?(e.default_file_key&&Object.assign(r,b(e,e.default_file_key)),r):null}function I(e,r,n){let a=void 0!==e.default_file_key?e.default_file_key:e.key;return a&&"optimistic"===r&&e.expires_at?{FigFileLinkExpirationConfig:{[`optimistic-id-${a}`]:{figFileKey:a,expiresAt:new Date(e.expires_at),accessReverted:!1,updatedAt:new Date,prevPrivateLinkAccess:_.PQ.ORG_VIEW,prevPrivateProtoLinkAccess:null,prevOrgBrowsable:null,setByUserId:n?.id||null,setByUser:n}}}:null}function S(e,r,n){let a=e.link_access===_.PQ.VIEW||e.link_access===_.PQ.EDIT||e.proto_link_access===_.Pu.VIEW;return r&&"optimistic"!==r&&(!a||"expires_at"in e)?{FigFileLinkExpirationConfig:{[r]:{expiresAt:e.expires_at?new Date(e.expires_at):null,accessReverted:!e.expires_at,setByUserId:n?.id||null,setByUser:n}}}:null}function w(e){return{key:e.key,name:e.name,file_repo_id:e.file_repo_id,source_file_key:e.source_file_key,editor_type:e.editor_type,folder_id:e.folder_id,team_id:e.team_id,parent_org_id:e.parent_org_id,has_proto_link_password:e.has_proto_link_password,proto_link_access:e.proto_link_access,created_at:e.created_at,trashed_at:e.trashed_at,prototype_url:e.prototype_url}}function A(e){return{checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,p.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,p.sy)(e.name||"")}`,touched_at:"",client_meta:e.clientMeta||"",created_at:e.createdAt?.toString()||"",creator_id:e.creator.id,deleted_at:e.deletedAt?e.deletedAt.toString():null,description:e.description||"",editor_type:e.editorType,file_repo_id:e.fileRepoId,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,is_template:!!e.trackTags?.isTemplate,key:e.key,license:e.license,link_access:e.linkAccess,name:e.name||"",org_audience:!!e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,source_file_key:e.sourceFileKey,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),viewer_export_restricted:e.viewerExportRestricted,is_try_file:e.isTryFile,library_key:e.libraryKey,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType}}function C(e){return{id:e.id,handle:e.handle,img_url:e.imgUrl,email:e.email||void 0,name:e.name||void 0}}function N(e,r,n,a){let i={id:e.id,resource_type:e.resourceType,resource_id_or_key:e.resourceId,level:e.level,created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),pending:e.pending,org_user:n?{design_paid_status:n.accountType,whiteboard_paid_status:n.whiteboardPaidStatus||_.El.STARTER,user_id:n.userId,permission:n.permission}:void 0,team_user:a?{design_paid_status:a.designPaidStatus,whiteboard_paid_status:a.whiteboardPaidStatus,user_id:a.userId,team_id:a.teamId}:void 0};return e.pending?{...i,pending:!0,user_id:null,user:{email:e.pendingEmail||""}}:{...i,pending:!1,user_id:r.id,user:r}}function L(e){return{id:e.id,name:e.name,folder_id:e.folderId,default_file_key:e.defaultFileKey,deleted_at:e.deletedAt&&e.deletedAt.toString(),trashed_at:e.trashedAt&&e.trashedAt.toString(),created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),team_id:e.teamId,link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,has_active_branches:e.hasActiveBranches}}function O(e,r){return{id:e.id,viewed_on:e.viewedOn.toString(),user_id:e.user.id,file_key:e.fileKey,user:r}}function R(e){let r={};return e.forEach(e=>r[e.id]=e),r}function P(e){switch(e){case _.vt.FILE:return"FileRole";case _.vt.FILE_REPO:return"RepoRole";case _.vt.FOLDER:return"ProjectRole";case _.vt.TEAM:return"TeamRole"}}function D(e){if(null!=e)return{backgroundColor:e.backgroundColor??void 0,containingStateGroup:"containingStateGroup"in e?function(e){if(null!=e)return{name:e.name??void 0,nodeId:e.nodeId??void 0}}(e.containingStateGroup):void 0,name:e.name??void 0,nodeId:e.nodeId??void 0,pageId:e.pageId??void 0,pageName:e.pageName??void 0}}function k(e){return{subscriptionStatus:"LIBRARY",type:g.PW.MODULE,node_id:e.nodeId,key:(0,i.mW)(e.key),version:(0,i.Pg)(e.version),userFacingVersion:i.Pg.INVALID,canvas_url:`/api/file_proxy/module_asset/${e.key}/canvas?ver=${e.checkpoint.key}`,containing_frame:D(e.containingFrame),thumbnail_url:`/module_asset/${e.key}/thumbnail?ver=${e.checkpoint.key}`,moduleSource:Y(e.moduleSource),width:parseInt(e.width),height:parseInt(e.height)}}function M(e,r){return{description:e.description??void 0,description_rt:e.description_rt??void 0,library_key:(0,l.l)(r.file.libraryKey),id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,updated_at:e.updatedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:h.Ps.LIVEGRAPH_DATA_HUB_FILE,team_id:null}:{file_key:r.file.key,file_key_source:h.Ps.LIVEGRAPH_DATA,team_id:r.file.teamId}}}function F(e,r){return{...M(e,r),type:g.PW.COMPONENT,node_id:e.nodeId,canvas_url:`/component/${e.componentKey}/canvas?ver=${e.contentHash}`,component_key:(0,i.ii)(e.componentKey),containing_frame:D(e.containingFrame),content_hash:(0,i.F7)(e.contentHash),userFacingVersion:i.F7.INVALID,min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,thumbnail_url:`/component/${e.componentKey}/thumbnail?ver=${e.contentHash}`}}function x(e,r){return{...M(e,r),type:g.PW.STATE_GROUP,node_id:e.nodeId,canvas_url:`/state_group/${e.key}/canvas?ver=${e.version}`,containing_frame:D(e.containingFrame),default_state_key:e.defaultStateKey,key:(0,i.q)(e.key),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,version:(0,i.Rf)(e.version),userFacingVersion:i.Rf.INVALID,thumbnail_url:`/state_group/${e.key}/thumbnail?ver=${e.version}`,fill_color:e.fillColor??void 0}}function U(e,r){return{...M(e,r),type:g.PW.STYLE,node_id:e.nodeId,canvas_url:`/style/${e.key}/canvas?ver=${e.checkpoint.key}`,checkpoint_id:e.checkpoint?.key,content_hash:(0,i.IA)(e.contentHash),userFacingVersion:i.IA.INVALID,key:(0,i.n3)(e.key),meta:e.meta?(0,E.iX)(e.meta):void 0,sort_position:e.sortPosition??"",style_type:e.styleType,thumbnail_url:`/style/${e.key}/thumbnail?ver=${e.checkpoint.key}`}}function B(e){switch(e){case"BOOLEAN":return o.rXF.BOOLEAN;case"COLOR":return o.rXF.COLOR;case"FLOAT":return o.rXF.FLOAT;case"MAP":return o.rXF.MAP;case"STRING":return o.rXF.STRING;case"SYMBOL_ID":return o.rXF.SYMBOL_ID;case"TEXT_DATA":return o.rXF.TEXT_DATA;default:(0,a.wc)(`Unhandled livegraph type: ${e}`)}}function V(e,r){return`/variable_set/${e}/canvas?ver=${r}`}function G(e,r,n){let a="",o="";return n?(a=c.wL(s.sH(e.nodeId)??s.Hr),o=d.wL(s.sH(e.variableCollection.nodeId)??s.Hr)):(a=c.Hc((0,i.ey)(e.key),(0,i.nK)(e.version)),o=d.Hc((0,i.yG)(e.variableCollection.key),(0,i.Vt)(e.variableCollection.version))),{...M({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:g.PW.VARIABLE,node_id:a,variableSetId:o,variableCollectionKey:(0,i.yG)(e.variableCollection.key),resolvedType:B(e.variableType),version:(0,i.nK)(e.version),userFacingVersion:i.nK.INVALID,sortPosition:e.sortPosition,key:(0,i.ey)(e.key),scopes:(0,f.gK)(e.scopes),canvas_url:V(e.variableCollection.key,e.variableCollection.checkpoint.key)}}function H(e,r,n){let a="";return a=n?d.wL(s.sH(e.nodeId)??s.Hr):d.Hc((0,i.yG)(e.key),(0,i.Vt)(e.version)),{...M({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:g.PW.VARIABLE_SET,node_id:a,version:(0,i.Vt)(e.version),userFacingVersion:i.Vt.INVALID,canvas_url:V(e.key,e.checkpoint.key),key:(0,i.yG)(e.key),checkpoint_id:e.checkpoint?.key,variableThumbnailsUrl:e.variableThumbnailsUrl??void 0,modes:function(e){if(null==e)return;let r=[];for(let n of e)r.push({id:n.id,name:n.name});return r}(e.modes),isExtendable:e.isExtendable??!1,sortPosition:(0,u.oA)(e.sortPosition,null)}}function W(e,r){return{...{description:e.description??void 0,description_rt:e.description_rt??void 0,id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:h.Ps.LIVEGRAPH_DATA_HUB_FILE,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.currentHubFileVersion?.name||"",publisher_name:r.file.communityPublishers?.[0]?.profile?.name||"",isHubFile:!0}:"teamTemplate"===r.type?{file_key:r.file.key,file_key_source:h.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.template?.name||"",publisher_name:r.file.template?.publishedByUserNullable?.name||"",isHubFile:!1}:{file_key:r.file.key,file_key_source:h.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.name,isHubFile:!1,publisher_name:""}},...k(e)}}function K(e,r){return{...M({...e,description_rt:null,thumbnailUrl:null},r),...k(e)}}let Y=e=>{switch(e){case"EDITOR_TEMPLATE":return o.QjO.EDITOR_TEMPLATE;case"SLIDES_TEMPLATE":return o.QjO.SLIDES_TEMPLATE;case"SITES_TEMPLATE":return o.QjO.SITES_TEMPLATE;case"LITE_TEMPLATE":return o.QjO.LITE_TEMPLATE;default:(0,a.wc)(`Unhandled livegraph module source: ${e}`)}};function $(e){return{id:e.id,path:e.path,orgId:e.org_id??null,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:e.deleted_at?new Date(e.deleted_at):null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,description:e.description}}function j(e,r,n){return(r||n)&&e?{autogen_password_controls:r?.autogenPasswordControls||!1,external_collaboration_controls:r?.externalCollaborationControls||!1,public_link_controls_setting:n?.publicLinkControlsSetting??r?.publicLinkControlsSetting,public_link_controls_max_expiration:n?.publicLinkControlsMaxExpiration??r?.publicLinkControlsMaxExpiration}:null}function z(e){return e?{...e,prevPrivateLinkAccess:e.prevPrivateLinkAccess,prevPrivateProtoLinkAccess:e.prevPrivateProtoLinkAccess,prevOrgBrowsable:!!e.prevOrgBrowsable,setByUser:e.setByUser?C(e.setByUser):null}:null}function q(e){let r={domains:[],isFetching:!1,fetchedAt:null};return e&&e.forEach(e=>{r.domains.push({id:e.id,created_at:e.createdAt?e.createdAt.toString():"",org_id:e.orgId,domain:e.domain,google_sso_only_at:e.googleSsoOnlyAt?e.googleSsoOnlyAt.toString():null,saml_sso_only_at:e.samlSsoOnlyAt?e.samlSsoOnlyAt.toString():null,verification_method:null,verified_at:null})}),r}function Z(e,r){return r?{type:"hubFile",file:r}:e?{type:"team",file:e}:void 0}function X(e){let r=e.currentUser.recentFiles2;return r?r.filter(e=>null!==e.file&&!e.file.trashedAt&&!e.file.deletedAt&&(!!(0,m.kc)().sites||"sites"!==e.file.editorType)):[]}function J(e){let r=X(e),n=[],a=new Map,i=[];for(let e of r){let r=e.file,o=r.trackTags?.isTemplate,s={accessed_at:e.actionAt.toISOString(),branch_checkpoint_id:r.branchCheckpointId,client_meta:r.clientMeta,created_at:r.createdAt.toISOString(),creator_id:r.creatorId,deleted_at:null,description:r.description,edit_url:r.editUrl,editor_type:r.editorType,file_repo_id:r.fileRepoId,folder_access_enabled:r.folderAccessEnabled,folder_id:r.folderId,handoff_url:r.handoffUrl,has_file_link_password:r.hasFileLinkPassword,has_proto_link_password:r.hasProtoLinkPassword,is_favorited:r.isFavorited,is_new_user_playground_library:r.newUserPlaygroundLibrary||void 0,is_team_template:r.isTeamTemplate,is_template:o||void 0,is_try_file:r.isTryFile,key:r.key,library_key:r.libraryKey,last_published_at:r.lastPublishedAt||null,license:r.license,link_access:r.linkAccess,name:r._name||"Untitled",org_audience:r.orgAudience??void 0,org_browsable:r.orgBrowsable,parent_org_id:r.parentOrgId,proto_link_access:r.protoLinkAccess,prototype_url:r.prototypeUrl,scheme:r.scheme,source_checkpoint_id:r.sourceCheckpointId,source_file_key:r.sourceFileKey,starter_library_src_file_key:r.trackTags?.starterLibrarySrcFileKey||void 0,team_id:r.teamId,thumbnail_guid:r.thumbnailGuid,thumbnail_url:r.thumbnailUrl,thumbnail_url_override:r.thumbnailUrlOverride,preview_thumbnail_urls:null,touched_at:r.touchedAt,track_tags:r.trackTagsRaw?JSON.parse(r.trackTagsRaw):null,trashed_at:null,trashed_user_id:r.trashedUserId,updated_at:r.updatedAt?.toISOString(),url:r.url,viewer_export_restricted:r.viewerExportRestricted,can_edit:r.canEdit};if(r.fileRepoId&&r.repo){let n=a.get(r.fileRepoId);n?n.files.push(s):(n={repo:{created_at:r.repo.createdAt.toISOString(),default_file_key:r.repo.defaultFileKey,deleted_at:r.repo.deletedAt?.toISOString()||null,folder_id:r.repo.folderId,has_active_branches:r.repo.hasActiveBranches,has_file_link_password:r.repo.hasFileLinkPassword,has_proto_link_password:r.repo.hasProtoLinkPassword,id:r.repo.id,is_favorited:r.repo.isFavorited,link_access:r.repo.linkAccess,name:r.repo.name,org_audience:r.repo.orgAudience,org_browsable:r.repo.orgBrowsable,parent_org_id:r.repo.parentOrgId,proto_link_access:r.repo.protoLinkAccess,team_id:r.repo.teamId,trashed_at:r.repo.trashedAt?.toISOString()||null,updated_at:r.repo.updatedAt.toISOString()},files:[s],timestamp:e.actionAt.toISOString()},a.set(r.fileRepoId,n),i.push(n))}else n.push(s)}return{recent_files:n,recent_repos:i}}},733050:(e,r,n)=>{n.d(r,{M:()=>c});var a=n(281935),i=n(985814),o=n(99862),s=n(825758);let l=null;function c(){return l||(a.eD&&(l=new o.k),(0,i.T)()&&(l=new s.y)),l}},727903:(e,r,n)=>{n.d(r,{B9:()=>h,JK:()=>l,LN:()=>d,_Z:()=>_,aE:()=>p,bu:()=>f,ub:()=>m,vr:()=>c,wU:()=>u}),n(411855);var a=n(841962),i=n(550479),o=n(401562);let s=["jpy","usd","gbp","cad","eur"],l=(0,o.D)(()=>{if(navigator){let e=navigator.languages;if(e&&e[0])return e[0];let r=navigator.language;if(r)return r}return"en-US"});class c{constructor(e){this.fullFormat={jpy:"JPY",usd:"USD",eur:"EUR",gbp:"GBP",cad:"CAD"},null===e&&(0,i.us)("Currency should not be null. Defaulted to usd."),this.currency=e??"usd",this.hasCents="jpy"!==this.currency,this.locale=l()}formatMoney(e,r){let n={currency:this.currency,currencySign:r?.currencySign,style:"currency"};this.hasCents&&r?.showCents||(n.maximumFractionDigits=0,n.minimumFractionDigits=0),this.hasCents&&(e*=.01);let a=e.toLocaleString(this.locale,n);return(a.startsWith("CA$")||a.startsWith("US$"))&&(a=a.slice(2)),r?.showFullFormat?`${a} ${this.fullFormat[this.currency]}`:a}}function d(){let e=(0,a.Ay)().user_currency_from_ip;return _()?e:"usd"}function u(){return new c(d())}function m(){return _()&&"usd"!==d()&&(0,a.Ay)().iso_code||"US"}function p(){return(0,a.Ay)().iso_code||"US"}function h(){let e=new Set;return e.add("usd"),e.add(d()),Array.from(e)}function _(){let e=(0,a.Ay)().user_currency_from_ip;if(!e||!s.includes(e)||"usd"===e)return!1;let r=(0,a.Ay)().user_data;return!!r&&!!r.id}let g={usd:[],eur:["AT","BE","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","SK","SI","SM","ES","SE","CH","BG","HR","CY","IE","RO","XK"],jpy:["JP"],cad:["CA"],gbp:["GB","IM","GG","JE","GI","GS"]};function f(e,r){return"usd"===e||g[e].includes(r)}},410690:(e,r,n)=>{n.d(r,{Lb:()=>i});var a=n(437068);function i(e){let r=(0,a.DN)();r.get("CHECKED_OSS_SALES_EXPERIMENT_LOCAL_KEY")||r.set("CHECK_OSS_SALES_EXPERIMENT_LOCAL_KEY",e)}},287327:(e,r,n)=>{n.d(r,{D8:()=>o,Lh:()=>s,_q:()=>c,jO:()=>l}),n(777535),n(69441);var a=n(401562);n(176160),n(15092);var i=n(303480);(0,a.D)((e,r,n)=>null!=e&&null!=r&&function(e,r){return!!e&&!!e.track_tags&&!e.trashed_at&&!e.deleted_at&&!!e.is_template&&r.includes(e.track_tags.figma_basics_experiment)}(r,n)&&e===r.creator_id);var o=(e=>(e.PROPERTIES_PANEL_TITLE="properties-panel-title",e.SCRUBBABLE_CONTROL="scrubbable-control",e.PAINT_PANEL_ROW="paint-panel-row",e.TEXT_PANEL="text-panel",e))(o||{});function s(e,r){return e+"-"+r.toLowerCase().replace(" ","-")}function l(){let e=(0,i.f)("editor_onboarded"),r=(0,i.f)("figma_basics_tooltips_onboarding"),n=(0,i.f)("no_figma_basics_tooltips_onboarding");return c({editor_onboarded:e,figma_basics_tooltips_onboarding:r,no_figma_basics_tooltips_onboarding:n,cursor_bot_v2__basics_onboarded:(0,i.f)("cursor_bot_v2__basics_onboarded"),cursor_bot_v2__no_basics_onboarded:(0,i.f)("cursor_bot_v2__no_basics_onboarded"),seen_starting_points_tooltips_onboarding:(0,i.f)("seen_starting_points_tooltips_onboarding")})}function c(e){return!!(e.editor_onboarded||e.figma_basics_tooltips_onboarding||e.no_figma_basics_tooltips_onboarding||e.cursor_bot_v2__basics_onboarded||e.cursor_bot_v2__no_basics_onboarded||e.seen_starting_points_tooltips_onboarding)}},598338:(e,r,n)=>{n.d(r,{OA:()=>m,rT:()=>u}),n(890882);var a=n(750570);n(76265);var i=n(478150),o=n(543424),s=n(490267),l=n(190253);let c=(e,r,n)=>{switch(e){case"product":return s.SL[r];case"role":return s.qY[r];case"seatType":case"seatChanges":return r;case"accountType":return s.U9[r];case"lastEdit":return s.rk[r];case"billingGroup":let a=decodeURIComponent(r),i=Object.keys(n).find(e=>n[e]?.name===a);if("unassigned"===r||"Unassigned"===r)return o.s;if(i)return i;return null;case"newEditor":return"true"===r;default:return null}},d=(e,r,n)=>{switch(e){case"productFilter":return s.Eg[r];case"roleFilter":return s.jN[r];case"permissionFilter":case"lastEditFilter":case"newEditorFilter":case"workspaceFilter":case"idpGroupFilter":case"seatTypeFilter":case"seatChangesFilter":return r;case"licenseGroupFilter":return encodeURIComponent((0,i.CC)(r,n));default:return null}};function u(e,r){if(!e)return null;let n=(0,a.qg)(e);return function(e){let r=e?.[s.e5.productFilter],n=e?.[s.e5.roleFilter],a=r===l.Te.DEV_MODE?s.B9:s.ZL;return!n||a.includes(n)?e:{...e,roleFilter:null}}(Object.keys(n).reduce((e,a)=>{if(!(a in s.Oo))return e;{let i=s.GX[a],o=n[a],l=c(a,o,r);return{...e,...l&&{[i]:l}}}},s.J0))}function m(e,r){return Object.keys(e).reduce((n,a)=>{let i=s.cC[a],o=e[a];return{...n,...o&&{[i]:d(a,o,r)}}},{})}},650278:(e,r,n)=>{n.d(r,{C5:()=>o,CA:()=>_,D1:()=>l,UO:()=>g,ev:()=>s,go:()=>c,hX:()=>d,tl:()=>u,vY:()=>m,xu:()=>f});var a=n(890882);n(538971),n(76265),n(314540);var i=n(989456);function o(e,r,n){return e.find(e=>{let a=e.status===r;return n&&(a&&=n(e)),a})}function s(e){return!!e&&1===e.quarter}function l(e){return!e.billing_mechanics||"legacy"===e.billing_mechanics}function c(e){return"upcoming"===e.status&&!e.is_skipped_trueup&&!!l(e)&&u(e.due_at)}function d(e){let r=o(e,"upcoming");return!!r&&c(r)}function u(e){return(0,a.A)(e)<(0,a.A)().add(14,"days")}function m(e){return o(e,"open",e=>(0,a.A)(e.past_due_at).isBefore((0,a.A)()))}n(548759),n(190253);var p=(e=>(e.OVERDUE="overdue",e.UNPAID="unpaid",e.REVIEW="review",e.LOCKED="locked",e.DEFAULT="default",e))(p||{}),h=(e=>(e.BILLING_STATUS="billing_status",e.TAX_ID_STATUS="tax_id_status",e.DEV_MODE_SUGGESTED_UPGRADES="dev_mode_suggested_upgrades",e))(h||{});function _(e){return null!==e&&null===e.value}function g(e,r){return!!r&&1===e.quarter&&0===(0,a.A)(e.period_start_at).diff(r,"days")}function f(e){return"upcoming"===e.status||"locked"===e.status?null:`${i.AR}${e.id}`}},478150:(e,r,n)=>{n.d(r,{CC:()=>o});var a=n(76265);n(543475),n(314540),n(597185);var i=n(543424);function o(e,r){return e===i.s?(0,a.t)("license_group.unassigned"):r[e]?.name??""}n(490267)},749884:(e,r,n)=>{n.d(r,{YP:()=>c,gO:()=>l,n1:()=>u,p9:()=>d});var a=n(314540),i=n(510669),o=n(331850),s=n(159806),l=(e=>(e[e.CLICK_LEAVE=0]="CLICK_LEAVE",e[e.CLICK_WITHDRAW=1]="CLICK_WITHDRAW",e[e.CLICK_JOIN=2]="CLICK_JOIN",e[e.CLICK_REQUEST=3]="CLICK_REQUEST",e[e.BYPASS_REQUEST=4]="BYPASS_REQUEST",e[e.CLICK_JOIN_AS_ADMIN=5]="CLICK_JOIN_AS_ADMIN",e))(l||{});function c(e,r,n,l){let c=(0,i.hasViewerRoleAccessOnTeam)(e.id,n),d=function(e,r){if(!e.org_id)return!1;let n=r.orgTeams?.teams.find(r=>r.id===e.id);if(n)return!!n.orphaned;let a=r.roles.byTeamId[e.id];return!a||Object.values(a).every(e=>e.level<o.e6.ADMIN&&!e.pending)}(e,n);if(c)return 0;if(r&&r.status===s.c.PENDING)return 1;if(e.org_access===a.bU.PRIVATE&&d&&(0,i.canAdminOrg)(l,n)||e.org_access===a.bU.SECRET&&d&&(0,i.canAdminOrg)(l,n))return 4;if((0,i.canManageNonSecretOrgTeam)(e,n,n.user?.id))return 5;if(e.org_access===a.bU.PUBLIC)return 2;if(e.org_access===a.bU.PRIVATE)return 3;return null}let d=e=>`JOINING_ORG_TEAM_${e}`,u=e=>`JOINING_${e.length}_BATCH_ORG_TEAMS_${e[0]}`},479480:(e,r,n)=>{n.d(r,{Hw:()=>s});var a=n(538971);n(841962),n(241162),n(313449),n(510669),n(782125);var i=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE_TEAM=1]="SINGLE_TEAM",e[e.MULTIPLE_TEAMS=2]="MULTIPLE_TEAMS",e))(i||{}),o=(e=>(e[e.NEVER=0]="NEVER",e[e.ONCE=1]="ONCE",e[e.TWICE=2]="TWICE",e[e.PERMANENTLY=3]="PERMANENTLY",e))(o||{});function s(e){return!!e&&!(0,a.qe)(e.email)}},782125:(e,r,n)=>{n.d(r,{LM:()=>d,WT:()=>p,Xy:()=>m,bC:()=>h,x9:()=>u,xw:()=>c});var a=n(834825);n(885123),n(271646),n(76265),n(190253);var i=n(314540),o=n(496203);n(688656);var s=n(390038),l=n(927150);function c(e){return e.currentUserOrgId&&e.user&&e.orgUsersByOrgId[e.currentUserOrgId]?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null}(0,l.bt)(c);let d=(0,l.bt)(function(e){let r=c(e);return r?.workspace_users?.find(e=>e.is_main_workspace)?.workspace_id}),u=s.x;function m(e){let r=Object.values(e).filter(e=>e.permission===i._D.ADMIN);return(0,a.KQ)(r,"created_at"),r}function p(e,r){let n=e.admin_users_metadata.map(e=>r[e.id]).filter(e=>!!e);return(0,a.KQ)(n,"created_at"),n}function h(e){return e.type===o.Wd.ORG_USER?!!e.scim_seat_type:!e.isOrgInvite&&!!e.scim_seat_type}},597185:(e,r,n)=>{n.d(r,{H_:()=>i,Oe:()=>h,Ts:()=>o,eE:()=>s,kA:()=>p,mg:()=>u,nX:()=>m,wA:()=>c,yK:()=>l}),n(411855),n(188507),n(890882);var a=n(538971);function i(e,r){let n=e.map(e=>e.domain.toLowerCase()),i=(0,a.zN)(r);return 0!==n.length&&!!i&&n.indexOf(i)>-1}function o(e){return e?.id!==void 0}function s(e,r){let n=o(r)?r.email:r;return!!n&&(0,a.xf)(n)&&e.domains.length>0&&!i(e.domains,n)}function l(e){return!!e.currentUserOrgId&&!!e.orgById[e.currentUserOrgId]?.template_picker_disabled}function c(e){return e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null}n(841962),n(972142),n(719334),n(76265),n(314540),n(510669),n(567155),n(231880),n(871290),n(190253),n(305216);let d=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/(\d+)/);function u(e){return d.test(e)}function m(e){let r=e.match(d);return r?r[1]:null}function p(e){return!!e?.bigma_enabled}function h(e){return p(e)}},313449:(e,r,n)=>{n.d(r,{BR:()=>q,Ht:()=>b,J9:()=>k,JV:()=>j,Jm:()=>E,KI:()=>D,Ky:()=>z,LF:()=>T,O1:()=>Z,PS:()=>M,PX:()=>w,Rq:()=>Y,Rx:()=>G,S$:()=>x,SD:()=>H,UE:()=>W,WQ:()=>N,WW:()=>I,Wf:()=>v,XX:()=>R,ZZ:()=>F,cW:()=>A,dX:()=>V,fD:()=>K,h:()=>S,n0:()=>L,ne:()=>$,oc:()=>U,w5:()=>O,zZ:()=>y});var a=n(217950),i=n(890882),o=n(538971),s=n(841962),l=n(550479),c=n(62244),d=n(719334),u=n(76265),m=n(643225),p=n(314540),h=n(510669),_=n(231880),g=n(45049),f=n(611390),E=(e=>(e.FREE="free",e.PRO="pro",e.ORG="org",e.ENT="ent",e.EDU="edu",e))(E||{});let y="https://www.figma.com/pricing/#cid-20p4Q0lWSOxIWj30zTY6P2",b=2,v=1,T={[p._Y.DESIGN]:3,[p._Y.WHITEBOARD]:1,[p._Y.SLIDES]:3,[p._Y.SITES]:3,[p._Y.COOPER]:3},I=3,S=0,w=0,A=5;function C(e){return e>new Date}function N(e){let r=e&&!e.org_id&&e.grace_period_end&&i.A.utc(e.grace_period_end);return!!r&&r.valueOf()>Date.now()}function L(e){return!!e&&null!=e.subscription&&e.subscription!==p.Qh.INCOMPLETE}function O(e){return!!e&&(L(e)||e.student_team||!!e.grace_period_end&&C(new Date(e.grace_period_end)))}function R(e){if(!e)return!1;let{subscription:r,studentTeamAt:n,gracePeriodEnd:a}=e;return!!r&&r!==p.Qh.INCOMPLETE||!!n||a&&C(a)}function P(e){let r=e.editorType,n=!!e.team&&!R(e.team),a=!e.teamId&&!e.parentOrgId,i=(0,s.kc)().ps_benchmark&&(0,m.jd)(e.project),o=T[r??p._Y.DESIGN];return r===p._Y.WHITEBOARD?n||a?o:1/0:n&&!i?o:1/0}function D(e){return P(e)<1/0}function k({openFile:e,pageCount:r}){return r>=P(e)}function M(e){return Object.values(e.teams).filter(r=>(0,h.canEditTeam)(r.id,e)&&(!O(r)||r.student_team))}function F(e,r,n){var a,i,o;return a=e.team_id?r.teams[e.team_id]:null,i=r.user,o=r.userEduGracePeriods,(!!e.team_id||"org_edit"!==e.sharing_audience_control)&&!!(!e.team_id&&!(0,m.Gi)(e)||e.team_id&&(!n&&B(a,i,o)||!O(a)&&(e.is_invite_only||e.is_view_only)))}function x(e,r,n){return!(e.teamId||(0,m.VA)(e))||!!e.teamId&&(!!V(r,n)||(e.inviteOnlyAt||e.viewOnlyAt)&&!R(r))}function U(e,r){return B(r.teams[e],r.user,r.userEduGracePeriods)}function B(e,r,n){return!!e&&!!r&&(e.student_team?!((0,c.cn)(r)||(0,c.SH)(n,e.id).isInValidGracePeriod):e.restrictions_list?.includes(p.P4.LOCKED))}function V(e,r){return!!e&&!!r&&(e.studentTeamAt?!((0,c.cn)(r)||e.eduGracePeriod?.isValid):e.restrictionsList?.includes(p.P4.LOCKED))}function G(e){return Object.values(e.teams).some(r=>U(r.id,e)&&(0,h.canEditTeam)(r.id,e))}function H(e,r){let n=r.orgById[e];return n&&n.standing===_.ZG.SUSPENDED}function W(e,r){if(e.data&&e.data.message){let n=(0,u.Jv)(e);n&&r(d.s.error(n))}else{let n=(0,u.Jv)(e,(0,u.YD)("error.unknown_contact_support"));r(d.s.error(n))}}function K(e,r){return e===g.tY.MONTHLY?0:r}function Y(e,r){return e===g.tY.MONTHLY?r:0}function $(e){switch(e){case g.tY.MONTHLY:return g.NW.MONTH;case g.tY.ANNUAL:return g.NW.YEAR;default:return(0,l.$D)(a.e.MONETIZATION_UPGRADES,Error(`Attempted to get BillingInterval from invalid BillingPeriod: ${e}`)),null}}function j(e){switch(e){case g.NW.MONTH:return g.tY.MONTHLY;case g.NW.YEAR:return g.tY.ANNUAL;default:return(0,l.$D)(a.e.MONETIZATION_UPGRADES,Error(`Attempted to get BillingPeriod from invalid BillingInterval: ${e}`)),null}}function z(e,r,n){let a="whiteboard"===n?"whiteboard_paid_status":"design_paid_status";return e.filter(e=>!(0,o.nD)(e.email)&&(e[a]===f.Zf.FULL&&!r.downgrade[n].includes(e.id)||r.upgrade[n].includes(e.id))).length}function q(e,r){let n=!1,a=null!==e?Object.values(e).reduce((e,a)=>{if(!a.user)return e;let i={id:a.user.id,design_paid_status:a.design_paid_status,whiteboard_paid_status:a.whiteboard_paid_status,email:a.user.email||"",handle:a.user.handle||"",img_url:a.user.img_url||""};return a.user?.id===r?.id?(n=!0,e.unshift(i)):e.push(i),e},[]):[];return!n&&r&&a.unshift({id:r.id,design_paid_status:f.Zf.STARTER,whiteboard_paid_status:f.Zf.STARTER,email:r.email,handle:r.handle,img_url:r.img_url}),a}function Z(e,r){return Math.max(e,r)-r}},194930:(e,r,n)=>{n.d(r,{Mt:()=>R,OI:()=>O,Ud:()=>N});var a=n(411855),i=n(188507),o=n(217950),s=n(777535),l=n(538971),c=n(336427),d=n(841962),u=n(550479),m=n(697737),p=n(719334),h=n(76265),_=n(437901),g=n(47795),f=n(20174),E=n(593874),y=n(238753),b=n(811567),v=n(314540),T=n(45049),I=n(401562),S=n(608701),w=n(15092),A=n(354465),C=n(313449);let N=(0,I.D)(({teamId:e,canSeeBillingAddressExp:r})=>{let n=(0,i.wA)(),f=(0,i.d4)(e=>e.loadingState),b=(0,i.d4)(r=>e?r.teamUserByTeamId[e]:null),I=(0,i.d4)(e=>e.selectedView),N=(0,w.iZ)(),[O,P]=(0,a.useState)(!0),D=(0,c.ZC)(e),k=(0,_.sx)(),M=y.Xw.loadingKeyForPayload({teamId:e}),F=(0,A.GH)(f,M),x=(0,d.DC)();(0,a.useEffect)(()=>{n(y.Xw({teamId:e}))},[n,e]);let U=function(){let e=(0,i.wA)();return(0,a.useCallback)(r=>{(0,s.sx)("Loaded Saved Cart State",{teamId:r.teamId,lastSavedAt:r.updatedAt}),e(E.eK(r))},[e])}();return(0,a.useEffect)(()=>{async function a(r){try{let a=await m.Ay.post("/api/subscriptions/teams/calculate_estimate",{...r,team_id:e});n(E.i({taxes:a.data.meta.estimate}))}catch(e){n(p.s.error((0,h.t)("payments.errors.estimate_calculation_error"))),n(g.$T({...I,paymentStep:T.tn.PAYMENT_AND_ADDRESS}))}P(!1)}if(void 0===D||D===e||O||(R(n),P(!0)),(!e||F)&&O){let c=(0,C.BR)(b,N),d=Object.entries(c).map(([e,r])=>{if((0,l.nD)(r.email||""))return e}).filter(e=>!!e);n(E.M2({figmaEmailTeamUsers:d}));let m=(0,S.lX)({teamId:e,userId:N?.id});if(m){m.editorStatusChanges=(0,S.nt)(m.editorStatusChanges,c);let l=(0,C.Ky)(c,m.editorStatusChanges,v._Y.DESIGN),p=(0,C.Ky)(c,m.editorStatusChanges,v._Y.WHITEBOARD),h=l+m.numEmptyDesignSeats,_=p+m.numEmptyWhiteboardSeats;if(U({numDesignEditors:h,numWhiteboardEditors:_,editorStatusChanges:m.editorStatusChanges,teamId:e,updatedAt:m.updatedAt,cartSelections:m.cartSelections}),x){var i;let e=(i=x.billing_period,T.tY[T.tY[i]]),o=r?{billing_address:x.billing_address,shipping_address:x.shipping_address||x.billing_address}:null;n(E.Lo({billingPeriod:e})),n(E.$h({vatGstId:x.vat_gst_id})),n(E.yy({legalName:x.customer_legal_name||x.company_name,displayName:x.display_name})),n(E.Ef({regionalVatGstId:x.regional_vat_gst_id})),a({address:x.address,editor_status_changes:m.editorStatusChanges,figma_email_team_users:d,selected_currency:x.currency,annual_quantity:(0,C.fD)(e,h),monthly_quantity:(0,C.Rq)(e,h),annual_whiteboard_quantity:(0,C.fD)(e,_),monthly_whiteboard_quantity:(0,C.Rq)(e,_),vat_gst_id:x.vat_gst_id,regional_vat_gst_id:x.regional_vat_gst_id,...o})}else"teamUpgrade"===I.view&&I.paymentStep===T.tn.CONFIRM_PAY&&I.billingPeriod!==T.tY.STUDENT&&(s.az.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:k,teamId:e??void 0}),(0,u.$D)(o.e.MONETIZATION_UPGRADES,Error("[Billing] Loaded Pro checkout confirmation step without payment flow data"),{extra:{isCampfireCart:k}})),P(!1)}else P(!1)}},[n,F,b,D,e,N,O,x,I,U,r,k]),(0,a.useEffect)(()=>()=>{e&&L(n,e)},[n,e]),O}),L=(0,I.D)((e,r)=>{let n=y.Xw.loadingKeyForPayload({teamId:r});e(f.yH({key:n}))});function O(e){e(E.qU({cartSelections:{countBySeatType:b.N_.dict(e=>0),selectedUserSeatTypes:{}}}))}function R(e){e(E.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]}}})),e(E.js({numDesignEditors:0})),e(E.Az({numWhiteboardEditors:0}))}},224993:(e,r,n)=>{n.d(r,{k:()=>o});var a=n(846288),i=n(777535);class o{constructor(e){this.eventName=e,this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1,this.logEvent=e=>{if(this.fileKey&&!this.alreadySent)switch(e.type){case"sendSceneGraphQuery":this.queries.push(s(e.queries)),this.queriesTs.push(this.now());break;case"receiveNodeChanges":this.nodeChangesSizes.push(e.size),this.nodeChangesTs.push(this.now());break;case"receiveSceneGraphReply":this.replies.push(s(e.queries)),this.repliesTs.push(this.now());break;case"finishIncrementalLoading":if(e.fileKey===this.fileKey){if(this.nodeChangesSizes.length>0){let r={version:1,fileKey:e.fileKey,nodeChangesSizes:this.nodeChangesSizes,queries:this.queries,replies:this.replies,maxNodeChangesSize:Math.max.apply(null,this.nodeChangesSizes),...l(this.queriesTs,"query",5),...l(this.nodeChangesTs,"node",5),...l(this.repliesTs,"reply",5)};(0,i.sx)(this.eventName,r),this.alreadySent=!0}}else console.error(`IncrementalLoadTimer: file key mismatch ${e.fileKey} != ${this.fileKey}`);this.reset();break;default:(0,a.xb)(e)}}}reset(){this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1}now(){return Math.round(performance.now())}setFileKey(e){this.fileKey=e}}function s(e){return[...e].sort().join(",")}function l(e,r,n){let a={};return e.forEach((e,i)=>{i<n&&(a[`${r}.${i}`]=e)}),a}},305216:(e,r,n)=>{n.d(r,{Ay:()=>T,C1:()=>C,D8:()=>O,DN:()=>L,F1:()=>E,GP:()=>b,Hv:()=>P,Jd:()=>S,Jf:()=>N,Pe:()=>v,Pq:()=>y,R$:()=>I,XG:()=>A,qR:()=>w});var a=n(846288),i=n(841962),o=n(76265),s=n(207849),l=n(666249),c=n(23478),d=n(901152),u=n(314540),m=n(183739),p=n(841924);n(800519);var h=n(331850),_=n(611390);n(324225);var g=n(738402),f=n(806565);function E(){return(0,d.MP)()&&!(0,i.kc)().integ_zoom_allow_extensions?{canRun:!1,message:(0,o.t)("widgets.no_zoom_widgets_plugins")}:{canRun:!0}}function y({copyExportRestrictedArgs:e}){return!(e&&v(e))}function b(e){return(0,g.$A)(e.selectedView)?(0,l.tn)(e)&&y({copyExportRestrictedArgs:e.openFile}):!((0,d.MP)()&&!(0,i.kc)().integ_zoom_allow_extensions||(0,f.Vj)(e.selectedView))&&!e.mirror.appModel.isReadOnly}function v(e){return(0,i.kc)().file_export_perm_v2?!e.canExport:!e.canEdit&&e.viewerExportRestricted}let T=n(251088).A;function I(e,r){return!!(e&&e.external_restricted_org_id&&e.external_restricted_org_id!==r)}function S(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===u.El.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===u.El.RESTRICTED}function w(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===_.Zf.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===_.Zf.RESTRICTED}function A(e,r){return null===r||("whiteboard"===r?e&&e.whiteboardPaidStatus===_.Zf.RESTRICTED:"slides"!==r&&e&&e.designPaidStatus===_.Zf.RESTRICTED)}function C(e,r){switch(e){case h.e6.OWNER:return r?(0,o.t)("permissions.level_name.branch_owner"):(0,o.t)("permissions.level_name.owner");case h.e6.ADMIN:return(0,o.t)("permissions.level_name.admin");case h.e6.EDITOR:return(0,o.t)("permissions.level_name.can_edit");case h.e6.VIEWER:return(0,o.t)("permissions.level_name.can_view");case h.e6.VIEW_PROTOTYPES:return(0,o.t)("permissions.level_name.can_view_prototypes");default:return(0,o.t)("permissions.level_name.none")}}function N(e,r){switch(r){case u._Y.DESIGN:return e.canCreateDesignFile;case u._Y.WHITEBOARD:return e.canCreateFigjamFile;case u._Y.SLIDES:return e.canCreateSlidesFile;case u._Y.SITES:return e.canCreateDesignFile&&!!(0,f.oz)();case u._Y.COOPER:return e.canCreateDesignFile&&(0,s.q)();default:(0,a.xb)(r)}}function L({role:e,file:r,folder:n=null,isInDraftsFolder:a=!1}){if(e.level!==h.e6.VIEWER&&e.level!==h.e6.VIEW_PROTOTYPES)return null;let i=(0,c.Pn)(r);switch(e.level){case h.e6.VIEWER:{if(r.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:i});if(r.link_access===u.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_edit_org_member_with_link",{noun:i});if(e.pending)break;let s=!!n&&!n.is_invite_only&&!n.is_view_only;return R(!!e.teamLevel&&!a&&e.teamLevel>h.e6.VIEWER&&(!n||s),!!e.folderLevel&&e.folderLevel>h.e6.VIEWER,!!e.repoLevel&&e.repoLevel>h.e6.VIEWER)}case h.e6.VIEW_PROTOTYPES:{if(r.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_see_and_edit_anybody_with_the_link_noun",{noun:i});if(r.link_access===u.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_see_and_edit_allow_editing_by_org_members_with_link",{noun:i});if(e.pending)break;let a=n&&!n.is_invite_only&&!n.is_view_only;if(e.teamLevel&&e.teamLevel>h.e6.VIEWER&&(!n||a))return(0,o.t)("permissions.can_still_see_and_edit_permission_team_file_is_in",{noun:i});if(e.folderLevel&&e.folderLevel>h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_team_project_is_in",{noun:i});if(e.repoLevel&&e.repoLevel>h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_main_file",{noun:i});if(r.link_access===u.PQ.VIEW)return(0,o.t)("permissions.can_still_edit_allow_view_anybody_with_link",{noun:i});if(r.link_access===u.PQ.ORG_VIEW&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_edit_allow_edit_anybody_with_link",{noun:i});if(e.teamLevel&&e.teamLevel>=h.e6.VIEWER&&(!n||a))return(0,o.t)("permissions.can_still_see_permission_team_file_is_on",{noun:i});if(e.folderLevel&&e.folderLevel>=h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_permission_project_file_is_on",{noun:i});if(e.repoLevel&&e.repoLevel>=h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_edit_permission_on_main_file",{noun:i})}}return null}function O({file:e,seenState:r,folder:n=null}){let a=(0,c.Pn)(e);if(e.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:a});let i=!!n&&!n.is_invite_only&&!n.is_view_only;return R(!!r.teamLevel&&r.teamLevel>h.e6.VIEWER&&(!n||i),!!r.folderLevel&&r.folderLevel>h.e6.VIEWER,!!r.repoLevel&&r.repoLevel>h.e6.VIEWER)}function R(e,r,n){return e?(0,o.t)("permissions.can_still_edit_team_permissions"):r?(0,o.t)("permissions.can_still_edit_folder_permissions"):n?(0,o.t)("permissions.can_still_edit_edit_permissions"):null}async function P(e,r){let n=await p.M4.fetch(m.zCd.Query({projectId:e}));return!!n.project&&N(n.project,r)}},510669:(e,r,n)=>{n.d(r,{canAdminOrg:()=>j,canAdminTeam:()=>U,canEditFolder:()=>k,canEditTeam:()=>x,canEditTeamRole:()=>W,canGuestOrg:()=>Y,canManageNonSecretOrgTeam:()=>Z,canMemberOrg:()=>$,canOwnFolder:()=>M,canOwnTeam:()=>B,canUploadAndEditVideo:()=>er,canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED:()=>en,canViewFolder_DEPRECATED:()=>D,canViewTeam:()=>F,getExplicitRoleForUserAndFile:()=>N,getPermissionsState:()=>b,getPermissionsStateMemoized:()=>v,getReadOnlyOverrideMessageForFolder:()=>et,getResourceTeamId:()=>T,getRolesForResource:()=>L,hasAdminRoleAccessOnTeam:()=>H,hasEditorRoleAccessOnTeam:()=>G,hasViewerRoleAccessOnTeam:()=>V,isFigJamDisabledForFolder:()=>ee,isFigJamDisabledForOrg:()=>Q,isFileFigjamDisabled:()=>J,isOrgUserExternallyRestrictedFromState:()=>X,isResourceOwner:()=>I,userIsAMemberOfAnOrg:()=>q});var a=n(144374),i=n(885123),o=n(841962),s=n(866415),l=n(62244),c=n(76265),d=n(643225),u=n(314540),m=n(782125),p=n(313449),h=n(82497),_=n(496203),g=n(331850),f=n(305216);function E(e,r,n,a,i,o,s,l,c,d,u,m,p,h,_){return{currentUserOrgId:e,user:r,fileByKey:n,repos:a,folders:i,teams:o,roles:s,orgById:l,orgUsersByOrgId:c,teamUserByTeamId:d,userEduGracePeriods:u,licenseGroups:m,orgTeams:p,openFile:h,currentTeamId:_}}let y=(0,s.xx)(E);function b(e){return E(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function v(e){return y(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function T(e,r){switch(e.resource_type){case u.vt.FILE:let n=r.fileByKey[e.resource_id_or_key];return n&&n.team_id;case u.vt.FILE_REPO:let a=r.repos[e.resource_id_or_key],i=r.folders[a?.folder_id];return i?.team_id??null;case u.vt.FOLDER:let o=r.folders[e.resource_id_or_key];return o?.team_id??null;case u.vt.TEAM:return e.resource_id_or_key}}function I(e,r,n,a){let i=function(e,r){switch(r){case u.vt.FILE:return e.byFileKey;case u.vt.FILE_REPO:return e.byRepoId;case u.vt.FOLDER:return e.byFolderId;case u.vt.TEAM:return e.byTeamId}}(a,n)[r];return!!i&&e in i&&i[e].level===g.e6.OWNER}function S(e,r){for(let n of e)if(n.level>=r)return!0;return!1}function w(e,r){let n=r.user?.id,a=r.roles;return e in a.byTeamId&&n&&n in a.byTeamId[e]?[a.byTeamId[e][n]]:[]}function A(e,r){let n=r.user&&r.user.id,a=[],i=r.roles;e in i.byFolderId&&n&&n in i.byFolderId[e]&&a.push(i.byFolderId[e][n]);let o=r.folders[e];return o&&o.team_id&&!o.is_invite_only&&(a=a.concat(w(o.team_id,r))),a}function C(e,r){let n=r.user&&r.user.id,a=r.roles,i=[];e in a.byRepoId&&n&&n in a.byRepoId[e]&&i.push(a.byRepoId[e][n]);let o=r.repos[e];return o&&(i=[...i,...A(o.folder_id,r)]),i}function N(e,r){let n=r.user&&r.user.id,a=r.roles;return e in a.byFileKey&&n&&n in a.byFileKey[e]?a.byFileKey[e][n]:null}function L(e,r,n){switch(e){case u.vt.FILE:return function(e,r){let n=[],a=N(e,r);null!==a&&n.push(a);let i=r.fileByKey[e];return i&&i.folder_id&&(n=n.concat(A(i.folder_id,r))),i&&i.file_repo_id&&(n=[...n,...C(i.file_repo_id,r)]),n}(r,n);case u.vt.FILE_REPO:return C(r,n);case u.vt.FOLDER:return A(r,n);case u.vt.TEAM:return w(r,n)}}function O(e,r,n){let a=(0,h._)(e,n);if(!a)return!1;let i=n.user?.id,s=a.org_id,l=(0,o.kc)().sc_open_team_deprecation,c=a.sharing_audience_control;if(s){let o=!l&&r<=g.e6.EDITOR&&$(s,n)&&a.org_access===u.bU.PUBLIC&&a.default_permission===u.sC.EDIT,d=S(w(e,n),r),m=r<=g.e6.ADMIN&&(d||Z(a,n,i)),p=!l&&r<=g.e6.VIEWER&&$(s,n)&&a.org_access===u.bU.PUBLIC,h=$(s,n)&&(r<=g.e6.VIEWER&&c===u.PQ.ORG_VIEW||r<=g.e6.EDITOR&&c===u.PQ.ORG_EDIT);return(m||p||d||o||h)&&Y(s,n)}return R(e,r,n)}function R(e,r,n){return S(w(e,n),r)&&!function(e,r,n){if(n.user&&!(0,l.cn)(n.user))return!1;let a=(0,h._)(e,n);if(!a)return!1;let i=!!n.user&&(0,l.GU)(n.userEduGracePeriods,(0,l.cn)(n.user),a.id,a.student_team).showAccessRestricted;return r>g.e6.VIEWER&&i}(e,r,n)}function P(e,r,n){let a;let i=n.user&&n.user.id,s=n.folders[e];if(!i||!s)return!1;let l=(0,d.oq)(s.id,n);if(l&&!Y(l,n))return!1;let c=s.team_id&&n.teams[s.team_id],m=(0,o.kc)().sc_open_team_deprecation,p=s.sharing_audience_control;if(!m&&l&&$(l,n)&&r<=g.e6.VIEWER&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only||!m&&l&&$(l,n)&&r<=g.e6.EDITOR&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only&&!s.is_view_only&&c.default_permission===u.sC.EDIT||l&&$(l,n)&&(r<=g.e6.EDITOR&&p===u.PQ.ORG_EDIT||r<=g.e6.VIEWER&&p===u.PQ.ORG_VIEW))return!0;let h=A(e,n);return(h.forEach(e=>{e.resource_type===u.vt.FOLDER&&(a=e)}),!s.team_id||s.is_invite_only||s.is_view_only&&r>=g.e6.EDITOR)?!!a&&a.level>=r:S(h,r)}function D(e,r){return P(e,g.e6.VIEWER,r)}function k(e,r){return P(e,g.e6.EDITOR,r)}function M(e,r){return P(e,g.e6.OWNER,r)}function F(e,r){return O(e,g.e6.VIEWER,r)}function x(e,r){return O(e,g.e6.EDITOR,r)}function U(e,r){return O(e,g.e6.ADMIN,r)}function B(e,r){return O(e,g.e6.OWNER,r)}function V(e,r){return R(e,g.e6.VIEWER,r)}function G(e,r){return R(e,g.e6.EDITOR,r)}function H(e,r){return R(e,g.e6.ADMIN,r)}function W(e,r){return e.level!==g.e6.OWNER&&(e.level===g.e6.ADMIN?U(e.resource_id_or_key,r):x(e.resource_id_or_key,r))}function K(e,r,n){return n?e.orgUsersByOrgId[r]?.[n]??(0,a.J)(e,"org_user",r):null}function Y(e,r){let n=r.user;if(!e||!n)return!1;let i=r.orgById[e]??(0,a.J)(r,"org",e);return z(K(r,e,n.id),i,_.jh.GUEST)}function $(e,r,n){if(!e)return!1;n=n||r.user?.id;let i=r.orgById[e]??(0,a.J)(r,"org",e);return z(K(r,e,n),i,_.jh.MEMBER)}function j(e,r,n){if(!e)return!1;let i=r.orgById[e]??(0,a.J)(r,"org",e);return n=n||r.user?.id,z(K(r,e,n),i,_.jh.ADMIN)}function z(e,r,n){return!!r&&!!e&&(0,f.Ay)(e.permission)>=n}function q(e,r){return(0,m.x9)(e.orgUsersByOrgId,r).some(n=>$(n.org_id,e,r))}function Z(e,r,n){return e.org_access!==u.bU.SECRET&&function(e,r,n){if(!(n=n||r.user?.id)||!e||!r.currentUserOrgId)return!1;let i=r.currentUserOrgId&&r.user&&r.orgUsersByOrgId[r.currentUserOrgId]?r.orgUsersByOrgId[r.currentUserOrgId][n]:null;null===i&&(i=(0,a.J)(r,"org_user",r.currentUserOrgId));let o=(0,h._)(e,r);if(!o||!i||r.currentUserOrgId!==o.org_id)return!1;if(H(e,r))return!0;let s=j(r.currentUserOrgId,r,n);return o.org_access!==u.bU.SECRET&&(s||!!(o.workspace_id&&function(e,r,n){n=n||r.user?.id;let a=r.currentUserOrgId;return!!(e&&n&&a&&r.orgUsersByOrgId?.[a]?.[n].workspace_users?.find(r=>r.permission===u.bp.ADMIN&&r.workspace_id===e))}(o.workspace_id,r,n)))}(e.id,r,n)}function X(e){return(0,f.R$)(e.user,e.currentUserOrgId)}function J(e,r){return"whiteboard"===e.editorType&&!!e.parentOrgId&&!!r.orgById[e.parentOrgId]?.figjam_disabled_at}function Q(e,r){return!!e&&!!r.orgById[e]?.figjam_disabled_at}function ee(e,r){return Q((0,d.oq)(e.id,r)||null,r)}function et(e,r){if(e.level!==g.e6.VIEWER&&e.level!==g.e6.VIEW_PROTOTYPES)return null;let n=r.folders[e.resource_id_or_key];if(!n)return null;let a=e.user_id&&n.team_id&&r.roles.byTeamId[n.team_id]&&r.roles.byTeamId[n.team_id][e.user_id],i=!n.is_invite_only&&!n.is_view_only;return a&&a.level>g.e6.VIEWER&&i?(0,c.t)("permissions.can_still_edit_team_project_is_in"):null}function er(e,r){return!!e&&!!e.canEdit&&(e.team?(0,p.w5)(e.teamId?r.teams[e.teamId]:void 0):!!e.parentOrgId)}function en(){if(void 0===i.D)return!1;let e=i.D.getState(),r=b(e);return er(e.openFile,r)}},940795:(e,r,n)=>{n.d(r,{$g:()=>V,A8:()=>J,FR:()=>Y,Mg:()=>ee,NN:()=>U,NP:()=>M,ST:()=>N,Tn:()=>K,UP:()=>B,Xd:()=>P,b_:()=>F,bv:()=>H,dh:()=>k,gI:()=>W,hk:()=>x,j_:()=>et,nW:()=>$,rC:()=>R,rs:()=>D,tJ:()=>O,u3:()=>G,wb:()=>j,wt:()=>Q,wy:()=>C,yN:()=>L});var a=n(411855),i=n(188507),o=n(846288),s=n(48451),l=n(236891),c=n(777535),d=n(875877),u=n(139879),m=n(736942),p=n(703079),h=n(550479),_=n(238311),g=n(140835),f=n(661137),E=n(314540),y=n(782125),b=n(597185),v=n(313449),T=n(689102),I=n(143037);let S=new Map;function w(e,r,n={}){let a=[e,n.component,n.attribute,n.model].join("__________");S.has(a)||(c.az.trackDefinedEvent(e,r),S.set(a,!0))}function A(e,r,n){if(!n){window.__jestConfig__?.rolloutFlags&&(n="cutover");let a=(0,_.gP)(e);(n=a?.get(r||"group_default",void 0))||(n="passthrough")}return n}function C(e){let{name:r}=(0,g.j6)(),n=A("tou_current_plan_user_migrator_config",e.migrationGroup,e.phase),c=a.useRef(!1),u="shadowread"===n||"cutover"===n,h=(0,i.d4)(e=>{let r=e.user?.id;return r?e.teamUserByTeamId?.[T.ZT(e)]?.[r]??null:null}),_=(0,i.d4)(e=>(0,y.xw)(e)),f=(0,d.useAtomValue)((0,I.gq)(u))??m.Qw.loaded(null),E="loaded"===f.status?f.data:null;(0,p.I)(u&&"loaded"===f.status,n=>{w("plans.current_plan_user_lg_load_timing",{model:"planUser",type:E?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"})});let b=e.legacy(h??null,_??null);if("passthrough"===n)return b;let v=e.migrated(E);switch("shadowread"===n&&!c.current&&((0,l.Vq)(h)||(0,l.Vq)(_))&&"loaded"===f.status&&!(0,s.c2)(b,v)&&(w("plans.current_plan_user_view_shadow_error",{type:E?.key.type??"",component:e.component,attribute:e.attribute,phase:n,migrationGroup:e.migrationGroup,legacyValue:JSON.stringify(b),migratedValue:JSON.stringify(v),trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"}),c.current=!0),n){case"shadowread":return b;case"cutover":return v;default:(0,o.xb)(n)}}function N(e){let{name:r}=(0,g.j6)(),n=A("tou_lg_migrator_config",e.migrationGroup,e.phase),i="[LG] "+e.component,l="[LG] "+e.attribute,c=a.useRef(!1),d="shadowread"===n||"cutover"===n,u="loaded"===e.lgQuery.status?e.lgQuery.data:null;(0,p.I)(d&&"loaded"===e.lgQuery.status,n=>{w("plans.current_plan_user_lg_load_timing",{model:"planUser",type:"",duration:n,component:i,attribute:l,migrationGroup:e.migrationGroup,trackingContext:r},{component:i,attribute:l,model:"planUser"})});let m=e.legacy(u);if("passthrough"===n)return m;let h=e.migrated(u);switch("shadowread"!==n&&"cutover"!==n||c.current||"loaded"!==e.lgQuery.status||(0,s.c2)(m,h)||(w("plans.current_plan_user_view_shadow_error",{type:"",component:i,attribute:l,phase:n,migrationGroup:e.migrationGroup,legacyValue:JSON.stringify(m),migratedValue:JSON.stringify(h),trackingContext:r},{component:i,attribute:l,model:"planUser"}),c.current=!0),n){case"shadowread":return m;case"cutover":return h;default:(0,o.xb)(n)}}function L(e){let{name:r}=(0,g.j6)(),n=A("tou_current_user_plan_migrator_config",e.migrationGroup,e.phase),i=a.useRef(!1),c="shadowread"===n||"cutover"===n,u=(0,T.ol)(),h=(0,f.sZ)(),_=(0,d.useAtomValue)((0,I.rQ)(c))??m.Qw.loaded(null),E=(0,d.useAtomValue)((0,I.Oh)(c))??m.Qw.loaded(null),y="loaded"===_.status?_.data:null,b="loaded"===E.status?E.data:null;(0,p.I)(c&&"loaded"===_.status,n=>{w("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:y?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planPublicInfo"})}),(0,p.I)(c&&"loaded"===E.status,n=>{w("plans.current_plan_lg_load_timing",{model:"plan",type:b?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"plan"})});let v=e.legacy(u??null,h??null);if("passthrough"===n)return v;let S=e.migrated(y,b);switch(("shadowread"===n||"cutover"===n)&&!i.current&&((0,l.Vq)(u)||(0,l.Vq)(h))&&"loaded"===_.status&&!(0,s.c2)(v,S)&&(w("plans.current_plan_view_shadow_error",{type:y?.key.type??"",component:e.component,attribute:e.attribute,phase:n,legacyValue:JSON.stringify(v),migratedValue:JSON.stringify(S),migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute}),i.current=!0),n){case"shadowread":return v;case"cutover":return S;default:(0,o.xb)(n)}}function O(){return(0,d.useAtomValue)((0,I.Oh)(!0))}function R({reportErrorsToTeam:e}){let r=O(),[n]=(0,u.mI)(r);if("loaded"!==n.status){let r=Error("disabled"===n.status?"Plan fetching disabled":"Error fetching plan");throw(0,h.$D)(e,r),r}let a=n.data;if(!a){let r=Error("No Plan found");throw(0,h.$D)(e,r),r}return a}function P(){return(0,d.useAtomValue)((0,I.gq)(!0))}function D(){return(0,d.useAtomValue)((0,I.rQ)(!0))}function k(e){return L({...e,attribute:"planName",legacy:(e,r)=>r?.name||e?.name,migrated:(e,r)=>r?.name})}function M(e){return L({...e,attribute:"teamPlanId",legacy:(e,r)=>e?.org_id?void 0:e?.id,migrated:e=>{if(e?.key.type===E.OL.TEAM)return e?.key.parentId??void 0}})}function F(e){return L({...e,attribute:"orgId",legacy:(e,r)=>r?.id,migrated:e=>{if(e?.key.type===E.OL.ORG)return e?.key.parentId??void 0}})}function x(e){return L({...e,attribute:"planParentId",legacy:(e,r)=>r?.id??e?.id,migrated:e=>e?.key.parentId??void 0})}function U(e){return C({...e,attribute:"currentOrgUserUserId",legacy:(e,r)=>r?.user_id,migrated:z})}function B(e){return L({...e,attribute:"planType",legacy:(e,r)=>r?E.OL.ORG:e?E.OL.TEAM:void 0,migrated:e=>e?.key.type})}function V(e){return L({...e,attribute:"hasPlan",legacy:(e,r)=>!!e&&!r,migrated:e=>e?.key.type===E.OL.TEAM})}function G(e){return L({...e,attribute:"hasPlan",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===E.OL.ORG})}function H(e){let r=B(e);return L({...e,attribute:"hasPlanUser",legacy:(e,n)=>{switch(r){case E.OL.ORG:return!!n;case E.OL.TEAM:return!!e;default:return!1}},migrated:e=>!!r&&!!e})}function W(e){return C({...e,attribute:"isOrgAdmin",legacy:(e,r)=>r?.permission===E._D.ADMIN,migrated:q})}function K(e){return C({...e,attribute:"isOrgGuest",legacy:(e,r)=>r?.permission===E._D.GUEST,migrated:X})}function Y(e){return L({...e,attribute:"isProTeam",legacy:e=>(0,v.w5)(e)&&!e?.org_id,migrated:e=>!!e&&[E.Ag.PRO,E.Ag.STUDENT].includes(e.tier)})}function $(e){return L({...e,attribute:"isStudentTeam",legacy:e=>!!e?.student_team,migrated:e=>e?.tier===E.Ag.STUDENT})}function j(e){return L({...e,attribute:"isEnterprise",legacy:(e,r)=>(0,b.kA)(r),migrated:e=>e?.tier===E.Ag.ENTERPRISE})}function z(e){return e?.key?.parentId??void 0}function q(e){return e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.ADMIN}function Z(e){return e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.MEMBER}function X(e){return e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.GUEST}function J(e,r){switch(r){case E.Xn.ADMIN:return q(e);case E.Xn.MEMBER:return Z(e)||q(e);case E.Xn.GUEST:return X(e)||Z(e)||q(e);default:(0,o.xb)(r)}}function Q(){return q(P().unwrapOr(null))}function ee(){let e=P().unwrapOr(null);return e?.permission===E.Xn.ADMIN}function et(){let e=P();return a.useMemo(()=>e.transform(e=>J(e,E.Xn.ADMIN)),[e])}},704573:(e,r,n)=>{n.d(r,{LC:()=>l,OL:()=>i.OL,i5:()=>s,s$:()=>o});var a=n(338584),i=n(314540),o=(e=>(e.DISABLE_FIGJAM="disable_figjam",e.DISABLE_WORKSHOP="disable_workshop",e.VOICE="voice",e.DISABLE_AI_FEATURES="disable_ai_features",e))(o||{}),s=(e=>(e.ELIGIBLE="eligible",e.UPSELL="upsell",e.INELIGIBLE="ineligible",e))(s||{}),l=(e=>(e.ENABLED="enabled",e.DISABLED="disabled",e))(l||{});let c=a.object({supports:a.nativeEnum(s),enabled:a.nativeEnum(l)});a.object({disable_figjam:c,voice:c,disable_workshop:c,disable_ai_features:c})},489102:(e,r,n)=>{n.d(r,{Ef:()=>m,HT:()=>d,RB:()=>u});var a=n(846288);n(538971),n(190253);var i=n(314540),o=n(704573);let s={[o.s$.VOICE]:{environments:{gov:o.i5.INELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.ELIGIBLE,[i.Ag.STUDENT]:o.i5.ELIGIBLE,[i.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_WORKSHOP]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.UPSELL,[i.Ag.STUDENT]:o.i5.UPSELL,[i.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_FIGJAM]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.UPSELL,[i.Ag.STUDENT]:o.i5.UPSELL,[i.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_AI_FEATURES]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.ELIGIBLE,[i.Ag.STUDENT]:o.i5.ELIGIBLE,[i.Ag.STARTER]:o.i5.ELIGIBLE}}};function l(e,r,n=window.INITIAL_OPTIONS.cluster_name){return"gov"===n&&s[r].environments.gov?s[r].environments.gov:e&&s[r]?.tiers[e.tier]?s[r].tiers[e.tier]:o.i5.INELIGIBLE}function c(e,r,n=window.INITIAL_OPTIONS.cluster_name){if(l(e,r,n)===o.i5.INELIGIBLE||!e)return o.LC.DISABLED;let i=l(e,r,n);switch(r){case o.s$.VOICE:if(i===o.i5.ELIGIBLE)return e.voiceEnabled?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;case o.s$.DISABLE_FIGJAM:if(i===o.i5.ELIGIBLE)return e.figjamDisabledAt?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;case o.s$.DISABLE_WORKSHOP:if(i===o.i5.ELIGIBLE)return e.workshopEnabled?o.LC.DISABLED:o.LC.ENABLED;return o.LC.DISABLED;case o.s$.DISABLE_AI_FEATURES:if(i===o.i5.ELIGIBLE)return e.aiFeaturesEnabled?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;default:(0,a.xb)(r,"Unknown plan feature")}}function d(e){return{...e,voice:{supports:l(e,o.s$.VOICE),enabled:c(e,o.s$.VOICE)},disable_figjam:{supports:l(e,o.s$.DISABLE_FIGJAM),enabled:c(e,o.s$.DISABLE_FIGJAM)},disable_workshop:{supports:l(e,o.s$.DISABLE_WORKSHOP),enabled:c(e,o.s$.DISABLE_WORKSHOP)},disable_ai_features:{supports:l(e,o.s$.DISABLE_AI_FEATURES),enabled:c(e,o.s$.DISABLE_AI_FEATURES)}}}function u(e,r){switch(e){case i.OL.TEAM:return r.team;case i.OL.ORG:return r.org;default:(0,a.xb)(e)}}function m(e,r){return{...u(e,r),planType:e}}},736918:(e,r,n)=>{let a;n.d(r,{$y:()=>Z,BT:()=>j,B_:()=>eI,Bs:()=>Q,Cu:()=>em,G1:()=>el,H4:()=>eS,I2:()=>M,IM:()=>ei,It:()=>eP,KB:()=>D,LL:()=>C,ME:()=>eE,Mw:()=>W,OD:()=>ep,Q4:()=>U,Ql:()=>V,Qx:()=>eo,Rp:()=>x,Sf:()=>R,Sx:()=>en,Ty:()=>k,VM:()=>B,Vb:()=>ee,W5:()=>F,Xx:()=>L,_C:()=>X,b_:()=>K,cI:()=>O,d1:()=>a,dG:()=>eR,dM:()=>et,f$:()=>eu,f2:()=>er,fS:()=>eO,fd:()=>$,hY:()=>eT,i1:()=>q,iP:()=>Y,jG:()=>eL,jS:()=>G,n4:()=>ef,nf:()=>J,o5:()=>ed,oZ:()=>es,po:()=>P,q$:()=>z,qC:()=>ek,sd:()=>ea,wk:()=>N,xi:()=>A});var i=n(511445),o=n(217950),s=n(805014),l=n(414796),c=n(245954),d=n(550479),u=n(695638);let m=[],p=[],h=[],_=[],g=[],f=[],E=[],y=[],b=[],v=[],T=[],I=[],S=null,w=new class{constructor(){this.task=null,this.eventByGuid=new Map,this.styleEventByGuid=new Map,this.nodeEventByGuid=new Map,this.timeOutMs=100,this.flush=()=>{let e=[];for(let r of this.eventByGuid.values())if("NONE"!==r.nodeType)for(let n of r.events)e.push(this.injectTypeIntoEvent(r,n));for(let r of g)r(e);let r=[];for(let e of this.styleEventByGuid.values())if("NONE"!==e.nodeType)for(let n of e.events)r.push(n);for(let e of f)e(r);let n=[];for(let e of this.nodeEventByGuid.values())if("NONE"!==e.nodeType)for(let r of e.events)n.push({...r,nodeType:e.nodeType});for(let e of E)e(n);this.eventByGuid.clear(),this.styleEventByGuid.clear(),this.nodeEventByGuid.clear(),this.task=null}}onEventFired(e){null==this.task&&(this.task=scheduler.postTask(this.flush,{delay:this.timeOutMs,priority:"user-visible"}));let r=this.eventByGuid.get(e.id)??{nodeType:this.publicNodeTypeFromEvent(e),events:[]};if(!r)return;"NONE"===r.nodeType&&(r.nodeType=this.publicNodeTypeFromEvent(e));let n=r.events.find(r=>r.type===e.type&&r.origin===e.origin);if(n)for(let r of e.properties)n.properties.add(r);else{let n=(0,c.UN)().get(e.id);n&&(e.type===s.iIc.STYLE_PROPERTY_CHANGE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_DELETE?n.styleKeyForPublish&&r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),styleKey:(0,l.nM)({key:n.styleKeyForPublish,version:n.styleVersionHash})}):r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),devFriendlyId:(0,c.UN)().developerFriendlyIdFromGuid(e.id),oldContainingCanvas:e.oldContainingCanvas}))}this.eventByGuid.set(e.id,r);let a=(0,c.UN)().get(e.id);if(a){if(a.styleKeyForPublish){let n=r.events.filter(e=>e.type===s.iIc.STYLE_DELETE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_PROPERTY_CHANGE);this.styleEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}else{let n=r.events.filter(e=>e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE||e.type===s.iIc.DELETE).map(e=>{let r="";return e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE?r=a.containingCanvas||"":e.type===s.iIc.DELETE&&(r=e.oldContainingCanvas?.toString()||""),""===r&&(0,d.$D)(o.e.EXTENSIBILITY,Error("Containing canvas for nodechange event is empty")),{...e,containingCanvas:r}});this.nodeEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}}}publicNodeTypeFromEvent(e){let r=(0,c.UN)().get(e.id);return r&&r?.type!=="NONE"?(0,u.w)(r):"NONE"}injectTypeIntoEvent(e,r){return r.type===s.iIc.CREATE||r.type===s.iIc.DELETE||r.type===s.iIc.PROPERTY_CHANGE?{...r,nodeType:e.nodeType}:r}};function A(){a={selectionChange(e){for(let r of m)e?r.boxSelection():r.normal()},boxSelectionEnded(){for(let e of m)e.boxSelection.flush()},currentPageChange(){for(let e of p)e()},timerChange(e){for(let r of h)r(e)},documentChange(e){w.onEventFired(e)},codegenPreferencesChange(e){for(let r of y)r(e)},slidesViewChange(e){for(let r of b)r({view:e})},stackInvariantsEnforced(e){eD?.(e)},pluginPageLoaded(e){for(let r of v)r(e)},pluginAccessibleNodeIds(){let e=new Set;for(let r of T)r().forEach(r=>e.add(r));return Array.from(e)},pluginAccessiblePages(){let e=new Set;for(let r of I)r().forEach(r=>e.add(r));return Array.from(e)}}}function C(e){m.push({normal:e,boxSelection:(0,i.s)(e,500)})}function N(e){m=m.filter(r=>r.normal!==e||(r.boxSelection.cancel(),!1))}function L(e){p.push(e)}function O(e){p=p.filter(r=>r!==e)}function R(e){h.push(e)}function P(e){h=h.filter(r=>r!==e)}function D(e){_.push(e)}function k(e){_=_.filter(r=>r!==e)}function M(e){for(let r of _)if(!1===r(e))return!1;return!0}function F(e){v.push(e)}function x(e){v=v.filter(r=>r!==e)}function U(e){T.push(e)}function B(e){T=T.filter(r=>r!==e)}function V(e){I.push(e)}function G(e){I=I.filter(r=>r!==e)}function H(){g.length||f.length||E.length?s.NfO.setIsDocumentChangeCallbackRegistered(!0):s.NfO.setIsDocumentChangeCallbackRegistered(!1)}function W(e){g.push(e),H()}function K(e){g=g.filter(r=>r!==e),H()}function Y(e){f.push(e),H()}function $(e){f=f.filter(r=>r!==e),H()}function j(e){E.push(e),H()}function z(e){E=E.filter(r=>r!==e),H()}function q(e){y.push(e)}function Z(e){y=y.filter(r=>r!==e)}function X(e){b.push(e),H()}function J(e){b=b.filter(r=>r!==e),H()}let{set:Q,remove:ee,has:et,runOrTimeout:er}=eM(),{set:en,remove:ea,has:ei,run:eo}=eM(),{set:es,remove:el,has:ec,run:ed,reset:eu,runOrTimeout:em}=eM(),{set:ep,remove:eh,has:e_,run:eg,reset:ef}=eM(),{set:eE,remove:ey,has:eb,run:ev,reset:eT}=eM(),{set:eI,remove:eS,has:ew,run:eA,reset:eC,runOrTimeout:eN}=eM();function eL(e){S=e}function eO(){return!!S}function eR(){S=null}async function eP(){return!S||await S()}let eD=null;function ek(e){return eD=e,()=>eD=null}function eM(){let e;let r=new Promise(r=>{e=r}),n=null,a=()=>{r=new Promise(r=>{e=r}),n=null},i=async(...e)=>{let n=await r;return await n(...e)};return{set:r=>{n=r,e(r)},remove:e=>{e===n&&a()},has:()=>!!n,run:i,runOrTimeout:async(e,...r)=>{let n=!1,a=new Promise(r=>{setTimeout(()=>{n=!0,r()},e)}),o=await Promise.race([i(...r),a]);return n?{didRun:!1}:{didRun:!0,returnValue:o}},reset:a}}},263352:(e,r,n)=>{n.d(r,{$H:()=>eQ,$u:()=>tg,AG:()=>ta,Ar:()=>eS,Bw:()=>e5,CA:()=>ed,CB:()=>eN,DM:()=>t_,Df:()=>ee,EK:()=>ei,EY:()=>ex,GX:()=>J,Gc:()=>e1,JT:()=>e2,K$:()=>en,L1:()=>ej,L8:()=>e4,LW:()=>tm,M5:()=>e9,MB:()=>eg,MH:()=>e0,Mi:()=>e7,Ms:()=>ep,NW:()=>tn,Oe:()=>ef,Pl:()=>es,Pz:()=>et,Q4:()=>eF,Qt:()=>eP,Qx:()=>eA,Rd:()=>eR,Rt:()=>ek,Ru:()=>tr,SW:()=>eX,Sb:()=>er,T:()=>ea,Th:()=>th,Tk:()=>eL,UH:()=>te,VQ:()=>tf,W4:()=>tl,WC:()=>e3,YG:()=>tc,YQ:()=>tE,ZB:()=>eJ,ZT:()=>eU,_H:()=>e6,_V:()=>tu,_w:()=>eD,c2:()=>q,fR:()=>e8,i8:()=>eZ,ky:()=>eM,lT:()=>eb,mI:()=>ez,mm:()=>eh,mx:()=>tp,my:()=>eO,nW:()=>eH,nf:()=>eq,oD:()=>eG,ou:()=>eK,pk:()=>tt,qH:()=>eu,t3:()=>e_,tH:()=>e$,u0:()=>eY,uF:()=>ew,vj:()=>eV,wf:()=>eB,xC:()=>ti}),n(661743);var a=n(188507),i=n(834825),o=n(846288),s=n(217950),l=n(895925),c=n(538971),d=n(885123),u=n(841962),m=n(747484),p=n(801828),h=n(550479),_=n(653798),g=n(972142),f=n(399991),E=n(697737),y=n(76265),b=n(553362),v=n(864986),T=n(419378),I=n(66683),S=n(73878),w=n(468847),A=n(366172);n(923219);var C=n(136716),N=n(314540),L=n(305216),O=n(426256),R=n(567155),P=n(914077),D=n(754430),k=n(404469),M=n(7395),F=n(567095),x=n(580489),U=n(98751),B=n(144598),V=n(932881),G=n(150898),H=n(738402),W=n(968525),K=n(613611),Y=n(180704),$=n(985814),j=n(55591),z=n(733050);async function q(e,{ignoreMissingEditorType:r,resourceType:n,isPublishing:a}){let i=await e_(e,{resourceType:n});if(r&&i.error?.text===el)return i.manifest;if(i.error)throw Error((0,M.am)(i.error));return i.manifest}function Z({parameters:e,parameterOnly:r},n){if(e&&function(e,r){if(!e.length)throw Error(`Expected "${r}.parameters" to have non-empty parameter list.`);let n=new Set;e.forEach(e=>{if(n.has(e.key))throw Error(`Expected "${r}.parameters" to have unique keys, but got more than one parameter with key: "${e.key}"`);n.add(e.key)});let a=!1;for(let{key:r,optional:n}of e){if(a&&!n)throw Error(`Optional parameters must be listed last in the parameter list. ${r} not marked as optional.`);n&&(a=!0)}}(e,n),r&&!e)throw Error(`Expected parameters to be defined for "${n}" marked as parameterOnly.`)}let X={[P.nT.Design]:M.FW.FIGMA,[P.nT.DevHandoff]:M.FW.DEV,[P.nT.Whiteboard]:M.FW.FIGJAM,[P.nT.Slides]:M.FW.SLIDES,[P.nT.Sites]:M.FW.SITES,[P.nT.Cooper]:M.FW.FIGMA,[P.nT.Illustration]:M.FW.FIGMA};function J(e){return X[e]}let Q={[M.FW.FIGMA]:P.nT.Design,[M.FW.DEV]:P.nT.DevHandoff,[M.FW.INSPECT]:P.nT.DevHandoff,[M.FW.FIGJAM]:P.nT.Whiteboard,[M.FW.SLIDES]:P.nT.Slides,[M.FW.SITES]:P.nT.Sites};function ee(e){return Q[e]}function et(e){switch(e){case M.FW.FIGMA:case M.FW.DEV:case M.FW.INSPECT:return N._Y.DESIGN;case M.FW.FIGJAM:return N._Y.WHITEBOARD;case M.FW.SLIDES:return N._Y.SLIDES;case M.FW.SITES:return N._Y.SITES;default:(0,o.xb)(e)}}function er(e){switch(e){case M.FW.FIGMA:return F.$A.Design;case M.FW.FIGJAM:return F.$A.FigJam;case M.FW.DEV:case M.FW.INSPECT:return F.$A.Handoff;case M.FW.SLIDES:return F.$A.Slides;case M.FW.SITES:return F.$A.Design;default:(0,o.xb)(e)}}function en(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view?X[e.selectedView.editorType]:void 0)}function ea(){let e=d.D.getState().selectedView;if("fullscreen"===e.view)return X[e.editorType]}function ei(e,r){return Array.isArray(r)?r.includes(e):e===M.FW.FIGMA}class eo extends Error{constructor(e,r){super(e),this.message=e,this.manifest=r}}function es(){return el}let el='Missing editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]';function ec(e,r){let n=new Set(M.UX);return e.filter(e=>!n.has(e)||r?.has(e))}function ed(e){return M.Kd.some(r=>e.includes(r))}class eu{constructor(e,r){this.permissions=e,this.trustedPluginOrigin=r}static none(){return new eu([],void 0)}static forTest(e){return new eu(e||M.XS,void 0)}static forConsoleGlobal(){let e=[...M.pR];return(0,u.kc)().first_draft_debug&&e.push("firstdraft"),new eu(e,void 0)}static forFirstPartyPlugin(){return new eu(M.XS,void 0)}static forLocalPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for local plugin",{pluginID:e.manifest.id,requestedPermissions:r}),(0,u.kc)().plugins_internal_apis)return new eu(r,"*");let n=ec(r);return n.length<r.length&&(0,h.$D)(s.e.EXTENSIBILITY,Error("Untrusted local plugin denied internal api permissions")),new eu(n,void 0)}static forInstalledPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for installed plugin",{pluginID:e.plugin_id,requestedPermissions:r}),(0,O.eZ)(e.plugin_id))return new eu(ec(r,(0,O.xp)(e.plugin_id)),(0,O.HB)(e.plugin_id));let n=ec(r);return n.length<r.length&&(0,h.$D)(s.e.UNOWNED,Error("Untrusted installed plugin denied internal api permissions")),new eu(n,void 0)}}function em(e){try{return new URLPattern(e)}catch(e){return null}}function ep(e,r){let n=[],a=0;for(let[i,o]of r)n.push(e.substring(a,i)),a=o;return n.push(e.substring(a,e.length)),n.join("")}function eh(e,r,n){var a,i,o;let s,l,c,d,u;let m="widget"===n.resourceType||!!r.cachedContainsWidget;if("error"in r)l={type:M.ho.LOAD,text:r.error};else try{c=JSON.parse(r.manifest)}catch(e){l={type:M.ho.PARSE,text:e.message}}if("unknown"===n.resourceType){if(c)m=c.containsWidget;else if("manifest"in r)try{m=!!/containsWidget/.test(r.manifest)}catch{}}if(c){try{(0,B.MG)(c.editorType,x.ib,"manifest.editorType"),d=c.editorType}catch{}try{(0,B.MG)(c.capabilities,x.hb,"manifest.capabilities"),u=c.capabilities}catch{}}let p=(0,z.M)();if("manifest"in r&&p?.updateCachedContainsWidget({id:e,cachedContainsWidget:m}),!l)try{s=function(e,r){try{(0,B.MG)(e,"widget"===r.resourceType?x.Vf:x._O,"manifest")}catch(e){if(e instanceof Error)throw Error(function(e){let r="but got additional property",n=e.lastIndexOf(r);if(-1!==n){let a=e.substring(n+r.length).replace(/"/g,"").trim();return`Manifest has unexpected extra property: ${a}`}return e}(e.message));throw e}if("plugin"===r.resourceType){if(e.relaunchButtons){let r=new Set;e.relaunchButtons.forEach(n=>{if(r.has(n.command))throw new eo(`Expected "manifest.relaunchButtons" to have unique commands, but got more than one button with command: "${n.command}"`,e);r.add(n.command)})}!function(e){if(Z(e,"manifest"),e.menu){if(e.parameters)throw Error("manifest.parameters should not be specified when menu items are defined");!function e(r){for(let n of r)(0,M.Av)(n)?Z(n,n.name):(0,M.xg)(n)&&e(n.menu)}(e.menu)}}(e)}if(!function(e){if(!("editorType"in e))throw new eo(el,e);if(e.editorType.some(e=>!M.Ye.includes(e))||e.editorType.length<1||e.editorType.length>M.Ye.length)throw Error('Invalid editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]')}(e),!function(e){if(e.permissions){let r=e.permissions.find(e=>!M.XS.includes(e));if(void 0!==r)throw new eo(`Invalid permission specified: ${r}`,e)}}(e),!function(e){if(e.capabilities)for(let r of e.capabilities){if(M.Dk.includes(r)||function(e,r){throw new eo(`Invalid capability specified: ${r}`,e)}(e,r),"panel"===r||"inspect"===r||"codegen"===r||"linkpreview"===r||"vscode"===r){if(!(0,M.Pe)(e.editorType))throw new eo(`Capability "${r}" requires "editorType" to include "dev"`,e);if(e.containsWidget)throw new eo(`Capability "${r}" is not supported for widgets`,e)}if((0,$.T)()&&!e.capabilities.includes("vscode"))throw new eo('Manifest must include "vscode" capability to run in Figma for VS Code Extension',e)}}(e),!function(e){if(!e.capabilities?.includes("codegen")){if(e.codegenLanguages)throw new eo("codegenLanguages only supported for codegen plugins",e);if(e.codegenPreferences)throw new eo("codegenPreferences only supported for codegen plugins",e);return}if(!e.codegenLanguages||0===e.codegenLanguages.length)throw new eo("codegen plugins must define at least one language in codegenLanguages",e);if(!e.codegenPreferences)return;let r=e.codegenLanguages?.map(e=>e.value)??[],n=[],a=new Set;for(let i=0;i<e.codegenPreferences.length;i++){let o=e.codegenPreferences[i];for(let n of o.includedLanguages??[])if(!r.includes(n))throw new eo(`Unknown language "${n}" in codegenPreferences[${i}].includedLanguages`,e);if((0,M.MP)(o)&&n.push(o),(0,M.Wt)(o)){if(a.has(o.propertyName))throw new eo('codegenPreferences "action" itemType settings must have unique propertyName values',e);a.add(o.propertyName)}if((0,M.ZV)(o)){let r=0;if(o.options)for(let e of o.options)e.isDefault&&(r+=1);if(1!==r)throw new eo('codegenPreferences itemType: "select" should have exactly one default option',e)}}if(n.length>1)throw new eo('codegenPreferences should have at most one itemType: "unit"',e)}(e),"widget"===r.resourceType&&e.containsWidget&&(function(e){if(e.widgetApi&&e.editorType?.includes(M.FW.SLIDES))throw new eo("Widgets are not supported in Figma Slides",e)}(e),"1.0.0"!==e.widgetApi))throw new eo("Widgets must specify the 'widgetApi' manifest field. The latest version is '1.0.0'",e);if(e.networkAccess){let r=(0,U.pI)(e.networkAccess);if(!r.isValid)throw new eo(r.validationErr,e)}if(e.relatedLinkDomains){if(!(0,M.Pe)(e.editorType))throw new eo("'relatedLinkDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.relatedLinkDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new eo(`Invalid domain '${r}' in 'relatedLinkDomains'. Domains must start with 'https:// or 'http://'`,e);if(!em(r))throw new eo(`Invalid domain '${r}' in 'relatedLinkDomains'.`,e)}}if(e.devResourceDomains){if(!(0,M.Pe)(e.editorType))throw new eo("'devResourceDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.devResourceDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new eo(`Invalid domain '${r}' in 'devResourceDomains'. Domains must start with 'https:// or 'http://'`,e);if(!em(r))throw new eo(`Invalid domain '${r}' in 'devResourceDomains'.`,e)}}return e}(c,{resourceType:m?"widget":"plugin"})}catch(e){l={type:M.ho.VALIDATE,text:e.message},e.manifest&&(s=e.manifest)}let h=m?(a=d,{...ey,editorType:a||void 0}):(i=d,o=u,{...eE,editorType:i||void 0,capabilities:o||void 0});return{plugin_id:s&&s.id||"",name:function(e,r){if(e)return e.name;if(r.lastKnownName)return r.lastKnownName;if(!r.path)return"Error";{let e=r.path.split(/\/|\\/);return e.length>=2?e[e.length-2]:r.path}}(s,r),manifest:s??h,localFileId:e,localFilePath:r.path,error:l}}async function e_(e,r){let n=(0,z.M)();try{if(!n)throw Error("desktopApp not available");let a=await n.getLocalFileExtensionManifest(e);return eh(e,a,r)}catch(n){return{plugin_id:"",name:"Error",manifest:"widget"===r.resourceType?ey:eE,localFileId:e,localFilePath:"",error:{type:M.ho.LOAD,text:n.message}}}}async function eg(e){let r;let n=(0,z.M)();try{if(!n)throw Error("desktopApp not available");r=await n.getLocalFileExtensionSource(e)}catch(e){throw Error(`Unable to load code: ${e}`)}if(r.buildErrCode)throw Error("Build error: "+r.stderr+"\nPath was: "+r.path);let a=r.source;return r.html&&(a=function(e,r){let n=e=>JSON.stringify(e).split(/(<!--|-->|\bimport)/g).map((e,r)=>1&r?e.slice(0,2)+'"+"'+e.slice(2):e).join("");if("string"==typeof r)return`const __html__ = ${n(r)};${e}`;let a=Object.entries(r).map(([e,r])=>`[${n(e)}]:${n(r)}`).join(",");return`const __uiFiles__ = {${a}};${e}`}(a,r.html)),a}function ef(e){return e.error?.text===el?e.name:`${e.error?`\u26A0  `:""}${e.name}`}let eE={id:"",name:"",api:"",main:""},ey={id:"",name:"",api:"",main:"",containsWidget:!0,widgetApi:""},eb={id:"",plugin_id:"",manifest:{...eE},name:"",version:"",release_notes:"",installed_by:"user",description:"",tagline:"",creator_policy:"",created_at:"",redirect_icon_url:"",redirect_cover_image_url:"",redirect_code_url:"",is_private:!1,playground_fig_file_key:null},ev={id:"",publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:D.o1.USER,badges:[],description:""},creator:{id:"",handle:"",img_url:""},category_id:null,versions:{},install_count:0,unique_run_count:0,view_count:0,like_count:0,comment_count:0,unpublished_at:null,current_plugin_version_id:"",roles:{},realtime_token:"",support_contact:"",created_at:"",org_id:null,redirect_thumbnail_url:null,thumbnail_url:null,community_publishers:{accepted:[],pending:[]},comments_setting:C.Ni.ENABLED,is_widget:!1,editor_type:"design_and_whiteboard",publishing_status:null,badges:[]},eT={...ev,is_widget:!0},eI={name:"",currentVersionReleaseNotes:"",newVersionReleaseNotes:"",description:"",tagline:"",creatorPolicy:"",categoryId:"",iconSrc:"",coverImageSrc:"",widgetSnapshotImageSrc:"",widgetSnapshotImageError:null,supportContact:"",iconImageError:null,coverImageError:null,author:{user_id:""},twoFactorAuthDisabledError:null,emailNotVerifiedError:null,accountDetailsChangedError:null,freemiumRequiredForMigrating:null,commentsSetting:C.Ni.ENABLED,creators:[],publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1,playgroundFigFile:null,playgroundFilePublishType:S.J.Actions.NOOP};function eS(e){if(!e||!e.versions)return null;let r=e.current_plugin_version_id;return r&&e.versions[r]||null}function ew(e){let r=eS(e);return null===r?eb:r}function eA(e,r){if((0,j.ZY)(r))return(0,j.Qx)(r);let n=e[r]??{};for(let e in n)return n[e].current_plugin_version_id}let eC=e=>e?.containsWidget?eT:ev;function eN(e,r,n,a){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}if(a){if(e&&e[a])return e[a];if(r&&r[a])return r[a]}return eC(n?.manifest)}function eL(e,r,n){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}return null}function eO(e,r){return(0,W.Hc)(e,r,ev)}function eR(e,r){return(0,W.Hc)(e,r,eT)}function eP(e,r){let n={};return Object.keys(e).forEach(a=>{let i=e[a];i.roles.org&&i.roles.org.id===r&&(n[i.id]=i)}),n}function eD(e,r){let n={};return Object.keys(e).forEach(a=>{let i=e[a];ei(r,ew(i).manifest.editorType)&&(n[i.id]=i)}),n}function ek(e){return!!e?.roles?.org}function eM(e,r,n=!0){let a={};return Object.keys(e).forEach(i=>{let o=e[i],s=n?K.jY:K.Ro;((0,w.Dd)(o,r)||s(o,r))&&(a[i]=e[i])}),a}function eF(e){return(0,i.LN)(Object.keys(e).map(r=>ew(e[r]))).map(r=>e[r.plugin_id])}function ex(e,r){let n=e.roles,a=!r.is_public&&(0,I.AC)(e);return!!n.is_public!=!!r.is_public||n.org?.id!==r.org?.id||a}function eU(e){if(!e)throw Error("Code string cannot be empty");let r=(0,g.YH)(e).length;if(r>W.yO)throw Error(`plugin code exceeds max size of ${Math.floor(W.yO/1e6)}MB`);return r}function eB(e){return(0,w.Wl)(e,"Icon image")}async function eV(e,r){return eB(e),await eW(e,{width:Y.DK,height:Y.DK},r,(0,y.t)("community.publishing.error_icon_image_dimensions"))}function eG(e){return(0,w.Wl)(e,"Artwork image")}function eH(e){let r=e?.[0];if(!r)throw Error((0,y.t)("community.publishing.error_file_not_found"));return r}async function eW(e,r,n,a){let{width:i,height:o}=r,s=URL.createObjectURL(e),l=await (0,w.l8)(s);try{if(!function(e,r,n){let{width:a,height:i}=r;return e.width===a&&e.height===i||n&&e.width%a==0&&e.height%i==0&&e.width/a==e.height/i}(l,r,n))throw Error(a);if(l.width===i&&l.height===o)return e;let s=await new Promise((e,r)=>{let n=document.createElement("canvas");try{n.width=i,n.height=o,n.getContext("2d").drawImage(l,0,0,i,o),n.toBlob(n=>n?e(n):r(Error("Failed to resize image")))}catch(e){r(e)}finally{n.remove()}});return new File([s],e.name,{type:s.type})}finally{URL.revokeObjectURL(s),l.remove()}}async function eK(e){let r=(await E.Ay.post(`/api/${(0,W.n)(e)}`)).data.meta;if(!r.id)throw Error("cannot generate plugin ID");return r}function eY(e,r,n){return e.roles.org??(r&&n?{id:r.id,name:r.name,img_url:r.img_url}:null)}function e$(e,r){return r===M.Lu.ORG?e?{org:e}:(l.k.error("publishing a private plugin without a valid org entity."),null):{is_public:!0}}function ej(e){return e.name===eI.name&&e.newVersionReleaseNotes===eI.newVersionReleaseNotes&&e.supportContact===eI.supportContact&&e.description===eI.description&&e.iconSrc===eI.iconSrc&&e.coverImageSrc===eI.coverImageSrc&&null==e.iconBlob&&null==e.coverImageBlob}function ez(e,r,n,a,i){let o;let s=void 0!==r?e.localPlugins[r]:void 0,l=s&&s.manifest,c=eN(e.publishedPlugins,e.publishedWidgets,s,n),d=ew(c),u=l?.permissions?.includes("payments");try{o=(0,w.En)(c,e)}catch(e){throw Error("Unable to get Plugin Data. You might be trying to act on a personal plugin in an Org space.")}let{accepted:m,pending:p}=c.community_publishers,h={...(0,G.Rs)(),tokens:(c.community_publishers?[...m.map(e=>({...e,isPending:!1})),...p?.map(e=>({...e,isPending:!0}))||[]]:[]).reduce((r,n)=>(0,w.Ii)(e.authedProfilesById[n.id],o)?r:r.concat([{state:R.d.OK,content:n}]),[])};return{name:d.name||l&&l.name||eI.name,currentVersionReleaseNotes:d.release_notes||eI.newVersionReleaseNotes,newVersionReleaseNotes:eI.newVersionReleaseNotes,tags:c.tags,tagsV2:c.tags_v2&&Object.keys(c.tags_v2),supportContact:c.support_contact||e.user?.email||eI.supportContact,description:d.description||eI.description,tagline:d.tagline||eI.tagline,creatorPolicy:d.creator_policy??eI.creatorPolicy,iconSrc:d.redirect_icon_url||eI.iconSrc,widgetSnapshotImageSrc:a||d.redirect_snapshot_url||eI.widgetSnapshotImageSrc,widgetSnapshotImageBlob:i||eI.widgetSnapshotImageBlob,coverImageSrc:d.redirect_cover_image_url||eI.coverImageSrc,iconImageError:eI.iconImageError,coverImageError:eI.coverImageError,widgetSnapshotImageError:eI.widgetSnapshotImageError,twoFactorAuthDisabledError:eI.twoFactorAuthDisabledError,emailNotVerifiedError:eI.emailNotVerifiedError,accountDetailsChangedError:eI.accountDetailsChangedError,freemiumRequiredForMigrating:eI.freemiumRequiredForMigrating,author:o,publishers:h,creators:m.map(e=>({...e,isPending:!1})).concat((p??[]).map(e=>({...e,isPending:!0}))).filter(r=>!(0,w.Ii)(e.authedProfilesById[r.id],o)&&r.entity_type===D.o1.USER),commentsSetting:c.comments_setting||eI.commentsSetting,categoryId:c.category_id||eI.categoryId,blockPublishingOnToS:(0,w.xw)(e),playgroundFigFile:d.playground_fig_file,playgroundFilePublishType:S.J.Actions.NOOP,isPaid:!!c.monetized_resource_metadata||u,price:(0,T.vf)(c.monetized_resource_metadata),isSubscription:c.monetized_resource_metadata?.is_subscription,hasPaymentsApi:u,annualDiscount:c.monetized_resource_metadata?.annual_discount_percentage,isAnnualDiscountActive:!!c.monetized_resource_metadata?.annual_discount_active_at,carouselMedia:(0,v.N6)(c)}}function eq(e){return!!ew(e).id&&!e.unpublished_at}function eZ(e){if(!e)return{};let r={};return e.forEach(e=>{eq(e)&&(r[e.id]=e)}),r}function eX(e,r,n,a){let i={};return(e.email_validated_at||(i.emailNotVerifiedError=(0,y.t)("community.publishing.please_verify_your_email_address_to_publish")),a||(e.saml_sso_only||e.google_sso_only||e.two_factor_app_enabled||e.phone_number)&&(r.code!==D.aP.FAILURE||r.error!==(0,y.t)("community.publishing.you_must_enable_two_factor_authentication_to_publish")))?!a&&(e.plugin_publishing_blocked_at||e.community_blocked_at||r.code===D.aP.FAILURE&&r.error===(0,y.t)("community.publishing.you_must_verify_your_account_details_to_publish"))?i.accountDetailsChangedError=(0,y.t)("community.publishing.we_detected_a_change_to_your_account_details_please_contact_support_figma_com_to_publish_this_plugin"):r.code===D.aP.FAILURE&&r.error&&(i.other=r.error):i.twoFactorAuthDisabledError=n?(0,y.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_widget"):(0,y.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_plugin"),i}function eJ(e,r,n,a){if(!e)return{};let i={};0===(0,W.Yp)(e.name).length&&(i.name=(0,y.t)("community.publishing.name_must_not_be_empty")),0===(0,W.Yp)(e.tagline).length&&(i.tagline=(0,y.t)("community.publishing.add_a_tagline")),(0,p.ZB)(e.description)&&(i.description=(0,y.t)("community.publishing.add_a_description"));let o=(0,W.Yp)(e.supportContact);if(0===o.length?i.supportContact=(0,y.t)("community.publishing.support_contact_must_not_be_empty"):(0,c.xf)(o)||(0,g.gU)(o)||(i.supportContact=(0,y.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")),0===(0,W.Yp)(e.iconSrc).length&&(i.iconImageError=(0,y.t)("community.publishing.icon_cant_be_empty")),i.carouselMedia=(0,w.vC)(e.carouselMedia),e.categoryId||(i.categoryId=(0,y.t)("community.publishing.category_cant_be_empty")),void 0===e.price||r.permissions?.includes("payments")||a?.third_party_m10n_status!==k.PN.FLAGGED||(i.freemiumRequiredForMigrating=(0,y.t)("community.seller.freemium_required_for_migration")),e.playgroundFigFile&&r.editorType?.length===1){let a=r.editorType[0],o=e.playgroundFigFile.editor_type;if(a===M.FW.FIGMA&&"design"!==o||a===M.FW.FIGJAM&&"whiteboard"!==o){let e=a===M.FW.FIGMA?(0,y.t)("community.publishing.playground_file.figma"):(0,y.t)("community.publishing.playground_file.figjam");i.playgroundFigFile=n?(0,y.t)("community.publishing.widget_playground_file_editor_type_error",{editorType:e}):(0,y.t)("community.publishing.plugin_playground_file_editor_type_error",{editorType:e})}}n&&0===(0,W.Yp)(e.widgetSnapshotImageSrc).length&&(i.widgetSnapshotImageError=(0,y.t)("community.publishing.snapshot_must_not_be_empty"));let s=function(e,r){if(!e.isPaid||e.hasPaymentsApi)return null;if(!e.price)return(0,y.t)("community.publishing.price_is_required_for_paid_resources");if((0,T.Yp)(e.price))return e.price<T.mZ?(0,y.t)("community.seller.paid_resource_minimum_err"):(0,y.t)("community.seller.paid_resource_maximum_err");if((0,T.F8)(e.price))return(0,y.t)("community.seller.prices_must_follow_format");if(!r||(0,I.AC)(r))return null;let n=r?.monetized_resource_metadata?.price;return e.isSubscription&&n&&(0,T.Mj)(n/100,e.price)?(0,y.t)("community.seller.price_increase_limit"):!r?.monetized_resource_metadata?.can_increase_price&&n&&(0,T.WD)(n/100,e.price)?(0,y.t)("community.seller.price_can_only_be_increased_once_every_thirty_days"):null}(e,a);s&&(i.price=s);let l=e.isPaid&&e.annualDiscount&&e.isAnnualDiscountActive?Number.isInteger(e.annualDiscount)?null:(0,y.t)("community.seller.discount_must_follow_format"):null;return l&&(i.annualDiscount=l),i}function eQ(e){if(!e)return{};let r={},n=(0,W.Yp)(e.name).length;n<4?r.name=(0,y.t)("community.publishing.name_must_be_4_characters_long"):n>100&&(r.name=(0,y.t)("community.publishing.name_must_be_at_most_100_characters_long")),(0,W.Yp)(e.description).length>1e4&&(r.description=(0,y.t)("community.publishing.description_must_be_at_most_10000_characters_long")),(0,W.Yp)(e.newVersionReleaseNotes).length>1e4&&(r.newVersionReleaseNotes=(0,y.t)("community.publishing.release_notes_must_be_at_most_10000_characters_long")),(0,W.Yp)(e.creatorPolicy).length>1e4&&(r.creatorPolicy=(0,y.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long"));let a=(0,W.Lg)(e.tagline);return a&&(r.tagline=a),(0,W.Yp)(e.supportContact).length>100&&(r.supportContact=(0,y.t)("community.publishing.support_contact_must_be_at_most_100_characters_long")),e.iconImageError&&(r.iconImageError=e.iconImageError),e.coverImageError&&(r.coverImageError=e.coverImageError),r}function e0(e){return(0,M.k0)(e.plugin)}function e1(e){let r;let{localPlugins:n,publishedCanvasWidgetVersions:a,publishedWidgets:i}=d.D.getState(),o=!e.widgetVersionId,l=e.widgetId;if(l){if(o){let e=Object.values(n).filter(e=>e.plugin_id===l);e.length>1&&e8((0,y.t)("community.publishing.found_multiple_local_widgets_with_the_same_manifest_id")),1===e.length&&(r=e[0])}else{if(!(r=a[l]?.[e.widgetVersionId]||i[l]&&ew(i[l])))return;r.id===e.widgetVersionId||(0,f.nl)()||(0,f.Lg)()||(0,h.$D)(s.e.UNOWNED,Error(`plugin versionId=${r?.id} doesn't match node.widgetVersionId=${e.widgetVersionId}`))}return r}}function e2(e){let r=e.canRunPluginState?e.canRunPluginState:d.D.getState();if(!(0,L.GP)(r))return{canRun:!1,message:"Cannot run plugin because canRunPlugins returned false"};if(!e5(r,e.plugin))return{canRun:!1,message:"Cannot run plugin within org"};let{plugin:n,editorType:a}=e;if((0,M.ZQ)(n))return(0,M.k0)(n)?{canRun:!1,message:"Cannot run local widget"}:{canRun:!0};if(a){if(!ei(X[a],n.manifest.editorType))return{canRun:!1,message:"Cannot run plugin with invalid editor type"};if(a===P.nT.DevHandoff&&!e9(n))return{canRun:!1,message:"Cannot run non-devmode plugin in dev mode"};if(a===P.nT.Slides&&!ts(n))return{canRun:!1,message:"Cannot run non-slides plugin in slides mode"}}return{canRun:!0}}function e5(e,r){if(!e.currentUserOrgId)return!0;let n=e.orgById[e.currentUserOrgId];if(!n||(0,M.ZQ)(r)||(0,M.bH)(r))return!0;if(!n.public_plugins_allowed)return!1;let a=(0,M.k0)(r);return(a?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!(a?e.whitelistedWidgets:e.whitelistedPlugins)[r.plugin_id]}function e4(e){return e.roles.is_public?{role:"public"}:e.roles.org?{role:"org",roleOrgId:e.roles.org.id}:{role:"private"}}function e7(e,r){return r?r.localFileId:e.id}function e8(e){(0,V.pN)({shouldShowVisualBell:!0});let r=(0,z.M)();A.Y5.dispatch(b.F.enqueue({type:"plugins-runtime-error",message:e,button:r?{text:"Show/Hide console",action:()=>{r.toggleDevTools("bottom")}}:void 0,error:!0}))}function e3(){A.Y5.dispatch(b.F.dequeue({matchType:"plugins-runtime-error"}))}function e6(e,r){return e.plugin_id===r?.plugin_id&&e?.id===r?.id}function e9(e,r){return!!(!(0,$.T)()||e.manifest.capabilities?.includes("vscode")||r?.allowNonVsCodePluginsInVsCode)&&(0,M.Pe)(e.manifest.editorType)&&!(0,M.k0)(e)}function te(e){return e9(e)&&tg(e.manifest.capabilities)}function tt(e){return e9(e)&&e.manifest?.capabilities?.includes("codegen")}function tr(e){return e.manifest?.capabilities?.includes("textreview")}function tn(e,r,n){return Object.fromEntries(Object.entries(r).filter(([r,a])=>to(e,a,n)))}function ta(e,r){return r.filter(r=>to(e,r))}function ti(e,r){return Object.fromEntries(Object.entries(r).filter(([r,n])=>to(e,ew(n))))}function to(e,r,n){if(!e)return!0;switch(e){case P.nT.Whiteboard:case P.nT.Design:return ei(X[e],r.manifest.editorType);case P.nT.DevHandoff:return e9(r,n);case P.nT.Slides:return ts(r);case P.nT.Sites:case P.nT.Cooper:case P.nT.Illustration:return!1;default:(0,o.xb)(e)}}function ts(e){return ei(M.FW.SLIDES,e.manifest.editorType)&&!(0,M.k0)(e)}function tl(e){if(!("related-link-preview"!==e&&"codegen"!==e))return!1;let r=d.D.getState().selectedView;return(0,H.$A)(r)}function tc(e){return e?.manifest.editorType?.length===1&&(0,M.Pe)(e.manifest.editorType)}function td(e){let r=function(e){let r=["vscode"];return e.filter(e=>!r.includes(e))}(e.manifest.capabilities??[]);return 1===r.length&&"codegen"===r[0]}function tu(e){return tc(e)&&td(e)}function tm(e){return(0,M.Pe)(e.manifest.editorType)&&td(e)}function tp(e){let r=d.D.getState().selectedView;return(0,H.$A)(r)&&tm(e)}function th(e,r,n){let a=d.D.getState().selectedView,i=r?.plugins_whitelist_enforced,o=i&&n&&!!n[e.plugin_id]||!i;return(0,H.$A)(a)&&!tu(e)&&o}function t_({idToSearch:e,localExtensionsByFileId:r,publishedExtensions:n}){let a=r&&r[e];if(a)return a;let i=n?.[e];return i?eS(i):null}function tg(e){return!!(e?.includes("inspect")||e?.includes("panel"))}function tf(e){let r=ea(),n=e&&e?.plugin&&tu(e?.plugin);return e&&r&&ei(r,e.plugin.manifest.editorType)&&("dev"!==r||e9(e.plugin))&&("slides"!==r||ts(e.plugin))&&!n}function tE(){return(0,$.T)()?"plugins-menu-open-directory-vscode":m.Ay.mac?"plugins-menu-open-directory-mac":"plugins-menu-open-directory-win"}},816750:(e,r,n)=>{n.d(r,{C3:()=>i,SH:()=>o}),n(263352);let a=null;function i(e){a=e}function o(){return a}},162790:(e,r,n)=>{n.d(r,{R:()=>o}),n(890882);var a=n(747327),i=n(354465);let o=new class{loadPluginsPublishedByUser(e){let r=e.getState().loadingState,n=a.uF.loadingKeyForPayload();(0,i.Sc)(r,n)&&e.dispatch(a.uF())}async loadPluginsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=a.LP.loadingKeyForPayload(n);(0,i.Sc)(r,o)&&await e.dispatch(a.LP(n))}loadWidgetsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=a.a8.loadingKeyForPayload(n);(0,i.Sc)(r,o)&&e.dispatch(a.a8(n))}}},200942:(e,r,n)=>{n.d(r,{R:()=>_});var a=n(301126),i=n(846288),o=n(895925),s=n(885123),l=n(399991),c=n(508794),d=n(826688),u=n(736918),m=n(738402),p=n(882898);let h=class e{constructor(){this.runQueue=[],this.currentRunState=null,this.MAX_RESOLVE_ITERATIONS=10}enqueue(e){let{runPluginArgs:r,onStart:n,mode:i,reuseExistingRunState:o=!0}=e,{plugin:l}=r;if(!(0,m.$A)(s.D.getState().selectedView))return(0,a.bT)(r);if(l.manifest.containsWidget)throw Error("Cannot enqueue a plugin that contains a widget");let c=this.createTask(n),d=this.findExistingRunState(e);if(o&&d)this.log("enqueue","Found existing run state, pushing runTask onto existing runState",{existingRunState:d,runTask:c}),d.runTasks.push(c),d===this.currentRunState&&"settled"===d.status&&this.resolveAllPromises(this.currentRunState);else{let e={runPluginArgs:r,runTasks:[c],mode:i,status:"idle"};this.log("enqueue","Creating new run state and adding to queue",{runState:e}),this.addToQueue(e),this.runNextPlugin()}return c.promise}getCurrentRunStatusOrNull(){return this.currentRunState?.status??null}getRunQueueLength(){return this.runQueue.length}async runNextPlugin(){if(await this.maybeTerminatePluginBeforeRun(),(0,p.hw)())return;let e=this.runQueue.shift();if(!e)return;this.currentRunState=e,this.prepPluginForRun(e.runPluginArgs.plugin);let r=this.runPlugin(e);await this.resolveAllPromises(e),await r,this.log("runNextPlugin","Finished running plugin",{runState:e}),this.runNextPlugin()}runPlugin(e){this.log("runNextPlugin","Running plugin",{runState:e});let{runPluginArgs:r}=e;return(0,a.bT)(r)}setRunPluginForTest(e){if(!(0,l.nl)())throw Error("Cannot set run plugin for test when not running interaction tests");this.runPlugin=e}createTask(e){let r=()=>{},n=()=>{};return{promise:new Promise((e,a)=>{r=e,n=a}),resolve:r,reject:n,onStart:e}}async resolvePromise({resolve:e,reject:r,onStart:n}){try{let r=await n?.();e(r)}catch(e){r(e)}}async resolveAllPromises(e){this.log("runNextPlugin","Resolving all promises",{runState:e}),e.status="resolving";let r=0;for(;r<this.MAX_RESOLVE_ITERATIONS;){let n=e.runTasks;if(0===n.length)break;e.runTasks=[],await Promise.allSettled(n.map(e=>this.resolvePromise(e))),r++}await this.maybeTerminatePluginAfterRunSettled(e),e.status="settled",this.log("runNextPlugin","Resolved all promises",{runState:e})}addToQueue(e){switch(this.log("addToQueue","Adding to queue",{toAdd:e}),e.mode){case"run-forever":case"run-and-terminate":this.runQueue.push(e);break;default:(0,i.xb)(e.mode)}}async maybeTerminatePluginBeforeRun(){let e=(0,p.hw)();(!!e!=!!this.currentRunState||this.currentRunState?.status==="settled"&&this.currentRunState?.runPluginArgs.plugin.plugin_id===e?.plugin_id)&&(this.log("maybeTerminatePluginBeforeRun","Terminating plugin"),await this.terminatePlugin())}async maybeTerminatePluginAfterRunSettled(e){let{mode:r}=e;switch(this.log("maybeTerminatePluginAfterRunSettled","Maybe terminating plugin",{toMaybeTerminate:e}),r){case"run-forever":this.runQueue.length>0&&await this.terminatePlugin();break;case"run-and-terminate":await this.terminatePlugin();break;default:(0,i.xb)(r)}}async terminatePlugin(){this.log("terminatePlugin","Terminating plugin"),this.currentRunState=null,await (0,p.wY)(),await (0,c.yQ)()}findExistingRunState({runPluginArgs:e,mode:r}){let n=this.currentRunState?.runPluginArgs.plugin.plugin_id;return n===e.plugin.plugin_id&&p.hw()?.plugin_id===n?this.currentRunState:this.runQueue.find(n=>n.runPluginArgs.plugin.plugin_id===e.plugin.plugin_id&&n.mode===r)}isCurrentlyRunning({runPluginArgs:e,mode:r}){return!!this.findExistingRunState({runPluginArgs:e,mode:r})}prepPluginForRun(e){this.log("prepPluginForRun","Prepping plugin for run",{plugin:e}),(0,d.dW)(e,null),(0,u.f$)(),(0,u.n4)(),(0,u.hY)()}log(r,n,a={}){if(!e.debug)return;let i={currentRunState:this.currentRunState,runQueue:this.runQueue,runningPluginState:p.iu,...a};o.k.log("[PluginManager]",`[${r}]`,n,i)}};h.instance=new h,h.debug=!1;let _=h},882898:(e,r,n)=>{n.d(r,{Kd:()=>b,Mt:()=>S,XF:()=>A,XY:()=>I,et:()=>w,fD:()=>g,hw:()=>f,iu:()=>_,lM:()=>E,mv:()=>v,nT:()=>N,qR:()=>y,wY:()=>C});var a=n(217950),i=n(281935),o=n(885123),s=n(875877),l=n(550479),c=n(399991),d=n(317384),u=n(565315),m=n(401562),p=n(844493);let h=null,_={currentPluginRunID:null,stats:null,currentWidget:void 0,setMediaEnabled:!1,allowedPluginOrigin:void 0,resetGlobalPluginAPI:null};function g(){return _.currentPluginRunID}function f(){return s.atomStore.get(d.GR)}function E(e){(0,l.kF)("pluginId",e?.plugin_id),s.atomStore.set(d.GR,e)}function y(e){(0,l.kF)("pluginTriggeredFrom",e),s.atomStore.set(d.vT,e??null)}function b(e){s.atomStore.set(d.$f,e)}function v(){return Math.random().toString(36).slice(2)}function T(e){(0,c.nl)(),(0,l.$D)(a.e.EXTENSIBILITY,e)}function I(e){h&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h={type:"global",closePluginFunc:e}}function S(e,r){h?.type==="plugin"&&r?.ignorePreviousCloseFunc!==h.closePluginFunc&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h?.type==="global"&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h=e?{type:"plugin",closePluginFunc:e}:null}function w(){return h?.type==="global"}async function A(e){if(h){let{closePluginFunc:r,type:n}=h;h=null,"global"===n?await r():await r(e)}}let C=(0,m.n)(async e=>{await A(e?{message:e+"",isError:!0}:{}),N()});function N(){if((0,p.Tj)(void 0),_.currentWidget=void 0,E(null),y(null),b(null),_.currentPluginRunID=null,_.stats=null,s.atomStore.set(d.d4,null),s.atomStore.set(d.GR,null),i.eD&&_.setMediaEnabled&&(_.setMediaEnabled=!1),i.eD&&_.allowedPluginOrigin&&(i.eD.removeAllowedPluginOrigin(_.allowedPluginOrigin),_.allowedPluginOrigin=void 0),o.D){let e=(0,u.o8)(),r=(0,u.YR)();e&&r&&_.resetGlobalPluginAPI?.({userID:e,openFileKey:r})}}},426256:(e,r,n)=>{n.d(r,{HB:()=>M,Ph:()=>p,T0:()=>v,Up:()=>x,eZ:()=>k,sA:()=>U,xp:()=>F,yb:()=>B});var a=n(841962),i=n(399991),o=n(7395);let s="1039957324840667051",l="1042072203439057981",c="1017757619521383731",d="1037692671113105119",u="1030479012894344777",m="1100947233945489758",p="1274481464484630971",h="1220512233196109878",_="1220802563996996107",g="1221187540287746170",f="1029476790898052743",E="1270487405418367065",y="1028089855820989707",b="1100944790471783866",v="1268676638869538880",T="1217135789855512677",I="1217657098906612843",S={[s]:o.Kd,[l]:o.Kd,[c]:o.Kd,[d]:o.Kd,"1096460041736534298":["analytics"],[h]:["analytics","openexternal"],[_]:["analytics","filekey","openexternal"],"1098405969270214551":["analytics","filekey","openexternal"],"1151936790942917527":["analytics","openexternal"],"1101944648482192724":["analytics","openexternal"],"1094001923188252679":["analytics","filekey","openexternal"],[u]:o.Kd,[m]:o.Kd,"1030848035996871692":["hidecursors"],"1030845409121640454":["hidecursors"],[p]:["cortex","analytics"],[g]:["filekey"],"857346721138427857":["filekey"],"745330164019088593":["filekey"],"1377781599688680355":["cortex","analytics","filekey","firstdraft"],"1340067847030742527":["cortex","analytics","filekey","firstdraft"]},w={[s]:"https://recordwidget.vimeocdn.com",[l]:"https://recordwidget.vimeocdn.com",[c]:"https://recordwidget.vimeocdn.com",[d]:"https://recordwidget.vimeocdn.com",[u]:"https://www.figma.com",[m]:"https://www.figma.com"},A={"1034777534804649640":["analytics"],"1301665612022689456":["analytics","cortex"],[T]:["analytics","openexternal"],[I]:["analytics","filekey","openexternal"],"1271502283792345209":["cortex"],"1326353654536428586":["cortex"],"1441501928920333946":["cortex"],"1094384373580076374":["analytics","filekey","openexternal"],"1149460326641202255":["analytics","openexternal"],"1101526018404272582":["analytics","openexternal"],"1131307276886895456":["analytics","filekey","openexternal"],[f]:o.Kd,[E]:o.Kd,[y]:o.Kd,[b]:o.Kd,"1256428543638612749":["cortex"],[v]:["cortex","analytics"],"1277056884710848803":["cortex","analytics"],"1265815812125155376":["hidecursors"],"1029480467793180296":["hidecursors"],"1276624117086983457":["cortex"],"1313947182028153675":["cortex","analytics","filekey","firstdraft"],"1308848962842011451":["cortex","analytics","filekey","firstdraft"],"1338915561589337295":["cortex","analytics","filekey","firstdraft"],"1342184095219254574":["cortex","analytics","filekey","firstdraft"],"1248327534194310871":["openexternal"],"1247608093818933926":["openexternal"],"1098668453462136230":["analytics"],"1098643145465550199":["analytics","filekey","openexternal"],"1159008294965494982":["analytics","openexternal"],"1105998388939381214":["analytics","openexternal"],"1098069144593389942":["analytics","filekey","openexternal"],"1065825789137646656":o.Kd,"1105998344712102365":o.Kd,"1065825795062708289":["hidecursors"],"1065825813933952067":["hidecursors"]},C={[T]:(0,a.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},N={[h]:(0,a.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},L={[f]:"https://staging.figma.com",[E]:"https://staging.figma.com",[y]:"https://staging.figma.com",[b]:"https://staging.figma.com"},O=new Set([T,I]),R=new Set([h,_,g,"1220851659530313303"]),P={},D={};function k(e){return"prod"===(0,a.tl)().cluster_name?e in w||e in S:"staging"===(0,a.tl)().cluster_name?e in L||e in A:(0,i.nl)()||(0,i.Lg)()?e in P:!!(0,a.IX)()}function M(e){return"prod"===(0,a.tl)().cluster_name?e in w?w[e]:void 0:"staging"===(0,a.tl)().cluster_name?e in L?L[e]:void 0:(0,i.nl)()||(0,i.Lg)()?e in P?P[e]:void 0:(0,a.IX)()?"*":void 0}function F(e){if(!k(e))throw Error("Untrusted pluginID");return"prod"===(0,a.tl)().cluster_name?new Set(S[e]??[]):"staging"===(0,a.tl)().cluster_name?new Set(A[e]??[]):(0,i.nl)()||(0,i.Lg)()?new Set(D[e]??[]):(0,a.IX)()?new Set(o.UX):new Set}function x(){return"prod"===(0,a.tl)().cluster_name?R:"staging"===(0,a.tl)().cluster_name?O:((0,i.nl)()||(0,i.Lg)()||(0,a.IX)(),new Set)}function U(e){return"prod"===(0,a.tl)().cluster_name?N[e]:"staging"===(0,a.tl)().cluster_name?C[e]:void 0}function B(e){return"prod"===(0,a.tl)().cluster_name?"1286792998372727741"===e:"staging"===(0,a.tl)().cluster_name?"1286790870036328880"===e:!!((0,i.nl)()||(0,i.Lg)())||!!(0,a.IX)()}},932667:(e,r,n)=>{n.d(r,{S:()=>a});var a,i=n(890882),o=n(747484),s=n(972142),l=n(314540),c=n(287327);(e=>{e.getTooltipTrackingContext=function(e){return`Pro Onboarding Tooltip: ${(0,s.vE)(e)}`},e.getTrackingProperties=function(e){return{productArea:"pro_tier_onboarding",teamId:e}},e.isRecentlyUpgraded=function(e){return!!e&&!!e.last_upgraded_at&&90>=(0,i.A)().diff((0,i.A)(e.last_upgraded_at),"days",!0)},e.canSeeOnboardingInFile=function({editorType:e,selectedView:r,showStarterKit:n,userFlags:a,hasNotifications:i,isDevHandoffView:s,isAppUiShown:d,isLoading:u}){if(o.Ay.mobile||o.Ay.tablet||i||s||!d||u)return!1;let m="fullscreen"===r.view&&r.starterKitHasBeenHidden;if(e===l._Y.WHITEBOARD&&n&&!m)return!1;let p=(0,c._q)(a),h=!!a.figjam_editor_onboarded;return e===l._Y.DESIGN&&!!p||e===l._Y.WHITEBOARD&&!!h}})(a||(a={}))},532847:(e,r,n)=>{n.d(r,{ng:()=>a,uU:()=>g});var a,i=n(834825),o=n(890882),s=n(841962),l=n(927030),c=n(314540),d=n(313449),u=n(510669),m=n(11814),p=n(421023);let h="pro_trials_v3",_=c.GP.PRO_TRIAL,g="exp_pro_trials_v3_start_trial";(e=>{e.uxEnabled=()=>!!(0,s.kc)().pro_trials_v3_ux,e.entryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().exp_pro_trials_v3,e.expiryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().pro_trials_v3_expiry,e.isUserInVariant=l.wN,e.getTrackingProperties=function(e){return e?{productArea:h,text:e}:{productArea:h}},e.getProTrial=function(e,a,i){if(!e)return null;let o=n(e);if(!o)return null;let s=new Date(e.grace_period_end),l=r(s),c=e.id;return{status:o,isOwner:a,userCanEditTeam:(0,u.canEditTeam)(c,i),trialExpiresAt:s,daysLeft:l,teamId:c}},e.getUpgradableProTrials=function(r,n){let a=Object.values(n.teams),s=(0,i.WI)(a.map(a=>e.getProTrial(a,!!r[a.id]?.[g],n))),l=s.filter(e=>e.status===m.a.TRIAL_EXPIRED&&e.userCanEditTeam);l.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt));let c=s.filter(e=>e.status===m.a.IN_TRIAL&&e.userCanEditTeam);return c.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt)),{ongoingTrials:c,expiredTrials:l}},e.getEligibleProTrialTeams=function(r,n,a,i){let o=(0,d.Rx)(a),s=Object.values(a.teams).filter(s=>e.canStartProTrial(r,n,o,s,a,i));return s.sort((e,r)=>(r.editors??0)-(e.editors??0)),s},e.canStartProTrial=function(r,n,a,i,s,l){return!(!r||!e.entryEnabled()||(0,d.w5)(i)||i.stripe_customer_id||!n||a||!(0,u.canEditTeam)(i.id,s)||30>(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)||(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)>90||e.getProTrialStatus(i)||Object.keys(l).some(e=>!!l[e][g]))&&!!e.isUserInVariant(r.id)};let r=e=>Math.max(Math.ceil((0,o.A)(e).diff((0,o.A)(),"days",!0)),0);function n(r){return(0,e.uxEnabled)()&&r.grace_period_end&&r.grace_period_type&&_===r.grace_period_type?new Date(r.grace_period_end)<new Date?m.a.TRIAL_EXPIRED:m.a.IN_TRIAL:null}function a(e){return!!e&&e.status===m.a.IN_TRIAL&&e.userCanEditTeam}e.getProTrialStatus=n,e.isEligibleTrialEntryView=function(e){return"folder"===e.view||"team"===e.view||(0,p.K)(e)},e.canSeeProTrialUx=a,e.canSeeProTrialUxInFile=function(e,r){return a(e)&&r?.editorType&&r?.canEdit},e.canSeeProTrialExpiryUx=function(r){if(!(0,e.expiryEnabled)()||!r||r.status!==m.a.TRIAL_EXPIRED)return!1;let n=(0,o.A)().utc().diff((0,o.A)(r.trialExpiresAt).utc(),"days",!0);return!(n<0)&&n<7},e.canSeeExpiredProTrialBanner=function(r,n,a){if(!n)return!1;let i=!!r[n.id]?.[g],o=e.getProTrial(n,i,a);return e.canSeeProTrialExpiryUx(o)}})(a||(a={}))},872704:(e,r,n)=>{n.d(r,{R_:()=>a}),n(411855);var a,i=n(777535),o=n(841962),s=n(693565),l=n(76265),c=n(233950),d=n(532847),u=n(965821),m=n(485247),p=n(569673),h=n(301834),_=n(383234),g=n(637427),f=n(236446),E=n(176694),y=(e=>(e[e.SELECT_TEAM=0]="SELECT_TEAM",e[e.SELECT_TEAM_TYPE=1]="SELECT_TEAM_TYPE",e[e.SELECT_FEATURES=2]="SELECT_FEATURES",e))(y||{}),b=(e=>(e.FREELANCER="freelancer",e.AGENCY="agency",e.PRODUCT="product",e.OTHER="other",e))(b||{}),v=(e=>(e.UNLIMITED_FILES="unlimited_files",e.COMPONENT_LIBRARIES="component_libraries",e.ORGANIZING_FILES="organizing_files",e.VOTING_WORKSHOPS="voting_workshops",e.PLAYING_VIDEOS="playing_videos",e.SHARING_FILES="sharing_files",e.INVITING_VISITORS="inviting_visitors",e.AUDIO="audio",e))(v||{});Object.keys(y).length,(0,o.ck)("06cfa92c773695fb0be0202d467640e521950e67"),(0,o.ck)("e98abc8479042db5e94f5c35bf764ad4326f892f"),(0,o.ck)("915ace9058a397e6e4ceadc221dd20a9d95898d7"),(0,o.ck)("4423aaa8499d483db2703e6cad1b4c90805e7f16"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.freelancer"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.agency"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.product"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.other_team_type"),s.B,u.A,s.B,g.A,s.B,m.A,s.B,E.A,s.B,f.A,s.B,_.A,s.B,p.A,s.B,h.A,c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.unlimited_files"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.component_libraries"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.organizing_files"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.voting_workshopping"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.playing_videos"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.sharing_files"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.inviting_visitors"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.using_audio"),(a||(a={})).trackInitiationSubmit=function(e,r){(0,i.sx)("pro_trial_initiation_submit",{startedTrialSuccessfully:r,...e,...d.ng.getTrackingProperties(),features:e.features?e.features.join(", "):null})}},952122:(e,r,n)=>{n.d(r,{Bx:()=>T,Cs:()=>O,Hs:()=>b,Jr:()=>C,KJ:()=>N,M9:()=>E,RL:()=>y,Rv:()=>f,Zh:()=>D,_P:()=>P,e:()=>I,eA:()=>w,fz:()=>v,mf:()=>R,qb:()=>g,ql:()=>A,t0:()=>L,yE:()=>S});var a=n(846288),i=n(217950),o=n(805014),s=n(757028),l=n(666308),c=n(747484),d=n(550479),u=n(534294),m=n(47795);n(688581);var p=n(190500);n(366172),n(923219);var h=n(314540),_=n(421023);function g(e){return e===o.bq3.PRESET||e===o.bq3.CUSTOM?"scale-down":e===o.bq3.PRESENTATION?"contain":"min-zoom"}function f(e){return"fixed"}function E(e){let r=function(e){switch(e){case"NONE":return o.bq3.NONE;case"PRESET":return o.bq3.PRESET;case"CUSTOM":return o.bq3.CUSTOM;case"PRESENTATION":return o.bq3.PRESENTATION;default:(0,a.xb)(e)}}(e.initialDevice?.type??"NONE"),n=e.scalingInfo;return c.rr?{viewportScalingMode:"fit-width",contentScalingMode:n?.contentScalingMode??"fixed"}:{viewportScalingMode:n?.viewportScalingMode??g(r),contentScalingMode:n?.contentScalingMode??f(r)}}function y(e,r){return!r?.disableDefaultKeyboardNav&&([l.Uz.LEFT_ARROW,l.Uz.PAGE_UP].includes(e.keyCode)||e.shiftKey&&e.keyCode===l.Uz.N)}function b(e,r){return!(r?.disableDefaultKeyboardNav||r?.inlinePreview&&e.keyCode===l.Uz.SPACE&&e.shiftKey)&&[l.Uz.RIGHT_ARROW,l.Uz.SPACE,l.Uz.ENTER,l.Uz.N,l.Uz.PAGE_DOWN].includes(e.keyCode)}function v(e,r){return!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.R&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey}let T=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.F&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview,I=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.Z&&!e.metaKey&&!e.ctrlKey&&!r.inlinePreview&&r?.file?.editor_type!==h._Y.SLIDES,S=(e,r)=>e.keyCode===l.Uz.SPACE&&e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!r?.inlinePreview,w=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.C&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview;function A(e){return!1}let C=(0,u.nF)((e,r)=>{if(r.userInitiated){let n={scalingMode:r.viewportScalingMode,contentScalingMode:r.contentScalingMode,source:r.source};e.dispatch(P({name:"Prototype Scale Changed",params:n}))}let n=e.getState().selectedView;if("prototype"===n.view){let a=(0,s.Ay)(n,e=>{void 0===e.scalingInfo&&(e.scalingInfo={}),r.hasOwnProperty("viewportScalingMode")&&(e.scalingInfo.viewportScalingMode=r.viewportScalingMode),r.hasOwnProperty("contentScalingMode")&&(e.scalingInfo.contentScalingMode=r.contentScalingMode)});e.dispatch(m.$T(a))}}),N=(0,u.nF)((e,{showHotspots:r})=>{let n=e.getState().selectedView;if(n&&"prototype"===n.view){let a={...n,showHotspots:r};e.dispatch(m.$T(a))}}),L=(0,u.nF)((e,{showDeviceFrame:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to show device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to show device frame");let i={...n,showDeviceFrame:r};e.dispatch(m.$T(i))}),O=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to set initial device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to set initial device frame");let i={...n,initialDevice:r,overrideDevice:void 0};e.dispatch(m.$T(i))}),R=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to set override device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to set override device frame");let i={...n,overrideDevice:r};e.dispatch(m.$T(i))}),P=(0,u.nF)((e,r)=>{let n=e.getState(),a=r.params||{},i=(0,_.U2)(n.selectedView);p.ds(r.name,i,n,a)}),D=(()=>{let e=(0,u.nF)((e,r)=>{let n=e.getState(),a=r.params||{},o=(0,_.U2)(n.selectedView);if(!o){(0,d.$D)(i.e.PROTOTYPING,Error("No file key for prototype event"));return}p.GS(r.name,o,n,a)});return({name:r,params:n})=>e({name:r,params:n})})()},73526:(e,r,n)=>{n.d(r,{C$:()=>s,Cp:()=>d}),n(411855),n(188507);var a=n(805014);n(875877);var i=n(437068);n(225371),n(73041),n(886231),n(114750);var o=n(401562);function s(e){let r=[e];for(;0!==r.length;){let e=r.shift();if(!1!==e.visible){if("TEXT"===e.type)return!0;r.push(...e.childrenNodes)}}return!1}n(154267),n(176160),n(287327);let l="last-used-left-panel-tab",c="ASSETS_TAB";function d(e){i.x4&&i.x4.setItem(l,e===a.xae.ASSETS?c:"LAYERS_TAB")}(0,o.D)(()=>{if(i.x4){let e=i.x4.getItem(l);if(e)return e===c?a.xae.ASSETS:a.xae.LAYERS}return null})},615883:(e,r,n)=>{n.d(r,{H4:()=>u,Ud:()=>d,cZ:()=>p});var a=n(411855),i=n(188507),o=n(846288),s=n(629019),l=n.n(s),c=n(141604);let d=Symbol("NotVisibleRunAnyway");class u{constructor(e){this._callback=e,this._previousValue=null}render({isVisible:e,className:r,displayAs:n,valueArgs:i=[]}){let o=!0===e||e===d?this._previousValue=this._callback(...i):this._previousValue,s=!0===e;return o instanceof Array?o.map((e,i)=>e&&a.createElement(m,{key:e.key??i,isVisible:s,className:r,displayAs:n},e)):o&&a.createElement(m,{key:o.key??void 0,isVisible:s,className:r,displayAs:n},o)}}class m extends a.Component{constructor(){super(...arguments),this.ref=e=>{this.el=e}}componentDidUpdate(e){this.el&&(!e.isVisible&&this.props.isVisible&&c.F2.focusSubtreeIfNecessary(this.el),e.isVisible&&!this.props.isVisible&&c.F2.blurSubtreeIfNecessary(this.el))}getClassNameForDisplayAs(){let{displayAs:e}=this.props;switch(e){case"block":return"";case"contents":return"displayContents";default:(0,o.xb)(e)}}render(){let{isVisible:e}=this.props,r=l()(this.props.className?this.props.className:"cachedSubtree",this.getClassNameForDisplayAs());return a.createElement("div",{ref:this.ref,className:r,style:{display:e?"":"none"}},this.props.children)}}function p(e,r){"function"==typeof e?e(r):e&&(e.current=r)}m.defaultProps={displayAs:"contents"},m.displayName="CachedSubtreeComponent",(0,i.Ng)(void 0,e=>({dispatch:e}))},255600:(e,r,n)=>{n.d(r,{JG:()=>h,Jl:()=>_,SO:()=>p,U_:()=>m,X2:()=>E,gJ:()=>g,ul:()=>f});var a=n(846288),i=n(437068),o=n(73041),s=n(314540),l=n(492366),c=n(914077),d=n(567095),u=n(263352);function m(){let e=(0,o.my)();return e===c.nT.Whiteboard?d.$A.FigJam:(0,c.yY)(e)?d.$A.Design:e===c.nT.DevHandoff?d.$A.Handoff:e===c.nT.Slides?d.$A.Slides:null}let p="recent-face-stamps-figjam",h="recent-whiteboard-tools-figjam";function _(e,r){if(e===d.$A.FigJam)switch(r){case l.bD.PLUGIN:return"recent-plugins-figjam";case l.bD.WIDGET:return"recent-widgets-figjam";case l.bD.HUB_FILE:return"recent-templates-figjam";case d.dB.FACE_STAMP:return p;case d.dB.WHITEBOARD_TOOL:return h;default:return null}if(e===d.$A.Design)switch(r){case l.bD.PLUGIN:return"recent-plugins-figma-design";case l.bD.WIDGET:return"recent-widgets-figma-design";default:return null}if(e===d.$A.Handoff)return r===l.bD.PLUGIN?"recent-plugins-handoff":null;if(e===d.$A.Slides)switch(r){case l.bD.HUB_FILE:return"recent-templates-piper";case l.bD.PLUGIN:return"recent-plugins-slides"}return null}function g(e,r){if(!i.x4)return[];let n=[],a=_(e,r),o=a&&i.x4.getItem(a);try{n=o&&JSON.parse(o)||[]}catch(e){}return n.map(e=>({...e,type:e.type||d.vt.CommunityResource}))}function f(e){let r=(0,u.uF)(e),n=e.community_publishers.accepted.map(e=>({isPending:!1,profile:{id:e.id,profileHandle:e.profile_handle,user:null,team:null,org:null,[e.entity_type]:{name:e.name}},role:s.un.CREATOR}));return r.community_publishers=n,r}function E(e){switch(e.type){case d.vt.CommunityResource:return e.id;case d.vt.TeamTemplate:return e.key;default:(0,a.xb)(e)}}},597112:(e,r,n)=>{n.d(r,{Aw:()=>b,XV:()=>f,v9:()=>y}),n(834825);var a=n(805014);n(851169);var i=n(777535),o=n(875877),s=n(524940),l=n(481954),c=n(827473),d=n(710443),u=n(957020),m=n(567095);n(210317),n(806772);var p=n(639215),h=n(387583),_=n(34062);let g=e=>null==e||e.type===u.PW.STATE_GROUP?null:e?.containing_frame?.containingStateGroup?.nodeId||null;function f(e,r,n){if(!e)return{selectedItem:null,relatedItems:[]};let a=(0,_.QL)(e,n);if(!a)return function(e,r){let n=(0,l.Qx)(r),a=r.local.components[e]??r.local.stateGroups[e],i=g(a),o=i?n[i]:a,s=E(o,Object.values(n??{}));return{selectedItem:o,relatedItems:s}}(e,r);let{publishID:i,libraryKey:s}=a,d=o.atomStore.get(h.qp)[s],u=(0,c.iP)(r.publishedByLibraryKey.components,{library_key:s,team_id:d?.team_id??null}),m=(0,c.iP)(r.publishedByLibraryKey.stateGroups,{library_key:s,team_id:d?.team_id??null}),p={...(0,l.Jl)(u),...m},f=function(e,r){let n=g(e);return n?r[n]:e}(u[i]??m[i],p),y=E(f,Object.values(p??{}));return{selectedItem:f,relatedItems:y}}function E(e,r){if(!e||!e.containing_frame?.nodeId&&1===(0,d.ke)(e.name).length)return[];let n=(0,d.In)(e.name);return r.filter(r=>(0,c.nJ)(r.containing_frame,e?.containing_frame)&&(0,d.In)(r.name)===n)}function y(e,r,n,o,l,c,d,h){if(e){if((0,p.Oo)(e,n)){if(e.type===u.PW.COMPONENT){let r=e.node_id;a.glU.replaceSymbolBackingInstances({[r]:o},c)}else{let r=a.glU.getSimilarStates(o,e.node_id,"");a.glU.replaceSymbolBackingInstances(r,c)}(0,i.sx)("Instance Swapped To Local Component",{source:l,...d,queryId:h})}else r(s.uO({item:e,instanceGUIDs:o,sourceForTracking:l,storeInRecentsKey:m.$A.Design,usedSwapInstanceKeyboardShortcut:c,queryId:h??void 0}))}}function b(e){a.glU.replaceSymbolBackingInstances(e,!1)}},421023:(e,r,n)=>{n.d(r,{$Z:()=>S,IE:()=>B,Iu:()=>U,K:()=>W,Np:()=>A,Tk:()=>x,U2:()=>H,YP:()=>M,bW:()=>D,s5:()=>G,vU:()=>F,xS:()=>w,yn:()=>k,zg:()=>V});var a=n(598002),i=n(841962),o=n(750570),s=n(555834),l=n(943813),c=n(784149),d=n(829518),u=n(396479),m=n(914077),p=n(893850),h=n(428064),_=n(661842),g=n(358078),f=n(738402),E=n(355804),y=n(105809),b=n(609782),v=n(659830),T=n(547650),I=n(682403);let S=new u.k([new s.$T,new v.f,new f.YY,new b.a,new l.m,new _.B,new c.G,new d._,new y.N,new E.u,new g.i,new T.T]);function w(e,r){return new URL(A(e,r),document.baseURI).href}function A(e,r){return S.selectedViewToPath(r,e)}let C=["drafts","fonts","libraries","search","settings","plugins","widgets","user"].concat(s.nw),N=RegExp(`^/files/([0-9]+)/(?:${C.join("|")})(.*)$`),L=RegExp("^/files/([0-9]+)/?$"),O=RegExp(`^/files/team/([0-9]+)/(?:${C.join("|")})(.*)$`),R=(e,r,n)=>{let a=e.split("/");return!a[1]||"files"!==a[1]||(0,i.kc)().ps_benchmark&&6===a.length&&"files"===a[1]&&"team"===a[2]&&"restore"===a[5]||(e.match(N)?a.splice(2,1):e.match(O)?a.splice(2,2):(a.length>=3&&r&&a[2]===r&&a.splice(2,1),a.length>=3&&n&&a[3]===n&&a.splice(2,2))),a},P=(e,r)=>{let n=e.split("/");return n[1]&&"files"===n[1]&&(e.match(N)?n.splice(2,1):n.length>=3&&r&&n[2]===r&&n.splice(2,1)),n};function D(e){let r=e.match(N);if(r)return r[1];let n=e.match(L);return n?n[1]:null}function k(e){let r=e.match(O);return r?r[1]:null}function M(e){let r=P(e,(0,I.pk)());return""===r[r.length-1]&&r.splice(r.length-1,1),r}function F(e,r,n,a,s={view:"recentsAndSharing"}){let l=[],c=(0,i.kc)().dev_mode_suggested_upgrades&&n&&!!(0,o.qg)(n).devModeSuggestions,d=n&&!!(0,o.qg)(n).dashDeepLink;return(0,i.kc)().ps_benchmark?l=R(r,e.currentUserOrgId,e.currentTeamId):c||d?(l=R(r,e.currentUserOrgId,e.currentTeamId),r.match(O)&&(l[3]=P(r,e.currentUserOrgId)[3])):l=P(r,e.currentUserOrgId),""===l[l.length-1]&&l.splice(l.length-1,1),S.pathToSelectedView(e,l,n,a)||s}function x(e,r,n,a,i){if(r===a&&n===i)return e;let o=r===p.O.ORG?n:`team/${n}`,s=a===p.O.ORG?i:`team/${i}`;return e.replace(o,s)}function U(e,r){return S.selectedViewName(r,e)}function B(e){let r=e.modalShown;for(;r;){if("ACCOUNT_SETTINGS_MODAL"===r.type)return!0;r=r.prevModal}return!1}function V(e){return"fullscreen"===e.view&&e.workshopModeInfoLoaded&&e.workshopModeInfo&&e.editorType===m.nT.Whiteboard&&new Date<e.workshopModeInfo.until||!1}function G(e){return"fullscreen"===e.view&&e.nodeId||null}function H(e){switch(e.view){case"fullscreen":return e.fileKey||null;case"mobileViewer":return e.file?.key||null;case"prototype":return null==e.file&&a.Z({data:{selectedView:e}}),e.file.key;default:return null}}function W(e){return"recentsAndSharing"===e.view&&(void 0===e.tab||e.tab===h.G.RECENTLY_VIEWED)}},477e3:(e,r,n)=>{n.d(r,{j:()=>s,q:()=>l});var a=n(188507),i=n(841962),o=n(890255);function s(e){let{currentUserOrgId:r}=e;return r?`/${r}`:(0,i.kc)().ps_benchmark?(0,o.i)(e):""}function l(){return(0,a.d4)(s)}},617355:(e,r,n)=>{n.d(r,{Z:()=>f});var a=n(48451),i=n(805014),o=n(509399),s=n(875877),l=n(48929),c=n(225371),d=n(267369),u=n(535461),m=n(827473),p=n(612110),h=n(211270),_=n(192773);let g=(0,s.atom)({});class f{constructor(e){this.store=e,this.dispatch=e=>{this.store.dispatch(e)}}showEyedropper(e,r,n,a,i,o,s,l,d,u){this.dispatch(c.Gm({color:e,width:r,height:n,rgba:a,grid:i,cursorPosition:o,assetId:s,variableSetModeId:l,resolvedVariableColor:d,dropperData:u}))}hideEyedropper(){this.dispatch(c.Gm(null))}updateSelectionImages(e){let r=s.atomStore.get(g),n=Object.keys(e).length!==Object.keys(r).length;if(!n){for(let a in r)if(!e[a]){n=!0;break}}n&&s.atomStore.set(g,e)}updateSelectionPaintsWithFillEncodedPaints(e,r,n,i,o,s,l){let c=(0,p.S)(e,r,n,i,o,l),u=this.store.getState().mirror.selectionPaints;(!(0,a.c2)(u.paints,c)||u.emptyDueToLimitExceeded||s)&&(this.store.dispatch(d.QA(c)),s&&this.store.dispatch(d.Xp(!0)))}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(e,r){var n=[];for(let r of e){let e=(0,p.K)(r);e?n.push(e):console.error(`Failed to decode: ${r}`)}n=n.map((e,n)=>(e.variableScopes=new Set(r?r[n]:[]),e));let i=this.store.getState().mirror.selectionPaints;(!(0,a.c2)(i.paintsDirectlyOnSingleNode,n)||i.emptyDueToLimitExceeded)&&this.store.dispatch(d.n0(n))}updatePaintStyles(e,r,n){let i=this.store.getState().library,o=this.store.getState().mirror.sceneGraph,s=r.map(e=>{let r=(0,m.Gp)(e.key,e.guids,i);return r?{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:(0,m.uH)(r,o),variableScopes:new Set(e.variableScopes),isOnlyDirectlySelected:e.isOnlyDirectlySelected}:{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:"",variableScopes:new Set(e.variableScopes),isOnlyDirectlySelected:e.isOnlyDirectlySelected}});s.sort((e,r)=>e.count>r.count?-1:e.count===r.count&&e.styleName<r.styleName?-1:1),(!(0,a.c2)(e,s)||this.store.getState().mirror.selectionPaints.emptyDueToLimitExceeded)&&this.store.dispatch(n(s))}updateSelectionPaintsWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.styles,e,d.Lh)}updateSelectionTextAndEffectStyles(e){l.gq.syncFromFullscreen({styles:e})}updatePaintsDirectlyOnSingleNodeWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.stylesDirectlyOnSingleNode,e,d.uQ)}clearSelectionPaintsDueToLimitExceeded(){this.store.dispatch(d.Mc())}clearSelectionTextAndEffectStylesDueToLimitExceeded(){l.gq.syncFromFullscreen({styles:[]})}updateSelectionPaintFromDropper(e){let r=this.store.getState().currentSelectionPaintInPicker;if(null==r.originalPaint)return!1;let n=(0,p.K)(e);return null==n?(console.error(`Failed to apply paint: ${e}`),!1):(i.Osy.updatePaint((0,o.GP)(r.originalPaint),e,!0,null),this.store.dispatch(d.oI({...r,updatedPaintFromDropper:n.paint})),!0)}pickerHasSelectionPaintOpen(){return null!=this.store.getState().currentSelectionPaintInPicker.originalPaint}originalPaintForCurrentSelectionPaintsPicker(){let e=this.store.getState().currentSelectionPaintInPicker.originalPaint;return null==e?"":(0,o.GP)(e)}colorPickerSelectedVariable(){let e=this.store.getState().variablePickerShown;if(e.isShown&&e.resolvedType===i.rXF.COLOR&&"variable-picker-alias"===e.type)return{varId:e.variableID,modeId:e.modeID};let r=this.store.getState().pickerShown?.id,n=r?.startsWith(u.Yr),a=s.atomStore.get(_.E_);return n&&a?a:{}}isPrototypingModalOpen(){return this.store.getState().pickerShown?.id===u.o$}validateCopyBuffer(e,r){let n=this.store.getState().openFile?.key;n&&h.Z.postValidateCopy({nodeIds:e,fileKey:n,copyType:r})}}},632673:(e,r,n)=>{n.d(r,{hK:()=>s});var a=n(302245),i=n(411072),o=n(569652);let s=e=>e.selectedView;(0,a.Mz)(s,e=>"workspace"===e.view&&e.subView===o.V0.DIRECTORY?e.workspaceId:void 0);let l=(0,a.Mz)(s,e=>"team"===e.view?e.teamId:void 0),c=(0,a.Mz)(s,e=>"folder"===e.view?e.folderId:void 0),d=(0,a.Mz)(s,e=>e.currentTeamId,(e,r)=>"allProjects"===e.view?r:void 0),u=(0,a.Mz)(l,d,e=>e.teams,(e,r,n)=>e&&n[e]||r&&n[r]),m=(0,a.Mz)(c,e=>e.folders,(e,r)=>e&&r[e]),p=(0,a.Mz)(m,i.D,(e,r)=>e&&e.id!==r?e:void 0);(0,a.Mz)(u,p,(e,r)=>e||r)},414546:(e,r,n)=>{n.d(r,{k1:()=>o,s6:()=>c,t_:()=>s,vx:()=>l});var a=n(302245),i=n(885123);let o=(0,n(927150).bt)(e=>e.fileByKey,()=>i.D,{notifyImmediate:!0}),s=e=>e.fileByKey;function l(e){return e.fileVersion}function c(e){let r=e.mirror.appModel.currentPage;return e.mirror.appModel.pagesList.length>0&&!!e.mirror.appModel.pagesList[0]&&e.mirror.appModel.pagesList[0].nodeId===r}(0,a.Mz)([s],e=>{let r={};for(let n of Object.keys(e)){let a=e[n];a&&(r[n]=a.name)}return r})},140354:(e,r,n)=>{n.d(r,{O:()=>s});var a=n(875877),i=n(927150);n(906597);let o=(0,i.bt)(e=>e.hubFiles),s=(0,a.atom)(e=>{let r=e(o),n={};for(let e of Object.values(r))e.library_key&&(n[e.library_key]=e);return n})},77383:(e,r,n)=>{n.d(r,{$c:()=>ev,AC:()=>tv,Dc:()=>e5,F9:()=>Z,FZ:()=>ep,GS:()=>eL,Io:()=>F,Iy:()=>tb,JI:()=>e9,MH:()=>ea,MW:()=>eK,Mh:()=>U,Pd:()=>B,Pg:()=>W,Sh:()=>eI,Wz:()=>ec,bh:()=>el,cM:()=>Q,dM:()=>ei,dU:()=>eN,e_:()=>M,fA:()=>e2,ju:()=>eY,oB:()=>e6,p6:()=>tI,p9:()=>eC,qN:()=>tA,se:()=>ed,tK:()=>eo,vQ:()=>tT,x$:()=>ty,x6:()=>em,y6:()=>eB});var a=n(834825),i=n(650437),o=n(805014),s=n(33011),l=n(636149),c=n.n(l),d=n(595977),u=n.n(d),m=n(35645),p=n.n(m),h=n(802691),_=n.n(h),g=n(302245),f=n(841962),E=n(875877),y=n(299249),b=n(650981),v=n(151048),T=n(643225),I=n(144400),S=n(176160),w=n(927150),A=n(827473),C=n(313449),N=n(631762),L=n(384894),O=n(957020),R=n(947342),P=n(401562),D=n(404227),k=n(785965);let M=e=>e.library,F=e=>e.library.libraryPublishingMode,x=e=>e.openFile?.publishedHubFile,U=e=>e.library.openHubFilePublished__LIVEGRAPH.components,B=e=>e.library.openHubFilePublished__LIVEGRAPH.stateGroups,V=e=>e.library.openHubFilePublished__LIVEGRAPH.styles,G=e=>e.library.openHubFilePublished__LIVEGRAPH.variables,H=e=>e.library.openHubFilePublished__LIVEGRAPH.variableSets,W=(0,g.Mz)([U,V,G,H,B],(e,r,n,a,o)=>!(0,i.Im)(e)||!(0,i.Im)(r)||!(0,i.Im)(n)||!(0,i.Im)(a)||!(0,i.Im)(o)),K=(0,g.Mz)([S.XJ,N.qV],(e,r)=>e&&r[e]||{}),Y=(0,g.Mz)([S.XJ,N.ZA],(e,r)=>e&&r[e]||{}),$=e=>e.library.local.thumbnails,j=e=>e.library.openFilePublished__LIVEGRAPH.styles,z=e=>e.library.openFilePublished__LIVEGRAPH.variableSets,q=e=>e.library.openFilePublished__LIVEGRAPH.modules,Z=(0,g.Mz)([K,j,z,q],(e,r,n,a)=>!(0,i.Im)(r)||!(0,i.Im)(e)||!(0,i.Im)(n)||!(0,i.Im)(a)),X=(0,g.Mz)([e=>e.library.local.styles,S.sS,F,e=>e.library.publishableStyles,V,x,$],(e,r,n,a,i,o,l)=>{if(n===O.o.HUBFILE&&o){let n=(0,s.l)(o.libraryKey),{newLocal:c}=(0,A.rC)(A.w8,a,i,e,l,{},r||"",n,new Set,O.PW.STYLE);return c}return e}),J=(0,g.Mz)([j,V,F],(e,r,n)=>n===O.o.HUBFILE?r:e),Q=(0,g.Mz)([X,J],(e,r)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let n={};for(let a of Object.values(e)){let e=eR(a,r[a.node_id],eD);n[a.node_id]={...a,status:e}}return n}),ee=(0,g.Mz)([e=>e.library.local.components,S.sS,F,U,x,e=>e.library.publishableSymbols,$],(e,r,n,a,i,o,l)=>{if(n===O.o.HUBFILE&&i){let n=(0,s.l)(i.libraryKey),{newLocal:c}=(0,A.rC)(A.i_,o,a,e,l,{},r||"",n,new Set,O.PW.COMPONENT);return c}return e}),et=(0,g.Mz)([K,U,F],(e,r,n)=>n===O.o.HUBFILE?r:e),er=(0,g.Mz)([function(e){return e.library.local.stateGroups},S.sS,F,B,x,e=>e.library.publishableStateGroups,$],(e,r,n,a,i,o,l)=>{if(n===O.o.HUBFILE&&i){let n=(0,s.l)(i.libraryKey),{newLocal:c}=(0,A.rC)(A.LB,o,a,e,l,{},r||"",n,new Set,O.PW.STATE_GROUP);return c}return e}),en=(0,g.Mz)([Y,B,F],(e,r,n)=>n===O.o.HUBFILE?r:e),ea=(0,g.Mz)([ee,et,er,en],(e,r,n,a)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let i={},o=(e,r)=>{if(r?.content_hash!==e.content_hash||!(0,A.pD)(r.name,e?.name)||!(0,A.pD)(r.description,e.description)||(0,A.Q_)(r.containing_frame,e?.containing_frame))return!0;let i=(0,A.E2)(e),o=i&&n[i]||null,s=(0,A.E2)(r),l=s&&a[s]||null;return o?!l||ek(o,l):null!=l};for(let n of Object.values(e)){let e=eR(n,r[n.node_id],o);i[n.node_id]={...n,status:e}}return i}),ei=(0,g.Mz)([er,en],(e,r)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let n={};for(let a of Object.values(e)){let e=eR(a,r[a.node_id],ek);n[a.node_id]={...a,status:e}}return n}),eo=(0,y.P8)([e=>{let r={};return Object.entries(e.library.localVariablesById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},e=>e.library.openFilePublished__LIVEGRAPH.variables,S.tB,F,x,G],(e,r,n,a,i,o)=>{let l={},c=a===O.o.HUBFILE&&i?o:r,d=n?.key??"",u=a===O.o.HUBFILE&&i?(0,s.l)(i.libraryKey):(0,s.l)(n?.libraryKey??"");for(let[r,n]of Object.entries(c))e.hasOwnProperty(r)||(l[r]={...n,subscriptionStatus:"LOCAL",isPublishable:!1,modeValues:{},keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:d,file_key_source:b.Ps.LOCAL_FILE,library_key:u,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=c[r.node_id],n=eR(r,e,eM);l[r.node_id]={...r,status:n,file_key:d,file_key_source:b.Ps.LOCAL_FILE,library_key:u,key:e?.key,hasOnlyBeenReordered:!!(r&&e&&r.version===e.version&&r.sortPosition!==e.sortPosition)}}return l}),es=(0,g.Mz)([eo],e=>c()(Object.values(e),e=>e.variableSetId)),el=(0,y.P8)([e=>{let r={};return Object.entries(e.library.localVariableSetsById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},z,es,S.tB,F,x,H],(e,r,n,a,i,l,c)=>{let d=i===O.o.HUBFILE&&l?c:r,u=a?.key??"",m=i===O.o.HUBFILE&&l?(0,s.l)(l.libraryKey):(0,s.l)(a?.libraryKey??""),p={};for(let[r,n]of Object.entries(d))e.hasOwnProperty(r)||(p[r]={...n,subscriptionStatus:"LOCAL",modes:[],defaultModeID:"",isPublishable:!1,keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:u,file_key_source:b.Ps.LOCAL_FILE,library_key:m,variableSetError:o.HG$.NONE,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=d[r.node_id],a=function(e,r,n){let a=eR(e,r,eF);if(a!==O.E8.CURRENT)return a;for(let e of n)if(e.status!==O.E8.CURRENT&&e.status!==O.E8.NOT_STAGED)return O.E8.CHANGED;return O.E8.CURRENT}(r,e,n[r.node_id]??[]);p[r.node_id]={...r,status:a,file_key:u,file_key_source:b.Ps.LOCAL_FILE,library_key:m,key:e?.key,hasOnlyBeenReordered:!!(r&&e&&r.version==r.version&&r.sortPosition!==e.sortPosition)}}return p}),ec=(0,g.Mz)([ea],e=>{let r={};for(let n of Object.values(e)){let e=(0,A.E2)(n);null!=e&&(r[e]=r[e]??[],r[e].push(n))}return r}),ed=(0,g.Mz)([ea],e=>_()(e,e=>!(0,A.ad)(e)));function eu(e,r){return!!r&&!(r.version===e.version&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description))}let em=(0,g.Mz)([e=>e.library.local.modules,q,e=>e.library.openHubFilePublished__LIVEGRAPH.modules,x,F],(e,r,n,a,i)=>{if(!(0,f.kc)().dse_module_publish)return{};let o={};if(i===O.o.HUBFILE&&a)for(let[r,a]of Object.entries(n))Object.keys(e).includes(r)||(o[r]={...a,status:O.E8.DELETED,deletedFromSceneGraph:!0});let s=i===O.o.HUBFILE?n:r;for(let r of Object.values(e)){let e=eR(r,s[r.node_id],eu);o[r.node_id]={...r,status:e}}return o});(0,g.Mz)([em],e=>(0,f.kc)().dse_editor_templates_v1?Object.fromEntries(Object.entries(e).filter(([,e])=>e.moduleSource===o.QjO.EDITOR_TEMPLATE)):{});let ep=(0,g.Mz)([ed,ei],(e,r)=>({...e,...r})),eh=(0,g.Mz)([ep],e=>u()(e,e=>(0,A.CG)(e))),e_=(0,g.Mz)([ep],e=>Object.values(e).some(e=>(0,A.HF)(e.status))),eg=(0,g.Mz)([em],e=>Object.values(e).some(e=>(0,A.HF)(e.status)));(0,g.Mz)([e_,eg],(e,r)=>e||r);let ef=(0,g.Mz)([ep,D.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),eE=(0,g.Mz)([em,D.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),ey=(0,g.Mz)([Q,ep,el,em],(e,r,n,a)=>Object.keys(e).length>0||Object.keys(r).length>0||Object.keys(n).length>0||Object.keys(a).length>0),eb=(0,w.bt)(ey),ev=(0,E.atom)(e=>{if(e(eb))return!0;for(let r of Object.keys(I.Mk))if((0,L.O)(r)&&I.Mk[r].local){for(let n of Object.values(e(I.Mk[r].local)))if(!n.isSoftDeleted)return!0}return!1}),eT=(0,P.n)((0,g.Mz)([ep,em],(e,r)=>Object.keys(e).length>0||Object.keys(r).length>0)),eI=(0,w.bt)(eT),eS=(e,r)=>null!=e.status&&(!!(0,A.lg)(e.status)||!!(0,A.Hb)(e.status)&&(r?r.has(e.node_id):!!e.old_key)),ew=(e,r)=>eS(e,r)&&(0,A.HF)(e.status),eA=(0,w.bt)(e=>e.userStateLoaded),eC=(0,E.atom)(e=>e(eA)&&e(S.yV)?.canEdit&&(e(tA)||e(ev))),eN=(0,g.Mz)([ea,ei,Q,(e,r)=>r],eO),eL=(0,g.Mz)([ea,ei,Q],(e,r,n)=>eO(e,r,n,void 0));function eO(e,r,n,a){let i={...e,...r,...n},o=new Set(a?Object.keys(a).filter(e=>"FORCED_COPY"!==a[e].publishType):Object.values(i).filter(e=>!!e.old_key).map(e=>e.node_id));return Array.from(o).map(r=>e[r]&&(0,A.E2)(e[r])).filter(e=>!!e).forEach(e=>{o.add(e)}),o}let eR=(e,r,n)=>{let a=r&&null==r.unpublished_at,i="isSoftDeleted"in e&&e.isSoftDeleted,o=!!e.isPublishable&&!i;return a&&!o?O.E8.DELETED:!a&&o?O.E8.NEW:a||o?n(e,r)?O.E8.CHANGED:O.E8.CURRENT:O.E8.NOT_STAGED},eP=(e,r)=>!(r&&r.content_hash===e?.content_hash&&(0,A.pD)(r.name,e.name)&&(0,A.pD)(r.description,e.description)),eD=(e,r)=>eP(e,r)||!(0,A.pD)(r.sort_position,e.sort_position),ek=(e,r)=>!(r&&r.version===e.version&&!(0,A.Q_)(r.containing_frame,e?.containing_frame)&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description)),eM=(e,r)=>!e||!r||r.version!==e.version||r.sortPosition!==e.sortPosition,eF=(e,r)=>!(r&&r.version===e?.version&&r.sortPosition===e.sortPosition);function ex(e,r,n,i){let[o,s]=p()(r,r=>eS(r,e)),[l,c]=p()(o,n),[d,u]=p()(s,e=>(0,A.HF)(e.status));return{modified:{erroneous:(0,a.Ul)(l,...i),wellFormed:(0,a.Ul)(c,...i)},unmodified:{published:(0,a.Ul)(d,...i),unpublished:(0,a.Ul)(u,...i)}}}function eU(e,r){return null==r?eG(e):eV(e,r)}let eB=(0,E.atomFamily)(e=>{let r=e?(0,w.bt)(r=>eU(r,e)):(0,w.bt)(eG),n=e?(0,w.bt)(r=>eN(r,e)):(0,E.atom)(new Set);return(0,E.atom)(e=>{let a=e(r),i=e(n),o=Object.values(e(R.t).data??{});return{...a,libraryAssets:{[O.PW.RESPONSIVE_SET]:ex(i,(0,L.O)(O.PW.RESPONSIVE_SET)?o.filter(e=>e.type===O.PW.RESPONSIVE_SET):[],()=>!1,[A.gA]),[O.PW.CODE_COMPONENT]:ex(i,(0,L.O)(O.PW.CODE_COMPONENT)?o.filter(e=>e.type===O.PW.CODE_COMPONENT):[],()=>!1,[A.gA])}}})}),eV=(0,g.Mz)([Q,ea,ei,ep,el,eo,em,eN,(e,r)=>r],eH),eG=(0,g.Mz)([Q,ea,ei,ep,el,eo,em,eL],(e,r,n,a,i,o,s,l)=>eH(e,r,n,a,i,o,s,l,void 0));function eH(e,r,n,a,i,o,s,l,c){let d=(e,r)=>{if(!c)return 0;let n=c[e.node_id],a=c[r.node_id];return n&&a?"FORCED_COPY"===n.publishType&&"FORCED_COPY"!==a.publishType?1:"FORCED_COPY"!==n.publishType&&"FORCED_COPY"===a.publishType?-1:0:0},u=[...new Set(Object.values(o).filter(e=>!e.isPublishable).map(e=>e.variableSetId))].map(e=>i[e]).filter(e=>!!e);return{styles:ex(l,Object.values(e),()=>!1,[A.Lk,d]),components:ex(l,Object.values(r),A.zE,[A.gA,d]),stateGroups:ex(l,Object.values(n),A.zE,[A.gA,d]),productComponents:ex(l,Object.values(a),A.zE,[A.gA,d]),variableSets:ex(l,(0,f.kc)().ds_variables_extended_sets?Object.values(i):Object.values(i).filter(e=>!(0,O.GI)(e)),A.RQ,[A.MA]),variableSetsWithHiddenVariables:ex(l,u,()=>!1,[A.MA]),variables:ex(l,Object.values(o),()=>!1,[A.MA]),modules:ex(l,(0,L.O)(O.PW.MODULE)?Object.values(s):[],()=>!1,[A.gA])}}let eW=(0,y.P8)([es],e=>Object.fromEntries(Object.entries(e).map(([e,r])=>[e,ex(new Set,r,()=>!1,[A.MA])]))),eK=()=>(0,y.P8)([eW,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.modified.wellFormed:[]}),eY=()=>(0,y.P8)([eW,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.unmodified.unpublished.filter(e=>!e.isPublishable):[]}),e$=(0,g.Mz)([eU],e=>e.styles.modified.wellFormed),ej=(0,g.Mz)([Q],e=>Object.values(e).filter(e=>ew(e))),ez=(0,g.Mz)([eU],e=>e.components.modified.wellFormed),eq=(0,g.Mz)([eU],e=>e.stateGroups.modified.wellFormed),eZ=(0,g.Mz)([eU],e=>e.productComponents.modified.wellFormed),eX=(0,g.Mz)([eZ],e=>e.filter(e=>(0,A.HF)(e.status))),eJ=(0,g.Mz)([eU],e=>e.variableSets.modified.wellFormed),eQ=(0,g.Mz)([eJ],e=>e.filter(e=>(0,A.HF)(e.status))),e0=(0,g.Mz)([eU],e=>(0,L.O)(O.PW.MODULE)?e.modules.modified.wellFormed:[]),e1=(0,g.Mz)([e0],e=>e.filter(e=>(0,A.HF)(e.status))),e2=(0,g.Mz)([S.tB,k.P],(e,r)=>!!((0,f.kc)().cmty_lib_admin_publish&&e?.publishedHubFile)||!((0,f.kc)().ps_benchmark&&(0,T.jd)(e?.project))&&!!(e&&(0,C.w5)(e.teamId?r[e.teamId]:null))),e5=e$,e4=(0,g.Mz)([e5],e=>e.length>0),e7=(0,E.atomFamily)(e=>(0,w.bt)(r=>e4(r,e))),e8=(0,g.Mz)([ej],e=>e.length>0),e3=(0,w.bt)(e8),e6=(0,g.Mz)([ez,e2],(e,r)=>r?e:[]),e9=(0,g.Mz)([eq,e2],(e,r)=>r?e:[]),te=(0,g.Mz)([eZ,e2],(e,r)=>r?e:[]),tt=(0,g.Mz)([te],e=>e.length>0),tr=(0,E.atomFamily)(e=>(0,w.bt)(r=>tt(r,e))),tn=(0,g.Mz)([eX,e2],(e,r)=>r?e:[]),ta=(0,g.Mz)([tn],e=>e.length>0),ti=(0,E.atomFamily)(e=>(0,w.bt)(r=>ta(r,e))),to=(0,g.Mz)([eJ],e=>e),ts=(0,g.Mz)([to],e=>e.length>0),tl=(0,E.atomFamily)(e=>(0,w.bt)(r=>ts(r,e))),tc=(0,g.Mz)([eQ],e=>e),td=(0,g.Mz)([tc],e=>e.length>0),tu=(0,E.atomFamily)(e=>(0,w.bt)(r=>td(r,e))),tm=(0,g.Mz)([e0,e2],(e,r)=>r?e:[]),tp=(0,g.Mz)([tm],e=>e.length>0),th=(0,E.atomFamily)(e=>(0,w.bt)(r=>tp(r,e))),t_=(0,g.Mz)([e1],e=>e.length>0),tg=(0,E.atomFamily)(e=>(0,w.bt)(r=>t_(r,e))),tf=(0,E.atomFamily)(e=>(0,E.atom)(r=>{for(let n of Object.values(r(eB(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type))return!0;return!1})),tE=(0,E.atomFamily)(e=>(0,E.atom)(r=>{for(let n of Object.values(r(eB(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type)&&n.modified.wellFormed.some(e=>(0,A.HF)(e.status)))return!0;return!1})),ty=(0,E.atomFamily)(e=>{let r=(0,w.bt)(r=>e5(r,e)),n=(0,w.bt)(r=>te(r,e)),a=(0,w.bt)(r=>to(r,e)),i=(0,w.bt)(r=>tm(r,e));return(0,E.atom)(o=>{let s=o(r),l=o(n),c=o(a),d=o(i),u=o(eB(e)),m=Object.keys(u.libraryAssets).flatMap(e=>(0,L.O)(e)?u.libraryAssets[e].modified.wellFormed:[]);return[...s.map(e=>e.node_id),...l.map(e=>e.node_id),...c.map(e=>e.node_id),...d.map(e=>e.node_id),...m.map(e=>e.node_id)]})}),tb=(0,E.atomFamily)(e=>(0,E.atom)(r=>r(e7(e))||r(tr(e))||r(tl(e))||r(th(e))||r(tf(e))));(0,E.atomFamily)(e=>(0,E.atom)(r=>r(e3)||r(ti(e))||r(tu(e))||r(tg(e))||r(tE(e)))),(0,g.Mz)([ef,te],(e,r)=>r.some(r=>e[r.node_id])),(0,g.Mz)([eE,tm],(e,r)=>r.some(r=>e[r.node_id])),(0,g.Mz)([eh,N.c5],(e,r)=>({...r,...e}));let tv=(0,g.Mz)([tm],e=>e.map(e=>e.node_id));(0,g.Mz)([e9],e=>e.map(e=>e.node_id));let tT=(0,g.Mz)([e6,()=>(0,v.Pc)()],(e,r)=>e.filter(e=>e.deletedFromSceneGraph||r.includes(e.node_id)).map(e=>e.node_id)),tI=(0,g.Mz)([ea,()=>(0,v.Pc)()],(e,r)=>_()(e,e=>r.includes(e.node_id))),tS=(0,E.atom)(e=>Object.values(e(R.t).data??{}).some(e=>(0,A.HF)(e.status))),tw=(0,w.bt)(Z),tA=(0,E.atom)(e=>e(tw)||e(tS))},206102:(e,r,n)=>{n.d(r,{Bw:()=>z,S9:()=>ee,WE:()=>el,WJ:()=>ea,Yy:()=>j,bA:()=>er,cb:()=>eo,ij:()=>B,j_:()=>Z,jk:()=>X,kK:()=>Q,lm:()=>U,mO:()=>q,nm:()=>ec,pk:()=>ei,t_:()=>es,wy:()=>ed});var a=n(903570),i=n(879058),o=n(805014),s=n(695956),l=n.n(s),c=n(302245),d=n(875877),u=n(299249),m=n(653798),p=n(650981),h=n(365347),_=n(23478),g=n(179908),f=n(923219),E=n(927150),y=n(827473),b=n(892252),v=n(957020),T=n(719637),I=n(631762),S=n(404227),w=n(837384),A=n(241094);function C(e,r,n,a,o){let s=Object.create(null);for(let{key:r,version:a}of e)if(r){if(r in n){let e=r;r=n[r],a=o?.[e]===a?a:"FAKE_VERSION_FOR_MOVED_ITEM"}s[r]=s[r]||new Set,s[r].add(a)}for(let e of r)if(e in a){let r=a[e];s[r]=s[r]||new Set,s[r].add((0,i.Xf)("FAKE_VERSION_FOR_MOVED_ITEM"))}return s}let N=(0,c.Mz)([A.PX,e=>e.library.used__LIVEGRAPH.destinationStyleKeyToLegacySourceStyle],(e,r)=>Object.values(e).reduce((e,n)=>{if("loaded"!==n.status||!r[n.data.key])return e;let{key:a,version:i}=r[n.data.key];return e[a]=i,e},Object.create(null))),L=(0,c.Mz)([w._Q,S.O1,T.aR,T.BE,N],C),O=(0,c.Mz)([w.m0,S.T_,T.aR,T.BE],C),R=(0,c.Mz)([w.v3],e=>C(e,[],{},{})),P=(0,c.Mz)([w.Du],e=>Object.values(e).reduce((e,r)=>(e.has(r.key)||e.set(r.key,new Set),r.pageIds.forEach(n=>e.get(r.key)?.add(n)),e),new Map));function D(e,r,n){if(0===e.size)return!1;if(1===e.size){let a=Array.from(e)[0],i=n(r);return i?.toLowerCase()!==a.toLowerCase()}return!0}let k=(0,p.fv)();function M({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:a,getUpdateAsset:o}){let s=[];for(let l of Object.keys(r)){let c=e[(0,i.sg)(l)];!(!c||n&&(0,_.dp)(n,k(c)))&&D(r[(0,i.sg)(l)],c,a)&&s.push(o(c))}return s}let F=(0,c.Mz)([A.wi,L,h.d1,T.uB,T.tp,T.J8,w.tY,S.tX],(e,r,n,a,i,o,s,l)=>{let c=!1,d=[],u=!1;return{styleUpdatesForAllPages:M({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]};if(e.key in a&&(r.oldSubscribedKeysToUpdate=Array.from(a[e.key]),!o[e.key]))for(let e of(c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(u=!0);if(e.key in i){for(let n of(r.localIdsToUpdate=Array.from(i[e.key]),o[e.key]||(c=!0),r.localIdsToUpdate))if(l.has(n)){u=!0;break}}return(s.has(e.key)||r.oldSubscribedKeysToUpdate.some(e=>s.has(e))||r.localIdsToUpdate.some(e=>l.has(e)))&&d.push(r),r}}),styleUpdatesForCurrentPage:d,includesMoveUpdatesOnAnyPage:c,includesMoveUpdatesOnCurrentPage:u}}),x=(0,u.P8)([I.Ls,O],(e,r)=>{let n=Object.keys(r),a=Object.keys(e);return l()(n,a)}),U=(0,c.Mz)([x,I.m3,w.S_,S.dK],(e,r,n,a)=>{let i=new Map;for(let o of e){let e=n[o];if(!e)continue;let s=a.get(e.nodeId),l=s?.parentNode;if(s&&l&&s.isState&&l?.stateGroupKey){let e=r[l.stateGroupKey];e&&i.set(o,e)}}return i}),B=(0,c.Mz)([I.Ls,I.ZA,O,h.d1,T.uB,T.tp,w.ty,S.BA],(e,r,n,a,i,o,s,l)=>{let c=!1,d=!1,u=M({publishedAssetsByKey:e,usedVersionsByAssetKey:n,editingFile:a,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]},n=e.component_key;if(n in i)for(let e of(r.oldSubscribedKeysToUpdate=Array.from(i[n]),c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(d=!0);if(n in o){for(let e of(r.localIdsToUpdate=Array.from(o[n]),c=!0,r.localIdsToUpdate))if(l.has(e)){d=!0;break}}return r}}),m=[],p=[],h=[],_=[],g=new Set;for(let e of u){let n=e.containing_frame?.containingStateGroup?.nodeId;if(n){let a=r[e.library_key]?.[n];if(a){let r=h.find(e=>e.key===a.key);if(null==r&&(r={...a,newStateKeyToOutdatedItems:{}},h.push(r)),e.component_key){let n=e.component_key;r.newStateKeyToOutdatedItems[n]={oldSubscribedKeysToUpdate:e.oldSubscribedKeysToUpdate,localIdsToUpdate:e.localIdsToUpdate},(s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&!g.has(a.key)&&(_.push(r),g.add(a.key))}}}else m.push(e),(e.component_key&&s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&p.push(e)}return{componentUpdatesForAllPages:m,stateGroupUpdatesForAllPages:h,includesMoveUpdatesOnAnyPage:c,componentUpdatesForCurrentPage:p,stateGroupUpdatesForCurrentPage:_,includesMoveUpdatesOnCurrentPage:d}}),V=(0,p.fv)(),G=(0,u.P8)([I.a3,I.gJ,R,h.d1,P,e=>e.mirror.appModel.currentPage],(e,r,n,a,s,l)=>{let c={},d=new Set,u=o.glU?.getInternalCanvasNodeId();for(let o of Object.keys(n)){let p=e[(0,i.ey)(o)];if(!p||a&&(0,_.dp)(a,V(p)))continue;let h=r[(0,i.yG)(p.variableCollectionKey)];if(!h)continue;let g=c[(0,i.yG)(p.variableCollectionKey)]||{...h,libraryVariableIdsForUpdate:[]};if((0,v.GI)(g)){(0,m.x1)("variables","Encountered variable bound to variable set extension");continue}let f=n[p.key];if(f&&D(f,p,e=>e.version)&&g.libraryVariableIdsForUpdate.push(p.node_id),g.libraryVariableIdsForUpdate.length>0&&(c[(0,i.yG)(h.key)]=g,s.has(h.key))){let e=s.get(h.key);(e?.has(l)||u&&e?.has(u))&&d.add(h.key)}}let p=Object.values(c),h=p.filter(e=>d.has(e.key));return{variableSetUpdatesForAllPages:p,variableSetUpdatesForCurrentPage:h}}),H=(0,E.bt)(B),W=(0,E.bt)(F),K=(0,E.bt)(G),Y=(0,d.atom)(e=>{let r=[],n=new Set;for(let a of Object.values(e(J)))for(let e of a)if(e.type===v.PW.CODE_COMPONENT){if(n.has(e.key))continue;n.add(e.key),r.push(e)}return r}),$=(0,d.atom)(e=>{let r=e(g.z);return e(J)[r]??[]}),j=(0,d.atomFamily)(e=>(0,d.atom)(r=>{let{componentUpdatesForAllPages:n,componentUpdatesForCurrentPage:a}=r(H);return e===y.aD.ALL?n:a})),z=(0,d.atomFamily)(e=>(0,d.atom)(r=>{let{stateGroupUpdatesForAllPages:n,stateGroupUpdatesForCurrentPage:a}=r(H);return e===y.aD.ALL?n:a})),q=(0,d.atomFamily)(e=>(0,d.atom)(r=>{let{styleUpdatesForAllPages:n,styleUpdatesForCurrentPage:a}=r(W);return e===y.aD.ALL?n:a})),Z=(0,d.selectAtom)(W,e=>e.styleUpdatesForAllPages),X=(0,d.atomFamily)(e=>(0,d.atom)(r=>{let{variableSetUpdatesForAllPages:n,variableSetUpdatesForCurrentPage:a}=r(K);return e===y.aD.ALL?n:a})),J=(0,d.atom)(e=>{let r={};for(let n of Object.values(b.i))for(let[a,i]of Object.entries(e(n)))r[a]=r[a]||[],r[a].push(...i);return r}),Q=(0,d.atomFamily)(e=>(0,d.atom)(r=>{switch(e){case y.aD.ALL:return r(Y);case y.aD.CURRENT:return r($)}})),ee=(0,d.atom)(e=>{let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,includesMoveUpdatesOnAnyPage:a}=e(H),{styleUpdatesForAllPages:i,includesMoveUpdatesOnAnyPage:o}=e(W),{variableSetUpdatesForAllPages:s}=e(K);return{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:s,libraryAssetUpdatesForAllPages:e(Y),includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:a}}),et=(0,d.atom)(e=>{let{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,includesMoveUpdatesOnCurrentPage:a}=e(H),{styleUpdatesForCurrentPage:i,includesMoveUpdatesOnCurrentPage:o}=e(W),{variableSetUpdatesForCurrentPage:s}=e(K);return{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,styleUpdatesForCurrentPage:i,variableSetUpdatesForCurrentPage:s,libraryAssetUpdatesForCurrentPage:e($),includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:a}}),er=(0,d.atomFamily)(e=>(0,d.atom)(r=>{let{componentUpdatesForAllPages:n,stateGroupUpdatesForAllPages:a,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:o,libraryAssetUpdatesForAllPages:s}=r(ee),{componentUpdatesForCurrentPage:l,stateGroupUpdatesForCurrentPage:c,styleUpdatesForCurrentPage:d,variableSetUpdatesForCurrentPage:u,libraryAssetUpdatesForCurrentPage:m}=r(et);return e===y.aD.ALL?{scopedComponentUpdates:n,scopedStateGroupUpdates:a,scopedStyleUpdates:i,scopedVariableSetUpdates:o,scopedLibraryAssetUpdates:s}:{scopedComponentUpdates:l,scopedStateGroupUpdates:c,scopedStyleUpdates:d,scopedVariableSetUpdates:u,scopedLibraryAssetUpdates:m}})),en=(0,d.selectAtom)(ee,({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:a,libraryAssetUpdatesForAllPages:i,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:s})=>{let l=e.length+r.length+n.length+a.length+i.length;return{updateCount:l,hasUpdates:l>0,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:s}}),ea=(0,d.selectAtom)(et,({componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:a,libraryAssetUpdatesForCurrentPage:i,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:s})=>{let l=e.length+r.length+n.length+i.length+a.length;return{updateCount:l,hasUpdates:l>0,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:s}});(0,d.selectAtom)(en,({hasUpdates:e})=>e),(0,d.selectAtom)(ea,({hasUpdates:e})=>e);let ei=(0,d.atomFamily)(e=>(0,d.atom)(r=>r(e===y.aD.ALL?en:ea).hasUpdates)),eo=(0,d.selectAtom)(en,({updateCount:e})=>e);(0,d.selectAtom)(ea,({updateCount:e})=>e);let es=(0,d.atomLikeCreateStableSelector)([ee],({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:a,libraryAssetUpdatesForAllPages:i})=>({componentUpdateKeys:(0,y.X7)(e),stateGroupUpdateKeys:(0,y.X7)(r),styleUpdateKeys:(0,y.X7)(n),variableSetKeys:(0,y.X7)(a),libraryAssetKeys:(0,y.X7)(i)})),el=(0,E.bt)(e=>e.library.libraryUpdatesBannerDismissed);function ec(e,r){let n=(0,S.dK)(e),i=(0,f.E7)(r),o=i?a.PK.fromKiwi(i):null,s=o?n.getStyleNode(o):null;if(!s)return null;let l=s.guid,c=s.styleKeyForPublish,d=s.styleVersionHash;return c&&d?{GUID:l,key:c,version:d,isLocalStyle:s.isLocalStyle}:null}let ed=(0,d.atom)(!1)},404227:(e,r,n)=>{n.d(r,{$4:()=>_,$u:()=>g,AF:()=>m,BA:()=>S,F4:()=>y,O1:()=>b,Sh:()=>c,T_:()=>I,Xt:()=>s,a$:()=>u,dK:()=>l,dT:()=>f,f5:()=>w,rT:()=>E,t:()=>h,tX:()=>v,tn:()=>T,vD:()=>d});var a=n(302245),i=n(299249),o=n(927150);let s=e=>e.mirror.sceneGraphSelection,l=e=>e.mirror.sceneGraph,c=(0,i.Zm)(e=>Object.keys(s(e)));function d(e){let r=c(e),n=r[0];return 1===r.length&&n?n:null}function u(e){let r=c(e);return r.length>1?r:null}let m=(0,a.Mz)([l,d],(e,r)=>r?e.get(r):null),p=()=>(e,r)=>l(e).get(r);function h(){let e=p();return(0,i.Zm)((r,n)=>{let a=e(r,n);return null==a?null:{key:a.styleKeyForPublish,version:a.styleVersionHash}})}function _(){let e=h();return(0,i.Zm)((r,n)=>new Map(n.map(n=>[n,e(r,n)])))}function g(e){return e.mirror.selectionProperties.numSelected||0}let f=(0,i.P8)([c,l],E);function E(e,r){let n=[];return e.forEach(e=>{let a=r.get(e);(a?.type==="INSTANCE"||a?.isInstanceSublayer)&&n.push(e)}),n}let y=(0,a.Mz)([l,c],(e,r)=>{let n=[];return r.forEach(r=>{let a=e.get(r);a&&n.push(a)}),n});(0,i.Zm)(e=>e.library.publishableStyles.map(e=>e.nodeId));let b=(0,i.Zm)(e=>e.library.localStylesThatHaveUsagesOnLoadedPages),v=(0,i.Zm)(e=>new Set(e.library.localStylesThatHaveUsagesOnCurrentPage)),T=(0,o.bt)(b),I=(0,i.Zm)(e=>e.library.localSymbolsThatHaveUsagesOnLoadedPages),S=(0,i.Zm)(e=>new Set(e.library.localSymbolsThatHaveUsagesOnCurrentPage));function w(e,r){let n=l(e);return!n.get(r)?.visible}},189385:(e,r,n)=>{n.d(r,{b:()=>i,e:()=>o});var a=n(245459);function i(e,r,n){if(!r)return null;let i=(()=>{let i;let o=e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey[r];if(o)return o;if(!n)return null;if("type"in n){let r=e.library.local.styles[n.node_id];if(r?.key!==n.key)return null;i=r.node_id}else i=(0,a.dI)(n.guid);return i?e.library.used__LIVEGRAPH.localNodeIdToDestinationKey[i]:null})();return e.library.used__LIVEGRAPH.styles[i??r]??null}function o(e,r){let{stylePreviewShown:n}=e;return n.isShown&&!n.isCreating&&n.style===r}},837384:(e,r,n)=>{n.d(r,{C9:()=>A,Co:()=>T,Du:()=>_,EY:()=>L,J5:()=>C,LL:()=>k,MH:()=>R,No:()=>f,OQ:()=>P,S_:()=>g,_Q:()=>y,jf:()=>N,kc:()=>O,m0:()=>m,sm:()=>x,tY:()=>F,ty:()=>D,v3:()=>h});var a=n(89865),i=n.n(a),o=n(184058),s=n.n(o),l=n(302245),c=n(299249),d=n(927150);function u(e){return(0,c.Vh)(e=>e.library,e)}let m=u(e=>e.subscribedSymbolsFromLoadedPages),p=u(e=>e.subscribedSymbolsOnCurrentPage),h=(0,c.P8)([e=>e.library.subscribedVariablesByIdFromLoadedPages],e=>Object.values(e)),_=e=>e.library.subscribedVariableSetsByIdFromLoadedPages,g=(0,l.Mz)([m],e=>i()(e,e=>e.key)),f=u(e=>e.subscribedStateGroupsFromLoadedPages),E=u(e=>e.subscribedStateGroupsOnCurrentPage),y=u(e=>e.directlySubscribedStylesFromLoadedPages),b=u(e=>e.directlySubscribedStylesOnCurrentPage),v=u(e=>e.indirectlySubscribedStylesFromLoadedPages),T=(0,l.Mz)([v],e=>e.length>0),I=(0,l.Mz)([y,v],(e,r)=>[...e,...r]);function S(e){return e.map(e=>e.nodeId)}function w(e){return s()(e.map(e=>e.key))}let A=(0,l.Mz)([m],S),C=(0,l.Mz)([p],S),N=(0,l.Mz)([f],S),L=(0,l.Mz)([E],S),O=(0,l.Mz)([y],S);(0,l.Mz)([b],S);let R=(0,l.Mz)([I],S),P=(0,l.Mz)([m],w),D=(0,l.Mz)([p],e=>new Set(e.map(e=>e.key))),k=(0,l.Mz)([f],w),M=(0,l.Mz)([y],w),F=(0,l.Mz)([b],e=>new Set(e.map(e=>e.key))),x=(0,d.bt)(M);(0,l.Mz)([I],w)},611908:(e,r,n)=>{n.d(r,{Bg:()=>o,Cy:()=>l,Q3:()=>s}),n(76265);var a=n(873439);function i(e){switch(e){case null:case void 0:return a.w_.ALLOWED;default:return e}}function o(e){return i(e?.public_link_controls_setting)===a.w_.BANNED}function s(e){return[a.w_.EXPIRATION_REQUIRED,a.w_.EXP_AND_PWD_REQUIRED].includes(i(e?.public_link_controls_setting))}function l(e){return[a.w_.PASSWORD_REQUIRED,a.w_.EXP_AND_PWD_REQUIRED].includes(i(e?.public_link_controls_setting))}},747765:(e,r,n)=>{n.d(r,{Qh:()=>_,m1:()=>T,Sp:()=>A,gM:()=>v,je:()=>f,Ly:()=>b,He:()=>E,fi:()=>y});var a=n(411855),i=n(834825),o=n(236891),s=n(33011),l=n(758271),c=n.n(l),d=n(32050),u=n(841962);n(875877),n(728722);var m=n(977235),p=n(399991);n(374629),n(864941);var h=n(23478);n(176160),n(183739),n(212552),n(573225),n(664135),n(643225),n(940795),n(269049);var _=(e=>(e.COMMUNITY="community",e.ORGANIZATION="organization",e.WORKSPACE="workspace",e.TEAM="team",e.FILE="file",e.USER="user",e))(_||{});let g=a.createContext(null);function f(){let{subscription:e,ensureSubscription:r}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");a.useEffect(()=>{r()},[r]);let n=a.useMemo(()=>(0,m.gB)([]),[]);return(0,p.nl)()?n:e}function E(){let e=f();return(0,d.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.libraryKey)),r},[e.data])}function y(){let{untransformedSubscription:e,ensureSubscription:r}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");return a.useEffect(()=>{r()},[r]),e}function b(){let{untransformedSubscription:e}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");if("loaded"!==e.status)return{};let r={},{file:n}=e.data;return n?.libraryOrgSubscriptions.length&&(r.org=n.libraryOrgSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryTeamSubscriptions.length&&(r.team=n.libraryTeamSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryFileSubscriptions.length&&(r.file=n.libraryFileSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryUserSubscriptions.length&&(r.user=n.libraryUserSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),r}function v(e,r,n,a,s,l){if("loading"===e.status||"errors"===e.status||"disabled"===e.status)return e;let d=e.data.file;if(null==d)return(0,m.gB)([]);let p=e.data.libraryPresetSubscriptionsV2,_=d.libraryOrgSubscriptions,g=d.team?.workspace?.librarySubscriptions,f=d.libraryTeamSubscriptions,E=d.libraryUserSubscriptions,y=d.libraryFileSubscriptions,b=[..._.filter(e=>a||!e.communityLibrary).filter(e=>n?null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryFileSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride)).map(e=>T(e,"organization")),...y.filter(e=>a||!e.communityLibrary).map(e=>T(e,"file"))];if(!s&&!l&&a){let e=(p??[]).filter(e=>{let r="loaded"!==e.default_subscribed.status||e.default_subscribed.data;return(n?!((0,u.kc)().ps_benchmark&&(d?.parentOrgId&&null!=e.libraryOrgSubscriptionOverride||d?.teamId&&null!=e.libraryTeamSubscriptionOverride))&&null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryOrgSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride||e.libraryFileSubscriptionOverride))&&r}).map(e=>I(e,"community"));b.push(...e)}if(n){let e=E.filter(e=>a||!e.communityLibrary).filter(e=>e.communityLibrary?null==e.libraryFileSubscriptionOverride:null==e.libraryFileSubscriptionOverride&&e.library?.file?.parentOrgId===s).map(e=>T(e,"user"));b.push(...e)}if(r){let e=f.filter(e=>a||!e.communityLibrary).filter(S).map(e=>T(e,"team")),r=(g||[]).filter(e=>a||!e.communityLibrary).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>T(e,"workspace"));b.push(...e),b.push(...r)}else{let e=(function(e){let r=(0,u.kc)().ps_benchmark,n=e?.teamId;return r&&n?e?.currentUser?.orgAwareTeamRoles?.filter(e=>e.team?.id===n).map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq):e?.currentUser?.orgAwareTeamRoles?.map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq)})(d)?.map(e=>e.filter(e=>a||!e.communityLibrary).filter(w).map(e=>T(e,"team")))??[];b.push(...(0,i.Bq)(e))}let v=c()(b.filter(o.Vq),e=>e.libraryKey).filter(e=>!(0,h.LP)(d,e.libraryKey));return(0,i.KQ)(v,"name"),(0,m.gB)(v)}function T(e,r){let n=e.communityLibrary;return n?I({communityLibrary:n,id:e.id},r):e.library&&e.library&&e.library.file?{fileKey:e.library.file.key,libraryKey:(0,s.l)(e.library.file.libraryKey),id:e.id,name:e.library.file.name,numComponents:e.library.numComponents??0,numStateGroups:e.library.numStateGroups??0,numStyles:e.library.numStyles??0,numStylesFill:e.library.numStylesFill??0,numStylesText:e.library.numStylesText??0,numStylesEffect:e.library.numStylesEffect??0,numStylesGrid:e.library.numStylesGrid??0,numVariables:e.library.numVariables??0,numVariablesBoolean:e.library.numVariablesBoolean??0,numVariablesFloat:e.library.numVariablesFloat??0,numVariablesColor:e.library.numVariablesColor??0,numVariablesString:e.library.numVariablesString??0,numModuleAssets:e.library.numModuleAssets??0,parentOrgId:e.library.file.parentOrgId,subscriptionType:r,thumbnailUrl:e.library.file.thumbnailUrl,thumbnailUrlOverride:e.library.file.thumbnailUrlOverride,thumbnailGuid:e.library.file.thumbnailGuid,libraryType:"team"}:null}function I(e,r){return e?.communityLibrary?{fileKey:e.communityLibrary.hubFileId,libraryKey:(0,s.l)(e.communityLibrary.hubFile.libraryKey),id:e.id,name:e.communityLibrary.name,numComponents:e.communityLibrary.numComponents??0,numStateGroups:e.communityLibrary.numStateGroups??0,numStyles:e.communityLibrary.numStyles??0,numStylesFill:e.communityLibrary.numStylesFill??0,numStylesText:e.communityLibrary.numStylesText??0,numStylesEffect:e.communityLibrary.numStylesEffect??0,numStylesGrid:e.communityLibrary.numStylesGrid??0,numVariables:e.communityLibrary.numVariables??0,numVariablesBoolean:e.communityLibrary.numVariablesBoolean??0,numVariablesFloat:e.communityLibrary.numVariablesFloat??0,numVariablesColor:e.communityLibrary.numVariablesColor??0,numVariablesString:e.communityLibrary.numVariablesString??0,numModuleAssets:e.communityLibrary.numModuleAssets??0,parentOrgId:null,subscriptionType:r,thumbnailUrl:e.communityLibrary.hubFile.thumbnailUrl,thumbnailUrlOverride:null,thumbnailGuid:null,libraryType:"community"}:null}function S(e){return null==e.libraryFileSubscriptionOverride}function w(e){return null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride)}function A(e,r){switch(r){case"FILL":return e.numStylesFill;case"TEXT":return e.numStylesText;case"EFFECT":return e.numStylesEffect;case"GRID":return e.numStylesGrid;default:return 0}}},626044:(e,r,n)=>{n.d(r,{OL:()=>s,_M:()=>l,jx:()=>o,wZ:()=>i});var a=n(697737);function i(e,r){return a.Ay.put("/api/team_join_link",{team_id:e,level:r}).then(({data:e})=>e.meta).catch(e=>{throw e})}function o(e){return`${window.location.origin}/team_invite/redeem/${e.token}`}n(423900),n(305216);let s=e=>`RETRIEVING_TEAM_JOIN_LINK_${e}`,l=e=>`RESETTING_TEAM_JOIN_LINK_${e}`},689102:(e,r,n)=>{n.d(r,{BU:()=>A,Cl:()=>M,Ct:()=>Y,Eq:()=>F,H7:()=>H,HE:()=>k,Me:()=>G,PS:()=>O,R5:()=>T,UQ:()=>R,ZT:()=>U,_L:()=>W,aW:()=>N,cD:()=>B,jv:()=>$,mx:()=>I,n$:()=>K,ol:()=>V,rR:()=>L,sK:()=>C});var a=n(188507);n(834825);var i=n(217950),o=n(707062),s=n(841962),l=n(198003),c=n(866415),d=n(550479),u=n(238311);n(76265);var m=n(314540),p=n(183739),h=n(313449);n(510669);var _=n(63356);n(505534);var g=n(893850),f=n(331850);n(536166),n(425028);var E=n(401562);n(190253);var y=n(643225),b=n(927150),v=n(841924);async function T(e){let r=[],n={};return await Promise.all(e.map(async e=>{let a=await v.M4.fetchFile(e);if(!a?.trashed_at||!a?.team_id)return;r.push(a);let i=(await (0,l.Ek)(p.Aqu,{teamId:a.team_id})).team;i?.id&&(n[i.id]=i)})),await w(r,n)}async function I(e){let r=[],n={};return await Promise.all(e.map(async e=>{let a={...await v.M4.fetchFile(e.key),folder_id:e.folderId};if(a&&r.push(a),!e.folderId)return;let i=await (0,l.Ek)(p.yU5,{projectId:e.folderId}),s=i.project?.team;s?.id&&(n[s.id]={...s,teamFileCounts:{designFileCount:s.teamFileCounts?.designFileCount??0,whiteboardFileCount:s.teamFileCounts?.whiteboardFileCount??0,slideFileCount:(0,o.oA)(s.teamFileCounts?.slideFileCount)??"0"}})})),await w(r,n)}async function S(){return(await (0,u.hW)("slides_starter_team_limits_exp")).get("is_slide_restriction_on",!1)}n(305216);let w=(0,E.D)(async(e,r)=>{let n={},a={},i={},s={};for(let r of e){if(!r.folder_id)continue;let e=s[r.folder_id]??await v.M4.fetchFolder(r.folder_id);s[r.folder_id]=e;let o=r?.editor_type==="design",l=r?.editor_type==="whiteboard",c=r?.editor_type==="slides",d=(0,y.ye)(e)?0:1;r.team_id&&o&&(n[r.team_id]=(n[r.team_id]||0)+d),r.team_id&&l&&(a[r.team_id]=(a[r.team_id]||0)+d),r.team_id&&c&&(i[r.team_id]=(i[r.team_id]||0)+d)}let l=Object.keys(n).find(e=>{let a=r[e];return a&&!N(a,{type:2,nDesignFilesToAdd:n[e],nCurrentDesignFiles:a.teamFileCounts?.designFileCount||0})});return l||(l=Object.keys(a).find(e=>{let n=r[e];return n&&!N(n,{type:5,nWhiteboardFilesToAdd:a[e],nCurrentWhiteboardFiles:n.teamFileCounts?.whiteboardFileCount||0})}))||!await S()?l:l=Object.keys(i).find(e=>{let n=r[e];return n&&!N(n,{type:7,nSlideFilesToAdd:i[e],nCurrentSlideFiles:parseInt((0,o.oA)(n.teamFileCounts?.slideFileCount)??"0",10)})})});function A(e){return!!(e.team_role||(e?.edit_roles?.design_files?.length||0)>0||(e?.edit_roles?.whiteboard_files?.length||0)>0||(e?.edit_roles?.folders?.length||0)>0||(e?.view_roles?.file_count||0)>0||(e?.view_roles?.folder_count||0)>0)}var C=(e=>(e[e.ADD_DESIGN_FILE=0]="ADD_DESIGN_FILE",e[e.ADD_PROJECT=1]="ADD_PROJECT",e[e.ADD_N_DESIGN_FILES=2]="ADD_N_DESIGN_FILES",e[e.ADD_EDITOR=3]="ADD_EDITOR",e[e.ADD_FIGJAM_FILE=4]="ADD_FIGJAM_FILE",e[e.ADD_N_FIGJAM_FILES=5]="ADD_N_FIGJAM_FILES",e[e.ADD_SLIDES_FILE=6]="ADD_SLIDES_FILE",e[e.ADD_N_SLIDES_FILES=7]="ADD_N_SLIDES_FILES",e))(C||{});function N(e,r){if(!e||e.restrictionsList?.includes(m.P4.LOCKED))return!1;if((0,h.XX)(e))return!0;switch(r.type){case 0:if(e.restrictionsList?.includes(m.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentDesignFiles&&r.nCurrentDesignFiles>=h.WW)return!1;return!e.restrictionsList?.includes(m.P4.FILES_LIMITED);case 1:return!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED)&&!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED_LEGACY);case 2:if(e.restrictionsList?.includes(m.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts||0===r.nDesignFilesToAdd)return!0;if(r.nCurrentDesignFiles+r.nDesignFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(m.P4.FILES_LIMITED);case 3:if(e.restrictionsList?.includes(m.P4.EDITORS_LIMITED))return!1;return!0;case 4:if(e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentWhiteboardFiles&&r.nCurrentWhiteboardFiles>=h.WW)return!1;return!e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED);case 5:if(e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nWhiteboardFilesToAdd)return!0;if(r.nCurrentWhiteboardFiles+r.nWhiteboardFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED);case 6:if(e.restrictionsList?.includes(m.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentSlideFiles&&r.nCurrentSlideFiles>=h.WW)return!1;return!e.restrictionsList.includes(m.P4.SLIDE_FILES_LIMITED);case 7:if(e.restrictionsList?.includes(m.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nSlideFilesToAdd)return!0;if(r.nCurrentSlideFiles+r.nSlideFilesToAdd>h.WW)return!1;return!e.restrictionsList.includes(m.P4.SLIDE_FILES_LIMITED)}}function L(e,r){return N({subscription:e.subscription,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team?new Date:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null},r)}function O(e){return!!e.student_team||!!e&&!!e.subscription&&[m.Qh.OK,m.Qh.GRACE_PERIOD].includes(e.subscription)}function R(e){let r=e.user?.id,n=e.openFile?.key;if(!r||!n)return null;let a=e.fileByKey?.[n]?.team_id;return a?e.teamUserByTeamId?.[a]?.[r]:null}let P=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/([A-z0-9]*)\/team\/(\d+)/),D=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/team\/(\d+)/);function k(e){return P.test(e)}function M(e){return D.test(e)}function F(e){let r=new URL(e).pathname.match("team/([A-z0-9]*)");return r?r[1]:null}let x=["recentsAndSharing","draftsToMove","communityHub","search","user"];function U(e){try{if(e.openFile)return e.openFile.teamId||"";if("teamId"in e.selectedView)return e.selectedView.teamId||"";if("abandonedDraftFiles"===e.selectedView.view&&e.selectedView.adminPlanType===g.O.TEAM||"seatRequests"===e.selectedView.view&&e.selectedView.adminPlanType===g.O.TEAM)return e.selectedView.planId;if("folder"===e.selectedView.view){let r=e.selectedView.folderId;if(!e.folders[r])return(0,s.Ay)().page_load_team_id||"";return e.folders[r]?.team_id||""}if((x.includes(e.selectedView.view)||"deletedFiles"===e.selectedView.view||"limitedTeamSharedProjects"===e.selectedView.view||"trashedFolders"===e.selectedView.view||"desktopNewTab"===e.selectedView.view)&&!e.currentUserOrgId)return e.currentTeamId||""}catch(e){(0,d.$D)(i.e.GROWTH_PLATFORM,Error(`Error getting team ID from Redux state: ${e.message}`))}return""}function B(){return(0,a.d4)(e=>U(e))||""}function V(){return(0,a.d4)(e=>""===U(e)||null==e.teams?null:e.teams[U(e)])||null}let G=(0,b.bt)(e=>e.teams[U(e)]||null);function H(e){return e.teams[U(e)]||null}function W(e,r,n){return e?Object.keys((0,_.t)(r.byTeamId,e.id)).filter(e=>n[e]):[]}function K(e,r){let n=[],a={};for(let r of e)r&&(a[r.id]=r,n.push(r.id));return e.sort((e,n)=>{let a=r.indexOf(e.id),i=r.indexOf(n.id);return -1===a&&-1===i?e.createdAt<n.createdAt?1:-1:a-i}),e.map(e=>e.id)}function Y(e,r,n){let a=0,i={};for(let o of(r.forEach(e=>i[e.id]=e),Object.keys(n))){let r=i[o],s=n[o][e];if(r&&s){if(r.pro_team||r.org_access||r.student_team)return!1;s.level===f.e6.OWNER&&a++}}return a>1}function $(e){return!!e&&!!e.match(/^[0-9]+$/)}(0,c.xx)(function(e,r,n){return e?W(e,r,n).map(e=>n[e]):[]})},160496:(e,r,n)=>{n.d(r,{H1:()=>h,X0:()=>m,XJ:()=>d,z:()=>c});var a=n(805014),i=n(777535),o=n(885123),s=n(190500),l=n(484930);let c={includeMatches:!0,shouldSort:!1,findAllMatches:!1,ignoreLocation:!0};function d(e){return e.replace(/[\u201D\u201C\"\u2019\u2018]/g,"'")}function u(e){return e.textContent&&(e.textContent=d(e.textContent)),e}function m(e,r,n){let i=[];for(let o of e.indices){let s=o[0],l=o[1]+1,c=e.value;n.matchCase&&c.substring(s,l)!==r||n.wholeWords&&(s>0&&p(c[s-1])||l<e.value.length&&p(c[l]))||i.push({start:s,end:l,matchType:a.Ifi.TEXT_MATCH})}return i}function p(e){return/[\p{L}\p{N}\p{Pc}\p{M}]/u.test(e)}let h=new class{constructor(){this.searchLibrary=new l.CN({keys:["textContent","name","type","annotationTextContent"],exactMatch:!0,...c})}initializeIndex(){let e=performance.now(),r=a.YEY.getSearchableNodes(!0).map(u),n=o.D.getState();this.searchLibrary.set(r),(0,s.ds)("canvas_search_index_create",n.openFile?.key,n,{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}destroyIndex(){this.searchLibrary.set([])}addNode(e){this.searchLibrary.add(e)}removeNode(e){this.searchLibrary.remove("guid",e)}async search(e,r={}){let n;this.updateIndex();let i=performance.now(),o=`'"${d(e)}"`,s=[{textContent:o}];if(r.searchLayerNames&&s.push({name:o}),r.searchAnnotationTextContent&&s.push({annotationTextContent:o}),r.layerTypes){let e=[];r.layerTypes.forEach(r=>{e.push({type:r})}),n={$and:[{$or:s},{$or:e}]}}else n={$or:s};let l=await this.searchLibrary.search(n),c={},u=0,p=0;for(let n of l){let i=[];for(let o of n.matches){let s=m(o,e,r);if("textContent"!==o.key&&s.length){let e=s[0];e.matchType=n.item.type===a.Z6A.CANVAS?a.Ifi.PAGE_MATCH:a.Ifi.LAYER_MATCH,i=[e,...i]}else i.push(...s)}if(i.length){u+=i.length,p++;let e=n.item.pageGuid,r={guid:n.item.guid,textMatches:i};c[e]?c[e].push(r):c[e]=[r]}}return{resultsByPage:c,metrics:{queryLength:e.length,numMatchingNodes:p,numMatches:u,queryTimeMs:Math.round(performance.now()-i)}}}logIndex(){this.updateIndex(),this.searchLibrary.logIndex()}updateIndex(){let e=performance.now(),r=a.YEY.getSearchableNodes(!1).map(u);if(r.length>2e3){this.initializeIndex();return}let n=[],o=[];for(let e of r)n.push(e.guid),(e.name||e.textContent)&&o.push(e);r.length&&this.searchLibrary.updateEntries("guid",n,o),r.length>0&&(0,i.sx)("canvas_search_index_update",{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}}},839226:(e,r,n)=>{n.d(r,{$I:()=>c,YA:()=>d});var a=n(411855),i=n(856586),o=n(887811),s=n(76265),l=n(14689);function c(e){return({light:(0,s.t)("fullscreen_actions.theme.light"),dark:(0,s.t)("fullscreen_actions.theme.dark"),system:(0,s.t)("fullscreen_actions.theme.system_theme")})[e]}function d(e){return[{name:"theme-light-mode",checked:"light"===e,displayForQuickCommand:"theme-light-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"light",userInitiated:!0}))},searchSynonyms:["theme","dark mode"],iconType:a.createElement(i.Z),hideForQuickCommand:"light"===e},{name:"theme-dark-mode",checked:"dark"===e,displayForQuickCommand:"theme-dark-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"dark",userInitiated:!0}))},searchSynonyms:["theme","light mode"],iconType:a.createElement(o.a),hideForQuickCommand:"dark"===e},{name:"theme-system",checked:"system"===e,displayForQuickCommand:"theme-system-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"system",userInitiated:!0}))}}]}},622589:(e,r,n)=>{n.d(r,{w:()=>a}),n(972142);function a(){return!!window.INITIAL_OPTIONS?.user_data}},701834:(e,r,n)=>{n.d(r,{td:()=>c,uo:()=>d}),n(657548);var a=n(829466);n(437068);var i=n(697737),o=n(76265),s=n(534294),l=n(35879);n(137515);let c="-1",d=2500;(0,s.nF)((e,r)=>{if(!r.userInitiated){e.dispatch(l.Q$(r));return}return(0,a.Q)({requestPromise:i.Ay.put("/api/user_notifications_bell/community/clear"),fallbackError:(0,o.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:l.Q$(r)})})},682403:(e,r,n)=>{n.d(r,{I2:()=>x,Il:()=>U,Ri:()=>v,Um:()=>D,Y9:()=>B,YH:()=>b,_X:()=>L,kb:()=>E,nt:()=>R,pk:()=>P,tb:()=>y,tp:()=>O,yk:()=>V});var a=n(689136),i=n.n(a),o=n(841563),s=n.n(o),l=n(278299),c=n(890882),d=n(467783),u=n(281935),m=n(841962),p=n(365918),h=n(703079),_=n(893850),g=n(260105),f=n(364934);let E=(0,d.v)(),y=(0,d.v)(),b=!window.EARLY_ARGS?.file_minimal_user_state;function v(){b=!0}let T=null,I=null,S={REQUESTED:"web.api_user_state.requested"},w=new class{constructor(){this.batchedCustomEvents=[],this.onVisibilityChange=async()=>{"hidden"===document.visibilityState&&await this.sendBatchedEvents()},this._currentlySendingBatchedEvents=!1,this.sendBatchedEvents=async()=>{if(this._currentlySendingBatchedEvents)return;this._currentlySendingBatchedEvents=!0;let e=this.batchedCustomEvents;this.batchedCustomEvents=[];try{await (0,h.BO)(e)}catch(e){}this._currentlySendingBatchedEvents=!1},document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendBatchedEvents),this.sendBatchedEventsInterval=setInterval(this.sendBatchedEvents,5e3)}async cleanup(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendBatchedEvents),clearInterval(this.sendBatchedEventsInterval),await (0,p.g)()}reportUserStateCall(e){this.batchedCustomEvents.push({metric:S.REQUESTED,tags:{source:e,client_visibility:document.visibilityState}})}},A=null,C=null,N=null;function L(e,r){v();let n=P(),a=D();return A&&n===C&&a===N||(w.reportUserStateCall(e),A=f.k.getState({orgId:n||void 0,teamId:a||void 0},r),C=n,C=a,A.then(()=>{A=null,C=null,N=null}).catch(()=>{A=null,C=null,N=null})),A}function O(e){return g.H.getState(e)}function R(e){e||(e="personal"),T=e}function P(){return T?"personal"===T?null:T:T=(0,m.tl)().org_id||null}function D(){return I||(I=(0,m.tl)().team_id||null),I}let k="recent_user_data",M=e=>btoa(JSON.stringify(e)),F=e=>JSON.parse(atob(e));function x(e){B(e,!0)}function U(e){let r=V(),n=i()(r),a=(0,l.UG)();if(n.communityProfileId=e,!s()(r,n))try{a.set(k,M(n))}catch(e){console.error("Failed to set community profile",e)}}function B(e,r,n,a,o,d){if(u.S8)return;let p=V(),h=i()(p),g=(0,l.UG)();if(r?h.communityUserId=e:h.fileBrowserUserId=e,void 0!==n&&(h.userIdToOrgId||(h.userIdToOrgId={}),h.userIdToOrgId[e]=n),(0,m.kc)().ps_benchmark&&(void 0!==n||void 0!==o)&&(h.userIdToPlan||(h.userIdToPlan={}),n?h.userIdToPlan[e]=[_.O.ORG,n]:o&&(h.userIdToPlan[e]=[_.O.TEAM,o])),a&&(h.communityProfileId=a),d&&(h.seenRecurringBannerIds||(h.seenRecurringBannerIds={}),h.seenRecurringBannerIds[d]=c.A.utc().toISOString()),!s()(p,h))try{g.set(k,M(h))}catch(e){console.error("Failed to set recent workspace",e)}}function V(){let e={communityUserId:null,communityProfileId:null,fileBrowserUserId:null,userIdToOrgId:{},seenRecurringBannerIds:{}},r=(0,l.UG)();try{let n=r.get(k);n&&(e=F(n))}catch(e){console.error("Failed to get recent workspace",e)}return e}},773283:(e,r,n)=>{n.d(r,{Eg:()=>el,HF:()=>X,Ht:()=>V,Nb:()=>ed,Ul:()=>ee,V_:()=>B,_b:()=>es,_h:()=>ei,_t:()=>Y,cn:()=>K,hZ:()=>Q,kT:()=>W,tP:()=>G,un:()=>et,vF:()=>em,vw:()=>q,w_:()=>$,yH:()=>eu});var a=n(217950),i=n(805014),o=n(245459),s=n(777535),l=n(890882),c=n(885123),d=n(841962),u=n(875877),m=n(581751),p=n(298359),h=n(550479),_=n(653798),g=n(771952),f=n(697737),E=n(719334),y=n(717288),b=n(563846),v=n(553362),T=n(534294),I=n(47795),S=n(225371),w=n(763575),A=n(23478),C=n(963993),N=n(914077),L=n(743221),O=n(373028),R=n(84530),P=n(69104),D=n(596159),k=n(366172),M=n(644392),F=n(909666),x=n(841924),U=n(421023);let B="current_version",V=new m.q(40),G=(0,u.atom)("");var H=(e=>(e[e.Default=0]="Default",e[e.Recording=1]="Recording",e))(H||{});let W=x.M4.Query({fetch:async e=>{let r=e.fileKey;if(!r)return null;let n=performance.now(),a=await P.W.getPaginatedVersions({...e,fileKey:r,versionIds:e.versionIds?.join(",")}),i=performance.now()-n;return(0,s.sx)("version_diffing_performance_metrics",{name:"Lego versions fetched",durationMs:i}),a.data.meta?.versions||[]},key:"fileVersionsPaginated"});function K(e,r,n,a){return`${e}-${r}-${n.id}-${a}`}function Y(e,r){let n=c.D.getState(),a=n.openFile?.key,i=[r,n.mirror.sceneGraph.getInternalCanvas()?.guid].filter(e=>!!e);if(!a||!r)return null;let o=K(a,r,e,(0,L.N)(n.fileVersion));if(V.has(o))return V.get(o);let s=new Promise((n,s)=>(0,D.n)(`${e.canvas_url}&nodes_to_extract=${i.join(",")}`).then(([i,s,l])=>{let c=K(a,r,e,l),d=Promise.resolve({canvas:i,key:c});V.delete(o),V.set(c,d),n(d)}).catch(s));return V.set(o,s),s}function $(e){let r=c.D.getState(),n=r.openFile?.key,a=r.mirror.appModel.currentPage;if(!n||!a)return null;let i=K(n,a,e,(0,L.N)(r.fileVersion));V.delete(i)}let j=async(e,r,n,a)=>{let i=new URLSearchParams;i.set("diff_version",(0,A.C2)().toString()),i.set("from_file_version_id",r),i.set("migration_version",`${n}`),a&&a.length>0&&i.set("nodes_to_diff",a.join(","));let{data:{meta:{checkpoint_diff:o}}}=await f.Ay.post(`/api/file_diff/v2/checkpoint_diff/${e}?${i.toString()}`);return o},z=async e=>{let r=new Date().getTime(),{data:n}=await f.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"}),a=new Date().getTime();return(0,s.sx)("versioning_performance_metrics",{name:"download_diff",durationMs:a-r},{forwardToDatadog:!0}),n};function q(e){for(let r of e.versions)if(r.id===e.activeId)return r;if(e.linkedVersion&&e.activeId===e.linkedVersion.id)return e.linkedVersion}async function Z(e,r,n){let a=await j(r.getState().openFile.key,e,r.getState().fileVersion,n);if(!a.signed_url)return"Error viewing what's changed between file versions.";let o=!!r.getState().openFile?.canEdit,l=new Date().getTime(),[c]=await Promise.all([z(a.signed_url),(0,M.W5)(i._em.DEBUG_TOOL)]),d=new Date().getTime();return((0,s.sx)("versioning_performance_metrics",{name:"download_diff_and_load_pages",durationMs:d-l,isEditor:o},{forwardToDatadog:!0}),i.glU.loadHistoryChangesState(c))?"":"Error loading HistoryChangesState into memory."}function X(e,r){if(e)return r.versions.find(r=>r.id===e)}async function J(e,r){let n=Date.now(),a=X(e,r.getState().versionHistory);if(!a)return{elapsedTime:Date.now()-n,numPagesWithChanges:0};let o=await Z(a.id,r),s=Date.now()-n;if(o)throw(0,_.x1)("version diffing","error checking for visible changes",{error:o}),Error("Error checking for visible changes");return{elapsedTime:s,numPagesWithChanges:i.glU.getPagesWithChanges().length}}let Q=(0,T.nF)(async(e,r)=>{let n,a;let o=e.getState(),s=()=>{e.dispatch(I.$T({...o.selectedView,compareLatest:void 0}))},c=()=>{e.dispatch(S.Y6({mode:i.Oin.OFF})),s()},u=o.user;if(!(0,d.kc)().version_diffing||!(0,d.kc)().xr_debounce_threshold||!u||"fullscreen"!==o.selectedView.view||o.selectedView.editorType===N.nT.Whiteboard||o.mirror.appModel.topLevelMode===i.lyf.HISTORY||o.mirror.appModel.activeCanvasEditModeType===i.m1T.COMPARE_CHANGES)return c();let{openFileKey:m}=r;try{let e=await R.S.getLastInteraction({openFileKey:m});n=e.data.meta.last_view_at,a=e.data.meta.last_edit_at}catch{c()}let p=(0,l.A)(n),h=(0,l.A)(a),_=p>h?p:h;if(!_.isValid()||_<(0,l.A)().subtract(7,"days"))return c();let g=P.W.getPaginatedVersions({fileKey:m,createdAtOrBefore:_.toISOString()}),f=P.W.getPaginatedVersions({fileKey:m}),[E,y]=await Promise.all([g,f]),b=E.data.meta.versions,v=y.data.meta.versions;if(!(b.length>0&&v.length>0))return c();let T=b[0],w=v[0];if(!((0,l.A)(w.created_at)>(0,l.A)(T.created_at))||w.user_id===u.id||w.participating_users_array?.includes(u.handle))return c();e.dispatch(es()),e.dispatch(em({fromVersionId:T.id}))}),ee=(0,T.nF)(async(e,r)=>{let n=e.getState(),a=n.user;if(!(0,d.kc)().version_diffing||!a||"fullscreen"!==n.selectedView.view||n.selectedView.editorType===N.nT.Whiteboard||n.mirror.appModel.topLevelMode===i.lyf.HISTORY||n.mirror.appModel.activeCanvasEditModeType===i.m1T.COMPARE_CHANGES)return;let{openFileKey:o}=r,c=(0,l.A)(r.versionHistory.lastEdited),u=(0,l.A)(r.versionHistory.lastViewed),m=u>c?u:c;if(!m.isValid()||m<(0,l.A)().subtract(7,"days"))return;let p=Date.now(),h=P.W.getPaginatedVersions({fileKey:o,pageSize:1,createdAtOrBefore:m.toISOString()}),_=P.W.getPaginatedVersions({fileKey:o,pageSize:1}),[f,E]=await Promise.all([h,_]),y=f.data.meta.versions,b=E.data.meta.versions;if(y.length>0&&b.length>0){let r=y[0],n=b[0];if((0,l.A)(n.created_at)>(0,l.A)(r.created_at)&&n.user_id!==a.id&&!n.participating_users_array?.includes(a.handle)){let a={fileKey:o,eventId:(0,g.g)(),lastEdited:c.toISOString(),lastViewed:u.toISOString(),lastSeenVersion:r.id,lastSeenCreatedAt:r.created_at,latestVersion:n.id,latestCreatedAt:n.created_at};(0,s.sx)("Version Diffing Changed Since Last View",{...a,durationMs:Date.now()-p},{forwardToDatadog:!0}),e.dispatch(ea({lastSeenVersionId:r.id,trackingProps:a}))}}});function et(){let e=c.D,r=e.getState().versionHistory,n=q(r),a=r.fetchedPageIds||new Set,i=e.getState().mirror.appModel.currentPage;return n&&n.id!==B?en(n,e,a,i,o.Xy):Promise.reject("Version history inactive")}let er=null;function en(e,r,n,a,s,l){return new Promise((c,d)=>{let m=e.canvas_url;m||d("Couldn't get canvas URL for version.");let p=s===o.Xy,h=!p&&n.size>0,_=s??a,g=r.getState().mirror.appModel.currentPage;"LOAD_NEW_VERSION"===l&&g&&!s&&(_=g);let f=!r.getState().mirror.appModel.pagesList.every(e=>n.has(e.nodeId))&&!n.has(_);if(!f)return r.dispatch(w.SR({isLoadingPage:!1})),c();m+=`&nodes_to_extract=${_}`;let E=r.getState().selectedView;F.C.markVersionHistoryLoadStart(E.fileKey,E.nodeId,l);let y=(0,D.n)(m).then(([e])=>{if(y===er){var o;er=null;let s=r.getState().selectedView.editorType;if((o=r.getState().mirror.appModel.topLevelMode)===i.lyf.HISTORY||o===i.lyf.DEV_HANDOFF){let o;if(h)i.glU.applyFileToCurrentScene(e);else if(u.atomStore.set(G,""),!i.glU.loadFigFileForPreview(e))return d("Error loading this version into memory.");F.C.markVersionHistoryLoadEnd();let l=r.getState().selectedView.fileKey;o=s===N.nT.Whiteboard?"figjam":s===N.nT.Design||s===N.nT.Slides?(0,N.CO)(s):"unknown";let m=r.getState().selectedView.devModeFocusId?"focus_view":"version_history";F.C.report(l,o,m),f&&(p?r.getState().mirror.appModel.pagesList.forEach(e=>n.add(e.nodeId)):n.add(_),r.dispatch(w.EB({fetchedPageIds:n})),r.dispatch(w.SR({isLoadingPage:!1})),c()),E.nodeId&&E.nodeId!==a&&C.tJ([E.nodeId]),E.devModeFocusId&&i.w3z.focusOnNode(E.devModeFocusId,!1),r.dispatch(S.Y6({mode:i.Oin.OFF}))}}});er=y})}let ea=(0,T.nF)(async(e,r)=>{let n,a;let{lastSeenVersionId:i,trackingProps:o}=r;try{let r=await J(i,e);n=r.elapsedTime,a=r.numPagesWithChanges}catch(e){return}if(0===a){(0,s.sx)("Version Diffing Notification Skipped",{...r.trackingProps,pagesWithChanges:0,durationMs:n},{forwardToDatadog:!0});return}(0,s.sx)("Version Diffing Notification Shown",{...r.trackingProps,pagesWithChanges:a,durationMs:n},{forwardToDatadog:!0}),e.dispatch(b.Q.enqueueFront({notification:{type:y._.SEE_WHATS_CHANGED,message:"See what's changed since the last time you viewed this file",acceptCallback:()=>{(0,s.sx)("Version Diffing Notification Opened",o),e.dispatch(es()),e.dispatch(em({fromVersionId:i}))},dismissCallback:()=>{(0,s.sx)("Version Diffing Notification Dismissed",o)}}}))}),ei=(0,T.nF)((e,{direction:r})=>{let n=e.getState(),a=(0,U.U2)(n.selectedView);a&&!n.versionHistory.loading&&(e.dispatch(w.ne({loading:!0})),(0,p.En)(`/api/versions/${a}`,30,n.versionHistory,r).then(n=>{a===(0,U.U2)(e.getState().selectedView)&&e.dispatch(w.BC({history:n,direction:r}))}))}),eo=(0,T.nF)(e=>{e.dispatch(w.p0()),e.dispatch(ei({direction:p.mL}))}),es=(0,T.nF)((e,r)=>{r?.type===1?k.Y5.triggerAction("enter-history-mode-for-recording"):k.Y5.triggerAction("enter-history-mode"),k.Y5.triggerAction("deselect-all"),e.dispatch(eo()),i.Ez5?.uiState().showPropertiesPanel.set(!0),(0,s.sx)("Toggle Version History",{source:r?.source||null})}),el=(0,T.nF)(e=>{e.dispatch(ec()),e.dispatch(v.F.dequeue({matchType:"versions"})),i.glU.exitVersionHistoryMode(e.getState().openFile?.canEdit??!1)}),ec=(0,T.nF)(e=>{e.dispatch(ed({id:B})),e.dispatch(em({fromVersionId:void 0})),i.Egt.clearSelection(),e.dispatch(v.F.dequeue({matchType:"comparing"})),e.dispatch(v.F.dequeue({matchType:"view_changes"})),e.dispatch(S.Y6({mode:i.Oin.OFF}))}),ed=(0,T.nF)(async(e,r)=>{if(r.id===B){u.atomStore.set(G,""),i.glU.loadFigFileForPreview(new Uint8Array);let n=e.getState();e.dispatch(I.$T({...n.selectedView,versionId:void 0,compareVersionId:void 0})),e.dispatch(w.Fm({id:r.id}));return}e.dispatch(w.Fm({id:r.id}));let n=e.getState(),o=r.versions?r.versions.find(e=>e.id===r.id):q(n.versionHistory);if(!o)return;e.dispatch(I.$T({...n.selectedView,compareVersionId:void 0}));let s=e.getState().mirror.appModel.currentPage,l=r.eventType,c=!!e.getState().selectedView.devModeFocusId;await en(o,e,new Set,s,r.nodeId,l).catch(r=>{if(c){let e=`[${l}] Failed load version for preview in focus view: ${r}`;(0,h.$D)(a.e.DEVELOPER_TOOLS,Error(`[LOAD_VERSION_FOR_PREVIEW] ${e}`))}e.dispatch(E.s.error(r))})}),eu=(0,T.nF)((e,r)=>{let n=r.version,i=r.currentPageNodeId,o=r.fetchedPageIds,s=r.eventType;en(n,e,o,i,void 0,s).then(()=>e.dispatch(w.ke({version:r.version}))).catch(r=>{let n=`[${s}] Failed load fig file for preview: ${r}`;(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,Error(`[VERSION_HISTORY_INCREMENTAL_LOAD] ${n}`)),e.dispatch(E.s.error(r))})}),em=(0,T.nF)(async(e,r)=>{if(!(0,d.kc)().version_diffing){e.dispatch(w.TO(r));return}let n=r.fromVersionId;if(!n)return;let a=X(n,e.getState().versionHistory);if(!a)return;let o=new Date().getTime(),l=await Z(a.id,e);if(l){e.dispatch(E.s.error(l));return}let c=new Date().getTime(),u=e.getState().selectedView.editorType,m=O.lE[O.lE.COMPARE_CHANGES];if((0,s.sx)("versioning_performance_metrics",{name:"load_diff",durationMs:c-o,fromCheckpointKey:a.checkpoint_key,nodesToDiff:"all",editorType:u,source:m},{forwardToDatadog:!0}),a.canvas_url){let e=i.glU.getChangesToCompareFromHistoryChangesState();if(e.size>0){let r=Array.from(e).join(","),n=`${a.canvas_url}&nodes_to_extract=${r}`;(0,D.n)(n).then(([e])=>{i.glU.loadPartialHistoryScene(e)})}}let p=i.glU.startComparingChanges()?"":"Error starting history compare";if(p){e.dispatch(E.s.error(p));return}let h=e.getState();e.dispatch(I.$T({...h.selectedView,compareVersionId:n,compareLatest:void 0})),(0,s.sx)("Version History Compare Start",{fromVersionId:n}),e.dispatch(w.TO(r))})},549147:(e,r,n)=>{n.d(r,{Bj:()=>R,HA:()=>N,Os:()=>y,Pe:()=>m,QZ:()=>L,Vl:()=>C,aF:()=>O,b8:()=>w,cY:()=>A,f5:()=>h,j0:()=>v,k9:()=>f,kw:()=>g,l9:()=>S,lG:()=>E,t4:()=>_,u7:()=>T,zE:()=>b,zx:()=>I});var a=n(411855),i=n(48451),o=n(467783),s=n(746643),l=n(399991),c=n(612724),d=n(473675);let u=window.matchMedia("(prefers-reduced-motion: reduce)"),m={navigationDurationMs:200,animationTimingFunction:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,isGetViewportAtomic:!1},p=class e{constructor(e,r={}){this.getCommentDestinationForCanvasPosition=(e,r,n)=>this.viewport.getCommentDestinationForCanvasPosition(e,r,n),this.setCanvasSpaceCenter=(e,r,n)=>{this.viewport.setCanvasSpaceCenter(e,r,n)},this.setCurrentPageIdAsync=async e=>{await this.viewport.setCurrentPageIdAsync(e)},this.pageIdForNodeId=e=>this.viewport.pageIdForNodeId(e),this.getValidCommentsRect=()=>this.viewport.getValidCommentsRect(),this.viewport=e,this.config={...m,...r}}navigateTo(r,n,a={}){clearTimeout(this.delayTimeout),this.delayTimeout=void 0;let i=this.getViewportInfo();if(n||(n=i.zoomScale),u.matches||(0,l.nl)()||0===a.duration)return this.updateViewport(i,r,n),u.matches&&a.metricsCallback?.({prefersReducedMotion:!0}),Promise.resolve({cancelled:!1});let d=performance.now(),m=null,p=[],h=a.duration??this.config.navigationDurationMs;if(a.ignoreVisibleTargets){let n=c.Mi.subtract(r,{x:i.offsetX,y:i.offsetY});n=c.Mi.scale(1/i.zoomScale,n),n=c.Mi.abs(n);let o=Math.max(i.height,i.width)/2,s=e.DEFAULT_NAVIGATE_BUFFER*(1/i.zoomScale);if(c.Mi.max(n)<o-s)return a.metricsCallback?.({prefersReducedMotion:!1}),Promise.resolve({cancelled:!1})}let _=(0,o.v)(),g=!1,f=function(e){let r=document.getElementById("fullscreen-root");if(!r)return s.lQ;let n=()=>{r.addEventListener("mouseup",e),e()};return r.addEventListener("mousedown",n),()=>{r.removeEventListener("mousedown",n),r.removeEventListener("mouseup",e)}}(()=>{g=!0}),E=e=>{if(a.metricsCallback){let r=0,n=0;p.length&&(n=Math.round(p.reduce((e,n,a)=>((0===a&&e>17||n>17)&&r++,e+n))/p.length)),a.metricsCallback({numberOfSlowFrames:r,avgFrameDuration:n,animationCancelled:e,totalFrames:p.length,prefersReducedMotion:!1})}f(),_.resolve({cancelled:e})},y=n-i.zoomScale,b=c.Mi.scale(i.zoomScale,{x:i.offsetX,y:i.offsetY}),v=c.Mi.scale(n,r),T=c.Mi.subtract(v,b),I=this.getViewportInfo(),S=()=>{var e;let o=this.getViewportInfo();if(this.config.isGetViewportAtomic&&((e=I).offsetX!==o.offsetX||e.offsetY!==o.offsetY||e.zoomScale!==o.zoomScale)||g||a.signal?.aborted){E(!0);return}let s=performance.now(),l=s-d;null!=m&&p.push(Math.round(s-m)),m=s;let u=Math.min(l/h,1),_=this.config.animationTimingFunction(u);if(_>=1){E(!1),this.updateViewport(o,r,n);return}let f=i.zoomScale+y*_,v=c.Mi.add(b,c.Mi.scale(_,T)),w=c.Mi.scale(1/f,v);this.updateViewport(o,w,f),requestAnimationFrame(S),I=this.getViewportInfo()};return a.delay?this.delayTimeout=setTimeout(()=>{d=performance.now(),S()},a.delay):S(),_.promise}getViewportInfo(){return this.viewport.getViewportInfo()}getRawViewportInfo(){return this.viewport.getRawViewportInfo()}getCommentsWrapperOffset(e){return this.viewport.getCommentsWrapperOffset(e)}setZoomScale(e,r){this.viewport.setZoomScale(e,r)}setHovering(e){this.viewport.setHovering(e)}updateViewport(e,r,n){this.setZoomScale(e.zoomScale,n),this.setCanvasSpaceCenter(r,e,n)}};p.DEFAULT_NAVIGATE_BUFFER=60;let h=p,_={x:0,y:0,width:1,height:1,offsetX:0,offsetY:0,zoomScale:1,isPanning:!1,isZooming:!1},g=a.createContext(new h({getViewportInfo:()=>_,getRawViewportInfo:()=>_,getCommentsWrapperOffset:e=>({x:0,y:0}),setCanvasSpaceCenter:e=>{},setZoomScale:(e,r)=>{},setHovering:e=>{},setCurrentPageIdAsync:e=>Promise.resolve(),pageIdForNodeId:e=>"1:0",getCommentDestinationForCanvasPosition:(e,r,n)=>null,getValidCommentsRect:()=>null})),f=a.createContext(_.x),E=a.createContext(_.y),y=a.createContext(_.width),b=a.createContext(_.height),v=a.createContext(_.offsetX),T=a.createContext(_.offsetY),I=a.createContext(_.zoomScale),S=a.createContext(_.isPanning),w=a.createContext(_.isZooming),A=a.createContext(0),C=a.createContext(!1),N=a.createContext({current:_}),L=a.createContext({current:_});function O({latestViewport:e,children:r}){let n=a.useRef(e),i=a.useRef(e);return i.current=n.current,n.current=e,a.createElement(L.Provider,{value:i},a.createElement(N.Provider,{value:n},a.createElement(f.Provider,{value:e.x},a.createElement(E.Provider,{value:e.y},a.createElement(y.Provider,{value:e.width},a.createElement(b.Provider,{value:e.height},a.createElement(v.Provider,{value:e.offsetX},a.createElement(T.Provider,{value:e.offsetY},a.createElement(I.Provider,{value:e.zoomScale},a.createElement(S.Provider,{value:e.isPanning},a.createElement(w.Provider,{value:e.isZooming},r)))))))))))}function R(e){let{getViewport:r}=e,[n,o]=a.useState(r()||_),s=a.useCallback(()=>{o(e=>{let n=r()||_;return(0,i.c2)(e,n)?e:n})},[r,o]);return(0,d.N)(s),a.createElement(O,{latestViewport:n},e.children)}},58852:(e,r,n)=>{n.d(r,{AM:()=>s,qr:()=>l});var a=n(411855),i=n(188507);n(805014),n(241162);var o=n(371143);let s={MAIN_GUIDE:"https://help.figma.com/hc/articles/1500004414622",TROUBLESHOOT:"https://help.figma.com/hc/articles/4402390108951",ACCESSIBILITY:"https://help.figma.com/hc/articles/4402390110743",FEEDBACK_FORM:"https://form.asana.com?k=FPQgFCXUINQN6CmMtWiabQ&d=10497086658021"};function l(){let[e,r]=a.useState(null),n=(0,i.d4)(e=>e.voice.showWidget);return a.useEffect(()=>{n&&!e&&r(o.h.getInstance())},[n,e]),e}},446006:(e,r,n)=>{n.d(r,{_2:()=>i,w$:()=>o}),n(411855);var a=n(777535);n(569099),n(76265),n(176160),n(662154);let i="audio-paywall-key",o=(()=>{let e=!0,r=!1;return n=>{r||setTimeout(()=>{n>0&&e?(e=!1,(0,a.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(r=!0,(0,a.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})()},371143:(e,r,n)=>{n.d(r,{h:()=>I,q:()=>y});var a=n(217950),i=n(777535),o=n(281935),s=n(841962),l=n(747484),c=n(812435),d=n(550479),u=n(190500),m=n(266316),p=n(644265),h=n(613309),_=n(438877),g=n(937166),f=n(770453);let E=e=>e>.1,y=.05,b=`Something there is that doesn't love a wall,
That sends the frozen-ground-swell under it,
And spills the upper boulders in the sun;
And makes gaps even two can pass abreast.
The work of hunters is another thing:
I have come after them and made repair
Where they have left not one stone on a stone,
But they would have the rabbit out of hiding,
To please the yelping dogs. The gaps I mean,
No one has seen them made or heard them made,
But at spring mending-time we find them there.
I let my neighbor know beyond the hill;
And on a day we meet to walk the line
And set the wall between us once again.
We keep the wall between us as we go.
To each the boulders that have fallen to each.
And some are loaves and some so nearly balls
We have to use a spell to make them balance:
\u2018Stay where you are until our backs are turned!\u2019
We wear our fingers rough with handling them.
Oh, just another kind of out-door game,
One on a side. It comes to little more:
There where it is we do not need the wall:
He is all pine and I am apple orchard.
My apple trees will never get across
And eat the cones under his pines, I tell him.
He only says, \u2018Good fences make good neighbors.\u2019
Spring is the mischief in me, and I wonder
If I could put a notion in his head:
\u2018Why do they make good neighbors? Isn't it
Where there are cows? But here there are no cows.
Before I built a wall I'd ask to know
What I was walling in or walling out,
And to whom I was like to give offense.
Something there is that doesn't love a wall,
That wants it down.\u2019 I could say \u2018Elves\u2019 to him,
But it's not elves exactly, and I'd rather
He said it for himself. I see him there
Bringing a stone grasped firmly by the top
In each hand, like an old-stone savage armed.
He moves in darkness as it seems to me,
Not of woods only and the shade of trees.
He will not go behind his father's saying,
And he likes having thought of it so well
He says again, \u2018Good fences make good neighbors.\u2019`.split(/\n/g).map(e=>e.trim()),v=0,T=class e{constructor(e){this.isMuted=!1,this.handlingTokenExpiration=!1,this.decryptedUserMap={},this.averageRecentVoiceLevel={},this.volumeDataInterval=null,this.micStateInterval=null,this.streamingAudioForCaptions=!1,this._microphonePermissionDenied=!0,this.captionsToggleEnabled=!1,this.volumeLevelsStore=(0,_._)({}),this.activeSpeakerIdStore=(0,_._)(null),this.recentlySpokeIdStore=(0,_._)(null),this.setMicrophone=async e=>{try{this.unpublishedLocalAudioTrack?.setDevice(e.deviceId),await this.localAudioTrack?.setDevice(e.deviceId),this.microphone=e}catch(e){throw e}},this.setPlaybackDevice=async e=>{try{this.client?.remoteUsers.forEach(r=>r.audioTrack?.setPlaybackDevice(e.deviceId)),this.playbackDevice=e}catch(e){throw e}},this.getMicrophones=e=>this.AgoraRTC.getMicrophones(e),this.getPlaybackDevices=e=>this.AgoraRTC?.getPlaybackDevices(e),this.currentMicrophone=async()=>this.microphone||(await this.getMicrophones())?.[0],this.currentPlaybackDevice=async()=>this.playbackDevice||(await this.getPlaybackDevices())?.[0],this.getParticipantIds=async()=>{if(!this.client||!this.userId)throw Error("Client not yet instantiated");let e=[];for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);n&&e.push(n)}return e.push(this.userId),e},this.startPollingMicState=()=>{o.eD&&(this.microphonePermissionDenied&&o.eD.setUsingMicrophone(!1),this.micStateInterval=setInterval(()=>{this.client&&(o.eD?.setIsInVoiceCall("DISCONNECTED"!==this.client.connectionState),o.eD?.setUsingMicrophone(!!this.isPublishingLocalTrack()))},5e3))},this.stopPollingMicState=()=>{this.micStateInterval&&(clearInterval(this.micStateInterval),this.micStateInterval=null)},this.isPublishingLocalTrack=()=>this.client?.localTracks.some(e=>e.getTrackId()===this.localAudioTrack?.getTrackId()),this.startPollingVolumeData=()=>{this.volumeDataInterval||(this.volumeDataInterval=setInterval(async()=>{if(!this.client||!this.userId)return;let e={};for(let e in this.averageRecentVoiceLevel)this.averageRecentVoiceLevel[e]*=.8;for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);if(!n)continue;let a=r.audioTrack?.getVolumeLevel()||0,i=this.averageRecentVoiceLevel[n];this.averageRecentVoiceLevel[n]=(i||0)+a,e[n]={isMuted:!r.audioTrack,volumeLevel:a}}let r=this.localAudioTrack?.getVolumeLevel()||0;this.averageRecentVoiceLevel[this.userId]=this.isMuted?0:(this.averageRecentVoiceLevel[this.userId]||0)+r,e[this.userId]={isMuted:this.isMuted,volumeLevel:r},this.checkLocalVolumeLevels(),this.volumeLevelsStore.set(e),this.updateActiveSpeakers(),this.updateRecentlySpoke()},200))},this.stopPollingVolumeData=()=>{this.volumeDataInterval&&(clearInterval(this.volumeDataInterval),this.volumeDataInterval=null)},this.checkLocalVolumeLevels=()=>{this.isMuted&&this.unpublishedLocalAudioTrack&&this.unpublishedLocalAudioTrack.getVolumeLevel()>.6&&this.callEventCallback?.(f.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED)},this.updateActiveSpeakers=()=>{let e=Object.entries(this.averageRecentVoiceLevel).filter(e=>e[1]>y).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.activeSpeakerIdStore.set(e)},this.updateRecentlySpoke=()=>{let e=Object.entries(this.averageRecentVoiceLevel).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.recentlySpokeIdStore.set(e)},this.onCallDisconnect=()=>{m.R9.sendVoiceMetadata(""),this.stopPollingVolumeData(),o.eD?.setIsInVoiceCall(!1),o.eD?.setUsingMicrophone(!1),this.localAudioTrack?.setEnabled(!1),this.unpublishedLocalAudioTrack?.setEnabled(!1)},this.attachDeviceListeners=e=>{e.onMicrophoneChanged=e=>{this.microphone?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&this.getMicrophones().then(e=>{this.microphone=e.length>0?e[0]:null})},e.onPlaybackDeviceChanged=e=>{this.playbackDevice?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&l.Ay.chrome&&this.getPlaybackDevices().then(e=>{this.playbackDevice=e.length>0?e[0]:null})}},this.audioCaptionQueues=new p.b,this.audioCaptionStream=new h.T,this.AgoraRTC=e,this.AgoraRTC.setLogLevel((0,s.kc)().voice_agora_debug_level_logs?0:3),this.AgoraRTC.setArea(["OVERSEA"]),this.localAudioTrack=null,this.unpublishedLocalAudioTrack=null,this.microphone=null,this.playbackDevice=null,this.attachDeviceListeners(e),(0,s.kc)().voice_debug_captions_enabled&&setTimeout(()=>{setInterval(()=>{this.audioCaptionStream.addNewCaption(this.userId?this.userId:"dummyUserId",Date.now(),b[v++%b.length])},1501)},1500)}static createInstance(){return this.instance?Promise.resolve():new Promise((r,n)=>{let a=document.createElement("script");a.src=(0,s.ck)("0706b46bdc09a419282285b791ea1dd3c019ecd6"),a.setAttribute("nonce",(0,s.tl)().csp_nonce),a.onload=()=>{let n=window.AgoraRTC;this.instance=new e(n),r()},a.onerror=()=>{n(Error("Provider audio script load error"))},document.body.appendChild(a)})}static getInstance(){return this.instance}static leave(){this.instance?.leave()}async join({appId:r,callId:n,token:a,callUserId:s,userId:c,encryptionKey:d,userEncryptionKey:m,setParticipantIdsCallback:p,callEventCallback:h,store:_,fileKey:g}){if(await this.setMicrophonePermissions(),!this.getSystemCompatibility())throw Error("System incompatible");this.setParticipantIdsCallback=p,this.userId=c,this.userEncryptionKey=m,this.callEventCallback=h;try{let e="vp8";l.Ay.safari&&+l.Ay.version>=13&&(e="h264"),await this.client?.leave(),this.client=this.AgoraRTC.createClient({mode:"live",codec:e}),this.AgoraRTC.setParameter("AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL",200),this.userId=c,this.handlingTokenExpiration=!1,this.client.setEncryptionConfig("aes-256-xts",d),this.attachClientListeners(n,a,c,d,h),await this.client.join(r,n,a,s),o.eD?.setIsInVoiceCall(!0),await this.client.setClientRole("host"),this.microphonePermissionDenied||(this.localAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId}),this.unpublishedLocalAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId})),this.localAudioTrack&&await this.client.publish(this.localAudioTrack),await this.unmute()}catch(o){(0,i.sx)("Voice Call - Error",{callId:n,token:a,userId:c,encryptionKey:d,message:`${o.message}`,agora_exception:!1,agora_recovery:!1,join:!0},{forwardToDatadog:!0});let r=Error(`Error joining call: ${o.message}`);throw await e.leave(),r}finally{(0,u.ds)("voice_user_joined",g,_.getState(),{callId:n,userId:c,encryptionKey:d,captions_enabled:this.captionsToggleEnabled}),(this.client?.connectionState!=="DISCONNECTED"||this.isPublishingLocalTrack())&&this.startPollingMicState()}}get uid(){return this.client?.uid}async renewToken(e){await this.client?.renewToken(e),this.handlingTokenExpiration=!1,(0,i.sx)("Voice Call - Token Renewed",{token:e,userId:this.client?.uid&&this.decryptedUserMap[this.client?.uid]})}async leave(){await this.client?.leave(),this.stopPollingMicState(),this.audioCaptionQueues.clear(),this.audioCaptionStream.clear()}async mute(){await this.localAudioTrack?.setEnabled(!1),this.audioCaptionQueues.removeTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!1),this.isMuted=!0}async unmute(){await this.localAudioTrack?.setEnabled(!0),(0,g.WO)()&&this.streamingAudioForCaptions&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!0),this.isMuted=!1}streamAudioForCaptions(e){(0,g.WO)()&&this.streamingAudioForCaptions!==e&&(this.streamingAudioForCaptions=e,this.audioCaptionQueues.clear(),this.streamingAudioForCaptions&&(this.client?.remoteUsers.forEach(async e=>{let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,e.audioTrack?.getMediaStreamTrack())}),this.localAudioTrack&&!this.isMuted&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack.getMediaStreamTrack())))}getSystemCompatibility(){return this.AgoraRTC.checkSystemRequirements()}isLocalUserSpeaking(){return!!this.userId&&E(this.averageRecentVoiceLevel[this.userId])}attachClientListeners(e,r,n,a,s){this.client?.removeAllListeners(),this.client?.on("user-published",async(e,r)=>{if(await this.client?.subscribe(e,r),"audio"===r){let r=e.audioTrack||null;if(r?.play(),this.playbackDevice&&r?.setPlaybackDevice(this.playbackDevice.deviceId),g.WO()&&r&&this.streamingAudioForCaptions){let n=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(n,r.getMediaStreamTrack())}}}),this.client?.on("user-unpublished",async(e,r)=>{if(!o.eD||"audio"!==r)return;let n=await this.getDecryptedUserId(e.uid);if(!n)return;let a=new Set;for(let r of this.client?.remoteUsers||[]){let i=await this.getDecryptedUserId(r.uid),o=e.audioTrack?.getMediaStreamTrack().id;i===n&&o&&a.add(o)}this.audioCaptionQueues.removeUnpublishedTrack(n,a)});let l=!0;this.client?.on("network-quality",function(o){l&&(o.downlinkNetworkQuality>=4||o.uplinkNetworkQuality>=4)?(i.sx("Voice Call - Bad Call Quality",{callId:e,token:r,userId:n,encryptionKey:a,message:`Bad call quality detected. downlink = ${o.downlinkNetworkQuality}, uplink = ${o.uplinkNetworkQuality}`,agora_exception:!1,agora_recovery:!1,join:!1},{forwardToDatadog:!0}),l=!1):l=!0}),this.client?.on("user-joined",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_JOINED,r)}),this.client?.on("user-left",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_LEFT,r)}),this.client?.on("connection-state-change",async r=>{let n;switch(r){case"CONNECTED":if(m.R9.sendVoiceMetadata(e),this.setParticipantIdsCallback?.(await this.getParticipantIds()),this.startPollingVolumeData(),this._microphonePermissionDenied){n=f.$E.CONNECTED_WITH_MIC_DISABLED;break}n=f.$E.CONNECTED;break;case"DISCONNECTED":this.onCallDisconnect(),n=f.$E.DISCONNECTED;break;case"CONNECTING":n=f.$E.CONNECTING;break;case"DISCONNECTING":n=f.$E.DISCONNECTING;break;case"RECONNECTING":n=f.$E.RECONNECTING}void 0!==n&&s(n)}),this.client?.on("exception",o=>{let l;switch(o.code){case 2001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;break;case 2002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;break;case 2003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;break;case 2005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED;break;case 4001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER;break;case 4002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER;break;case 4003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER;break;case 4005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER}l&&s(l),o.code>=3e3?(console.error(o),i.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:a,message:o.msg,code:o.code,agora_exception:!1,agora_recovery:!0,join:!1},{forwardToDatadog:!0})):i.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:a,message:o.msg,code:o.code,agora_exception:!0,agora_recovery:!1,join:!1},{forwardToDatadog:!0})}),this.client?.on("token-privilege-will-expire",()=>{if(!this.handlingTokenExpiration){if(this.handlingTokenExpiration=!0,!this.client?.remoteUsers.length){s(f.$E.CALL_INACTIVE),i.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:a,callInactive:!0});return}s(f.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT),i.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:a})}}),this.client?.on("token-privilege-did-expire",()=>{s(f.$E.TOKEN_EXPIRED),i.sx("Voice Call - Token Did Expire",{callId:e,token:r,userId:n,encryptionKey:a})})}async getDecryptedUserId(e){try{return this.decryptedUserMap[e]||(this.decryptedUserMap[e]=await (0,c.We)(this.userEncryptionKey,e.toString())),this.decryptedUserMap[e]}catch{(0,d.$D)(a.e.UNOWNED,Error(`Failed to decrypt encrypted user: ${e}`)),this.callEventCallback?.(f.$E.ERROR)}}async setMicrophonePermissions(){if(o.eD){this._microphonePermissionDenied=!await o.eD.requestMicrophonePermission();return}try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this._microphonePermissionDenied=!1}catch(e){this._microphonePermissionDenied=!0}}get microphonePermissionDenied(){return this._microphonePermissionDenied}};T.instance=null;let I=T},662154:(e,r,n)=>{n.d(r,{Eo:()=>_,W5:()=>h,bF:()=>g});var a=n(411855),i=n(188507),o=n(48451),s=n(32050),l=n(336427),c=n(631204),d=n(266316),u=n(857012),m=n(15092);function p(){let e=(0,i.d4)(e=>e.multiplayer).allUsers,r=d.R9.useVoiceMetadataBySessionId();function n(e,r){return e.sessionID===r.sessionID&&e.sawMouse===r.sawMouse&&e.deviceName===r.deviceName&&e.name===r.name&&e.imageURL===r.imageURL}return{multiplayerUsersInVoiceCall:(0,s.Op)(()=>e.filter(e=>r[e.sessionID]?.connectedCallId),[e,r],n),multiplayerUsersNotInVoiceCall:(0,s.Op)(()=>e.filter(e=>!r[e.sessionID]?.connectedCallId),[e,r],n)}}function h(e,r){let n=(0,m.iZ)(),o=(0,i.d4)(e=>e.multiplayer.deviceNameFilter),s=(0,i.d4)(r=>e&&r.voice.activeCall[e]),{multiplayerUsersInVoiceCall:c,multiplayerUsersNotInVoiceCall:d}=p(),h=(0,i.d4)(e=>e.voice.userIdsInCallFromProvider),[_,g]=(0,a.useState)(new Set),[f,E]=(0,a.useState)([]),[y,b]=a.useState(),v=(0,l.ZC)(s);return a.useEffect(()=>{s&&!v&&!y&&r&&(b(!0),setTimeout(()=>{b(!1)},2e3))},[s,v,r,y]),a.useEffect(()=>{!function(){if(s&&h.length>1&&!y){let e=new Set(h);g(e);let r=[];for(let n of[...d,...c])e.has(n.userID)||r.push(n);E((0,u._i)(r,o))}else g(new Set(c.map(e=>e.userID))),E((0,u._i)(d,o))}()},[s,c,d,n,o,h,y]),{userIdsInCall:_,usersNotInCall:f}}function _(e,r){let n=(0,i.wA)(),{multiplayerUsersInVoiceCall:s,multiplayerUsersNotInVoiceCall:l}=p(),d=a.useMemo(()=>s.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[s]),u=a.useMemo(()=>l.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[l]),m=(0,i.d4)(e=>r&&r in e.activeFileUsers?e.activeFileUsers[r]:void 0,i.bN),h=(0,i.d4)(e=>e.voice.voiceUsersById),[_,g]=(0,a.useState)([]),[f,E]=(0,a.useState)([]),[y,b]=(0,a.useState)([]);return a.useEffect(()=>{let r=[],n=[],a=[];for(let i of e)if(i in d)n.push(...d[i]);else if(i in u)n.push(...u[i]);else if(m&&i in m){let e=m[i];r.push({imageURL:e.imageUrl,name:e.handle,userID:e.id})}else i in h?r.push(h[i]):a.push(i);(0,o.c2)(y,n)||b(n),(0,o.c2)(f,r)||E(r),(0,i.bN)(_,a)||g(a)},[m,e,d,u,h,_,y,f]),a.useEffect(()=>{r&&_.length>0&&n(c.NS({fileKey:r,userIds:_}))},[_,n,r]),{voiceUsersInMultiplayer:y,voiceUsersNotInMultiplayer:f}}function g(e,r){let{voiceUsersInMultiplayer:n,voiceUsersNotInMultiplayer:i}=_(e,r);return a.useMemo(()=>[...n,...i],[n,i])}},937166:(e,r,n)=>{n.d(r,{HJ:()=>b,Lk:()=>h,Mw:()=>E,WO:()=>f,YL:()=>g,gW:()=>_,nN:()=>y});var a=n(411855),i=n(188507),o=n(281935),s=n(336427),l=n(747484);n(324608);var c=n(631204),d=n(176160),u=n(689102),m=n(770453);let p=()=>!((0,l.wg)()||(0,l.o4)());function h(){let e=(0,d.q5)(),r=(0,i.d4)(e=>e.orgById),n=(0,i.d4)(e=>e.teams),o=e?.key,l=(0,i.d4)(e=>o&&!!e.voice.activeCall[o]),[c,u]=a.useState(!1),m=(0,s.ZC)(c);return a.useEffect(()=>{let a=p()&&4===g({openFile:e,teams:n,orgById:r});!0===m&&!a&&l||u(a)},[e,r,n,m,l]),c}var _=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.DISABLED_BY_ORG=1]="DISABLED_BY_ORG",e[e.INELIGIBLE_FILE_IN_PERSONAL_SPACE=2]="INELIGIBLE_FILE_IN_PERSONAL_SPACE",e[e.ELIGIBLE_WITH_UPGRADE=3]="ELIGIBLE_WITH_UPGRADE",e[e.ELIGIBLE=4]="ELIGIBLE",e))(_||{});function g(e){if("gov"===window.INITIAL_OPTIONS.cluster_name)return 0;let r=e.openFile;if(!r||!r.parentOrgId&&!r.teamId)return 0;if(r.parentOrgId){let n=e.orgById[r.parentOrgId];return n?n.voice_enabled?4:1:0}if(r.teamId){let n=e.teams[r.teamId];return n?(0,u.PS)(n)?4:3:0}return 2}function f(){return!!o.eD}function E(e){return e>=m.MK.STARTED&&e<m.MK.DONE}function y(e){return e<m.MK.NOT_STARTED}function b(e,r){o.eD?.setCaptionsEnabled(r),e(c.t7(r))}},204220:(e,r,n)=>{n.d(r,{Em:()=>o,TI:()=>s,Wl:()=>i});var a=n(411855);function i(e,r){let[n,i]=(0,a.useState)(null),[o,s]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(r&&!o){let n=function(r){i(r[e]||null)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)?n:null}function o(e,r,n){let a=r=>{n(r[e]||null)};return r&&r.volumeLevelsStore.subscribe(a),{unsubscribe:()=>r?.volumeLevelsStore.unsubscribe(a)}}function s(e,r){let[n,i]=(0,a.useState)(),[o,s]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(r&&!o){let n=function(r){i(r[e]?.isMuted)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)return n}},637213:(e,r,n)=>{n.d(r,{$g:()=>w,Au:()=>g,BG:()=>p,Bt:()=>d,GD:()=>T,LF:()=>I,N$:()=>A,Qn:()=>v,_L:()=>_,bf:()=>i,fL:()=>u,hQ:()=>y,le:()=>b,mX:()=>f,oF:()=>m,pY:()=>h,rx:()=>S,sZ:()=>E,u_:()=>c,wS:()=>C,w_:()=>N});var a,i,o=n(653798),s=n(771952);function l(e){window.parent.postMessage(e,"*")}function c(){l({type:"FIGMA_READY"})}function d(e){l({type:"CSS_PROPERTIES",data:{cssProperties:e}})}function u(e){l({type:"HTML_SKELETON",data:{htmlSkeleton:e}})}function m(e){l({type:"TEXT",data:{text:e}})}function p(e,r){l({type:"LAYERS",data:{rootNodeId:e,layers:r}})}function h(e){l({type:"ASSET",data:{asset:e}})}function _(e){l({type:"RELATED_LINK_CREATED",data:{link:e}})}function g(e){l({type:"RELATED_LINK_REMOVED",data:{link:e}})}function f(e){l({type:"SELECTED_LAYER_GUID",data:{guid:e}})}function E(e){l({type:"SELECTED_PAGE_GUID",data:{guid:e}})}function y(e){l({type:"CONFIGURE_AUTOCOMPLETE",data:{providers:e}})}function b(e){l({type:"GENERATED_CODE",data:{sections:e}})}let v=(0,n(401562).n)(e=>{l({type:"OPEN_IN_BROWSER",data:{href:e}})});function T(e){l({type:"FILE_NAME",data:{name:e}})}function I(e,r,n){l({type:"THUMBNAIL",data:{nodeId:e,thumbnailDataUri:r,thumbnailSize:n}})}function S(){l({type:"PAGE_LOADED"})}function w(){l({type:"IDLE_LOGOUT"})}function A(e){l({type:"MAPPING_SUGGESTION",data:{requestId:e.requestId,mappings:e.mappings||null,error:e.error||null}})}(a||(a={})).sendGenerateFigmadocMessage=function(e){return C.sendMessage({type:"GENERATE_FIGMADOC",request:{userCode:e}})},(e=>{e.sendGetLocalFileExtensionManifest=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_MANIFEST",request:{id:e}})},e.sendCreateMultipleNewLocalFileExtensions=function(e,r){return C.sendMessage({type:"CREATE_MULTIPLE_NEW_LOCAL_FILE_EXTENSIONS",request:{options:e,depth:r}})},e.sendGetLocalFileExtensionSourceMessage=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_SOURCE",request:{id:e}})},e.sendUpdateCachedContainsWidget=function(e){return C.sendMessage({type:"UPDATE_CACHED_CONTAINS_WIDGET",request:e})},e.sendGetLocalManifestFileExtensionIdsToCachedMetadataMap=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_METADATA_MAP",request:void 0})},e.sendRegisterManifestChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_MANIFEST_CHANGE_OBSERVER"},e)},e.sendRegisterCodeChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_CODE_CHANGE_OBSERVER"},e)},e.sendRegisterUIChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_UI_CHANGE_OBSERVER"},e)},e.sendOpenExtensionDirectoryMessage=function(e){return l({type:"OPEN_EXTENSION_DIRECTORY",data:{id:e}})},e.sendOpenExtensionManifestMessage=function(e){return l({type:"OPEN_EXTENSION_MANIFEST",data:{id:e}})},e.sendRemoveFileExtensionMessage=function(e){return C.sendMessage({type:"REMOVE_LOCAL_FILE_EXTENSION",request:{id:e}})},e.sendGetLocalManifestFileExtensionIdsToCachedContainsWidgetMapMessage=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_CONTAINS_WIDGET_MAP",request:void 0})},e.sendToggleDevToolsMessage=function(){return l({type:"TOGGLE_DEV_TOOLS"})},e.sendGetAllLocalFileExtensionIdsMessage=function(){return C.sendMessage({type:"GET_ALL_LOCAL_FILE_EXTENSION_IDS",request:void 0})},e.sendWriteNewExtensionDirectoryToDiskMessage=function(e){return C.sendMessage({type:"WRITE_NEW_EXTENSION_DIRECTORY_TO_DISK",request:e})}})(i||(i={}));let C=new class{constructor(){this.pendingMessagesById={}}sendMessage(e){let r=(0,s.g)(),n={...e,requestId:r};return new Promise((e,a)=>{this.pendingMessagesById[r]={...n,resolve:e,reject:a},l(n)})}resolveMessage(e){let r=this.pendingMessagesById[e.requestId];if(!r){(0,o.x1)("MessageWithResponseManager.resolveMessage","No pending message found",{response:e,pendingMessagesById:this.pendingMessagesById},{reportAsSentryError:!0});return}e.response&&(r.resolve(e.response),delete this.pendingMessagesById[e.requestId])}},N=new class{constructor(){this.callbacksById={}}registerCallback(e,r){let n=(0,s.g)();return this.callbacksById[n]=r,l({...e,callbackId:n}),()=>this.cancelCallback(n)}resolveMessage(e){let r=this.callbacksById[e.callbackId];if(!r){(0,o.x1)("MessageWithCallbackManager.resolveMessage","No callback found",{response:e,callbacksById:this.callbacksById},{reportAsSentryError:!0});return}r(e.callbackData)}async cancelCallback(e){await C.sendMessage({type:"CANCEL_CALLBACK",request:{callbackId:e}}),delete this.callbacksById[e]}}},362476:(e,r,n)=>{n.d(r,{wM:()=>a}),n(411855),n(493685),n(626918),n(977235),n(76265),n(916348),n(569652),n(871290),n(314540);function a(e){let r={},n=0,a=0;return e.forEach(e=>{if(e.workspace_id){let n=r[e.workspace_id]??0;n++,r[e.workspace_id]=n}else e.team_id?n++:a++}),{libraryCountByWorkspaceId:r,unassignedLibrariesCount:n,draftLibrariesCount:a}}},961143:(e,r,n)=>{n.d(r,{Ay:()=>O,yP:()=>N});var a=n(163773),i=n(841962),o=n(555834),s=n(864986),l=n(196794),c=n(747327),d=n(206908),u=n(47795),m=n(942754),p=n(225371),h=n(99990),_=n(617254),g=n(190500),f=n(23478),E=n(38711),y=n(214773),b=n(313449),v=n(421023),T=n(622589),I=n(682403),S=n(914077),w=n(425028),A=n(728551),C=n(348126);let N=(e,r)=>v.$Z.selectedViewHasMissingResources(e,r),L=0,O=e=>r=>function(n){var O,R;let P=e.getState().selectedView;r(n);let D=e.getState();if(u.Qv.matches(n)){let r=D.selectedView;if(r===A.o0&&(r=(0,i.Ay)().selected_view||(0,v.vU)(D,a.Ay.location.pathname,a.Ay.location.search,a.Ay.location.hash)),"fullscreen"===r.view&&r.fileKey){let{fileKey:a}=r,i=e.getState().fileByKey[a];i&&!n.payload.fromRealtime&&(0,S.oD)(r.editorType)!==i.editor_type&&(r.editorType=(0,S.wN)(i.editor_type??"design"))}if(N(D,r)&&(r={view:"resourceUnavailable",resourceType:(O=r,new o.$T().selectedViewMissingResourceType(D,O))}),"teamUpgrade"===r.view&&r.teamId){let e=D.teams[r.teamId];e&&e.pro_team&&!(0,b.WQ)(e)&&(r={view:"team",teamId:r.teamId,teamViewTab:w.A$.SETTINGS})}r!==A.o0?e.dispatch(u.$T(r)):D.user?.drafts_folder_id?e.dispatch(u.$T({view:"folder",folderId:D.user.drafts_folder_id})):e.dispatch(u.$T({view:"recentsAndSharing"}))}else if(p.OB.matches(n)){let e={view:"fullscreen",fileKey:n.payload.file.key,editorType:n.payload.fullscreenEditorType},r=(0,v.Np)(D,e);a.Ay.replace(r,{...e,jsCommitHash:(0,E.Qr)()})}else if(u.$T.matches(n)){if("prototype"!==P.view&&"prototype"===n.payload.view&&(0,C.q)()){let e=(0,v.Np)(D,n.payload);a.Ay.redirect(e)}"fullscreen"===n.payload.view&&("fullscreen"!==P.view||n.payload.editorType!==P.editorType)&&y.B8(n.payload.editorType);let{selectedView:r}=e.getState();if(!("inlinePreview"in r&&r.inlinePreview)&&!n.payload.fromPopstate){let r=(0,v.Np)(D,n.payload);a.Ay.location.pathname+a.Ay.location.search!==r?(("fullscreen"!==n.payload.view||n.payload.fileKey!==i.Ay().editing_file?.key)&&!I.YH&&(0,T.w)()&&(0,I._X)("fileBrowserHistory middleware selectView").then(r=>{e.dispatch(u.Qv(r.data.meta))}),!n.payload.forceReplaceState&&a.Ay.location.state&&(R=n.payload,null==P||null==R?P!==R:v.$Z.requireHistoryChange(P,R))?a.Ay.push(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}):a.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()})):null==a.Ay.location.state&&a.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}),e.getState()?.user?.appData?.loggedOut&&"fullscreen"!==n.payload.view&&a.Ay.reload("User Logged out")}if("searchAndBrowse"===n.payload.subView){let e=n.payload.data;e&&!e.category&&(0,E.hL)((0,s.vC)(e))}else(0,E.OR)(D,n.payload)}else if(l.Af.matches(n)&&"hubFile"===D.selectedView.subView)(0,E.OR)(D,{hubFileId:n.payload.hubFileId,subView:"hubFile",view:"communityHub"});else if(c.l5.matches(n)){let r=e.getState().selectedView,i=n.payload.publishedPlugins,o=r&&"communityHub"===r.view&&"plugin"===r.subView&&r.publishedPluginId;if(o&&i&&i.some(e=>e.id===o)){if(a.Ay){let e=(0,v.Np)(D,r);a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}(0,E.OR)(D,r)}}else if(m.yJ.matches(n)){let r=e.getState().selectedView;"folder"===r.view&&r.folderId===n.payload.folder.id&&(0,E.OR)(D,r)}else if(m.bE.matches(n)){let r=e.getState().selectedView;if("folder"===r.view&&r.folderId===n.payload.id){(0,E.OR)(D,r);let e=(0,v.Np)(D,r);a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(h.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view){let e=r.fileKey&&D.fileByKey[r.fileKey];if(e){let i=(0,f.L8)(e,D.repos);if(i&&i.id===n.payload.repo.id){(0,E.OR)(D,r);let e=(0,v.Np)(D,r);a.Ay&&a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}}}else if(d.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view&&n.payload.file.key===r.fileKey||"prototype"===r.view&&n.payload.file.key===r.file.key){(0,E.OR)(D,r);let e=(0,v.Np)(D,r);a.Ay&&a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(_.Rz.matches(n)){let r=e.getState().selectedView;r?.view==="search"&&(a.Ay.replace((0,v.Np)(D,r),{...r,jsCommitHash:(0,E.Qr)()}),(0,E.OR)(D,r))}else u.Oe.matches(n)?(0,g.uE)("File Browser Sidebar Clicked",e.getState(),{clickedResourceType:n.payload.clickedResourceType,resourceIdOrKey:n.payload.resourceIdOrKey}):0===L&&(L=setTimeout(function(){L=0,null===e.getState().selectedView&&e.dispatch(u.$T({view:"recentsAndSharing"}))},0));return n}},886756:(e,r,n)=>{n.d(r,{Pf:()=>o,ck:()=>a,hv:()=>i});var a=(e=>(e[e.CURRENT_USER=0]="CURRENT_USER",e[e.TEAM=1]="TEAM",e[e.ORG=2]="ORG",e[e.WORKSPACE=3]="WORKSPACE",e))(a||{}),i=(e=>(e[e.INIT=0]="INIT",e[e.POSITIONING=1]="POSITIONING",e[e.UPLOADING=2]="UPLOADING",e))(i||{}),o=(e=>(e[e.SMALL=120]="SMALL",e[e.LARGE=500]="LARGE",e))(o||{})},694630:(e,r,n)=>{n.d(r,{MM:()=>s,Rt:()=>o,Vq:()=>l});var a=n(338584),i=n(811257),o=(e=>(e.ALL="All",e.STICKERS_AND_COMPONENTS="Stickers",e.TEMPLATES="Templates",e.TEAM_TEMPLATES="TeamTemplates",e.WIDGETS="Widgets",e.PLUGINS="Plugins",e.MORE="More",e.ORG_FACE_STAMPS="OrgFaceStamps",e))(o||{});let s=a.enum(["universal-insert-figjam-all","universal-insert-figjam-all-use-case","universal-insert-figjam-templates","universal-insert-figjam-stickers","universal-insert-figjam-stickers-compact-view","universal-insert-figjam-widgets","universal-insert-figjam-plugins","universal-insert-figjam-more","universal-insert-figjam-collage","universal-insert-figjam-all-whiteboard-tools"]);function l(e){switch(e){case i.p.ALL:return"universal-insert-figjam-all";case i.p.TEMPLATES:return"universal-insert-figjam-templates";case i.p.STICKERS_AND_COMPONENTS:return"universal-insert-figjam-stickers";case i.p.WIDGETS:return"universal-insert-figjam-widgets";case i.p.PLUGINS:return"universal-insert-figjam-plugins";case i.p.MORE:return"universal-insert-figjam-more";case i.p.RECENTS_COLLAGE:return"universal-insert-figjam-collage";default:throw Error("Unhandled modal tab in convertModalTabToTrackingSource")}}},322330:(e,r,n)=>{n.d(r,{_V:()=>o,b4:()=>i,kM:()=>a});var a=(e=>(e[e.Text=0]="Text",e[e.FrameOrGroup=1]="FrameOrGroup",e[e.Component=2]="Component",e[e.Instance=3]="Instance",e[e.Image=4]="Image",e[e.Shape=5]="Shape",e[e.Other=6]="Other",e[e.MatchCase=7]="MatchCase",e[e.WholeWords=8]="WholeWords",e))(a||{});let i=[0,1,2,3,4,5,6],o=[7,8]},240327:(e,r,n)=>{n.d(r,{Yv:()=>i,fJ:()=>a});let a="f195f195-f195-f195-f195-f195f195f195";var i=(e=>(e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM",e))(i||{})},492366:(e,r,n)=>{n.d(r,{I0:()=>y,KS:()=>p,PM:()=>T,Qv:()=>_,U:()=>b,Ug:()=>m,aL:()=>c,bD:()=>s,cS:()=>g,dj:()=>A,hE:()=>l,m3:()=>v,po:()=>w,vt:()=>u,xQ:()=>E,zF:()=>I});var a=n(338584),i=n(804197),o=n(404469),s=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.COMMENT="comment",e))(s||{}),l=(e=>(e.SUBSCRIPTION="subscription",e.ONE_TIME="one_time",e))(l||{}),c=(e=>(e.DETAIL="detail",e.INSERTS="inserts",e.QUICK_ACTIONS="quick_actions",e.PLUGIN_ROW="plugin_row",e.REDESIGNED_PLUGIN_ROW="redesigned_plugin_row",e.SEARCH="search",e))(c||{}),d=(e=>(e[e.NO_USER=0]="NO_USER",e[e.NO_PROFILE=1]="NO_PROFILE",e))(d||{}),u=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e))(u||{}),m=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.PROFILE="profile",e))(m||{});let p=i.iG.extend({author:a.ignore(),parent_id:a.string().nullable(),reply_count:a.number(),last_replied_at:a.string().nullable(),resource_version_id:a.string(),message_meta:a.array(a.ignore()),rating_value:a.number().optional()});a.object({plugin:a.ignore().nullish(),plugin_install:a.ignore().nullish(),whitelisted_plugin:a.ignore().nullish(),hub_file:a.ignore().nullish(),profile:a.ignore().nullish(),community_comment:a.ignore().nullish(),widget:a.ignore().nullish(),community_resource_payment:a.ignore().nullish()});var h=(e=>(e[e.SHOW_404=0]="SHOW_404",e[e.REDIRECT_TO_INTERNAL_PROFILE=1]="REDIRECT_TO_INTERNAL_PROFILE",e))(h||{}),_=(e=>(e.ALL="ALL",e.ME="ME",e.RATINGS_REVIEWS="RATINGS_REVIEWS",e.COMMENTS="COMMENTS",e))(_||{}),g=(e=>(e.COMMUNITY_LANDING="community_landing",e.FILE_BROWSER_RECOMMENDED_TEMPLATES="file_browser_recommended_templates",e.FIGJAM_TEMPLATES_PICKER="figjam_templates_picker",e.BROWSE_PLUGINS_MODAL="browse_plugins_modal",e.BROWSE_WIDGETS_MODAL="browse_widgets_modal",e.CURATED_PAGE="curated_page",e.NA="na",e.CONFIG_VOTE="config_vote",e.COMMUNITY_WIDGETS_PAGE="community_widgets_page",e.FIGJAM_SIMPLE_TEMPLATES_PICKER="figjam_simple_templates_picker",e.FIGMA_INSERTS_NUX="figma_inserts_nux",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.COMMUNITY_LIBRARIES_QUICKSTART="community_libraries_quickstart",e.FIGJAM_SECTION_PRESET_PICKER="figjam_section_preset_picker",e.CATEGORY_PAGE="category_page",e.PIPER_TEMPLATE_MODAL="piper_template_modal",e.SLIDES_FEATURED_CREATORS="slides_featured_creators",e.SITES_TEMPLATE_MODAL="sites_template_modal",e))(g||{}),f=(e=>(e.PM="PM",e.DES="DES",e.ENG="ENG",e.MKT="MKT",e.UR="UR",e.OTH="OTH",e.ALL="ALL",e.STARTER="STARTER",e))(f||{});function E(e){return null!=e&&"is_widget"in e&&e.is_widget}function y(e){return null!=e&&"current_plugin_version_id"in e&&!e.is_widget}function b(e){return null!=e&&"client_meta"in e}function v(e){return!!e?.monetized_resource_metadata}function T(e){return!!e?.monetized_resource_metadata?.has_freemium_code}function I(e){return"third_party_m10n_status"in e&&e.third_party_m10n_status===o.PN.FLAGGED||"is_3rd_party_monetized"in e&&!!e.is_3rd_party_monetized}var S=(e=>(e.POST_COMPOSER="POST_COMPOSER",e.NAVBAR="NAVBAR",e.RECENT_FILES_DIRECT_LINK="RECENT_FILES_DIRECT_LINK",e.IFRAME="IFRAME",e))(S||{}),w=(e=>(e.ACTIVE="active",e.INACTIVE="inactive",e))(w||{}),A=(e=>(e.PASTE="paste",e.DROP="drop",e.FILE_INPUT="file_input",e))(A||{}),C=(e=>(e[e.TRY_IT_OUT=0]="TRY_IT_OUT",e[e.OPEN=1]="OPEN",e))(C||{});a.object({id:a.string().nullish(),hubFileId:a.string().nullish(),pluginId:a.string().nullish(),widgetId:a.string().nullish(),oneStars:a.number(),twoStars:a.number(),threeStars:a.number(),fourStars:a.number(),fiveStars:a.number(),totalRatings:a.number(),avgRating:a.number().nullish(),createdAt:a.date().nullish(),updatedAt:a.date().nullish()})},914077:(e,r,n)=>{n.d(r,{Bu:()=>v,CO:()=>I,Nw:()=>u,YP:()=>f,co:()=>m,fB:()=>T,fP:()=>p,nT:()=>h,oD:()=>g,oQ:()=>s,sL:()=>E,sq:()=>l,wN:()=>b,xq:()=>_,y9:()=>y,yY:()=>d});var a=n(805014),i=n(653798),o=n(314540);let s="si"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-2-n)}).join("")}(45,149,163)+"s",l="co"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-36-n)}).join("")}(2,149)+"per",c=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-61-n)}).join("")}(32,202,198)+"lu"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-5-n)}).join("")}(4,119,129,109,125,126,124)+"o"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-30-n)}).join("")}(39,179);function d(e){return 1===e||7===e}function u(e){return 2===e||d(e)}function m(e){return 4===e||u(e)}function p(e,r){switch(e){case 1:case 7:case 3:return r===o._Y.DESIGN;case 2:return r===o._Y.WHITEBOARD;case 4:return r===o._Y.SLIDES;case 5:return r===o._Y.SITES;case 6:return r===o._Y.COOPER;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),!1}}var h=(e=>(e[e.Design=1]="Design",e[e.Whiteboard=2]="Whiteboard",e[e.DevHandoff=3]="DevHandoff",e[e.Slides=4]="Slides",e[e.Sites=5]="Sites",e[e.Cooper=6]="Cooper",e[e.Illustration=7]="Illustration",e))(h||{});function _(e){switch(e){case 1:return a._YF.DESIGN;case 2:return a._YF.WHITEBOARD;case 3:return a._YF.DEV_HANDOFF;case 4:return a._YF.SLIDES;case 5:return a._YF.SITES;case 6:return a._YF.COOPER;case 7:return a._YF.ILLUSTRATION;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),a._YF.DESIGN}}function g(e){switch(e){case 2:return o._Y.WHITEBOARD;case 4:return o._Y.SLIDES;case 5:return o._Y.SITES;case 3:case 1:case 7:return o._Y.DESIGN;case 6:return o._Y.COOPER;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),o._Y.DESIGN}}function f(e){switch(e){case 2:return"whiteboard";case 4:return"slides";case 5:return"sites";case 3:return"dev_handoff";default:return"design"}}function E(e){if(null==e)return null;switch(e){case o._Y.DESIGN:return 1;case o._Y.WHITEBOARD:return 2;case o._Y.SLIDES:return 4;case o._Y.SITES:return 5;case o._Y.COOPER:return 6}}function y(e){if(null==e)return null;switch(e){case o._Y.DESIGN:return"DESIGN";case o._Y.WHITEBOARD:return"WHITEBOARD";case o._Y.SLIDES:return"SLIDES";case o._Y.SITES:return"SITES";case o._Y.COOPER:return"COOPER"}}function b(e){if(null==e)return 1;switch(e){case o._Y.DESIGN:return 1;case o._Y.WHITEBOARD:return 2;case o._Y.SLIDES:return 4;case o._Y.SITES:return 5;case o._Y.COOPER:return 6}}function v(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 6:return l;case 7:return c;default:return e}}function T(e){switch(e){case a._YF.DESIGN:return 1;case a._YF.WHITEBOARD:return 2;case a._YF.DEV_HANDOFF:return 3;case a._YF.SLIDES:return 4;case a._YF.SITES:return 5;case a._YF.COOPER:return 6;case a._YF.ILLUSTRATION:return 7;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),1}}function I(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 6:return l;case 7:return c;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),""}}},455585:(e,r,n)=>{n.d(r,{A:()=>a,b:()=>i});var a=(e=>(e.FILE="file",e.REPO="repo",e.FILE_IMPORT="file_import",e))(a||{}),i=(e=>(e[e.FOLDER_ROW=0]="FOLDER_ROW",e[e.NEW_FOLDER_TEAM=1]="NEW_FOLDER_TEAM",e))(i||{})},505534:(e,r,n)=>{n.d(r,{M8:()=>m,UE:()=>E,Ws:()=>f,ai:()=>u,av:()=>v,f6:()=>d,kF:()=>p,lF:()=>y,zy:()=>T});var a=n(33011),i=n(841962),o=n(977235),s=n(653798),l=n(338584),c=n(7395),d=(e=>(e.FILE_BROWSER_COMMUNITY_HOME_SHELF="file_browser_community_home_shelf",e.FILE_BROWSER_SIDEBAR_RECENTS="file_browser_sidebar_recents",e.FILE_BROWSER_SIDEBAR_DRAFTS="file_browser_sidebar_drafts",e.FILE_BROWSER_SIDEBAR_FOLDER="file_browser_sidebar_folder",e.FILE_BROWSER_THUMBNAILS_RECENTS="file_browser_thumbnails_recents",e.FILE_BROWSER_TOOLBAR_RECENTS="file_browser_toolbar_recents",e.FILE_BROWSER_TOOLBAR_FOLDER="file_browser_toolbar_folder",e.FILE_BROWSER_TOOLBAR_DRAFTS="file_browser_toolbar_drafts",e.FILE_BROWSER_TOPBAR_DELETED="file_browser_topbar_deleted",e.FILE_BROWSER_TOPBAR_RECENTS="file_browser_topbar_recents",e.FILE_BROWSER_TOPBAR_FOLDER="file_browser_topbar_folder",e.FILE_BROWSER_TOPBAR_DRAFTS="file_browser_topbar_drafts",e.FILE_BROWSER_TOPBAR_OFFLINE="file_browser_topbar_offline",e.FILE_BROWSER_EMPTY_FOLDER="file_browser_empty_folder",e.FILE_BROWSER_FEED="file_browser_feed",e.FILE_BROWSER_FOLDER_CONTEXT_MENU="file_browser_folder_context_menu",e.FILE_BROWSER_FOLDER_EMPTY_TILE="file_browser_folder_empty_tile",e.FILE_BROWSER_STARTER_TEAM_OVERVIEW="file_browser_starter_team_overview",e.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL="file_browser_team_file_limit_paywall",e.FILE_BROWSER_TEAM_FOLDER_BUTTONS="file_browser_team_folder_buttons",e.FILE_BROWSER_NUX="file_browser_nux",e.FILE_BROWSER_ONBOARDING="file_browser_onboarding",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.CURSOR_BOT_END_MODAL="cursor_bot_end_modal",e.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL="design_tooltips_plus_outro_modal",e.DESIGN_VIDEO_OUTRO_MODAL="design_video_outro_modal",e.FIGJAM_NUDGE_MODAL="figjam_nudge_modal",e.DESKTOP_NEW_TAB_BUTTON="desktop_new_tab_button",e.FIGJAM_WHATS_NEW_MODAL="figjam_whats_new_modal",e.FIGJAM_AI_ONBOARDING_MODAL="figjam_ai_onboarding_announcement",e.OFFLINE_NOTIFICATION="offline_notification",e.COMMUNITY_COLLECTIONS_PAGE="community_collections_page",e.FIGJAM_MAKE_SOMETHING_POPUP="figjam_make_something_popup",e.CONFIG_24_FEATURE_ANNOUNCEMENT_CAROUSEL="config_24_feature_announcement_carousel",e.DESIGN_TO_SLIDES_ENTRYPOINT="design_to_slides_entrypoint",e.BOARD_TO_DECK_FILE_MENU="figjam-file-editor-menu",e.BOARD_TO_DECK_SHARE_MODAL="figjam-share-modal",e.BOARD_TO_DECK_SELECTION="figjam-selection-inline-menu",e.BOARD_TO_DECK_PAGES_CONTEXT_MENU="figjam-page-context-menu",e))(d||{}),u=(e=>(e.NEW_TAB="new_tab",e.SAME_TAB="same_tab",e))(u||{});let m="multiplayer_user_state_change";var p=(e=>(e[e.NONE=0]="NONE",e[e.FOR_OPEN=1]="FOR_OPEN",e[e.FOR_MENU=2]="FOR_MENU",e))(p||{});let h=l.object({extensionId:l.string(),extensionType:l.enum(["plugin","widget"]),currentExtensionVersionId:l.string().nullable(),localFileId:l.number().nullable()}),_=l.object({displayName:l.string(),runPluginArgs:c.Ps.optional(),extensionInfo:h.optional().nullable()}),g=l.object({parameterValues:l.record(l.string()).optional().nullable()});function f(e){return e?{id:e.id,name:e.name,org_id:e.orgId,img_url:e.imgUrl??void 0,subscription:e.subscription,restrictions_list:e.restrictionsList,student_team_at:e.studentTeamAt?e.studentTeamAt.toString():null,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toString():null,deleted_at:e.deletedAt?e.deletedAt.toString():null,created_at:e.createdAt.toString(),student_team:!!e.studentTeamAt}:null}function E(e,r){let n={key:e.key,isAbandonedDraftFile:{status:o.tT.Loaded,data:!1},teamId:e.team_id,folderId:e.folder_id,clientMeta:e.client_meta,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,sourceFileKey:e.source_file_key,linkAccess:e.link_access,hasFileLinkPassword:e.has_file_link_password,hasProtoLinkPassword:e.has_proto_link_password,updatedAt:new Date(e.updated_at||e.created_at),trashedAt:e.trashed_at?new Date(e.trashed_at):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,creatorId:e.creator_id,createdAt:new Date(e.created_at),name:e.name,_name:e.name,editorType:e.editor_type||"design",orgBrowsable:e.org_browsable||null,thumbnailGuid:e.thumbnail_guid||null,sourceCheckpointId:e.source_checkpoint_id||null,license:e.license,isTeamTemplate:!!e.is_team_template,isPublishedSite:!!e.is_published_site,figFileLinks:[],isFavorited:!!e?.is_favorited,isTryFile:e.is_try_file,votingSessions:null,template:null,canPublishTemplate:!1,viewerExportRestricted:!!e.viewer_export_restricted,publishedHubFile:null,ownerRole:null,trackTags:{isTemplate:e.is_template||null},libraryKey:e.library_key??"",plan:null};if(!r)return n;let{team:l,folder:c,repo:d,sourceFile:u,can_delete:m,can_edit:p,can_edit_canvas:h,can_access_dev_mode_entry_point:_,can_access_full_dev_mode:g,can_manage:f,can_view:E,can_export:y,hasEduGracePeriod:b,org:v,orgUser:T,teamUser:I}=r;return{...n,team:function(e,r=!1){return e?{id:e.id,name:e.name,orgId:e.org_id,subscription:e.subscription,imgUrl:e.img_url||null,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team_at?new Date(e.student_team_at):e.student_team?new Date:null,trialPeriodEnd:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,createdAt:new Date(e.created_at),eduGracePeriod:{id:"",isValid:r},licenseGroupId:e.license_group_id,licenseGroup:e.license_group,workspaceId:e.workspace_id,orgAccess:e.org_access,studentTeamState:e.student_team_state}:null}(l,b),project:c?function(e,r=!0,n=!0){return{id:e.id,name:e.name,orgId:e.org_id||null,teamId:e.team_id,path:e.path,inviteOnlyAt:e.is_invite_only?new Date:null,viewOnlyAt:e.is_view_only?new Date:null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,subscription:e.is_subscribed?{}:null,activeProjectResourceConnections:[],description:e.description,canEdit:r,canRename:n,canCreateCooperFile:e.canCreateCooperFile,canCreateDesignFile:e.canCreateDesignFile,canCreateFigjamFile:e.canCreateFigjamFile,canCreateSlidesFile:e.canCreateSlidesFile,canCreateSitesFile:e.canCreateSitesFile}}(c):null,repo:d?{id:d.id,name:d.name,folderId:d.folder_id,teamId:d.team_id,defaultFileKey:d.default_file_key,canEdit:!0}:null,sourceFile:((0,i.kc)().ds_pubfile_log_discrepancy_web&&u&&u.key&&!u.library_key&&(0,s.x1)("library-keys","missing library key in source file",{sourceFile:u},{reportAsSentryError:!0}),u?{key:u.key,name:u.name,libraryKey:(0,a.l)(u.library_key??""),fileRepoId:u.file_repo_id,canManage:u.can_manage,canView:u.can_view}:null),canDelete:m,canEdit:p,canEditCanvas:h,canAccessDevModeEntryPoint:_,canAccessFullDevMode:g,canManage:f,canView:E,canExport:y,org:v?{figjamDisabledAt:v.figjam_disabled_at,inviteWhitelist:{guestInviteSetting:v.invite_whitelist_guest_invite_setting},name:v.name,isSlidesDisabled:(0,o.Wk)(!!v.is_slides_disabled)}:null,currentPartialOrgUser:T?{draftsFolderId:T.drafts_folder_id,designPaidStatus:T.design_paid_status,whiteboardPaidStatus:T.whiteboard_paid_status,accountType:T.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null,devModeAccountTypeRequest:null}:null,currentTeamUser:I?{whiteboardPaidStatus:I.whiteboard_paid_status,designPaidStatus:I.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null}:null}}_.omit({runPluginArgs:!0}).extend({selectedRunPluginArgs:g.optional().nullable()});var y=(e=>(e[e.BAR=0]="BAR",e[e.SPINNER=1]="SPINNER",e))(y||{}),b=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(b||{});class v{constructor(e,r,n){this.tabCloseText=e,this.unsaved=r,this.error=n,this.hasUnsavedChanges=!1,this.hasUnsavedChanges=r.hasAutosaveChanges||r.hasMultiplayerChanges}equals(e){return e&&this.tabCloseText===e.tabCloseText&&this.unsaved.hasAutosaveChanges===e.unsaved.hasAutosaveChanges&&this.unsaved.hasMultiplayerChanges===e.unsaved.hasMultiplayerChanges&&this.error===e.error}}var T=(e=>(e[e.CUT=0]="CUT",e[e.COPY=1]="COPY",e[e.PASTE=2]="PASTE",e))(T||{})},754430:(e,r,n)=>{n.d(r,{I7:()=>g,aP:()=>l,k2:()=>s,kM:()=>f,o1:()=>d,xK:()=>h});var a=n(338584),i=n(59555),o=n(758268),s=(e=>(e.RESOURCE_PAGE="resource_page",e.EDITOR="editor",e.UNIVERSAL_POSTING="universal_posting",e.ADMIN="admin",e))(s||{}),l=(e=>(e[e.EDIT=0]="EDIT",e[e.UPLOADING=1]="UPLOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE",e))(l||{});let c=a.object({"500_500":a.string().optional(),"120_120":a.string().optional()});var d=(e=>(e.USER="user",e.TEAM="team",e.ORG="org",e))(d||{});let u=a.object({email:a.string().optional(),user_id:a.string(),is_primary_user:a.boolean(),can_sell_on_community:a.boolean().optional()}),m=i.n.and(a.object({id:a.string(),name:a.string(),profile_handle:a.string(),img_url:a.coerce.string().optional(),img_urls:c,current_user_is_following:a.coerce.boolean(),current_user_is_followed:a.coerce.boolean(),is_restricted_by_current_user:a.coerce.boolean(),entity_type:a.nativeEnum(d),primary_user_id:a.string().nullable(),location:a.string().nullable(),follower_count:a.number(),following_count:a.number(),isPending:a.boolean().optional(),associated_users:a.array(u).optional(),has_published:a.boolean().optional(),description:a.string().nullish()})),p=a.object({accepted:a.array(m),pending:a.array(m).optional()}),h=a.object({creator:o.aw,publisher:m,community_publishers:p}),_=o.aw.pick({id:!0,email:!0}),g=a.object({accepted:a.array(o.aw),pending:a.array(_).optional()});var f=(e=>(e.OWNER="owner",e.PUBLISHER="publisher",e.NONE="none",e))(f||{})},174136:(e,r,n)=>{n.d(r,{QT:()=>o});var a=n(338584);n(548759);var i=(e=>(e.COLLAB="collab",e.DEV="dev",e.FULL="full",e.VIEW="view",e))(i||{});let o=a.nativeEnum(i)},756044:(e,r,n)=>{n.d(r,{Ae:()=>m,Gf:()=>l,PW:()=>u,gK:()=>p,w3:()=>h,zk:()=>d});var a=n(903570),i=n(805014),o=n(245459),s=n(955389);let l={isInitialized:!1,hasMissingFonts:!1,activeUserAction:i.QOV.DEFAULT,currentTool:i.NLJ.SELECT,currentStampToolName:null,activeCanvasEditModeType:i.m1T.DESIGN_LAYOUT,showUi:!0,showKeyboardShortcuts:!1,topLevelMode:i.lyf.LAYOUT,urlNodeId:"-1:-1",hideMultiplayerCursors:!1,showArtboardOutline:!1,useRealmsForPluginDev:!1,showComments:!0,currentSelectedGradientStop:{type:i.vRS.NONE,index:-1},currentSelectedProperty:{type:i.rrT.NONE,indices:[]},isUserPresent:!1,showTogglePrototypeModeButton:!1,forcePublishFlattened:!1,prototypeCanvasUiVisible:!1,showTooltips:!1,prototypeBackgroundPickerOpen:!1,pastableStyleCount:0,statePropertyToFocus:"",hoveredNode:"",multiplayerSessionState:i.kul.UNJOINED,isReadOnly:!0,isSceneReadOnly:!0,hyperlinkLocation:null,onCanvasNameEditorInfo:{mode:i.nzw.NONE,x:0,y:0,angle:0,padding:{x:0,y:0},margin:{x:0,y:0},cornerRadius:0,fontSize:11,measurementId:"",initMeasurementText:"",isCentered:!1,invertTextPosition:!1},votingSessionInfo:{sessionId:"",votingStage:i.W8Y.NO_SESSION,userVoteLimit:0,votedNodes:[],userIdToVoteStampIds:{}},loadingEmbeds:[],temporarilyExpandedInstanceLayers:[],keyboardShortcuts:{},selectedInteractions:[],hoveredInteractions:[],currentPage:"0:1",pagesList:[],devHandoffCodeLanguage:{type:"first-party",id:"WEB"},devHandoffPreferences:{codeExtensionPreferences:{}},branchingSceneState:i.aTl.ATTACHED_FILE_TIP,lastBranchingStagingAction:i.YIO.NONE,themePreference:null,sceneGeneration:0,spellCheckSuggestions:{figma:{suggestions:[],rangeText:"",rangeStart:0,rangeEnd:0,noSuggestionsFound:!1}},onCanvasPillInfo:null,activeTextReviewPlugin:null,hotReloadPluginDev:!0,useLocalRelatedLinkPlugin:!1};var c=(e=>(e[e.MIXED_OR_NO_SYMBOLS=0]="MIXED_OR_NO_SYMBOLS",e[e.SYMBOLS_ONLY=1]="SYMBOLS_ONLY",e))(c||{}),d=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_WITHOUT_TRACKING_AS_EDIT=2]="YES_WITHOUT_TRACKING_AS_EDIT",e[e.YES_FORCE_TRACKING_AS_EDIT=3]="YES_FORCE_TRACKING_AS_EDIT",e[e.NO_BUT_TRACK_AS_EDIT=4]="NO_BUT_TRACK_AS_EDIT",e))(d||{}),u=(e=>(e[e.NOT_ASSET=0]="NOT_ASSET",e[e.ASSET_ICON=1]="ASSET_ICON",e[e.ASSET_IMAGE=2]="ASSET_IMAGE",e[e.ASSET_GIF=4]="ASSET_GIF",e[e.ASSET_VIDEO=8]="ASSET_VIDEO",e[e.ASSET_COMPONENT=16]="ASSET_COMPONENT",e))(u||{});function m(e){return e.map(e=>i.j0r[e])}function p(e){return e?e.map(e=>i.j0r[e]):[i.j0r.ALL_SCOPES]}function h(e){let r={entries:[]};return Object.keys(e).forEach(n=>{let l=e[n];if(l){if(l.isMixed)return;{let e=function(e){function r(e){if(e.type!==i.Z_n.ALIAS)return null;let r=a.sD.fromString(e.value);return r?a.sD.toKiwi(r):null}switch(e.type){case i.Z_n.BOOLEAN:return{dataType:"BOOLEAN",resolvedDataType:"BOOLEAN",value:{boolValue:e.value}};case i.Z_n.FLOAT:return{dataType:"FLOAT",resolvedDataType:"FLOAT",value:{floatValue:e.value}};case i.Z_n.COLOR:return{dataType:"COLOR",resolvedDataType:"COLOR",value:{colorValue:e.value}};case i.Z_n.STRING:return{dataType:"STRING",resolvedDataType:"STRING",value:{textValue:e.value}};case i.Z_n.ALIAS:{let n=r(e);if(!n)return null;return{dataType:"ALIAS",resolvedDataType:(0,s.Lv)(e.resolvedType),value:{alias:n}}}case i.Z_n.NODE_FIELD_ALIAS:{let r=[];for(let n of e.value.stablePathToNode){let e=(0,o.sH)(n);if(!e)return null;r.push(e)}let n=e.value.nodeField,a=e.value.indexOrKey;if(!r||!n||!a)return null;if("COMPONENT_PROP_ASSIGNMENTS"===n)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:(0,s.Lv)(e.resolvedType),value:{nodeFieldAliasValue:{stablePathToNode:{guids:r},nodeField:n,indexOrKey:a}}};return null}case i.Z_n.FONT_STYLE:{let n=e.value.asFloat&&r(e.value.asFloat)?{resolvedDataType:"FLOAT",fontStyleKey:"asFloat",variableId:r(e.value.asFloat)}:e.value.asString&&r(e.value.asString)?{resolvedDataType:"STRING",fontStyleKey:"asString",variableId:r(e.value.asString)}:null;if(!n)return null;return{dataType:"FONT_STYLE",resolvedDataType:"FONT_STYLE",value:{fontStyleValue:{[n.fontStyleKey]:{dataType:"ALIAS",resolvedDataType:n.resolvedDataType,value:{alias:n.variableId}}}}}}case i.Z_n.MAP:case i.Z_n.EXPRESSION:case i.Z_n.SYMBOL_ID:case i.Z_n.TEXT_DATA:case i.Z_n.MANAGED_STRING_ALIAS:case i.Z_n.CMS_ALIAS:case i.Z_n.IMAGE:case i.Z_n.LINK:case i.Z_n.JS_RUNTIME_ALIAS:case i.Z_n.SLOT_CONTENT_ID:return null}}(l);e&&r.entries?.push({variableData:e,variableField:n})}}else r.entries.push({variableField:n})}),r}},943431:(e,r,n)=>{n.d(r,{O:()=>s});var a=n(846288),i=n(76265),o=n(449461);function s(e,r){switch(e){case o.J7.ACTIVITY:return(0,i.t)("org_admin_tab.activity");case o.J7.DASHBOARD:return(0,i.t)("org_admin_tab.dashboard");case o.J7.WORKSPACES:return(0,i.t)("org_admin_tab.workspaces");case o.J7.TEAMS:return(0,i.t)("org_admin_tab.teams");case o.J7.MEMBERS:return(0,i.t)("org_admin_tab.members");case o.J7.BILLING:switch(r){case o.G_.OVERVIEW:return(0,i.t)("org_admin_tab.overview");case o.G_.BILLING_GROUPS:return(0,i.t)("org_admin_tab.billing_groups");case o.G_.INVOICES:return(0,i.t)("org_admin_tab.invoices");default:return(0,i.t)("org_admin_tab.billing")}case o.J7.RESOURCES:switch(r){case o._d.LIBRARIES:return(0,i.t)("resources_tab.libraries");case o._d.SHARED_FONTS:return(0,i.t)("resources_tab.fonts");case o._d.APPROVED_PLUGINS:return(0,i.t)("resources_tab.approved_plugins");case o._d.APPROVED_WIDGETS:return(0,i.t)("resources_tab.approved_widgets");default:return(0,i.t)("org_admin_tab.resources")}case o.J7.SETTINGS:return(0,i.t)("org_admin_tab.settings");case o.J7.CONTENT:switch(r){case o.SN.WORKSPACES:return(0,i.t)("org_admin_tab.workspaces");case o.SN.TEAMS:return(0,i.t)("org_admin_tab.teams");case o.SN.ABANDONED_DRAFTS:return(0,i.t)("org_admin_tab.abandoned_drafts");case o.SN.CONNECTED_PROJECTS:return(0,i.t)("org_admin_tab.connected_projects");default:return(0,i.t)("org_admin_tab.content")}default:(0,a.xb)(e)}}},449461:(e,r,n)=>{n.d(r,{G_:()=>s,J7:()=>a,SN:()=>i,_d:()=>o});var a=(e=>(e.DASHBOARD="",e.WORKSPACES="workspaces",e.TEAMS="teams",e.MEMBERS="members",e.CONTENT="content",e.ACTIVITY="activity",e.BILLING="billing",e.RESOURCES="resources",e.SETTINGS="settings",e))(a||{}),i=(e=>(e.WORKSPACES="workspaces",e.TEAMS="teams",e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e))(i||{}),o=(e=>(e.LIBRARIES="",e.SHARED_FONTS="fonts",e.APPROVED_PLUGINS="plugins",e.APPROVED_WIDGETS="widgets",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e.BILLING_GROUPS="billing-groups",e))(s||{})},490267:(e,r,n)=>{n.d(r,{B9:()=>T,Eg:()=>f,GX:()=>p,J0:()=>m,LU:()=>l,Od:()=>s,Oo:()=>u,SL:()=>g,U9:()=>y,ZL:()=>v,cC:()=>h,dy:()=>o,e5:()=>d,jN:()=>w,oU:()=>c,qY:()=>S,rk:()=>A});var a=n(190253),i=n(314540),o=(e=>(e.ASC="asc",e.DESC="desc",e))(o||{}),s=(e=>(e.NAME="name",e.LAST_ACTIVE="last_active",e.LAST_DESIGN_ACTIVE="last_design_active",e.LAST_WHITEBOARD_ACTIVE="last_whiteboard_active",e.LAST_EDIT="last_edit",e.LAST_DESIGN_EDIT="last_design_edit",e.LAST_WHITEBOARD_EDIT="last_whiteboard_edit",e.DESIGN_ROLE="design_role",e.DESIGN_UPGRADE_DATE="design_upgrade_date",e.WHITEBOARD_ROLE="whiteboard_role",e.WHITEBOARD_UPGRADE_DATE="whiteboard_upgrade_date",e.LICENSE_GROUP="license_group",e.WORKSPACE="workspace",e.SCIM_DATA="scim_data",e.DESIGN_UPGRADE_REASON="design_upgrade_reason",e.WHITEBOARD_UPGRADE_REASON="whiteboard_upgrade_reason",e.BILLABLE_PRODUCT_SEAT="seat",e.SEARCH_SCORE="score",e.DEV_MODE_ROLE="dev_mode_role",e.DEV_MODE_UPGRADE_DATE="dev_mode_upgrade_date",e.UPGRADE_REASON="upgrade_reason",e.UPGRADE_DATE="upgrade_date",e))(s||{});let l=["last_active","last_design_active","last_whiteboard_active","last_edit","last_design_edit","last_whiteboard_edit","design_upgrade_date","whiteboard_upgrade_date","dev_mode_upgrade_date","upgrade_date"],c={columnName:"name",isReversed:!1};var d=(e=>(e.productFilter="productFilter",e.licenseGroupFilter="licenseGroupFilter",e.workspaceFilter="workspaceFilter",e.idpGroupFilter="idpGroupFilter",e.permissionFilter="permissionFilter",e.roleFilter="roleFilter",e.lastEditFilter="lastEditFilter",e.newEditorFilter="newEditorFilter",e.seatTypeFilter="seatTypeFilter",e.seatChangesFilter="seatChangesFilter",e))(d||{}),u=(e=>(e.product="product",e.workspace="workspace",e.billingGroup="billingGroup",e.idpGroup="idpGroup",e.accountType="accountType",e.role="role",e.lastEdit="lastEdit",e.newEditor="newEditor",e.seatType="seatType",e.seatChanges="seatChanges",e))(u||{});let m={productFilter:null,licenseGroupFilter:null,workspaceFilter:null,idpGroupFilter:null,permissionFilter:null,roleFilter:null,lastEditFilter:null,newEditorFilter:!1,seatTypeFilter:null,seatChangesFilter:null},p={product:"productFilter",role:"roleFilter",billingGroup:"licenseGroupFilter",workspace:"workspaceFilter",idpGroup:"idpGroupFilter",accountType:"permissionFilter",lastEdit:"lastEditFilter",newEditor:"newEditorFilter",seatType:"seatTypeFilter",seatChanges:"seatChangesFilter"},h={productFilter:"product",licenseGroupFilter:"billingGroup",workspaceFilter:"workspace",idpGroupFilter:"idpGroup",permissionFilter:"accountType",roleFilter:"role",lastEditFilter:"lastEdit",newEditorFilter:"newEditor",seatTypeFilter:"seatType",seatChangesFilter:"seatChanges"},_={FIGMA:"figma",FIGJAM:"figjam",DEV_MODE:"dev_mode"},g={[_.FIGMA]:a.Te.DESIGN,[_.FIGJAM]:a.Te.WHITEBOARD,[_.DEV_MODE]:a.Te.DEV_MODE},f={[a.Te.DESIGN]:_.FIGMA,[a.Te.WHITEBOARD]:_.FIGJAM,[a.Te.DEV_MODE]:_.DEV_MODE},E={IDP:"provisional",UNVERIFIED:"unverified"},y={[i._D.ADMIN]:i._D.ADMIN,[i._D.GUEST]:i._D.GUEST,[i._D.MEMBER]:i._D.MEMBER,[E.IDP]:E.IDP,[E.UNVERIFIED]:E.UNVERIFIED};var b=(e=>(e.VIEWER="starter",e.FULL="full",e.VIEWER_RESTRICTED="restricted",e.DEV_MODE_ONLY="dev_mode_only",e))(b||{});let v=["starter","full","restricted"],T=["full","dev_mode_only","restricted"],I={EDITOR:"editor",VIEWER:"viewer",VIEWER_RESTRICTED:"viewer-restricted",DEV_MODE_ONLY:"dev-mode-only"},S={[I.EDITOR]:"full",[I.VIEWER]:"starter",[I.VIEWER_RESTRICTED]:"restricted",[I.DEV_MODE_ONLY]:"dev_mode_only"},w={full:I.EDITOR,starter:I.VIEWER,restricted:I.VIEWER_RESTRICTED,dev_mode_only:I.DEV_MODE_ONLY},A={"3mo":"3mo","6mo":"6mo","1yr":"1yr"}},559460:(e,r,n)=>{n.d(r,{Kq:()=>o,hJ:()=>i,ig:()=>s});var a=n(338584);n(314540);let i=n(324225).kE.extend({orphaned:a.boolean().optional(),member_count:a.number().optional()});var o=(e=>(e.NAME="name",e.OWNER="owner_name",e.PROJECTS="projects",e.MEMBERS="member_count",e.WORKSPACE="workspace_name",e.ORG_ACCESS="org_access",e))(o||{}),s=(e=>(e.JOINED="JOINED",e.NOT_JOINED="NOT_JOINED",e))(s||{})},496203:(e,r,n)=>{n.d(r,{Ru:()=>v,WU:()=>T,Wd:()=>b,jh:()=>y,x0:()=>S});var a=n(846288),i=n(338584),o=n(548759),s=n(190253),l=n(314540),c=n(498305),d=n(174136),u=n(749088),m=n(523356),p=n(758268),h=n(829390),_=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.SCIM_GROUP="scim_group",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(_||{});let g=i.nativeEnum(_),f=i.object({id:i.string(),license_group_id:i.string().nullable(),org_user_id:i.string(),assigned_at:i.string(),created_at:i.string(),actor_user_id:i.string().nullable(),update_reason:g,updated_at:i.string(),idp_group:u.m.nullable().optional(),idp_group_uuid:i.string().nullish()}),E=i.object({id:i.string(),license_group_id:i.string().nullable(),org_user_id:i.string(),created_at:i.string(),updated_at:i.string()});l.El.FULL,l.El.STARTER,l.El.RESTRICTED;var y=(e=>(e[e.GUEST=0]="GUEST",e[e.MEMBER=2]="MEMBER",e[e.ADMIN=3]="ADMIN",e))(y||{}),b=(e=>(e.ORG_USER="org_user",e.IDP_USER="idp_user",e.ORG_INVITE="org_invite",e))(b||{});let v=i.object({design_paid_status:l.cA,whiteboard_paid_status:l.cA,dev_mode_paid_status:l.cA,id:i.string(),org_id:i.string(),user_id:i.string(),user:p.aw,permission:l.B0,description:i.string().nullish(),drafts_folder_id:i.string(),created_at:i.string(),updated_at:i.string(),disabled_at:i.string().nullish(),account_type:i.string().optional(),account_type_changed_at:i.string().optional(),last_edit:i.string().nullish(),last_seen:i.string().nullish(),last_design_edit:i.union([i.string(),c.t]).nullish(),last_whiteboard_edit:i.union([i.string(),c.t]).nullish(),last_design_seen:i.union([i.string(),c.t]).nullish(),last_whiteboard_seen:i.union([i.string(),c.t]).nullish(),last_dev_mode_seen:i.union([i.string(),c.t]).nullish(),scim_account_type:i.string().nullish(),scim_whiteboard_paid_status:i.string().nullish(),scim_dev_mode_paid_status:i.string().nullish(),scim_is_admin:i.boolean().nullish(),scim_seat_type:d.QT.nullish(),user_state_changed_at:i.string().optional(),design_upgrade_reason:m.P.nullish(),whiteboard_upgrade_reason:m.P.nullish(),dev_mode_upgrade_reason:m.P.nullish(),scim_metadata:i.record(i.string().nullish()).nullish(),agreed_to_community_tos_at:i.string().nullish(),license_group_member:f.nullish(),license_group_admins:i.array(E).optional(),license_admin:i.boolean().optional(),is_email_validated:i.boolean().optional().nullable(),show_figjam_user_onboarding:i.boolean().nullable(),has_shown_figjam_admin_onboarding:i.boolean().nullable(),has_shown_figjam_admin_launch_onboarding:i.boolean().nullable(),ecc_upgrading_locked:i.boolean().nullish(),type:i.literal("org_user").default("org_user"),workspace_users:i.array(h.C).optional(),is_dev_mode_beta_user:i.boolean().optional(),active_seat_type:o.cD.nullish(),active_seat_upgrade_date:i.string().optional(),active_seat_upgrade_method:m.P.nullish()}),T=v;function I(e,r){switch(r){case s.G_.DESIGN:return e.design_paid_status;case s.G_.FIGJAM:return e.whiteboard_paid_status;case s.G_.DEV_MODE:return e.dev_mode_paid_status;default:(0,a.xb)(r)}}function S(e,r){switch(r){case s.G_.DESIGN:case s.G_.FIGJAM:return I(e,r);case s.G_.DEV_MODE:return I(e,s.G_.DESIGN)===l.El.FULL?l.El.FULL:I(e,r);default:(0,a.xb)(r)}}s.G_.FIGJAM,s.G_.DESIGN,s.G_.DEV_MODE},231880:(e,r,n)=>{n.d(r,{CT:()=>T,Gv:()=>g,X1:()=>b,ZG:()=>p});var a=n(338584),i=n(314540),o=n(810475),s=n(113464),l=n(645833),c=n(222415),d=n(873439),u=(e=>(e.ANY="any",e.GOOGLE="google",e.SAML="saml",e))(u||{});let m=a.union([a.literal("AUTO"),a.literal("GOOD"),a.literal("DELINQUENT"),a.literal("SUSPENDED"),a.literal("DEACTIVATED")]),p={AUTO:"AUTO",GOOD:"GOOD",DELINQUENT:"DELINQUENT",SUSPENDED:"SUSPENDED",DEACTIVATED:"DEACTIVATED"};var h=(e=>(e.MANUAL="manual",e.DISABLED="disabled",e.QUARTERLY="quarterly",e.CHARGE_IMMEDIATELY="quarterly_auto_charge",e))(h||{});let _=a.nativeEnum(h);var g=(e=>(e.REQUIRE_APPROVAL="require_approval",e.BANNED="banned",e))(g||{});let f=a.nativeEnum(g);var E=(e=>(e.US="US",e.EU="EU",e))(E||{});let y=a.nativeEnum(E);a.object({name:a.string(),img_url:a.string().optional(),id:a.string()});var b=(e=>(e.Initial="Initial",e.ChoosePlan="ChoosePlan",e.AddCollaborators="AddCollaborators",e.PseudoCreateTeam="PseudoCreateTeam",e.CreateTeam="CreateTeam",e.TeamSelect="TeamSelect",e.SeatSelect="SeatSelect",e.Details="Details",e.Payment="Payment",e.Review="Review",e.Confirmation="Confirmation",e))(b||{}),v=(e=>(e.DEPROVISION="deprovision",e))(v||{}),T=(e=>(e.GUESTS="guests",e.MEMBERS="members",e.ALL_USERS="all_users",e))(T||{});l.bV.extend({id:a.string(),name:a.string(),legal_name:a.string().optional(),domain_capture:a.boolean(),created_at:a.string().optional(),updated_at:a.string().optional(),deleted_at:a.string().optional(),img_url:a.string().optional(),handle:a.string().optional(),figjam_disabled_at:a.date().nullable(),realtime_token:a.string().optional(),standing:m,stripe_customer_id:a.string().optional(),invite_whitelist_guest_invite_setting:f.nullable(),invite_whitelist_member_allowlist_enabled:a.boolean().nullable(),ip_ranges:a.array(a.string()),past_due_at:a.string().nullable(),plugins_whitelist_enforced:a.boolean(),widgets_whitelist_enforced:a.boolean(),plugin_requests_allowed:a.boolean(),widget_requests_allowed:a.boolean(),public_plugins_allowed:a.boolean(),voice_enabled:a.boolean().optional(),billing:_.nullable(),google_sso_only:a.boolean(),saml_sso_only:a.boolean(),locked_quantity_full_members:a.number().nullable(),locked_quantity_figjam_members:a.number().nullable(),featured_scim_metadata:i.tw.nullable(),community_profile_id:a.string().optional(),community_profile_handle:a.string().optional(),template_picker_disabled:a.boolean().optional(),experiment_eligible:a.boolean().optional(),bigma_enabled:a.boolean().optional(),bigma_enabled_at:a.number().optional(),file_export_setting:a.string().nullable().optional(),mfa_required:a.string().optional(),discovery_enabled:a.boolean().optional(),workshop_enabled:a.boolean().optional(),cursor_chat_disabled:a.boolean().optional(),design_default_paid_status:i.cA.optional(),whiteboard_default_paid_status:i.cA.optional(),k12_google_org:a.boolean(),shared_org_license_group_settings:d.Vh.nullable(),vat_gst_id:a.string().optional().nullable(),tax_id_verification_status:i.xy.optional(),are_custom_templates_allowed:a.boolean(),should_auto_renew:a.boolean(),has_automatic_upcoming_invoice:a.boolean(),target_locality:y.optional(),org_domains:c.N.optional().nullable(),workspaces_count:a.number().optional(),cmty_publish_as_user_enabled:a.boolean().optional(),license_groups_count:a.number().optional(),workspaces_nux_active_at:a.string().optional(),ai_features_disabled:a.boolean().optional(),ai_features_disabled_at:a.string().optional(),ai_data_sharing_enabled:a.boolean().optional(),is_dev_mode_opt_in_accepted:a.boolean().optional(),has_invalid_upgrades:a.boolean().optional(),figma_provided_libraries_disabled:a.boolean().optional(),billing_api:o.z,stripe_memo:a.string().optional(),self_serve:a.boolean().optional(),invoice_currency:a.nativeEnum(s.S).optional(),is_slides_disabled:a.boolean().optional(),activity_logs_max_query_duration_in_days:a.number().optional(),tier:a.nativeEnum(i.Ag),billing_tier:a.nativeEnum(i.Ag),security_add_on_enabled_at:a.number().optional().nullable()})},45049:(e,r,n)=>{n.d(r,{$V:()=>m,CO:()=>c,EB:()=>u,NW:()=>o,R$:()=>l,TN:()=>i,UW:()=>d,tY:()=>a,tn:()=>s});var a=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ANNUAL=1]="ANNUAL",e[e.MONTHLY=2]="MONTHLY",e[e.STUDENT=3]="STUDENT",e))(a||{}),i=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PLAN_COMPARISON_MODAL=1]="PLAN_COMPARISON_MODAL",e[e.NUX=2]="NUX",e[e.CONSUMPTION_MODAL=3]="CONSUMPTION_MODAL",e[e.PRICING_PAGE=4]="PRICING_PAGE",e))(i||{}),o=(e=>(e.MONTH="month",e.YEAR="year",e))(o||{});let s={UPGRADE_NEW_TEAM:"upgrade_new_team",PLAN_COMPARISON:"plan_comparison",CREATE_TEAM:"create_team",ADD_COLLABORATORS:"add_collaborators",CHOOSE_PLAN:"choose_plan",PAYMENT_AND_ADDRESS:"payment_and_address",CONFIRM_PAY:"confirm_pay"};var l=(e=>(e.MONTHLY="monthly",e.ANNUAL="annual",e))(l||{});let c="US",d="JP",u=e=>({line1:"",line2:"",country:e||c,city:"",region:"",postal_code:""});function m(e){return""===e.line1&&""===e.line2&&""===e.city&&""===e.region&&""===e.postal_code}var p=(e=>(e.PRODUCT_PRO_DESIGN_ANNUAL="prod_BTrZbmnROhwnmX",e.PRODUCT_PRO_DESIGN_MONTHLY="prod_BUXN0CamqLCsuF",e.PRODUCT_PRO_FIGJAM_ANNUAL="figjam_annual_usd_36",e.PRODUCT_PRO_FIGJAM_MONTHLY="figjam_monthly_usd_5",e))(p||{})},7395:(e,r,n)=>{n.d(r,{Ag:()=>b,Au:()=>ed,Av:()=>ec,C:()=>en,Dk:()=>L,FW:()=>Y,Gb:()=>eh,HK:()=>E,Kd:()=>T,LR:()=>J,Lu:()=>ep,Lz:()=>ea,MP:()=>k,Pe:()=>ee,Ps:()=>eE,Px:()=>z,R2:()=>er,UX:()=>I,Wt:()=>P,XS:()=>N,Ye:()=>$,ZQ:()=>Z,ZV:()=>F,am:()=>em,bH:()=>X,f5:()=>eo,ho:()=>y,k0:()=>Q,n_:()=>e_,ow:()=>et,pL:()=>j,pR:()=>w,sM:()=>ei,u8:()=>f,xg:()=>eu});var a,i=n(338584),o=n(89670),s=n(136716),l=n(314540),c=n(754430),d=n(694630),u=n(59555),m=n(376813),p=n(781413),h=n(895812),_=n(404469),g=n(945315),f=(e=>(e[e.PUBLIC_PLUGINS_DISALLOWED=0]="PUBLIC_PLUGINS_DISALLOWED",e[e.PLUGIN_NOT_ORG_APPROVED=1]="PLUGIN_NOT_ORG_APPROVED",e[e.PLUGIN_INSTALLED_FOR_ORG=2]="PLUGIN_INSTALLED_FOR_ORG",e[e.PLUGIN_INSTALLED_FOR_USER=3]="PLUGIN_INSTALLED_FOR_USER",e[e.PLUGIN_INSTALLABLE=4]="PLUGIN_INSTALLABLE",e))(f||{}),E=(e=>(e.FIGMA="design",e.FIGJAM="whiteboard",e.UNIVERSAL="design_and_whiteboard",e.INSPECT="inspect",e.FIGMA_AND_INSPECT="design_and_inspect",e))(E||{}),y=(e=>(e.LOAD="LOAD",e.PARSE="PARSE",e.VALIDATE="VALIDATE",e))(y||{}),b=(e=>(e.Plugin="plugin",e.Widget="widget",e))(b||{});let v=i.object({type:i.nativeEnum(y),text:i.string()}),T=["camera","microphone","displaycapture"],I=["openexternal","analytics","cortex","debug","firstdraft","filekey","hidecursors",...T],S=i.object({command:i.string(),name:i.string(),multipleSelection:i.boolean().optional()}),w=["currentuser","activeusers","teamlibrary","fileusers","payments","clipboardwrite"],A=i.object({name:i.string(),key:i.string(),description:i.string().optional(),optional:i.boolean().optional(),allowFreeform:i.boolean().optional()}),C=i.array(A),N=[...w,...I];[...N];let L=["textreview","panel","inspect","codegen","linkpreview","vscode"],O=i.object({label:i.string(),value:i.string(),isDefault:i.boolean().optional()}),R=i.object({itemType:i.literal("action"),propertyName:i.string(),includedLanguages:i.array(i.string()).optional(),label:i.string().optional()});function P(e){return R.safeParse(e).success}let D=i.object({itemType:i.literal("unit"),scaledUnit:i.string(),defaultScaleFactor:i.number().optional(),default:i.boolean().optional(),includedLanguages:i.array(i.string()).optional()});function k(e){return D.safeParse(e).success}let M=i.object({itemType:i.literal("select"),propertyName:i.string(),label:i.string().optional(),options:i.array(O),includedLanguages:i.array(i.string()).optional()});function F(e){return M.safeParse(e).success}let x=i.union([R,D,M]),U=i.array(x),B=i.object({label:i.string(),value:i.string()}),V=i.object({command:i.string(),name:i.string(),parameters:C.optional(),parameterOnly:i.boolean().optional()}),G=i.object({separator:i.literal(!0)}),H=i.object({name:i.string()}).extend({menu:i.lazy(()=>i.array(i.union([V,G,H])))}),W=i.object({allowedDomains:i.array(i.string()),reasoning:i.string().optional(),devAllowedDomains:i.array(i.string()).optional()}),K=i.union([H,V,G]);var Y=(e=>(e.FIGMA="figma",e.FIGJAM="figjam",e.INSPECT="inspect",e.DEV="dev",e.SITES="sites",e.SLIDES="slides",e))(Y||{});let $=Object.values(Y),j=i.object({id:i.string().optional(),name:i.string(),api:i.string(),main:i.string(),ui:i.union([i.string(),i.record(i.string(),i.string())]).optional(),build:i.string().optional(),enableProposedApi:i.boolean().optional(),enablePrivatePluginApi:i.boolean().optional(),menu:K.array().optional(),networkAccess:W.optional(),relaunchButtons:S.array().optional(),relatedLinkDomains:i.array(i.string()).optional(),devResourceDomains:i.array(i.string()).optional(),parameters:C.optional(),parameterOnly:i.boolean().optional(),editorType:i.filteredArray(i.nativeEnum(Y)).optional(),containsWidget:i.boolean().optional(),widgetApi:i.string().optional(),permissions:i.filteredArray(i.union([i.enum(w),i.enum(I)])).optional(),enableReadOnly:i.boolean().optional(),capabilities:i.filteredArray(i.enum(L)).optional(),codegenLanguages:i.array(B).optional(),codegenPreferences:U.optional(),documentAccess:i.enum(["dynamic-page"]).optional()});(e=>{e.PluginVersionSchema=i.object({id:i.string(),name:i.string().nullable(),version:i.string().nullable(),releaseNotes:i.string().nullable(),description:i.string().nullable(),tagline:i.string().nullable(),creatorPolicy:i.string().nullable(),manifest:i.string().nullable(),createdAt:i.date(),iconPath:i.string().nullable(),coverImagePath:i.string().nullable(),codePath:i.string().nullable(),plugin:i.object({currentPluginVersionId:i.string().nullable()})}),e.PluginInstallSchema=i.object({id:i.string(),pluginId:i.string(),pinnedStatus:i.nativeEnum(l.hM),createdAt:i.date(),plugin:i.object({id:i.string(),currentPluginVersionId:i.string().nullable(),publishingStatus:i.nativeEnum(l.KB).nullable(),isWidget:i.boolean().nullable(),viewableInEditor:i.boolean(),orgId:i.string().nullable(),approvedAt:i.date().nullable(),approvalStatus:i.number().nullable(),communityPublishers:i.lazy(()=>e.CommunityPublisherSchema).array().nullable(),currentPluginVersion:e.PluginVersionSchema.nullable()}).nullable()}),e.OrgSchema=i.object({id:i.string(),installedPlugins:i.array(e.PluginInstallSchema)}),e.CommunityTeamSchema=i.object({id:i.string(),name:i.string()}),e.OrgInfoSchema=i.object({id:i.string(),name:i.string()}),e.CommunityProfileSchema=i.object({id:i.string(),profileHandle:i.string(),user:i.object({id:i.string(),name:i.string().nullable()}).nullable(),team:e.CommunityTeamSchema.nullable(),org:e.OrgInfoSchema.nullable()}),e.CommunityPublisherSchema=i.object({role:i.nativeEnum(l.un),isPending:i.boolean(),profile:e.CommunityProfileSchema})})(a||(a={}));let z=i.object({id:i.string(),plugin_id:i.string(),name:i.string(),version:i.string(),current_plugin_version_id:i.string().optional(),release_notes:i.string(),description:i.string(),tagline:i.string().nullable(),creator_policy:i.string().nullable(),is_private:i.boolean(),manifest:j,created_at:i.string(),org_id:i.string().optional(),redirect_icon_url:i.string(),redirect_cover_image_url:i.string(),redirect_code_url:i.string(),redirect_snapshot_url:i.string().nullish(),community_publishers:i.array(a.CommunityPublisherSchema).optional(),installed_by:i.union([i.literal("user"),i.literal("org")]).nullish(),playground_fig_file_key:i.string().nullish(),playground_fig_file:i.ignore().optional(),playground_file_version_id:i.string().nullish()}),q=i.object({plugin_id:i.string(),name:i.string(),manifest:j,localFileId:i.number(),localFilePath:i.string(),error:v.optional(),cachedContainsWidget:i.boolean().optional(),lastKnownPluginId:i.string().optional(),testCode:i.string().optional()});function Z(e){return void 0!==e.localFileId}function X(e){return!Z(e)&&!!e.is_private}function J(e){return!Z(e)&&!X(e)}function Q(e){return!!e.manifest?.containsWidget}function ee(e){return!!(e?.includes("dev")||e?.includes("inspect"))}function et(e,r,n){return!!(!n||!e||X(e)||Z(e))||!!n.public_plugins_allowed&&((Q(e)?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!r[e?.plugin_id])}let er=i.object({org:i.object({id:i.string(),name:i.string()}).optional(),is_public:i.boolean().optional()}),en=i.object({id:i.string(),versions:i.record(z),current_plugin_version_id:i.string().nullable(),is_widget:i.coerce.boolean()}),ea=en.merge(i.object({install_count:i.number(),view_count:i.number(),like_count:i.number(),comment_count:i.number(),category_id:i.string().nullable(),roles:er,org_id:i.string().nullable(),realtime_token:i.string(),created_at:i.string(),redirect_thumbnail_url:i.string().nullable(),thumbnail_url:i.string().nullable(),tags:i.array(i.string()).optional(),tags_v2:i.record(i.string()).optional(),current_user_has_run:i.boolean().optional(),current_user_first_ran_at:i.string().nullish(),unique_run_count:i.number(),editor_type:i.nativeEnum(E),unpublished_at:i.string().nullable(),support_contact:i.string().nullable(),comments_setting:i.nativeEnum(s.Ni).nullable(),related_content:(0,o.M)(i.lazy(()=>ea)),hide_related_content_by_others:i.coerce.boolean().optional(),publishing_status:i.nativeEnum(l.KB).nullable(),score:i.number().optional(),install_status:i.nativeEnum(f).optional(),profile_install_status:i.nativeEnum(f).optional(),commenting_is_restricted:i.boolean(),monetization_status:i.nativeEnum(_.UC).nullish(),community_resource_payment:h.fe.optional(),third_party_m10n_status:i.nativeEnum(_.PN).nullish(),creator_policy:i.string().optional(),plugin_publishers:c.I7.optional(),carousel_media_urls:i.optional(g.fE),carousel_videos:i.optional(g.Fy)})).and(c.xK).and(u.n).and(p.Y).and(m.q),ei=ea.and(i.object({is_widget:i.literal(!0)}));function eo(e){return e.third_party_m10n_status===_.PN.MIGRATING}let es=i.object({name:i.string(),data:i.unknown().optional(),icon:i.union([i.string(),i.instanceof(Uint8Array)]).optional(),iconUrl:i.string().optional()}),el=i.record(es);function ec(e){return"command"in e&&"name"in e}function ed(e){return"separator"in e&&e.separator}function eu(e){return"name"in e&&"menu"in e}function em({type:e,text:r}){switch(e){case"LOAD":return"Manifest load error: "+r;case"PARSE":return"Manifest not valid JSON: "+r;case"VALIDATE":return"Manifest error: "+r}}Symbol("relaunchMixedDescription");var ep=(e=>(e.ORG="ORG",e.PUBLIC="PUBLIC",e))(ep||{});function eh(e,r){return r?`GET_PLUGIN_ALLOW_LIST_${e}_${r}`:`GET_PLUGIN_ALLOW_LIST_${e}`}function e_(e,r){return r?`GET_WIDGET_ALLOW_LIST_${e}_${r}`:`GET_WIDGET_ALLOW_LIST_${e}`}let eg=i.enum(["default","textreview","inspect","codegen","linkpreview","auth"]),ef=i.union([i.enum(["contextmenu","filemenu","runlast","osmenu","relaunch","quick-actions","universal-insert","parameter-entry","paste_from_url","textreview","handoff-relaunch","handoff-panel","codegen","related-link-click","related-link-preview","related-link-auth","pinned","try-plugin-params","auto-run"]),d.MM]),eE=i.object({plugin:i.union([z,q]),command:i.string(),queryMode:i.boolean(),runMode:eg,triggeredFrom:ef,openFileKey:i.string(),ignoreForRunLastPlugin:i.boolean().optional(),deferRunEvent:i.boolean().optional(),parameterValues:el.optional(),isWidget:i.boolean(),widgetAction:i.string().nullable().optional(),forcePluginVersionId:i.string().nullable().optional()})},188609:(e,r,n)=>{n.d(r,{o:()=>a});let a={r:0,g:0,b:0,a:255}},428064:(e,r,n)=>{n.d(r,{G:()=>i});var a=n(161935),i=(e=>(e.RECENTLY_VIEWED="recently-viewed",e.SHARED_FILES="shared-with-you",e.SHARED_PROJECTS="shared-projects",e))(i||{});a.C0.NAME,a.C0.CREATED_AT,a.C0.ACCESSED_AT,a.C0.NAME,a.C0.CREATED_AT,a.C0.SHARED_AT,a.C0.NAME,a.C0.CREATED_AT,a.C0.SHARED_AT},945315:(e,r,n)=>{n.d(r,{Fy:()=>p,P1:()=>s,Sq:()=>_,dE:()=>h,fE:()=>d});var a=n(338584),i=n(871312),o=(e=>(e[e.CURATED_IMAGE=0]="CURATED_IMAGE",e[e.EMBED=1]="EMBED",e))(o||{});let s=a.record(a.string().refine(e=>Object.keys(i.B.COMMUNITY_HUB_FILE_THUMBNAIL).includes(e)),a.string().url()),l=a.object({url:a.string().url()}),c=l.extend({id:a.string(),sha1:a.string(),resized_thumbnail_urls:a.optional(s),created_at:a.coerce.date()}),d=a.record(a.string(),c);l.extend({sha1:a.string(),buffer:a.instanceof(Uint8Array)});let u=a.object({url:a.string().url(),thumbnail_url:a.string().url()}),m=u.extend({id:a.string(),sha1:a.string(),thumbnail_sha1:a.string(),video_file_uuid:a.string().uuid()}),p=a.record(a.string(),m);function h(e){return"buffer"in e}function _(e){return"id"in e}u.extend({sha1:a.string(),buffer:a.instanceof(Uint8Array),thumbnail_sha1:a.string(),thumbnail_buffer:a.instanceof(Uint8Array)})},135891:(e,r,n)=>{n.d(r,{N:()=>a});var a=(e=>(e[e.URGENT_ALERT=9999]="URGENT_ALERT",e[e.HIGH_PRIORITY_MODAL=20]="HIGH_PRIORITY_MODAL",e[e.OVERRIDING_MODAL=15]="OVERRIDING_MODAL",e[e.DEFAULT_MODAL=10]="DEFAULT_MODAL",e[e.SECONDARY_MODAL=5]="SECONDARY_MODAL",e[e.SURVEY=1]="SURVEY",e))(a||{})},2019:(e,r,n)=>{n.d(r,{$L:()=>u,Du:()=>M,Ej:()=>U,Hn:()=>F,KB:()=>h,L0:()=>P,Lk:()=>A,Lr:()=>y,MU:()=>W,Mm:()=>G,Mp:()=>V,OZ:()=>B,Or:()=>H,Rr:()=>p,Rx:()=>b,Rz:()=>K,WY:()=>o,W_:()=>R,Wr:()=>g,XW:()=>I,Xr:()=>_,Zr:()=>E,_M:()=>O,a7:()=>L,dC:()=>s,dt:()=>S,f9:()=>m,fS:()=>v,gw:()=>w,hf:()=>x,j9:()=>T,jD:()=>d,mp:()=>C,q6:()=>k,qm:()=>N,qy:()=>l,tC:()=>D,uH:()=>i,uR:()=>c});var a=n(76265),i=(e=>(e.FILES="files",e.PROJECTS="projects",e.TEAMS="teams",e.USERS="users",e.HUB_FILES="hub_files",e.PUBLIC_PLUGINS="public_plugins",e.PRIVATE_PLUGINS="private_plugins",e.PUBLIC_PROFILES="public_profiles",e.PUBLIC_WIDGETS="public_widgets",e.PRIVATE_WIDGETS="private_widgets",e))(i||{}),o=(e=>(e.RESOURCE="resource",e.CREATOR="creator",e.SPACE="space",e))(o||{}),s=(e=>(e.USERS="users",e.PROJECTS="projects",e.TEAMS="teams",e.ORGS="orgs",e))(s||{}),l=(e=>(e.FOLDER="folders",e.TEAM="teams",e.ORG="orgs",e))(l||{}),c=(e=>(e.DROPDOWN="dropdown",e.AUTOCOMPLETE="autocomplete",e))(c||{}),d=(e=>(e.PILL="pill",e.CLEAR_ALL="clear_all",e.ALL_TYPES="all_types",e.SELECTION="selection",e))(d||{}),u=(e=>(e.ALL_FILES="FILES",e.DESIGN_FILES="DESIGN_FILES",e.FIGJAM_FILES="FIGJAM_FILES",e.SLIDES="SLIDES",e.USERS="USERS",e.PROJECTS="PROJECTS",e.TEAMS="TEAMS",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e.SITES="SITES",e))(u||{}),m=(e=>(e.NAME="name",e.FUZZY_NAME="fuzzy-name",e.NAME_WORD_DELIMITER_V2="name-word-delimiter-v2",e.DEEP_SEARCH_TEXT="deep-search-text",e.PAGE_NAME="page-name",e.FRAME_NAME="frame-name",e.FRAGMENT_RETRIEVAL="fragment-retrieval",e))(m||{}),p=(e=>(e.ONE_TYPE="one_type",e.ALL_TYPES_BLOCKING="all_types_blocking",e.ALL_TYPES_STREAMING="all_types_streaming",e))(p||{});function h(e){switch(e){case"files":return(0,a.t)("search.preview_section.files_capitalized");case"projects":return(0,a.t)("search.preview_section.projects_capitalized");case"users":return(0,a.t)("search.preview_section.people_capitalized");case"teams":return(0,a.t)("search.preview_section.teams_capitalized");case"private_plugins":return(0,a.t)("search.preview_section.plugins_capitalized");case"hub_files":return(0,a.t)("search.preview_section.community_capitalized");default:return""}}function _(e){if(!e)return null;switch(e.value){case"FILES":case"DESIGN_FILES":case"FIGJAM_FILES":case"SLIDES":case"SITES":return"files";case"USERS":return"users";case"PROJECTS":return"projects";case"TEAMS":return"teams";case"PLUGINS":return"private_plugins";case"WIDGETS":return"private_widgets";default:return null}}function g(e){switch(e){case"files":return"FILES";case"users":return"USERS";case"projects":return"PROJECTS";case"teams":return"TEAMS";case"private_plugins":return"PLUGINS";case"private_widgets":return"WIDGETS";default:return null}}var f=(e=>(e.DESIGN="design",e.FIGJAM="whiteboard",e.SLIDES="slides",e.SITES="sites",e))(f||{});function E(e){if(e)switch(e.value){case"DESIGN_FILES":return"design";case"FIGJAM_FILES":return"whiteboard";case"SLIDES":return"slides";case"SITES":return"sites";default:return}}function y(e){if(!e)return null;let r={};for(let[n,a]of Object.entries(e))a&&("creatorIds"===n?r["creator_ids[]"]=a:"folderIds"===n&&a.length>0?r["folder_ids[]"]=a:"teamIds"===n&&a.length>0?r["team_ids[]"]=a:"orgIds"===n&&a.length>0?r["org_ids[]"]=a:r[n]=a);return r}var b=(e=>(e.ORG="internal",e.ORG_GUEST="internal_guest",e.PERSONAL="personal",e.COMMUNITY="community",e))(b||{});let v={internal:{modelTypes:["files","projects","users","teams","private_plugins","private_widgets"],correspondingModelTypes:{hub_files:"files",public_profiles:"users",public_plugins:"private_plugins",public_widgets:"private_widgets"},defaultModelType:"files"},internal_guest:{modelTypes:["files","projects","users","teams"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},personal:{modelTypes:["files","projects","users"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},community:{modelTypes:["hub_files","public_plugins","public_profiles","public_widgets"],correspondingModelTypes:{files:"hub_files",users:"public_profiles",private_plugins:"public_plugins",private_widgets:"public_widgets"},defaultModelType:"hub_files"}};var T=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e.RELEVANCY="relevancy",e.NAME="name",e.AUTHOR_NAME="author_name",e.INSTALL_COUNT="install_count",e.MEMBER_COUNT="member_count",e.UPDATED_AT="updated_at",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.EMAIL="email",e))(T||{}),I=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e.RUN_COUNT="run_count",e))(I||{}),S=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e))(S||{}),w=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e))(w||{}),A=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.OWNER="owner",e))(A||{}),C=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.CREATED_AT="created_at",e))(C||{}),N=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.FILES_LAST_TOUCHED_AT="files_last_touched_at",e.CREATED_AT="created_at",e.MEMBER_COUNT="member_count",e))(N||{}),L=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.EMAIL="email",e))(L||{}),O=(e=>(e.RELEVANCY="relevancy",e))(O||{}),R=(e=>(e.RELEVANCY="relevancy",e))(R||{}),P=(e=>(e.PREVIEW="preview",e.FULL_PAGE="full_page",e.OUTSIDE_FILE_BROWSER="outside_file_browser",e))(P||{}),D=(e=>(e.OPEN="open",e.CLOSE="close",e))(D||{});function k(e){switch(e){case"files":return(0,a.t)("search.search_model_type_header.files");case"projects":return(0,a.t)("search.search_model_type_header.projects");case"teams":return(0,a.t)("search.search_model_type_header.teams");case"users":return(0,a.t)("search.search_model_type_header.people");case"hub_files":return(0,a.t)("search.search_model_type_header.hub_files");case"public_plugins":return(0,a.t)("search.search_model_type_header.public_plugins");case"private_plugins":return(0,a.t)("search.search_model_type_header.private_plugins");case"public_profiles":return(0,a.t)("search.search_model_type_header.creators");case"public_widgets":return(0,a.t)("search.search_model_type_header.public_widgets");case"private_widgets":return(0,a.t)("search.search_model_type_header.private_widgets")}}function M(e){switch(e){case"teams":return(0,a.t)("file_browser.team");case"hub_files":return(0,a.t)("activity_log.resource.file");case"public_plugins":case"private_plugins":return(0,a.t)("community.plugins.plugin");case"public_profiles":return(0,a.t)("search.preview_section.creator");case"public_widgets":case"private_widgets":return(0,a.t)("community.plugins.widget");case"users":case"files":case"projects":return(0,a.t)("permissions.level_name.none")}}function F(e){if(1===(e=Array.from(new Set(e))).length)return e[0];{let r=e.pop();return e.join(", ")+" and "+r}}function x(e){switch(e){case"files":return(0,a.t)("search.search_model_type.empty_state_files");case"projects":return(0,a.t)("search.search_model_type.empty_state_projects");case"teams":return(0,a.t)("search.search_model_type.empty_state_teams");case"users":return(0,a.t)("search.search_model_type.empty_state_people");case"hub_files":return(0,a.t)("search.search_model_type.empty_state_hub_files");case"public_plugins":return(0,a.t)("search.search_model_type.empty_state_public_plugins");case"private_plugins":return(0,a.t)("search.search_model_type.empty_state_private_plugins");case"public_profiles":return(0,a.t)("search.search_model_type.empty_state_creators");case"public_widgets":return(0,a.t)("search.search_model_type.empty_state_public_widgets");case"private_widgets":return(0,a.t)("search.search_model_type.empty_state_private_widgets");default:return""}}let U=["files","projects","users","teams"],B=["files","projects","users","hub_files"],V=["public_plugins","private_plugins","public_widgets","private_widgets","public_profiles"],G=["public_plugins","private_plugins","public_widgets","private_widgets","teams","public_profiles"],H=4,W=10,K=30},839644:(e,r,n)=>{n.d(r,{A5:()=>i,Ft:()=>m,G4:()=>c,QB:()=>y,SC:()=>p,Sc:()=>h,U6:()=>d,bN:()=>u,bb:()=>o,ck:()=>f,gu:()=>E,h5:()=>_,jX:()=>g,kV:()=>s,ou:()=>l});var a=n(45049),i=(e=>(e[e.INVITE=0]="INVITE",e[e.PUBLISH_COMMUNITY=1]="PUBLISH_COMMUNITY",e[e.PUBLISH_TEMPLATE=2]="PUBLISH_TEMPLATE",e[e.POST_TO_FEED=3]="POST_TO_FEED",e[e.COLLABORATORS=4]="COLLABORATORS",e[e.EMBED_CODE=5]="EMBED_CODE",e[e.SHARE_SETTINGS=6]="SHARE_SETTINGS",e[e.FOLDER_MEMBERS=7]="FOLDER_MEMBERS",e[e.SHARE_GOOGLE_DEVICE_DISCLAIMER=8]="SHARE_GOOGLE_DEVICE_DISCLAIMER",e[e.SHARE_TO_GOOGLE_CLASSROOM=9]="SHARE_TO_GOOGLE_CLASSROOM",e[e.CONNECTED_PROJECT_USERS=10]="CONNECTED_PROJECT_USERS",e))(i||{}),o=(e=>(e.ACCOUNT="account",e.PLUGINS="plugins",e.COMMUNITY="community",e.NOTIFICATIONS="notifications",e))(o||{});function s(e){return"search"===e.view}let l={UNIVERSAL_PUBLISHING:"publish",ACCOUNT_SETTINGS:"settings"};var c=(e=>(e[e.DEFAULT=0]="DEFAULT",e.FULLSCREEN="fullscreen",e.FULLSCREEN_WITH_COMMENTS="fullscreen_comments",e))(c||{}),d=(e=>(e.ONBOARDING="onboarding",e))(d||{});function u(e){return"org"===e.view}var m=(e=>(e[e.PROJECT=0]="PROJECT",e[e.TEAM=1]="TEAM",e[e.WORKSPACE=2]="WORKSPACE",e[e.LICENSE_GROUP=3]="LICENSE_GROUP",e))(m||{}),p=(e=>(e.UPGRADE_EXISTING_TEAM="upgrade_existing_team",e.CREATE_AND_UPGRADE="create_and_upgrade",e.CREATE="create",e))(p||{}),h=(e=>(e[e.UNDETERMINED=0]="UNDETERMINED",e[e.STARTER=1]="STARTER",e[e.TEAM=2]="TEAM",e[e.ORG=3]="ORG",e))(h||{});function _(e){return"create"===e||"create_and_upgrade"===e}function g(e){return"upgrade_existing_team"===e}function f(e,r){return"create"===e&&(r===a.tn.CREATE_TEAM||r===a.tn.ADD_COLLABORATORS)||r===a.tn.PLAN_COMPARISON}let E=["deletedFiles","teamCreation","folder","addAnnualPlan","addCollaborators","team","teamUpgrade","orgAdminSettings","licenseGroup","workspace","billingGroupDashboard","search","user","promoReview","eduReview","teamFeed","resourceUnavailable","feed","sharedWithYou","teamAdminConsole","recentsAndSharing","draftsToMove","allProjects","limitedTeamSharedProjects","orgDomainManagement","abandonedDraftFiles","seatRequests","componentBrowser","componentBrowserLibrary"];function y(e){return E.includes(e.view)}},873439:(e,r,n)=>{n.d(r,{$q:()=>i,Sm:()=>s,Vh:()=>u,w_:()=>c});var a=n(338584),i=(e=>(e.TEAM_CREATION_CONTROLS_ANYONE="team_creation_controls_anyone",e.TEAM_CREATION_CONTROLS_ADMIN_ONLY="team_creation_controls_admin_only",e))(i||{});let o=a.nativeEnum(i);var s=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e.DISABLED="disabled",e))(s||{});let l=a.nativeEnum(s);var c=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(c||{});let d=a.nativeEnum(c),u=a.object({team_creation_controls:o.optional().nullable(),external_collaboration_controls:a.boolean(),ip_account_restriction:a.boolean().optional(),ip_allowlist:a.boolean().optional(),idle_timeout_duration_in_secs:a.number().optional().nullable(),autogen_password_controls:a.boolean(),public_link_controls_setting:d.optional().nullable(),public_link_controls_max_expiration:a.number().optional().nullable(),configured_upgrade_request_setting:l.optional().nullable(),configured_upgrade_request_message:a.string().optional().nullable(),file_export_setting:a.string().optional().nullable()})},536166:(e,r,n)=>{var a=(e=>(e.NAME="Name",e.ACTIVE_AT="Last active",e.DESIGN_PAID_STATUS="Design role",e.FIGJAM_PAID_STATUS="FigJam role",e))(a||{})},159806:(e,r,n)=>{n.d(r,{c:()=>a});let a={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},611390:(e,r,n)=>{n.d(r,{Zf:()=>s,j4:()=>l,wF:()=>c});var a=n(338584),i=n(548759),o=n(758268),s=(e=>(e.FULL="full",e.RESTRICTED="restricted",e.STARTER="starter",e))(s||{}),l=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e))(l||{});let c=a.normalize("TeamUser",a.object({id:a.primaryKey(),team_id:a.string(),user_id:a.string(),design_paid_status:a.nativeEnum(s),whiteboard_paid_status:a.nativeEnum(s),drafts_folder_id:a.string().nullable().optional(),created_at:a.string(),updated_at:a.string(),user:o.aw.optional(),show_figjam_user_onboarding:a.boolean().nullable(),active_seat_type:i.cD.nullish()}))},590885:(e,r,n)=>{n.d(r,{$:()=>a}),n(76265);var a=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.CREATE_TEAM="create_team",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.RESOURCE_MOVED="resource_moved_to_team",e.RESOURCE_MOVED_FROM_DRAFTS="resource_moved_from_plan_drafts",e.RESTORED_FROM_TRASH="resource_restored_from_trash",e.JOIN_LINK_REDEEM="join_link_redeem",e.ADMIN_UPGRADE="team_admin_upgrade",e.CHECKOUT="checkout",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.EDIT_ACTION="edit_action",e.EDIT_BUTTON="edit_button",e.FIGJAM_GA_REUPGRADE="fj_ga_reupgrade",e.RUN_PLUGIN="run_plugin",e.DEV_MODE="dev_mode",e.DRAFTS_SHARE="drafts_share",e.DEVELOPER_BUNDLE_OPT_IN="developer_bundle_opt_in",e))(a||{})},425028:(e,r,n)=>{n.d(r,{A$:()=>a,F9:()=>o,Iv:()=>i});var a=(e=>(e.HOME="",e.MEMBERS="members",e.SETTINGS="settings",e.PROFILE="profile",e.BILLING="billing",e))(a||{}),i=(e=>(e.DASHBOARD="dashboard",e.MEMBERS="members",e.DRAFTS="drafts",e.BILLING="billing",e.SETTINGS="settings",e.CONTENT="content",e))(i||{}),o=(e=>(e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e))(s||{})},324225:(e,r,n)=>{n.d(r,{Fb:()=>u,ZN:()=>h,bL:()=>p,kE:()=>m,pE:()=>_,qg:()=>c});var a=n(841962),i=n(338584),o=n(314540),s=n(645833),l=n(543424);let c=118;var d=(e=>(e.REQUIRES_SOURCE_ACTION="requires_source_action",e))(d||{}),u=(e=>(e.ORG_BROWSABLE="org_browsable",e.HIDDEN="hidden",e))(u||{});let m=i.normalize("Team",s.bV.extend({created_at:i.string(),id:i.primaryKey(),img_url:i.string().optional(),org_id:i.string().nullable(),name:i.string(),description:i.string(),projects:i.number().nullish(),editors:i.number().nullish(),realtime_token:i.string().optional(),restrictions_list:i.array(o.iU).nullable(),subscription:o.D8.nullable(),subscription_raw:o.D8.nullable(),org_access:o.We.nullable(),stripe_customer_id:i.string().nullable(),student_team_at:i.string().nullable(),student_team_state:o.R2,student_autoverifying_team_at:i.string().nullable(),student_team:i.boolean(),pro_team:i.boolean(),org_team:i.boolean(),starter_team:i.boolean(),grace_period_end:i.string().nullable(),grace_period_type:o.Dh.nullable(),last_upgraded_at:i.string().nullable(),updated_at:i.string().nullable().optional(),deleted_at:i.string().nullable(),community_profile_id:i.string().optional(),community_profile_handle:i.string().optional(),license_group_id:i.string().nullable(),license_group:l.W.nullable(),workspace_id:i.string().nullable(),default_permission:o.zd.optional().nullable(),is_favorited:i.boolean().optional(),vat_gst_id:i.string().optional(),tax_id_verification_status:o.xy.optional(),cmty_publish_as_user_enabled:i.boolean().optional(),ai_features_disabled:i.boolean().optional(),figma_provided_libraries_disabled:i.boolean().optional(),legal_name:i.string().nullable(),design_default_paid_status:o.cA.optional(),whiteboard_default_paid_status:o.cA.optional(),sanctioned_at:i.string().nullable(),sharing_audience_control:o.a0.optional(),org_browsable:i.boolean().optional(),hidden:i.boolean().optional()}));function p(e,r){let n=(0,a.kc)().ps_benchmark;return r?`${location.origin}/files/${r}/team/${e}`:`${location.origin}/files/team/${e}${n?"/all-projects":""}`}var h=(e=>(e.MOVE_FILES="move_files",e.DUPLICATE_FILES="duplicate_files",e.RESTORE_FILES="restore_files",e.MOVE_FOLDER="move_folder",e.IMPORT_FILES="import_files",e.CREATE_FILE="create_file",e.CREATE_FOLDER="create_folder",e.CREATE_FILE_FROM_TEMPLATE="create_file_from_template",e.CREATE_PAGE="create_page",e.DUPLICATE_PAGE="duplicate_page",e.CREATE_MORE_VARIABLE_MODES="create_more_variable_modes",e.PUBLISH_MORE_VARIABLE_MODES="publish_more_variable_modes",e.CREATE_FILE_FROM_DROPDOWN="create_file_from_dropdown",e.INSERT_ADVANCED_SHAPE="insert_advanced_shape",e.ACCEPT_PROJECT_CONNECTION_INVITE="accept_project_connection_invite",e))(h||{}),_=(e=>(e.PUBLISH_COMPONENTS="publish_components",e.USE_AUDIO="use_audio",e.VIEW_ONLY_PROJECT="view_only_project",e.INVITE_ONLY_PROJECT="invite_only_project",e))(_||{})},161935:(e,r,n)=>{n.d(r,{C0:()=>a,Jh:()=>s,XU:()=>c,cT:()=>d,mo:()=>u,rJ:()=>o,rR:()=>m,t2:()=>l,ue:()=>i});var a=(e=>(e[e.NAME=0]="NAME",e[e.CREATED_AT=1]="CREATED_AT",e[e.TOUCHED_AT=2]="TOUCHED_AT",e[e.TRASHED_AT=3]="TRASHED_AT",e[e.OWNER=4]="OWNER",e[e.SEARCH_RELEVANCE=5]="SEARCH_RELEVANCE",e[e.PROJECT_NAME=6]="PROJECT_NAME",e[e.ACCESSED_AT=7]="ACCESSED_AT",e[e.SHARED_AT=8]="SHARED_AT",e))(a||{}),i=(e=>(e[e.ASC=0]="ASC",e[e.DESC=1]="DESC",e))(i||{}),o=(e=>(e[e.ANY=0]="ANY",e[e.SELF=1]="SELF",e[e.OTHER=2]="OTHER",e))(o||{}),s=(e=>(e[e.CAN_BE_VIEWED=0]="CAN_BE_VIEWED",e[e.CAN_BE_RESTORED_DELETED=1]="CAN_BE_RESTORED_DELETED",e))(s||{}),l=(e=>(e[e.ANY=0]="ANY",e[e.DESIGN=1]="DESIGN",e[e.FIGJAM=2]="FIGJAM",e[e.PROTOTYPE=3]="PROTOTYPE",e[e.SLIDES=4]="SLIDES",e[e.SITES=5]="SITES",e))(l||{}),c=(e=>(e[e.LIST=0]="LIST",e[e.GRID=1]="GRID",e))(c||{}),d=(e=>(e.ALL="",e.SHARED="shared",e.ORG_DELETED_DRAFTS="deleted_user_drafts",e))(d||{});function u(e){switch(e){case 1:default:return"can_be_restored_deleted";case 0:return"can_be_viewed"}}var m=(e=>(e[e.TIME=0]="TIME",e[e.ALPHABETICAL=1]="ALPHABETICAL",e[e.OTHER=2]="OTHER",e))(m||{})},758268:(e,r,n)=>{n.d(r,{D6:()=>o,P5:()=>i,aw:()=>d,pl:()=>u,vA:()=>c,z4:()=>l});var a=n(338584),i=(e=>(e.NONE="none",e.ACCEPTED="accepted",e.STARTED_ONBOARDING="started_onboarding",e.DISABLED="disabled",e.ENABLED="enabled",e))(i||{}),o=(e=>(e.FILE="file",e.EXTENSION="extension",e))(o||{}),s=(e=>(e.NUM_CUSTOMERS="num_customers",e.PAYOUTS="payouts",e.GROSS="gross",e.LAST_UPDATED="last_updated_at",e.ALL_TIME_TOTAL_EARNED="all_time_total_earned",e.NUM_PURCHASES="num_purchases",e))(s||{});function l(e){return e&&({none:0,accepted:1,started_onboarding:2,disabled:3,enabled:4})[e]||0}var c=(e=>(e.ALWAYS="always",e.NEVER="never",e))(c||{});let d=a.object({id:a.string(),name:a.string().optional(),handle:a.string(),img_url:a.string(),email:a.string().optional(),description:a.string().nullish(),org_id:a.string().optional()});var u=(e=>(e.EDITOR_ON_MAIN="Editor on main",e.EDITOR_ON_TEAM="Editor on team",e))(u||{})},966048:(e,r,n)=>{n.d(r,{V5:()=>a});let a=new Set(["seen_pro_cart_abandon_survey","seen_drafts_collaboration_survey","seen_first_use_survey","seen_type_of_work_survey","seen_org_admin_survey","seen_pro_admin_survey","seen_org_cart_abandon_survey","seen_remote_templates_opt_out_survey","seen_editor_new_user_survey","seen_editor_new_user_research_intake","seen_starter_team_loophole_survey","dismissed_starter_team_loophole_survey","completed_starter_team_loophole_survey"])},137515:(e,r,n)=>{var a;(e=>{(e=>{(e.Block||(e.Block={})).ATTACHMENT_TYPES=new Set(["BodyAndThumbnailAttachment","ActionableAttachment","ClientActionableAttachment","BodyAttachment"])})(e.BlockKit||(e.BlockKit={}))})(a||(a={}))},621334:(e,r,n)=>{n.d(r,{o:()=>a});var a=(e=>(e.INTERNAL_PROFILE="INTERNAL_PROFILE",e.INTERNAL_PROFILE_POSTS="INTERNAL_PROFILE_POSTS",e.PUBLIC_PROFILE="PUBLIC_PROFILE",e.PLUGINS="PLUGINS",e))(a||{})},770453:(e,r,n)=>{n.d(r,{$E:()=>a,MK:()=>s,bU:()=>i});var a=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTED_WITH_MIC_DISABLED=1]="CONNECTED_WITH_MIC_DISABLED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CONNECTING=3]="CONNECTING",e[e.DISCONNECTING=4]="DISCONNECTING",e[e.RECONNECTING=5]="RECONNECTING",e[e.ERROR=6]="ERROR",e[e.CALL_INACTIVE=7]="CALL_INACTIVE",e[e.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT=8]="TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT",e[e.TOKEN_WILL_EXPIRE=9]="TOKEN_WILL_EXPIRE",e[e.TOKEN_EXPIRED=10]="TOKEN_EXPIRED",e[e.TOKEN_SILENTLY_RENEWED=11]="TOKEN_SILENTLY_RENEWED",e[e.USER_JOINED=12]="USER_JOINED",e[e.USER_LEFT=13]="USER_LEFT",e[e.ERROR_MICROPHONE_PERMISSIONS_DENIED=14]="ERROR_MICROPHONE_PERMISSIONS_DENIED",e[e.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED=15]="WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED",e[e.UNMUTE=16]="UNMUTE",e[e.MUTE=17]="MUTE",e[e.ERROR_ON_LEAVE=18]="ERROR_ON_LEAVE",e[e.SYSTEM_INCOMPATIBLE=19]="SYSTEM_INCOMPATIBLE",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW=20]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW=21]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW=22]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW",e[e.WARNING_RECV_AUDIO_DECODE_FAILED=23]="WARNING_RECV_AUDIO_DECODE_FAILED",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER=24]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER=25]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER=26]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",e[e.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER=27]="WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER",e))(a||{}),i=(e=>(e[e.NONE=0]="NONE",e[e.HEADPHONES=1]="HEADPHONES",e[e.FULL=2]="FULL",e))(i||{}),o=(e=>(e.ERROR="error",e.WARNING="warning",e.MESSAGE="message",e.SUCCESS="success",e.PENDING="pending",e))(o||{}),s=(e=>(e[e.DONE=100]="DONE",e[e.STARTED=1]="STARTED",e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DISK_ERROR=-1]="DISK_ERROR",e[e.NETWORK_ERROR=-2]="NETWORK_ERROR",e))(s||{})},545466:(e,r,n)=>{},569652:(e,r,n)=>{n.d(r,{Fi:()=>o,V0:()=>a,dN:()=>i,m2:()=>s,rj:()=>l});var a=(e=>(e.ADMIN="admin",e.DIRECTORY="directory",e))(a||{}),i=(e=>(e.TEAMS="teams",e))(i||{});let o=["teams"];var s=(e=>(e.TEAMS="teams",e.MEMBERS="members",e.LIBRARIES="libraries",e.SETTINGS="settings",e))(s||{});let l=["teams","members","libraries"]},585498:(e,r,n)=>{n.d(r,{aY:()=>R,bE:()=>O});var a=n(411855),i=n(188507),o=n(846288),s=n(875877),l=n(728722),c=n(736041),d=n(648735);n(176160);var u=n(15092),m=n(314540),p=n(183739),h=n(597185),_=n(940795),g=n(269049),f=n(263352);n(200942);var E=n(317384),y=n(993027),b=n(738402),v=n(556843),T=n(520244),I=n(471923),S=n(266838),w=n(76265),A=n(233950),C=n(710636),N=(e=>(e.STOP_AUTO_RUN_FROM_USER="stop-auto-run-from-user",e.STOP_AUTO_RUN_FROM_ORG="stop-auto-run-from-org",e.CONFIRM_REPLACE="confirm-replace",e.ENABLE_AUTO_RUN="enable-auto-run",e))(N||{});let L=(0,C.Ju)(function({commonShowModalArgs:e,newPluginName:r,autoRunModalType:n,open:s}){let l,d;let u=(0,i.wA)(),p=()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.NONE),u(c.Lo())},h=()=>u(c.Lo()),f=(0,_.yN)({migrationGroup:g.L.GROUP_5,component:"AutoRunConfirmModal",attribute:"orgName",legacy:(e,r)=>r?.name||void 0,migrated:(e,r)=>e?.key.type===m.OL.ORG?r?.name:void 0}),E={currentAutoRunPluginName:a.createElement(A.E,{fontWeight:"bold"},e.currentAutoRunPluginName)},b={orgName:a.createElement(A.E,null,f||""),orgPluginName:a.createElement(A.E,{fontWeight:"bold"},e.orgPluginName)},C={orgPluginName:a.createElement(A.E,{fontWeight:"bold"},e.orgPluginName),newPluginName:a.createElement(A.E,{fontWeight:"bold"},r),orgName:a.createElement(A.E,null,f||"")};switch(n){case"stop-auto-run-from-user":l=a.createElement(a.Fragment,null,a.createElement(v.nB,null,a.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_desc",E))),a.createElement(v.wi,null,a.createElement(v.jk,null,a.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(T.$n,{variant:"primary",onClick:()=>{p(),u((0,c.to)({type:L,data:{commonShowModalArgs:e,autoRunModalType:"enable-auto-run"}}))}},(0,w.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;case"enable-auto-run":l=a.createElement(a.Fragment,null,a.createElement(v.nB,null,a.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.enable_auto_run_desc",b))),a.createElement(v.wi,null,a.createElement(v.jk,null,a.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.dont_enable")),a.createElement(T.$n,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.INHERIT),u(c.Lo())}},(0,w.t)("dev_handoff.autorun_confirm_modal.enable_auto_run")))));break;case"confirm-replace":l=a.createElement(a.Fragment,null,a.createElement(v.nB,null,a.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.confirm_replace",C))),a.createElement(v.wi,null,a.createElement(v.jk,null,a.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(T.$n,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.OVERRIDE),u(c.Lo())}},(0,w.t)("dev_handoff.autorun_confirm_modal.replace")))));break;case"stop-auto-run-from-org":l=a.createElement(a.Fragment,null,a.createElement(v.nB,null,a.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_from_org",b))),a.createElement(v.wi,null,a.createElement(v.jk,null,a.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(T.$n,{variant:"primary",onClick:p},(0,w.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;default:(0,o.xb)(n)}switch(n){case"stop-auto-run-from-user":case"stop-auto-run-from-org":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_stop_auto_run");break;case"confirm-replace":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_replace_auto_run");break;case"enable-auto-run":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_enable_auto_run",{pluginName:e.orgPluginName});break;default:(0,o.xb)(n)}let N=I.hS({open:s,onClose:()=>u(c.Lo())});return a.createElement(S.bL,{manager:N,width:"md",htmlAttributes:{"data-testid":"autorun-confirm-modal"}},a.createElement(v.vo,null,a.createElement(v.Y9,null,a.createElement(v.hE,null,d)),l))},"AutoRunConfirmModal");function O(e){let r=e?.plugin_id??"",n=e?.name??"",l=function(){let e=P(),r=D(),n=(0,_.b_)({component:"usePluginToAutoRun",migrationGroup:g.L.GROUP_11}),a=u.iZ()?.id;if(!(e.loaded&&r.loaded))return{loaded:!1,plugin:null};let i=null;switch(e.autoRunPrefs?.autoRunPluginBehavior){case m.xw.NONE:i=null;break;case m.xw.OVERRIDE:i=e.autoRunPrefs.autoRunPlugin;break;case m.xw.INHERIT:default:i=r.autoRunPrefs?.autoRunPlugin??null}let o=i?(0,d.mf)(i,n??"",a??"",null)??null:null;return{loaded:!0,plugin:R(o)?o:null}}(),p=D(),h=(0,b.ks)(),f=h&&l.plugin?.plugin_id===r,v=(0,s.useSetAtom)(E.Lx),T=P(),I=(0,i.wA)();return{isPluginSetToAutoRun:f,callback:a.useCallback(()=>{if(!h||(v(!0),!l.loaded||!p.loaded))return;let e=T.autoRunPrefs?.autoRunPluginBehavior,a={pluginID:r,orgPluginName:p.autoRunPrefs?.autoRunPlugin.currentPluginVersion?.name||"",currentAutoRunPluginName:l.plugin?.name||""};switch(e){case void 0:case m.xw.NONE:y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;case m.xw.OVERRIDE:r!==l.plugin?.plugin_id?y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE):p.autoRunPrefs?I((0,c.to)({type:L,data:{commonShowModalArgs:a,autoRunModalType:N.STOP_AUTO_RUN_FROM_USER}})):y.s.updateUserAutoRunPluginId(r,m.xw.NONE);break;case m.xw.INHERIT:p.autoRunPrefs?r!==p.autoRunPrefs.autoRunPluginId?I((0,c.to)({type:L,data:{commonShowModalArgs:a,newPluginName:n,autoRunModalType:N.CONFIRM_REPLACE}})):I((0,c.to)({type:L,data:{commonShowModalArgs:a,autoRunModalType:N.STOP_AUTO_RUN_FROM_ORG}})):y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;default:(0,o.xb)(e)}},[h,v,l.loaded,l.plugin?.name,l.plugin?.plugin_id,p.loaded,p.autoRunPrefs,T.autoRunPrefs?.autoRunPluginBehavior,r,I,n])}}function R(e){return e&&(0,f.UH)(e)}function P(){let e=(0,u.iZ)();return k((0,l.Rs)(p.Sc8,{targetOrgId:null,targetUserId:e?.id??""},{enabled:!!e?.id}))}function D(e){let r=(0,_.yN)({attribute:"id,isEnterprise",component:"useOrgAutoRunPlugin",migrationGroup:g.L.GROUP_11,legacy:(e,r)=>({id:r?.id,isEnterprise:(0,h.kA)(r)}),migrated:e=>({id:e?.key.type!==m.OL.ORG?void 0:e?.key.parentId??void 0,isEnterprise:e?.tier===m.Ag.ENTERPRISE})}),n=(0,l.Rs)(p.Sc8,{targetOrgId:r?.id??"",targetUserId:null},{enabled:r.isEnterprise});return r.isEnterprise?k(n,e):{loaded:!0,autoRunPrefs:null}}function k(e,r){if("loaded"!==e.status)return{loaded:!1,autoRunPrefs:null};let n=e.data.pluginPreferences,a=!!(r||n?.autoRunEnabled);return n&&n.autoRunPluginId&&n.autoRunPlugin&&a?{loaded:!0,autoRunPrefs:{autoRunPluginId:n.autoRunPluginId,autoRunPluginBehavior:n.autoRunBehavior,autoRunPlugin:n.autoRunPlugin}}:{loaded:!0,autoRunPrefs:null}}},787017:(e,r,n)=>{n.d(r,{Q:()=>d});var a=n(411855),i=n(48451);n(918091),n(132939),n(76265);var o=n(34671),s=n(944415);n(125682);var l=n(314540);n(688656);var c=n(319557);function d(){let{setCodegenSettings:e,localCodegenSettings:r}=(0,c.VR)(),n=(0,o.v4)(),d=(0,s.gc)(),u=a.useMemo(()=>r?.behavior===l.Rc.OVERRIDE&&(0,i.he)(r?.language,n)&&(0,i.he)(r?.preferences,d),[n,d,r]);return{updateDefaultCodegenSettings:a.useCallback(()=>{e({behavior:u?l.Rc.INHERIT:l.Rc.OVERRIDE,language:n,preferences:d})},[n,d,u,e]),isSetToDefault:u}}n(929717)},376556:(e,r,n)=>{n.d(r,{Ew:()=>a.E,IN:()=>c.IN,L_:()=>o.L_,VY:()=>s.V,Wh:()=>c.Wh,Yx:()=>l.Y,_x:()=>i._x,gH:()=>c.gH,mN:()=>i.mN});var a=n(207747),i=n(718143);n(279337);var o=n(488697),s=n(762469),l=n(16994),c=n(417385)},488697:(e,r,n)=>{n.d(r,{DZ:()=>p,L_:()=>h});var a=n(411855),i=n(875877),o=n(612724);n(826943),n(693565),n(265851),n(343373);var s=n(991944);n(340794);var l=n(417385),c=n(279337),d=n(894783),u=n(595670),m=n(62159);n(997830);let p=(0,i.atom)({titleIconURL:"",titleIconSvgSrc:void 0,title:"",displayed:!1,width:l.bA,height:l.Yw,initialPosition:new o.Mi(0,0),cancelCallback:void 0,onDragEnd:e=>{}});class h extends a.Component{constructor(e){super(e),this.state={titleIconURL:"",titleIconSvgSrc:void 0,title:"",displayed:!1,width:l.bA,height:l.Yw,initialPosition:new o.Mi(0,0),cancelCallback:void 0,onDragEnd:e=>{},dragging:!1,dataFplVersion:document.body.getAttribute("data-fpl-version")},this.onDragStart=()=>{this.setState({dragging:!0})},this.onDragEnd=e=>{this.setState({dragging:!1}),"function"==typeof this.state.onDragEnd&&this.state.onDragEnd(e)},this.onClose=()=>{this.state.cancelCallback&&this.state.cancelCallback()},h.instance=this,this.observer=this.createMutationObserver()}static getInstance(){return h.instance}updateState(e){this.setState(r=>({...r,...e}))}componentDidMount(){this.observer.observe(document.body,{attributes:!0})}componentWillUnmount(){this.observer&&this.observer.disconnect()}createMutationObserver(){return new MutationObserver(e=>{for(let r of e)if("attributes"===r.type&&"data-fpl-version"===r.attributeName){let e=(0,d.J)();this.setState({dataFplVersion:e})}})}render(){let{width:e,height:r}=this.state;return a.createElement("div",{style:{display:this.state.displayed?"":"none"},className:`${u.o} ${m.xE}`,"data-testid":"pluginModalContainer","data-fpl-version":this.state.dataFplVersion},a.createElement(s.vx,{titleIconURL:this.state.titleIconURL,titleIconSvgSrc:this.state.titleIconSvgSrc,titleIconSvgClassName:u.v,title:this.state.title,truncateTitleText:!0,dragHeaderOnly:!0,initialWidth:e,initialHeight:r,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onClose:this.onClose,ignoreCloseShortcut:!0,alwaysEnsureHeaderModalOnScreen:!0,initialPosition:this.state.initialPosition,canResetPosition:this.state.displayed,preventKeyboardFocus:!0,frameStyle:{overflow:"hidden"},recordingKey:"pluginModal",hidden:!this.state.displayed,isUI3Override:"ui3"===this.state.dataFplVersion},a.createElement(c.j,{iframeId:l.Wh.MODAL,dragging:this.state.dragging})),a.createElement(c.j,{iframeId:l.Wh.FETCH}))}}},163092:(e,r,n)=>{var a=n(411855),i=n(363976),o=n(699791),s=n(556007),l=n(109388),c=n(188507),d=n(28819),u=n(623817),m=n(254773),p=n(32050),h=n(584068),_=n(875877),g=n(918091),f=n(499875),E=n(132939),y=n(265851),b=n(76265),v=n(161021),T=n(666249),I=n(47795),S=n(628220),w=n(315145),A=n(761649),C=n(581713),N=n(227362);n(648735);var L=n(343373),O=n(125682),R=n(492366),P=n(688656),D=n(317384);n(319557);var k=n(138157),M=n(738402),F=n(689954),x=n(929717),U=n(748940),B=n(961576),V=n(713199),G=n(362679);function H(){let e=q(),r=!!e,[n,i]=a.useState({x:0,y:0});return a.useEffect(()=>{if(r){let e=e=>{i({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}},[r]),e?l.createPortal(a.createElement(k.V,{plugin:e,className:y.s.h16.w16.bRadius2.$,style:{position:"fixed",left:n.x-8,top:n.y-8,pointerEvents:"none",zIndex:1e5}}),document.body):null}function W(e){let{pinnedPlugins:r,unpinPlugin:n,movePin:i,runPlugin:o}=e,s=(0,_.useAtomValue)(D.be),[l,d]=a.useState(!1),u=q(),m=(0,c.wA)(),{shownPlugins:h,overflowPlugins:g}=r.length>3?{shownPlugins:r.slice(0,2),overflowPlugins:r.slice(2)}:{shownPlugins:r,overflowPlugins:[]},f=s?.plugin_id??null,E=g.findIndex(e=>e.plugin_id===f);if(-1!==E){let e=g[E];u||g.splice(E,1),h.push(e)}let b=h[h.length-1]?.plugin_id,v=(0,p.k9)(()=>new Set(r.map(e=>e.plugin_id)),[r]);return a.useEffect(()=>{m(S.Vg({resourceType:R.bD.PLUGIN,resourceIds:Array.from(v)}))},[v,m]),a.createElement("div",{className:y.s.flex.flexRow.flexGrow1.itemsEnd.$,"data-testid":"pinned-plugins"},a.createElement("div",{className:V.hm},a.createElement(j,{target:{type:"begin"},variant:"vertical"}),h.map(e=>{let r=e.plugin_id===f&&!!u&&-1!==E;return a.createElement("div",{key:e.plugin_id,style:{visibility:r?"hidden":"visible",display:"contents"}},a.createElement(K,{plugin:e,unpinPlugin:n,movePin:i,runPlugin:o,setIsDropdownShown:d}),a.createElement(j,{target:{type:"after",id:e.plugin_id},variant:"vertical",disabled:r}))}),g.length>0&&a.createElement(Y,{isDropdownShown:!!u||l,setIsDropdownShown:d,plugins:g,unpinPlugin:n,lastShownPluginID:b,movePin:i,runPlugin:o})))}function K({plugin:e,unpinPlugin:r,movePin:n,runPlugin:o,setIsDropdownShown:s}){let l=(0,N.Gt)(e.plugin_id,"pinned"),d=(0,_.useAtomValue)(D.be),u=d?.plugin_id??null,[p,h]=(0,_.useAtom)(v.H),g=(0,m.U)(),f=a.useRef(null),E=(0,T._I)(),b=(0,M.ks)()&&!E,S=(0,c.wA)(),C=(0,O.Um)(),L=(0,A.p)(e.plugin_id,l),R=L.length>0,x=(0,B.yG)(e.plugin_id,"pinned")&&R,G=a.useCallback(r=>{if(R){x?S(I.oB()):S((0,B.dr)({pluginId:e.plugin_id,tileType:"pinned"}));return}l()},[R,l,x,S,e.plugin_id]),[{isDragging:H},W]=(0,i.i)(()=>({type:"pinned-plugin",collect:e=>({isDragging:!!e.isDragging()}),item:e,canDrag:()=>u!==e.plugin_id&&!b,end:(r,a)=>{let i=a.getDropResult();a.didDrop()&&i&&n(e.plugin_id,i)}}),[b,n,u,e.plugin_id]),K=C?.type===Z&&C.data.pluginId===e.plugin_id,Y=a.useCallback(r=>{r.stopPropagation(),r.preventDefault(),K?S(I.oB()):S(I.j7({type:Z,data:{targetRect:r.currentTarget.getBoundingClientRect(),pluginId:e.plugin_id}}))},[S,K,e.plugin_id]),j=f.current?.getBoundingClientRect();return a.createElement("div",{className:y.s.relative.$,ref:f},a.createElement("button",{className:d?.plugin_id===e.plugin_id?V.TU:V.y_,"data-tooltip-type":K||H?void 0:P.Ib.TEXT,"data-tooltip":K||H?void 0:e.name,onClick:r=>{b?(h(v._.PLUGIN),S(w.IN({fdPreviewResource:{id:e.plugin_id,type:U.s.PLUGIN}}))):R?G(r):o&&(h(v._.PLUGIN),u!==e.plugin_id&&(l(),g("Dev Handoff Ran Pinned Plugin",{pluginId:e.plugin_id})),s(!1))},onContextMenu:Y},a.createElement(k.V,{plugin:e,draggable:!1,className:y.s.h16.w16.bRadius2.$,ref:W,style:{opacity:H?.5:1}})),K&&a.createElement($,{plugin:e,unpinPlugin:r}),x&&j&&a.createElement(F.j,{showPoint:!1,items:L,onSelectItem:r=>{r.callback&&(r.callback("",null,S),s(!1),g("Dev Handoff Ran Pinned Plugin Submenu",{pluginId:e.plugin_id}))},parentRect:j,dispatch:S,lean:"left"}))}function Y({plugins:e,unpinPlugin:r,lastShownPluginID:n,isDropdownShown:i,setIsDropdownShown:o,movePin:s,runPlugin:l}){let c=a.useRef(null);return a.useEffect(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[o]),a.createElement(a.Fragment,null,a.createElement("div",{className:V.zA,ref:c},a.createElement(d.d,{recordingKey:"overflow_pins","aria-expanded":!1,onClick:()=>{o(!i)},"aria-label":(0,b.t)("dev_handoff.inspect_panel.more_plugins"),htmlAttributes:{onMouseDown:C.dG,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,b.t)("dev_handoff.inspect_panel.more_plugins")}},a.createElement(E.U,{svg:G.A},a.createElement(u.J,null))),i&&a.createElement("div",{className:V.Wm},a.createElement(j,{target:{type:"after",id:n},variant:"horizontal"}),e.map(e=>a.createElement(a.Fragment,{key:e.plugin_id},a.createElement(K,{plugin:e,unpinPlugin:r,movePin:s,runPlugin:l,setIsDropdownShown:o}),a.createElement(j,{target:{type:"after",id:e.plugin_id},variant:"horizontal"}))))))}function $({plugin:e,unpinPlugin:r}){let n=(0,O.Um)();return a.createElement(x.Cf,{targetRect:n?.data.targetRect,lean:"left",minWidth:64,maxWidth:120,disableDropdownScrollContainer:!0,propagateCloseClick:!0},a.createElement(g.c$,{onClick:()=>r(e.plugin_id)},(0,b.tx)("dev_handoff.inspect_panel.unpin")))}function j({target:e,variant:r,disabled:n=!1}){let i=(0,L.GS)()?24:32,[{isOver:s},l]=(0,o.H)(()=>({accept:"pinned-plugin",drop:()=>e,collect:e=>({isOver:!!e.isOver()}),canDrop:()=>!n}),[e,n]),c={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:"begin"===e.type?1:0,..."vertical"===r?"begin"===e.type?{position:"relative",justifyContent:"end",minWidth:16,height:i,marginRight:-8}:{width:16,height:i,top:0,left:-8}:{width:i,height:16,top:-8,left:0}};return a.createElement("div",{style:{position:"relative",flexGrow:"begin"===e.type?1:0,width:0,height:0,display:"flex",overflow:"visible",zIndex:1}},a.createElement("div",{style:c,ref:l},s&&a.createElement(z,{variant:r,target:e})))}function z({variant:e,target:r}){return a.createElement("div",{style:{background:"var(--color-icon-brand)",..."horizontal"===e?{height:2,width:32}:{height:32,width:2},..."begin"===r.type?{marginRight:6}:{}}})}function q(){let e=(0,s.u)(),[r,n]=a.useState(null);return a.useEffect(()=>e.getMonitor().subscribeToStateChange(()=>{"pinned-plugin"===e.getMonitor().getItemType()?n(e.getMonitor().getItem()):n(null)}),[e,n]),r}a.memo(function(e){return!function(){let[e,r]=a.useState(!1);return a.useEffect(()=>{let e=requestAnimationFrame(()=>{r(!0)});return()=>cancelAnimationFrame(e)},[]),e}()?null:a.createElement(f.tH,{boundaryKey:"PinnedPlugins",fallback:a.createElement(a.Fragment,null)},a.createElement(h.hh,null,a.createElement(W,{...e}),a.createElement(H,null)))});let Z="PINNED_PLUGIN_DROPDOWN"},319557:(e,r,n)=>{n.d(r,{VR:()=>L});var a=n(411855),i=n(188507),o=n(236891),s=n(254773);n(365257),n(875877);var l=n(728722),c=n(697737);n(174233);var d=n(666249),u=n(796270);n(826688),n(944415);var m=n(241162),p=n(648735),h=n(371311);n(963993),n(176160);var _=n(15092),g=n(314540),f=n(183739),E=n(940795),y=n(269049);n(263352),n(426256);var b=n(738402),v=n(846288),T=n(805014),I=n(757028),S=n(841962);let w={language:{type:"first-party",id:"WEB"},preferences:{customSettings:null,unit:g.tK.PIXEL,scaleFactor:null},behavior:g.Rc.INHERIT};class A{constructor(e,r,n){if(this.workingPreferences=e,this.parentPreferences=r,this.parentEnabledPreferences=n,!r||!n)return;let{codegenEnabled:a,pinnedPluginsEnabled:i}={...n},o={...r};a||(o.codegenSettings=null),!i&&(0,S.kc)().dev_mode_org_pinned_plugins_ent&&(o.pins=[],o.removedInheritedPins=[]),this.parentPreferences=o}orgPinsNotInUserPins(){let e=[];for(let r of this.parentPreferences?.pins??[])this.workingPreferences.pins.find(e=>e.pluginId===r.pluginId)||e.push(r);return e}get pinnedPluginIDs(){let e=[...this.workingPreferences.pins,...this.orgPinsNotInUserPins()],r=new Set(this.workingPreferences.removedInheritedPins);return e.filter(e=>!r.has(e.pluginId)&&(!e.inherited||C(this.parentPreferences,e.pluginId))).map(e=>e.pluginId)}get codegenSettings(){return this.parentPreferences&&this.workingPreferences.codegenSettings?.behavior!==g.Rc.OVERRIDE?this.parentPreferences?.codegenSettings??null:this.workingPreferences.codegenSettings}update(e){return new A((0,I.Ay)(this.workingPreferences,e),this.parentPreferences,this.parentEnabledPreferences)}pinPlugin(e){var r;let n=(r=this.workingPreferences,r?.pins.findIndex(r=>r.pluginId===e&&r.inherited));return null!=n&&-1!==n?this.update(r=>{r.pins[n].inherited=!1,r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)}):C(this.workingPreferences,e)?this:this.update(r=>{r.pins.push({pluginId:e,inherited:!1}),r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)})}unpinPlugin(e){return this.update(r=>{r.pins=r.pins.filter(r=>r.pluginId!==e),C(this.parentPreferences,e)&&r.removedInheritedPins.push(e)})}movePin(e,r){return"after"===r.type&&e===r.id||"begin"===r.type&&this.pinnedPluginIDs[0]===e?this:this.update(n=>{let a=C(this.workingPreferences,e),i=C(this.parentPreferences,e),o=!!(!a&&i);switch(n.pins=n.pins.filter(r=>r.pluginId!==e),r.type){case"begin":n.pins.unshift({pluginId:e,inherited:o});break;case"after":{let a=n.pins.findIndex(e=>e.pluginId===r.id);if(-1!==a)n.pins.splice(a+1,0,{pluginId:e,inherited:o});else{let a=this.orgPinsNotInUserPins(),i=a.findIndex(e=>e.pluginId===r.id);if(-1===i)throw Error("Invalid pin to move after");n.pins.push(...a.slice(0,i+1).map(e=>({...e,inherited:!0})),{pluginId:e,inherited:o})}}}})}get localCodegenSettings(){if(!this.codegenSettings)return null;let e=this.codegenSettings?.language,r=this.lgLanguageToLocalLanguage(e);if(!r)return null;let n=this.codegenSettings.preferences,a=this.lgUnitToLocalUnit(n.unit);return{language:r,preferences:{scaleFactor:n.scaleFactor??void 0,customSettings:n.customSettings??void 0,unit:a},behavior:this.codegenSettings.behavior}}setCodegenSettingLanguage(e){return this.update(r=>{let n=this.localLanguageTypeToLgLanguageType(e.type);if(!n)throw Error("Invalid language type");let a={...e,type:n,pluginLanguage:e.pluginLanguage??null};r.codegenSettings={language:a,preferences:this.codegenSettings?.preferences||w.preferences,behavior:this.codegenSettings?.behavior||w.behavior}})}setCodegenSettingUnit(e){return this.update(r=>{if(!this.codegenSettings)return;let n=this.localUnitToLgUnit(e);if(!n)throw Error("Invalid unit");let a=this.codegenSettings.preferences?{...this.codegenSettings.preferences,unit:n}:{scaleFactor:null,unit:n,customSettings:null};r.codegenSettings={language:this.codegenSettings.language,preferences:a,behavior:this.codegenSettings.behavior}})}setCodegenSettingCustomSettings(e,r){return this.update(n=>{if(!this.codegenSettings)return;let a=this.localLanguageTypeToLgLanguageType(e.type);if(!a)throw Error("Invalid language type");let i={...e,type:a,pluginLanguage:e.pluginLanguage??null},o={scaleFactor:this.codegenSettings.preferences?.scaleFactor??null,unit:this.codegenSettings.preferences?.unit??null,customSettings:{...this.codegenSettings.preferences?.customSettings,...r.customSettings}};n.codegenSettings={language:i,preferences:o,behavior:this.codegenSettings.behavior}})}setCodegenSetting(e){return this.update(r=>{if(!e){r.codegenSettings=null;return}let{behavior:n,language:a,preferences:i}=e,o=this.localLanguageTypeToLgLanguageType(a.type);if(!o)throw Error("Invalid language type");let s={...a,type:o,pluginLanguage:a.pluginLanguage??null},l={unit:this.localUnitToLgUnit(i.unit),customSettings:i.customSettings??null,scaleFactor:i.scaleFactor??null};r.codegenSettings={behavior:n,language:s,preferences:l}})}localUnitToLgUnit(e){switch(e){case T.tKW.PIXEL:return g.tK.PIXEL;case T.tKW.SCALED:return g.tK.SCALED;default:return null}}lgUnitToLocalUnit(e){switch(e){case g.tK.PIXEL:return T.tKW.PIXEL;case g.tK.SCALED:return T.tKW.SCALED;default:return}}localLanguageTypeToLgLanguageType(e){switch(e){case"first-party":return g.h9.FIRST_PARTY;case"published-plugin":return g.h9.PUBLISHED_PLUGIN;default:return null}}lgLanguageToLocalLanguage(e){let r;switch(e.type){case g.h9.FIRST_PARTY:r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage??void 0};break;case g.h9.PUBLISHED_PLUGIN:if(!e.pluginLanguage)return null;r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage};break;default:(0,v.xb)(e.type)}return r}serialize(){return{pins:this.workingPreferences.pins.map(e=>({pluginId:e.pluginId,inherited:e.inherited})),removedInheritedPins:Array.from(new Set(this.workingPreferences.removedInheritedPins)),codegenSettings:this.workingPreferences.codegenSettings}}}function C(e,r){return e?.pins.some(e=>e.pluginId===r)}let N={pins:[],removedInheritedPins:[],codegenSettings:null};function L(){let{loaded:e,preferences:r}=function(){let e=(0,_.TA)(),{loaded:r,preferences:n}=R((0,l.Rs)(f.JuA,{targetOrgId:null,targetUserId:e}));return{loaded:r,preferences:n}}(),{loaded:n,preferences:c,codegenEnabled:h,pinnedPluginsEnabled:v}=function(){let e=(0,E.yN)({migrationGroup:y.L.GROUP_6,component:"useLGOrgPluginPreferences",attribute:"targetOrgId",legacy:(e,r)=>r?.id??null,migrated:e=>e?.key.type===g.OL.ORG?e.key.parentId??null:null});return R((0,l.Rs)(f.JuA,{targetOrgId:e,targetUserId:null}))}(),T=(0,i.wA)(),I=(0,s.U)(),S=(0,b.ks)(),w=(0,d._I)(),C=S&&!w;(0,a.useEffect)(()=>{r&&D(null)},[r]);let L=(0,a.useMemo)(()=>new A(r??N,c??null,{codegenEnabled:h,pinnedPluginsEnabled:v}),[r,c,h,v]),[P,D]=(0,a.useState)(null),k=(0,a.useMemo)(()=>{let e=new Map;for(let n of[...r?.pins??[],...c?.pins??[]])n.plugin&&e.set(n.pluginId,n.plugin);return e},[c?.pins,r?.pins]),M=(0,a.useMemo)(()=>P?.pinnedPluginIDs??L.pinnedPluginIDs,[L,P]),F=(0,E.b_)({migrationGroup:y.L.GROUP_6,component:"usePluginPreferences"})??null,x=(0,_.TA)(),U=(0,p.YN)(),B=(0,a.useMemo)(()=>M.map(e=>{let r=k.get(e);if(!r||!r.publishingStatus||r.publishingStatus!==g.KB.APPROVED_PUBLIC&&r.publishingStatus!==g.KB.ORG_PRIVATE)return null;let n=(0,p.mf)(r,F,x,null);return n&&(C||U(n))?n:null}).filter(o.Vq),[M,k,F,x,C,U]),V=e=>{D(e),O(e.serialize()).catch(()=>{D(null)})};return{pinnedPlugins:B,unpinPlugin(e){V(L.unpinPlugin(e)),I("Dev Handoff Unpin Plugin",{pluginID:e})},pinPlugin(e){T(m.b({[u.xb]:!0})),V(L.pinPlugin(e)),I("Dev Handoff Pin Plugin",{pluginID:e})},movePin(e,r){V(L.movePin(e,r)),I("Dev Handoff Moved Plugin",{pluginID:e})},localCodegenSettings:L.localCodegenSettings,setCodegenSettings(e){V(L.setCodegenSetting(e))},setCodegenSettingsLanguage(e){V(L.setCodegenSettingLanguage(e))},setCodegenSettingsUnit(e){V(L.setCodegenSettingUnit(e))},setCodegenSettingsCustomSettings(e,r){V(L.setCodegenSettingCustomSettings(e,r))},loaded:e&&n}}async function O(e){await c.Ay.post("/api/plugin_preferences/user",{preferences:e})}function R(e){if("loaded"!==e.status)return{loaded:!1,preferences:null,codegenEnabled:!1,pinnedPluginsEnabled:!1};let r=e.data.pluginPreferences,{codegenEnabled:n,pinnedPluginsEnabled:a}=r||{};return{loaded:!0,preferences:r?.preferences,codegenEnabled:n??!1,pinnedPluginsEnabled:a??!1}}h.qZ.CSS,g.h9.FIRST_PARTY,g.tK.PIXEL,g.Rc.INHERIT},370884:(e,r,n)=>{n.d(r,{qg:()=>d,vX:()=>g,xF:()=>m});var a=n(48451),i=n(653798),o=n(37267),s=n(401562),l=n(98751),c=n(634824);async function d(e,r,n){let o={fonts:{},images:{}},s=new Map,l=null,d=e();for(let u=0;u<20&&(function(e,r){let n=e=>{if(!e)return;let{children:a,fillSrc:i,textStyle:o}=e.renderMetaData;if(o&&(p(r,o.style),o.ranges.forEach(e=>p(r,e.style))),i&&!r.images.hasOwnProperty(i)&&(r.images[i]={hasLoaded:!1}),a)for(let e of(0,c.MI)(a))n(e)};n(e)}(d.rootNode,o),(Object.values(o.fonts).some(({hasLoaded:e})=>!e)||Object.values(o.images).some(({hasLoaded:e})=>!e))&&await h(o,s,r,n),l=d,d=e(),!(0,a.c2)(l?.syncedState,d.syncedState));u++)19===u&&(0,i.x1)("resources","Loading reconciliation resources reached max iterations");return{imgInfoMap:s,vRoot:d}}async function u(e,r,n){try{let a=await m(e,n),i=r.createImage(a).hash,{width:o,height:s}=(await Promise.all([g(a)]))[0];return{hash:i,width:o,height:s}}catch(e){r.logWarning("Unable to load image. See the warning below for more info."),r.logWarning(e)}return null}let m=(0,s.n)(async(e,r)=>{if(function(e){try{let r=new URL(e);return"http:"===r.protocol||"https:"===r.protocol}catch(e){return!1}}(e)){if(!(0,l.pT)(e,r))throw Error(`Image URL ${e} does not satisfy the allowedDomains specified in the manifest.json`);e=(0,o.p)(e)}let n=await fetch(e);if(!n.ok)throw Error(`Unable to fetch image. Response status: ${n.status}`);return new Uint8Array(await n.arrayBuffer())});function p(e,r){let{fontName:n}=r;if(!n)return;let a=`${n.family} ${n.style}`;e.fonts.hasOwnProperty(a)||(e.fonts[a]={fontName:n,hasLoaded:!1})}async function h(e,r,n,a){let i=async e=>{let i=await u(e,n,a);i&&r.set(e,i)},o=Object.values(e.fonts).filter(({hasLoaded:e})=>!e).map(async e=>{await n.loadFontAsync(e.fontName),e.hasLoaded=!0}),s=Object.entries(e.images).filter(([,{hasLoaded:e}])=>!e).map(async([e,r])=>{await i(e),r.hasLoaded=!0});await Promise.all([...o,...s])}let _=e=>{let r="";return[].slice.call(new Uint8Array(e)).forEach(e=>r+=String.fromCharCode(e)),window.btoa(r)};function g(e){return new Promise(r=>{let n=new Image;n.onload=()=>{r({width:n.width,height:n.height})};let a=_(e);n.src="data:image;base64,"+a})}},150898:(e,r,n)=>{n.d(r,{F5:()=>o,Rs:()=>l,Z:()=>s,nx:()=>c});var a=n(335690),i=n(567155);function o(e,r){let n=!!(e.tokens&&e.tokens.length||e.inputValue&&e.inputValue.length);return e.tokens.some(e=>e.state===i.d.ERROR)&&(n=!1),e.inputValue&&e.inputValue.length&&r(e.inputValue).state===i.d.ERROR&&(n=!1),n}function s(e){let r=[];for(let n of e.tokens){let e="string"==typeof n.content?n.content:n.content.email;r.push(e.toLowerCase())}return e.inputValue&&r.push(e.inputValue.trim().toLowerCase()),r}function l(){return{inputValue:"",tokens:[],errorMessage:""}}function c(e=l(),r){return a.cL.matches(r)?l():a.hZ.matches(r)?{...r.payload}:a.Ox.matches(r)?{...e,tokens:e.tokens.concat(r.payload),inputValue:""}:a.pf.matches(r)?{...e,inputValue:r.payload}:a.g.matches(r)?{...e,errorMessage:r.payload}:e}},779099:(e,r,n)=>{n.d(r,{Nf:()=>v,Rn:()=>E,TY:()=>_,Yh:()=>y,c1:()=>b,fj:()=>p,jv:()=>g,pi:()=>h});var a=n(805014),i=n(841962),o=n(199699),s=n(747484),l=n(76265),c=n(47795),d=n(225371),u=n(254903),m=n(756044);function p(e={...m.Gf},r){return c.Ts.matches(r)?m.Gf:(d.p5.matches(r)&&r.payload.appModelChanges&&-1===(e={...e,...r.payload.appModelChanges,isInitialized:!0}).currentSelectedGradientStop.index&&(e.currentSelectedGradientStop={index:0,type:a.vRS.COLOR}),e)}let h="fullscreen-menu-dropdown";function _(e){return e?.type===h}let g="quick-actions-dropdown",f=Object.create(null);function E(e){let r=f[e];return r||(r=f[e]=`actionEnabled__${e}`),r}function y(e,r){return!!e[E(r)]}function b(e,r){let n="\u{1F310}";switch(r){case"set-tool-bend":return s.Ay.mac?"\u2318":"Ctrl";case"stack-reorder-left":case"stack-counter-align-left":return"\u2190";case"stack-reorder-left-end":return"\u2325\u2190";case"stack-reorder-right":case"stack-counter-align-right":return"\u2192";case"stack-reorder-right-end":return"\u2325\u2192";case"stack-reorder-up":case"stack-counter-align-top":return"\u2191";case"stack-reorder-up-end":case"stack-reorder-down-end":return"\u2325\u2191";case"stack-reorder-down":case"stack-counter-align-bottom":return"\u2193";case"set-tool-default-desc-figjam":case"set-tool-default-desc-figma":return"V";case"set-tool-marker":return"M";case"set-tool-stamp":case"set-tool-sites-link":return"E";case"set-tool-type":return"T";case"set-tool-connector-elbowed":return"X";case"toggle-publish":return s.Ay.mac?"\u23252":"Alt+2";case"toggle-inline-preview":case"toggle-inline-html-preview":return"\u21E7"+(0,l.t)("whiteboard.keyboard_shortcuts.key_label.space");case"toggle-sidebar":if(u.nt.ui3.getValue())switch((0,o.v7)()){case a.aTn.US_QWERTY:case a.aTn.UNKNOWN:case a.aTn.DVORAK:return s.Ay.mac?"\u21E7\\":"Shift+\\"}break;case"set-tool-sites-responsive-set":return"W";case"set-tool-code-component":return"\u21E7`";case"deselect-all":return"\u238B";case"multi-edit-text":return"Enter";case"page-next":if((0,i.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2193";break;case"page-previous":if((0,i.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2191"}if(e[r]){let n=e[r];if(n&&n.length>=1)return n[0].text}return""}function v(e){return e&&e.currentPage?e.currentPage:"0:1"}},753392:(e,r,n)=>{n.d(r,{K3:()=>m,YI:()=>u,bp:()=>c,sp:()=>p,y2:()=>d});var a=n(846288),i=n(717180),o=n(47795),s=n(225371),l=n(525312);function c(e=Object.create(null),r){if(o.Ts.matches(r)||l.a.matches(r))return Object.create(null);if(s.p5.matches(r)&&r.payload.selection){let{add:n,remove:i,replace:o}=r.payload.selection;if((0,a.KF)(!((n||i)&&o),"We expect either an add or remove OR a replace."),o)return o;let s=Object.assign(Object.create(null),e,n);for(let e in i)delete s[e];return s}return e}function d(e,r,n){for(let a in r){let r=e.get(a);r&&(0,i.hV)(r,n)}}function u(e,r,n){for(let a in r){let r=e.get(a);r&&n(r)}}function m(e,r){return!!e[r]}function p(e,r,n){return!!function(e,r,n){if(r[n])return e.get(n)||null;let a=null;return(0,i.Si)(e,n,e=>{if(!a&&r[e.guid]&&(a=e),a)return"stop"}),a}(e,r,n)}},165811:(e,r,n)=>{n.d(r,{A:()=>s});var a=n(534294),i=n(560664),o=n(544950);function s(e={},r){if(i.D.matches(r)){let n={...e};for(let a of r.payload)n[a.file_key]={...e[a.file_key],...a};return n}return e}(0,a.nF)(async(e,{fileKey:r})=>{let n=e.getState(),a=n.currentUserOrgId,s=n.currentTeamId;if(r in n.recentCustomTemplates||!a&&!s)return;let l=await o.q.getRecents({fileKeys:r,...a?{orgId:a}:s?{teamId:s}:{}});l&&l.data.meta.templates.length>0&&e.dispatch(i.D([l.data.meta.templates[0]]))})},477804:(e,r,n)=>{n.d(r,{pw:()=>m,q5:()=>u,y2:()=>p});var a=n(841962),i=n(437068),o=n(47795),s=n(593725);let l={[s.P.VIEW_MODE]:"view-bar-view-mode-option",[s.P.SORT_MODE]:"view-bar-sort-options"};function c(e){let r=i.x4&&i.x4.getItem(e)||"{}";try{return JSON.parse(r)}catch(e){return{}}}function d(e,r){if(i.x4)try{let n=JSON.stringify(r);i.x4.setItem(e,n)}catch(e){}return r}function u(e={},r){if(o.Qv.matches(r)&&!(0,a.kc)().file_browser_ia_overhaul_remove_list_view)return c(l[s.P.VIEW_MODE]);if(o.uV.matches(r)){let n={...e,[r.payload.viewId]:r.payload.viewMode};return d(l[s.P.VIEW_MODE],n)}return e}function m(e={},r){if(o.Qv.matches(r))return c(l[s.P.SORT_MODE]);if(o.ZR.matches(r)){let n={...e,[r.payload.viewId]:r.payload.sortMode};return d(l[s.P.SORT_MODE],n)}return e}function p(e,r,n){return r[e]??n}},775086:(e,r,n)=>{n.d(r,{Cn:()=>m});var a=n(60077),i=n(338584),o=(e=>(e.DAILY="daily",e.WEEKLY="weekly",e.MONTHLY="monthly",e))(o||{}),s=(e=>(e.ALL_ADMINS="all_admins",e.SPECIFIC_ADMINS="specific_admins",e))(s||{}),l=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(l||{}),c=(e=>(e.NEW_EDITOR_NOTIFICATION="new_editor_notification",e))(c||{}),d=(e=>(e.VIEWER="viewer",e.VIEWER_RESTRICTED="viewer_restricted",e.FULL="full",e))(d||{});let u=i.object({strings:i.object({team_admin_billing_cost_banner:i.object({banner_description:i.string()}),cart_banner:i.object({cart_banner_info:i.string(),cart_banner_edu_info:i.string()})}).partial()}).optional(),m=new class{constructor(){this.NotificationSettingsSchemaValidator=(0,a.vh)(),this.MaintenancePoc1Validator=(0,a.YV)("MaintenancePoc1",u,null),this.PlanPropertiesSchemaValidator=(0,a.vh)()}getNotificationSettings(e){return this.NotificationSettingsSchemaValidator.validate(async({xr:r})=>await r.get("/api/billing/notification_settings",a.td.toAPIParameters({plan_id:e.planId,plan_type:e.planType,notification_type:e.notificationType}))??null)}getPlanProperties(e){return this.PlanPropertiesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/billing/${e.planType}/${e.planId}/plan_properties`,a.td.toAPIParameters({desired_properties:["default_paid_status_design","default_paid_status_whiteboard"].toString()}))??null)}updatePlanProperties(e){return this.PlanPropertiesSchemaValidator.validate(async({xr:r})=>await r.put(`/api/billing/${e.planType}/${e.planId}/plan_properties`,e.properties)??null)}maintenancePoc1(){return this.MaintenancePoc1Validator.validate(async({xr:e})=>await e.get("/api/billing/maintenance_846b4c12"))}}},138346:(e,r,n)=>{var a=n(60077),i=n(697737),o=n(582787);new class{constructor(){this.ColorPaletteSchemaValidator=(0,a.YV)("ColorPaletteSchemaValidator",o.kfm.sinatra(),null)}createColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.post("/api/color_palettes",a.td.toAPIParameters(e)))}updateColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.put(`/api/color_palettes/${e.uuid}`,a.td.toAPIParameters(e)))}async deleteColorPalette(e){await i.Ay.del(`/api/color_palettes/${e}`)}setUserColorPaletteOverrideForFile(e,r){return i.Ay.post(`/api/files/${e}/color_palette`,a.td.toAPIParameters({colorPaletteUuid:r}))}async setTeamDefaultPalette(e,r){await i.Ay.post(`/api/teams/${e}/default_color_palette`,a.td.toAPIParameters({colorPaletteUuid:r}))}async clearTeamDefaultPalette(e){await i.Ay.del(`/api/teams/${e}/default_color_palette`)}}},973280:(e,r,n)=>{n.d(r,{U:()=>o});var a=n(60077),i=(e=>(e.VIEW_OR_PENDING="view_or_pending",e.VIEW_PROTOTYPE_OR_PENDING="view_prototype_or_pending",e))(i||{});let o=new class{constructor(){this.ContactsSchemaValidator=(0,a.vh)(),this.AtMentionsSchemaValidator=(0,a.vh)(),this.searchAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",a.td.toAPIParameters(e)))),this.getAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",a.td.toAPIParameters(e)))),this.ShareModalSchemaValidator=(0,a.vh)(),this.searchShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",a.td.toAPIParameters(e))),this.getShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",a.td.toAPIParameters(e))),this.FeedAtMentionsSchemaValidator=(0,a.vh)(),this.getFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",a.td.toAPIParameters(e)))),this.searchFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",a.td.toAPIParameters(e)))),this.FaceStampsMentionSchemaValidator=(0,a.vh)(),this.searchFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",a.td.toAPIParameters(e)))),this.getRecentFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",a.td.toAPIParameters(e)))),this.FeedPostCreatorsSchemaValidator=(0,a.vh)(),this.getFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",a.td.toAPIParameters(e)))),this.searchFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",a.td.toAPIParameters(e))))}getContacts(e){return this.ContactsSchemaValidator.validate(async({xr:r})=>await r.get("/api/contacts",a.td.toAPIParameters(e)))}}},326909:(e,r,n)=>{n.d(r,{Y:()=>o});var a=n(60077),i=n(697737);let o=new class{constructor(){this.GenerateImageTokenSchemaValidator=(0,a.vh)()}getGenerateImageToken(e){return this.GenerateImageTokenSchemaValidator.validate(async({xr:r})=>await r.get(`/api/feed_posts/generate_image_token/${e.fileKey}`,a.td.toAPIParameters({org_id:e.orgId,token_version:e.tokenVersion})))}markFeedViewed(e){i.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){i.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}}},163853:(e,r,n)=>{n.d(r,{If:()=>s});var a=n(60077),i=n(338584);let o=i.object({save_location:i.string(),folder_name:i.string().optional(),org_id:i.string().optional()}),s=(0,a.YV)("ClaimTryFileSchemaValidator",o,null,!0);new class{claimTryFile(e){return s.validate(async({xr:r})=>await r.put(`/api/file/claim/${e.fileKey}`))}}},697435:(e,r,n)=>{n.d(r,{Gh:()=>g});var a=n(329933),i=n(885123),o=n(841962),s=n(60077),l=n(697737),c=n(338584),d=n(722199),u=n(254903),m=n(421023),p=n(401562);let h=c.object({userPromptRaw:c.string(),jsx:c.string().optional(),theme:c.record(c.any()).optional(),trace:c.any().optional(),layoutJsx:c.string().optional(),v3Components:c.record(c.string()).optional(),userPrompt:c.string().optional(),userPromptFull:c.string().optional(),systemPrompt:c.string().optional()}),_=c.object({prompt_version:c.string().optional(),eval_results:c.array(h)});c.union([c.object({status:c.literal("pending")}),c.object({status:c.literal("failed")}),_.extend({status:c.literal("success")})]);let g=new class{constructor(){this.FirstDraftKitStatusSchemaValidator=(0,s.vh)(),this.FirstDraftPublishStatusSchemaValidator=(0,s.vh)(),this.FirstDraftAllKitsSchemaValidator=(0,s.vh)(),this.FirstDraftMatchGroupSchemaValidator=(0,s.vh)(),this.FirstDraftKitKeyFromLibraryKeySchemaValidator=(0,s.vh)(),this.getFirstDraftKitKeyFromLibraryKey=(0,p.n)(({libraryKey:e})=>this.FirstDraftKitKeyFromLibraryKeySchemaValidator.validate(async({xr:r})=>await r.get("/api/first_draft/kit_key_from_library_key",s.td.toAPIParameters({file_key:(0,m.U2)(i.D?.getState().selectedView),library_key:e}),{headers:this.buildHeaders()}))),this.FirstDraftMatchPresetModesSchemaValidator=(0,s.vh)(),this.FirstDraftPublishLocalKitSchemaValidator=(0,s.vh)(),this.FirstDraftGenerateThemeV5SchemaValidator=(0,s.vh)(),this.FirstDraftAllEvalSetsSchemaValidator=(0,s.vh)(),this.FirstDraftRunEvalsSchemaValidator=(0,s.vh)(),this.FirstDraftEvalStatusSchemaValidator=(0,s.vh)(),this.FirstDraftGetRetrievedExamplesSchemaValidator=(0,s.vh)()}buildHeaders(){let e={...l.Ay.defaults.headers};return u.nt.aiFeaturesUseBedrockLlama.getValue()&&(e[a.H1.CHOSEN_LLM_PROVIDER]="amazon-bedrock"),e}getFirstDraftKitStatus(){let e=(0,m.U2)(i.D?.getState().selectedView);return this.FirstDraftKitStatusSchemaValidator.validate(async({xr:r})=>await r.get(`/api/first_draft/kit_status/${e}`,null,{headers:this.buildHeaders()}))}postFirstDraftPublishStatus({productComponentKeyToVersion:e,groupedComponentKeyToVersion:r,exampleKeyToVersion:n,variableSetKeyToVersion:a,publishType:s,kitKey:l}){let c=(0,m.U2)(i.D?.getState().selectedView);return this.FirstDraftPublishStatusSchemaValidator.validate(async({xr:i})=>await i.post("/api/first_draft/kit_status",{product_components:e,grouped_components:r,examples:n,variable_sets:a,is_local:s===d.tf.LOCAL_GENERATION,kit_key:l,type_info_version:(0,o.kc)().first_draft_direct_gen?d.Rd:d.Q6,theme_info_version:d.$5,file_key:c},{headers:this.buildHeaders()}))}getFirstDraftAllKits(){let e=(0,m.U2)(i.D?.getState().selectedView),r=i.D?.getState().currentUserOrgId,n=i.D?.getState().currentTeamId,a={file_key:e};return(0,o.kc)().first_draft_show_direct_gen_kits&&(a={...a,org_id:r,team_id:n}),this.FirstDraftAllKitsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_kits",s.td.toAPIParameters(a),{headers:this.buildHeaders()}))}getFirstDraftMatchGroup(e){let r=(0,m.U2)(i.D?.getState().selectedView);return this.FirstDraftMatchGroupSchemaValidator.validate(async({xr:n})=>await n.get("/api/first_draft/match_group",s.td.toAPIParameters({file_key:r,...e}),{headers:this.buildHeaders()}))}postFirstDraftMatchPresetModes(e){let r=(0,m.U2)(i.D?.getState().selectedView);return this.FirstDraftMatchPresetModesSchemaValidator.validate(async({xr:n})=>await n.post("/api/first_draft/match_preset_modes",{kit_key:e.kit_key,is_local:e.is_local,user_prompt:e.user_prompt,file_key:r},{headers:this.buildHeaders()}))}postFirstDraftPublishLocalKit({fileKey:e,publishMetadata:r}){return this.FirstDraftPublishLocalKitSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/publish_local_kit/${e}`,{publish_metadata:r,file_key:e},{headers:this.buildHeaders()}))}postFirstDraftGenerateThemeV5({userPrompt:e,isLocal:r,kitKey:n}){let a=(0,m.U2)(i.D?.getState().selectedView);return this.FirstDraftGenerateThemeV5SchemaValidator.validate(async({xr:i})=>await i.post("/api/first_draft/generate_theme",{user_prompt:e,is_local:r,kit_key:n,file_key:a},{headers:this.buildHeaders()}))}getFirstDraftAllEvalSets(){return this.FirstDraftAllEvalSetsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_eval_sets",null,{headers:this.buildHeaders()}))}postFirstDraftRunEvals({model:e="gpt-4-turbo-2024-04-09",selectedEval:r,isLocal:n,kitKey:a,evalPrompts:i}){let o={model:e,is_local:n,kit_key:a};return i?o.eval_prompts=i:o.eval_set_id=r,this.FirstDraftRunEvalsSchemaValidator.validate(async({xr:e})=>await e.post("/api/first_draft/run_evals",o,{headers:this.buildHeaders()}))}getFirstDraftsEvalStatus({s3Key:e}){return this.FirstDraftEvalStatusSchemaValidator.validate(async({xr:r})=>await r.post("/api/first_draft/eval_status",{s3_key:e},{headers:this.buildHeaders()}))}getFirstDraftRetrievedExamples({kitKey:e,isLocal:r,prompt:n}){return this.FirstDraftGetRetrievedExamplesSchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/get_retrieved_examples",{kit_key:e,is_local:r,prompt:n},{headers:this.buildHeaders()}))}}},31314:(e,r,n)=>{n.d(r,{H:()=>i});var a=n(60077);let i=new class{constructor(){this.TemplatesSchemaValidator=(0,a.vh)(),this.StartingPointsTemplatesSchemaValidator=(0,a.vh)(),this.VersionsSchemaValidator=(0,a.vh)(),this.StatusSchemaValidator=(0,a.vh)(),this.ProfileSchemaValidator=(0,a.vh)(),this.LibrariesSchemaValidator=(0,a.vh)(),this.PublishHubFileSchemaValidator=(0,a.vh)(),this.UpdateHubFileSchemeValidator=(0,a.vh)(),this.HubFileMultiImageUploadSchemaValidator=(0,a.vh)()}getTemplates(e){return this.TemplatesSchemaValidator.validate(async({xr:r})=>await r.get("/api/hub_files/templates",{type:e.type}))}getStartingPointsTemplates(){return this.StartingPointsTemplatesSchemaValidator.validate(async({xr:e})=>await e.get("/api/hub_files/templates",{type:"starting_points"}))}getVersions(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/${e.id}/versions`))}getStatuses(e){return this.StatusSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/${e.id}/status`))}getProfile(e){return this.ProfileSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/profile/${e.profileId}`))}getLibraries(e){return this.LibrariesSchemaValidator.validate(async({xr:r})=>await r.get("/api/hub_files/libraries",{library_ids:e.libraryIds.join(",")}))}likeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.post(`/api/hub_files/${e.id}/like`))}unlikeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.del(`/api/hub_files/${e.id}/like`))}publishHubFile(e){return this.PublishHubFileSchemaValidator.validate(({xr:r})=>r.post("/api/hub_files",e))}updateHubFile(e,r){return this.UpdateHubFileSchemeValidator.validate(({xr:n})=>n.put(`/api/hub_files/${e}`,r))}setupMultiImageUploadForHubFile(e){return this.HubFileMultiImageUploadSchemaValidator.validate(({xr:r})=>r.post("/api/hub_files/upload",e))}}},386149:(e,r,n)=>{n.d(r,{G:()=>l,h:()=>s});var a=n(60077),i=n(338584),o=n(496203),s=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e))(s||{});let l=new class{constructor(){this.GuestResourcesSchemaValidator=(0,a.vh)(),this.OrgUserSchemaValidator=(0,a.YV)("OrgUserSchemaValidator",o.WU,null,!1),this.UpdateOrgUsersSchemaValidator=(0,a.YV)("UpdateOrgUsersSchemaValidator",i.array(o.WU),null,!1),this.CreateStarterTeamSchemaValidator=(0,a.vh)()}getGuestResources(e){return this.GuestResourcesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/org_user/${e.orgUserId}/guest_resources`))}updateOrgUser(e){let{id:r,changes:n}=e;return this.OrgUserSchemaValidator.validate(({xr:e})=>e.put(`/api/org_users/${r}`,a.td.toAPIParameters(n)))}updateOrgUsers(e){let{orgId:r,...n}=e;return this.UpdateOrgUsersSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.orgId}/org_users`,a.td.toAPIParameters(n)))}createStarterTeam(){return this.CreateStarterTeamSchemaValidator.validate(({xr:e})=>e.post("/api/org_user/create_starter_team"))}postOrgUserFlags(e){let{orgUserId:r,flags:n}=e;return a._5.validate(({xr:e})=>e.post(`/api/org_users/${r}/flags`,{flags:n}))}declineDevModeSuggestedUpgrades(e){return a._5.validate(async({xr:r})=>await r.del(`/api/orgs/${e.org_id}/org_users/dev_mode_suggested_upgrades`,e))}requestOrgAccountTypeRequest(e){return a._5.validate(async({xr:r})=>await r.post(`/api/orgs/${e.org_id}/org_users/request_upgrade`,e))}getMemberCSVExport(e){return a._5.validate(({xr:r})=>r.post(`/api/orgs/${e.orgId}/export_members`))}}},871290:(e,r,n)=>{n.d(r,{Eh:()=>f});var a,i=n(60077),o=n(697737),s=n(338584),l=n(293622),c=n(841924),d=n(284424),u=n(989456),m=n(813377),p=n(496203);(e=>{e.isOrgInvite=function(e){return e.type===p.Wd.ORG_INVITE},e.isOrgUser=function(e){return e.type===p.Wd.ORG_USER},e.isIdpUser=function(e){return e.type===p.Wd.IDP_USER}})(a||(a={}));let h=p.Ru.pick({id:!0,user:!0,type:!0}),_=s.discriminatedUnion("type",[p.WU,d.S,m.n]),g=s.object({users:s.array(s.union([_,h])).optional(),cursor:s.ignore(),designEditorCutoff:s.ignore().optional(),whiteboardEditorCutoff:s.ignore().optional(),devModeEditorCutoff:s.ignore().optional(),totalUserCount:s.number()}),f=new class{constructor(){this.IdpUsersSchemaValidator=(0,i.vh)(),this.LicenseGroupsSchemaValidator=(0,i.vh)(),this.BillingDataSchemaValidator=(0,i.YV)("BillingDataSchemaValidator",u.pd.nullable(),null),this.UpdateOrgSchemaValidator=(0,i.vh)(),this.TeamsSchemaValidator=(0,i.vh)(),this.TeamSchemaValidator=(0,i.vh)(),this.EligibleUpgradesFigjamSchemaValidator=(0,i.vh)(),this.OrgNameSchemaValidator=(0,i.vh)(),this.DomainsSchemaValidator=(0,i.vh)(),this.AdminsSchemaValidator=(0,i.YV)("AdminsSchemaValidator",e=>e.array(p.WU),null,!1),this.OrgUsersPaginatedSchemaValidator=(0,i.YV)("OrgUsersPaginatedSchemaValidator",g,null,!1),this.OrgUsersPaginatedSchemaValidatorPassthrough=(0,i.vh)(),this.UserSchemaValidator=(0,i.YV)("UserSchemaValidator",p.WU,null,!1),this.OauthConnectionsSchemaValidator=(0,i.vh)(),this.ShowVatGstSchemaValidator=(0,i.vh)(),this.LicenseGroupsMembersCountsSchemaValidator=(0,i.vh)(),this.WorkspaceTeamsCountsSchemaValidator=(0,i.vh)(),this.OrgUsersCountSchemaValidator=(0,i.vh)(),this.OrgUsersFilterCountsSchemaValidator=(0,i.vh)(),this.OrgTeamsFilterCountsSchemaValidator=(0,i.vh)(),this.OrgAdminsSchemaValidator=(0,i.vh)(),this.OrgAdminsQuery=c.M4.Query({fetch:async({orgId:e})=>(await this.getOrgAdmins({orgId:e})).data.meta}),this.OrgTeamsCountSchemaValidator=(0,i.vh)(),this.SetDomainCaptureSchemaValidator=(0,i.vh)(),this.EligibleUpgradesSchemaValidator=(0,i.YV)("EligibleUpgradesSchemaValidator",e=>e.object({eligible_teams:e.array(l._),eligible_team_users:e.array(l.P)}),null,!1)}getIdpUsers(e){return this.IdpUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/idp_users`))}getLicenseGroups(e){return this.LicenseGroupsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/license_groups`))}getBillingData(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.get(`/api/orgs/${e.orgId}/billing_data`);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}updateOrgPaymentMethod(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.put(`/api/orgs/${e.orgId}/billing_data`,e.paymentMethod);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}changeShippingAddress(e){return o.Ay.put(`/api/orgs/${e.orgId}`,{shipping_address:e.shippingAddress})}updateOrgRenewalCounts(e){return this.UpdateOrgSchemaValidator.validate(async({xr:r})=>await r.put(`/api/orgs/${e.orgId}/renewal_counts`,{renewal_seats:e.unassignedSeatCounts}))}getTeams(e){return this.TeamsSchemaValidator.validate(async({xr:r})=>{let{orgId:n,...a}=e;return await r.get(`/api/orgs/${e.orgId}/teams`,i.td.toAPIParameters(a))})}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/teams/${e.teamId}`))}getEligibleUpgradesFigjam(){return this.EligibleUpgradesFigjamSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrades_figjam"))}getOrgName(e){return this.OrgNameSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_name`))}getDomains(e){return this.DomainsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/domains`))}addDomainUsers(e){return o.Ay.post(`/api/orgs/${e.currentOrgId}/add_domain_users`,{user_ids:e.userIds})}getAdmins(e){return this.AdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/admins`,i.td.toAPIParameters({include_license_admins:e.includeLicenseAdmins})))}getOrgUsersPaginatedV2(e){let{orgId:r,after:n,minimalFields:a,pageSize:o,sort:s,filter:l,...c}=e;return this.OrgUsersPaginatedSchemaValidatorPassthrough.validate(async({xr:e})=>await e.get(`/api/v2/orgs/${r}/org_users`,i.td.toAPIParameters({...c,...l||{},...s||{},minimalFields:a||void 0,pageSize:o||void 0,after:n?JSON.stringify(n):void 0})))}getUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/user/${e.userId}`))}getOauthConnections(e){return this.OauthConnectionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/oauth_connections`))}getShowVatGst(e){return this.ShowVatGstSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/show_vat_gst`))}getLicenseGroupsMembersCounts(e){return this.LicenseGroupsMembersCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/license_groups/members/counts`))}getWorkspaceTeamsCounts(e){return this.WorkspaceTeamsCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/workspaces/teams/counts`))}getOrgUsersCount(e){return this.OrgUsersCountSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/count`))}getOrgUsersFilterCounts(e){return""===e.searchQuery&&delete e.searchQuery,this.OrgUsersFilterCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/filter_counts`,i.td.toAPIParameters({searchQuery:e.searchQuery,product:e.product,licenseGroupId:e.licenseGroupId,workspaceId:e.workspaceId,permission:e.permission,role:e.role,seatType:e.seatType})))}getOrgTeamsFilterCounts(e){let{orgId:r,searchQuery:n,orgAccess:a,teamsWithoutOwners:i,teamsMemberOf:o,workspaceId:s,sortBy:l,sortOrder:c}=e;return this.OrgTeamsFilterCountsSchemaValidator.validate(async({xr:e})=>{let d={search_query:n,org_access:a||void 0,teams_without_owners:i?String(i):void 0,teams_member_of:void 0!==o?JSON.stringify(o):void 0,workspace_id:s||void 0,sort_by:l,order_by:c};return await e.get(`/api/orgs/${r}/team_counts`,d)})}getOrgAdmins(e){return this.OrgAdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_admins`))}apiAutogenControls(e){let{orgId:r,autogen_password_controls:n}=e;return o.Ay.put(`/api/orgs/${r}`,{autogen_password_controls:n})}delWorkspaces(e){return o.Ay.del(`/api/orgs/${e.orgId}/workspaces`,{workspace_ids:e.workspaceIds})}validateTrial(e){return o.Ay.post(`/api/orgs/${e.orgId}/validate_trial`,{billing_trial_id:e.billingTrialId})}selfAssignWorkspace(e){return o.Ay.post(`/api/orgs/${e.orgId}/self_assign_workspace`,{workspace_id:e.workspaceId})}postDevModeOptInTermsAccepted(e){return o.Ay.post(`/api/orgs/${e.orgId}/dev_mode_terms_accepted`)}putToggleSlidesDisabled(e){return o.Ay.put(`/api/orgs/${e.orgId}/toggle_slides_disabled`,{slides_disabled:e.slidesDisabled})}updateAiDataSharing(e){return o.Ay.put(`/api/orgs/${e.orgId}/ai_data_sharing`,{enabled:e.enabled})}getOrgTeamsCount(e){return this.OrgTeamsCountSchemaValidator.validate(({xr:r})=>r.get(`/api/orgs/${e.orgId}/teams_count`))}setDomainCapture(e){return this.SetDomainCaptureSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.org_id}/domain_capture`,{enable:!0}))}getEligibleUpgrades(){return this.EligibleUpgradesSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrade_data"))}}},993027:(e,r,n)=>{n.d(r,{s:()=>o});var a=n(60077),i=n(697737);let o=new class{updateOrgPreferences(e,r){let{preferences:n,...a}=r,o={preferences:n};return e.bigma_enabled?(o.auto_run_plugin_id=a.auto_run_plugin_id,o.auto_run_enabled=a.auto_run_enabled,o.codegen_enabled=a.codegen_enabled,o.pinned_plugins_enabled=a.pinned_plugins_enabled):!1===a.pinned_plugins_enabled&&(o.pinned_plugins_enabled=!1),i.Ay.post(`/api/plugin_preferences/org/${e.id}`,o)}updateUserAutoRunPluginId(e,r){return i.Ay.put("/api/plugin_preferences/user",a.td.toAPIParameters({autoRunBehavior:r,autoRunPluginId:e}))}}},910720:(e,r,n)=>{n.d(r,{a:()=>g});var a=n(217950),i=n(550479),o=n(60077),s=n(697737),l=n(338584),c=n(91193),d=n(114391),u=n(880486),m=n(841924),p=n(7395),h=(e=>(e.HOMEPAGE="homepage",e.CATEGORY="category",e.PROFILE="profile",e.SUGGESTED_EXTENSIONS="suggested_extensions",e.RESOURCE_HUB="resource_hub",e))(h||{});let _=l.object({resource:u.Q3.optional(),private_plugin:l.ignore(p.Lz).optional()}),g=new class{constructor(){this.ResourceWithContentIDSchemaValidator=(0,o.YV)("ResourceWithContentIDSchemaValidator",_,"cmty_rdp_resource_platform",!0),this.CommunityResourcesSchemaValidator=(0,o.Rq)("CommunityResourcesSchemaValidator",u.Y9,"cmty_feed_resource_platform",!0),this.ResourcesPaginatedQuery=m.M4.PaginatedQuery({fetch:async(e,{pageParam:r})=>{try{let n=await this.CommunityResourcesSchemaValidator.validate(async({xr:n})=>{let a=o.td.toAPIParameters({sort_by:(0,c.H)(),...e,resourceType:e.resourceType&&e.resourceType.join(","),tags:e.tags&&e.tags.join(","),cursor:r});return await n.getPaginated("/api/resources",a)});return{data:n.data.meta,nextPage:n.data.pagination.nextPage,prevPage:n.data.pagination.prevPage}}catch(e){throw(0,i.$D)(a.e.COMMUNITY,e),e}}}),this.AdminResourceRecommendationsSchemaValidator=(0,o.YV)("CommunityAdminResourceRecommendationsSchema",u._s,null),this.CommunityHomeShelfContentSchemaValidator=(0,o.YV)("CommunityHomeShelfContentSchema",u.Bn,null),this.getHomeShelfContent=m.M4.Query({fetch:({seenResourceIds:e})=>this.CommunityHomeShelfContentSchemaValidator.validate(async({xr:r})=>{try{return await r.get("/api/resources/home_shelf",o.td.toAPIParameters({seenResourceIds:e?.join(",")}),{timeout:1e4})}catch(e){throw(0,i.$D)(a.e.COMMUNITY,e),e}})})}getResourceWithContentID(e){return this.ResourceWithContentIDSchemaValidator.validate(async({xr:r})=>await r.get(`/api/resources/${d.S[e.resourceType]}/${e.contentId}`))}likeResource(e){return s.Ay.post(`/api/resource/${e.resourceId}/like`)}unlikeResource(e){return s.Ay.del(`/api/resource/${e.resourceId}/like`)}saveResource(e){return s.Ay.post(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}unsaveResource(e){return s.Ay.del(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}getAdminResourceRecommendations(){return this.AdminResourceRecommendationsSchemaValidator.validate(async({xr:e})=>await e.get("/api/admin/resource/recommendations"))}}},376812:(e,r,n)=>{n.d(r,{G:()=>i});var a=n(60077);let i=new class{constructor(){this.FileUsersSchemaValidator=(0,a.vh)(),this.TeamSchemaValidator=(0,a.vh)(),this.RolesSchemaValidator=(0,a.vh)()}getFileUsers(e){return this.FileUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/file_users/${e.fileKey}`))}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/team/${e.teamId}`))}getRoles(e){return this.RolesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/${e.resourceType}/${e.resourceId}`))}}},544950:(e,r,n)=>{n.d(r,{q:()=>o});var a=n(60077),i=n(697737);n(841924).M4.Query({fetch:async e=>await o.getNumTemplatesByTeam({teamId:e.teamId,editorType:e.editorType}).then(e=>e.data.meta.total)});let o=new class{constructor(){this.RecentsSchemaValidator=(0,a.vh)(),this.TeamBrowseFromSize10SchemaValidator=(0,a.vh)(),this.SearchPaginatedSchemaValidator=(0,a.vh)(),this.TeamTemplateLimitValidator=(0,a.vh)(),this.TeamTemplateCountValidator=(0,a.vh)(),this.UploadTemplateCoverImage=(0,a.vh)(),this.UpsertTemplateValidator=(0,a.vh)()}getRecents(e){return this.RecentsSchemaValidator.validate(async({xr:r})=>await r.get("/api/templates",{org_id:e.orgId,team_id:e.teamId,file_keys:e.fileKeys}))}getTeamBrowsePaginated(e){return this.TeamBrowseFromSize10SchemaValidator.validate(async({xr:r})=>await r.get(`/api/templates/${e.orgId}/team/${e.teamId}/browse`,a.td.toAPIParameters({from:e.from,size:e.size,templateType:e.templateType})))}getSearchPaginated(e){let{orgId:r,...n}=e;return this.SearchPaginatedSchemaValidator.validate(({xr:r})=>r.get(`/api/templates/${e.orgId}/search`,a.td.toAPIParameters(n)))}getFilteredTeamTemplates(e){let{orgId:r,...n}=e;return i.Ay.post(`/api/templates/${r}/browse`,n)}getTeamTemplateLimitReached(e){return this.TeamTemplateLimitValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/limits`,a.td.toAPIParameters({editorType:e.editorType})))}getNumTemplatesByTeam(e){return this.TeamTemplateCountValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/count`,a.td.toAPIParameters({editorType:e.editorType})))}uploadTemplateCoverImage(e){return this.UploadTemplateCoverImage.validate(({xr:r})=>r.post(`/api/templates/file/${e.fileKey}/upload`))}upsertTemplate(e){let{fileKey:r,payload:n,params:i}=e;return this.UpsertTemplateValidator.validate(({xr:e})=>e.post(`/api/templates/file/${r}`,n,a.td.toAPIParameters({params:i})))}}},341541:(e,r,n)=>{n.d(r,{sr:()=>s});var a=n(281935),i=n(60077),o=n(697737);let s=new class{constructor(){this.UpdatedNotificationSchemaValidator=(0,i.vh)(),this.CommunityServerDrivenSchemaValidator=(0,i.vh)(),this.ServerDrivenPlanSchemaValidator=(0,i.vh)(),this.WebTokenRegistrationSchemaValidator=(0,i.vh)()}updateNotification(e){return this.UpdatedNotificationSchemaValidator.validate(({xr:r})=>r.put("/api/user_notifications",i.td.toAPIParameters({id:e.notification_id,currentView:e.currentView,medium:a.S8?"desktop_bell":"web",appVersion:"1",clientType:"web",["resolve"===e.notification_action?"resolvedAt":"rejectedAt"]:"true"},["currentView"])))}getCommunityServerDriven(e){return this.CommunityServerDrivenSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/community/server_driven",i.td.toAPIParameters({currentView:e.currentView,clientType:"web",appVersion:"1"},["currentView"])))}getServerDrivenPlan(e){return this.ServerDrivenPlanSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/server_driven/plan",i.td.toAPIParameters({...e,appVersion:"1",clientType:"web"},["currentView"])))}recordNotificationClicked(e){return o.Ay.post("/api/user_notification/clicked",{id:e.id,currentView:e.currentView,medium:e.medium})}enrollUserInStatusChange(e){return o.Ay.post(`/api/user_notifications/status_change_signup/${e.fileKey}`)}updateStatusChangePreferences(e){return o.Ay.post(`/api/user_notifications/status_change_optin/${e.fileKey}`,{opt_in:e.optIn})}sendFirebaseToken(e){return this.WebTokenRegistrationSchemaValidator.validate(({xr:r})=>r.post("/api/web_token_registration",i.td.toAPIParameters({firebaseToken:e.firebaseToken},[])))}}},275602:(e,r,n)=>{n.d(r,{J4:()=>i,vF:()=>a});var a=(e=>(e[e.INCLUDE=0]="INCLUDE",e[e.CHILDREN=1]="CHILDREN",e[e.OMIT=2]="OMIT",e))(a||{});function i(e){return e&&0===e.inclusion?e:void 0}},172509:(e,r,n)=>{n.d(r,{L:()=>v});var a=n(411855),i=n(188507),o=n(824536),s=n(471923),l=n(266838),c=n(556843),d=n(213312),u=n(499325),m=n(708967),p=n(265851),h=n(76265),_=n(233950),g=n(73041),f=n(110124),E=n(314540),y=n(710636),b=n(141604);let v=(0,y.Ju)(function({open:e,onClose:r}){let[n,y]=(0,f.y)(),v=(0,o.X)(),T=(0,i.d4)(e=>e.screenreader.errorType),I=(0,g.lg)(),S=(0,a.useCallback)(()=>{I===E._Y.WHITEBOARD&&b.F2.focusCustomCanvasFocusElement(),r()},[r,I]),w=s.hS({open:e,onClose:S});return a.createElement(l.bL,{manager:w,width:"md"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,(0,h.tx)("fullscreen.accessibility_settings.dialog_title"))),a.createElement(c.nB,null,a.createElement("div",{className:p.s.pb8.$},a.createElement(d.d,{disabled:"platform_error"===T,checked:n,onChange:(e,{source:r})=>{(0,m.f)(e?m.h.TOGGLE_DOM_ON_MENU:m.h.TOGGLE_DOM_OFF_MENU,{isMouseEvent:"mouse"===r}),y(e)},label:a.createElement(u.J,null,(0,h.tx)("fullscreen.accessibility_settings.enable_screenreader_label")),ref:v},"platform_error"===T?(0,h.t)("fullscreen.accessibility.platform_error"):(0,h.t)("fullscreen.accessibility_settings.enable_screenreader_description_figjam_beta"),"render_error"===T&&a.createElement("span",{role:"alert",className:p.s.block.mt8.$},a.createElement(_.E,{color:"danger"},(0,h.tx)("fullscreen.accessibility.dom_error"))))))))},"ACCESSIBILITY_SETTINGS",y.ZU.YES)},921954:(e,r,n)=>{n.d(r,{N:()=>l,Y:()=>c});var a=n(841962),i=n(875877),o=n(487192);let s="showFigmentDebugger";function l(e,r){try{if(!(0,a.kc)().internal_only_debug_tools||!(0,a.kc)().figment_debugger||null==e)return;i.atomStore.set(o.a4,{requestJsons:e,networkState:r})}catch(e){console.error("[Figment Debugger] Error tracking request")}}function c(){var e;let r=function(){try{if(null==localStorage)return!1;let e=localStorage.getItem(s);return"true"===e}catch(e){return!1}}();e=!r,localStorage.setItem(s,e?"true":"false"),i.atomStore.set(o.eE,!r)}},838200:(e,r,n)=>{var a=n(411855);n(336427),n(926996),a.createContext(null)},712204:(e,r,n)=>{n.d(r,{az:()=>ey,pw:()=>X,Ro:()=>el,w7:()=>ed,CH:()=>eu,fZ:()=>Q,rE:()=>eb,z6:()=>ec,Sw:()=>K,Pq:()=>W});var a=n(411855),i=n(629019),o=n.n(i),s=n(826943),l=n(271646),c=n(693565),d=n(76265),u=n(233950),m=n(688656),p=n(182390);let h="avatar--avatar--fFibd",_="avatar--dim--UbqLc",g="avatar--avatarWithHandle--Z3934",f="avatar--avatarWithOutwardBorder--3JJ57",E="avatar--avatarWithInwardBorder--L469R",y="avatar--clickableAvatarWithHandle--d90vX";var b=n(161143),v=n(606692),T=n(103941),I=n(380410),S=n(774283),w=n(316216),A=n(241577),C=n(311790),N=n(426431),L=n(91025),O=n(855072),R=n(175827),P=n(670658),D=n(440877),k=n(241932),M=n(420959),F=n(592526),x=n(522313),U=n(562014),B=n(266042);let V=[b.A,v.A,T.A,I.A,S.A,w.A,A.A,C.A,N.A,L.A,O.A,R.A,P.A,D.A,k.A,M.A,F.A,x.A],G=["avatar--workspaceAvatarBlue--XbbpI","avatar--workspaceAvatarPurple--FOGSP","avatar--workspaceAvatarGreen--PWm5o","avatar--workspaceAvatarTeal--4j3FH"],H=[];for(let e=0;e<V.length*G.length;e+=1){let r=e%V.length,n=V[r],a=(e+Math.floor(e/V.length))%G.length,i=G[a];H.push({svgSrc:n,className:i})}function W(e){return e.startsWith("https://www.gravatar.com/avatar/")}function K(e){return e&&!W(e)?e:void 0}let Y={CIRCLE:`${h} avatar--circle--ag36Q`,SQUARE:`${h} avatar--square--p4eL1`,ROUNDED_SQUARE:`${h} avatar--roundedSquare--cq522`};function $(e){return"number"==typeof e?{imgSize:e,fallbackSize:e}:e}class j{constructor(e,r){this.lower=e,this.upper=r}contains(e){return e>=this.lower&&e<this.upper}}let z=new j(65,91),q=new j(97,123),Z=new j(48,58);class X extends a.Component{render(){let e={display:"flex",justifyContent:"center",color:this.props.tint||(0,p.Xx)(this.props.color),backgroundColor:this.props.color||void 0,opacity:this.props.opacity},r=this.props.enabled||!0,{size:n,fontSize:i}=this.props;n&&(e.width=`${n}px`,e.height=`${n}px`,e.lineHeight=`${n}px`,e.fontSize=`${i??n/2}px`);let s=Y[this.props.shape||"CIRCLE"];return a.createElement("span",{"data-testid":this.props.dataTestId,style:e,className:o()(s,this.props.className||"",{[_]:!r,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),"aria-hidden":"true"},this.props.children)}}class J extends a.Component{render(){return a.createElement(X,{dataTestId:"initial-avatar",...this.props},this.props.initial)}}function Q(e){let r={};if(e.size&&e.svgSizeRatio){let n=e.size*e.svgSizeRatio;r.width=`${n}px`,r.height=`${n}px`}if(!e.removeCustomFill){let n=(0,p.Xx)(e.color);r.fill=n}return a.createElement(X,{...e},a.createElement("div",{style:r},a.createElement(c.B,{svg:e.svg,autosize:!0})))}class ee extends a.Component{render(){let{size:e}=this.props,r=e?`${e}px`:void 0,n=Y[this.props.shape||"CIRCLE"],i=this.props.enabled||!0;return a.createElement(c.B,{className:`${n} ${this.props.className||""} ${i?"":_}`,style:this.props.style||{},svg:this.props.src,autosize:!0,width:r,height:r,dataTestId:"svg-avatar"})}}class et extends a.Component{constructor(e){super(e),this.state={loadError:!1}}render(){let e={},r=this.props.style||{};if(this.props.size){let n=this.state.loadError?$(this.props.size)?.fallbackSize:$(this.props.size)?.imgSize,a=`${n}px`;e.width=a,e.height=a,r.width=a,r.height=a}let n=this.props.enabled||!0,i=Y[this.props.shape||"CIRCLE"],l=this.state.loadError||!this.props.imgUrl?this.props.children:a.createElement(s.oW,{"data-testid":"image-avatar",className:`${n?"":_}`,style:e,src:this.props.imgUrl,onError:()=>this.setState({loadError:!0}),alt:""});return a.createElement("div",{className:o()(i,this.props.className,{[_]:!n,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),style:r},l)}}let er=[z,q,Z],en={colors:p.us,getInitial:e=>e?e[0]:null,defaultFallbackAvatarSvg:U.A},ea=["fallback_text","handle","name","email"],ei=(e,r=en)=>class extends a.Component{constructor(){super(...arguments),this.computeFallbackInitial=()=>{let e=ep((this.props.initializableEntityProperties?this.props.initializableEntityProperties:ea).map(e=>this.props.entity[e]));return e&&"string"==typeof e?r.getInitial(e):null},this.computeFallbackColor=()=>(0,p.$L)(this.props.entity.id,r.colors)}render(){let n=this.props.fallbackInitial||this.computeFallbackInitial(),i=this.computeFallbackColor()||null,o=this.props.entity.img_url||this.props.entity.imageURL||this.props.entity.imageUrl||this.props.entity.imgUrl||null;return a.createElement(e,{imgUrl:o,fallbackInitial:n,fallbackColor:this.props.defaultFallbackAvatarSvg&&!n?null:i,fallbackTintColor:this.props.defaultFallbackAvatarSvg?void 0:r.defaultFallbackTintColor,...this.props,defaultFallbackAvatarSvg:this.props.defaultFallbackAvatarSvg||r.defaultFallbackAvatarSvg})}};class eo extends a.Component{renderFallback(){let{size:e,fontSize:r,fallbackSvg:n,avatarSvg:i,svgSizeRatio:o}=this.props,s=$(e)?.fallbackSize;if(i)return a.createElement(Q,{size:s,fontSize:r,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,svg:i,svgSizeRatio:o,opacity:this.props.opacity});if(n)return a.createElement(ee,{size:$(e)?.fallbackSize,src:n,shape:this.props.shape});if(this.props.hideFallbackInitial)return a.createElement(X,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape});let l=this.props.fallbackInitial;return l?a.createElement(J,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,initial:l,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle}):this.props.defaultFallbackAvatarSvg?a.createElement(ee,{className:this.props.className,size:$(e)?.fallbackSize,src:this.props.defaultFallbackAvatarSvg,style:{fill:this.props.fallbackTintColor||void 0,background:this.props.fallbackColor||void 0},enabled:this.props.enabled,shape:this.props.shape}):a.createElement(X,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape})}render(){return!this.props.imgUrl||W(this.props.imgUrl)?this.renderFallback():a.createElement(et,{size:this.props.size||null,imgUrl:this.props.imgUrl,className:`${this.props.className||""}`,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle},this.renderFallback())}}eo.displayName="Avatar";let es=ei(eo,{...en,getInitial:e=>{let r=e.charCodeAt(0);return er.some(e=>e.contains(r))?e[0]:null}}),el=es;function ec({entity:e,size:r=40,shape:n="SQUARE"}){if(e.imgUrl)return a.createElement(es,{shape:n,entity:e,size:r});let i=(0,p.sC)(e?.id,H);return a.createElement(ee,{src:i.svgSrc,size:r,shape:n,className:i.className})}let ed=ei(eo,{...en,defaultFallbackAvatarSvg:B.A,getInitial:e=>e.charCodeAt(0)===e.codePointAt(0)?e[0]:null});function eu(e){return a.createElement(ed,{shape:"SQUARE",...e})}class em extends a.Component{render(){let e=this.props.size||0,r=Math.round(e/4)+1,n=Math.round(r/5);return a.createElement("span",{className:"avatar--avatarBellWrapper--sd6MY",style:e?{width:`${e}px`,height:`${e}px`}:void 0},this.props.showBell&&a.createElement("div",{className:"avatar--bell--Lk6s9",style:e?{width:`${r}px`,height:`${r}px`,top:`-${n}px`,right:`-${n}px`}:void 0}),this.props.children)}}em.displayName="AvatarBellWrapper";let ep=(e=[],r="?")=>e.find(e=>e)||r,eh=(e,r)=>class extends a.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick&&this.props.onClick(e,this.props.entity)}}render(){let n=this.props["data-tooltip-proxy-element-id"]||`avatar_${this.props.entity.id}_tooltip_proxy`;return a.createElement("div",{className:`${g} ${this.props.onClick?y:""} ${this.props.enabled?"avatar--disabledDimAvatarWithHandle--5l6cM":""} ${this.props.className||""}`,onClick:this.props.onClick?this.onClick:void 0,"data-tooltip-proxy-element-id":n,"data-onboarding-key":this.props["data-onboarding-key"]},a.createElement("div",{id:n,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"],"data-tooltip-offset-y":this.props["data-tooltip-offset-y"],"data-tooltip-max-width":this.props["data-tooltip-max-width"]},e&&a.createElement(e,{...this.props,className:void 0})),a.createElement(r,{...this.props}),this.props.children)}};var e_=(e=>(e.DEFAULT="default",e.HEADING_MEDIUM="heading_medium",e))(e_||{});let eg={default:void 0,heading_medium:"avatar--labelHeadingMedium--IeX2-"};class ef extends a.Component{render(){let{labelSize:e="default"}=this.props,r=eg[e],n=this.props.showTruncatedTextTooltip?a.createElement(u.E,{truncate:!0},this.props.text):a.createElement("span",{className:"avatar--handle--wlTXK"},this.props.text),i=this.props.showTruncatedTextTooltip?void 0:this.props.tooltipText??void 0;return a.createElement("div",{className:o()("avatar--info--vDGTn",r),title:i},a.createElement("div",{className:o()("avatar--handleRow--0K2-H",g,r,{[y]:this.props.onLabelClick}),onClick:this.props.onLabelClick},this.props.text.length>0&&n,this.props.showIsMe&&a.createElement("span",{className:o()("avatar--isMe--LeNkH",r)},(0,d.tx)("avatar.tooltip.you")),this.props.badge&&a.createElement(l.Ex,{...this.props.badge}),this.props.isScimUser&&a.createElement(l.Ex,{color:l.zE.DEFAULT,text:(0,d.t)("members_table.org_user_name_cell.scim_badge")})),this.props.email&&a.createElement("div",{className:this.props.onEmailClick?"avatar--emailHover--ekuTn":"",onClick:this.props.onEmailClick},a.createElement("div",{className:"avatar--email--G3FcZ"},this.props.email)))}}let eE=e=>class extends a.Component{render(){let r=[this.props.overrideHandle,this.props.entity.handle,this.props.entity.name];this.props.fallbackToEmail&&r.push(this.props.entity.email);let n=ep(r,this.props.defaultText),i=`${n}${this.props.includeUserEmailAddress?`
${this.props.entity.email}`:""}`,{onEmailClick:o,onLabelClick:s,...l}=this.props;return a.createElement(e,{text:n,email:this.props.includeUserEmailAddress?this.props.entity.email:null,tooltipText:this.props.showTooltip?i:null,onEmailClick:o,onLabelClick:s,...l})}},ey=eh(es,eE(ef)),eb=eh(eu,eE(ef))},724813:(e,r,n)=>{n.d(r,{ER:()=>h,Id:()=>_});var a=n(411855),i=n(39890),o=n(693565),s=n(76265),l=n(365791),c=n(886756),d=n(712204),u=n(629566),m=n(813620);let p=(e,r={})=>function(n){let d=null==n.size?120:n.size,p=()=>{n.dispatch((0,l.X)({entity:n.entity,entityType:n.entityType,shape:r.editorShape?r.editorShape:void 0}))},h={width:`${d}px`,minWidth:`${d}px`,height:`${d}px`,minHeight:`${d}px`},_=n.avatarEditorState&&n.avatarEditorState.status===c.hv.UPLOADING&&n.entity===n.avatarEditorState.entity,g=r.className?r.className:u.n1,f=a.createElement(i.x,{isLoading:_,className:`${u.Lq} ${g}`},()=>a.createElement(e,{size:d,...n})),E=a.createElement("div",{className:`${g} ${n.overlayClass||""}`},a.createElement(o.B,{className:`${u.Lw} ${u.Kk} ${g} ${n.overlayClass||""}`,svg:n.icon||m.A}));return r.withButton?a.createElement("div",{className:`${u.iE} ${u.n1}`,style:h},f,E,a.createElement("div",{className:u.hc,onClick:p},(0,s.tx)("avatar_editor.edit"))):a.createElement("div",{className:`${u.iQ} ${g}`,onClick:p,style:h},f,E)},h=p(d.Ro),_=p(d.Ro,{withButton:!0});p(d.CH,{editorShape:"SQUARE",className:u.Ew}),p(d.z6,{editorShape:"SQUARE",className:u.Ew})},204326:(e,r,n)=>{n.d(r,{_:()=>o}),n(411855);var a=n(805014);n(629019),n(931223),n(294829),n(215587),n(875877),n(747484),n(640747),n(621847),n(693565),n(76265);var i=n(797187);function o(){return(0,i.ut)(a.Ez5?.uiState().editorBannerHeight,0)}n(914077),n(147742),n(794841),n(164865)},794841:(e,r,n)=>{var a=(e=>(e[e.TestThemeBanner=0]="TestThemeBanner",e[e.TestWarningBanner=1]="TestWarningBanner",e[e.TestOOMBanner=2]="TestOOMBanner",e[e.TestInfoBanner=3]="TestInfoBanner",e[e.StarterTeamOverFreeLimitAndLocked=4]="StarterTeamOverFreeLimitAndLocked",e[e.EduGracePeriodAccessRestricted=5]="EduGracePeriodAccessRestricted",e[e.EduGracePeriodShowReminder=6]="EduGracePeriodShowReminder",e[e.OrphanedOrgDraftsFile=7]="OrphanedOrgDraftsFile",e[e.TeamAbandonedDraftsFile=8]="TeamAbandonedDraftsFile",e[e.PersonalProjectDeprecatedFile=9]="PersonalProjectDeprecatedFile",e[e.ProTeamPastDue=10]="ProTeamPastDue",e[e.ProTeamChargeFailed=11]="ProTeamChargeFailed",e[e.ProTeamNoMonthlySubEditorCountExceeded=12]="ProTeamNoMonthlySubEditorCountExceeded",e[e.ProTrialsExpiryBanner=13]="ProTrialsExpiryBanner",e[e.MultiplayerSessionUpgrade=14]="MultiplayerSessionUpgrade",e[e.AdminI18nLocalWarnBanner=15]="AdminI18nLocalWarnBanner",e[e.FigJamTryDraftsBanner=16]="FigJamTryDraftsBanner",e[e.FigJamTryClaimBanner=17]="FigJamTryClaimBanner",e[e.CommunityResourceCTANuxBanner=18]="CommunityResourceCTANuxBanner",e[e.communityM10nApprovalBanner=19]="communityM10nApprovalBanner",e[e.communityM10nFinishSetupBanner=20]="communityM10nFinishSetupBanner",e[e.communityM10nAdtlInfoNeededBanner=21]="communityM10nAdtlInfoNeededBanner",e[e.communityResourceInReviewBanner=22]="communityResourceInReviewBanner",e[e.CommunityResourceCreatorBanner=23]="CommunityResourceCreatorBanner",e[e.ExternalContentControlBanner=24]="ExternalContentControlBanner",e[e.MemoryWarningBanner=25]="MemoryWarningBanner",e[e.MemoryErrorBanner=26]="MemoryErrorBanner",e[e.MemorySafeBanner=27]="MemorySafeBanner",e[e.AdminUserDisposableDomainWarningBanner=28]="AdminUserDisposableDomainWarningBanner",e[e.FileIsTeamTemplate=29]="FileIsTeamTemplate",e[e.DowntimeBanner=30]="DowntimeBanner",e[e.FreemiumPreviewBanner=31]="FreemiumPreviewBanner",e[e.FileCreationFailureBanner=32]="FileCreationFailureBanner",e[e.DevModePaywallBanner=33]="DevModePaywallBanner",e[e.DevModeInTrialBanner=34]="DevModeInTrialBanner",e[e.devModeStarterTrialBanner=35]="devModeStarterTrialBanner",e[e.DesktopDownloadBanner=36]="DesktopDownloadBanner",e[e.BrowserDeprecationBanner=37]="BrowserDeprecationBanner",e[e.FragmentTextSearchQualityBanner=38]="FragmentTextSearchQualityBanner",e[e.Gen1DesignViewerBanner=39]="Gen1DesignViewerBanner",e[e.DesktopDeprecationBanner=40]="DesktopDeprecationBanner",e[e.UI3LoggedOutCta=41]="UI3LoggedOutCta",e[e.SeatBillingTermsReminder=42]="SeatBillingTermsReminder",e[e.CooperAlphaBanner=43]="CooperAlphaBanner",e[e.CooperOldFileBanner=44]="CooperOldFileBanner",e[e.CommunityTagsUpdateNudgeBanner=45]="CommunityTagsUpdateNudgeBanner",e[e.InteropPagesBanner=46]="InteropPagesBanner",e[e.ForceClientReload=47]="ForceClientReload",e[e.UI3GlobalFileBrowserBanner=48]="UI3GlobalFileBrowserBanner",e))(a||{}),i=(e=>(e.INFO="info",e.WARN="warn",e.SUCCESS="success",e.ERROR="error",e.WARN_SOFT="warn_soft",e.CONFIDENTIALITY="confidentiality",e.BRAND_STRONG="brand_strong",e.DANGER="danger",e.INFO_SOFT="info_soft",e))(i||{}),o=(e=>(e.STRUCTURED="structured",e.CUSTOM="custom",e))(o||{})},168594:(e,r,n)=>{n.d(r,{FK:()=>g});var a,i,o=n(411855),s=n(629019),l=n.n(s),c=n(747484),d=n(597079),u=n(76265),m=n(314540),p=n(712204),h=n(132759),_=n(666169);function g(e){let r={backgroundClip:c.Ay.safari?"padding-box":""};return e.backgroundColor&&(r.backgroundColor=e.backgroundColor),o.createElement("div",{className:l()(_.nN,e.className,e.removeBorder&&h.ev),onClick:e=>{e.preventDefault()},style:r},o.createElement("div",{className:e.customRatioClassName??h.ll}),o.createElement("div",{className:h.nK},e.children))}o.memo(function(e){return o.createElement("div",{onClick:e.onClick,onContextMenu:e.onContextMenu,className:l()(_.Wg,e.containerStyle)},o.createElement("div",null,e.image),o.createElement("div",{className:e.bottomRowStyle??_.yE},e.bottomRow))}),(e=>{e.Center=function(e){return o.createElement("div",{className:_.pn},e.children)},e.Cover=function(e){return o.createElement("div",{className:_.bh},e.children)},e.BottomLeft=function(e){return o.createElement("div",{className:_.wb},e.children)},e.BottomRowRight=function(e){return o.createElement("div",{className:_.vw},e.children)}})(a||(a={})),(e=>{e.NameAndFileIconMetadata=function(e){let r=o.useMemo(()=>{switch(e.viewerMode){case m.y4.WHITEBOARD:return d.y1.WHITEBOARD;case m.y4.SLIDE_TEMPLATE:return d.y1.SLIDES;case m.y4.CANVAS:case m.y4.LIBRARY:return d.y1.DESIGN;case m.y4.PROTOTYPE:return d.y1.PROTOTYPE;default:return null}},[e.viewerMode]);return o.createElement("div",{className:`${_.QQ} ${e.className}`},o.createElement("div",{className:_.Hw},o.createElement("div",{className:e.textClassName||_.oY},e.name)),r&&o.createElement(d.MW,{type:r,size:d.LE.SMALL,className:_.kR}))},e.AvatarAndNameMetadata=function(e){let r=e.publishers&&e.publishers.length>0&&e.publishers[0];return o.createElement("div",{className:`${_.QQ} ${e.className}`},r&&o.createElement("div",{className:_.$7},o.createElement(p.Ro,{entity:r,size:32,className:_.ez})),o.createElement("div",{className:_.Hw},o.createElement("div",{className:e.textClassName||_.oY},e.name)))},e.FullMetadata=function(e){if(!e.publishers||0===e.publishers.length)return null;let r=e.publishers.length-1,n=e.publishers.length>1?(0,u.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r}):"";return o.createElement("div",{className:_.QQ,onClick:e.onClick},o.createElement("div",{className:_.$7},o.createElement(p.Ro,{entity:e.publishers[0],size:32,className:_.ez})),o.createElement("div",{className:_.Hw},o.createElement("div",{className:_.ac},e.name),o.createElement("div",{className:e.hoverText?_.Jk:_.Rb},(0,u.t)("community.cards.by")," ",e.publishers[0].name," ",n),e.hoverText&&o.createElement("div",{className:_.yG},e.hoverText)))}})(i||(i={}))},862305:(e,r,n)=>{n.d(r,{bX:()=>A});var a=n(411855),i=n(188507),o=n(557603),s=n(570446),l=n(499325),c=n(777535),d=n(841962),u=n(746643),m=n(697737),p=n(640747),h=n(621847),_=n(467218),g=n(265851),f=n(76265),E=n(419378),y=n(915749),b=n(736041),v=n(404469),T=n(710636),I=n(263474),S=n(874360),w=n(672595);let A=(0,T.Ju)(function(e){let{name:r,user:n,monetizedResource:u}=e,[p,h]=a.useState(!1),[y,T]=a.useState(null),[w,A]=a.useState(""),L=(0,i.wA)(),O=()=>{L((0,b.to)({type:C,data:{user:n}}))},R=()=>{L((0,b.to)({type:N,data:{user:n}}))};return a.createElement(S.Rw,{size:"small",content:a.createElement("div",{className:g.s.flexColumn.colorText.$},(0,f.tx)("community.buyer.we_re_sorry_to_hear_resource_name_didnt_work_out",{resourceName:a.createElement("span",{className:g.s.fontBold.$},r)}),(0,d.kc)().cmty_refund_modal_radio_input_migration?a.createElement("form",{className:g.s.my16.$},a.createElement(o.b,{value:y??void 0,onChange:e=>{T(e)},legend:a.createElement(s.q,null,(0,f.tx)("community.buyer.refund_reason"))},Object.values(v.bG).map(e=>a.createElement(o.c,{key:e,value:e,label:a.createElement(l.J,null,(0,E.vi)(e))}))),y===v.bG.OTHER?a.createElement("div",{className:g.s.mt8.$},a.createElement(I.v,{value:w,onChange:e=>A(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null):a.createElement("div",{className:g.s.my16.$},a.createElement(_.z,{value:y,onChange:e=>{T(e)}},Object.values(v.bG).map(e=>a.createElement(_.Z,{className:g.s.font11.selectNone.$,key:e,value:e},(0,E.vi)(e)))),y===v.bG.OTHER?a.createElement("div",{className:g.s.mt8.$},a.createElement(I.v,{value:w,onChange:e=>A(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null)),onConfirm:()=>{h(!0),(0,c.sx)("Request Refund Modal Confirm",{refundReason:y,refundOtherReasonText:w,monetizedResourceMetadataId:u.id}),m.Ay.post(`/api/community/buyer/${u.id}/refund`,{refund_reason:y,refund_other_reason_text:w}).then(()=>{h(!1),L(b.Ce()),O()}).catch(e=>{h(!1),L(b.Ce()),R()})},hideOnConfirm:!1,isLoading:p,confirmationTitle:(0,f.tx)("community.buyer.need_a_refund"),disableConfirm:!y,confirmText:(0,f.tx)("general.confirm"),cancelText:(0,f.tx)("general.close"),autoFocusCta:!1,popStack:!0})},"CommunityRequestRefundModal"),C=(0,T.Ju)(function(e){let{user:r}=e,n=(0,i.wA)();return a.createElement(S.Nb,{size:"small",hide:u.lQ,title:(0,f.t)("community.buyer.refund_requested")},a.createElement(p.s_,{dispatch:n}),(0,f.tx)("community.buyer.keep_an_eye_out",{here:a.createElement(h.CY,{onClick:()=>{(0,y.c9)(r),n(b.Ce())},trusted:!0},(0,f.tx)("community.buyer.here"))}),a.createElement("div",{className:w.v0},a.createElement(h.tM,{onClick:()=>n(b.Ce())},(0,f.tx)("general.close"))))},"CommunityRefundRequestedSuccessModal"),N=(0,T.Ju)(function(e){let{user:r}=e;return a.createElement(S.Rw,{size:"small",confirmationTitle:(0,f.tx)("community.buyer.unable_to_process_refund"),content:a.createElement("span",{className:g.s.colorText.$},(0,f.tx)("community.buyer.error_requesting_refund_please_contact_support")),confirmText:(0,f.tx)("community.buyer.get_support"),onConfirm:()=>(0,y.oW)(r),cancelText:(0,f.tx)("general.close"),autoFocusCta:!1})},"CommunityErrorRequestingRefundModal")},955084:(e,r,n)=>{n.d(r,{A:()=>H});var a=n(411855),i=n(188507),o=n(846288),s=n(48451),l=n(629019),c=n.n(l),d=n(777535),u=n(621847),m=n(403614),p=n(663844),h=n(265851),_=n(76265),g=n(648800),f=n(617721),E=n(233950),y=n(736041),b=n(343373),v=n(314540),T=n(841924),I=n(853701),S=n(802432),w=n(80712),A=n(954436),C=n(180990),N=n(795129),L=n(409093),O=n(207776),R=n(132208);function P({text:e}){return a.createElement(E.E,{"data-testid":"extension-security-form-error",color:"danger"},e)}function D(e){let{canShowErrors:r}=(0,C.I)();return r&&(0,I.G6)(e)}function k(e){let{onChange:r,question:n}=e,{prompt:i,value:o,placeholder:s}=n,l=D(n);return a.createElement("div",{className:h.s.flex.flexColumn.gap8.$},i&&a.createElement("div",null,function(e){let r=e.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!r||!r.index)return e;let[n,i,o]=r;return a.createElement("span",{"data-testid":"parsed-text-content"},e.slice(0,r.index),a.createElement("a",{href:o,target:"_blank",className:h.s.colorTextBrand.cursorPointer.$},i),e.slice(r.index+n.length))}(i)),a.createElement(u.ks,{className:h.s.wFull.$,value:o??"",onChange:r,placeholder:s}),l&&a.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_text")}))}function M(e){let{question:r,dispatch:n,path:i}=e,{prompt:o,options:s}=r,l=D(r);return a.createElement("div",{className:h.s.flex.flexColumn.gap16.$},a.createElement(E.E,{fontWeight:"semi-bold"},o),a.createElement(a.Fragment,null,s.map((e,r)=>{let o=`path-${i.join("-")}-option-input-${r}`;return a.createElement("div",{className:h.s.flex.flexColumn.$,key:`option-${r}`},a.createElement("div",{className:h.s.flex.gap8.$},a.createElement("input",{type:"radio",id:o,checked:e.isSelected??!1,onChange:()=>{n({type:"UPDATE_SINGLE_SELECT_QUESTION",questionIndex:i[0],optionIndex:r})},className:h.s.cursorPointer.$}),a.createElement("label",{htmlFor:o,className:h.s.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&a.createElement("div",{className:h.s.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>a.createElement(x,{key:`sub-question-${o}`,question:e,dispatch:n,path:i.concat(r,o)}))))})),l&&a.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_single_select")}))}function F(e){let{dispatch:r,path:n,question:i}=e,{prompt:o,options:s}=i,l=D(i);return a.createElement("div",{className:h.s.flex.flexColumn.gap16.$},a.createElement(E.E,{fontWeight:"semi-bold"},o),a.createElement(a.Fragment,null,s.map((e,i)=>{let o=`path-${n.join("-")}-option-input-${i}`;return a.createElement("div",{className:h.s.flex.flexColumn.$,key:`option-${i}`},a.createElement("div",{className:h.s.flex.gap8.$},a.createElement("input",{type:"checkbox",checked:e.isSelected??!1,onChange:()=>{r({type:"UPDATE_MULTI_SELECT_QUESTION",questionIndex:n[0],optionIndex:i})},id:o,className:h.s.cursorPointer.$}),a.createElement("label",{htmlFor:o,className:h.s.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&a.createElement("div",{className:h.s.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>a.createElement(x,{key:`sub-question-${o}`,question:e,dispatch:r,path:n.concat(i,o)}))))})),l&&a.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_multi_select")}))}function x(e){let{question:r,dispatch:n,path:i}=e;switch(r.inputType){case"single_select":return a.createElement(M,{question:r,dispatch:n,path:i});case"multi_select":return a.createElement(F,{question:r,dispatch:n,path:i});case"text":return a.createElement(k,{question:r,onChange:e=>{1===i.length?n({type:"UPDATE_TEXT_QUESTION",questionIndex:i[0],value:e.currentTarget.value}):3===i.length&&n({type:"UPDATE_TEXT_SUBQUESTION",path:[i[0],i[1],i[2]],value:e.currentTarget.value})},path:i});default:return null}}function U(e){let{extensionType:r,securityForm:n,dispatch:i}=e,o="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_description"):(0,_.tx)("community.publishing.security_form.widget_description"),s="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_sharing_description"):(0,_.tx)("community.publishing.security_form.widget_sharing_description");return a.createElement("div",{className:h.s.p16.flex.flexColumn.$,"data-testid":"extension-security-form"},a.createElement("div",{className:h.s.pb16.$},a.createElement(E.E,{fontSize:14,fontWeight:"medium"},(0,_.tx)("community.publishing.security_form.header"))),a.createElement("div",{className:h.s.pb16.$},o),a.createElement("div",{className:h.s.pb16.$},s,a.createElement("a",{href:"plugin"===r?"https://help.figma.com/hc/articles/360042293394":"https://help.figma.com/hc/articles/4410337103639",target:"_blank",className:h.s.colorTextBrand.cursorPointer.$},(0,_.tx)("community.publishing.security_form.learn_more"))),a.createElement("div",{className:h.s.flex.flexColumn.gap32.$},n.questions.map((e,r)=>a.createElement(x,{key:`question-${r}`,question:e,dispatch:i,path:[r]}))))}function B({onDiscard:e,onDone:r,securityFormFromDB:n,localSecurityFormResponse:o,onOptOut:l,currentFormStatus:u,extensionId:m}){let p=a.useMemo(()=>!(0,s.c2)(o,n),[o,n]),{canShowErrors:E,numberOfErrors:v,optedOutOfSecurityForm:T,extensionType:S}=(0,C.I)(),w=(0,I.qu)(n),N=(0,i.wA)(),O=(0,b.GS)();return a.createElement("div",{className:c()(h.s.flex.gap8.p16.justifyBetween.alignCenter.absolute.bottom0.left0.right0.bSolid.bt1.colorBorder.colorBg.$,{[L._]:O})},!w&&a.createElement("button",{className:h.s.bgTransparent.noWrap.if(T,h.s.colorTextSecondary,h.s.colorTextBrand.cursorPointer).$,onClick:()=>{N((0,y.to)({type:A.i,data:{onConfirm:l,status:u,extensionType:S},showModalsBeneath:!0})),(0,d.sx)("Data Security Plugin Form",{action:"Remove security details",extensionType:S,extensionId:m})},disabled:T},(0,_.tx)("community.publishing.security_form.opt_out_button")),a.createElement(g.Y,{width:"fill-parent",horizontalAlignItems:"end"},a.createElement(f.$,{variant:"secondary",onClick:()=>{e(),(0,d.sx)("Data Security Plugin Form",{action:"Discard changes",extensionType:S,extensionId:m})},disabled:!p},(0,_.tx)("community.publishing.security_form.discard_changes")),a.createElement(f.$,{variant:"primary",onClick:r,disabled:E&&v>0},(0,_.tx)("general.done"))))}function V({currentFormStatus:e}){let r,n,i;if(!e)return null;switch(e){case v.bQ.APPROVED:r=a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.approved.title"))),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.approved.description")))),n=O.A,i="success";break;case v.bQ.PENDING:r=a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.pending.title"))),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.pending.description")))),n=R.A,i="brand";break;case v.bQ.REJECTED:r=a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.rejected.title"))),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description"))),a.createElement("div",null),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description.check_email")))),n=R.A,i="brand";break;default:(0,o.xb)(e)}return a.createElement(m.z,{iconSrc:n,variant:i,orientation:"vertical"},r)}function G({localSecurityFormResponse:e,securityFormFromDB:r,setSecurityFormResponse:n,extensionType:i,onDone:o,currentFormStatus:s,existingSecurityFormResponse:l,extensionId:c}){let d={questions:r.questions,version:r.version},[u,m]=(0,a.useReducer)(N.V,e??d),{setCanShowErrors:h,setOptedOutOfSecurityForm:_,optedOutOfSecurityForm:g}=(0,C.I)();return a.useEffect(()=>{n(u),(0,I.qu)(u)||_(!1)},[n,u,_]),a.createElement(a.Fragment,null,a.createElement(p.P,{className:L.j,maxHeight:800},a.createElement(V,{currentFormStatus:s}),a.createElement(U,{securityForm:u,dispatch:m,extensionType:i})),a.createElement(B,{onOptOut:()=>{m({type:"RESET_FORM"}),_(!0)},onDiscard:()=>{m({type:"DISCARD_CHANGES",originalState:d}),h(!1)},onDone:()=>{if((0,I.wT)(e,l)&&!g){h(!0);return}o()},securityFormFromDB:r,localSecurityFormResponse:e,currentFormStatus:s,extensionId:c}))}function H(e){let{version:r,setSecurityFormResponse:n,extensionType:i,localSecurityFormResponse:o,existingSecurityFormResponse:s,onDone:l,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionId:u}=e,[m]=(0,T.IT)(W(r),{enabled:!s}),p=(0,b.GS)(),_=(s?{version:String(s.formVersion),questions:s.responses}:null)??("loaded"===m.status?m.data:null);return _?a.createElement(C.B,{localSecurityFormResponse:o,existingSecurityFormResponse:s,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionType:i},a.createElement(G,{localSecurityFormResponse:o,securityFormFromDB:_,setSecurityFormResponse:n,extensionType:i,onDone:l,currentFormStatus:s?.status??null,existingSecurityFormResponse:s,extensionId:u})):p?a.createElement("div",{className:h.s.p8.$},a.createElement(w.R,null)):null}let W=T.M4.Query({fetch:async e=>await S.is.getBlankSecurityForm(e)})},179265:(e,r,n)=>{n.d(r,{IW:()=>P,fV:()=>O,fp:()=>R});var a=n(411855),i=n(188507),o=n(609628),s=n(666308),l=n(728722),c=n(736942),d=n(250392),u=n(299009),m=n(14489),p=n(693565),h=n(76265),_=n(864986),g=n(617254),f=n(468847),E=n(959130),y=n(849331),b=n(880633),v=n(183739),T=n(2019),I=n(161857),S=n(620251),w=n(996098),A=n(639685),C=n(630834),N=(e=>(e.FILES="FILES",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e))(N||{});function L(e){return a.createElement("div",{className:w.bx},a.createElement("div",{className:w.Uz},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_title"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_title"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_title")),a.createElement("div",{className:w.SL},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_subtitle"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_subtitle"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_subtitle")))}function O(e){var r,n,s,l;let d=(0,i.d4)(e=>e.currentUserOrgId),u=(n=(0,o.lP)(d||null),s=a.useMemo(()=>{let e=n.data||[];return c.Qw.loaded(e.filter(e=>e.file?.parentOrgId===d))},[n,d]),l=e.editorTypes,r=a.useMemo(()=>{if(!l||0===l.length)return s;let e=s.data||[];return c.Qw.loaded(e.filter(e=>e.file?.editorType!=null&&l.includes(e.file.editorType)))},[s,l]),a.useMemo(()=>"loaded"!==r.status?[]:r.data.flatMap(e=>null!==e.file?[{type:E.nb.FILE,file:{...e.file,signedPreviewThumbnailUrls:null,UserFileRecentAny:{actionAt:e.actionAt}},sharedWithYouFields:null}]:[]),[r]));return 0===u.length?a.createElement(L,{tab:"FILES"}):a.createElement("div",{className:w.Vg,onClick:e.deselectActiveFile},u.map(r=>{if(r.type!==E.nb.FILE)return null;let{file:n}=r;return e.filterFn&&!e.filterFn(n)?null:a.createElement(D,{key:n.key,file:n,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})}))}function R({activeSearchQuery:e,activeFileKey:r,setActiveFile:n,deselectActiveFile:o,searchResults:s,editorTypes:c}){let d=(0,y.FC)(),m=(0,i.d4)(e=>e.authedProfilesById),p=(0,i.d4)(e=>e.figFileDuplicatedFromHubFile),g=a.useMemo(()=>(s||[]).map(({model:{key:e}})=>({key:e})),[s]),E=(0,l.p)(v.dDF,g),T=a.useMemo(()=>E.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[E]);if(!s)return a.createElement("div",{className:w.g4},a.createElement(u.kt,{size:"small"}));let I=s.filter((e,r)=>e.model.editorType&&(void 0===c||c?.includes(e.model.editorType))&&!(0,f.JJ)(b.F.toSinatra(e.model),T[r].unwrapOr(!1),{...d,authedProfilesById:m,figFileDuplicatedFromHubFile:p},null));return 0===I.length?a.createElement("div",{className:w.bx},a.createElement("div",{className:w.Uz},(0,h.tx)("community.universal_posting_modal.recent_editable_files_search.no_files_matching",{searchQuery:a.createElement("span",{className:w.ZF},e)}))):a.createElement("div",{className:w.Vg,onClick:o},I.map(e=>{let i=e.model,o=i.hub_file&&(0,_.r7)(i.hub_file);return a.createElement(D,{key:i.key,file:i,disabled:o,setActiveFile:n,activeFileKey:r})}))}function P(e){let{query:r,setQuery:n,setSearchResults:o,hasCloseButton:l=!0}=e,c=(0,i.wA)(),u=a.useCallback(()=>{r&&(c(g.Dy({entryPoint:"community:universal_posting"})),o(null),I.$W.getFigFiles({query:r,desc:!0,sort:T.Lk.RELEVANCY,orgId:void 0,isGlobal:!0}).then(({data:{meta:e}})=>{o(e.results.map(e=>({...e,model:{...b.F.toLiveGraph(e.model),fileRepo:e.model.file_repo,fragments:e.model.fragments,owner:e.model.owner}})))}))},[r,c,o]),_=a.useCallback(()=>{n("")},[n]),f=a.useCallback(e=>(e.keyCode===s.Uz.ENTER&&u(),!0),[u]),E=a.useCallback(e=>{n(e)},[n]);a.useEffect(()=>{let e=setTimeout(u,300);return()=>clearTimeout(e)},[r,u]);let y=a.useRef(null),{searchInputRef:v,onMouseDown:S,onMouseUp:N,onBlur:L,onClearSearchClick:O,onSearchKeyDown:R,onSearchChange:P}=(0,m.ne)({...e,focusOnMount:!1,clearSearch:_,onChange:E,onSubmit:u,isKeyDownHandled:f},y);return a.createElement("div",{className:w.Tm},a.createElement(p.B,{className:w.qc,svg:A.A}),a.createElement(d.L,{ref:v,placeholder:e.placeholderText??(0,h.t)("community.universal_posting_modal.search_bar.placeholder"),className:w.Rt,value:r,onMouseDown:S,onMouseUp:N,onBlur:L,onChange:P,onKeyDown:R,spellCheck:!1}),!!r&&l&&a.createElement(p.B,{className:w.i3,svg:C.default,onClick:O}))}function D(e){let{file:r,disabled:n,setActiveFile:i,activeFileKey:o}=e,s=a.useMemo(()=>b.F.toSinatra(r),[r]);return a.createElement(S.GQ,{onClick:e=>{e.stopPropagation(),n||i(r)},file:s,subtitle:a.createElement(S.lJ,{file:s}),activeFileUsers:[],currentUser:null,isSelected:!n&&o===r.key,disabled:n,tooltipText:n?(0,h.t)("community.publishing.this_file_has_been_published_to_community_as_a_library"):void 0})}},831665:(e,r,n)=>{n.d(r,{Qi:()=>g,U6:()=>f});var a=n(411855),i=n(188507),o=n(163773),s=n(666308),l=n(522725),c=n(47795),d=n(421023),u=n(712204),m=n(460280);let p={underline:m.ah,noUnderline:m.HU};class h extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)||this.props.openInNewTab){o.Ay.redirect(this.props.hrefPath||"","_blank");return}let r=_(this.props);this.props.dispatch(c.$T(r))}}render(){let e={...this.props.publisher,img_url:this.props.publisher.img_urls["120_120"]},r=a.createElement(a.Fragment,null,this.props.showAvatar&&a.createElement("div",{className:this.props.avatarClassName||m.Du},a.createElement(u.Ro,{size:this.props.avatarSize||32,entity:e})),!this.props.hideName&&a.createElement("span",{className:this.props.childrenClassName||m.fh},this.props.publisher.name));return a.createElement("div",{className:`${this.props.className||""}`},this.props.disabled?a.createElement("span",{className:this.props.childrenClassName||m.oY},r):a.createElement("a",{href:new l.xn({profileHandle:this.props.publisher.profile_handle}).href,className:this.props.childrenClassName||this.props.authorLinkStyle,onClick:this.onClick},r))}}let _=e=>({view:"communityHub",subView:"handle",handle:e.publisher.profile_handle}),g=(0,i.Ng)((e,r)=>{let n=_(r);return{hrefPath:(0,d.Np)(e,n),authorLinkStyle:p.underline}})(h);function f(e){let r=(0,i.wA)(),n={view:"communityHub",subView:"handle",handle:e.profile.profile_handle},u=(0,i.d4)(e=>(0,d.Np)(e,n));return a.createElement("a",{href:new l.xn({profileHandle:e.profile.profile_handle}).href,className:m.M2,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)){o.Ay.redirect(u||"","_blank");return}r(c.$T(n))}},e.children)}(0,i.Ng)((e,r)=>({hrefView:_(r),hrefPath:(0,d.Np)(e,_(r)),authorLinkStyle:p.underline}))(h)},249241:(e,r,n)=>{n.d(r,{T:()=>b});var a=n(411855),i=n(188507),o=n(777535),s=n(512729),l=n(746643),c=n(640747),d=n(621847),u=n(76265),m=n(736041),p=n(241162),h=n(176160),_=n(15092),g=n(710636),f=n(874360),E=n(532065),y=n(432911);let b=(0,g.Ju)(function({onAgree:e}){let r=(0,i.wA)(),n=(0,_.iZ)(),g=(0,h.q5)();!function(){let e=(0,_.iZ)(),r=(0,h.q5)();(0,s.h)(()=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_displayed",{userId:e?.id??void 0,fileTeamId:r?.teamId??void 0,fileParentOrgId:r?.parentOrgId??void 0,fileKey:r?.key,asyncModal:!1})})}();let b=a.useCallback(e=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_clicked",{actionType:e,userId:n?.id??void 0,fileTeamId:g?.teamId??void 0,fileParentOrgId:g?.parentOrgId??void 0,fileKey:g?.key,asyncModal:!1})},[g,n]);return a.createElement(f.Nb,{hide:l.lQ,disableClickOutsideToHide:!0,className:y.kL},a.createElement("div",{className:y.wx},(0,u.tx)("community.eula.license_agreement_v2"),a.createElement(c.s_,{onClose:()=>b("x"),dispatch:r,customStyle:{right:"4px",top:"4px"}})),a.createElement("div",{className:y.IP},a.createElement("div",{className:y.rf},a.createElement("div",{className:y.r3},(0,u.tx)("community.eula.license_agreement_preamble")),a.createElement(E.N,null))),a.createElement("div",{className:y.qr},a.createElement(d.tM,{onClick:()=>{b("decline"),r(m.Lo())},className:y.lO},(0,u.tx)("community.eula.disagree")),a.createElement(d.vd,{onClick:()=>{e(),b("accept"),r(p.b({apple_eula_accepted:!0}))},className:y.lO},(0,u.tx)("community.eula.agree"))))},"APPLE_EULA_MODAL_TYPE",g.ZU.YES)},630421:(e,r,n)=>{n.d(r,{Pn:()=>u});var a=n(411855),i=n(511445),o=n(437256),s=n(76265),l=n(303596),c=n(607529),d=n(133072);let u="seen_community_comments_compose";function m({dismissModal:e}){let r=a.useRef(null),n=a.useCallback((0,i.s)(()=>{r.current&&(r.current.style.opacity="0")},0,!0),[r]),c=a.useCallback((0,i.s)(()=>{r.current&&(r.current.style.opacity="1")},450),[r]);a.useEffect(()=>(window.addEventListener("scroll",n,!1),window.addEventListener("scroll",c,!1),()=>{window.removeEventListener("scroll",n,!1),window.removeEventListener("scroll",c,!1)}),[n,c]);let u=a.useCallback(e=>{let n=r.current;n&&(e.isIntersecting?n.style.visibility="visible":n.style.visibility="hidden")},[r]);return a.createElement(l.NJ,{targetKey:"sort-state-dropdown",dismissModal:e,width:301,display:"hidden",containerRef:r,className:d.pO},a.createElement(o.a,{onIntersectionChange:u}),a.createElement("div",{className:d.Hj},(0,s.tx)("community.onboarding.see_more_of_what_you_love")),(0,s.tx)("community.onboarding.whether_you_want_to_focus_on_creators_you_follow_discover_new_files_and_plugins_or_find_out_what_s_trending_you_can_customize_your_feed_here"))}e=>a.createElement(m,{...e}),c.q3.SELF_CONTAINED},885354:(e,r,n)=>{var a,i,o,s=n(411855),l=n(188507),c=n(28819),d=n(623817),u=n(629019),m=n.n(u);n(777535);var p=n(747484),h=n(801828),_=n(640747),g=n(918091),f=n(621847),E=n(555085),y=n(693565),b=n(132939),v=n(238795),T=n(216146),I=n(76265),S=n(187308),w=n(66683),A=n(950759),C=n(47795),N=n(736041);n(315145);var L=n(140835),O=n(648735),R=n(125682),P=n(733050),D=n(263352);n(492366);var k=n(688656),M=n(138157),F=n(929717),x=n(76237),U=n(356394),B=n(62425),V=n(616845),G=n(874360);n(646132);var H=n(190263),W=n(306325),K=n(413781),Y=n(769533),$=n(362679),j=n(13556),z=n(665150),q=n(961803),Z=n(331536),X=n(12747),J=n(237494),Q=n(215877),ee=n(551034),et=n(132623),er=n(247866),en=n(583288);let ea=class e extends s.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,shouldShowErrorModal:!1},this.isWidget=!!this.props.plugin.manifest?.containsWidget,this.onPublish=()=>{this.props.onPublishClick&&this.props.onPublishClick(this.props.plugin.localFileId)},this.onDelete=()=>{this.props.dispatch(A.qR(this.props.plugin.localFileId))},this.onClick=()=>{this.props.onTileClick?this.props.onTileClick():this.onRevealLocally()},this.onRevealLocally=()=>{(0,P.M)().openExtensionDirectory(this.props.plugin.localFileId)},this.showError=()=>{this.setState({shouldShowErrorModal:!0})},this.hideError=()=>{this.setState({shouldShowErrorModal:!1})},this.tileDropdownType=this.isWidget?e.DEVELOPMENT_PLUGIN_DROPDOWN:e.DEVELOPMENT_WIDGET_DROPDOWN,this.onContextMenu=e=>{this.props.dispatch(C.j7({type:this.tileDropdownType,data:{type:"context",localFileId:this.props.plugin.localFileId,clientX:e.clientX,clientY:e.clientY}}))},this.shouldShowContextMenu=()=>this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"context"===this.props.dropdownShown.data.type,this.shouldShowPointingDropdown=()=>null!=this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"pointing"===this.props.dropdownShown.data.type,this.onDotsClick=()=>{this.props.dispatch(C.j7({type:this.tileDropdownType,data:{type:"pointing",localFileId:this.props.plugin.localFileId}}))},this.dotsIconRef=s.createRef(),this.onMouseEnter=()=>{this.setState({isMouseOver:!0})},this.onMouseLeave=()=>{this.setState({isMouseOver:!1})}}render(){let e=s.createElement(s.Fragment,null,s.createElement(g.c$,{onClick:this.onPublish},(0,I.tx)("community.plugins.publish_new_version")),s.createElement(g.c$,{onClick:this.onRevealLocally},function(e){switch(e){case"plugins-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_plugin");case"widgets-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_widget");case"widgets-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_widget_from_manifest");case"plugins-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_plugin_from_manifest");case"plugins-menu-open-directory-mac":return(0,I.t)("fullscreen.plugins_menu.open_directory_mac");case"plugins-menu-open-directory-win":return(0,I.t)("fullscreen.plugins_menu.open_directory_win");case"plugins-menu-open-directory-vscode":return(0,I.t)("fullscreen.plugins_menu.open_directory_vscode");default:return""}}((0,D.YQ)())),s.createElement(g.wv,null),s.createElement(g.c$,{onClick:this.onDelete},(0,I.tx)("community.permissions_modal_publish_tab.footer.remove"))),{name:r,error:n}=this.props.plugin,a=this.isWidget?(0,I.t)("community.plugins.widget"):(0,I.t)("community.plugins.plugin");return s.createElement("div",{className:K.bp},s.createElement("div",{className:n?K.rS:K.el,onClick:n?this.showError:this.onClick,onContextMenu:this.onContextMenu,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n?s.createElement("div",{className:K.yd},s.createElement(v.t,{svg:er.A})):this.isWidget?s.createElement("div",{className:K.im},this.props.isPublished?s.createElement("img",{className:K.K0,src:`/community/icon?resource_type=widget&resource_id=${this.props.plugin.plugin_id}`,alt:""}):s.createElement(v.t,{svg:q.A})):s.createElement("div",{className:K.im},s.createElement(v.t,{svg:Q.A,fallbackSvg:ee.A})),s.createElement("div",{className:K.In},s.createElement("div",{className:n?K.iH:K.YG},r,this.props.isPublished?s.createElement(v.t,{svg:z.A}):null),n&&this.state.isMouseOver?s.createElement(T.o,{className:K.cV,text:"Error: "+n.text}):s.createElement(E.R,{className:K.cV,text:this.props.plugin.localFilePath.replace("/manifest.json","")})),n&&s.createElement(y.B,{className:K.rs,svg:p.Ay.mac?Z.A:X.A})),s.createElement(x.YW,{svg:$.A,fallbackSvg:j.A,className:m()(K.q6,this.shouldShowPointingDropdown()?K.Yh:""),onClick:this.onDotsClick,ref:this.dotsIconRef,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options"),selected:this.shouldShowPointingDropdown()}),this.shouldShowContextMenu()&&s.createElement(g.ms,{className:K.Gm,style:{left:this.props.dropdownShown.data.clientX,top:this.props.dropdownShown.data.clientY}},e),this.shouldShowPointingDropdown()&&s.createElement(F.Cf,{className:K.Gm,minWidth:122,targetRect:this.dotsIconRef.current.getBoundingClientRect(),propagateCloseClick:!0},e),this.state.shouldShowErrorModal&&s.createElement(G.aF,{size:"small",title:(0,I.t)("community.plugins.plugin_or_widget_issue",{resourceType:a})},s.createElement(_.s_,{...this.props}),s.createElement("div",{className:K.hM},this.props.plugin.error?this.props.plugin.error.text:n?.text),s.createElement("div",{className:K.H1},s.createElement(f.$$,{onClick:this.hideError},(0,I.tx)("general.done")))))}};function ei(e){return s.createElement("div",{className:e.containerClassName||K.x$,onContextMenu:e.onOptionsClick,onClick:e.onClick||(e=>e.preventDefault())},s.createElement(W.li.IconAndBadgeContainer,{className:K.yq},s.createElement("div",{className:K.zr},e.pluginIcon),e.showEditorTypeIcon&&s.createElement(W.li.BadgeContainer,null,s.createElement(W.dn,{editorType:e.editorType,is16x16:!0}))),s.createElement("div",{className:K.Kz},s.createElement("div",{className:K.P8},s.createElement("div",{className:K.iZ},e.title),e.titleSuffix),s.createElement("div",{className:p.rr?K.uN:K.UB},"string"==typeof e.subTitle?(0,h.$J)(e.subTitle):e.subTitle)),s.createElement("div",{className:K.Hq},s.createElement(c.d,{ref:e.optionsIconRef,onClick:e.onOptionsClick,"aria-expanded":e.isSelected,htmlAttributes:{"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options")},"aria-label":(0,I.t)("community.plugins.options"),disabled:e.disabled},s.createElement(b.U,{svg:$.A,fallbackSvg:j.A},s.createElement(d.J,null)))))}ea.DEVELOPMENT_PLUGIN_DROPDOWN="DEVELOPMENT_PLUGIN_DROPDOWN",ea.DEVELOPMENT_WIDGET_DROPDOWN="DEVELOPMENT_WIDGET_DROPDOWN",(a||(a={})).Tile=function(e){let r=(0,R.Um)(),n=r?.type===V.lD&&r.data.localFileId===e.plugin.localFileId,a=(0,l.wA)(),i=s.useRef(null);return s.createElement(s.Fragment,null,s.createElement(ei,{pluginIcon:s.createElement("div",{className:K.TM},e.plugin.error?s.createElement(y.B,{className:K.QW,svg:en.A}):s.createElement(v.t,{className:K.ft,svg:Y.A})),editorType:e.plugin.manifest.editorType||[],showEditorTypeIcon:e.showEditorTypeIcon,onOptionsClick:r=>{if(r.stopPropagation(),n){a(C.oB());return}let o=i.current;a(C.j7({type:V.lD,data:{localFileId:e.plugin.localFileId,targetRect:o.getBoundingClientRect()}}))},optionsIconRef:i,isSelected:n,title:e.plugin.name,subTitle:s.createElement(U.A,{localResource:e.plugin,publishedResource:void 0}),disabled:!1,containerClassName:e.containerClassName,onClick:e.onClick}),n&&s.createElement(V.T9,{localResource:e.plugin}))},(e=>{function r(e){if((0,w.AC)(e))return s.createElement(S.L,{height:"16"});if((0,D.Rt)(e)){let r=e.roles.org?.name;return s.createElement(y.B,{svg:J.A,className:K.kQ,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":r?(0,I.t)("community.plugins.private_for_plugin_org_name",{orgName:r}):(0,I.t)("community.plugins.private_for_plugin_org")})}if(e.roles.is_public)return s.createElement(y.B,{className:K.Ac,svg:et.A,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.published_to_community")})}e.Tile=function(e){let n=(0,R.Um)(),a=n?.type===V.lD&&n.data.pluginId===e.plugin.id&&n.data.targetRect,i=(0,l.wA)(),o=s.useRef(null),c=(0,D.uF)(e.plugin),d=(0,O.WK)(e.plugin.id),u=s.useCallback(()=>r(e.plugin),[e.plugin])();return s.createElement(s.Fragment,null,s.createElement(ei,{containerClassName:e.containerClassName,onClick:e.onClick,pluginIcon:s.createElement(M.V,{plugin:c}),editorType:c.manifest.editorType||[],showEditorTypeIcon:!0,onOptionsClick:()=>{if(a){i(C.oB());return}let r=o.current;i(C.j7({type:V.lD,data:{pluginId:e.plugin.id,targetRect:r.getBoundingClientRect()}}))},optionsIconRef:o,disabled:!!e.plugin.unpublished_at,isSelected:a,title:c.name,titleSuffix:u,subTitle:s.createElement(U.A,{localResource:d,publishedResource:e.plugin})}),a&&s.createElement(V.T9,{publishedResource:e.plugin,viewResource:()=>{i(C.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.plugin.id})),i(N.Ce())}}))},e.PluginManagementTitleBadge=r})(i||(i={})),(o||(o={})).Tile=function(e){let r=(0,D.uF)(e.plugin);return s.createElement("div",{className:e.containerClassName??K.x$},s.createElement(W.li.IconAndBadgeContainer,{className:K.yq},s.createElement("div",{className:K.zr},s.createElement(M.V,{plugin:r})),s.createElement(W.li.BadgeContainer,null,s.createElement(W.dn,{editorType:r.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:K.Kz},s.createElement(B.PE,{resource:e.plugin})))},(0,L.tf)(function({plugin:e,className:r,onClick:n}){let a=(0,D.uF)(e),i=(0,l.wA)();return s.createElement("a",{className:r||K.m6,"data-plugin-id":e.id,key:e.id,onClick:r=>{r.metaKey||(r.preventDefault(),n?.(),i(C.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.id})))},href:(0,H.ho)(e.id)},s.createElement(W.li.IconAndBadgeContainer,{className:K.yk},s.createElement("div",{className:K.A9},s.createElement(M.V,{plugin:a})),s.createElement(W.li.BadgeContainer,null,s.createElement(W.dn,{editorType:a.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:K.XV},s.createElement("div",{className:K.vc},a.name),s.createElement("div",{className:K.ar},(0,w.G8)(a,h.$J))))})},184099:(e,r,n)=>{n.d(r,{WW:()=>H});var a=n(411855),i=n(188507),o=n(846288),s=n(777535),l=n(512729),c=n(746643),d=n(597079),u=n(693565),m=n(265851),p=n(76265),h=n(456891),_=n(864986),g=n(86994),f=n(893461),E=n(47795),y=n(736041),b=n(125682),v=n(200222),T=n(314540),I=n(940795),S=n(269049),w=n(263352),A=n(492366),C=n(914077),N=n(7395),L=n(56976),O=n(689954),R=n(929717),P=n(175493),D=n(306325),k=n(569474),M=n(558011),F=n(501191);function x(e,r,n,a){(0,s.sx)("extension_opened_from_community",{extension_id:e,file_type:r,editor_type:n,searchSessionId:a})}function U(e){return a.createElement("button",{type:"button",className:k.t,onClick:e.onClick,"data-testid":e.dataTestId},a.createElement("div",{className:k.Z3},a.createElement("div",{className:m.s.w32.flex.justifyCenter.$},e.icon),a.createElement("div",{className:k.CA},e.text)),e.rightIcon)}function B(e){let r=e.fileName?e.fileName:e.playgroundFile?(0,p.t)("community.using.playground_file"):e.fileIconType===d.y1.WHITEBOARD?(0,p.t)("community.using.figjam_board"):(0,p.t)("community.using.figma_file");return a.createElement(U,{onClick:e.onClick,"data-testid":e.dataTestId,icon:a.createElement("div",{className:k.dD},a.createElement(D.Zt,{fileIconType:e.fileIconType})),text:r})}function V(e){let r=(0,g.Us)(),n=(0,i.wA)(),{files:s,resource:l,editorTypes:c}=e,u=(0,h.J)(),m=e=>{if(!e.org_id)return;let r=(0,_.qD)(l),a={extension:{pluginId:r.plugin_id,iconUrl:r.redirect_icon_url,name:r.name},isWidget:l.is_widget,orgId:e.org_id,workspaceDetails:{workspaceId:e.workspace_id,workspaceName:e.workspace_name,fileKey:e.key,fileName:e.name},openedFrom:"community",fullscreenEditorType:null};n((0,y.to)({type:P.S,data:a}))},b=e=>{x(l.id,"existing_file",(0,C.wN)(e.editor_type),u),n(f.aI({resource:l,fullscreenEditorType:e.editor_type===T._Y.DESIGN&&(0,N.Pe)(c)?C.nT.DevHandoff:(0,C.wN)(e.editor_type),fileKey:e.key,userId:e.user_id}))};return s?.length===0?null:a.createElement(a.Fragment,null,a.createElement("div",{className:k.Dh},(0,p.tx)("community.detail_view.recent_files")),a.createElement("div",{className:k.Dr},s?s.map(e=>a.createElement(B,{key:e.key,fileIconType:function(e){switch(e.editor_type){case T._Y.DESIGN:return e.last_published_at?d.y1.PUBLISHED:d.y1.DESIGN;case T._Y.WHITEBOARD:return d.y1.WHITEBOARD;case T._Y.SLIDES:return d.y1.SLIDES;case T._Y.SITES:case T._Y.COOPER:return d.y1.DESIGN;default:(0,o.xb)(e.editor_type)}}(e),fileName:e.name,onClick:()=>{n(E.oB()),e.can_run?r()&&(0,A.zF)(l)?f.s0(n,()=>b(e)):b(e):e.requests_allowed&&m(e)}})):a.createElement("div",{className:k.d1},[...Array(6)].map((e,r)=>a.createElement("div",{key:r,className:k.iM})))))}function G({hasSecondaryDropdown:e,text:r,primaryFullscreenEditorType:n,resource:o}){let s=(0,g.Us)(),l=(0,i.wA)(),c=(0,w.uF)(o),d=(0,h.J)();return a.createElement(U,{onClick:()=>{if(!e){let e=!!(c.playground_fig_file||n===C.nT.DevHandoff);x(o.id,e?"playground":"new_file",n,d),l(E.oB());let r=()=>{l(f.aI({resource:o,fullscreenEditorType:n,isPlaygroundFile:e}))};s()&&(0,A.zF)(o)?f.s0(l,r):r()}},icon:a.createElement(u.B,{svg:F.A,className:k.K1}),text:r,rightIcon:e?a.createElement(u.B,{svg:M.A,className:k.Yr}):void 0})}function H(e,r,n){let u=(0,i.wA)(),m=(0,b.Um)(),_=m?.type===W&&m.data.resourceId===e.id&&m.data.viewContext===n,g=a.memo(function({primaryFullscreenEditorType:n}){let i=(0,I.yN)({migrationGroup:S.L.GROUP_1,component:"PluginTrySwitchEditorDropdown",attribute:"figjamDisabledAt",legacy:(e,r)=>r?.figjam_disabled_at??null,migrated:(e,r)=>r?.figjamDisabledAt??null}),g=(0,h.J)(),[y,b]=a.useState();(0,l.h)(()=>{!async function(){let r=await L.C.getRecentFiles({extensionId:e.id,isWidget:!!e.is_widget});(0,s.sx)("recent_files_for_plugins_loaded",{response_count:r.data.meta.length,extension_id:e.id,searchSessionId:g}),b(r.data.meta.filter(e=>e.can_run||e.requests_allowed).slice(0,6))}()});let T=(0,w.uF)(e),A=T.manifest.editorType?.sort()??[],P=!!T.playground_file_version_id||n===C.nT.DevHandoff,D=Array.from(new Set(A.map(e=>{switch(e){case N.FW.FIGMA:case N.FW.DEV:case N.FW.INSPECT:return n===C.nT.DevHandoff?C.nT.DevHandoff:C.nT.Design;case N.FW.FIGJAM:return i?null:C.nT.Whiteboard;case N.FW.SLIDES:return C.nT.Slides;case N.FW.SITES:return null;default:(0,o.xb)(e)}}))).filter(e=>null!=e),M=D.map(r=>({displayText:(0,p.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>a.createElement(B,{fileIconType:function(e){switch(e){case C.nT.Design:return d.y1.DESIGN;case C.nT.Whiteboard:return d.y1.WHITEBOARD;case C.nT.DevHandoff:return d.y1.DESIGN;case C.nT.Slides:return d.y1.SLIDES;case C.nT.Sites:case C.nT.Cooper:case C.nT.Illustration:return d.y1.DESIGN;default:(0,o.xb)(e)}}(r),onClick:()=>{x(e.id,"new_file",r,g),u(E.oB()),u(f.aI({resource:e,fullscreenEditorType:r}))}})})),F={displayText:(0,p.t)("community.using.new_file"),className:k.pz,preventDismissOnSelected:!0,render:()=>a.createElement(G,{hasSecondaryDropdown:M.length>1,text:(0,p.t)("community.using.new_file"),primaryFullscreenEditorType:n,resource:e}),children:M.length>1?M:void 0},U={displayText:(0,p.t)("community.using.playground_file"),className:k.pz,preventDismissOnSelected:!0,render:()=>a.createElement(G,{hasSecondaryDropdown:!1,text:(0,p.t)("community.using.playground_file"),primaryFullscreenEditorType:n,resource:e})};(0,v.U3)("resize",()=>{_&&u(E.oB())});let H=(()=>{let r=[];if(void 0===y||y.length>0)r.push({displayText:"recentFiles",preventDismissOnSelected:!0,render:()=>a.createElement(V,{files:y,resource:e,editorTypes:A})});else if(!P&&D.length>1)return M;return P?r.push(U):r.push(F),r})();return a.createElement(O.j,{showPoint:!1,lean:r,className:k.qN,subMenuClassName:k._3,type:R.it.MATCH_BACKGROUND,rootAndSubmenuMaxWidth:280,minWidth:280,autoHeight:!0,onSelectItem:c.lQ,hidePointWhenContentOffScreen:!0,items:H,parentRect:m?.data.targetRect,dispatch:u})});return{dropdownIsShown:_,toggleSwitchEditorDropdown:(r,a)=>{let i=r.current?.getBoundingClientRect();i&&((void 0!==a?a:!_)?u(E.j7({type:W,data:{resourceId:e.id,viewContext:n,targetRect:i}})):u(E.oB()))},PluginTrySwitchEditorDropdown:g}}let W="PLUGIN_TRY_SWITCH_EDITOR_DROPDOWN"},245623:(e,r,n)=>{n.d(r,{KM:()=>m,YJ:()=>g,fJ:()=>_,x5:()=>p});var a=n(411855),i=n(629019),o=n.n(i),s=n(265851),l=n(76265),c=n(343373),d=n(159939),u=n(577328),m=(e=>(e.PUBLISH="publish",e.PERMISSIONS="permissions",e.DATA_SECURITY="data_security",e))(m||{});let p=["publish","data_security","permissions"],h=[{tab:p[0],title:()=>(0,l.t)("community.publishing.publish_tab"),isVisible:()=>!0},{tab:p[1],title:()=>(0,l.t)("community.publishing.data_security_tab"),isVisible:()=>!0},{tab:p[2],title:()=>(0,l.t)("community.publishing.permissions_tab"),dataOnboardingKey:d.k,isVisible:()=>!0}];function _(e){let r=(0,c.GS)();return a.createElement("div",{className:e.tab===e.selectedTab?o()(u.xR,{[u.E3]:r}):o()(u.Mf,{[u.E3]:r}),key:e.tab,role:"tab",onClick:()=>e.onClick(e.tab),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),tabIndex:0,"data-onboarding-key":e.dataOnboardingKey},e.title())}function g(e){return a.createElement("div",{className:s.s.flex.itemsCenter.$,role:"tablist"},h.map(r=>e.allowedTabs.includes(r.tab)&&r.isVisible()?a.createElement(_,{key:r.tab,selectedTab:e.selectedTab,onClick:e.onClick,tab:r.tab,title:r.title,dataOnboardingKey:r.dataOnboardingKey}):null))}},190263:(e,r,n)=>{n.d(r,{X$:()=>o,YW:()=>l,ab:()=>c,ho:()=>s,ox:()=>d});var a=n(864986),i=n(671694);function o(e,r){return(0,a.UI)({path:i.Uo.FILE,id:e,name:r})}function s(e,r){return(0,a.UI)({path:i.Uo.PLUGIN,id:e,name:r})}function l(e,r){return(0,a.UI)({path:i.Uo.WIDGET,id:e,name:r})}function c(e,r){return new URL(s(e,r),location.href).href}function d(e,r){return new URL(l(e,r),location.href).href}},749995:(e,r,n)=>{n.d(r,{H:()=>m});var a=n(411855),i=n(188507),o=n(76265),s=n(66683),l=n(747327),c=n(492366),d=n(710636),u=n(874360);let m=(0,d.Ju)(function({plugin:e}){let r,n,d,m;let p=(0,i.wA)(),h=e.is_widget?(0,o.t)("community.plugins.widget"):(0,o.t)("community.plugins.plugin"),_=()=>{p(l.et({resource:e}))};return(0,s.AC)(e)?(n=(0,o.t)("community.plugins.withdraw_from_review"),r=e.roles.org?(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission_your_resource_type_will_still_be_available_to_members_of_org_name",{resourceType:h,orgName:e.roles.org.name}):(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission",{resourceType:h}),d=(0,o.t)("community.plugins.withdraw"),m=()=>{e.roles.org?p(l.zn({pluginId:e.id,role:e.roles})):_()}):((0,c.m3)(e)?(n=(0,o.t)("community.plugins.delist_your_resource_type",{resourceType:h}),r=(0,o.t)("community.resource.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"),d=(0,o.t)("community.resource.delist")):(n=(0,o.t)("community.plugins.unpublish_resource_type",{resourceType:h}),r=(0,o.t)("community.plugins.this_action_will_cause_your_resource_type_to_disappear_current_users_will_lose_access_to_your_resource_type_immediately_you_cannot_undo_this_action_however_if_you_publish_your_resource_type_again_later_it_will_keep_its_url",{resourceType:h}),d=(0,o.t)("community.resource.unpublish")),m=_),a.createElement(u.Rw,{confirmationTitle:n,content:r,onConfirm:m,confirmText:d,size:"small",destructive:!0,disableClickOutsideToHide:!0,enableEscapeToClose:!0,popStack:!0})},"UnpublishPluginModal",d.ZU.YES)},871863:(e,r,n)=>{n(512671),n(439594),n(851169),n(777535),n(841962)},832809:(e,r,n)=>{n(512671);var a=n(338584);n(903600),n(871863),n(104728);var i=(e=>(e.GOOGLE="google",e.OPENAI="openai",e))(i||{});a.object({suggestions:a.array(a.object({propertyName:a.string().describe("Name of the property on the component that you are modifying"),propertyValue:a.string().describe("Suggested value for the property"),confidence:a.number().min(0).max(1).describe("Confidence score between 0 and 1")}))})},174389:(e,r,n)=>{n(411855),n(512671),n(439594),n(254773),n(841962),n(176160),n(832809),n(771952),n(697737),n(904703),n(104728)},694274:(e,r,n)=>{n.d(r,{fu:()=>o,xB:()=>i}),n(411855),n(245954),n(777535),n(336427),n(841962);var a=n(875877);n(807767),n(238311),n(399991),n(198136),n(911124),n(732767),n(871863),n(832809),n(174389);let i=(0,a.atom)(null),o=(0,a.atom)(void 0)},104728:(e,r,n)=>{n(805014),n(240954)},198136:(e,r,n)=>{n.d(r,{B_:()=>K,Fv:()=>Z,Pp:()=>B,Ql:()=>W,Rq:()=>en,T1:()=>ea,X9:()=>Y,Yi:()=>J,ZH:()=>Q,_P:()=>q,aO:()=>et,dl:()=>G,eM:()=>H,f3:()=>ee,fx:()=>eo,k4:()=>X,lg:()=>ei,qe:()=>M,s_:()=>es,ui:()=>z,wd:()=>j,wh:()=>P,xP:()=>$,xb:()=>V,zn:()=>U});var a=n(411855),i=n(696096),o=n(42243),s=n(338581),l=n(90812),c=n(154977),d=n(351760),u=n(246953),m=n(28542),p=n(569685),h=n(442148),_=n(759230),g=n(855403),f=n(430650),E=n(439594),y=n(805014),b=n(777535),v=n(841962),T=n(812272),I=n(76265),S=n(639215),w=n(923219),A=n(767731),C=n(968109),N=n(283293),L=n(144919),O=n(844531),R=n(626241);let P=304;var D=(e=>(e[e.DEFINITION=0]="DEFINITION",e[e.ASSIGNMENT=1]="ASSIGNMENT",e))(D||{}),k=(e=>(e[e.REGULAR=0]="REGULAR",e[e.WIDE=1]="WIDE",e[e.UNBOUNDED=2]="UNBOUNDED",e[e.RESIZABLE_SIDEBAR=3]="RESIZABLE_SIDEBAR",e))(k||{});function M(e){switch(e){case y.J0O.BOOL:return L.A;case y.J0O.NUMBER:return R.A;case y.J0O.TEXT:return N.A;case y.J0O.INSTANCE_SWAP:return C.A;case y.J0O.IMAGE:return O.A;case y.J0O.SLOT:return C.A}}let F={[y.J0O.BOOL]:{SIZE_24_SMALL:i.$,SIZE_16:o.X},[y.J0O.TEXT]:{SIZE_24_SMALL:s.e,SIZE_16:l.I},[y.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:c.y,SIZE_16:d.m},[y.J0O.NUMBER]:{SIZE_24_SMALL:i.$,SIZE_16:o.X},[y.J0O.IMAGE]:{SIZE_24_SMALL:u.s,SIZE_16:m._},[y.J0O.SLOT]:{SIZE_24_SMALL:c.y,SIZE_16:d.m}},x={[y.J0O.BOOL]:{SIZE_24_SMALL:i.$,SIZE_16:o.X},[y.J0O.TEXT]:{SIZE_24_SMALL:p.p,SIZE_16:h.T},[y.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:_.V,SIZE_16:d.m},[y.J0O.NUMBER]:{SIZE_24_SMALL:g.O,SIZE_16:f.c},[y.J0O.IMAGE]:{SIZE_24_SMALL:u.s,SIZE_16:m._},[y.J0O.SLOT]:{SIZE_24_SMALL:c.y,SIZE_16:d.m}};function U(e,r=!1){let n=((0,v.kc)().ds_variable_props_unified_ui?x:F)[e][r?"SIZE_16":"SIZE_24_SMALL"];return a.createElement(n,null)}function B(e,r,n,a){e&&(0,b.sx)("ds_component_props_def_create_modal_open",{product_component_guid:e.guid,product_component_is_state_group:e.isStateGroup,is_bottoms_up_creation:r,prop_type:y.J0O[n],source:a})}function V(e){switch(e){case y.J0O.BOOL:return(0,I.t)("design_systems.component_properties.boolean");case y.J0O.TEXT:return(0,I.t)("design_systems.component_properties.text");case y.J0O.INSTANCE_SWAP:return(0,I.t)("design_systems.component_properties.instance_swap");case y.J0O.VARIANT:return(0,I.t)("design_systems.component_properties.variant");case y.J0O.NUMBER:return(0,I.t)("design_systems.component_properties.number");case y.J0O.IMAGE:return(0,I.t)("design_systems.component_properties.image");case y.J0O.SLOT:return(0,I.t)("design_systems.component_properties.slot")}}function G(e,r){if((0,w.gl)(r))return w.oV;if((0,v.kc)().ds_variable_props_binding_vars&&r&&"object"==typeof r&&"type"in r&&r.type===y.Z_n.ALIAS||(0,v.kc)().ds_variable_props_binding_props&&r&&"object"==typeof r&&"type"in r&&r.type===y.Z_n.NODE_FIELD_ALIAS)return r;switch(e){case y.J0O.BOOL:return"true"===r;case y.J0O.IMAGE:case y.J0O.TEXT:case y.J0O.INSTANCE_SWAP:case y.J0O.NUMBER:return r;default:throw Error(`Unexpected component prop type: ${e}`)}}function H(e){switch(e){case E.RR.VISIBLE:return{defaultType:y.J0O.BOOL,types:[y.J0O.BOOL]};case E.RR.TEXT:return{defaultType:y.J0O.TEXT,types:[y.J0O.TEXT,y.J0O.NUMBER]};case E.RR.OVERRIDDEN_SYMBOL_ID:return{defaultType:y.J0O.INSTANCE_SWAP,types:[y.J0O.INSTANCE_SWAP]}}}function W(e){switch(e){case y.J0O.BOOL:return!0;case y.J0O.TEXT:return"";case y.J0O.INSTANCE_SWAP:return null;case y.J0O.VARIANT:return(0,I.t)("design_systems.states_panel.default_property_value");case y.J0O.NUMBER:return"0";case y.J0O.IMAGE:return null}}function K(e,r){switch(e){case y.J0O.INSTANCE_SWAP:return!!r;case y.J0O.TEXT||y.J0O.VARIANT:return!!r?.length;case y.J0O.NUMBER:return en(r);default:return!0}}let Y={format:e=>e?(0,I.t)("design_systems.component_properties.boolean_true"):(0,I.t)("design_systems.component_properties.boolean_false"),isEqual:(e,r)=>e===r};function $(e,r){if(!r.length)return null;let n=e(r[0]);return n&&r.every(r=>e(r)===n)?n:null}function j(e,r){if(!e.length)return null;let{backingSymbolGUID:n,backingStateGroupGUID:a}=(0,A.nD)(new Set(e),r);return a&&(0,w.hS)(a)?r.get(a):n&&(0,w.hS)(n)?r.get(n):w.oV}function z(e,r,n){return(0,S.Oo)(e,n)?y.glU.getDefaultStateForLocalStateGroup(r):y.glU.getDefaultStateForSubscribedStateGroup(r,e.default_state_key)}function q(e){if(e)try{return new URL(e).hostname}catch(e){}}var Z=(e=>(e.PILL="pill",e.ICON="icon",e))(Z||{});function X(e,r){let n;if(e.length){for(let a of e){let e=r.get(a);if(e){if(e.isInstance){let r=e.symbolId;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeInstance){let r=e.backingCodeComponent?.guid;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeLayer){if(void 0===n)n=e.guid;else if(e.guid!==n)return}}}return n}}function J(e,r){let n;if(e.length){for(let a of e){let e=r.get(a);if(!e||"INSTANCE"!==e.type)continue;let i=e.symbolId;if(!i)continue;let o=r.get(i);if(!o)continue;if(o.isLooseComponent)return;let s=o.containingStateGroupId;if(s){if(void 0===n)n=s;else if(s!==n)return}}return n}}function Q(e,r){if(!e.length)return new Set;let n=new Set(r[e[0]]?.hiddenProps);return e.reduce((e,n)=>r[n]?.hiddenProps?(0,T.iR)(e,new Set(r[n].hiddenProps)):e,n)}function ee(e,r){return e?r[e]?.componentPropDefError??y.uXg.NONE:y.uXg.NONE}function et(e,r){let n=r[e]?.defs;return n?Object.values(n).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}let er=/^[+-]?(\d+(\.\d*)?|\.\d+)$/;function en(e){if(!er.test(e))return!1;let r=parseFloat(e);return!isNaN(r)&&isFinite(r)&&""!==e.trim()}function ea(e){return en(e)?Number(parseFloat(e).toFixed(2)):(console.warn("Failed converting string to float:",e),0)}function ei(e){return isNaN(e)?(console.warn("Failed converting number to string:",e),"0"):e.toFixed(2).replace(/\.?0+$/,"")}function eo(e){if(e?.length===1)switch(e[0]){case"TEXT_DATA":return E.RR.TEXT;case"VISIBLE":return E.RR.VISIBLE;default:return}}function es(e){return a.useMemo(()=>e===y.J0O.BOOL?{variableType:y.rXF.BOOLEAN,requestedTypes:[y.rXF.BOOLEAN],variableScope:y.j0r.ALL_SCOPES}:e===y.J0O.TEXT?{variableType:y.rXF.TEXT_DATA,requestedTypes:[y.rXF.STRING],variableScope:y.j0r.TEXT_CONTENT}:e===y.J0O.NUMBER?{variableType:y.rXF.FLOAT,requestedTypes:[y.rXF.FLOAT],variableScope:y.j0r.ALL_SCOPES}:void 0,[e])}},388747:(e,r,n)=>{n.d(r,{S3:()=>f});var a=n(411855);n(188507),n(48451);var i=n(138225),o=n(721501);n(439594),n(805014),n(851169),n(955389),n(634783),n(97119),n(108982),n(841962),n(666308);var s=n(563192);n(137565),n(569969),n(663844);var l=n(132939);n(24414);var c=n(76265);n(225371),n(716192),n(524940),n(754807),n(366172),n(963993);var d=n(515662);n(427494),n(176160),n(957020);var u=n(688656);n(975760),n(263474),n(98551),n(885521),n(212983),n(453783),n(650832),n(806772),n(891720),n(442133),n(364985),n(642870);var m=n(113843),p=n(164225);n(748748),n(444769),n(991944),n(198136),n(904954),n(782196),n(491556);var h=n(893804),_=n(184037),g=n(424148);function f({value:e,onClear:r}){let n=e.value,f=(0,d.u)(n),E=(0,d.BQ)(n??void 0);return f?a.createElement("div",{className:h.gL},a.createElement("div",{className:_.K8},a.createElement(p.P,{value:f?.name,variableId:n,isStandalone:!0,thumbnailValue:E,isDeleted:(0,m.eF)(f)})),a.createElement(i.K,{onClick:()=>r(E),htmlAttributes:{"data-tooltip":(0,c.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":u.Ib.TEXT},recordingKey:s.Pt("componentPropDef","detachVariableButton"),"aria-label":(0,c.t)("design_systems.component_properties.detach_property")},a.createElement(l.U,{className:h.G9,svg:g.A,fallbackSvg:g.A},a.createElement(o.U,{className:h.G9})))):a.createElement(a.Fragment,null)}},210317:(e,r,n)=>{n.d(r,{s:()=>i});var a=n(923219);function i(e,r,n){if(!e)return{};let i={};for(let o of r){let r=e[o]?.stateVariantProps?.propertyValues;if(r)for(let e of n)e in i&&i[e]!==r[e]?i[e]=i[e]&&r[e]?a.oV:"":i[e]=r[e]||""}return i}},911124:(e,r,n)=>{n(411855),n(188507),n(805014),n(245459),n(32050),n(841962),n(923219),n(404227),n(198136),n(210317),n(904510),n(625539)},904954:(e,r,n)=>{n.d(r,{J0:()=>f,Kn:()=>I,_A:()=>v,bq:()=>w,dl:()=>A,fN:()=>g,i0:()=>S,wS:()=>N});var a=n(411855),i=n(188507);n(439594),n(805014);var o=n(32050),s=n(534294),l=n(524940),c=n(827473),d=n(77383);n(719637);var u=n(631762);n(957020);var m=n(688656),p=n(141588),h=n(401562),_=n(904510);let g=e=>["preferredValuesInstancePicker",...e],f=e=>({"data-tooltip-type":m.Ib.TEXT,"data-tooltip-show-left":!0,...(0,p.pf)(e)}),E=()=>{},y=new Promise(e=>{E=e});function b(){E(),y=new Promise(e=>{E=e})}let v=e=>`GET_MISSING_PREFERRED_PRODUCT_COMPONENTS_FOR_${e}`,T=(e,r)=>({callback:E,promise:y,resetPromise:b,loadingKey:v(e.getState().openFile?.key),callbackForComponent:r});(0,s.nF)((e,{stateGroupKeys:r,componentKeys:n,callback:a})=>{l.tL(n,r,e,T(e,a))});var I=(e=>(e.ADD="ADD",e.REMOVE="REMOVE",e))(I||{});function S(e,r){let n=(0,i.d4)(d.FZ),o=(0,i.d4)(u.c5),[s,l]=(0,a.useState)(()=>{let a=[];if("string"==typeof e){let i=(0,c.NY)(e,r,n,o);i&&a.push(i)}return a});return[s,l]}function w(e){return(0,a.useCallback)((r,n)=>{e(e=>{let a=[...e];return r.forEach(e=>{let r=(0,c.CG)(e),i=a.findIndex(e=>r===(0,c.CG)(e));i>-1&&"ADD"!==n?a.splice(i,1):-1===i&&"REMOVE"!==n&&a.push(e)}),a})},[e])}function A(e){return(0,a.useCallback)(r=>{e([...r])},[e])}let C=(0,h.n)(e=>(!!e.component_key||!!e.key)&&!e.unpublished_at);function N(e){let r=(0,i.d4)(_.Lg),n=(0,i.d4)(d.FZ),s=(0,a.useMemo)(()=>!!r&&C(n[r]??{}),[r,n]);return(0,o.k9)(()=>s?new Set(e.filter(e=>!C(e)).map(e=>e.node_id)):new Set,[s,e])}},782196:(e,r,n)=>{n(411855),n(188507),n(841962),n(563192),n(137565),n(693565),n(76265),n(354465),n(904954),n(254354)},143414:(e,r,n)=>{n.d(r,{Yc:()=>w,yQ:()=>A});var a=n(411855),i=n(188507),o=n(759230),s=n(439594),l=n(108982),c=n(563192),d=n(132939),u=n(76265),m=n(47795),p=n(736041),h=n(125682),_=n(688656),g=n(143364),f=n(848969),E=n(52673),y=n(198136),b=n(981161),v=n(904510),T=n(991660),I=n(646476);let S=e=>e.stopPropagation();function w(e,r){let n=a.useMemo(T.On,[]),i=a.useMemo(v.Ms,[]),{containingProductComponent:o,defReferencedBySelection:c,nodesHaveInstanceSublayer:d,selectionHasProductComponent:u}=(0,l.R)(a=>{let o=(0,v.Lg)(a),s=o?a.mirror.sceneGraph.get(o):null,l=i(a,r);return{containingProductComponent:s,defReferencedBySelection:n(a,e),nodesHaveInstanceSublayer:l,selectionHasProductComponent:(0,v.Ln)(a)}});return!a.useMemo(()=>!!o?.guid&&!d&&(!u||e!==s.RR.VISIBLE),[o,d,u,e])||!!c}function A({nodeField:e,defaultValue:r,guids:n}){let s=a.useRef(null),A=w(e,n),C=function(e){let r=(0,l.R)(e=>e.modalShown),n=a.useMemo(()=>(0,y.eM)(e).defaultType,[e]),i=E.sD.concat("-",e),o=(0,h.Um)(),s=!!o&&o.type===i&&o.data.nodeField===e,c=!!r&&r.type===b.n.type&&r.data?.propType===n;return s||c}(e),N=function(e,r,n,o){let s=(0,i.wA)(),c=a.useMemo(()=>(0,y.eM)(e).defaultType,[e]),d=a.useMemo(T.p1,[]),{containingProductComponent:u,hasExistingDefs:h}=(0,l.R)(r=>{let n=(0,v.Lg)(r);return{containingProductComponent:n?r.mirror.sceneGraph.get(n):null,hasExistingDefs:!!d(r,n,e).length}});return a.useCallback(()=>{if(r.current){if(h)s(m.j7({type:E.sD.concat("-",e),data:{nodeField:e,targetRect:r.current.getBoundingClientRect()}}));else{(0,y.Pp)(u,!0,c,y.Fv.ICON);let a=r.current,i=a?(0,g.cn)(a,y.wh):{};s(p.to({type:b.n,data:{prePopulatedDefaultValue:n,propType:c,refField:e,initialX:i?.x??0,initialY:i?.y??0}}))}}},[r,h,void 0,s,e,u,c,n])}(e,s,r),L=function(e){let r=a.useMemo(T.p1,[]),{hasExistingDefs:n}=(0,l.R)(n=>{let a=(0,v.Lg)(n);return{hasExistingDefs:!!r(n,a,e).length}}),i=a.useMemo(()=>(0,y.eM)(e).defaultType,[e]);return n?(0,u.t)("design_systems.component_properties.apply_component_property",{propType:(0,y.xb)(i).toLocaleLowerCase()}):(0,u.t)("design_systems.component_properties.create_component_property_of_type",{propType:(0,y.xb)(i).toLocaleLowerCase()})}(e);return A?null:a.createElement(a.Fragment,null,a.createElement("div",{ref:s},a.createElement(f.YW,{recordingKey:c.Pt("applyPropRefButton",e),selected:C,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":L,onMouseDown:S,onClick:N},a.createElement(d.U,{svg:I.A},a.createElement(o.V,null)))),a.createElement(E.Xn,{source:y.Fv.ICON,nodeField:e,defaultValue:r}))}},676395:(e,r,n)=>{n.d(r,{L:()=>et});var a=n(411855),i=n(188507),o=n(32257),s=n(138225),l=n(381329),c=n(190952),d=n(721501),u=n(967790),m=n(439594),p=n(805014),h=n(851169),_=n(629019),g=n.n(_),f=n(991458),E=n(701194),y=n(108982),b=n(841962),v=n(875877),T=n(563192),I=n(137565),S=n(918091),w=n(940521),A=n(132939),C=n(284807),N=n(76265),L=n(501391),O=n(47795),R=n(513748),P=n(963993),D=n(404227),k=n(688656),M=n(848969),F=n(891720),x=n(312565),U=n(442133),B=n(6525),V=n(261734),G=n(52673),H=n(198136),W=n(904510),K=n(991660),Y=n(488527),$=n(690710),j=n(424148),z=n(953663),q=n(733982),Z=n(660164);let X=S.ms,J=S.c$,Q="component-prop-pill-dropdown",ee=e=>{e.preventDefault(),e.stopPropagation()};function et(e){let r;let{nodeField:n,currentValue:s,instanceGUIDs:c}=e,d=(0,F.R)(),u=a.useMemo(K.en,[]),h=a.useContext(B.p),{containingProductComponentGUID:_,containingInstanceGUID:E,def:v,selectionHasInstanceSublayer:S,zombieRefNameFromSelection:R,dropdownShown:M}=(0,y.R)(e=>{let r=(0,D.Sh)(e);return{containingProductComponentGUID:(0,W.Lg)(e),containingInstanceGUID:(0,W.UR)(e),def:u(e,c??r,n),selectionHasInstanceSublayer:(0,W.PY)(e),zombieRefNameFromSelection:(0,K.pN)(e,n),dropdownShown:e.dropdownShown}}),x=(0,i.wA)(),U=a.useCallback(e=>{_&&v&&x(O.j7({type:Q,data:{position:{top:e.clientY,left:Math.min(e.clientX,window.innerWidth-(0,f.hG)(Y.uj0)/2)}}}))},[_,v,x]),j=a.useRef(null),z=G.sD.concat("-",n),Z=a.useRef(null),ee=T.rf(`propPill.${n}`,"click",()=>{!S&&v&&Z.current&&((0,b.kc)().ds_variable_props_unified_ui&&Z.current&&(n===m.RR.TEXT||n===m.RR.VISIBLE)?h?.showBindingUI(Z.current):x(O.j7({type:z,data:{nodeField:n,targetRect:Z.current.getBoundingClientRect()}})))}),et=a.useCallback(()=>{let e=v?.explicitDefID;_&&e&&(P.wr(),P.Dh([_]),x(L.n0({propDefId:e})))},[_,v,x]),es=M?.type===Q;if(!v)return null;let el=()=>{if(j.current&&Z.current)return j.current.offsetLeft+j.current.offsetWidth/2-(Z.current.offsetLeft+Z.current.offsetWidth/2)},ec=_?(0,N.t)("design_systems.component_properties.link_unlinked_property_help_text"):(0,N.t)("design_systems.component_properties.unlinked_property_help_text");v?.type===p.J0O.BOOL?r="BOOLEAN":v?.type===p.J0O.TEXT?r="STRING":v?.type===p.J0O.NUMBER&&(r="FLOAT");let ed=a.createElement(w.a,{className:g()({[$.Q_]:S,[$.LC]:!S,[$.RH]:M?.type===z,[$.YM]:v?.type===p.J0O.INSTANCE_SWAP}),onClick:ee,pillRef:Z},a.createElement("div",{ref:j},v?a.createElement(A.U,{svg:(0,H.qe)(v.type)},r?a.createElement("div",{className:$.K8},a.createElement(V.i,{type:r})):a.createElement("div",null)):a.createElement("div",{"data-testid":"zombie-prop-icon"},a.createElement(A.U,{svg:q.A},a.createElement(l.G,null)))),a.createElement("p",{className:$.Me},v?.name??R)),eu=(0,b.kc)().ds_fpl_properties_panel?a.createElement(o.o,{eventListeners:["onMouseDown"]},a.createElement("div",{className:$.V_,"data-tooltip-type":k.Ib.TEXT,"data-tooltip-offset-x":el(),"data-tooltip":v?null:ec,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0},ed)):a.createElement("div",{className:$.V_,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":k.Ib.TEXT,"data-tooltip-offset-x":el(),"data-tooltip":v?null:ec,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0},ed),em=a.createElement(er,{containingInstanceGUID:E,propDefId:v?.explicitDefID}),ep=a.createElement(en,{nodeField:n}),eh=a.createElement(ea,{nodeField:n,zombieRefNameFromSelection:R,currentValue:s}),e_=a.createElement(eo,{goToPropertyButton:em,detachPropertyButton:ep,addPropertyButton:eh,selectionHasInstanceSublayer:S,containingProductComponentGUID:_,zombieRefNameFromSelection:R}),eg=a.createElement(ei,{input:eu,ui2RefButton:e_,goToPropertyButton:em,detachPropertyButton:ep,addPropertyButton:eh,selectionHasInstanceSublayer:S,containingProductComponentGUID:_,zombieRefNameFromSelection:R,def:v,onContextMenu:U,nodeField:n}),ef=(0,b.kc)().ds_fpl_properties_panel?a.createElement(C.n.div,{className:$.t$,onContextMenu:U,"data-test-id":"component-prop-pill"},eu,e_):a.createElement(I.D8,{className:$.t$,onContextMenu:U,recordingKey:"componentPropPill",dataTestId:"component-prop-pill"},eu,e_);return a.createElement(a.Fragment,null,d?eg:ef,es&&a.createElement(X,{style:M?.data.position,positionFixed:!0},a.createElement(J,{onClick:et,recordingKey:"go-to-property"},(0,N.tx)("design_systems.component_properties.go_to_property"))),a.createElement(G.Xn,{source:H.Fv.PILL,nodeField:n,iconWidth:j?.current?j.current.getBoundingClientRect().width/2+10:void 0}))}function er(e){let{containingInstanceGUID:r,propDefId:n}=e,o=(0,i.wA)(),l=a.useCallback(()=>{r&&n&&(P.wr(),P.Dh([r]),o(L.n0({propDefId:n})))},[r,n,o]);return(0,b.kc)().ds_fpl_properties_panel?a.createElement(s.K,{onClick:l,"aria-label":(0,N.t)("design_systems.component_properties.go_to_property"),recordingKey:"selectContainingInstance",htmlAttributes:{"data-tooltip":(0,N.t)("design_systems.component_properties.go_to_property"),"data-tooltip-type":k.Ib.TEXT}},a.createElement(A.U,{svg:z.A},a.createElement(c.A,null))):a.createElement(M.K0,{className:(0,E.cx)($.x6,$.rn),svg:z.A,onClick:l,"data-tooltip":(0,N.t)("design_systems.component_properties.go_to_property"),"data-tooltip-type":k.Ib.TEXT,recordingKey:"selectContainingInstance"})}function en(e){let{nodeField:r}=e,n=a.useCallback(()=>{h.l7.user("delete-prop-ref",()=>p.glU.deleteComponentPropRef(r))},[r]),i=(0,v.useAtomValue)(R.D);return(0,b.kc)().ds_fpl_properties_panel?a.createElement(s.K,{onClick:n,"aria-label":(0,N.t)("design_systems.component_properties.detach_property"),recordingKey:"deleteComponentPropRef",htmlAttributes:{"data-tooltip":(0,N.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":k.Ib.TEXT,"data-onboarding-key":x.FX}},a.createElement(A.U,{svg:j.A},a.createElement(d.U,null))):a.createElement(M.K0,{className:(0,E.cx)($.x6,"OnboardNewTextContentRowLocation"!==i&&$.rn),onClick:n,"data-tooltip":(0,N.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":k.Ib.TEXT,"data-onboarding-key":x.FX,recordingKey:"deleteComponentPropRef"},a.createElement(A.U,{svg:j.A},a.createElement(d.U,null)))}function ea(e){let{nodeField:r,zombieRefNameFromSelection:n,currentValue:i}=e,o=a.useCallback(()=>{n&&h.l7.user("add-prop-ref",()=>{switch(r){case m.RR.TEXT:p.glU.addTextComponentPropDef(n,i,r,null);break;case m.RR.VISIBLE:p.glU.addBoolComponentPropDef(n,i,r,null);break;default:throw Error(`Unexpected node field for component prop: ${r}`)}})},[r,n,i]);return(0,b.kc)().ds_fpl_properties_panel?a.createElement(s.K,{onClick:o,"aria-label":(0,N.t)("design_systems.component_properties.link_unlinked_property"),recordingKey:"addComponentPropDefFromZombieRef",htmlAttributes:{"data-tooltip":(0,N.t)("design_systems.component_properties.link_unlinked_property"),"data-tooltip-type":k.Ib.TEXT}},a.createElement(A.U,{svg:Z.A},a.createElement(u.x,null))):a.createElement(M.K0,{className:(0,E.cx)($.x6,$.rn),svg:Z.A,onClick:o,"data-tooltip":(0,N.t)("design_systems.component_properties.link_unlinked_property"),"data-tooltip-type":k.Ib.TEXT,recordingKey:"addComponentPropDefFromZombieRef"})}function ei(e){let{input:r,ui2RefButton:n,goToPropertyButton:i,detachPropertyButton:o,addPropertyButton:s,selectionHasInstanceSublayer:l,containingProductComponentGUID:c,zombieRefNameFromSelection:d,def:u,onContextMenu:h,nodeField:_}=e,f=l?a.createElement("span",{onContextMenu:ee},i):a.createElement("span",{onContextMenu:ee},o),E=!l&&c&&d?a.createElement("span",{onContextMenu:ee},s):null;return a.createElement(C.n.div,{onContextMenu:h},E?a.createElement(U.pG,{"data-test-id":"component-prop-pill",appendedClassName:g()($.t$,{[$.uZ]:u?.type===p.J0O.INSTANCE_SWAP,[$.fd]:_===m.RR.TEXT&&(0,b.kc)().ds_variable_props_unified_ui}),input:r,leftIcon:f,rightIcon:E}):a.createElement(U.DE,{dataTestId:"component-prop-pill",appendedClassName:g()($.t$,{[$.uZ]:u?.type===p.J0O.INSTANCE_SWAP,[$.fd]:_===m.RR.TEXT&&(0,b.kc)().ds_variable_props_unified_ui}),input:r,icon:n,label:null}))}function eo(e){let{goToPropertyButton:r,detachPropertyButton:n,addPropertyButton:i,selectionHasInstanceSublayer:o,containingProductComponentGUID:s,zombieRefNameFromSelection:l}=e;return a.createElement("span",{onContextMenu:ee},o?r:a.createElement("div",{className:$.UD},n,s&&l&&i))}},767158:(e,r,n)=>{n.d(r,{Ae:()=>m});var a=n(461816),i=n.n(a),o=n(302245),s=n(841962),l=n(299249),c=n(404227),d=n(904510);(0,l.P8)([d.C1,d.tO,d.S8,d.Rk,d.TJ],(e,r,n,a,i)=>i?void 0:e&&n&&e[n]?e[n].primaryInstances:(0,s.kc)().dse_editor_templates_v1&&r&&a&&r[a]?r[a].primaryInstances:void 0);let u=(0,l.P8)([c.dK,d.C1,d.tO,d.S8,d.Rk,d.TJ,d.QW],(e,r,n,a,o,l,c)=>{if(l)return;let d=[],u=new Set;if(r&&a&&r[a]){let n=e.get(a);if(!n)return;if(!n.isStateGroup||0===c.length)return i()(r[a].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)]);for(let e of c)for(let n of r[e]?.primaryInstances?.filter(e=>e.isBubbled)||[]){if(n.connectedGUIDs&&!u.has(n.connectedGUIDs[0])){for(let e of n.connectedGUIDs)u.add(e);d.push(n.connectedGUIDs)}for(let e of n.bubbledNestedInstances)if(e.connectedGUIDs&&!u.has(e.connectedGUIDs[0])){for(let r of e.connectedGUIDs)u.add(r);d.push(e.connectedGUIDs)}}return d}if((0,s.kc)().dse_editor_templates_v1&&n&&o&&n[o])return i()(n[o].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)])}),m=(0,l.P8)([d.C1,c.AF],(e,r)=>{if(!r||!r.isAlive||"INSTANCE"!==r.type)return[];let n=r.guid;return e&&n&&e[n]?e[n].bubbledNestedInstanceGUIDs?.map(e=>[e])??[]:[]});(0,o.Mz)([u,m],(e,r)=>e||r||[])},663582:(e,r,n)=>{n.d(r,{UT:()=>u,z4:()=>m});var a=n(302245),i=n(923219),o=n(404227),s=n(991660),l=n(625539);let c=(0,a.Mz)([s.W0],e=>e.length>0),d=(0,a.Mz)([l.x1],e=>e.length>0);(0,a.Mz)([c,d],(e,r)=>e||r);let u=(0,a.Mz)([o.F4],e=>{if(!e.length)return null;let r=new Set(e.map(e=>e.textContent)),[n]=r;return 1===r.size?n:i.oV});function m(){return(0,a.Mz)([(0,l.Cu)(),(0,s.Ee)()],(e,r)=>[...e,...r])}(0,a.Mz)([l.x1,s.W0],(e,r)=>[...e,...r])},904510:(e,r,n)=>{n.d(r,{C1:()=>c,Lg:()=>g,Ln:()=>D,Ms:()=>R,Nw:()=>p,PY:()=>P,QW:()=>h,Rk:()=>m,S8:()=>f,TJ:()=>O,UR:()=>S,VC:()=>_,X9:()=>A,d:()=>L,nM:()=>M,tK:()=>b,tO:()=>d,tc:()=>w,y7:()=>u});var a=n(302245);n(369010);var i=n(951927);n(923219);var o=n(827473),s=n(404227),l=n(198136);let c=e=>e.mirror.selectionProperties.componentProps,d=e=>e.mirror.selectionProperties.moduleProps,u=(0,a.Mz)([s.dK,s.Sh],k),m=(0,a.Mz)([s.dK,s.Sh],function(e,r){return(0,l.xP)(r=>e.get(r)?.containingModuleId,r)??void 0}),p=(0,a.Mz)([s.dK,s.Sh],M),h=(0,a.Mz)([s.dK,s.Sh],(e,r)=>{let n=new Set;for(let a of r){let r=e.get(a)?.containingSymbolId;r&&n.add(r)}return Array.from(n)}),_=()=>(0,a.Mz)([s.dK,(e,r)=>r],(e,r)=>M(e,r)??k(e,r)),g=(()=>{let e=_();return r=>e(r,(0,s.Sh)(r))})(),f=(0,a.Mz)([u,p],(e,r)=>e??r),E=()=>(0,a.Mz)([(e,r)=>r,s.dK],(e,r)=>{let n=(0,i.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.LI)(n)});for(let a of e){let e=r.get(a),i=e?.containingStateGroupId??e?.containingSymbolId;if(i&&i!==n)return}return n??void 0}),y=()=>(0,a.Mz)([(e,r)=>r,s.dK],(e,r)=>(0,i.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.FS)(n)})??void 0);(()=>{let e=E();return r=>e(r,(0,s.Sh)(r))})();let b=()=>(0,a.Mz)([_(),E()],(e,r)=>e??r),v=()=>(0,a.Mz)([y()],e=>e),T=(()=>{let e=b();return r=>e(r,(0,s.Sh)(r))})();(0,a.Mz)([T,s.dK],(e,r)=>e?r.get(e):null);let I=(()=>{let e=v();return r=>e(r,(0,s.Sh)(r))})();(0,a.Mz)([I,s.dK],(e,r)=>e?r.get(e):null);let S=(0,a.Mz)([c,s.Sh],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstance,r)??void 0}),w=()=>(0,a.Mz)([c,(e,r)=>r],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstanceBackingSymbol,r)??void 0}),A=()=>(0,a.Mz)([c,s.dK,(e,r)=>r],(e,r,n)=>{if(!e)return;let a=n.map(r=>e[r]?.containingInstance||r);return F(e,a,r)}),C=(0,a.Mz)([c,s.Sh],(e,r)=>{if(e)return x(e,r)}),N=(0,a.Mz)([c,s.Sh,s.dK],(e,r,n)=>{if(e)return F(e,r,n)}),L=()=>(0,a.Mz)([c,(e,r)=>r,s.dK],(e,r,n)=>{if(!e)return;let a=[];for(let e of r){let r=n.get(e);if(!r||r.isLooseComponent||r.isState||r.isStateGroup)return;r.symbolId&&a.push(e)}return F(e,a,n)??x(e,a)}),O=(0,a.Mz)([N,C],(e,r)=>r??e),R=()=>(0,a.Mz)([s.dK,(e,r)=>r],(e,r)=>r.some(r=>e.get(r)?.isInstanceSublayer??!1)),P=(()=>{let e=R();return r=>e(r,(0,s.Sh)(r))})(),D=(0,a.Mz)([s.F4],e=>e.some(e=>"SYMBOL"===e.type||!!e.isStateGroup));function k(e,r){return(0,l.xP)(r=>e.get(r)?.containingSymbolId,r)??void 0}function M(e,r){return(0,l.xP)(r=>e.get(r)?.containingStateGroupId,r)??void 0}function F(e,r,n){return(0,l.xP)(r=>{let a=e[r]?.backingSymbol;if(a)return n.get(a)?.containingStateGroupId},r)??void 0}function x(e,r){return(0,l.xP)(r=>e[r]?.backingSymbol??e[r]?.containingInstanceBackingSymbol,r)??void 0}(0,a.Mz)([s.F4],e=>e.every(e=>"SYMBOL"===e.type||"INSTANCE"===e.type||!!e.isSymbolSublayer||!!e.isInstanceSublayer))},991660:(e,r,n)=>{n.d(r,{Ee:()=>N,On:()=>S,Tn:()=>w,W0:()=>y,en:()=>T,p1:()=>v,pN:()=>b,vS:()=>C});var a=n(805014),i=n(302245),o=n(299249),s=n(972142),l=n(76265),c=n(923219),d=n(40896),u=n(404227),m=n(198136),p=n(806772),h=n(904510);let _=(0,o.P8)([h.C1,(e,r)=>r],(e,r)=>e&&r&&e[r]?.defs||{}),g=(0,o.P8)([h.C1,h.Lg],(e,r)=>e&&r?e[r]?.defs??{}:{}),f=(0,o.P8)([g],e=>Object.values(e).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1).map(e=>e.name)),E=()=>(0,o.P8)([h.C1,(0,h.tK)(),(0,h.d)()],(e,r,n)=>{let a=n??r;return e&&a?Object.values(e[a]?.defs||{}).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}),y=(()=>{let e=E();return r=>e(r,(0,u.Sh)(r))})(),b=(0,i.Mz)([h.C1,u.Sh,(e,r)=>r],(e,r,n)=>{if(e)return(0,m.xP)(r=>{let a=e[r]?.refs?.[n];if(a?.isLinked===!1)return a.fallbackName},r)??void 0});function v(){return(0,o.P8)([_,(e,r,n)=>n],(e,r)=>{let n=(0,m.eM)(r).types,a=Object.values(e).filter(({type:e})=>n.includes(e));return(0,s.DV)(a,e=>e.name.toLocaleLowerCase()),a})}let T=()=>(0,i.Mz)([h.C1,(0,h.VC)(),(0,h.tc)(),(0,h.X9)(),(e,r,n)=>r,(e,r,n)=>n],(e,r,n,a,i,o)=>{if(!e)return null;if(r){let n=(0,m.xP)(r=>{let n=e[r]?.refs?.[o];if(n?.isLinked)return n.explicitDefID},i);if(n)return e[r]?.defs?.[n]||null}let s=I(e,i,o);return s&&n?e[n]?.defs?.[s]||null:s&&a&&e[a]?.defs?.[s]||null}),I=(e,r,n)=>{let a=[];for(let n of r){let r=e[n]?.correspondingSymbolSublayer;if(!r)return null;a.push(r)}return(0,m.xP)(r=>{let a=e[r]?.refs?.[n];if(a?.isLinked)return a.explicitDefID},a)};function S(){let e=T();return(r,n)=>e(r,(0,u.Sh)(r),n)}let w=()=>(0,i.Mz)([h.C1,(e,r,n)=>r,(e,r,n)=>n],(e,r,n)=>{if(!e)return!1;let a=[];for(let n of r){a.push(n);let r=e[n]?.correspondingSymbolSublayer;r&&a.push(r)}return a.some(r=>e[r]?.refs?.[n]!==void 0)}),A=()=>(0,o.P8)([h.C1,u.dK,(e,r)=>r],(e,r,n)=>{if(!e||0===n.length)return{};let a=(0,m.k4)(n,r),i=(0,m.Yi)(n,r)??a;if(!i)return{};let o=Object.keys(e[i]?.defs??{});if(0===o.length)return{};let s={};for(let a of o){let i=null;for(let o of n){let n=r.get(o);if(n?.type!=="INSTANCE")continue;let s=e[n.guid]?.assignments;if(!s)continue;let l=s[a];if(null!=l){if(l.isMixed){i={isMixed:!0};break}if(null===i)i={isMixed:!1,value:l.value};else if(i.value!==l.value){i={isMixed:!0};break}}}i&&(s[a]=i)}return s}),C=(0,i.Mz)([(e,r)=>r,(e,r,n)=>n,f,u.AF],(e,r,n,i)=>{if(e===a.J0O.BOOL&&r){let e=i?.name?(0,l.t)("design_systems.component_properties.boolean_property_default_name",{selectedNodeName:i.name}):(0,l.t)("design_systems.component_properties.boolean_property_default_name_fallback",{numSelected:i?1:2});return(0,d.g)(e,n)}if(e===a.J0O.NUMBER&&r){let e=(0,l.t)("design_systems.component_properties.number_property_default_name");return(0,d.g)(e,n)}{let r=e===a.J0O.INSTANCE_SWAP?(0,l.t)("design_systems.component_properties.instance_swap_property_default_name"):(0,m.xb)(e);return(0,d.g)(r,n)}});function N(){return(0,o.P8)([u.dK,E(),A(),h.C1,(e,r)=>r],(e,r,n,i,o)=>{if(!i)return[];let s=(0,m.ZH)(o,i);return r.filter(e=>!s.has(e.explicitDefID)).map(r=>{let i=r.defaultValue;if(null!=n[r.explicitDefID]){let e=n[r.explicitDefID];i=e?e.isMixed?c.oV:null==e.value?p.xJ:e.value:p.xJ}if(r.type===a.J0O.INSTANCE_SWAP&&i!==p.xJ&&i!==c.oV){let r=(0,m.wd)([i],e);i=r&&(0,c.hS)(r)?r.name:p.xJ}return{name:r.name,value:i,type:r.type}})})}},625539:(e,r,n)=>{n.d(r,{Cu:()=>g,YH:()=>y,x1:()=>E});var a=n(439594),i=n(805014),o=n(302245),s=n(299249),l=n(76265),c=n(923219),d=n(40896),u=n(404227),m=n(198136),p=n(210317),h=n(806772),_=n(904510);function g(){return(0,s.P8)([h.uL,_.C1,u.dK,(e,r)=>r],(e,r,n,a)=>{if(!r||0===a.length)return[];let o=(0,m.Yi)(a,n)??(0,_.nM)(n,a);if(!o||a.includes(o))return[];let s=r[o]?.stateGroupVariantProps;if(!s)return[];let d=(0,p.s)(r,a,s.propertySortOrder);return(s.propertySortOrder||[]).map(e=>{let r=!function(e){if(2===e.length){let r=e.map(e=>e.toLowerCase());for(let e of h.NE){let n=r.indexOf(e[0]),a=r.indexOf(e[1]);if(-1!==n&&-1!==a)return!0}}return!1}(s.propertyValues[e])?i.J0O.VARIANT:i.J0O.BOOL,n=d[e]||h.xJ;return(0,c.gl)(n)?{name:e,value:(0,l.t)("inspect_panel.property.mixed"),type:r}:{name:e,value:n,type:r}})})}let f=()=>(0,s.P8)([_.C1,(0,_.tK)(),(0,_.d)()],(e,r,n)=>{if(!e)return[];let o=n??r;return o?function(e,r){let n=r[e]?.stateGroupVariantProps;if(!n)return[];let o=(0,m.aO)(e,r),s=(0,m.f3)(e,r);return n.propertySortOrder.map(e=>{let r=s===i.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR&&o.some(r=>r.name===e),l=n.propertyValues[e];return{name:e,values:l,type:i.J0O.VARIANT,kind:a.uN.VARIANT,error:r?i.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:i.uXg.NONE}})}(o,e):[]}),E=(()=>{let e=f();return r=>e(r,(0,u.Sh)(r))})(),y=(0,o.Mz)([E],e=>{let r=e.map(e=>e.name),n=(0,l.t)("design_systems.component_properties.variant_property_default_name");return(0,d.g)(n,r)})},868911:(e,r,n)=>{n.d(r,{$j:()=>R,Ht:()=>L,Jl:()=>V,M4:()=>B,Pd:()=>x,Se:()=>D,Zp:()=>U,fl:()=>C,gq:()=>O,ig:()=>P,j5:()=>A,qd:()=>k,vD:()=>N,w2:()=>F});var a=n(411855),i=n(747579),o=n(629019),s=n.n(o),l=n(841962),c=n(76265),d=n(834240),u=n(863599),m=n(581713),p=n(343373),h=n(923219),_=n(756044),g=n(688656),f=n(137567),E=n(366881),y=n(859877),b=n(647905),v=n(523857),T=n(172066),I=n(57200);let S={scrubMultiplier:1,wheelMultiplier:1,smallNudgeAmount:d.bA,bigNudgeAmount:d._q};function w({children:e,onNormalClick:r}){let{setScrubbableElement:n}=(0,a.useContext)(T.s),i=(0,a.useRef)(null),o=(0,a.useRef)(null),s=(0,a.useRef)(!1),c=(0,a.useRef)(null),d=(0,a.useRef)(null);(0,a.useEffect)(()=>(n(i.current),()=>n(null)),[n]);let u=(0,a.useCallback)(e=>{s.current=!1,c.current={x:0,y:0},d.current={x:e.clientX,y:e.clientY};let r=window.setTimeout(()=>{o.current=null},500);o.current=r},[]),m=(0,a.useCallback)(()=>{null===o.current||s.current||(clearTimeout(o.current),r?.()),o.current=null,c.current=null,d.current=null},[r]),p=(0,a.useCallback)(e=>{if(!c.current)return;let r=e.movementX,n=e.movementY;null==r&&null==n&&d.current&&(r=e.clientX-d.current.x,n=e.clientY-d.current.y,d.current={x:e.clientX,y:e.clientY}),c.current.x+=r,c.current.y+=n;let{x:a,y:i}=c.current;Math.sqrt(a*a+i*i)>5&&(s.current=!0)},[]);return((0,a.useEffect)(()=>()=>{null!==o.current&&clearTimeout(o.current)},[]),(0,l.kc)().scrub_input_improvements)?a.createElement("div",{ref:i,onPointerDown:u,onPointerUp:m,onPointerMove:p},e):a.createElement("div",{ref:i},e)}function A(e){let{onValueChange:r,forwardedRef:n}=e,i=(0,a.useRef)(null),o=n??i,c=(0,a.useCallback)(e=>r?.(e,_.zk.YES),[r]),d=(0,a.useCallback)(()=>{o.current?.focus(),o.current?.select()},[o]),u=(0,p.GS)(),g=e.isTokenizable?b.$:y.p_,E=(0,a.useCallback)(e=>a.createElement(w,{onNormalClick:d},e),[d]),v=(0,l.kc)().scrub_input_improvements&&u;return a.createElement(T.b,{...S,...e,scrubbingDisabled:e.scrubbingDisabled||e.disabled||null==e.value||e.value===h.oV&&!e.mixedMathHandler},e.childrenAtEnd?null:a.createElement(f.e,{condition:(!!e.children||!!v)&&u,wrapper:E},a.createElement(a.Fragment,null,e.children?e.children:v?a.createElement("div",{className:I.V}):null)),a.createElement(g,{onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,recordingKey:e.recordingKey,className:s()(e.inputClassName,{[I.sC]:!0,[I.WC]:!e.childrenAtEnd&&u&&!e.children&&v}),dataTestId:e.dataTestId,noLeftBorder:e.noLeftBorder,squareRightBorder:e.squareRightBorder,formatter:e.formatter,property:e.value??null,onMouseDown:m.dG,onChange:c,allowEmpty:e.allowEmpty,mixedMathHandler:e.mixedMathHandler,mixedMathCallback:e.mixedMathCallback,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClick,onMixedMathNudge:e.onMixedMathNudge,disabled:e.disabled??null===e.value,softDisabled:e.softDisabled,placeholder:e.placeholder,autoFocus:e.autoFocus,noBorderOnFocus:!0,forwardedRef:o,ellipsis:u}),e.childrenAtEnd?a.createElement(f.e,{condition:!!e.children&&u,wrapper:E},a.createElement(a.Fragment,null,e.children)):null,e.endNode)}function C({onMouseEnter:e,onMouseLeave:r,onMouseEnterNonPropagating:n,...i}){let o={...S,...i,noBorderOnFocus:i.noBorderOnFocus||i.disableSelectFocus};return a.createElement("div",{className:i.className},a.createElement(E.a3,{id:i.id,inputClassName:i.inputClassName,dropdownClassName:i.dropdownClassName,dropdownWidth:i.dropdownWidth,willShowDropdown:i.willShowDropdown,formatter:i.formatter,property:i.value,onChange:(e,r=_.zk.YES)=>{i.onValueChange?.(e,r)},onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp,onInputFocus:i.onFocus,onInputBlur:i.onBlur,onMouseEnter:e,onMouseEnterNonPropagating:n,onMouseLeave:r,mixedMathHandler:i.mixedMathHandler,dispatch:i.dispatch,disabled:i.disabled,dropdownShown:i.dropdownShown,autoFocus:i.autoFocus,recordingKey:i.recordingKey,scrubbableControlProps:o,icon:i.icon,forwardedRef:i.forwardedRef,isTokenizable:i.isTokenizable,dataTestId:i.dataTestId,allowEmpty:i.allowEmpty,unNamespacedInputRecordingKey:i.unNamespacedInputRecordingKey,placeholder:i.placeholder,omitValueFromDropdown:i.omitValueFromDropdown,noPlaceholderLine:i.noPlaceholderLine,onboardingKey:i.onboardingKey,disableSelectFocus:i.disableSelectFocus,openBelowTarget:i.openBelowTarget,chevronClassName:i.chevronClassName,dropdownAlignment:i.dropdownAlignment,enablePreview:i.enablePreview,optionsWithDisabledPreviews:i.optionsWithDisabledPreviews,hasIconStyle:i.hasIconStyle},i.children))}function N(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,formatter:s}=e,l=(0,a.useMemo)(()=>new u.Lk({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}),[r,n,i,o]);return a.createElement(C,{...e,formatter:s??l})}function L(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}=e,s=(0,a.useMemo)(()=>new u.X9({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}),[r,n,i,o]);return a.createElement(A,{...e,formatter:s})}function O(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,onEvaluateExpressionError:s}=e,l=(0,a.useMemo)(()=>new u.Lk({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,onEvaluateExpressionError:s}),[r,n,i,o,s]);return a.createElement(A,{...e,formatter:l})}function R({min:e=0,max:r,floatingPointFormat:n,onEvaluateExpressionError:i,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,a.useMemo)(()=>new u.Lk({min:Math.max(e,0),max:r,smallNudgeAmount:s,bigNudgeAmount:l,floatingPointFormat:n,onEvaluateExpressionError:i}),[e,r,s,l,n,i]);return a.createElement(A,{...o,formatter:c})}function P({min:e=0,max:r,...n}){let{smallNudgeAmount:i,bigNudgeAmount:o}=n,s=(0,a.useRef)(!1),l=(0,a.useMemo)(()=>new u.NB({min:Math.max(e,0),max:r,smallNudgeAmount:i,bigNudgeAmount:o}),[e,r,i,o]),c=(0,h.gl)(n.value)&&n.mixedMathHandler,d=n.disabled||n.scrubbingDisabled||"number"!=typeof n.value&&!Array.isArray(n.value)&&!c,m=n.isTokenizable?b.$:y.p_;return a.createElement(T.b,{...S,...n,formatter:l,scrubbingDisabled:d,onScrubBegin:e=>{s.current=!0,n.onScrubBegin?.(e)},onScrubEnd:e=>{s.current=!1,n.onScrubEnd?.(e)},className:n.className},n.children,a.createElement(m,{forwardedRef:n.forwardedRef,disabled:n.disabled,className:n.inputClassName,formatter:l,property:n.value??null,source:s.current?"scrub":"document",onChange:e=>n.onValueChange(e,_.zk.YES),mixedMathHandler:n.mixedMathHandler,onMixedMathNudge:n.onMixedMathNudge,onBlur:n.onBlur,onFocus:n.onFocus,onNudge:n.onNudge,onKeyDown:n.onKeyDown,onClick:n.onClick,onPaste:n.onPaste,recordingKey:n.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:n.shouldClearOnFocus,placeholder:n.placeholder,dataTestId:n.dataTestId}))}function D({min:e,max:r,allowEmpty:n,...i}){let{smallNudgeAmount:o,bigNudgeAmount:s}=i,l=(0,a.useRef)(!1),c=(0,a.useMemo)(()=>new u.PZ({min:e,max:r,smallNudgeAmount:o,bigNudgeAmount:s,allowEmpty:n}),[e,r,o,s,n]),d=(0,h.gl)(i.value)&&i.mixedMathHandler,m=i.disabled||i.scrubbingDisabled||"number"!=typeof i.value&&!d,p=i.isTokenizable?b.$:y.p_;return a.createElement(T.b,{...S,...i,formatter:c,scrubbingDisabled:m,onScrubBegin:e=>{l.current=!0,i.onScrubBegin?.(e)},onScrubEnd:e=>{l.current=!1,i.onScrubEnd?.(e)},className:i.className},i.children,a.createElement(p,{forwardedRef:i.forwardedRef,disabled:i.disabled,className:i.inputClassName,formatter:c,property:i.value??null,source:l.current?"scrub":"document",allowEmpty:n,onChange:e=>i.onValueChange(e,_.zk.YES),mixedMathHandler:i.mixedMathHandler,onMixedMathNudge:i.onMixedMathNudge,onBlur:i.onBlur,onFocus:i.onFocus,onNudge:i.onNudge,onKeyDown:i.onKeyDown,onPaste:i.onPaste,recordingKey:i.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:i.shouldClearOnFocus,placeholder:i.placeholder,dataTestId:i.dataTestId}))}function k({max:e=3600,displayFractions:r=!1,...n}){let i=(0,a.useMemo)(()=>new u.f0(e,r),[e,r]);return a.createElement(A,{...n,formatter:i})}let M={...S,scrubMultiplier:4,wheelMultiplier:2};function F({min:e=0,max:r=1,decimals:n,hidePercentSign:i,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,a.useMemo)(()=>new u.LN({min:e,max:r,smallNudgeAmount:s,bigNudgeAmount:l,decimals:n,hidePercentSign:i}),[e,r,s,l,n,i]);return a.createElement(A,{...M,...o,formatter:c,postScrubMultiplier:.001,postBigNudgeAmount:.1})}function x(e){let r="ui3"===(0,i.DP)().version,{inputClassName:n,...o}=e,l=e.ui3RightJustifyPercentSign??!0,d=(0,v.P)((0,c.t)("fullscreen.scrubbable.opacity"));return r?a.createElement(F,{...o,inputClassName:s()(n,{[I.Ww]:l}),"data-tooltip-type":g.Ib.TEXT,"data-tooltip":d,hidePercentSign:l,childrenAtEnd:l},l?a.createElement("span",{className:I.QK},(0,c.tx)("fullscreen.scrubbable.percent")):e.children):a.createElement(F,{...e,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,c.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0})}function U(e){let{smallNudgeAmount:r,bigNudgeAmount:n}=e,i=(0,a.useMemo)(()=>new u.cu({smallNudgeAmount:r,bigNudgeAmount:n}),[r,n]);return a.createElement(A,{...e,formatter:i,postScrubMultiplier:e.reverseScrub?.5:-.5,postWheelMultiplier:e.reverseScrub?.2:-.2,postBigNudgeAmount:.1})}function B(e){let r=(0,a.useMemo)(()=>new u.cu({min:7.16,max:180}),[]);return a.createElement(A,{...e,formatter:r,postScrubMultiplier:.5,postBigNudgeAmount:.1,postWheelMultiplier:.2})}function V(e){let{min:r,smallNudgeAmount:n=d.bA,bigNudgeAmount:i=d._q,formatter:o}=e,s=(0,a.useRef)(!1),l=(0,a.useMemo)(()=>o??new u.h7({min:r,smallPixelNudgeAmount:n,bigPixelNudgeAmount:i}),[r,n,i,o]),c=e.isTokenizable?b.$:y.p_;return a.createElement(T.b,{...S,"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],tooltipForScreenReadersOnly:e.tooltipForScreenReadersOnly,className:e.className,value:e.value,onValueChange:e.onValueChange,smallNudgeAmount:n,bigNudgeAmount:i,scrubMultiplier:e.scrubMultiplier,disabled:e.disabled,scrubbingDisabled:e.disabled,dispatch:e.dispatch,formatter:l,onScrubBegin:()=>{s.current=!0},onScrubEnd:()=>{s.current=!1},noBorderOnHover:e.noBorderOnHover},e.children,a.createElement(c,{disabled:e.disabled,className:e.inputClassName,formatter:l,property:e.value,source:s.current?"scrub":"document",onChange:r=>e.onValueChange(r,_.zk.YES),recordingKey:e.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:e.shouldClearOnFocus,placeholder:e.placeholder}))}},975760:(e,r,n)=>{n.d(r,{sA:()=>N,sJ:()=>C});var a=n(411855),i=n(351966),o=n(47644),s=n(629019),l=n.n(s),c=n(841962),d=n(64271),u=n(563192),m=n(137565),p=n(693565),h=n(76265),_=n(292689),g=n(515662),f=n(125682),E=n(688656),y=n(891720),b=n(364985),v=n(6525),T=n(421030),I=n(57200),S=n(931217),w=n(5068);let A=a.forwardRef(function({children:e,disabled:r,icon:n,inputClassName:i,isActive:o,nonTextChild:s,noBorder:c,onMouseDownCapture:d,onContextMenuCapture:p,onFocus:h,onBlur:_,recordingKey:g},f){return a.createElement(m.D8,{forwardedRef:f,recordingKey:u.Pt(g,"comboInputControl","container"),className:l()(i,{[S.mc]:!0,[S.vu]:o,[S.KH]:!c,[S.r9]:r,[S.fE]:s}),onMouseDownCapture:d,onContextMenuCapture:p,onFocus:h,onBlur:_},a.createElement("div",{className:S.I6},e),!r&&n)}),C=a.forwardRef(function({inputClassName:e,inputRef:r,currentFieldValue:n,recordingKey:s,disabled:m,children:_,hideIcon:g=!1,nonTextChild:b,isActive:C,onPickerOpen:N,disableEntryPoint:L=!1,noBorder:O,hasBindingContextMenu:R,onClickDetachButton:P,onFocus:D,onBlur:k},M){let F=a.useId(),x=(0,a.useContext)(v.p),U=x?.boundVariableId,B=(0,a.useRef)(null),V=(0,y.R)(),{showing:G,show:H,data:W,hide:K}=(0,f.BK)(T.v+F),Y=a.useCallback(()=>{N?N():x?.showBindingUI(B.current,{currentFieldValue:n}),K()},[n,K,N,x]),$=a.useCallback(()=>{x?.onVariableSelected?.(void 0),K(),P?.()},[K,x,P]),j=u.rf(u.Pt(s,"detachIcon"),"click",$),z=u.rf(s,"mousedown",e=>{if(e&&!L&&e.shiftKey){Y(),e.preventDefault(),e.stopPropagation();return}}),q=u.rf(s,"contextmenu",e=>{e&&!L&&R&&r?.current&&(H({data:{position:{top:e.clientY,left:e.clientX}}}),e.preventDefault(),e.stopPropagation())}),Z=g||L?null:U?(0,c.kc)().ds_fpl_properties_panel?a.createElement(i.E,{className:l()(S.AM,S.Ab),htmlAttributes:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("variables.binding_ui.detach_variable_tooltip")},"aria-label":(0,h.t)("variables.binding_ui.detach_variable_tooltip"),onClick:j},a.createElement(o.o,{className:S.HQ})):a.createElement("div",{className:l()(S.AM),role:"button",tabIndex:0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("variables.binding_ui.detach_variable_tooltip"),"aria-label":(0,h.t)("variables.binding_ui.detach_variable_tooltip"),onClick:j},a.createElement(o.o,{className:S.HQ})):a.createElement(p.B,{recordingKey:u.Pt(s,"comboBoxButton"),className:l()(S.Kk),role:"button",ariaLabel:(0,h.t)("fullscreen.properties_panel.apply_variable"),"data-tooltip-type":V?E.Ib.TEXT:void 0,"data-tooltip":V?(0,h.t)("fullscreen.properties_panel.apply_variable"):void 0,svg:w.default,onClick:Y,dataTestId:u.Pt("variable-control-icon",s??""),tabIndex:-1});return a.createElement(a.Fragment,null,a.createElement(A,{recordingKey:s,inputClassName:l()(e,{[I.Gp]:!!Z}),disabled:m,isActive:null!=C?C:!!x?.isShowingBindingUI,ref:(0,d.A)(M,B),onMouseDownCapture:z,onContextMenuCapture:q,nonTextChild:b,noBorder:O,icon:Z,onFocus:D,onBlur:k},_),R&&r&&G&&"number"==typeof W?.position?.top&&"number"==typeof W?.position?.left&&a.createElement(T.G,{inputRef:r,isBound:!!x?.boundVariableId,left:W.position.left,onClose:K,onOpenVariablePicker:Y,onUnbindVariable:j,recordingKey:u.Pt(s,"contextMenu"),top:W.position.top}))}),N=a.memo(function({fields:e,currentFieldValue:r,resolvedType:n,editingStyleGuid:i,inputClassName:o,inputRef:s,disabled:l,recordingKey:c,disableEntryPoint:d,hideIcon:u,noBorder:m,children:p,hasBindingContextMenu:h,onClickDetachButton:_,onBlur:f,onFocus:E}){let y=(0,g.SG)(e).data??[];return a.createElement(b._X,{fields:e,resolvedType:n,editingStyleGuid:i},a.createElement(C,{recordingKey:c,inputClassName:o,inputRef:s,disabled:l,currentFieldValue:r,disableEntryPoint:!!d||0===y.length,hideIcon:u,noBorder:m,hasBindingContextMenu:h,onClickDetachButton:_,onBlur:f,onFocus:E},p))});a.forwardRef(function({currentFieldValue:e,disabled:r,isActive:n,recordingKey:i,children:o,onPickerOpen:s,dataTestId:c,openOnRightClick:m,inputClassName:p,tooltip:h},g){let f=(0,a.useContext)(v.p),y=(0,a.useRef)(null),b=a.useCallback(()=>{s?s():f?.showBindingUI(y.current,{currentFieldValue:e})},[e,s,f]),T=u.rf(i,"mousedown",e=>{if(e&&!r){if(m){if((0,_.i)(e)){e.preventDefault(),e.stopPropagation();return}if(e.shiftKey&&1&e.buttons){b(),e.preventDefault(),e.stopPropagation();return}}else if(1&e.buttons){b(),e.preventDefault(),e.stopPropagation();return}}}),I=u.rf(i,"contextmenu",e=>{e&&!r&&(b(),e.preventDefault(),e.stopPropagation())});return a.createElement("div",{ref:(0,d.A)(g,y),className:l()(p,{[S.jX]:!0,[S.NH]:n&&!p}),onMouseDownCapture:T,onContextMenu:I,"data-testid":c,"data-tooltip-type":h?E.Ib.TEXT:void 0,"data-tooltip":h??void 0},o)})},184565:(e,r,n)=>{n.d(r,{A:()=>C});var a=n(411855),i=n(747484),o=n(188507),s=n(777535),l=n(890882),c=n(841962),d=n(875877),u=n(697737),m=n(76265),p=n(553362),h=n(278695),_=n(515967),g=n(780017),f=n(135891),E=n(415150),y=n(901842),b=n(404852),v=n(759240);let T=(0,g.r1)("seen_mobile_proto_download_modal_prompt");function I(){let e=(0,o.wA)(),r=(0,d.useAtomValue)(T),n=(0,o.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),i=(0,o.d4)(e=>e.user?.created_at),g=(0,l.A)(i).add(14,"day").isSameOrAfter((0,l.A)()),{isShowing:I,show:S,complete:w}=(0,_.e)({overlay:v.y3_,priority:f.N.DEFAULT_MODAL},[r]);if((0,a.useEffect)(()=>{S({canShow:e=>!!(0,c.kc)().mobile_download_modal_prompts&&!g&&!e&&!n})},[S,n,g]),!I)return null;let A=()=>{u.Ay.post("/api/send_mobile_download_email",{type:"prototype"}),(0,s.sx)("post_proto_mobile_app_download_prompt_email_me_cta_clicked"),w(),e(p.F.enqueue({message:(0,m.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return a.createElement(y.X,{isShowing:I,title:(0,m.tx)("mobile_download_prompts.mobile_interactions"),description:(0,m.tx)("mobile_download_prompts.run_your_mobile_prototypes"),media:a.createElement(E.y,{aspectRatio:1.75,alt:"A graphic show mobile prototypes with a qr code",src:(0,c.ck)("b50fba0faeea245feed92fe60337297d827e4984")}),primaryCta:{label:(0,m.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>A(),ctaTrackingDescriptor:h.c.MOBILE_APP_DOWNLOAD_PROTOTYPE_PROMPT_CLICKED},trackingContextName:"Mobile Prototype Download Modal Prompt",onClose:()=>{w()},userFlagOnShow:"seen_mobile_proto_download_modal_prompt",position:b.Q.BOTTOM_RIGHT,secondaryCta:{label:(0,m.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:h.c.LEARN_MORE}})}var S=n(878080),w=n(741401),A=n(509223);let C=a.memo(function(){return a.createElement(a.Fragment,null,a.createElement(A.p,null,a.createElement(S.w,null)),!i.Xb&&a.createElement(A.p,null,a.createElement(I,null)),a.createElement(A.p,null,a.createElement(w.b,null)))})},786392:(e,r,n)=>{n.d(r,{wH:()=>l}),n(411855),n(188507);var a=n(281935),i=n(241162);function o(e){switch(e){case"default":return"color_management_desktop_app_setting_default";case"unmanaged":return"color_management_desktop_app_setting_unmanaged";case"managed":return"color_management_desktop_app_setting_managed";case"srgb":return"color_management_desktop_app_setting_srgb"}}function s(e,r){return e.getState().userFlags[r]}function l(e){if(!a.eD)return;let r=a.eD?.getLegacyColorSpacePreference();!function(e,r,n){let{isDefault:a,isManaged:s,isSrgb:l,isUnmanaged:c}=r,d={};a&&"default"!==n&&(d.color_management_desktop_app_setting_default=!1),c&&"unmanaged"!==n&&(d.color_management_desktop_app_setting_unmanaged=!1),s&&"managed"!==n&&(d.color_management_desktop_app_setting_managed=!1),l&&"srgb"!==n&&(d.color_management_desktop_app_setting_srgb=!1);let u=a&&"default"===n||c&&"unmanaged"===n||s&&"managed"===n||l&&"srgb"===n;void 0===n||u||(d[o(n)]=!0),Object.keys(d).length>0&&e(i.b(d))}(e.dispatch,{isDefault:!!s(e,o("default")),isUnmanaged:!!s(e,o("unmanaged")),isManaged:!!s(e,o("managed")),isSrgb:!!s(e,o("srgb"))},r)}n(303480)},103140:(e,r,n)=>{n(805014)},640121:(e,r,n)=>{n(411855),n(188507),n(512729);var a=n(875877);n(241162),n(515967),n(727130),n(965467),n(253544),n(955597);var i=n(780017);n(737686),n(643225),n(176160),n(314540),n(287327),n(135891),n(465424),n(329922),n(832995),n(244746),n(607529),n(759240),(0,a.atom)(!1),(0,i.r1)("dismissed_move_drafts_nudge")},598249:(e,r,n)=>{n.d(r,{s:()=>a}),n(411855),n(188507),n(245954),n(875877),n(241162),n(343414),n(515967),n(253544),n(955597),n(780017),n(737686),n(643225),n(176160),n(314540),n(183739),n(287327),n(135891),n(465424),n(832995),n(640121),n(244746),n(607529),n(759240);let a="Node Count Reached for Draft"},841749:(e,r,n)=>{n.d(r,{l5:()=>s});var a=n(875877),i=n(259315),o=(e=>(e.NOT_STARTED="NOT_STARTED",e.MODAL_SHOWING="MODAL_SHOWING",e.USE_CASE_STEPS="USE_CASE_STEPS",e.COMPLETED="COMPLETED",e))(o||{});(0,a.atom)("NOT_STARTED");let s=(0,a.atom)(i.fD.NONE);(0,a.atom)(!1)},298679:(e,r,n)=>{n.d(r,{Iv:()=>a});let a="sites-preview"},450129:(e,r,n)=>{n.d(r,{zM:()=>i}),n(411855),n(188507);var a=n(76265);n(910164),n(233950),n(140583),n(73041),n(343373),n(343414),n(515967),n(176160),n(914077),n(135891),n(781976),n(276769),n(685389),n(991944),n(142420),n(759240),n(994917);let i="open-playground-file-onboarding-event";(0,a.tx)("rcs.playground_file.switch_devmode_to_design_title")},110825:(e,r,n)=>{n.d(r,{oE:()=>o,zK:()=>i}),n(411855),n(875877),n(76265),n(343414),n(515967);var a=n(780017);n(135891),n(832995),n(607529),n(759240);let i="plugin-publish-invite-publishers-onboarding-event",o="plugin-publish-invite-publishers-click-event";(0,a.r1)("seen_plugin_publish_invite_publishers_onboarding")},896473:(e,r,n)=>{n.d(r,{n:()=>a});let a=(0,n(875877).atom)(!1)},392789:(e,r,n)=>{n.d(r,{Ih:()=>a,pN:()=>i}),n(241162);let a="seen_ready_for_dev_callout",i="seen_ui3_design_onboarding_steps"},156839:(e,r,n)=>{n.d(r,{uQ:()=>i}),n(411855);var a=n(875877);n(153767);let i=1;(0,a.atom)(null),(0,a.atom)(null)},738402:(e,r,n)=>{n.d(r,{$A:()=>I,LS:()=>w,YY:()=>A,ks:()=>S});var a=n(188507),i=n(240954),o=n(805014),s=n(245459),l=n(245954),c=n(163773),d=n(841962),u=n(875877),m=n(750570),p=n(972142),h=n(76265),_=n(84062),g=n(16822),f=n(415091),E=n(939610),y=n(23478),b=n(131129),v=n(663219),T=n(914077);function I(e){return e?.view==="fullscreen"&&e?.editorType===T.nT.DevHandoff}function S(){return(0,a.d4)(e=>I(e.selectedView))}function w(){return(0,a.d4)(e=>I(e.selectedView)&&(0,_.Mx)(e)&&(e.mirror.appModel.currentTool===o.NLJ.SELECT||e.mirror.appModel.currentTool===o.NLJ.DROPPER_COLOR||e.mirror.appModel.currentTool===o.NLJ.ANNOTATE||e.mirror.appModel.currentTool===o.NLJ.MEASURE))}class A{pathToSelectedView(e,r,n,a){let i=n?(0,m.v6)(n):{},o=r[1];if(("design"===o||"file"===o)&&("1"===i["ready-for-dev"]||("dev"===i.mode||"dev"===i.m)&&"auto"!==i.m)){let n="branch"===r[3]&&r[4]?r[4]:r[2],o=e?.fileByKey[n];if(null==o){let{editing_file:e}=(0,d.Ay)();e&&e.key===n&&(o=e)}let s={view:"fullscreen",editorType:e?.user?T.nT.DevHandoff:T.nT.Design,fileKey:n};(a=a?a.slice(1):"")&&("commentPreferences"===a?s.showCommentPreferencesPicker=!0:s.commentThreadId=a),i["node-id"]&&(s.nodeId=i["node-id"]),i["version-id"]&&(s.versionId=i["version-id"]),i["cc-version-id"]&&(i["node-id"]||i["cc-node-id"])&&!i.vars&&(s.compareChangesVersionId=i["cc-version-id"]),i["cc-activity-id"]&&(i["node-id"]||i["cc-node-id"])&&!i.vars&&(s.compareChangesActivityId=i["cc-activity-id"]),i["cc-filter-status"]&&(i["cc-version-id"]||i["cc-activity-id"])&&(i["node-id"]||i["cc-node-id"])&&!i.vars&&(s.filterStatusVersions="1"===i["cc-filter-status"]),i["cc-node-id"]&&i["cc-version-id"]&&!i.vars&&(s.compareChangesNodeId=i["cc-node-id"]),i["try-plugin-id"]&&(s.tryPluginId=i["try-plugin-id"]),i["try-plugin-version-id"]&&(s.tryPluginVersionId=i["try-plugin-version-id"]),i["try-plugin-name"]&&(s.tryPluginName=i["try-plugin-name"]),"1"===i["is-playground-file"]&&(s.isPlaygroundFile=!0),i["dev-mode-features-modal"]&&(s.devModeSupermodalTab=i["dev-mode-features-modal"]);let l=(0,g.b)(e);return"1"===i.vars?(s.showDevModeVariablesTable=!0,u.atomStore.set(E.$,f.Nh.DirectUrl),i["var-id"]&&(s.devModeVariablesTableSelectedVariable=i["var-id"])):l&&"1"===i["ready-for-dev"]&&(s.showOverview=!0),s.showDevModeVariablesTable||u.atomStore.set(E.$,null),I(s)&&("dev"===i.mode||"dev"===i.m)&&(s.mode="dev",!l||!i["focus-id"]||s.showOverview||i.vars||(s.devModeFocusId=i["focus-id"],i["node-id"]||(s.nodeId=i["focus-id"]))),s}return null}requireHistoryChange(e,r){return!1}selectedViewToPath(e,r){if(I(e)||"fullscreen"===e.view&&!0===e.showOverview){let n;if(e.fileKey===v.Zt)return`/test/interactions${c.Ay.location.search}`;let a=this.selectedViewName(e,r),o=a?(0,p.sy)(a):"",u={},h=e.fileKey,_=e.fileKey&&r.fileByKey[e.fileKey],g="design";if(_){let e=(0,y.L8)(_,r.repos);n=(0,y.gN)(_,e,g)}else n=`/${g}/${h}`,o?n+=`/${o}`:n+="/Untitled";if(e.nodeId&&s.fn(s.sH(e.nodeId))&&(u["node-id"]=(0,b.EO)(e.nodeId)),(0,d.kc)().node_type_in_url&&e.nodeId&&s.fn(s.sH(e.nodeId)))try{let r=l.UN().get(e.nodeId)?.type;r&&["CANVAS","DOCUMENT"].includes(r||"")&&(u.p="f")}catch(e){if(!(e instanceof i.wL))throw e}return e.versionId&&(u["version-id"]=e.versionId),e.compareChangesVersionId&&(u["cc-version-id"]=e.compareChangesVersionId),e.filterStatusVersions&&(u["cc-filter-status"]=1),e.compareChangesNodeId&&(u["cc-node-id"]=(0,b.EO)(e.compareChangesNodeId)),e.devModeFocusId&&(u["focus-id"]=(0,b.EO)(e.devModeFocusId)),e.showOverview&&(u["ready-for-dev"]="1"),e.showDevModeVariablesTable&&(u.vars="1",e.devModeVariablesTableSelectedVariable&&(u["var-id"]=(0,b.Ml)(e.devModeVariablesTableSelectedVariable))),u.m="dev",Object.keys(u).length>0&&(n+=`?${(0,m.lF)(u)}`),e.commentThreadId&&(n+=`#${e.commentThreadId}`),n}return null}selectedViewName(e,r){if(I(e)){let n=null;if(e.fileKey){let a=r.fileByKey[e.fileKey];if(a){let e=(0,y.L8)(a,r.repos);n=e?(0,y.At)(a,e):a.name}}return n??(0,h.t)("dev_handoff.dev_handoff_view_selector.untitled")}return null}selectedViewHasMissingResources(e,r){return!!I(r)&&!!r.fileKey&&!(r.fileKey in e.fileByKey)}}},640860:(e,r,n)=>{n.d(r,{b:()=>p});var a=n(411855),i=n(747579),o=n(629019),s=n.n(o),l=n(621847),c=n(265851),d=n(910164),u=n(657426),m=n(13171);function p(e){let r="ui3"===(0,i.DP)().version,n=void 0!==e.media,o=void 0!==e.title,p=(e.stepCounter||e.primaryCta||e.secondaryCta||e.overrideFooter)!==void 0;return a.createElement(a.Fragment,null,a.createElement(u.AT,{isTooltip:e.isTooltip,title:e.title,description:e.description,onClose:e.onClose,emphasized:e.emphasized,hideCloseButton:e.hideCloseButton}),o&&!r&&a.createElement(l.Kz,{direction:"y",multiple:n?1.5:1}),n&&a.createElement(a.Fragment,null,e.media,!r&&a.createElement(l.Kz,{direction:"y",multiple:2})),o&&a.createElement("div",{className:s()(c.s.font11.fontNormal.lh16.$,m.g),style:d.sx.add({letterSpacing:"0.055px"}).$},e.description),p&&a.createElement(a.Fragment,null,!r&&a.createElement(l.Kz,{direction:"y",multiple:n||!o?2:3}),e.overrideFooter?e.overrideFooter:a.createElement(u.CJ,{stepCounter:e.stepCounter,primaryCta:e.primaryCta,secondaryCta:e.secondaryCta,emphasized:e.emphasized})))}},415150:(e,r,n)=>{n.d(r,{w:()=>d,y:()=>c});var a=n(411855),i=n(265851),o=n(910164),s=n(343373),l=n(541385);function c(e){let r=(0,s.GS)();return a.createElement("div",{className:l.Z,style:o.sx.colorIconOnbrand.colorBorder.bSolid.bb1.flex.add({aspectRatio:e.aspectRatio.toString()}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},a.createElement("img",{src:e.src,alt:e.alt,className:i.s.flex.justifyCenter.alignCenter.overflowHidden.$}))}function d(e){let r=(0,s.GS)();return a.createElement("div",{style:o.sx.colorIconOnbrand.colorBorder.bSolid.bt1.bb1.flex.add({aspectRatio:e.aspectRatio.toString(),width:"-webkit-fill-available"}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,"object-fit":"initial","aria-hidden":"true",style:o.sx.flex.justifyCenter.alignCenter.overflowHidden.$},a.createElement("source",{src:e.src,type:"video/mp4"})))}},488672:(e,r,n)=>{n.d(r,{j:()=>i});var a=n(411855);function i(e){(0,a.useEffect)(()=>{let r=r=>{"Escape"===r.key&&e()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e])}},589399:(e,r,n)=>{n.d(r,{xx:()=>b});var a=n(411855);n(188507);var i=n(471923),o=n(266838),s=n(556843),l=n(520244);n(336427);var c=n(621847),d=n(265851),u=n(76265),m=n(910164),p=n(726084);n(736041);var h=n(278695),_=n(140835),g=n(343373),f=n(190500),E=n(710636);n(424867);var y=n(425177);function b(e){let r=(0,_.j6)(),n=i.hS({open:!0,onClose:n=>{switch(n.source){case"button":let a=r.name;return(0,f.Cu)({...r.properties,...null!=a?{trackingContext:a}:{},trackingDescriptor:h.c.CLOSE,text:"Close"}),e.onClose("close_button_clicked");case"outside":return e.onClose("modal_background_clicked");case"escape":return e.onClose("escape_button_pressed");case"other":return e.onClose("other")}},preventUserClose:e.preventUserClose});return a.createElement(_.fu,{name:e.trackingContextName,properties:e.trackingProperties},a.createElement(o.bL,{manager:n,width:e.width??700,overrideCloseButtonColor:e.closeButtonColor},a.createElement(s.vo,null,"landscape"===e.orientation?a.createElement(T,{...e}):a.createElement(v,{...e}),a.createElement(C,{stepCounter:e.stepCounter}))))}function v(e){let r=(0,g.GS)();return a.createElement("div",{className:d.s.flex.$},a.createElement("div",{className:d.s.flex.flexColumn.justifyCenter.p32.$},a.createElement("div",{className:d.s.if(r,d.s.textHeadingLarge,d.s.fontInter.font24.fontSemiBold.lh32).$,style:m.sx.add({letterSpacing:"-0.456px"}).$},e.title),a.createElement(c.Kz,{direction:"y",multiple:1}),a.createElement("div",{className:d.s.if(r,d.s.textBodyLarge,d.s.fontInter.font14.fontNormal.lh24).$,style:m.sx.add({letterSpacing:"-0.084px"}).$},e.description),(e.primaryCta||e.secondaryCta)&&a.createElement(a.Fragment,null,a.createElement(c.Kz,{direction:"y",multiple:3}),a.createElement("div",{className:d.s.flex.gap8.$},e.primaryCta&&a.createElement(y.F,{defaultVariant:"primary",large:!0,ctaButtonMeta:e.primaryCta}),e.secondaryCta&&a.createElement(y.F,{defaultVariant:"secondary",large:!0,ctaButtonMeta:e.secondaryCta}))),e.disclaimerFooter&&a.createElement("div",{className:d.s.textBodySmall.colorTextSecondary.pt8.$},e.disclaimerFooter)),e.media)}function T(e){let r=(0,g.GS)();return a.createElement("div",{className:d.s.flex.flexColumn.$},e.media,a.createElement("div",{className:d.s.flex.pl32.pr32.pt32.pb24.gap32.$},a.createElement("div",{className:d.s.if(r,d.s.textHeadingLarge,d.s.fontInter.font24.fontSemiBold.lh32).w200.flexShrink0.$,style:m.sx.add({letterSpacing:"-0.456px"}).$},e.title),a.createElement("div",{className:d.s.if(r,d.s.textBodyLarge,d.s.fontInter.font14.fontNormal.lh24).$,style:m.sx.add({letterSpacing:"-0.084px"}).$},e.description)),a.createElement("div",{className:d.s.flex.pl32.pr32.gap8.justifyEnd.$},e.secondaryCta&&a.createElement(y.F,{defaultVariant:"secondary",large:!0,ctaButtonMeta:e.secondaryCta}),e.primaryCta&&a.createElement(y.F,{defaultVariant:"primary",large:!0,ctaButtonMeta:e.primaryCta})),e.disclaimerFooter&&a.createElement("div",{className:d.s.textBodySmall.colorTextSecondary.$},e.disclaimerFooter),a.createElement(c.Kz,{direction:"y",multiple:4}))}function I(e){return a.createElement("div",{className:d.s.absolute.left0.pl8.$,hidden:e.hidden},a.createElement(l.$n,{variant:"ghost",onClick:e.onBack},a.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.pr12.$},a.createElement(p.In,{icon:"chevron-left-32"}),(0,u.tx)("general.back"))))}function S(e){return a.createElement("div",{className:d.s.absolute.right0.pr8.$,hidden:e.hidden},a.createElement(l.$n,{variant:"ghost",onClick:e.onNext},a.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.pl12.$},(0,u.tx)("general.next"),a.createElement(p.In,{icon:"chevron-right-32"}))))}function w(e){return a.createElement("div",{className:d.s.absolute.right0.pr8.$,hidden:e.hidden},a.createElement(l.$n,{variant:"ghost",onClick:e.onDone},a.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.$},(0,u.tx)("general.done"))))}function A(e){let r=r=>r+1===e.stepNum;return a.createElement("div",{className:d.s.flex.gap8.h32.justifyCenter.itemsCenter.absolute.left0.right0.mxAuto.$},Array(e.totalNumSteps).fill(0).map((e,n)=>a.createElement("div",{className:d.s.w8.h8.bRadius8.b1.colorBorder.if(r(n),d.s.colorBgInverse,d.s.colorBg).$,key:n})))}function C(e){let{stepCounter:r}=e;if(!r)return null;let n=1===r.stepNum,i=r.stepNum===r.totalNumSteps;return a.createElement("div",{className:d.s.p8.bt1.colorBorder.bSolid.h32.$},a.createElement(A,{stepNum:r.stepNum,totalNumSteps:r.totalNumSteps}),a.createElement(I,{onBack:r.onBack,hidden:n}),a.createElement(S,{onNext:r.onNext,hidden:i}),a.createElement(w,{onDone:r.onNext,hidden:!i}))}(0,E.Ju)(()=>null,"FeatureAnnouncement")},116917:(e,r,n)=>{n.d(r,{l:()=>i});var a=n(411855);function i(e,r,n){(0,a.useEffect)(()=>{let a=a=>{e&&r.current&&!r.current.contains(a.target)&&n()};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[e,r,n])}},971097:(e,r,n)=>{n.d(r,{M:()=>o});var a=n(411855),i=n(134288);let o=a.forwardRef((e,r)=>{let n={};return e.shouldDisableAnimation||(n={initial:{translateY:10},animate:{translateY:0},transition:{duration:.2,ease:"easeInOut",translateY:{duration:1}},transformTemplate:(r,n)=>e.transformString?`${e.transformString} ${n}`:n}),a.createElement(i.P.div,{"data-preferred-theme":e.isTooltip?"dark":void 0,className:e.className,style:e.style,ref:r,role:"tooltip",layoutId:e.shouldDisableAnimation?void 0:"FeatureCallout",variants:n,layout:"position"},e.children)})},954339:(e,r,n)=>{n(411855),n(188507),n(629019),n(875877),n(747484),n(972311),n(155881),n(977838),n(939045),n(488527),n(258282),n(675303)},339977:(e,r,n)=>{n.d(r,{bU:()=>o,wh:()=>a}),n(841962);let a=new Set(["name","characters","symbolDescription","description","url"]),i=RegExp(`^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$|^\\w\u2022+\\w( \\(\\d+ characters\\))?$`);function o(e,r){if(""===e)return"";if("show"===r)return e;let n='"'===e[0]&&'"'===e[e.length-1],a=n?e.substring(1,e.length-1):e;if(i.test(a.toLowerCase()))return e;let o=n?'"':"";return o+a[0]+a.substring(1,a.length-1).replace(/\S/g,"\u2022")+a[a.length-1]+o}},829316:(e,r,n)=>{n.d(r,{p:()=>s});var a=n(411855),i=n(841962),o=n(10997);a.memo(function(){return(0,i.kc)().internal_only_debug_tools?a.createElement(c,null):null});let s=a.memo(function(){return(0,i.kc)().internal_only_debug_tools?a.createElement(d,null):null}),l={loading:()=>null,error:function(){return a.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},c=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(6809),n.e(7336)]).then(n.bind(n,498437)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),d=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(6809),n.e(7336)]).then(n.bind(n,498437)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"})},796565:(e,r,n)=>{n.d(r,{_:()=>l});var a=n(841962),i=n(875877),o=n(661137),s=n(183739);let l=(0,i.atom)(e=>{let r=(0,a.kc)().mfa_for_guests,n=e(o.h0);if(!r||!n)return!1;let i=e(s.M9q.Query({orgId:n}));if("loaded"!==i.status)return!1;let l=i.data.currentUser.baseOrgUser?.isMfaRestricted;return l?.status==="loaded"&&!0===l.data})},711114:(e,r,n)=>{n.d(r,{Q:()=>c});var a=n(411855);n(188507);var i=n(777535),o=n(841962),s=n(728722),l=n(183739);function c(e,r){let n=a.useMemo(()=>({stuckMs:1e4,onEvent:(r,n,a)=>{var s,l;return s=e.currentOrgId,l=e.currentTeamId,void((0,o.kc)().file_browser_sidebar_lg_logging&&(0,i.sx)("File Browser Sidebar LG",{lgEvent:r,traceId:a.traceId,hasBeenOffline:a.wasOffline,hasBeenBackgrounded:a.wasBackgrounded,timeElapsedMs:a.timeElapsedMs,orgId:s,teamId:l,errors:JSON.stringify(n.errors)}))}}),[e.currentOrgId,e.currentTeamId]);return(0,s.oS)(l.$kt,e,{...r,subscriptionLogger:n})}},235076:(e,r,n)=>{n.d(r,{AN:()=>a}),n(411855),n(188507),n(805014),n(952979),n(742360),n(163773),n(747484),n(544920),n(700509),n(267310),n(693565),n(773991),n(76265),n(140835),n(334440),n(815153),n(450795),n(440475),n(23478),n(758121),n(798361),n(176160),n(926996),n(15092),n(520244),n(550495),n(728722),n(229694),n(47795),n(183739),n(841924),n(510669),n(914077),n(315516),n(923453),n(581154),n(787337),n(891720),n(142420),n(175296),n(644580),n(558603),n(736041),n(73041),n(773236),n(204326),n(794841),n(978537),n(705137),n(629019),n(822643),n(672595);let a=120},175296:(e,r,n)=>{n(411855),n(188507),n(890882),n(163773),n(544920),n(76265),n(736041),n(176160),n(926996),n(534173)},644580:(e,r,n)=>{n.d(r,{PQ:()=>v});var a=n(411855),i=n(188507),o=n(846288),s=n(369409),l=n(742360),c=n(163773),d=n(626918),u=n(841962),m=n(863297),p=n(747484),h=n(544920),_=n(267310),g=n(927030),f=n(177292),E=n(726066),y=n(221258);function b({origin:e,iFrameHandler:r,overrideUseFedCMPrompt:n}){let p=window;try{window.origin===window.parent.origin&&(p=window.parent||window)}catch{}let E=(0,d.J)(()=>(0,f.o)(p),[p]),b=(0,i.wA)(),v=!!(0,g.S$)(),T=n??v,I=a.useRef(!1),S=a.useCallback(async({credential:n})=>{(0,_.g)("google_one_tap_login_start",e,{},{forwardToDatadog:!0});let a=(0,y.z)(n);if(!a)return;let i={name:a.name,token:n,tokenType:s.V.ID_TOKEN};if(r){r(i);return}try{b(h.WY({redirectUrl:function(){let e=c.Ay.location.pathname;try{window.origin===window.parent.origin&&(e=window.parent.location.pathname)}catch{}return e}()}));let r=await (0,l.W8)(i,{dispatch:b,apiUrl:l._B,origin:e});"mfa"===r.type&&p!==window&&p.postMessage({type:"auth_iframe_show"},"*"),"login"===r.type&&((0,_.g)("google_one_tap_login_complete",e,{},{forwardToDatadog:!0}),b(h.My({userId:r.user.id})))}catch(e){p!==window&&p.postMessage({type:"auth_iframe_show"},"*"),b(h.Qg({message:e.message}))}},[e,r,b,p]);return a.useEffect(()=>{if(E.status===m.r.SUCCESS&&!I.current){I.current=!0;let r=E.value,{google_client_id:n}=(0,u.Ay)();(0,o.KF)(void 0!==n,"google_client_id should be defined in initialOptions"),r.accounts.id.initialize({client_id:n,callback:S,cancel_on_tap_outside:!1,itp_support:!0,use_fedcm_for_prompt:T}),r.accounts.id.prompt(r=>{if(T){let n=r.getMomentType();(0,_.g)("google_one_tap_prompt_moment",e,{momentType:n,reason:"dismissed"===n?r.getDismissedReason():void 0},{forwardToDatadog:!0});return}"display"===r.getMomentType()?r.isDisplayed()?(0,_.g)("google_one_tap_prompt_displayed",e,{},{forwardToDatadog:!0}):(0,_.g)("google_one_tap_prompt_display_failed",e,{reason:r.getNotDisplayedReason()},{forwardToDatadog:!0}):"skipped"===r.getMomentType()?(0,_.g)("google_one_tap_prompt_skipped",e,{reason:r.getSkippedReason()},{forwardToDatadog:!0}):"dismissed"===r.getMomentType()&&(0,_.g)("google_one_tap_prompt_dismissed",e,{reason:r.getDismissedReason()},{forwardToDatadog:!0})})}},[E,S,e,T]),null}function v(e){return u.kc()?.google_one_tap_killswitch||(0,u.sL)()||e.hideOnMobile&&(0,p.o4)()?null:a.createElement(E.d,null,a.createElement(b,{...e}))}},140649:(e,r,n)=>{n.d(r,{EO:()=>u,ZG:()=>m,iT:()=>s,l0:()=>d,xR:()=>l});var a=n(339185),i=n(17030),o=n(76265);function s(e){return"SECTION"===e}function l(e){if(0===Math.round(e.angle))return e;let r=(0,i.getCenteredRotation)(e.angle,e.width,e.height);return{...e,x:e.x-r[0][2],y:e.y-r[1][2]}}n(695024),n(390518);let c={x:0,y:0,width:1e3,height:1e3,angle:0};function d(e,r){let n=0!==Math.round(e.angle)?{transform:`rotate(${(360-e.angle).toString()}deg)`}:{},a=c;return"canvas"!==r&&(a=r),{position:"absolute",left:100*e.x/a.width+"%",top:100*e.y/a.height+"%",width:100*e.width/a.width+"%",height:100*e.height/a.height+"%",...n}}function u(e,r,n={x:1e3,y:1e3},i=a.s.identity().toFigMatrix()){let o=e.x/n.x,s=e.y/n.y,l=a.s.fromFigMatrix(i);if(!l.invert())return{position:"absolute",height:"1px",width:"1px"};l.multiply(a.s.fromFigMatrix(r));let c=l.offset(),d=l.toDegrees();return{position:"absolute",top:`${c.y/n.y*100}%`,left:`${c.x/n.x*100}%`,height:`${100*s}%`,width:`${100*o}%`,transform:`rotate(${d}deg)`,transformOrigin:"top left"}}function m(e){switch(e){case"DIAMOND":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-diamond");case"ELLIPSE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-ellipse");case"ENG_DATABASE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-database");case"ENG_FILE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-file");case"ENG_FOLDER":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-folder");case"ENG_QUEUE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-queue");case"PARALLELOGRAM_RIGHT":case"PARALLELOGRAM_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-parallelogram-right");case"ROUNDED_RECTANGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-rounded-rectangle");case"SQUARE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-square");case"TRIANGLE_DOWN":case"TRIANGLE_UP":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-triangle-down");case"TRAPEZOID":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-trapezoid");case"STAR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-star");case"SHIELD":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-shield");case"HEXAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-hexagon");case"PENTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-pentagon");case"OCTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-octagon");case"PLUS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-plus");case"PREDEFINED_PROCESS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-predefined-process");case"MANUAL_INPUT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-manual-input");case"CHEVRON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-chevron");case"DOCUMENT_SINGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-single");case"DOCUMENT_MULTIPLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-multiple");case"ARROW_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-left");case"ARROW_RIGHT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-right");case"SUMMING_JUNCTION":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-summing-junction");case"OR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-or");case"SPEECH_BUBBLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-speech-bubble");case"INTERNAL_STORAGE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-internal-storage");default:throw Error(`Unhandled shape type: ${e}`)}}},122678:(e,r,n)=>{n.d(r,{r:()=>o}),n(805014);var a=n(76265),i=n(914077);function o(e,r){switch(e){case"SECTION":return(0,a.t)("fullscreen.accessibility_dom.node_name_section");case"STICKY":return(0,a.t)("fullscreen.accessibility_dom.node_name_sticky");case"ROUNDED_RECTANGLE":case"SHAPE_WITH_TEXT":return(0,a.t)("fullscreen.accessibility_dom.node_name_shape");case"CONNECTOR":return(0,a.t)("fullscreen.accessibility_dom.node_name_connector");case"CODE_BLOCK":return(0,a.t)("fullscreen.accessibility_dom.node_name_code_block");case"LINE":return(0,a.t)("fullscreen.accessibility_dom.node_name_line");case"TEXT":return(0,a.t)("fullscreen.accessibility_dom.node_name_text");case"TABLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_table");case"TABLE_CELL":return(0,a.t)("fullscreen.accessibility_dom.node_name_table_cell_generic");case"WIDGET":return(0,a.t)("fullscreen.accessibility_dom.node_name_widget");case"INSTANCE":if(r===i.nT.Whiteboard)return(0,a.t)("fullscreen.accessibility_dom.node_name_instance");return(0,a.t)("fullscreen.accessibility_dom.design.node_name_instance");case"STAMP":return(0,a.t)("fullscreen.accessibility_dom.node_name_stamp");case"CANVAS":if(r===i.nT.Whiteboard)return(0,a.t)("fullscreen.accessibility_dom.node_name_canvas");return(0,a.t)("fullscreen.accessibility_dom.design.node_name_canvas");default:return(0,a.t)("fullscreen.accessibility_dom.node_name_fallback")}}},149730:(e,r,n)=>{n.d(r,{B5:()=>O});var a=n(411855),i=n(188507),o=n(48451),s=n(588172),l=n(805014),c=n(629019),d=n.n(c),u=n(841962),m=n(875877),p=n(747484),h=n(76265),_=n(47795),g=n(535461),f=n(73041),E=n(366172),y=n(963993),b=n(695024),v=n(456649),T=n(257149),I=n(940078),S=n(140649),w=n(407455),A=n(385142),C=n(684113),N=n(635997),L=n(653898);let O={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},R={jumpOnAbort:!0};function P(e){let r=(0,s.qE)(e.headerLevel,2,6);return e.header?a.createElement(a.Fragment,null,a.createElement("div",{role:"heading","aria-level":r,id:e.header.headerId},e.header.label),e.children):a.createElement(a.Fragment,null,e.children)}function D({accessibilityScope:e,nodeId:r,...n}){let i=(0,v.W)(r,e);if(!i)return null;let{childIds:o,...s}=i;return a.createElement(k,{...n,...s,nodeId:r,childIds:o,accessibilityScope:e})}let k=a.memo(({childIds:e,...r})=>{let{accessibilityScope:n,isDebugMode:i,navigate:o,nodeId:s,headingLevel:l,suppressIds:c,type:d,absoluteTransform:u,dimensions:m,transformProperties:p}=r,h=(0,S.iT)(d)?l+1:l,_=e.length;return a.createElement(M,{...r,size:_},e.map((e,r)=>a.createElement(D,{key:e,nodeId:e,accessibilityScope:n,isDebugMode:i,navigate:o,headingLevel:h,setSize:_,setPosition:r+1,suppressIds:c,parent:{dimensions:m,transformProperties:p,absoluteTransform:u,guid:s}})))},function({directTextContent:e,innerTextContent:r,tableCells:n,transformProperties:a,childIds:s,stampFrequencies:l,accessibleLabel:c,absoluteTransform:d,dimensions:u,parent:m,...p},{directTextContent:h,innerTextContent:_,tableCells:g,transformProperties:f,childIds:E,stampFrequencies:y,accessibleLabel:b,absoluteTransform:v,dimensions:T,parent:I,...S}){return(0,i.bN)(p,S)&&(0,i.bN)(u,T)&&(0,i.bN)(d,v)&&(0,i.bN)(a,f)&&(0,i.bN)(l,y)&&(0,i.bN)(c,b)&&(0,i.bN)(s,E)&&(0,i.bN)(m?.absoluteTransform,I?.absoluteTransform)&&(0,i.bN)(m?.dimensions,I?.dimensions)&&(0,i.bN)(m?.transformProperties,I?.transformProperties)&&(0,o.c2)(e,h)&&(0,o.c2)(r,_)&&(0,o.c2)(n,g)});function M({children:e,setSize:r=1,setPosition:n=1,headingLevel:o=2,author:s,transformProperties:c,directTextContent:v,innerTextContent:A,tableCells:N,headerLabel:D,guid:k,isDebugMode:M,navigate:x,ariaRole:U,name:B,shapeType:V,size:G,type:H,nodeId:W,suppressIds:K,stampFrequencies:Y,accessibleLabel:$,contentsHidden:j,dimensions:z,absoluteTransform:q,parent:Z}){let X;let J=(0,i.Pj)(),Q=J.getState().comments.showResolved,ee=(0,i.d4)(e=>e.mirror.appModel.showComments),et=J.getState().mirror.sceneGraph,er=(0,S.iT)(H)?o+1:o,en=(0,f.E3)(),ea=(0,w.E)({type:H,shapeType:V,ariaRole:U,name:B,setData:{size:r,i:n,headerLevel:o},numChildren:G,stampFrequencies:Y,accessibleLabel:$,contentsHidden:j,editorType:en}),ei=!Z;if((0,u.kc)().a11y_design_dom_mirror)X=ei?(0,S.EO)(z,q):(0,S.EO)(z,q,Z.dimensions,Z.absoluteTransform);else{let e=ei?"canvas":Z.transformProperties;X=(0,S.l0)(c,e)}let eo=(0,C.rp)(v,C.d2.SEMANTIC),es=(0,C.rp)(A,C.d2.SEMANTIC),el=(0,C.Dm)(et,W,N),ec=D?{label:D,headerId:`sectionHeaderFor-${k}`}:null,ed=(0,i.d4)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return(e.mirror.appModel.activeCanvasEditModeType!==l.m1T.TEXT&&1===r.length?r[0]:"")===k}),{groupCommentNodeId:eu,groupCommentTransformProperties:em,groupSize:ep}=function(e,r){let n,a,i;let o=r.get(e)?.parentGuid,s=o?r.get(o):void 0;for(;s?.resizeToFit;){n=s.guid??e;let a=s.parentGuid;s=a?r.get(a):void 0}if(n){let r=l.glU.getSortedChildGuids(n);r.length>0&&r[r.length-1]===e?(i=r.length,a=(0,S.xR)(l.Egt.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:a,groupSize:i}}(k,et);(function(e,r,n,i,o,s,l,c,d){let u=(0,m.useSetAtom)(T.f),p=(0,f.E3)();a.useEffect(()=>{e&&u({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:d,ariaLabel:(0,w.E)({type:r,shapeType:n,name:i,accessibleLabel:o,setData:{size:s,i:l,headerLevel:c},editorType:p})}})},[o,c,l,e,i,d,n,s,r,u,p])})(ed,H,V,B,$,r,n,o,W),a.useLayoutEffect(()=>{if(K)return;let e=document.getElementById(k);e&&(ed&&!l.VDs.getExpectingTextInput()?(e.setAttribute("tabindex","0"),e.focus()):(e.setAttribute("tabindex","-1"),e.blur()))},[k,ed,K]);let[eh,e_]=(0,I.l)(M?[Z,s,c,v,A,D,k,ed,U,B,V,H,W,K]:[]);return a.createElement(a.Fragment,null,a.createElement("div",{id:K?void 0:k,ref:e_,role:U,className:d()(L.rH,M&&eh),style:X,"aria-label":ea,tabIndex:-1,contentEditable:p.Ay.windows&&ed?"true":void 0,onContextMenu:e=>{J.dispatch(_.j7({type:g.K9,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||ed||(y.wr(),y.Dh([k]),E.Y5.commit(),x((0,b.QZ)({nodeId:k,...O}),R))},"data-guid":K?k:void 0,"data-fullscreen-intercept-dangerously-include-tab":!0},a.createElement(P,{header:ec,headerLevel:er},es.length>0?es:null,eo.length>0?eo:null,null!=s&&(0,h.tx)("fullscreen.accessibility.author",{authorName:s}),el.length>0?el:null,e),ee?a.createElement(F,{guid:k,navigate:x,isDebugMode:M,parentTransformProperties:c,showResolved:Q,intermediateTransformProperties:void 0,parentAbsoluteTransform:q,parentDimensions:z}):null),ee&&eu?a.createElement(F,{guid:eu,navigate:x,isDebugMode:M,parentTransformProperties:"canvas",intermediateTransformProperties:em??c,showResolved:Q,groupSize:ep,parentAbsoluteTransform:void 0,parentDimensions:void 0}):null)}function F({guid:e,isDebugMode:r,navigate:n,isTopLevel:i,groupSize:o,parentTransformProperties:s,intermediateTransformProperties:l,showResolved:c,parentAbsoluteTransform:d,parentDimensions:u}){let m=(0,N.x)(e,c),p=a.createElement(A.X,{threads:m,navigate:n,isDebugMode:r,parentTransformProperties:s,intermediateTransformProperties:l,parentAbsoluteTransform:d,parentDimensions:u});if(!m||0===m.length)return null;if(i)return a.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},a.createElement("h2",{id:"canvas-comments-heading"},(0,h.tx)("fullscreen.accessibility_dom.unattached_comments")),p);if(!o)return p;{let e=(0,h.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:o});return a.createElement("div",{role:"group","aria-label":e},p)}}},257489:(e,r,n)=>{function a(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null==e)return null;for(let r of e){let e="application"===r.getAttribute("role")||"application"===r.role;if(r.hasAttribute("readonly")&&e)return r}return null}function i(){a()?.focus()}n.d(r,{$z:()=>i,lo:()=>a}),n(411855),n(188507),n(805014),n(108982),n(972142),n(76265),n(553362),n(110124),n(294601),n(366172),n(914077),n(16564),n(122678)},153332:(e,r,n)=>{n.d(r,{a1:()=>_});var a=n(411855),i=n(186471),o=n(629019),s=n.n(o),l=n(918091),c=n(677011),d=n(132939);n(265851);var u=n(312243),m=n(813421);function p(e){return a.createElement("div",{className:u.zc},e.children)}function h(e){return a.createElement("div",{className:u.ro},e.children)}function _(e){return a.createElement(l.c$,{disabled:!e.isEnabled,onClick:e.onClick,onPointerUp:e.onPointerUp,recordingKey:e.recordingKey,className:s()(u.NV,{[u.Kt]:e.inPanel}),buttonRef:e.buttonRef,onboardingKey:e.onboardingKey,simulateHover:e.simulateHover,tooltip:e.tooltip},!e.hideCheck&&a.createElement("div",{className:u.l8},e.isChecked&&a.createElement(d.U,{svg:m.A},a.createElement(i.l,null))),e.children&&a.createElement(p,null,e.children),a.createElement("div",{className:u.Qq},e.text),e.shortcut?a.createElement(c.S,{shortcut:e.shortcut,className:u.LE}):e.rightIcon&&a.createElement(h,null,e.rightIcon))}},413100:(e,r,n)=>{n.d(r,{XR:()=>p,l6:()=>h,uA:()=>_});var a=n(411855),i=n(805014),o=n(851169),s=n(841962),l=n(76265),c=n(164848),d=n(289765),u=(e=>(e[e.DARK=0]="DARK",e[e.LIGHT=1]="LIGHT",e))(u||{});let m={[i.RN1.GREEN]:"rgba(61, 160, 89, 1)",[i.RN1.PINK]:"rgba(216, 52, 158, 1)",[i.RN1.RED]:"rgba(227, 76, 44, 1)",[i.RN1.BLUE]:"rgba(27, 113, 217, 1)",[i.RN1.YELLOW]:"rgba(251, 198, 69, 1)",[i.RN1.ORANGE]:"rgba(255, 165, 0, 1)",[i.RN1.TEAL]:"rgba(0, 128, 128, 1)",[i.RN1.VIOLET]:"rgba(148, 0, 211, 1)"};function p(e={initializeIfNull:!1}){let{initializeIfNull:r=!1}=e,n=(0,a.useMemo)(()=>i.w3z.isReadOnly(i.SES.ANNOTATIONS),[]),l=(0,d.wA)(e=>e.getRoot().annotationCategories);return(0,a.useEffect)(()=>{!n&&null===l&&(0,s.kc)().dt_annotations_categories&&r&&(0,c.r)(()=>{o.l7.system("initialize-annotation-categories",()=>{i.w3z.initializeAnnotationCategories()})})},[l,n,r]),l??[]}function h(e){return e.preset!==i.Bll.NONE?m[function(e){switch(e){case i.Bll.ACCESSIBILITY:return i.RN1.PINK;case i.Bll.CONTENT:return i.RN1.ORANGE;case i.Bll.BEHAVIOR:return i.RN1.BLUE;case i.Bll.DEVELOPMENT:return i.RN1.GREEN;case i.Bll.INTERACTION:return i.RN1.BLUE}}(e.preset)]:e.custom?.color!=null?m[e.custom.color]:null}function _(e){return e.preset!==i.Bll.NONE?function(e){switch(e){case i.Bll.ACCESSIBILITY:return(0,l.t)("dev_handoff.annotations.category_preset.accessibility");case i.Bll.BEHAVIOR:return(0,l.t)("dev_handoff.annotations.category_preset.behavior");case i.Bll.CONTENT:return(0,l.t)("dev_handoff.annotations.category_preset.content");case i.Bll.DEVELOPMENT:return(0,l.t)("dev_handoff.annotations.category_preset.development");case i.Bll.INTERACTION:return(0,l.t)("dev_handoff.annotations.category_preset.interaction")}}(e.preset):e.custom?.label??""}},105504:(e,r,n)=>{n.d(r,{P:()=>s});var a=n(875877),i=n(930263);let o=(0,a.atom)({suggestions:[],analyticsData:i.YQ,isSeen:!1}),s=(0,a.atom)(e=>e(o),(e,r,n)=>{let a=e(o),s=n.suggestions.slice(0,i.lS),l=a.suggestions.length!==s.length||a.suggestions.some((e,r)=>e.id!==s[r]?.id);r(o,{...n,suggestions:s,isSeen:!l&&a.isSeen})});(0,a.atom)(e=>e(o).isSeen,(e,r)=>{let n=e(o);r(o,{...n,isSeen:!0})})},920432:(e,r,n)=>{n.d(r,{CK:()=>w,Lj:()=>y,O:()=>E,k1:()=>A,r6:()=>S,rj:()=>T,tM:()=>f});var a=n(552371),i=n(245954),o=n(777535),s=n(841962),l=n(875877);n(771952);var c=n(73041),d=n(366172),u=n(695024),m=n(176160),p=n(473982),h=n(914077),_=n(735017),g=n(105504);let f="auto-suggest";class E{constructor({analyticsData:e,config:r,entryPoint:n}){this.analyticsData=e,this.config=r.loggerConfig,this.timers=[Date.now()],this.debugInfo={},this.entryPoint=n}logFunnelEvent(e){var r,n;this.config.logFunnelEvents&&(r=this.analyticsData,n=this.entryPoint,o.az.trackDefinedEvent("auto_suggest.funnel",{...r,funnelEvent:e,sessionId:S(),entryPoint:n}))}logTimer(e,r,n){if(!this.config.logTimers)return -1;let i=Date.now();if(this.timers.length>0){let s=i-this.timers[(0,a.Et)(n)?n:this.timers.length-1],l=this.timers.push(i);return o.az.trackDefinedEvent("auto_suggest.timer",{...this.analyticsData,context:e,stepName:r,duration:s,sessionId:S(),entryPoint:this.entryPoint}),l-1}return -1}logDebugInfo(e,r){this.config.logDebugInfo&&(this.debugInfo[e]=r)}}function y(e,r){(0,s.kc)().anticipation_trigger_shadow&&(o.az.trackDefinedEvent("auto_suggest.trigger_shadowing",b({insertedLocation:e,insertedNodeGuid:r,isDelayed:!1})),setTimeout(()=>{o.az.trackDefinedEvent("auto_suggest.trigger_shadowing",b({insertedLocation:e,insertedNodeGuid:r,isDelayed:!0}))},5e3))}function b({insertedLocation:e,insertedNodeGuid:r,isDelayed:n}){let a=l.atomStore.get(v),o=(0,i.UN)(),s=o.get(r),p=s?.parentNode,g=a?o.get(a):void 0,f=d.Y5.getViewportInfo(),E=l.atomStore.get(m.ze)??void 0,y=l.atomStore.get(c.u8),b=y?(0,h.CO)(y):void 0,T=e=>{if(e)return JSON.stringify({x:e.x,y:e.y,w:e.w,h:e.h})},I=performance.now(),S=(0,_.fX)(f,(0,_.Z9)()),w=performance.now(),A=S?o.get(S):void 0;return{fileKey:E,insertedLocation:(e=>{if(e)return JSON.stringify({x:e.x,y:e.y})})(e),insertedNodeGuid:r,insertedNodeType:s?.type,insertedNodeBounds:T(s?.absoluteBoundingBox),parentNodeGuid:p?.guid,parentNodeType:p?.type,parentNodeBounds:T(p?.absoluteBoundingBox),lastSelectedNodeGuid:g?.guid,lastSelectedNodeType:g?.type,lastSelectedNodeBounds:T(g?.absoluteBoundingBox),viewportInfo:(e=>{let r=(0,u.qc)(e);return JSON.stringify({x:r.x,y:r.y,w:r.width,h:r.height})})(f),dominantFrameGuid:S,dominantFrameNodeType:A?.type,dominantFrameBounds:T(A?.absoluteBoundingBox),version:_.JL,isDelayedLog:n,durationMs:w-I,productType:b}}let v=(0,l.atom)(void 0);function T(){if(!(0,s.kc)().anticipation_trigger_shadow)return;let e=(0,i.UN)().getDirectlySelectedNodes(),r=e.length>1?void 0:e[0]?.guid;l.atomStore.set(v,r)}let I=(0,p.rt)(void 0);function S(){return l.atomStore.get(I)}function w(){return(0,l.useAtomValue)(I)}function A(e){let{analyticsData:r}=l.atomStore.get(g.P);o.az.trackDefinedEvent("auto_suggest.component_inserted",{...e,...r,sessionId:S()})}},930263:(e,r,n)=>{n.d(r,{GG:()=>l,H2:()=>d,MX:()=>c,Ou:()=>i,PV:()=>s,YQ:()=>m,lS:()=>o,qd:()=>u});var a=n(957020),i=(e=>(e[e.FRAGMENTS=0]="FRAGMENTS",e[e.RECENTS=1]="RECENTS",e))(i||{});a.PW.COMPONENT,a.PW.STATE_GROUP;let o=4,s={searchByNodeType:"all",targetNodeConfig:{skipLowVolumeNodes:3,numFragments:15,rankingConfig:{count:1,fragmentCount:0,avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:0},filteringConfig:{fragmentsBelowScore:.85,proximityScoreThreshold:0},minRequiredResults:2},topLevelNodeConfig:{skipLowVolumeNodes:3,numFragments:15,rankingConfig:{count:1,fragmentCount:0,avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:1},filteringConfig:{fragmentsBelowScore:.85,proximityScoreThreshold:0},minRequiredResults:1},loggerConfig:{logFunnelEvents:!0,logTimers:!0,logDebugInfo:!0},numResults:4,numConcurrentFragmentLoads:3,dominantFrameConfig:{}};var l=(e=>(e.START="start",e.SKIP_LOW_VOLUME_NODE="skip_low_volume_node",e.SKIP_NO_SUBSCRIBED_LIBRARIES="skip_no_subscribed_libraries",e.INITIATING_FRAGMENT_SEARCH="initiating_fragment_search",e.NO_RESULTS="no_results",e.RESULTS_SHOWN="results_shown",e.RESULT_INSERTED="result_inserted",e.RESULT_DISMISSED="result_dismissed",e.ABORTED="aborted",e.PANEL_OPENED="panel_opened",e.PANEL_CLOSED="panel_closed",e.STARTED_SEARCH="searched_asset",e))(l||{}),c=(e=>(e.SOURCE_FRAGMENT="source_fragment",e.TL_NODE_RESULTS="tl_node_results",e.TARGET_NODE_RESULTS="target_node_results",e))(c||{}),d=(e=>(e.TOTAL="total",e.SEARCH_SUGGESTIONS_START="search_suggestions_start",e.FRAGMENT_SEARCH="fragment_search",e.EXTRACT_CONTEXT="extract_context",e.SUMMARIZE_CONTEXT="summarize_context",e.FILTERING_RANKING="filtering_ranking",e.ASSET_LOOKUP="asset_lookup",e))(d||{}),u=(e=>(e.ASSET_PANEL="asset_panel",e.EVAL="eval",e))(u||{});let m={fileKey:"",queryId:"",selectionId:""}},451843:(e,r,n)=>{n.d(r,{AP:()=>E,Ag:()=>y,Sg:()=>T,e_:()=>g,iG:()=>b,k1:()=>p,mA:()=>h,n1:()=>I,wj:()=>v}),n(805014);var a=n(717180),i=n(774886),o=n.n(i),s=n(885123),l=n(841962),c=n(788843);n(427494),n(176160);var d=n(631762),u=n(957020);n(824794);var m=n(930263);function p(){return(0,l.Ay)().anticipation_config||((0,l.Ay)().anticipation_config=m.PV),(0,l.Ay)().anticipation_config}function h(e){let r=0;return(0,a.hV)(e,e=>!e||e.isInternalOnlyNode||e.opacity<=0||!e.visible?"skip":(r+=1,"INSTANCE"===e.type)?"skip":void 0),r}function _(e){return!(e.startsWith(".")||e.startsWith("_")||e.includes("/.")||e.includes("/_"))}function g(e,r){let n=e.absoluteBoundingBox,a=r.absoluteBoundingBox;return{size:{width:n.w,height:n.h},fragmentSize:{width:a.w,height:a.h},relativePosition:{x:n.x-a.x,y:n.y-a.y}}}function f(e,r){let n={x:e.relativePosition.x+e.size.width/2,y:e.relativePosition.y+e.size.height/2},a={x:n.x/e.fragmentSize.width,y:n.y/e.fragmentSize.height},i={x:r.relativePosition.x+r.size.width/2,y:r.relativePosition.y+r.size.height/2},o={x:i.x/r.fragmentSize.width,y:i.y/r.fragmentSize.height},s={x:1-Math.abs(a.x-o.x),y:1-Math.abs(a.y-o.y)};return Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))}function E({usage:e,filteringConfig:r,subscribedLibraryKeys:n,fragment:a,targetNodePositionInfo:i}){if(!e.name||!_(e.name)||!e.libraryKey||!n?.has(e.libraryKey))return null;let o={size:{width:e.positionInfo.width,height:e.positionInfo.height},fragmentSize:{width:a.width,height:a.height},relativePosition:{x:e.positionInfo.relativeX,y:e.positionInfo.relativeY}},s=i?f(o,i):0;if((r?.proximityScoreThreshold||0)>s)return null;switch(o.proximityScore=s,e.type){case"symbol":return{fragment:a,key:e.key,libraryKey:e.libraryKey,name:e.name,positionInfo:o,type:u.PW.COMPONENT};case"state_group":return{fragment:a,key:e.key,libraryKey:e.libraryKey,name:e.name,positionInfo:o,type:u.PW.STATE_GROUP,stateComponentKey:e.stateComponentKey};default:return null}}function y({scene:e,root:r,fragment:n,targetNodePositionInfo:i,filteringConfig:o,subscribedLibraryKeys:s,includeNestedComponents:l,includeComponentProps:c}){let d=[],m=l?void 0:"skip",p=!!i;return s&&(0,a.hV)(r,r=>{if(!r||r.isInternalOnlyNode||r.opacity<=0||!r.visible)return"skip";if("INSTANCE"===r.type){let a={fragment:n},l=r.symbolId;if(!l)return m;if(p){let n=g(r,e.get(r.findContainingTopLevelFrameOrSelf())),s=i?f(n,i):0;if((o?.proximityScoreThreshold||0)>s)return m;a.positionInfo={...n,proximityScore:s}}let h=e.get(l);if(!h)return m;let E=c?r.componentProperties():void 0;if(h.isState){let r=e.get(h.containingStateGroupId);if(!r)return m;a={...a,type:u.PW.STATE_GROUP,key:r.stateGroupKey,stateComponentKey:h.componentKey,libraryKey:r.sourceLibraryKey,name:r.name,description:r.description,props:E}}else a={...a,type:u.PW.COMPONENT,key:h.componentKey,libraryKey:h.sourceLibraryKey,name:h.name,description:h.description,props:E};return a.key&&a.libraryKey&&a.libraryKey.length&&h.publishID&&h.isSubscribedAsset&&a.libraryKey&&s?.has(a.libraryKey)&&a.name&&_(a.name)&&d.push(a),m}}),d}function b(e){let r={};return e.forEach(e=>{let{key:n,type:a,name:i,description:o,libraryKey:s,fragment:l,positionInfo:c}=e;r[n]||(r[n]={type:a,key:n,libraryKey:s,name:i,description:o,count:0,fragmentCount:0,countPerFragment:{},scorePerFragment:{},stateCounts:{},proximityScores:[],avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:0});let d=r[n];d.count++,c&&d.proximityScores.push(c.proximityScore);let m=l?`${l.file_key}.${l.node_id}`:null;if(l&&m&&(!d.countPerFragment[m]&&(d.countPerFragment[m]=0,d.scorePerFragment[m]=l.score,d.fragmentCount++),d.countPerFragment[m]++),a===u.PW.STATE_GROUP){let{stateComponentKey:r}=e;d.stateCounts[r]||(d.stateCounts[r]=0),d.stateCounts[r]++}}),Object.values(r).forEach(e=>{let r=Object.values(e.countPerFragment);e.avgCountPerFragment=r.length>0?o()(r):0;let n=Object.values(e.scorePerFragment);e.avgScorePerFragment=n.length>0?o()(n):0,e.avgProximityScore=e.proximityScores.length>0?o()(e.proximityScores):0}),r}async function v(e,r){await s.D.dispatch((0,c.zK)());let n=s.D.getState(),a=(0,d.Ls)(n),i=(0,d.m3)(n),o={};return e.forEach(({type:e,key:n})=>{switch(e){case u.PW.COMPONENT:let s=a[n];s&&(o[n]={...s,suggestionSource:r});break;case u.PW.STATE_GROUP:let l=i[n];l&&(o[n]={...l,suggestionSource:r})}}),o}function T({componentUsage:e,rankingConfig:r}){let n=Object.values(e),a={count:Math.max(...n.map(e=>e.count)),fragmentCount:Math.max(...n.map(e=>e.fragmentCount)),avgCountPerFragment:Math.max(...n.map(e=>e.avgCountPerFragment)),avgScorePerFragment:Math.max(...n.map(e=>e.avgScorePerFragment)),avgProximityScore:Math.max(...n.map(e=>e.avgProximityScore))},i={count:Math.min(...n.map(e=>e.count)),fragmentCount:Math.min(...n.map(e=>e.fragmentCount)),avgCountPerFragment:Math.min(...n.map(e=>e.avgCountPerFragment)),avgScorePerFragment:Math.min(...n.map(e=>e.avgScorePerFragment)),avgProximityScore:Math.min(...n.map(e=>e.avgProximityScore))};return n.map(e=>{let n=(e,r,n)=>n===r?0:(e-r)/(n-r),o=n(e.count,i.count,a.count)*r.count,s=n(e.fragmentCount,i.fragmentCount,a.fragmentCount)*r.fragmentCount,l=n(e.avgCountPerFragment,i.avgCountPerFragment,a.avgCountPerFragment)*r.avgCountPerFragment,c=n(e.avgScorePerFragment,i.avgScorePerFragment,a.avgScorePerFragment)*r.avgScorePerFragment,d=n(e.avgProximityScore,i.avgProximityScore,a.avgProximityScore)*r.avgProximityScore;return{...e,key:e.key,score:o+s+l+c+d}}).sort((e,r)=>r.score-e.score)}function I({componentUsage:e,contextComponentUsage:r}){Object.values(e).forEach(({key:n,countPerFragment:a})=>{let i=r[n];if(!i)return;let o=function(e){if(0===e.length)return 0;if(1===e.length)return e[0];let r=[...e].sort((e,r)=>e-r),n=Math.floor(r.length/2);return r.length%2!=0?r[n]:(r[n-1]+r[n])/2}(Object.values(a));i.count<o||delete e[n]})}},295258:(e,r,n)=>{n.d(r,{rA:()=>o});var a=n(805014),i=n(322330);let o={[a.D1Y.TEXT]:0,[a.D1Y.FRAME_OR_GROUP]:0,[a.D1Y.COMPONENT]:0,[a.D1Y.INSTANCE]:0,[a.D1Y.IMAGE]:0,[a.D1Y.SHAPE]:0,[a.D1Y.OTHER]:0};[...i.b4,...i._V];var s=(e=>(e[e.PREV=-1]="PREV",e[e.NONE=0]="NONE",e[e.NEXT=1]="NEXT",e))(s||{})},464960:(e,r,n)=>{n.d(r,{c:()=>_,o:()=>g});var a=n(411855),i=n(777885),o=n(563192),s=n(693565),l=n(677840),c=n(47795),d=n(631016),u=n(688656),m=n(656927),p=n(289298);class h extends o.uA{constructor(e){super(e),this._onChevronToggleDropdown=()=>{if(this.props.isLoggedOutCommentUser){this.props.showAuthModalForLoggedOutExp?.();return}if(!this.props.dispatch||!this.props.dropdownKey)return;if(this.props.showingDropdown){this.props.dispatch(c.oB());return}let e=this.chevronRef.current;this.props.dispatch(c.j7({type:this.props.dropdownKey,data:{...this.props.additionalDispatchData,targetRect:e.getBoundingClientRect()}})),this.props.rcsHandlerId&&(0,l.YQ)({id:this.props.rcsHandlerId,properties:{dropdownKey:this.props.dropdownKey}})},this.onChevronClicked=o.cZ(this,this.props.toggleOnClick?"click":"mousedown",e=>{this._onChevronToggleDropdown(),this.props.dispatch&&this.props.dropdownKey&&e.stopPropagation()}),this._onChevronStopPropagation=e=>{e.stopPropagation()},e.divRef?this.chevronRef=e.divRef:this.chevronRef=a.createRef()}render(){let e=[m.FH,this.props.showingDropdown?m.u:"",this.props.className||"",this.props.disableHoverAnimation?m.y$:""].join(" "),r=[m.cN,this.props.svgContainerClassName||""].join(" "),n=0===this.props.tabIndex;return a.createElement("div",{className:e,ref:this.chevronRef,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":this.props.tooltipText,onMouseDown:this.props.toggleOnClick?void 0:this.onChevronClicked,onClick:this.props.toggleOnClick?this.onChevronClicked:this._onChevronStopPropagation,"data-testid":this.props.dataTestId,"data-onboarding-key":this.props.dataOnboardingKey,tabIndex:this.props.tabIndex,role:n?"button":void 0,onKeyDown:e=>(0,d.hx)({e,onClickHandler:e=>{this._onChevronToggleDropdown()},onEscapeHandler:e=>{this.chevronRef?.current?.blur()}}),"aria-label":n?this.props.ariaLabel:void 0},this.props.isUI3?a.createElement(i.O,null):a.createElement(s.B,{svg:this.props.iconOverride||p.A,className:r}),this.props.children)}}function _(e){return a.createElement(h,{...e})}function g(e){return a.createElement(h,{...e})}h.displayName="Chevron"},511002:(e,r,n)=>{var a=n(411855);n(805014),n(336427),n(15721),n(846836),(0,a.createContext)({isLeftPanelCollapsed:!1,isRightPanelCollapsed:!1})},561402:(e,r,n)=>{n.d(r,{q:()=>O});var a=n(411855),i=n(188507),o=n(230208),s=n(841962),l=n(612724),c=n(640747),d=n(413453),u=n(76265),m=n(553362),p=n(617721),h=n(47795),_=n(736041),g=n(622667),f=n(535461),E=n(602670),y=n(688656),b=n(710636),v=n(353133),T=n(535711),I=n(239981),S=n(874360),w=n(432892),A=n(525387),C=n(404019);let N={shouldZoomToStart:!1,shouldWheelPan:!0,enableZoomControls:!0,enableZoomKeyControls:!0,minZoomFactor:.01,maxZoomFactor:10,crossOrigin:"use-credentials"};var L=(e=>(e[e.LEFT=-1]="LEFT",e[e.RIGHT=1]="RIGHT",e))(L||{});let O=(0,b.Ju)(function(e){let r=(0,i.wA)(),[n,b]=a.useState(e.selectedIdx),L=a.useRef(null),[O,R]=a.useState(null),P=a.useRef(null),{onUpdateAltText:D}=e,[k,M]=a.useState(e.attachments),F=(0,T.UR)(I.b.ATTACHMENT_MODAL_BACKGROUND_COLOR),x=F?(0,o.H0)(F):void 0,U=e=>{if(L.current){let r=L.current?.children[e].firstChild;r?.blur()}},B=e=>{U(n),b(e),R(null)},V=e=>{B((n+e+k.length)%k.length)},G=e=>{let r=n===(-1===e?0:k.length-1);return a.createElement(p.$,{onClick:()=>V(e),icon:-1===e?"chevron-left-32":"chevron-right-32",variant:"text",disabled:r})},H=e=>{if("ArrowLeft"===e.key)0!==n&&V(-1);else if("ArrowRight"===e.key){if(n===k.length-1)return;V(1)}},W=()=>(r(_.Lo()),!0);(0,E.O1)(W,E.KD.FULL_SCREEN_MODAL);let K=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(h.j7({type:f.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))},Y=a.useRef(null),$=a.useCallback(()=>{if(P.current&&!O){let e=P.current.getBoundingClientRect(),n=new l.Mi(e.left+e.width/2,e.top);r(g.jD()),R(n)}else R(null)},[r,O]),j=a.useCallback(e=>{if(Y.current){let a=Y.current.value.trim();(a||e)&&D(a,n).then(e=>{e&&(200!==e.status?r(m.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")})):M(e=>(e[n]={...e[n],altText:a},e)))}).catch(e=>{r(m.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")}))})}R(null)},[r,D,n]);return a.createElement(a.Fragment,null,a.createElement(d.i,{displayAs:d.C.Block},a.createElement(S.aF,{className:C.zw,size:"any",onKeyDown:e=>{H(e)}},a.createElement("div",{className:C.qG},a.createElement("div",{className:C.N1},a.createElement("div",{className:C.qd},k[n].metadata.file_name??(0,u.t)("comments.attachment_default_name",{fileExtension:k[n].mediaType.split("/")[1]})),a.createElement(c.Jn,{className:C.yu,recordingKey:"commentMediaDetailModal",onClick:W,innerText:(0,u.t)("comments.close"),"aria-label":(0,u.t)("comments.close")})),a.createElement("div",{className:C.xs},a.createElement(w.DH,{imageSrc:k[n].imageUrl,onContextMenu:e=>{K(e,k[n])},pageBackgroundColor:x??void 0,...N}),!!(0,s.kc)().comments_media_alt_text&&(e.canEdit||k[n].altText)&&a.createElement("button",{className:k.length>1?C.dE:C.R5,"data-tooltip-type":y.Ib.TEXT,"data-tooltip":O?void 0:(0,u.t)("comments.add_description"),"data-tooltip-show-above":!0,onClick:()=>O?j(k[n].altText):$(),ref:P},(0,u.t)("comments.alt_text"))),k.length>1&&a.createElement("div",{className:C.Qc},G(-1),a.createElement("div",{ref:L,className:C.iT},k.map((e,r)=>a.createElement("div",{key:e.thumbnailUrl,className:C.ub},a.createElement(A.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,u.t)("comments.attachment_thumbnail_alt_text_default"),isSelected:r===n,onClick:e=>{B(r)},onRightClick:r=>K(r,e)})))),G(1)))),O&&a.createElement(v.A,{text:k[n].altText??"",location:O,onEnter:()=>j(k[n].altText),onEscape:()=>(R(null),!0),inputRef:Y,canEdit:e.canEdit})))},"AttachmentDetailModal",b.ZU.NO)},525387:(e,r,n)=>{n.d(r,{M:()=>_,v:()=>h});var a=n(411855),i=n(463844),o=n(693565),s=n(76265),l=n(834616),c=n(418629),d=n(950142);let u=e=>e.height<256&&e.width<256,m=e=>e.height/e.width>2||e.width/e.height>2,p=e=>e.width>e.height?{width:256,height:128}:{width:128,height:256};function h(e){return a.createElement("div",{className:c.hr},a.createElement(_,{...e}),a.createElement("button",{className:c.P3,onClick:()=>e.onDelete()},a.createElement(o.B,{svg:d.A,className:c.i3})))}function _(e){let r=e.dimensions??void 0,n=r&&(u(r)?r:m(r)?p(r):(0,l.$K)(r.width,r.height,256));return a.createElement("button",{className:e.isSelected?c.ig:c.vi,onClick:()=>{e.onClick(e.thumbnailUrl)},style:n&&{width:`${n.width}px`,height:`${n.height}px`},onContextMenu:r=>{e.onRightClick&&e.onRightClick(r)}},a.createElement("img",{src:e.thumbnailUrl,crossOrigin:"use-credentials",alt:e.altText||(0,s.t)("comments.attachment_thumbnail_alt_text_default"),className:c.q_}),a.createElement("div",{className:e.overlayText||e.isUploading?c.Xu:c.VO},e.isUploading&&a.createElement(i.k,null),e.overlayText))}},428168:(e,r,n)=>{n.d(r,{a:()=>_});var a=n(411855),i=n(188507),o=n(76265),s=n(47795),l=n(736041),c=n(535461),d=n(969273),u=n(561402),m=n(525387),p=n(518692),h=n(418629);function _(e){let r=(0,i.wA)(),{attachments:n}=e,_=a=>{r((0,l.to)({type:u.q,data:{attachments:n,selectedIdx:n.map(e=>e.thumbnailUrl).indexOf(a),onUpdateAltText:g,canEdit:e.canEdit},showModalsBeneath:!0}))},g=(r,a)=>{let i=n[a];return d.l.put(e.fileKey,i.id,r)},f=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(s.j7({type:c.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))};return a.createElement("div",{className:p.KK},n.slice(0,3).map((e,r)=>a.createElement("div",{key:e.id,className:h.Kn},a.createElement(m.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),overlayText:n.length>3&&2===r?`+${n.length-3}`:void 0,onClick:_,onRightClick:r=>f(r,e),dimensions:0===r&&1===n.length?e.metadata.dimensions:void 0}))))}},208253:(e,r,n)=>{n.d(r,{Z5:()=>c,i$:()=>o,uw:()=>l});var a=n(411855),i=n(841962);let o={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},s=new Set;function l(e){if(!(0,i.kc)().internal_only_debug_tools)return;let r="function"==typeof e?e({...o}):e;o={...o,...r},requestAnimationFrame(()=>{s.forEach(e=>e(o))})}function c(){let[e,r]=a.useState(o);return a.useEffect(()=>{let e=e=>{r(e)};return s.add(e),()=>{s.delete(e)}},[r]),e}},110545:(e,r,n)=>{n.d(r,{Ao:()=>s,Ko:()=>c,LX:()=>o,c4:()=>d,xN:()=>l});var a=n(841563),i=n.n(a),o=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ACTIVE=1]="ACTIVE",e[e.DIMMED=2]="DIMMED",e))(o||{});function s(e,r){return`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${r}`}function l(e,r){if(e.isSinglePin&&r.isSinglePin){var n,a;return n=e.pins[0],a=r.pins[0],n.x!==a.x||n.y!==a.y||!i()(n.avatars,a.avatars)||!i()(n.previewMessageMeta,a.previewMessageMeta)||n.isUnread!==a.isUnread||n.numUnreadReplies!==a.numUnreadReplies||n.isResolved!==a.isResolved||!i()(n.selectionBoxAnchor,a.selectionBoxAnchor)||!i()(n.otherBoundingBoxes,a.otherBoundingBoxes)||!i()(n.isPinnedToFile,a.isPinnedToFile)}return e.pins.length!==r.pins.length||e.isUnread!==r.isUnread||e.isPinnedToFile!==r.isPinnedToFile}let c={length:0,leafNodes:new Set([]),all:()=>[],getParentOf:()=>null,zoomScale:-1};function d(e){let r=new Map,n=[];return e.forEach(e=>{if(r.has(e.user.id)){let a=r.get(e.user.id);n[a].num_unread_comments+=e.isUnread?1:0,n[a].num_comments+=1}else n.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),r.set(e.user.id,n.length-1)}),n}},214718:(e,r,n)=>{n.d(r,{p:()=>l});var a=n(411855),i=n(612724),o=n(695024),s=n(487235);function l(e){let r=(0,o.Cj)(),n=i.Mi.scale(-1,r);return a.createElement("div",{className:s.M,style:{top:r.y,left:r.x,height:r.height,width:r.width}},a.createElement("div",{className:s.W,style:{top:n.y,left:n.x}},e.children))}},432979:(e,r,n)=>{n.d(r,{HH:()=>N,xT:()=>T});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(777535),c=n(151314),d=n(733312),u=n(621847),m=n(152095),p=n(76265),h=n(530494),_=n(926996),g=n(15092),f=n(477e3),E=n(688656),y=n(279959),b=n(132479),v=n(621874);function T(e){let r=RegExp("^\\w+:"),n=e.match(r);return""===e||n&&["http:","https:","mailto:","tel:"].includes(n[0].toLowerCase())?e:"https://"+e}let I=a.memo(e=>{let{text:r,hyperlink:n}=e,o=a.useMemo(()=>(0,c.x6)(r),[r]),s=(0,_.z3)(),l=(0,i.wA)();return a.createElement(u.CY,{onClick:()=>{l((0,h.RK)({rawInput:T(n)}))},"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":E.MW.HYPERLINK_POPUP,"data-tooltip-show-above":!0,"data-tooltip-unconstrain-width":!0,"data-tooltip-editor-type":s,"data-tooltip-url-string":n,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,trusted:!1},o)}),S=a.memo(e=>{let{userId:r,imgUrl:n,handle:i,href:o}=e;return a.createElement(u.CY,{href:o,target:"_blank","data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":n,"data-tooltip-user-handle":i,"data-tooltip-unconstrain-width":!0,"data-mention-user-id":r,trusted:!0},i)}),w=a.memo(function(e){let r=g.iZ()?.community_profile_id,{handle:n,commentId:i,profileId:o,profileName:s,profileImgUrl:c}=e,m=(0,d.F)(n),p=(0,d.F)(s);return a.createElement(u.CY,{href:`/${m}`,target:"_blank","data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":c,"data-tooltip-user-handle":p,"data-tooltip-unconstrain-width":!0,onClick:()=>{(0,l.sx)("at_mention_link_clicked",{mentioned_profile_id:o,profile_id:r,comment_id:i})},trusted:!0},m)}),A=a.memo(e=>{let{text:r,tokenStyles:n}=e,i=a.useMemo(()=>(0,c.x6)(r),[r]),o=n?.map(e=>"b"===e?v.hp:"i"===e?v.u5:"s"===e?v.Vc:"lightbold"===e?v.XH:void 0)||[];return a.createElement(m.M,null,a.createElement("span",{className:s()(o)},i))}),C=a.memo(e=>{let{text:r,userId:n,profileId:i,user:o,orgPath:s,profiles:l,commentId:c,tokenStyles:u,hyperlink:m}=e,p=(0,d.F)(r);if(n)return a.createElement(S,{href:`/files${s}/user/${n}`,userId:n,handle:(0,d.F)(o?.handle)||void 0,imgUrl:o?.img_url});if(i&&p){let e="@"+p,r=l?.[i];return r?a.createElement(w,{handle:e,commentId:c,profileId:r.id,profileName:r.name,profileImgUrl:r.img_url}):a.createElement("span",null,e)}if(null===i&&p){let e="@"+p;return a.createElement("span",null,e)}let h=m&&T(m);return h&&p&&(0,b.$)(h)?a.createElement(I,{text:p,hyperlink:h}):p?a.createElement(A,{text:p,tokenStyles:u}):null}),N=a.memo(e=>{let r=(0,f.q)(),n=(0,i.d4)(r=>e.mentionedProfiles||r.communityHub?.comments?.mentionedProfiles),o=(e,r,n,i,s)=>e.map((e,l)=>{let c="";if(e.styles?.includes("ul")?c=v.ty:e.styles?.includes("ol")&&(c=v.A9),e.children?.length){let d=e.children.map((e,d)=>a.createElement("li",{key:`li-${r}-${l}-${d}`,className:c},o(e.children,`${r}-${l}-${d}`,n,i,s)));if(e.styles?.includes("ul"))return a.createElement("ul",{key:`ul-${r}-${l}`},d);if(e.styles?.includes("ol"))return a.createElement("ol",{key:`ol-${r}-${l}`},d)}return a.createElement(C,{key:`${r}-${l}`,orgPath:n,profiles:i||null,commentId:s,text:(0,d.F)(e.t)||void 0,hyperlink:e.link,user:e.user_annotated,userId:e.user_id,profileId:e.profile_id,tokenStyles:e.styles||null})}),{messageMeta:s,showEditedIndicator:l,commentId:c}=e,u=e.className||v.zD;return a.createElement("div",{className:v.$t+" "+u,"data-testid":"comment-message",dir:"auto"},o(s,c,r,n,c),l&&a.createElement("span",{className:v.oh,key:"edited_indicator"},"\xa0",(0,p.tx)("comments.edited")))});N.displayName="CommentMessage"},344993:(e,r,n)=>{n.d(r,{y:()=>a}),n(411855),n(343373),n(509343),n(846836),n(488527);let a={showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,clusterBy:"page",orphanedBy:"deleted_pages"}},792749:(e,r,n)=>{n.d(r,{L9:()=>L,T4:()=>P,ek:()=>x,hh:()=>V,pO:()=>G,vO:()=>U});var a=n(411855),i=n(188507),o=n(805014),s=n(245459),l=n(245954),c=n(841563),d=n.n(c),u=n(151314),m=n(76265),p=n(939094),h=n(178035),_=n(731556),g=n(705011),f=n(843398),E=n(965361),y=n(619560),b=n(895899),v=n(968525),T=n(15092),I=n(797187),S=n(804197),w=n(492366),A=n(535711),C=n(595343);let N=new Set([]);function L(e){return({creationDate:(0,m.t)("comments.sort_by_date"),recent:(0,m.t)("comments.sort_by_last_action"),unread:(0,m.t)("comments.sort_by_unread"),slide:(0,m.t)("comments.sort_by_slide")})[e]}let O=(e,r)=>Date.parse(r.comments[0].created_at)-Date.parse(e.comments[0].created_at),R={creationDate:O,recent:(e,r)=>Date.parse(r.lastRepliedAt||r.comments[r.comments.length-1].created_at)-Date.parse(e.lastRepliedAt||e.comments[e.comments.length-1].created_at),unread:(e,r)=>{let n=Number(e.comments.some(e=>e.isUnread)),a=Number(r.comments.some(e=>e.isUnread));return n===a?O(e,r):a-n},slide:(e,r)=>0};function P(e){return({resolved:(0,m.t)("comments.show_resolved_comments"),yours:(0,m.t)("comments.only_your_threads"),currentPage:(0,m.t)("comments.only_current_page"),currentSlide:(0,m.t)("comments.only_current_slide")})[e]}let D=e=>!e.comments[0].resolved_at,k=e=>e.sidebarItemType===S.kT.COMMENT_THREAD,M=e=>e.sidebarItemType===S.kT.FEED_POST,F={currentPage:!1,currentNode:!1,currentSlide:!1,currentDevModeFocus:!1};function x(e){return({commentsOnly:(0,m.t)("comments.only_comments"),postsOnly:(0,m.t)("comments.only_posts")})[e]}let U={postsOnly:[C.mW.RESOLVED],all:[],commentsOnly:[]};async function B(e,r){if(r){let n=r.replace(u.Py,u.H3);return await e.search(n).then(e=>new Set(e.map(e=>e.item.parentId||e.item.id)))}return N}let V=a.createContext({});function G(e){let r=(0,E.wq)(),n=(0,i.wA)(),c=(0,v.UP)(),u=(0,i.d4)(e=>e.comments.showResolved),m=(0,i.d4)(e=>e.comments.showOnlyParticipating),N=(0,i.d4)(e=>e.mirror.appModel.currentPage),L=e.currentNode||N,O=(0,T.TA)()||void 0,P=(0,i.d4)(e=>e.selectedView.commentThreadId),x=(0,I.ut)(o.Ez5?.singleSlideView().focusedSlideId,s.AD),G=(0,h.hA)(),H=(0,A.Ld)(),[W,K]=a.useState("creationDate"),[Y,$]=a.useState({...F,resolved:!u,yours:m,currentDevModeFocus:!!G,...e.initialFilterState}),[j,z]=a.useState("all"),[q,Z]=a.useState(""),[X,J]=a.useState(null),Q=(0,b.kC)(r),ee=a.useMemo(()=>({resolved:D,yours:e=>O&&e.comments.some(e=>e.user_id===O||(0,y.F$)(e).includes(O))||!1,currentPage:e=>N&&e.page===N||!1,currentNode:e=>{let r=e.comments[0].client_meta;return!!r?.in_frame&&r.node_id===L},currentSlide:e=>{let r=e.comments[0].client_meta?.node_id,n=r?(0,l.UN)().get(r):void 0,a=n?n.containingSlideId:s.AD;return x===s.AD||a===s.AD||a===x},currentDevModeFocus:e=>{let r=G?(0,l.UN)().get(G):null;if(!r)return!0;let n=e.comments[0]?.client_meta?.node_id,a=n?(0,l.UN)().get(n):null;return(0,p.WJ)(r,a)}}),[O,N,L,x,G]),et=a.useMemo(()=>({all:()=>!0,commentsOnly:k,postsOnly:M}),[]),er=a.useCallback(e=>{Z(e)},[]),en=a.useCallback(e=>{n(_.nL({activeSort:e})),K(e)},[n]),ea=a.useCallback(e=>{"resolved"===e&&(n(_.U3({showResolved:Y.resolved})),c&&n((0,f.mH)(Y.resolved))),"yours"===e&&(n(_.RO({showOnlyParticipating:!Y.yours})),c&&n(g.Zj(Y.yours?w.Qv.ALL:w.Qv.ME))),$(r=>(r[e]=!r[e],{...r}))},[n,Y,c]),ei=a.useMemo(()=>{let e=new Set;for(let r of Object.values(C.mW))Y[r]&&e.add(r);return e},[Y]),eo=a.useCallback(e=>{z(e)},[]);a.useEffect(()=>{U[j].forEach(e=>{("resolved"===e?!ei.has(e):ei.has(e))&&ea(e)})},[j,ei,ea]),a.useEffect(()=>{q?B(Q,q).then(e=>{d()(X,e)||J(e)}):J(null)},[r,q,X,Q]);let es=a.useMemo(()=>({...R,...H}),[H]),el=a.useMemo(()=>(function(e,r,n,a,i,o,s,l){if("loaded"!==e.status)return e;let c=[...e.data];for(let e of(l&&(c=c.filter(e=>l.has(e.id))),a))c=c.filter(o[e]);return c=c.filter(s[n]),{...e,data:c.sort(i[r])}})(r,W,j,ei,es,ee,et,X),[r,W,j,ei,es,ee,et,X]),ec=a.useMemo(()=>"loaded"===el.status?{...el,data:el.data.filter(e=>e.sidebarItemType!==S.kT.WALKTHROUGH_MEDIA)}:el,[el]),ed=a.useMemo(()=>({setSort:en,toggleFilter:ea,setMode:eo,setQuery:er}),[er,en,ea,eo]),eu=a.useMemo(()=>({activeQuery:q,activeSort:W,activeMode:j,activeFilters:ei,threads:r,filteredThreads:el,filteredSidebarItems:ec,threadManager:ed}),[q,W,j,ei,r,el,ec,ed]),em=a.useMemo(()=>{if(r&&"loaded"===r.status)return r.data.find(e=>e.id===P)},[P,r]);return a.useEffect(()=>{em&&em.comments[0].resolved_at&&Y.resolved&&ea("resolved")},[Y,em,ea]),a.useEffect(()=>{$(e=>({...e,currentDevModeFocus:!!G}))},[G,$]),a.createElement(V.Provider,{value:eu},e.children)}},587037:(e,r,n)=>{n.d(r,{Uu:()=>g,wV:()=>f});var a=n(411855),i=n(188507),o=n(731556),s=n(619560),l=n(695024),c=n(15092),d=n(127107),u=n(159712),m=n(873650),p=n(167808),h=n(7846);let _=n(219085).ss;function g(e){let r=(0,i.d4)(e=>e.comments.typeahead);return e.mentionsDisabled&&r?.type==="mentions"?null:a.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:!1,decoratorsRef:e.decoratorsRef,width:e.width,direction:e.direction,targetRect:e.targetRect,useFixedPosition:!0,useWindowAsViewport:!0})}function f(e){let r=(0,i.d4)(e=>e.comments.typeaheadPositionOffset),n=a.useMemo(()=>{let n=e.position||{x:0,y:0};return{top:r.top+n.y,right:r.right+n.x,bottom:r.bottom+n.y,left:r.left+n.x,width:r.width,height:r.height}},[r,e.position]),o=(0,s.mz)();return a.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:e.isCommunityMentions,decoratorsRef:e.decoratorsRef,width:o,direction:h.ri.DOWNWARDS,targetRect:n})}function E(e){let r;let n=(0,i.d4)(e=>e.comments.emojiPicker),s=(0,i.d4)(e=>e.comments.typeahead),[g,f]=(0,a.useState)(null);a.useEffect(()=>{s?.type==="suggestions"&&f(u.NS)},[s?.type]);let E=(0,i.wA)(),y=a.useCallback(()=>{E(o.RI({visible:!1}))},[E]),b=a.useCallback(e=>{E(o.We(e))},[E]),v=(0,l._X)({subscribeToUpdates_expensive:!0}),T=a.useMemo(()=>e.useWindowAsViewport?{isPanning:!1,isZooming:!1,height:window.innerHeight}:v,[e.useWindowAsViewport,v]),I=(T?.isPanning||T?.isZooming)&&n?.visible;a.useEffect(()=>{I&&y()},[I,y]);let S=(0,c.iZ)(),w=!!(n&&n.visible||s),{onClear:A}=e,C=a.useCallback(()=>{n&&n.visible&&y(),s&&A()},[n,s,y,A]),{decoratorsRef:N}=e;return a.useEffect(()=>{N&&(N.current={visible:w,clearDecorators:C})},[C,N,w]),r={...r=e.useFixedPosition||e.direction!==h.ri.UPWARDS?g&&e.targetRect.height>0&&e.targetRect.bottom>T.height-g&&e.targetRect.top>T.height-e.targetRect.bottom?e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:h.ri.UPWARDS}:{positionFromBottom:{left:e.targetRect.left,bottom:T.height-e.targetRect.top},direction:h.ri.UPWARDS}:{useFixedPosition:e.useFixedPosition,targetRect:e.targetRect,direction:h.ri.DOWNWARDS}:{positionFromBottom:e.positionFromBottom,direction:h.ri.UPWARDS},useWindowAsViewport:e.useWindowAsViewport},a.createElement("div",{style:{pointerEvents:"auto"}},n&&n.visible&&a.createElement(d._,{onInsert:n.onPick,onCancel:n.onCancel??y,targetRect:n.targetRect}),s&&"emojis"===s.type&&a.createElement(m.j,{dispatchTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,isComments:!0,...r}),S&&s&&"mentions"===s.type&&(s.search||s.mentions.length>0)&&a.createElement(p.E,{dispatch:E,setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,entity:S,isCommunityMentions:e.isCommunityMentions,width:e.width,recordingKey:"mentionsTypeaheadView",dataTestId:"comment-mentions-typeahead",setMaxTypeaheadHeight:f,zIndex:e.isCommunityMentions?void 0:_,isComments:!0,...r}),s&&"suggestions"===s.type&&a.createElement(u.Cs,{setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,...r}))}},315611:(e,r,n)=>{n.d(r,{Kb:()=>v,ny:()=>b});var a=n(411855),i=n(629019),o=n.n(i),s=n(151314),l=n(972142),c=n(76265),d=n(339224),u=n(688656),m=n(848969),p=n(74346),h=n(649586),_=n(855226);function g(e){return void 0!==e.numUsers}let f={};function E(e,r){let n=e.map(e=>e.handle).slice(0,r),a=e.length-r;return a>0&&n.push((0,l.td)(a,"other")),(0,l.Yx)(n)}d.i.forEach(e=>{f[`:${e.id}:`]=e});let y=a.forwardRef(function(e,r){let n=g(e.reaction)?e.reaction.numUsers:e.reaction.users.length,i=Object.keys(e.reaction.skinTonesToUsers).length,l=i>0?Object.keys(e.reaction.skinTonesToUsers):[""],c=l.map(r=>(0,s.UF)(`${e.reaction.emoji}${r}`)[0]),d={};if(!g(e.reaction)){let r=[],n=[];if(i>0)l.forEach(a=>{let o=`${e.reaction.emoji}${a}`;r.push((0,s.UF)(o)[0].unicode);let l=E(e.reaction.skinTonesToUsers[a],Math.floor(40/i));n.push([o,l])});else{r.push((0,s.UF)(e.reaction.emoji)[0].unicode);let a=E(e.reaction.users,40);n.push([e.reaction.emoji,a])}d={emojiUnicodeList:r,emojiShortcodeToUsers:n}}return a.createElement("button",{className:o()({[h.bs]:e.reaction.selected,[h.mJ]:!e.reaction.selected,[h.aN]:!e.visible}),"data-tooltip-type":u.Ib.SPECIAL,"data-tooltip":p.h,"data-tooltip-data":JSON.stringify(d),"data-tooltip-max-width":200,onClick:e.onClick,"data-testid":`reaction-button-${e.reaction.emoji}`,ref:r},c.map(e=>a.createElement("span",{key:`${e.meta}`,className:h.A9},e.unicode)),a.createElement("span",{className:h.U9},n))});function b(e){let r=e.styleClassName?e.styleClassName:h.BB;return a.createElement(m.YW,{svg:_.A,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":(0,c.t)("comments.add_reaction"),onClick:e.onClick,selected:e.selected,className:r,selectedClassName:e.selectedStyleClassName,dataTestId:"add-reaction-button","data-fullscreen-intercept":e["data-fullscreen-intercept"]})}function v(e){let{reactions:r,collapseOverflow:n,onClickExisting:i,children:s,prependToList:l}=e,d=a.useRef(null),u=a.useRef({}),[m,p]=a.useState(null),[_,g]=a.useState(!n);a.useLayoutEffect(()=>{if(!d.current)return;let{width:e}=d.current.getBoundingClientRect(),n=-parseInt(h.h)+parseInt(h.bB),a=0;for(let i of r){let o=u.current[i.emoji];if(!o)return;if((n+=parseInt(h.h)+o.getBoundingClientRect().width)>e||a===r.length-1&&n+40+parseInt(h.h)>e)break;a+=1}p(a)},[r]);let f=null===m?null:r.length-m,E=r.map((r,n)=>{let o=i?e=>i(r,e):void 0;return a.createElement(y,{key:r.emoji,reaction:r,onClick:o,ref:e=>u.current[r.emoji]=e,visible:_||e.addedReaction||null===m||n<m})}),b=!(_||e.addedReaction)&&null!==f&&f>0;return a.createElement(a.Fragment,null,a.createElement("div",{className:o()({[h.KD]:!0,[h.l$]:b,[h._s]:!(_||e.addedReaction)&&null===f}),ref:d},...l??[],E,!b&&s),b&&a.createElement("div",{className:h.Jd},a.createElement("button",{className:h.mJ,onClick:()=>{g(!0)},"data-testid":"show-more-reactions-button"},(0,c.tx)("comments.num_hidden_more",{numHidden:f}))))}},672680:(e,r,n)=>{n.d(r,{K:()=>u});var a=n(411855),i=n(841962),o=n(972142),s=n(76265),l=n(728764),c=n(554907),d=n(101343);function u(e){let r=a.useCallback(()=>{if(e.replyContainerRef?.current){let r=(0,i.kc)().comments_smooth_scroll?"smooth":"auto";e.replyContainerRef.current.scrollIntoView({block:"end",behavior:r})}},[e.replyContainerRef]),n=a.createElement(c.C,{fallback:null,errorFallback:a.createElement(c.e,{type:"thread"}),editorRef:e.editorRef,editorType:e.editorType,dispatch:e.dispatch,user:e.user,typeahead:e.typeahead,mentionables:e.mentionables,threadPosition:e.threadPosition,setHyperlinkLocation:e.setHyperlinkLocation,hyperlinkLocation:e.hyperlinkLocation,setHyperlinkEditorRef:e.setHyperlinkEditorRef,messageMeta:e.messageMeta,attachments:e.attachments,submitText:e.submitText,placeholderText:e.placeholderText,onCancel:e.onCancel,onSubmit:e.onSubmit,onComposeFocus:e.onComposeFocus,onEditStart:e.onEditStart,editorOnInsert:e.editorOnInsert,editorOnClear:e.editorOnClear,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition,isDisabled:e.isDisabled,mountInputFocused:e.mountInputFocused,updateMessage:e.updateMessage,updateAttachment:e.updateAttachment,deleteAttachment:e.deleteAttachment,setIsEditorFocused:e.setIsEditorFocused,isEmojiPickerDisabled:e.isEmojiPickerDisabled,hideEmojiPicker:e.hideEmojiPicker,allowAttachments:e.allowAttachments,recordingKey:e.recordingKey,className:e.className,authorChanged:e.authorChanged,createdAt:e.createdAt,threadId:e.threadId,fileKey:e.fileKey,editingExistingComment:e.editingExistingComment,scrollToBottom:e.replyContainerRef&&r,maintainSelectionOnFocus:e.maintainSelectionOnFocus,ariaLabel:e.authorNames?(0,s.t)("fullscreen.accessibility.reply_to_comment_with_authors",{username:(0,o.Yx)(e.authorNames)}):(0,s.t)("fullscreen.accessibility.reply_to_comment")});return a.createElement("div",{className:d.MP,ref:e.replyContainerRef},a.createElement("div",{className:d.i8},a.createElement(l.H8,{user:e.user||{}})),n)}},946280:(e,r,n)=>{n(411855),n(188507),n(834825),n(841962);var a=n(875877);n(653798),n(76265),n(736041),n(463713),n(353428),n(212507),n(427494),n(176160),n(314540),n(313449),n(487388),n(324225),n(769202),n(257776),n(846836),n(455585),n(574431),n(329695),n(583483),(0,a.atom)(!1)},796155:(e,r,n)=>{n.d(r,{O$:()=>h});var a=n(865474),i=n(934402),o=n(875877),s=n(473982),l=n(62830);(0,o.atom)(null),(0,o.atom)(null);let c=(0,o.atom)(null),d=(0,s.Wh)(()=>(0,o.atom)(e=>{let r=e(c),n=e(a.Iy);return r?n.get(r):null}));(0,s.Wh)(()=>(0,o.atom)(e=>{let r=e(d);return Array.from(r?.rootNodeIdToViolatingNodeIdSet.keys()??[])}));let u=(0,s.Wh)(()=>(0,o.atom)(e=>{let r=e(d),n=e(a.m7),o=r?.violatingNodeIdToRootNodeId.keys(),s=e(a.K9),l=Array.from(o??[]).map(e=>Array.from(n.get(e)?.values()??[])).flat(),c={};for(let e of l){let r=e.groupKey,n=s.get(e.ruleId);if(n&&n.has(e.guid))continue;let a=e.ruleId;a===i.C.REQUIRE_STROKE_COLOR_TOKENS&&(a=i.C.REQUIRE_FILL_COLOR_TOKENS),c[a]||(c[a]={}),c[a][r]||(c[a][r]=[]),c[a][r].push(e)}return c}));(0,s.Wh)(()=>(0,o.atom)(e=>Object.entries(e(u)).reduce((e,[r,n])=>{let a=Object.values(n).flatMap(e=>e.map(e=>e.guid));return e.set(r,a),e},new Map))),(0,s.Wh)(()=>(0,o.atom)(e=>{let r=Object.values(e(u)).reduce((e,r)=>(Object.keys(r).forEach(n=>{e[n]=r[n]??[]}),e),{}),n=Object.keys(r);return{allViolationsByContext:r,allContextKeys:n}})),(0,s.Wh)(()=>(0,o.atom)(e=>Array.from(e(a.Iy).values()).sort((e,r)=>"SIMILARITY"===e.type&&"SIMILARITY"!==r.type?-1:"SIMILARITY"===r.type&&"SIMILARITY"!==e.type?1:r.violatingNodeIdToRootNodeId.size-e.violatingNodeIdToRootNodeId.size)));let m=(0,s.Wh)(()=>(0,o.atom)(e=>{let r=e(d);if(r)return(0,l.ac)(r)})),p=(0,s.Wh)(()=>(0,o.atom)(e=>{let r=e(m),n=e(d),i=e(a.m7);if(!r||!n)return{};let o=n.rootNodeIdToViolatingNodeIdSet.get(r),s={};return Array.from(o??[]).forEach(e=>{let r=i.get(e),n=(0,l.rO)(Array.from(r?.values()??[]));n&&(s[n.groupKey]=n)}),s})),h=(0,s.Wh)(()=>(0,o.atom)({}));(0,s.Wh)(()=>(0,o.atom)(e=>{let r=e(u),n=e(p),a=Object.values(r).flatMap(e=>Object.keys(e)),i={};return a.forEach(e=>{let a=n[e];if(!a){let n=Object.values(r).flatMap(r=>r[e]??[]);a=(0,l.rO)(n)}a&&(i[e]=a)}),i})),(0,o.atom)(!1),(0,o.atom)(null)},62830:(e,r,n)=>{n.d(r,{ac:()=>s,hf:()=>c,rO:()=>l});var a=n(865474);n(885123);var i=n(875877);n(553362);var o=n(671917);function s(e){let r=Array.from(e.rootNodeIdToViolatingNodeIdSet.entries()).sort(([e,r],[n,a])=>a.size-r.size)[0];if(r?.length)return r[0]}function l(e){return[...e].sort((e,r)=>e.guid.localeCompare(r.guid))[0]}function c(){let e=i.atomStore.get(a.v4);return{availableVariables:i.atomStore.get(a.nE),localVariables:i.atomStore.get(o.uk),libraryVariables:e.libraryVariables,libraryVariableSetIdToSet:e.libraryVariableSetIdToSet,subscribedLibraryKeys:e.subscribedLibraryKeys}}},155881:(e,r,n)=>{n(73041),n(343373),n(254903)},977838:(e,r,n)=>{n(411855),(0,n(875877).atom)({isShowing:!1,isFigjamDLTBanner:!1})},3445:(e,r,n)=>{n.d(r,{bK:()=>d,oZ:()=>u,r8:()=>s,uK:()=>c});var a=n(783145),i=n(875877);let o=(0,i.atom)({}),s=(0,i.atomFamily)(e=>(0,i.atom)(r=>r(o)[e],(r,n,a)=>{n(o,r=>({...r,[e]:a}))}));(0,i.atom)(e=>Object.values(e(o)));let l=(0,i.atom)(!1),c=(0,i.atom)({autoScroll:!1});async function d(e,r,n,d){let{guid:u}=e;i.atomStore.set(c,e=>e.autoScroll?{...e,guid:u}:e),d||i.atomStore.set(l,!0),await function(e,r){let{guid:n,name:o}=e,l=.03*o.length;return new Promise(c=>{(0,a.i)(o.length,0,{onUpdate:a=>{!r.signal.aborted&&e.isAlive&&i.atomStore.set(s(n),{guid:n,boundingBox:e.absoluteBoundingBox,state:"deleting",name:o.slice(0,Math.floor(a))})},duration:l,ease:"linear",onComplete:c})})}(e,n),await function(e,r,n){let{guid:o}=e,l=.07*r.length;return new Promise(c=>{(0,a.i)(0,r.length,{onUpdate:a=>{!n.signal.aborted&&e.isAlive&&i.atomStore.set(s(o),{guid:o,boundingBox:e.absoluteBoundingBox,state:"writing",name:r.slice(0,Math.floor(a))})},duration:l,ease:"linear",onComplete:c})})}(e,r,n),s.remove(u),i.atomStore.set(o,e=>{let r={...e};return delete r[u],r}),d||i.atomStore.set(l,!1)}function u(){s.removeAll()}},220970:(e,r,n)=>{n.d(r,{W:()=>o});var a=n(885123);n(875877);var i=n(190500);function o(e,r,n,o){var s,l,c,d;let u=a.D.getState(),m=(s=r,l=e,c=n,d=a.D,{search_session_id:o,node_id:s,node_type:function(e,r){if(!e)return null;let n=r.getState().mirror.sceneGraph.get(e);return n?.type||null}(s,d),query_length:l?.length,contains_at_symbol:l?.includes("@"),result_row_index:c});(0,i.ds)("canvas_mention_search_cancelled",u.openFile?.key,u,m)}n(216448)},915265:(e,r,n)=>{n.d(r,{LL:()=>b,be:()=>v,k6:()=>I,xG:()=>T});var a=n(411855);n(396405);var i=n(217950),o=n(805014),s=n(851169),l=n(841962),c=n(550479),d=n(653798),u=n(726692),m=n(180704),p=n(885915),h=n(889148);let _=Object.create(null);function g(e){return(0,m.w6)(e).catch(()=>null)}let f=new p.A,E=(0,l.ck)("cbbdc3ccc2f650369332a454328722aa11cbd78a");async function y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:a}){let o=500*window.devicePixelRatio,s=81.25*window.devicePixelRatio,[l,d]=await Promise.all([g({url:E,height:o,width:o}),e?g({url:e,height:o,width:o}):null]),u=(0,m.Dl)(o,o),p=u.getContext("2d");if(!l)return"";!function(...e){for(let r of e)if(r&&(!(r instanceof HTMLImageElement)||!r.src||!r.width||!r.height)){let e=r.outerHTML||Object.prototype.toString.call(r);(0,c.$D)(i.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${e}'`))}}(l,d);try{a||p.drawImage(l,0,0,o,o)}catch(e){return S(l,e),""}if(p.arc(o/2,o/2,o/2-s,0,2*Math.PI,!0),p.clip(),d){let e=o-2*s;try{p.drawImage(d,s,s,e,e)}catch(e){return S(d,e),""}}else{if(!n||!r)return"";p.fillStyle=n,p.fillRect(0,0,o,o),p.textBaseline="middle",p.textAlign="center";let e=187.5*window.devicePixelRatio;p.font=`${e}px Inter`,p.fillStyle===h.$C?p.fillStyle=h.PN:p.fillStyle="white",p.fillText(r.substring(0,1).toUpperCase(),o/2,o/2+10*window.devicePixelRatio)}p.scale(window.devicePixelRatio,window.devicePixelRatio);let _=u.toDataURL("image/png");return f.set(_,e,r,n,a),_}function b(e,r,n,i){let[o,s]=(0,a.useState)(f.get(e,r,n,i)||"");return(0,a.useEffect)(()=>{if(!e&&!(r&&n)){s("");return}let a=!1,l=f.get(e,r,n,i);return l!==o&&(l?s(l):y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:i}).then(e=>{a||s(e)})),()=>{a=!0}},[e,r,n,i,o]),o}async function v(e,r){let n=await (0,u.T)(e,_);(0,d.Lo)("activateStampToolWithImageURL","setting stamp tool",{label:r,bytesLength:n?.length}),o.glU.activateStampTool(n,r)}async function T(e,r,n,a,i,l){let c=await (0,u.T)(e,_);(0,s.l7)(l,"drop-face",()=>o.glU.dropFaceOntoCanvas(c,"Face Stamp",r,n,a,i))}function I(e,r){if(e.image)return(0,l.ck)(e.image);if(e.imageFunc)return e.imageFunc(r);throw Error(`Invalid emoji ${e} has no image nor imageFunc`)}function S(e,r){if(r&&(0,c.$D)(i.e.FIGJAM,r),!e)return;let n=e.outerHTML||Object.prototype.toString.call(e);(0,c.$D)(i.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${n}'`))}},503446:(e,r,n)=>{n.d(r,{n:()=>o});var a=n(536737),i=n(786140);let o=[{type:"REACTION",name:"r-fire",image:"d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2",position:2},{type:"REACTION",name:"r-surprised",image:"1429964104bceac90c5c8e731ce4cc50b27e2797",position:1},{type:"REACTION",name:"r-eyes",image:"ffd0635e8f9322352eff0c15411ac0b536b98d87",position:8},{type:"REACTION",name:"r-wave",image:"0606e9d967b5abb6d9a2853c2fff589f2ec2fc05",position:7},{type:"ACTION",name:"r-chat",image:"d1de3f6fe1f8ffa74d3db5203b2df761d0fed1cc",position:6,action:(e,r)=>{(0,i.q)().then(n=>{n||r(a.F6({position:e,source:"emoji_wheel_reactions"}))})}},{type:"REACTION",name:"r-sad",image:"78f60a21d2616c2a24c7645d8636dec855e48ffb",position:5},{type:"REACTION",name:"r-laugh",image:"a83de90bf34495081ce2e8bcaf28d1d2c16e5186",position:4},{type:"REACTION",name:"r-love",image:"ff5be810b821d264cc2c95f665d24a867c34e587",position:3}]},16564:(e,r,n)=>{n.d(r,{WJ:()=>m,hf:()=>d,sn:()=>o,tR:()=>u});var a=n(841962),i=n(76265);let o="s-heart";function s(e){return[{type:"STAMP",name:"s-thumbsUp",image:e.thumbsUp,position:2,label:"Thumbs up",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_up")},{type:"STAMP",name:"s-plusOne",offset:.72,image:e.plusOne,position:1,label:"+1",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.plus_one")},{type:"STAMP",name:"s-star",image:e.star,position:8,label:"Star",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.star")},{type:"STAMP",name:"s-question",image:e.question,position:7,label:"Question",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.question")},{type:"STAMP",name:"s-thumbsDown",image:e.thumbsDown,position:6,label:"Thumbs down",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_down")},{type:"STAMP",name:"s-dot",imageFunc:e.dots,position:5,label:"Dot",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.dot")},{type:"STAMP",name:"s-profile",offset:.73,imageFunc:e.profile,position:4,label:"Profile",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.profile")},{type:"STAMP",name:"s-heart",image:e.heart,position:3,label:"Heart",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.heart")}]}let l={F24E1E:"f5c62908951d5597fd78d43b466a590616ba2693","0FA958":"a80c699432955f63c3613761744dfb61758780ae",FFC700:"a9d0704b01ae94a42c00e495f58e169966099333","5551FF":"87a816dc22c9fe975e6cb531cc7f2b47ff66f26e",D27C2C:"a7115640741f347d4fec9f4f82bf88465e6081f4",848484:"1775b53401dbbb5bfb48ae9b00b650952e5c8d67",EBEBEB:"c3312ab90b95e13d91b5a826628708663e502ddc",667799:"27be94d8a31dc67f2fdf0bc0ed1cd2c7d6c48cba","007BE5":"4f73e22fc8d7e9d55bfb24dcc7b7d6201ca51fb3","9747FF":"d337617455a562b3a0859d87fac6d82f86d8d729",FF24BD:"19e369b3f6531ed8571b6fed7db7e2fe7b4d4517",F24822:"4c9a2a1f92768b87946ec3a4d9000f0fe99d760c",FFCD29:"13a81b40823bfed9e05f4b0eedab902453bf47b3","14AE5C":"fd086d9788aa1e5a4dd7c10436a59d5d51c6c063"},c={"s-heart":"421d20c98db007d377890189b093545f16498acc","s-thumbsDown":"0bda50cfaecc87b58d0a78e8a8768b55a9f67c03","s-star":"cbc8d70c16c1fcf0d8690429564495cce3ab11c0","s-thumbsUp":"5e39a5f28101ed8ca9d9e38275066867c47294e9","s-question":"75a4d8d5c7e5fc18ad3f76ce2c1166b68f9ec046","s-plusOne":"0d4a582f5dd156228c1443c9fd19a331ff8f087b"};function d(e){return s({heart:c["s-heart"],thumbsDown:c["s-thumbsDown"],star:c["s-star"],thumbsUp:c["s-thumbsUp"],question:c["s-question"],profile:()=>e,dots:e=>{let r=l[e]||l["667799"];return(0,a.ck)(r)},plusOne:c["s-plusOne"]})}let u=(0,a.ck)("2b2029d1eabf48358e208427103a2023435751dc"),m=s({heart:"cdb352553f6650801d744ab73fd416222f120bd6",thumbsDown:"1b9c978d009d03d1abececfe15edf721a7c14374",star:"a9c2008e62c6d5a4421a22cd960b5ca54fdbe93f",thumbsUp:"d7c56a0ef07da63ed9f641ab04637704a4744c74",question:"4fe56356e345e558e669ff6e369f0265ee0b7fe7",profile:()=>(0,a.ck)("cb417fb549d06a2fb42e182cddd2b94b1996b768"),dots:()=>u,plusOne:"96363e23778476978d264bfcbd286bc0cbafe6cd"})},424502:(e,r,n)=>{n(411855),n(629019),n(621847),n(773991),n(76265),n(648800),n(278695),n(140835),n(343373),n(287327),n(303596),n(931095),n(460945),n(300665)},80167:(e,r,n)=>{n(411855),n(188507),n(805014),n(241162);var a=n(366172);n(309494),n(303480),(0,n(401562).D)(()=>a.Y5.fromFullscreen)},868049:(e,r,n)=>{n(411855),n(188507),n(805014),n(241162);var a=n(366172);n(309494),n(303480),(0,n(401562).D)(()=>a.Y5.fromFullscreen)},193578:(e,r,n)=>{n.d(r,{a2:()=>s}),n(411855),n(188507);var a=n(511445),i=n(875877);n(241162);let o={x:(0,i.atom)(void 0),y:(0,i.atom)(void 0),cornerRadius:(0,i.atom)(void 0),angle:(0,i.atom)(void 0),width:(0,i.atom)(void 0),height:(0,i.atom)(void 0),fontSize:(0,i.atom)(void 0),fontStyle:(0,i.atom)(void 0),fontFamily:(0,i.atom)(void 0),fillPaints:(0,i.atom)(void 0),strokePaints:(0,i.atom)(void 0),effects:(0,i.atom)(void 0)},s=(0,a.s)(e=>{let r=o[e];r&&i.atomStore.set(r,e=>!e)},200,!0)},370939:(e,r,n)=>{n(411855),n(629019),n(891720)},153873:(e,r,n)=>{n.d(r,{Zk:()=>I,x0:()=>T}),n(411855);var a=n(217950),i=n(841962),o=n(875877),s=n(977235),l=n(550479),c=n(653798),d=n(399991),u=n(73041),m=n(965467);n(15092);var p=n(183739),h=n(527505);n(824794);var _=n(838213),g=n(47227);n(314328);var f=n(886816);let E=(0,o.atomWithLocalStorage)("frecencyHistory",{numItems:0,userIds:{}},{subscribeToChanges:!1},{debounceTime:1e3}),y=(0,o.atom)(e=>e(p.Fr3.Query({})));class b{constructor({json:e,setJson:r,userId:n,fullscreenEditorType:a}){this.MAX_ENTRIES=5e3,this.numItems=e.numItems,this.userIds=e.userIds,this.setJson=r,this.fullscreenEditorType=a??"none",this.userId=n??"anonymous",this.cachedActions=this.initActions(),this.cachedQueries=this.initQueries()}addUsage(e,r){let n=this.getActions();n.addUsage(e)&&this.incrementTotalItems();let a=this.getQueries();a.addUsage(r,e)&&this.incrementTotalItems(),this.userIds[this.userId]={...this.userIds[this.userId],[this.fullscreenEditorType]:{actions:n.serialize(),queries:a.serialize()}},this.numItems>this.MAX_ENTRIES&&this.prune(),this.save(),h.I.updateFrecencyHistory({actionKey:e,timestamp:Date.now(),editorType:this.fullscreenEditorType})}prune(){let e=Object.entries(this.userIds).flatMap(([e,r])=>Reflect.ownKeys(r).flatMap(n=>{let a=r[n];if(!a)return[];let{actions:i,queries:o}=a,s=Object.entries(i).flatMap(([r,{timestamps:a}])=>({userId:e,editorType:n,action:r,timestamp:a[0]})),l=Object.entries(o).flatMap(([r,a])=>Object.entries(a).flatMap(([a,{timestamps:i}])=>({userId:e,editorType:n,action:a,query:r,timestamp:i[0]})));return s.concat(l)}));e.sort((e,r)=>e.timestamp-r.timestamp);let r=this.MAX_ENTRIES/2;for(let n=0;n<r;n++){let{userId:r,editorType:a,action:i,query:o}=e[n],s=this.userIds[r][a];s&&(void 0!==o?delete s.queries[o][i]:delete s.actions[i],this.userIds[r][a]=s,this.numItems-=1)}}incrementTotalItems(){this.numItems+=1}initActions(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.actions??{};return new _.l(e)}initQueries(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.queries??{};return new g.B(e)}getActions(){return this.cachedActions}getQueries(){return this.cachedQueries}save(){try{this.setJson({numItems:this.numItems,userIds:this.userIds}),v=this}catch(e){(0,c.x1)("error","Failed to save frecency data",e,{reportAsSentryError:!0})}}setMaxEntriesForTesting(e){(0,d.Lg)()&&(this.MAX_ENTRIES=e)}}let v=null;function T(){let e=o.atomStore.get(m.N).data,r=o.atomStore.get(u.u8);v&&v.userId===e&&v.fullscreenEditorType===r||(v=new b({json:o.atomStore.get(E),setJson:e=>o.atomStore.set(E,e),userId:e,fullscreenEditorType:r}));let n=function(e,r){if(!e.data)return null;let n=(0,s.oA)(e.data.actionsHistory);return n&&n.frecencyHistory?function(e,r){let n=function(e){let r;try{r=JSON.parse(e)}catch(r){return(0,l.$D)(a.e.AI_FOR_PRODUCTION,Error(`Invalid JSON value for frecency history from DB: ${e}`),{}),null}let n=f.SR.safeParse(r);if(!n.success)return(0,l.$D)(a.e.AI_FOR_PRODUCTION,Error(`Invalid format for frecency history object from DB: ${e}`),{}),null;let i={};for(let[e,r]of Object.entries(n.data)){let n=Number(e);if(!f.B3.safeParse(n).success)return(0,l.$D)(a.e.AI_FOR_PRODUCTION,Error(`Invalid key in frecency history object from DB: ${e}`),{}),null;i[n]=r}return i}(e);if(n&&r){let e=n[r]?.actions;if(e)return new _.l(e)}return null}(n.frecencyHistory,r):null}(o.atomStore.get(y),o.atomStore.get(u.u8));return{actions:(0,i.kc)().qa_recently_used_db_read&&n?n:v.getActions(),queries:v.getQueries()}}function I(){o.atomStore.set(E,{numItems:0,userIds:{}}),v=null}},769202:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(805014),s=n(851169),l=n(311606),c=n(281935),d=n(841962),u=n(875877),m=n(866415),p=n(563192),h=n(152001),_=n(666249),g=n(47795);n(965361);var f=n(535461),E=n(375887),y=n(777829),b=n(310020);n(581163);var v=n(140835);n(648735),n(696441),n(978747);var T=n(643225),I=n(72411),S=n(19776),w=n(758121),A=n(901152);n(999538),n(407498);var C=n(510669),N=n(421023);n(77383);var L=n(914077),O=n(779099),R=n(465424),P=n(738402),D=n(689954);n(677840);var k=n(612724),M=n(228432),F=n(506925),x=n(47426),U=n(736041),B=n(710636),V=n(991944),G=n(769901);(0,B.Ju)(function(){let e=(0,i.wA)(),r=a.useCallback(()=>{e(U.AS())},[e]),[n,o]=(0,u.useAtom)(M.cH),[s,l]=(0,u.useAtom)(x.MW),[c,d]=(0,u.useAtom)(F.Oq);return a.createElement(V.vx,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new k.Mi(0,0),onClose:r},a.createElement("div",{className:G.kL},a.createElement("div",{className:G.zN},a.createElement("input",{type:"checkbox",onChange:e=>o(e.target.checked),checked:n}),a.createElement("span",{className:G.Pf},"Debugger break in template execution")),a.createElement("div",{className:G.zN},a.createElement("input",{type:"checkbox",onChange:e=>l(e.target.checked),checked:s}),a.createElement("span",{className:G.Pf},"Log Code Connect document")),a.createElement("div",{className:G.zN},a.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),checked:c}),a.createElement("span",{className:G.Pf},"Log JS before execution"))))},"CodeConnectDebugModal"),n(241162);var H=n(176160);n(303480),n(314540);var W=n(923219),K=n(688656),Y=n(868911),$=n(208253),j=n(533853);function z(e){let[r,n]=a.useState(e.initialValue),o=a.useCallback(e=>{(0,W.gl)(e)||n(e.valueOf())},[n]),s=(0,i.wA)();return a.useEffect(()=>{(0,$.uw)({[e.configPropertyName]:r})},[r,e.configPropertyName]),a.createElement(Y.Ht,{className:j.hF,"data-tooltip-type":K.Ib.TEXT,min:e.minVal,max:e.maxVal,bigNudgeAmount:e.bigNudgeAmount,smallNudgeAmount:e.smallNudgeAmount,"data-tooltip":e.propertyDescription,dispatch:s,value:r,onValueChange:o},a.createElement("span",{className:j.Pf},e.displayName))}(0,B.Ju)(function(){let e=(0,i.wA)(),r=a.useCallback(()=>{e(U.AS())},[e]);return a.createElement(V.vx,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new k.Mi(0,0),onClose:r},a.createElement("div",{className:j.kL,onMouseDown:e=>{e.stopPropagation()}},a.createElement(z,{configPropertyName:"minZoomPercentage",initialValue:$.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),a.createElement(z,{configPropertyName:"zoomScaleOverlap",initialValue:$.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),a.createElement(z,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:$.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),a.createElement(z,{configPropertyName:"rebuildClustersZoomDelay",initialValue:$.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal"),n(322412),n(552825);var q=n(697737),Z=n(6253),X=n(499008),J=n(398016);class Q extends Error{}async function ee({dispatch:e,fileKey:r,log:n=()=>{}}){try{n("Generating file version...");let a=(await Z.m(r,"Exported to ML account","",e,!0))?.id;if(void 0===a)throw Error("undefined versionId");n(`Exporting file version ${a}...`);let{meta:{run_key:i}}=(await q.Ay.post(`/api/ml/export/file_version/${a}`)).data;n(`Waiting for run ${i}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:r,s3_uri:a}}=(await (0,q.Ay)({url:`/api/ml/export/status/${encodeURIComponent(i)}`})).data;if(r){n(`Export manifest is ready at ${a}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof Q)return;n("Failed!"),n(`${e}`)}}(0,B.Ju)(function(){let e=(0,i.wA)(),r=a.useCallback(()=>{e(U.AS())},[e]),[n,o]=a.useState([]),s=(0,H.tS)();return a.useEffect(()=>{let n=!1,a=e=>{if(n)throw new Q;o(r=>r.concat([e]))};return null===s?a("No open file"):ee({dispatch:e,fileKey:s,log:a}),()=>{n=!0,r()}},[r,e,s]),a.createElement(X.XV,{title:"ML Export",headerSize:"large",minWidth:300,onClose:r},a.createElement("div",{className:J.k},n.join("\n")))},"MLExportModal");var et=n(768482);let er="preferences-menu",en=(0,w.ck)();class ea extends p.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=e=>{(0,S.jr)(e,S.W0.NO)},this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,b.A)(er)]}componentDidUpdate(e,r){if(super.componentDidUpdate(e,r),this.props.selectionToUpdate&&this.props.selectionToUpdate===o.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,E.k$)(e)||(0,E.gN)(e)||(0,E.id)(e)||!e.name||e.name!==er?(this.selectPreferencesMenu(),this.props.dispatch(g.ho({type:O.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(g.oB())}}menuItems(){return(0,y.p)({fileMenuArgs:{branchingActionsStatus:this.props.branchingActionsStatus,saveAsState:this.props.saveAsState,topLevelMode:this.props.appModel.topLevelMode,unreadCommentCount:this.props.unreadCommentCount,isOrgMember:this.props.isOrgMember,shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:this.props.pluginAndWidgetMenuArgs,additionalDebugItems:this.props.debugMenuItems,theme:this.props.theme,backToFileArgs:{shouldShowBackToFiles:(!en||en&&(0,A.MP)()&&!!(0,d.kc)().integ_zoom_allow_file_switching)&&!c.eD&&!(0,l.ce)(),isDisabled:!this.props.userStateLoaded},zoomArgs:{canZoomOut:this.props.canZoomOut,canZoomIn:this.props.canZoomIn},publishingModalArgs:{isPublishingModalDisabled:this.props.isPublishingModalDisabled}})}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null;return a.createElement("div",{className:`${f.Dm}`},a.createElement(ei,{recordingKey:"mainMenu",ref:this.multilevelDropdownRef,menuItems:this.menuItems(),onKeyDown:this.onKeyDown,controlledByID:this.props.controlledByID,"aria-labelledby":this.props["aria-labelledby"],activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0}),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:this.props.selectedView.editorType===L.nT.Design,lean:this.props.isUI3?"right":void 0,...this.props}))}}ea.displayName="FullscreenMainMenu",(0,i.Ng)((e,r)=>{let n={view:"recentsAndSharing"},a=e.openFile;a&&a.folderId&&(0,T.N5)(e.folders,a.folderId)&&(n={view:"folder",folderId:a.folderId});let i=e.selectedView;return{appModel:e.mirror.appModel,userStateLoaded:e.userStateLoaded,selectedView:i,recentlyUsedPlugins:r.recentlyUsedPlugins,backToFilesHref:(0,N.Np)(e,n),saveAsState:e.saveAsState,dropdown:r.dropdown,branchingActionsStatus:r.branchingActionsStatus,memoryWarningLevel:r.memoryWarningLevel,debugMenuItems:r.debugMenuItems,selectionToUpdate:e.dropdownShown?.data?.selectionToUpdate,theme:e.theme.themePreference,unreadCommentCount:r.unreadCommentCount,canZoomIn:r.canZoomIn,canZoomOut:r.canZoomOut,isOrgMember:(0,C.canMemberOrg)(e.currentUserOrgId,e),isLimitedDevMode:(0,P.$A)(e.selectedView)&&!(0,_.tn)(e),isPublishingModalDisabled:r.isPublishingModalDisabled}})(ea);class ei extends a.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,r)=>{s.l7.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,E.Dz)(e),e.args,this.props.dispatch,r),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(h.n.set({message:e.loadingIndicatorString,callback:()=>{I.VU.get(n,e.source??"menu",e.args)(r)}})):I.VU.get(n,e.source??"menu",e.args)(r)}})},this.transformMenuItems=(0,m.xx)(e=>(0,et.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(g.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?a.createElement(v.fu,{name:R.e0.EDITOR_MENU},a.createElement(D.j,{ref:this.multilevelDropdownRef,items:e,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,activatePathOnMount:this.props.activatePathOnMount,lean:this.props.lean,...this.props})):null}}ei.displayName="FullscreenMultilevelDropdown"},51004:(e,r,n)=>{n.d(r,{xm:()=>y});var a=n(846288),i=n(220848),o=n.n(i),s=n(170097),l=n(841962),c=n(13403),d=n(375887),u=n(407093),m=n(779099),p=n(456112),h=n(824794),_=n(153873),g=n(768482),f=n(246065),E=n(630691);class y{constructor(e,r,n,a){for(let i of(this.searchMap={},this.searchMapKeys=[],this.includeDisabled=!1,this.acceptsUnicode=!1,this.queryStringMap={},this.includeDisabled=!!(a&&a.includeDisabled),this.acceptsUnicode=!!(a&&a.acceptsUnicode),n.forEach(n=>this.addFigmaMenuItemsToSearchMap(e,r,n)),this.searchMapKeys=Object.keys(this.searchMap),this.searchMapKeys)){let e=this.searchMap[i],r=e.queryString?`${e.queryString} ${i}`:i;this.queryStringMap[r]=e}}addFigmaMenuItemsToSearchMap(e,r,n){if(!n||(0,d.k$)(n)||(0,d.gN)(n)||(0,d.id)(n)||!(0,g.UN)(n,{isDesktopMenu:!1,isReadOnly:e.isReadOnly,isSearching:!0,selectedView:r}))return;let i="children"in n;if(!(0,d._o)(n)||i||n.hideForQuickCommand||this._addToIndexInternal(n),"plugins-menu"!==n.name&&"widgets-menu"!==n.name&&i)for(let i of((0,a.KF)(null!=n.children,"this should be the type of menu groups that has FullscreenMenuItem as children"),n.children))this.addFigmaMenuItemsToSearchMap(e,r,i)}_addToIndexInternal(e){let{itemDisplayText:r,searchItem:n}=function(e){let r=(0,p.EG)(e),n={fullscreenMenuAction:e,queryString:"",searchKey:r};if("plugins-menu-item"===e.name){let r=e.extensionSearchString||"";n.searchKey=r}return e.isRepairCommand&&(0,l.kc)().internal_only_debug_tools&&!(0,h.h8)()&&(n.queryString="repair"),e.searchSynonyms&&!(0,h.h8)()&&(n.queryString=[n.queryString,...e.searchSynonyms].join(" ")),{itemDisplayText:r,searchItem:n}}(e);this.searchMap[r]=n}getItem(e,r){if(!(r in this.searchMap))return;let n={...this.searchMap[r].fullscreenMenuAction};return n.disabled=b(e,n),n}_buildSearchResult(e,r,n,a){let i={...r},o={...i.fullscreenMenuAction};return o.stringMatchedAgainst=n?.text||"",o.substringMatchScore=a?.score||0,o.substringMatchedAgainst=a?.text||"",o.stringMatchScore=this._getStringMatchScore(o,n),o.popularityScore=(0,u.a)(o.action),o.disabled=b(e,o),{...i,fullscreenMenuAction:o}}_getStringMatchScore(e,r){return void 0!==e.isLowPriorityMatch&&e.isLowPriorityMatch?0:r?.score||0}_searchByFuzzyMatchAndSubstringMatch(e,r){if(!r)return[];let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let a=new c.dU(r),i=[];for(let[r,s]of Object.entries(this.queryStringMap)){let l=n.matchAgainstText(r),d=l?.score||0,u=[];for(let e of(u.push(a.matchAgainstText(r,c.cT.VISIBLE)),s.fullscreenMenuAction.searchSynonyms||[])){let r=a.matchAgainstText(e,c.cT.HIDDEN);u.push(r)}let m=o()(u,e=>e.score),p=m?.score||0;(d>0||p>0)&&i.push(this._buildSearchResult(e,s,l,m))}return i}_searchByFuzzyMatch(e,r){let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let a=[],i=n.matchAgainst(Object.keys(this.queryStringMap));if(i.length)for(let r of i){if((0,h.h8)()&&r.score<1)continue;let n={...this.queryStringMap[r.text]};a.push(this._buildSearchResult(e,n,r))}return a}_searchForSearchItem(e,r){if(!r)return[];let n=[];n=(0,h.h8)()?this._searchByFuzzyMatchAndSubstringMatch(e,r):this._searchByFuzzyMatch(e,r);let a=(0,h.h8)()?(0,E.ou)({...(0,_.x0)(),acceptsUnicode:this.acceptsUnicode}):f.r;return n=n.sort((e,n)=>a.sort(r,e,n)),this.includeDisabled||(n=n.filter(e=>!e.fullscreenMenuAction.disabled)),n}search(e,r){return this._searchForSearchItem(e,r).map(e=>e.fullscreenMenuAction)}searchIncludeKey(e,r){return this._searchForSearchItem(e,r).map(e=>[e.searchKey,e.fullscreenMenuAction])}list(e){let r=this.searchMapKeys.map(r=>{let n={...this.searchMap[r].fullscreenMenuAction};return n.popularityScore=(0,u.a)(n.action),n.disabled=b(e,n),n});return r.sort((e,r)=>(r.popularityScore||0)-(e.popularityScore||0)),r}map(e){let r={};return this.searchMapKeys.forEach(n=>{let a={...this.searchMap[n].fullscreenMenuAction};a.popularityScore=(0,u.a)(a.action),a.disabled=b(e,a),r[a.name||a.action||n]=a}),r}}function b(e,r){return r.disabled?r.disabled:!(r.name||(0,m.Yh)(e,r.action)||r.quickAction?.alwaysEnabled)}},118454:(e,r,n)=>{n.d(r,{$O:()=>l,Z8:()=>s}),n(188507),n(217950);var a=n(758271),i=n.n(a);n(885123),n(841962);var o=n(875877);n(977235),n(139879),n(550479),n(628220),n(648735),n(176160),n(183739),n(263352),n(492366),n(505534),n(7395);let s=(0,o.atom)([]);function l(){return i()(o.atomStore.get(s),"displayName")}},939045:(e,r,n)=>{n.d(r,{d:()=>F}),n(577713);var a=n(411855),i=n(109388),o=n(188507),s=n(747579),l=n(805014),c=n(245459),d=n(245954),u=n(777535),m=n(991458),p=n(866415),h=n(612724),_=n(73041),g=n(366172),f=n(509343),E=n(806273),y=n(963993),b=n(314540),v=n(797187),T=n(132165),I=n(549147),S=n(488527);let w=new Set(["DOCUMENT","CANVAS","NONE"]),A=(0,m.jz)(S.y9S),C=(0,m.jz)(S.IuL),N=(0,m.jz)(S.LQy),L=(0,m.jz)(S.MJh),O=(e,r,n)=>n?e===b._Y.WHITEBOARD?r?N:C:r?L:0:0,R=(0,p.xx)((e,r,n,a,i)=>{let{x:o,y:s,offsetX:l,offsetY:c,width:d,height:u,zoomScale:m}=e;r&&(o+=A,s+=A,l+=A/m/2,c+=A/m/2,d-=A,u-=A,d=Math.max(d,0),u=Math.max(u,0));let p=O(a,i,n);return u-=p,u=Math.max(u,1),c-=p/m/2,{...e,x:o,y:s,offsetX:l,offsetY:c,width:d,height:u}}),P=e=>{let r=e.split(",");if(r.length)return r[0].replace(/[\[\]\s]/g,"")},D=e=>e.replace(/[\[\]\s]/g,"").split(",");function k(e,r,n){let a;let i=l.glU.getActiveCommentAnchorData();a=n&&i&&i.stablePath!==c.x7&&i.stablePath.length>0?i.stablePath:l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath;let o={canvasPosition:e,pageId:r,viewport:g.Y5.getViewportInfo(),createdIn:window.FigmaMobile?"mobileViewer":"fullscreen"};if(null==a||a===c.x7)return o;let s=l.Egt.getBoundsForStablePath(a);if(!s&&n&&((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!0},{forwardToDatadog:!0}),s=l.Egt.getBoundsForStablePath(a)),!s)return((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!1},{forwardToDatadog:!0}),r)?{...o,nodeId:r,inFrame:!1,stablePath:[r]}:o;let d={x:s.x,y:s.y},m=h.Mi.subtract(e,d),p=P(a);return{...o,nodeId:p,nodeOffset:m,inFrame:r!==p,stablePath:D(a)}}function M(e){let r=(0,v.J2)((0,f.UK)().renderRulers),n=(0,o.d4)(e=>e.mirror.appModel.showUi),u=(0,_.lg)(),m=a.useRef(g.Y5.getViewportInfo()),[p,h]=a.useState(g.Y5.getViewportInfo()),E="ui3"===(0,s.DP)().version;!function(e){let r=(0,o.d4)(e=>"prototype"===e.selectedView.view||"communityHub"===e.selectedView.view);a.useEffect(()=>{!r&&g.Y5.isReady()&&(e(g.Y5.getViewportInfo()),(0,T.H)())},[e,r]),a.useEffect(()=>{let r=r=>{(0,i.flushSync)(()=>{e(r)})};return g.Y5.viewport.on("onSetViewport",r),()=>{g.Y5.viewport.removeListener("onSetViewport",r)}},[e])}(a.useCallback(e=>{m.current=e,h(e)},[h]));let b=a.useMemo(()=>({getViewportInfo:()=>R(m.current,r,n,u,E),getRawViewportInfo:()=>m.current,getCommentsWrapperOffset:e=>({x:0,y:1}),setCanvasSpaceCenter:e=>l.glU.setCanvasSpaceCenter(e.x,e.y),setZoomScale:(e,r)=>l.glU.setCanvasZoomScale(r),setHovering:e=>{if(!e){(0,y.Uc)(c.AD);return}let r=l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath,n=r?(0,d.UN)().getFromStablePath(D(r)):null;n&&!w.has(n.type)?(0,y.Uc)(n.guid):(0,y.Uc)(c.AD)},setCurrentPageIdAsync:async e=>await (0,d.UN)().setCurrentPageFromNodeAsync(e),pageIdForNodeId:e=>l.glU.getPageIdFromNode(e),getCommentDestinationForCanvasPosition:k,getValidCommentsRect:()=>null}),[r,n,u,E]),S=a.useMemo(()=>new I.f5(b,{...I.Pe,isGetViewportAtomic:!0}),[b]);return a.createElement(I.kw.Provider,{value:S},a.createElement(I.aF,{latestViewport:p},e.children))}function F(e){return(0,E.q)()?a.createElement(M,null,e.children):a.createElement(a.Fragment,null,e.children)}},765273:(e,r,n)=>{n.d(r,{DS:()=>V,Qp:()=>K,R$:()=>W,WD:()=>Y,_W:()=>M,aF:()=>G,kh:()=>k,ob:()=>D,q0:()=>F,r1:()=>x,t$:()=>U});var a=n(411855),i=n(188507);n(229808);var o=n(217950),s=n(805014),l=n(245954),c=n(11266),d=n(777535),u=n(991458),m=n(512729);n(841962);var p=n(875877),h=n(728722),_=n(977235),g=n(550479),f=n(255191),E=n(875585),y=n(299009),b=n(76265),v=n(198727),T=n(7842),I=n(176160),S=n(314540),w=n(183739),A=n(841924),C=n(773283),N=n(578706),L=n(743221),O=n(499008),R=n(182032),P=n(638596);let D={alwaysPan:!0,maxScale:1},k={alwaysNavToSimilarViewport:!0},M=300,F=.5,x=4;function U(e,r){let n=(0,i.d4)(e=>e.openFile?.key),a=(0,i.d4)(e=>e.mirror.appModel.currentPage),o=r??a,s=(0,i.d4)(e=>e.fileVersion);return!!n&&!!o&&!!e&&(0,C.cn)(n,o,e,(0,L.N)(s))===p.atomStore.get(C.tP)}N.mg.COMPARE_THUMBNAIL;let B=(0,p.atom)("");function V(e){let r=new l.qo(s.juq.LIVE_FILE),n=(0,c.ei)(e,!1,r),u=n?.createdAt||null,f=u?new Date(u).toISOString():void 0,E=n?.lastEditedAt||null,y=E?new Date(E&&E%6e4==0&&E<17061264e5?E+6e4:E).toISOString():void 0,b=c.E1()?.toISOString(),T=(0,i.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.filterStatusVersions),N=function(e){let r=(0,I.tS)(),n=function(e){let r=(0,I.q5)(),n=r?.key,i=(0,h.Rs)(w.WND,{nodeId:e,fileKey:n??""},{enabled:!!n&&!!e}),[s,l]=(0,p.useAtom)(B);return(0,m.h)(()=>l("")),a.useMemo(()=>{if("loaded"===i.status){let r=i.data.file;if(r.status===_.tT.Error)return(0,g.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: File error = "+r.error)),null;let n=r.data?.devModeActivity;if(!r.data||!n||0===n.length)return[];let a=n.filter(e=>e.activityType===S.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime()),c=`${e} - ${a.length}`;return e&&c!==s&&(l(c),(0,d.sx)("dev_mode.activity.fetch_activity_log",{numEntries:a.length},{forwardToDatadog:!0})),a}return"errors"===i.status?((0,g.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: "+JSON.stringify(i.errors))),null):"loading"===i.status?"loading":null},[i,s,e,l])}(e??""),i=e?("loading"===n?null:n)?.map(e=>e.version?.id).filter(v.t):void 0,s=(0,C.kT)({fileKey:r,pageSize:200,versionIds:i}),[l]=(0,A.IT)(s,{enabled:!!r});return a.useEffect(()=>{"errors"===l.status&&(0,g.$D)(o.e.FEEDBACK,Error(`Version fetch in CC error: ${l.errors}`))},[l.status]),{versions:l.data||[],requestStatus:"loading"===n?"loading":l.status}}(T?e:void 0),L=a.useMemo(()=>T?N.versions:function(e,r,n,a){let i=[],o=!1;function s(){if(i.length>0){let e=i[i.length-1];e.frameCreated=!0,e.frameEdited=void 0}}for(let l of e){let e={...l};if(e.canvas_url&&(!o&&a&&e.created_at&&e.created_at<a&&(o=!0,e.lastViewed=!0),!r||!(e.edited_at>r))){if(n&&e.edited_at<n)return s(),i;i.push(e)}}return s(),i}(N.versions,y,f,b),[N.versions,y,f,b,T]),{requestStatus:O}=N;return{versions:L,versionsQueryLoaded:"loaded"===O||"disabled"===O}}function G({title:e,onClose:r,children:n}){let i=(0,u.jz)(R.compareChangesModalWidth);return a.createElement(O.XV,{title:e,fixedCenter:!0,disableClickOutsideToHide:!0,onClose:r,headerClassName:P.wx,containerClassName:P.ik,maxWidth:i,innerContainerClassName:P.Hb,focus:!0},n)}function H(e){return!!e&&e.hasOwnProperty("getImage")}function W(e){let{view:r,opacity:n,Overlay:i,hideNoImageText:o,header:s}=e,l=()=>void 0!==n?{opacity:n}:{},c=a.useMemo(()=>H(e.image)?e.image:e.image&&{data:e.image.image,width:e.image.width,height:e.image.height,scale:e.image.scale||x},[e]);return a.createElement("div",{className:r===f.Ss.SIDE_BY_SIDE?P.KJ:P.DF},!!s&&a.createElement("div",{className:P.Lg},s),!c&&a.createElement("div",{className:P.$0},!o&&(0,b.tx)("collaboration.feedback.compare_changes_modal.no_image_found")),H(e.image)?a.createElement(E.Nf,{className:P.Sl,style:{...l()},image:c,Overlay:i}):c&&a.createElement(E.ec,{className:P.Sl,style:{...l()},image:c,Overlay:i}))}function K(){return a.createElement("div",{className:P.GE},a.createElement(y.qc,null))}function Y(e,r){let n=e?.toString();n&&r(T.lW({stringToCopy:n}))}},845936:(e,r,n)=>{n.d(r,{xX:()=>l,$_:()=>c});var a=n(411855);n(188507),n(805014),n(777535);var i=n(890882);n(841962),n(299009),n(693565),n(132939);var o=n(76265);n(773283),n(688656);var s=n(712204);function l(e,r=!1){let n=(0,i.A)(new Date),a=(0,i.A)(e);return a.isSame(n,"day")?(0,o.t)("collaboration.feedback.time_hour_minutes",{time:a.toDate()}):a.isSame(n,"year")?(0,o.t)("collaboration.feedback.time_date_minutes_without_year",{time:a.toDate()}):r?(0,o.t)("collaboration.feedback.time_date_minutes",{time:a.toDate()}):(0,o.t)("collaboration.feedback.date",{time:a.toDate()})}function c(e,r){return e?a.createElement(s.Ro,{size:r,entity:{img_url:e}}):a.createElement("div",{className:"diffing_compare_summary--noUserImage--XijV0"})}n(848969)},821718:(e,r,n)=>{n.d(r,{Ah:()=>eZ,Cr:()=>eQ,YL:()=>eJ,aS:()=>e3,jP:()=>e0,ur:()=>eX});var a=n(411855),i=n(188507),o=n(846288),s=n(217950),l=n(861110),c=n(493498),d=n(625543),u=n(623817),m=n(766794),p=n(130570),h=n(738958),_=n(967790),g=n(871432),f=n(805014),E=n(629019),y=n.n(E),b=n(777535),v=n(489178),T=n(991458),I=n(841962),S=n(666308),w=n(977235),A=n(298359),C=n(747484),N=n(801828),L=n(563192),O=n(137565),R=n(550479),P=n(653798),D=n(918091),k=n(621847),M=n(901963),F=n(299009),x=n(693565),U=n(132939),B=n(265851),V=n(719334),G=n(76265),H=n(553362),W=n(233950),K=n(152664),Y=n(224623),$=n(895152),j=n(206908),z=n(47795),q=n(225371),Z=n(736041),X=n(742198),J=n(358275),Q=n(535461),ee=n(310020),et=n(278695),er=n(140835),en=n(181485),ea=n(343373),ei=n(365347),eo=n(353428),es=n(522917),el=n(366172),ec=n(758121),ed=n(313449),eu=n(510669),em=n(301126),ep=n(39971),eh=n(773283),e_=n(487388),eg=n(914077),ef=n(505534),eE=n(324225),ey=n(688656),eb=n(373028),ev=n(738402),eT=n(978655),eI=n(609782),eS=n(845936),ew=n(465057),eA=n(275258),eC=n(929717),eN=n(848969),eL=n(574431),eO=n(806891),eR=n(383351),eP=n(488527),eD=n(212661),ek=n(321385),eM=n(548832),eF=n(548603),ex=n(796529),eU=n(347196),eB=n(949207),eV=n(432023),eG=n(95779),eH=n(540206),eW=n(501191),eK=n(660164),eY=n(124784),e$=n(120118),ej=n(950142);let ez=(0,T.jz)(eP.uj0),eq=(0,T.jz)(eP.QBm);function eZ(e){return e===f.m1T.HISTORY||e===f.m1T.COMPARE_CHANGES||e===f.m1T.DEV_HANDOFF_HISTORY}function eX(e){return e.label?e.label:e.participating_users_array&&e.participating_users_array[0]?e.participating_users_array[0]:e.user.handle?e.user.handle:((0,P.x1)("version","Verison history got user without a handle",{item:e}),(0,R.$D)(s.e.SCENEGRAPH_AND_SYNC,Error("Verison history got user without a handle")),"(unknown user)")}function eJ(e){switch(e.item.view){case"branch_child_create":return(0,G.tx)("collaboration.feedback.new_branch_created");case"branch_child_merge":return(0,G.tx)("collaboration.feedback.branch_merged");case"branch_child_update":return(0,G.tx)("collaboration.feedback.branch_updated_from_main_file");case"branch_create":return(0,G.tx)("collaboration.feedback.branch_created");case"branch_merge":return(0,G.tx)("collaboration.feedback.branch_merged_into_main_and_archived");case"branch_update":return(0,G.tx)("collaboration.feedback.updated_from_main");case"branch_archive":return(0,G.tx)("collaboration.feedback.branch_archived");case"branch_restore":return(0,G.tx)("collaboration.feedback.branch_restored");case"file_restore":if(e.item.label)return(0,G.tx)("collaboration.feedback.version_restored_label",{label:e.item.label});return(0,G.tx)("collaboration.feedback.version_restored")}return a.createElement(a.Fragment,null,eX(e.item))}function eQ(e){let{time:r}=e,n=a.useMemo(()=>(0,eS.xX)(r,!0),[r]),{onChange:i}=e;return a.useEffect(()=>{i&&i(n)},[i,n]),a.createElement(a.Fragment,null,n)}class e0 extends L.uA{constructor(e){super(e),this.descriptionRef=a.createRef(),this.onClick=L.cZ(this,"click",()=>{setTimeout(()=>{this.props.isAllowedToChangeVersion()&&!this.props.isActive&&this.props.onSelect&&this.props.onSelect(this.props.versionId)},300)}),this.disabledOnClickHandler=L.cZ(this,"click",()=>{setTimeout(()=>{if((0,b.sx)("CTA Clicked",{name:"Disabled Version History",teamId:this.props.team?.id}),this.props.isStarterTeam){if(!this.props.team){(0,R.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(Z.to({type:eL.DV,data:{team:this.props.team,editorType:this.props.editorType,resource:e_.Bi.VERSION_HISTORY,currentPlan:eo.F.Plan.STARTER,upsellPlan:eo.F.Plan.PRO}}))}},300)}),this.onMouseEnter=e=>{let r=this.descriptionRef.current;r&&r.scrollHeight>r.clientHeight&&this.setState({hovered:!0})},this.onMouseLeave=e=>{this.setState({hovered:!1})},this.onDoubleClick=L.cZ(this,"dblclick",()=>{this.props.onCreateSavepoint?this.props.onCreateSavepoint():this.props.onEditSavepoint&&this.props.onEditSavepoint(this.props.versionId)}),this.onMenuClick=L.cZ(this,"contextmenu",e=>{this.props.onSavepointMenuCallback&&this.props.versionId!==eh.V_&&this.props.onSavepointMenuCallback(this.props.versionId,this.props.checkpointKey||"",e)}),this.onBranchClick=L.cZ(this,"click",e=>{e.stopPropagation(),this.props.dispatch(z.$T({view:"fullscreen",fileKey:this.props.branchFileKey,editorType:eg.nT.Design}))}),this.onCompareClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChanges&&this.props.isAllowedToChangeVersion()&&this.props.isCurrentVersionActive&&!this.props.isComparing&&this.props.onCompareChanges(this.props.versionId)},300)}),this.onCompareCurrentClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChangesFromCurrent&&this.props.isAllowedToChangeVersion()&&!this.props.isComparing&&this.props.onCompareChangesFromCurrent()},300)}),this.toggleSeeMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({expandedDescription:!this.state.expandedDescription})},this.ref=e=>{e&&(this.versionRowDiv=e)},this.generateEditorName=(e,r)=>a.createElement("div",{className:eD.Lw,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-left":!0,"data-tooltip-max-width":1e3,key:`who_${e}`,dir:"auto"},r),this.generateBranchLink=e=>{if(!this.props.fileByKey||!this.props.branchFileKey)return null;{let r=this.props.fileByKey[this.props.branchFileKey];return r&&!r.deleted_at?a.createElement("span",{className:eD.qC,onClick:this.onBranchClick},e||(r.name??(0,G.tx)("collaboration.feedback.branch"))):a.createElement("span",{className:eD.at},r?.name??(0,G.tx)("collaboration.feedback.branch"))}},this.setFormattedTime=e=>{this.setState({formattedTime:e})},this.state={expandedDescription:!1,hovered:!1}}componentDidMount(){super.componentDidMount(),this.versionRowDiv&&this.props.isActive&&!this.props.first&&this.versionRowDiv.scrollIntoView(!1)}componentDidUpdate(e,r){super.componentDidUpdate(e,r);let n=this.props.description,a=e.description;n!==a&&(this.state.expandedDescription&&n&&a&&n.length>=a.length||this.setState({expandedDescription:!1}))}render(){let e,r,n;let i=this.descriptionRef.current,o=!!(i&&(this.state.expandedDescription||i.scrollHeight>i.clientHeight||this.state.hovered)&&!this.props.isActive),s=(0,eS.$_)(this.props.userUrl,15),m=this.props.versionId===eh.V_,p=!m&&!(0,eb.AI)({view:this.props.view??"file_default",label:this.props.label})&&!this.props.isLinked,h=this.props.version?.frameCreated||this.props.version?.frameEdited||this.props.version?.lastViewed,_=p&&!h,g=this.props.isPreview?eD.qv:eD.AS;this.props.disabled&&!this.props.isStarterTeam&&(g=eD.Y0+" "+g),m&&(g=eD.j$+" "+g),(this.props.isActive||this.props.isComparing)&&(g=eD.SU+" "+g),this.props.onSelect&&(g=eD.kD+" "+g);let f=this.props.isActive&&!m?eD.Nh:this.state.expandedDescription?eD.lV:o?eD.LF:eD.h_,E=this.state.expandedDescription?(0,G.tx)("collaboration.feedback.show_less"):(0,G.tx)("collaboration.feedback.show_more"),y=[],b=0;if(this.props.participatingImagesDict){let n=Object.keys(this.props.participatingImagesDict).length;for(let[i,o]of Object.entries(this.props.participatingImagesDict))if(e=(0,eS.$_)(o,15),r=this.generateEditorName(b,i),y.push(a.createElement("span",{className:eD.zL,key:i},(!this.props.first||"current_version"!=this.props.versionId)&&e,r)),++b>4&&b<n&&!this.props.isActive){y.push(a.createElement("div",{className:eD.lw,key:"number-additional-editors"},(0,G.tx)("collaboration.feedback.num_editors_number_editor_count_more",{numEditors:n-Number(b)})));break}}else this.props.user&&this.props.userUrl?(e=(0,eS.$_)(this.props.userUrl,15),r=this.generateEditorName(b,this.props.user),y.push(a.createElement("span",{className:eD.zL,key:"branching-solo-editor"},(!this.props.first||"current_version"!=this.props.versionId)&&e,r))):_&&"file_multiplayer"===this.props.view&&"Figma System"===this.props.user&&y.push(a.createElement("div",{className:eD.EB,key:"figma-system"},this.props.user));let v=eD.N5;this.props.hideLine?v="":this.props.first&&this.props.last?v=eD.y5:this.props.first?v=eD.pi:this.props.last&&(v=eD.p8);let T=this.props.isUI3?void 0:s,I=null,S="text"in this.props?this.props.text.toLowerCase():void 0;_||(T="components published"===S||"published to community hub"===S?a.createElement(U.U,{className:eD.mk,svg:eY.A,useOriginalSrcFills_DEPRECATED:!0},a.createElement(l.z,null)):a.createElement(ew.D,null)),_&&this.props.last&&(T=a.createElement(ew.D,null));let w=this.props.isUI3&&this.props.devModeActivity&&this.props.devModeActivity.length>0;if(w){let{status:e,nodes:r}=(0,$.D0)(this.props.devModeActivity);I=a.createElement(eR.e,{status:e,nodes:r}),T=a.createElement(eR.M,{status:e})}if(this.props.isBranchingVersion)switch(this.props.view){case"branch_child_create":T=a.createElement(U.U,{className:eD.F4,svg:eU.A},a.createElement(c.o,null)),I=(0,G.tx)("collaboration.feedback.branch_child_create",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(v=eD.zj),this.props.last&&(v=this.props.isUI3?"":eD.JE);break;case"branch_child_merge":T=a.createElement(U.U,{className:eD.Wi,svg:ex.A},a.createElement(d.C,null)),I=(0,G.tx)("collaboration.feedback.merged",{link:this.generateBranchLink(this.props.label)});break;case"branch_child_update":T=a.createElement(ew.D,null),I=(0,G.tx)("collaboration.feedback.branch_child_update",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(v=eD.zj),this.props.last&&(v=this.props.isUI3?"":eD.JE);break;case"branch_merge":T=a.createElement(U.U,{className:eD.mq,svg:eH.A,useOriginalSrcFills_DEPRECATED:!0},a.createElement(d.C,null)),I=(0,G.tx)("collaboration.feedback.branch_merge",{link:this.generateBranchLink((0,G.t)("collaboration.feedback.main_branch_name"))});break;case"branch_create":T=a.createElement(U.U,{className:eD.VO,svg:eF.A},a.createElement(c.o,null)),I=(0,G.tx)("collaboration.feedback.branch_created");break;case"branch_update":T=a.createElement(U.U,{className:eD.F4,svg:eU.A},a.createElement(c.o,null)),I=(0,G.tx)("collaboration.feedback.branch_updated_from",{link:this.generateBranchLink((0,G.t)("collaboration.feedback.main_branch_name"))});break;case"branch_archive":T=a.createElement(U.U,{className:eD.lf,svg:eM.A},a.createElement(l.z,null)),I=(0,G.tx)("collaboration.feedback.branch_archived");break;default:T=a.createElement(ew.D,null)}let A=[];this.props.version?.frameCreated&&A.push(this.props.isSection?(0,G.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,G.tx)("collaboration.feedback.compare_changes_modal.frame_created")),this.props.version?.lastViewed&&A.push((0,G.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you")),p&&!_&&this.props.time?A.push(a.createElement("div",{className:eD.IF},a.createElement(eQ,{time:this.props.time}))):_&&this.props.time?A.push(this.renderTime(this.props.time,eD.Ov,this.props.showCompareChanges)):"displayText"in this.props?A.push(this.props.displayText):A.push(this.props.text),this.props.isUI3&&this.props.isComparing&&!this.props.isComparingLoading&&!m&&(n=a.createElement("div",{className:eD.UY},a.createElement("div",{className:eD.sh},A[0]),a.createElement(x.B,{svg:ek.A,className:eD.KD}),a.createElement("div",{className:eD.$D},(0,G.tx)("collaboration.feedback.current_file"))));let C=a.createElement(a.Fragment,null,this.props.isBranchingVersion&&this.props.fileByKey&&this.props.branchFileKey?a.createElement("div",{className:eD.RI,dir:"auto"},I):w?a.createElement("div",{className:eD.Pf,dir:"auto"},I):n?a.createElement("div",{className:eD.Pf,dir:"auto"},n):a.createElement("div",{className:eD.Pf,dir:"auto"},A[0])),O=(0,N.$J)(this.props.description),R=y.length>0&&a.createElement("div",{className:eD.VM},y),P=!p&&this.props.time&&a.createElement("span",{className:eD.DS,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,eS.xX)(this.props.time)}," ",this.props.isLinked?a.createElement(eQ,{onChange:this.setFormattedTime,time:this.props.time}):a.createElement(M.h1,{onChange:this.setFormattedTime,date:this.props.time})),D=A.length>1||O||o||R||P,k=a.createElement(a.Fragment,null,A.length>1&&a.createElement("div",{className:eD.HK},A.slice(1).map((e,r)=>a.createElement("div",{className:eD.Pf,dir:"auto",key:r},e))),(!this.props.isUI3||O)&&a.createElement("div",{className:f,style:{paddingRight:this.getLabelRightPosition(this.props.showCompareChanges)},ref:this.descriptionRef,dir:"auto"},O),o&&a.createElement("div",{className:eD.B0,onClick:this.props.disabled?void 0:this.toggleSeeMore},a.createElement("div",{className:eD.yT},E)),this.props.isUI3?a.createElement(a.Fragment,null,R,P,this.props.rowBodyFooter||!P&&(R||i)&&a.createElement("div",null)):a.createElement("div",null,R,P,this.props.rowBodyFooter)),B=this.props.isActive&&this.props.onSavepointMenuCallback&&!m&&a.createElement(eN.K0,{onClick:this.props.disabled?void 0:this.onMenuClick,className:eD.Wh,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContext")},a.createElement(U.U,{svg:eG.A},a.createElement(u.J,null))),V=this.props.onHoverMenuCallback&&!this.props.onSavepointMenuCallback?a.createElement(eN.K0,{onClick:this.props.onHoverMenuCallback,className:this.props.forceShowHoverMenu?eD.xL:eD.Gb,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContextHover")},a.createElement(U.U,{svg:eG.A},a.createElement(u.J,null))):null,H=a.createElement("button",{onClick:this.onCompareClick,className:eD.kr},(0,G.tx)("collaboration.feedback.compare")),W=a.createElement("button",{onClick:this.onCompareCurrentClick,className:eD.kr},(0,G.tx)("collaboration.feedback.compare")),K=a.createElement("button",{onClick:this.props.onDoneComparingClick,className:eD.kr},(0,G.tx)("collaboration.feedback.done_version_history"));return a.createElement(a.Fragment,null,(!_||this.props.showAutosaves)&&a.createElement("div",{className:g,ref:this.ref,onClick:this.props.disabled?this.disabledOnClickHandler:this.onClick,onMouseEnter:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseEnter,onMouseLeave:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseLeave,onContextMenu:this.props.disabled?void 0:this.onMenuClick,onDoubleClick:this.props.disabled&&this.props.isStarterTeam?void 0:this.onDoubleClick,"data-testid":"version-row"},!this.props.isUI3&&a.createElement("div",{className:v}),a.createElement("div",{className:_?eD.RV:eD.mP},a.createElement("div",{className:eD.Tc},a.createElement("div",{className:D?eD.eF:eD.nw,style:{right:this.getLabelRightPosition(this.props.showCompareChanges)}},this.props.iconOverride?this.props.iconOverride(a.createElement("div",{className:v})):this.props.isUI3?a.createElement("div",{className:eD.Gl},a.createElement("div",{className:v}),T):T,this.props.isUI3?a.createElement("div",{className:eD.B_},a.createElement("div",{className:eD.eP},C,k),B,this.props.onHoverMenuCallback&&V,this.props.showCompareChanges&&!this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&m&&W,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&!m&&!this.props.isComparing&&H,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&this.props.isComparing&&K,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&this.props.isComparingLoading&&!m&&!this.props.isComparing&&a.createElement("div",{className:eD.Ob},a.createElement(F.kt,null))):C),!this.props.isUI3&&B,!this.props.isUI3&&V),!this.props.isUI3&&k)))}renderTime(e,r,n){let i=a.createElement(eQ,{time:e,onChange:this.setFormattedTime});return a.createElement("div",{className:r},i)}getLabelRightPosition(e){return e?"65px":"35px"}}function e1({shouldShowUpgradeLink:e,startUpgrade:r,hasRestrictedVersions:n}){let i=en.h.useTrackingContext({trigger:ep.b.HISTORY_UPSELL});return a.createElement(er.fu,{name:"Version History Paywall Panel",properties:{...i}},a.createElement("div",{className:eD.NM},a.createElement(W.E,{fontWeight:"semi-bold"},(0,G.tx)(n?"upsell.history.need_to_travel_back_in_time":"upsell.history.everything_else_is_history")),a.createElement("div",null,e?a.createElement(W.E,null,(0,G.tx)("upsell.history.upsell_upgrade_description",{upgradeLink:a.createElement(k.Ph,{className:eD.s6,onClick:r,trackingProperties:{trackingDescriptor:et.c.UPGRADE,upsellSource:ep.b.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},a.createElement(W.E,null,(0,G.tx)("upsell.history.upsell_upgrade")))})):a.createElement(W.E,null,(0,G.tx)("upsell.history.upsell_learn_more_description",{upgradeLink:a.createElement(k.Ph,{className:eD.s6,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},(0,G.tx)("upsell.history.learn_more"))})))))}function e2(){return a.createElement(a.Fragment,null,a.createElement("span",{className:eD.ot},C.Ay.mac?(0,G.tx)("collaboration.feedback.shortcut_mac"):(0,G.tx)("collaboration.feedback.shortcut")))}e0.displayName="VersionRow";class e5 extends L.uA{constructor(e){super(e),this.label="",this.description="",this.hasLabeled=!1,this.autoExpandUnlabeledOnly=!0,this.autoExpandGroupId="",this.expandLast=!1,this.toggleAutoItemById=e=>{let r=new Set(this.state.expandedIds);r.has(e)||this.autoExpandUnlabeledOnly&&!this.hasLabeled||this.autoExpandGroupId===e?(r.delete(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!1),this.setState({autoExpandForCurrentSelection:!1})):(r.add(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!0)),this.autoExpandGroupId="",this.setState({expandedIds:r})},this.drawRows=(e,r,n,a)=>{let i=[],o=0,s=-1,l=-1,c=0,d=e.length-1-e.slice().reverse().findIndex(e=>(0,eb.AI)(e)),u=e.length-1-e.slice().reverse().findIndex(e=>this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle));for(;o<e.length;){let r=e[o];if((0,eb.AI)(r)){let m=n&&(0===o&&r.disabled||0===i.length);c>0&&(this.renderAutoVersionBatch(i,e,s,l,n&&(r.disabled&&0===s||0===i.length),!1,this.state.showAutosaves,a),m=!1),i.push(this.renderRow(r,m,o===e.length-1||o===d&&!this.state.showAutosaves||o===u&&this.state.showOnlyUserVersionHistory,a)),c=0,s=-1,l=-1}else s<0&&(s=o),l=o,c++;o++}return c>0&&this.renderAutoVersionBatch(i,e,s,l,n&&(e[0].disabled&&0===s||0===i.length),r,this.state.showAutosaves,a),i},this.hasLabeledVersions=e=>{for(let r of e)if(r.label&&r.label.length>0)return!0;return!1},this.startLoadingVersion=e=>{this.props.dispatch(z.$T({...this.props.selectedView,versionId:e.id})),this.props.dispatch(q.Y6({mode:f.Oin.KEEP_UI,type:ef.lF.SPINNER})),this.setState({isLoadingVersion:!0,loadingVersionId:e.id}),(0,b.sx)("History Version Savepoint Viewed",{savepointId:e.id,savedAt:e.touched_at})},this.finishedLoadingVersion=()=>{let e=this.state.loadingVersionId;if(e&&e.length>0){let r=this.getVersionByID(e);if(r&&!this.props.modalShown){let e;if(null!=r.label&&r.label.length>0)e=(0,G.t)("collaboration.feedback.viewing_version",{label:r.label});else{let n=(0,eS.xX)(r.touched_at);e=(0,G.t)("collaboration.feedback.viewing_version",{label:n})}e.length>34&&(e=e.substring(0,34)+"\u2026"),this.props.dispatch(H.F.enqueue({type:"versions",message:e}))}}this.setState({isLoadingVersion:!1,loadingVersionId:""})},this.loadVersionById=e=>{if(e===this.props.versionHistory.activeId)return;if(e===eh.V_){this.props.dispatch((0,eh.Nb)({id:eh.V_}));return}let r=this.getVersionByID(e);r&&this.loadVersion(r)},this.loadVersion=e=>{e.id!==this.props.versionHistory.activeId&&(this.startLoadingVersion(e),requestAnimationFrame(()=>{this.props.dispatch((0,eh.Nb)({id:e.id,eventType:"LOAD_NEW_VERSION"}))}))},this.isAllowedToChangeVersion=()=>null===this.props.modalShown&&!(0,em.hM)(),this.onKeyDown=L.C0(this,"keydown",e=>{if(!this.props.dropdownShown&&!this.props.modalShown&&!this.props.versionHistory.compareId){if(e.keyCode===S.Uz.ESCAPE)this.props.modalShown||0!==Object.keys(this.props.mirror.sceneGraphSelection).length||this.props.dispatch((0,eh.Eg)());else if(e.keyCode===S.Uz.UP_ARROW||e.keyCode===S.Uz.DOWN_ARROW){if(!this.isAllowedToChangeVersion())return;let r=this.props.versionHistory.versions.length;this.setState({autoExpandForCurrentSelection:!0}),this.autoExpandGroupId="";let n=-1;if(this.props.versionHistory.activeId===eh.V_)e.keyCode===S.Uz.DOWN_ARROW&&(n=0);else{let r=this.props.versionHistory.versions.findIndex(e=>e.id===this.props.versionHistory.activeId);-1!==r&&(n=e.keyCode===S.Uz.UP_ARROW?r-1:r+1)}if(n<0){this.props.dispatch((0,eh.Nb)({id:eh.V_}));return}n>=r&&(n=r-1);let a=this.props.versionHistory.versions[n];a.disabled||this.loadVersion(a)}}}),this.startComparingChanges=e=>{this.props.dispatch(q.Y6({mode:f.Oin.KEEP_UI,type:ef.lF.SPINNER})),this.setState({isLoadingCompareChanges:!0,loadingCompareId:e.id})},this.finishedComparingChanges=()=>{let e=this.state.loadingCompareId;if(e&&e.length>0&&!this.props.modalShown){let r=this.getVersionByID(e);if(!r)return;if(0===f.AWq.getChunkChangeCount()){f.Egt.clearSelection();let e=(0,G.t)("collaboration.feedback.no_visible_changes");e.length>56&&(e=e.substring(0,56)+"\u2026"),this.props.dispatch(H.F.dequeue({})),this.props.dispatch(H.F.enqueue({type:"comparing",message:e}))}else{let e=null!=r.label&&r.label.length>0?r.label:(0,eS.xX)(r.touched_at),n=(0,G.t)("collaboration.feedback.comparing_changes_toast",{fromVersionLabel:e});n.length>56&&(n=n.substring(0,56)+"\u2026"),this.props.dispatch(H.F.dequeue({})),this.props.dispatch(H.F.enqueue({type:"comparing",message:n}))}}this.setState({isLoadingCompareChanges:!1,loadingCompareId:""}),this.props.dispatch(q.Y6({mode:f.Oin.OFF}))},this.compareChangesById=e=>{if(e===eh.V_)return;if(e===this.props.versionHistory.compareId){this.props.dispatch((0,eh.vF)({fromVersionId:e}));return}let r=this.getVersionByID(e);r&&this.compareChanges(r)},this.compareChangesFromCurrent=()=>{let e=this.props.versionHistory.activeId;if(!e)return;let r=this.getVersionByID(e);r&&(this.props.dispatch((0,eh.Nb)({id:eh.V_})),this.compareChanges(r))},this.compareChanges=e=>{e.id!==this.props.versionHistory.compareId&&(this.startComparingChanges(e),requestAnimationFrame(()=>{this.props.dispatch((0,eh.vF)({fromVersionId:e.id}))}))},this.loadMore=()=>{this.expandLast=!0,this.props.dispatch((0,eh._h)({direction:A.AS}))},this.startUpgrade=()=>{let e=this.getOpenFile(),r=e.teamId&&this.props.teams[e.teamId];if(!r){(0,R.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(Z.to({type:K.V,data:{upsellSource:ep.b.HISTORY_UPSELL,teamId:r.id,openCheckoutInNewTab:!0}}))},this.restoreVersion=e=>{this.canEditFile()&&(this.props.dispatch(j.PF({fileKey:this.getOpenFile().key,versionId:e.id})),(0,b.sx)("History Version Checkpoint Restored",{versionId:e.id,savedAt:e.touched_at}))},this.duplicateVersion=e=>{let r=this.getOpenFile(),n=(0,ec.xp)(r,r.project,(0,eu.getPermissionsState)(this.props));n?this.props.dispatch(Z.to({type:eL.DV,data:{team:n,resource:e_.vL.FILE,action:eE.ZN.DUPLICATE_FILES,editorType:r.editorType,currentPlan:eo.F.Plan.STARTER,upsellPlan:eo.F.Plan.PRO}})):(this.props.dispatch(j.YW({file:this.getOpenFile(),versionId:e.id})),(0,b.sx)("History Version Checkpoint Duplicated",{versionId:e.id,savedAt:e.touched_at}))},this.clearVersion=e=>{this.props.dispatch(X.D({fileKey:this.getOpenFile().key,savepointID:e,label:"",description:""}))},this.addSavepoint=()=>{this.canEditFile()&&this.props.dispatch(Z.to({type:eO.yU,data:{}}))},this.editSavepoint=e=>{if(this.canEditFile()&&e){let r=this.getVersionByID(e);r?.label&&(this.label=r.label),r?.description&&(this.description=r.description),this.props.dispatch(Z.to({type:eO.yU,data:{description:this.description,label:this.label,savepointID:e}}))}},this.showUndoMergeModal=e=>{this.props.dispatch(Z.to({type:eT.G,data:{version:e}}))},this.dropdownCallback=(e,r)=>{let{version:n}=r;switch(e){case"savepoint-clear":this.clearVersion(n.id);break;case"savepoint-restore":this.restoreVersion(n);break;case"savepoint-duplicate":this.duplicateVersion(n);break;case"savepoint-edit":case"savepoint-label":this.editSavepoint(n.id);break;case"savepoint-compare":this.compareChangesFromCurrent();break;case"savepoint-link":try{!function(e,r,n){e(J.zT({...r,versionId:n})),e(H.F.enqueue({type:"link_copied_to_clipboard",message:(0,ee.A)("link-copied")}))}(this.props.dispatch,this.props.selectedView,n.id)}catch(e){this.props.dispatch(V.s.error("Failed to copy link"))}break;case"savepoint-undo-merge":this.showUndoMergeModal(n)}},this.getVersionByID=e=>{let r=this.props.versionHistory,n=r.versions.find(r=>r.id===e);return r.linkedVersion?.id===e?r.linkedVersion:n},this.onSavepointMenu=(e,r,n)=>{if(this.props.dropdownShown&&this.props.dropdownShown.type===Q.$O){n.preventDefault();return}n.stopPropagation(),n.preventDefault();let a=this.getVersionByID(e),i=this.getOpenFile(),{clientX:o,clientY:s}=n;this.props.dispatch(z.j7({type:Q.$O,data:{clientX:o,clientY:s,version:a,callback:this.dropdownCallback,editName:a.label?"savepoint-edit":"savepoint-label",enableClear:a.label&&a.label.length>0,disableDuplicate:this.props.selectedView.editorType===eg.nT.Slides&&(0,w.oA)(i.org?.isSlidesDisabled)||this.props.selectedView.editorType===eg.nT.Whiteboard&&!!i.org?.figjamDisabledAt}}))},this.onDoneComparingClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.isAllowedToChangeVersion()&&this.props.versionHistory.compareId&&(this.props.dispatch((0,eh.Nb)({id:eh.V_})),f.Egt.clearSelection(),this.props.dispatch(H.F.dequeue({matchType:"comparing"})),this.props.dispatch(H.F.dequeue({matchType:"view_changes"})))},300)}),this.renderRow=(e,r,n,i)=>{let o=this.getOpenFile();return a.createElement(e0,{key:`history-item-${e.id}`,description:e.description,label:e.label,disabled:e.disabled,text:eX(e),displayText:a.createElement(eJ,{item:e}),view:e.view?e.view:null,participatingImagesDict:e.participating_images_dict,time:e.touched_at,isActive:this.props.versionHistory.activeId===e.id,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isComparingLoading:this.state.loadingCompareId===e.id,isComparing:this.props.versionHistory.compareId===e.id,devModeActivity:e.dev_mode_activity,user:e.user&&e.user.handle,userUrl:e.user&&((0,eb.pW)(e)||e.label)?e.user.img_url:null,clearVersion:this.clearVersion.bind(this,e.id),onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,versionId:e.id,checkpointKey:e.checkpoint_key,dispatch:this.props.dispatch,recordingKey:L.Pt(this.props,"version",e.id),onSavepointMenuCallback:this.onSavepointMenu,onEditSavepoint:this.editSavepoint,first:r,last:n,isBranchingVersion:(0,eb.pW)(e),fileByKey:this.props.fileByKey,branchFileKey:e.branch_file_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isStarterTeam:i,team:o.teamId?this.props.teams?.[o.teamId]:void 0,editorType:o.editorType,isUI3:this.props.isUI3})},this.onClose=()=>{if(this.props.onClose){this.props.onClose();return}this.props.dispatch((0,eh.Eg)())},this.state={isLoadingVersion:!1,loadingVersionId:"",isLoadingCompareChanges:!1,loadingCompareId:"",expandedIds:new Set,autoExpandForCurrentSelection:!1,showAutosaves:!0,showOnlyUserVersionHistory:!1}}renderAutoVersionBatch(e,r,n,i,o,s,l,c){let d;if(n<0||null===r||r.length<1)return;let u=r[n].id,h=this.state.expandedIds.has(u)||this.autoExpandUnlabeledOnly&&!this.hasLabeled;if(this.state.autoExpandForCurrentSelection)for(let e=n;e<=i;e++)r[e].id===this.props.versionHistory.activeId&&(h=!0,this.autoExpandGroupId=this.props.versionHistory.activeId);this.expandLast&&s&&(h||this.toggleAutoItemById(u),this.expandLast=!1);let _=i-n+1,g=!0;if(1===_&&(h=!0,g=!1),d=s&&(1===_||!h)?o?eD.y5:eD.p8:o?eD.pi:eD.N5,g&&l&&e.push(a.createElement(O.D8,{key:`auto_row_${n}`,recordingKey:L.Pt(this.props,`autoVersionBatch.${n}`),className:r[n].disabled?eD.Ao:eD.QQ,onClick:this.toggleAutoItemById.bind(this,u)},!this.props.isUI3&&a.createElement("div",{className:d}),a.createElement("div",{className:eD.Jt},this.props.isUI3?a.createElement("div",{className:eD.Gl},a.createElement("div",{className:d}),h?a.createElement(m.r,null):a.createElement(p.R,null)):a.createElement(ew.D,null),a.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:_}),!this.props.isUI3&&a.createElement(x.B,{key:"expand-caret",className:h?eD.ey:eD.GE,svg:h?eB.A:eV.A}))))),h)for(let a=n;a<=i;a++)e.push(this.renderRow(r[a],o&&n===i,s&&a===i,c))}componentDidMount(){super.componentDidMount(),this.props.versionHistory.activeId||this.props.dispatch((0,eh.Nb)({id:eh.V_})),document.addEventListener("keydown",this.onKeyDown),el.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",this.finishedLoadingVersion),v.j.on("loadedCompareChanges",this.finishedComparingChanges)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.onKeyDown),el.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",this.finishedLoadingVersion),v.j.removeListener("loadedCompareChanges",this.finishedComparingChanges)}getOpenFile(){let e=this.props.openFile;return null==e&&(0,P.x1)("history","history view should only be possible to open when we have a file"),(0,o.KF)(null!=e,"history view should only be possible to open when we have a file"),e}canEditFile(){return this.props.openFile?.canEdit}showCompareChanges(){return(0,I.kc)().version_diffing&&this.props.selectedView.editorType===eg.nT.Design}render(){let e=this.getOpenFile(),r=e.team,n=this.props.versionHistory.versions.filter(e=>!this.state.showOnlyUserVersionHistory||this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle)),i=n.filter(e=>!e.disabled),o=n.filter(e=>e.disabled).slice(0,ed.cW);this.hasLabeled=this.hasLabeledVersions(i)||this.hasLabeledVersions(o);let s=null,l=(0,A.u9)(this.props.versionHistory),c=!(0,ed.XX)(r)&&!this.props.currentUserOrgId&&(o.length>0||!l),d=!!r&&(0,eu.canEditTeam)(r.id,(0,eu.getPermissionsState)(this.props));c&&(s=a.createElement(e1,{startUpgrade:this.startUpgrade,shouldShowUpgradeLink:d,hasRestrictedVersions:!!o.length}));let u=a.createElement("div",{className:eD.UX},!this.props.versionHistory.loading&&(0,A.u9)(this.props.versionHistory)&&a.createElement("a",{className:eD.nf,onClick:this.loadMore},(0,G.tx)("collaboration.feedback.show_older"))),m=this.props.versionHistory.docHasChanged&&!this.props.versionHistory.loading,p=this.props.versionHistory.linkedVersion,h=p&&i.some(e=>p.id===e.id),_=!this.state.showOnlyUserVersionHistory||p?.user.id===this.props.user?.id,g=(0,ev.$A)(this.props.selectedView),E=(0,eI.C)(this.props.selectedView),b=!this.canEditFile(),v=i.map(e=>(0,eb.AI)(e)?1:0).reduce((e,r)=>e+r,0);return a.createElement("div",null,this.props.progressBarState.mode!==f.Oin.ON_AND_LOCKED&&a.createElement(er.fu,{name:"Version History Panel",properties:{teamId:r?.id}},a.createElement("div",{className:y()(eD.kL,Q.Dm),style:g||E||this.props.isUI3?{width:g||this.props.isUI3?"100%":ez+eq,borderLeft:g?"unset":void 0,minWidth:E&&this.props.isUI3?"240px":"unset"}:{position:"fixed",top:"auto",bottom:"auto",width:ez+eq,height:"100%"}},a.createElement(e4,{onClose:this.onClose,addSavepoint:this.addSavepoint,filterOptions:{showAutosaves:this.state.showAutosaves,setShowAutosaves:e=>this.setState({showAutosaves:e}),showOnlyUserVersionHistory:this.state.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:e=>this.setState({showOnlyUserVersionHistory:e})},isViewOnly:b,recordingKey:L.Pt(this.props,"toolbar")}),a.createElement("div",{"data-not-draggable":!0},a.createElement("div",{className:eD.dG},!this.hasLabeled&&!b&&!g&&a.createElement("div",{className:eD.fy},a.createElement("div",null,(0,G.tx)("collaboration.feedback.press_shortcut_to_add_to_version_history_while_editing",{shortcut:a.createElement(e2,null)}))),p&&!h&&_&&a.createElement(e0,{description:p.description,label:p.label,versionId:p.id,onSavepointMenuCallback:this.onSavepointMenu,displayText:(0,G.tx)("collaboration.feedback.get_version_text_linked_version_linked_version",{versionText:a.createElement(eJ,{item:p})}),view:p.view?p.view:null,time:p.touched_at,isActive:this.props.versionHistory.activeId===p.id,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isComparingLoading:this.state.loadingCompareId===p.id,isComparing:this.props.versionHistory.compareId===p.id,userUrl:p.user.img_url,dispatch:this.props.dispatch,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isLinked:!0,first:!0,last:!0,isBranchingVersion:(0,eb.pW)(p),checkpointKey:p.checkpoint_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.props.versionHistory.loading&&a.createElement("div",{className:eD.u1},a.createElement(F.kt,null)),m&&a.createElement(e0,{displayText:(0,G.tx)("collaboration.feedback.current_version"),view:null,isActive:this.props.versionHistory.activeId===eh.V_,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isComparingLoading:this.state.loadingCompareId===eh.V_,isComparing:!!this.props.versionHistory.compareId,userUrl:this.props.user.img_url,versionId:eh.V_,dispatch:this.props.dispatch,addSavepoint:this.addSavepoint,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,first:!0,last:!1,recordingKey:L.Pt(this.props,"currentVersion"),onCreateSavepoint:this.addSavepoint,onSavepointMenuCallback:this.onSavepointMenu,showAutosaves:this.state.showAutosaves,hideLine:0===i.length||!this.state.showAutosaves&&0===v,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.drawRows(i,0===o.length,!m),this.drawRows(o,!0,!1,d),s),0===o.length&&u))))}}function e4(e){let{onClose:r,addSavepoint:n,filterOptions:i,isViewOnly:o}=e,{toggleDropdown:s,dropdownTargetRef:l,isDropdownShown:c}=(0,eA.B)("FILTER_VERSIONS_DROPDOWN"),d=(0,ea.GS)(),u=()=>{i?.setShowOnlyUserVersionHistory(!i?.showOnlyUserVersionHistory)},m=i?[a.createElement(D.MM,{key:"all",checked:!i.showOnlyUserVersionHistory,onClick:()=>i.showOnlyUserVersionHistory?u():null},(0,G.tx)("collaboration.feedback.all_filter_text")),a.createElement(D.MM,{key:"only_yours",disabled:o,checked:i.showOnlyUserVersionHistory,onClick:()=>i.showOnlyUserVersionHistory?null:u()},(0,G.tx)("collaboration.feedback.only_yours_filter")),a.createElement(D.wv,{key:"sep"}),a.createElement(D.MM,{key:"autosaves",checked:i.showAutosaves,onClick:()=>{i?.setShowAutosaves(!i.showAutosaves)}},(0,G.tx)("collaboration.feedback.show_autosave_versions"))]:[];return a.createElement("div",{className:eD.N1},a.createElement("div",{className:eD.qd},(0,G.tx)("collaboration.feedback.version_history")),a.createElement("div",{className:d?B.s.flex.itemsCenter.gap4.$:B.s.flex.itemsCenter.$},i&&a.createElement("div",{ref:l},a.createElement(eN.YW,{selected:!!i.showOnlyUserVersionHistory,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.filter_tooltip"),onClick:s,onMouseDown:e=>c&&e.stopPropagation()},a.createElement(U.U,{svg:e$.A},a.createElement(h.S,null)))),c&&l.current&&a.createElement(eC.Jz,{showPoint:!0,targetRect:l.current.getBoundingClientRect(),options:m,hideDropdown:s,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,propagateCloseClick:!0}),!o&&a.createElement(eN.K0,{onClick:n,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.add_to_version_history_tooltip"),dataTestId:"versions-add-savepoint",recordingKey:L.Pt(e,"plusVersion")},a.createElement(U.U,{svg:eW.A,fallbackSvg:eK.A},a.createElement(_.x,null))),a.createElement(eN.K0,{onClick:r,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.close_tooltip"),recordingKey:L.Pt(e,"button-close")},a.createElement(U.U,{svg:ej.A},a.createElement(g.L,null)))))}function e7({versions:e,selectedVersion:r,setVersion:n,last:o,idx:s,isSection:l}){let c=(0,i.wA)(),d=(0,es.ud)(),u=(0,ea.GS)();return a.createElement(a.Fragment,null,e.map((i,m)=>a.createElement(e0,{key:`history-item-${i.id}`,description:i.description,label:i.label,disabled:i.disabled,text:eX(i),displayText:a.createElement(eJ,{item:i}),view:i.view?i.view:null,participatingImagesDict:i.participating_images_dict,time:i.touched_at,isActive:r?.id===i.id,user:i.user&&i.user.handle,userUrl:i.user&&((0,eb.pW)(i)||i.label)?i.user.img_url:null,onSelect:()=>n(i),isAllowedToChangeVersion:()=>!0,versionId:i.id,checkpointKey:i.checkpoint_key,dispatch:c,first:0===s&&0===m,last:o&&m===e.length-1,isBranchingVersion:(0,eb.pW)(i),fileByKey:d,branchFileKey:i.branch_file_key,showAutosaves:!0,version:i,isSection:l,isUI3:u,editorType:null,devModeActivity:i.dev_mode_activity})))}function e8({versions:e,selectedVersion:r,setVersion:n,last:i,idx:o}){let s;let[l,c]=a.useState(r&&!!e.find(e=>e.id===r.id)),d=Y.eS()?.isSection,u=(0,ea.GS)();s=i&&(1===e.length||!l)?0===o?eD.y5:eD.p8:0===o?eD.pi:eD.N5;let h=u?a.createElement(O.D8,{className:eD.QQ,onClick:()=>c(!l)},a.createElement("div",{className:eD.Jt},a.createElement("div",{className:eD.Gl},l?a.createElement(m.r,null):a.createElement(p.R,null)),a.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:e.length})))):a.createElement(O.D8,{className:eD.QQ,onClick:()=>c(!l)},a.createElement("div",{className:s}),a.createElement("div",{className:eD.Jt},a.createElement(ew.D,null),a.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:e.length}),a.createElement(x.B,{key:"expand-caret",className:l?eD.ey:eD.GE,svg:l?eB.A:eV.A}))));return a.createElement("div",{key:`auto_row_${o}`},h,l&&a.createElement(e7,{versions:e,selectedVersion:r,setVersion:n,last:i,idx:o,isSection:d}))}function e3({versions:e,selectedVersion:r,setVersion:n}){let i=[],o=[],s=0,l=Y.eS()?.isSection;function c(e){o.length>0&&(i.push(a.createElement(e8,{key:s,versions:[...o],selectedVersion:r,setVersion:n,idx:s,last:e})),s++,o=[])}for(let d=0;d<e.length;d++){let u=e[d];(0,eb.AI)(u)||u.frameCreated||u.frameEdited||u.lastViewed?(c(!1),i.push(a.createElement(e7,{key:s,versions:[u],selectedVersion:r,setVersion:n,idx:s,last:d===e.length-1,isSection:l})),s++,o=[]):o.push(u)}return c(!0),a.createElement(a.Fragment,null,i)}e5.displayName="VersionHistoryView",(0,i.Ng)(ei.l$)(e5)},834177:(e,r,n)=>{n.d(r,{PZ:()=>e_,SI:()=>em});var a=n(411855),i=n(188507),o=n(229808),s=n(48451),l=n(217950),c=n(470347),d=n(240954),u=n(805014),m=n(245459),p=n(245954),h=n(629019),_=n.n(h),g=n(11266),f=n(777535),E=n(789022),y=n(885123),b=n(841962),v=n(875877),T=n(94489),I=n(550479),S=n(586053),w=n(255191),A=n(875585),C=n(76265),N=n(250379),L=n(404722),O=n(224623),R=n(835408),P=n(47795),D=n(225371),k=n(736041),M=n(118781),F=n(525680),x=n(427494),U=n(176160),B=n(15092),V=n(773283),G=n(505534),H=n(710636),W=n(761843),K=n(373901),Y=n(255703),$=n(928425),j=n(881592),z=n(782332),q=n(436599),Z=n(614509),X=n(972467),J=n(765273),Q=n(106352),ee=n(821718),et=n(336697),er=n(638596);let en=[2,3,6,13,25,50,75,100,200,300,1e3];function ea(e,r,n){if(!n)return!1;let a=r.get((0,m.dI)(e));if(!a)return!1;let i=a.absoluteBoundingBox;return!!i&&i.x<n.x+n.w&&i.x+i.w>n.x&&i.y<n.y+n.h&&i.y+i.h>n.y}function ei(e,r){return{x:e.x-r.x,y:e.y-r.y,width:e.w,height:e.h}}function eo(e,r,n=!1){if(!r)return null;let a=e.get(r);return a?n?a.absoluteRenderBounds:a.absoluteBoundingBox:null}function es(e){return!!(e?.basis?.styleType||e?.change?.styleType)}function el(e,r,n){let a=e?.basis?.guid?(0,m.dI)(e.basis.guid):m.AD,i=es(e)?null:eo(r.scene,a,!1),o=e?.change.guid?(0,m.dI)(e.change.guid):m.AD,s=e?.state==="removed"||es(e)?null:eo(n.scene,o,!1);return{before:{id:a,box:i&&r.baseBox?ei(i,r.baseBox):null},after:{id:o,box:s&&n.baseBox?ei(s,n.baseBox):null}}}function ec({frameId:e,historyFrameId:r,historySceneGraph:n,chunkChanges:i,discreteDiffing:c,setChunkChanges:d}){let p=(0,x.eY)(),[h,_]=(0,v.useAtom)(R.Ib),g=a.useMemo(()=>c?u.Egt.getLayerGUIDMapping(r,n.scene,e,p.scene):void 0,[c,e,r,n.scene,p.scene]);return a.useEffect(()=>{if(i)return;let a=u.egF.getNodeTree(r,n.scene,!c),h=u.egF.getNodeTree(e,p.scene,!c);if(!a||!h){_(new Map),d({});return}E.sn.reset("dev_mode.compare_changes.diffing",r),E.sn.start("dev_mode.compare_changes.diffing",{key:r});let{deltaTree:y,deltaNodeMap:b}=function(e,r,n,a,i,c,d=!0){let p;let h=new Map,_=o.w.decodeMessage(e.nodeChanges).nodeChanges,g=o.w.decodeMessage(r.nodeChanges).nodeChanges;if(!_||!g)return{deltaTree:{},deltaNodeMap:h};let f=new Map,E=0;!function e(r){if(E>=_.length)return(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(f.set(r.id,{change:_[E],node:r}),E++,r.children))e(n)}(e.tree);let y=d?n.get((0,m.dI)(g[0].guid)):null,b=_[0]&&d?a.get((0,m.dI)(_[0].guid)):null,v=y?.absoluteBoundingBox||null,T=b?.absoluteBoundingBox||null;function S(e,r,n){h.set(e,r.value),(0,$.NI)(n,r)}let w=0,A=function e(r,p={}){let _,E;if(w>=g.length)return(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=g[w],b=0===w;w++;let A=c?c.get(r.id)??m.AD:r.id,C=f.get(A),N={previousChange:C?.change,currentChange:y,isRootNode:b};if(C){let e=function(e,r,n,a,i){let l=new Map;for(let[c,d]of Y.AW){let p=null,h=null;if((0,W.ar)(c)&&(e[c]&&e[c].guid&&(p=(0,m.dI)(e[c].guid)),r[c]&&r[c].guid&&(h=(0,m.dI)(r[c].guid))),p||h){let m=function(e,r){if(r){if("styleIdForStrokeFill"===c){e.strokePaints=r.fillPaints;return}for(let n of d)e[n]=r[n]}},_=h?u.egF.getNodeTree(h,a.scene,i)?.nodeChanges:null,g=p?u.egF.getNodeTree(p,n.scene,i)?.nodeChanges:null,f=_?o.w.decodeMessage(_).nodeChanges?.[0]:null,E=g?o.w.decodeMessage(g).nodeChanges?.[0]:null;if(m(r,f),m(e,E),f&&!E)l.set(c,{state:"removed",previousChange:f,currentChange:{phase:"REMOVED"}});else if(!f&&E)l.set(c,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(f&&E){for(let e of["name",...d])if(!(0,s.cF)(f[e],E[e])){l.set(c,{state:"changed",previousChange:f,currentChange:E});break}}}}return l}(y,C?.change,n,a,i);for(let e of Y.cs)if(!(0,s.cF)(C.change[e],y[e])&&("textData"!==e||C.change[e]?.characters!==y[e]?.characters)){if("transform"===e&&b||d&&!ea(C.change.guid,a,v)&&!ea(y.guid,n,v))continue;N.state="changed";break}e.size>0&&(N.changedStyles=e)}else(!d||ea(y.guid,n,v))&&(N.state="added");for(let n of(y.guid&&(N.state||N.changedStyles)&&(E={value:N}),_=E||p,E&&S((0,m.dI)(y.guid),E,p),r.children.forEach(r=>e(r,_)),C?.node?.children||[]))f.has(n.id)&&function({checkOverlap:e,parent:r,nodeId:n}){let i=f.get(n);if(e&&!ea(i?.change.guid,a,T))return;let o={value:{state:"removed",previousChange:i?.change,currentChange:{phase:"REMOVED"}}};h.has((0,m.dI)(f.get(n)?.change.guid))&&(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let s=(0,m.dI)(i?.change.guid);S(s,o,r),f.delete(s)}({checkOverlap:d,nodeId:n.id,parent:_});return f.delete(A),p}(r.tree);if(!A.value&&A.children&&1===A.children.length){let e=A.children[0];delete e.parent,p=e}else p=A;return{deltaTree:p,deltaNodeMap:h}}(a,h,p,n,!c,g,!0);_(b),d((0,$.X$)(y,function(e){let r=e.value,n=null,a=r.state;return("added"===r.state||"changed"===r.state)&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange?r.previousChange:{phase:"REMOVED"},change:r.currentChange,state:a}),"removed"===r.state&&r.previousChange&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:{phase:"REMOVED"},state:a}),r.changedStyles&&(n||(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:r.currentChange,state:a}),n.changedStyles=r.changedStyles),{result:n}}));let v=E.sn.tryStop("dev_mode.compare_changes.diffing",r);v&&(0,f.sx)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:v},{forwardToDatadog:!0})},[e,_,i,d,r,n.scene,p.scene,g,n,p,c]),a.useEffect(()=>()=>{_(new Map)},[_]),null}function ed(e,r){if(e.isState){let r=e.parentNode?.name;return r?`${r}/${e.name}`:e.name}if(r.singleBackingSymbol&&r.singleBackingStateGroup){let n=r.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function eu(e){return{node:(0,N.mJ)(e),backingSymbolData:(0,X.$)([e])}}function em({nodeId:e,detachedComponentsScene:r,documentIndex:n,showError:a}){let i=n===d.x1?u.juq.HISTORY:r?u.juq.DETACHED_COMPONENTS:c.G,o=new p.qo(i),s=o.get(e)?.absoluteRenderBounds||{x:0,y:0,w:0,h:0},l=0,m=!0;return()=>({nodeBounds:{x:s.x,y:s.y,width:s.w,height:s.h},getImage:({scale:a,clipRect:i})=>{let s;let c=Date.now();c-l>1e4&&(l=c,(s=new T.jk("performance.dev_mode.compare_changes.get_image",{})).start());let d=(0,Q.L6)(e,n,r,a,i);if(s){let e=s.stop(),r=d?.image?.length??0;e&&r&&(0,f.sx)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:r,sceneType:o.getSceneTypeDebugString(),isFirstImage:m},{forwardToDatadog:!0})}return m=!1,d&&{data:d.image,width:d.width,height:d.height,scale:d.width/d.canvasSpaceBounds.width,canvasSpaceBounds:d.canvasSpaceBounds}},showError:a})}function ep({version:e,isSection:r}){let n=new Date(e.touched_at?e.touched_at:e.created_at),i=e.label;e.frameCreated?i=r?(0,C.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,C.tx)("collaboration.feedback.compare_changes_modal.frame_created"):e.lastViewed&&(i=(0,C.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you"));let o=i?a.createElement(ee.Cr,{time:n}):null;return a.createElement("div",{className:er.sh},a.createElement("div",{className:er.dp},i||a.createElement(ee.Cr,{time:n})),a.createElement("div",{className:er.m7},o))}let eh=(0,v.atom)(null);function e_(e){let{nodeId:r,onCloseModal:n,modalTitle:i,currentImage:o,historicImage:s,historicHeader:l,currentHeader:c,versions:d,selectedVersion:h,setSelectedVersion:g,renderLoadingBar:y,modalError:T,discreteDiffingInput:I,initialSelectedNodeId:S,skipCorrectHistoryCanvasCheck:N,preferencesApi:R,origin:P}=e,D=(0,U.tS)(),k=B.iZ()?.id,[M,F]=a.useState(w.Ss.SIDE_BY_SIDE),[x,V]=a.useState(J.q0),[G,H]=a.useState(!0),[W,q]=a.useState(null),[Z,X]=a.useState(null),[Q,ea]=a.useState(!0),[ei,es]=a.useState(!0),ed=O.eS()?.isSection,[eu,em]=a.useState(()=>S?{id:S,zoomToSelection:!0}:null),[e_,eE]=(0,v.useAtom)(eh),[ey,eb]=a.useState(void 0),ev=(0,v.useAtom)(A.w1)[1],eT=(0,J.t$)(h||null,r)||!!I,eI=N||eT,eS=a.useMemo(()=>I?.sceneGraph?I.sceneGraph:new p.qo(u.juq.HISTORY),[I?.sceneGraph]),ew=(0,L.G)();a.useEffect(()=>{eu&&eu.id!==r&&(0,f.sx)("Diff Modal New Layer Selected",{userId:k,fileKey:D,frameId:r,versionId:h?.id,layer_id:eu.id})},[eu]);let eA=a.useRef(h);a.useEffect(()=>{eA.current!==h&&(eA.current=h,eb(void 0),em(null))},[h,eA]);let eC=void 0!==o,eN=void 0!==s,eL=a.useCallback(e=>{"Escape"===e.key&&(eu?(em(null),e.stopPropagation(),e.preventDefault()):n())},[n,eu]);a.useEffect(()=>(document.addEventListener("keydown",eL),()=>{document.removeEventListener("keydown",eL)}),[eL]),a.useEffect(()=>{if("cc_versions"===P&&ey&&!ei){(0,$.mf)(ey)?(0,f.sx)("Diff Modal No Changes Between Versions",{userId:k,fileKey:D,frameId:r,versionId:h?.id,initialVersion:Q,versionMetadata:!1},{forwardToDatadog:!0}):(0,f.sx)("dev_mode.compare_changes.version_has_changes",{userId:k,fileKey:D,frameId:r,versionId:h?.id,initialVersion:Q,versionMetadata:!1},{forwardToDatadog:!0});let e=E.sn.tryStop("dev_mode.compare_changes.switch_versions",h?.id);e&&(0,f.sx)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[P,Q,ei,ey,h,r,D,k]),a.useEffect(()=>{h&&null===s&&(0,f.sx)("dev_mode.compare_changes.no_image",{userId:k,fileKey:D,frameId:r,versionId:h?.id},{forwardToDatadog:!0})},[s,h,r,D,k]);let eO=()=>a.createElement(w.BL,{isPreviewAvailable:eC,showOptions:eC,view:M,onSideBySideClick:()=>{F(w.Ss.SIDE_BY_SIDE)},onOverlayClick:()=>{F(w.Ss.OVERLAY)},additionalStyles:er.tH}),[eR,eP]=a.useState(new Set),eD=a.useCallback((e,r)=>{r?eP(r=>new Set([...r,...e])):eP(r=>{let n=new Set(e);return new Set([...r].filter(e=>!n.has(e)))})},[eP]),ek=(0,a.useCallback)(e=>{let r=e?.value;if(r){let n="removed"===r.state?r.beforeNodeId:r.afterNodeId;em({id:n,zoomToSelection:!1}),q(r.beforeNodeId),X(r.afterNodeId);let a=[n],i=e?.parent;for(;i;){let e=i.value;if(e){let r="removed"===e.state?e.beforeNodeId:e.afterNodeId;a.push(r)}i=i.parent}eD(a,!0)}else em(null),q(null),X(null)},[eD]),eM=(0,a.useCallback)(e=>{e?eE("removed"===e.state?e.beforeNodeId:e.afterNodeId):eE(m.AD)},[eE]),eF=(0,a.useCallback)(e=>eE(e),[eE]),ex=(0,a.useCallback)((e,r)=>{e===eu?.id?(em(null),q(null),X(null)):(em({id:e,zoomToSelection:!0}),eE(e),q((0,m.dI)(r.basis.guid)),X((0,m.dI)(r.change.guid)))},[eu?.id,eE]),eU=(0,a.useMemo)(()=>ey&&(0,K.kF)(ey,Y.FO.LEGO,void 0,z.O0)||{},[ey]),eB=!(0,$.mf)(eU),eV=I?I.nodeId:r,{beforeBoxes:eG,afterBoxes:eH}=function(e){let{frameId:r,historyFrameId:n,view:i,displayableChanges:o,historySceneGraph:s}=e;return(0,a.useMemo)(()=>{if(!r||!n)return{};let e=function(e,r,n,a){let i=(0,p.UN)(),o=eo(r,n,!0),s=eo(i,e,!0);return(0,$.X$)(a,e=>{let n=el(e.value,{scene:r,baseBox:o},{scene:i,baseBox:s});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNodeId:n.after.id,beforeBoxNodeId:n.before.id}}})}(r,s,n,o);return{beforeBoxes:(0,$.X$)(e,e=>{let a=e.value,i=a.beforeBoxNodeId===n||a.afterBoxNodeId===r;return a.afterBox?a.beforeBox?{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:i}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:i}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:i}}}),afterBoxes:(0,$.X$)(e,e=>{let a=e.value,i=a.beforeBoxNodeId===n||a.afterBoxNodeId===r;return a.afterBox?a.beforeBox?{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:i}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:i}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:i}}})}},[r,n,i,o])}({frameId:r,historyFrameId:eV,historySceneGraph:eS,view:M,displayableChanges:eU,activeNode:e_,selectedNode:eu});a.useEffect(()=>{if(!eu?.id||!eu?.zoomToSelection||!r||!eV)return;let{baseBeforeBox:e,baseAfterBox:n,resultBoxes:a}=function(e,r,n,a,i){let o=(0,p.UN)(),s=eo(r,n,!0),l=eo(o,e,!0),c=[];for(let e of a){let n=(0,$.lE)(i,r=>(0,m.dI)(r.change.guid)===e||(0,m.dI)(r.basis.guid)===e);if(n){let e=el(n,{scene:r,baseBox:s},{scene:o,baseBox:l});c.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNodeId:e.before.id,afterBoxNodeId:e.after.id})}}return{baseBeforeBox:s,baseAfterBox:l,resultBoxes:c}}(r,eS,eV,[eu.id],eU),{beforeBox:i,afterBox:o}=a[0]??{},s=1/0,l=1/0,c=-1/0,d=-1/0;i&&e&&(i.x-=e.w/2,i.y-=e.h/2,s=Math.min(s,i.x),l=Math.min(l,i.y),c=Math.max(c,i.x+i.width),d=Math.max(d,i.y+i.height)),o&&n&&(o.x-=n.w/2,o.y-=n.h/2,s=Math.min(s,o.x),l=Math.min(l,o.y),c=Math.max(c,o.x+o.width),d=Math.max(d,o.y+o.height)),s!==1/0&&ev({x:s,y:l,width:c-s,height:d-l})},[eu,ev,r,eU]),a.useEffect(()=>()=>{ev(void 0)},[ev]);let eW=eG?{rootBox:eG,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"added",interactive:M===w.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:eh,recordingKey:"before"}:null,eK=eH?{rootBox:eH,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"removed",interactive:M===w.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:eh,recordingKey:"after"}:null,eY=!y&&!T;return a.createElement(J.aF,{title:i,onClose:n},a.createElement("div",{className:er.xZ},a.createElement("div",{className:er.f},y&&!T&&a.createElement("div",{className:er.Lq},a.createElement(j.G,{hasLoadedDiffs:!1})),eY&&a.createElement("div",{className:er.ND},(d||eB)&&a.createElement("div",{className:_()(er._H,"devHandoffLeftPanel")},g&&a.createElement("div",{className:er.b6},a.createElement("div",{className:_()(er.Zl)},(0,C.tx)("collaboration.feedback.compare_changes_modal.history"),(0,b.kc)().dt_compare_changes_debug_helpers&&a.createElement(ef,{fileKey:D,setSelectedVersion:g})),a.createElement(ee.aS,{versions:d||[],selectedVersion:h,setVersion:e=>{e.id!==h?.id&&(0,f.sx)("Diff Modal Selected Version Changed",{userId:k,fileKey:D,frameId:r,versionId:e.id}),E.sn.reset("dev_mode.compare_changes.switch_versions",e.id),E.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),es(!0),Q&&ea(!1),g(e)}})),a.createElement(K.zg,{changesToDisplay:eU,selectedNode:eu?.id,expandedLayers:eR,setLayerExpanded:eD,onHover:eF,onClick:ex})),a.createElement("div",{className:er.vF},M===w.Ss.SIDE_BY_SIDE&&a.createElement("div",{className:er.m_},a.createElement("div",{className:er.ZJ},l?a.createElement("div",{className:er.K9},a.createElement("div",{className:er.gO},l)):h&&a.createElement(ep,{version:h,isSection:ed})),a.createElement("div",{className:er.t4}),a.createElement("div",{className:er.ZJ},c?a.createElement("div",{className:er.K9},a.createElement("div",{className:er.gO},c)):a.createElement("div",{className:er.K9},(0,C.tx)("collaboration.feedback.compare_changes_modal.current_image_header")))),M===w.Ss.SIDE_BY_SIDE&&a.createElement("div",{className:er.Ik},a.createElement(w.qW,{zoomPercentageOptions:en,resetStateOnChangeValue:r,compareThumbnailSource:Y.FO.LEGO,zoomOnMousePointer:!0},a.createElement("div",{className:er.bV},eN?a.createElement(et.H1,{value:eW},a.createElement(J.R$,{image:s,view:M,Overlay:et.q1})):a.createElement(J.Qp,null),a.createElement("div",{className:er.mq}),eC?a.createElement(et.H1,{value:eK},a.createElement(J.R$,{image:o,view:M,Overlay:et.q1})):a.createElement(J.Qp,null)),eC&&eO())),M===w.Ss.OVERLAY&&a.createElement("div",{className:er.Ik},a.createElement(w.xY,{zoomPercentageOptions:en,resetStateOnChangeValue:r,zoomOnMousePointer:!0},a.createElement("div",{className:er.Kk},eN?a.createElement(et.H1,{value:eW},a.createElement(J.R$,{image:s,view:M,hideNoImageText:!0,Overlay:et.q1})):a.createElement(J.Qp,null),G&&(eC?a.createElement(et.H1,{value:eK},a.createElement(J.R$,{image:o,view:M,hideNoImageText:!0,opacity:x,Overlay:et.q1})):a.createElement(J.Qp,null))),eC&&a.createElement(w.u,{opacity:x,isAfterImageShown:G,onToggleClick:()=>H(!G),onOpacityChange:e=>V(e.a)}),eC&&eO())),eI&&r&&eV&&a.createElement(ec,{frameId:r,historyFrameId:eV,historySceneGraph:eS,chunkChanges:ey,discreteDiffing:!!I,setChunkChanges:e=>{es(!1),eb(e)}}))),T&&a.createElement("div",{className:er.Q9},(0,C.tx)("collaboration.feedback.compare_changes_modal.error")),a.createElement("div",null)),eY&&(eI?ey&&(0,$.mf)(ey)?a.createElement(z.Ox,{text:(0,C.t)("collaboration.feedback.compare_changes_modal.no_changes")}):a.createElement(eg,{layerChangeNodeId:Z,layerBasisNodeId:W,layerBasisSceneGraph:eS,selectedVersion:h||void 0,displayableChanges:eU,showSelectLayerHint:!eu,preferencesApi:R??ew}):a.createElement(z.Ox,{text:""}))))}function eg({layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:i,displayableChanges:o,showSelectLayerHint:s,preferencesApi:l}){return s?a.createElement(z.Ox,{text:(0,C.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):a.createElement(z.wv,{layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:i,displayableChanges:o,preferencesApi:l})}function ef({fileKey:e,setSelectedVersion:r}){let n=(0,a.useRef)(null),[i,o]=(0,a.useState)("Upload local file");return a.createElement("label",{className:er.$8},i,a.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{let a=n.current?.files?.[0];if(a&&M.F){let n=await (0,F._)(y.D,(0,b.kc)(),M.F,a),i=y.D.getState().mirror.appModel.currentPage,s=`${e}-${i}-debug`;V.Ht.set(s,Promise.resolve({key:s,canvas:n.bytes})),o(a.name),r({id:"debug"})}}}))}(0,H.Ju)(function(e){let{nodeId:r,layerName:n}=e,o=(0,i.wA)(),s=(0,i.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),c=(0,i.d4)(e=>e.versionHistory.activeId),{Sprig:m}=(0,S.A)(),p=(0,U.tS)(),h=g.E1()?.toISOString(),_=(0,v.useAtom)(R.Ib)[1],{versions:b,versionsQueryLoaded:T}=(0,J.DS)(r),w=(0,i.d4)(e=>e.selectedView.compareChangesVersionId??null),A=(0,i.d4)(e=>e.selectedView.compareChangesActivityId??null),N=(0,a.useMemo)(()=>w?b.find(e=>e.id===w)??null:A?b.find(e=>e.dev_mode_activity?.some(e=>e.id===A))??null:null,[b,w,A]),L=a.useCallback(e=>{!e&&(K(void 0),function(e,r,n,a){let i=y.D.getState().selectedView;r(P.$T({...i,compareChangesVersionId:e,filterStatusVersions:n,compareChangesNodeId:void 0,compareChangesActivityId:void 0}))}(e,o,!1,0),c&&c!==V.V_&&(o(D.Y6({mode:u.Oin.KEEP_UI,type:G.lF.SPINNER})),requestAnimationFrame(()=>{o((0,V.Nb)({id:c,nodeId:r??void 0,eventType:"LOAD_NEW_VERSION",versions:b}))}))),e!==w&&(K(void 0),function(e,r){let n=y.D.getState().selectedView;r(P.$T({...n,compareChangesVersionId:e,compareChangesActivityId:void 0}))}(e,o))},[o,w,c,b,r]),[O,M]=(0,v.useAtom)(V.tP),[F,x]=a.useState(!0),[B,H]=a.useState(!1),[W,K]=a.useState(void 0),Y=void 0!==W,[$,j]=a.useState(void 0),z=void 0!==$,Z=(0,J.t$)(N,r);a.useEffect(()=>{if(!F||!Y||!z||!T)return;x(!1);let e=E.sn.tryStop("dev_handoff.view_history",r);e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),m("track","open_compare_changes",{origin:"cc_versions"})},[m,F,Y,z,T,r]);let X=(0,q.P)();a.useEffect(()=>{if(X&&T){if(N){w||L(N.id);return}if(0===b.length){K(null),L(void 0);return}if(h){for(let e of b)if(e.lastViewed){L(e?.id);return}}L(b[0]?.id)}},[X,h,A,N,w,L,b,T]),a.useEffect(()=>{if(Z||!N)return;let e=performance.now();V._t(N,r)?.then(({canvas:r,key:n})=>{let a=performance.now();if(n===O)return;if(!u.glU.loadPartialHistoryScene(r))throw Error("Error loading history canvas");M(n);let i=performance.now(),o=Math.trunc(a-e),s=Math.trunc(i-a);f.sx("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:p,fetchBytesDurationMs:o,loadNodesDurationMs:s,canvasBytesLength:r.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{I.$D(l.e.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),V.w_(N),H(!0)})},[Z,N,O,M,s,p,r]),a.useEffect(()=>{let e=setTimeout(()=>{if(!Z){K(void 0);return}K(em({nodeId:r,documentIndex:d.x1,showError:()=>{K(null)}}))},J._W);return()=>clearTimeout(e)},[r,N,Z]),a.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{j(void 0),(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("Current image loading error")),H(!0)},n=em({nodeId:r,showError:e});if(!n){e();return}j(n)},J._W);return()=>clearTimeout(e)},[r]);let Q=a.useCallback(()=>{_(new Map),L(void 0),o(k.Ce())},[_,L,o]);return a.createElement(e_,{nodeId:r,onCloseModal:Q,modalTitle:n?(0,C.t)("collaboration.feedback.compare_changes_modal.layer_name_header",{layerName:n}):(0,C.t)("collaboration.feedback.compare_changes_modal.header"),currentImage:$,historicImage:W,versions:b,selectedVersion:N,setSelectedVersion:e=>{L(e.id)},renderLoadingBar:F,modalError:B,origin:"cc_versions"})},Z.mH,H.ZU.YES),(0,H.Ju)(function(e){let{nodeId:r,detachedInfoStatus:n,origin:o}=e,s=(0,i.wA)(),{Sprig:l}=(0,S.A)(),[d,h]=a.useState(!0),[_,g]=a.useState(!1),[y,b]=a.useState(void 0),[v,T]=a.useState(void 0),I=void 0!==y,w=void 0!==v,A="loaded"===n.status,N=A?n.result:void 0;a.useEffect(()=>{if(!d||!I||!w||!A)return;h(!1);let e=E.sn.tryStop("dev_handoff.view_history",r);e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:o},{forwardToDatadog:!0}),l("track","open_compare_changes",{origin:"cc_detached_component"})},[l,d,I,w,r,A,o]),a.useEffect(()=>{let e=setTimeout(()=>{if(!A||!N?.dataComponentId){b(void 0);return}b(em({nodeId:N?.dataComponentId,detachedComponentsScene:N?.dataLocation==="temp-scene",showError:()=>{b(null)}}))},J._W);return()=>clearTimeout(e)},[A,N]),a.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{T(void 0),g(!0)},n=em({nodeId:r,showError:e});if(!n){e();return}T(n)},J._W);return()=>clearTimeout(e)},[r]);let L=a.useCallback(()=>{s(k.Ce())},[s]),O=(0,C.t)("collaboration.feedback.compare_changes_modal.header"),R=(0,C.tx)("inspect_panel.node_type.main_component"),P={nodeId:N?.dataComponentId??m.AD,sceneGraph:new p.qo(N?.dataLocation==="temp-scene"?u.juq.DETACHED_COMPONENTS:c.G)};return a.createElement(e_,{nodeId:r,onCloseModal:L,modalTitle:O,currentImage:v,historicImage:y,historicHeader:R,renderLoadingBar:d,modalError:_,discreteDiffingInput:P})},Z.dF,H.ZU.YES),(0,H.Ju)(function(e){let{changeNodeId:r,basisNodeId:n,initialSelectedNodeId:o,isComparingOverrides:s=!1}=e,l=(0,i.wA)(),{Sprig:d}=(0,S.A)(),u=eu(r),m=eu(n),[h,_]=a.useState(!1),[g,y]=a.useState(void 0),[b,v]=a.useState(void 0),T=void 0!==g,I=void 0!==b;a.useEffect(()=>{if(!T||!I)return;let e=E.sn.tryStop("dev_handoff.view_history",r),n=s?"cc_overrides":"cc_nodes";e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),d("track","open_compare_changes",{origin:n})},[d,s,T,I,r]),a.useEffect(()=>{y(em({nodeId:n,showError:()=>y(null)}))},[n]),a.useEffect(()=>{let e=()=>{v(void 0),_(!0)},n=em({nodeId:r,showError:e});if(!n){e();return}v(n)},[r]);let w=a.useCallback(()=>{l(k.Ce())},[l]),A=(0,C.t)("collaboration.feedback.compare_changes_modal.header"),N={nodeId:n,sceneGraph:new p.qo(c.G)};return u.node&&m.node?a.createElement(e_,{nodeId:r,onCloseModal:w,modalTitle:A,currentImage:b,historicImage:g,currentHeader:ed(u.node,u.backingSymbolData),historicHeader:ed(m.node,m.backingSymbolData),renderLoadingBar:!1,modalError:h,discreteDiffingInput:N,initialSelectedNodeId:o}):null},Z.Dx,H.ZU.YES)},274702:(e,r,n)=>{n.d(r,{Ec:()=>U});var a=n(411855),i=n(188507);n(805014);var o=n(629019),s=n.n(o),l=n(777535),c=n(563192),d=n(137565),u=n(693565),m=n(76265),p=n(910164),h=n(530494);n(73041);var _=n(654375);n(366172);var g=n(131129),f=n(314540),E=n(632679),y=n(237336);let b="hyperlink_popup--icon--7YW8G",v="hyperlink_popup--inlineText--U1QY9",T="hyperlink_popup--path--UM5d- hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",I="hyperlink_popup--text--kzWyq hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",S="hyperlink_popup--clickable--VAzTE",w="hyperlink_popup--divider--NSUKF",A="hyperlink_popup--open--EsmHi",C="hyperlink_popup--edit--Q80cZ";var N=n(97648),L=n(626744),O=n(677752),R=n(430602),P=n(614603),D=n(143091),k=n(350057),M=n(503878),F=n(667875);function x(e){let r,n;let o=(0,i.wA)(),x=r=>{o((0,h.RK)({rawInput:e.urlString,event:r})),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup()},U=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?(0,E.UA)(o,e.data.url.pathname,"HyperlinkPopup"):console.error("We don't yet enable copy for other hyperlinks"),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),r.stopPropagation()},B=r=>{e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),e.showHyperlinkEditor(),(0,l.sx)("Show Hyperlink Editor",{source:"HyperlinkPopup"}),r.stopPropagation()},V=r=>{(e.data.type===y.F.GENERIC||e.data.type===y.F.FIGMA_FILE||e.data.type===y.F.FIGMA_PROTOTYPE||e.data.type===y.F.FIGMA_VERSION)&&e.getLinkMetadata&&o(e.getLinkMetadata({clipboardText:e.data.url.toString(),url:e.data.url.toString(),isTextIframe:!1,entrypoint:_.WJ.MODAL}))},G=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?U(r):x(r)},{data:H}=e;switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:case y.F.FIGMA_VERSION:let W=H.url.host.replace(/http(s)?(:)?(\/\/)?|(\/\/)?(www\.)?/,""),K=H.url.pathname+H.url.search+H.url.hash,Y=K.split(/\//),$="design"===Y[1]||"board"===Y[1]||"proto"===Y[1],j="board"===Y[1];switch(H.type){case y.F.GENERIC:n=D.A;break;case y.F.FIGMA_FILE:case y.F.FIGMA_VERSION:n=$?j?N.A:O.A:D.A;break;case y.F.FIGMA_PROTOTYPE:n=M.A}if((0,g.F4)(H.url.host)&&$&&Y[2]&&Y[3]){let e=decodeURI(H.url.pathname.split(/\//)[3]).replace(/-/g," ");r=a.createElement("div",{className:I},e)}else r=a.createElement(a.Fragment,null,a.createElement("div",{className:"hyperlink_popup--domain--k0xkl hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},W),K&&"/"!==K&&a.createElement("div",{className:T},K));break;case y.F.PAGE:n=R.A,r=a.createElement("div",{className:I},H.text);break;case y.F.FRAME:let z=H.text;z&&e.editorType===f._Y.SITES&&(z="/"===z?(0,m.t)("sites.panel.home"):z),n=P.A,r=a.createElement(a.Fragment,null,a.createElement("div",{className:I},z),H.secondaryText&&a.createElement("div",{className:"hyperlink_popup--secondaryText--bLzWO hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},a.createElement(u.B,{className:"hyperlink_popup--pageSeparator--SAx-p",svg:L.A}),H.secondaryText));break;case y.F.INVALID:n=D.A,r=a.createElement("div",{className:I},(0,m.tx)("hyperlink.invalid_link",{link:H.urlString}));break;case y.F.MISSING:case y.F.NOT_LOADED:n=D.A,r=a.createElement("div",{className:I},H.text);break;case y.F.MAILTO:r=a.createElement("div",{className:T},H.url.pathname),n=k.A;break;case y.F.TEL:n=F.A,r=a.createElement("div",{className:T},H.url.pathname)}let q=e.canEdit,Z=e.canEdit&&(H.type===y.F.GENERIC||H.type===y.F.FIGMA_FILE||H.type===y.F.FIGMA_VERSION||H.type===y.F.FIGMA_PROTOTYPE),X=function(){switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,m.t)("hyperlink.prefix.open");case y.F.FIGMA_VERSION:return(0,m.t)("hyperlink.prefix.open_past_version");case y.F.PAGE:case y.F.FRAME:return(0,m.t)("hyperlink.prefix.go_to");case y.F.MAILTO:case y.F.TEL:return(0,m.t)("hyperlink.prefix.email");case y.F.INVALID:case y.F.MISSING:case y.F.NOT_LOADED:return null}}(),J=(()=>{switch(e.data.type){case y.F.MAILTO:return(0,m.t)("hyperlink.send_mail");case y.F.TEL:return(0,m.t)("hyperlink.call_telephone");default:return null}})(),Q=(()=>{if(e.editorType===f._Y.SITES)switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,m.tx)("hyperlink.prefix.open")}return a.createElement(a.Fragment,null,X?a.createElement("span",{className:v},X," "):null,r)})(),ee=(r,i)=>a.createElement(d.GG,{type:"button",className:s()({[S]:r,[A]:!r}),onAuxClick:G,onMouseDown:G,recordingKey:e.recordingKey},r&&a.createElement(u.B,{className:b,style:p.sx.if(n===N.A,p.sx.add({transform:"rotate(90deg)"})).$,svg:n}),i),et=a.createElement(d.GG,{type:"button",className:`${A} ${S}`,onAuxClick:x,onMouseDown:x,recordingKey:c.Pt(e,"secondaryButton")},J),er=(r,n)=>a.createElement(d.GG,{type:"button",recordingKey:c.Pt(e,"editHyperlinkPopup"),className:s()({[C]:!r,"hyperlink_popup--editContainer--W1EMp":r,[S]:r}),onMouseDown:B},r&&a.createElement(a.Fragment,null,a.createElement(u.B,{className:b,svg:D.A}),a.createElement("div",{className:s()(v,"hyperlink_popup--editText--IGsdw")},(0,m.tx)("hyperlink.edit"))),n);return a.createElement("div",{className:"hyperlink_popup--popup--fByJA _overlayBase--_overlayBase--Rkj8l",onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()}},(()=>{switch(e.editorType){case f._Y.SITES:switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return a.createElement(a.Fragment,null,q&&a.createElement(a.Fragment,null,er(!0,r),a.createElement("div",{className:w})),ee(!1,Q));default:return a.createElement(a.Fragment,null,ee(!0,Q),q&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))))}case f._Y.WHITEBOARD:return a.createElement(a.Fragment,null,ee(!0,Q),q&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))),Z&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),a.createElement(d.D8,{dataTestId:"hyperlink.preview",role:"button",recordingKey:c.Pt(e,"unfurlHyperlinkPopup"),className:C,onMouseDown:V},(0,m.tx)("hyperlink.create_preview"))));default:return a.createElement(a.Fragment,null,ee(!0,Q),J&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),et),q&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))))}})())}function U(e){let{data:r,editorType:n,urlString:i,canEdit:o,onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d}=e;return a.createElement(x,{data:r,editorType:n,urlString:i,canEdit:o,recordingKey:"hyperlinkPopup",onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d})}},373431:(e,r,n)=>{n.d(r,{Jq:()=>u});var a=n(411855),i=n(629019),o=n.n(i),s=n(563192),l=n(771952),c=n(682139);let d=(0,l.g)();var u=(e=>(e.ESSENTIAL="essential",e.TOOLS="tools",e.VIEW="view",e.ZOOM="zoom",e.TEXT="text",e.SHAPE="shape",e.SELECT="select",e.CURSOR="cursor",e.EDIT="edit",e.COPY="copy",e.TRANSFORM="transform",e.ARRANGE="arrange",e.COMPONENTS="components",e.ADVANCED="advanced",e.ACCESSIBILITY="accessibility",e))(u||{});a.forwardRef((e,r)=>{let{tabInfo:n,completedTabs:i,onNavClick:o}=e;return a.createElement(a.Fragment,null,n.map((s,l)=>a.createElement(m,{key:s.id,tabInfo:n,completedTabs:i,onNavClick:o,recordingKey:e.recordingKey,tab:s,index:l,ref:r})))});let m=a.forwardRef((e,r)=>{let{tab:n,index:i,onNavClick:l,completedTabs:u}=e,m=s.rf(s.Pt(e,n.id),"click",e=>{l(n.id)});return void 0!==n.active?a.createElement("div",{role:"tab",ref:e=>{r.current||(r.current=[]),r.current[i]=e},"aria-selected":n.active,"aria-controls":d,key:n.id,id:n.id,className:n.className,"data-completed":u[n.id],onClick:m,tabIndex:-1},n.displayName):a.createElement("div",{key:n.id,className:o()(n.className,c.GM)})})},257776:(e,r,n)=>{n(841962),n(343373),n(212507),n(176160),n(661137),n(15092),n(846836),n(90148);var a=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(a||{}),i=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(i||{})},973800:(e,r,n)=>{n.d(r,{k:()=>a}),n(411855),n(188507),n(629019),n(343373),n(427494),n(370939),n(846836),n(845113),n(488527);let a="left-panel-container"},846836:(e,r,n)=>{n.d(r,{Ye:()=>u,n0:()=>m}),n(411855),n(188507);var a=n(805014);n(851169),n(245954),n(777535),n(294829),n(336427);var i=n(875877);n(40211),n(677840),n(76265),n(553362);var o=n(343373);n(754807),n(366172),n(509343);var s=n(681483);n(963993);var l=n(427494);n(608520);var c=n(473982),d=n(797187);function u(){let e=(0,o.GS)(),r=!(0,d.ut)(a.Ez5?.editorPreferences().showSidebar,s.R.showSidebar),n=(0,d.ut)(a.Ez5?.uiState().leftPanelCollapsedUI3,!s.R.showSidebar);return e?n:r}function m(){return(0,l.p8)("pagesList")}n(654224),n(127014),(0,i.atomFamily)(e=>(0,c.Wh)(()=>(0,i.atom)(e))),(0,c.Wh)(()=>(0,i.atom)(!1))},392695:(e,r,n)=>{n.d(r,{j:()=>p});var a=n(411855),i=n(805014),o=n(108982),s=n(918091),l=n(76265),c=n(692783),d=n(740062);let u=s.ms,m=s.c$,p="component-insert-leaf-context-menu";a.memo(function(){let{dropdownShown:e,defaultLibraryKeys:r,openFileKey:n}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,defaultLibraryKeys:e.library.defaultPublished.libraryKeys,openFileKey:e.openFile?.key||null})),s=e?.data?.component,h=s?.file_key===n,_=(0,c.b)({libraryKey:s?.library_key,nodeId:s?.node_id});if(!e||e.type!==p||!s||r.includes(s.library_key))return null;let g=_.data;return h||g?.link?a.createElement(u,{className:d.H,style:e.data.position},h?a.createElement(m,{recordingKey:`goToLocalComponent.${s.node_id}`,onClick:()=>i.glU.goToSymbolOrStateGroupById(s.node_id,!1)},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component")):a.createElement(m,{recordingKey:`goToSubscribedComponent.${s.node_id}`,href:g?.link,target:"_blank"},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component"))):null})},979733:(e,r,n)=>{n.d(r,{I1:()=>C,RG:()=>P,cY:()=>L,dL:()=>k,jz:()=>F,pz:()=>O,yP:()=>R});var a=n(33011),i=n(89865),o=n.n(i),s=n(841962),l=n(875877),c=n(977235),d=n(746643),u=n(812272),m=n(154267),p=n(664135),h=n(643225),_=n(222781),g=n(546642),f=n(346564),E=n(731287),y=n(581346),b=n(176160),v=n(927150),T=n(183739),I=n(313449),S=n(747765),w=n(689102),A=n(957020);let C=(0,l.atom)(e=>{let r=e(b.yV);if(!r)return(0,c.Xm)();let n=r.parentOrgId,a=!!r.teamId,i=(0,h.T9)(r?.project),o=e(T.DtB.Query({fileKey:r.key??"",teamId:r.teamId??"-1",workspaceId:r.team?.workspaceId??null,orgId:n,group:(0,p.M)()??null})),s=e(m.JB),l=e(w.Me),d=(0,I.w5)(l);return(0,S.gM)(o,a,i,s,n,d)}),N=(0,l.atomFamily)(e=>(0,l.selectAtom)(C,r=>new Set(r.data?.map(r=>r[e])),u.yZ)),L=e=>N(e),O=(0,v.OX)(A.o.LIBRARY,"SET_LIBRARY_PUBLISHING_MODE"),R=(0,v.bt)(e=>e.openFile?.publishedHubFile?.id),P=(0,v.bt)(e=>e.openFile?.publishedHubFile?.libraryKey?(0,a.l)(e.openFile.publishedHubFile.libraryKey):null),D=(0,v.bt)(e=>e.openFile?.editorType),k=(0,l.atom)(null),M=(e,r)=>r,F=(()=>{let e=(0,l.withEqualityCheckedSet)((0,l.atom)(e=>{let r=e(R),n=e(D),a={variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}};if(!r||!(0,s.kc)().cmty_lib_admin_publish&&"slides"!==n)return a;let i=e(T.vsj.Query({hubFileId:r})),l=(0,_.J)(i),c=(0,f.o)(i),d=e(T.Acj.Query({hubFileId:r})),u=(0,E.F)(d),m=e(T.eHy.Query({hubFileId:r})),p=(0,y.kX)({type:"community",value:m},!0),h=(0,y.cM)({type:"community",value:m},!0),b=e(T.CfA.Query({hubFileId:r})),v=(0,g.i)(b);return a.variables=o()(h,"node_id"),a.variableSets=o()(p,"node_id"),a.styles=o()(u,"node_id"),a.components=o()(l,"node_id"),a.stateGroups=o()(c,"node_id"),a.modules=o()(v,"node_id"),a},d.lQ)),r=(0,v.Pj)(e,"SET_OPEN_HUB_FILE_PUBLISHED_LIVEGRAPH",{variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}}),n=(0,l.withReducer)(r,M);return(0,v.S9)(n,r.reducer)})()},544178:(e,r,n)=>{n.d(r,{E1:()=>y,aU:()=>E});var a=n(411855),i=n(188507),o=n(777535),s=n(512729),l=n(64271),c=n(153767),d=n(14489),u=n(837982),m=n(366172),p=n(19776),h=n(176160),_=n(835173),g=n(419268);let f=e=>!!e.isNewAssetsPanel;function E(e){let{isVisible:r,query:n,placeholder:c,onChange:E,className:y,extraSpacing:b,hideXIcon:v,hideSearchIcon:T,isFigjam:I,isLibraryModalUi3:S,autofocus:w,selectOnFocus:A,entryPointForTracking:C,forwardedRef:N,recordingKey:L}=e,O=(0,i.wA)(),R=(0,h.q5)(),P=(0,i.d4)(e=>e.search.sessionId),D=(0,_.k)(),k=a.useRef(null),M=function({isVisible:e,autofocus:r,selectOnFocus:n,ref:i}){return a.useCallback(()=>{i?.current&&e&&r&&i.current.focus(n)},[r,e,i,n])}({isVisible:r,autofocus:w,selectOnFocus:A,ref:k}),F=a.useCallback(e=>!!(e.altKey&&m.Y5.isReady())&&(0,p.f7)(e,!0),[]);(0,s.h)(()=>{function e(){O(u.ky())}return M(),e(),e});let x=a.useCallback(()=>{"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_cleared",{searchQuery:n,assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)?e.onClearSearch():E(""),O(u.ky())},[C,e,O,n,D,R?.key,R?.teamId,R?.parentOrgId,E]),U=a.useCallback(e=>{C&&(""===e&&P?O(u.ky()):""===e||P||O(u.Dy({entryPoint:C})),E(e))},[O,C,P,E]),B=a.useCallback(()=>{""===n||P||O(u.Dy({entryPoint:C})),"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_focused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onFocus()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D,P,O,n]),V=a.useCallback(()=>{"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_unfocused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onBlur()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D]);return I||S?a.createElement(d.IW,{ref:(0,l.A)(k,N),className:y,focusOnMount:!1,query:n,placeholder:c,clearSearch:x,onChange:U,onFocus:B,onBlur:V,isKeyDownHandled:F,hideXIcon:v,recordingKey:L,withUI3Icon:S}):f(e)?a.createElement(g.K,{ref:(0,l.A)(k,N),onFocus:B,onBlur:V,focusOnMount:!1,query:n,clearSearch:x,onChange:U,placeholder:e.placeholder,isKeyDownHandled:F,recordingKey:L}):a.createElement(d.Lp,{ref:(0,l.A)(k,N),className:y,focusOnMount:!1,extraSpacing:b,query:n,placeholder:c,clearSearch:x,onChange:U,onFocus:B,onBlur:V,isKeyDownHandled:F,hideXIcon:v,hideSearchIcon:T,recordingKey:L,dataTestId:"asset-panel-search-bar-input"})}function y({autofocus:e,className:r,column:n,extraSpacing:i,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:m,onChange:p,path:h,placeholder:_,query:g,recordingKey:f,selectOnFocus:y,entryPointForTracking:b,forwardedRef:v,...T}){let I=a.useRef(null),S=a.useCallback(()=>{y&&I.current?.select()},[y]),{setKeyboardNavigationElement:w}=(0,c.M3)({path:h,column:n,disabled:!m,onFocus:S});return(0,s.h)(()=>{I.current&&w?.(I.current.searchInput)}),a.createElement(E,{forwardedRef:(0,l.A)(I,v),autofocus:e,className:r,extraSpacing:i,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:m,onChange:p,placeholder:_,query:g,selectOnFocus:y,entryPointForTracking:b,setKeyboardNavigationElement:w,recordingKey:f,...T})}},553920:(e,r,n)=>{n.d(r,{PI:()=>l,rp:()=>s});var a=n(991458),i=n(957020),o=n(489018);(0,a.hG)(o.ZV),(0,a.hG)(o.FX);var s=(e=>(e.WIDE="WIDE",e.SMALL="SMALL",e.NORMAL="NORMAL",e.THIN="THIN",e))(s||{});function l(e,r){let n=!0,a=!0;for(let r of e){let e,o;if(r.type!==i.PW.STYLE){if("min_node_width"in r)e=r.min_node_width,o=r.min_node_height;else{if(!("width"in r))continue;e=r.width,o=r.height}if(!e||!o)return"NORMAL";if(e<3*o&&(n=!1),(e>64||o>64)&&(a=!1),!n&&!a)break}}return n?"WIDE":a&&!r?"SMALL":"NORMAL"}},27365:(e,r,n)=>{n.d(r,{I:()=>a});var a=(e=>(e.ALL="all",e.RECENT="recent",e.LOCAL="local",e.FILE="file",e.SITE_KIT="site kit",e))(a||{})},514911:(e,r,n)=>{n.d(r,{DG:()=>i}),n(411855);var a=n(437068);function i(e,r){null!==a.x4&&a.x4.setItem(`library-section-expanded-${e}`,JSON.stringify(r))}},455731:(e,r,n)=>{n.d(r,{J:()=>l});var a=n(411855),i=n(188507),o=n(736041);n(77383),n(631762),n(957020);var s=n(845804);function l(e,r,n){let l=(0,i.wA)(),c=(0,i.d4)(e=>e.modalShown);return a.useCallback(()=>{c?.type===s.V&&c?.data&&l(o.hm({data:{...c?.data,asset:e,sectionPosition:r,sectionNameForTracking:n},type:s.V}))},[e,l,c,r,n])}},678599:(e,r,n)=>{n.d(r,{$1:()=>v,ND:()=>b,cx:()=>C,mZ:()=>E,oV:()=>S});var a=n(411855);n(188507);var i=n(834825),o=n(33011);n(777535);var s=n(875877),l=n(746643),c=n(653798);n(900183);var d=n(343373),u=n(154267),m=n(481954);n(387583);var p=n(470426);n(176160);var h=n(827473);n(285024),n(328254);var _=n(957020),g=n(60329),f=n(401562);n(835173);let E="assets-panel",y=[];function b(e,r,n){let a=(0,m.y3)(e),i=[],o=[],s=[],l=n?Object.values(n):[],c=0,d=0,u=new Set;if(r)for(let e of Object.keys(r)){let n=r[e],a=n.containing_frame?.containingStateGroup?.nodeId;a&&n.old_key&&u.add(a)}for(let e of a)if(e.deletedFromSceneGraph||(i.push(e),e.status===_.E8.NOT_STAGED||e.status===_.E8.DELETED?s.push(e):o.push(e)),(0,m.UB)(e.status)&&d++,e.status!==_.E8.CURRENT&&e.status!==_.E8.NOT_STAGED||(e.type===_.PW.COMPONENT||e.type===_.PW.STATE_GROUP)&&(0,h.Hb)(e.status)&&e.old_key||e.type===_.PW.STATE_GROUP&&(0,h.Hb)(e.status)&&u.has(e.node_id)){c++;continue}return{allItems:i,publishedItems:o,privateItems:s,erroneousItems:l,numUpdates:c,numPublished:d}}function v({library:e,fileDataByLibraryKey:r,filterFileKeyInclude:n,filterFileKeyExclude:i}){let s=I({itemsByTeamId:e.publishedByLibraryKey.stateGroups,fileDataByLibraryKey:r}),l=function({library:e,fileDataByLibraryKey:r}){return I({itemsByTeamId:e.publishedByLibraryKey.components,fileDataByLibraryKey:r,predicate:T})}({library:e,fileDataByLibraryKey:r});return(0,a.useMemo)(()=>{let e={},r={};for(let a of l.subscribedFiles){if(n&&a.key!==n||i&&a.key===i||!a.library_key)continue;let s=(0,o.l)(a.library_key);e[s]=a,r[s]=(r[s]||[]).concat(l.libraryKeyToSubscribedItems[s]??[])}for(let a of s.subscribedFiles){if(n&&a.key!==n||i&&a.key===i||!a.library_key)continue;let l=(0,o.l)(a.library_key);e[l]=a,r[l]=(r[l]||[]).concat(s.libraryKeyToSubscribedItems[l]??[])}return{subscribedFiles:Object.values(e),libraryKeyToSubscribedItems:r}},[n,i,l,s])}(0,f.n)((e,r)=>{let n=b((0,m.Jl)(e)),a=b(r,e);return{allItems:[].concat(n.allItems,a.allItems),publishedItems:[].concat(n.publishedItems,a.publishedItems),privateItems:[].concat(n.privateItems,a.privateItems),erroneousItems:[].concat(n.erroneousItems,a.erroneousItems),numUpdates:n.numUpdates+a.numUpdates,numPublished:n.numPublished+a.numPublished}});let T=e=>e.containing_frame?.containingStateGroup==null;function I({itemsByTeamId:e,fileDataByLibraryKey:r,predicate:n=l.af}){let s=(0,h.fc)();return(0,a.useMemo)(()=>{let a=Object.create(null);for(let i in e){let l=e[i];for(let e in l){let i=(0,o.l)(e),c=r[i];if(!c||(0,u.wJ)(c.key)||!s((0,o.l)(c.library_key)))continue;let d=[],m=l[i];for(let e in m){let r=m[e];r&&n(r)&&d.push(r)}d.length>0&&(a[i]=d)}}let l=[];return Object.keys(a).forEach(e=>{let n=r[(0,o.l)(e)];n&&l.push(n)}),(0,i.KQ)(l,"name"),{libraryKeyToSubscribedItems:a,subscribedFiles:l}},[e,r,n,s])}function S({library:e,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n=y}){let i=w({itemsByTeamId:e.publishedByLibraryKey.stateGroups,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n}),s=w({itemsByTeamId:e.publishedByLibraryKey.components,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n});return(0,a.useMemo)(()=>{let e={},r={};for(let n of[s,i])for(let a of n.subscribedHubFiles){if(!a.library_key){(0,c.x1)("library key","Hub file unexpectedly has no library key",{hubFileId:a.id});continue}let i=(0,o.l)(a.library_key);e[i]=a,r[i]=(r[i]||[]).concat(n.libraryKeyToSubscribedItems[i]??[])}return{subscribedHubFiles:Object.values(e),libraryKeyToSubscribedItems:r}},[i,s])}function w({itemsByTeamId:e,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n=y}){let s=(0,h.fc)();return(0,a.useMemo)(()=>{let a={};for(let i in e){let l=e[i];for(let e in l){let i=(0,o.l)(e),c=r[i],d=n.includes(i);if(!c||!s((0,o.l)(c.library_key))&&!d)continue;let u=[],m=l[i];for(let e in m){let r=m[e];r&&!(r?.type===_.PW.COMPONENT&&r?.containing_frame?.containingStateGroup)&&u.push(r)}u.length>0&&(a[i]=u)}}let l=Object.keys(a).map(e=>r[e]);return(0,i.v7)(l,e=>e.versions[e.current_hub_file_version_id]?.name),{libraryKeyToSubscribedItems:a,subscribedHubFiles:l}},[e,r,n,s])}var A=(e=>(e[e.Grid=0]="Grid",e[e.List=1]="List",e))(A||{});function C(e){let r=(0,d.GS)(),n=(0,s.useAtomValue)(g.TG);return!!e&&(!!(0,_.Do)(e)||e.type===_.PW.MODULE||(e.type===_.PW.COMPONENT||e.type===_.PW.STATE_GROUP)&&(r||(0,p.o)(e,n)))}},831231:(e,r,n)=>{n.d(r,{Ee:()=>O,N2:()=>L});var a=n(411855),i=n(326612),o=n(520244),s=n(148257),l=n(296601),c=n(629019),d=n.n(c),u=n(563192),m=n(137565),p=n(153767),h=n(132939),_=n(265851),g=n(76265);n(374629);var f=n(343373);n(864941);var E=n(69664);n(131776),n(835301);var y=n(957020),b=n(583044);n(777535),n(512729),n(206814),n(176160),n(69441),n(678599);var v=n(304420);n(979530);let T="empty_states--emptyStateContent--i0Ad8",I="empty_states--emptyStateIcon--kLLCD",S="empty_states--emptyStateIconWrapper--SHUbu",w="empty_states--emptyStateText--gZR-A";var A=n(400232),C=n(951864),N=n(337987);function L(e,r){return e?r?b.r6.BROWSE_LIBRARIES_ACTIONS:b.r6.BROWSE_LIBRARIES_ASSETS_PANEL:r?b.r6.ACTIONS_EXPLORE_LIBRARIES_LINK:b.r6.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK}function O({onClickExplore:e,width_ui3:r,fromActionsModal:n,bgTransparentUI3:i=!1}){let o=(0,f.GS)(),s=a.useMemo(()=>L(o,!!n),[n,o]),{onToggleLibraryModal:l}=(0,E.u)({entrypoint:s,modalType:"editor",initialTab:y.Wv.TEAM_LIBRARIES}),c=a.useCallback(()=>{e?.(),l()},[e,l]);return o?a.createElement(R,{onClick:c,width:r,bgTransparent:i,fromActionsModal:!!n}):a.createElement(P,{onClick:c})}function R({onClick:e,width:r,bgTransparent:n=!1,fromActionsModal:l}){let{setKeyboardNavigationElement:c}=(0,p.M3)({path:[v.ON.CONTENTS,v.zr.CTA],disabled:l});return a.createElement("div",{className:d()("empty_states--ui3EmptyState--8bWkh",_.s.if(n,_.s.bgTransparent,_.s.colorBgSecondary).$),style:{width:r},"data-testid":"empty-state-assets-ui3"},a.createElement("div",{className:"empty_states--ui3LibraryIcon--56jRu"},a.createElement(s.l,null)),a.createElement("div",{className:"empty_states--ui3EmptyStateTitle--UwoAZ"},(0,g.tx)("design_systems.assets_panel.empty_state_title_ui3")),a.createElement("div",null,a.createElement("div",{className:"empty_states--ui3EmptyStateSubtitle---Yamk"},(0,g.tx)("design_systems.assets_panel.empty_state_subtitle_ui3")),a.createElement(i.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more"))),a.createElement(o.$n,{onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries"),ref:c},(0,g.tx)("design_systems.assets_panel.empty_state_cta_ui3")))}function P({onClick:e}){return a.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd","data-testid":"empty-state-assets-ui2"},a.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,g.tx)("design_systems.assets_panel.components")),a.createElement("div",{className:T},a.createElement(h.U,{className:I,svg:A.A},a.createElement("div",{className:S},a.createElement(l.P,null))),a.createElement("div",{className:w},(0,g.tx)("design_systems.assets_panel.create_a_component")," ",a.createElement(i.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more")))),a.createElement("div",{className:T},a.createElement(h.U,{className:I,svg:C.A,fallbackSvg:N.A},a.createElement("div",{className:S},a.createElement(s.l,null))),a.createElement("div",{className:w},a.createElement(m.GG,{className:"empty_states--link--kfp3o blue_link--blueLink--9rlnd",onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries")},(0,g.tx)("design_systems.assets_panel.explore_libraries")))))}},817395:(e,r,n)=>{n.d(r,{VL:()=>a}),n(834825),n(841962),n(76265),n(264259),n(470426),n(827473),n(396065),n(957020),n(678599);let a="0:1";function i(e,r,n){sortAlphabeticallyOrPrioritizeExamplesByFn(r,{sortFn:e=>e.name,priorityFn:e=>isExampleAsset(e,{isPreset:n?.isPreset??!1})});let a=Object.create(null);for(let n of r){let r=getNameParts(n.name),i="";for(let o=0;o<r.length;o++){let s;let l=r[o],c=i,d=o<r.length-1;if(i+=l+(d?"/":""),s=a[c]?a[c]:e,d&&!a[i]){let e={type:"NAME_GROUP",name:l,key:l,items:[],subtrees:[]};a[i]=e,s.subtrees.push(e)}d||s.items.push(n)}}}function o(e,r,n){let a={},o=[],l=[],c={};for(let e of r)if(getFeatureFlags().dse_templates_proto&&e.type===AssetType.COMPONENT&&isTemplate(e))o.push(e);else if(isCanvasAsset(e)&&e.containing_frame?.nodeId&&""!==e.containing_frame.name){let r=e.containing_frame.nodeId;a[r]=a[r]||[],a[r].push(e),c[r]=e.containing_frame}else l.push(e);if(getFeatureFlags().dse_templates_proto&&o.length>0){let r={type:"NAME_GROUP",name:"Templates",key:`${e.key}-${s}`,items:[],subtrees:[]};e.subtrees.push(r),i(r,o,{isPreset:n?.isPreset??!1})}let d=Object.keys(a).length;if(d>0||1===d&&l.length){for(let r in a){let o=c[r],s=a[r],l={type:"NAME_GROUP",name:o.name||"",key:r,items:[],subtrees:[]};e.subtrees.push(l),i(l,s,{isPreset:n?.isPreset??!1})}i(e,l,{isPreset:n?.isPreset??!1})}else i(e,getFeatureFlags().dse_templates_proto?r.filter(e=>!isTemplate(e)):r,{isPreset:n?.isPreset??!1})}let s="template-subtree";var l=(e=>(e[e.COMPONENT=0]="COMPONENT",e[e.TEMPLATE=1]="TEMPLATE",e))(l||{})},971158:(e,r,n)=>{n.d(r,{KO:()=>f});var a=n(411855),i=n(777535),o=n(875877),s=n(94489),l=n(769849),c=n(176160),d=n(473982),u=n(270143);let m="performance.ds_eco.asset_panel_loading",p=new s.jk(m,{}),h=((0,d.rt)(!1),(0,d.rt)(!1)),_=(e,r)=>{let n=(0,c.q5)(),s=(0,u.D)(),[d,_]=(0,o.useAtom)(h);a.useEffect(()=>{if(!s&&!d&&r){_(!0);let r=p.stop();r&&(0,i.sx)(m,{elapsedMs:r,fileKey:n?.key,teamId:n?.teamId,orgId:n?.parentOrgId,isUi3RedesignedAssetPanel:!1,numLibraries:e.allElementsTree.allElements.length,numComponents:g(e.allElementsTree.allElements),numComponentsShown:e.elementsInView.filter(e=>e.type===l.zq.TILE).length,numSectionsShown:e.elementsInView.filter(e=>e.type===l.zq.ROW).length},{forwardToDatadog:!0})}},[e.isDirty,e.elementsInView,e.allElementsTree,s,d,n,_,r])},g=e=>{let r=0;return e.forEach(e=>{e.type===l.zq.TILE?r+=1:e.type===l.zq.ROW&&(0,l.We)(e)&&(r+=g(e.children))}),r};function f({elementsCache:e,hasRenderedItems:r}){return _(e,r),null}},295221:(e,r,n)=>{n.d(r,{b:()=>d});var a=n(411855),i=n(188507),o=n(788843),s=n(176160),l=n(354465),c=n(767731);let d=function({disabled:e=!1}={}){let r=(0,i.wA)(),n=(0,s.q5)(),d=(0,i.d4)(e=>e.fileVersion),u=(0,i.d4)(e=>e.loadingState),m=a.useRef(0),p=null!=n&&null!=d?(0,c.yD)(n.key):void 0;return a.useEffect(()=>{!e&&null!=p&&(0,l.Sc)(u,p)&&m.current<3&&(m.current+=1,r((0,o.zK)()))},[r,p,u,e]),{isLoaded:(0,l.mC)(p??"")&&!!p}}},605369:(e,r,n)=>{n.d(r,{lX:()=>Y});var a=n(411855),i=n(188507),o=n(32257),s=n(351966);n(805014);var l=n(629019),c=n.n(l),d=n(512495),u=n.n(d),m=n(230208),p=n(991458);n(512729);var h=n(563192);n(36748);var _=n(612724),g=n(265851),f=n(284807),E=n(76265),y=n(475824),b=n(581713),v=n(991888),T=n(73041),I=n(343373),S=n(481954);n(366172);var w=n(773649),A=n(921249),C=n(858779),N=n(710443),L=n(410881),O=n(631762),R=n(507121),P=n(354592),D=n(957020),k=n(688656),M=n(914530),F=n(845804),x=n(261734),U=n(679587),B=n(678599),V=n(346255),G=n(489018),H=n(83798);let W=(0,p.hG)(G.QU);function K(e){switch(e){case"list-compact":case"list":case"list-no-padding":return!0;case"grid":case"grid-compact":case void 0:return!1}}function Y(e){var r,n,i;let{item:o}=e,{nameStyle:s,background:l}=(r=e.item,n=e.displayType,i=e.noBackground,a.useMemo(()=>{let e={};if(i)return{nameStyle:e,background:null};let a=(0,S.zR)(r,null);return a&&!K(n)&&(e.background=y.F.format(a),e.color=(0,m.G$)(a)),{nameStyle:e,background:a}},[n,i,r])),c=e.showName;(e.hideNameOverlay||e.shouldShowNamePopout&&!K(e.displayType))&&(c=!1);let d=H.UA,p=u()({},e,{style:{marginLeft:e.gutterWidth}});return a.createElement($,{...p},a.createElement(j,{...e},a.createElement(z,{...e,backgroundColor:l,className:void 0,style:e.isDragged?void 0:e.style}),c&&a.createElement("div",{className:function(e,r){switch(e){case"grid":case"grid-compact":case void 0:return r;case"list-compact":return H.OD;case"list":case"list-no-padding":return H.vZ}}(e.displayType,d),style:s},(()=>{if(K(e.displayType)&&!e.isSearch){let r=(0,N.kH)(o.name);return e.item.type===D.PW.RESPONSIVE_SET?(0,P.NR)(r):r}return o.name})()),e.item.type===D.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&a.createElement(Z,{isList:K(e.displayType),numVariants:e.numVariants})))}(0,p.hG)(G.Us);let $=a.memo(a.forwardRef(function(e,r){let n;let i=K(e.displayType),s=a.useRef(null),l=e.height||120,c=e.width||120;l-=l%2,c-=c%2;let d=e.itemPadding??0;c+=2*d,l+=2*d;let u=i?e.style:{...e.style,width:c,height:l},m=(0,V.o)(e.item,{shouldShowName:e.shouldShowNamePopout,isList:i});n="list-compact"===e.displayType?H.nl:"list"===e.displayType?H.yg:"list-no-padding"===e.displayType?H.oV:e.isDragged?H.Vs:e.isFigJam||e.isSlides||e.isCooper?H.bo:e.useBaseTile?H.aS:"grid-compact"===e.displayType?H.Ms:H.fh;let p=(0,D.Do)(e.item)?null:e.item.description,h=e.item.type===D.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0,_=e.shouldShowNamePopout&&!i,g=!e.shouldHideDescription&&p,f=(g||_||h)&&!e.shouldHideTooltip,E=a.useMemo(()=>e.isFigJam||e.isSlides||e.isCooper?{"data-tooltip":e.isDragged?void 0:e.tooltipOverride??(0,N.kH)(e.item.name),"data-tooltip-type":e.isDragged?void 0:k.Ib.TEXT,"data-tooltip-timeout-delay":e.isDragged?void 0:500,"data-tooltip-show-above":e.tooltipShownAbove}:m?{"data-tooltip-type":f?k.Ib.SPECIAL:void 0,"data-tooltip":f?U.B:void 0,"data-tooltip-component-name":_?e.tooltipOverride??(0,N.kH)(e.item.name):void 0,"data-tooltip-file-name":e.fileName,"data-tooltip-component-description":g?p:void 0,"data-tooltip-num-variants":h?e.numVariants:void 0,"data-tooltip-show-right":!0,"data-tooltip-max-width":240,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!!e.showTooltipImmediately||void 0,"data-tooltip-hide-immediately":!!e.showTooltipImmediately||void 0}:void 0,[e.isFigJam,e.isSlides,e.isCooper,e.isDragged,e.tooltipOverride,e.item.name,e.tooltipShownAbove,e.fileName,e.numVariants,e.showTooltipImmediately,m,f,_,g,p,h]);return a.createElement("div",{ref:r||s,className:`${n} ${e.className||""}`,style:u,...E},a.createElement(o.o,{eventListeners:["onMouseUp"]},e.children))}));function j(e){let r="whiteboard"===(0,T.lg)(),n=K(e.displayType),o=(0,B.cx)(e.item),l=(0,L.H)(),c=(0,i.d4)(e=>e.modalShown?.type),d=a.useCallback(()=>{c===F.V&&l()},[c,l]),{onInsertableResourcePointerDown:u,dragState:m,insertAction:p}=(0,C.j)({resource:e.item,isList:n,sourceForTracking:e.draggable?.sourceForTracking||"",sectionNameForTracking:e.draggable?.sectionNameForTracking,sectionDepth:e.draggable?.sectionDepth,clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:e.draggable?.afterSuccessfulInsert,draggingThumbMaxDimensions:o?void 0:new _.Mi((e.width||0)-W,(e.height||0)-W),sectionPosition:e.sectionPosition,recomputeCancelRectsOnPointerUp:c===F.V,onDragStart:()=>{e.draggable?.onDragStart?.(),d()},onPointerUp:e.draggable?.onPointerUp,preloadThumbnail:!!e.ThumbnailOverride}),E=`componentThumb.${e.recordingNodePath}`,y=h.rf(e.buttonProps?.onContextMenu?E:`${E}_UNUSED`,"contextmenu",r=>{e.buttonProps?.onContextMenu?.(r)},{recordMetadata:e=>{let r=e.currentTarget.getBoundingClientRect(),n=new _.Mi(r.left,r.top),a=new _.Mi(e.clientX,e.clientY).subtract(n);return{percentageMousePos:new _.Mi(a.x/r.width,a.y/r.height)}},playbackMetadata:r=>{let n=e.height||0,a=e.width||0;return{currentTarget:{getBoundingClientRect:()=>({top:0,left:0,height:n,width:a})},clientX:0+r.percentageMousePos.x*a,clientY:0+r.percentageMousePos.y*n}}}),v=h.rf(E,"click",r=>{if(e.buttonProps?.onItemClick?.(r,e.item),e.buttonProps?.clickToInsert){let n=new PointerEvent(r.type,{...r,view:window});p({e:n,isClick:!0,dropPosition:(0,A.zR)(void 0)}).then(()=>e.draggable?.afterSuccessfulInsert?.(n))}}),S=r=>{e.buttonProps?.onItemDoubleClick?.(r,e.item)},O=(r||e.isSlides||e.isCooper)&&m?H.Vk:H.GR,R=(0,I.GS)();return a.createElement(a.Fragment,null,a.createElement(f.n.div,{onPointerDown:r=>{e.draggable&&u(r)},style:{padding:e.itemPadding},className:g.s.hFull.borderBox.$,"data-testid":E},e.buttonProps?e.buttonProps?R?a.createElement(s.E,{className:O,htmlAttributes:{onContextMenu:y,onDoubleClick:S,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur},onClick:v,"aria-label":(0,N.kH)(e.item.name)},e.children):a.createElement("button",{className:O,onContextMenu:y,onDoubleClick:S,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur,onMouseDown:e.buttonProps?.onFocus?void 0:b.wo,onClick:v},e.children):null:a.createElement("div",{className:O},e.children)),a.createElement(w.q,{dragState:m,isList:n}))}function z({displayType:e,item:r,isDragged:n,isFigJam:i,isSlides:o,isCooper:s,backgroundColor:l,shouldShowShadowOnHover:d,height:u=120,width:m=120,noBackground:p,style:h,alwaysShowBorder:_,thumbWrapperClassName:g,thumbPaddingGrid:f,ThumbnailOverride:E}){let b;let T=a.useContext(R.uW),I=(0,v.X)(),S=u-u%2,w=m-m%2,A=K(e);b=A?p?H.v:H.Tq:p||i?H.Yc:`${H.wi} ${H.wi}`;let C={width:2*w,height:2*S,padding:a.useMemo(()=>i?0:A?W:f??W,[i,A,f]),...h};p||!l||i||(_||o||s||(C.boxShadow=(0,R.pw)(T,l,I)),C.background=y.F.format(l)),n&&(A?(C.width=void 0,C.height=void 0):C.background=void 0);let N=a.useMemo(()=>r.type===D.PW.RESPONSIVE_SET&&"LIBRARY"===r.subscriptionStatus&&r.fullPage?H.NK:d?H.Ib:i||o||s?H.FF:H.N4,[i,o,s,r,d]);return a.createElement("div",{className:H.Ol,style:n&&A?void 0:{width:w,height:S}},a.createElement("div",{className:c()(b,g,{[H.XK]:_}),style:C,"data-testid":`library-item-tile-thumb-${r.name}`},r.type===D.PW.VARIABLE_SET?a.createElement(q,{variableSetID:r.node_id}):E?a.createElement(a.Fragment,null,E):a.createElement(M.M,{className:N,item:r,shouldGenerateLocalThumbnail:!0,draggable:!1})))}let q=a.memo(function({variableSetID:e}){let r=(0,i.d4)(e=>(0,O.a3)(e)),n=a.useMemo(()=>{let n=new Set;for(let a of Object.values(r))if(a.variableSetId===e&&(n.add(a.resolvedType),n.size>=3))break;return[...n.values()]},[r,e]),o=(n.length-1)/2;return a.createElement("div",{className:H.bF},n.map((e,r)=>a.createElement("div",{className:H.aC,key:e,style:{marginTop:(o-r)*20}},a.createElement(x.i,{type:e,showTooltip:!1}))))});function Z({isList:e,numVariants:r}){let n=(0,I.GS)();return r<=1?null:a.createElement("div",{className:e?H.hs:H.xC,"data-tooltip":(0,E.t)("design_systems.assets_panel.variant_count",{numVariants:r}),"data-tooltip-type":k.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":n?500:void 0,"data-tooltip-show-immediately":!n||void 0,"data-tooltip-hide-immediately":!0},r)}},304420:(e,r,n)=>{n.d(r,{ON:()=>a,yW:()=>p,zr:()=>m});var a=(e=>(e[e.HEADER=0]="HEADER",e[e.SUGGESTIONS=1]="SUGGESTIONS",e[e.BREADCRUMB=2]="BREADCRUMB",e[e.CONTENTS=3]="CONTENTS",e))(a||{}),i=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e[e.PAGES=1]="PAGES",e[e.ASSETS=2]="ASSETS",e))(i||{}),o=(e=>(e[e.SEARCH_AND_FILTER=0]="SEARCH_AND_FILTER",e[e.LIBRARY_SEARCH_CHIP=1]="LIBRARY_SEARCH_CHIP",e))(o||{}),s=(e=>(e[e.SEARCH=0]="SEARCH",e[e.SETTINGS=1]="SETTINGS",e))(s||{}),l=(e=>(e[e.BACK=0]="BACK",e[e.LIBRARY=1]="LIBRARY",e[e.ELLIPSIS=2]="ELLIPSIS",e[e.STUBS=3]="STUBS",e))(l||{}),c=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.TEMPLATES=1]="TEMPLATES",e[e.EXAMPLES=2]="EXAMPLES",e[e.COMPONENTS=3]="COMPONENTS",e[e.FOLDERS=4]="FOLDERS",e))(c||{}),d=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.LOCAL_AND_SUBSCRIBED=1]="LOCAL_AND_SUBSCRIBED",e[e.PRESETS=2]="PRESETS",e[e.VISUAL_ASSETS=3]="VISUAL_ASSETS",e))(d||{}),u=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e))(u||{}),m=(e=>(e[e.CTA=0]="CTA",e[e.UI_KITS=1]="UI_KITS",e))(m||{}),p=(e=>(e.DESIGN="design",e.SITE="site",e))(p||{})},433576:(e,r,n)=>{n.d(r,{Nh:()=>f,Qk:()=>E,R2:()=>y,ZV:()=>b,mb:()=>g});var a=n(411855),i=n(834825),o=n(552371),s=n(777535),l=n(841962),c=n(875877),d=n(264259);n(200179);var u=n(176160),m=n(920432);n(27365);var p=n(835173);n(744297);var h=n(732767),_=n(304420);function g(e,r){return function(e,r){let n=[...e];return r&&(0,d.NX)(r)?(0,d.k9)({libraries:n,approvedLibraryKeysByResourceType:r}):(0,i.KQ)(n,"name"),n}(e.map(e=>({...e,library_key:e.libraryKey})),r)}function f(e,{includeEmptyLibraries:r}={}){let n=e.numComponents+e.numStateGroups,a=(0,l.u4)("dse_editor_templates_v1",e.numModuleAssets,0)??0;return r||n>0||a>0?{name:e.name,fileKey:e.fileKey,libraryKey:e.libraryKey,numComponents:n,numTemplates:a,thumbnailUrl:e.thumbnailUrlOverride??e.thumbnailUrl,thumbnailShouldCover:!!e.thumbnailGuid||"community"===e.libraryType,type:_.yW.DESIGN,libraryType:e.libraryType}:null}function E(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&"application"!==e.role}function y(e,r=8){let[n,i]=a.useState(window.innerHeight);a.useEffect(()=>{let e=()=>{i(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=a.useMemo(()=>n-(e??0)-r,[r,e,n]);if(e)return o}function b(e){let r=(0,h.Nv)(!0),n=(0,p.k)(),i=(0,u.tS)(),l=(0,m.CK)();return a.useCallback(a=>{let{type:c,sectionPosition:d,searchQuery:u,searchSessionId:p,...h}=e,_={aiResultsEnabled:r,altKey:a.altKey,assetsPanelVersion:n,fileKey:i??void 0};s.az.trackDefinedEvent("assets_panel.keyboard_insert",{...e,..._}),e.source!==m.tM?s.az.trackDefinedEvent("asset_search.result_inserted",{...h,..._,assetType:c,position:d,reciprocalRank:(0,o.Et)(d)?1/(1+d):void 0,query:u,sessionId:p,entryPoint:"assets-panel",componentSuggestionSessionId:l}):(0,m.k1)({assetType:c,assetKey:h.assetKey,libraryKey:h.assetLibraryKey})},[e,r,i,n,l])}n(979530),n(212552),(0,c.atom)(!1)},565051:(e,r,n)=>{n(411855).createContext({getLibrary:()=>void 0,getPage:()=>void 0,getFolder:()=>void 0})},427146:(e,r,n)=>{n.d(r,{MB:()=>i});var a=n(411855);function i({onBoth:e,onClick:r,onKeyDown:n}){return a.useCallback(a=>{e?.(a),0!==a.detail?r?.(a):n?.(a)},[e,r,n])}n(666308),n(153767),n(366172),n(19776),n(304420),n(433576),n(979530),n(275730),n(624605);let o=a.createContext(null)},805302:(e,r,n)=>{var a=n(411855),i=(e=>(e[e.Mount=0]="Mount",e[e.Back=1]="Back",e[e.Forward=2]="Forward",e[e.ToggleView=3]="ToggleView",e))(i||{});(0,a.createContext)({lastNavAction:0,lastNavDirection:0,setLastNavAction:()=>{},lastActionWasBackSwipe:!1})},557080:(e,r,n)=>{n.d(r,{hK:()=>s});var a=n(411855);n(188507);var i=n(511445);n(663844),n(259577),n(76265);var o=n(190500);function s({height:e}){return a.createElement("div",{style:{height:e}})}n(176160),n(764696),(0,i.s)((e,r,n,a)=>{(0,o.uE)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:r,fileTeamId:n,fileOrgId:a})},500)},979530:(e,r,n)=>{n(411855),n(336427),n(875877);var a=n(473982);n(304420),n(565051),n(805302),n(516352),n(744297),n(62257);var i=(e=>(e.IconSets="icon_sets",e.Illustrations="illustrations",e))(i||{}),o=(e=>(e.Libraries="All libraries",e.Pages="Library",e.Assets="Page",e.Search="Search",e.Recents="Recents",e.VisualAssets="Visual assets",e))(o||{});(0,a.rt)({}),(0,a.rt)(!1),(0,a.rt)(!1),(0,a.rt)(!1);(0,a.rt)(void 0)},62257:(e,r,n)=>{n.d(r,{U:()=>c}),n(411855);var a=n(188507);n(176160);var i=n(827473),o=n(354465),s=n(747765),l=n(270143);function c(){let e=(0,s.je)(),r=(0,a.d4)(e=>e.loadingState);return!!(0,l.D)()&&(!e.data||e.data.some(e=>{let n=(0,i.Mb)(e.libraryKey);return!(0,o.D2)(r,n)}))}n(587518),n(212552)},948595:(e,r,n)=>{n.d(r,{N:()=>d});var a=n(411855),i=n(188507),o=n(33011),s=n(89865),l=n.n(s),c=n(747765);function d(){let e=(0,i.d4)(e=>e.hubFiles),r=a.useMemo(()=>l()(Object.values(e),e=>(0,o.l)(e.library_key??"")),[e]),n=(0,c.je)(),s=a.useMemo(()=>{let e={};if(!n.data)return{};for(let r of n.data){if("community"===r.libraryType)continue;let n={key:r.fileKey,name:r.name,library_key:r.libraryKey,thumbnail_guid:r.thumbnailGuid,thumbnail_url:r.thumbnailUrl??"",thumbnail_url_override:r.thumbnailUrlOverride};e[(0,o.l)(r.libraryKey)]=n}return e},[n]);return a.useMemo(()=>({subscribedFileDataByLibraryKey:s,hubFilesByLibraryKey:r,hubFilesById:e}),[e,r,s])}},516352:(e,r,n)=>{n.d(r,{MA:()=>d});var a=n(411855),i=n(875877),o=n(437068),s=(e=>(e.LIST="list",e.GRID="grid",e))(s||{});let l="assets-panel-view-mode-v2",c=(0,i.atomWithLocalStorage)(l,"grid");function d(){let[e,r]=(0,i.useAtom)(c),n=a.useCallback(e=>e.key===l&&null!=e.newValue,[]),s=a.useCallback(n=>{if(n)try{let a=JSON.parse(n);("grid"===a||"list"===a)&&e!==a&&r(a)}catch(e){}},[e,r]);return(0,o.tl)({onSync:s,shouldSyncValue:n}),[e,r]}(0,i.atomWithLocalStorage)("asset-panel-show-folders",!1)},275730:(e,r,n)=>{n.d(r,{e:()=>i});var a=n(411855);function i(e){let[r,n]=a.useState(e);return[r,a.useCallback(()=>n(!0),[]),a.useCallback(()=>n(!1),[]),a.useCallback(()=>n(e=>!e),[])]}},587518:(e,r,n)=>{n.d(r,{Pv:()=>c,Yl:()=>u,z0:()=>d});var a=n(236891),i=n(33011),o=n(707062),s=n(392573),l=n(304420);function c(e){var r;let n=(0,o.oA)(e.libraryKeyToFile?.file);if(!n)return null;let c=n.libraryAssetsOfType.map(e=>(0,s.py)((0,i.l)(n.libraryKey),e)).filter(a.Vq);return 0===c.length?null:{library:{name:n.name,fileKey:(r=n.libraryKey)===u?d:`SITE_KIT-${r}`,libraryKey:(0,i.l)(n.libraryKey),thumbnailUrl:n.thumbnailUrl,thumbnailShouldCover:!1,numResponsiveSets:c.length,type:l.yW.SITE,libraryType:"team"},assets:c}}let d="SITE_KIT_EMBEDS",u="SITE_KIT_EMBEDS_LIBRARY_KEY"},813951:(e,r,n)=>{n.d(r,{V:()=>d});var a=n(33011),i=n(841962),o=n(76265),s=n(304420),l=n(587518);let c=[{name:"URL or HTML",type:"embed",initial_url:"",thumbnail_url:(0,i.ck)("86ba1f4a16abbec4208d141f3127d6f86c72f818"),preview_url:(0,i.ck)("86ba1f4a16abbec4208d141f3127d6f86c72f818"),width:600,height:400,background_color:"var(--color-bg-secondary)",feature_flag:"sts_generic_embed"},{name:"YouTube",type:"embed",initial_url:"https://www.youtube.com/embed/ScMzIvxBSi4",thumbnail_url:(0,i.ck)("11493f26c5e30e5b76c2b8e04368159df590867e"),preview_url:(0,i.ck)("7ad4ca50abe036c8f2d52e2ef0753418e1ffd68f"),width:600,height:400,thumbnail_padding:20,background_color:"var(--color-bg-danger-tertiary)",feature_flag:"sts_widget_youtube"},{name:"Google Map",type:"embed",initial_url:"https://maps.google.com/?output=embed",thumbnail_url:(0,i.ck)("a28e737b0aa0ef1a62ff710aecfb85b5b71445d1"),preview_url:(0,i.ck)("1e24eb777737a98aa97d274bdb78f6f87aa02ca3"),width:600,height:400,thumbnail_padding:16,background_color:"var(--color-bg-brand-tertiary)",feature_flag:"sts_widget_google_maps"}];function d(){return((0,i.kc)().ds_sts_kit?c.filter(e=>!e.feature_flag||(0,i.kc)()[e.feature_flag]):[]).length>0?{name:(0,o.t)("design_systems.assets_panel.site_interactive_elements"),fileKey:l.z0,libraryKey:(0,a.l)(l.Yl),thumbnailUrl:(0,i.ck)("b325c884bd37bf62ccd3776e84158fc1e3bc0def"),thumbnailShouldCover:!1,numResponsiveSets:0,type:s.yW.SITE,libraryType:"team"}:null}},212552:(e,r,n)=>{n.d(r,{AS:()=>S,ce:()=>A,dj:()=>C});var a=n(411855),i=n(627472);n(707062);var o=n(841962),s=n(875877),l=n(977235),c=n(139879),d=n(238311),u=n(8227),m=n(696511),p=n(399991),h=n(73041),_=n(314540),g=n(183739);n(468260),n(354592);var f=n(914077),E=n(401562),y=n(587518),b=n(813951);let v=(0,E.n)(async()=>await (0,d.w0)("ds_sts_lib_key")),T=[],I=(0,s.atom)(async e=>{let r=e(h.u8)===f.nT.Sites&&(0,o.kc)().ds_sts_kit,n=!!((0,p.Lg)()||(0,p.nl)())||e(u.ZJ).status===m.Uv.COMPLETED;if(!r||!n)return{libraryKeys:T,enabled:!1,publishedFromSiteFile:!1,sortedPrefixes:void 0};let a=await v(),i=a.get("libraryKeys",[],e=>Array.isArray(e)&&e.every(e=>"string"==typeof e)),s=a.get("siteFile",!1,e=>"boolean"==typeof e),l=a.get("order",[],e=>Array.isArray(e)&&e.every(e=>"string"==typeof e)),c=i.length>0&&r;return{libraryKeys:c?i:[],enabled:c,publishedFromSiteFile:s,sortedPrefixes:l.map(e=>e.toLocaleLowerCase())}}),S=(0,i.oA)(I,()=>({libraryKeys:T,enabled:!1,publishedFromSiteFile:!1,sortedPrefixes:void 0})),w=(0,E.n)(()=>{let{libraryKeys:e,enabled:r}=(0,s.useAtomValue)(S),n=e.map(e=>g.Bu2.Query({libraryKey:e,assetType:_.PW.RESPONSIVE_SET}));return(0,c.En)(n,{enabled:r})});function A(){let e=w(),{enabled:r}=(0,s.useAtomValue)(S),n=a.useMemo(()=>{let n={libraries:[],assetsByLibraryKey:new Map};if(r){for(let r of e){if(r.data){let e=(0,y.Pv)(r.data);if(e){n.libraries.push(e.library);let r=e.library.libraryKey;n.assetsByLibraryKey.set(r,e.assets)}}if("loading"===r.status)return(0,l.Xm)()}let r=(0,b.V)();r&&n.libraries.push(r)}return(0,l.gB)(n)},[e,r]);return a.useMemo(()=>{if("loading"===n.status)return(0,l.Xm)();let e=n.data;return e.libraries.length>0?(0,l.gB)(e):{status:"disabled",data:null,errors:null}},[n])}function C(e){let r=A();return!!e&&r.data?.assetsByLibraryKey.has(e)}},120900:(e,r,n)=>{n.d(r,{T:()=>V});var a=n(411855),i=n(188507),o=n(138225),s=n(809471),l=n(163773),c=n(512729),d=n(336427),u=n(736942),m=n(265851),p=n(76265),h=n(736041),_=n(140835),g=n(318955),f=n(919558),E=n(332103),y=n(176160),b=n(849331),v=n(314540),T=n(510669),I=n(940795),S=n(269049),w=n(421023),A=n(492982),C=n(914077),N=n(957020),L=n(710636),O=n(557053),R=n(795055),P=n(300050),D=n(178476),k=n(583044),M=n(978320),F=n(78984),x=n(987745);function U(e){let r=(0,i.d4)(e=>e.selectedView),n=(0,d.ZC)(r),o=(0,i.d4)(e=>e.modalShown?.type),s=(0,i.wA)(),l="fullscreen"!==r.view&&n?.view===r.view,c=!("fullscreen"===r.view&&n?.view==="fullscreen"&&r.fileKey===n.fileKey)&&!l;a.useEffect(()=>{n&&c&&o===e&&s(h.Ce())},[s,e,o,c,n])}let B=a.memo(function({initialTab:e,teamId:r,initialUpdatesModalScope:n,entrypoint:o,sessionId:s,resourceConnection:d}){U(N.cX);let u=(0,i.d4)(e=>e.selectedView),m=(0,i.d4)(e=>(0,w.IE)(e)),p=(0,y.q5)(),h=(0,I.b_)({migrationGroup:S.L.GROUP_6,component:"LibraryPreferencesModal"}),g=new URLSearchParams(l.Ay.location.search).get("teamToMoveFileToOnNavigate"),f=(0,E.R)();(0,c.h)(()=>{f({updateSource:"library_modal_open"})});let b=(0,k.YM)();return a.createElement(_.fu,{name:"Library Preference Modal",properties:{fileKey:p?.key,fileTeamId:p?.teamId,selectedTeamId:"team"===u.view?u.teamId:null,orgId:h,inPublishDraftExp:!!g,entryPoint:o}},d&&r?a.createElement(W,{teamId:r,resourceConnection:d}):m?a.createElement(G,null):"fullscreen"===u.view&&u.editorType!==C.nT.Whiteboard?b?a.createElement(x.b,{entrypoint:o,initialTab:e,initialUpdatesModalScope:n,sessionId:s}):a.createElement(P.B,{entrypoint:o,initialTab:e,initialUpdatesModalScope:n}):"team"===u.view?a.createElement(H,{initialTab:e,teamId:u.teamId}):r?a.createElement(H,{initialTab:e,teamId:r}):void 0)}),V=(0,L.Ju)(B,N.cX,L.ZU.YES);function G(){let e=(0,k._K)();return a.createElement(D.s,{width:e,title:a.createElement(F.c,{availableTabs:[N.Wv.LIBRARIES],selectedTab:N.Wv.LIBRARIES})},a.createElement(M.Z,null,a.createElement(O.s,{showingDefaultSubscriptionsForUser:!0,showingDefaultSubscriptionsForTeamId:null,width:e})))}function H({initialTab:e,teamId:r}){let n=(0,i.wA)(),o=(0,i.d4)(e=>e.sharedFonts),s=(0,i.d4)(e=>(0,A.p)(e)),l=(0,i.d4)(e=>e.currentUserOrgId),c=(0,i.d4)(e=>(0,T.canAdminOrg)(l,e)),d=(0,I.Xd)(),m=a.useMemo(()=>d.transform(e=>(0,I.A8)(e,v.Xn.ADMIN)),[d]),p=(0,f.u8)({oldValue:u.Qw.loaded(c),newValue:m,label:"TeamLibraryPreferencesModal.canAdminOrg",enableFullRead:(0,g.DQ)(g.Pw.GROUP_0)}).data,h=(0,b.FC)(),_=a.useMemo(()=>{let e=[N.Wv.LIBRARIES];return s&&e.push(N.Wv.FONTS),e},[s]),{selectedTab:E,setSelectedTab:y}=(0,k.SE)(_,e),S=(0,k._K)(s);return a.createElement(D.s,{width:S,title:a.createElement(F.c,{availableTabs:_,selectedTab:E,setSelectedTab:y})},a.createElement(M.Z,{widerWidth:s},E===N.Wv.LIBRARIES&&a.createElement(O.s,{showingDefaultSubscriptionsForTeamId:r,showingDefaultSubscriptionsForUser:!1,width:S}),E===N.Wv.FONTS&&a.createElement(R.y,{dispatch:n,teamId:r,width:S,resourceType:"team",useModalViewComponent:!0,canAdminOrg:!!p,permissionsState:h,sharedFonts:o})))}function W({teamId:e,resourceConnection:r}){let n=(0,i.wA)(),l=(0,k._K)(!0);return a.createElement(D.s,{width:l,title:a.createElement("div",{className:m.s.pl4.flex.flexRow.justifyBetween.itemsCenter.gap4.$},a.createElement(o.K,{onClick:()=>{n(h.Lo())},"aria-label":(0,p.t)("resource_connection.aria_label.button")},a.createElement(s.C,null)),(0,p.tx)("design_systems.libraries_modal.allow_external_teams_to_use_libraries",{projectName:r.projectName}))},a.createElement(M.Z,{widerWidth:!0},a.createElement(O.s,{showingDefaultSubscriptionsForTeamId:e,showingDefaultSubscriptionsForUser:!1,width:l,resourceConnectionId:r.id})))}(0,L.Ju)(function({entrypoint:e}){U(N.EJ);let r=(0,i.wA)();return a.useEffect(()=>{R.y.loadSharedFonts(r)},[r]),a.createElement(B,{initialTab:N.Wv.FONTS,entrypoint:e})},N.EJ,L.ZU.YES)},432671:(e,r,n)=>{n.d(r,{RV:()=>f});var a=n(411855),i=n(188507),o=n(841962),s=n(299009),l=n(693565),c=n(76265),d=n(125682),u=n(779619),m=n(453783),p=n(800508),h=n(618208);function _({variableSet:e,modeDropdownStyle:r,entity:n,defaultModeId:o,isLibraryFileEnabled:s,libraryIdentifier:l}){let p=(0,i.wA)(),h=(0,d.Um)(),_="auto_inherit_mode_string",f=e.modes?e.modes[0].name:"",E=a.useMemo(()=>({name:(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:f}),id:_}),[f]),y=o?e.modes?.find(e=>e.id===o):E,[b,v]=(0,a.useState)(y),T=a.useMemo(()=>b?.id===_?E:e.modes?.find(e=>e.id===b?.id),[e,b,E]),I=a.useCallback(r=>{v(r),r.id===_?u.j.deleteDefaultMode({libraryIdentifier:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key}):u.j.setDefaultMode({libraryIdentifier:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key,defaultModeId:r.id}).catch(e=>{v(b)})},[b,l,n.entityType,n.entityId,e.key]);return e.modes&&1!==e.modes.length&&n&&y?a.createElement(m.l6,{id:`subscription-dropdown-${e.id}`,property:T,dispatch:p,dropdownShown:h,onChange:I,formatter:g,dropdownWidth:150,className:r,disabled:!s,dataTestId:`mode-dropdown-${e.id}`},a.createElement(m.c$,{value:E},(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:f})),a.createElement(m.sK,null),e.modes?.map(e=>a.createElement(m.c$,{key:e.id,value:e},g.format(e)))):a.createElement("div",{className:r})}let g={format:e=>e.name};function f({forBestMatches:e,variableSets:r,shouldDisplayDefaultModeDropdown:n,libraryIdentifier:i,entity:d,isLibraryFileEnabled:m}){let[g,f]=(0,a.useState)({}),[E,y]=(0,a.useState)(!1);if(!r||0===r.length)return null;n&&=r.some(e=>e.modes&&e.modes.length>1);let b=(0,o.kc)().ds_workspace_team_default_modes&&!E&&n&&d&&i;return(b&&u.j.getDefaultModes({libraryIdentifier:i,entityType:d.entityType,entityId:d.entityId}).then(e=>{f(e.data.meta),y(!0)}).catch(()=>{y(!0)}),b)?a.createElement(s.qc,null):a.createElement("div",null,!e&&a.createElement("div",{className:p.wx},a.createElement("div",{className:p.Pf},(0,c.tx)("design_systems.libraries_modal.header_variable_collections")),(0,o.kc)().ds_workspace_team_default_modes&&n&&a.createElement("div",{className:p.Pf},(0,c.tx)("design_systems.libraries_modal.header_default_mode"))),a.createElement("div",{className:e?p.VN:p.iE},r.map(r=>a.createElement("div",{className:p.nk,key:r.id},e?a.createElement(a.Fragment,null,a.createElement(l.B,{className:p.oS,svg:h.A}),a.createElement("span",{className:p.UU},r.name),r.numVariableMatches&&a.createElement("span",{className:p.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variable_match",{numVariables:r.numVariableMatches}))):a.createElement("div",{className:p.kW},a.createElement("span",{className:p.UU},r.name),n&&d&&i&&(0,o.kc)().ds_workspace_team_default_modes&&a.createElement(_,{variableSet:r,modeDropdownStyle:p.nI,libraryIdentifier:i,entity:d,defaultModeId:g[r.key],isLibraryFileEnabled:m})||a.createElement("div",{className:p.nI}),a.createElement("span",{className:p.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variables",{numVariables:r.numVariables})))))))}},85092:(e,r,n)=>{n.d(r,{dD:()=>eE});var a=n(411855),i=n(188507),o=n(236891),s=n(471923),l=n(266838),c=n(556843),d=n(463844),u=n(462575),m=n(499325),p=n(326612),h=n(805014),_=n(336427),g=n(841962),f=n(875877),E=n(666308),y=n(728722),b=n(863297),v=n(747484),T=n(653798),I=n(640747),S=n(71801),w=n(769849),A=n(299009),C=n(14489),N=n(76265),L=n(47795),O=n(738739),R=n(736041),P=n(140835),D=n(403386),k=n(343373),M=n(365347),F=n(481954),x=n(721071),U=n(684259),B=n(886895),V=n(920198),G=n(844073),H=n(923219),W=n(515662),K=n(176160),Y=n(827473),$=n(314540),j=n(183739),z=n(940795),q=n(269049),Z=n(77383),X=n(384894),J=n(957020),Q=n(438336),ee=n(710636),et=n(263474),er=n(979733),en=n(378614),ea=n(764723),ei=n(874360),eo=n(641533),es=n(45630),el=n(918441),ec=n(818073),ed=n(766558),eu=n(721637),em=n(785147),ep=n(602147),eh=n(947342),e_=n(335534),eg=n(686857),ef=n(771755);let eE=(0,ee.Ju)(function(e){return a.createElement(P.fu,{name:"Publishing Modal",properties:{entryPoint:e.entrypoint,libraryModalSessionId:e.libraryModalSessionId}},a.createElement(es.fo,null,a.createElement(ey,{...e})))},"PublishingModal");function ey(e){let{timedOut:r,initiallyCheckedItemIDs:n,libraryModalSessionId:p}=e,S=(0,k.GS)(),w=(0,i.wA)(),P=s.hS(e),[H,ee]=(0,f.useAtom)(er.pz),[en,ep]=a.useState(""),e_=(0,i.d4)(e=>e.savedPublishDescription),[eE,ey]=a.useState(e_||""),[ev,eI]=a.useState(!1),[eS,ew]=a.useState(null),eA=(0,K.q5)(),eC=(0,i.d4)(M.d1),eN=(0,i.d4)(e=>e.library),eL=(0,K.Cq)({useSinatraType:!0}),eO=eC?.key,eR=(0,i.d4)(Z.cM),eP=(0,i.d4)(Z.MH),eD=(0,i.d4)(Z.dM),ek=(0,f.useAtomValue)(eh.t),eM=(0,W.nN)(),eF=a.useMemo(()=>(0,F.Jl)(eP),[eP]),{modeLimit:ex,canShowCTA:eU,showCTA:eB}=(0,ea.z)("publishing"),eV=(0,i.d4)(Z.fA),eG=(0,z.yN)({migrationGroup:q.L.GROUP_1,component:"PublishingModalInner",attribute:"currentOrgId",legacy:(e,r)=>r?.id??void 0,migrated:e=>e?.key.type===$.OL.ORG?e.key.parentId??void 0:void 0}),eH=(0,i.d4)(e=>e.orgById),eW=(0,Q.Y)(eL||null),[eK,eY]=a.useState(eW),e$=a.useCallback(e=>{eY(e),w(L.oB())},[w]),ej=!!eC?.starter_library_src_file_key,ez=a.useMemo(()=>{let e=0;return Object.values(eF).forEach(r=>{ej?(0,Y.lg)(r.status)&&e++:(0,Y.Hb)(r.status)&&e++}),Object.values(eD).forEach(r=>{ej?(0,Y.lg)(r.status)&&e++:(0,Y.Hb)(r.status)&&e++}),e},[ej,eD,eF]),eq=a.useMemo(()=>{let e=e=>Object.values(e).some(e=>e.status===J.E8.NEW);return!!(eV&&e(eF)||eV&&e(eD)||e(eR))},[eV,eD,eR,eF]),eZ=(0,g.kc)().wslp_read_publish_scope,[eX,eJ]=a.useState(!1),eQ=eW?$.pk.ORG:$.pk.TEAM,[e0,e1]=a.useState(eQ),e2=eZ?e0:eK?$.pk.ORG:$.pk.TEAM,e5=a.useCallback(e=>{e1(e),w(L.oB())},[w]),e4=(0,g.kc)().wslp_workspace_publish_scope,e7=(0,y.Rs)(j.FWW,{fileKey:eO},{enabled:eZ&&!!eO});a.useEffect(()=>{if("loaded"===e7.status){if(!e7.data.file?.lastPublishedAt){eJ(!0);return}let e=e7.data.file?.libraryKeyToFile?.libraryPublishScope?.publishScopeType??$.pk.TEAM;e4||e!==$.pk.WORKSPACE||(e=$.pk.ORG),e1(e),eJ(!0),e!==eQ&&(0,T.x1)("designSystems publishing","Potential library publish scope mismatch (monitored by #feat-workspace-library-publishing)",{livegraphPublishScope:e,fileShareSettingPublishScope:eQ})}},[eQ,e7,e4]);let[e8,e3]=a.useState(null),e6=a.useContext(es.og),e9=(0,es.UJ)(),te=(0,es.Xm)();(0,W.SR)();let tt=(0,f.useAtomValue)((0,Z.y6)(te)),tr=(0,f.useAtomValue)((0,Z.x$)(te)),tn=(0,_.ZC)(e6);a.useEffect(()=>{tn?.status===b.r.LOADING&&e6.status===b.r.SUCCESS&&(n||tl(new Set(tr)))},[tr,e6,n,tn?.status]);let ta=(0,i.d4)(e=>(0,Z.oB)(e,te)),ti=(0,i.d4)(e=>(0,Z.JI)(e,te)),to=(0,i.d4)(e=>(0,Z.Dc)(e,te)),[ts,tl]=a.useState(()=>new Set(n&&n.size>0?tr.filter(e=>n?.has(e)):tr));a.useEffect(()=>{let e=e=>{"Shift"===e.key&&eI(!0)},r=e=>{"Shift"===e.key&&eI(!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]);let tc=a.useCallback(()=>{eN.publishProgress.state===J.Qx.ASSEMBLING_COMPONENTS&&w(O.TS())},[w,eN.publishProgress.state]),td=a.useCallback(()=>{tc(),ee(J.o.LIBRARY),w(R.Ce())},[w,ee,tc]);a.useEffect(()=>{eN.publishProgress.state===J.Qx.UPLOADING&&td()},[td,eN.publishProgress.state]);let tu=(0,_.ZC)(eN),tm=(0,_.ZC)(tr);a.useEffect(()=>{if(tu&&tm&&tu!==eN){if(ew(null),tm.every(e=>ts.has(e))){tl(new Set(tr));return}tl(new Set(tr.filter(e=>ts.has(e))))}},[tr,ts,eN,eF,e9,eA,tm,tu]);let tp=a.useCallback(e=>{let r=[...tt.libraryAssets[J.PW.RESPONSIVE_SET].modified.wellFormed,...tt.libraryAssets[J.PW.CODE_COMPONENT].modified.wellFormed,...tt.variableSets.modified.wellFormed,...tt.styles.modified.wellFormed,...tt.productComponents.modified.wellFormed].map(e=>e.node_id),n=r.indexOf(e);if(null===n)return;let a=new Set(ts),i=!a.has(e);if(ev&&null!==eS){let e=Math.min(n,eS),o=Math.max(n,eS);for(let n=e;n<=o;n++)i?a.add(r[n]):a.delete(r[n])}else i?a.add(e):a.delete(e);tl(a),ew(n)},[ts,eS,tt,ev]),th=a.useCallback(()=>{tr.length===ts.size?tl(new Set):tl(new Set(tr))},[tr,ts.size]),t_=a.useCallback((e,r)=>{e6.status===b.r.SUCCESS&&e6.nodeIdToValidatedMoveInfo[e]&&(e6.nodeIdToValidatedMoveInfo[e].publishType=r)},[e6]),tg=a.useCallback(e=>{ey(e.target.value)},[]),tf=a.useCallback(()=>{let e=eN.used__LIVEGRAPH.localNodeIdToDestinationKey;if(!Object.keys(eN.movedLibraryItems.local).length&&!Object.keys(e).length)return;let r=ti.filter(e=>!!eN.movedLibraryItems.local[e.node_id]&&e.status!==J.E8.DELETED&&ts.has(e.node_id)).map(e=>e.node_id),n=new Set(r);for(let a of[...r,...ta.filter(e=>{let r=e.containing_frame?.containingStateGroup?.nodeId,a=r&&eD[r]||null;return!(!eN.movedLibraryItems.local[e.node_id]||e.status===J.E8.DELETED||a&&((0,Y.zE)(a)||n.has(a.node_id)))&&ts.has(r||e.node_id)}).map(e=>e.node_id),...to.filter(r=>!!e[r.node_id]&&r.status!==J.E8.DELETED&&ts.has(r.node_id)).map(e=>e.node_id)]){let e=h.glU.generatePublishableCopy(a);e&&ts.has(a)&&(ts.delete(a),ts.add(e))}},[ts,eD,eN.used__LIVEGRAPH.localNodeIdToDestinationKey,eN.movedLibraryItems.local,ta,ti,to]),tE=(0,B.B)(),ty=(0,f.useAtomValue)((0,Z.Iy)(te)),{currentFileIsFirstDraftKit:tb,currentFileIsDirectGenKit:tv}=(0,V.bj)(),[tT,tI]=a.useState(tb),[tS,tw]=a.useState(!tb||!(0,g.kc)().first_draft_legacy_publish_ux||tv);a.useEffect(()=>{(0,g.kc)().first_draft_publish_ux?tb&&(tI(!0),tv&&tw(!0)):(tI(!1),tw(!1))},[tb,tv]);let{localKits:tA}=(0,V.Ml)(),{result:tC}=(0,U.C)(tA[0]?.dsKitKey||null,[x.x$.WARNING]),tN=a.useCallback(e=>{let r;if(eC&&ty){for(let e of ts){let r=eM[e];if((0,o.Vq)(r)&&r.modes.length>ex){eU(r.modes.length)?eB():(0,T.x1)("designSystems publishing","Blocking publishing of variable collection with too many modes, but upsell is not available",{collectionId:e});return}}if(e6.status===b.r.SUCCESS){let e=Object.keys(e6.nodeIdToValidatedMoveInfo).filter(e=>ts.has(e)&&"MOVE"===e6.nodeIdToValidatedMoveInfo[e].publishType),n=[...Object.values(eP),...Object.values(eD),...Object.values(eR)].reduce((e,r)=>(e6.nodeIdToValidatedMoveInfo[r.node_id]&&r.old_key&&(e[r.node_id]=r.old_key),e),Object.create(null)),a=ta.filter(Y.ad);r=(0,Y.Cj)(e,n,a)}tf(),w(O.ZS({savepointDescription:eE,itemsToPublish:ts,libraryModalSessionId:p,moveInformation:r,hubFileId:e||void 0,firstDraftVariablesForTheme:tE,publishScope:e2,localAssetsWithDenormalizedPublishInfo:ek.data??{},publishAsFirstDraftKit:tT,isDirectGenCompatible:tS}))}},[eC,ty,e6,tf,w,eE,ts,e2,eM,ek.data,ex,eU,eB,eP,eD,eR,ta,tE,p,tT,tS]),tL=(0,D.JT)(),tO=(0,i.d4)(Z.Mh),tR=(0,i.d4)(Z.Pd),{invalidExampleIds:tP,isPublishingInvalidExamples:tD}=(0,ec.c)({modifiedComponents:tt.productComponents.modified.wellFormed,modifiedStateGroups:tt.stateGroups.modified.wellFormed,publishedHubFileComponents:tO,publishedHubFileStateGroups:tR,itemsToPublish:ts,publishingMode:H}),tk=a.useMemo(()=>!!(0,g.kc)().ds_pubplat&&"loaded"!==ek.status||tD,[tD,ek.status]),tM=a.useCallback(e=>{if(!eC)return;let r=v.Ay.mac?e.metaKey:e.ctrlKey;e.keyCode===E.Uz.ENTER&&r&&!tk&&(tN(),e.preventDefault(),e.stopPropagation())},[eC,tN,tk]);if(!eC)return null;let tF=H===J.o.HUBFILE?(0,N.tx)("design_systems.publishing_modal.modal_header_community_library"):(0,N.tx)("design_systems.publishing_modal.modal_header");if(e6.status===b.r.LOADING)return a.createElement(a.Fragment,null,(0,g.kc)().ds_fpl_publishing_modal?a.createElement(l.bL,{manager:P,width:"lg",height:"fixed"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,tF)),a.createElement(c.nB,null,a.createElement(a.Fragment,null,(0,g.kc)().ds_fpl_publishing_modal?a.createElement(d.k,null):a.createElement(A.kt,{className:ef.S}))))):a.createElement(ei.aF,{size:480,title:tF,titleClassName:ef.GK,className:ef.vn,onKeyDown:tM,onHide:tc},(0,g.kc)().ds_fpl_publishing_modal?a.createElement(d.k,null):a.createElement(A.kt,{className:ef.S})));let tU=eA?.team,tB=te&&Object.keys(te).some(e=>!!ts.has(e)&&!eR[e]&&te[e]&&"MOVE"===te[e].publishType),tV=tt.productComponents.modified.wellFormed.length,tG=tt.styles.modified.wellFormed.length,tH=tt.variableSets.modified.wellFormed.length,tW=(0,g.u4)("dse_editor_templates_v1",tt.modules.modified.wellFormed.length,0),tK=(0,X.O)(J.PW.RESPONSIVE_SET)?tt.libraryAssets[J.PW.RESPONSIVE_SET].modified.wellFormed.length:0,tY=(0,X.O)(J.PW.CODE_COMPONENT)?tt.libraryAssets[J.PW.CODE_COMPONENT].modified.wellFormed.length:0,t$=a.createElement(el.C,{publishedHubFile:tL,setAllowOrgAccess:e$,isLoadingPublishScope:!eX,publishScope:e0,setPublishScope:e5,hasItemsToPublish:0!==ts.size,canPublishComponentsAndStateGroups:eV,org:eG&&eH[eG]?eH[eG]:null,publishProgress:eN.publishProgress,numModifiedAssets:tH+tG+tV+tW+tK+tY,firstDraftValidationStatus:tT?(0,U.O)(tC):"not_applicable",hasNewLibraryItems:eq,closeModal:td,editingFile:eC,publish:tN,disablePublishButton:tk,hasWorkspace:e7.data?.file?.workspaceId!==null,workspaceName:e7.data?.file?.computedWorkspace?.workspace?.name}),tj=a.createElement(a.Fragment,null,a.createElement("div",{className:ef.Kl},a.createElement("div",{className:e8?ef.Ye:ef.dJ,style:{display:e8?"none":void 0}},a.createElement("div",{className:ef.YT},a.createElement(eo.l,null),S?a.createElement("div",{className:ef.PP},a.createElement(C.IW,{focusOnMount:!1,query:en,clearSearch:()=>ep(""),onChange:ep,recordingKey:"publishingModalSearchBar",withUI3Icon:!0,smallFont:!0,hasTransparentBackground:!0})):a.createElement(C.Lp,{className:ef.vD,focusOnMount:!1,query:en,clearSearch:()=>ep(""),onChange:ep,recordingKey:"publishingModalSearchBar"}),!en&&a.createElement("div",{className:ef.iQ},a.createElement(et.v,{className:ef.Bl,placeholder:(0,N.t)("design_systems.publishing_modal.description_placeholder"),value:eE,onChange:tg,dir:"auto"}))),a.createElement(eb,{itemsToPublish:ts,onLibraryItemRowCheckboxToggle:tp,onTogglePublishAll:th,setItemsToPublish:tl,onChangeMoveOptionForItem:t_,assetQuery:en,showVariableCollectionOverview:e3,invalidAssetIds:tP}),!eG&&!eV&&ez>0&&a.createElement(eT,{numComponentsToUpsell:ez,isStarterLibrary:ej,team:tU}),tB&&a.createElement(ed.F,null),r&&a.createElement(em.r,null),tD&&a.createElement(eu.K,null),(0,g.kc)().first_draft_publish_ux&&a.createElement("div",{className:ef.H_},a.createElement(u.S,{label:a.createElement(m.J,null,"Publish as First Draft kit"),checked:tT,onChange:e=>{tI(e)}}),(0,g.kc)().first_draft_legacy_publish_ux&&tT&&a.createElement(u.S,{label:a.createElement(m.J,null,"Publish as a legacy kit (no direct generation)"),checked:!tS,onChange:e=>{tw(!e)}}),a.createElement(G.o,{validationResults:tC})),!(0,g.kc)().ds_fpl_publishing_modal&&t$),e8&&a.createElement("div",{className:ef.dJ},a.createElement(eg.Q,{variableCollection:e8.variableCollection,view:e8.view,drillUp:()=>e3(null)}))));return a.createElement(a.Fragment,null,(0,g.kc)().ds_fpl_publishing_modal?a.createElement(l.bL,{manager:P,width:"lg",htmlAttributes:{"data-testid":"publishing-modal"}},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,tF)),a.createElement(c.nB,{scrolling:"none",padding:0},tj),!e8&&a.createElement(c.wi,null,t$))):a.createElement(ei.aF,{size:480,title:tF,titleClassName:ef.GK,className:ef.vn,onKeyDown:tM,onHide:tc,"data-testid":"publishing-modal"},a.createElement(I.s_,{dispatch:w,onClose:()=>{ee(J.o.LIBRARY)},customStyle:S?{top:8,right:12}:{top:6,right:6}}),tj))}function eb(e){let[r,n]=a.useState(!1),o=()=>{n(!r)},[s,l]=a.useState(!1),c=()=>{l(!s)},[d,u]=a.useState(!1),m=()=>{u(!d)},p=(0,es.Xm)(),h=(0,es.UJ)(),_=(0,f.useAtomValue)((0,Z.y6)(p)),[E,y,b,v,T,I,A,C,L,O,R,P,D,k,M,F,x,U,B,V,G,W,K,$]=a.useMemo(()=>[_.libraryAssets[J.PW.RESPONSIVE_SET].modified.wellFormed,_.libraryAssets[J.PW.RESPONSIVE_SET].modified.erroneous,_.libraryAssets[J.PW.RESPONSIVE_SET].unmodified.published,_.libraryAssets[J.PW.RESPONSIVE_SET].unmodified.unpublished,_.libraryAssets[J.PW.CODE_COMPONENT].modified.wellFormed,_.libraryAssets[J.PW.CODE_COMPONENT].modified.erroneous,_.libraryAssets[J.PW.CODE_COMPONENT].unmodified.published,_.libraryAssets[J.PW.CODE_COMPONENT].unmodified.unpublished,_.variableSets.modified.wellFormed,_.variableSets.modified.erroneous,_.variableSets.unmodified.published,_.variableSets.unmodified.unpublished,_.variableSetsWithHiddenVariables.modified.wellFormed,_.modules.modified.wellFormed,_.modules.modified.erroneous,_.modules.unmodified.published,_.modules.unmodified.unpublished,_.styles.modified.wellFormed,_.styles.unmodified.published,_.styles.unmodified.unpublished,_.productComponents.modified.wellFormed,_.productComponents.modified.erroneous,_.productComponents.unmodified.published,_.productComponents.unmodified.unpublished].map(r=>e.assetQuery?r.filter(r=>r.name.toLocaleLowerCase().trim().includes(e.assetQuery.toLocaleLowerCase())):r),[_.libraryAssets,_.productComponents.modified.erroneous,_.productComponents.modified.wellFormed,_.productComponents.unmodified.published,_.productComponents.unmodified.unpublished,_.modules.modified.wellFormed,_.modules.modified.erroneous,_.modules.unmodified.published,_.modules.unmodified.unpublished,_.styles.modified.wellFormed,_.styles.unmodified.published,_.styles.unmodified.unpublished,_.variableSets.modified.wellFormed,_.variableSets.modified.erroneous,_.variableSets.unmodified.published,_.variableSets.unmodified.unpublished,_.variableSetsWithHiddenVariables.modified.wellFormed,e.assetQuery]),j=a.useMemo(()=>new Set(U.concat(L).concat(G).concat((0,g.u4)("dse_editor_templates_v1",k,[])).concat((0,X.O)(J.PW.RESPONSIVE_SET)?E:[]).concat((0,X.O)(J.PW.CODE_COMPONENT)?T:[]).map(e=>e.node_id)),[E,T,L,G,U,k]),z=L.length>0||P.length>0||D.length>0,q=(0,i.d4)(Z.Wz),Q=(r,n,i,o)=>{for(let s of r=(0,g.kc)().ds_reorder_collections?(0,en.BT)(r):r){let r=p?.[s.node_id],l=!1;if(s.type===J.PW.STATE_GROUP){let e=!r||"FORCED_COPY"===r.publishType,n=(q[s.node_id]??[]).some(e=>h.has(e.node_id));l=e&&n}let c=a.createElement(ep.v,{key:s.node_id,libraryItem:s,includeLeftAccessory:i,isChecked:e.itemsToPublish.has(s.node_id),onCheckBoxToggle:e.onLibraryItemRowCheckboxToggle,onChangeMoveOptionForItem:e.onChangeMoveOptionForItem,moveInfo:(0,Y.Hb)(s.status)&&r||null,isUnmovableStateGroupWithMovableState:l,showVariableCollectionOverview:e.showVariableCollectionOverview,isVariableSetWithPrivateVariables:o,hasChangedVariables:z,isInvalid:e.invalidAssetIds.has(s.node_id)}),d=o?"-hiddenVariables":"";ee(c,`library-item-row-${s.node_id}${d}`,46,n)}},ee=(e,r,n,a)=>{let i=w.oz.getNextRenderedElementTop(a);a.push({parent:null,type:w.zq.ROW,top:i,element:e,key:r,height:n,sectionNameForTracking:void 0})},et=(()=>{let n=[],i=L.length+U.length+G.length+(0,g.u4)("dse_editor_templates_v1",k.length,0)+((0,X.O)(J.PW.RESPONSIVE_SET)?E.length:0)+((0,X.O)(J.PW.CODE_COMPONENT)?T.length:0),l=R.length+B.length+K.length+(0,g.u4)("dse_editor_templates_v1",F.length,0)+((0,X.O)(J.PW.RESPONSIVE_SET)?b.length:0)+((0,X.O)(J.PW.CODE_COMPONENT)?A.length:0),u=P.length+$.length+V.length+D.length+(0,g.u4)("dse_editor_templates_v1",x.length,0)+((0,X.O)(J.PW.RESPONSIVE_SET)?v.length:0)+((0,X.O)(J.PW.CODE_COMPONENT)?C.length:0),p=W.length+O.length+(0,g.u4)("dse_editor_templates_v1",M.length,0)+((0,X.O)(J.PW.RESPONSIVE_SET)?y.length:0)+((0,X.O)(J.PW.CODE_COMPONENT)?I.length:0);p&&(ee(a.createElement(e_.Zq,{header:(0,N.tx)("design_systems.publishing_modal.invalid_components_with_count",{countString:a.createElement(e_.y_,{count:p})}),caretToggle:{isExpanded:d},onClick:m}),"erroneous",32,n),d&&(Q(W,n,ep.o.TARGET),(0,g.kc)().dse_editor_templates_v1&&Q(M,n),Q(O,n)));let h=e.assetQuery?[...e.itemsToPublish].filter(e=>j.has(e)):[...e.itemsToPublish],_=e.assetQuery?[...e.itemsToPublish].filter(e=>!j.has(e)):[],f=h.length;if(i){let r;if(r=f===i||f>0&&f<i&&H.oV,ee(a.createElement(e_.D3,{header:(0,N.tx)("design_systems.publishing_modal.changes_header_with_count",{countString:a.createElement(e_.y_,{count:f,total:i})}),checkboxValue:r,onClick:()=>{e.assetQuery?i===f?e.setItemsToPublish(new Set(_)):e.setItemsToPublish(new Set([...e.itemsToPublish,...j])):e.onTogglePublishAll()}}),"changed:header",32,n),L.length>0&&ee(a.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.variable_collections")),"variableSet:header",32,n),Q(L,n,ep.o.CHECKBOX),(0,X.O)(J.PW.RESPONSIVE_SET)&&(E.length>0&&ee(a.createElement("div",{className:ef.et},"Site blocks"),"responsiveSet:header",32,n),Q(E,n,ep.o.CHECKBOX)),(0,X.O)(J.PW.CODE_COMPONENT)&&(T.length>0&&ee(a.createElement("div",{className:ef.et},"Code components"),"codeComponent:header",32,n),Q(T,n,ep.o.CHECKBOX)),(0,g.kc)().dse_templates_proto){let e=G.filter(Y.Fl);e.length>0&&(ee(a.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),Q(e,n,ep.o.CHECKBOX))}(0,g.kc)().dse_editor_templates_v1&&k.length>0&&(ee(a.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),Q(k,n,ep.o.CHECKBOX)),U.length>0&&ee(a.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.styles")),"styles:header",32,n),Q(U,n,ep.o.CHECKBOX),G.length>0&&ee(a.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.components")),"components:header",32,n),(0,g.kc)().dse_templates_proto?Q(G.filter(e=>!(0,Y.Fl)(e)),n,ep.o.CHECKBOX):Q(G,n,ep.o.CHECKBOX)}return l&&(ee(a.createElement(e_.Zq,{header:(0,N.tx)("design_systems.publishing_modal.unchanged_header_with_count",{countString:a.createElement(e_.y_,{count:l})}),caretToggle:{isExpanded:r},onClick:o}),"unchanged:header",32,n),r&&(Q(R,n),Q(B,n),Q(K,n),(0,g.kc)().dse_editor_templates_v1&&Q(F,n),(0,X.O)(J.PW.RESPONSIVE_SET)&&Q(b,n),(0,X.O)(J.PW.CODE_COMPONENT)&&Q(A,n))),u&&(ee(a.createElement(e_.Zq,{header:(0,N.tx)("design_systems.publishing_modal.hidden_header_with_count",{countString:a.createElement(e_.y_,{count:u})}),caretToggle:{isExpanded:s},onClick:c}),"private:header",32,n),s&&(ee(a.createElement("div",{className:ef.m_},(0,N.tx)("design_systems.publishing_modal.these_wont_be_published")),"private:subheader",22,n),Q(P,n),Q(D,n,void 0,!0),Q(V,n),Q($,n),(0,g.kc)().dse_editor_templates_v1&&Q(x,n),(0,X.O)(J.PW.RESPONSIVE_SET)&&Q(v,n),(0,X.O)(J.PW.CODE_COMPONENT)&&Q(C,n))),n})();return a.createElement(S.O,{scrollContent:et,isList:!0,recordingKey:"publishingModalLibraryList",getViewportHeight:e=>e-200,width:(0,g.kc)().ds_fpl_publishing_modal?void 0:480,className:(0,g.kc)().ds_fpl_publishing_modal?ef.jG:ef.eF,renderEmptyState:!et.length&&e.assetQuery?()=>a.createElement(ev,{assetQuery:e.assetQuery}):void 0})}function ev({assetQuery:e}){return a.createElement("div",{className:ef.VX},(0,N.tx)("design_systems.publishing_modal.empty_search_result",{assetQuery:e}))}function eT({numComponentsToUpsell:e,isStarterLibrary:r,team:n}){let i=n?(0,g.kc)().ds_fpl_publishing_modal?a.createElement(p.N,{newTab:!0,trusted:!0,href:`/files/upgrade-team/${n.id}`},(0,N.tx)("design_systems.publishing_modal.upgrade_team")):a.createElement("a",{className:ef.nf,target:"_blank",rel:"noopener",href:`/files/upgrade-team/${n.id}`},(0,N.tx)("design_systems.publishing_modal.upgrade_team")):(0,g.kc)().ds_fpl_publishing_modal?a.createElement(p.N,{newTab:!0,trusted:!0,href:"/files/create-team"},(0,N.tx)("design_systems.publishing_modal.create_a_professional_team")):a.createElement("a",{className:ef.nf,target:"_blank",rel:"noopener",href:"/files/create-team"},(0,N.tx)("design_systems.publishing_modal.create_a_professional_team")),o=r?(0,N.tx)("design_systems.publishing_modal.starter_library_upsell",{numComponents:e}):(0,N.tx)("design_systems.publishing_modal.standard_upsell",{numComponents:e,teamUpsellLink:i});return a.createElement("div",{className:ef.UX,"data-testid":"libraryPublishModalUpsell"},o)}},378614:(e,r,n)=>{n.d(r,{BT:()=>c,EH:()=>u,RR:()=>m,cw:()=>d});var a=n(846288),i=n(357272),o=n(76265),s=n(736041),l=n(957020);function c(e){return[...e].sort((e,r)=>{if(!("sortPosition"in e)||null===e.sortPosition)return 1;if(!("sortPosition"in r)||null===r.sortPosition)return -1;let n=-(0,i.Ez)(e.sortPosition,r.sortPosition);return 0!==n?n:e.node_id>r.node_id?1:-1})}function d(e){switch(e){case l.E8.CHANGED:return(0,o.tx)("design_systems.publishing_modal.modified");case l.E8.CURRENT:return(0,o.tx)("design_systems.publishing_modal.no_changes");case l.E8.DELETED:return(0,o.tx)("design_systems.publishing_modal.removed");case l.E8.NEW:return(0,o.tx)("design_systems.publishing_modal.added");case l.E8.NOT_STAGED:return"";default:(0,a.xb)(e)}}function u(e,r){return s.to({type:{type:"PublishingModal"},data:{initiallyCheckedItemIDs:e,timedOut:r}})}var m=(e=>(e.ASSET_PANEL_LIBRARY_CONTEXT_MENU="asset_panel_library_context_menu",e.COMPONENT_PUBLISH_ERROR_NOTIFICATION="component_publish_error_notification",e.FILENAME_VIEW_DROPDOWN="filename_view_dropdown",e.FULLSCREEN_MOVE_COMPONENTS_PROMPT="fullscreen_move_components_prompt",e.FULLSCREEN_OTHER="fullscreen_other",e.LIBRARY_MODAL_OVERVIEW="library_modal_overview",e.LIBRARY_MODAL_FILE_VIEW="library_modal_file_view",e.LIBRARY_MODAL_UPSELL_UI3="library_modal_upsell_ui3",e.PROPERTIES_PANEL="properties_panel",e.PUBLISH_UPSELL_MODAL="publish_upsell_modal",e.UNPUBLISHED_PREFERRED_VALUES_WARNING="unpublished_preferred_values_warning",e.COOPER_PUBLISH_SECTION="cooper_publish_section",e.TEST="test",e))(m||{})},671056:(e,r,n)=>{n.d(r,{KU:()=>g,Md:()=>y,Nr:()=>E,Pc:()=>p,VB:()=>b,dm:()=>_,l0:()=>m,lM:()=>d,wM:()=>u});var a=n(846288),i=n(805014),o=n(777535),s=n(639215),l=n(710443),c=n(957020);function d(e,r){let n={name:"",type:"STYLE_FOLDER",level:0,styles:[],subfolders:[],styleTypeSection:r};return e.forEach(e=>{let a=n,i=(0,l.ke)(e.name);i.pop(),i.forEach(e=>{let n=a.name?a.name+"/"+e:e,i=a.subfolders.find(e=>e.name===n);if(!i){let e={name:n,type:"STYLE_FOLDER",level:a.level+1,styles:[],subfolders:[],styleTypeSection:r};a.subfolders.push(e),i=e}a=i}),a.styles.push(e)}),n}function u(e){if(!e.length)return[];let r=d(e,e[0].style_type),n=[],a=e=>{e.styles.length>0&&n.push(e.name),e.subfolders.forEach(a)};return a(r),n}function m(e){let r=[...e.subfolders].reverse(),n=[...e.styles];for(;r.length>0;){let e=r.pop();e&&(n.push(e),n.push(...e.styles),r.push(...[...e.subfolders].reverse()))}return n}function p(e){return e.split("/").filter(e=>e).map(e=>e.trim()).join("/")}function h(e){return"STYLE_FOLDER"===e.type?e.name:(0,l.In)(e.name)}function _(e){return m(e).filter(e=>e.type===c.PW.STYLE)}function g(e){return m(e).filter(e=>"STYLE_FOLDER"===e.type)}function f(e){return e.type===c.PW.STYLE?(0,l.ke)(e.name).length:e.level}function E(e,r){(0,s.Oo)(e,r)&&(i.glU.deleteNode(e.node_id),(0,o.sx)("Style Deleted",{styleType:e.style_type,from:"styleListContextMenu"}))}function y(e,r,n,a){if(!e&&!n||!r)return!1;let i=!a&&""!==a||"STYLE_FOLDER"===r.type&&n===r&&e?.type===c.PW.STYLE&&f(e)>f(n)&&a!==(0,l.In)(r.name);return!(e===r||n===r&&(r.type===c.PW.STYLE||!i)||"STYLE_FOLDER"===r.type&&(e?.type===c.PW.STYLE&&n?.type===c.PW.STYLE||e?.type==="STYLE_FOLDER"&&n?.type===c.PW.STYLE||e&&(h(e)+"/").startsWith(r.name+"/")||n&&(h(n)+"/").startsWith(r.name+"/")&&!i))}function b(e,r,n,o,s,u,p){if(e.forEach(e=>{(function(e,r){let n=e.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id),a=[];r.forEach(e=>{n.indexOf(e.node_id)>-1&&a.push(e)});let i=e[0],o=m(d(a,i.type===c.PW.STYLE?i.style_type:i.styleTypeSection)).filter(e=>e.type===c.PW.STYLE);for(let e=0;e<n.length;e++)if(n[e]!==o[e].node_id)return!0;return!1})(s=function(e,r){let n=new Set,a=new Set;for(let r of e)(r.type===c.PW.STYLE?[r]:(function e(r){let n=[];return r.styles.forEach(e=>{n.push(e)}),r.subfolders.forEach(r=>{n.push(r),n.push(...e(r))}),n})(r).concat([r])).forEach(e=>e.type===c.PW.STYLE?a.add(e.node_id):n.add(e.name));return r.filter(e=>"STYLE_FOLDER"===e.type?!n.has(e.name):!a.has(e.node_id))}([e],s),u)&&(u=v(e,s,u))}),!s)return;let h=new Set(e.map(e=>"STYLE_FOLDER"===e.type||p?function(e,r,n,i){if(!e)return i.some(e=>e.type===c.PW.STYLE&&""===(0,l.In)(e.name))?null:-1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&r.type===c.PW.STYLE||"STYLE_FOLDER"===e.type&&r.type===c.PW.STYLE)return null;if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type&&f(e)===f(r)){let n=o.indexOf(e.node_id),a=function(e,r){let n=_(e),a=new Set(r.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id)),i=n[0];return n.forEach(e=>{e.sort_position&&i.sort_position&&e.sort_position<i.sort_position&&a.has(e.node_id)&&(i=e)}),i}(r,i),s=o.indexOf(a.node_id);return n<s?n:s-1}{let s=i.indexOf(r);if(-1!==s){let e=i.slice(s,i.length).find(e=>e.type===c.PW.STYLE);if(!e)return n.length-1;let r=o.indexOf(e.node_id);return(0,a.KF)(-1!==r,"style to insert before does not exist in the stored list"),r-1}{let r=i.indexOf(e),s=i.slice(r+1).reverse().find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,a.KF)(-1!==l,"style to insert after does not exist in the stored list"),l}}}(r,n,u,s):function(e,r,n,i){if(!e)return -1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type)return o.indexOf(e.node_id);{let e=i.indexOf(r),s=i.slice(e,i.length).find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,a.KF)(-1!==l,"style to insert before does not exist in the stored list"),l-1}}(r,n,u,s)));if(h.size>1||h.has(null))return;let g=h.values().next().value,E=u[g],y=u[g+1],b=new Map,T=E;for(let r of e){let e=r=>{r.type===c.PW.STYLE?(i.glU.insertStyleBetween(r.node_id,T?.node_id||"",y?.node_id||""),T=r):(r.styles.forEach(r=>{e(r)}),r.subfolders.forEach(r=>{e(r)}))};e(r);let n=""===o?[]:o.split("/"),a=[...n,(0,l.kH)(r.name)];if(a.join("/")!==r.name){let e=(r,n)=>{if(r.type===c.PW.STYLE){let e=[...n,(0,l.kH)(r.name)].join("/");b.set(r.node_id,e),i.glU.renameNode(r.node_id,e)}else b.set(r.name,n.join("/")),r.styles.forEach(r=>{e(r,n)}),r.subfolders.forEach(r=>{let a=[...n,(0,l.kH)(r.name)];e(r,a)})};e(r,"STYLE_FOLDER"===r.type?a:n)}else b.set("STYLE_FOLDER"===r.type?r.name:r.node_id,r.name)}return b}let v=(e,r,n)=>{let a=(0,l.ke)(e.name);e.type===c.PW.STYLE&&a.pop();let o=r.filter(e=>e.type===c.PW.STYLE),s=[];for(;a.length;){let e=a.join("/");if(0===(s=o.filter(r=>(0,l.In)(r.name).startsWith(e))).length)a.pop();else break}if(s.length){let r,a=s[0];s.forEach(e=>{null!=e.sort_position&&null!=a.sort_position&&e.sort_position<a.sort_position&&(a=e)}),r=e.type===c.PW.STYLE?e:_(e)[0];let o=n.indexOf(r),l=n[o-1],d=n[o+1];i.glU.insertStyleBetween(a.node_id,l?.node_id||"",d?.node_id||"");let u=[...n];return u.splice(u.indexOf(a),1),u.splice(u.indexOf(l)+1,0,a),u}return n}},482310:(e,r,n)=>{n.d(r,{Mz:()=>P,RL:()=>k,TM:()=>x,a7:()=>D,se:()=>F});var a=n(411855),i=n(188507),o=n(217950),s=n(879058),l=n(805014),c=n(777535),d=n(254773);n(512729),n(336427);var u=n(841962),m=n(875877),p=n(94489),h=n(550479),_=n(653798),g=n(524940),f=n(932514),E=n(736041),y=n(644392),b=n(515662),v=n(241815),T=n(176160);n(608520),n(15092);var I=n(473982),S=n(827473),w=n(328254),A=n(206102),C=n(747765),N=n(957020),L=n(583044),O=n(755941);function R(){(0,h.$D)(o.e.SCENEGRAPH_AND_SYNC,Error("Query for library consumers aborted during reconnect"))}async function P(e){let r=(0,y.Ak)(),n=(0,y.Ki)(r),{componentKeys:a,localIds:i}=e.reduce((e,r)=>(r.component_key&&e.componentKeys.push(r.component_key),e.componentKeys.push(...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{componentKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(a,[],i,r);try{await n}catch(e){R()}}async function D(e){let r=(0,y.Ak)(),n=(0,y.Ki)(r),{componentKeys:a,stateGroupKeys:i,localIds:o}=e.reduce((e,r)=>{for(let[n,a]of(e.stateGroupKeys.push(r.key),Object.entries(r.newStateKeyToOutdatedItems)))e.componentKeys.push(n,...a.oldSubscribedKeysToUpdate),e.localIds.push(...a.localIdsToUpdate);return e},{componentKeys:[],stateGroupKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(a,i,o,r);try{await n}catch(e){R()}}async function k(e){let r=(0,y.Ak)(),n=(0,y.Ki)(r),{styleKeys:a,localIds:i}=e.reduce((e,r)=>(e.styleKeys.push(r.key,...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{styleKeys:[],localIds:[]});l.BXd.downloadAllSubscribedStyleConsumersForUpdate(a,i,r);try{await n}catch(e){R()}}async function M(e){let r={[N.PW.CODE_COMPONENT]:[]};for(let n of e)r[n.type].push(n.key);let n=[];for(let e of Object.keys(r))if(r[e].length&&e===N.PW.CODE_COMPONENT){let a=(0,y.Ak)(),i=(0,y.Ki)(a);n.push(i),l.BXd.downloadAllSubscribedCodeInstancesForUpdate(r[e],a)}try{await Promise.all(n)}catch(e){R()}}function F(e,r=S.aD.ALL,n){let o=(0,i.wA)(),h=(0,A.bA)(r),I=(0,m.useAtomValue)(T.yV),{scopedComponentUpdates:N,scopedStateGroupUpdates:x,scopedStyleUpdates:U,scopedVariableSetUpdates:B,scopedLibraryAssetUpdates:V}=(0,m.useAtomValue)(h),G=(0,i.d4)(v.c),H=G.file_key,W=I?.parentOrgId?.toString(),K=G.file_team_id?.toString(),Y=G.productType,{sessionId:$}=(0,O.sz)()??{},j=(0,b.wM)(B.map(e=>e.key)),z=a.useCallback((e,n)=>{if(Object.values(L.AX).includes(e)){let r=e===L.AX.REVIEW_INSTANCE_UPDATES_MODAL_UPDATE_INSTANCE||e===L.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE;return`Instance Actions Menu > ${e} > ${r?"Update instance":"Update all"}`}return Object.values(L.r6).includes(e)?`${e} > Updates Modal > ${r} > ${n?"Update all":"Update"}`:""},[r]),q=(0,C.He)(),Z=(0,w.T)(),X=a.useCallback(async(r,n)=>{let a=l.BXd.getTimestampForLibraryUpdateStart();if((0,y.Ff)()&&await P(r),(0,u.kc)().ds_pubfile_log_discrepancy_web){for(let e of r)if(e.file_key&&!e.library_key){(0,_.x1)("library-keys","missing library key on update component",{component:e},{reportAsSentryError:!0});break}}await o(g.rX({components:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:a,subscribedLibraryKeys:q,fileSubscribedLibraryKeys:Z}))},[o,e,q,Z]),J=a.useCallback(async(r,n)=>{let a=l.BXd.getTimestampForLibraryUpdateStart();if((0,y.Ff)()&&await D(r),(0,u.kc)().ds_pubfile_log_discrepancy_web){for(let e of r)if(e.file_key&&!e.library_key){(0,_.x1)("library-keys","missing library key on update state group",{sg:e},{reportAsSentryError:!0});break}}await o(g.As({stateGroups:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:a,subscribedLibraryKeys:q,fileSubscribedLibraryKeys:Z}))},[o,e,q,Z]),Q=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,y.Ff)()&&await k(e),await o(g.t5({styles:e,updateStartTime:r,subscribedLibraryKeys:q,fileSubscribedLibraryKeys:Z}))},[o,q,Z]),ee=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();if((0,y.Ff)()){let r=(0,y.Ak)(),n=(0,y.Ki)(r);l.BXd.downloadAllSubscribedVariableSetConsumersForUpdate(e.map(e=>e.key),r);try{await n}catch(e){R()}for(let r of e){let e=[];if(r.libraryVariableIdsForUpdate){for(let[n,a]of l.CWU.getUsedSubscribedVariablesInSetByVariableKey(r.key)){let r=j[(0,s.ey)(n)];r&&(a.size>0||!a.has(r.version))&&e.push(`VariableID:${n}/${r.version}`)}r.libraryVariableIdsForUpdate=e}else(0,_.x1)("variables","Expected variableSet to be an UpdateRootVariableSet")}}await o(g._K({variableSets:e,updateStartTime:r}))},[o,j]),et=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,y.Ff)()&&await M(e),await o(g.f$({assets:e,updateStartTime:r}))},[o]),er=a.useCallback(async e=>{await et([e])},[et]),en=a.useCallback((e,r)=>{X([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:H,fileParentOrgId:W,fileTeamId:K,productType:Y,libraryModalSessionId:$,components:[e.component_key].toString(),entrypoint:z(n,!1)})},[n,H,W,K,z,Y,X,$]),ea=a.useCallback((e,r)=>{J([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:H,fileParentOrgId:W,fileTeamId:K,productType:Y,libraryModalSessionId:$,stateGroups:[e.key].toString(),entrypoint:z(n,!1)})},[n,H,W,K,z,Y,J,$]),ei=a.useCallback(e=>{Q([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:H,fileParentOrgId:W,fileTeamId:K,productType:Y,libraryModalSessionId:$,styles:[e.key].toString(),entrypoint:z(n,!1)})},[n,H,W,K,z,Y,Q,$]),eo=a.useCallback(e=>{ee([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:H,fileParentOrgId:W,fileTeamId:K,libraryModalSessionId:$,productType:Y,variableSets:[e.key].toString(),entrypoint:z(n,!1)})},[n,H,W,K,z,Y,ee,$]),es=(0,d.U)();return{updateComponent:en,updateStateGroup:ea,updateStyle:ei,updateVariableSet:eo,updateLibraryAsset:er,updateAll:a.useCallback(async()=>{es("library.update_all.attempt",{},{forwardToDatadog:!0});let e=new p.jk("updateAll",{});e.start();try{let r=N.length+x.length+U.length+B.length;o(f.ni({total:r})),o(E.Ce()),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:H,fileParentOrgId:W,fileTeamId:K,productType:Y,libraryModalSessionId:$,components:N.map(e=>e.component_key).toString(),stateGroups:x.map(e=>e.key).toString(),styles:U.map(e=>e.key).toString(),variableSets:B.map(e=>e.key).toString(),entrypoint:z(n,!0)}),await X(N,void 0),await J(x,void 0),await Q(U),await ee(B),await et(V),o(f.kX());let a=e.stop();es("library.update_all.success",{elapsedMs:a},{forwardToDatadog:!0})}catch(r){throw o(f.V2()),es("library.update_all.failure",{elapsedMs:e.stop()},{forwardToDatadog:!0}),r}},[X,N,V,et,J,x,Q,U,ee,B,H,W,K,Y,z,n,o,es,$])}}function x(e,r){let{updateComponent:n,updateStateGroup:o}=F(e,void 0,r),s=(0,i.wA)(),c=a.useCallback((e,r)=>{let n=l.glU.getOutdatedStyleConsumers(r);s(g.Qn({styleUpdateInfo:e,oldStyleGUID:r,consumerGUIDsToUpdate:n}))},[s]);return{updateIndividualInstances:a.useCallback((e,r)=>{for(let r of Object.values(e))n(r.updateAsset,r.instanceIdsToUpdate);for(let e of Object.values(r))o(e.updateAsset,e.instanceIdsToUpdate)},[n,o]),updateAllConsumersOfStyleVersion:c}}(0,I.rt)(!1)},165093:(e,r,n)=>{n.d(r,{$3:()=>U});var a=n(411855),i=n(188507),o=n(471923),s=n(266838),l=n(556843),c=n(841962),d=n(728722),u=n(746643),m=n(299009),p=n(773991),h=n(489803),_=n(76265),g=n(593587),f=n(272079),E=n(736041),y=n(278695),b=n(140835),v=n(23478),T=n(353428),I=n(643225),S=n(176160),w=n(849331),A=n(926996),C=n(314540),N=n(183739),L=n(313449),O=n(510669),R=n(39971),P=n(487388),D=n(324225),k=n(710636),M=n(378614),F=n(574431),x=n(85092);let U=(0,k.Ju)(function(e){let r=(0,S.q5)(),{team:n,afterFileMove:o}=e,s=(0,i.wA)(),l=(0,w.FC)(),d=(0,A._6)(),u=()=>{s(E.to({type:x.dD,data:{entrypoint:M.RR.PUBLISH_UPSELL_MODAL}}))},m=!!(0,c.kc)().ps_benchmark,p=m&&(0,L.w5)(n);return r?n&&(0,O.canEditTeam)(n.id,l)&&!p?a.createElement(F.bP,{team:n,resource:P.Bi.TEAM_LIBRARY,action:D.pE.PUBLISH_COMPONENTS,editorType:C._Y.DESIGN,onStarterPlanCtaClick:u,currentPlan:T.F.Plan.STARTER,upsellPlan:T.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:r.key,nodeId:"fullscreen"===d.view&&d.nodeId||""},upsellSource:R.b.LIBRARY_UPSELL_BADGE}):a.createElement(B,{team:n,afterFileMove:o,isPlanSpacesEnabled:m,onStylesClick:u}):a.createElement(a.Fragment,null)},"publish-components-upsell");function B(e){let r=(0,g.R)(),n=o.hS({onClose:u.lQ,open:!0,preventUserClose:!0}),c=(0,i.d4)(e=>e.currentUserOrgId),{isPlanSpacesEnabled:p,onStylesClick:h}=e,_=(0,d.Rs)(N.x8f,{}),f=(0,S.q5)(),E=p&&(0,L.w5)(e.team),y=a.useMemo(()=>_.transform(e=>e.currentUser.teamEditRoles.some(e=>{let n=e.team,a=n?.currentPlanUser,i=r?a?.seatTypeLicenseTypes?.includes(C.G_.DESIGN):a?.designPaidStatus!==C.dQ.RESTRICTED;return n&&[C.Ag.PRO,C.Ag.STUDENT].includes(n.plan.tier)&&!n.deletedAt&&i})).unwrapOr(!1),[_,r]),b=!!c,v=p&&f&&(0,I.jd)(f.project),w=(0,A._6)();if(!f)return a.createElement(a.Fragment,null);if("loaded"!==_.status)return a.createElement(s.bL,{manager:n,width:"sm"},a.createElement(l.vo,null,a.createElement(l.nB,null,a.createElement(m.qc,null))));if(y||b||v)return a.createElement(V,{isFileInTeamWithProFeatures:E,isFileInOrg:b,team:e.team,afterFileMove:e.afterFileMove,onStylesClick:h});let O="fullscreen"===w.view?w.nodeId??"":void 0;return void 0!==O?a.createElement(F.bP,{team:e.team,resource:P.Bi.TEAM_LIBRARY,action:D.pE.PUBLISH_COMPONENTS,editorType:C._Y.DESIGN,onStarterPlanCtaClick:h,currentPlan:T.F.Plan.STARTER,upsellPlan:T.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:f.key,nodeId:O},upsellSource:R.b.LIBRARY_UPSELL_BADGE}):a.createElement(a.Fragment,null)}function V(e){let r=(0,i.wA)(),n=()=>{r(E.Ce())},c=o.hS({onClose:n,open:!0}),d=(0,S.q5)(),u=(0,i.d4)(e=>d?(0,v.up)(d,e.repos):null);if(!d)return a.createElement(a.Fragment,null);let m=(0,_.tx)("upsell.move_file_publish.move_file_to_team_to_publish"),g=(0,_.tx)("upsell.move_file_publish.move_file_to_pro_team_to_publish"),T=(0,_.tx)("upsell.move_file_publish.move_file_to_project_to_publish"),I=(0,_.t)("upsell.move_file_publish.move_to_team_to_publish_library_assets"),w=(0,_.t)("upsell.move_file_publish.move_to_project_to_publish_library_assets"),A=g;e.isFileInOrg?A=m:e.isFileInTeamWithProFeatures&&(A=T);let C=e.isFileInTeamWithProFeatures?(0,_.tx)("upsell.move_file_publish.move_to_project"):(0,_.tx)("upsell.move_file_publish.move_to_team");return a.createElement(b.fu,{name:"MoveFilePublishUpsell"},a.createElement(s.bL,{manager:c,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,e.isFileInTeamWithProFeatures?w:I)),a.createElement(l.nB,null,A),a.createElement(l.wi,null,a.createElement(l.jk,null,a.createElement(p.$z,{onClick:n,trackingProperties:{trackingDescriptor:y.c.CANCEL},variant:"secondary"},(0,_.tx)("upsell.shared.cancel")),a.createElement(h.pW,{href:"#",onClick:()=>{let{afterFileMove:n}=e;(0,f.h)({key:d.key,name:d.name,folder_id:d.folderId,team_id:d.teamId,editor_type:d.editorType,parent_org_id:d.parentOrgId},u,r,{handlesVisualBell:!1,callback:n},{isPublishing:!0})}},C))))))}},654224:(e,r,n)=>{n(777535),n(841962),n(875877),n(955597),n(176160),n(15092)},775338:(e,r,n)=>{n.d(r,{RX:()=>b,OC:()=>y}),n(411855);var a=n(805014),i=n(737859),o=n(32050),s=n(841962),l=n(875877),c=n(736942),d=n(653798);n(176160);var u=n(468260),m=n(747765),p=n(834825),h=n(627805),_=n(583502),g=n(183739);(0,l.atomFamily)(e=>(0,h.x8)({fileKey:e})),(0,l.atomFamily)(e=>(0,l.atom)(r=>{let n={};for(let a of e)n[a]=r(g.u6n.Query({fileKey:a}));return n}),p.lu);let f=(0,l.atomFamily)(e=>(0,l.atom)(r=>{let n={};for(let a of e)n[a]=r(g.zkh.Query({libraryKey:a}));return n}),_._f),E="all_sources";function y(){return function(e,r){let n=f(e),a=(0,l.useAtomValue)(n);return(0,o.wm)(()=>{let e=c.Qw.all(Object.values(a));return"loaded"!==e.status?e.transform(()=>({})):c.Qw.loaded(Object.fromEntries(Object.entries(a).map(([e,n])=>[e,function(e,r=E){if(e?.status!=="loaded")return(0,d.Lo)("Modules",`Library atom value status not loaded: ${e?.status}`),[];let n=e.data.libraryKeyToFile;if(n?.status!==i.tT.Loaded||!n.data)return(0,d.Lo)("Modules","libraryKeyToFile not loaded"),[];let{file:a,hubFile:o}=n.data;if(!a?.modules?.length&&!o?.modules_v2?.length)return(0,d.Lo)("Modules",`${a?"File":"Hub File"} modules not loaded`),[];let s=[];if(a?.modules?.length){let e=a.modules.map(e=>(0,u.J4)(e,{type:"teamTemplate",file:a})).filter(b).filter(e=>r===E||e.moduleSource===r);s=s.concat(e)}if(o?.modules_v2?.length){let e=o.modules_v2.map(e=>(0,u.J4)(e,{type:"hubFile",file:o}));s=s.concat(e)}return function(e,r){return e.filter(e=>(r===E||e.moduleSource===r)&&b(e))}(s,r)}(n,r)])))},[a,r])}((0,m.He)(),a.QjO.EDITOR_TEMPLATE)}function b(e){if(!(0,s.kc)().dse_module_publish)return!1;switch(e.moduleSource){case a.QjO.EDITOR_TEMPLATE:return!!(0,s.kc)().dse_editor_templates_v1;case a.QjO.SLIDES_TEMPLATE:return!0;case a.QjO.SITES_TEMPLATE:return!!(0,s.kc)().sites;case a.QjO.LITE_TEMPLATE:return!!(0,s.kc)().cooper}}},275258:(e,r,n)=>{n.d(r,{B:()=>d});var a=n(411855),i=n(109388),o=n(188507),s=n(47795),l=n(929717),c=n(689954);function d(e){let r=a.useId(),n=e||r,d=(0,o.wA)(),u=(0,o.d4)(e=>e.dropdownShown?.type===n),m=a.useMemo(()=>document.createElement("div"),[]);a.useEffect(()=>(document.body.appendChild(m),()=>{document.body.removeChild(m)}),[m]);let p=a.useRef(null),h=p.current?.getBoundingClientRect()||null,_=e=>{e.callback&&e.callback("",null,d)};return{toggleDropdown:()=>{u?d(s.oB()):d(s.j7({type:n}))},dropdownTargetRef:p,Dropdown:function(e){let r=(0,l.UV)(e);return a.createElement(a.Fragment,null,u&&h&&i.createPortal(a.createElement(c.j,{parentRect:h,dispatch:d,onSelectItem:_,...e,...r}),m))},isDropdownShown:u}}},33262:(e,r,n)=>{n.d(r,{Nz:()=>en});var a=n(411855),i=n(188507),o=n(846288),s=n(747579),l=n(805014),c=n(629019),d=n.n(c),u=n(323434),m=n(134288),p=n(777535),h=n(789022),_=n(336427),g=n(841962),f=n(215587),E=n(875877),y=n(747484),b=n(729551),v=n(40211),T=n(705158),I=n(36748),S=n(612724),w=n(851390),A=n(76265),C=n(602670),N=n(695024),L=n(427494),O=n(176160),R=n(58799),P=n(861807),D=n(926996),k=n(497216),M=n(281326),F=n(204326);n(141300),n(66583),n(588163),n(225690);var x=n(991944),U=n(147742),B=n(560045),V=n(479836),G=n(939607),H=n(675646),W=n(944558),K=n(757567),Y=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(Y||{});let $=(e,r)=>{let n=(0,N.ni)(),i=(0,I.Av)(),l=(0,F._)(),c=(0,L.p8)("showUi"),d=(0,D._6)(),u="prototype"===d.view&&"slides"===d.file.editor_type,m=function({isUI3:e,prototypeHeaderHidden:r,showUi:n,style:a,toolbarHeight:i,editorBannerHeight:s}){let l=0;if(e)l=y.Ay.isIpadNative||(0,y.FP)()&&n?(0,U.VA)():0;else switch(a){case 3:case 0:case 1:l=n||y.Ay.isIpadNative?i:0;break;case 2:l=r?0:i;break;default:(0,o.xb)(a)}return 0!==s&&(l+=s),l}({isUI3:"ui3"===(0,s.DP)().version&&!u,prototypeHeaderHidden:r,showUi:c,style:e,toolbarHeight:i,editorBannerHeight:l});return a.useMemo(()=>({left:n.x,top:m,width:n.width}),[n,m])},j=(e,r)=>{let n;let i=function(e){let r;let n=(0,N.ni)(),i=(0,F._)(),o="ui3"===(0,s.DP)().version,l=(0,L.p8)("showUi"),c=0;o?(y.Ay.isIpad||(0,y.FP)())&&(c=(0,U.VA)()):y.Ay.isIpadNative&&(c=l?0:(0,U.VA)());let d=n.y+i+c;switch(e){case 1:r=4;break;case 2:r=d;break;case 3:r=0;break;case 0:r=10}return a.useMemo(()=>({left:n.x,top:d,width:n.width-(0===e?10:0),height:n.height-i-r-c}),[n,e,d,r,i,c])}(r),o=0;switch(r){case 0:n={borderWidth:5},o=5;break;case 1:if((0,y.FP)()&&(0,f.Dz)()){n={};break}n={borderTopWidth:4},o=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},o=5;break;case 2:n={}}return a.useMemo(()=>({style:{...i,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${o}px`},borderInfo:{width:o,color:e}}),[e,i,n,o])};function z(e){let{children:r,prototypeHeaderHidden:n}=e,i=(0,D.z3)(),o=0;"prototype"===i?o=2:y.Xb&&(o=1);let s=$(o,n||!1),l=2===o?K.Y$:void 0,c=2===o&&n?K.Fd:void 0;return a.createElement("div",{className:d()(K.GE,l,c),style:s,"data-testid":"multiplayer-bell-container"},r)}function q(){let{style:e,borderInfo:r}=a.useContext(G.h);return e={...e,borderColor:r.color},a.createElement("div",{"data-testid":"viewport-frame",className:d()(K.KM),style:e})}function Z(){let{style:e,borderInfo:r}=a.useContext(G.h);return e={...e,color:"brand"===r.color?"var(--color-bg-brand)":r.color,"--borderColorTransitionDurationSeconds":`${W.Bn}s`},a.createElement("div",{className:K.KM,style:e})}function X(e){let{children:r,colorOverride:n,overlayStatus:i}=e,o=(0,R.$0)(),s=(0,R.dR)(),l=(0,R.Ww)(),c=(0,D._6)(),d=0;"prototype"===c.view?d=c.isPresenterView?3:2:y.Xb&&(d=1);let u=j((()=>{if(n)return n;if(!i)return s&&l?.sessionID===s?.sessionID?l?.color??"transparent":o?.color??"transparent";{let{self:e,others:r}=i;return"none"!==e?"recording"===e?"var(--ramp-red-600)":"brand":"following"===r&&"none"===e?o?.color??"transparent":"transparent"}})(),d);return a.createElement(G.h.Provider,{value:u},r)}var J=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.PREPARING_TO_RECORD="preparing_to_record",e.RECORDING="recording",e.NONE="none",e))(J||{}),Q=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(Q||{});function ee(){return"prototype"!==(0,D.z3)()&&!((0,y.FP)()&&(0,f.Dz)())}function et(e,r,n,i){let o=(0,_.ZC)(e),s=(0,_.ZC)(r),l=a.useRef(performance.now());return a.useEffect(()=>{if("presenting"===e){let e=h.sn.tryStop("start_spotlight");e&&((0,p.sx)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0}),(0,g.kc)().workspace_activity_write&&n&&n.team&&n.team.workspaceId&&M.i.recordActivity({activityUnitType:k.qj.FILE_COLLABORATION,fileKey:n.key,collaborationType:k.Uz.SPOTLIGHT_STARTED,numPeopleInFile:i.current}))}else if("pending_auto_follow"===r){let e=h.sn.tryStop("join_spotlight");e&&(0,p.sx)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===r){let e=h.sn.tryStop("start_following");e&&(0,p.sx)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,r,n,i]),(e!==o||r!==s)&&(l.current=performance.now()),{statusChangedAt:l.current}}function er(e){let{multiplayer:r,prototypeHeaderHidden:n}=e,i=(0,R.Ww)(),s=(0,R.dR)(),c=(0,R.$0)(),d=(0,R.y)(),p=(0,O.q5)(),h=(0,P.T)(),_=(0,v.y7)(),g=(0,v.oJ)(),f=(0,v.$)(),I=a.useContext(b.q5),[N,L]=a.useState(!1);a.useEffect(()=>{L(!1)},[s?.sessionID]),a.useEffect(()=>{c?.sessionID===s?.sessionID&&L(!1)},[c?.sessionID,s?.sessionID]);let{isAutoFollowPending:k,cancelAutoFollowCallback:M,completeAutoFollowCallback:F,observeCurrentPresenter:U,autoFollowType:G,autoFollowDelayMs:Y}=(0,R.oW)(e),{isWaitingForFirstFollower:$,stopPresenting:j}=function(e){let[r,n]=a.useState(!1),i=e.followerCount,[o,s]=(0,E.useAtom)(T.Dv);0===i||r||n(!0);let c=(0,v.jA)(e)||o;(0,v.jA)(e)&&o&&s(!1),!c&&r&&n(!1);let d=c&&0===i&&!r,u=(0,P.T)(),m=(0,D.z3)(),p=a.useCallback(()=>{u(P.N.STOP),"prototype"===m?w.hk()?.stopPresenting():l.h3O.stopPresenting()},[u,m]),h=a.useCallback(()=>!!d&&(p(),!0),[p,d]);return(0,C.O1)(h,C.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:d,stopPresenting:p}}(r),q=function(e){let{multiplayer:r,showingExplainer:n,isPendingPresenting:a,recorder:i}=e;return i.isRecording?"recording":i.mediaStream?"preparing_to_record":(0,v.jA)(r)||a?"presenting":n?"showing_explainer":(0,v.NB)(r)?"prompt_to_accept_nomination":"none"}({multiplayer:r,showingExplainer:(0,E.useAtomValue)(T.ah),isPendingPresenting:(0,E.useAtomValue)(T.Dv),recorder:I}),J=function(e){let{multiplayer:r,isAutoFollowPending:n,presenterUser:a,suppressRejoinPrompt:i}=e;return n?"pending_auto_follow":(0,v.L3)(r)?"following":a&&!i?"prompt_to_rejoin":"none"}({multiplayer:r,isAutoFollowPending:k,presenterUser:s,suppressRejoinPrompt:N}),Q=a.useRef(r.allUsers.length);Q.current=r.allUsers.length;let{statusChangedAt:er}=et(q,J,p,Q),[en,ea]=function(e,r){switch(e){case"presenting":if("following"===r||"prompt_to_rejoin"===r)return[e,"none"];return[e,r];case"prompt_to_accept_nomination":if("pending_auto_follow"===r)return["none",r];return[e,"none"];case"showing_explainer":case"none":return[e,r];case"preparing_to_record":case"recording":return[e,"none"];default:(0,o.xb)(e)}}(q,J),ei=a.useCallback(()=>{L(!0),M(),h(P.N.IGNORE)},[M,h]),eo=G===R.D_.INITIAL,es=a.useCallback(()=>"pending_auto_follow"===ea&&!!k&&G===R.D_.INITIAL&&(M(),!0),[G,M,k,ea]);(0,C.O1)(es,C.KD.MULTIPLAYER_SPOTLIGHT);let el=ee(),ec="showing_explainer"===en,ed="none"!==en,eu="none"!==ea,em=a.useRef(null);a.useEffect(()=>{"preparing_to_record"===en&&I.mediaStream&&em.current&&(em.current.srcObject=I.mediaStream)},[en,I.mediaStream]);let ep=["presenting","prompt_to_accept_nomination","showing_explainer","preparing_to_record","recording"].includes(en)||["following"].includes(ea),[eh,e_]=(0,E.useAtom)(T.uc);return ep!==eh&&e_(ep),a.createElement(X,{overlayStatus:{self:en,others:ea}},a.createElement(u.N,null,ep&&a.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:W.Bn}},a.createElement(Z,null))),a.createElement(u.N,null,ed&&a.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:W.Bn}},a.createElement(z,{prototypeHeaderHidden:n},(()=>{switch(en){case"presenting":if(null===i)return null;if($){let e=(0,A.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),r=(0,A.t)("collaboration.spotlight.bell.presenter.cancel");return a.createElement(V.Y,{color:"brand",message:{text:e},renderKey:`${i.sessionID}`,progressBar:!0,progressBarDurationMs:6e3,autoHide:!1,button:{text:r,onClick:j}})}return a.createElement(V.Y,{color:"brand",message:{text:a.createElement(B.s,{count:r.followerCount})},renderKey:`${i.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,A.t)("collaboration.spotlight.bell.presenter.stop"),onClick:j},docked:el});case"prompt_to_accept_nomination":if(!i||!d)return null;return a.createElement(V.Y,{color:"brand",useSecondaryColor:!0,message:{text:(0,A.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:d.name})},renderKey:`${i.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,A.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{_(r)}},showCloseButton:!0,onCloseCallback:()=>{g(i.sessionID,r)}});case"showing_explainer":if(null===i)return null;let e=s?(0,A.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:s?.name}):(0,A.tx)("collaboration.spotlight.bell.explainer");return a.createElement(V.Y,{color:"brand",useSecondaryColor:!0,message:{text:e},renderKey:`${r.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:null,docked:!1});case"preparing_to_record":case"recording":if(!i)return null;return a.createElement(H.e,{onStopPresenting:j});case"none":return null;default:(0,o.xb)(en)}})()))),a.createElement(u.N,null,eu&&a.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:W.Bn}},a.createElement(z,{prototypeHeaderHidden:n},(()=>{switch(ea){case"pending_auto_follow":{if(!s)return null;let e=s.name,r=eo?{text:(0,A.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:F}:{text:(0,A.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},n=eo?{text:(0,A.t)("collaboration.spotlight.bell.follower.not_now"),onClick:ei}:null;return a.createElement(V.Y,{color:s?.color,message:r,renderKey:`${s.sessionID}`,progressBar:eo,progressBarDurationMs:Y||0,autoHide:!1,button:n,ghost:ec})}case"following":{let e=r.observingSessionID===r.presenterSessionID;if(null===c)return null;let n=c?.name||"",i=e?(0,A.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,A.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),o={text:e?(0,A.t)("collaboration.spotlight.bell.stop_following"):(0,A.t)("collaboration.spotlight.bell.stop"),onClick:()=>f(r)};return a.createElement(V.Y,{color:c?.color,message:{text:i},renderKey:`${r.observingSessionID}`,autoHide:!y.Xb,progressBar:!1,progressBarDurationMs:0,button:o,docked:el,ghost:ec})}case"prompt_to_rejoin":let e=()=>(0,v.KI)(U,r,"Spotlight Rejoined",er);if(null!==c||null===s)return null;let n=(0,A.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:s.name}),i=(0,A.t)("collaboration.spotlight.bell.follower.follow");return a.createElement(V.Y,{color:s?.color,message:{text:n,onClick:e},renderKey:`${s.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:{text:i,onClick:e},showCloseButton:!0,onCloseCallback:()=>(0,v.KI)(()=>L(!0),r,"Spotlight Rejoin Dismissed",er),useSecondaryColor:!0,ghost:ec});case"none":return null;default:(0,o.xb)(ea)}})()))),(()=>{if("preparing_to_record"!==en&&"recording"!==en||!I.mediaStream)return null;let e=I.mediaStream.getVideoTracks();if(0===e.length)return null;let r=e[0].getSettings();if(!r.width||!r.height)return null;let n=r.width/400,i=r.height/225,o=n>i?400:r.width/r.height*225,s=n>i?r.height/r.width*400:225;return a.createElement(x.vx,{initialPosition:new S.Mi(12,-30),initialHeight:s,initialWidth:o,transparentContentBackground:!0,initialConstraints:{x:"left",y:"bottom"},canRenderBelowViewport:!0},a.createElement("video",{className:K.bw,ref:em,autoPlay:!0,playsInline:!0,muted:!0}))})())}function en(e){let{prototypeHeaderHidden:r}=e,n=(0,i.d4)(({multiplayer:e})=>e),o=(0,R.HG)(),s=(0,R.By)(),l=-1!==n.observingSessionID;return((0,R.VA)({multiplayer:n}),(0,R.Pi)({multiplayer:n}),s)?null:o?a.createElement(er,{multiplayer:n,prototypeHeaderHidden:r}):l?a.createElement(ea,{prototypeHeaderHidden:r}):null}function ea(e){let{prototypeHeaderHidden:r}=e,n=(0,R.$0)(),o=(0,O.q5)(),s=(0,i.d4)(e=>e.multiplayer.allUsers.length),l=a.useRef(s);l.current=s,et("none","following",o,l);let c=`${n?.sessionID}`,d=a.useMemo(()=>{let e=n?.name||"";return{text:(0,A.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[n]),u=ee();return null===n?null:a.createElement(X,null,a.createElement(q,null),a.createElement(z,{prototypeHeaderHidden:r},a.createElement(V.Y,{color:n?.color,message:d,renderKey:c,autoHide:!y.Xb,progressBar:!1,progressBarDurationMs:0,button:null,docked:u})))}},141300:(e,r,n)=>{n.d(r,{$i:()=>l,a8:()=>s});var a=n(805014),i=n(875877),o=n(66583);(0,i.atom)(2e3),(0,i.atom)(2e3),(0,i.atom)(""),(0,i.atom)(0),(0,i.atom)(!1),(0,i.atom)(!1),(0,i.atom)(null);let s=(0,i.atom)(o.h0.AWAITING_PLAYBACK);(0,i.atom)(a.z7E.DEFAULT),(0,i.atom)(o.zu.DEFAULT),(0,i.atom)(void 0);let l=(0,i.atom)(o.JJ.CANVAS);(0,i.atom)(0)},66583:(e,r,n)=>{n.d(r,{JJ:()=>i,h0:()=>d,zu:()=>o});var a=(e=>(e.SET_CHAT="setChat",e.CLEAR_CHAT="clearChat",e.TARGET_DOM_NODE="targetDOMNode",e.TARGET_SCENE_NODE="targetSceneNode",e.INSERT_NODE="insertNode",e.ADJUST_ZOOM_LEVEL="adjustZoomLevel",e.MOVE_CURSOR_TO_CENTER_SCREEN="moveCursorToCenterScreen",e.CHANGE_TOOL="changeTool",e.MOVE_VIEWPORT="moveViewport",e.SET_CURSOR_DIRECTION="setCursorDirection",e.SET_PROPERTIES_PANEL_TAB="setPropertiesPanelTab",e.UPDATE_SELECTED_NODE_PROPERTIES="updateSelectedNodeProperties",e.SCROLL_PROPERTIES_PANEL="scrollPropertiesPanel",e.FOCUS_INPUT="focusInput",e.SELECT_SCENE_NODE="selectSceneNode",e.SET_VIEWPORT_FRAME_TYPE="setViewportFrameType",e))(a||{}),i=(e=>(e.CANVAS="canvas",e.PROPERTIES_PANEL="properties-panel",e.TEXT_PANEL="text-panel",e))(i||{}),o=(e=>(e.DEFAULT="left",e.RIGHT="right",e))(o||{}),s=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.INSIDE_SCENE_NODE=1]="INSIDE_SCENE_NODE",e[e.CANVAS_COORDINATE=2]="CANVAS_COORDINATE",e))(s||{}),l=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e))(l||{}),c=(e=>(e.CREATE_FRAME="How to draw a frame",e.FORMAT_FRAME="How to use the design panel",e.CREATE_TEXT="Add words where needed",e.FORMAT_TEXT="How to format text",e))(c||{}),d=(e=>(e.PLAYING="playing",e.AWAITING_PLAYBACK="awaitingPlayback",e))(d||{}),u=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(u||{}),m=(e=>(e.TOP="top",e.CENTER="center",e.BOTTOM="bottom",e))(m||{}),p=(e=>(e.TEST="test",e.PRODUCT_FRAME="productFrame",e.PRODUCT_FRAME_CHERRIES_FRAME="productFrameCherriesFrame",e.PRODUCT_FRAME_TOMATO_FRAME="productFrameTomatoFrame",e.CHERRIES_FRAME_CHERRIES_IMAGE="cherriesFrameCherriesImage",e.CHERRIES_FRAME_CHERRIES_TEXT="cherriesFrameCherriesText",e.CHERRIES_FRAME_PRICE_TEXT="cherriesFramePriceText",e.CHERRIES_FRAME_GROWN_TEXT="cherriesFrameGrownText",e.NO_BASICS_FILE_FRAME="noBasicsFileFrame",e.NO_BASICS_FILE_TEXT="noBasicsFileText",e))(p||{}),h=(e=>(e.ESC_KEY="esc key",e.STOP_BTN="stop button",e.NEXT_BTN="next tutorial button",e.PREV_BTN="previous tutorial button",e.STATE_MANAGER_ERROR="state manager error",e))(h||{})},588163:(e,r,n)=>{n(851169),n(653798),n(284406),n(471340),n(66583),n(940988)},322412:(e,r,n)=>{n(411855),n(230208),n(809242),n(875877),n(265851),n(303480),n(314540),n(998998),n(141300),n(66583),n(588163),n(199979),n(940988)},407215:(e,r,n)=>{n(411855),n(629019),n(875877),n(621847),n(265851),n(773991),n(76265),n(648800),n(278695),n(140835),n(343373),n(303480),n(287327),n(424502),n(141300),n(66583),n(303596),n(931095),n(460945)},786140:(e,r,n)=>{n.d(r,{q:()=>s});var a=n(885123),i=n(198003);n(728722),n(176160);var o=n(183739);function s(){return new Promise((e,r)=>{let n=a.D.getState().openFile?.key;if(!n)return e(!1);(0,i.Ek)(o.J2w,{fileKey:n}).then(r=>e(!!r.file?.org?.cursorChatDisabledAt))})}},48934:(e,r,n)=>{n(411855),n(188507);var a=n(805014),i=n(991458);n(841962),n(826943),n(76265),n(343373),n(421331),n(948813),n(408879);var o=n(488527),s=(e=>(e[e.NONE=0]="NONE",e[e.EYEDROPPER=1]="EYEDROPPER",e[e.CHAT=2]="CHAT",e[e.HIGH_FIVE=3]="HIGH_FIVE",e))(s||{});let l={[a.NLJ.SELECT]:"f7ae268fa093b5f690abfe5cc56cccfa8c2d4734",[a.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[a.NLJ.DROPPER_COLOR]:"d8d06a74b0182fb6948c55373e8c68d602dd9a78"},c={[a.NLJ.SELECT]:"aed6896e6ad35977610fc23bb6590c1484d3ee01",[a.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[a.NLJ.DROPPER_COLOR]:"3a904092ca690b41c06a24b8e2dddb724a992c94"},d=((0,i.hG)(o.xEX),e=>{switch(e){case Tool.SELECT:return t("fake_cursor.select_cursor");case Tool.HAND:return t("fake_cursor.hand_cursor");case Tool.DROPPER_COLOR:return t("fake_cursor.eyedropper_cursor");default:return t("fake_cursor.cursor")}})},998998:(e,r,n)=>{var a={};n.r(a),n.d(a,{GLARE_ANIMATION:()=>P,GRAY_BACKGROUND:()=>R,NONE:()=>k,ORANGE_GRADIENT:()=>O,PINK_GRADIENT:()=>N,animateBg:()=>L,glareAnimation:()=>D});var i=n(411855);n(188507);var o=n(805014),s=n(629019),l=n.n(s),c=n(789022),d=n(230208);n(809242),n(108982);var u=n(841962);n(499875),n(73041);var m=n(343373);n(421331),n(938983),n(214773),n(695024),n(266316),n(49039),n(427494),n(58799),n(797187),n(549147),n(214718);var p=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(p||{});let h=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(h.set("me encanta","PINK_GRADIENT"),h.set("hola","PINK_GRADIENT"),h.set("bienvenides","PINK_GRADIENT"));let _=new Map([[(0,u.ck)("a83de90bf34495081ce2e8bcaf28d1d2c16e5186"),["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],[(0,u.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2"),["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],[(0,u.ck)("0606e9d967b5abb6d9a2853c2fff589f2ec2fc05"),["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],[(0,u.ck)("ffd0635e8f9322352eff0c15411ac0b536b98d87"),["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],[(0,u.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],[(0,u.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],[(0,u.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],[(0,u.ck)("e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c"),["gift","hbd","bday","birthday"]],[(0,u.ck)("778eea842ed4020f6209e97c77abcd84984e5c94"),["cool","coool","swag","chill"]],[(0,u.CZ)("emoji/5/noto/medium/1f410.png"),["goat"]]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(_.set((0,u.ck)("62f55b94bf05d9a49731714238dd5e6ce716225d"),["me encanta","ole","vamos"]),_.set((0,u.ck)("88ea7d675b3ebeebbd917bf6857afa502b51d928"),["bienvenidos","bienvenides","bienvenidas"]),_.set((0,u.ck)("89a607910c3edfcaf5efa1e19bc8b646f2e47a6a"),["fuego","picante"]),_.set((0,u.ck)("8b29bcdf89d32bafec42bee873327384b55eb54b"),["hola","brillante","excelente","bien","muy bien","sol"]));var g=(e=>(e[e.Standard=0]="Standard",e))(g||{});let f=new Map;_.forEach((e,r)=>{!function(e,r,n){e.forEach(e=>n.set(e,r))}(e,r,f)});var E=n(866248);n(281935);var y=n(572908);n(885123),n(361515);var b=n(254773),v=n(875877),T=n(866415);n(509343),n(200222),(0,v.atom)(!1),(class e extends y.w{constructor({startingRelativePosition:r,startingRotation:n,position:a,viewportZoomScale:i,cursorOnRightForWindup:o,cursorOnRightForCollision:s,sessionId:l,getUserCursorTransform:c}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,s&&(this.sortOrder=-1),this.position=a,this.viewportZoomScale=i,this.cursorOnRightForWindup=o,this.cursorOnRightForCollision=s;let d={transform:`translate(${r.x}px, ${r.y}px) rotate(${n}rad)`},u={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},m={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},p=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${m.transform}`})),h=1e3/60;this.customData={sessionId:l,animations:[{keyframes:[d,u],timing:{duration:12*h,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[u,m],timing:{delay:12*h,duration:4*h,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:p,timing:{delay:16*h,duration:4*h,easing:`steps(${p.length})`}},{keyframes:[m,m],timing:{delay:20*h,duration:18*h}}],getReturnToCursorTransform:r=>{let n=(this.cursorOnRightForCollision?1:-1)*10,a=c(),o=(a.position.x-this.position.x)*i,s=(a.position.y-this.position.y)*i,l=a.rotation;return`translate(${e.lerp(n,o,r)}px,${e.lerp(0,s,r)}px) rotate(${e.lerp(0,l,r)}rad) scale(${e.lerp(2,1,r)})`}}}static lerp(e,r,n){return e*(1-n)+r*n}}).RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];let I=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let r=this.subscriptions.indexOf(e);r>=0&&this.subscriptions.splice(r,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let r of(this.wiggleMode=e,this.subscriptions))r(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),r=e-this.lastUpdateTime;return this.lastUpdateTime=e,r/1e3}update(e,r){e?this.setMousePositionAndUpdate(e,r):this.updateWiggleMeter(r)}setMousePositionAndUpdate(r,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let a="number"==typeof n?n:this.getDeltaTime();if(a<=0)return;this.mouseX=r.x,this.mouseY=r.y;let i=1,o=(this.mouseX-this.lastMouseX)/a,s=(this.mouseY-this.lastMouseY)/a;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let l=Math.sqrt(o*o+s*s);if(l>0){let e=o/l,r=s/l;i=e*this.lastDirectionX+r*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=r}let c=a/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=a/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+c;this.speedFactor+=Math.min(l*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-c),this.speedFactor=Math.min(1,this.speedFactor);let u=this.speedFactor>=.8,m=u&&i<0,p=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);u&&m&&p&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-a/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=a/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),u&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(a)}updateWiggleMeter(r){if((r="number"==typeof r?r:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=r/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function S(e,r){let n=3*e,a=3*e,i=1.7999999999999998*e,o=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){o.push(w(0,0,0));continue}let r=Math.floor(Math.random()*n)-n/2,s=Math.floor(Math.random()*a)-a/2,l=Math.floor(Math.random()*i)-i/2;o.push(w(r,s,l))}return new Animation(new KeyframeEffect(r,o,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function w(e,r,n){return{transform:`translate(${e}px, ${r}px) rotate(${n}deg)`}}function A(e){return!!e.length&&e.some(e=>"running"===e.playState)}function C(e){let{content:r,children:n}=e,[a,o]=(0,i.useState)(0),s=(0,i.useRef)(0),l=(0,i.useRef)([]),c=i.useRef(null),[d,u]=(0,i.useState)([]),m=(0,b.am)(),p=(0,i.useMemo)(()=>0===r.length?0:((r.match(/\!+$/g)||[])[0]||"").length,[r]),h=(0,i.useCallback)(e=>{clearTimeout(s.current),s.current=setTimeout(()=>{o(e=>(e>0&&h(250),Math.max(e-1,0)))},e)},[]);return(0,i.useEffect)(()=>{o(p),h(1e3)},[p,h]),(0,i.useEffect)(()=>{if(!c.current)return;a>1&&!l.current.length&&(l.current=[S(1,c.current),S(1.5,c.current),S(2,c.current),S(2.5,c.current),S(3,c.current)]);let e=A(l.current);if(a>1){let e=Math.min(a-1-1,l.current.length-1);l.current.forEach((r,n)=>{n===e?r.play():r.cancel()})}else l.current.forEach(e=>e?.cancel());let r=A(l.current);!e&&r&&m("cursor_chat_rumble_triggered"),u(l.current.map(e=>e?.playState))},[a,m]),i.createElement("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":d,ref:c},n)}I.WIGGLE_MODE_DEACTIVATION_TIME=6,I.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,I.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,I.WIGGLE_MODE_MOUSE_RESET_TIME=.6,I.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,I.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,I.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,I.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,I.WIGGLE_MODE_REPLENISH_SHAKES=3.5,I.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,I.WIGGLE_MODE_SHAKE_RESET_TIME=.5,I.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3,(0,T.xx)(function(e){return e.reduce((e,r)=>(e[r.sessionID]=r,e),{})}),n(3445),p.NONE;n(948813),n(76265),n(536737),n(605931);let N="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",L="cursor_chat_emotes--animateBg---meP2",O="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",R="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",P="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",D="cursor_chat_emotes--glareAnimation--x1WJw",k="cursor_chat_emotes--NONE---FYHz";n(889148);var M=n(199979);n(786140);var F=n(846288);n(747484),n(48934);var x=n(142119);function U(e,r,n){let a=o.z7E[r];return n?(0,u.CZ)(`multiplayer_cursors/ui3/${a}/${e.substring(1)}.png`):(0,u.CZ)(`multiplayer_cursors/v1/${a}/${e.substring(1)}.png`)}function B(e,r){if(r){let r=x.JR[e.substring(1)]??x.JR[x.p4];return`data:image/png;base64, ${r}`}let n=x.De[e.substring(1)]??x.De[x.p4];return`data:image/png;base64, ${n}`}function V({color:e,isHighFiveHandOut:r,temporarilyHide:n,isCursorHandOnRight:a,aboutToHide:o=!1}){return i.createElement("div",{className:l()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":r,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":o})},i.createElement("div",{style:{opacity:n?"0":"1"},className:l()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":a})},i.createElement(K,{color:e})))}let G="#FFFFFF",H=new Set([G,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function W({color:e}){let[r,n]=i.useState(!1);if(!H.has(e))return(0,F.KF)(!!e,`Unknown color ${e} for Cursor High Fives`),i.createElement(i.Fragment,null);let a=U(r?G:e,o.z7E.HIGH_FIVE,!1);return i.createElement("img",{className:"cursor_high_five--handImage--mJVid",src:a,alt:"",onError:()=>n(!0)})}function K({color:e}){return i.createElement(W,{key:e,color:e})}var Y=n(991458);n(581713),n(620552),n(289765),n(912580);var $=n(488527);(0,Y.hG)($.tui);let j=(0,i.memo)(function({name:e,color:r,cursorType:n,chatMessage:s,isHighFiving:_,focusOnTextCursor:g,temporarilyHide:f,isCursorHandOnRight:y,isCursorPointingRight:b,editorType:v,isCursorAndChatAreaOffscreen:T,sessionId:I,prefersReducedMotion:S,isHighFivingSupported:w,useChatAnimation:A,disableMessageFade:N,isStaticView:L,isHoveringWidgetWithHiddenCursors:O}){let R=(0,m.GS)(),[P,D]=(0,i.useState)(1),k=(0,i.useMemo)(()=>(0,d.GL)(r),[r]),[F,x]=(0,i.useState)(p.NONE),G=()=>x(p.NONE),[H,W]=(0,i.useState)(L),[K,Y]=s||[];(0,i.useEffect)(()=>{let e,r;return K||Y?(W(!0),D(1)):(W(!1),G()),N||(e=setTimeout(()=>{D(0)},5e3),r=setTimeout(()=>{W(!1),G()},8e3)),()=>{D(0),W(!1),G(),clearTimeout(e),clearTimeout(r)}},[K,Y,N]);let $="whiteboard"===v;(0,i.useEffect)(()=>{if($&&K&&!T)for(let e of h.keys()){let r=h.get(e);r&&function(e,r){var n;let a=e.toLocaleLowerCase(),i=!(1===(n=a.charAt(a.length-r.length-1)).length&&/[A-Za-z]/.test(n));return a.endsWith(r)&&i}(K,e)&&x(r)}},[K,T,$]);let j=i.useRef(null);(0,i.useEffect)(()=>{if(j.current&&j.current.innerText===K){let e=c.sn.tryStop(`view_cursor_chat_message_${I}_${K}`);e&&c.Vq.add("view_cursor_chat_message",e)}},[K,j,I]);let z=(0,u.kc)().cursor_bot&&b&&n===o.z7E.DEFAULT,q=n===o.z7E.PEN,Z=i.createElement("div",{className:l()({[M.iU]:H,[M.VW]:!H,[M.S8]:R&&!q,[M.z8]:z}),style:{color:k}},i.createElement("div",{className:H?M.bu:M.iY,style:{opacity:H?k===d.e3?.8:.5:1},dir:"auto"},e),H&&i.createElement("div",{className:M.Lo,style:{opacity:k===d.YN?.8*P:P,boxShadow:$?void 0:`2px 4px 8px ${r}40`},dir:"auto"},Y&&i.createElement("div",{className:Y.length>0&&(K?.length??0)>0?M.vD:""},Y),K&&i.createElement("div",{ref:j},K)),i.createElement("div",{className:`${M.hD} ${a[F]}`,style:"NONE"!==F?{background:r,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:r},onAnimationEnd:()=>G()}));return g?null:i.createElement("div",{className:M.Dy,style:{opacity:O?0:1},"data-testid":`multiplayer-cursor-${I}`},i.createElement("div",{className:M.or},w?i.createElement(i.Fragment,null,i.createElement("div",{className:M.p},i.createElement(V,{color:r,isHighFiveHandOut:_,temporarilyHide:f,isCursorHandOnRight:y})),i.createElement("img",{className:l()({[M.u0]:!0,[M.Bj]:!0,[M.DE]:_,[M.z8]:z}),src:U(r,_?o.z7E.DEFAULT:n,R),alt:`${_?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=B(r,R)}})):i.createElement("img",{className:l()({[M.u0]:!0,[M.z8]:z}),src:U(r,n,R),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=B(r,R)}}),I&&i.createElement(E.o,{sessionId:I})),(A||$)&&!S?i.createElement(C,{content:K||""},Z):Z)}),z=i.memo(function({isCursorAndChatAreaOffscreen:e,x:r,y:n,children:a}){let o={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${r}px, ${n}px, 0)`};return i.createElement("div",{style:o},a)}),q=(e,r,n)=>{let a=React.useRef(null);a.current=e?.sessionId??a.current,useEffect(()=>{a.current&&n&&cursorChatTracker?.setOtherUserChattingState(a.current,r)},[n,r]),useEffect(()=>(a.current&&cursorChatTracker?.setOtherUserChattingState(a.current,!1),()=>{a.current&&cursorChatTracker?.setOtherUserChattingState(a.current,!1)}),[])}},594117:(e,r,n)=>{n.d(r,{O:()=>o}),n(411855),n(188507);var a=n(991458),i=(n(666308),n(563192),n(612724),n(76265),n(225371),n(834240),n(863599),n(343373),n(509343),n(859877),n(76237),n(839439),n(991944),n(488527));n(858740);let o="nudge-amount";(0,a.hG)(i.md8)},456809:(e,r,n)=>{n.d(r,{Bf:()=>tp,UB:()=>t_,xH:()=>th});var a,i=n(411855),o=n(188507),s=n(846288),l=n(992453),c=n(492153),d=n(221220),u=n(423897),m=n(48589),p=n(964687),h=n(668311),_=n(851395),g=n(748790),f=n(547006),E=n(677485),y=n(130823),b=n(829692),v=n(41748),T=n(955544),I=n(820503),S=n(279445),w=n(765617),A=n(196398),C=n(829617),N=n(90812),L=n(869853),O=n(261442),R=n(675196),P=n(807672),D=n(509728),k=n(347516),M=n(231403),F=n(796756),x=n(64778),U=n(351760),B=n(622984),V=n(442148),G=n(469336),H=n(42460),W=n(667324),K=n(673254),Y=n(134879),$=n(800187),j=n(145899),z=n(520172),q=n(625439),Z=n(440842),X=n(28542),J=n(47644),Q=n(772993),ee=n(580288),et=n(805014),er=n(717180),en=n(245954),ea=n(629019),ei=n.n(ea),eo=n(841962),es=n(581751),el=n(866415),ec=n(693565),ed=n(238795),eu=n(76265),em=n(673081),ep=n(434992),eh=n(797187),e_=n(688656),eg=n(742342),ef=n(261734),eE=n(943093),ey=n(806565),eb=n(786062),ev=n(983755),eT=n(459476),eI=n(608974),eS=n(107018),ew=n(877424),eA=n(479641),eC=n(404754),eN=n(608026),eL=n(233891),eO=n(464300),eR=n(763634),eP=n(411485),eD=n(954037),ek=n(116198),eM=n(443043),eF=n(77499),ex=n(462725),eU=n(968109),eB=n(498902),eV=n(251232),eG=n(21458),eH=n(181033),eW=n(404605),eK=n(912109),eY=n(882354),e$=n(436902),ej=n(416014),ez=n(813601),eq=n(624204),eZ=n(401127),eX=n(408026),eJ=n(828099),eQ=n(630351),e0=n(554593),e1=n(263699),e2=n(751395),e5=n(994891),e4=n(638894),e7=n(729005),e8=n(772661),e3=n(69688),e6=n(376449),e9=n(348844),te=n(528517),tt=n(596922),tr=n(313888),tn=n(531800),ta=n(691151),ti=n(900952),to=n(142284),ts=n(297447),tl=n(660257),tc=n(353560),td=n(618208);let tu=new es.q(750);function tm(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return e8.A;case"CENTER":return e7.A;case"MAX":return e3.A;default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return e1.A;case"CENTER":return e0.A;case"MAX":return eQ.A;default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return e5.A;case"CENTER":return e2.A;case"MAX":return e4.A;default:(0,s.xb)(e.stackCounterAlignItems)}}return eF.A}(e=>{function r(e){return void 0!==e.objectsPanelThumbnailId}function n(e,n,a,o){let z={src:ej.A,tooltip:""};if(!e)return z;let q=e.type;switch((0,er.GI)(e)&&(q="STAMP"),q){case"BOOLEAN_OPERATION":switch(e.booleanOperation){case"UNION":return{src:a?i.createElement(E.C,null):eO.A,tooltip:(0,eu.t)("layer_icon.tooltip.union")};case"INTERSECT":return{src:a?i.createElement(y.q,null):eN.A,tooltip:(0,eu.t)("layer_icon.tooltip.intersect")};case"SUBTRACT":return{src:a?i.createElement(b.j,null):eL.A,tooltip:(0,eu.t)("layer_icon.tooltip.subtract")};case"XOR":return{src:a?i.createElement(v.p,null):eR.A,tooltip:(0,eu.t)("layer_icon.tooltip.exclude")};default:return z}case"VECTOR":return{src:a?i.createElement(T.g,null):tl.A,tooltip:(0,eu.t)("layer_icon.tooltip.vector")};case"STAR":return{src:a?i.createElement(I.j,null):e9.A,tooltip:(0,eu.t)("layer_icon.tooltip.star")};case"LINE":return{src:a?i.createElement(S.z,null):eG.A,tooltip:(0,eu.t)("layer_icon.tooltip.line")};case"ELLIPSE":return{src:a?i.createElement(w.H,null):ek.A,tooltip:(0,eu.t)("layer_icon.tooltip.ellipse")};case"RECTANGLE":case"ROUNDED_RECTANGLE":return{src:a?i.createElement(A.M,null):ej.A,tooltip:(0,eu.t)("layer_icon.tooltip.rectangle")};case"REGULAR_POLYGON":return{src:a?i.createElement(C.X,null):e$.A,tooltip:(0,eu.t)("layer_icon.tooltip.polygon")};case"TEXT":return{src:a?i.createElement(N.I,null):to.A,tooltip:(0,eu.t)("layer_icon.tooltip.text")};case"SLICE":return{src:a?i.createElement(L.z,null):eX.A,tooltip:(0,eu.t)("layer_icon.tooltip.slice")};case"TRANSFORM":return{src:a?i.createElement(O.$,null):ex.A,tooltip:(0,eu.t)("layer_icon.tooltip.transform")};case"GROUP":case"FRAME":if((0,ey.oz)()&&r(e)&&e.parentNode?.isResponsiveSet)return{src:(0,eE.l)(e.size.x),tooltip:(0,eu.t)("layer_icon.tooltip.layout")};if(e.isStateGroup)return{src:a?i.createElement(R.k,null):tr.A,tooltip:(0,eu.t)("layer_icon.tooltip.component")};if((0,eb.R)(e))return{src:a?function(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return i.createElement(l.d,null);case"CENTER":return i.createElement(c.B,null);case"MAX":return i.createElement(d.E,null);default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return i.createElement(u.J,null);case"CENTER":return i.createElement(m.P,null);case"MAX":return i.createElement(p.n,null);default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return i.createElement(h.D,null);case"CENTER":return i.createElement(_.h,null);case"MAX":return i.createElement(g.A,null);default:(0,s.xb)(e.stackCounterAlignItems)}}return i.createElement(f.q,null)}(e):tm(e),tooltip:(0,eu.t)("layer_icon.tooltip.auto_layout")};if(e.resizeToFit)return{src:a?i.createElement(P.g,null):ex.A,tooltip:(0,eu.t)("layer_icon.tooltip.group")};else return{src:a?i.createElement(f.q,null):eF.A,tooltip:(0,eu.t)("layer_icon.tooltip.frame")};case"RESPONSIVE_SET":if((0,ey.oz)())return{src:o===eg.g$.Webpage?i.createElement(D.A,null):i.createElement(k.t,null),tooltip:(0,eu.t)("layer_icon.tooltip.webpage")};return{src:a?i.createElement(f.q,null):eF.A,tooltip:(0,eu.t)("layer_icon.tooltip.frame")};case"CODE_COMPONENT":if((0,ey.oz)())return{src:i.createElement(R.k,null),tooltip:(0,eu.t)("layer_icon.tooltip.code_component")};return{src:eF.A,tooltip:(0,eu.t)("layer_icon.tooltip.component")};case"CODE_INSTANCE":if((0,ey.oz)())return{src:i.createElement(M.X,null),tooltip:(0,eu.t)("layer_icon.tooltip.code_instance")};return{src:eF.A,tooltip:(0,eu.t)("layer_icon.tooltip.component")};case"CODE_LAYER":if((0,ey.oz)())return{src:i.createElement(M.X,null),tooltip:(0,eu.t)("layer_icon.tooltip.code_layer")};return{src:eF.A,tooltip:(0,eu.t)("layer_icon.tooltip.component")};case"CODE_LIBRARY":if((0,ey.oz)())return{src:i.createElement(F.O,null),tooltip:(0,eu.t)("layer_icon.tooltip.code_library")};return{src:eF.A,tooltip:(0,eu.t)("layer_icon.tooltip.component")};case"CODE_FILE":if((0,ey.oz)())return{src:i.createElement(F.O,null),tooltip:(0,eu.t)("layer_icon.tooltip.code_file")};return{src:eF.A,tooltip:(0,eu.t)("layer_icon.tooltip.component")};case"MODULE":return{src:ta.A,tooltip:(0,eu.t)("layer_icon.tooltip.module")};case"CODE_BLOCK":return{src:i.createElement(ec.B,{svg:eP.A,autosize:!0,style:{fill:"var(--color-icon)"}}),tooltip:(0,eu.t)("layer_icon.tooltip.code_block")};case"SYMBOL":if((0,eo.kc)().dse_templates_proto&&r(e)&&e.isTemplate)return{src:ta.A,tooltip:(0,eu.t)("layer_icon.tooltip.template")};if(r(e)&&e.isState||n?.isStateGroup)return{src:a?i.createElement(x.y,null):tn.A,tooltip:(0,eu.t)("layer_icon.tooltip.variant")};return{src:a?i.createElement(R.k,null):tr.A,tooltip:(0,eu.t)("layer_icon.tooltip.component")};case"INSTANCE":return{src:a?i.createElement(U.m,null):eU.A,tooltip:(0,eu.t)("layer_icon.tooltip.instance")};case"STICKY":return{src:a?i.createElement(B.a,null):te.A,tooltip:(0,eu.t)("layer_icon.tooltip.sticky")};case"SHAPE_WITH_TEXT":return{src:a?i.createElement(V.T,null):eq.A,tooltip:(0,eu.t)("layer_icon.tooltip.shape_with_text")};case"CONNECTOR":return{src:a?i.createElement(G.y,null):eD.A,tooltip:(0,eu.t)("layer_icon.tooltip.connector")};case"STAMP":return{src:a?i.createElement(H.w,null):e6.A,tooltip:(0,eu.t)("layer_icon.tooltip.stamp")};case"SECTION":return{src:a?i.createElement(W.e,null):ez.A,tooltip:(0,eu.t)("layer_icon.tooltip.section")};case"WIDGET":{let r=e.guid?(0,en.UN)().get(e.guid.toString()):null;if(r&&"EMBED_WIDGET"===r.widgetId)return{src:a?i.createElement(K.G,null):eM.A,tooltip:(0,eu.t)("layer_icon.tooltip.embed")};if(r&&"LINK_PREVIEW_WIDGET"===r.widgetId)return{src:a?i.createElement(Y.N,null):eH.A,tooltip:(0,eu.t)("layer_icon.tooltip.link_preview")};return{src:a?i.createElement($.h,null):tc.A,tooltip:(0,eu.t)("layer_icon.tooltip.widget")}}case"CANVAS":return{src:eK.A,tooltip:(0,eu.t)("layer_icon.tooltip.canvas")};case"TABLE":return{src:a?i.createElement(j.r,null):ti.A,tooltip:(0,eu.t)("layer_icon.tooltip.table")};case"SLIDE":return{src:eJ.A,tooltip:(0,eu.t)("layer_icon.tooltip.slide")}}return z}function a(e){let r=(0,el.xx)((e,r)=>{let n;return(n=tu.get(e))&&n.thumbnailId===r||(n={thumbnailId:r,svg:ep.NO(e)},tu.set(e,n)),n.svg}),{guid:n,node:a,isMenuIcon:o,isMenuIconPurple:s,className:l,editModeType:c,detachedInfo:d,disabled:u,locked:m,hovered:p,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f,panelType:E,isCodeConnected:y,ignoreAbsolutePositionIcon:b}=e,v=a?r(n,a.objectsPanelThumbnailId):"",T=a?.hasEnabledAnimatedPaint,I=a?.hasEnabledVideoPaint;return i.createElement(eQ,{className:l,node:a,ignoreAbsolutePositionIcon:b,isMenuIcon:o,isMenuIconPurple:s,thumbnailSrc:v,onDoubleClick:()=>{e.node&&(e.navigateAndPanTo?e.navigateAndPanTo(e.node.guid):et.glU.panToNode(e.node.guid,!1))},animated:T||I,staticImage:a?.hasEnabledStaticImagePaint,editModeType:c,detachedInfo:d,isDefaultResponsiveSet:e.isDefaultResponsiveSet,disabled:u,locked:m,hovered:p,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f,panelType:E,isCodeConnected:y})}e.LayerIcon=a,a.displayName="LayerIcon";let ea=e=>e.mirror.sceneGraph;e.ConnectedLayerIcon=function(e){let r=(0,o.d4)(ea),n=et.Ez5.autoLayoutState(),s=(0,eh.J2)(n.temporaryAbsolutePositionDuringDragStateGuids);return i.createElement(a,{...e,node:r.get(e.guid)||null,ignoreAbsolutePositionIcon:s.has(e.guid)})};class es extends i.PureComponent{getAllPaints(e){return[...e.fillPaints||[],...e.strokePaints||[],...e.backgroundPaints||[]]}renderBaseIcon(){let{node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:a,className:o,disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:m,useUI3Icon:p}=this.props;return i.createElement(eQ,{className:o,node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:a,animated:this.hasEnabledAnimatedPaintNodeChange(e),staticImage:this.hasEnabledStaticPaintNodeChange(e),disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:m,useUI3Icon:p})}renderVariableIcon(){let{variableResolvedType:e}=this.props.node;return null==e?this.renderBaseIcon():i.createElement(ef.i,{type:e})}renderVariableCollectionIcon(){return i.createElement(ec.B,{svg:td.A,className:this.props.className,autosize:!0})}renderStyleIcon(){let{node:e,className:r}=this.props;switch(e.styleType){case"GRID":let n=(0,em.s$)(e);return i.createElement(ec.B,{svg:n,className:r,autosize:!0,width:"10px"});case"FILL":return i.createElement(ec.B,{svg:eS.A,className:r});case"EFFECT":return i.createElement(ec.B,{svg:eI.A,className:r});case"TEXT":return i.createElement(ec.B,{svg:ew.A,className:r});default:return this.renderBaseIcon()}}hasEnabledAnimatedPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.animatedImage)return!0;return!1}hasEnabledStaticPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.image)return!0;return!1}render(){let{node:e,className:r}=this.props;return e.styleType?this.renderStyleIcon():"VARIABLE"===e.type?this.renderVariableIcon():"VARIABLE_SET"===e.type?this.renderVariableCollectionIcon():"CANVAS"===e.type?i.createElement(ec.B,{svg:eA.A,className:r}):this.renderBaseIcon()}}e.NodeChangeIcon=es;class eQ extends i.PureComponent{render(){let e,r;let{node:a,parentNode:o,animated:s,staticImage:l,thumbnailSrc:c,isMenuIcon:d,isMenuIconPurple:u,onDoubleClick:m,editModeType:p,detachedInfo:h,outOfView:_,horizontalScrollEnabled:g,panelType:f}=this.props;if(!a)return null;let E=ev.V3;c&&(E=ev.W5),d&&(E=u?ev.aN:ev.TK);let y=!1,b="";this.props.isDefaultResponsiveSet?(e=f===eg.g$.Webpage?i.createElement(z.Q,null):i.createElement(k.t,null),b=(0,eu.t)("layer_icon.tooltip.home")):a.mask?(e=this.props.useUI3Icon?i.createElement(q.d,null):eW.A,b=(0,eu.t)("layer_icon.tooltip.mask")):(s||l)&&(0,er.oY)(a.type)&&!(0,er.GI)(a)?s?(e=this.props.useUI3Icon?i.createElement(Z._,null):eB.A,b=(0,eu.t)("layer_icon.tooltip.video")):(e=this.props.useUI3Icon?i.createElement(X._,null):eV.A,b=(0,eu.t)("layer_icon.tooltip.image")):c?(e=(0,ec.V)(c),b=n(a,o).tooltip):p===et.m1T.DEV_HANDOFF&&h?.status==="loaded"&&"SYMBOL"!==a.type&&"INSTANCE"!==a.type?(e=this.props.useUI3Icon?i.createElement(J.o,null):eT.A,y=!0):this.props.isCodeConnected?(e=i.createElement(Q.s,null),b=(0,eu.t)("layer_icon.tooltip.code_connect")):({src:e,tooltip:b}=n(a,o,this.props.useUI3Icon,f),r=function(e){if(e)switch(e.type){case"TEXT":return ts.A;case"STICKY":return tt.A;case"SHAPE_WITH_TEXT":return eZ.A;case"FRAME":if((0,eb.R)(e))return tm(e);break;case"CANVAS":return eY.A}}(a));let v=!y&&"ABSOLUTE"===a.stackPositioning&&!1===this.props.ignoreAbsolutePositionIcon&&(this.props.useUI3Icon?i.createElement(ee.I,{className:ev.E7}):i.createElement(ec.B,{className:ev.E7,svg:eC.A}));return i.createElement("span",{className:ei()(this.props.className||E,ev.P0,{[ev.EA]:g,[ev.EU]:g&&_}),onDoubleClick:m,"data-tooltip":b||null,"data-tooltip-show-above":!0,"data-tooltip-type":e_.Ib.TEXT},"string"==typeof e?i.createElement(ed.t,{svg:e,fallbackSvg:r}):i.createElement("span",{style:{stroke:"none",fill:"none"}},e),v)}}})(a||(a={}));let tp=a.ConnectedLayerIcon,th=a.LayerIcon,t_=a.NodeChangeIcon},377190:(e,r,n)=>{var a=n(991458),i=n(729753),o=n(488527);(0,a.hG)(o.Nqv),(0,a.hG)(i.H)},786062:(e,r,n)=>{function a(e){let r=e.stackMode;return"HORIZONTAL"===r||"VERTICAL"===r}n.d(r,{R:()=>a}),n(411855)},742342:(e,r,n)=>{n.d(r,{g$:()=>s}),n(411855),n(188507),n(424557),n(805014);var a=n(717180);n(245954),n(841962),n(875877);var i=n(866415);n(744615);var o=n(753392);n(377190),n(994955);var s=(e=>(e.Object="OBJECT",e.Webpage="WEBPAGE",e.CodeComponent="CODE_COMPONENT",e))(s||{});(0,i.xx)((e,r)=>{let n=1/0;return(0,o.YI)(e,r,r=>{r&&(n=Math.min(n,(0,a.F0)(e,r.guid)))}),n===1/0&&(n=0),n})},390518:(e,r,n)=>{n(424557),n(805014),n(717180),n(841962),n(563192),n(293800),n(753392),n(198136),n(377190),n(182032)},994955:(e,r,n)=>{(0,n(411855).createContext)(null)},16920:(e,r,n)=>{n.d(r,{N:()=>g});var a=n(411855),i=n(520244),o=n(991458),s=n(152420),l=n(737992),c=n(621847),d=n(76265),u=n(225371);n(972311);var m=n(758268),p=n(991944),h=n(488527),_=n(986415);(0,o.hG)(h.oVP);class g extends a.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(m.vA.NEVER)},this.onClickOpenInApp=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(this.state.alwaysChecked?m.vA.ALWAYS:m.vA.NEVER),(0,s.Sr)(location.href,s.B3.OPEN_IN_DESKTOP_MODAL)},this.onClickAlwaysOpenDesktopApp=()=>{this.setState({alwaysChecked:!this.state.alwaysChecked})},this.state={alwaysChecked:(0,l.vn)()!==m.vA.NEVER}}static shouldShowOnce(){return(0,l._p)()&&void 0===(0,l.vn)()}static shouldAutoOpen(){return(0,l._p)()&&(0,l.vn)()===m.vA.ALWAYS}static toggleAutoOpen(){let e=(0,l.vn)()===m.vA.ALWAYS;(0,l.hW)(e?m.vA.NEVER:m.vA.ALWAYS)}static isAutoOpenEnabled(){return(0,l.vn)()===m.vA.ALWAYS}static enableAutoOpen(){(0,l.hW)(m.vA.ALWAYS)}static disableAutoOpenIfUnset(){void 0===(0,l.vn)()&&(0,l.hW)(m.vA.NEVER)}render(){return a.createElement(p.vx,{initialPosition:this.props.initialPosition,title:(0,d.t)("desktop_open_views.open_in_desktop_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},a.createElement("div",{className:_.k},a.createElement("div",{className:_.K},a.createElement(c.tB,{id:"always-open-desktop-app",checked:this.state.alwaysChecked,onClick:this.onClickAlwaysOpenDesktopApp}),a.createElement(c.JU,{htmlFor:"always-open-desktop-app"},(0,d.tx)("desktop_open_views.open_in_desktop_modal.always_open_in_app_checkbox"))),a.createElement("div",{className:_.K},a.createElement(i.$n,{variant:"secondary",onClick:this.onClose},(0,d.tx)("desktop_open_views.modal.dismiss_button")),a.createElement(i.$n,{variant:"primary",onClick:this.onClickOpenInApp},(0,d.tx)("desktop_open_views.open_in_desktop_modal.open_in_app_button")))))}}g.displayName="OpenDesktopAppModal"},384535:(e,r,n)=>{n.d(r,{VS:()=>_});var a=n(411855),i=n(188507),o=n(805014);n(629019);var s=n(254773);n(634783),n(336427),n(875877),n(863297),n(21428),n(178035),n(292689),n(343373),n(569161),n(509343);var l=n(446820),c=n(737976),d=n(212507),u=n(73424);n(176160);var m=n(926996);n(314540),n(797187),n(217950),n(728722),n(977235),n(736942),n(550479);var p=n(338584);n(299009),n(884455),n(933781),n(76265),n(183739),n(84530),n(369565),p.record(p.object({thumbnail_url:p.string(),thumbnail_meta:p.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:p.string().optional()})),n(605717),n(666308),n(366172),n(963993),n(846836);var h=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(h||{});function _({pagesList:e,isComparingChanges:r,enabled:n=!0}){let p=(0,c.Z)("page_change_navigator_navigate"),h=(0,l.E)(),_=(0,s.U)(),g=(0,i.wA)(),f=(0,m._6)(),E=(0,d.dh)(n),y=(0,i.d4)(e=>e.versionHistory);return(0,a.useCallback)(async a=>{n&&await (0,d.$P)(a,E,y,g,(0,u.Fy)(e,a)===o.xal.LOADED,_,p,h,r,f)},[e,p,h,_,g,f,E,y,r,n])}n(930016),n(851169)},369565:(e,r,n)=>{n.d(r,{l7:()=>d});var a=n(245954),i=n(875877),o=n(863297),s=n(473982);(0,s.Wh)(()=>(0,i.atom)([]));let l=(0,s.Wh)(()=>(0,i.atom)(null));(0,s.Wh)(()=>(0,i.atom)(o.r.INIT));let c=(0,s.Wh)(()=>(0,i.atom)(null)),d=(0,i.atom)(e=>e(c),(e,r,n)=>{let i=e(c),o="function"==typeof n?n(i):n;if(i!==o){if(r(c,o),o){let e=(0,a.UN)().get(o);r(l,e?.name||"")}else r(l,null)}})},605717:(e,r,n)=>{n(411855),n(188507),n(805014),n(629019),n(841962),n(875877),n(563192),n(693565),n(76265),n(553362),n(250450),n(499573),n(73041),n(343373),n(212507),n(407498),n(73424),n(797187),n(289765),n(688656),n(946280),n(666308),n(19776),n(76237),n(574805)},127014:(e,r,n)=>{n(411855),n(188507),n(805014),n(777535),n(225371),n(176160),n(971158)},930016:(e,r,n)=>{n(411855),n(188507),n(805014),n(245954),n(254773),n(875877),n(677840),n(250450),n(569161),n(212507),n(73424),n(176160),n(654224),n(369565)},752008:(e,r,n)=>{n.d(r,{v:()=>b});var a=n(411855),i=n(109388),o=n(775541),s=n(805014),l=n(789022),c=n(36748),d=n(143982),u=n(910164),m=n(138053),p=n(488527),h=n(218367);let _=[{label:"Time between frames (ms)",id:"inter-frame-time",max:100,barWidth:1},{label:"React work (ms)",id:"react",max:100,barWidth:1},{label:"Frame handler (ms)",id:"frame",max:100,barWidth:1,children:[{label:"Scene render (ms)",id:"scene-render",max:100,barWidth:1,children:[{label:"Render tree creation (ms)",id:"render-tree-generation",max:100,barWidth:1}]},{label:"React + redux (ms)",id:"react-render",max:100,barWidth:1},{label:"Symbol updater (ms)",id:"symbol-updater",max:100,barWidth:1},{label:"Style updater (ms)",id:"style-updater",max:100,barWidth:1},{label:"Comments renderer (ms)",id:"comments-render",max:100,barWidth:1}]},{label:"C++ event handling (ms)",id:"fullscreen-handle-event",max:100,barWidth:1},{label:"malloc call count (#)",id:"cpp-malloc-call-count",autoResize:!0,max:100,barWidth:1},{label:"malloc size totals (KB)",id:"cpp-malloc-size-totals",autoResize:!0,max:1,barWidth:1},{label:"Used JS memory (MB)",id:"total-memory",max:10,autoResize:!0,barWidth:1},{label:"Used c++ heap memory (MB)",id:"cpp-heap-memory",max:10,autoResize:!0,barWidth:1},{label:"Render job queue length",id:"render-job-queue-length",max:4,autoResize:!0,barWidth:1},{label:"Time between render tree swaps (ms)",id:"render-tree-swap-time",max:300,autoResize:!0,barWidth:1},{label:"Stale content time (ms)",id:"render-tree-stale-time",max:500,autoResize:!0,barWidth:1},{label:"Est viewport coverage (ms)",id:"estimated-viewport-coverage",max:1,autoResize:!0,barWidth:1},{label:"Min viewport sharpness",id:"min-sharpness",max:1,autoResize:!0,barWidth:1},{label:"Avg viewport sharpness",id:"avg-sharpness",max:1,autoResize:!0,barWidth:1}];function g(e,r){var n=e.getBoundingClientRect();e.width=n.width*r,e.height=n.height*r,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`;let a=e.getContext("2d");a&&(a.scale(r,r),a.imageSmoothingEnabled=!1)}class f extends a.PureComponent{constructor(e){super(e),this.ctx=null,this.lastDisplayedUpdateTime=0,this.displayedNumber=null,this.buffer=[],this.dpr=1,this.canvasRef=a.createRef(),this.lastRenderedHitCount=0,this.updateFromTimer=e=>{let r=e.hitCount-this.lastRenderedHitCount,n=0;for(let a=Math.max(0,e.elapsedTimes.length-r);a<e.elapsedTimes.length;a++)n+=e.elapsedTimes[a];this.append(n),this.lastRenderedHitCount=e.hitCount},this.yAxisMaxValue=e.max,this.bufferCapacity=Math.ceil(e.width/e.barWidth)}componentDidMount(){if(this.canvasRef.current){this.dpr=window.devicePixelRatio;let e=this.canvasRef.current;this.ctx=e.getContext("2d"),g(e,this.dpr)}}append(e){if(!this.ctx)return;let r=this.ctx.canvas,n=this.ctx;for(this.dpr!==window.devicePixelRatio&&(this.dpr=window.devicePixelRatio,g(r,this.dpr)),this.buffer.push(e);this.buffer.length>=this.bufferCapacity;)this.buffer.shift();let a=1/0,i=-1/0;for(let e of this.buffer)a=Math.min(a,e),i=Math.max(i,e);let o=this.props.width,s=this.props.height,l=this.props.barWidth,c=s-20;n.font="9px monospace",n.fillStyle=this.props.bg,n.textBaseline="top",n.fillRect(0,0,o,20),n.fillStyle=this.props.fg;let d=performance.now();if((null===this.displayedNumber||d-this.lastDisplayedUpdateTime>150)&&(this.displayedNumber=e,this.lastDisplayedUpdateTime=d),n.fillText(`sample: ${this.displayedNumber.toFixed(1)}`,0,0),n.fillText(`${a.toFixed(1)} - ${i.toFixed(1)}`,0,10),n.fillStyle=this.props.bg,this.props.autoResize){if(e>this.yAxisMaxValue){let a=Math.pow(2,Math.ceil(Math.log2(e/this.yAxisMaxValue)));this.yAxisMaxValue*=a,n.fillRect(0,s-c,o,(a-1)*c/a),n.drawImage(r,0,(s-c)*this.dpr,o*this.dpr,c*this.dpr,0,s-c/a,o,c/a)}else if(this.yAxisMaxValue>2*Math.max(this.props.max,i)){let e=Math.pow(2,Math.ceil(Math.log2(this.yAxisMaxValue/Math.max(this.props.max,i))));this.yAxisMaxValue/=e,n.drawImage(r,0,(s-c/e)*this.dpr,o*this.dpr,c/e*this.dpr,0,s-c,o,c)}}n.drawImage(r,l*this.dpr,(s-c)*this.dpr,(o-l)*this.dpr,c*this.dpr,0,s-c,o-l,c);let u=Math.floor(c*Math.min(1,e/this.yAxisMaxValue));n.fillRect(o-l,s-c,l,c),n.fillStyle=this.props.fg,n.fillRect(o-l,s-u,l,u)}render(){return a.createElement("canvas",{className:h.wP,ref:this.canvasRef,width:this.props.width,height:this.props.height})}}f.displayName="Sparkline";class E extends a.PureComponent{constructor(e){super(e),this.sparklines=new Map,this.lastFrameTime=null,this.tsmerMetrics=new d.s,this.updateTimers=()=>{if(this.tsmerMetrics.onFrame(),null==this.lastFrameTime)this.lastFrameTime=performance.now();else{let e=performance.now(),r=this.sparklines.get("inter-frame-time");r&&(r.append(e-this.lastFrameTime),this.lastFrameTime=e)}let e=this.sparklines.get("total-memory");e&&e.append(((0,m.aW)()??0)/1048576);let r=this.sparklines.get("cpp-heap-memory");r&&r.append(s.hMR.getTotalUsedHeapMemory()/1048576);let n=this.sparklines.get("cpp-malloc-call-count");n&&n.append(s.hMR.getAllocCallCount());let a=this.sparklines.get("cpp-malloc-size-totals");a&&a.append(s.hMR.getAllocTotal()/1024),s.hMR.resetAllocCountsAndTotal();let i=this.sparklines.get("render-job-queue-length");i&&i.append(s.CeL.getRendererJobQueueLength());let o=this.sparklines.get("render-tree-swap-time");o&&o.append(this.tsmerMetrics.lastEditFrameTime());let c=this.sparklines.get("render-tree-stale-time");c&&c.append(this.tsmerMetrics.lastFrameStaleness());let d=this.sparklines.get("estimated-viewport-coverage");d&&d.append(s.glU.estimatedViewportRenderCoverage(s.pWM.DEFINITELY_COVERED_ONLY));let u=this.sparklines.get("min-sharpness");u&&u.append(s.glU.minViewportSharpness());let p=this.sparklines.get("avg-sharpness");p&&p.append(s.glU.avgViewportSharpness());let h=l.rH.report(),_=[],g=e=>{_.push(e.name);let r=this.sparklines.get(_.join(","));for(let n of(r&&r.updateFromTimer(e),e.children))g(n);_.pop()};for(let e of h)g(e);requestAnimationFrame(this.updateTimers)},this.sparklineRef=e=>r=>{r&&this.sparklines.set(e.join(","),r)},this.frameRequest=null,this.renderHUDNode=(e,r=[])=>{let n=r.concat([e.id]),i=150-10*r.length,o=u.sx.add({color:"black"}).$.color,s=u.sx.add({backgroundColor:"white"}).$.backgroundColor,l=!!(this.state?.nodesHiddenState??{})[e.id];return a.createElement("div",{key:e.id},a.createElement("div",{className:h.n5},a.createElement("div",null,a.createElement("div",null,a.createElement("button",{style:{backgroundColor:"gray",display:"inline-block",marginRight:"2px"},onClick:()=>{this.toggleNodeHidden(e.id)}},l?"(+)":"(-)"),e.label),!l&&a.createElement(f,{ref:this.sparklineRef(n),fg:o,bg:s,barWidth:e.barWidth,max:e.max,height:40,autoResize:!!e.autoResize,width:i}))),e.children&&!l&&a.createElement("div",{className:h.Q3},e.children.map(e=>this.renderHUDNode(e,n))))},this.state={nodesHiddenState:{react:!0,frame:!0,"fullscreen-handle-event":!0,"cpp-malloc-call-count":!0,"cpp-malloc-size-totals":!0,"total-memory":!0,"cpp-heap-memory":!0,"render-job-queue-length":!0,"render-tree-swap-time":!0,"render-tree-stale-time":!0,"estimated-viewport-coverage":!0,"min-sharpness":!0,"avg-sharpness":!0}}}componentDidMount(){this.frameRequest=requestAnimationFrame(this.updateTimers)}componentWillUnmount(){this.frameRequest&&cancelAnimationFrame(this.frameRequest)}toggleNodeHidden(e){let r=this.state?.nodesHiddenState??{},n=!!r[e];this.setState({nodesHiddenState:{...r,[e]:!n}})}render(){let e=this.props.isFigjamFile?0:parseInt(p.uj0,10)+5,r=(0,c.bG)()+5;return a.createElement("div",{className:h.vY,style:{right:e,top:r}},_.map(e=>this.renderHUDNode(e)))}}E.displayName="PerfHUD";let y=null;function b(e){y?(i.unmountComponentAtNode(y),document.body.removeChild(y),y=null):(y=document.createElement("div"),document.body.appendChild(y),(0,o.H)(y).render(a.createElement(E,{isFigjamFile:e})))}},683882:(e,r,n)=>{n.d(r,{qg:()=>i,r5:()=>a}),n(411855),n(754807),n(366172),n(965636),n(620552),n(756044);let a=["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","LINEAR_BURN","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","LINEAR_DODGE","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"];function i(e,r){return e===r}["PASS_THROUGH"].concat(a)},200047:(e,r,n)=>{n.d(r,{U:()=>d});var a=n(411855),i=n(666308),o=n(440475),s=n(427494),l=n(273439),c=n(260402);function d(e){let r=a.useRef(null);(0,s.f4)(()=>{let e=window.getSelection();if(!e)return;let n=e.focusNode;for(;n;){if(n===r.current){e.removeAllRanges();break}n=n.parentNode}});let n=(0,o.k)(),d=e.flowPanel??null,u=e.localStylesPanel??null;return n?null:a.createElement("div",{ref:r,onKeyDown:e=>{if((0,i.Fo)(e)&&e.keyCode===i.Uz.A){let r=window.getSelection();if(r){let n=document.createRange();n.selectNodeContents(e.currentTarget),r.removeAllRanges(),r.addRange(n),e.preventDefault()}}},className:c.z},d,u,a.createElement(l.m,null))}},337707:(e,r,n)=>{n.d(r,{Af:()=>e_,DP:()=>eo,On:()=>ee,Qn:()=>eE,ZN:()=>ep,_z:()=>X,aj:()=>Z,bm:()=>es,nu:()=>em,x5:()=>eh});var a=n(411855),i=n(188507),o=n(511445),s=n(217950),l=n(351966),c=n(805014),d=n(629019),u=n.n(d),m=n(11955),p=n(550479),h=n(693565),_=n(76265),g=n(34671),f=n(209817),E=n(626055),y=n(724009),b=n(340704);n(806556);var v=n(254760),T=n(373247),I=n(509343),S=n(923219),w=n(427494),A=n(827473),C=n(598378),N=n(77383),L=n(404227),O=n(957020),R=n(688656),P=n(738402),D=n(172322),k=n(49761),M=n(171710),F=n(775211),x=n(118157),U=n(878075),B=n(737139),V=n(642870);n(430772);var G=n(742995),H=n(103785),W=n(495118),K=n(219836),Y=n(244728),$=n(701838),j=n(641053);let z=new Set(["SOLID","GRADIENT_ANGULAR","GRADIENT_DIAMOND","GRADIENT_LINEAR","GRADIENT_RADIAL"]),q=new T.ro;function Z(e){let r=eE(),{blendMode:n,onError:i}=e,o=(0,S.gl)(n)||"string"==typeof n;return(n&&!o&&(console.error(TypeError(`Expected mixed | string | undefined, got ${typeof n}`)),i&&i(n),n=void 0),!n||["NORMAL","PASS_THROUGH"].includes(n))?null:r?a.createElement(W._p,{className:$.Om,copyValue:n.toLowerCase(),copyName:"mix-blend-mode"},a.createElement("span",{className:$.mL},(0,_.tx)("inspect_panel.colors.blend_mode",{blendMode:q.format(n)}))):a.createElement(W._p,{indent:e.indent,className:e.className,name:(0,_.t)("inspect_panel.colors.blend"),value:q.format(n),copyName:"mix-blend-mode"})}function X({onClick:e,color:r,value:n,labelRef:i,pillClassName:o,htmlAttributes:s,disableHover:c}){let d=a.createElement(a.Fragment,null,a.createElement(D.J,{color:r,forceNonInteractive:!0}),a.createElement("div",{ref:i,className:$.LK},n)),m=u()($.bE,!c&&$.DQ,o);return e?a.createElement(l.E,{className:m,onClick:e,htmlAttributes:s},d):a.createElement("div",{className:m},d)}function J({paint:e,color:r,valueFormatter:n,matchingVars:i,indent:o,hideBlendMode:l,disableDetailModalEntry:c,onMouseEnter:d,onMouseLeave:m}){let h=(0,I.Ku)(),_={...r,a:r?.a??e.opacity??1},{value:g,copyValue:f}=(0,E.G)(_,h,n),y=(0,W.Cm)(f,"color"),b=a.useCallback(()=>{y?.()},[y]),{ref:v,...T}=(0,k.X)(g),S={...T,onMouseEnter:d,onMouseLeave:m};return a.createElement("div",{className:$.n,"data-testid":"inspectMultilineColorRow"},a.createElement(W._p,{className:u()($.$f,o&&$.zz),disableDetailModalEntry:c,matchingVars:i,copyValue:null},a.createElement(X,{color:_,value:g,onClick:b,labelRef:v,htmlAttributes:S})),!l&&a.createElement(Z,{className:eg(),blendMode:e.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,p.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"RawColorUI3",props:{paint:e}}})}}))}function Q({variable:e,color:r}){return e?.subscriptionStatus==="LOCAL"&&e?.isSoftDeleted?a.createElement("div",{"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,_.t)("variables.variable_was_deleted")},a.createElement(h.B,{className:$.Bx,svg:j.A})):a.createElement(U.P$,null,a.createElement(D.J,{color:r,forceNonInteractive:!0}))}function ee({color:e,variable:r,label:n,onClick:i,shouldStretch:o,selected:s}){let l=!1===s;return a.createElement(U.ss,{styleIcon:a.createElement(Q,{color:e,variable:r}),styleName:n,styleDescription:r?.description,onClick:i,disableHover:l,shouldStretch:o,selected:s,hasFocus:s})}function et({id:e,variable:r,color:n,paint:i,indent:o,hideBlendMode:l,disableDetailModalEntry:c,onMouseEnter:d,onMouseLeave:m}){let h=(0,H.uV)(r)??"",_=(0,W.Cm)(h,"color-variable"),g=a.useCallback(()=>{_?.()},[_]),f={...n,a:n?.a??i.opacity??1};return a.createElement("div",{className:$.n,"data-testid":"inspectMultilineColorRow",onMouseEnter:d,onMouseLeave:m},a.createElement(W._p,{className:u()($.vQ,o&&$.it),variableId:e,disableDetailModalEntry:c,copyValue:null},a.createElement(ee,{color:f,variable:r,label:h,onClick:g})),!l&&a.createElement(Z,{className:eg(),blendMode:i.blendMode,onError:e=>{let n=TypeError(`Expected string | undefined, got ${typeof e}`);console.error(n),(0,p.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof e,value:e,source:"VariableValueUI3",props:{paint:i,variable:r}}})}}))}function er(e){let{isInStyle:r,rows:n}=e;return a.createElement("div",{className:$.n,"data-testid":"inspectMultilineColorRow",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(W.d1,{className:u()({[$.UU]:r},$.y4),label:e.styleName,defaultLabel:e.defaultStyleName,isVariable:e.isVariable,variableId:e.variableId,disableDetailModalEntry:e.disableDetailModalEntry},a.createElement(D.J,{className:$.Gz,paint:e.paint,tooltip:e.description})),a.createElement(Z,{className:eg({isInStyle:r}),indent:!0,blendMode:e.paint.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,p.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"MultiLinePaintValue",props:e}})}}),n)}function en(e){let r=eE(),{format:n}=e,{paint:i,valueFormatter:o}=e.formattableColor,s=(0,V._B)(i),{variable:l,variableDisplayName:c,matchingVars:d}=e.formattableColor.variable??s;if(!i.color)return null;let u={...i.color,a:i.opacity??1},m=l?.id??l?.node_id;if(r)return l?a.createElement(et,{id:m,variable:l,color:u,paint:i,indent:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}):a.createElement(J,{paint:e.formattableColor.paint,color:u,valueFormatter:e.formattableColor.valueFormatter,indent:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry,matchingVars:d,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});if(l){let n=a.createElement(ea,{format:e.format,valueFormatter:o,color:u,isInStyle:e.isInStyle});return a.createElement(er,{paint:i,styleName:c,isVariable:!0,variableId:m,isInStyle:e.isInStyle,rows:r?void 0:n,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave})}let p=(0,Y.q)(u,n,o);return a.createElement(W._p,{className:eg({format:n,isInStyle:e.isInStyle}),copyValue:p.copyValue,matchingVars:d,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(D.J,{className:$.Gz,paint:i}),a.createElement("span",{className:$.As,"data-testid":"inspectColorRow"},p.value),Y.x.has(e.format)&&a.createElement(K.J,{value:u.a}))}function ea(e){let r=(0,Y.q)(e.color,e.format,e.valueFormatter);return a.createElement(W._p,{className:eg({format:e.format,isInGradient:e.isInGradient,isInStyle:e.isInStyle}),copyValue:r.copyValue,variableId:e.variableId,matchingVars:e.matchingVars,disableDetailModalEntry:e.disableDetailModalEntry},a.createElement("div",null),a.createElement("span",{className:$.As},r.value),Y.x.has(e.format)&&a.createElement(K.J,{value:e.color.a,showOpaque:e.alwaysShowOpacity||!1}))}function ei(e){let r=eE(),{encodedPaint:n,paint:i,valueFormatter:o,typeFormatter:s}=e.formattableColor,l=i.stopsVar?.length?i.stopsVar:i.stops,c=a.createElement(a.Fragment,null,l?.map((r,s)=>a.createElement(ef,{paint:i,encodedPaint:n,format:e.format,gradientStop:r,isInStyle:e.isInStyle,key:s,opacity:i.opacity??1,valueFormatter:o,disableDetailModalEntry:e.disableDetailModalEntry})));if(r){let r=i.opacity&&1!==i.opacity?` \xb7 ${(100*i.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:null;return a.createElement("div",{className:$.n,"data-testid":"inspectMultilineColorRow"},a.createElement(W._p,{className:u()($.$f,$.bE,$.Ul),disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(D.J,{paint:i}),(0,_.tx)("inspect_panel.colors.gradient",{gradientType:s(i.type)}),r),a.createElement(Z,{className:eg(),indent:!0,blendMode:i.blendMode}),c)}return a.createElement(er,{paint:i,defaultStyleName:(0,_.t)("inspect_panel.colors.gradient",{gradientType:s(i.type)}),isInStyle:e.isInStyle,rows:c,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave})}function eo(e){let{formattableColor:r}=e;switch(r.paint.type){case"SOLID":return a.createElement(en,{...e});case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return a.createElement(ei,{...e});default:return null}}function es(e){return e.visible&&e.type&&z.has(e.type)}let el=()=>{let e=(0,H.jY)(),r=(0,H.uQ)(),n=(0,b.Q)(),o=(0,g.v4)(),s=(0,P.ks)(),l=(0,i.d4)(e=>(0,L.$u)(e)>1?e.mirror.selectionPaints.paints:e.mirror.selectionPaints.paintsDirectlyOnSingleNode),c=(0,F.Ig)(),d=a.useMemo(()=>l.filter(e=>es(e.paint)).map(e=>(0,F.dc)(e.paint,c)),[l,c]),u=(0,i.d4)(e=>(0,L.$u)(e)>1?e.mirror.selectionPaints.styles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode),m=(0,i.d4)(N.e_),p=a.useMemo(()=>{let r=u.map(e=>({ds:(0,A.Gp)(e.styleKey,e.styleGUIDs,m),name:e.styleName})),n=[];return r.forEach(({ds:r,name:a})=>{if(!r)return;let i=r.kind===O.AT.DANGLING?{...r.value,style_type:"FILL"}:r.value,o=e=>e.filter(es).map(e=>(0,F.dc)(e,c)),s=(0,C.QH)(i);if(s&&"FILL"===s.type)n.push((0,F.rP)(a,r,o(s.fillPaints)));else{let i=e.get(r.value.node_id);i&&n.push((0,F.rP)(a,r,o(i.fills)))}}),n},[u,m,e,c]);return a.useMemo(()=>{let e=[...p,...d];return(0,V.QT)(e,r,n.inspectionMode,o,s)},[p,d,r,n.inspectionMode,o,s])},ec=(e,r)=>e.type===x.q.STYLE?a.createElement(eu,{color:e,format:r.format}):a.createElement(ed,{color:e,format:r.format});function ed(e){return a.createElement(eo,{format:e.format,formattableColor:e.color,disableDetailModalEntry:e.disableDetailModalEntry})}function eu(e){let r=(0,i.wA)(),n=eE(),s=(0,y.Fj)(e.color.dsStyle.value.key),l=e.color.dsStyle.kind,c=e.color.dsStyle.value.node_id,d=a.useMemo(()=>(0,o.s)(()=>{c&&r(v.rb({styleNodeId:c,styleKind:l}))}),[r,l,c]);a.useEffect(d,[d]);let m=e.color.name,p=(0,W.Cm)(m,"color style"),h=a.useCallback(()=>{p?.()},[p]),_=e.color.dsStyle.value;return(l===O.AT.DANGLING&&(_.style_type="FILL",_.node_id=c),n)?a.createElement(W._p,{className:u()($.VB,$.vQ),styleId:e.color.dsStyle.value.key,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(U.ss,{styleIcon:a.createElement(B.zi,{dsStyle:_,disableTooltip:!0}),styleName:e.color.name,styleDescription:s?.description,onClick:h})):a.createElement(a.Fragment,null,a.createElement(W._p,{className:$.VB,copyValue:e.color.name,dataTestId:"styleNameRow",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(B.zi,{dsStyle:_,hideNameInTooltip:!0}),a.createElement(W._p,{className:$.yW,value:e.color.name})),!n&&e.color.paints.map(r=>a.createElement("div",{key:r.encodedPaint,"data-testid":"stylePaintRow"},a.createElement(eo,{format:e.format,formattableColor:r,isInStyle:!0}))))}function em(e){let r=(0,I.Ku)(),n=e.formattableColors,i=a.useMemo(()=>({format:r}),[r]);return a.createElement(W.x0,{limit:5,data:n,renderElement:ec,extras:i})}function ep({hideBorder:e,noPadding:r,isSubsection:n}){let o=eE(),s=(0,P.ks)(),l=(0,H.uQ)(),d=w.eY().get(l??"")?.type,u=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.fillPaints),r=H.Vr()?.type,n=a.useMemo(()=>!e||(0,S.gl)(e)?[]:e,[e]),o=(0,H.pF)(e=>(0,m.b)(e.mirror.selectionProperties,"inheritFillStyleKey")),s=(0,i.d4)(N.e_),l=(0,i.d4)(e=>e.mirror.selectionProperties.inheritFillStyleKey),d=r&&(0,G.Ku)(r),u=(0,F.Ig)(),p=l?(0,A.Gp)(l,[],s):void 0,h=n.filter(es).map(e=>(0,F.dc)(e,u,d||c.j0r.ALL_FILLS));return p&&o?[(0,F.rP)(o,p,h)]:h}(),p=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.textDecorationFillPaints),r=(0,i.d4)(e=>e.mirror.selectionProperties.textDecoration),n=a.useMemo(()=>"UNDERLINE"!==r||!e||(0,S.gl)(e)?[]:e,[r,e]),o=(0,F.Ig)();return n.filter(es).map(e=>(0,F.dc)(e,o,c.j0r.TEXT_FILL))}(),h=(0,b.Q)(),f=(0,g.v4)(),E=(0,P.ks)(),y="TEXT"===d?[...u,...p]:u,v=(0,V.QT)(y,l,h.inspectionMode,f,E),T=(0,I.Ku)(),C=a.useMemo(()=>a.createElement(e_,{id:"colors-panel"}),[]),L=o?void 0:C,O=H.T4.useCopyAllColors(v,T),R=o?void 0:O;return v.length<1?null:a.createElement(W.VZ,{title:s?"TEXT"===d?(0,_.t)("dev_handoff.inspect_panel.fills.text"):(0,_.t)("dev_handoff.inspect_panel.fills.background"):(0,_.t)("inspect_panel.colors.title"),additionalHeaders:L,copyAllValue:R,recordingKey:"colors",noBorder:e,fadedTitle:o,snugTitle:o,noPadding:r,isSubsection:n},a.createElement(em,{formattableColors:v}))}function eh(){let e=el(),r=(0,I.Ku)(),n=a.useMemo(()=>a.createElement(e_,{id:"colors-panel"}),[]),i=H.T4.useCopyAllColors(e,r);return e.length<1?null:a.createElement(W.VZ,{title:(0,_.t)("inspect_panel.colors.title"),additionalHeaders:n,copyAllValue:i,recordingKey:"colors"},a.createElement(em,{formattableColors:e}))}function e_(e){let r=(0,i.wA)(),n=(0,I.Ku)(),o=(0,i.d4)(e=>e.dropdownShown),s=(0,P.ks)(),l=(0,W.SV)("inspection_panel_color_format_change"),d=a.useCallback(e=>{(0,I.UK)().colorFormat.set(e),l({value:M.Fr.format(e)})},[l]);return a.createElement("div",{className:$.IX},a.createElement(M.bO,{id:`inspect-color-type-select:${e.id}`,className:$.NC,dropdownClassName:$.O4,property:n,formatter:M.Fr,onChange:d,dispatch:r,dropdownShown:o,dropdownAlignment:"right"},a.createElement(M.ef,{value:c.NVY.HEX}),a.createElement(M.ef,{value:c.NVY.RGB}),!s&&a.createElement(M.ef,{value:c.NVY.CSS}),a.createElement(M.ef,{value:c.NVY.HSL}),a.createElement(M.ef,{value:c.NVY.HSB}),s&&a.createElement(M.ef,{value:c.NVY.UIColor})))}function eg(e={}){let{format:r=c.NVY.HEX,isInGradient:n,isInStyle:a}=e,i=$.K5,o=r===c.NVY.HEX?"":$.cZ,s=a?$.UU:void 0,l=n?$.fz:void 0;return u()(i,o,l,s)}function ef(e){let r=eE(),{gradientStop:n,paint:i,encodedPaint:o,format:s,isInStyle:l,opacity:c,valueFormatter:d}=e,{color:m}=n,{copyValue:p,isVariableRow:h,valueWithoutOpacity:_,variable:g,variableDisplayName:f}=(0,E.X)({...e.gradientStop,encodedPaint:o,valueFormatter:d}),y=u()({[$.lF]:!0,[$.$]:h,[$.ZM]:l}),b=a.createElement(D.J,{className:$.Gz,color:m,opacity:c});return r?g?a.createElement(et,{id:g.node_id,variable:g,color:m,paint:i,disableDetailModalEntry:e.disableDetailModalEntry,indent:!0,hideBlendMode:!0}):a.createElement(J,{paint:i,color:m,valueFormatter:d,indent:!0,hideBlendMode:!0}):h?a.createElement("div",{className:$.n},a.createElement(W.d1,{className:u()(y,$.y4),isVariable:!0,variableId:g.node_id,label:f,disableDetailModalEntry:e.disableDetailModalEntry},b),(!r||!e.isInStyle)&&a.createElement(ea,{alwaysShowOpacity:!0,format:e.format,valueFormatter:d,color:m,isInGradient:!0,isInStyle:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry})):a.createElement(W._p,{className:u()(eg({format:s}),y),copyValue:p},b,a.createElement("span",{className:$.As,"data-testid":"inspectColorRow"},_),Y.x.has(e.format)&&a.createElement(K.J,{value:m.a}))}function eE(){return(0,f.UP)()}},103785:(e,r,n)=>{n.d(r,{As:()=>k,Cj:()=>D,I9:()=>O,T4:()=>a,Tv:()=>C,Vr:()=>L,Wf:()=>N,jY:()=>R,n4:()=>x,pF:()=>P,uQ:()=>A,uV:()=>M});var a,i=n(411855),o=n(188507);n(834825);var s=n(805014),l=n(7408),c=n(777535),d=n(841962),u=n(76265),m=n(34671),p=n(209817),h=n(198727),_=n(944415),g=n(234093),f=n(7842),E=n(509343),y=n(923219);n(965636);var b=n(515662),v=n(289765),T=n(738402),I=n(775211),S=n(118157),w=n(113843);function A(){let e=(0,o.d4)(e=>e.mirror.selectionProperties?.numSelected===1),r=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return e&&Object.keys(r).find(e=>e)||null}function C(){let e=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return i.useMemo(()=>{let r=Object.keys(e);return 0===r.length?null:r},[e])}function N(e=0){return Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}function L(){let e=A(),r=(0,v.g0)(e);if(null!=e&&null!=r)return r}function O(){let e=C(),r=(0,v.dB)(e??[]);if(e)return r}function R(){let e=(0,o.d4)(e=>e.mirror.objectsPanelRowRebuildCounter);return(0,v.hr)((e,r)=>e,e)}function P(e){return(0,o.d4)(r=>{let n=e(r);if(null!=n&&(0,y.hS)(n))return n})}function D(e,r){let n=(0,o.wA)(),a=i.useCallback(()=>{let a=window.getSelection();if(a&&a.toString().length>0&&((0,c.sx)("Inspect panel copy with selection",{aborted:!(0,d.kc)().dt_copy_simplification},{forwardToDatadog:!0}),!(0,d.kc)().dt_copy_simplification)||!e)return null;n(f.lW({stringToCopy:e.toString(),ignoreLineBreaks:!1})),r&&r()},[r,e,n]);return e?a:void 0}function k(e){let r=(0,T.ks)(),n=(0,m.v4)(),a=(0,b.u)(e??void 0);if(!a)return;let i=r&&"first-party"===n.type?n.id:m.uz;return(0,m.xv)(a,i)??a.name}function M(e){let r=(0,p.TM)(),n=(0,m.v4)();if(e)return r?(0,m.xv)(e,n.id)??e.name??(0,u.t)("variables.missing_name"):e.name}(e=>{let r={prefix:"",suffix:"",delimiter:": ",quoted:!1};function n(e,n){let a="",i={...r,...n};return e.forEach(e=>{if(e[1]){let{prefix:r,suffix:n,delimiter:o,quoted:s}=e.length>2?{...i,...e[2]}:i,l=s?`"${e[1]}"`:e[1];a+=`${r}${e[0]}${o}${l}${n}
`}}),a}e.copyPairs=n;let a=["true","false","nil","null"];function c(e,r){return`var(--${(0,g.OX)(r)}, ${e})`}e.unquoteEnumerableValues=function(e){return e.map(e=>{let[r,n]=e;return"string"==typeof n&&a.includes(n.toLowerCase())?[r,n,{quoted:!1}]:e})};let d=(e,r,n)=>{let{paint:a}=e,{variable:i}=e.variable??{};switch(a.type){case"SOLID":if(1===n){let r=e.valueFormatter(e.colors[0],{hexCSSValue:!0});return i?c(r,i.name):r}return function(e,r){let n=s.phr.convertGradientPaintToCSS(e.encodedPaint);return(r?n.replace(/(#[a-f0-9]{6})|(rgba\(\d{1,3}, \d{1,3}, \d{1,3}, \d\.\d{1,2})/gi,e=>c(e,r.name)):null)??n}(e,i);case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return s.phr.convertGradientPaintToCSS(e.encodedPaint)}};function u(e,r){return e?.map(n=>d(n,r,e?.length||0))?.join(",\n")}e.copyColors=u;let m={MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"},p=(e=[])=>e.flatMap(e=>e.type===S.q.STYLE?e.paints:e),_="background";e.useCopyAllColors=function(e,r){let a=(0,o.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=p(e),l=i.useCallback(()=>{if(1===a&&s){let e=new Set;if(s.forEach(r=>{r.paint.blendMode&&e.add(r.paint.blendMode)}),e.size<=1){let a=u(s,r),i=[];a&&i.push([_,a]);let o=[...e],l=o[0]?m[o[0]]:void 0;return l&&i.push(["background-blend-mode",l]),n(i,{suffix:";"})}}return n(s.reduce((e,n)=>{let a=n.paint.blendMode,i=a?m[a]:void 0;i&&e.push(["background-blend-mode",i]);let o=d(n,r,1),s=o?[_,o]:void 0;return s&&e.push(s),e},[]).filter(e=>e).map(e=>e),{suffix:";"})},[s,a,r]);return s?l:void 0};let f=(r,a,i,o)=>{let s=a.includes(" "),l=p(i),c=l.length>1||1===l.length&&"SOLID"!==l[0].paint.type,d=e.copyColors(l,r);if(!c&&!s)return`${o??"border"}: ${a} solid ${d}`;let u=s?[["border-width",a],["border-style","solid"]]:[[`${o??"border"}`,`${a} solid`]];return d&&u.push(c?["border-image-source",d]:["border-color",d]),n(u,{suffix:";\n"})};function y(e){return e.map(e=>void 0===e?"":"string"==typeof e?e:`${N(e)}px`)}e.useStrokeCopyValue=function(e,r,n){let a=(0,E.Ku)(),o=p(r);return i.useMemo(()=>f(a,e,o,n),[a,e,o,n])},e.useCopyAllStrokes=function(e){let r=(0,E.Ku)();return i.useMemo(()=>e.map(e=>f(r,e.strokeWeight,e.strokeColors,e.borderCSSKey)).join("\n"),[r,e])},e.withPixels=y;let v=(r,a,i,o)=>{if("FOREGROUND_BLUR"===r.type||"BACKGROUND_BLUR"===r.type)return n([["backdrop-filter",`blur(${r.radius}px)`]]);let s=e.copyColors(a,i);if(!r.offset)return;let[l,c,d,u,m]=o&&5===o.length?o:[null,null,null,null,null];return n([["box-shadow",[y([(0,w.NX)({variable:l})||r.offset?.x,(0,w.NX)({variable:c})||r.offset?.y,(0,w.NX)({variable:d})||r.radius,(0,w.NX)({variable:u})||r.spread]).join(" "),(0,w.NX)({variable:m})||s,"INNER_SHADOW"===r.type?"inset":void 0].filter(h.t).join(" ")]],{suffix:";"})};e.useCopyShadow=function(e,r){let n=(0,E.Ku)(),a=function(e,r){let n=i.useMemo(()=>e?[{color:e,colorVar:void 0}]:[],[void 0,e]);return(0,I.y6)(n)}(e.color);return i.useMemo(()=>v(e,a,n,r),[e,a,n,r])},e.useCopyAllShadows=function(e){let r=(0,E.Ku)(),n=(0,I.OE)(e,e=>e.color),a=e.flatMap(e=>[e.xVar,e.yVar,e.radiusVar,e.spreadVar,e.colorVar]).map(e=>e?.value?.alias?l.dI(e.value.alias):void 0),o=(0,b.hg)(a??[]);return i.useCallback(()=>n.filter(e=>e.color).map((e,n)=>v(e.value,[e.color],r,[o?.[5*n],o?.[5*n+1],o?.[5*n+2],o?.[5*n+3],o?.[5*n+4]])).join("\n"),[n,r,o])};let T=(e,r,n)=>{switch(e){case"Linear":return"linear";case"Ease in":return"ease-in";case"Ease out":return"ease-out";case"Ease in and out":return"ease-in-out";case"Ease in back":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"Ease out back":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"Ease in and out back":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";default:if(void 0==e)return;if(r){if(n)return`{ mass: ${n[0]}, stiffness: ${n[1]}, damping: ${n[2]} }`;return e}return`cubic-bezier(${e})`}},A=e=>`${function(e,r){return e&&Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}(1e3*e,0)}ms`,C=r=>{let n=`// ${r.event}
`,a=r.action,i=[];return r.delay&&i.push(["animation-delay",A(r.delay)]),r.action&&(i.push([`// ${a?.action}`,`"${a?.value??""}"`]),a?.hasAnimation&&(i.push(["// Animate",a?.animation??""]),a?.isSpringTransition?i.push(["// Spring",T(a?.curve,a?.isSpringTransition,a?.curveFunction)]):(i.push(["animation-timing-function",T(a?.curve)]),i.push(["animation-duration",A(a.duration??0)])))),n+e.copyPairs(i,{suffix:";"})};e.useCopyAllInteractions=function(e){return i.useCallback(()=>e.map(e=>C(e)).join("\n"),[e])};let L=e=>{let r=e.image?.name??"Image",a=`${r}.${e.animatedImage?"gif":"png"}`;return n([[`// ${e.animatedImage?"GIF":"Image"}`,r],["background",`url("${a}")`],["background-size",(e=>"FILL"==e?"cover":"FIT"==e?"contain":void 0)(e.imageScaleMode)],["opacity",e.opacity<1?e.opacity.toFixed(2):void 0],["background-blend-mode",m[e.blendMode]]],{suffix:";"})};e.useCopyImages=function(e){return i.useCallback(()=>e.map(e=>L(e)).join("\n"),[e])}})(a||(a={}));let F=e=>e.toLocaleString("en",{maximumFractionDigits:4,useGrouping:!1});function x({value:e,isTextProperty:r}){let n=(0,p.TM)(),a=(0,_.Em)(),i="number"==typeof e?e:0,o=(0,_.qM)(void 0,i,F,{isTextProperty:r});return n&&a&&0!==i?o:void 0}},495118:(e,r,n)=>{n.d(r,{Cm:()=>em,HF:()=>ef,I7:()=>el,M6:()=>ed,QZ:()=>Z,SH:()=>j,SV:()=>$,VZ:()=>J,YE:()=>eh,ZQ:()=>K,_p:()=>ep,d1:()=>ei,di:()=>eg,ln:()=>X,lz:()=>eE,nd:()=>en,r4:()=>e_,sD:()=>es,x0:()=>eb});var a=n(411855),i=n(188507),o=n(351966),s=n(596538),l=n(717180),c=n(629019),d=n.n(c),u=n(50098),m=n(777535),p=n(257476),h=n(108982),_=n(875877),g=n(666308),f=n(746643),E=n(747484),y=n(563192),b=n(216146),v=n(773991),T=n(76265),I=n(209817),S=n(806556),w=n(178035),A=n(7842),C=n(863599),N=n(366172),L=n(923219),O=n(515662),R=n(176160),P=n(914077),D=n(688656),k=n(738402),M=n(76237),F=n(430772),x=n(265005),U=n(103785),B=n(49761),V=n(618802);function G({name:e,fileKey:r,border:n,children:i,hideHeader:o,noPadding:s,noBorder:c,recordingKey:u,dataTestId:p,onClick:_}){let{selectedNodeId:f,selectedPageId:y,isMultiSelect:b,sceneGraph:v,editorType:T}=(0,h.R)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return{selectedPageId:e.mirror.appModel.currentPage,selectedNodeId:r[0],isMultiSelect:r.length>1,sceneGraph:e.mirror.sceneGraph,editorType:"fullscreen"!==e.selectedView.view?P.nT.Design:e.selectedView.editorType}}),I=!!(0,w.hA)(),S=n=>{e&&(0,m.sx)("inspection_panel_shortcut",{...n,file_key:r,name:e,editor_type:T})},A=n?V.F7:V.YK;return o&&(A=n?V.S4:V.Tq),s&&(A=V.JY),c&&(A=d()(A,V.mD)),a.createElement(M.zi,{className:A,tabIndex:-1,onKeyDown:e=>{let r=!1;if((0,g.Fo)(e)&&e.keyCode===g.Uz.C?(r=!0,S({action:"copy"})):(0,g.Fo)(e)&&e.keyCode===g.Uz.A?(r=!0,S({action:"select_all"})):E.Ay.mac?"Meta"===e.key&&(r=!0):"Control"===e.key&&(r=!0),(e.target?.type==="text"||e.target?.type==="textarea"||e.target?.tabIndex===0)&&(r=!0),r);else{let r=window.getSelection();if(!r)return;let n=0===r.toString().length;r.removeAllRanges(),(n||e.keyCode!==g.Uz.ESCAPE)&&N.Y5.forwardKeyboardEvent(e.nativeEvent)}},onDoubleClick:n=>{if(e)return(0,m.sx)("inspection_panel_dbl_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,g.sN)(n),fileKey:r,editor_type:T}),!1},onClick:n=>{let a,i;if(e){if(_?.(n),f&&v)try{let e=(0,l.Ql)(v,f);a=e?.guid,i=e?.type}catch{}return(0,m.sx)("inspection_panel_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,g.sN)(n),fileKey:r,selectedPageId:y,selectedNodeId:f,topLevelFrameId:a,topLevelNodeType:i,isMultiSelect:b,editor_type:T,isDevModeFocusView:I}),!1}},recordingKey:u,"data-testid":p,id:p},i)}let H=(e,r)=>{let[n,i]=a.useState(!1),o=a.useCallback(()=>i(!0),[i]),s=a.useCallback(()=>i(!1),[i]);return a.useMemo(()=>({value:n?e:r,eventHandlers:{onMouseOver:o,onMouseOut:s},isHovered:n}),[n,e,r,o,s])},W=(e,r)=>{let[n,i]=a.useState(!1),o=a.useCallback(()=>i(!0),[i]),s=a.useCallback(()=>i(!1),[i]);return a.useMemo(()=>[n?e:r,{onMouseDown:o,onMouseUp:s}],[n,e,r,o,s])};function K(e,r){let{value:n,eventHandlers:i,isHovered:o}=H(r),[s,l]=W(e);return a.useMemo(()=>({value:s||n,eventHandlers:{...i,...l},isHovered:o}),[s,l,n,i,o])}let Y=a.createContext({});function $(e,r){let n=a.useContext(Y),i=a.useMemo(()=>({name:(r||n).recordingKey}),[r,n]),o=(0,p.j)(e,i);return(r||n).recordingKey?o:f.lQ}function j(e){let{title:r,copyAllValue:n,additionalHeaders:o,eventHandlers:l,isHovered:c,recordingKey:u,isCollapsedAtom:m=q,collapseEnabled:p=!1,hasCollapsibleContent:h=!0,titleAccessory:g,isSubsection:f}=e,E=$("inspection_panel_copy_all_click",a.useContext(Y)),b=(0,i.wA)(),I=(0,y.rf)(u,"click",a.useCallback(()=>{if(!n)return;let e="string"==typeof n?n:n();e&&(b(A.lW({stringToCopy:e,ignoreLineBreaks:!1})),E({value:e}))},[E,b,n])),{ref:S,...w}=(0,B.X)(r,c),C=a.useRef(null),N=(0,k.ks)(),L=(0,a.useMemo)(()=>({name:"Copy properties button",selectedAll:!1,source:"properties",title:r,isDevMode:N}),[N,r]),[O,R]=(0,_.useAtom)(m),P=a.useCallback(()=>{h&&p&&R?.(!O)},[R,O,h,p]),F=e.faded||!!R&&(O||!h),x=!p||!O;return r?a.createElement("div",{className:d()(V.Dn,{[V._]:e.snug||e.isSubsection,[V.iY]:e.noPadding}),ref:C},a.createElement(M.xZ,{innerRef:S,faded:F,...w,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevron,forceNoChevron:e.doNotReserveSpaceForChevron,className:d()(V.yr,{[V.Xx]:e.thin}),"data-testid":"inspectPanelTitle","data-onboarding-key":e.onboardingKey,isPanelBodyCollapsedAtom:h&&p?m:null,onClick:P,highlightOnHover:!!R&&h&&!e.faded},a.createElement(a.Fragment,null,r,g)),a.createElement("div",{className:d()(V.W0,f&&V.z5)},x&&o,x&&n&&a.createElement(v.Me,{htmlAttributes:{...l,"data-tooltip":(0,T.t)("inspect_panel.copy"),"data-tooltip-type":D.Ib.TEXT},onClick:I,trackingProperties:L,"aria-label":(0,T.t)("inspect_panel.copy"),disabled:e.disableCopyAll},a.createElement(s.X,null))),x&&e.children):null}let z=(0,_.atomWithLocalStorage)("collapsed_inspection_panels",{}),q=(0,_.atom)(()=>!1,()=>{});function Z(e){let r=function(e){let r=(0,a.useMemo)(()=>e?(0,u.n)(300,!0,(r,n)=>{r(z,r=>(m.az.trackDefinedEvent("dev_mode.inspect_panel.collapse",{panelKey:e,expanded:!n}),{...r,[e]:n}))}):f.lQ,[e]);return(0,a.useMemo)(()=>e?(0,_.atom)(r=>r(z)[e]??!1,(e,n,a)=>{r(n,a)}):null,[e,r])}((0,I.lv)()?e:void 0),n=!!r;return{collapsedInspectionPanelAtom:n?r:q,collapseEnabled:n}}function X({isCollapsed:e,children:r,childrenWrapperClassname:n,bodyIsEmpty:i,ref:o}){return a.createElement("div",{className:d()(V.HH,n),ref:o},!e&&!i&&r)}function J(e){let{bodyIsEmpty:r,children:n,title:o="",copyAllValue:s,recordingKey:l,panelKey:c}=e,u=(0,i.d4)(R.sS),m=a.useMemo(()=>`inspect:${l.toLowerCase()}`,[l]),p=a.useMemo(()=>({recordingKey:`inspect:${l}`}),[l]),{value:h,eventHandlers:g,isHovered:f}=K(V.Rp,V.fF),{collapsedInspectionPanelAtom:E,collapseEnabled:b}=Z(c),[v]=(0,_.useAtom)(E);return a.createElement(G,{border:!0,fileKey:u,name:m,hideHeader:e.hideHeader,noPadding:e.noPadding,noBorder:e.noBorder,recordingKey:(0,y.Pt)(l,"panel"),dataTestId:`${l}-inspection-panel`,onClick:e.onClick},a.createElement(Y.Provider,{value:p},e.formattedHeader??(!0!==e.hideHeader&&a.createElement(j,{title:o,copyAllValue:s,disableCopyAll:e.disableCopyAll,eventHandlers:g,additionalHeaders:e.additionalHeaders,isHovered:f,snug:e.snugTitle,thin:e.thinTitle,faded:e.fadedTitle,noPadding:e.noPadding,isSubsection:e.isSubsection,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevronInTitle,recordingKey:(0,y.Pt)(l,"header"),onboardingKey:e.headerOnboardingKey,isCollapsedAtom:E,collapseEnabled:b,hasCollapsibleContent:!r,titleAccessory:e.titleAccessory},e.headerChildren)),a.createElement(X,{isCollapsed:v,bodyIsEmpty:r,childrenWrapperClassname:d()(h)},n)))}let Q={maximumFractionDigits:2,useGrouping:!1},ee={maximumFractionDigits:2},et={maximumFractionDigits:2,useGrouping:!1,style:"unit",unit:"degree",unitDisplay:"narrow"},er={...et,unitDisplay:"short"};function en(e,r){let n=e.toLocaleString("en",Q);return`${n}${r}`}function ea(e){switch(e.format){case"pixels":if(!e.value)return;if("number"==typeof e.value)return en(e.value,"px");if(Array.isArray(e.value)){let r=e.value.map(e=>e.toLocaleString("en",ee)).join("px, ");return`${r}px`}return`${e.value}`;case"percent":if(!e.value)return;return Number(e.value).toLocaleString("en",{...Q,style:"percent"});case"fig_number":return e.value?C.wf.format(e.value):void 0;case"millis":return e.value&&en(1e3*e.value,"ms");case"degrees":return e.value&&e.value.toLocaleString("en",et);case"mixed":return e.value.map(ea).join(", ");default:return e.value?.toString()}}function ei(e){let[r,n]=a.useState(!1),i=e.label||e.defaultLabel,o=(0,I.lv)(),s=d()({[V.Nw]:!!e.label,[V.G1]:!e.label,[V.wt]:!e.label&&!o},e.labelClassName),l=es(i),c=(0,O.u)(e.variableId);return a.createElement(ep,{className:e.className,copyValue:e.label,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),isHovered:r,variableId:e.variableId,disableDetailModalEntry:e.disableDetailModalEntry},e.children&&a.createElement("div",null,e.children),i&&a.createElement("div",{className:V.Pq},e.isVariable?a.createElement(F.wG,{text:i,isDeleted:c?.subscriptionStatus==="LOCAL"&&c?.isSoftDeleted,containerClassName:V.gO,disableHover:!0,isHovered:r,isNonInteractive:!0}):a.createElement("span",{ref:l,className:s,dir:"auto"},i)))}function eo(){return a.createElement("span",{className:V.jg})}function es(e){let r=a.useRef(null),n=r.current,i=n&&(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth);return a.useEffect(()=>{n&&i&&e&&(n.setAttribute("data-tooltip",e.toString()),n.setAttribute("data-tooltip-type",D.Ib.TEXT))},[e,n,i]),r}function el({title:e}){return a.createElement("div",{className:V.Dn},a.createElement(M.xw,{className:V.yr},e))}let ec=e=>e?.valueOf()===(0,T.t)("collaboration.branching_node_treatments.value.empty_dash");function ed({basis:e,change:r,name:n}){return a.createElement("div",{className:d()(V.zy)},a.createElement("span",{className:V.rG},n),a.createElement("div",{className:d()(V.vd,V.mW)},a.createElement(o.E,{onClick:e.onClick,className:d()(V.Hz,V.ij,ec(e.value)&&V.T7)},e.value),a.createElement(o.E,{onClick:r.onClick,className:d()(V.Zg,V.ij,ec(r.value)&&V.T7)},r.value)))}function eu({valueProps:e,isHovered:r,variableContainerClassName:n,rowRef:i}){let{variableId:o}=e,s=(0,O.u)(o),l=(0,U.uV)(s)??"",c=(0,O.t8)(o),u=(0,I.UP)();if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return a.createElement("div",{className:d()(V.M3,o&&V.Vd)},e.value.map((s,l)=>a.createElement("div",{key:l},a.createElement(eu,{valueProps:s,isHovered:r,variableContainerClassName:n,rowRef:i}),l<e.value.length-1&&!o&&a.createElement("span",null,", "))))}let m=`${ea(e)}`;if(l){let e=s?.subscriptionStatus==="LOCAL"&&s.isSoftDeleted;return a.createElement(F.wG,{dataTestId:"styledValueVariable",containerClassName:d()(V.gO,n),text:l,disableHover:!0,isHovered:r,isDeleted:e,tooltip:m,fullWidth:u,thumbnailValue:u?c:void 0,isNonInteractive:!0})}return a.createElement(a.Fragment,null,m)}function em(e,r,n){let a=$("inspection_property_copy_click");return(0,x.g7)(e,r,n),(0,U.Cj)(e,()=>{a({property:r,value:e})})}function ep(e){let r="onValueClicked"in e&&e.onValueClicked,n="value"in e?ea(e):void 0,i=(0,U.As)(e.variableId),s=!!n||!!e.variableId||!!e.copyValue,l=null===e.copyValue?void 0:s?e.copyValue||i||n:void 0,c=em(l,e.name,e.copyName),[u,m]=a.useState(!1),p=(0,B.X)(e.name),h=(0,B.X)(n),_=a.useRef(null),g=(0,I.TM)(),f=(0,S.i2)()&&!e.disableDetailModalEntry,E=(0,S.Yq)(_),y="redact"in e?e.redact:void 0,v=a.useMemo(()=>void 0===y?new Set:new Set(Array.isArray(y)?y:[y]),[y]),T=e.className||(g?V.BJ:V.k$),w=e.multipleLines?V.mW:V.Nw,A=e.multipleLines?V.G3:V.Bz,C=()=>{m(!0),e.onMouseEnter?.()},N=()=>{m(!1),e.onMouseLeave?.()},{onCopy:O}=e,R=c||O?()=>{c&&l&&c?.(),O?.()}:void 0;if(!("value"in e)){let r=a.createElement("div",{className:T},e.name&&e.showName&&a.createElement("span",{className:A,...p,"data-tooltip-tip-align-left":!0},e.name),e.children);return R?a.createElement("div",{className:d()(V.A9,V.ri,g&&V.e8),onMouseEnter:C,onMouseLeave:N,"data-testid":e.dataTestId,ref:_},a.createElement(o.E,{className:V.Uh,onClick:R},r),f&&a.createElement(S.J3,{variableId:e.variableId,matchingVars:e.matchingVars,styleId:e.styleId,rowRef:_,isHovered:e.isHovered??u,recordingKey:"inspection_property"})):a.createElement("div",{className:d()(f&&V.ri,e.forceCopyableStyling&&V.zs,g&&V.e8),onMouseEnter:C,onMouseLeave:N,"data-testid":e.dataTestId,ref:_},r,f&&a.createElement(S.J3,{variableId:e.variableId,matchingVars:e.matchingVars,styleId:e.styleId,rowRef:_,isHovered:e.isHovered??u,recordingKey:"inspection_property"}))}return!e.variableId&&(!e.value||v.has(e.value))||e.value&&(0,L.gl)(e.value)?null:a.createElement("div",{className:d()(l?V.A9:V.HD,{[V.ri]:f,[V.e8]:g,[V.z7]:f&&(u||E)}),onMouseEnter:C,onMouseLeave:N,"data-testid":e.dataTestId,ref:_},a.createElement("div",{className:T,onClick:R,"data-testid":"inspectionPropertyRow"},e.indent&&a.createElement("div",null),e.name?a.createElement("span",{className:A,"data-testid":"inspectionPropertyName",...p,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},a.createElement(b.o,{text:e.name,className:V.qX})):a.createElement(eo,null),a.createElement("span",{className:w,"data-testid":"inspectionPropertyValue",...h,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},r?a.createElement(o.E,{className:V.TH,onClick:e=>{e.stopPropagation(),r()}},a.createElement(eu,{valueProps:e,isHovered:u,rowRef:_})):a.createElement(eu,{valueProps:e,isHovered:u,rowRef:_}))),f&&a.createElement(S.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:_,isHovered:u,recordingKey:`inspection_property_${e.name}`}))}function eh(e){let{value:r,copyValue:n,isTextProperty:i}=e,o=(0,U.n4)({value:r,isTextProperty:i}),s=(0,U.n4)({value:e.variableId||"number"!=typeof n?void 0:n,isTextProperty:i});return a.createElement(ep,{...e,value:o??e.value,copyValue:s??n,format:"pixels"})}function e_(e){return a.createElement(ep,{...e,format:"percent",copyValue:void 0===e.value||e.variableId?e.copyValue:Number(e.value).toLocaleString("en",{maximumFractionDigits:2})})}function eg(e){let{value:r,copyValue:n,isTextProperty:i}=e,o=(0,U.n4)({value:r?.units==="PIXELS"?r.value:void 0,isTextProperty:i}),s=(0,U.n4)({value:e.variableId||r?.units!=="PIXELS"||"number"!=typeof n?void 0:n,isTextProperty:i});if(o){let{value:r,...i}=e;return a.createElement(ep,{...i,value:o,copyValue:s??n,name:e.name,className:e.className,indent:e.indent})}return a.createElement(ep,{...e,format:"fig_number"})}function ef(e){let r={...e,copyValue:e.value?e.value.toLocaleString("en",er):void 0};return a.createElement(ep,{...r,format:"degrees"})}function eE(e){return a.createElement(ep,{...e,format:"millis"})}function ey({value:e,extras:r,index:n,renderElement:a}){return a(e,r,n)}function eb(e){let{data:r}=e,n=e.showMoreAmount||100,[i,s]=a.useState(e.limit),l=a.useCallback(()=>{s(Math.min(r.length,i+n))},[r,i,n,s]),c=Math.max(e.data.length-i,0),d="extras"in e?e.extras:{};return a.createElement(a.Fragment,null,e.data?.slice(0,i).map((r,n)=>a.createElement(ey,{value:r,extras:d,renderElement:e.renderElement,key:n,index:n})),0!==c&&a.createElement(o.E,{onClick:l,className:V.jP,key:"show-more"},(0,T.tx)("inspect_panel.property.remaining_more",{remaining:c})))}},263625:(e,r,n)=>{n.d(r,{yg:()=>H});var a=n(411855),i=n(188507),o=n(351966),s=n(805014),l=n(7408),c=n(629019),d=n.n(c),u=n(693565),m=n(76265),p=n(34671),h=n(724009),_=n(340704),g=n(806556),f=n(343373),E=n(509343),y=n(515662),b=n(176160),v=n(357965),T=n(738402),I=n(337707),S=n(103785),w=n(495118),A=n(101835),C=n(217704),N=n(95965),L=n(775211),O=n(642870),R=n(113843),P=n(581883),D=n(216150),k=n(666139);let M=new A.ck;function F(e){return e?.value?.alias?l.dI(e.value.alias):void 0}function x(e,r,n){return(0,w.Cm)(S.T4.withPixels([(0,R.NX)({variable:r})||e]).join(""),n)}function U({styleKey:e,styleType:r,rowWithAccessoryButton:n,itemIndex:i,itemType:o}){let s=(0,b.tS)(),l=(0,h.Fj)(e),c=(0,S.Cj)(l?.name);return a.createElement("div",{className:d()(D.yY,n?D.Ln:D.ix)},a.createElement(C.g,{fileKey:s,dsStyle:l,styleType:r,onClick:c,itemIndex:i,elementType:M.format(o)}))}function B({effect:e,styleKey:r,itemIndex:n}){let i=M.format(e.type);return r?a.createElement(U,{styleKey:r,styleType:"EFFECT",itemIndex:n,itemType:e.type}):i?a.createElement("div",{className:D.yY},(0,N.v)(e),i):null}function V({effect:e,styleName:r}){let n=(0,f.GS)(),i=M.format(e.type);return a.createElement(w.d1,{className:D.n1,labelClassName:D.Q5,label:r,defaultLabel:i},n?(0,N.v)(e):a.createElement(u.B,{className:D.$x,svg:k.A}))}function G(e){let r=(0,I.Qn)(),n=(0,g.i2)()&&!e.disableDetailModalEntry,i=a.useRef(null),s=a.useRef(null),c=a.useRef(null),u=a.useRef(null),p=a.useRef(null),h=(0,E.Ku)(),[_,f]=a.useState(!1),[b,v]=a.useState(!1),{spread:T,radius:A,offset:C,blendMode:N,showShadowBehindNode:L,visible:R,radiusVar:k,spreadVar:M,xVar:U,yVar:G,colorVar:H,itemIndex:W}=e,[K,Y,$,j]=(0,y.hg)([U,G,k,M,H].map(e=>e?.value?.alias?l.dI(e.value.alias):void 0)),z=x(C?.x,K,(0,m.t)("inspect_panel.shadows.x")),q=x(C?.y,Y,(0,m.t)("inspect_panel.shadows.y")),Z=x(A,$,(0,m.t)("inspect_panel.shadows.blur")),X=x(T,j,(0,m.t)("inspect_panel.shadows.spread_tooltip")),J=(0,O.pc)("MISSING",C?.x??0,void 0,!0),Q=(0,O.pc)("MISSING",C?.y??0,void 0,!0),ee=(0,O.pc)("MISSING",A??0,void 0,!0),et=(0,O.pc)("MISSING",T??0,void 0,!0),er=(0,w.sD)((0,m.t)("inspect_panel.shadows.x")),en=(0,w.sD)((0,m.t)("inspect_panel.shadows.y")),ea=(0,w.sD)((0,m.t)("inspect_panel.shadows.blur")),ei=(0,w.sD)((0,m.t)("inspect_panel.shadows.spread_tooltip"));if(!R)return null;let eo="DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type,es="DROP_SHADOW"===e.type&&L,el=d()(D.qR,n&&D.DW,r&&D.bN);return a.createElement("div",{ref:i,className:D.cx},r?a.createElement(B,{effect:e,styleKey:e.styleKey,itemIndex:W}):a.createElement(V,{effect:e,styleName:e.styleName}),eo&&a.createElement(w._p,{className:el,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),isHovered:_,disableDetailModalEntry:!0,forceCopyableStyling:!0},a.createElement("div",{className:D.hq},a.createElement("div",{className:D.i5,ref:er},(0,m.tx)("inspect_panel.shadows.x"))),a.createElement(o.E,{className:D.cu,ref:s,onClick:z},a.createElement(P.S,{value:(0,S.Wf)(C?.x),varData:U})),n&&a.createElement(a.Fragment,null,a.createElement(g.$Q,{variableId:F(U),matchingVars:J?.matchingVars,rowRef:i,rowRefForModalId:s,isHovered:_,recordingKey:"shadows_panel_x"}),a.createElement("div",null)),a.createElement("div",{className:D.hq},a.createElement("div",{className:D.i5,ref:en},(0,m.tx)("inspect_panel.shadows.y"))),a.createElement(o.E,{className:D.cu,ref:c,onClick:q},a.createElement(P.S,{value:(0,S.Wf)(C?.y),varData:G})),n&&a.createElement(g.$Q,{variableId:F(G),matchingVars:Q?.matchingVars,rowRef:i,rowRefForModalId:c,isHovered:_,recordingKey:"shadows_panel_y"})),a.createElement(w._p,{className:el,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),isHovered:b,disableDetailModalEntry:!0,forceCopyableStyling:!0},a.createElement("div",{className:D.hq},a.createElement("div",{className:D.i5,ref:ea},(0,m.tx)("inspect_panel.shadows.blur"))),a.createElement(o.E,{className:D.cu,ref:u,onClick:Z},a.createElement(P.S,{value:(0,S.Wf)(A),varData:k})),n&&a.createElement(a.Fragment,null,a.createElement(g.$Q,{variableId:F(k),matchingVars:ee?.matchingVars,rowRef:i,rowRefForModalId:u,isHovered:b,recordingKey:"shadows_panel_blur"}),a.createElement("div",null)),eo&&a.createElement(a.Fragment,null,a.createElement("div",{className:D.hq},a.createElement("div",{className:D.i5,ref:ei},(0,m.tx)("inspect_panel.shadows.spread_tooltip"))),a.createElement(o.E,{className:D.cu,ref:p,onClick:X},a.createElement(P.S,{value:(0,S.Wf)(T),varData:M})),n&&a.createElement(g.$Q,{variableId:F(M),matchingVars:et?.matchingVars,rowRef:i,rowRefForModalId:p,isHovered:b,recordingKey:"shadows_panel_spread"}))),eo&&a.createElement(a.Fragment,null,a.createElement(I.aj,{blendMode:N,className:es?r?D.TX:D.RI:D.W0}),es&&a.createElement(w._p,{name:(0,m.t)("inspect_panel.shadows.behind_transparent_areas"),value:(0,m.t)("inspect_panel.shadows.behind_transparent_areas_true"),className:d()(r?D.TX:D.RI)}),!!e.formattableColor&&a.createElement(I.DP,{formattableColor:e.formattableColor,format:h,isInStyle:!0,disableDetailModalEntry:e.disableDetailModalEntry})))}function H({hideBorder:e,noPadding:r,isSubsection:n}){let o=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected)||0,l=(0,v.Z)(),c=l[0],d=S.T4.useCopyAllShadows(c?.effects??[]),u=a.useMemo(()=>a.createElement(I.Af,{id:"shadows-panel"}),[]),h=function(e,r,n){let a=(0,S.uQ)(),i=(0,_.Q)(),o=(0,p.v4)(),l=(0,T.ks)(),c=(0,L.Ig)();return e.map(e=>{if(!e.color)return{...e,styleName:r,styleKey:n};let d=(0,L.oI)({color:e.color,colorVar:e.colorVar,variableScope:s.j0r.EFFECT_COLOR,displayValue:c}),u=(0,O.uA)(d,a,o.id,l,i.inspectionMode);return{...e,styleName:r,styleKey:n,formattableColor:u}}).filter(e=>!!e)}(c?.effects??[],c?.styleName,c?.styleKey),g=a.useCallback((e,r,n)=>a.createElement(G,{styleName:e.styleName,styleKey:e.styleKey,key:e.id,id:e.id,type:e.type,offset:e.offset,radius:e.radius,spread:e.spread,formattableColor:e.formattableColor,blendMode:e.blendMode,visible:e.visible,colorVar:e.colorVar,xVar:e.xVar,yVar:e.yVar,radiusVar:e.radiusVar,spreadVar:e.spreadVar,showShadowBehindNode:e.showShadowBehindNode,itemIndex:n}),[]);return 1!==o||!l||l.length<1||c.effects.length<1?null:a.createElement(w.VZ,{title:(0,m.t)("inspect_panel.shadows.title"),recordingKey:"shadows",copyAllValue:d,additionalHeaders:u,noBorder:e,noPadding:r,isSubsection:n},a.createElement(w.x0,{limit:2,data:h,renderElement:g}))}},516317:(e,r,n)=>{n.d(r,{o:()=>P});var a=n(411855),i=n(188507),o=n(236891),s=n(805014),l=n(108982),c=n(11955),d=n(76265),u=n(34671),m=n(340704),p=n(806556),h=n(923219),_=n(965636),g=n(827473),f=n(77383),E=n(738402),y=n(775211),b=n(355936),v=n(642870),T=n(337707),I=n(103785),S=n(49761),w=n(495118),A=n(714386);let C=e=>{let r=e.mirror.selectionProperties;if(!(0,h.gl)(r.borderSharedWeight)){if(!r.borderStrokeWeightsIndependent)return"border";if(r.borderTopVisible)return"border-top";if(r.borderBottomVisible)return"border-bottom";if(r.borderLeftVisible)return"border-left";if(r.borderRightVisible)return"border-right"}},N=e=>{switch(e){case"border":return(0,d.t)("inspect_panel.strokes.all_sides");case"border-top":return(0,d.t)("inspect_panel.strokes.top_side");case"border-bottom":return(0,d.t)("inspect_panel.strokes.bottom_side");case"border-left":return(0,d.t)("inspect_panel.strokes.left_side");case"border-right":return(0,d.t)("inspect_panel.strokes.right_side");default:return}},L=(e,r)=>(0,h.gl)(e)?r.some(e=>(0,h.gl)(e))?(0,d.t)("fullscreen.mixed"):r.map(e=>(0,w.nd)(e,"px")).join(", "):`${(0,w.nd)(e,"px")}`,O=e=>{switch(e){case"OUTSIDE":return(0,d.t)("inspect_panel.strokes.outer_border");case"INSIDE":return(0,d.t)("inspect_panel.strokes.inner_border");case"CENTER":return(0,d.t)("inspect_panel.strokes.center_border");default:return}};function R(e,r){let n=(0,S.X)(e.strokeAlign),i=e.strokeWeight.split(",").join(""),o=I.T4.useStrokeCopyValue(i,e.strokeColors,e.borderCSSKey);return a.createElement("div",null,!r.onlyShowStrokeColor&&a.createElement(w._p,{copyValue:o,className:A.ht},a.createElement("div",{className:A.wz},a.createElement(b.Cq,{iconState:"ACTIVE"})),a.createElement("span",null,e.strokeWeight),e.borderCSSKey&&a.createElement("span",{className:A.I0,...n},N(e.borderCSSKey))),a.createElement(T.nu,{formattableColors:e.strokeColors}),e.strokeAlign&&!r.onlyShowStrokeColor&&a.createElement(w._p,{className:A.Gr},a.createElement("span",{className:A.ki,...n},e.strokeAlign)))}function P({hideBorder:e,noPadding:r,isSubsection:n}){let b=(0,T.Qn)(),S=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected)||0,A=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.strokePaints),r=!e||(0,h.gl)(e)?[]:e.filter(e=>e.visible),n=(0,I.uQ)(),d=(0,m.Q)(),p=(0,u.v4)(),b=(0,E.ks)(),S=(0,I.pF)(e=>(0,c.b)(e.mirror.selectionProperties,"inheritFillStyleKeyForStroke")),w=(0,i.d4)(f.e_),A=(0,_.kl)("inheritFillStyleKeyForStroke"),N=A&&(0,h.hS)(A)?(0,g.Gp)(A,[],w):void 0,R=(0,i.d4)(e=>e.mirror.selectionProperties.borderSharedWeight||e.mirror.selectionProperties.strokeWeight)||1,P=(0,l.R)(e=>({borderTopWeight:e.mirror.selectionProperties.borderTopWeight,borderRightWeight:e.mirror.selectionProperties.borderRightWeight,borderBottomWeight:e.mirror.selectionProperties.borderBottomWeight,borderLeftWeight:e.mirror.selectionProperties.borderLeftWeight})),D=(0,i.d4)(e=>e.mirror.selectionProperties.strokeAlign)||"OUTSIDE",k=(0,I.uQ)(),M=(0,y.Ig)(),F=r.filter(T.bm).map(e=>(0,y.dc)(e,M,s.j0r.STROKE)),x=a.useMemo(()=>{let e=N&&S?[(0,y.rP)(S,N,F)]:F;return(0,v.QT)(e,n,d.inspectionMode,p,b)},[N,S,F,n,d.inspectionMode,p,b]),U=(0,i.d4)(C);return a.useMemo(()=>{if(!k||x.length<1||!R)return[];let e=L(R,[P.borderTopWeight,P.borderRightWeight,P.borderBottomWeight,P.borderLeftWeight].filter(o.Vq));return e?[{id:k,strokeWeight:e,strokeColors:x,strokeAlign:O(D),borderCSSKey:U}]:[]},[k,D,R,x,U,P])}(),N=(0,p.i2)(),P=a.useMemo(()=>a.createElement(T.Af,{id:"strokes-panel"}),[]),D=b?void 0:P,k=I.T4.useCopyAllStrokes(A),M=b?void 0:k;return 1!==S||A.length<1?null:a.createElement(w.VZ,{title:N?(0,d.t)("inspect_panel.strokes.colors.title"):(0,d.t)("inspect_panel.strokes.title"),recordingKey:"borders",additionalHeaders:D,copyAllValue:M,noBorder:e,snugTitle:b,fadedTitle:b,noPadding:r,isSubsection:n},a.createElement(w.x0,{limit:2,data:A,renderElement:R,extras:{onlyShowStrokeColor:N}}))}},282630:(e,r,n)=>{n.d(r,{U:()=>K});var a=n(411855),i=n(188507),o=n(805014),s=n(629019),l=n.n(s),c=n(841962),d=n(76265),u=n(250379),m=n(289765),p=n(642870),h=n(265005),_=n(495118),g=n(618802);let f=e=>{if("CAP_HEIGHT"===e)return(0,d.t)("inspect_panel.typography.cap_height")},E=e=>{if(e)return(0,d.t)("inspect_panel.typography.hanging_punctuation")},y=e=>{switch(e){case"RIGHT":return(0,d.t)("inspect_panel.typography.align_right");case"CENTER":return(0,d.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,d.t)("inspect_panel.typography.align_justified");default:return}},b=e=>{switch(e){case"RIGHT":return"right";case"CENTER":return"center";case"JUSTIFIED":return"justify";default:return}},v=e=>{switch(e){case"CENTER":return(0,d.t)("inspect_panel.typography.align_middle");case"BOTTOM":return(0,d.t)("inspect_panel.typography.align_bottom");default:return}},T=e=>{switch(e){case"CENTER":return"middle";case"BOTTOM":return"bottom";default:return}},I=e=>{switch(e){case"SUPER":return(0,d.t)("inspect_panel.typography.position_super");case"SUB":return(0,d.t)("inspect_panel.typography.position_sub");default:return}},S=e=>{switch(e){case"SUPER":return"super";case"SUB":return"sub";default:return}},w=e=>{switch(e){case"LINING":return(0,d.t)("inspect_panel.typography.numeric.figure_lining");case"OLDSTYLE":return(0,d.t)("inspect_panel.typography.numeric.figure_oldstyle");default:return}},A=e=>{switch(e){case"LINING":return"lining-nums";case"OLDSTYLE":return"oldstyle-nums";default:return}},C=e=>{switch(e){case"PROPORTIONAL":return(0,d.t)("inspect_panel.typography.numeric.spacing_proportional");case"TABULAR":return(0,d.t)("inspect_panel.typography.numeric.spacing_tabular");default:return}},N=e=>{switch(e){case"PROPORTIONAL":return"proportional-nums";case"TABULAR":return"tabular-nums";default:return}},L=e=>{switch(e){case"DIAGONAL":return(0,d.t)("inspect_panel.typography.numeric.fraction_diagonal");case"STACKED":return(0,d.t)("inspect_panel.typography.numeric.fraction_stacked");default:return}},O=e=>{switch(e){case"DIAGONAL":return"diagonal-fractions";case"STACKED":return"stacked-fractions";default:return}},R=(e=[],r=[])=>{if(e.includes("ZERO")&&!r.includes("ZERO"))return(0,d.t)("inspect_panel.typography.numeric.zero_slashed")},P=(e=[],r=[])=>{if(e.includes("ZERO")&&!r.includes("ZERO"))return"slashed-zero"},D=(e,r)=>{if(e&&"ORIGINAL"!==e)switch(e){case"UPPER":return(0,d.t)("inspect_panel.typography.type_settings.case_upper");case"LOWER":return(0,d.t)("inspect_panel.typography.type_settings.case_lower");case"TITLE":return(0,d.t)("inspect_panel.typography.type_settings.case_title");case"SMALL_CAPS":return(0,d.t)("inspect_panel.typography.type_settings.case_small");case"SMALL_CAPS_FORCED":return(0,d.t)("inspect_panel.typography.type_settings.case_small_forced");default:return}return"SMALL"===r?(0,d.t)("inspect_panel.typography.type_settings.case_small"):"ALL_SMALL"===r?(0,d.t)("inspect_panel.typography.type_settings.case_small_forced"):void 0},k=(e,r)=>{if("SMALL"===r||"ALL_SMALL"===r)return"font-variant";switch(e){case"UPPER":case"LOWER":case"TITLE":return"text-transform";case"SMALL_CAPS":case"SMALL_CAPS_FORCED":return"font-variant";default:return}},M=(e,r)=>{if("SMALL"===r||"ALL_SMALL"===r)return"small-caps";switch(e){case"UPPER":return"uppercase";case"LOWER":return"lowercase";case"TITLE":return"capitalize";case"SMALL_CAPS":case"SMALL_CAPS_FORCED":return"small-caps";default:return}},F=e=>{switch(e){case"STRIKETHROUGH":return(0,d.t)("inspect_panel.typography.strikethrough");case"UNDERLINE":return(0,d.t)("inspect_panel.typography.underline");default:return}},x=e=>{if(!e)return"";switch(e){case"STRIKETHROUGH":return"line-through";case"UNDERLINE":return"underline";default:return""}},U=e=>{switch(e){case"SOLID":return(0,d.t)("inspect_panel.typography.solid");case"DOTTED":return(0,d.t)("inspect_panel.typography.dotted");case"WAVY":return(0,d.t)("inspect_panel.typography.wavy");default:return}},B=e=>{if(!e)return"";switch(e){case"SOLID":return"solid";case"DOTTED":return"dotted";case"WAVY":return"wavy";default:return""}},V=e=>{if(e)return(0,d.t)("variables.values.boolean.true")};function G({name:e,maybeVariable:r,disableDetailModalEntry:n,...i}){return"pixels"===i.format?a.createElement(_.YE,{className:g.k$,name:e,variable:r?.variableDisplayName,variableId:r?.variable?.node_id,matchingVars:r?.matchingVars,copyValue:r?.variableDisplayName,isTextProperty:!0,disableDetailModalEntry:n,...i}):"fig_number"===i.format?a.createElement(_.di,{className:g.k$,name:e,variable:r?.variableDisplayName,variableId:r?.variable?.node_id,matchingVars:r?.matchingVars,copyValue:r?.variableDisplayName,isTextProperty:!0,disableDetailModalEntry:n,...i}):a.createElement(_._p,{className:g.k$,name:e,variable:r?.variableDisplayName,variableId:r?.variable?.node_id,matchingVars:r?.matchingVars,copyValue:r?.variableDisplayName,...i,disableDetailModalEntry:n})}function H({fontFamily:e,fontFamilyConsumedOrSuggestedVariable:r,fontWeight:n,fontWeightConsumedOrSuggestedVariable:i,fontStyle:o,fontSize:s,fontSizeConsumedOrSuggestedVariable:l,leadingTrim:u,lineHeight:m,lineHeightConsumedOrSuggestedVariable:p,letterSpacing:h,letterSpacingConsumedOrSuggestedVariable:H,textAlignHorizontal:W,textAlignVertical:K,textCase:Y,fontVariantCaps:$,fontVariantPosition:j,fontVariantNumericFigure:z,fontVariantNumericSpacing:q,fontVariantNumericFraction:Z,toggledOnOTFeatures:X,toggledOffOTFeatures:J,textDecoration:Q,textDecorationStyle:ee,textDecorationOffset:et,textDecorationThickness:er,textDecorationSkipInk:en,opticalSize:ea,fontVariationsDescription:ei,hangingPunctuation:eo,hangingList:es,paragraphSpacing:el,paragraphSpacingConsumedOrSuggestedVariable:ec,paragraphIndent:ed,paragraphIndentConsumedOrSuggestedVariable:eu,listSpacing:em,disableDetailModalEntry:ep}){return a.createElement(a.Fragment,null,a.createElement(G,{name:(0,d.t)("inspect_panel.typography.font"),copyName:"font-family",maybeVariable:r,value:e,disableDetailModalEntry:ep}),a.createElement(G,{name:(0,d.t)("inspect_panel.typography.weight"),copyName:"font-weight",maybeVariable:i,value:n,disableDetailModalEntry:ep}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.style"),copyName:"font-style",value:o}),a.createElement(G,{name:(0,d.t)("inspect_panel.typography.size"),copyName:"font-size",maybeVariable:l,value:s,format:"pixels",disableDetailModalEntry:ep}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.leading_trim"),copyName:"leading-trim",value:f(u)}),a.createElement(G,{name:(0,d.t)("inspect_panel.typography.line_height"),copyName:"line-height",maybeVariable:p,value:m,format:"fig_number",disableDetailModalEntry:ep}),a.createElement(G,{name:(0,d.t)("inspect_panel.typography.paragraph_spacing"),maybeVariable:ec,value:el,format:"pixels",disableDetailModalEntry:ep}),a.createElement(G,{name:(0,d.t)("inspect_panel.typography.paragraph_indent"),copyName:"text-indent",maybeVariable:eu,value:ed,format:"pixels",disableDetailModalEntry:ep}),a.createElement(_.YE,{className:g.k$,name:(0,d.t)("inspect_panel.typography.list_spacing"),value:em,isTextProperty:!0}),a.createElement(G,{name:(0,d.t)("inspect_panel.typography.letter"),copyName:"letter-spacing",maybeVariable:H,value:h,format:"fig_number",disableDetailModalEntry:ep}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.align"),copyName:"text-align",value:y(W),copyValue:b(W)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.align_vertical"),copyName:"vertical-align",value:v(K),copyValue:T(K)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.type_settings.case"),copyName:k(Y,$),value:D(Y,$),copyValue:M(Y,$)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.position"),copyName:"position",value:I(j),copyValue:S(j)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.numeric.figure"),copyName:"font-variant-numeric-figure",value:w(z),copyValue:A(z)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.numeric.spacing"),copyName:"font-variant-numeric-spacing",value:C(q),copyValue:N(q)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.numeric.fraction"),copyName:"font-variant-numeric-fraction",value:L(Z),copyValue:O(Z)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.numeric.zero"),copyName:"font-variant-numeric-zero",value:R(X,J),copyValue:P(X,J)}),!!(0,c.kc)().ce_custom_text_decorations&&!!Q&&"NONE"!==Q&&a.createElement(a.Fragment,null,"UNDERLINE"===Q&&a.createElement(_._p,{className:g.k$},a.createElement("div",{className:g.Bz},(0,d.t)("inspect_panel.typography.text_decoration"))),a.createElement(_._p,{className:"UNDERLINE"===Q?g.Mn:g.k$,name:"UNDERLINE"===Q?(0,d.t)("inspect_panel.typography.decoration"):(0,d.t)("inspect_panel.typography.text_decoration"),copyName:"text-decoration",value:F(Q),copyValue:x(Q)}),"UNDERLINE"===Q&&a.createElement(a.Fragment,null,a.createElement(_._p,{className:g.Mn,name:(0,d.t)("inspect_panel.typography_text_decoration_style"),copyName:"text-decoration-style",value:U(ee),copyValue:B(ee)}),a.createElement(_.di,{className:g.Mn,name:(0,d.t)("inspect_panel.typography.text_decoration_offset"),copyName:"text-decoration-offset",value:et,isTextProperty:!0}),a.createElement(_.di,{className:g.Mn,name:(0,d.t)("inspect_panel.typography.text_decoration_thickness"),copyName:"text-decoration-thickness",value:er,isTextProperty:!0}),a.createElement(_._p,{className:g.Mn,name:(0,d.t)("inspect_panel.typography.text_decoration_skip_ink"),copyName:"text-decoration-skip-ink",value:V(en),copyValue:en?"auto":void 0}))),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.punctuation"),value:E(eo)}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.hanging_list"),value:E(es)}),a.createElement(_.YE,{className:g.k$,name:(0,d.t)("inspect_panel.typography.optical_size"),value:ea,isTextProperty:!0}),a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.variation"),value:ei}))}function W(e,{numFonts:r,extraHeader:n,noPadding:s,isSubsection:l}){let{copyAll:c,setCopyValue:f,hasCopyAllContent:E}=(0,h.We)(),y=function(e){let r=(0,p.e4)("FONT_FAMILY",e.fontFamily,e.variableConsumptionMap),n=(0,p.pc)("FONT_SIZE",e.fontSize,e.variableConsumptionMap),a=(0,p.pc)("FONT_STYLE",e.fontWeight,e.variableConsumptionMap),s=a.variable?.resolvedType===o.rXF.FLOAT?a:{},l=(0,p.pc)("LINE_HEIGHT",e.lineHeight,e.variableConsumptionMap),c=(0,p.pc)("LETTER_SPACING",e.letterSpacing?.units!=="PERCENT"?e.letterSpacing?.value:void 0,e.variableConsumptionMap),d=(0,i.d4)(e=>e.mirror.selectionProperties.paragraphSpacing),u=(0,p.pc)("PARAGRAPH_SPACING",d,e.variableConsumptionMap),m=(0,i.d4)(e=>e.mirror.selectionProperties.paragraphIndent);return{fontFamilyVariable:r,fontWeightVariable:s,fontSizeVariable:n,lineHeightVariable:l,letterSpacingVariable:c,paragraphSpacingVariable:u,paragraphIndentVariable:(0,p.pc)("PARAGRAPH_INDENT",m,e.variableConsumptionMap)}}(e),{fontFamily:b,fontStyle:v,styleName:T,leadingTrim:I,textAlignHorizontal:S,textAlignVertical:w,opticalSize:A,fontVariationsDescription:C,isStyleSoftDeleted:N,hangingPunctuation:L,hangingList:O,substring:R}=e,P=(0,u.uQ)(),{fontWeight:D,fontSize:k,paragraphSpacing:M,paragraphIndent:F,listSpacing:x,lineHeight:U,letterSpacing:B,textDecoration:V,textDecorationStyle:G,textDecorationOffset:W,textDecorationThickness:K,textDecorationSkipInk:Y,textCase:$,fontVariantCaps:j,fontVariantPosition:z,fontVariantNumericFigure:q,fontVariantNumericSpacing:Z,fontVariantNumericFraction:X,toggledOnOTFeatures:J,toggledOffOTFeatures:Q}=(0,m.Fk)((e,r,n,a)=>{if(!r)return{};let i=e.get(r);if(!i)return{};let o=i.getStyledTextSegments(["fontSize","fontWeight","paragraphSpacing","paragraphIndent","listSpacing","lineHeight","letterSpacing","textDecoration","textDecorationStyle","textDecorationOffset","textDecorationThickness","textDecorationSkipInk","textCase","fontVariantCaps","fontVariantPosition","fontVariantNumericFigure","fontVariantNumericSpacing","fontVariantNumericFraction","toggledOnOTFeatures","toggledOffOTFeatures"],n,a);return o?.[0]??{}},P,e.startPos,e.endPos),ee=0===e.index,et=e.index===r-1,er=R?.trim()||(0,d.t)("inspect_panel.typography.span_whitespace");return a.createElement(_.VZ,{title:ee?(0,d.t)("inspect_panel.typography.title"):R?(0,d.t)("inspect_panel.typography.span_contents",{contents:er}):(0,d.t)("inspect_panel.typography.span"),thinTitle:!ee,noBorder:!0,noPadding:!et||s,isSubsection:l,doNotReserveSpaceForChevronInTitle:!ee,copyAllValue:c,disableCopyAll:!E,recordingKey:ee?"typography":`typography${e.index}`},a.createElement(h.xe.Provider,{value:{setCopyValue:f}},ee&&n,a.createElement(_._p,{className:g.k$,name:(0,d.t)("inspect_panel.typography.name"),value:N?void 0:T}),a.createElement(H,{fontFamily:b,fontFamilyConsumedOrSuggestedVariable:y.fontFamilyVariable,fontWeight:D,fontWeightConsumedOrSuggestedVariable:y.fontWeightVariable,fontStyle:v,fontSize:k,fontSizeConsumedOrSuggestedVariable:y.fontSizeVariable,leadingTrim:I,letterSpacing:B,letterSpacingConsumedOrSuggestedVariable:y.letterSpacingVariable,lineHeight:U,lineHeightConsumedOrSuggestedVariable:y.lineHeightVariable,paragraphSpacing:M,paragraphSpacingConsumedOrSuggestedVariable:y.paragraphSpacingVariable,paragraphIndent:F,paragraphIndentConsumedOrSuggestedVariable:y.paragraphIndentVariable,listSpacing:x,textAlignHorizontal:S,textAlignVertical:w,textCase:$,fontVariantCaps:j,fontVariantPosition:z,fontVariantNumericFigure:q,fontVariantNumericSpacing:Z,fontVariantNumericFraction:X,toggledOnOTFeatures:J,toggledOffOTFeatures:Q,textDecoration:V,textDecorationStyle:G,textDecorationOffset:W,textDecorationThickness:K,textDecorationSkipInk:Y,hangingPunctuation:L,hangingList:O,opticalSize:A,fontVariationsDescription:C})))}function K({hideBorder:e,noPadding:r,isSubsection:n}){let o=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.selectedFonts),r=a.useMemo(()=>{if(!e||!e.fonts)return;let r=new Set;return e.fonts.filter(e=>!!e.substring&&(!e.parentStyleId||!r.has(e.parentStyleId)&&(r.add(e.parentStyleId),!0))).sort((e,r)=>(e.startPos??0)-(r.startPos??0)).map((e,r)=>({...e,index:r}))},[e]);if(e&&r)return{fonts:r,incompleteResults:e.incompleteResults}}();return!s||s?.fonts.length<1?null:a.createElement("div",{className:l()(g.sk,e&&g.th,r&&g.pN)},a.createElement(_.x0,{limit:2,data:s.fonts,renderElement:W,extras:{numFonts:s.fonts.length,extraHeader:s.incompleteResults?a.createElement("div",{className:g.VC},(0,d.tx)("inspect_panel.typography.too_many_selected",{numSelected:o})):null,noPadding:r,isSubsection:n}}))}},876348:(e,r,n)=>{n.d(r,{u:()=>C});var a=n(411855),i=n(138225),o=n(228736),s=n(13631),l=n(563192),c=n(132939),d=n(76265),u=n(373247),m=n(581713),p=n(923219),h=n(688656),_=n(683882),g=n(422883),f=n(848969),E=n(453783),y=n(806565),b=n(935771),v=n(744684),T=n(811550);let I=E.c$;function S(e){let r=(0,g.DB)(),n=a.createElement(w,{value:(0,p.E7)(e.property),defaultBlendMode:"NORMAL"});return a.createElement(E.l6,{...e,renderInput:({onMouseDown:e,props:o})=>{let s=b.p6;return"NORMAL"!==(0,p.E7)(o.property)&&(s=b.DU),r?a.createElement(i.K,{onClick:e,"aria-label":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode"),htmlAttributes:{"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},disabled:o.disabled},n):a.createElement(f.K0,{className:s,tabIndex:-1,onPointerDown:m.dG,onMouseDown:e,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},n)}})}function w({value:e,defaultBlendMode:r}){return(0,_.qg)(e,r)?a.createElement(c.U,{svg:T.A},a.createElement(o.N,null)):a.createElement(c.U,{svg:v.A},a.createElement(s.l,null))}let A=new u.ro,C=a.memo(function(e){let r=(0,y.cJ)(),n=_.r5.map((n,i)=>{let o="LINEAR_BURN"===n&&r;return"SELECT_DIVIDER"===n?a.createElement(E.sK,{key:i}):a.createElement(I,{key:i,value:n,disabled:o,recordingKey:l.Pt(e,n)})});return a.createElement(S,{id:"color-picker-blend-mode-select",dropdownClassName:b.Qg,inputClassName:b.p6,className:b.rO,property:e.blendMode,onChange:e.onBlendModeChange,formatter:A,dispatch:e.dispatch,dropdownShown:e.dropdownShown,onMouseDown:m.dG,minTop:6,recordingKey:e.recordingKey,enablePreview:!0,disabled:e.disabled},n)})},171710:(e,r,n)=>{n.d(r,{Fr:()=>en,Rh:()=>Q,S7:()=>el,bO:()=>et,ef:()=>er,mu:()=>e_,qi:()=>eg,qo:()=>J,sX:()=>ea});var a=n(411855),i=n(188507),o=n(588172),s=n(28819),l=n(328753),c=n(269685),d=n(805014),u=n(629019),m=n.n(u),p=n(991458),h=n(254773),_=n(841962),g=n(666308),f=n(747484),E=n(563192),y=n(137565),b=n(132939),v=n(76265),T=n(225371),I=n(475824),S=n(1518),w=n(863599),A=n(366172),C=n(509343),N=n(515662),L=n(661137),O=n(424819),R=n(620552),P=n(689102),D=n(756044),k=n(688656),M=n(868911),F=n(172322),x=n(50737),U=n(422883),B=n(859877),V=n(848969),G=n(76237),H=n(453783),W=n(113843),K=n(430772),Y=n(467998),$=n(488411),j=n(995693),z=n(277698),q=n(488527),Z=n(253025),X=n(964829);let J=(0,p.jz)(q.uj0),Q=(0,p.jz)(q.jzw);function ee(e,r){return Object.keys(e).every(n=>e[n]===r[n])}let et=H.l6,er=H.c$,en={format:e=>e===d.NVY.HEX?"Hex":d.NVY[e]};var ea=(e=>(e.FULL="full",e.WHITEBOARD="whiteboard",e))(ea||{});let ei=(e,r)=>({hslva:r===d.NVY.HSL?(0,c.oB)(e):(0,c.qN)(e),rgba:e}),eo=e=>{let r="",n="";switch(e){case"SOLID":case"IMAGE":case"EMOJI":case"VIDEO":r=e;break;case"GRADIENT_LINEAR":r="GRADIENT",n="LINEAR";break;case"GRADIENT_RADIAL":r="GRADIENT",n="RADIAL";break;case"GRADIENT_ANGULAR":r="GRADIENT";break;case"GRADIENT_DIAMOND":r="GRADIENT",n="DIAMOND"}return{paintPickerTab:r,paintPickerFilter:n}};function es(e){return parseFloat(e.toFixed(4))}function el({recordingKey:e,...r}){let[n,u]=(0,a.useState)(ei(r.color,r.colorFormat)),p=a.useContext(x.nZ),{setFgHue:_,setFgAlpha:g,standardMet:f}=p.colorContrastInfo,{contrastLevelForCategory:y}=p.settings,T=a.useRef(f),I=(0,a.useRef)(r.color),w=(0,a.useRef)(r.colorFormat),N=(0,O.Xo)(),M=(0,U.DB)(),F=(0,h.hC)(),B=(0,L.dq)(),H=P.ol()?.id,W=(0,i.d4)(e=>!!e.eyedropper)||r.preventAutoFocus,K={...r,preventAutoFocus:W};(0,a.useEffect)(()=>{_(es(n.hslva.h)),g(es(n.hslva.a))},[_,g,n.hslva.h,n.hslva.a]),(0,a.useEffect)(()=>{if((ee(r.color,I.current)||ee(r.color,n.rgba))&&w.current===r.colorFormat)return;let e=ei(r.color,r.colorFormat);e.hslva=function(e,r,n){("l"in r&&(0===r.l||1===r.l)||"v"in r&&0===r.v)&&(r={...r,s:e.s});let a=(0,o.xN)(e.h,0)&&(0,o.xN)(r.h,1),i=(0,o.xN)(e.h,1)&&(0,o.xN)(r.h,0);return((0,o.xN)(n.r,n.g)&&(0,o.xN)(n.r,n.b)||a||i)&&(r={...r,h:e.h}),r}(n.hslva,e.hslva,r.color),I.current=r.color,w.current=r.colorFormat,u(e)},[n,r.color,r.colorFormat]);let z=(e,n)=>{let a=(0,c.w_)(e);u({hslva:e,rgba:a}),r.onColorChange(a,n?D.zk.YES:D.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&R.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:S.z5.format(a),...r.analytics.properties}),p.showColorContrast&&void 0===T.current&&(T.current=f),n&&p.showColorContrast&&(!1===T.current&&F("color_contrast.pick_new_color_when_not_compliant",{conformance:y,compliance:f,orgId:B,teamId:H}),T.current=void 0)},q=(e,n)=>{if(!r.onOpacityChange){z(e,n);return}let a=(0,c.w_)(e);u({hslva:e,rgba:a}),r.onOpacityChange(a.a,n?D.zk.YES:D.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&R.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:S.z5.format(a),...r.analytics.properties})},J=(e,n)=>{r.onColorChange(e,n),r.analytics&&R.F.trackFromFullscreen(r.analytics.name,{source:"hex",color:S.z5.format(e),...r.analytics.properties})},Q=e=>{e.stopPropagation();let{paintPickerTab:n,paintPickerFilter:a}=eo(r.paintPickerAnalytics?.paintType);A.Y5.triggerAction("toggle-dropper",{canAcceptStyles:r.canAcceptStyles,canAcceptVariables:r.canAcceptVariables,pickerShown:N?.id,paintPickerTab:n,paintPickerFilter:a,paintPickerSessionId:r.paintPickerSessionId})};if("whiteboard"===r.displayType)return(()=>{let i=r.currentTool===d.NLJ.DROPPER_COLOR;return a.createElement("div",{className:Z.BA},a.createElement("div",{className:Z.s1},!r.dropperDisabled&&a.createElement("div",{className:Z.go},a.createElement(V.YW,{svg:X.A,fill:"dark"===r.theme?"white":"black",selected:i,onPointerDown:Q,recordingKey:E.Pt(e,"dropperButton"),"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.color_controls.eyedropper"),tooltipForScreenReadersOnly:!0,className:m()({[Z.fG]:!i&&"dark"===r.theme})})),a.createElement(eu,{recordingKey:E.Pt(e,"hexInput"),...K,onColorChange:J})),a.createElement("div",{className:m()(Z.MX,{[Z.zB]:!r.hideOpacity})},a.createElement(Y.e,{width:140,color:n.hslva,changeCallback:z,containerClass:Z.aw,recordingKey:E.Pt(e,"hueControl")}),!r.hideOpacity&&a.createElement($.xp,{width:140,color:n.hslva,changeCallback:q,containerClass:Z.aw,recordingKey:E.Pt(e,"opacityControl")})),a.createElement(j.T,{size:184,color:n.hslva,changeCallback:z,ignoreWheelCallback:!0,recordingKey:E.Pt(e,"slvControl")}))})();let ea=a.createElement(a.Fragment,null,a.createElement(et,{id:"color-input-type-select",className:m()(Z.NC,{[Z.DW]:M}),inputClassName:Z.Hi,dropdownClassName:Z.O4,property:r.colorFormat,formatter:en,onChange:e=>{(0,C.UK)().colorFormat.set(e)},dispatch:r.dispatch,dropdownShown:r.dropdownShown,recordingKey:E.Pt(e,"colorFormatSelect")},a.createElement(er,{value:d.NVY.HEX,recordingKey:E.Pt(e,"hexOption")}),a.createElement(er,{value:d.NVY.RGB,recordingKey:E.Pt(e,"rgbOption")}),a.createElement(er,{value:d.NVY.CSS,recordingKey:E.Pt(e,"cssOption")}),a.createElement(er,{value:d.NVY.HSL,recordingKey:E.Pt(e,"hslOption")}),a.createElement(er,{value:d.NVY.HSB,recordingKey:E.Pt(e,"hsvOption")})),r.colorFormat===d.NVY.HEX&&a.createElement(eu,{recordingKey:E.Pt(e,"hexInput"),...K}),r.colorFormat===d.NVY.RGB&&a.createElement(em,{recordingKey:E.Pt(e,"rgbInput"),...K}),r.colorFormat===d.NVY.CSS&&a.createElement(ep,{recordingKey:E.Pt(e,"cssInput"),...K}),(r.colorFormat===d.NVY.HSL||r.colorFormat===d.NVY.HSB)&&a.createElement(eh,{key:r.colorFormat,value:n.hslva,changeCallback:z,recordingKey:E.Pt(e,"hslvInput"),...K}));return a.createElement("div",null,a.createElement(ec,{color:n.hslva,onChange:z,recordingKey:E.Pt(e,"slvControl")}),a.createElement(G.Id,null,a.createElement("div",{className:m()(Z.ne,{[Z.Ep]:M})},a.createElement("div",{className:m()(Z.go,{[Z.TD]:M})},M?a.createElement(s.d,{"aria-expanded":r.currentTool===d.NLJ.DROPPER_COLOR,"aria-label":(0,v.t)("fullscreen.properties_panel.color_picker.sample_color"),htmlAttributes:{"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.properties_panel.color_picker.sample_color")},recordingKey:E.Pt(e,"dropperButton"),onClick:Q},a.createElement(b.U,{svg:X.A},a.createElement(l.G,null))):a.createElement(V.YW,{selected:r.currentTool===d.NLJ.DROPPER_COLOR,onMouseDown:Q,recordingKey:E.Pt(e,"dropperButton"),"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.properties_panel.color_picker.eyedropper"),tooltipForScreenReadersOnly:!0},a.createElement(b.U,{svg:X.A},a.createElement(l.G,null)))),a.createElement("div",{className:Z.xJ},a.createElement(Y.e,{width:156,color:n.hslva,changeCallback:z,containerClass:Z.aw,recordingKey:E.Pt(e,"hueControl")}),a.createElement($.xp,{width:156,color:n.hslva,changeCallback:q,containerClass:Z.aw,recordingKey:E.Pt(e,"opacityControl")}))),M?a.createElement("div",{className:Z.Px},ea):a.createElement(G.fI,null,ea)))}function ec({color:e,onChange:r,recordingKey:n}){return(0,U.DB)()?a.createElement("div",{className:Z.YC},a.createElement(j.T,{size:Q,color:e,changeCallback:r,recordingKey:n,canvasWrapperStyles:{borderRadius:"5px"},overlay:a.createElement(x.Mu,null)})):a.createElement(j.T,{size:J,color:e,changeCallback:r,recordingKey:n,containerClass:Z.pZ})}el.displayName="ColorControls";let ed=a.forwardRef((e,r)=>{let n=(0,U.DB)();return a.createElement("div",{ref:r,className:m()({[Z.x4]:!e.isWhiteboard,[Z.mP]:e.isWhiteboard,[Z.zI]:n})},e.children)});function eu(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o="whiteboard"===e.displayType;(0,a.useEffect)(()=>{o&&n.current&&(n.current.dataset.preferredTheme=e.theme)},[o,e.theme]);let s=(0,a.useMemo)(()=>o?S.z5:new S.rC({parseAlpha:!0}),[o]),l=e=>{e.keyCode===g.Uz.ESCAPE&&r(T.XE())},c=!(o||e.hideOpacity);return a.createElement(ed,{ref:n,isWhiteboard:o},a.createElement(B.AN,{className:m()({[Z.uh]:!o,[Z.vh]:o}),squareRightBorder:!0,noBorderOnFocus:!0,formatter:s,property:e.color,onChange:e.onColorChange,autoFocus:!f.Ay.isIpad&&!e.preventAutoFocus,onKeyDown:l,recordingKey:E.Pt(e,"color"),forwardedRef:e.hexInputRef}),c&&a.createElement(M.Pd,{className:Z.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:l,recordingKey:E.Pt(e,"opacity")}))}class em extends E.o6{constructor(){super(...arguments),this.formatter=new w.o1({normalizeFactor:255,min:0,max:1}),this.onRChange=e=>this.props.onColorChange({...this.props.color,r:e}),this.onGChange=e=>this.props.onColorChange({...this.props.color,g:e}),this.onBChange=e=>this.props.onColorChange({...this.props.color,b:e}),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode===g.Uz.ESCAPE&&this.props.dispatch(T.XE())}}render(){return a.createElement(ed,null,a.createElement(M.j5,{className:Z.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.r,onValueChange:this.onRChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,autoFocus:!this.props.preventAutoFocus,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.color_controls.red"),recordingKey:E.Pt(this.props,"red")}),a.createElement(M.j5,{className:Z.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.g,onValueChange:this.onGChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noLeftBorder:!0,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.color_controls.green"),recordingKey:E.Pt(this.props,"green")}),a.createElement(M.j5,{className:Z.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.b,onValueChange:this.onBChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noBorderOnFocus:!0,noLeftBorder:!0,squareRightBorder:!0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.color_controls.blue"),recordingKey:E.Pt(this.props,"blue")}),!this.props.hideOpacity&&a.createElement(M.Pd,{className:Z.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,onKeyDown:this.onKeyDown,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:E.Pt(this.props,"opacity")}))}}em.displayName="RgbInputs";class ep extends E.o6{constructor(){super(...arguments),this.formatter=I.F,this.onKeyDown=e=>{e.keyCode===g.Uz.ESCAPE&&this.props.dispatch(T.XE())}}render(){return a.createElement(ed,null,a.createElement(B.AN,{className:Z.AH,formatter:this.formatter,property:this.props.color,onChange:this.props.onColorChange,recordingKey:E.Pt(this.props,"color"),autoFocus:!this.props.preventAutoFocus,noBorderOnFocus:!0,onKeyDown:this.onKeyDown}))}}ep.displayName="CssInputs";class eh extends E.o6{constructor(){super(...arguments),this.formatter360=new w.o1({normalizeFactor:360,min:0,max:1}),this.formatter100=new w.o1({normalizeFactor:100,min:0,max:1}),this.onHChange=e=>this.props.changeCallback({...this.props.value,h:e},!0),this.onSChange=e=>this.props.changeCallback({...this.props.value,s:e},!0),this.onLChange=e=>this.props.changeCallback({...this.props.value,l:e},!0),this.onVChange=e=>this.props.changeCallback({...this.props.value,v:e},!0),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode===g.Uz.ESCAPE&&this.props.dispatch(T.XE())}}render(){return a.createElement(ed,null,a.createElement(M.j5,{className:Z.Qh,dispatch:this.props.dispatch,squareRightBorder:!0,formatter:this.formatter360,scrubMultiplier:1/360,value:this.props.value.h,onValueChange:this.onHChange,recordingKey:E.Pt(this.props,"hue"),autoFocus:!this.props.preventAutoFocus,noBorderOnFocus:!0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.color_controls.hue"),onKeyDown:this.onKeyDown}),a.createElement(M.j5,{className:Z.Qh,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:this.props.value.s,onValueChange:this.onSChange,recordingKey:E.Pt(this.props,"saturation"),noBorderOnFocus:!0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.color_controls.saturation"),onKeyDown:this.onKeyDown}),a.createElement(M.j5,{className:Z.Qh,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:"l"in this.props.value?this.props.value.l:this.props.value.v,onValueChange:"l"in this.props.value?this.onLChange:this.onVChange,recordingKey:E.Pt(this.props,"value"),noBorderOnFocus:!0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":"l"in this.props.value?(0,v.t)("fullscreen.color_controls.lightness"):(0,v.t)("fullscreen.color_controls.brightness"),onKeyDown:this.onKeyDown}),!this.props.hideOpacity&&a.createElement(M.Pd,{className:Z.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:E.Pt(this.props,"opacity"),onKeyDown:this.onKeyDown}))}}function e_(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o=(0,U.DB)();(0,a.useEffect)(()=>{n.current&&(n.current.dataset.preferredTheme=e.theme)},[e.theme]);let s=(0,a.useMemo)(()=>new S.rC({parseAlpha:!0}),[]),l=e=>{e.keyCode===g.Uz.ESCAPE&&r(T.XE())};return a.createElement(ed,{ref:n,isWhiteboard:!1},a.createElement("div",{className:Z.Q6},a.createElement(F.J,{color:e.color,onMouseDown:e.onChitMouseDown,recordingKey:E.Pt(e.recordingKey,"chit")}),a.createElement(B.AN,{className:m()(Z.uh,{[Z.ym]:o}),squareRightBorder:!0,noBorderOnFocus:!0,formatter:s,property:e.color,onChange:e.onColorChange,onKeyDown:l,recordingKey:E.Pt(e,"color")})),a.createElement(M.Pd,{decimals:e.opacityDecimals,className:Z.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:l,recordingKey:E.Pt(e,"opacity")}))}function eg({variableId:e,color:r,opacity:n,onMouseDown:i,recordingKey:o}){let s=(0,N.u)(e),l=s?.name??"",c=!!s&&(0,W.eF)(s);return a.createElement(a.Fragment,null,c?null:a.createElement("div",{onFocus:e=>e.stopPropagation()},a.createElement(F.J,{color:r,opacity:n,onMouseDown:i,recordingKey:E.Pt(o,"chit"),className:z.x7})),(0,_.kc)().eu_fpl_migration_button?a.createElement("div",{className:z.eV},a.createElement(K.wG,{isDeleted:c,text:l,tooltip:l,onClick:i,actionOnMouseDown:!0})):a.createElement(y.D8,{role:"button",tabIndex:0,className:z.eV,onMouseDown:i,recordingKey:E.Pt(o,"pill")},a.createElement(K.wG,{isDeleted:c,text:l,tooltip:l})))}eh.displayName="HslvInputs"},380224:(e,r,n)=>{n.d(r,{SY:()=>ey});var a=n(411855),i=n(217950),o=n(138225),s=n(520244),l=n(432728),c=n(622831),d=n(679535),u=n(805014),m=n(851169),p=n(629019),h=n.n(p),_=n(777535),g=n(885123),f=n(841962),E=n(875877),y=n(563192),b=n(550479),v=n(546788),T=n(45427),I=n(132939),S=n(677840),w=n(76265),A=n(140835),C=n(863599),N=n(373247),L=n(581713),O=n(343373),R=n(623962),P=n(190500),D=n(366172),k=n(19776),M=n(542005),F=n(357614),x=n(434992),U=n(144625),B=n(510669),V=n(756044),G=n(688656),H=n(143364),W=n(422883),K=n(552032),Y=n(114308),$=n(177444),j=n(37763),z=n(859877),q=n(922611),Z=n(352612),X=n(76237),J=n(453783),Q=n(582008),ee=n(732767),et=n(824794),er=n(253244),en=n(617803),ea=n(879517),ei=n(155405),eo=n(940119),es=n(520461),el=n(211363),ec=n(498902),ed=n(69782),eu=n(521709);let em="image-scale-mode-select",ep=J.l6,eh=J.c$,e_=(0,E.atom)(!1),eg=H.qo,ef=(e,r)=>e.every((e,n)=>e===r[n]);async function eE(e){let r=Array.from(e.animatedImage.hash).map(e=>e.toString(16).padStart(2,"0")).join("");await (0,M.Jr)().loadImageByHash(r);let n=(0,x.Sl)(e);return u.CUU.requestGIFData(n)}function ey(e){let r=(0,O.GS)(),[,n]=(0,E.useAtom)(e_);(0,a.useEffect)(()=>(n(!0),()=>n(!1)),[n]);let i=(0,ee.Q0)(),{withinMeter:o}=(0,Q.X)(er.JT.REMOVE_BACKGROUND),s=(0,en.Os)(),l=i&&o&&!s,c=i&&!s,d=(0,W.DB)();return a.createElement(A.fu,{name:"Image Settings Modal"},a.createElement(eb,{...e,isUI3:r,canUseRemoveBackground:l,isAiEnabled:c,insetImageSettings:d}))}class eb extends a.Component{constructor(e){super(e),this.onRotateClockwiseClick=()=>{this.props.onChange((0,F.Lt)(this.props.paint,90),V.zk.YES),m.l7.user("image-rotate-clockwise",()=>{u.glU.repairThumbnails()})},this.onScalingFactorChange=e=>{this.props.onChange({...this.props.paint,scale:e})},this.onPaintColorAdjustChange=(e,r,n)=>{let a={...this.props.paint.paintFilter,[e]:r};this.props.onChange({...this.props.paint,paintFilter:a},n?V.zk.YES:V.zk.NO),this.setState({forceThumbnailUpdate:n}),n&&_.az.trackDefinedEvent("ai_productivity.fills_panel_image_adjust_slider_updated",{sliderName:e,sliderValue:r?.toString()})},this.onGIFFrameChange=e=>{let r=Math.round(e);this.setState({animationFrameForScrubber:r,playing:!1})},this.onVideoTimeChange=e=>{this.setState({currentTimeForScrubber:e,playing:!1})},this.setGIFCoverFrame=e=>{if(!this.state.animatedFrameData){console.warn("No frame stored in state to update");return}let r=e??this.state.animationFrameForScrubber;if((null!=e||r!==this.props.paint.animationFrame)&&!this.props.updateStillImageAndSelectionPropertiesForGIF({...this.props.paint,animationFrame:r},this.state.animatedFrameData.data)){console.warn("Failed to update image");return}},this.setGIFPlaying=e=>{this.setState({playing:e})},this.setVideoPlaying=e=>{this.setState({playing:e})},this.onUpdateAnimatedFrameData=e=>{this.setState({animatedFrameData:e})},this.onUpdateCurrentTime=e=>{this.setState({currentTimeForScrubber:e})},this.setVideoDuration=e=>{this.setState({videoDuration:e})},this.uploadImagePaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;u.glU.uploadPaintImage(e,r)},this.uploadMediaPaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;u.glU.uploadPaintMedia(e,r)},this.waitingForGIF=!1,this.clearGIFContentRequest=()=>{this.waitingForGIF=!1},this.setupGIF=()=>{this.setState({animatedImage:null,animationFrameForScrubber:this.props.paint.animationFrame,playing:!1}),this.waitingForGIF=!0,eE(this.props.paint).then(e=>{this.waitingForGIF&&this.setState({animatedImage:(0,U.J)(e)})}).catch(e=>(0,b.$D)(i.e.FIGJAM,e))},this.loadVideoJs=async()=>{if(!this.state.videoJsLib){let e=await (0,v.Fe)();this.setState({videoJsLib:e})}},this.setupVideoJs=()=>{this.setState({currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1}),this.loadVideoJs()},this.setIsVideoLoaded=e=>{this.setState({isVideoLoaded:e})},this.setUserClickedVideoControls=e=>{this.setState({userClickedVideoControls:e})},this.imageButtonRef=a.createRef(),this.isAnimatedImage=()=>!!this.props.paint.animatedImage,this.isVideo=()=>!!this.props.paint.video||"VIDEO"===this.props.paint.type,this.isDragTarget=()=>!0,this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({isDragHover:!1});let r=this.props.paint.blendMode,n=this.props.paint.opacity;this.props.dropImageOnPaintThumbnail(r,n,e)},this.onImageButtonCointainerMouseOver=()=>{this.setState({isPreviewHover:!0})},this.onImageButtonCointainerMouseOut=()=>{this.setState({isPreviewHover:!1})},this.onImageButtonFocus=()=>{this.setState({isImageButtonFocused:!0})},this.onImageButtonBlur=()=>{this.setState({isImageButtonFocused:!1})},this.state={isDragHover:!1,isPreviewHover:!1,isImageButtonFocused:!1,forceThumbnailUpdate:!1,animatedImage:null,animatedFrameData:null,animationFrameForScrubber:e.paint.animationFrame||0,currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1,userClickedVideoControls:!1}}componentDidMount(){if(this.isAnimatedImage()?this.setupGIF():this.isVideo()&&this.setupVideoJs(),(0,et.qF)()&&!this.isAnimatedImage()&&!this.isVideo()){let e=g.D.getState();(0,P.ds)("bg_removal_available",e.openFile?.key,e,{source:"image_settings_panel"})}(0,f.kc)().accessible_chits&&this.imageButtonRef?.current?.focus()}UNSAFE_componentWillReceiveProps(e){this.props.paint.animationFrame!==e.paint.animationFrame&&this.setState({animationFrameForScrubber:e.paint.animationFrame})}componentDidUpdate(e){let r=null!=e.paint.animatedImage,n=null!=this.props.paint.animatedImage;!r&&n?this.setupGIF():r&&n?ef(e.paint.animatedImage.hash,this.props.paint.animatedImage.hash)||this.setupGIF():r&&!n&&this.clearGIFContentRequest(),"STRETCH"===this.props.paint.imageScaleMode&&(0,S.YQ)({id:"Image panel has cropped image"})}componentWillUnmount(){this.setVideoPlaying(!1),this.clearGIFContentRequest()}renderInlinePreview(){let e=this.props.insetImageSettings?208:eg,r=this.props.insetImageSettings?208:152;return this.isVideo()?a.createElement($.A,{imagePaint:this.props.paint,openFileKey:this.props.openFileKey,width:e,height:r,className:el.IP,currentTime:this.state.currentTimeForScrubber,onUpdateCurrentTime:this.onUpdateCurrentTime,setDuration:this.setVideoDuration,playing:this.state.playing,setPlaying:this.setVideoPlaying,videoJsLib:this.state.videoJsLib,isVideoLoaded:this.state.isVideoLoaded,setIsVideoLoaded:this.setIsVideoLoaded,userClickedControls:this.state.userClickedVideoControls,setUserClickedControls:this.setUserClickedVideoControls}):this.isAnimatedImage()?a.createElement(K.Y,{imagePaint:this.props.paint,width:e,height:r,className:el.km,animatedImage:this.state.animatedImage,animationFrame:this.state.animationFrameForScrubber,onUpdateFrameData:this.onUpdateAnimatedFrameData,playing:this.state.playing}):a.createElement(Y.K,{imagePaint:this.props.paint,width:e,height:r,className:el.km,forceUpdate:this.state.forceThumbnailUpdate})}renderMediaControls(){if(this.isVideo()){if(!(0,B.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)())return a.createElement(Z.c,null);if(this.props.paint.video)return a.createElement(es.P,{paint:this.props.paint,currentTime:this.state.currentTimeForScrubber||0,duration:this.state.videoDuration,onVideoTimeChange:this.onVideoTimeChange,disabled:null==this.props.paint.video,isVideoLoaded:this.state.isVideoLoaded,setPlaying:this.setVideoPlaying,playing:null!=this.props.paint.video&&this.state.playing,setUserClickedControls:this.setUserClickedVideoControls})}else if(this.isAnimatedImage())return a.createElement(ea.F,{paint:this.props.paint,animationFrame:this.state.animationFrameForScrubber||0,numFrames:this.state.animatedImage?this.state.animatedImage.numFrames():null,onGIFFrameChange:this.onGIFFrameChange,disabled:null==this.state.animatedImage,setPlaying:this.setGIFPlaying,playing:null!=this.state.animatedImage&&this.state.playing,setGIFCoverFrame:this.setGIFCoverFrame});else return a.createElement(A.fu,{name:"Color Adjust Sliders"},a.createElement("div",{className:h()(el.Vq,{[el.oc]:this.props.insetImageSettings})},["exposure","contrast","vibrance","temperature","tint","highlights","shadows"].map(e=>a.createElement(eS,{key:e,propertyName:e,onChange:this.onPaintColorAdjustChange,filterColorAdjust:this.props.paint.paintFilter,min:"contrast"===e?-.3:-1,max:"contrast"===e?.3:1,recordingKey:y.Pt(this.props,e)}))))}render(){let e=this.isVideo(),r=(0,B.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)(),n=(0,et.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.canUseRemoveBackground&&!this.props.paint.image?.name.includes(eo.LO),i=(0,f.kc)().aip_buttercup&&(0,et.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.isAiEnabled,l=this.props.insetImageSettings?208:eg,u=this.props.insetImageSettings?208:152,m=(p=this.props.paint,!!(0,F.y7)(p)&&p.image&&"Checker"===p.image.name);var p,_=(this.state.isPreviewHover||this.state.isImageButtonFocused||m?el.rv:el.ZS)+(this.state.isDragHover?" "+el.mw:"");e&&!r&&(_=el.ZS);let g=a.createElement(a.Fragment,null,a.createElement(eT,{...this.props,recordingKey:y.Pt(this.props,"imageScale")}),"TILE"===this.props.paint.imageScaleMode&&a.createElement(eI,{className:h()({[el.GA]:!this.props.insetImageSettings,[el.b_]:this.props.insetImageSettings}),value:"TILE"!==this.props.paint.imageScaleMode?1:this.props.paint.scale,onChange:this.onScalingFactorChange,recordingKey:y.Pt(this.props,"scalingFactor")})),E=a.createElement("span",{className:h()({[el.ZM]:!this.props.insetImageSettings})},a.createElement(j.$O,{paint:this.props.paint,showRemoveBackground:n})),b=a.createElement(o.K,{onClick:()=>(0,j.I3)(this.props.paint),"aria-label":(0,w.t)("fullscreen.properties_panel.remove_background"),recordingKey:y.Pt(this.props,"removeBackground"),htmlAttributes:{"data-tooltip":(0,w.t)("fullscreen.properties_panel.remove_background"),"data-tooltip-type":G.Ib.TEXT,"data-tooltip-show-above":!0}},a.createElement(I.U,{svg:ed.A},a.createElement(c.$,null))),v=a.createElement("span",{className:h()({[el.Ts]:!this.props.insetImageSettings})},a.createElement(o.K,{onClick:this.onRotateClockwiseClick,"aria-label":(0,w.t)("fullscreen.properties_panel.rotate_90"),recordingKey:y.Pt(this.props,"rotateClockwise"),htmlAttributes:{"data-tooltip":(0,w.t)("fullscreen.properties_panel.rotate_90"),"data-tooltip-type":G.Ib.TEXT}},a.createElement(I.U,{svg:eu.A},a.createElement(d.R,null))));return a.createElement(X.Id,{className:h()({[el.G3]:this.props.insetImageSettings})},this.props.insetImageSettings?a.createElement("div",{className:el.C0,"data-onboarding-key":em},a.createElement("div",{className:el.Fu},g),a.createElement("div",{className:el.D3},i&&E,!(0,f.kc)().aip_buttercup&&n&&b,v)):a.createElement(X.fI,{"data-onboarding-key":em},g,i&&E,!(0,f.kc)().aip_buttercup&&n&&a.createElement("span",{className:el.Yw},b),v),a.createElement(T.Y,{className:h()(_,{[el.ho]:this.props.insetImageSettings}),style:{backgroundImage:`url('${(0,R.A)()}')`},isDragTarget:this.isDragTarget,onMouseOver:this.onImageButtonCointainerMouseOver,onMouseOut:this.onImageButtonCointainerMouseOut,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:y.Pt(this.props,"dropTarget")},a.createElement("div",{className:h()({[el.mQ]:!this.props.insetImageSettings||this.props.insetImageSettings&&m})},this.renderInlinePreview(),a.createElement("div",{className:el.dW,style:{width:l,height:u}},e&&r&&a.createElement("span",{className:el.QY},a.createElement(s.$n,{onClick:this.uploadMediaPaint,htmlAttributes:{onFocus:this.onImageButtonFocus,onBlur:this.onImageButtonBlur},variant:"secondary",ref:this.imageButtonRef},(0,w.tx)("fullscreen.properties_panel.choose_video"))),!e&&a.createElement(ei.A,{onImageButtonBlur:this.onImageButtonBlur,onImageButtonFocus:this.onImageButtonFocus,uploadImagePaint:this.uploadImagePaint,isInset:this.props.insetImageSettings,imageButtonRef:this.imageButtonRef})))),this.renderMediaControls(),this.isAnimatedImage()&&a.createElement(q.u,{title:(0,w.t)("fullscreen.properties_panel.gifs_in_figma_prototypes"),icon_DEPRECATED:ec.A,userFlag:"dismissed_gifs_cover_frame_hint",hintText:(0,w.t)("fullscreen.properties_panel.choose_which_frame_displayed")}))}}eb.displayName="ImageSettingsModal";let ev=["FILL","FIT","STRETCH","TILE"];class eT extends a.PureComponent{constructor(){super(...arguments),this.imageScaleModeFormatter=new N.D,this.onImageScaleModeChange=e=>{"STRETCH"===e?D.Y5.triggerActionInUserEditScope("crop-image"):this.props.onChange({...this.props.paint,imageScaleMode:e})}}render(){let e=ev.map((e,r)=>a.createElement(eh,{key:r,value:e,recordingKey:y.Pt(this.props,e)}));return a.createElement(ep,{id:"image-scale-mode-select",className:h()({[el.Nd]:!this.props.insetImageSettings,[el.ak]:this.props.insetImageSettings}),property:this.props.paint.imageScaleMode,onChange:this.onImageScaleModeChange,formatter:this.imageScaleModeFormatter,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,onMouseDown:L.dG,recordingKey:this.props.recordingKey},e)}}eT.displayName="ImageScaleSelection";class eI extends a.PureComponent{constructor(){super(...arguments),this.formatter=new C.LN({min:.01,max:100})}render(){return a.createElement(z.Q7,{className:this.props.className,formatter:this.formatter,property:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,recordingKey:this.props.recordingKey})}}function eS({min:e=-1,max:r=1,propertyName:n,...i}){let o=(0,a.useId)(),s=(0,W.DB)();return a.createElement(X.fI,null,a.createElement("div",{id:o,className:el.tx},function(e){switch(e){case"exposure":return(0,w.t)("fullscreen.properties_panel.exposure");case"contrast":return(0,w.t)("fullscreen.properties_panel.contrast");case"vibrance":return(0,w.t)("fullscreen.properties_panel.saturation");case"temperature":return(0,w.t)("fullscreen.properties_panel.temperature");case"tint":return(0,w.t)("fullscreen.properties_panel.tint");case"highlights":return(0,w.t)("fullscreen.properties_panel.highlights");case"shadows":return(0,w.t)("fullscreen.properties_panel.shadows")}}(n)),a.createElement("div",{className:h()(el.CD,{[el.Wf]:s})},a.createElement(l.A,{"aria-labelledby":o,min:e,max:r,step:.01,bigStep:.1,value:i.filterColorAdjust?.[n]||0,defaultValue:0,hints:[0],rangeAnchor:0,onChange:(e,{commit:r})=>{i.onChange(n,e,r)},recordingKey:i.recordingKey,htmlAttributes:{onKeyDownCapture:e=>{D.Y5.isReady()&&(0,k.f7)(e)}}})))}eI.displayName="ScalingFactorInputs"},155405:(e,r,n)=>{n.d(r,{A:()=>w});var a=n(411855),i=n(188507),o=n(520244),s=n(98345),l=n(629019),c=n.n(l),d=n(841962),u=n(576467),m=n(76265),p=n(736041),h=n(891720),_=n(732767),g=n(253244),f=n(119925),E=n(908262),y=n(802425),b=n(276769),v=n(66144),T=n(30057),I=n(211363);function S({uploadImagePaint:e,recordingKey:r,disableAi:n=!1,isInset:l,imageButtonRef:u}){let{close:h}=(0,E.cq)(),S=(0,T.sO)(),w=(0,i.wA)(),A=(0,_.Q0)();return a.createElement("div",{className:c()(I.sn,{[I.Xb]:l})},a.createElement(o.IK,{onClick:e,recordingKey:r,ref:u},S?(0,m.tx)("slides.properties_panel.replace_media"):(0,m.tx)("fullscreen.properties_panel.image_settings.upload_new")),A&&!(0,d.kc)().aip_disable_ai_make_images&&!n&&a.createElement("div",{className:I.zr},a.createElement(o.IK,{onClick:()=>{h(),(0,f.B3)(g.JT.GENERATE_IMAGE),scheduler.postTask(()=>{(0,b.$I)({moduleToOpen:{type:"custom",module:a.createElement(v.A,null),name:y.Sn.GENERATE_IMAGE},trackingData:{source:"image_settings_swap_image_generate_new"}}),w(p.Ce())})},iconPrefix:a.createElement(s.T,null),variant:"secondary"},(0,m.tx)("fullscreen.properties_panel.image_settings.generate_new"))))}function w(e){return(0,h.R)()?a.createElement(S,{uploadImagePaint:e.uploadImagePaint,isInset:e.isInset,imageButtonRef:e.imageButtonRef}):a.createElement(u.nR,{className:I.QY,onFocus:e.onImageButtonFocus,onBlur:e.onImageButtonBlur,onClick:e.uploadImagePaint},(0,m.tx)("fullscreen.properties_panel.choose_image"))}},512030:(e,r,n)=>{n.d(r,{bU:()=>s});var a=n(411855),i=n(188507),o=n(103785);function s(){let[e,r]=function(){let e=(0,i.d4)(e=>e.mirror.sceneGraph),r=(0,o.Vr)(),n=(0,i.d4)(e=>e.mirror.selectionProperties.masterSymbolGUID);if(!r||!r.isAlive)return[null,null];if(r?.isStateGroup)return[null,r??null];if(r?.type==="SYMBOL"||r?.type==="INSTANCE"){let a=r??null;if(r?.type==="INSTANCE"&&(a=n?e.get(n):null),!a)return[null,null];if(!a?.isState)return[a??null,null];let i=a?.parentGuid?e.get(a?.parentGuid):null;return[a??null,i?.isStateGroup?i:null]}return[null,null]}(),n=a.useMemo(()=>{let n=e?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(n.length>0)return n;let a=r?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(a.length>0)return a},[e,r]),s=e?.description,l=r?.description,c=s&&l?l+"\n\n"+s:s||l;return a.useMemo(()=>({links:n,description:c}),[n,c])}},475762:(e,r,n)=>{n(108982)},471961:(e,r,n)=>{n.d(r,{A3:()=>ek,LI:()=>ew,N5:()=>eR,SV:()=>eO,hD:()=>eI});var a=n(411855),i=n(188507),o=n(511445),s=n(650437),l=n(462575),c=n(499325),d=n(599526),u=n(28819),m=n(138225),p=n(690159),h=n(623817),_=n(640978),g=n(777885),f=n(538887),E=n(747579),y=n(805014),b=n(629019),v=n.n(b),T=n(777535),I=n(841962),S=n(875877),w=n(866415),A=n(746643),C=n(563192),N=n(62791),L=n(453956),O=n(612724),R=n(211020),P=n(132939),D=n(76265),k=n(713865),M=n(225371),F=n(674505),x=n(535461),U=n(863599),B=n(343373),V=n(366172),G=n(439134),H=n(541302),W=n(296605),K=n(63114),Y=n(391482),$=n(542005),j=n(923219),z=n(434992),q=n(305216),Z=n(615883),X=n(789722),J=n(756044),Q=n(688656),ee=n(143364),et=n(557679),er=n(596651),en=n(366881),ea=n(98551),ei=n(501717),eo=n(63580),es=n(234213),el=n(955301),ec=n(76237),ed=n(453783),eu=n(729705),em=n(87709),ep=n(442133),eh=n(253244),e_=n(119925),eg=n(938226),ef=n(900862),eE=n(49407),ey=n(535860),eb=n(432023),ev=n(362679),eT=n(13556);function eI(){return(0,i.d4)(e=>{let r=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.exportSettings,a=e.mirror.selectionProperties.name;return 1===r&&n&&(0,j.hS)(n)&&n.length>0&&null!=a?a.slice(0,64):""})}let eS=class e extends a.PureComponent{constructor(e){super(e),this.exportList=(0,w.xx)(e=>(0,j._W)(e,[]).map(eE.m)),this.onExportChange=(e,r)=>{let n=0===e.length,a=n?J.zk.NO:r;V.Y5.updateSelectionProperties({exportSettings:e},{shouldCommit:a}),n&&(V.Y5.updateSelectionProperties({exportBackgroundDisabled:!1},{shouldCommit:r}),this.setState({isRenameLayersEnabled:!1}))},this.addProperty=e=>{let r=this.exportList(this.props.exportSettings),n=function(e){let r=!1,n=!1,a=!1;for(let i of e)(0,eE.O)(i)&&"CONTENT_SCALE"===i.constraint.type?(1===i.constraint.value&&(r=!0),2===i.constraint.value&&(n=!0),3===i.constraint.value&&(a=!0)):r=!0;let i={contentsOnly:!0,imageType:"PNG",constraint:{type:"CONTENT_SCALE",value:1},suffix:"",useAbsoluteBounds:!1,useBicubicSampler:!!(0,I.kc)().bicubic_image_sampler&&!(0,I.kc)().swap_image_sampling_default_export_setting,colorProfile:"DOCUMENT"};return r&&(n?a||(i.constraint.value=3,i.suffix="@3x"):(i.constraint.value=2,i.suffix="@2x")),i}(r);this.onExportChange(r.concat([n])),this.props.onAddClick?.()&&e.stopPropagation(),(0,T.sx)("editor-export-panel-add",{selectionIsCanvas:0===this.props.numSelected})},this.onClickExport=async()=>{if((0,T.sx)("Export Panel Export Clicked"),0===this.props.numSelected)(0,T.sx)("Export Picker Opened",{from:"export-panel"}),this.props.dispatch(M.u1({id:x.C9}));else{this.state.isRenameLayersEnabled&&await this.autoRenameFrameOnExport();let e=(0,j._W)(this.props.exportSettings,[]),r=e.filter(e=>!0===e.useBicubicSampler),n=e.filter(e=>!1===e.useBicubicSampler);T.az.trackDefinedEvent("rendering_and_animation.exported_export_setting_bicubic",{bicubicCount:r.length,nearestNeighborCount:n.length});let a=[this.props.currentPage];$.xY.includeOutsideContents(e)||(a=Object.keys(this.props.sceneGraphSelection)),(0,X.Dc)(X.hV.Export,this.props.saveAsState,this.props.dispatch,"export-selected-exportables-direct",a,"export-selected-exportables-direct"),this.props.dispatch(k.rg())}},this.shouldShowAIRenameLayersCheckbox=e=>(0,Y.A0)(y.uQ6.EXPORT_FRAME)&&(e>0||(0,j.gl)(this.props.exportSettings))&&(this.props.isSelectionRenamable||this.state.isRenameLayersRunning),this.autoRenameFrameOnExport=async()=>{this.props.isSelectionRenamable&&(this.setState({isRenameLayersRunning:!0}),S.atomStore.set(eg.zF,(0,K.Tr)(y.uQ6.EXPORT_FRAME)),(0,e_.B3)(eh.JT.AUTO_RENAME_LAYERS),await (0,e_.Ag)(eh.JT.AUTO_RENAME_LAYERS,K.Ay,{source:y.uQ6.EXPORT_FRAME,overwriteNames:!1,ignoreDescendants:!0}),this.setState({isRenameLayersRunning:!1,isRenameLayersEnabled:!1}))},this._checkboxAndButtonRow=new Z.H4(()=>{let e="";if(0===this.props.numSelected||null==this.props.numSelected){let{title:r}=(0,W.vk)("CANVAS","",this.props.openFile?.name||(0,D.t)("fullscreen.fullscreen_view_selector.untitled"),[]);e=(0,D.t)("fullscreen.properties_panel.export_title",{title:r})}else if(1===this.props.numSelected){let{title:r}=(0,W.vk)("RECTANGLE",this.props.singleNodeName,"",[]);e=this.props.standalone?(0,D.t)("fullscreen.properties_panel.export"):(0,D.t)("fullscreen.properties_panel.export_title",{title:r})}else e=(0,D.t)("fullscreen.properties_panel.export_this_props_num_selected_layers",{numSelected:this.props.numSelected});return a.createElement(el.z,{onClick:this.onClickExport,key:"export-button",recordingKey:C.Pt(this.props,"export"),disabled:!!this.state.isRenameLayersRunning},a.createElement(R.ph,{text:this.state.isRenameLayersRunning?(0,D.t)("fullscreen.properties_panel.export_generating_name"):e,tooltipPropsWhenTruncated:{"data-tooltip-type":Q.Ib.TEXT,"data-tooltip":e}}))}),this._shouldRenderPreviewThumbnail=()=>(0,j._W)(this.props.exportSettings,[]).length>0,this._previewThumbnail=new Z.H4(()=>{let e=this.props.exportSettings,r=e[0].useAbsoluteBounds||!1,n=e[0].useBicubicSampler||!1;return a.createElement(H.ZH,null,({documentExportColorProfile:e})=>a.createElement(eB,{key:"preview",shouldComputeThumbnails:this._shouldRenderPreviewThumbnail,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:this.props.currentPage,numSelected:this.props.numSelected,recordingKey:C.Pt(this.props,"previewThumbnail"),useAbsoluteBounds:r,useBicubicSampler:n,panelWidth:this.props.panelWidth,colorProfile:this.props.exportSettings&&!(0,j.gl)(this.props.exportSettings)?(0,G.A)(this.props.exportSettings,e):e}))}),this.state={isRenameLayersRunning:!1,isRenameLayersEnabled:this.getRenameLayersCheckboxStatusForSelection(e.sceneGraphSelection)}}singleNodeIdFrom(e){let r=Object.keys(e);if(1===r.length)return r[0]}getRenameLayersCheckboxStatusForSelection(r){let n=this.singleNodeIdFrom(r);return!!n&&e.renameLayersCheckedForNode.has(n)}componentDidUpdate(r,n){if(this.props.sceneGraphSelection===r.sceneGraphSelection)return;let a=this.singleNodeIdFrom(r.sceneGraphSelection);a&&(n.isRenameLayersEnabled?e.renameLayersCheckedForNode.add(a):e.renameLayersCheckedForNode.delete(a)),this.setState({isRenameLayersEnabled:this.getRenameLayersCheckboxStatusForSelection(this.props.sceneGraphSelection)})}render(){let e=this.props.openFile&&(0,q.Pe)(this.props.openFile),r=this.exportList(this.props.exportSettings);return a.createElement(L.k,{name:"export_panel"},a.createElement(ec.Zk,{className:v()({[ey.IN]:this.props.standalone,[ey.hi]:this.props.standalone&&0===r.length})},e?a.createElement("div",{className:ey.r9},a.createElement(ec.xw,{doNotReserveSpaceForChevron:!0,className:ey.dK},a.createElement(p.s,{className:ey.WO}),(0,D.tx)("fullscreen.properties_panel.export_disabled")),a.createElement(ec.JU,{className:ey.SO},a.createElement("span",null,(0,D.tx)("fullscreen.properties_panel.this_file_s_editor_has_disabled_exporting_copying_and_sharing.seat_rename")))):a.createElement(a.Fragment,null,a.createElement(eC,{title:this.props.title,standalone:this.props.standalone,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,openFile:this.props.openFile,propertyList:r,onChange:this.onExportChange,currentSelectedProperty:this.props.currentSelectedProperty,selectedPropertyType:y.rrT.EXPORT,addProperty:this.addProperty,recordingKey:C.Pt(this.props,"exportList"),isMixed:(0,j.gl)(this.props.exportSettings),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,onHeaderClick:r.length>0?this.props.onHeaderClick:A.lQ,headerClickTriggersAddProperty:this.props.headerClickTriggersAddProperty}),a.createElement(er.JH,{isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom||null},this._checkboxAndButtonRow.render({isVisible:r.length>0||(0,j.gl)(this.props.exportSettings)}),this.shouldShowAIRenameLayersCheckbox(r.length)&&a.createElement(ep.Ad,{label:null,input:a.createElement(l.S,{muted:!0,checked:this.state.isRenameLayersEnabled,onChange:()=>{this.setState({isRenameLayersEnabled:!this.state.isRenameLayersEnabled})},label:a.createElement(c.J,null,a.createElement("div",{className:ey.oB},(0,D.tx)("auto_rename_layers.rename_layers",{numLayers:this.props.numSelected}),a.createElement(ef.y,{helpUrlVariant:eh.JT.AUTO_RENAME_LAYERS})))})}),this._previewThumbnail.render({isVisible:this._shouldRenderPreviewThumbnail()})))))}};eS.notifierName="ExportNotifier",eS.renameLayersCheckedForNode=new Set,eS.isSelectionRenamable=e=>{let{detectedUnnamedLayers:r,exceedingLayerLimit:n}=(0,Y.Mc)(e,!0);return r&&!n};let ew=eS;function eA(e){let{selectionHandler:r}=e,n=a.useRef(null),i=(0,B.GS)();return a.createElement("div",{className:ey.fj},a.createElement(ei.MX,{selection:r,onChange:e.onChange,addProperty:e.addProperty,overrideAddPropertyTooltip:i?(0,D.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,isStylesPickerShown:!!e.pickerShown,showRemoveButton:!i,recordingKey:e.recordingKey,parent:n},a.createElement(et.a,{title:e.title,ref:n})))}function eC(e){let r=(0,i.wA)(),{selectedPropertyType:n,dropdownShown:o,pickerShown:s,onChange:l,propertyList:c}=e,d=C.c1(e),u=(0,j._W)(e.propertyList,[]).length<=1,m=(0,B.GS)(),p=a.useCallback(e=>{r(M.XE()),l((0,j._W)(c,[]).filter((r,n)=>n!==e)),V.Y5.deselectProperty()},[r,l,c]),h=a.useCallback((e,i,l,c,m,h,_,g,f)=>a.createElement(ex,{key:`export-${i}`,id:`${n}-${i}`,index:i,singletonRow:u,selectedPropertyType:n,exportSetting:e,selected:l,isDragging:c,hasFocus:m,onChange:h,onMouseDown:_,onMouseMove:g,onMouseUp:f,onRemoveExport:()=>p(i),dispatch:r,dropdownShown:o,pickerShown:s,recordingKey:d(i)}),[n,u,r,o,s,d,p]),_=e.standalone?a.memo(r=>a.createElement(eA,{...e,...r})):void 0;return a.createElement(ei.h6,{title:e.title||(0,D.t)("fullscreen.properties_panel.export"),openFile:e.openFile,propertyList:e.propertyList,onChange:e.onChange,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:e.selectedPropertyType,addProperty:e.addProperty,overrideAddPropertyTooltip:m?(0,D.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,renderProperty:h,pickerShown:e.pickerShown,dispatch:e.dispatch,showRemoveButton:!m,recordingKey:e.recordingKey,renderHeader:e.standalone?_:void 0,stylePickerShown:{isShown:!1},isMixed:e.isMixed,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,onHeaderClick:e.onHeaderClick,headerClickTriggersAddProperty:e.headerClickTriggersAddProperty})}eC.displayName="ExportList";class eN extends en.a3{}class eL extends ed.c${}let eO=ed.l6,eR=ed.c$,eP=[{type:"CONTENT_SCALE",value:.5},{type:"CONTENT_SCALE",value:.75},{type:"CONTENT_SCALE",value:1},{type:"CONTENT_SCALE",value:1.5},{type:"CONTENT_SCALE",value:2},{type:"CONTENT_SCALE",value:3},{type:"CONTENT_SCALE",value:4},{type:"CONTENT_WIDTH",value:512},{type:"CONTENT_HEIGHT",value:512}],eD=new U.mz,ek={format:e=>{switch(e){case"PNG":return"PNG";case"JPEG":return"JPG";case"SVG":return"SVG";case"PDF":return"PDF"}}},eM=e=>e.stopPropagation();function eF({id:e,recordingKey:r,exportSetting:n,pickerShown:o,dropdownShown:s,onConstraintChange:l,onImageTypeChange:p,onSuffixChange:g,onToggleModal:f,onRemoveExport:E}){let y=C.c1(r),b=(0,i.wA)(),T=(0,B.GS)(),S=(0,I.kc)().fpl_select_migration,w=eP.map((e,r)=>a.createElement(eL,{key:r,value:e,recordingKey:y("constraints",e.value)})),{recordingKey:A,...L}={onClick:f,onMouseDown:eM,recordingKey:y("settings"),"data-tooltip":(0,D.t)("fullscreen.export_panel.export_settings"),"data-tooltip-type":Q.Ib.TEXT};return a.createElement(a.Fragment,null,a.createElement(N.E,{name:"export_constraint_combo_box"},a.createElement(en.ow,{value:{select:T?eu.pW:void 0,inputComponent:T?eu.gm:void 0}},a.createElement(ed.tV,{value:{chevron:T?em.t:void 0}},a.createElement(eN,{isTokenizable:T,id:`export-constraint-${e}`,className:v()(ey.QU,T?ey.AL:void 0),inputClassName:T?ey.Ez:void 0,dropdownClassName:ey.J9,property:n.constraint,onChange:l,formatter:eD,dispatch:b,dropdownShown:s,onMouseDown:eM,recordingKey:y("contraints"),disabled:"SVG"===n.imageType||"PDF"===n.imageType},w)))),!T&&a.createElement(es.lq,{value:n.suffix,suffixClassName:ey.ei,onSuffixChange:g,recordingKey:y("suffix")}),a.createElement(N.E,{name:"export_image_type_select"},S?a.createElement(d.bL,{value:n.imageType,onChange:p,recordingKey:y("imageType")},a.createElement(d.l9,{width:"fill",label:a.createElement(c.h,null,(0,D.t)("fullscreen.properties_panel.export_settings_image_file_type"))}),a.createElement(d.mc,null,a.createElement(d.c$,{value:"PNG"},"PNG"),a.createElement(d.c$,{value:"JPEG"},"JPEG"),a.createElement(d.c$,{value:"SVG"},"SVG"),a.createElement(d.c$,{value:"PDF"},"PDF"))):a.createElement(eO,{id:`export-image-type-${e}`,className:ey.wm,inputClassName:ey.SL,chevronClassName:ey.tc,property:n.imageType,formatter:ek,onChange:p,dispatch:b,dropdownClassName:ey.PK,dropdownShown:s,onMouseDown:eM,recordingKey:y("imageType")},a.createElement(eR,{value:"PNG",recordingKey:y("imageType","png")}),a.createElement(eR,{value:"JPEG",recordingKey:y("imageType","jpeg")}),a.createElement(eR,{value:"SVG",recordingKey:y("imageType","svg")}),a.createElement(eR,{value:"PDF",recordingKey:y("imageType","pdf")}))),a.createElement(N.E,{name:"toggle_export_settings_modal_button"},a.createElement("span",{className:ey.uX},a.createElement(u.d,{"aria-expanded":!!o,"aria-label":(0,D.t)("fullscreen.export_panel.export_settings"),recordingKey:A,htmlAttributes:{...L,"data-test-id":"toggle-export-settings-modal-button"}},a.createElement(P.U,{svg:ev.A,fallbackSvg:eT.A},a.createElement(h.J,null))))),T&&!!E&&a.createElement(N.E,{name:"remove_export_button"},a.createElement(m.K,{onClick:E,"aria-label":(0,D.t)("fullscreen.properties_panel.tooltip_remove"),recordingKey:y("removeButton"),htmlAttributes:{onMouseDown:eM,"data-tooltip":(0,D.t)("fullscreen.properties_panel.tooltip_remove"),"data-tooltip-type":Q.Ib.TEXT}},a.createElement(_.O,null))))}function ex(e){let r=a.useRef(null),n=r=>{e.onChange({...e.exportSetting,suffix:r})},i=()=>e.pickerShown&&e.pickerShown.id===e.id?e.pickerShown:null,o=i(),{version:s}=(0,E.DP)(),l="ui3"===s,c=l?a.Fragment:"div",d=l?ey.v_:void 0;return a.createElement(c,null,a.createElement(ea.e,{ref:r,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow,dragging:e.isDragging,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,className:d},a.createElement(eF,{exportSetting:e.exportSetting,id:e.id,dropdownShown:e.dropdownShown,pickerShown:o,onConstraintChange:r=>{e.onChange({...e.exportSetting,constraint:r})},onImageTypeChange:r=>{var n,a;n=e.exportSetting,a=e.onChange,r!==n.imageType&&("PNG"===r?a({imageType:r,contentsOnly:n.contentsOnly,colorProfile:n.colorProfile,useAbsoluteBounds:n.useAbsoluteBounds,useBicubicSampler:n.useBicubicSampler,suffix:n.suffix,constraint:n.constraint}):"JPEG"===r||"PDF"===r?a({imageType:r,contentsOnly:n.contentsOnly,colorProfile:n.colorProfile,useAbsoluteBounds:n.useAbsoluteBounds,useBicubicSampler:n.useBicubicSampler,suffix:n.suffix,constraint:"PDF"===r?{type:"CONTENT_SCALE",value:1}:n.constraint,quality:"PDF"===r?eo.JI:eo.Ho}):"SVG"===r&&a({imageType:r,contentsOnly:n.contentsOnly,colorProfile:n.colorProfile,useBicubicSampler:n.useBicubicSampler,suffix:n.suffix,constraint:{type:"CONTENT_SCALE",value:1},svgIDMode:"IF_NEEDED",svgOutlineText:!0,svgForceStrokeMasks:!1,useAbsoluteBounds:n.useAbsoluteBounds}))},onToggleModal:n=>{if(n.stopPropagation(),i())e.dispatch(M.XE()),V.Y5.deselectProperty();else{let n=(0,ee.cn)(r.current,es.zk);V.Y5.updateAppModel({currentSelectedProperty:{type:e.selectedPropertyType,indices:[e.index]}}),e.dispatch(M.u1({id:e.id,initialX:n.x,initialY:n.y})),e.dispatch(F.sw())}},onSuffixChange:n,onRemoveExport:e.onRemoveExport,recordingKey:e.recordingKey})),o&&a.createElement(es.Tq,{exportSettings:e.exportSetting,onChange:e.onChange,pickerShown:o,dispatch:e.dispatch,recordingKey:C.Pt(e,"settings"),dropdownShown:e.dropdownShown,onSuffixChange:n,suffixClassName:ey.ei,isUI3:l}))}function eU(e){return a.createElement("div",{className:e.className||ey.cT},a.createElement("img",{src:e.thumbnail.src,width:e.thumbnail.displaySize.x,height:e.thumbnail.displaySize.y,alt:"preview of layer to be exported"}))}class eB extends a.PureComponent{constructor(e){super(e),this.toggleShown=()=>{this.setState({previewShown:!this.state.previewShown})},this.updateThumbnail=()=>{if(!this.state.previewShown||!this.props.shouldComputeThumbnails())return;let e=new O.Mi(this.props.panelWidth-30,this.props.panelWidth-30),r=z.WQ(e,this.props.useAbsoluteBounds,!!this.props.useBicubicSampler),n=null;r&&r.pixels&&r.pixelSize&&r.displaySize&&(n={src:z.Pv(r.pixels,r.pixelSize,this.props.colorProfile),displaySize:r.displaySize}),this.setState({thumbnail:n})},this.updateThumbnailAfterDelay=(0,o.s)(()=>this.updateThumbnail(),1e3),this.onSceneGraphChange=()=>{null!=this.state.previewGUID&&this.updateThumbnailAfterDelay()},this.state={previewIsCanvas:!0,previewGUID:null,previewShown:!1,thumbnail:null}}componentDidUpdate(e,r){e.colorProfile!==this.props.colorProfile&&(this.setState({thumbnail:null}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail());let n=!r.previewShown&&this.state.previewShown,a=e.panelWidth!==this.props.panelWidth;if(this.props.sceneGraphSelection===e.sceneGraphSelection&&!n&&!a)return;let i=this.props.sceneGraphSelection,o=this.props.numSelected;if((o>1||!this.state.previewShown)&&!a){this.setState({thumbnail:null,previewGUID:null});return}let l=0===o,c=l?this.props.currentPage:(0,s.o)(i);(c!==this.state.previewGUID||a)&&(this.setState({thumbnail:null,previewGUID:c,previewIsCanvas:l}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail())}componentDidMount(){V.Y5.fromFullscreen.on("pingSceneGraphEvent",this.onSceneGraphChange)}componentWillUnmount(){V.Y5.fromFullscreen.removeListener("pingSceneGraphEvent",this.onSceneGraphChange),this.updateThumbnailAfterDelay.cancel()}render(){return this.props.numSelected>1?null:a.createElement("div",null,a.createElement(N.E,{name:"toggle_export_preview_visibility_button"},a.createElement(ec.fI,{onClick:this.toggleShown,recordingKey:this.props.recordingKey,className:ey.q4},a.createElement(P.U,{svg:eb.A,className:this.state.previewShown?ey.ai:ey.hC},this.state.previewShown?a.createElement(g.O,null):a.createElement(f.k,null)),a.createElement(ec.JU,{className:ey.Pf},(0,D.tx)("fullscreen.properties_panel.preview")))),this.state.previewShown&&this.state.thumbnail&&a.createElement(eU,{thumbnail:this.state.thumbnail}))}}eB.displayName="PreviewThumbnail"},425708:(e,r,n)=>{n(411855),n(805014),n(875877),n(963993),n(923219),n(965636),n(427494),n(15092),n(797187),n(289765),n(94055),n(471340)},848969:(e,r,n)=>{n.d(r,{DK:()=>g,K0:()=>f,Me:()=>E,YW:()=>y});var a=n(411855),i=n(629019),o=n.n(i),s=n(157173),l=n(666308),c=n(137565),d=n(693565),u=n(238795),m=n(140835),p=n(851773),h=n(671044),_=n(783423);let g=a.forwardRef(function(e,r){let n=o()(e.className,e.containerClassName,h.U,e.disabled?h.Ah:h.pq,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.No]:e.isBackgroundTransparent});return a.createElement(f,{...e,className:n,ref:r},a.createElement(a.Fragment,null,a.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}),a.createElement(d.B,{className:h.ai,svg:_.A})))}),f=a.forwardRef(function(e,r){let n=(0,s.M)(r);function i(){n.current.blur()}let d=o()(e.className,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.Ah]:!e.selected&&e.disabled,[h.pq]:!e.selected&&!e.disabled,[h.No]:e.isBackgroundTransparent}),m=e.tooltipForScreenReadersOnly||!e.showTooltipWhenSelectedIsTrue&&e.selected,_=e.href?c.lt:c.GG;return a.createElement(_,{forwardedRef:n,className:d,style:e.style,tabIndex:null!=e.tabIndex?e.tabIndex:e.disabled?-1:0,onClick:e.disabled?void 0:e.onClick,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:r=>{switch(r.keyCode){case l.Uz.ENTER:case l.Uz.SPACE:(e.onMouseDown||e.onClick||e.onKeyDown)&&r.preventDefault(),e.onMouseDown?.(r),e.onKeyDown?e.onKeyDown(r):e.onClick?.(r);break;case l.Uz.ESCAPE:i()}},onPointerDown:e.disabled?void 0:e.onPointerDown,onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseUp:e.disabled?void 0:i,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave,onContextMenu:e.disabled?void 0:e.onContextMenu,href:e.disabled?void 0:e.href,type:e.type,target:e.target,"data-fullscreen-intercept":e["data-fullscreen-intercept"],"data-tooltip-type":m?null:e["data-tooltip-type"],"data-tooltip":m?null:e["data-tooltip"],"data-tooltip-show-immediately":m?null:e["data-tooltip-show-immediately"],"data-tooltip-max-width":m?null:e["data-tooltip-max-width"],"data-tooltip-show-above":m?null:e["data-tooltip-show-above"],"data-tooltip-shortcut-key":m?null:e["data-tooltip-shortcut-key"],"data-tooltip-offset-x":m?null:e["data-tooltip-offset-x"],"data-tooltip-offset-y":m?null:e["data-tooltip-offset-y"],"aria-label":e["aria-label"]??(0,p.En)(e),disabled:e.disabled,"aria-disabled":e.disabled,"data-onboarding-key":e["data-onboarding-key"],"data-testid":e.dataTestId,"aria-expanded":e["aria-expanded"],"aria-pressed":e["aria-pressed"],"aria-haspopup":e["aria-haspopup"],"aria-owns":e["aria-owns"],recordingKey:e.recordingKey},e.children||a.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}))}),E=(0,m.tf)(f),y=f;(0,m.tf)(y)},323062:(e,r,n)=>{n.d(r,{LB:()=>_,T7:()=>h,TF:()=>f,V9:()=>m,aK:()=>c,cB:()=>u,jO:()=>g,v2:()=>p});var a=n(879058),i=n(805014),o=n(245954),s=n(827473),l=n(957020);function c(e,r){let n=r.get(e)?.symbolId;if(n){let a,i;let o=r.get(n),s=o?.containingStateGroupId;if(o?.isState&&s){let e=r.get(s);e?.isStateGroup&&(a=e?.stateGroupKey,i=e?.sharedStateGroupVersion)}let{componentKey:l,sharedSymbolVersion:c}=o??{};return{instanceGUID:e,backingGUID:n,componentKey:l??void 0,stateGroupKey:a??void 0,symbolVersion:c??void 0,stateGroupVersion:i??void 0}}return null}function d(e,r,n){let a=(0,s.Av)(r);if(!a)return;let i=(0,o.UN)().developerFriendlyIdFromGuid(e.instanceGUID);n[a]?n[a].instanceIdsToUpdate.push(i):n[a]={updateAsset:r,instanceIdsToUpdate:[i]}}function u(e,r,n){let i={},o={};for(let r of n)for(let n of e)n.component_key&&(r.componentKey&&r.componentKey===n.component_key?r.symbolVersion&&r.symbolVersion!==n.content_hash&&d(r,n,i):r.componentKey&&n.oldSubscribedKeysToUpdate.includes(r.componentKey)?d(r,n,i):n.localIdsToUpdate.includes(r.backingGUID)&&d(r,n,i));for(let e of n)for(let n of r)if(n.key){if(e.componentKey&&e.stateGroupKey&&e.stateGroupKey===n.key)e.stateGroupVersion&&e.stateGroupVersion!==n.version&&Object.keys(n.newStateKeyToOutdatedItems).includes(e.componentKey)&&d(e,n,o);else for(let r of Object.keys(n.newStateKeyToOutdatedItems))e.componentKey&&n.newStateKeyToOutdatedItems[(0,a.ii)(r)].oldSubscribedKeysToUpdate.includes(e.componentKey)?d(e,n,o):n.newStateKeyToOutdatedItems[(0,a.ii)(r)].localIdsToUpdate.includes(e.backingGUID)?d(e,n,o):e.componentKey&&e.componentKey===r&&d(e,n,o)}return{componentInstanceUpdateInfo:i,stateInstanceUpdateInfo:o}}function m(e,r,n){return r&&n?{updateAsset:r,styleGUIDs:[...new Set([n,...e])]}:r?{updateAsset:r,styleGUIDs:e}:null}function p(e,r){return e.find(e=>r?.isLocalStyle?-1!==e.localIdsToUpdate.indexOf(r.GUID):!!r?.key&&-1!==e.oldSubscribedKeysToUpdate.indexOf(r.key)||e.key===r?.key&&r.version&&e.content_hash!==r.version)??null}function h(e,r){return e?r.filter(({key:r,version:n})=>e.oldSubscribedKeysToUpdate.includes(r)||r===e.key&&n!==e.content_hash).map(e=>e.nodeId).concat(e.localIdsToUpdate):[]}function _(e,r){return e.component_key&&e.content_hash?i.glU.getOutdatedComponentInstanceDevIds(e.component_key,e.content_hash,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,r||""):[]}function g(e,r){return i.glU.getOutdatedStateInstanceDevIds(e.version,e.newStateKeyToOutdatedItems,r||"")}function f(e){return e.type===l.PW.COMPONENT?_(e,void 0).length:g(e,void 0).length}},972467:(e,r,n)=>{n.d(r,{$:()=>_});var a=n(411855),i=n(188507),o=n(805014),s=n(32050),l=n(875877),c=n(923219),d=n(427494),u=n(176160),m=n(206102),p=n(779099),h=n(767731);function _(e){let r=(0,p.Rn)("restore-symbol-or-state-group"),n=(0,i.d4)(e=>e.mirror.appModel[r]),_=(0,d.B9)(),g=(0,l.useAtomValue)(u._S),f=(0,s.k9)(()=>{let r=new Set;for(let n of e){let e=_.get(n);if(e?.type!=="INSTANCE")continue;let a=e.symbolId;a&&r.add(a)}return r},[e,_]),{backingSymbolGUID:E,backingStateGroupGUID:y}=(0,h.nD)(f,_),b=a.useMemo(()=>(0,c.gl)(E)||null===E?null:_.get(E),[E,_]),v=a.useMemo(()=>(0,c.gl)(y)||null===y?null:_.get(y),[y,_]),T=a.useMemo(()=>!!b&&b.isSubscribedAsset&&b.sourceLibraryKey!==g,[b,g]),I=a.useMemo(()=>!!(b&&o.Egt.nodeIsSoftDeleted(b.guid)),[b]),S=a.useMemo(()=>!!(v&&o.Egt.nodeIsSoftDeleted(v.guid)),[v]),w=a.useMemo(()=>{if(v)return v;if(!b)return null;if(I){let e=o.Egt.findBestAncestorInRestorePath(b.guid),r=""===e?null:_.get(e);if(r?.isStateGroup)return r}return null},[b,v,I,_]),A=(0,i.d4)(m.lm),C=a.useMemo(()=>v&&S?v:b&&I?b:null,[b,I,S,v]),N=a.useMemo(()=>{let e;return e=C?C.isStateGroup?"STATE_GROUP":w?"SYMBOL_AS_STATE":"SYMBOL_AS_NON_STATE":null,n||(e=null),e},[n,C,w]),L=a.useMemo(()=>b?.componentKey&&A.get(b.componentKey)?"DELETED_SUBSCRIBED_STATE":"SYMBOL_AS_STATE"===N?"DELETED_LOCAL_STATE":null,[A,b,N]);return a.useMemo(()=>({backingSymbolGUID:E,backingStateGroupGUID:y,singleBackingSymbol:b,singleBackingStateGroup:v,isBackingSymbolShared:T,isBackingSymbolSoftDeleted:I,isBackingStateGroupSoftDeleted:S,affiliatedStateGroup:w,affiliatedStateGroupId:w?.guid,symbolOrStateGroupToRestore:C,restoreType:N,stateResetType:L}),[E,y,b,v,T,I,S,w,C,N,L])}},568631:(e,r,n)=>{n.d(r,{Cc:()=>e0,T:()=>eQ,lL:()=>e$});var a=n(411855),i=n(188507),o=n(511445),s=n(236891),l=n(552371),c=n(463844),d=n(520244),u=n(138225),m=n(148257),p=n(48484),h=n(79096),_=n(33011),g=n(629019),f=n.n(g),E=n(777535),y=n(991458),b=n(32050),v=n(18840),T=n(108982),I=n(841962),S=n(875877),w=n(666308),A=n(715149),C=n(563192),N=n(771952),L=n(612724),O=n(716511),R=n(569969),P=n(621847),D=n(132939),k=n(265851),M=n(76265),F=n(650981),x=n(47795),U=n(225371),B=n(716192),V=n(788843),G=n(20174),H=n(736041),W=n(622667),K=n(241162),Y=n(581713),$=n(864941),j=n(190500),z=n(639215),q=n(481954),Z=n(646534),X=n(811407),J=n(264259),Q=n(387583),ee=n(764428),et=n(739641),er=n(772691),en=n(568116),ea=n(176160),ei=n(661137),eo=n(827473),es=n(131776),el=n(835301),ec=n(285024),ed=n(835878),eu=n(354465),em=n(597185),ep=n(747765),eh=n(957020),e_=n(567095),eg=n(688656),ef=n(904954),eE=n(920432),ey=n(392695),eb=n(914530),ev=n(553920),eT=n(27365),eI=n(605369),eS=n(413050),ew=n(62257),eA=n(583044),eC=n(120900),eN=n(453783),eL=n(732767),eO=n(482868),eR=n(831723),eP=n(991944),eD=n(545893),ek=n(141588),eM=n(885521),eF=n(220718),ex=n(195102),eU=n(767731),eB=n(488527),eV=n(651634),eG=n(280999),eH=n(731719);let eW=(0,y.hG)(eB.jkd),eK=e=>{switch(e){case ev.rp.SMALL:return{height:22,width:22,gridClassName:""};case ev.rp.NORMAL:return{height:72,width:72,gridClassName:""};case ev.rp.WIDE:return{height:52,width:256,gridClassName:""};case ev.rp.THIN:return{height:22,width:22,gridClassName:""}}},eY=(e,r)=>{let n=eK(r),i=(0,eo.Gj)(e);return a.createElement(eI.lX,{key:i,item:e,height:n?.height,width:n?.width,showName:!1,shouldHideDescription:!0,shouldShowNamePopout:!0,isFigJam:!0,noBackground:!1,displayType:null===r?"list-compact":"grid",isSearch:!1,className:null===r?eV.Tv:eV.B_})};function e$(e,r){return a.createElement(eb.M,{item:e,shouldGenerateLocalThumbnail:!0,className:null===r?eV.Tv:eV.B_,draggable:!1})}let ej=e=>["drilldownItem-productComponent",e.node_id],ez=e=>e.length>1,eq=(0,F.fv)();function eZ(e){let{openFile:r,onSwapCallback:n,instanceSwapPickerShown:o,multiselect:u,onMultiselectCallback:p,selectedItems:h,scrollContainerHeight:g,isLoadingSubscribedLibraries:y,shouldPerformSwapOnClick:C,itemsToSwap:N,incrementNumSearchesForTracking:L,dropdownAccessory:P,pickerType:D,pickerToggleRef:F,preferredItems:U,overrideDefaultItem:Y,showPreferredSectionByDefault:eg,preferredValuesErrorComponent:eb,sessionId:eI,isSearching:ew,setIsSearching:eP,entrypointForLogging:eB}=e,eG=D===R.Zl.INSTANCE_SWAP_PICKER||D===R.Zl.PREFERRED_VALUES_PICKER,eH=(0,R.qc)(),[eK]=(0,eF.Pk)(),ez=eH&&!eK,{library:eZ,dropdownShown:eX,sceneGraphSelection:eJ,isListView:eQ,loadingState:e0}=(0,T.R)(e=>({library:e.library,dropdownShown:e.dropdownShown,sceneGraphSelection:e.mirror.sceneGraphSelection,isListView:e.instanceSwapPickerListLayout,loadingState:e.loadingState})),e2=(0,S.useAtomValue)(Q.qp),e5=(0,i.d4)(e=>e.universalInsertModal.showing),e4=r.key,e7=(0,ea._G)(),e8=(0,i.wA)(),e3=u?null:h[0]??null,e6=a.useMemo(()=>Y?{fileKey:eq(Y),libraryKey:Y.library_key}:null,[Y]),e9=a.useMemo(()=>e6??q.uj(h),[e6,h]),te=e9?.libraryKey??null,tt=a.useMemo(()=>(0,ek.Dr)(eZ,eH?ek.Wx.COMPONENTS_FIRST:ek.Wx.SUBPATHS_FIRST,ez),[ez,eH,eZ]),{libraryMetadataMap:tr,libraryMetadataLoading:tn}=(0,ek.jB)(te),{publishedLibraryItemsByLibraryKey:ta,rootDrilldownItemsByLibraryKey:ti,getFileKeyFromLibraryKey__DEPRECATED:to}=(0,ek.Xx)({libraryKeyBackingSelectedItems:te,order:eH?ek.Wx.COMPONENTS_FIRST:ek.Wx.SUBPATHS_FIRST,libraryMetadataMap:tr,flattenSubpaths:ez}),ts=(0,en.g5)(e_.$A.Design).productComponents.map(ek.Kk),tl=a.useMemo(()=>U?U.map(ek.Kk):[],[U]),[tc,td,tu]=a.useMemo(()=>{if(te&&(ti[te]?.length??0)>0)return[te,ti[te],ta[te]];if(tt.length>0)return[(0,_.l)(r.libraryKey),tt,(0,eo.X0)(q.Qx(eZ))];if(eG){let e=Object.entries(ti).find(([e,r])=>r.length>0);if(e){let[r,n]=e;return[r,n,void 0]}}return[null,[],void 0]},[te,ti,tt,eG,ta,r.libraryKey,eZ]),[tm,tp]=a.useState(()=>eg?{type:R.iN.PREFERRED}:tc&&(eG||tc!==e7)?{type:R.iN.FILE,libraryIdentifier:{libraryKey:tc,fileKey:to(tc)}}:{type:R.iN.RECENT});eM.S.useLaunchedEvent({pickerType:D,sessionId:eI,dropdownSelection:tm,entrypoint:eB});let[th,t_]=a.useState(null),tg=(0,i.Pj)(),tf=(0,eL.Nv)(!0),tE=eM.S.useOpenFileProperties(),ty=a.useCallback(e=>tm.type===R.iN.FILE?tm.libraryIdentifier.libraryKey===e7?e.filter(e=>"LEAF"===e.type&&e.item.isLocal):e.filter(e=>"LEAF"===e.type&&(0,z.Ui)(e.item,tm.libraryIdentifier.libraryKey)&&(0,eo.Av)(e.item)):tm.type===R.iN.PREFERRED?e.filter(e=>"LEAF"===e.type&&U&&!!U.find(r=>r.node_id===e.item.node_id)):e,[tm,e7,U]),tb=a.useMemo(()=>tm.type===R.iN.FILE?tm.libraryIdentifier.libraryKey===e7?{type:eT.I.LOCAL}:{type:eT.I.FILE,...tm.libraryIdentifier}:{type:eT.I.ALL},[tm,e7]),tv=a.useCallback(async(e,r,n)=>{if(y)return[];ec.YG.refreshSourcesIfNeeded(tg);let a=h.map(e=>{let{type:r}=e,n=r===eh.PW.COMPONENT?e.component_key:e.key;if(n)return{type:r,key:n}}).filter(e=>void 0!==e),i=(await (0,es.V)(e,tb,el.Cn.InstanceSwapper,{preferLocal:!0,includeOnlySubscribed:!0,libraryIdentifierBackingSelectedItems:e9??void 0,selectedItems:a,queryId:n,sessionId:r})).normalizedSearchResults.filter(e=>e.type!==eh.PW.MODULE).map(e=>({item:e,score:e.score})),o=(0,O.xd)(i.map(e=>e.item),e=>e.name,e=>e.library_key+e.node_id);if(eG){let a=ty(o).length;E.az.trackDefinedEvent("instance_swap_picker.search",{...tE,sessionId:eI,searchSessionId:r,query:e,queryId:n,numResults:o.length,numFilteredResults:a,aiResultsEnabled:tf,dropdownType:(0,R.Z4)(tm,e7),libraryKey:tm.type===R.iN.FILE?tm.libraryIdentifier.libraryKey:void 0,isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER})}else(0,E.sx)("Component Insert Search",{searchSessionId:r,query:e,queryId:n,numResults:o.length,aiResultsEnabled:tf});return L(),o},[y,tg,tb,e9,h,tf,eG,L,ty,tE,eI,tm,e7,D]),tT=a.useCallback((e,r)=>{e.preventDefault(),e.stopPropagation(),e8(x.j7({type:ey.j,data:{component:r.item,position:{top:e.clientY,left:e.clientX}}}))},[e8]),{validDropdownSelection:tI,validRootDrilldownItems:tS}=a.useMemo(()=>{if(tm.type===R.iN.RECENT&&ew)return{validDropdownSelection:tm,validRootDrilldownItems:ts};let e=[];if(tm.type===R.iN.PREFERRED&&tl.length>0?e=tl:tm.type===R.iN.RECENT&&ts.length>0?e=ts:tm.type===R.iN.FILE&&ti[tm.libraryIdentifier.libraryKey]?e=ti[tm.libraryIdentifier.libraryKey]:tm.type===R.iN.FILE&&e7===tm.libraryIdentifier.libraryKey&&(e=tt),0===e.length){let e,r;if(tc)e={type:R.iN.FILE,libraryIdentifier:{libraryKey:tc,fileKey:to(tc)}},r=td;else if(tl.length>0)e={type:R.iN.PREFERRED},r=tl;else if(ts.length>0)e={type:R.iN.RECENT},r=ts;else if(Object.keys(ti).length>0){let n=Object.keys(ti)[0];e={type:R.iN.FILE,libraryIdentifier:{libraryKey:n,fileKey:to(n)}},r=ti[n]}else e={type:R.iN.RECENT},r=ts;return{validDropdownSelection:e,validRootDrilldownItems:r}}return{validDropdownSelection:tm,validRootDrilldownItems:e}},[tm,ew,tl,ts,ti,e7,tt,tc,to,td]),tw=a.useMemo(()=>{if(u){if(e9&&tu)return Y?{[Y.library_key]:q.O9(Y,tu)}:{[e9?.libraryKey]:(0,ek.OK)(h,tu)}}else{let e=Y||e3;if(e&&tu){let r=q.O9(e,tu);return{[e.library_key]:r}}}return{}},[u,e9,tu,h,Y,e3]),[tA,tC]=a.useState({}),tN=a.useMemo(()=>({...tw,...tA}),[tw,tA]),[tL,tO]=a.useState({index:-1,parentId:null}),tR=a.useCallback(()=>tO({index:-1,parentId:null}),[]),tP=a.useCallback((e,r)=>{tR(),tI&&tI.type===R.iN.FILE&&(tC({[tI.libraryIdentifier.libraryKey]:e}),tC({[tI.libraryIdentifier.libraryKey]:e}),eG&&E.az.trackDefinedEvent("instance_swap_picker.navigate",{...tE,sessionId:eI,direction:r,path:e.join(" / "),libraryKey:tI.libraryIdentifier.libraryKey,viewMode:eQ?"list":"grid",isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER}))},[tR,eQ,eG,tE,D,eI,tC,tI]),tD=a.useMemo(()=>tI.type===R.iN.FILE&&tN[tI.libraryIdentifier.libraryKey]||[],[tI,tN]),tk=(0,eO.b)({hideTooltips:!0}),tM=(0,$.n1)(),tF=a.useCallback(()=>{D!==R.Zl.PREFERRED_VALUES_PICKER&&(o.isShown&&o.modal?(o.returnFocusToToggle&&F?.current&&F.current.focus(),e8(W.jD()),e8((0,B.vq)())):D===R.Zl.RESOURCE_INSERT_MODAL&&e5&&(e8(K.b({seen_component_onboarding_modal:!0})),tk()))},[o,F,e8,D,tk,e5]),tU=a.useCallback(e=>{if(eQ)return null;let r=e.filter(e=>"LEAF"===e.type).map(e=>e.item);return(0,ev.PI)(r)},[eQ]),tB=a.useCallback(r=>{let n;n=r.type===R.iN.PREFERRED?{type:R.iN.PREFERRED}:r.type===R.iN.RECENT?{type:R.iN.RECENT}:{type:R.iN.FILE,libraryIdentifier:r.libraryIdentifier},E.az.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:tf,entryPoint:"instance-swap",featureSlug:"library-filter-usage"}),tp(n),e.searchBarRef?.current&&e.searchBarRef.current.focus(),eG?E.az.trackDefinedEvent("instance_swap_picker.library_switch",{...tE,sessionId:eI,dropdownType:(0,R.Z4)(n,e7),libraryKey:n.type===R.iN.FILE?n.libraryIdentifier.libraryKey:void 0,isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER}):(0,E.sx)("Component Insert Library Switch",{isSearching:ew})},[tf,e.searchBarRef,eG,tE,eI,e7,D,ew]),tV=(0,ei.sZ)(),tG=(0,em.Oe)(tV),tH=tm.type===R.iN.FILE?tm.libraryIdentifier.libraryKey:void 0,tW=(0,Z.Fl)(),tK=a.useMemo(()=>({format:r=>r.type===R.iN.RECENT?ew?(0,M.t)("design_systems.instance_swap_picker.all_libraries"):e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?(0,M.t)("universal_insert.recents"):(0,M.t)("design_systems.instance_swap_picker.recently_used"):r.type===R.iN.PREFERRED?(0,M.t)("design_systems.instance_swap_picker.preferred"):r.type===R.iN.FILE?r.libraryIdentifier.libraryKey===e7?(0,M.t)("design_systems.instance_swap_picker.created_in_this_file"):tr[r.libraryIdentifier.libraryKey]?.name??"":"",isEqual:(e,r)=>e.type===r.type&&(e.type!==R.iN.FILE||r.type!==R.iN.FILE||e.libraryIdentifier.libraryKey===r.libraryIdentifier.libraryKey)}),[ew,e.pickerType,e7,tr]),tY=a.useMemo(()=>{switch(tm.type){case R.iN.FILE:if(tm.libraryIdentifier.fileKey===e4)return"Local components";return"Subscribed libraries";case R.iN.RECENT:return"Recently used";case R.iN.PREFERRED:return"Preferred values"}},[tm,e4]),t$=a.useCallback(()=>{e8(H.to({type:eC.T,data:{initialTab:eh.Wv.LIBRARIES,entrypoint:eA.r6.INSTANCE_SWAP_BROWSE_LIBRARIES_LINK}}))},[e8]),tj=a.useCallback(e=>{if("LEAF"!==e.type||0===h.length)return!1;let{item:r}=e;if(th&&!u){let e=(0,eU.Ml)(th,Object.keys(eJ));if(eu.VP(e0,e))return r.node_id===th.node_id&&(0,z.EF)(r,th)}return h.some(e=>r.type===eh.PW.COMPONENT&&e.type===eh.PW.COMPONENT?!!r.component_key&&r.component_key===e.component_key||!r.component_key&&!e.component_key&&r.node_id===e.node_id:r.type===eh.PW.STATE_GROUP&&e.type===eh.PW.STATE_GROUP&&(!!r.key&&r.key===e.key||!r.key&&!e.key&&r.node_id===e.node_id))},[th,eJ,e0,u,h]),tz=a.useCallback(e=>{let{currentDrilldownItems:r,index:n,parentId:a}=e,i=Math.max(Math.min(tL.index,n),0),o=Math.min(Math.max(tL.index,n),r.length-1),s=r.slice(i,o+1).filter(e=>"LEAF"===e.type);p?.(s.map(e=>e.item),tj(r[n])?ek.Wu.DESELECT:ek.Wu.SELECT),tO({index:n,parentId:a})},[tj,p,tL.index]),tq=(0,er.u)({alwaysSwap:eG,canSwap:C,itemsToSwap:N,openFileKey:e4,onSwap:n,sourceForTracking:"Instance Swap Picker"}),tZ=(0,ep.He)(),tX=(0,eE.CK)(),tJ=a.useCallback((e,n,a,i,o)=>{if(!e4)return;if(u&&i){if(e.shiftKey&&-1!==tL.index&&tL.parentId===i.parentId){tz(i);return}tO({index:i.index,parentId:i.parentId})}let s=e.altKey;th&&e8(G.yH({key:(0,eU.Ml)(th,Object.keys(eJ))})),t_(n.item),tq({altKey:s},n.item,o?.queryId),tF();let c=n.item.library_key,d=(0,ed.ko)(c,e7??(0,_.l)(""),tZ),m={aiResultsEnabled:tf,assetKey:(0,eo.Av)(n.item),position:i?.index,reciprocalRank:(0,l.Et)(i?.index)?1/(1+i?.index):void 0,query:o?.query,queryId:o?.queryId,scoreAi:n.item.ai_score??void 0,scoreLexical:n.item.lexical_score??void 0,sessionId:eI,dropdownType:(0,R.Z4)(tm,e7),fromSearch:a,libraryKey:c,libraryType:d,viewMode:eQ?"list":"grid",productType:(0,j.pi)({editorType:r?.editorType})},p={...tE,...m,type:n.item.type===eh.PW.COMPONENT?"component":"state_group",searchSessionId:eI};if(D===R.Zl.INSTANCE_SWAP_PICKER){let e=function(e){return e?e.type===eh.PW.COMPONENT?e.component_key:e.type===eh.PW.STATE_GROUP?e.key:void 0:void 0},r=h[0],a={prevInstanceType:r?.type,prevInstanceNodeId:r?.node_id,prevInstanceComponentKey:e(r)},i=n.item,o={newInstanceItemType:i.type,newInstanceNodeId:i.node_id,newInstanceComponentKey:e(i)};E.az.trackDefinedEvent("instance_swap_picker.insert_instance",{...p,...a,...o}),E.az.trackDefinedEvent("asset_search.result_inserted",{...m,assetType:p.type,entryPoint:"instance-swap",fileKey:tE.fileKey,fileOrgId:tE.orgId,fileTeamId:tE.teamId,userId:tE.userId,componentSuggestionSessionId:tX})}else if(D===R.Zl.PREFERRED_VALUES_PICKER){let e=tj(n);(0,E.sx)("Preferred Values Picker Toggle Component",{...p,action:e?"deselect":"select"})}else(0,E.sx)("Component Insert Panel Insert Instance",{type:n.item.type===eh.PW.COMPONENT?"component":"state_group",fromSearch:a,altKey:s,viewMode:eQ?"list":"grid",dropdownType:(0,R.Z4)(tm,e7)})},[e4,u,th,tq,tF,e7,tZ,tf,eI,tm,eQ,r?.editorType,tE,D,tL.index,tL.parentId,tz,e8,eJ,h,tj,tX]),tQ=a.useRef(null),t0=a.useCallback(e=>{e&&setTimeout(()=>tQ.current?.focus(),0)},[]),t1=(0,eo.fc)(),t2=a.createElement(a.Fragment,null,a.createElement(ex.p,{id:(0,R.YU)(D),property:tI,formatter:tK,rightIcon:a.createElement(et.P,{libraryKey:tH}),onChange:tB,dispatch:e8,dropdownShown:eX,dropdownAlignment:"left",dropdownWidth:230,openOnKeyPressed:[w.Uz.SPACE,w.Uz.ENTER],inputClassName:D===R.Zl.RESOURCE_INSERT_MODAL?eV.je:void 0,className:D===R.Zl.RESOURCE_INSERT_MODAL?eV.kc:eV.Kv,inputRef:tQ,onDropdownHidden:t0,role:"combobox",dataTestId:"instance-swap-picker-library-select"},(()=>{function e(e){return a.createElement(ex.c,{key:(0,R.ez)(e),value:e})}function n(e){return a.createElement(ex.c,{key:(0,R.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:a.createElement(ee.t,null)})}function i(e){return a.createElement(ex.c,{key:(0,R.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:a.createElement(X.FX,null)})}if(y&&(0,I.kc)().dse_instance_swap_perf)return a.createElement(ex.c,{key:"loading",value:{type:R.iN.FILE,libraryIdentifier:{fileKey:"loading",libraryKey:(0,_.l)("loading")}},disabled:!0},a.createElement("div",{className:k.s.w150.mx12.flex.justifyCenter.$},a.createElement(c.k,null)));let{pass:o,fail:l}=(0,A.j)(Object.keys(ti),e=>{let r=tr[e];return!!r?.isHubFile}),d=[];if(tl.length&&d.push(e({type:R.iN.PREFERRED})),e9&&e9.libraryKey!==e7&&!eg&&!t1(e9.libraryKey)&&e2[e9.libraryKey]&&(d.length>0&&d.push(a.createElement(eN.sK,{key:"non-subscribed-divider"})),d.push(e({type:R.iN.FILE,libraryIdentifier:e9})),l=l.filter(e=>e!==te)),tG&&(0,J.NX)(tW)){let e=l.map(e=>tr[e]||null).filter(s.Vq).map(({name:e,libraryKey:r})=>({name:e,library_key:r}));(0,J.k9)({libraries:e,approvedLibraryKeysByResourceType:tW}),l=e.map(({library_key:e})=>e)}if((ew||ts.length>0)&&(d.length>0&&d.push(a.createElement(eN.sK,{key:"recent-divider"})),d.push(e({type:R.iN.RECENT}))),eG){for(let n of(tt.length>0&&(d.length>0&&d.push(a.createElement(eN.sK,{key:"local-divider"})),d.push(e({type:R.iN.FILE,libraryIdentifier:{fileKey:e4,libraryKey:(0,_.l)(r.libraryKey)}}))),l.length>0&&d.length>0&&d.push(a.createElement(eN.sK,{key:"subscribed-divider"})),l))tG&&(0,J.sF)(n)?d.push(i({type:R.iN.FILE,libraryIdentifier:{fileKey:to(n),libraryKey:n}})):d.push(e({type:R.iN.FILE,libraryIdentifier:{fileKey:to(n),libraryKey:n}}));if(tM)for(let e of o)d.push(n({type:R.iN.FILE,libraryIdentifier:{fileKey:to(e),libraryKey:e}}));return d}for(let n of(tt.length>0&&d.push(e({type:R.iN.FILE,libraryIdentifier:{fileKey:e4,libraryKey:(0,_.l)(r.libraryKey)}})),l.length>0&&d.push(a.createElement(eN.sK,{key:"subscribed-divider"})),l))tG&&(0,J.sF)(n)?d.push(i({type:R.iN.FILE,libraryIdentifier:{fileKey:to(n),libraryKey:n}})):d.push(e({type:R.iN.FILE,libraryIdentifier:{fileKey:to(n),libraryKey:n}}));if(tM)for(let e of o)d.push(n({type:R.iN.FILE,libraryIdentifier:{fileKey:to(e),libraryKey:e}}));return d})()),P),t5=a.useRef(null),t4=a.createElement("div",{className:D===R.Zl.RESOURCE_INSERT_MODAL?f()(eV.FK,eV.k2):eV._M},eH?a.createElement(a.Fragment,null,t2,a.createElement("div",{className:k.s.ml4.$},a.createElement(eF.sX,{pickerType:D,includeFolderSetting:tI.type===R.iN.FILE&&!ew,ref:t5,sessionId:eI,queryId:ew?e.queryId:void 0}))):t2),t7=a.useCallback(()=>{tp({type:R.iN.RECENT}),eG&&E.az.trackDefinedEvent("instance_swap_picker.search_all_libraries_from_empty",{...tE,sessionId:eI,query:e.query,queryId:e.queryId,isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER})},[eG,tE,D,e.query,e.queryId,eI]),t8=a.createElement(e1,{onClick:t7,type:tm.type}),t3=a.createElement("div",{className:eG?eV.y7:eV.uR,style:{height:g+(e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?eR.Kr:0)}},a.createElement("div",{className:eG?eV.qv:void 0},(0,M.tx)("design_systems.instance_swap_picker.no_components")),a.createElement("div",{className:k.s.mt8.if(!eG,k.s.flex.itemsCenter.justifyCenter.mt12).$},a.createElement(d.$n,{onClick:t$,variant:"secondary",iconPrefix:a.createElement(m.l,{className:k.s.mr2.$})},(0,M.tx)("design_systems.instance_swap_picker.browse_libraries")))),t6=(0,S.useAtomValue)((0,el.NH)(el.Cn.InstanceSwapper)),t9=function(e,r,n,a,i){let o=(0,S.useAtomValue)(Q.qp),s=(0,b.k9)(()=>r?new Set(r.map(e=>(0,eo.Av)(e))):[],[r]),l=(0,b.k9)(()=>{Object.keys(o)},[o]),c=(0,v.h)(e),d=(0,v.h)(l),u=(0,v.h)(s),m=(0,v.h)(n)&&!n,p=(0,v.h)(a),h=(0,v.h)(i)&&!i;return c||d||u||m||p||h}(e9,a.useMemo(()=>te?ta[te]??null:null,[te,ta]),y,h,t6),re=a.useMemo(()=>h.map(e=>e.library_key).filter(e=>e!==e7),[e7,h]);(0,eS.K)({otherLibraryKeys:re,disabled:!(0,I.kc)().dse_instance_swap_perf});let rt=a.useMemo(()=>{if(tn)return!0;if((0,I.kc)().dse_instance_swap_perf){if(tI.type===R.iN.FILE)return!(0,eo.El)(tI.libraryIdentifier.fileKey,tI.libraryIdentifier.libraryKey);if(tI.type===R.iN.RECENT)return(0,eu.VP)(e0,V.fi);if(tI.type===R.iN.PREFERRED)return eu.VP(e0,(0,ef._A)(e4))}return y||(0,eu.VP)(e0,V.fi)},[tn,y,e0,tI,e4]);(0,eD.x)(rt);let rr=Object.keys(ti).length>0;return a.createElement(O.uO,{recordingKey:e.recordingKey,scrollContainerHeight:g,onSearch:tv,searchFilter:ty,setIsSearching:eP,onLeafItemContextMenu:tT,onLeafItemDrilldown:tJ,onLeafItemDraggable:eG?void 0:{sourceForTracking:"component-insert-modal",afterSuccessfulInsert:tF,sectionNameForTracking:tY},rootDrilldownItems:tS,initialPath:tD,beforeItems:t4,beforeItemsRefs:[tQ,t5],focusBeforeItems_DEPRECATED_UI2:()=>tQ.current?.focus(),emptyState:t3,isSelectedItem:tj,multiselect:u,onMultiselectCallback:p,getBackgroundColorForLeafItemThumbnail:q.zR,getLeafItemTooltip:eG?ek.pf:void 0,getLeafItemThumbnail:eG||eQ?e$:eY,drilldownItemsRecordingKey:"instanceSwapDrilldownItems",drilldownItemsKeySupplement:tm.type===R.iN.FILE?tm.libraryIdentifier.libraryKey:tm.type,getLeafItemRecordingKey:ej,getThumbnailGridLayoutForItems:tU,onDrilldownPathChange:tP,additionalRowBottomMargin:eG?O.qy:0,renderLeafItemNames:!!eG||eQ,searchBarRef:e.searchBarRef,pickerToggleRef:F,extraHeightOnSearch:eG||e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?0:eW,validLibrariesArePresent:rr,isLoading:rt,searchDebounceTime:e.searchDebounceTime,searchEmptyStateCTA:t8,searchBarPlaceholderText:(()=>{if(tm.type===R.iN.PREFERRED)return(0,M.t)("design_systems.instance_swap_picker.search_preferred");if(tm.type===R.iN.RECENT)return(0,M.t)("design_systems.instance_swap_picker.search_all_libraries");if(null!=tm.libraryIdentifier&&tr[tm.libraryIdentifier.libraryKey]){let e=tr[tm.libraryIdentifier.libraryKey]?.name??"";return(0,M.t)("design_systems.instance_swap_picker.search_filename",{filename:e})}return(0,M.t)("design_systems.instance_swap_picker.search")})(),pickerType:e.pickerType,errorComponent:tm.type===R.iN.PREFERRED?eb:void 0,query:e.query,setQuery:e.setQuery,contextValue:e.drilldownPickerContextValue,shouldUpdateServerResults:t9,searchTypeOption:tb,sessionId:eI})}let eX=(0,F.fv)();function eJ(e){let{multiselect:r,onMultiselectCallback:n,selectedItems:o,searchDebounceTime:s,shouldPerformSwapOnClick:l=!0,itemsToSwap:c,onSwapCallback:d,searchBarRef:u,setNumSearchesForTracking:m,scrollContainerHeight:p,pickerToggleRef:h,toggleGridViewButton:_,preferredItems:g,overrideDefaultItem:f,preferredValuesErrorComponent:E,sessionId:y,entrypointForLogging:b}=e,v=a.useRef(f).current,{instanceSwapPickerShown:S,loadingState:w}=(0,T.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,loadingState:e.loadingState})),A=(0,i.d4)(ea.tB),C=(0,ea._G)(),N=a.useMemo(()=>!!g&&ez(g),[g]),L=A?.key||null,O=a.useMemo(()=>v?{fileKey:eX(v),libraryKey:v.library_key}:null,[v]),P=a.useMemo(()=>O??q.uj(o),[O,o]),D=(0,ew.U)(),k=(0,eo.fc)(),M=a.useMemo(()=>{if(null==A||null==L)return!0;if(P&&A&&k(P.libraryKey)&&!(0,eo.El)(P.fileKey,P.libraryKey)){let e=(0,eo.Mb)(P.libraryKey);return!eu.D2(w,e)}if(N&&P&&P.libraryKey!==C)return eu.VP(w,(0,ef._A)(L));if((0,I.kc)().dse_instance_swap_perf)return D;let e=(0,eU.yD)(L);return!eu.D2(w,e)},[A,L,P,k,N,C,w,D]),F=a.useCallback(()=>m?.(e=>e+1),[m]);return(S.isShown||e.pickerType!==R.Zl.INSTANCE_SWAP_PICKER)&&L&&A?a.createElement(eZ,{openFile:A,instanceSwapPickerShown:S,multiselect:r,onMultiselectCallback:n,selectedItems:o,scrollContainerHeight:p,recordingKey:e.recordingKey,shouldPerformSwapOnClick:l,itemsToSwap:c,onSwapCallback:d,pickerToggleRef:h,searchBarRef:u,isLoadingSubscribedLibraries:M,searchDebounceTime:s,incrementNumSearchesForTracking:F,pickerType:e.pickerType,dropdownAccessory:e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?_:null,preferredItems:g,preferredValuesErrorComponent:E,overrideDefaultItem:v,showPreferredSectionByDefault:N,query:e.query,setQuery:e.setQuery,drilldownPickerContextValue:e.drilldownPickerContextValue,sessionId:y,isSearching:e.isSearching,setIsSearching:e.setIsSearching,queryId:e.queryId,entrypointForLogging:b}):null}function eQ(e){let{pickerType:r,initialWidth:n,initialHeight:s,title:l,pickerToggleRef:c}=e,d=r===R.Zl.INSTANCE_SWAP_PICKER||r===R.Zl.PREFERRED_VALUES_PICKER,{instanceSwapPickerShown:u,dropdownShown:m}=(0,T.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,dropdownShown:e.dropdownShown})),p=(0,i.wA)(),h=a.useRef(null),[_,g]=a.useState((0,N.g)()),f=u.isShown?new L.Mi(u.initialX,u.initialY):new L.Mi(0,0),y=a.useCallback(()=>{m?.type===(0,R.YU)(r)&&p(x.oB())},[p,m,r]),b=a.useCallback(()=>{u.isShown&&u.modal&&p((0,B.qX)({...u,modal:!1,returnFocusToToggle:!1})),h.current?.focus()},[p,u]),[v,I]=a.useState(0),S=a.useCallback(()=>{(0,E.sx)(`${d?"Instance Swap Picker":"Component Insert"} Total Searches`,{numSearches:v}),p((0,B.vq)())},[p,v,d]),w=a.useRef(null),A=d?320:428,{modalWidth:O}=(0,R.TQ)(r),P=(0,R.qc)(),D=a.useCallback(()=>u.isShown&&s?s:A,[A,s,u]),[k,M]=a.useState(D),F=w.current?.getEl();a.useLayoutEffect(()=>{let e=(0,o.s)(()=>{if(!F)return;let e=F.getBoundingClientRect();e.bottom>window.innerHeight&&M(k-(e.bottom-window.innerHeight)-20)},200);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[k,M,F]);let U=a.useRef(void 0),[V,G]=a.useState(""),[H,W]=a.useState(!1),K=a.createElement(e0,{isSwapPicker:d,searchBarRef:h,sessionId:_,queryId:H?U.current:void 0}),Y=a.createElement("div",{className:eV.Hn},a.createElement("div",{className:eV.D0},l),!P&&K),$=a.useCallback(()=>{m?.type.includes(eF.fn)&&p(x.oB())},[p,m?.type]);return a.createElement(eP.vx,{title:d?Y:l,initialPosition:f,initialHeight:k,initialWidth:n??O,isCloseHidden:d&&!P,dragHeaderOnly:!0,onDragStart:y,onDragEnd:b,onClose:S,ref:w,autoflowHeight:!0,recordingKey:C.Pt(e.recordingKey,"modal"),disableHeaderBottomBorder:P,onClick:$},a.createElement(eJ,{...e,searchBarRef:h,toggleGridViewButton:K,setNumSearchesForTracking:I,scrollContainerHeight:k,pickerToggleRef:c,query:V,setQuery:G,sessionId:_,isSearching:H,setIsSearching:W,drilldownPickerContextValue:{queryId:U},queryId:U.current}))}function e0({isSwapPicker:e,isPreferredValues:r,searchBarRef:n,sessionId:o,queryId:s}){let l=(0,i.wA)(),c=eM.S.useTrackViewToggle({sessionId:o,queryId:s,isPreferredValues:!!r}),d=(0,i.d4)(e=>r?e.preferredValuesPickerListLayout:e.instanceSwapPickerListLayout),m=r?U.U8:U.fG,_=a.useCallback(a=>{a.stopPropagation(),l(m({isListLayout:!d})),n?.current&&n.current.focus(),e?c(!d):(0,E.sx)(`${r?"Preferred Values Picker":"Component Insert"} View Toggle`,{viewMode:d?"grid":"list"})},[l,m,d,n,e,c,r]);return a.createElement(u.K,{"aria-label":d?(0,M.t)("design_systems.instance_swap_picker.show_as_grid"):(0,M.t)("design_systems.instance_swap_picker.show_as_list"),onClick:_,recordingKey:C.Pt("toggleGridViewButton",r?"preferredValues":"instanceSwapPicker"),htmlAttributes:{onMouseDown:Y.dG,"data-tooltip":d?(0,M.t)("design_systems.instance_swap_picker.show_as_grid"):(0,M.t)("design_systems.instance_swap_picker.show_as_list"),"data-tooltip-type":eg.Ib.TEXT}},a.createElement(D.U,{svg:d?eG.A:eH.A},d?a.createElement(p.t,null):a.createElement(h.Z,null)))}function e1({onClick:e,type:r}){let n=(0,R.qc)();if(r===R.iN.RECENT)return null;let i=(0,M.tx)("design_systems.instance_swap_picker.search_all_libraries");return n?a.createElement(d.$n,{onClick:e,variant:"secondary"},i):a.createElement(P.N_,{onClick:e,className:eV.nf,canFocus:!0,trusted:!0},i)}},460168:(e,r,n)=>{n.d(r,{g:()=>u});var a=n(302245),i=n(923219),o=n(597112),s=n(404227),l=n(34062),c=n(767731);let d=e=>e.library;function u(){return(0,a.Mz)([(e,r,n)=>r,(e,r,n)=>n,d],(e,r,n)=>{if(!r.get(e))return null;let{selectedItem:a}=(0,o.XV)(e,n,r);return a})}(0,a.Mz)([d,s.dK,l.i2],(e,r,n)=>{let a=null,{backingSymbolGUID:s,backingStateGroupGUID:l}=(0,c.nD)(new Set(n),r);if(l&&(0,i.hS)(l)?a=l:s&&(0,i.hS)(s)&&(a=s),!a)return null;let{selectedItem:d}=(0,o.XV)(a,e,r);return d})},775211:(e,r,n)=>{n.d(r,{Ig:()=>h,OE:()=>f,dc:()=>_,oI:()=>y,rP:()=>g,y6:()=>b});var a=n(411855),i=n(269685),o=n(805014),s=n(509399),l=n(475824),c=n(1518),d=n(863599),u=n(373247),m=n(509343);n(357614);var p=n(118157);let h=(()=>{let e=new d.o1({normalizeFactor:360,min:0,max:1}),r=new d.o1({normalizeFactor:100,min:0,max:1}),n=new d.t6({min:0,max:1}),s=new d.o1({normalizeFactor:255,min:0,max:1}),u={hsla:(n,a,i)=>i?`HSL ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.l)}`:`hsla(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.l)}%, ${a})`,hsba:(n,a,i)=>i?`HSB ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.v)}`:`hsba(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.v)}%, ${a})`,rgba:(e,r,n)=>n?`RGB ${s.format(e.r)} ${s.format(e.g)} ${s.format(e.b)}`:`rgba(${s.format(e.r)}, ${s.format(e.g)}, ${s.format(e.b)}, ${r})`,uicolor:(e,r,a)=>a?`UIColor(${n.format(e.r)}, ${n.format(e.g)}, ${n.format(e.b)}, ${r})`:`UIColor(red: ${n.format(e.r)}, green: ${n.format(e.g)}, blue: ${n.format(e.b)}, alpha: ${r})`};return()=>{let e=(0,m.Ku)();return a.useCallback((r,n)=>{let a=Number(r.a).toLocaleString("en",{maximumFractionDigits:2});switch(e){case o.NVY.HEX:let s=c.TI.format(r,n?.hexCSSValue?{withAlpha:1!==r.a}:n?.alphaInPercent?{withAlpha:1!==r.a,showDot:!0}:void 0);return`#${s}`;case o.NVY.RGB:return u.rgba(r,a,n?.eyedropperFormat);case o.NVY.CSS:if(n?.eyedropperFormat)return u.rgba(r,a,n?.eyedropperFormat);return l.F.format(r);case o.NVY.HSB:let d=(0,i.qN)(r);return u.hsba(d,a,n?.eyedropperFormat);case o.NVY.HSL:let m=(0,i.oB)(r);return u.hsla(m,a,n?.eyedropperFormat);case o.NVY.UIColor:return u.uicolor(r,a,n?.shortform??!1)}},[e])}})();function _(e,r,n){let a=new u.ZB(()=>e),i=e.opacity||1,o=[...e.color?[{...e.color,a:i*e.color.a}]:[],...e.stops?e.stops.map(e=>({...e.color,a:i*e.color.a})):[]];return{type:p.q.RAW,paint:e,colors:o,typeFormatter:a.format,valueFormatter:r,variableScope:n,encodedPaint:(0,s.GP)(e)}}function g(e,r,n,a=[]){return{type:p.q.STYLE,name:e,dsStyle:r,paints:n,styleGUIDs:a}}function f(e,r){let n=h();return a.useMemo(()=>e.map(e=>{let a=r(e);if(!a)return{value:e,color:void 0};let i=[a],o={color:a,opacity:a.a,type:"SOLID"};return{value:e,color:{type:p.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:i,typeFormatter:E,valueFormatter:n}}}),[r,e,n])}let E=()=>"SOLID";function y({color:e,colorVar:r,variableScope:n,displayValue:a}){let i=[e],o={color:e,opacity:e.a,type:"SOLID"};return r&&(o.colorVar=r),{type:p.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:i,typeFormatter:E,valueFormatter:a,variableScope:n}}function b(e,r){let n=h();return a.useMemo(()=>e.map(({color:e,colorVar:a})=>y({color:e,colorVar:a,variableScope:r,displayValue:n})),[e,n,r])}},878075:(e,r,n)=>{n.d(r,{P$:()=>ta,Pi:()=>ti,So:()=>tl,eT:()=>e6,rM:()=>tc,ss:()=>td});var a,i=n(411855),o=n(188507),s=n(511445),l=n(588172),c=n(462575),d=n(499325),u=n(574719),m=n(138225),p=n(32257),h=n(351966),_=n(721501),g=n(640978),f=n(691294),E=n(190952),y=n(747579);n(879058);var b=n(805014),v=n(851169),T=n(509399),I=n(245954),S=n(7408),w=n(629019),A=n.n(w),C=n(826212),N=n(777535);n(157173),n(108982);var L=n(841962);n(875877);var O=n(563192),R=n(137565);n(972142);var P=n(453956),D=n(45427),k=n(499875),M=n(693565),F=n(132939),x=n(259577),U=n(35353),B=n(76265),V=n(225371),G=n(524940),H=n(736041),W=n(472108),K=n(267369),Y=n(674505),$=n(535461),j=n(310020),z=n(1518),q=n(373247),Z=n(581713),X=n(835918),J=n(343373),Q=n(366172);n(509343);var ee=n(923219),et=n(357614),er=n(434992),en=n(748973),ea=n(965636),ei=n(515662),eo=n(125682);n(427494),n(176160);var es=n(424819),el=n(254903);n(827473);var ec=n(287327);n(189385),n(957020);var ed=n(756044),eu=n(612110),em=n(688656),ep=n(143364),eh=n(868911),e_=n(193578),eg=n(376545),ef=n(574371),eE=n(404714),ey=n(172322),eb=n(596651),ev=n(505105),eT=n(550387),eI=n(417370),eS=n(98551),ew=n(501717),eA=n(859877),eC=n(76237);n(737139);var eN=n(852746),eL=n(180155),eO=n(957042),eR=n(391107),eP=n(891720),eD=n(80005);n(742713);var ek=n(442133),eM=n(776297),eF=n(704137),ex=n(572278),eU=n(92481),eB=n(113843),eV=n(290912),eG=n(430772),eH=n(742995),eW=n(758232),eK=n(841567),eY=n(192845),e$=n(806565);n(30057);var ej=n(573225),ez=n(525624),eq=n(85175),eZ=n(671044),eX=n(277698),eJ=n(424148),eQ=n(819785),e0=n(695038),e1=n(27921),e2=n(874038),e5=n(953663),e4=n(641053);let e7=new Set([b.j0r.STROKE]),e8=e=>{Q.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},e3=(e,r,n)=>{(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-fill-change"),Q.Y5.updateSelectionProperties({fillPaints:e},{shouldCommit:r,overwrite:n??b.WXh.ONLY_WHEN_NOT_EMPTY}),(0,e_.a2)("fillPaints")},e6=i.memo(function(e){let{dispatch:r}=e,n=(0,e$.cJ)(),a=(0,J.GS)(),s=(0,o.d4)(e=>{let r=e.mirror.selectionProperties.fillPaints;return!r||(0,ee.hS)(r)&&0===r.length}),l=(0,eK.M)(),u=i.useCallback((e,{fromSearch:n}={})=>{r(G.AV({style:e,inheritStyleKeyField:"inheritFillStyleKey",fromSearch:n}))},[r]),m=(0,ee.E7)((0,en.b)("guid")),p=(0,eR.yT)({...e,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKey",selectedStyleGuid:m}),h=(0,eT.xm)(e),_=(0,i.useCallback)(()=>{(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-fill-color-picker-show")},[]),g=(0,el.o3)(el.nt.useGrid);return i.createElement(k.tH,{boundaryKey:"FillPanel",fallback:k.H4.NONE_I_KNOW_WHAT_IM_DOING},i.createElement(P.k,{name:"fill_panel"},i.createElement("div",{className:"displayContents","data-test-id":"fill_panel"},i.createElement(eC.Zk,null,i.createElement(eD.dD.Provider,{value:{useGrid:a&&g}},i.createElement(tr,{onChange:e3,onApplyStyle:u,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:b.rrT.FILL,recordingKey:O.Pt(e,"paintList"),pickerInStyleCreationShown:e.pickerInStyleCreationShown,onPickerShown:_,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,variableRerankingContext:l,...h,...p})),i.createElement(eb.JH,{isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom},(()=>{if(e.selectionContainsFrames&&e.hasExports&&!n){if(a){if(s)return;return i.createElement(ek.Ad,{label:i.createElement(i.Fragment,null),input:i.createElement(c.S,{muted:!0,mixed:e.exportBackgroundDisabled===ee.oV,checked:!1===e.exportBackgroundDisabled,onChange:e8,recordingKey:O.Pt(e,"exportDisableCheckbox"),label:i.createElement(d.J,{htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":em.Ib.TEXT}},(0,B.tx)("fullscreen.properties_panel.fill.show_in_exports")),htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":em.Ib.TEXT}})})}return i.createElement(eC.fI,{className:eX.Kx},i.createElement(eE.t,{className:eX.kv,id:"frame-background-export-background-disabled",property:e.exportBackgroundDisabled===ee.oV?ee.oV:!e.exportBackgroundDisabled,onChange:e8,recordingKey:O.Pt(e,"exportDisableCheckbox")}),i.createElement(eC.JU,{className:eX.mH,htmlFor:"frame-background-export-background-disabled","data-tooltip-type":em.Ib.TEXT,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports")},(0,B.tx)("fullscreen.properties_panel.fill.show_in_exports")))}})())))))});function e9(){(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-stroke-color-picker-show")}class te extends i.PureComponent{constructor(){super(...arguments),this.settingsId="stroke-settings",this.state={showSwapButton:!1,syncState:"NONE",individualBorderOption:ef.om.ALL},this.stopPropagation=e=>e.stopPropagation(),this.onPaintsChange=(e,r,n)=>{(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-stroke-change",{key:"color"}),Q.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:r,overwrite:n??b.WXh.ONLY_WHEN_NOT_EMPTY}),(0,e_.a2)("strokePaints")},this.onNonPaintsChange=(e,r=ed.zk.YES)=>{let n=(0,ee._W)(this.props.strokePaints,[]);if(n.length>0&&!n.find(e=>e.visible)){let e=n.map(e=>({...e,visible:!0}));Q.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:ed.zk.NO,overwrite:b.WXh.ONLY_WHEN_NOT_EMPTY})}Q.Y5.updateSelectionProperties(e,{shouldCommit:r}),(0,e_.a2)("strokePaints")},this.onApplyStyle=(e,{fromSearch:r}={})=>{this.props.dispatch(G.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:r}))},this.bordersAlignmentOnChange=(e,r=ed.zk.YES)=>{if(this.state.individualBorderOption!==ef.om.ALL){let{strokeAlign:r}=e;(0,N.sx)("Individual Border Alignment Changed",{position:(0,ee.hS)(r)?r:"__mixed__"})}this.onNonPaintsChange(e,r)},this.forwardedRef=i.createRef(),this.toggleSettings=()=>{if(this.props.pickerShown?.id===this.settingsId)this.props.dispatch(V.XE());else{if(!this.forwardedRef||!this.forwardedRef.current)return;(0,N.sx)("editor-paints-panel-advanced-stroke-show");let e=(0,ep.cn)(this.forwardedRef.current);this.props.dispatch(V.u1({id:this.settingsId,initialX:e.x,initialY:e.y})),this.props.dispatch(V.Uv()),this.props.dispatch(Y.sw())}},this.setIndividualBorderOption=e=>{this.setState({individualBorderOption:e})},this.selectBorderSides=(e,r=ed.zk.YES)=>{if(this.setState({individualBorderOption:e}),e===ef.om.CUSTOM)return;let n=e===ef.om.ALL,a={borderTopVisible:n||e===ef.om.TOP,borderRightVisible:n||e===ef.om.RIGHT,borderBottomVisible:n||e===ef.om.BOTTOM,borderLeftVisible:n||e===ef.om.LEFT};Q.Y5.updateSelectionProperties(a,{shouldCommit:r}),(0,e_.a2)("strokePaints")},this.nodesSupportIndividualBorders=(e,r)=>{let n=new Set(["RECTANGLE","ROUNDED_RECTANGLE","SYMBOL","INSTANCE"]);for(let a of e)if(n.has(a.type)||"FRAME"===a.type&&!a.resizeToFit||"FRAME"===a.type&&r<2&&this.nodesSupportIndividualBorders(a.childrenNodes,r+1))return!0;return!1},this.supportsIndividualBorders=()=>{if(!this.props.numSelectedByType)return!1;if((0,X.vx)(this.props.numSelectedByType,"RECTANGLE")||(0,X.vx)(this.props.numSelectedByType,"ROUNDED_RECTANGLE")||(0,X.vx)(this.props.numSelectedByType,"SYMBOL")||(0,X.vx)(this.props.numSelectedByType,"INSTANCE"))return!0;if((0,X.vx)(this.props.numSelectedByType,"FRAME")){let e=Object.keys(this.props.sceneGraphSelection).map((0,I.UN)().get).filter(e=>!!e);return this.nodesSupportIndividualBorders(e,0)}return!1},this.onBidirectionalEndpointRowMouseEnter=e=>{this.stopPropagation(e),this.props.leftEndCap&&this.props.rightEndCap&&(0,ee.hS)(this.props.leftEndCap)&&(0,ee.hS)(this.props.rightEndCap)&&this.props.leftEndCap!==this.props.rightEndCap&&this.setState({showSwapButton:!0})},this.onBidirectionalEndpointRowMouseLeave=e=>{this.stopPropagation(e),this.hideSwapButton()},this.hideSwapButton=()=>{this.setState({showSwapButton:!1})},this.updateSyncState=e=>{if("reset"===e){this.setState({syncState:"NONE"});return}switch(this.state.syncState){case"NONE":"changed start"===e?this.setState({syncState:"CHANGED_START"}):"changed end"===e&&this.setState({syncState:"CHANGED_END"});break;case"CHANGED_START":"changed end"===e&&this.setState({syncState:"CHANGED_BOTH"});break;case"CHANGED_END":"changed start"===e&&this.setState({syncState:"CHANGED_BOTH"})}},this.componentDidUpdate=e=>{e.sceneGraphSelection!==this.props.sceneGraphSelection&&this.setState({syncState:"NONE",individualBorderOption:ef.om.ALL})}}render(){let e=(0,eR.yT)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKeyForStroke"}),r=(0,eR.A8)(e.inheritStyleKey),n=!(this.props.numSelectedByType&&(0,X.vx)(this.props.numSelectedByType,"TABLE"))&&(r||(0,ee._W)(this.props.strokePaints,[]).length>0||this.props.strokePaints===ee.oV),a=this.props.pickerShown?.id===this.settingsId,o=2===this.props.strokePanelTerminalPointCount&&this.props.strokePanelMode!==b.yTM.WASHI_TAPE,s=this.props.strokePanelMode!==b.yTM.WASHI_TAPE,l=this.supportsIndividualBorders();return i.createElement(P.k,{name:"stroke_panel"},i.createElement(eC.Zk,{"data-testid":"stroke-panel-id"},i.createElement(tr,{selectedPropertyType:b.rrT.STROKE,onChange:this.onPaintsChange,onApplyStyle:this.onApplyStyle,currentSelectedProperty:this.props.currentSelectedProperty,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,recordingKey:O.Pt(this.props,"paintList"),onPickerShown:e9,variableScopes:e7,...(0,eT.Rz)(this.props),...e,onToggleListLayout:this.toggleSettings,onToggleAdvancedSettings:n&&s?this.toggleSettings:void 0,advancedSettingsTooltip:(0,B.t)("fullscreen.properties_panel.fill.advanced_stroke_settings"),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,variableRerankingContext:this.props.variableRerankingContext}),n&&i.createElement(ez.t,{forwardedRef:this.forwardedRef,borderSharedWeight:this.props.borderSharedWeight,maxStrokeWeight:this.props.maxStrokeWeight,strokeAlign:this.props.strokeAlign,strokeCap:this.props.strokeCap,terminalCap:this.props.terminalCap,strokeJoin:this.props.strokeJoin,arcRadius:this.props.arcRadius,connectorLineStyle:this.props.connectorLineStyle,miterLimitAngle:this.props.miterLimitAngle,onNonPaintsChange:this.onNonPaintsChange,numSelectedByType:this.props.numSelectedByType,updateSyncState:this.updateSyncState,hideSwapButton:this.hideSwapButton,syncState:this.state.syncState,showSwapButton:this.state.showSwapButton,selectBorderSides:this.selectBorderSides,setIndividualBorderOption:this.setIndividualBorderOption,onBordersAlignmentChange:this.bordersAlignmentOnChange,onBidirectionalEndpointRowMouseEnter:this.onBidirectionalEndpointRowMouseEnter,onBidirectionalEndpointRowMouseLeave:this.onBidirectionalEndpointRowMouseLeave,showAdvancedStrokeSettings:s,showIndividualBorderControls:l,showEndPointControls:o,showStrokePicker:a,strokePanelMode:this.props.strokePanelMode,individualBorderOption:this.state.individualBorderOption,toggleSettings:this.toggleSettings,stopPropagation:this.stopPropagation,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,recordingKey:this.props.recordingKey,leftEndCap:this.props.leftEndCap,rightEndCap:this.props.rightEndCap,dashPattern:this.props.dashPattern,dashCap:this.props.dashCap})))}}te.displayName="StrokePanel";let tt=i.memo(function({title:e,propertyList:r,onChange:n,onApplyStyle:a,addProperty:s,overrideAddPropertyTooltip:l,onReorder:c,renderProperty:d,onDeleteProperty:u,onToggleListLayout:m,styleType:p,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:f,removeAllProperties:E,library:y,defaultColor:v,openFile:T,stylePickerShown:I,currentSelectedProperty:S,selectedPropertyType:w,modalShown:A,sceneGraphSelection:C,recordingKey:N,onToggleAdvancedSettings:L,advancedSettingsTooltip:R,isPanelBodyCollapsedAtom:P,selectedStyleGuid:D}){let k=(0,o.wA)(),M=(0,es.Xo)(),F=(0,eo.Um)(),x=!!i.useContext(ev.zK),U=x?`style-modal-${(0,eV.qj)(_)}`:(0,eV.qj)(_),B=(0,eR.WH)(h,g,p),G=(0,eO.AH)(B?.key??null,(0,ee.E7)(g)),H=B?.isLocal?B:G?.status==="loaded"?G.data:null,W=function(){let e=(0,ei.Rb)(),r=(0,ei.Pt)(),n=e.length>0,a=Object.keys(r).length>0;return n||a}(),K=r&&(0,ee.hS)(r)&&(r.length>1||r.some(e=>!(0,et.sb)(e.type)))?"createStyle":W?"createVariable":"createStyle",Y=i.useCallback(()=>M&&M.id===U?M:null,[M,U]),$=i.useCallback(({initialX:e,initialY:r})=>{Y()?k(V.XE()):k(V.u1({id:U,initialX:e,initialY:r}))},[k,U,Y]),j=i.useCallback(e=>{$(e)},[$]),z=i.useCallback((e,r)=>{n([e],r,b.WXh.ONLY_WHEN_NOT_DISABLED)},[n]),q=(0,ea.kl)("numSelectedByType"),Z=(0,eK.M)(),X=(0,eb.y5)(P||null),J=i.useCallback(()=>{s(),X()},[s,X]),Q=i.useMemo(()=>{if(q)return(0,eH.aZ)(w,q)},[w,q]);return i.createElement(i.Fragment,null,i.createElement(ew.Kx,{title:e,propertyList:r,onChange:n,addProperty:J,overrideAddPropertyTooltip:l,renderProperty:d,onDeleteProperty:u,onReorder:c,removeAllProperties:E,currentSelectedProperty:S,selectedPropertyType:w,recordingKey:N,dropdownShown:F,openFile:T,library:y,modalShown:A,pickerShown:M,sceneGraphSelection:C,stylePickerShown:I,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:f,styleType:p,onToggleListLayout:m,onPickerIconClick:j,dispatch:k,onToggleAdvancedSettings:L,advancedSettingsTooltip:R,isPanelBodyCollapsedAtom:P,selectedStyleGuid:D}),(()=>{let e=Y();if(!e)return;let n=r&&(0,ee.hS)(r)&&1===r.length?r[0]:{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1};return i.createElement(eT.ku,{paint:n,paintId:(0,eR.OS)(_),selectedStyle:H,inheritStyleKeyField:_,onChange:z,onApplyStyle:x?void 0:a,pickerShown:e,defaultColor:v,dropdownShown:F,initialView:"library",supportedViews:["library"],initialCreationModalView:K,recordingKey:O.Pt(N,"paintPicker"),variableScopes:Q,hasVisiblePaintBelow:!1,isInStyleModal:x,canPickerShowColorContrast:!x,variableRerankingContext:Z})})())});function tr(e){let r=(0,i.useContext)(ev.zK),n=(0,o.wA)(),a=null!=r,s=(0,i.useCallback)(()=>a,[a]),l=(0,ea.ER)(),c=(0,ee.E7)((0,en.b)("guid")),d=(0,o.d4)(r=>{let n=e.selectedPropertyType===b.rrT.STROKE?"strokePaints":"fillPaints";return e.shouldUseSelectedStyleProperties?r.mirror.selectedStyleProperties[n]:r.mirror.selectionProperties[n]}),u=(0,i.useCallback)(()=>{switch(e.selectedPropertyType){case b.rrT.STROKE:l||((0,e_.a2)("strokePaints"),Q.Y5.triggerActionInUserEditScope("add-stroke-to-selection"));break;case b.rrT.FILL:l?Q.Y5.triggerActionInUserEditScope("add-fill-to-style-selection"):Q.Y5.triggerActionInUserEditScope("add-fill-to-selection"),(0,e_.a2)("fillPaints")}},[e.selectedPropertyType,l]),{onChange:m,stylePickerShown:p,inheritStyleKeyField:h,selectedPropertyType:_,pickerInStyleCreationShown:g,variableScopes:f,pickerShown:E,onApplyStyle:y,onPickerShown:v,recordingKey:T,variableRerankingContext:I}=e,S=(0,i.useCallback)(e=>{s()||n(V.XE()),n(V.Uv());let r=(0,ee._W)(d,[]).filter((r,n)=>n!==e);(0,eg.f)(b.VD3.IGNORE,b.e0R.UNKNOWN,()=>{m(r)}),Q.Y5.deselectProperty()},[s,m,n,d]),w=(0,J.GS)(),A=(0,i.useCallback)((e,r,n)=>{m(e,r,n),(0,ee._W)(d,[]).length!==e.length&&et.Tm.clearCache()},[m,d]),C=(0,i.useCallback)(()=>{et.Tm.clearCache()},[]),N=(0,i.useCallback)(()=>{n(V.Y({isListLayout:!e.stylePickerListLayout})),n(Y.sw())},[n,e.stylePickerListLayout]),L=(0,eT.xm)(e),{useGrid:R}=i.useContext(eD.dD),P=(0,i.useCallback)((e,r,n,a,o,l,c,u,m)=>{let b=s()?"preview-paint":"paint",A=et.Tm.getId(r,_,b),C=(0,ee._W)(d,[]).slice(0,r).some(e=>e.visible);return i.createElement(tn,{key:R?void 0:`paint-${r}`,id:A,inheritStyleKeyField:h,index:r,singletonRow:(0,ee._W)(d,[]).length<=1,selectedPropertyType:_,paint:e,selected:p.isShown?E?.id===A:n,isDragging:a,hasFocus:o,stylePickerShown:p,onPickerShown:v,pickerInStyleCreationShown:g,onChange:l,onMouseDown:c,onMouseMove:u,onMouseUp:m,onRemovePaint:()=>S(r),onApplyStyle:y,recordingKey:O.Pt(T,r),variableScopes:f,isUI3:w,hasVisiblePaintBelow:C,variableRerankingContext:I,...L})},[s,_,d,R,h,p,E?.id,v,g,y,T,f,w,I,L,S]),D=(()=>{if(!w)return;let r=(0,ee._W)(d,[]);switch(e.selectedPropertyType){case b.rrT.STROKE:return 0===r.length?(0,B.t)("fullscreen.properties_panel.section_stroke.tooltip_addStroke"):(0,B.t)("fullscreen.properties_panel.section_stroke.tooltip_addStrokeFill");case b.rrT.FILL:return(0,B.t)("fullscreen.properties_panel.section_fill.tooltip_addFill");default:return}})();return i.createElement(tt,{title:(()=>{switch(e.selectedPropertyType){case b.rrT.STROKE:return(0,B.t)("fullscreen.properties_panel.fill.stroke");case b.rrT.FILL:return(0,B.t)("fullscreen.properties_panel.fill.fill");default:return""}})(),propertyList:d,onChange:A,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:e.selectedPropertyType,addProperty:u,overrideAddPropertyTooltip:D,renderProperty:P,pickerShown:e.pickerShown,onReorder:C,recordingKey:e.recordingKey,...(0,eR.yT)(e),onToggleListLayout:N,library:e.library,defaultColor:e.defaultColor,onApplyStyle:e.onApplyStyle,onToggleAdvancedSettings:w?e.onToggleAdvancedSettings:void 0,advancedSettingsTooltip:w?e.advancedSettingsTooltip:void 0,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,selectedStyleGuid:c??null})}class tn extends i.PureComponent{constructor(){super(...arguments),this.state={isDragHover:!1},this.context=null,this.row=i.createRef(),this.pickerShownInStyleModal=()=>!this.isInStyleModal()&&!!this.props.pickerInStyleCreationShown,this.handleOpenImagePicker=e=>{this.props.selectedPropertyType!==e.propertyType||this.props.index!==e.index||this.pickerShown()||this.pickerShownInStyleModal()||this.showPicker()},this.handleCloseImagePicker=e=>{this.props.selectedPropertyType===e.propertyType&&this.props.index===e.index&&this.pickerShown()&&this.hidePicker()},this.onPaintPickerChange=(e,r)=>{e.visible=!0,this.props.onChange(e,r)},this.onVisibleChange=e=>{this.props.onChange({...this.props.paint,visible:e})},this.pickerShown=()=>this.isInStyleModal()?this.props.pickerInStyleCreationShown?.id===this.props.id?this.props.pickerInStyleCreationShown:null:this.props.pickerShown?.id===this.props.id?this.props.pickerShown:null,this.showPicker=()=>{if(!this.row.current)return;let e=(0,ep.cn)(this.row.current);this.props.onPickerShown?.(),Q.Y5.updateAppModel({currentSelectedProperty:{type:this.props.selectedPropertyType,indices:[this.props.index]}}),this.isInStyleModal()?this.props.dispatch((0,W.D)({id:this.props.id,initialX:e.x,initialY:e.y})):this.props.dispatch(V.u1({id:this.props.id,initialX:e.x,initialY:e.y,data:{isInStyleModal:this.isInStyleModal()}})),this.isInStyleModal()||(this.props.dispatch(Y.sw()),this.props.dispatch(V.Uv()))},this.hidePicker=()=>{this.isInStyleModal()?this.props.dispatch((0,W.w)()):this.props.dispatch(V.XE()),Q.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.isDragTarget=()=>!!(0,ee.E7)(this.props.paint),this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({...this.state,isDragHover:!1});let r=(0,ee.E7)(this.props.paint);if(!r)return;let n=Q.Y5.fileArrayToString;if(n){let a=n(Array.from(e.files));b.glU.dropImageOnPaintThumbnail(r.blendMode||"NORMAL",r.opacity||1,a,this.props.index,this.props.selectedPropertyType)}},this.dropImageOnPaintThumbnail=(e,r,n)=>{let a=Q.Y5.fileArrayToString;if(a){let i=a(Array.from(n.files));b.glU.dropImageOnPaintThumbnail(e,r,i,this.props.index,this.props.selectedPropertyType)}},this.updateStillImageAndSelectionPropertiesForGIF=(e,r)=>v.l7.user("update-gif-image",()=>(0,er.SK)(e,r,this.props.selectedPropertyType)),this.onDetachVariableClick=()=>{(0,eg.f)(b.VD3.VARIABLE_DETACH,b.e0R.DIRECT,()=>{let e=(0,ex.y)(this.props.paint);this.onPaintPickerChange(e,ed.zk.YES)})}}isInStyleModal(){return null!=this.context}componentDidMount(){this.isInStyleModal()||(Q.Y5.fromFullscreen.on("openImagePicker",this.handleOpenImagePicker),Q.Y5.fromFullscreen.on("closeImagePicker",this.handleCloseImagePicker))}componentWillUnmount(){this.isInStyleModal()||(Q.Y5.fromFullscreen.removeListener("openImagePicker",this.handleOpenImagePicker),Q.Y5.fromFullscreen.removeListener("closeImagePicker",this.handleCloseImagePicker)),this.isInStyleModal()&&this.pickerShown()&&this.hidePicker()}hasBoundColorVariable(){return!!this.props.paint.colorVar}render(){let e=this.renderButtons();return i.createElement("div",null,i.createElement(D.Y,{isDragTarget:this.isDragTarget,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:O.Pt(this.props,"dropTarget")},i.createElement("div",null,i.createElement(ti,{ref:this.row,id:this.props.id,paint:this.props.paint,firstIconButton:e.length>0?e[0]:null,secondIconButton:e.length>1?e[1]:null,shownPickerMatchesThisPaint:!!this.pickerShown(),togglePicker:this.togglePicker,isDragHover:this.state.isDragHover,onChange:this.props.onChange,selected:this.props.selected,singletonRow:this.props.singletonRow,isDragging:this.props.isDragging,hasFocus:this.props.hasFocus,noBorderOnFocus:this.props.noBorderOnFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,isUI3:this.props.isUI3,...(0,eT.Rz)(this.props)}))),this.pickerShown()&&i.createElement(eT.ku,{paint:this.props.paint,paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:this.props.inheritStyleKeyField,dropImageOnPaintThumbnail:this.dropImageOnPaintThumbnail,updateStillImageAndSelectionPropertiesForGIF:this.updateStillImageAndSelectionPropertiesForGIF,onChange:this.onPaintPickerChange,onApplyStyle:this.isInStyleModal()?void 0:this.props.onApplyStyle,onClose:this.hidePicker,recordingKey:O.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.pickerShown(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:this.props.hasVisiblePaintBelow,isInStyleModal:this.isInStyleModal(),disablePatternPaints:this.props.selectedPropertyType!==b.rrT.FILL||this.isInStyleModal(),canPickerShowColorContrast:!this.isInStyleModal(),variableRerankingContext:this.props.variableRerankingContext}))}renderButtons(){let e=[],r=this.props.isUI3?this.props.selected&&this.props.hasFocus:void 0;if(this.props.hideVisibilityToggle||this.hasBoundColorVariable()||e.push({button:i.createElement(eF.B,{visible:this.props.paint.visible,onChange:this.onVisibleChange,recordingKey:O.Pt(this.props,"visibleToggle"),selected:r}),opensPicker:!1,key:"visibleToggle"}),this.hasBoundColorVariable()&&e.push({button:i.createElement("span",{className:eX.zm},i.createElement(u.T,{selected:r},i.createElement(m.K,{"aria-label":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:O.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:Z.dG,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":em.Ib.TEXT}},i.createElement(F.U,{svg:eJ.A},i.createElement(_.U,null))))),opensPicker:!1,key:"detatchVariableButton"}),this.props.onRemovePaint){let n=this.props.isUI3?{"data-tooltip-type":em.Ib.TEXT,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.remove")}:{};e.push({button:i.createElement(u.T,{selected:r},i.createElement(m.K,{recordingKey:O.Pt(this.props,"removeButton"),onClick:this.props.onRemovePaint,"aria-label":(0,B.t)("fullscreen.properties_panel.fill.remove"),htmlAttributes:{...n,onMouseDown:Z.dG}},i.createElement(F.U,{svg:eQ.A,fallbackSvg:e0.A},i.createElement(g.O,null)))),opensPicker:!1,key:"removeButton"})}return e}}function ta({children:e}){return i.createElement(p.o,{eventListeners:["onFocus"],display:"contents"},e)}tn.displayName="PaintListItem",tn.contextType=ev.zK;let ti=i.forwardRef((e,r)=>{let n;let a=r=>{(r.shiftKey||2&r.buttons)&&r.preventDefault(),r.stopPropagation(),e.togglePicker()},o=()=>{e.onFocus?.(),e.shownPickerMatchesThisPaint&&!s()&&e.togglePicker()},s=()=>{let r=e.paint.colorVar?.value?.alias;return r?S.dI(r):null};(0,i.useEffect)(()=>()=>{e.onInputBlur&&e.onInputBlur()},[]);let{useGrid:l}=(0,i.useContext)(eD.dD),c=s(),d=e.firstIconButton?i.createElement(ts,{opensPicker:e.firstIconButton.opensPicker,componentKey:e.firstIconButton.key},e.firstIconButton.button):null,u=e.secondIconButton?i.createElement(ts,{opensPicker:e.secondIconButton.opensPicker,componentKey:e.secondIconButton.key},e.secondIconButton.button):null,m=e.selected&&!e.hasFocus,p=e.fitToSize?eX.Cv:eX.BT,h=e.fitToSize?eX.np:eX.wM;n=(0,L.kc)().eu_fpl_migration_button&&e.isUI3?i.createElement("div",{onKeyDown:e=>{if(l){if(e.altKey&&("ArrowUp"===e.key||"ArrowDown"===e.key)){e.preventDefault();return}("ArrowRight"===e.key||"ArrowLeft"===e.key||"ArrowUp"===e.key||"ArrowDown"===e.key)&&e.stopPropagation()}},className:A()(c?p:h,{[eX.NI]:e.selected,[eX.L3]:m}),"data-onboarding-key":(0,ec.Lh)(ec.D8.PAINT_PANEL_ROW,e.id)},c?i.createElement(eW.y,{isSelected:e.selected&&e.hasFocus},i.createElement(tc,{selected:e.selected,hasFocus:e.hasFocus,variableId:c,paint:e.paint,onClick:a,recordingKey:e.recordingKey})):i.createElement(to,{clearPaintFromCache:()=>et.Tm.clearCache(e.id),onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,allowAutoAndMixed:e.allowAutoAndMixed,disableOpacity:e.disableOpacity,togglePicker:e.togglePicker,chitOverride:e.chitOverride,recordingKey:e.recordingKey})):i.createElement("div",{className:A()(c?p:h,{[eX.NI]:e.selected,[eX.L3]:m}),onMouseDown:a,onMouseDownCapture:r=>{if(r.shiftKey||2&r.buttons){e.togglePicker(),r.preventDefault(),r.stopPropagation();return}},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},"data-onboarding-key":(0,ec.Lh)(ec.D8.PAINT_PANEL_ROW,e.id)},c?i.createElement(eW.y,{isSelected:e.selected&&e.hasFocus},i.createElement(tc,{selected:e.selected,hasFocus:e.hasFocus,variableId:c,paint:e.paint,onClick:a,recordingKey:e.recordingKey})):i.createElement(to,{clearPaintFromCache:()=>et.Tm.clearCache(e.id),onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,allowAutoAndMixed:e.allowAutoAndMixed,disableOpacity:e.disableOpacity,togglePicker:e.togglePicker,chitOverride:e.chitOverride,recordingKey:e.recordingKey}));let _=i.createElement("div",{className:eX.RK,"data-onboarding-key":(0,ec.Lh)(ec.D8.PAINT_PANEL_ROW,e.id)},n,i.createElement("div",{className:eX.$r},d,u));if(e.preventDragging){if(e.isUI3){let a=(0,L.kc)().eu_fpl_migration_ui3_one_input_two_icon_row?ek.pG:eM.JJ;return i.createElement(a,{ref:r,appendedClassName:A()(eX.p,{[eX.Tp]:e.isDragHover,[eZ.CZ]:e.selected,[eZ.kR]:m}),input:n,leftIcon:d,rightIcon:u,onFocus:o,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp})}return i.createElement(eC.fI,{ref:r,className:e.isDragHover?`${eX.Tp} ${eX.p}`:eX.p,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,onFocus:o,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},_)}if(e.isUI3){let a=A()(eX.p,{[eX.Tp]:e.isDragHover,[eZ.CZ]:e.selected,[eZ.kR]:e.selected&&!e.hasFocus});return l?null===d||null===u?i.createElement(eD.lt,{singletonRow:e.singletonRow,input:n,icon:d||u,ref:r,onFocus:o,selected:e.selected,hasFocus:e.hasFocus}):i.createElement(eD.z$,{singletonRow:e.singletonRow,input:n,leftIcon:d,rightIcon:u,ref:r,onFocus:o,selected:e.selected,hasFocus:e.hasFocus}):i.createElement(ek.Y9,{singletonRow:e.singletonRow,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,dragging:e.isDragging,onFocus:o,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,ref:r},null===d||null===u?i.createElement(ek.DE,{appendedClassName:a,input:n,icon:d||u,label:null}):i.createElement(ek.pG,{appendedClassName:a,input:n,leftIcon:d,rightIcon:u}))}return i.createElement(eS.e,{ref:r,className:e.isDragHover?`${eX.Tp} ${eX.p}`:eX.p,shiftGrabberOnInputFocus:!0,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow,dragging:e.isDragging,onFocus:o,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},_)});function to(e){let r=(0,eP.R)(),n=r=>{r.stopPropagation(),e.togglePicker()},a=(r,n=!0)=>{r.visible=!0,e.onChange(r),n&&e.clearPaintFromCache?.()},s=A()({[eX.EC]:!e.paint.visible||e.disableOpacity}),c=(0,o.wA)(),d=e.chitOverride?e.chitOverride:{paint:e.paint},{useGrid:u}=(0,i.useContext)(eD.dD);return i.createElement(i.Fragment,null,i.createElement(ta,null,i.createElement(ey.J,{...d,onMouseDown:n,recordingKey:O.Pt(e,"chit"),className:eX.x7,isInFPLGrid:u})),i.createElement(tl,{...e,isUI3:r,onFocus:e.onInputFocus,onBlur:e.onInputBlur,visible:e.paint.visible,onTypeMouseDown:n,onMouseDown:Z.dG,onColorChange:r=>{let n={...e.paint,color:r};(0,l.xN)(r.a,e.paint.opacity??1)||(n.opacity=r.a,n.visible=!0),a(n)},recordingKey:O.Pt(e,"value"),noBorderOnFocus:!0}),(!e.allowAutoAndMixed||!(0,ee.SX)(e.paint.color)&&!(0,ee.gl)(e.paint.color))&&i.createElement(eh.Pd,{inputClassName:s,className:eX.n1,onFocus:e.onInputFocus,onBlur:e.onInputBlur,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,value:e.paint.opacity,onValueChange:(r,n)=>{e.onChange({...e.paint,opacity:r,visible:!0},n)},dispatch:c,noLeftBorder:!0,noBorderOnFocus:!0,onMouseDown:Z.dG,recordingKey:O.Pt(e,"opacity")}))}function ts(e){return e.opensPicker?i.createElement(ta,{key:e.componentKey},e.children):i.createElement(i.Fragment,{key:e.componentKey},e.children)}function tl(e){let r=(0,i.useMemo)(()=>e.allowAutoAndMixed?new z.C1({parseAlpha:!0}):new z.rC({parseAlpha:!0}),[e.allowAutoAndMixed]),n=(0,i.useMemo)(()=>new q.ZB(()=>e.paint),[e.paint]),a=(0,i.useMemo)(()=>e.allowAutoAndMixed&&((0,ee.SX)(e.paint.color)||(0,ee.gl)(e.paint.color))?e.paint.color:e.paint.color&&{...e.paint.color,a:e.paint.opacity??1},[e.allowAutoAndMixed,e.paint]),o=O.rf(e.recordingKey,"mousedown",r=>{e.onMouseDown?.(r),e.onTypeMouseDown?.(r)});return"SOLID"===e.paint.type?i.createElement(eA.AN,{forwardedRef:e.focusableRef,className:A()(e.visible?eX.EX:eX.wh,e.appendedColorInputClassname),onFocus:e.onFocus,onBlur:e.onBlur,noLeftBorder:!1,squareRightBorder:!1,formatter:r,property:a,onChange:e.onColorChange,onMouseDown:e.onMouseDown,recordingKey:O.Pt(e,"colorInput"),noBorderOnFocus:e.noBorderOnFocus}):(0,L.kc)().eu_fpl_migration_button?i.createElement(h.E,{className:e.visible?eX.cD:eX.GI,onClick:o,actionOnPointerDown:!0},n.format(e.paint.type)):i.createElement("div",{className:e.visible?eX.cD:eX.GI,onMouseDown:o},n.format(e.paint.type))}function tc({variableId:e,paint:r,onClick:n,recordingKey:a,selected:o,hasFocus:s}){let l=(0,ei.u)(e),c=l?.name??"",d=!!l&&(0,eB.eF)(l),{version:u}=(0,y.DP)(),m=d?null:i.createElement(ta,null,i.createElement(ey.J,{paint:r,onMouseDown:n,recordingKey:O.Pt(a,"chit"),className:"ui3"===u?void 0:eX.x7})),p=r.color&&r.opacity?`${(0,C.colorToHex)(r.color)}, ${(100*r.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:void 0;return"ui3"===u?i.createElement(td,{selected:o,hasFocus:s,styleIcon:m||i.createElement("div",{"data-tooltip-type":em.Ib.TEXT,"data-tooltip":(0,B.t)("variables.variable_was_deleted")},i.createElement(M.B,{className:eX.Bx,svg:e4.A})),styleName:c,styleDescription:l?.description,styleValue:p,onClick:n,recordingKey:O.Pt(a,"styleButton")}):i.createElement(i.Fragment,null,m,i.createElement("div",{className:eX.eV},i.createElement(eG.wG,{isDeleted:d,text:c,variableDescription:l?.description,variableValue:p})))}function td(e){let{styleIcon:r,styleName:n,styleDescription:a,styleValue:o,selected:s,hasFocus:l,disableHover:c,shouldStretch:d,recordingKey:u,onClick:m,...p}=e,_=(0,eU.Y)(n,a,o),g=A()(eq.W1,{[eq.BI]:!c,[eq.C_]:s&&!l,[eq.wH]:s&&l,[eq.t7]:d}),f=i.createElement(i.Fragment,null,i.createElement("div",{className:eq.hg},r),i.createElement("div",{className:eq.p3},i.createElement(x.G,{text:n,showTooltip:U.i.ALWAYS,getTooltipText:_})));return(0,L.kc)().eu_fpl_migration_button?m?i.createElement(h.E,{className:g,recordingKey:u,actionOnPointerDown:!0,onClick:m,htmlAttributes:{onContextMenu:m}},f):i.createElement("div",{className:g},f):i.createElement(R.GG,{recordingKey:u,onMouseDown:m,...p,className:g},f)}ti.displayName="Paint",(e=>{class r extends i.PureComponent{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.row=i.createRef(),this.paintPickerInitialView=void 0,this.componentWillUnmount=()=>{this.props.dispatch(K.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))},this.pickerShownIsStylePicker=()=>this.props.stylePickerShown.isShown&&this.props.stylePickerShown.id===this.stylePickerID(),this.pickerShown=()=>this.props.pickerShown?.id===this.pickerID(),this.showPicker=()=>{if(!this.row.current)return;let e=(0,ep.cn)(this.row.current);this.props.dispatch(V.u1({id:this.pickerID(),initialX:e.x,initialY:e.y})),this.props.dispatch(Y.sw()),this.props.dispatch(V.Uv()),this.props.dispatch(K.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.hidePicker=()=>{this.props.dispatch(V.XE()),Q.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.toggleStylePicker=()=>{this.pickerShownIsStylePicker()?this.hidePicker():this.row.current&&this.props.showPicker(this.stylePickerID(),this.row.current)},this.toggleListLayout=()=>{this.props.setPickerListLayout(!this.props.stylePickerListLayout)},this.onCreateStyle=()=>{let e=(0,T.GP)(this.props.paint),r=b.Osy.paintDataNodesInPaint(e);this.props.dispatch(H.to({type:eY.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"create"}}})),this.hidePicker()},this.onApplyStyle=e=>{let r=b.Osy.paintDataNodesInPaint((0,T.GP)(this.props.paint));this.props.dispatch(G.nh({style:e,callback:e=>{if(r.length>1)this.props.dispatch(H.to({type:eY.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"apply",styleGuid:e}}}));else{let r=(0,T.GP)(this.props.paint);v.l7.user("apply-style",()=>b.Osy.applyStyleToPaintDatas(r,e)),(0,N.sx)("Apply Style to Selection Paint ",{count:this.props.uniqueNodesCount})}}})),this.hidePicker()},this.debouncedTrackPaintChangeFromPicker=(0,s.s)(e=>{(0,N.sx)("Edit Selection Paint",{fileKey:this.props.openFile?.key||"",count:this.props.count})}),this.onChangeForPaint=(e,r)=>{let n=r==ed.zk.YES,a=(0,eI.U2)(e)||e.colorVar?b.Osy.resolvePaintWithVariable((0,T.GP)(this.props.paint),(0,T.GP)(e)):"",i=e;if(a){let r=(0,eu.K)(a);i=r?.paint||e}v.l7.user("change-paint",()=>b.Osy.updatePaint((0,T.GP)(this.props.paint),(0,T.GP)(i),n,(0,T.GP)(this.currentPaintValue()))),this.setState({paintValueInPicker:i}),this.props.dispatch(K.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.onChangeForPaintPicker=(e,r)=>{this.onChangeForPaint(e,r),this.debouncedTrackPaintChangeFromPicker(e)},this.debouncedOnChangeForPaintPicker=(0,s.s)(this.onChangeForPaintPicker),this.onDetachVariableClick=()=>{(0,eg.f)(b.VD3.VARIABLE_DETACH,b.e0R.DIRECT,()=>{let e=(0,ex.y)(this.props.paint);this.onChangeForPaint(e,ed.zk.YES)})},this.currentPaintValue=()=>this.props.paintValueFromEyeDropper?this.props.paintValueFromEyeDropper:this.state.paintValueInPicker?this.state.paintValueInPicker:this.props.paint,this.onMouseOver=()=>{this.setState({hasEverHovered:!0})},this.onPaintClick=()=>{this.paintPickerInitialView=void 0,this.togglePicker()},this.onStyleClick=e=>{e.stopPropagation(),this.paintPickerInitialView="library",this.togglePicker()},this.onSelectSamePaintMouseDown=()=>{let e=(0,T.GP)(this.props.paint);b.Osy.selectOnlySamePaint(e),(0,N.sx)("Select Selection Paint",{count:this.props.uniqueNodesCount})},this.onFocus=()=>{this.pickerShownIsStylePicker()&&this.toggleStylePicker()},this.boundColorVariableId=()=>{let e=this.props.paint.colorVar?.value?.alias;return e?S.dI(e):null}}pickerID(){return`${$.F7}-${this.props.id}`}stylePickerID(){return`${$.yJ}-${this.props.id}`}componentDidMount(){this.props.openPickerOnInitialRender&&this.showPicker()}componentDidUpdate(e){this.props.paintValueFromEyeDropper&&e.paintValueFromEyeDropper!==this.props.paintValueFromEyeDropper&&this.setState({paintValueInPicker:this.props.paintValueFromEyeDropper})}render(){let e=null;this.pickerShownIsStylePicker()&&this.props.stylePickerShown.isShown&&(e=this.props.stylePickerShown);let r=this.props.debounce?this.debouncedOnChangeForPaintPicker:this.onChangeForPaintPicker,n=this.renderButtons();return i.createElement("div",{onMouseOver:this.onMouseOver},i.createElement(ti,{ref:this.row,id:this.props.id,paint:this.currentPaintValue(),firstIconButton:n.length>0?n[0]:null,secondIconButton:n.length>1?n[1]:null,count:this.props.count,uniqueNodesCount:this.props.uniqueNodesCount,recordingKey:O.Pt(this.props,"paint"),onFocus:this.onFocus,onChange:this.onChangeForPaint,onInputFocus:this.props.onInputFocus,onInputBlur:this.props.onInputBlur,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,selected:this.pickerShown()||this.pickerShownIsStylePicker(),singletonRow:!1,isDragging:!1,hasFocus:!1,shownPickerMatchesThisPaint:this.pickerShown(),togglePicker:this.onPaintClick,isDragHover:!1,preventDragging:!0,isUI3:this.props.isUI3,focusableRef:this.props.focusableRef,...(0,eT.Rz)(this.props)}),this.pickerShown()&&this.props.pickerShown&&(this.props.customColorPicker?i.createElement(this.props.customColorPicker,{paint:this.currentPaintValue(),onChange:r,onClose:this.hidePicker,pickerShown:this.props.pickerShown,hideCustomColorPickerFillTypeToggle:this.props.hideCustomColorPickerFillTypeToggle??!1}):i.createElement(eT.ku,{paint:this.currentPaintValue(),paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:"inheritFillStyleKey",onChange:r,onApplyStyle:this.onApplyStyle,keepOpenOnItemSelect:!0,disableImagePaints:!0,disablePatternPaints:!0,recordingKey:O.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,initialView:this.paintPickerInitialView,initialStyleCreationPaint:this.currentPaintValue(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:!1,isInStyleModal:!1,variableRerankingContext:this.props.variableRerankingContext})),this.state.hasEverHovered&&i.createElement(eN.M,{inheritStyleKey:null,inheritStyleID:null,styleType:"FILL"}),e&&i.createElement(eN.U,{picker:e,onCreateStyle:this.onCreateStyle,onApplyStyle:this.onApplyStyle,recordingKey:O.Pt(this.props,"stylePicker"),styleType:"FILL",onToggleListLayout:this.toggleListLayout,stylePickerListLayout:this.props.stylePickerListLayout,inheritStyleKey:null,inheritStyleID:null}))}renderButtons(){let e=[];if(this.boundColorVariableId())e.push({button:i.createElement("span",{className:eX.zm},i.createElement(m.K,{"aria-label":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:O.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:Z.dG,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":em.Ib.TEXT}},i.createElement(F.U,{svg:eJ.A},i.createElement(_.U,null)))),opensPicker:!1,key:"detatchVariableButton"});else{let r=(0,ej.f)(this.props.openFile?.editorType??null);e.push({button:i.createElement("span",{className:eX.zm},i.createElement(m.K,{"aria-label":r?(0,B.t)("slides.properties_panel.color_picker.theme_colors"):(0,j.A)("style"),onClick:this.onStyleClick,recordingKey:O.Pt(this.props,"paint","styleButton"),htmlAttributes:{"data-tooltip":r?(0,B.t)("slides.properties_panel.color_picker.theme_colors"):"style","data-tooltip-type":r?em.Ib.TEXT:em.Ib.LOOKUP}},i.createElement(F.U,{svg:e1.A,fallbackSvg:e2.A},i.createElement(f.y,null)))),opensPicker:!0,key:"styleButton"})}return null==this.props.uniqueNodesCount||this.props.hideSelectSamePaintButton||e.push({button:i.createElement("span",{className:eX.zm},i.createElement(m.K,{onClick:this.onSelectSamePaintMouseDown,"aria-label":(0,B.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),recordingKey:O.Pt(this.props,"paint","selectSamePaintButton"),htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),"data-tooltip-type":em.Ib.TEXT}},i.createElement(F.U,{svg:e5.A},i.createElement(E.A,null)))),opensPicker:!0,key:"selectSamePaintButton"}),e}}r.displayName="SelectionPaintItem",e.SelectionPaintItem=r,e.ConnectedSelectionPaintItem=(0,o.Ng)((e,r)=>({pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,paintValueFromEyeDropper:e.currentSelectionPaintInPicker.paintId===r.id?e.currentSelectionPaintInPicker.updatedPaintFromDropper:void 0,stylePickerListLayout:e.stylePickerListLayout}),e=>({showPicker:(r,n)=>{let{top:a,left:i}=n.getBoundingClientRect(),[o,s]=[i-eL.N2,a];e(V.bS({id:r,initialX:o,initialY:s,modal:!0})),e(Y.sw()),e(V.XE())},setPickerListLayout:r=>{e(V.Y({isListLayout:r}))}}))(r)})(a||(a={})),a.ConnectedSelectionPaintItem},94055:(e,r,n)=>{var a=n(875877),i=n(471340);(0,a.atom)(null),(0,a.atom)(i.GR.DEFAULT_EXPANDED)},471340:(e,r,n)=>{n.d(r,{w5:()=>ec,B8:()=>el,tC:()=>ed,gc:()=>eu,GR:()=>es});var a,i,o,s,l,c=n(411855),d=n(188507),u=n(846288),m=n(747579),p=n(439594),h=n(805014),_=n(991458),g=n(108982);n(841962);var f=n(875877),E=n(563192),y=n(509343),b=n(532099),v=n(923219),T=n(357614),I=n(965636),S=n(515662),w=n(797187);n(615883),n(77383);var A=n(404227),C=n(991660),N=n(141300),L=n(66583),O=n(391107),R=n(663858),P=n(642870),D=n(505105),k=n(95965),M=n(193689),F=n(878075);n(109388);var x=n(851169),U=n(336427),B=n(132939),V=n(76265),G=n(343373),H=n(366172),W=n(464372),K=n(427494),Y=n(76237),$=n(742713),j=n(442133),z=n(418706);n(587508),n(653798);var q=n(226285);n(688656),n(868911),n(172385),n(468476),n(220083);let Z={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};n(889012),n(254773);var X=n(817652),J=n(138225),Q=n(22562),ee=n(985305);let et=n(630834);function er(){H.Y5.triggerAction("set-tool-default")}c.memo(function({recordingKey:e}){let r=(0,G.GS)(),n=(0,w.J2)(h.yFm.state().scale),a=(0,w.J2)(h.yFm.state().disabled),i=x.nc.user("change-scale",e=>{h.yFm.setScale(e)}),o=(0,w.J2)(h.yFm.state().width);o="number"==typeof o?o:v.oV;let s=x.nc.user("change-scale-width",e=>{h.yFm.setWidth(e)}),l=(0,w.J2)(h.yFm.state().height);l="number"==typeof l?l:v.oV;let u=x.nc.user("change-scale-height",e=>{h.yFm.setHeight(e)}),m=(0,w.J2)(h.yFm.state().anchorPoint),p=x.nc.user("change-anchor-point",e=>{h.yFm.setAnchorPoint(e)}),{handleKeyDown:_,heightInputRef:g,scaleInputRef:f,widthInputRef:E}=function(){let e=(0,d.d4)(e=>e.mirror.sceneGraphSelection),[r,n]=c.useState(!1),a=c.useRef(null),i=c.useRef(null),o=c.useRef(null),s=(0,K.p8)("currentTool"),l=(0,U.ZC)(s),u=(0,K.p8)("activeUserAction"),[m,p]=c.useState(!1);c.useEffect(()=>{let r=s===h.NLJ.SCALE&&l!==h.NLJ.SCALE;Object.keys(e).length>0&&r&&[h.QOV.DEFAULT,h.QOV.SELECTING_TEXT].includes(u)&&a.current&&(a.current.focus(),a.current.select())},[u,s,l,e]),c.useEffect(()=>{let e=()=>{a.current&&(n(!1),p(!1),a.current.focus(),a.current.select())};return W.h.subscribeScaleToolActivated(e),()=>{W.h.unsubscribeScaleToolActivated(e)}},[]),c.useEffect(()=>{let e=e=>{e.target!==a.current&&e.target!==i.current&&e.target!==o.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let _=c.useCallback(e=>{let n="Escape"===e.key,a="Enter"===e.key;!r&&(a||n)&&p(!0)},[r]);return c.useEffect(()=>{m&&er()},[m]),{handleKeyDown:_,scaleInputRef:a,widthInputRef:i,heightInputRef:o}}(),y=c.createElement(Y.$4,null,c.createElement(J.K,{onClick:()=>{er()},"aria-label":(0,V.t)("fullscreen.scale_panel.close")},c.createElement(B.U,{svg:et,fallbackSvg:et},c.createElement(Q.A,null)))),b=c.createElement(z.V,{restoreFocusElements:[f.current,E.current,g.current].filter(Boolean),anchorPoint:m,onAnchorPointChange:p,disabled:a}),T=r?ee.f4:ee.G4,I=c.createElement(T,{scale:n,width:o,height:l,onWidthChange:s,onHeightChange:u,onScaleChange:i,onKeyDown:_,widthInputRef:E,heightInputRef:g,disabled:a,recordingKey:e}),S=c.createElement(q.g,{scale:n,onScaleChange:i,disabled:a,onInputKeyDown:_,recordingKey:e,ref:f});return r?c.createElement(Y.Zk,{"data-testid":`scale_panel.state.${a?"disabled":"enabled"}`,className:X.$1},c.createElement($.r,{titleTx:(0,V.tx)("fullscreen.scale_panel.scale"),icon:y}),I,c.createElement(j.sY,{leftLabel:(0,V.t)("fullscreen.scale_panel.scale"),rightLabel:(0,V.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:S,bottomLeftInput:null,rightInput:b,topIcon:null,bottomIcon:null})):c.createElement(Y.Zk,{"data-testid":`scale_panel.state.${a?"disabled":"enabled"}`},c.createElement(Y.fI,{className:X.ZF},c.createElement(Y.xw,null,(0,V.tx)("fullscreen.scale_panel.scale")),y,b),c.createElement(Y.fI,null,S),I)});var en=n(536733),ea=n(48704),ei=n(488527);(0,_.hG)(ei.wQn);let eo=(e,r)=>e?E.Pt(e,r):r;var es=(e=>(e[e.DEFAULT_EXPANDED=0]="DEFAULT_EXPANDED",e[e.DEFAULT_SIMPLIFIED=1]="DEFAULT_SIMPLIFIED",e[e.OVERRIDDEN_EXPANDED=2]="OVERRIDDEN_EXPANDED",e))(es||{});(a||(a={})).ConnectedFillPanel=(0,d.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{version:n}=(0,m.DP)(),{inheritFillStyleKey:a,exportSettings:i,exportBackgroundDisabled:o,styleIdForFill:s}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("inheritFillStyleKey","exportSettings","exportBackgroundDisabled","styleIdForFill"),l=(0,b.m)();return c.createElement(F.eT,{key:e.key,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,currentSelectedProperty:e.currentSelectedProperty,currentSelectedGradientStop:e.currentSelectedGradientStop,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,currentTool:e.currentTool,colorFormat:r,editModeType:e.activeCanvasEditModeType,defaultColor:T.rC,inheritStyleKey:a||null,inheritStyleID:s||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,openFile:e.openFile,recordingKey:eo(e.recordingKey,"fillPanel"),selectionContainsFrames:l,hasExports:!!i&&(0,v._W)(i,[]).length>0,exportBackgroundDisabled:o,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:null,isUI3:"ui3"===n,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties})});let el=a.ConnectedFillPanel;(i||(i={})).ConnectedEffectsPanel=(0,d.Ng)(e=>({library:e.library,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,I.ER)(),{smallNudgeAmount:n,bigNudgeAmount:a}=(0,y.sT)(),{version:i}=(0,m.DP)(),{effects:o,inheritEffectStyleKey:s,containsOnlySpreadEligibleNodes:l,containsAnyKnockoutShadowEligibleNodes:d,framelikeWithoutFills:u,framelikeWithoutClipping:p,styleIdForEffect:h}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("effects","inheritEffectStyleKey","containsAnyKnockoutShadowEligibleNodes","framelikeWithoutFills","framelikeWithoutClipping","containsOnlySpreadEligibleNodes","styleIdForEffect"),_=(0,I.wR)("guid")??null;return c.createElement(k.F,{key:"effects",stylePickerShown:e.stylePickerShown,effects:o||[],inheritStyleKey:s||null,inheritStyleID:h||null,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentSelectedProperty:e.currentSelectedProperty,smallNudgeAmount:n,bigNudgeAmount:a,library:e.library,sceneGraphSelection:e.sceneGraphSelection,openFile:e.openFile,recordingKey:eo(e.recordingKey,"effectsPanel"),selectionContainsOnlySpreadEligibleNodes:!!l||r,selectionContainsAnyKnockoutShadowEligibleNodes:!!d||r,framelikeWithoutFills:!!u,framelikeWithoutClipping:!!p,isUI3:"ui3"===i,selectedStyleGuid:_})});let ec=i.ConnectedEffectsPanel;(o||(o={})).ConnectedTransformModifiersPanel=(0,d.Ng)(e=>({currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,openFile:e.openFile}))(function(e){let{smallNudgeAmount:r,bigNudgeAmount:n}=(0,y.sT)(),{version:a}=(0,m.DP)(),{transformModifiers:i}=(0,I.zj)("transformModifiers");return c.createElement(en.H,{key:"transformModifiers",transformModifiers:i||[],dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentSelectedProperty:e.currentSelectedProperty,smallNudgeAmount:r,bigNudgeAmount:n,sceneGraphSelection:e.sceneGraphSelection,openFile:e.openFile,recordingKey:eo(e.recordingKey,"transformModifiersPanel"),isUI3:"ui3"===a})}),o.ConnectedTransformModifiersPanel,(s||(s={})).ConnectedGridsPanel=(0,d.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{smallNudgeAmount:n,bigNudgeAmount:a}=(0,y.sT)(),i=(0,w.J2)(h.Ez5.editorPreferences().showFrameGrids),{layoutGrids:o,inheritGridStyleKey:s,styleIdForGrid:l}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("styleIdForGrid","layoutGrids","inheritGridStyleKey"),d=(0,I.wR)("guid")??null;return c.createElement(M.S,{key:"grids",stylePickerShown:e.stylePickerShown,layoutGrids:o,smallNudgeAmount:n,bigNudgeAmount:a,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentTool:e.currentTool,colorFormat:r,showFrameGrids:i,editModeType:e.activeCanvasEditModeType,inheritStyleKey:s||null,inheritStyleID:l||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,openFile:e.openFile,recordingKey:eo(e.recordingKey,"gridsPanel"),selectedStyleGuid:d})});let ed=s.ConnectedGridsPanel;(e=>{let r=(0,C.Tn)();e.ConnectedTypePanel=(0,d.Ng)(e=>({library:e.library,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,openFile:e.openFile,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,fonts:e.fonts,localFontAgentVersion:e.localFontAgentVersion}),null,(e,r,n)=>({...e,...n,...r}))(function(e){let n=c.useContext(D.zK),a=(0,w.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls),i=e.shouldUseSelectedStyleProperties?I.pw:I.zj,o=e.shouldUseSelectedStyleProperties?I.DQ:I.fC,{fontFamily:s,fontStyle:l,fontSize:d,lineHeight:_,intrinsicLineHeight:E,letterSpacing:b,paragraphSpacing:v,paragraphIndent:T,listSpacing:C,textLineType:k,textDirectionality:M,wholeNodeTextLineType:F,isHangingPunctuationApplicableToSelection:x,textCase:U,textDecoration:B,textDecorationSkipInk:V,textUnderlineOffset:G,textDecorationThickness:H,textDecorationStyle:W,inheritTextStyleKey:K,textAutoResize:Y,missingFont:$,textTruncation:j,leadingTrim:z,leadingTrimEnabled:q,hangingPunctuation:Z,hangingList:X,fontVariantDiscretionaryLigatures:J,fontVariantHistoricalLigatures:Q,fontVariantNumericFigure:ee,fontVariantNumericSpacing:et,fontVariantNumericFraction:er,fontVariantCaps:en,fontVariantPosition:ei,detachOpticalSizeFromFontSize:es,maxLines:el,textAlignHorizontal:ec,textAlignVertical:ed,areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:eu,validMixedPropertiesForResponsiveTextStyle:em,styleIdForText:ep,textPathStartForward:eh}=i("fontFamily","fontStyle","fontSize","lineHeight","intrinsicLineHeight","letterSpacing","paragraphSpacing","paragraphIndent","listSpacing","textLineType","textDirectionality","wholeNodeTextLineType","isHangingPunctuationApplicableToSelection","textCase","textDecoration","textDecorationSkipInk","textUnderlineOffset","textDecorationThickness","textDecorationStyle","inheritTextStyleKey","textAutoResize","missingFont","textTruncation","leadingTrim","leadingTrimEnabled","hangingPunctuation","hangingList","fontVariantDiscretionaryLigatures","fontVariantHistoricalLigatures","fontVariantNumericFigure","fontVariantNumericSpacing","fontVariantNumericFraction","fontVariantCaps","fontVariantPosition","detachOpticalSizeFromFontSize","maxLines","textAlignHorizontal","textAlignVertical","areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides","validMixedPropertiesForResponsiveTextStyle","styleIdForText","textPathStartForward"),{hasHadRTLText:e_,textUserLayoutVersion:eg,textExplicitLayoutVersion:ef,textBidiVersion:eE,fontVariations:ey}=o("hasHadRTLText","textUserLayoutVersion","textExplicitLayoutVersion","textBidiVersion","fontVariations"),eb=(0,I.wR)("guid")??null;(0|a)&1<<h.mrc.TEXT_TRUNCATION&&(0,u.KF)(null!=el,"TypePanel missing maxLines");let{smallNudgeAmount:ev,bigNudgeAmount:eT}=(0,y.sT)(),eI=(0,O.WH)(K??null,ep??null,"TEXT"),eS=(0,R.L)(),ew=(0,g.R)(e=>r(e,(0,A.Sh)(e),p.RR.TEXT)),eA=(0,S.SG)(["TEXT_DATA"]).data??[],eC=(0,P.R1)().variableConsumptionMap,eN=(0,P.JG)(),{version:eL}=(0,m.DP)(),eO=(0,f.useAtomValue)(N.$i)===L.JJ.TEXT_PANEL;return s&&l?c.createElement(ea.J,{key:"type",fonts:e.fonts,fontFamily:s,fontStyle:l,fontSize:d,areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:eu,validMixedPropertiesForResponsiveTextStyle:em,lineHeight:_,intrinsicLineHeight:E,letterSpacing:b,paragraphSpacing:v,paragraphIndent:T,listSpacing:C,textLineType:k,textDirectionality:M,hasHadRTLText:e_,wholeNodeTextLineType:F,isHangingPunctuationApplicableToSelection:x,textCase:U,textDecoration:B,textDecorationSkipInk:V,textUnderlineOffset:G,textDecorationThickness:H,textDecorationStyle:W,textPathStartForward:eh,inheritStyleKey:K||null,inheritStyleID:ep||null,mainStyle:eI,textContentBoundAsset:eS,isTextPropReferencedByAnyNodeInSelection:ew,textAlignHorizontal:ec,textAlignVertical:ed,textAutoResize:Y,missingFont:$,textUserLayoutVersion:eg,textExplicitLayoutVersion:ef,textBidiVersion:eE,textTruncation:j,leadingTrim:z,leadingTrimEnabled:q,hangingPunctuation:Z,hangingList:X,fontVariantDiscretionaryLigatures:J||!1,fontVariantHistoricalLigatures:Q||!1,fontVariantNumericFigure:ee||"NORMAL",fontVariantNumericSpacing:et||"NORMAL",fontVariantNumericFraction:er||"NORMAL",fontVariantCaps:en||"NORMAL",fontVariantPosition:ei||"NORMAL",fontVariations:ey||[],detachOpticalSize:es||!1,editModeType:e.activeCanvasEditModeType,enabledTypePanelControls:a,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,userFavoriteFonts:e.userFavoriteFonts,orgById:e.orgById,smallNudgeAmount:ev,bigNudgeAmount:eT,library:e.library,sceneGraph:e.sceneGraph,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,localFontAgentVersion:e.localFontAgentVersion,recordingKey:eo(e.recordingKey,"typePanel"),textVariablesExist:eA.length>0,variableConsumptionMap:null!=n?eN:eC,isSlides:e.isSlides,version:eL,showBlueBorder:eO,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,selectedStyleGuid:eb}):null})})(l||(l={}));let eu=l.ConnectedTypePanel},225690:(e,r,n)=>{n(188507),n(805014);var a=n(991458);n(841962),n(835918),n(901152),n(923219),n(965636),n(427494),n(797187),n(305216),n(30057),n(425708);var i=n(488527);(0,a.jz)(i.uj0)},965413:(e,r,n)=>{n.d(r,{LI:()=>k,Pe:()=>R,Yg:()=>function e(r){let n=0;for(let a of(r.prototypeInteractions.length>0&&(n+=1),r.childrenNodes))n+=e(a);return n},_U:()=>A,bA:()=>B,dT:()=>C,ft:()=>S,k9:()=>N,kC:()=>V,sT:()=>w});var a=n(677619),i=n(527941),o=n(367713),s=n(244139),l=n(348377),c=n(805014),d=n(851169),u=n(245459),m=n(245954),p=n(777535),h=n(875877),_=n(156310),g=n(972142),f=n(76265),E=n(250379),y=n(903600),b=n(626673),v=n(952122),T=n(706293),I=n(269636);n(824794);class S extends Error{constructor(){super(),this.name="InvalidSelectionFromGenericLayers"}}class w extends Error{constructor(){super(),this.name="NoInteractionsGenerated"}}class A extends Error{constructor(){super(),this.name="NoInteractionsGeneratedExistingInteractions"}}function C(e,r,n,i){let s=function(e,r){let n={name:"Dummy Page just to satisfy typescript so they have a parent",id:"0:1",type:"CANVAS",children:[]};return n.children=L(e,r,n),n}(e,r).children,l=(0,a._q)(s);return(0,o.sS)(s,n,l,i)}function N(e,r){let n=r.get(e),a={name:n.name,id:n.guid,type:"CANVAS",children:[]};return a.children=L(n.childrenGuids,r,a),a}function L(e,r,n){let a=[];for(let i of e){let e=(0,E.Zl)(r,i);if(null!==e){let i={id:e.guid,name:e.name,type:e.type,visible:e.visible,x:e.absoluteBoundingBox.x,y:e.absoluteBoundingBox.y,w:e.absoluteBoundingBox.w,h:e.absoluteBoundingBox.h,parentNode:n,clipsContent:!e.frameMaskDisabled,fontSize:e.fontSize,textAlignHorizontal:e.textAlignHorizontal,layoutMode:e.stackMode,cornerRadius:e.cornerRadius};i.opacity=e.opacity,i.characters=e.characters,e.fills&&(i.fills=e.fills.map(O).filter(e=>!!e)),e.prototypeInteractions&&e.prototypeInteractions.length>0&&(i.interactions=e.prototypeInteractions);let o=L(e.childrenGuids,r,i);o.length>0&&(i.children=o),a.push(i)}}return a}function O(e){switch(e.type){case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":return{type:"GRADIENT",visible:e.visible};case"IMAGE":let r=e.image?.hash,n=r?(0,g.Rw)(r):"",a=e.imageThumbnail?.hash;return{type:"IMAGE",hash:n,thumbnailHash:a?(0,g.Rw)(a):"",visible:e.visible};case"SOLID":return{type:"SOLID",color:e.color??{r:0,g:0,b:0},visible:e.visible}}}function R(e){return null!==e}let P=(e,r)=>"BACK"===r?"BACK":"CLOSE"===r?"CLOSE":"OPEN_POPUP"===e?"OVERLAY":e,D=d.nc.ai("link-new-interaction",e=>{let r=P(e.navigationType,""),n=e.buttonID,a=u.sH(n);if(null===a||a===u.Hr){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let i=(0,m.UN)().get(n);if(null==i){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let o=function(e){let r=e;for(;r.parentNode?.type!=="CANVAS"&&r.parentNode?.type!=="SECTION"&&null!==r.parentNode;)r=r.parentNode;return r}(i),s=e.destinationScreenID,l=i?.prototypeInteractions;if(l){for(let e of l)if(e.event?.interactionType==="ON_CLICK"&&e.actions&&e.actions.length>0&&!(1===e.actions.length&&"NONE"===e.actions[0].connectionType))return(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkExistingInteractionOnSourceNode:!0,action_type:r}),{noInteractionGeneratedReason:"EXISTING_INTERACTION"}}let d=u.sH(s),h={},g=e.navigationType;if("BACK"===g)h.connectionType="BACK";else if("CLOSE"===g)h.connectionType="CLOSE";else{if(null===d||d===u.Hr||null===s){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}let e=(0,m.UN)().get(s);if(!e){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}h.transitionNodeID=d,h.transitionType="INSTANT_TRANSITION","NAVIGATE"===g?(h.connectionType="INTERNAL_NODE",(i?.type==="SYMBOL"||i?.type==="INSTANCE")&&(e?.type==="SYMBOL"||e?.type==="INSTANCE")?h.navigationType="SWAP_STATE":h.navigationType="NAVIGATE",o?.overlayBackground.type!=="NONE"&&(h.navigationType="SWAP")):"OPEN_POPUP"===g&&(h.connectionType="INTERNAL_NODE",h.navigationType="OVERLAY")}let f=c.glU.generateUniqueID();if(!f)return;let E=u.sH(f);if(!E)return;let y={id:E,stateManagementVersion:1};y.event={interactionType:"ON_CLICK"},y.actions=[h];try{i.prototypeInteractions=[y]}catch(e){return}let b=_.d({nodeID:a,interactionID:E});return(0,p.sx)("prototype_interaction_added",{interactionCount:i?.prototypeInteractions.length??0,magicLinkGenerated:!0,interactionID:b,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),action_type:P(h.navigationType??"",h.connectionType??"")}),{noodleID:b}});async function k(e,r,n,a){let i,l;if("TOPLEVEL"===e.type&&function(e,r){let n=(0,o.i9)(e.unfilteredScene.children);r((0,v.Zh)({name:"prototype.ai_magic_link_input_existing_interactions",params:{existingInteractions:JSON.stringify(n.interactionIds)}}))}(e,a),"TOPLEVEL"===e.type&&0===e.topLevelFrames.length)throw new S;try{let n=await F(e,r);i=M(n)}catch(e){if(e instanceof s.gS){let r={generatedInteractions:[]};return r.errorMessage=e.message,r}throw e}let c=[],d=!1,u=[],m=[];try{for await(let e of i){if(n.signal.aborted)return{generatedInteractions:[],errorMessage:"aborted"};U("NAVIGATE"),"OPEN_POPUP"===e.navigationType||"CLOSE"===e.navigationType?m.push(e):"BACK"===e.navigationType?u.push(e):d=x(e,c)}}catch(e){l=e.message}for(let e of m)U("OPEN_POPUP"),await new Promise(e=>setTimeout(e,200)),d=x(e,c);for(let e of u)U("BACK"),await new Promise(e=>setTimeout(e,200)),d=x(e,c);if(!l&&0===c.length){if(d)throw new A;throw new w}return{generatedInteractions:c,errorMessage:l}}async function*M(e){for await(let r of e)yield(0,i.HP)(r)}async function F(e,r){let n=(0,l.w)(e),a=new Promise((e,r)=>{setTimeout(()=>{r(Error("Cortex timed out"))},6e4)});if("EMPTY"===n.type)throw new s.gS("Empty selection");let i=y.Ay.design.generateMagicLinkV2(n,{...(0,b.Ay)(),clientLifecycleId:r}),o=await Promise.race([i,a]);return new y.hI(o,6e4)}function x(e,r){let n=D(e);if(n?.noodleID)r.push({id:n.noodleID,mapping:e});else if(n?.noInteractionGeneratedReason==="EXISTING_INTERACTION")return!0;return!1}function U(e){"BACK"===e?h.atomStore.set(I.pD,(0,f.tx)("magic_link.running_and_adding_back_interactions")):"OPEN_POPUP"===e?h.atomStore.set(I.pD,(0,f.tx)("magic_link.running_and_adding_overlay_interactions")):h.atomStore.set(I.pD,(0,f.tx)("magic_link.running_and_adding_navigate_interactions"))}function B(){h.atomStore.set(I.pD,(0,f.tx)("magic_link.running"))}function V(e,r,n){let a=Object.fromEntries(n.map(e=>[e,[]]));return r.forEach(r=>{n.forEach(n=>{a[n]?.push(...function e(r,n,a){let i=r.get(n);return i?"ICON"===a&&i.isIconLike||i.type===a||"IMAGE"===a&&(0,T.A)(i)?[n]:i.childrenNodes.flatMap(n=>e(r,n.guid,a)):[]}(e,r,n))})}),a}},807221:(e,r,n)=>{n.d(r,{KN:()=>K,y3:()=>$});var a=n(411855);n(188507);var i=n(236891),o=n(805014),s=n(7408),l=n(629019),c=n.n(l),d=n(44070),u=n.n(d),m=n(841962),p=n(263383),h=n(563192),_=n(137565),g=n(612724),f=n(153767),E=n(265851),y=n(76265);n(516729);var b=n(343373),v=n(360538),T=n(436916),I=n(176897),S=n(134126),w=n(912339),A=n(923219),C=n(515662),N=n(173501),L=n(172322),O=n(898626),R=n(719176);n(642870);var P=n(113843),D=n(430772),k=n(475464),M=n(991944),F=n(694764),x=n(2907),U=n(673420),B=n(403520),V=n(527967),G=n(200817);let H=a.createContext({autoCloseOnScroll:!0}),W=(0,p.kf)("lazy_search_expression_builder",{isCodesplit:!0,ComponentFactory:async()=>({default:(await n.e(6975).then(n.bind(n,116975))).ExpressionBuilderSearch})});function K({resolvedType:e,targetVariableData:r,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:s,updateSelectionProperties:l,recordingKey:c,updateConditionInConditionalAction:d,isNarrowPanel:u,showVariableThumbnails:m,setVariableValue:p,onClose:_,requestedTypes:f,initialPosition:E,variantProperty:y}){let b=!1;(0,A.gl)(r)&&(r=void 0,b=!0),r=(0,x.IQ)(r,y),r?.type===o.Z_n.EXPRESSION&&r?.value.expressionFunction===o.JTp.STRINGIFY&&(r=r.value.expressionArguments[0]);let[T,S]=a.useState(null),C=a.useCallback(e=>{null!==e&&S(e)},[]),[N,L]=a.useState(E??null),{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypingVariablesModal:P}=(0,R.zt)(),D=a.useCallback(()=>{if(O)P();else if(!N&&T){let e=T.getBoundingClientRect();L(new g.Mi(e.left-34,e.top-6))}},[T,N,O,P]);a.useEffect(()=>{!0===n&&s&&T&&(D(),s(!1))},[n,T,D,s]);let k=a.useCallback(()=>{N&&(L(null),_&&_())},[N,_]),M=a.useCallback(e=>{if(void 0!==d)d(e);else if((0,i.Vq)(p)){if(!p(e))return!1}else void 0!==l&&l({targetVariableData:e});return k(),!0},[k,d,l,p]),F=a.createElement(a.Fragment,null,N&&a.createElement(Y,{initialTokens:r?(0,v.q)((0,I.A)(r,new w.o(!0))):[],initialPosition:N,resolvedType:e,onCloseExpressionBuilder:k,onInputSubmitted:M,icon:d?V.A:G.A,isInConditional:void 0!==d,recordingKey:h.Pt(c,"expressionBuilder"),requestedTypes:f})),U=a.createElement($,{targetVariableData:r,forwardRef:C,onClick:D,recordingKey:c,isNarrowPanel:u,isInCell:!!p,showVariableThumbnails:m,isInConditional:void 0!==d,isMixed:b});return a.createElement(a.Fragment,null,F," ",U)}function Y({initialTokens:e,initialPosition:r,resolvedType:n,onCloseExpressionBuilder:i,onInputSubmitted:o,icon:s,isInConditional:l,recordingKey:c,requestedTypes:d}){let{autoCloseOnScroll:m}=a.useContext(H),p=a.useMemo(()=>e.reduce((e,r)=>e+=r.stringValue,""),[e]),g=a.useRef(p),E=a.useRef(!1),[b,v]=a.useState(0),I=a.useCallback((e,r)=>{v(e),e>0&&!E.current&&(E.current=!0),r&&(0,x.EQ)(g.current,r,n,l?"conditional":"set_variable")},[l,n]),[A,C]=a.useState((0,S.d)(g.current,n,d)),L=a.useCallback(()=>{if(g.current.trim().length>0){(0,x.EQ)(g.current,"success",n,l?"conditional":"set_variable");let e=o((0,T.q)(g.current,new w.o));if(!e)return C(!e),e}else(0,x.EQ)(g.current,"submit_empty",n,l?"conditional":"set_variable"),i();return!0},[l,i,o,n]),O=a.useMemo(()=>u()(e=>{(0,x.EQ)(g.current,e,n,l?"conditional":"set_variable"),i()}),[l,i,n]),R=a.useCallback(()=>l?(0,y.t)("proto.expression_builder_entry.placeholder"):(0,y.t)("proto.expression_builder.placeholder"),[l]);return a.createElement("div",{className:B.Zh},a.createElement(M.vx,{container:N.c,containerProps:{wiggleCount:b},title:"",headerSize:"hidden",initialPosition:r,onClose:i,dragHeaderOnly:!1,initialWidth:258,canRenderBelowViewport:!0},a.createElement(f.dP,{recordingKey:c},a.createElement("div",null,a.createElement(W,{fallback:a.createElement("div",{className:B.D9}," Loading... "),errorFallback:null,initialTokens:e,expressionText:g,resolvedType:n,error:A,setError:C,onSubmit:L,onClose:O,icon:s,wiggleCount:b,setWiggleCount:I,hasWiggled:E.current,placeholderText:R(),isInConditional:l,recordingKey:h.Pt(c,"search"),requestedTypes:d})))),a.createElement(_.D8,{className:U.ZA,onMouseDown:e=>{!A&&L()||(b>=1?O("click_out_cancel"):0===b&&I(1,"click_out_error")),e.stopPropagation()},onWheel:()=>{m&&g.current.trim()===p.trim()&&O("scroll_cancel")},recordingKey:h.Pt(c,"closeBuilder")}))}function $({targetVariableData:e,forwardRef:r,onClick:n,recordingKey:i,showVariableThumbnails:l,isNarrowPanel:d,isInCell:u,isInConditional:p,isMixed:g,variantProperty:f}){e=(0,x.IQ)(e,f);let v=(0,b.GS)(),T=(0,R.YT)(),S=a.useContext(O.c),C=T===R.Oz.TWO_COL,N=C&&S===O.P.LEFT,P=C&&S===O.P.RIGHT,D=a.useMemo(()=>e?(0,I.A)(e,new w.o(!0,!0)).replace(/\(/g," ( ").replace(/\)/g," ) ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)(?![^{]*})(?![^[]*])/):[],[e]);if(e&&(0,A.hS)(e)&&e?.resolvedType===o.rXF.COLOR)return a.createElement(L.J,{color:e.value});let k=0===D.length,M=c()({[B.WR]:!u&&d,[B.NQ]:u,[B.D9]:!u&&!d,[B.pC]:C,[B.g6]:N,[B._i]:v}),U=N?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_lhs"):P?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_rhs"):(0,y.t)("proto.expression_builder_entry.placeholder");return a.createElement(_.D8,{onClick:n,recordingKey:h.Pt(i,"openExpressionBuilder"),className:v?B.tY:E.s.minW0.$},a.createElement("div",{className:M,ref:r},D.filter(e=>e.length>0).map((e,r)=>{if(e.startsWith("{")&&e.endsWith("}")){let n=e.replace(/[{}]/g,""),{variableId:i,modeId:o}=(0,x.Y_)(n);return a.createElement(j,{variableId:i,modeId:o,showVariableThumbnails:l,key:r,disableHover:N})}if(s.sH(e))return a.createElement(j,{variableId:e,showVariableThumbnails:l,key:r,disableHover:N});if((0,m.kc)().ds_variable_props_proto&&e.startsWith("[")&&e.endsWith("]")){let n=e.replace(/[[]]/g,""),[i,o,s]=(0,x.Q6)(n);return a.createElement(z,{stablePathToNode:i,componentPropId:s,showVariableThumbnails:l,key:r})}if((0,m.kc)().ds_variable_props_proto&&(0,x.Q6)(e)[0].length&&""!==(0,x.Q6)(e)[1]&&""!==(0,x.Q6)(e)[2]){let[n,i,o]=(0,x.Q6)(e);return a.createElement(z,{stablePathToNode:n,componentPropId:o,showVariableThumbnails:l,key:r,disableHover:N})}return x.dX.test(e)?a.createElement("span",{key:r},e):x.yZ.test(e)||x.er.test(e)?a.createElement("span",{key:r},e):a.createElement(F.X,{isLeftColInteractionsPanel:N,text:e,key:r})}),k&&a.createElement("span",{className:B.a7},g?(0,y.t)("fullscreen.mixed"):p?U:(0,y.t)("proto.expression_builder.placeholder"))))}function j({variableId:e,modeId:r,showVariableThumbnails:n,disableHover:i}){let o=(0,C.u)(e),s=o?(0,k.B9)(o.name):(0,y.t)("proto.expression_builder_entry.missing"),l=(0,C.G6)(o?.variableSetId),c=l&&r?l.modes.find(e=>e.id===r):null,d=c?.name,u=o&&n?(0,x.Xx)(o.resolvedType):null,m=d?`${s}: ${d}`:`${s}`;return a.createElement(D.wG,{text:m,thumbnailValue:u,isDeleted:!!o&&(0,P.eF)(o),disableHover:i})}function z({stablePathToNode:e,componentPropId:r,showVariableThumbnails:n,disableHover:i}){let o=(0,x.aA)(e,r),s=o&&n?(0,x.Xx)(o.varValue.resolvedType):null;return a.createElement(D.wG,{text:o?o.name:(0,y.t)("proto.expression_builder_entry.missing"),colorTheme:D.J2.COMPONENT,thumbnailValue:s,isDeleted:!1,disableHover:i})}},2907:(e,r,n)=>{n.d(r,{Cq:()=>function e(r){if(r&&r.varValue.type===i.Z_n.ALIAS)return i.CWU.getVariableResolvedValue(r.varValue.value,new Map);if(r&&r.varValue.type===i.Z_n.NODE_FIELD_ALIAS){let{stablePathToNode:n,indexOrKey:a}=r.varValue.value,o=x(n,a);return o?e(o):function(e){switch(e.varValue.resolvedType){case i.rXF.STRING:case i.rXF.TEXT_DATA:return{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:""};case i.rXF.BOOLEAN:return{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:!1};case i.rXF.FLOAT:return{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:0}}}(r)}let n=(0,_.sr)(r);switch(typeof n){case"string":return{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:n};case"boolean":return{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:n};case"number":return{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:n}}},DE:()=>T,EQ:()=>q,HC:()=>G,Hq:()=>F,I0:()=>y,IQ:()=>$,J4:()=>V,N_:()=>K,Q6:()=>U,TL:()=>H,Ub:()=>k,Xx:()=>j,Y_:()=>Y,ZX:()=>E,_z:()=>M,a1:()=>v,aA:()=>x,bU:()=>B,d9:()=>P,dX:()=>N,er:()=>O,he:()=>D,if:()=>I,kl:()=>S,q2:()=>w,sO:()=>A,tJ:()=>R,tz:()=>z,uX:()=>L,wL:()=>W,yZ:()=>C,yy:()=>b});var a=n(411855),i=n(805014),o=n(245459),s=n(777535),l=n(653798),c=n(524940),d=n(360538),u=n(912339),m=n(515662),p=n(176160),h=n(41010),_=n(212213),g=n(789949),f=n(580373);function E({highlightedItemID:e,variables:r,expressionItems:n,componentPropItems:a}){return e?r.find(r=>r.node_id===e)??a.find(r=>(0,_.lC)(r)===e)??n.find(r=>r.name===e)??null:null}let y=new RegExp(/\+|-|\*|!|=|\/|&|\||>|<| /g),b=new RegExp(/\+|-|\*|!|=|\/|&&|\|\||>|</g),v=new RegExp(/\+|-|\*|\//g),T=new RegExp(/\+/g),I=new RegExp(/>|<|!/g),S=new RegExp(/>=|<=/g),w=new RegExp(/!=|==|(OR|or|Or)|>=|<=|&&|\|\|/g),A=new RegExp(/(AND|and|And)|(NOT|not|Not)/g),C=new RegExp(/"([^"]*)"/),N=new RegExp(/^[0-9.]*$/),L=new RegExp(/(AND|and|And)|(NOT|not|Not)|(OR|or|Or)|!=|==|&&|\|\|/),O=new RegExp(/\s*(true|false)\s*/i),R=new RegExp(/\(|\)/g);function P(e){return!!e&&(!N.test(e)||isNaN(Number(e)))}function D(e,r){return e?.modes.find(e=>e.id===r)?.name??""}function k(e){let[r,n]=e.split("$$$");return[r,n]}function M(e,r,n){if(n.keepAliasId)return`${e}$$$${r}`;let a=n.variableIdToVariable(e);if(!a)return"{}";let i=n.variableCollectionIdToVariableCollection(a.variableSetId);if(!i)return"{}";let o=D(i,r);return`{${a.name}$$$${o}}`}function F(e){let[r,n,a]=U(e);if(!r||!n||!a)return[];if("COMPONENT_PROP_ASSIGNMENTS"===n){let e=x(r,a);return e?[r,n,a,e.varValue.resolvedType]:[]}return(0,l.xi)("Invalid node field when parsing node field alias expression text",n),[]}function x(e,r){if(!e||0===e.length||!r)return;let n=i.CWU.getComponentPropForVariableAlias(e,r);if(0!==Object.keys(n).length)return n}function U(e){let[r,n,a]=e.split("$$$");if(!r||!n||!a)return[[],"",""];let[,i]=r.split("StablePathToNode:"),[,o]=n.split("NodeField:"),[,s]=a.split("IndexOrKey:");return i&&o&&s?[JSON.parse(i),o,s]:[[],"",""]}function B(e,r,n){return"COMPONENT_PROP_ASSIGNMENTS"===r?`StablePathToNode:${JSON.stringify(e)}$$$NodeField:${r}$$$IndexOrKey:${n}`:((0,l.xi)("Invalid node field when parsing for node field alias",r),"")}function V(e){for(let r of e){if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);if("items"in r)return r.items[0].node_id;if("expressionItem"in r)return r.expressionItem.name}return null}function G(e){for(let r of e)if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);for(let r of e)if(r.type===_.Yc.VARIABLES)return r.items[0].node_id;for(let r of e)if(r.type===_.Yc.EXPRESSION&&"LITERAL"===r.expressionItem.type)return r.expressionItem.name;return null}function H(e){return a.useMemo(()=>e===i.rXF.BOOLEAN?[i.rXF.BOOLEAN,i.rXF.STRING,i.rXF.FLOAT]:e===i.rXF.STRING?[i.rXF.STRING,i.rXF.FLOAT]:[e],[e])}function W(e,r,n,i){let o=(0,m.Rb)(),s=(0,m.yp)(),l=(0,m.pN)(),c=l.data?.libraryVariables,d=l.data?.libraryVariableSets,[u,E]=(0,a.useMemo)(()=>"ALL_LIBRARIES"===n.type?[[...o,...c??[]],[...s,...d??[]]]:"LOCAL_VARIABLES"===n.type?[o,s]:[c??[],d??[]],[n.type,o,c,s,d]),y=(0,f.$)(),b=(0,p._G)(),v=(0,h.A)(null,null),T=a.useMemo(()=>{let e={};return v.forEach(r=>{e[r.libraryKey]=r.fileName}),e},[v]),I=H(r),S=a.useMemo(()=>u.filter(e=>i?.includes(e.resolvedType)??I.includes(e.resolvedType)),[u,i,I]),w=(0,g.qF)(S,e??"");return a.useMemo(()=>null===e?[]:e.length>0?(0,_.dC)({variables:w,variableSets:E,styles:[],componentProps:[],layout:"list",fileNamesByLibraryKey:T,openFileLibraryKey:b,slideThemeId:y}):(0,_.HK)({variables:w,variableSets:E,layout:n.layout}),[e,w,E,T,b,n.layout,y])}async function K(e,r){let n=r.find(r=>r.node_id===e.node_id);n&&await (0,c.ff)(n)}function Y(e){let[r,n]=e.split(" %%% "),[a,i]=r.split("$$$");return{variableId:a,modeId:i,resolvedType:n?+n:null}}function $(e,r){return e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.IS_TRUTHY&&e.value.expressionArguments[0]&&(e=e.value.expressionArguments[0]),e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.RESOLVE_VARIANT&&e?.value.expressionArguments[0]?.type===i.Z_n.MAP&&r&&e.value.expressionArguments[0].value[r]&&(e=e.value.expressionArguments[0].value[r]),e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.STRINGIFY&&(e=e.value.expressionArguments[0]),e}function j(e){return z(e)?{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:o.AD}:e===i.rXF.BOOLEAN?{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:!0}:e===i.rXF.FLOAT?{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:0}:null}function z(e){return e===i.rXF.STRING||e===i.rXF.TEXT_DATA}function q(e,r,n,a){let o=new u.o(!0),c=[];try{c=(0,d.q)(e)}catch{(0,l.xi)("could not tokenize expression for logging:",e)}let m=c.filter(e=>"TOKEN_VARIABLE"===e.type||"TOKEN_VARIABLE_WITH_MODE"===e.type).map(e=>{let[r,n]=k(e.stringValue),a=o.variableIdToVariable(r);return{collection_id:a?.variableSetId,variable_id:r,variable_type:a?.resolvedType,mode_id:n}}),p=Object.keys(i.rXF)[Object.values(i.rXF).indexOf(n)].toLowerCase();"float"!==p&&"string"!==p&&"boolean"!==p&&(p="invalid");let h={status:r,resolved_type:p,variable_data:JSON.stringify(m),entry:a};s.az.trackDefinedEvent("prototype.expression_submit",h)}},437973:(e,r,n)=>{n.d(r,{m:()=>function e(r){var n=[];for(var i of r){if("SET_VARIABLE"===i.connectionType){if(i.targetVariable&&"id"in i.targetVariable){let e=s.sH(i.targetVariable.id);i.targetVariable.id={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}}}i.targetVariableData&&(i.targetVariableData=c(i.targetVariableData.type,i.targetVariableData.resolvedType,i.targetVariableData.value))}else if("SET_VARIABLE_MODE"===i.connectionType)(0,a.B1)(i.targetVariableModeID,"targetVariableModeID"),i.targetVariableModeID=(0,o.sH)(i.targetVariableModeID)||void 0;else if("CONDITIONAL"===i.connectionType&&i.conditionalActions){var l=[];for(var d of i.conditionalActions){var u=[],m=null;d&&(d.condition&&(m=c(d.condition.type,d.condition.resolvedType,d.condition.value)),d.actions&&(u=e(d.actions))),l.push({condition:m,actions:u})}i.conditionalActions=l}n.push(i)}return n}});var a=n(846288),i=n(805014),o=n(245459),s=n(7408),l=n(955389);function c(e,r,n){let a=(0,l.WI)(r,n),d=function(e){switch(e){case i.rXF.BOOLEAN:return"BOOLEAN";case i.rXF.FLOAT:return"FLOAT";case i.rXF.STRING:return"STRING";case i.rXF.COLOR:return"COLOR";case i.rXF.MAP:return"MAP";case i.rXF.SYMBOL_ID:return"SYMBOL_ID";case i.rXF.TEXT_DATA:return"TEXT_DATA";default:throw Error(`Unexpected resolved type: ${e}`)}}(r);if(e===i.Z_n.BOOLEAN)return{dataType:"BOOLEAN",resolvedDataType:d,value:{boolValue:a.value}};if(e===i.Z_n.FLOAT)return{dataType:"FLOAT",resolvedDataType:d,value:{floatValue:a.value}};if(e===i.Z_n.STRING)return{dataType:"STRING",resolvedDataType:d,value:{textValue:a.value}};if(e===i.Z_n.ALIAS){var u,m=null;if("string"==typeof n){let e=s.sH(n);e&&(m={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}})}return{dataType:"ALIAS",resolvedDataType:d,value:{alias:m||a.value}}}if(e===i.Z_n.NODE_FIELD_ALIAS)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:d,value:{nodeFieldAliasValue:"stablePathToNode"in(u=a.value)&&"nodeField"in u&&"indexOrKey"in u?{stablePathToNode:{guids:u.stablePathToNode.map(e=>(0,o.sH)(e))},nodeField:u.nodeField,indexOrKey:u.indexOrKey}:{}}};if(e===i.Z_n.COLOR)return{dataType:"COLOR",resolvedDataType:d,value:{colorValue:a.value}};if(e===i.Z_n.EXPRESSION)return{dataType:"EXPRESSION",resolvedDataType:d,value:{expressionValue:function e(r){for(var n=r.expressionArguments,a=[],o=0;o<n.length;o++){var s=n[o],l=c(s.type,s.resolvedType,s.value);s.type===i.Z_n.EXPRESSION&&(l.value={expressionValue:e(s.value)}),a.push(l)}return{expressionArguments:a,expressionFunction:i.JTp[r.expressionFunction]}}(n)}};else if(e===i.Z_n.MAP)return{dataType:"MAP",resolvedDataType:d,value:{mapValue:a.value}};else if(e===i.Z_n.SYMBOL_ID)return{dataType:"SYMBOL_ID",resolvedDataType:d,value:{symbolIdValue:a.value}}}},354082:(e,r,n)=>{n(584068),n(923219)},719176:(e,r,n)=>{n.d(r,{Oz:()=>P,YT:()=>k,hU:()=>T,x6:()=>w,zt:()=>R});var a=n(411855),i=n(188507);n(805014),n(245459);var o=n(777535);n(108982);var s=n(841962),l=n(875877),c=n(736041),d=n(73041),u=n(343373),m=n(353428),p=n(923219);n(604072);var h=n(176160),_=n(314540),g=n(39971),f=n(487388);n(103785),n(597071);var E=n(764723),y=n(574431),b=n(30057),v=n(310618);function T(e,r,n,a,i,o,s,l,c,d){return{behavior:function(e){if(e){if(!(0,p.hS)(e))return p.oV;if("INSTANT_TRANSITION"===e);else if("DISSOLVE"===e)return"DISSOLVE";else if("FADE"===e)return"FADE";else if(e.startsWith("SLIDE_OUT"))return"SLIDE_OUT";else if(e.startsWith("SLIDE"))return"SLIDE";else if(e.startsWith("PUSH"))return"PUSH";else if(e.startsWith("MOVE_OUT"))return"MOVE_OUT";else if(e.startsWith("MOVE"))return"MOVE";else if("SMART_ANIMATE"===e||"MAGIC_MOVE"===e)return"SMART_ANIMATE";else if("SCROLL_ANIMATE"===e)return"SCROLL_ANIMATE"}return"INSTANT"}(e),direction:function(e){if(e&&(0,p.hS)(e)){for(let r of S)if(e.indexOf(r)>=0)return r}return null}(e),easing:function(e){if(e){if(!(0,p.hS)(e))return p.oV;if("IN_CUBIC"===e)return"EASE_IN";if("OUT_CUBIC"===e);else if("INOUT_CUBIC"===e)return"EASE_IN_AND_OUT";else if("LINEAR"===e)return"LINEAR";else if("IN_BACK_CUBIC"===e)return"EASE_IN_BACK";else if("OUT_BACK_CUBIC"===e)return"EASE_OUT_BACK";else if("INOUT_BACK_CUBIC"===e)return"EASE_IN_AND_OUT_BACK";else if("CUSTOM_CUBIC"===e)return"CUSTOM_BEZIER";else if("GENTLE_SPRING"===e)return"GENTLE";else if("SPRING_PRESET_ONE"===e)return"QUICK";else if("SPRING_PRESET_TWO"===e)return"BOUNCY";else if("SPRING_PRESET_THREE"===e)return"SLOW";else if("CUSTOM_SPRING"===e)return"CUSTOM_SPRING"}return"EASE_OUT"}(r),isSpringTransition:w(r),easingFunction:n?(0,p.hS)(n)?n:p.oV:I,duration:a?(0,p.hS)(a)?a:p.oV:.3,shouldSmartAnimate:A(i,!1),preserveScroll:A(o,!1),resetVideoPosition:A(s,!1),openUrlInNewTab:A(l,!1),resetScrollPosition:A(c,!1),resetInteractiveComponents:A(d,!1)}}(0,l.atom)(!0);let I=[0,0,.58,1],S=["LEFT","RIGHT","TOP","BOTTOM"];function w(e){return!!e&&("GENTLE_SPRING"===e||"SPRING_PRESET_ONE"===e||"SPRING_PRESET_TWO"===e||"SPRING_PRESET_THREE"===e||"CUSTOM_SPRING"===e)}function A(e,r){return e?(0,p.hS)(e)?e:p.oV:r}let C=["OPEN_OVERLAY","SWAP_WITH","CLOSE_OVERLAY"],N=["SET_VARIABLE","SET_VARIABLE_MODE","CONDITIONAL"],L=["UPDATE_MEDIA_PLAY_PAUSE_OPTIONS","UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS","UPDATE_MEDIA_SKIP_TO","UPDATE_MEDIA_SKIP_BY_OPTIONS"];function O(e,r){let n;let s=(0,i.wA)();switch(e){case f.Bi.PROTOTYPING_MULTIPLE_ACTIONS:n=g.b.PROTOTYPING_MULTIPLE_ACTIONS;break;case f.Bi.PROTOTYPING_CONDITIONAL_ACTIONS:n=g.b.PROTOTYPING_CONDITIONAL_ACTIONS;break;case f.Bi.PROTOTYPING_VARIABLES:n=g.b.PROTOTYPING_VARIABLES;break;case f.Bi.VIDEOS_IN_PROTOTYPES:n=g.b.ADD_VIDEO;break;default:n=void 0}return(0,a.useCallback)(()=>{s(c.to({type:y.DV,data:{team:r,resource:e,editorType:_._Y.DESIGN,currentPlan:m.F.Plan.STARTER,upsellPlan:m.F.Plan.PRO,upsellSource:n}})),(0,o.sx)("prototype.payment_upsell_modal_shown",{paywallFeature:e})},[s,e,r,n])}function R(){let{canUseAdvancedPrototyping:e,canMoveFileToProPlus:r,showMoveToProTeam:n}=(0,E.R)(),a=(0,s.kc)().prototype_multi_path_paywall&&!e,o=(0,h.q5)(),c=(0,i.d4)(e=>o&&o.teamId?e.teams[o.teamId]:null),u=(0,l.useAtomValue)(h.Hu),m=(0,b.sO)(),p=(0,d.ow)(),_=O(f.Bi.PROTOTYPING_MULTIPLE_ACTIONS,c),g=O(f.Bi.PROTOTYPING_CONDITIONAL_ACTIONS,c),y=O(f.Bi.PROTOTYPING_VARIABLES,c),v=O(m?f.Bi.VIDEOS_IN_SLIDES:p?f.Bi.VIDEOS_IN_WHITEBOARD:f.Bi.VIDEOS_IN_PROTOTYPES,c);return{shouldShowAdvancedPrototypingPaywall:a,showAdvancedPrototypinglMultipleActionsModal:r?n:_,showAdvancedPrototypingConditionalActionsModal:r?n:g,showAdvancedPrototypingVariablesModal:r?n:y,showVideosModal:r&&!u?n:v}}[...N,...C,...L],[...C,...N,...L];var P=(e=>(e[e.SINGLE_COL=0]="SINGLE_COL",e[e.TWO_COL=1]="TWO_COL",e[e.NONE=2]="NONE",e))(P||{});function D(e){return e.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType))}function k(){let e=(0,v.HS)(),{selectedInteractions:r,differentLengthActions:n}=(0,v.Ay)(e);if(!(0,u.GS)())return 2;let a=D(r)||r.some(e=>void 0!==e.actions&&e.actions?.length>1),i=r.length>1&&!n&&r[0].actions?.length===1&&D(r)&&!r.every(e=>e.actions?.every(e=>"CONDITIONAL"===e.connectionType));return!a||n||i?0:1}},991995:(e,r,n)=>{n.d(r,{E8:()=>l,U8:()=>o,_i:()=>s});var a=n(946829),i=n(41893);function o(e){let r=[],n=i.y.isApple();return n&&e.metaKey&&r.push("\u2318"),!n&&e.metaKey&&r.push(e.ctrlKey?"\u2318":"Ctrl"),e.ctrlKey&&r.push(n?"\u2303":"Ctrl"),e.shiftKey&&r.push(n?"\u21E7":"Shift"),e.altKey&&r.push(n?"\u2325":"Alt"),r.push(c[e.keyCode]||String.fromCharCode(e.keyCode)),r.join(n?"":"+")}function s(e){if(!e)return null;let r={metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:0};for(let n of e)switch(n){case 16:r.shiftKey=!0;break;case 17:r.ctrlKey=!0;break;case 18:r.altKey=!0;break;case 91:case 92:case 93:case 224:r.metaKey=!0;break;default:r.keyCode=n}return r.keyCode?r:null}function l(e,r=!1){if(!e||e?.triggerDevice==="KEYBOARD")return null;let n=d.get(e?.triggerDevice),i=e?.keyCodes?.[0]??0,o=n?.get(i)??function(e){if(e>=a.c){let r=Math.floor((e-a.c)/2);return`Axis ${r} ${e%2==0?"-":"+"}`}return`Button ${e}`}(i);return o.length<=1&&!r&&(o+=" (Gamepad)"),o}let c={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",41:"Select",42:"Print",43:"Execute",44:"Print Screen",45:"Ins",46:"Del",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"=",60:"<",61:"=",63:"\xdf",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"*",107:"+",108:".",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",151:"Airplane Mode",160:"^",161:"!",163:"#",164:"$",166:"Page Backward",167:"Page Forward",168:"Refresh",170:"*",172:"Home",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",193:"?",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`"},d=new Map([["SWITCH_PRO",new Map([[0,"B"],[1,"A"],[2,"Y"],[3,"X"],[4,"L"],[5,"R"],[6,"ZL"],[7,"ZR"],[8,"-"],[9,"+"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Capture"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["PS4",new Map([[0,"X"],[1,"\u25CB"],[2,"\u25A1"],[3,"\u25B3"],[4,"L1"],[5,"R1"],[6,"L2"],[7,"R2"],[8,"Share"],[9,"Options"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Touch Pad"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["XBOX_ONE",new Map([[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"View"],[9,"Menu"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Xbox Button"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])]])},310618:(e,r,n)=>{n.d(r,{Ay:()=>y,HS:()=>E});var a=n(188507),i=n(834825),o=n(48451),s=n(805014),l=n(245459),c=n(777535),d=n(156310),u=n(366172),m=n(923219),p=n(427494),h=n(404227),_=n(756044),g=n(105498);function f(e){if(!e||!e.interactionType)return"NONE";switch(e.interactionType){case"MOUSE_IN":case"MOUSE_OUT":case"MOUSE_ENTER":case"MOUSE_LEAVE":case"MOUSE_DOWN":case"MOUSE_UP":return e.interactionType+(e.interactionMaintained?.toString()??"0");case"ON_KEY_DOWN":return e.interactionType+(e.keyTrigger?.triggerDevice??"")+(e.keyTrigger?.keyCodes?.sort().toString()??"");case"AFTER_TIMEOUT":return e.interactionType+(e.transitionTimeout?.toString()??"0");case"ON_MEDIA_HIT":return e.interactionType+(e.mediaHitTime?.toString()??"0");default:return e.interactionType}}function E(){let e=(0,a.d4)(A),r=new Set((0,a.d4)(N));return e.some(e=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;return n&&r.has(n)})?g.J.NORMAL:g.J.INHERITED_INTERNAL}function y(e){let r=(0,a.d4)(A),n=(0,a.d4)(C),i=e===g.J.INHERITED_INTERNAL?n:r,o=(0,a.d4)(N),s=new Set(o),E=new Set,y=[];i.forEach((e,r)=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;n&&s.has(n)&&(E.add(r),y.push(e))});let T=y.map(e=>e.actions?.length).some(e=>e!==y[0].actions?.length),L=(0===y.length?[]:y[0].actions||[]).map(e=>({...e})),O=(0,p.eY)();if(!T)for(var R=0;R<y.length;R++){let e=y[R].actions||[];for(var P=0;P<e.length;P++){let r=L[P],n=e[P];for(let e in n)r[e]?v(n,r,e,O)||(r[e]=m.oV):r[e]=n[e]}}let D=a=>(function o(s){let l=function(...o){let[l,d]=o,p=!1,h=[],f=[];for(let e in l)(0,m.gl)(U[e])?(p=!0,h.push(e)):f.push(e);let{changes:y,eventChanges:b,actionChanges:v,interactionChanges:T}=function(e){let r={},n={},a={},i={};for(let o in e)S.has(o)?a[o]=e[o]:I.has(o)?n[o]=e[o]:w.has(o)?i[o]=e[o]:r[o]=e[o];return{changes:r,eventChanges:n,actionChanges:a,interactionChanges:i}}(l),A=[];i.forEach((e,r)=>{if(E.has(r)){let r={...e.event,...b},n=[],i=e.actions||[];for(let e=0;e<i.length;e++)if(e===a){if(s.length>1){let{newPrototypeAction:r}=function(e,r,n){if(r.length>2&&e.conditionalActions){let o=e.conditionalActions,s=e.conditionalActions,l=r[1],c=s[l];var a={condition:c.condition,actions:[]},i=[];let d=c.actions?c.actions:[];for(let e=0;e<d.length;e++)e===r[2]?i.push({...d[e],...n}):i.push({...d[e]});a.actions=i,o[l]=a,e.conditionalActions=o}return{newPrototypeAction:e}}(i[e],s,v);n[e]=r}else n.push({...i[e],...v})}else n.push({...i[e]});a>=n.length&&n.push({...v}),A.push({...e,...T,event:r,actions:n})}else A.push(e)}),(0,c.sx)("prototype_update_selection_properties",{mixedUpdate:p,mixedUpdatedProperties:h,nonMixedUpdatedProperties:f,num_connector:E.size,category:e}),e===g.J.NORMAL?A=[...A,...n]:e===g.J.INHERITED_INTERNAL&&(A=[...r,...A]),y.prototypeInteractions=A,u.Y5.updateSelectionProperties(y,{shouldCommit:d?.shouldCommit||_.zk.YES,overwrite:d?.overwrite})};return l.appendActionIndex=function(e){return o([...s,e])},l})([a]),k=e=>e&&null!=e.actions?e.actions[0]:null,M=e=>{let r=k(e);if(null==r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},F=(e,r)=>{if(!e.actions||e.actions?.length===0||0===r.length)return null;if(!(r.length>2))return e.actions[r[0]];{let n=e.actions.length>r[0]?e.actions[r[0]]:null;if(n&&n.conditionalActions){let e=n.conditionalActions.length>r[1]?n.conditionalActions[r[1]]:null;if(e&&e.actions)return e.actions.length>r[2]?e.actions[r[2]]:null}}},x=(e,r)=>{if(null==r||void 0===r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},U=function(e,r){let n={},a={};for(let i of e){if(!i||!i.event)continue;for(let e in i.event)n[e]?b(i.event,n,e)||(n[e]=m.oV):n[e]=i.event[e];let e=i.actions&&{...i.actions[0]};if(e)for(let n in e)a[n]?v(e,a,n,r)||(a[n]=m.oV):a[n]=e[n]}return{...n,...a}}(y,O),B=function(e,r){let n={},a=[{}];for(let o of e){if(!o||!o.event)continue;for(let e in o.event)n[e]?b(o.event,n,e)||(n[e]=m.oV):n[e]=o.event[e];if(!o.actions)continue;let e=o.actions;var i=0;for(let n of e){for(let e in n){i>a.length-1&&a.push({});let o=a[i];o[e]?v(n,o,e,r)||(o[e]=m.oV):o[e]=n[e]}i++}}return{interactionEvent:n,interactionActions:a}}(y,O),V=new Set(o.map(e=>{let r=d.s(e);return r?l.dI(r.nodeID):""}).filter(e=>""!==e)),G=i.filter(e=>e.sourceNodeID&&V.has(l.dI(e.sourceNodeID)));var H=[...G];let W=function(){let e=(0,a.d4)(C);return Object.keys((0,a.d4)(h.Xt)).length>1?function(e){let r=[],n=new Map;for(let r of e){let e=f(r.event);n.has(e)||n.set(e,[]);let a=n.get(e);a&&a.push(r)}for(let[e,a]of n)a&&a.length>0&&a[0].event&&r.push({key:e,event:a[0].event,interactions:a});return r}(e):function(e){let r=[];if(e.length>0&&e[0].event)for(let n of e)n.event&&r.push({key:f(n.event),event:n.event,interactions:[n]});return r}(e)}();if(W.length>0)for(var R=0;R<W.length;R++){let e=W[R];for(var K=0;K<e.interactions.length;K++){let r=e.interactions[K];H.find(e=>e.id===r.id)||H.push(r)}}return{makeUpdateSelectionPropertiesForActionIndex:D,updateSelectionProperties:D(0),makeUpdateMultipleDestinationNodesForActionIndex:a=>(function a(o){let s=function(a,s,c){let d={},m=[];i.forEach(e=>{let r=F(e,o),n=x(e,r);if(r&&n&&-1!==Object.keys(a).indexOf(n)&&l.sH(a[n])){let d=l.sH(a[n]);if(d){if(!e.actions)return;var i=[];let n=o[0];if(r){if(o.length>2){let r=e.actions[n],a=o[1];if(r.conditionalActions){let n=r.conditionalActions[a],l=o[2],u=r.conditionalActions;var s={condition:r.conditionalActions[a].condition,actions:[]};if(n.actions){let m={...n.actions[l],transitionNodeID:d};var c=[...n.actions];c.splice(l,1,m),s.actions=c,u[a]=s,r.conditionalActions=u,(i=[...e.actions]).splice(o[0],1,r)}}}else{let r={...e.actions[o[0]],transitionNodeID:d};(i=[...e.actions]).splice(o[0],1,r)}m.push({...e,actions:i})}}}else m.push(e)}),e===g.J.NORMAL?m=[...m,...n]:e===g.J.INHERITED_INTERNAL&&(m=[...r,...m]),d.prototypeInteractions=m,u.Y5.updateSelectionProperties(d,{shouldCommit:s,overwrite:c})};return s.appendActionIndex=function(e){return a([...o,e])},s.updateMultipleDestinationNodes=function(e,r,n){return s},s})([a]),updateMultipleDestinationNodes:(a,o,s)=>{let c={},d=[];i.forEach(e=>{let r=M(e);if(r&&-1!==Object.keys(a).indexOf(r)&&l.sH(a[r])){let n=l.sH(a[r]);if(n){if(!e.actions)return;let r=e.actions.findIndex(e=>"INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType);if(-1!==r){let a={...e.actions[r],transitionNodeID:n},i=[...e.actions];i.splice(r,1,a),d.push({...e,actions:i})}}}else d.push(e)}),e===g.J.NORMAL?d=[...d,...n]:e===g.J.INHERITED_INTERNAL&&(d=[...r,...d]),c.prototypeInteractions=d,u.Y5.updateSelectionProperties(c,{shouldCommit:o,overwrite:s})},detailPropsMultipleActions:B,detailProps:U,interactionsOnSelectedNode:G,interactionsOnSelectedNodesAndComponents:H,selectedInteractions:y,mergedActions:L,differentLengthActions:T,selectedNoodleIds:o}}function b(e,r,n){if("keyTrigger"===n){let a=e[n],o=(0,m._W)(r[n],void 0);return(0,i.lu)(a?.keyCodes||[],o?.keyCodes||[])&&a?.triggerDevice===o?.triggerDevice}return e[n]===r[n]}function v(e,r,n,a){switch(n){case"transitionNodeID":let i=e[n],c=(0,m._W)(r[n],void 0);return l.aI(i,c);case"targetVariable":let d=e[n],u=r[n];if(!d&&!u)return!0;if(d&&u){if("id"in d&&"id"in u)return d.id===u.id;if("nodeFieldAlias"in d&&"nodeFieldAlias"in u){let e=d.nodeFieldAlias.stablePathToNode,r=u.nodeFieldAlias.stablePathToNode,n=e&&1===e.length?a.get(e[0]):null,i=r&&1===r.length?a.get(r[0]):null;if(n&&i&&n.isState&&i.isState&&n.containingStateGroupId===i.containingStateGroupId)return s.Egt.getExplicitPropDefIDBinding(n.guid,d.nodeFieldAlias.indexOrKey)===s.Egt.getExplicitPropDefIDBinding(i.guid,u.nodeFieldAlias.indexOrKey);return(0,o.c2)(d.nodeFieldAlias,u.nodeFieldAlias)}}return!1;case"overlayRelativePosition":let p=e[n],h=(0,m._W)(r[n],void 0);return p?.x===h?.x&&p?.y===h?.y;case"easingType":let _=e[n],f=(0,m._W)(r[n],void 0);if("CUSTOM_CUBIC"!==_||"CUSTOM_CUBIC"!==f)return _===f;return T((0,m._W)(e.easingFunction,void 0),(0,m._W)(r.easingFunction,void 0));case"easingFunction":return T(e[n],(0,m._W)(r[n],void 0));case"extraScrollOffset":let E=e[n],y=(0,m._W)(r[n],void 0);return E?.x===y?.x&&E?.y===y?.y;case"targetVariableData":return(0,g.j)(e[n],r[n],a);case"conditionalActions":let b=e[n],I=r[n];if(!(0,m.hS)(I))return!1;if(!(b&&I&&2===b.length&&2===I.length&&b[0]?.condition&&I[0]?.condition&&b[0]?.actions&&I[0]?.actions&&b[1]?.actions&&I[1]?.actions))return(0,o.c2)(e[n],r[n]);{let e=(0,g.j)(b[0].condition,I[0].condition,a),r=(e,r)=>{if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)for(let i in e[n])if(!v(e[n],r[n],i,a))return!1;return!0},n=b[0].actions,i=I[0].actions,o=n&&i&&r(n,i),s=b[1].actions,l=I[1].actions,c=s&&l&&r(s,l);return e&&o&&c}default:return e[n]===r[n]}}function T(e,r){if(e===r)return!0;if(void 0===e||void 0===r||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}let I=new Set(["interactionType","interactionMaintained","interactionDuration","keyTrigger","transitionTimeout","mediaHitTime"]),S=new Set(["transitionNodeID","transitionType","transitionDuration","easingType","easingFunction","transitionShouldSmartAnimate","connectionType","connectionURL","targetVariable","targetVariableData","navigationType","transitionPreserveScroll","transitionResetVideoPosition","openUrlInNewTab","extraScrollOffset","mediaAction","mediaSkipToTime","mediaSkipByAmount","conditions","conditionalActions","transitionResetScrollPosition","transitionResetInteractiveComponents","targetVariableSetID","targetVariableModeID","targetVariableSetKey"]),w=new Set(["stateManagementVersion"]);function A(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function C(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function N(e){return e.mirror.appModel.selectedInteractions}},597071:(e,r,n)=>{n.d(r,{PR:()=>s});var a=n(245459);let i=new class{constructor(){this.upgradedInteractions=new Set}getGUIDString(e){return a.dI(e)??a.dI(a.Hr)}recordInteractionUpgraded(e,r){return this.upgradedInteractions.add(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}hasInteractionBeenUpgraded(e,r){return this.upgradedInteractions.has(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}haveInteractionsBeenUpgraded(e){for(let r of e)if(!this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!1;return!0}haveAnyInteractionsBeenUpgraded(e){for(let r of e)if(1===r.stateManagementVersion&&this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!0;return!1}clearData(){this.upgradedInteractions=new Set}};class o{recordInteractionUpgraded(e,r){i.recordInteractionUpgraded(a.sH(e),a.sH(r))}}function s(){new o}},76237:(e,r,n)=>{n.d(r,{$4:()=>S,Id:()=>g,JU:()=>N,K0:()=>p.K0,UZ:()=>L,YW:()=>p.YW,Zk:()=>f,fI:()=>y,hl:()=>b,jT:()=>A,ks:()=>C,xZ:()=>I,xw:()=>T,zi:()=>E});var a=n(411855),i=n(629019),o=n.n(i),s=n(137565),l=n(250392);n(693565);var c=n(19776);n(688656);var d=n(596651),u=n(166123),m=n(671044),p=n(848969);let h=(e,r)=>({...e,className:`${r} ${e.className||""}`});function _(e){let r=a.useMemo(()=>(0,u.v)(e,"ModalPanel"),[e]);return a.createElement(s.D8,{...h(r,m.a2),"data-non-interactive":!0})}function g(e){return a.createElement(_,{...e})}let f=a.forwardRef(function(e,r){return a.createElement(s.D8,{...(0,u.v)(h(e,"propertiesPanel"),"Panel"),forwardedRef:r,"data-non-interactive":!0})}),E=(0,a.forwardRef)((e,r)=>a.createElement(s.D8,{...(0,u.v)(h(e,"propertiesPanel"),"Panel"),forwardedRef:r,"data-non-interactive":!0})),y=(0,a.forwardRef)(function({selected:e,selectedSecondary:r,heightMultiplier:n,...i},o){let l;let c=r?m.kR:e?m.CZ:null;return l=2===n?m.X0:1.25===n?m.ht:1.5===n?m.LE:m.l$,c&&(l+=" "+c),a.createElement(s.D8,{...h(i,l),"data-non-interactive":!0,forwardedRef:o})});function b(e){return a.createElement(s.D8,{...h(e,m.Zz),"data-non-interactive":!0})}function v(e){let{doNotReserveSpaceForChevron:r,faded:n,extended:i,innerRef:o,isPanelBodyCollapsedAtom:l,forceNoChevron:c,highlightOnHover:u,...p}=e,_=m.Dn;e.faded&&(_=m.Tz),e.extended&&(_=m.iY),l&&(_=_+" "+m.bW),c&&(_+=` ${m.sI}`),u&&(_+=` ${m.BI}`);let g=h(p,_);return a.createElement(s.D8,{...g,forwardedRef:o},!r&&a.createElement(d.r2,{isPanelBodyCollapsedAtom:l||null}),e.children)}function T(e){return a.createElement(v,{...e})}function I(e){return a.createElement(v,{...e})}function S({...e}){return a.createElement("div",{...h(e,m.DS),dir:"auto"})}function w({noLeftBorder:e,squareRightBorder:r,noBorderOnFocus:n,noPlaceholderLine:a,softDisabled:i,className:s,...l}){return e&&(s+=` ${m.Z4}`),r&&(s+=` ${m.O1}`),n||(s+=` ${m.PQ}`),a&&(s+=` ${m.LJ}`),i&&(s+=` ${m.EA}`),Object.assign(l,{className:o()(m._Z,s)})}let A=a.forwardRef(function(e,r){let n=w(e);return a.createElement(s.u2,{autoComplete:"false",spellCheck:!1,forwardedRef:r,...n})});class C extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{!(0,c.jr)(e,c.W0.NO)&&this.props.onKeyDown&&this.props.onKeyDown(e)}}render(){let e=w(this.props);return a.createElement(l.L,{"data-testid":this.props.dataTestId,type:"text",spellCheck:!1,...e,onKeyDown:this.onKeyDown,ref:e.innerRef})}}function N({disabled:e,...r}){return a.createElement("label",{...h(r,e?m.wh:m.Pf),dir:"auto"})}function L(e){return a.createElement("label",{...h(e,m.wh)})}C.displayName="TextInput",a.forwardRef((e,r)=>{let{className:n,...i}=w(e);return a.createElement(s.D8,{...i,className:o()(n,m.PB),forwardedRef:r,tabIndex:0})})},845113:(e,r,n)=>{var a=n(411855),i=n(779312),o=n(747579),s=n(629019),l=n.n(s),c=n(134288),d=n(157173),u=n(948672);let m=(0,a.createContext)(()=>null),p=(0,a.forwardRef)(function({size:e,defaultSize:r,animation:n,disableResizing:i,unsetSizeWhenDisabled:o,onResize:s,side:l,children:u,style:p,..._},g){let f=(0,d.M)(g),E=(0,a.useCallback)(()=>f.current,[f]),y=(0,a.useRef)(0),b=(0,a.useRef)(0),v="left"===l?-1:1,T=a.createElement(m.Provider,{value:E},u,i?null:a.createElement(h,{side:l,onDragStart:()=>{void 0===e||(b.current=e,y.current||(y.current=e))},onDrag:e=>{let r="bottom"===l?e.delta.y:e.delta.x;s(b.current+r*v)},onDoubleClick:()=>{s(r??y.current)}})),I=i&&o?void 0:e,S="left"===l||"right"===l?I:void 0,w="bottom"===l?I:void 0,A=p?{...p,width:S,height:w}:{width:S,height:w};return n?a.createElement(c.P.div,{style:A,..._,ref:f,...n},T):a.createElement("div",{style:A,..._,ref:f},T)});function h({side:e,onDoubleClick:r,onDragStart:n,onDrag:o}){let[,s]=(0,i.i)({onDragStart:n,onDrag:o});return a.createElement("div",{role:"separator","aria-hidden":!0,...s({className:l()({[u.horizontalHandle]:"left"===e||"right"===e,[u.verticalHandle]:"bottom"===e,[u[e]]:!0}),onDoubleClick:r})})}(0,a.forwardRef)(function(e,r){let{version:n}=(0,o.DP)(),{size:i,defaultSize:s,animation:l,disableResizing:c,onResize:d,side:u,children:m,...h}=e;return"ui2"===n?a.createElement("div",{...h,ref:r},m):a.createElement(p,{...e,ref:r})})},587508:(e,r,n)=>{n.d(r,{Yq:()=>s,sH:()=>i,sI:()=>a}),n(805014).eVK.MIDDLE_CENTER;let a=.01,i=100;var o=(e=>(e.TextInput="text-input",e.Selector="selector",e))(o||{}),s=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(s||{})},189854:(e,r,n)=>{n(411855),n(188507),n(805014),n(629019),n(157173),n(563192),n(509343),n(965636),n(515662),n(125682),n(756044),n(688656),n(868911),n(364985),n(6525),n(642870),n(113843),n(693565),n(453783),n(145427),n(468476)},626632:(e,r,n)=>{n(411855),n(188507),n(254773),n(18840),n(841962),n(923219),n(965636),n(427494),n(926996),n(289765),n(404227),n(756044),n(103785),n(145427)},145427:(e,r,n)=>{n.d(r,{rO:()=>k}),n(411855),n(188507),n(846288);var a=n(281571),i=n(394502),o=n(630093),s=n(221415),l=n(280296),c=n(243298),d=n(387739),u=(n(805014),n(851169));n(245954),n(254773),n(32050),n(108982),n(841962);var m=n(875877),p=(n(76265),n(863599)),h=n(754807);n(366172),n(509343),n(923219);var _=n(648936);n(965636),n(620552),n(289765),n(404227),n(756044),n(475762);var g=n(649295),f=n(969756),E=n(528822),y=n(355593),b=n(312077),v=n(792594),T=n(804264),I=n(127027),S=n(904459),w=n(715682),A=n(904595),C=n(396347),N=n(182586),L=n(464397),O=n(317392),R=n(183919),P=n(255032),D=(e=>(e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=5]="VERTICAL",e[e.ALL=6]="ALL",e))(D||{});function k(e){return"SPACE_EVENLY"===e||"SPACE_BETWEEN"===e}function M(e,r,n){return e!==r&&(h.wt.reportAnyPropertyChange([n]),!0)}R.A,O.A,C.A,L.A,P.A,N.A,A.A,a.z,i.M,o.v,s.R,l.K,c.y,d.z,T.A,I.A,E.A,y.A,b.A,v.A,g.A,f.A,w.A,w.A,S.A,S.A;class F extends _.M{getValueForNode(e){return k(e.stackPrimaryAlignItems)?null:e.stackSpacing}setValueForNode(e,r){!k(e.stackPrimaryAlignItems)&&M(e.stackSpacing,r,"stackSpacing")&&u.l7.user("set-stack-spacing",()=>{e.stackSpacing=r})}}new F;class x extends _.M{getValueForNode(e){return e.stackCounterSpacing}setValueForNode(e,r){M(e.stackCounterSpacing,r,"stackCounterSizing")&&u.l7.user("set-stack-counter-spacing",()=>{e.stackSpacing=r})}}new x,p.Lk,p.Lk,(0,m.withEqualityCheckedSet)((0,m.atom)({width:{min:!1,max:!1},height:{min:!1,max:!1}})),(0,m.withEqualityCheckedSet)((0,m.atom)(null)),(0,m.withEqualityCheckedSet)((0,m.atom)(null));var U=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_ONLY_MIN_MAX=2]="YES_ONLY_MIN_MAX",e))(U||{})},729705:(e,r,n)=>{n.d(r,{gm:()=>s,pW:()=>o});var a=n(411855);n(188507),n(805014),n(851169),n(629019),n(693565),n(132939),n(76265),n(366172),n(509343),n(923219),n(965636),n(620552),n(756044),n(688656),n(868911),n(975760),n(366881),n(453783),n(87709),n(891720),n(189854),n(626632),n(145427);var i=n(599115);function o({OriginalComponent:e,...r}){return a.createElement(e,{...r,inputClassName:i.be,iconClassName:i.Kk})}function s({OriginalComponent:e,...r}){return a.createElement(e,{...r,outerClassName:i.kk,pillsContainerClassName:i.j1})}},181942:(e,r,n)=>{n.d(r,{aV:()=>m,oE:()=>p});var a=n(411855),i=n(816222);n(805014);var o=n(629019),s=n.n(o);n(108982),n(841962),n(621847);var l=n(132939);n(76265),n(963993);var c=n(891720);n(650832),n(806772);var d=n(815188),u=n(87171);function m({title:e,children:r,flushWithContainer:n,appendedClassName:o}){let m=(0,c.R)();return a.createElement("div",{className:s()(n?d.jO:d.lG,o)},a.createElement("div",{className:d.Z7},a.createElement(l.U,{className:d.Ev,svg:u.A},a.createElement(i.r,null)),!m&&e),a.createElement("div",{className:d.t},m&&!!e&&a.createElement("div",{className:d.Qb},e),r))}function p({title:e,children:r,closeButton:n}){let o=(0,c.R)();return a.createElement("div",{className:d.Vf},a.createElement("div",{className:d.Ii},a.createElement("div",{className:d.Z7},a.createElement(l.U,{className:d.Ev,svg:u.A},a.createElement(i.r,null)),!o&&e),n),a.createElement("div",{className:d.t},o&&!!e&&a.createElement("div",{className:d.Qb},e),r))}},650832:(e,r,n)=>{n.d(r,{NA:()=>d,OC:()=>u,ow:()=>m});var a=n(805014),i=n(299249),o=n(176160),s=n(806772);function l(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function c(e){let r=l(e);return r&&r.mode!==a.iCO.NONE&&r.mode!==a.iCO.NON_STATE_COMPONENTS?r.stateGroupModel:null}function d(e){let r=l(e);return r&&r.mode!==a.iCO.NONE&&r.mode!==a.iCO.NON_STATE_COMPONENTS?r.stateGroup:null}(0,i.Zm)(function(e){return c(e)?.stateGroupError});let u=(0,i.Zm)(function(e){return c(e)?.propertySortOrder}),m=(0,i.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&e.mode!==a.iCO.NONE&&e.mode!==a.iCO.NON_STATE_COMPONENTS?e.allStates.map(e=>(0,s.dq)(e,r,n)):null),p=(0,i.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&(e.mode===a.iCO.STATE||e.mode===a.iCO.STATE_INSTANCE||e.mode===a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?e.selectedStates.map(e=>(0,s.dq)(e,r,n)):null);(0,i.P8)([p,function(e){return l(e)?.mode},c],(e,r,n)=>e&&n&&(r===a.iCO.STATE||r===a.iCO.STATE_INSTANCE||r===a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?(0,s.m4)(e,n.propertySortOrder||[]):null)},806772:(e,r,n)=>{n.d(r,{NE:()=>y,O4:()=>b,QV:()=>_,dq:()=>f,m4:()=>h,uL:()=>E,xJ:()=>m,zb:()=>g,zh:()=>p});var a=n(411855);n(188507);var i=n(805014),o=n(33011),s=n(302245),l=n(777535);n(754807),n(366172),n(963993);var c=n(923219),d=n(176160),u=n(827473);let m="\u2014";function p(e,r){return Object.keys(e).sort((e,n)=>r.indexOf(e)-r.indexOf(n)).map(r=>`${r}=${e[r]}`).join(", ")}function h(e,r,n){let a={};for(let i of e){if(void 0!==i.actionIndexPath&&void 0!==n&&i.actionIndexPath.some((e,r)=>e!==n[r]))continue;let{propertyValues:e}=i.stateInfo;if(e)for(let n of r)n in a&&a[n]!==e[n]?a[n]=a[n]&&e[n]?c.oV:"":a[n]=e[n]||""}return a}function _(e){return e.replace(/[,=]/g,"").trim()}function g(e,r,n){let a=i.glU.getStateGroupAnalyticsInfo(r);(0,l.sx)(e,{...a,...n||{}})}function f(e,r,n){return{stateInfo:e.stateInfo,symbol:(0,u.i_)(null,null,e.symbol,r||"",n||(0,o.l)("")),actionIndexPath:function(e){if(!e)return[];let r=e.match(/\{(.*?)\}/);return!r||r.length<2?[]:r[1].trim().split(",").map(e=>parseFloat(e.trim()))}(e.actionIndexPath)}}a.createContext(null);let E=(0,s.Mz)([e=>e.mirror.selectionProperties.stateGroupSelectionInfo,d.sS,d.XJ],function(e,r,n,a){if(!e)return null;let o=e.mode;if(o===i.iCO.NONE)return null;if(o===i.iCO.NON_STATE_COMPONENTS)return{mode:o,numSelectedNonStateComponents:e.numSelectedNonStateComponents};let s=e.stateGroup,l=e.stateGroupModel,c=l?.propertySortOrder?.length===1,d=e.allStates.map(e=>f(e,r,n));if(o===i.iCO.STATE_GROUP)return{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c};let u=e.selectedStates.map(e=>f(e,r,n)),m=h(u,l.propertySortOrder||[],a);return i.iCO.STATE,{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c,selectedStates:u,selectedStatesPropertyValues:m}}),y=[["yes","no"],["true","false"],["on","off"]],b=y.reduce((e,r)=>e.concat(r),[])},398957:(e,r,n)=>{n.d(r,{$6:()=>t_,EN:()=>tm,NC:()=>td,OH:()=>tu,SO:()=>tc,Th:()=>th,_2:()=>ty,mP:()=>tp});var a=n(411855),i=n(188507),o=n(845438),s=n(570446),l=n(739342),c=n(727765),d=n(141976),u=n(968009),m=n(625712),p=n(728288),h=n(520954),_=n(69807),g=n(334494),f=n(434773),E=n(925936),y=n(646808),b=n(615851),v=n(448873),T=n(811114),I=n(958737),S=n(852064),w=n(242505),A=n(791642),C=n(482974),N=n(321971),L=n(642149),O=n(952596),R=n(407540),P=n(300715),D=n(805014),k=n(245459),M=n(991458),F=n(606897),x=n(841962),U=n(563192),B=n(612724),V=n(132939),G=n(238795),H=n(216146),W=n(265851),K=n(76265),Y=n(225371),$=n(280533),j=n(835918),z=n(343373),q=n(785447),Z=n(366172),X=n(923219),J=n(427494),Q=n(797187),ee=n(756044),et=n(688656),er=n(868911),en=n(103785),ea=n(859877),ei=n(76237),eo=n(453783),es=n(991944),el=n(796251),ec=n(488527),ed=n(968636),eu=n(106524),em=n(7479),ep=n(313876),eh=n(613887),e_=n(568154),eg=n(810381),ef=n(410671),eE=n(796476),ey=n(625536),eb=n(761285),ev=n(430712),eT=n(920003),eI=n(110111),eS=n(134316),ew=n(800467),eA=n(234496),eC=n(222396),eN=n(144983),eL=n(237419),eO=n(824356),eR=n(316179),eP=n(900897),eD=n(260934),ek=n(729920),eM=n(161349),eF=n(748839),ex=n(467172),eU=n(155450),eB=n(706449),eV=n(204931),eG=n(328176),eH=n(340598),eW=n(625819),eK=n(660984),eY=n(641594),e$=n(773248),ej=n(710011),ez=n(98221),eq=n(15305),eZ=n(822834),eX=n(494491),eJ=n(554473),eQ=n(866014),e0=n(448760),e1=n(256735),e2=n(595324),e5=n(511219),e4=n(123262),e7=n(151809),e8=n(20918),e3=n(606409),e6=n(292030),e9=n(41025),te=n(240078);let tt=(0,M.hG)(ec.hhC),tr=eo.l6,tn=eo.c$;class ta{constructor(){this.format=e=>{switch(e){case"LINE":return(0,K.t)("fullscreen.properties_panel.stroke_settings.solid");case"SIMPLE_DASH":return(0,K.t)("fullscreen.properties_panel.stroke_settings.simple_dash");case"CUSTOM_DASH":return(0,K.t)("fullscreen.properties_panel.stroke_settings.custom");default:return""}}}}function ti(e){return e.dashCap?a.createElement("span",{className:e.className},a.createElement(o.bL,{value:(0,X.hS)(e.dashCap)?e.dashCap:void 0,onChange:e.onChange,legend:a.createElement(s.q,null,(0,K.t)("fullscreen.properties_panel.stroke_settings.dash_cap")),recordingKey:e.recordingKey},a.createElement(o.c$,{icon:a.createElement(V.U,{svg:eI.A,fallbackSvg:eS.A},a.createElement(d.Q,null)),value:"NONE","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.none")}),a.createElement(o.c$,{icon:a.createElement(V.U,{svg:eC.A,fallbackSvg:eN.A},a.createElement(u.J,null)),value:"SQUARE","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.square")}),a.createElement(o.c$,{icon:a.createElement(V.U,{svg:ew.A,fallbackSvg:eA.A},a.createElement(m.E,null)),value:"ROUND","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.round")}))):null}function to(e){return e?(0,X.gl)(e)?X.oV:0===e.length?"LINE":2!==e.length?"CUSTOM_DASH":0===e[0]&&0===e[1]?"LINE":"SIMPLE_DASH":"LINE"}function ts(e){if(e){if((0,X.gl)(e))return X.oV;if(2===e.length)return e[0]}}function tl(e){let r=(0,i.wA)(),n=(0,J.ax)(),d=new ta,{strokePanelMode:u,maxStrokeWeight:m,dashPattern:_,connectorLineStyle:g}=e,[f,E]=a.useState(to(_));a.useEffect(()=>{E(to(_))},[_]);let[y,b]=a.useState(!0),[v,T]=a.useState(),I=ts(_),S=function(e){if(e){if((0,X.gl)(e))return X.oV;if(2===e.length)return e[1]}}(_),w=()=>{if(!_||(0,X.gl)(_)||2!==_.length)return;b(!0);let r=_[0];e.onChange({dashPattern:[r,r]})},A=a.useRef("NONE"),C=a.createRef(),N=a.createRef(),L=a.createRef();a.useEffect(()=>{if("NONE"!==A.current){if("FOCUS_CURRENT_EVENT"===A.current)switch(f){case"SIMPLE_DASH":N.current?.focus(),N.current?.select();break;case"CUSTOM_DASH":C.current?.focus(),C.current?.select()}"FOCUS_NEXT_EVENT"===A.current?A.current="FOCUS_CURRENT_EVENT":A.current="NONE"}},[_,f,N,C]);let O=function(e){if((0,X.gl)(e))return X.oV;switch(e){case"NONE":case"ROUND":case"SQUARE":return e;default:return}}(e.dashCap),R=u===D.yTM.VERTEX||u===D.yTM.ENDPOINT,P=(0,i.d4)(e=>e.mirror.selectionProperties.numSelectedByType),k=(0,j.vx)(P,"CONNECTOR"),M=v??f;return a.createElement("div",{className:ed.wO},k&&void 0!==g&&a.createElement(ei.fI,null,a.createElement(ei.JU,{className:k?ed.Tm:ed.Uk},(0,K.tx)("fullscreen.properties_panel.stroke_settings.path_style")),a.createElement("span",{className:ed.rI},a.createElement(o.bL,{value:(0,X.hS)(g)?g:void 0,onChange:r=>{e.onChange({connectorLineStyle:r})},legend:a.createElement(s.q,null,(0,K.t)("fullscreen.properties_panel.stroke_settings.path_style")),recordingKey:U.Pt(e,"pathStyle")},a.createElement(o.c$,{icon:a.createElement(V.U,{svg:te.A},a.createElement(p.h,null)),value:"STRAIGHT","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.straight")}),a.createElement(o.c$,{icon:a.createElement(V.U,{svg:e6.A,fallbackSvg:e9.A},a.createElement(h.S,null)),value:"ELBOWED","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.elbowed")})))),a.createElement(ei.fI,null,a.createElement(ei.JU,{className:R?ed.VB:ed._f},(0,K.tx)("fullscreen.properties_panel.stroke_settings.stroke_style")),a.createElement(tr,{id:"line-style-select",className:ed.au,property:f,formatter:d,onChange:(r,n=ee.zk.YES)=>{A.current="FOCUS_NEXT_EVENT";let a=2*(m??1);switch(r){case"LINE":e.onChange({dashPattern:[]},n);break;case"SIMPLE_DASH":e.onChange({dashPattern:[a,a]},n);break;case"CUSTOM_DASH":e.onChange({dashPattern:[a,2*a,3*a,4*a]},n)}},dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:120,recordingKey:U.Pt(e,"strokeStyle"),icon:function(e){switch(e){case"LINE":return a.createElement(V.U,{svg:e8.A,fallbackSvg:e3.A},a.createElement(l.t,null));case"SIMPLE_DASH":return a.createElement(V.U,{svg:e4.A,fallbackSvg:e7.A},a.createElement(c.S,null));default:return}}(f),iconClassName:R?ed.uX:ed.eD,disabled:R,onPreview:e=>{T(e)},enablePreview:n},a.createElement(tn,{additionalStylesClassName:ed.Z,value:"LINE",recordingKey:U.Pt(e,"LINE")},a.createElement("span",{className:ed.Z},a.createElement(V.U,{className:ed.yW,svg:e8.A,fallbackSvg:e3.A},a.createElement(l.t,null)),a.createElement(H.o,{text:d.format("LINE")}))),a.createElement(tn,{value:"SIMPLE_DASH",recordingKey:U.Pt(e,"SIMPLE_DASH"),additionalStylesClassName:ed.Z},a.createElement("span",{className:ed.Z},a.createElement(V.U,{svg:e4.A,fallbackSvg:e7.A,className:ed.yW},a.createElement(c.S,null)),a.createElement(H.o,{text:d.format("SIMPLE_DASH")}))),a.createElement(eo.sK,null),a.createElement(tn,{value:"CUSTOM_DASH",recordingKey:U.Pt(e,"CUSTOM_DASH")}))),("SIMPLE_DASH"===M||M===X.oV)&&a.createElement(a.Fragment,null,a.createElement(ei.fI,null,a.createElement(ei.JU,{className:R?ed.S_:ed.bP},(0,K.tx)("fullscreen.properties_panel.stroke_settings.dash")),a.createElement(er.$j,{className:ed.T7,min:0,value:ts(_),onValueChange:r=>{let n;if(A.current="NONE",!_||(0,X.gl)(_)||2!==_.length)n=[r,r];else{let e=_[0],a=_[1];n=y&&e===a?[r,r]:[r,a]}e.onChange({dashPattern:n})},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:U.Pt(e,"dash"),"data-tooltip-type":et.Ib.TEXT,"data-tooltip":(0,K.t)("fullscreen.properties_panel.stroke_settings.dash"),tooltipForScreenReadersOnly:!0,forwardedRef:N,disabled:R})),a.createElement(ei.fI,null,a.createElement(ei.JU,{className:R?ed.qF:ed.Jd},(0,K.tx)("fullscreen.properties_panel.stroke_settings.gap")),a.createElement(er.$j,{className:ed.rQ,min:0,value:void 0!==S&&(0,X.hS)(S)&&y&&I===S?void 0:S,placeholder:void 0!==S&&(0,X.hS)(S)&&y&&I===S?String(parseFloat(S.toFixed(2))):void 0,onValueChange:r=>{let n;A.current="NONE",b(!1),n=!_||(0,X.gl)(_)||2!==_.length?[r,r]:[_[0],r],e.onChange({dashPattern:n})},onBlur:e=>{L.current?.value===""&&w()},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:U.Pt(e,"gap"),"data-tooltip-type":et.Ib.TEXT,"data-tooltip":(0,K.t)("fullscreen.properties_panel.stroke_settings.gap"),tooltipForScreenReadersOnly:!0,forwardedRef:L,disabled:R}))),"CUSTOM_DASH"===M&&a.createElement(ei.fI,null,a.createElement(ei.JU,{className:R?ed.g5:ed.Rm},(0,K.tx)("fullscreen.properties_panel.stroke_settings.dashes")),a.createElement(ea.nA,{className:ed.Ng,forwardedRef:C,formatter:$.B,property:e.dashPattern,onChange:r=>{e.onChange({dashPattern:r})},placeholder:(0,K.t)("fullscreen.properties_panel.stroke_settings.dash_gap"),recordingKey:U.Pt(e,"dashes"),disabled:R})),(u===D.yTM.VECTOR||u===D.yTM.LINE)&&("SIMPLE_DASH"===M||"CUSTOM_DASH"===M)&&void 0!==O&&a.createElement(ei.fI,null,a.createElement(ei.JU,{className:ed.$E},(0,K.tx)("fullscreen.properties_panel.stroke_settings.dash_cap")),a.createElement(ti,{className:ed.pl,dashCap:O,onChange:r=>{e.onChange({dashCap:r})},recordingKey:U.Pt(e,"dashCap")})))}tl.displayName="StrokeLineStyleSettings";let tc=eo.l6,td=eo.c$;class tu{constructor(){this.format=e=>{switch(e){case"NONE":return(0,K.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,K.t)("fullscreen.properties_panel.stroke_settings.line_arrow");case"ARROW_EQUILATERAL":return(0,K.t)("fullscreen.properties_panel.stroke_settings.triangle_arrow");case"TRIANGLE_FILLED":return(0,K.t)("fullscreen.properties_panel.stroke_settings.reversed_triangle");case"CIRCLE_FILLED":return(0,K.t)("fullscreen.properties_panel.stroke_settings.circle_arrow");case"DIAMOND_FILLED":return(0,K.t)("fullscreen.properties_panel.stroke_settings.diamond_arrow");case"ROUND":return(0,K.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,K.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}}}let tm={format(e){switch(e){case"NONE":return(0,K.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,K.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_line");case"ARROW_EQUILATERAL":return(0,K.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_triangle");case"TRIANGLE_FILLED":return(0,K.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_reversed");case"CIRCLE_FILLED":return(0,K.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_circle");case"DIAMOND_FILLED":return(0,K.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_diamond");case"ROUND":return(0,K.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,K.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}},tp=["NONE","ARROW_LINES","ARROW_EQUILATERAL","TRIANGLE_FILLED","CIRCLE_FILLED","DIAMOND_FILLED"],th=["ROUND","SQUARE"],t_=["NONE","ROUND","SQUARE"];function tg(e,r){switch(e){case"NONE":return"default"===r?eW.A:eK.A;case"ARROW_LINES":return"default"===r?eV.A:eG.A;case"ARROW_EQUILATERAL":return"default"===r?eJ.A:eQ.A;case"TRIANGLE_FILLED":return"default"===r?e$.A:ej.A;case"DIAMOND_FILLED":return"default"===r?eF.A:ex.A;case"CIRCLE_FILLED":return"default"===r?eP.A:eD.A;case"ROUND":return eL.A;default:return eO.A}}function tf(e){let r=(0,i.wA)(),n=new tu,o=e.strokePanelMode===D.yTM.ENDPOINT,s=1===e.strokePanelTerminalPointCount||o;return a.createElement("div",{className:ed.wO},a.createElement(ei.fI,{"data-testid":"end-point-settings-row"},a.createElement(ei.JU,{disabled:e.disabled,className:e.disabled?ed.RR:ed.mZ},s?(0,K.t)("fullscreen.properties_panel.stroke_settings.end_point"):(0,K.t)("fullscreen.properties_panel.stroke_settings.end_points")),a.createElement(tc,{id:"end-point-select",className:ed.yc,property:e.endPoint,formatter:n,onChange:r=>{e.onChange({terminalCap:r}),e.onChange({strokeCap:r})},blurOnChange:!0,dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:200,recordingKey:e.recordingKey,icon:function(e,r){switch(e){case"NONE":default:return;case"ARROW_LINES":return r?a.createElement(V.U,{svg:eB.A,fallbackSvg:eH.A},a.createElement(_.N,null)):a.createElement(V.U,{svg:e_.A,fallbackSvg:eg.A},a.createElement(g.U,null));case"ARROW_EQUILATERAL":return r?a.createElement(V.U,{svg:eX.A,fallbackSvg:e0.A},a.createElement(f.P,null)):a.createElement(V.U,{svg:ev.A,fallbackSvg:eT.A},a.createElement(E.q,null));case"TRIANGLE_FILLED":return r?a.createElement(V.U,{svg:eY.A,fallbackSvg:ez.A},a.createElement(y.N,null)):a.createElement(V.U,{svg:ef.A,fallbackSvg:eE.A},a.createElement(b.k,null));case"DIAMOND_FILLED":return r?a.createElement(V.U,{svg:eM.A,fallbackSvg:eU.A},a.createElement(v.g,null)):a.createElement(V.U,{svg:ep.A,fallbackSvg:eh.A},a.createElement(T.x,null));case"CIRCLE_FILLED":return r?a.createElement(V.U,{svg:eR.A,fallbackSvg:ek.A},a.createElement(I.c,null)):a.createElement(V.U,{svg:eu.A,fallbackSvg:em.A},a.createElement(S.J,null));case"ROUND":return r?a.createElement(V.U,{svg:eq.A},a.createElement(w.M,null)):a.createElement(V.U,{svg:ey.A},a.createElement(A.B,null));case"SQUARE":return r?a.createElement(V.U,{svg:eZ.A},a.createElement(C.Z,null)):a.createElement(V.U,{svg:eb.A},a.createElement(N.C,null))}}(e.endPoint,s),iconClassName:e.disabled?ed.qv:ed.O1,dropdownOverride:(0,X.gl)(e.endPoint)?void 0:"NONE"===e.endPoint?(0,K.t)("fullscreen.properties_panel.stroke_settings.none"):" ",disabled:e.disabled},tp.map(r=>a.createElement(td,{key:r,value:r,recordingKey:U.Pt(e,r)},a.createElement("span",{className:ed.Z6},a.createElement(G.t,{className:ed.yW,svg:tg(r,"default"),fallbackSvg:tg(r,"fallback")}),a.createElement(H.o,{text:n.format(r)})))),a.createElement(eo.sK,null),th.map(r=>a.createElement(td,{key:r,value:r,recordingKey:U.Pt(e,r)},a.createElement("span",{className:ed.Z6},a.createElement(G.t,{className:ed.yW,svg:tg(r,"default"),fallbackSvg:tg(r,"fallback")}),a.createElement(H.o,{text:n.format(r)})))))))}function tE(e){let r=(0,i.wA)();return a.createElement("div",{className:ed.wO},a.createElement(ei.fI,null,a.createElement(ei.JU,{className:e.disabled?ed.u0:ed.PF},(0,K.tx)("fullscreen.properties_panel.stroke_settings.join"))," ",a.createElement("span",{className:ed.fj},a.createElement(o.bL,{value:e.disabled||(0,X.gl)(e.strokeJoin)?void 0:e.strokeJoin,onChange:r=>{e.onChange({strokeJoin:r})},legend:a.createElement(s.q,null,(0,K.t)("fullscreen.properties_panel.stroke_settings.join")),readonly:e.disabled,recordingKey:e.recordingKey},a.createElement(o.c$,{icon:a.createElement(V.U,{svg:e2.A},a.createElement(L.H,null)),value:"MITER","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.miter")}),a.createElement(o.c$,{icon:a.createElement(V.U,{svg:e1.A},a.createElement(O.m,null)),value:"BEVEL","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.bevel")}),a.createElement(o.c$,{icon:a.createElement(V.U,{svg:e5.A},a.createElement(R.m,null)),value:"ROUND","aria-label":(0,K.t)("fullscreen.properties_panel.stroke_settings.round_join")})))),!e.disabled&&"MITER"===e.strokeJoin&&a.createElement(ei.fI,null,a.createElement(ei.JU,{className:e.disabled?ed.NW:ed.kF},(0,K.tx)("fullscreen.properties_panel.stroke_settings.miter_angle")),a.createElement(er.M4,{className:ed.Cj,disabled:e.disabled||"MITER"!==e.strokeJoin,value:e.miterLimitAngle,onValueChange:r=>{e.onChange({miterLimitAngle:r})},recordingKey:U.Pt(e,"miterAngle"),tooltipForScreenReadersOnly:!0,"data-tooltip-type":et.Ib.TEXT,"data-tooltip":(0,K.t)("fullscreen.properties_panel.stroke_settings.miter_angle"),dispatch:r})))}function ty(e){let r=(0,i.wA)(),n=(0,Q.J2)(D.Ez5.propertiesPanelState().isVertexSelectionAndHasEndpoints),l=(0,z.GS)(),[c,d]=a.useState("Basic"),u=(0,en.Tv)();if(a.useEffect(()=>{if(!u||0===u.length)return;let e=!0,r=!0;for(let n of(0,q.BL)(u)){let a=n.strokeBrushGuid;a&&"-1:-1"!==a||(e=!1);let i=n.dynamicStrokeSettings;i?1===i.interval&&0===i.wiggle&&0===i.smoothen&&(r=!1):r=!1}e?d("Brush"):r?d("Dynamic"):d("Basic")},[u]),a.useEffect(()=>{(0,F.m)().ce_il_strokes&&(fetch((0,x.ck)("faba6c400825badc7b187056ab2de6f918d95765")).then(async e=>{let r=await e.arrayBuffer();D.glU.insertBrushesFromBuffer(new Uint8Array(r),D.plo.STRETCH)}),fetch((0,x.ck)("073825045b3eb101c69c059e6239ae9a5202967c")).then(async e=>{let r=await e.arrayBuffer();D.glU.insertBrushesFromBuffer(new Uint8Array(r),D.plo.SCATTER)}))},[]),!e.pickerShown)return null;let m=new B.Mi(e.pickerShown.initialX,e.pickerShown.initialY),{strokePanelMode:p,strokePanelTerminalPointCount:h,numSelectedByType:_,arcRadius:g,arcSweep:f}=e,E=p===D.yTM.ENDPOINT||p===D.yTM.VECTOR&&h>0||n,y=p!==D.yTM.PENCIL,b=p===D.yTM.VECTOR||p===D.yTM.VERTEX,v=p===D.yTM.VECTOR&&0===h,T=v&&_&&1===Object.keys(_).length&&_.ELLIPSE&&1===g&&0!==f,I=e.strokePanelMode===D.yTM.VECTOR&&"LINE"!==to(e.dashPattern)&&e.terminalCap?e.terminalCap:e.strokeCap;return a.createElement(es.vx,{title:l?(0,K.t)("fullscreen.properties_panel.stroke_settings"):(0,K.t)("fullscreen.properties_panel.stroke_settings.advanced_stroke"),initialPosition:m,headerSize:"small",onClose:()=>{r(Y.XE()),Z.Y5.deselectProperty()},recordingKey:U.Pt(e,"modal"),initialWidth:tt},(0,F.m)().ce_il_strokes&&a.createElement(P.J,null,a.createElement("div",{className:W.s.pt12.px12.$},a.createElement(o.bL,{value:c,legend:a.createElement(s.q,null,(0,K.t)("fullscreen.properties_panel.stroke_settings.stroke_type")),onChange:r=>{d(r),"Dynamic"!==r?e.onChange({dynamicStrokeSettings:{frequency:1,wiggle:0,smoothen:0}}):e.onChange({dynamicStrokeSettings:{frequency:.75,wiggle:.3,smoothen:.5}}),"Brush"!==r&&(e.onChange({strokeBrushGuid:k.Hr}),(0,el.UH)(null,u||[]))}},a.createElement(o.RT,{value:"Basic",label:(0,K.t)("fullscreen.properties_panel.basic")}),a.createElement(o.RT,{value:"Brush",label:(0,K.t)("fullscreen.properties_panel.brush")}),(0,F.m)().ce_il_dynamic_strokes&&a.createElement(o.RT,{value:"Dynamic",label:(0,K.t)("fullscreen.properties_panel.dynamic")})))),"Basic"===c&&a.createElement(a.Fragment,null,a.createElement(tl,{onChange:e.onChange,strokePanelMode:e.strokePanelMode,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,connectorLineStyle:e.connectorLineStyle,dashPattern:e.dashPattern,dashCap:e.dashCap,maxStrokeWeight:e.maxStrokeWeight,strokeCap:e.strokeCap,terminalCap:e.terminalCap,dropdownShown:e.dropdownShown,recordingKey:U.Pt(e.recordingKey,"lineStyle")}),E&&a.createElement(tf,{onChange:e.onChange,endPoint:I,dropdownShown:e.dropdownShown,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,disabled:v&&!T&&!n,recordingKey:U.Pt(e.recordingKey,"endPoint"),strokePanelMode:p}),y&&a.createElement(tE,{onChange:e.onChange,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,disabled:!b,recordingKey:U.Pt(e.recordingKey,"join")})),"Brush"===c&&a.createElement("div",{className:ed.wO},a.createElement(el.Vg,{recordingKey:U.Pt(e.recordingKey,"brushPicker"),onChange:e.onChange,initialPosition:m})),"Dynamic"===c&&a.createElement(el.BZ,{onChange:e.onChange,recordingKey:e.recordingKey}))}tf.displayName="EndPointSettings",tE.displayName="StrokeJoinAndMiterAngleSettings"},391107:(e,r,n)=>{n.d(r,{A8:()=>y,OS:()=>g,WH:()=>T,bi:()=>v,dd:()=>E,yT:()=>I,zb:()=>f});var a=n(411855),i=n(188507),o=n(879058);n(805014);var s=n(245459),l=n(841962),c=n(650981),d=n(923219),u=n(427494),m=n(176160),p=n(601242),h=n(189385),_=n(957020);function g(e){return`styles-picker-${e}`}function f(e){return e.stylePickerShown.isShown&&e.stylePickerShown.id===g(e.inheritStyleKeyField)?e.stylePickerShown:null}function E(e){return e&&(0,s.fn)(e.guid)}function y(e){let r=(0,d.E7)(e);return r&&r!==o.n3.INVALID}function b({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:a}){let i=(0,d.E7)(n);if(!i)return null;let l=(0,d.E7)(a);if(!l)return null;let u=(0,s.dI)(l.guid),m=Object.values(e.local.styles).find(e=>e.node_id===u);if(m)return m.is_soft_deleted?null:m;let p=r.get(u);return p?{key:i,style_type:p.styleType,type:_.PW.STYLE,node_id:u,name:p.name,isLocal:!1,content_hash:p.styleVersionHash??void 0,userFacingVersion:(0,o.IA)(p.userFacingVersion),file_key:"",file_key_source:c.Ps.LOCAL_FILE,library_key:p.sourceLibraryKey}:null}function v({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:a}){if((0,l.kc)().ds_zombie_styles_fixes)return b({library:e,sceneGraph:r,inheritStyleID:a,inheritStyleKey:n});if(!y(n))return null;let i=(0,d.E7)(n);if(!i)return null;let o=Object.values(e.local.styles).find(e=>e.key===i);if(o&&!o.is_soft_deleted)return o;let s=(0,h.b)({library:e},i,(0,d.E7)(a));return s?.status==="loaded"?s.data:null}function T(e,r,n){let o=(0,i.d4)(e=>e.library),s=(0,u.eY)(),c=(0,p.bO)(),d=(0,m.tS)(),h=b({library:o,sceneGraph:s,inheritStyleKey:e,inheritStyleID:r}),_=a.useMemo(()=>{if(!e)return null;let a=v({library:o,inheritStyleKey:e,inheritStyleID:r,sceneGraph:s});if(a)return a;for(let r of Object.values(c))if(r?.status==="loaded"&&r.data.fileKey!==d){for(let a of(0,p.z5)(r,n))if(a.key===e)return a}return null},[r,e,c,o,d,s,n]);return(0,l.kc)().ds_zombie_styles_fixes?h:_}function I(e){return{dropdownShown:e.dropdownShown,openFile:e.openFile,library:e.library,modalShown:e.modalShown,pickerShown:e.pickerShown,sceneGraphSelection:e.sceneGraphSelection,stylePickerShown:e.stylePickerShown,hasMissingFont:e.hasMissingFont,hasMixedProperties:e.hasMixedProperties||!1,inheritStyleKey:e.inheritStyleKey,inheritStyleKeyField:e.inheritStyleKeyField,inheritStyleID:e.inheritStyleID,stylePickerListLayout:e.stylePickerListLayout,styleType:e.styleType,onToggleListLayout:e.onToggleListLayout,selectedStyleGuid:e.selectedStyleGuid,dispatch:e.dispatch}}},181410:(e,r,n)=>{n.d(r,{GC:()=>m,bf:()=>p,hg:()=>u});var a=n(411855),i=n(188507),o=n(511445),s=n(254760),l=n(639215),c=n(125682),d=n(180155);function u(e,r){let n=(0,i.wA)(),l=a.useMemo(()=>(0,o.s)(n,200),[n]);a.useEffect(()=>{r?.skip||l(s.GT({styleType:e}))})}function m(e){let r=(0,c.Um)();return a.useMemo(()=>r&&r.type===d.vG&&r.data.style.style_type===e?r:null,[r,e])}function p(e){let r=(0,i.d4)(e=>e.stylePreviewShown);return a.useMemo(()=>r.isShown&&!r.isCreating&&r.style.node_id===e.node_id&&(0,l.EF)(r.style,e),[r,e])}},172385:(e,r,n)=>{n.d(r,{Xs:()=>i}),n(411855),n(188507),n(805014),n(851169),n(777535),n(841962),n(666308),n(622667),n(581713),n(835918);var a=n(509343);function i(){let{smallNudgeAmount:e,bigNudgeAmount:r}=(0,a.sT)();return{smallNudgeAmount:e,bigNudgeAmount:r,wheelMultiplier:e,scrubMultiplier:e}}n(923219),n(648936),n(965636),n(797187),n(688656),n(193578)},241147:(e,r,n)=>{n.d(r,{AF:()=>h}),n(411855);var a=n(870520),i=n(581147),o=n(125264),s=n(176659);n(108982);var l=n(76265);n(366172),n(923219),n(756044);var c=n(691039),d=n(728314),u=n(229351),m=n(736002),p=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(p||{});function h(e){return e.rectangleCornerRadiiIndependent?{topLeft:e.rectangleTopLeftCornerRadius,topRight:e.rectangleTopRightCornerRadius,bottomRight:e.rectangleBottomRightCornerRadius,bottomLeft:e.rectangleBottomLeftCornerRadius}:{topLeft:e.cornerRadius??e.rectangleTopLeftCornerRadius,topRight:e.cornerRadius??e.rectangleTopRightCornerRadius,bottomRight:e.cornerRadius??e.rectangleBottomRightCornerRadius,bottomLeft:e.cornerRadius??e.rectangleBottomLeftCornerRadius}}u.A,a.a,m.A,i.$,c.A,o.w,d.A,s.t},967854:(e,r,n)=>{n.d(r,{DJ:()=>R,XL:()=>P});var a=n(411855),i=n(846288),o=n(845438),s=n(570446),l=n(774065),c=n(240069),d=n(77944),u=n(922399),m=n(131521),p=n(399875),h=n(983357),_=n(325129),g=n(532359),f=n(805014),E=n(777535),y=n(841962),b=n(563192),v=n(62791),T=n(76265),I=n(366172),S=n(923219),w=n(965636),A=n(797187),C=n(76237);n(546758);var N=n(224637),L=n(442133),O=n(64160);function R(e){let r=a.createElement(v.E,{name:"text_align_horizontal"},a.createElement(D,{recordingKey:b.Pt(e.recordingKey,"textAlignHorizontal")})),n=a.createElement(v.E,{name:"text_align_vertical"},a.createElement(k,{textAlignVertical:e.textAlignVertical||S.oV,recordingKey:b.Pt(e.recordingKey,"textAlignVertical")})),i=(0,N.vK)();if(e.isUI3){if(i){let i=a.createElement(v.E,{name:"text_path_start"},a.createElement(M,{textPathStartForward:e.textPathStartForward??S.oV,recordingKey:b.Pt(e.recordingKey,"textPathStartForward")}));return a.createElement(a.Fragment,null,a.createElement(L.DE,{ref:e.alignmentRowRef,label:(0,T.tx)("properties.label.alignment"),input:r,icon:null}),a.createElement(L.fn,{ref:e.alignmentRowRef,leftLabel:(0,T.tx)("properties.label.alignment"),rightLabel:(0,T.tx)("properties.label.text_path_orientation"),leftInput:n,rightInput:i,icon:e.iconButton}))}return a.createElement(L.fn,{ref:e.alignmentRowRef,leftLabel:(0,T.tx)("properties.label.alignment"),leftInput:r,rightLabel:null,rightInput:n,icon:e.iconButton})}return a.createElement(C.fI,{className:O.lY,ref:e.alignmentRowRef,"data-onboarding-key":"type-panel-alignment-row"},a.createElement("div",{className:O.Xh},r),a.createElement("div",{className:O.qf},n),e.iconButton)}var P=(e=>(e.LEFT="text-align-left",e.CENTER="text-align-center",e.RIGHT="text-align-right",e.JUSTIFIED="text-align-justified",e))(P||{});function D({recordingKey:e,loggingCallback:r}){let n=(0,w.kl)("textAlignHorizontal")||S.oV,u=(0,S._W)((0,w.kl)("missingFont"),!1),m=!((0|(0,A.J2)(f.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<f.mrc.TEXT_ALIGN_HORIZONTAL);return(0,i.KF)(!!(n||m),"TypePanel missing textAlignHorizontal"),a.createElement(o.bL,{legend:a.createElement(s.q,null,(0,T.t)("fullscreen.type_panel.align_horizontal")),value:n,onChange:e=>{r&&r(),I.Y5.updateSelectionProperties({textAlignHorizontal:e})},readonly:m||u,recordingKey:e},a.createElement(o.c$,{value:"LEFT","aria-label":(0,T.t)("fullscreen.type_panel.align_left"),icon:a.createElement(l.h,null)}),a.createElement(o.c$,{value:"CENTER","aria-label":(0,T.t)("fullscreen.type_panel.align_center"),icon:a.createElement(c.N,null)}),a.createElement(o.c$,{value:"RIGHT","aria-label":(0,T.t)("fullscreen.type_panel.align_right"),icon:a.createElement(d.K,null)}))}function k(e){let r=(0,S._W)((0,w.kl)("missingFont"),!1),n=!((0|(0,A.J2)(f.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<f.mrc.TEXT_ALIGN_VERTICAL),i=(0,w.kl)("numSelectedByType"),l=i&&(0,S.hS)(i)&&i.TEXT_PATH&&i.TEXT_PATH>0&&!i.TEXT;return a.createElement(o.bL,{value:e.textAlignVertical,onChange:e=>((0,y.kc)().ce_properties_panel_tracking&&(0,E.sx)("editor_type_panel_change",{key:"textAlignVertical",value:e}),I.Y5.updateSelectionProperties({textAlignVertical:e})),readonly:r||n,recordingKey:e.recordingKey,legend:a.createElement(s.q,null,(0,T.t)("fullscreen.type_panel.align_vertical"))},a.createElement(o.c$,{value:"TOP","aria-label":(0,T.t)("fullscreen.type_panel.align_top"),icon:l?a.createElement(u.j,null):a.createElement(m.b,null)}),a.createElement(o.c$,{value:"CENTER","aria-label":(0,T.t)("fullscreen.type_panel.align_middle"),icon:l?a.createElement(p.n,null):a.createElement(h.X,null)}),a.createElement(o.c$,{value:"BOTTOM","aria-label":(0,T.t)("fullscreen.type_panel.align_bottom"),icon:l?a.createElement(_.l,null):a.createElement(g.z,null)}))}function M(e){let r=(0,S._W)((0,w.kl)("missingFont"),!1);return a.createElement(o.bL,{value:`${+e.textPathStartForward}`,onChange:e=>{let r=!!parseInt(e);return(0,y.kc)().ce_properties_panel_tracking&&(0,E.sx)("editor_type_panel_change",{key:"textPathStart",value:r}),I.Y5.updateSelectionProperties({textPathStartForward:r})},readonly:r,recordingKey:e.recordingKey,legend:a.createElement(s.q,null,(0,T.t)("fullscreen.type_panel.align_vertical"))},a.createElement(o.c$,{value:"1","aria-label":(0,T.t)("fullscreen.type_panel.text_path_orientation_upright"),icon:a.createElement(u.j,null)}),a.createElement(o.c$,{value:"0","aria-label":(0,T.t)("fullscreen.type_panel.text_path_orientation_flipped"),icon:a.createElement(p.n,null)}))}},312565:(e,r,n)=>{n.d(r,{FX:()=>a}),n(411855),n(512729),n(841962),n(875877),n(76265),n(515967),n(780017),n(737686),n(135891),n(781976),n(891720),n(759240);let a="new_text_row_location_callout"},839439:(e,r,n)=>{n.d(r,{Cm:()=>u,Zo:()=>d,cS:()=>c,dx:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(164502);let l=(0,a.forwardRef)(function({left:e,right:r,appendedClassName:n},i){let l=o()(s.RF,n);return a.createElement("div",{className:l,ref:i},e?a.createElement("div",{className:s.kb},e):null,r?a.createElement("div",{className:s.pG},r):null)});(0,a.forwardRef)(function({children:e,appendedClassName:r},n){let i=o()(s.Pv,r);return a.createElement("div",{className:i,ref:n},e)});let c=(0,a.forwardRef)(function({label:e,input:r,appendedClassName:n},i){let l=o()(s.Od,n);return a.createElement("div",{className:l,ref:i},null!=e?a.createElement(m,null,e):null,a.createElement("div",{className:s.hF},r))}),d=(0,a.forwardRef)(function({label:e,input:r,appendedClassName:n},i){let l=o()(s.H5,n);return a.createElement("div",{className:l,ref:i},null!=e?a.createElement(m,null,e):null,a.createElement("div",{className:s.hF},r))}),u=(0,a.forwardRef)(function({label:e,leftInput:r,rightInput:n,appendedClassName:i},l){let c=o()(s.Y7,i);return a.createElement("div",{className:c,ref:l},a.createElement(m,null,e),a.createElement("div",{className:s.ig},r),a.createElement("div",{className:s.by},n))});function m(e){return a.createElement("span",{"aria-hidden":"true",className:s.Pf,"data-non-interactive":!0},e.children)}},742713:(e,r,n)=>{n.d(r,{r:()=>d});var a=n(411855),i=n(629019),o=n.n(i),s=n(596651),l=n(442133),c=n(835748);a.forwardRef(function({titleTx:e,faded:r,isEmpty:n,appendedClassName:i},s){return a.createElement(l.Ad,{ref:s,appendedClassName:o()(c.En,{[c.yf]:r,[c.ry]:n},i),input:a.createElement(l.Mw,null,e),label:null})});let d=a.forwardRef(function({titleTx:e,icon:r,faded:n,isEmpty:i,appendedClassName:s},d){return a.createElement(l.DE,{ref:d,appendedClassName:o()(c.En,c.VJ,{[c.yf]:n,[c.ry]:i},s),input:a.createElement(l.Mw,null,e),label:null,icon:r})});a.forwardRef(function({titleTx:e,input:r,faded:n,isEmpty:i,isPanelBodyCollapsedAtom:d,appendedClassName:u,dataTestId:m},p){let h=o()(c.e4,{[c.yf]:n,[c.ry]:i},u);return a.createElement("div",{className:h,ref:p,"data-testid":m,"data-non-interactive":!0},a.createElement("div",{className:c.Dn},a.createElement(s.r2,{isPanelBodyCollapsedAtom:d||null}),a.createElement(l.Mw,null,e)),a.createElement("div",{className:c.Ix,"data-non-interactive":!0},r))}),a.forwardRef(function({titleTx:e,faded:r,isEmpty:n,children:i},s){return a.createElement(l.oO,{ref:s,appendedClassName:o()(c.En,{[c.yf]:r,[c.ry]:n}),input:a.createElement(l.Mw,null,e)},i)}),a.forwardRef(function({titleTx:e,input:r},n){return a.createElement("div",{className:c.Ii,ref:n,"data-non-interactive":!0},a.createElement("div",{className:c.DD},a.createElement(l.Mw,null,e)),a.createElement("div",{className:c.hF,"data-non-interactive":!0},r))})},442133:(e,r,n)=>{n.d(r,{Ad:()=>f,DE:()=>g,Kg:()=>w,Mw:()=>T,Oe:()=>_,Y9:()=>S,fn:()=>h,my:()=>v,oO:()=>y,pG:()=>E,rH:()=>I,sY:()=>b,u9:()=>A});var a=n(411855),i=n(629019),o=n.n(i),s=n(137565),l=n(693565),c=n(137567),d=n(523857),u=n(927722),m=n(975080),p=n(323316);let h=(0,a.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:i,appendedClassName:s,icon:l,dataTestId:c},d){return a.createElement("div",{ref:d},a.createElement("fieldset",{className:o()(m.$f,s),"data-non-interactive":!0,"data-testid":c},null!=e?a.createElement(w,{useAsLegend:null!==e&&null==n},e):null,a.createElement("div",{className:m.Vp,"data-non-interactive":!0},r),null!=n?a.createElement(A,null,n):null,a.createElement("div",{className:m.ON,"data-non-interactive":!0},i),a.createElement(I,null,l)))});(0,a.forwardRef)(function({label:e,leftIcon:r,input:n,rightIcon:i},o){return a.createElement("div",{className:m.iv,ref:o,"data-non-interactive":!0},null!=e?a.createElement(w,null,e):null,a.createElement("div",{className:m.dk,"data-non-interactive":!0},r),a.createElement("div",{className:m.Wy,"data-non-interactive":!0},n),a.createElement("div",{className:m.pK,"data-non-interactive":!0},i))});let _=(0,a.forwardRef)(function({label:e,leftIcon:r,input:n,firstRightIcon:i,secondRightIcon:o,...s},l){return a.createElement("div",{className:m.o7,ref:l,...s,"data-non-interactive":!0},null!=e?a.createElement(w,null,e):null,a.createElement("div",{className:m.dk,"data-non-interactive":!0},r),a.createElement("div",{className:m.Wy,"data-non-interactive":!0},n),a.createElement("div",{className:m.pK,"data-non-interactive":!0},i),a.createElement("div",{className:m.wm,"data-non-interactive":!0},o))}),g=(0,a.forwardRef)(function({label:e,input:r,icon:n,appendedClassName:i,dataTestId:s,dataOnboardingKey:l},c){let d=o()(m.xx,i);return a.createElement("div",{className:d,ref:c,"data-testid":s,"data-onboarding-key":l},null!=e?a.createElement(w,null,e):null,a.createElement("div",{className:m.Vp,"data-non-interactive":!0},r),a.createElement(I,null,n))}),f=(0,a.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:i},s){return a.createElement("div",{className:o()(m.cN,n),ref:s},r?a.createElement(w,{alwaysShowLabel:i},r):null,a.createElement("div",{className:m.Vp,"data-non-interactive":!0},e))}),E=(0,a.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:i,dataTestId:s},l){let c=o()(m.jz,i);return a.createElement("div",{className:c,ref:l,"data-testid":s},a.createElement("div",{className:m.q1,"data-non-interactive":!0}," ",e," "),a.createElement("div",{className:m.eK,"data-non-interactive":!0}," ",r," "),a.createElement("div",{className:m.H_,"data-non-interactive":!0}," ",n," "))}),y=(0,a.forwardRef)(function({input:e,children:r,appendedClassName:n,dataOnboardingKey:i},s){let l=o()(m.qv,n);return a.createElement("div",{className:l,ref:s,"data-onboarding-key":i},a.createElement("div",{className:m.q1},e),a.createElement("div",{className:m.wH},r))}),b=(0,a.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:i,appendedClassName:s,topLeftInput:l,bottomLeftInput:c,topRightInput:d,bottomRightInput:u,leftInput:p,rightInput:h},_){let g=o()(m.d1,s),f=null!=p?a.createElement("div",{className:m.kW},p):l,E=null!=h?a.createElement("div",{className:m.kW},h):d,y=null!=p?null:a.createElement("div",null,c),b=null!=h?null:a.createElement("div",null,u);return a.createElement("div",{className:g,ref:_,"data-non-interactive":!0},a.createElement(w,null,e),a.createElement(A,null,r),a.createElement(v,null),f,E,a.createElement("div",null,n),y,b,a.createElement("div",null,i))});function v({}){return a.createElement("div",{"data-non-interactive":!0})}function T({children:e}){return a.createElement("span",{"aria-hidden":"true"},e)}function I({children:e}){return e?a.createElement("div",{className:m.to,"data-non-interactive":!0},e):null}let S=(0,a.forwardRef)(function({selected:e,grabberClassName:r,hideGrabber:n,singletonRow:i,dragging:c,children:d,selectedSecondary:h,containerClassName:_,isLastRow:g,...f},E){let y=!n&&(!i||c),b=e&&c?u.Aw:m.gB,v=h?m.kR:e&&g?m.OV:e?m.CZ:"";return a.createElement(s.D8,{...f,forwardedRef:E,className:o()(m.P6,v,_)},y&&a.createElement("div",{className:o()(r,{[m.tp]:c,[m.kI]:!c})},(!c||e)&&a.createElement(l.B,{className:b,svg:p.A})),d)});function w({children:e,alwaysShowLabel:r,useAsLegend:n}){return(0,d.V)()||r?a.createElement(c.e,{condition:!!n,wrapper:e=>a.createElement("legend",null,e)},a.createElement("span",{"aria-hidden":!n,className:m.Qb,"data-non-interactive":!0},e)):a.createElement(v,null)}function A({children:e}){return(0,d.V)()?a.createElement("span",{"aria-hidden":"true",className:m.iV,"data-non-interactive":!0},e):a.createElement(v,null)}},776297:(e,r,n)=>{n.d(r,{JJ:()=>d});var a=n(411855),i=n(629019),o=n.n(i),s=n(137565),l=n(442133),c=n(975080);(0,a.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:i,appendedClassName:d,icon:u,...m},p){return a.createElement(s.D8,{className:o()(c.$f,d),forwardedRef:p,...m,"data-non-interactive":!0},null!=e?a.createElement(l.Kg,null,e):null,a.createElement("div",{className:c.Vp,"data-non-interactive":!0},r),null!=n?a.createElement(l.u9,null,n):null,a.createElement("div",{className:c.ON,"data-non-interactive":!0},i),a.createElement(l.rH,null,u))}),(0,a.forwardRef)(function({input:e,children:r,appendedClassName:n,onMouseDown:i,onClick:l,dataOnboardingKey:d},u){let m=o()(c.qv,n);return a.createElement(s.D8,{onClick:l,dataOnboardingKey:d,className:m,forwardedRef:u,onMouseDown:i,"data-non-interactive":!0},a.createElement("div",{className:c.q1,"data-non-interactive":!0},e),a.createElement("div",{className:c.wH},r))});let d=(0,a.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:i,onFocus:l,onMouseDown:d,onMouseMove:u,onMouseUp:m,recordingKey:p},h){let _=o()(c.jz,i);return a.createElement(s.D8,{className:_,forwardedRef:h,onFocus:l,onMouseDown:d,onMouseMove:u,onMouseUp:m,recordingKey:p,"data-non-interactive":!0},a.createElement("div",{className:c.q1,"data-non-interactive":!0}," ",e," "),a.createElement("div",{className:c.eK,"data-non-interactive":!0}," ",r," "),a.createElement("div",{className:c.H_,"data-non-interactive":!0}," ",n," "))});(0,a.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:i,onFocus:d,onBlur:u},m){return a.createElement(s.D8,{className:o()(c.cN,n),forwardedRef:m,onFocus:d,onBlur:u,"data-non-interactive":!0},r?a.createElement(l.Kg,{alwaysShowLabel:i},r):null,a.createElement("div",{className:c.Vp,"data-non-interactive":!0},e))}),(0,a.forwardRef)(function({label:e,input:r,icon:n,dataTestId:i,recordingKey:d,onContextMenu:u,onClick:m,onMouseDown:p,appendedClassName:h},_){let g=o()(c.xx,h);return a.createElement(s.D8,{className:g,forwardedRef:_,onContextMenu:u,onClick:m,onMouseDown:p,recordingKey:d,"data-testid":i,"data-non-interactive":!0},null!=e?a.createElement(l.Kg,null,e):null,a.createElement("div",{className:c.Vp,"data-non-interactive":!0},r),a.createElement(l.rH,null,n))})},186190:(e,r,n)=>{n.d(r,{d:()=>d});var a=n(411855),i=n(629019),o=n.n(i),s=n(137565),l=n(442133),c=n(975080);let d=(0,a.forwardRef)(function({leftInput:e,rightInput:r,leftLabel:n,rightLabel:i,leftIcon:d,rightIcon:u,appendedClassName:m,...p},h){let _=o()(c.ZD,m);return a.createElement(s.D8,{className:_,forwardedRef:h,...p,"data-non-interactive":!0},null!=n?a.createElement(l.Kg,null,n):null,a.createElement("div",{className:c.Vp,"data-non-interactive":!0},e),null!=i?a.createElement(l.u9,null,i):null,a.createElement("div",{className:c.ON,"data-non-interactive":!0},r),a.createElement("div",{className:c.dk,"data-non-interactive":!0},d),a.createElement("div",{className:c.pK,"data-non-interactive":!0},u))});(0,a.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:i,appendedClassName:d,collapsedLeftInput:u,collapsedRightInput:m,expandedTopLeftInput:p,expandedTopRightInput:h,expandedBottomLeftInput:_,expandedBottomRightInput:g,singleInput:f,showAllPaddingControls:E,showSinglePaddingControl:y,...b},v){let T=o()(c.KP,d),I=a.createElement("div",{className:c.Xv},f),S=a.createElement(a.Fragment,null,a.createElement("div",{className:c.Vp},u),a.createElement("div",{className:c.H$},m)),w=a.createElement(a.Fragment,null,a.createElement("div",{className:c.Vp},p),a.createElement("div",{className:c.ON},_),a.createElement("div",{className:c.H$},h),a.createElement("div",{className:c.Os},g));return a.createElement(s.D8,{className:T,forwardedRef:v,...b,"data-non-interactive":!0},a.createElement(l.Kg,null,e),a.createElement(l.u9,null,r),a.createElement(l.my,null),y?I:E?w:S,a.createElement("div",{className:c.dk},n),E&&i&&a.createElement("div",{className:c.pK},i))})},456112:(e,r,n)=>{n.d(r,{EG:()=>o}),n(411855),n(76265);var a=n(375887),i=n(310020);function o(e){if(e.extensionSearchString)return e.extensionSearchString;let r=e.displayForQuickCommand?e.displayForQuickCommand:(0,a.Dz)(e);return(0,i.A)(r,e.args)}n(253244)},893382:(e,r,n)=>{n.d(r,{BB:()=>b,XG:()=>E,wI:()=>f}),n(411855);var a=n(217950),i=n(885123),o=n(875877),s=n(550479),l=n(889793),c=n(190500),d=n(706293),u=n(732767),m=n(175014),p=n(469175),h=n(938226),_=n(802425),g=n(446130);function f({searchQuery:e,extensionId:r,moduleFilters:n,searchPosition:a,numSearchResults:i}){y({action:r,searchQuery:e,numSearchResults:i,rankingAlgorithm:(0,h.eg)(_.Jc.EXTENSIONS),searchPosition:a,module:_.Jc.EXTENSIONS,qaVersion:m.$L,isAi:!1,isPlugin:!0,moduleFilters:n})}function E({action:e,numSearchResults:r,searchPosition:n,rankingAlgorithm:a,isSearchResult:i,moduleFilters:s}){y({action:e,searchQuery:o.atomStore.get(g.Q8),numSearchResults:r,rankingAlgorithm:a,searchPosition:n,qaVersion:m.$L,isAi:!0,isPlugin:!1,moduleFilters:s,isSearchResult:i,module:(0,p.x)()})}function y(e){let{quickActionsSessionId:r,quickActionsQueryId:n,currentSelection:l,fileKey:p,productType:_,source:f,role:E,hasAiFeatureAccess:y}=function(){let e=i.D.getState(),r=(0,d.l)(e),n=e.openFile?.key??"",l=(0,c.v5)(e.selectedView,null),p=o.atomStore.get(g.dd)??"";p||(0,s.$D)(a.e.EXTENSIBILITY,Error(`No quick actions session ID found when logging ${m.OW}`));let _=o.atomStore.get(g.Rt);return{currentSelection:r,fileKey:n,productType:l,source:o.atomStore.get(g.rE)?.source??"",quickActionsSessionId:p,quickActionsQueryId:_,role:(0,h.WZ)(),hasAiFeatureAccess:(0,u.W7)()}}(),b={...e,quickActionsSessionId:r,currentSelection:l,fileKey:p,productType:_,quickActionsQueryId:n,source:f,role:E,hasAiFeatureAccess:y};(0,h.mi)(b)}function b(e){return!!e.tags?.includes(l.$.AI)}n(456112)},582008:(e,r,n)=>{n.d(r,{X:()=>u});var a=n(777535),i=n(885123),o=n(841962),s=n(875877);n(728722),n(977235),n(183739),n(732767);var l=n(537633),c=n(253244);let d=(0,s.atom)(null);function u(e){let r=s.atomStore.get(d);if(!(0,o.kc)().qa_ai_metering||e===c.JT.ASSISTANT_CHAT||e===c.JT.FIND_INSPIRATION)return{withinMeter:!0};let n=s.atomStore.get(l.Ac),u=s.atomStore.get(l.ag),m=s.atomStore.get(l.u6),p=u||m;if("unchecked"===n||"null_grantlist"===n&&p){let r=i.D&&i.D.getState().selectedView,n=r?.view==="fullscreen"&&r.fileKey;a.az.trackDefinedEvent("search_experience.ai_eligibility.meter_checked",{newGrantlistPlanValue:null!==u?u.toString():"null",newGrantlistUserValue:null!==m?m.toString():"null",userId:o.Ay().user_data?.id,fileKey:n||"missing",action:e}),s.atomStore.set(l.Ac,p?"with_grantlist":"null_grantlist")}if(!r)return{withinMeter:!1};let h=r.find(r=>r.userActions.includes(e));if(!h)return{withinMeter:!1};let _=parseInt(h.remaining);return isNaN(_)?{withinMeter:!1}:{withinMeter:_>0,meterResetDate:h.resetsAt}}},732767:(e,r,n)=>{n.d(r,{Ci:()=>C,Ko:()=>A,LC:()=>L,Nv:()=>N,P5:()=>P,Q0:()=>I,W7:()=>S,aG:()=>O,eH:()=>R}),n(411855);var a=n(885123),i=n(841962),o=n(875877);n(728722),n(977235);var s=n(238311);n(399991);var l=n(138406);n(593587);var c=n(73041),d=n(260990);n(176160);var u=n(254903),m=n(314540);n(183739),n(313449),n(940795);var p=n(689102),h=n(914077),_=n(30057),g=n(24293),f=n(401562),E=n(537633);let y=(0,o.atom)(i.tl().editing_file?.can_use_jubilee??!1),b=(0,o.atom)(!1),v=(0,o.atom)(null),T=((0,f.n)(async()=>await (0,s.w0)("ai_org_use_llama")),(0,f.n)(()=>{let e=(0,l.q8)(),r=(0,o.useAtomValue)(y);return!!(0,E.$7)("useHasPermission")&&((0,i.kc)().qa_ai_metering?r:!e)})),I=(0,f.n)(()=>{let e=T();return((0,c.lg)()!==m._Y.SITES||!!(0,i.kc)().sts_ai_enabled)&&e});(0,f.n)(e=>{let r=T(),n=(0,c.lg)();return"code_chat"===e?r&&n===m._Y.SITES:(n!==m._Y.SITES||!!(0,i.kc)().sts_ai_enabled)&&r});let S=(0,f.n)(()=>{if(o.atomStore.get(c.u8)===h.nT.Sites&&!(0,i.kc)().sts_ai_enabled||!(0,E.$7)("getHasPermission"))return!1;let e=o.atomStore.get(y);if((0,i.kc)().qa_ai_metering)return e;let r=o.atomStore.get(d.Z),n=o.atomStore.get(p.Me),s=a.D.getState().openFile,u=!s||!s.canEdit;return!(0,l.lt)({currentOrg:r,currentTeam:n,isViewer:u})}),w=(0,f.n)(()=>!!(0,o.useAtomValue)(E.p9));function A(){if(!(0,E.$7)("getHasAssetVisualSearchPermission")||!(0,i.kc)().api_asset_search)return!1;let e=o.atomStore.get(b);if((0,i.kc)().qa_ai_metering)return e;let r=o.atomStore.get(d.Z),n=o.atomStore.get(p.Me),s=a.D.getState().openFile,c=!s||!s.canEdit;return!(0,l.lt)({currentOrg:r,currentTeam:n,isViewer:c})}function C(e){return(0,i.kc)().api_asset_search?(function(e){if(!e||!u.nt.ui3.getValue())return Promise.resolve(!1);let r=o.atomStore.get(v);return null!==r?Promise.resolve(r):(0,s.vs)("exp_search_ai_assets").then(e=>{let r=e.getValue("allow_ai_results",null);return null!==r&&o.atomStore.set(v,!!r),!!r})})(e).then(e=>{if(!e&&!(0,E.$7)("getHasAssetSearchPermission"))return!1;let r=o.atomStore.get(b);if((0,i.kc)().qa_ai_metering)return r;let n=o.atomStore.get(d.Z),s=o.atomStore.get(p.Me),c=a.D.getState().openFile,u=!c||!c.canEdit;return!(0,l.lt)({currentOrg:n,currentTeam:s,isViewer:u})}):Promise.resolve(!1)}let N=(0,f.n)(e=>{let r=(0,l.q8)(),n=(0,o.useAtomValue)(b);return!!((0,i.kc)().api_asset_search&&(function(e){let{getConfig:r}=(0,s.I7)("exp_search_ai_assets",void 0,!0);return!!r().getValue("allow_ai_results",!1)&&e&&u.nt.ui3.getValue()}(e)||(0,E.$7)("useHasAssetSearchPermission")))&&((0,i.kc)().qa_ai_metering?n:!r)}),L=(0,f.n)(()=>{let e=(0,l.q8)(),r=(0,o.useAtomValue)(b),n=w();return!!(0,E.$7)("useHasFragmentSearchPermission")&&(!(0,i.kc)().asset_suggestions_require_completed_backfill||!!n)&&((0,i.kc)().qa_ai_metering?r:!e)});function O(){let e=(0,c.my)()===h.nT.Design,r=(0,_.sO)();return e||r}function R(){let e=T();return O()&&!!(0,i.kc)().hub_file_fragments&&e}function P(){let e=a.D.getState().selectedView,r=(0,c.JV)(e)===h.nT.Design,n=(0,g.P)(e);return(!!r||!!n)&&!!(0,i.kc)().hub_file_fragments&&S()}var D=(e=>(e.PERSONAL_DRAFT="PERSONAL_DRAFT",e.TEAM_OR_ORG_DISABLED="TEAM_OR_ORG_DISABLED",e.ORG_GUEST="ORG_GUEST",e.NON_PAID_SEAT="NON_PAID_SEAT",e.NO_ORG_OR_TEAM_USER="NO_ORG_OR_TEAM_USER",e.ROLLING_OUT="ROLLING_OUT",e))(D||{})},824794:(e,r,n)=>{n.d(r,{C7:()=>s,Ll:()=>d,h8:()=>o,kK:()=>l,qF:()=>c});var a=n(841962),i=n(537633);function o(){return!!(0,a.kc)().qa_search_frecency}function s(){return!!(0,a.kc)().asset_suggestions&&(0,i.$7)("isFragmentSearchEnabled")}function l(){return!!(0,a.kc)().actions_hide_recents&&(0,i.$7)("shouldHideRecents")}function c(){return!!(0,a.kc)().eai_image_tools&&(0,i.$7)("isImageToolsEnabled")}function d(){return!!(0,a.kc)().prototype_ai_magic_link&&(0,i.$7)("isMagicLinkEnabled")}},253244:(e,r,n)=>{n.d(r,{GI:()=>g,HW:()=>i,IA:()=>f,JT:()=>o,KL:()=>p,LC:()=>l,TJ:()=>m,Xy:()=>_,d7:()=>s,gj:()=>u,pY:()=>c,rr:()=>d,wC:()=>a,zw:()=>h});let a=354,i=600;var o=(e=>(e.TRANSLATE_TEXT="translate-text",e.REWRITE_TEXT="rewrite-text",e.SHORTEN_TEXT="shorten-text",e.FIRST_DRAFT="first-draft",e.FIRST_DRAFT_MAKE_CHANGES="first-draft-make-changes",e.FIRST_DRAFT_MAKE_KIT="first-draft-make-kit",e.FIRST_DRAFT_COMPONENTIZE="first-draft-componentize",e.FIRST_DRAFT_SUGGEST_PROPS="first-draft-suggest-props",e.FIRST_DRAFT_LINTING="first-draft-linting",e.FIRST_DRAFT_DEBUG="first-draft-debug",e.FIND_INSPIRATION="find-inspiration",e.IMAGE_TO_DESIGN="image-to-design",e.IMAGE_TO_DESIGN_ORACLE="image-to-design-oracle",e.REMOVE_BACKGROUND="remove-background",e.AUTO_RENAME_LAYERS="auto-rename-layers",e.GENERATE_IMAGE="generate-image",e.MAGIC_LINK="magic-link",e.MAKE_EDITS="make-edits",e.FIRST_DRAFT_FINE_TUNE="first-draft-fine-tune",e.CONTENT_FILL="content-fill",e.SLIDES_GENERATE_SPEAKER_NOTES="slides-generate-speaker-notes",e.SLIDES_REWRITE_TEXT="slides-rewrite-text",e.ASSISTANT_CHAT="assistant-chat",e.BOARD_TO_DECK="board-to-deck",e.DETECT_VIOLATIONS="detect-violations",e.FIRST_DRAFT_MAKE_KIT_DEBUG="first-draft-make-kit-debug",e.UPSCALE_IMAGE="upscale-image",e.TEXT_SEARCH="text_search",e))(o||{});let s="https://help.figma.com/hc/en-us/articles/23870272542231",l="https://help.figma.com/hc/en-us/articles/24004542669463",c="https://help.figma.com/hc/en-us/articles/24004868368919",d="https://help.figma.com/hc/en-us/articles/24244814883735",u="https://help.figma.com/hc/en-us/articles/24004711129879",m="https://help.figma.com/hc/en-us/articles/25968453273495",p="https://help.figma.com/hc/en-us/articles/23796390206743",h="https://help.figma.com/hc/en-us/articles/23955143044247",_="https://help.figma.com/hc/en-us/articles/24004778051479",g="https://help.figma.com/hc/en-us/articles/24245848829847#h_01JBF670XY6WGXKE8F76112N9W",f="https://help.figma.com/hc/en-us/articles/24037716110615"},264494:(e,r,n)=>{n.d(r,{C:()=>s});var a=n(411855),i=n(512729);let o=(0,a.createContext)((0,a.createRef)());function s(e){let r=(0,a.useContext)(o);(0,i.h)(()=>{e.current&&""!==e.current.value&&!1===r.current&&e.current.select(),r.current=!0})}},692494:(e,r,n)=>{n.d(r,{N:()=>o});var a=n(875877),i=n(446130);function o(){let e=(0,a.useAtomValue)(i.fq);return e>0?e+8:0}},267432:(e,r,n)=>{n.d(r,{t:()=>i});var a=n(411855);function i(e,r){return(0,a.useCallback)(()=>!(e.manifest.parameters&&!1!==e.manifest.parameterOnly)&&!r,[e.manifest.parameters,e.manifest.parameterOnly,r])}},119925:(e,r,n)=>{n.d(r,{Ag:()=>T,B3:()=>I,RL:()=>C,cT:()=>A,pP:()=>S,qy:()=>g,wj:()=>w,z8:()=>f});var a=n(411855),i=n(217950),o=n(875877),s=n(550479),l=n(653798),c=n(586053),d=n(487205),u=n(253244),m=n(605375),p=n(200247),h=n(382960),_=n(742949),g=(e=>(e.INITIAL="initial",e.RUNNING="running",e.CANCELLED="cancelled",e.ERROR="error",e.DONE="done",e))(g||{}),f=(e=>(e.INCOMPLETE="incomplete",e.SUCCEEDED="succeeded",e.FAILED="failed",e))(f||{});let E={action:"invalid",source:"invalid",clientLifecycleId:"invalid",quick_actions_session_id:"invalid",file_key:"invalid",product_type:"invalid"},y=(0,o.atomFamily)(()=>(0,o.atom)({state:"initial",aiTrackingContext:E,tasks:[]})),b={[u.JT.FIRST_DRAFT_MAKE_CHANGES]:i.e.AI_GENERATION,[u.JT.FIRST_DRAFT_MAKE_KIT]:i.e.AI_GENERATION,[u.JT.FIRST_DRAFT_COMPONENTIZE]:i.e.AI_GENERATION,[u.JT.FIRST_DRAFT_SUGGEST_PROPS]:i.e.AI_GENERATION,[u.JT.MAKE_EDITS]:i.e.AI_GENERATION,[u.JT.FIRST_DRAFT]:i.e.AI_GENERATION,[u.JT.IMAGE_TO_DESIGN]:i.e.AI_GENERATION},v="__ABORTED__";async function T(e,r,n,a){let c=y(e),{state:u,aiTrackingContext:h}=o.atomStore.get(c);if("running"===u){(0,l.xi)("quick-actions","Can't start action while another invocation of the same action is running");return}let g=new AbortController;o.atomStore.set(c,{state:"running",abortController:g,aiTrackingContext:h,tasks:[]}),(0,m.Dl)({...h,...a});try{let e=new Promise(e=>{g.signal.addEventListener("abort",()=>{e(v)})}),i=r({params:n,abortController:g,onTasksUpdate:e=>{o.atomStore.set(c,r=>({...r,tasks:e}))},clientLifecycleId:h.clientLifecycleId}),s=await Promise.race([i,e]);if(s!==v)return o.atomStore.set(c,e=>({state:"done",result:s,aiTrackingContext:h,tasks:e.tasks})),(0,_.k)(),(0,m.as)({...h,...a,status:p.dM.COMPLETED,reason:p.F9.SUCCESS}),s;o.atomStore.set(c,e=>({state:"cancelled",aiTrackingContext:h,tasks:e.tasks})),(0,m.as)({...h,...a,status:p.dM.FAILED,reason:p.F9.STOPPED});return}catch(r){g.abort(),(0,l.x1)("quick-actions","Error encountered running action",{error:r}),r instanceof d.JB&&!1===r.reportToSentry||(0,s.$D)(b[e]??i.e.UNOWNED,r),o.atomStore.set(c,e=>({state:"error",error:r,originalParams:n,aiTrackingContext:h,tasks:e.tasks})),(0,m.as)({...h,...a,status:p.dM.FAILED,reason:p.F9.ERROR})}}function I(e){let r=y(e);if("running"===o.atomStore.get(r).state)return;let n=(0,m.Uu)(e);o.atomStore.set(r,{state:"initial",aiTrackingContext:n,tasks:[]})}function S(e){let r=y(e);return o.atomStore.get(r)}function w(e){let r=y(e),n=(0,o.useAtomValue)(r),{Sprig:i}=(0,c.A)();return(0,a.useEffect)(()=>{if(n){let{state:r,aiTrackingContext:a}=n,{ended:o,status:s,reason:l}=function(e){switch(e){case"cancelled":return{ended:!0,status:p.dM.FAILED,reason:p.F9.STOPPED};case"error":return{ended:!0,status:p.dM.FAILED,reason:p.F9.ERROR};case"done":return{ended:!0,status:p.dM.COMPLETED,reason:p.F9.SUCCESS};default:return{ended:!1,status:p.dM.FAILED,reason:p.F9.ERROR}}}(r);o&&(0,h.k)(i,e,a,s,l)}},[n,i,e]),n}function A(e){let r=y(e),n=o.atomStore.get(r);"running"===n.state&&n.abortController.abort()}function C(e,r,n){let a=w(e),i=async a=>await T(e,r,a,n);return{...a,start:i,stop:()=>{A(e)}}}},625341:(e,r,n)=>{n.d(r,{m:()=>N});var a=n(411855),i=n(188507),o=n(851169),s=n(76265),l=n(488130),c=n(419378),d=n(870355),u=n(736041),m=n(266911),p=n(227362),h=n(973393),_=n(375900),g=n(614400),f=n(176160),E=n(661137),y=n(15092),b=n(492366),v=n(914077),T=n(7395),I=n(314186),S=n(782556),w=n(175493),A=n(267432),C=n(908262);function N({augmentedExtension:e,submenuRef:r,displayAboveTarget:n}){let{extension:g,publishedExtension:N,canRun:O,canRequest:R}=e,P=(0,i.wA)(),{close:D}=(0,C.cq)(),k=h.EO(N),M=h.OY(N),F=M&&h.gn(N),x=(0,I.Kp)(e),U=function(e){let r=(0,y.TA)(),n=(0,i.d4)(e=>e.authedActiveCommunityProfile),o=h.ej(e);return a.useCallback(()=>{if(!e)return;let a=b.aL.QUICK_ACTIONS;(0,l.mG)(e,a,r,n?.id),o()},[e,r,n,o])}(N),B=a.useCallback(()=>{P(d.v({}))},[P]),V=(0,p.Gt)(g.plugin_id,"quick-actions"),G=(0,S.q8)(g),H=(0,S.U4)(g),W=(0,S.S3)({submenuIsShown:H,extension:g,displayAboveTarget:n}),K=(0,A.t)(g,G),Y=a.useCallback(()=>{(0,T.k0)(g)?o.l7.user("insert-widget",()=>L(g)):G&&r?W(r.current):V(),G||x(),K()&&D()},[g,G,r,x,K,W,V,D]),$=(0,f.q5)(),j=(0,_.RW)(),z=a.useCallback(()=>{if(!$||!$.parentOrgId)return;let e={extension:{pluginId:g.plugin_id,iconUrl:g.redirect_icon_url,name:g.name},isWidget:(0,T.k0)(g),orgId:$.parentOrgId,workspaceDetails:j.loaded?j.data:void 0,openedFrom:"editor",fullscreenEditorType:(0,v.wN)($.editorType)};P((0,u.to)({type:w.S,data:e}))},[P,g,$,j]),q=(0,E.sZ)(),Z=(0,m.a)(q?.id,g.plugin_id,j.loaded?j.data?.workspaceId:void 0);return a.useMemo(()=>{let e=N?.monetized_resource_metadata;return k&&!M&&e?{onAction:U,actionText:(0,c.XR)(e)}:k&&F?{onAction:B,actionText:(0,s.t)("qa.extensions.update_payment")}:O?{onAction:Y,actionText:(0,s.t)("qa.extensions.run")}:Z?{onAction:()=>{},actionText:(0,s.t)("qa.extensions.approval_pending")}:R?{onAction:z,actionText:(0,s.t)("qa.extensions.request_approval")}:{onAction:()=>{},actionText:""}},[k,M,N,U,F,B,O,R,Z,z,Y])}let L=e=>{(0,g.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:e.id,triggeredFrom:"quick-actions"})}},175014:(e,r,n)=>{n.d(r,{$L:()=>p,Be:()=>u,NP:()=>_,Nv:()=>h,OW:()=>d,RA:()=>s,U3:()=>m,W3:()=>i,gc:()=>l,mP:()=>o,qE:()=>a,tq:()=>f,uP:()=>g});var a=(e=>(e.VIEWER="viewer",e.EDITOR="editor",e))(a||{});let i="Quick Actions Search",o="open-quick-actions",s="Quick Actions Search Query Result",l="search-quick-actions";var c=(e=>(e.EXTENSION="extension",e.ACTION="action",e))(c||{});let d="Quick Actions Action",u="Quick Actions Panel Button",m="quick_actions_v1",p="quick_actions_v2",h="frecency",_="string-match",g="extensions",f="assets"},938226:(e,r,n)=>{n.d(r,{Ev:()=>b,Fi:()=>I,M$:()=>A,Mq:()=>S,WZ:()=>N,eg:()=>v,mi:()=>w,qM:()=>C,qz:()=>O,zF:()=>L});var a=n(411855),i=n(188507),o=n(846288),s=n(777535),l=n(789022),c=n(875877),d=n(338584),u=n(190500),m=n(253544),p=n(176160),h=n(732767),_=n(824794),g=n(802425),f=n(446130),E=n(682559),y=n(175014);function b(){let e=(0,c.useAtomValue)(p.ze)||"",r=(0,i.d4)(e=>e.selectedView),n=(0,c.useAtomValue)(f.rE),o=n?.source||"",d=(0,c.useAtomValue)(m.wg)?y.qE.EDITOR:y.qE.VIEWER,_=(0,h.Q0)();return(0,a.useCallback)(({quickActionsSessionId:n,quickActionsQueryId:a,searchQuery:i,numSearchResults:c,currentSelection:m,module:p,moduleFilters:h,qaVersion:g,searchQueryResults:f})=>{var E;E={quickActionsSessionId:n,quickActionsQueryId:a,searchQuery:i,numSearchResults:c,currentSelection:m,module:p,moduleFilters:h,qaVersion:g,fileKey:e,searchLatencyMs:l.sn.tryStop(y.gc),searchQueryResults:f,source:o,rankingAlgorithm:v(p),productType:(0,u.v5)(r,null),role:d,hasAiFeatureAccess:_},(0,s.sx)(y.RA,E,{forwardToDatadog:!0})},[e,_,d,r,o])}function v(e){switch(e){case g.Jc.ALL:return(0,_.h8)()?y.Nv:y.NP;case g.Jc.EXTENSIONS:return y.uP;case g.Jc.ASSETS:case g.Sn.ASSETS_TAB_DETAIL_VIEW:return y.tq;default:(0,o.xb)(e)}}function T(e){if(!e)return!1;if(e===g.Jc.ALL||e===g.Jc.ASSETS||e===g.Jc.EXTENSIONS)return!0;switch(e){case g.Sn.ASSETS_TAB_DETAIL_VIEW:case g.Sn.VISUAL_SEARCH:return!0;case g.Sn.EXTENSION_DETAILS:case g.Sn.REGENERATE_TEXT_TOAST:case g.Sn.MAGIC_LINK_DONE_TOAST:case g.Sn.BACKGROUND_REMOVE_TOAST:case g.Sn.UPSCALE_IMAGE_TOAST:case g.Sn.RENAME_LAYERS_TOAST:case g.Sn.GENERATE_IMAGE:case g.Sn.IMAGE_TO_DESIGN:case g.Sn.IMAGE_TO_DESIGN_ORACLE:case g.Sn.MAGIC_LINK:case g.Sn.PLUGIN_PARAMETER_ENTRY:case g.Sn.PLUGIN_SUBMENU_ENTRY:case g.Sn.TRANSLATE:case g.Sn.REWRITE:case g.Sn.SHORTEN:case g.Sn.FIRST_DRAFT:case g.Sn.FIRST_DRAFT_KIT_PICKER:case g.Sn.FIRST_DRAFT_MAKE_CHANGES:case g.Sn.FIRST_DRAFT_LINT:case g.Sn.FIRST_DRAFT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT:case g.Sn.MAKE_EDITS:case g.Sn.FIRST_DRAFT_FINE_TUNE:case g.Sn.ASSISTANT_CHAT:case g.Sn.LINK_TO_COMPONENT:case g.Sn.DETECT_VIOLATIONS:case g.Sn.FOR_TESTING:return!1;default:(0,o.xb)(e)}}function I({isQAV2:e,moduleToOpen:r}){return!e||!r||("tab"===r.type?T(r.module):"custom"===r.type?T(r.name):void(0,o.xb)(r))}function S(e){(0,s.sx)(y.W3,e,{forwardToDatadog:!0})}function w(e){(0,s.sx)(y.OW,e,{forwardToDatadog:!0})}function A(e,r){return{...e,onAction:n=>{var a;let i=n.shortcut;a={source:r,shortcutText:i?(0,E.OZ)(i):"",actionText:e.text||""},(0,s.sx)(y.Be,a),e.onAction&&e.onAction(n)}}}function C(e){let r=c.atomStore.get(O);return!r.has(e)&&(r.add(e),c.atomStore.set(O,r),!0)}function N(){return c.atomStore.get(m.wg)?y.qE.EDITOR:y.qE.VIEWER}let L=(0,c.atom)(null),O=(0,c.atomWithLocalStorageAndValidation)("ai_actions_used",new Set,d.set(d.string()))},276769:(e,r,n)=>{n.d(r,{$I:()=>D,Jf:()=>M,KY:()=>U,RM:()=>V,gn:()=>B,h$:()=>H,iP:()=>x,jD:()=>k});var a=n(805014),i=n(245954),o=n(777535),s=n(789022),l=n(885123),c=n(875877),d=n(771952),u=n(553362),m=n(231705),p=n(47795),h=n(73041),_=n(190500),g=n(570423),f=n(706293),E=n(914077),y=n(779099);n(891720);var b=n(582008),v=n(732767),T=n(401562),I=n(253244),S=n(175014),w=n(938226),A=n(802425),C=n(446130),N=n(864876),L=n(916068),O=n(535570);let R=(0,c.atom)(null),P=(0,c.atom)(new Set);function D({trackingData:e,moduleToOpen:r}){let n=l.D.dispatch;if((0,g.T)(l.D.getState().progressBarState.mode)||"fullscreen"!==l.D.getState().selectedView.view)return;let o=B(r);(0,w.Fi)({isQAV2:o,moduleToOpen:r})&&s.sn.start(S.mP);let h=l.D.getState(),E={keyboardShortcut:"",currentSelection:(0,f.l)(h),fileKey:h.openFile?.key??"",productType:(0,_.v5)(h.selectedView,null),role:(0,w.WZ)(),hasAiFeatureAccess:(0,v.W7)(),...e};if(c.atomStore.set(w.zF,e.source),c.atomStore.set(C.rE,E),o){if(c.atomStore.set(C.Bu,!0),c.atomStore.get(C.dd)||(c.atomStore.set(C.dd,(0,d.g)()),c.atomStore.set(m.q4)),c.atomStore.set(R,null),r){if(r.beforeModuleOpen){let e=function(){let e=c.atomStore.get(C.dd);if(!e)throw Error("Session ID is missing when opening a module in Quick Actions V2.");return{sessionId:e,canvasSelection:i.UN().getCurrentPage()?.directlySelectedNodes,searchQuery:c.atomStore.get(C.Q8)}}();r.beforeModuleOpen(e)}"tab"===r.type?(c.atomStore.set(C.Lk,r.module),r.filter&&c.atomStore.set(L.t,r.filter)):c.atomStore.set(C.YH,e=>[{module:r.module,name:r.name},...e])}a.qmM.setDefaultTool(),n(u.F.dequeue({matchTimeout:"ephemeral"}))}else n(p.j7({type:y.jv,hasOwnEscKeyHandler:!0,data:{fireQuickActionsTrackingEvent:e=>{(0,w.Mq)({...E,qaVersion:S.U3,quickActionsSessionId:e,timeToShowModal:s.sn.tryStop(S.mP)||0,module:A.Jc.ALL})}}}))}function k(e,r,n){if(c.atomStore.get(C.Bu)){if(!n.forceClose&&c.atomStore.get(C.ZG))return!1;c.atomStore.set(C.Bu,!1),c.atomStore.set(C.dd,null),(0,O.R)(),(0,N.b)()}else r?.type===y.jv&&e(p.oB());return!0}function M(e){return c.atomStore.get(C.Bu)||e?.type===y.jv}function F(e){for(let r of Object.values(I.JT))if(e===r)return r;return null}function x(e,r={},n){!c.atomStore.get(C.Bu)&&(!(!F(e)||(0,v.W7)())||!function(e){let r=F(e);if(!r)return!0;let{withinMeter:n}=(0,b.X)(r);return n}(e)||c.atomStore.get(P).has(e)||(c.atomStore.get(C.dd)||c.atomStore.set(C.dd,(0,d.g)()),c.atomStore.set(R,{action:e,payload:r,guid:n})))}function U(e={}){let{dismissedAction:r,actionToClear:n}=e;if(c.atomStore.get(R)){if(n&&n!==c.atomStore.get(R)?.action)return;if(c.atomStore.set(R,null),r){let e=c.atomStore.get(P);c.atomStore.get(P).has(r)||c.atomStore.set(P,new Set([...e,r])),o.az.trackDefinedEvent("ai_productivity.actions_suggestion_dismissed",{action:r})}}}function B(e){let r=a.Ez5.uiState().isUI3.getCopy(),n=l.D.getState().selectedView,i=(0,h.JV)(n);return!!(i&&i!==E.nT.Whiteboard&&(r||e))}let V=(0,T.n)((e,r)=>{let n=r?.isUI3??a.Ez5.uiState().isUI3.getCopy(),i=l.D.getState().selectedView,o=r?.editorType??(0,h.JV)(i);return!!(o&&(o===E.nT.Design||o===E.nT.Slides)&&(n||e))});class G{isQuickActionsShown(){return M(l.D.getState().dropdownShown)}}function H(){new G}},446130:(e,r,n)=>{n.d(r,{Bu:()=>g,Bw:()=>l,JB:()=>b,Lk:()=>m,Q8:()=>d,Rt:()=>u,Sf:()=>h,TT:()=>c,YH:()=>_,ZG:()=>y,dd:()=>p,fq:()=>E,hw:()=>T,jh:()=>v,rE:()=>f});var a=n(411855),i=n(875877),o=n(771952),s=n(802425);let l=(0,i.atomWithReset)({}),c=(0,i.atomWithReset)(null),d=(0,i.atomWithReset)(""),u=(0,i.atom)((0,o.g)());(0,i.atom)({loaded:!1,extensions:[]});let m=(0,i.atomWithReset)(s.Jc.ALL),p=(0,i.atomWithReset)(null),h=(0,i.atom)(null);(0,i.atom)(null);let _=(0,i.atomWithReset)([]);(0,i.atomFamily)(e=>(0,i.atom)(r=>{let[n]=r(_);return n?.name===e}));let g=(0,i.atom)(!1),f=(0,i.atom)(null),E=(0,i.atom)(0),y=(0,i.atom)(!1);function b(){let e=(0,i.useResetAtom)(c);return(0,a.useCallback)(()=>{e()},[e])}function v(){let e=(0,i.useResetAtom)(c),r=(0,i.useResetAtom)(d),n=(0,i.useResetAtom)(_),o=(0,i.useResetAtom)(m);return(0,a.useCallback)(()=>{e(),r(),n(),o()},[n,r,e,o])}function T(){let e=(0,i.useResetAtom)(d);return(0,a.useCallback)(()=>{e()},[e])}(0,i.atom)(null),(0,i.atom)(null)},57189:(e,r,n)=>{n.d(r,{P:()=>l});var a=n(411855),i=n(499325),o=n(462575);n(693565);var s=n(25600);function l(e){let r=a.createElement(i.h,null,e.label);return a.createElement("div",{className:s.kv},a.createElement(o.S,{checked:e.checked,disabled:e.disabled,label:r}))}},900862:(e,r,n)=>{n.d(r,{y:()=>u});var a=n(411855),i=n(621847),o=n(265851),s=n(76265),l=n(688656),c=n(253244),d=n(647841);function u({variant:e,helpUrlVariant:r}){let[n,u]=a.useState(!1);return a.createElement(i.N_,{className:o.s.hAuto.$,trusted:!0,href:function(e){switch(e){case c.JT.TRANSLATE_TEXT:case c.JT.REWRITE_TEXT:case c.JT.SHORTEN_TEXT:return c.pY;case c.JT.SLIDES_REWRITE_TEXT:return c.rr;case c.JT.FIRST_DRAFT:case c.JT.FIRST_DRAFT_MAKE_CHANGES:case c.JT.FIRST_DRAFT_MAKE_KIT:case c.JT.FIRST_DRAFT_MAKE_KIT_DEBUG:case c.JT.FIRST_DRAFT_COMPONENTIZE:case c.JT.FIRST_DRAFT_SUGGEST_PROPS:case c.JT.FIRST_DRAFT_LINTING:case c.JT.FIRST_DRAFT_DEBUG:case c.JT.FIRST_DRAFT_FINE_TUNE:return c.zw;case c.JT.GENERATE_IMAGE:case c.JT.REMOVE_BACKGROUND:case c.JT.UPSCALE_IMAGE:return c.LC;case c.JT.AUTO_RENAME_LAYERS:return c.gj;case c.JT.MAGIC_LINK:return c.Xy;case c.JT.CONTENT_FILL:return c.KL;case c.JT.BOARD_TO_DECK:return c.TJ;case c.JT.SLIDES_GENERATE_SPEAKER_NOTES:return c.GI;case c.JT.FIND_INSPIRATION:case c.JT.TEXT_SEARCH:return c.IA;case c.JT.IMAGE_TO_DESIGN:case c.JT.IMAGE_TO_DESIGN_ORACLE:case c.JT.MAKE_EDITS:case c.JT.ASSISTANT_CHAT:case c.JT.DETECT_VIOLATIONS:case"default":return c.d7}}(r),target:"_blank",onClick:e=>e.stopPropagation(),"data-tooltip":(0,s.t)("qa.learn_more"),"data-tooltip-type":l.Ib.TEXT,"data-tooltip-show-above":!0,onFocus:()=>{u(!0)},onBlur:()=>{u(!1)}},a.createElement(d.E,{variant:e,focused:n},(0,s.tx)("qa.ai_beta")))}},3541:(e,r,n)=>{n.d(r,{F1:()=>w,TH:()=>T,kz:()=>v,qI:()=>h,s3:()=>f});var a=n(411855),i=n(846288),o=n(841962),s=n(666308),l=n(747484),c=n(563192),d=n(19776),u=n(141604),m=n(469175),p=n(802425);function h(){let[e,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=e=>{"Tab"===e.key&&g((0,m.x)())&&r(document.activeElement!==document.body)},n=()=>{r(!1)};return document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",n,!0),()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",n,!0)}},[]),e}let _=a.createContext({registerKeyDownHandler:(e,r,n,a)=>{},removeKeyDownHandler:(e,r,n)=>{},setAllowDefaultTabOverride:e=>{}}),g=(e,r)=>{if(!(0,o.kc)().qa_allow_default_tab||!e)return!1;if(void 0!==r)return r;switch(e){case p.Jc.ALL:case p.Jc.EXTENSIONS:case p.Sn.PLUGIN_PARAMETER_ENTRY:case p.Sn.PLUGIN_SUBMENU_ENTRY:case p.Jc.ASSETS:case p.Sn.ASSETS_TAB_DETAIL_VIEW:case p.Sn.ASSISTANT_CHAT:case p.Sn.FIRST_DRAFT_MAKE_KIT:case p.Sn.FIRST_DRAFT_LINT:case p.Sn.FIRST_DRAFT_DEBUG:case p.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case p.Sn.LINK_TO_COMPONENT:case p.Sn.IMAGE_TO_DESIGN:case p.Sn.IMAGE_TO_DESIGN_ORACLE:case p.Sn.FIRST_DRAFT_KIT_PICKER:return!1;case p.Sn.BACKGROUND_REMOVE_TOAST:case p.Sn.UPSCALE_IMAGE_TOAST:case p.Sn.FIRST_DRAFT_MAKE_CHANGES:case p.Sn.MAKE_EDITS:case p.Sn.FIRST_DRAFT_FINE_TUNE:case p.Sn.MAGIC_LINK:case p.Sn.MAGIC_LINK_DONE_TOAST:case p.Sn.REGENERATE_TEXT_TOAST:case p.Sn.RENAME_LAYERS_TOAST:case p.Sn.SHORTEN:case p.Sn.EXTENSION_DETAILS:case p.Sn.TRANSLATE:case p.Sn.VISUAL_SEARCH:case p.Sn.DETECT_VIOLATIONS:case p.Sn.REWRITE:case p.Sn.FIRST_DRAFT:case p.Sn.GENERATE_IMAGE:case p.Sn.FOR_TESTING:return!0;default:(0,i.xb)(e)}};function f({name:e,recordingKey:r,children:n,forwardUnhandledEventsToFullscreen:i=!0}){let o=a.useRef(new Map),l=a.useRef(null),[p,h]=a.useState(void 0),f=(0,m.x)(),E=a.useCallback(e=>{"Tab"!==e.key||g(f,p)||e.preventDefault();let r=S({key:e.keyCode,modifier:[e.metaKey?s.xH.META:void 0,e.ctrlKey?s.xH.CONTROL:void 0,e.altKey?s.xH.ALT:void 0,e.shiftKey?s.xH.SHIFT:void 0].filter(e=>!!e)}),n=!1;for(let[a,i]of o.current)a.endsWith(r)&&(i(e),n=!0);return!n&&i&&(n=(0,d.jr)(e)),n},[f,p,i]),y=(0,c.v_)(r,"keydown",e=>{E(e)}),b=(0,c.fo)((0,c.Pt)(r,"fullscreen"),"keydown",e=>{E(e.event)&&e.accept()});return a.useEffect(()=>{let e=l.current;if(e)return e.addEventListener("keydown",y),()=>{e.removeEventListener("keydown",y)}},[y]),a.createElement(_.Provider,{value:{registerKeyDownHandler:(e,r,n,a)=>{let i=I({id:e,key:r,modifier:n});o.current.set(i,a)},removeKeyDownHandler:(e,r,n)=>{let a=I({id:e,key:r,modifier:n});o.current.delete(a)},setAllowDefaultTabOverride:h}},a.createElement(u.vL,{name:e,handleKeyDown:b,focusOnMount:!0},a.createElement("div",{ref:l},n)))}function E(e){return e!==s.xH.META||l.Ay.mac?e:s.xH.CONTROL}function y({key:e,modifier:r}){return r?{key:e,modifier:r.map(E)}:{key:e}}function b(e,r,n,o){let l=a.useMemo(()=>r.map(y),[r]),c=a.useId(),{registerKeyDownHandler:d,removeKeyDownHandler:u}=a.useContext(_),m=a.useCallback(e=>{for(let{key:r,modifier:a}of l)if(e.keyCode===r&&(!a||a.every(r=>(function(e,r){switch(e){case s.xH.META:return r.metaKey;case s.xH.CONTROL:return r.ctrlKey;case s.xH.ALT:return r.altKey;case s.xH.SHIFT:return r.shiftKey;default:(0,i.xb)(e)}})(r,e)))){n(e,{key:r,modifier:a});return}},[n,l]);a.useEffect(()=>(o?l.forEach(({key:e,modifier:r})=>{d(c,e,r??[],m)}):l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])}),()=>{l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])})}),[o,l,m,d,u,c])}function v(e,r,n=!0){b("keydown",[{key:e}],r,n)}function T(e,r,n=!0){b("keydown",e,r,n)}function I({id:e,key:r,modifier:n}){return`${e}-${S({key:r,modifier:n})}`}function S(e){return`${e.key}-${e.modifier?.join("-")??""}`}function w(e){return S(e)}},252628:(e,r,n)=>{n.d(r,{X:()=>D});var a=n(411855),i=n(188507),o=n(138225),s=n(520244),l=n(188220),c=n(809471),d=n(629019),u=n.n(d),m=n(512729),p=n(841962),h=n(666308),_=n(563192),g=n(663844),f=n(265851),E=n(76265),y=n(910164),b=n(535461),v=n(190500),T=n(264494),I=n(707240),S=n(166025),w=n(908262),A=n(340676),C=n(900862),N=n(3541),L=n(46295);function O(){return a.createElement("div",{className:f.s.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.$},(0,E.tx)("whiteboard.ai_modal.hint_tab"))}function R({promptHistory:e,onChange:r,textAreaRef:n}){let i=(0,a.useMemo)(()=>{let r=[];return e.length>0&&(r.push({type:"header",text:(0,E.t)("first_draft.prompt_history_header")}),r.push(...e.map(e=>({type:"option",value:e,text:e})))),r},[e]);return a.createElement(A.r,{iconSvg:a.createElement(l.A,{style:{marginLeft:-8,marginRight:-8}}),maxWidth:320,iconAriaLabel:(0,E.t)("first_draft.prompt_history_label"),onSelectedChange:e=>{r(e),n.current?.focus()},onVisibleChange:e=>{e||n.current?.focus()},selected:null,displayAboveTarget:!0,lean:"right",items:i,focusContainerOnMount:!0})}let P=(0,a.forwardRef)(({value:e,onChange:r,recordingKey:n,minLength:i,maxLength:o,verticalPromptLayout:s,height:l,maxHeight:c},d)=>{let u=(0,a.useRef)(null);(0,m.h)(()=>{let e=d?.current;e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length),e.addEventListener("keydown",e=>{e.keyCode===h.Uz.ENTER&&0===(0,h.sN)(e)&&e.stopPropagation()}));let r=u.current;r&&r.scrollToBottom()}),(0,T.C)(d);let p=_.AF(_.Pt(n,"textArea"),"change",e=>{r(e.currentTarget.value)}),E=k(s);return a.createElement(g.P,{height:l,maxHeight:c,ref:u},a.createElement("div",{className:f.s.grid.borderBox.overflowWrapAnywhere.$,style:E},a.createElement("textarea",{className:f.s.resizeNone.borderBox.bgTransparent.overflowHidden.zIndex1.$,style:{gridArea:"1 / 1 / 2 / 2"},rows:1,value:e,onChange:p,ref:d,"data-testid":"textArea",minLength:i,maxLength:o}),a.createElement("div",{className:f.s.preWrap.invisible.borderBox.$,style:{gridArea:"1 / 1 / 2 / 2"}},function(e){return e.endsWith("\n")?e+"\u200B":e}(e))))});function D({action:e,value:r,onChange:n,suggestion:l,suggestionPills:d=[],promptHistory:m=[],disableAutoComplete:g=!1,recordingKey:T,onBack:A,featureNameForInstrumentation:D,refocusToInput:M=!1,minLength:F,maxLength:x,topNavContent:U,bottomContent:B,growVertically:V,width:G,textAreaRef:H}){let W=(0,a.useRef)(null),K=H||W,Y=l&&r!==l&&l.startsWith(r),$=!g&&Y,j=l?.slice(r.length)||"",{isRoot:z,pop:q}=(0,w.cq)(),Z=!(r.length>0||B),X=Z&&d.length>0,J=(0,p.kc)().first_draft_prompt_history&&m.length>0&&Z,Q=(0,i.Pj)().getState(),ee=(0,N.qI)(),et=document.activeElement?.tagName==="TEXTAREA";(0,N.kz)(h.Uz.TAB,e=>{$&&(!ee||et)&&(e.preventDefault(),n(l),(0,v.ds)("actions_prompt_tab_completed",Q.openFile?.key,Q,{feature:D,suggestion:l}))}),(0,S.y)(r,K),(0,I.z)();let er=!!(A||!z),en=!U,ea=!en;M&&K.current?.focus();let ei=k(en);return a.createElement("div",{className:u()(f.s.borderBox.p4.mb8.colorBgSecondary.wFull.flex.flexColumn.bRadius5.relative.$),style:y.sx.if(ea,y.sx.add(y.sx.if(V,{minHeight:"128px"},{height:"128px"}))).add(y.sx.if(V,{width:`${G}px`})).$},a.createElement("div",{className:u()(f.s.flex.relative.overflowHidden.if(ea,f.s.flexColumn,f.s.gap8).$,b.Dm),style:ea&&!V?{height:128}:{}},(er||ea)&&a.createElement("div",{className:f.s.h24.flex.flexRow.relative.justifyBetween.$},a.createElement("div",{className:f.s.flex.flexRow.gap4.$},er&&a.createElement(o.K,{recordingKey:_.Pt(T,"backButton"),onClick:A||q,"aria-label":(0,E.t)("qa.go_back")},a.createElement(c.C,null))),ea&&a.createElement(a.Fragment,null,a.createElement("div",{className:f.s.flex.flexGrow1.$},U),a.createElement("div",{className:f.s.flex.pr4.$},a.createElement(C.y,{helpUrlVariant:e})))),a.createElement("div",{className:f.s.flex1.relative.font13.$,style:y.sx.add({lineHeight:"24px"}).if(!V,{height:"96px"}).$},a.createElement("div",{className:f.s.if(!V,f.s.absolute.top0.left0.right0).$},a.createElement(P,{value:r,onChange:n,recordingKey:T,ref:K,minLength:F,maxLength:x,verticalPromptLayout:en,height:V?void 0:128,maxHeight:128})),Y&&a.createElement("div",{className:u()(f.s.absolute.top0.wFull.selectNone.eventsNone.colorTextTertiary.overflowWrapAnywhere.$,$?L.m:""),style:ei},a.createElement("span",{className:f.s.invisible.$},r),a.createElement("span",{className:f.s.$},j),$&&a.createElement("span",{className:f.s.inlineFlex.itemsCenter.ml4.$},a.createElement(O,null))),en&&a.createElement("div",{className:f.s.absolute.$,style:{top:4,right:4}},a.createElement(C.y,{helpUrlVariant:e})))),(X||J)&&a.createElement("div",{className:u()(f.s.wFull.flex.flexWrap.pre.pr16.gap8.$,f.s.absolute.zIndex1.$,f.s.overflowHidden.$),style:{bottom:8,left:8,height:24}},J&&a.createElement(R,{promptHistory:m,onChange:n,textAreaRef:K}),X&&d.map((e,r)=>a.createElement(s.$n,{key:r,variant:"secondary",onClick:()=>{n(e.prompt),K.current?.focus(),D&&(0,v.ds)("actions_prompt_suggestion_clicked",Q.openFile?.key,Q,{feature:D,suggestion:e.prompt})}},e.label))),B&&a.createElement("div",{className:u()(f.s.wFull.$)},B))}function k(e){return e?{paddingRight:58}:{paddingLeft:8,paddingRight:8,paddingTop:4}}},563970:(e,r,n)=>{n.d(r,{v:()=>N});var a=n(411855),i=n(138225),o=n(503147),s=n(629019),l=n.n(s),c=n(563192),d=n(693565),u=n(265851),m=n(76265),p=n(535461),h=n(310020),_=n(688656),g=n(264494),f=n(707240),E=n(166025),y=n(908262),b=n(439581),v=n(471896),T=n(654644),I=n(57797),S=n(377849);let w="search";function A({onClear:e,focus:r}){return a.createElement(i.K,{"aria-label":(0,m.t)("search.search_bar.clear"),onClick:n=>{n.stopPropagation(),e(),r()},htmlAttributes:{"data-tooltip":(0,m.t)("search.search_bar.clear"),"data-tooltip-type":_.Ib.TEXT}},a.createElement(o.C,{style:{"--color-icon":"var(--color-icon-secondary)"}}))}let C=(0,a.forwardRef)(({searchQuery:e,onSearchChange:r,placeholder:n,onPaste:i},o)=>a.createElement("input",{type:"search",ref:o,className:l()(I.Rt,p.Dm),placeholder:n??(0,h.A)("quick-actions-with-wand-modal-placeholder"),onChange:r,onPaste:i,value:e,maxLength:150,spellCheck:!1,dir:"auto","aria-autocomplete":"list","data-component":"QuickActionsV2SearchInput"})),N=(0,a.forwardRef)(({searchQuery:e,onSearchChange:r,onClear:n,endEnhancer:i,placeholder:o,forceRoot:s,searchTag:m,onPaste:p},h)=>{let _=a.useRef(null),{isRoot:N}=(0,y.cq)(),{focus:L}=(0,b.Y)(_);(0,a.useImperativeHandle)(h,()=>({focus:L}),[L]),(0,g.C)(_);let O=c.AF(w,"change",e=>{r(e.currentTarget.value)});return(0,f.z)(s),(0,E.y)(e,_),a.createElement("div",{className:l()(I.$P)},N||s?a.createElement(d.B,{svg:S.A,className:I.qc}):a.createElement("div",{className:u.s.pl4.pr4.$},a.createElement(v.o,{recordingKey:(0,c.Pt)(w,"back-button")})),m,a.createElement(C,{onSearchChange:O,placeholder:o,searchQuery:e,onPaste:p,ref:_}),n&&e?a.createElement("div",{className:u.s.flex.mr6.$},a.createElement(A,{onClear:n,focus:L})):i?a.createElement("div",{className:u.s.mr6.$},a.createElement(T.b,null,i)):null)})},314186:(e,r,n)=>{n.d(r,{Kp:()=>p,w0:()=>h});var a=n(411855),i=n(188507),o=n(841962),s=n(225371),l=n(779297),c=n(696441),d=n(427494),u=n(456112),m=n(368975);function p(e){let r=h();return(0,a.useCallback)(()=>{r((0,l.NG)(e))},[r,e])}function h(){let e=function(){let e=(0,i.d4)(e=>e.recentlyUsedQuickCommands),r=(0,i.wA)();return(0,a.useCallback)(n=>{let a=(0,u.EG)(n),i=n.runPluginArgs,l=e.filter(e=>e.displayName!==a);l.unshift({displayName:a,runPluginArgs:i}),r(s.PQ(l)),(0,o.kc)().qa_frecency_recents_sync&&(0,m.s)({displayText:a,runPluginArgs:i,localFileIdOrPluginId:n.pluginLocalFileId??n.pluginId})},[r,e])}(),r=(0,c.c)(),n=(0,d.p8)("isReadOnly");return(0,a.useCallback)((a,i)=>{let o=(0,l.UK)({item:a,isReadOnly:n,extensionMenuProps:r,includeDisabled:!0,isSubmenuChild:i});o.length>1||e(o[0])},[e,r,n])}},735017:(e,r,n)=>{n.d(r,{JL:()=>o,Z9:()=>c,fX:()=>l}),n(411855);var a=n(245954),i=n(695024);let o="1.2",s={noPanningZoomingMs:300,screenAreaThresholdPercentage:.12,frameVisiblePercentage:.9,frameNotVisiblePercentage:.25,largestFrameWeight:.3,mostCentralFrameWeight:.7,maxDepth:6};function l(e,r){let n=(0,a.UN)().getCurrentPage();if(!n)return;let o=function(e,r,n){let a=function(e){let r=[];for(let n of e.childrenNodes)if("FRAME"===n.type||"SECTION"===n.type){if("SECTION"===n.type)for(let e of n.childrenNodes)"FRAME"===e.type&&r.push(e);else r.push(n)}return r}(e),i=[],o=[];for(let e of a){let a=d(e,r);a>=n.frameVisiblePercentage?i.push(e):a<n.frameNotVisiblePercentage&&o.push(e)}if(1===i.length&&o.length===a.length-1)return i[0]}(n,e,r);if(o)return o.guid;let s=function(e,r,n){let{width:a,height:o}=(0,i.qc)(r),s=a*o,l=[],c=[{node:e,depth:0}];for(;c.length;){let{node:e,depth:a}=c.pop();if(!(a>=n.maxDepth)&&e.visible&&!e.isInternalOnlyNode&&!(e.opacity<=0)&&("CANVAS"===e.type||"DOCUMENT"===e.type||("FRAME"===e.type||"GROUP"===e.type||"SECTION"===e.type||"SLIDE_GRID"===e.type||"SLIDE_ROW"===e.type||"RESPONSIVE_SET"===e.type||"SLIDE"===e.type||"SECTION_OVERLAY"===e.type)&&u(e,r)/s>=n.screenAreaThresholdPercentage))for(let r of("FRAME"===e.type&&l.push(e),e.childrenNodes))c.push({node:r,depth:a+1})}return l}(n,e,r);if(!s.length)return;let l=s.filter(n=>{var a;return a=r.frameVisiblePercentage,d(n,e)>=a});l.length||l.push(...s);let c=function(e,r,n){let a=e.map(e=>(function(e,r){let{x:n,y:a,width:o,height:s}=(0,i.qc)(r);return Math.sqrt(Math.pow(n+o/2-(e.absoluteBoundingBox.x+e.absoluteBoundingBox.w/2),2)+Math.pow(a+s/2-(e.absoluteBoundingBox.y+e.absoluteBoundingBox.h/2),2))})(e,r)),o=e.map(e=>u(e,r)),s=Math.max(...a),l=Math.max(...o),c=a.map(e=>e/s),d=o.map(e=>e/l),m=c.map((e,r)=>n.largestFrameWeight*d[r]-n.mostCentralFrameWeight*e);return e[m.indexOf(Math.max(...m))]}(l,e,r);if(c)return function(e,r,n){var a,i,o;let s=e;for(;s.parentNode&&"FRAME"===s.parentNode.type&&(a=s.parentNode,i=r,o=n.frameVisiblePercentage,d(a,i)>=o);)s=s.parentNode;return s}(c,e,r).guid}function c(e={}){return{...s,...e}}function d(e,r){return u(e,r)/(e.absoluteBoundingBox.w*e.absoluteBoundingBox.h)}function u(e,r){let{offsetX:n,offsetY:a,zoomScale:i,width:o,height:s}=r,l=Math.max(e.absoluteBoundingBox.x,n-o/2/i),c=Math.min(e.absoluteBoundingBox.x+e.absoluteBoundingBox.w,n+o/2/i),d=Math.max(e.absoluteBoundingBox.y,a-s/2/i);return Math.max(0,c-l)*Math.max(0,Math.min(e.absoluteBoundingBox.y+e.absoluteBoundingBox.h,a+s/2/i)-d)}},356013:(e,r,n)=>{n.d(r,{Km:()=>eR,hc:()=>eF,jk:()=>ex,mX:()=>ek,wU:()=>eP,z6:()=>eD});var a=n(411855),i=n(846288),o=n(888624),s=n(351966),l=n(675196),c=n(547006),d=n(316251),u=n(760391),m=n(775521),p=n(245954),h=n(629019),_=n.n(h),g=n(777535),f=n(991458),E=n(512729),y=n(841962),b=n(875877),v=n(746643),T=n(563192),I=n(972142),S=n(771952),w=n(265851),A=n(76265),C=n(910164),N=n(233950),L=n(231705),O=n(904703),R=n(788843),P=n(343373),D=n(69664),k=n(125682),M=n(568116),F=n(176160),x=n(354465),U=n(77383),B=n(201263),V=n(957020),G=n(567095),H=n(688656),W=n(27365),K=n(831231),Y=n(295221),$=n(900097),j=n(893382),z=n(732767),q=n(824794),Z=n(253244),X=n(122427),J=n(707240),Q=n(908262),ee=n(308569),et=n(605375),er=n(802425),en=n(276769),ea=n(446130),ei=n(471896),eo=n(883643),es=n(654644),el=n(691862),ec=n(707299),ed=n(563970),eu=n(901231),em=n(603304),ep=n(505473),eh=n(212628),e_=n(999038),eg=n(535570),ef=n(376532),eE=n(742949),ey=n(61109),eb=n(9489),ev=n(166322),eT=n(23172),eI=n(184312),eS=n(941811),ew=n(209362),eA=n(610352),eC=n(636654),eN=n(828662),eL=n(188561),eO=n(71903);let eR="actions-asset-tab-library-filter",eP=300;function eD({isVisualSearch:e=!1,initialTab:r=eb.Qx.PLAN_FILE_ASSETS,initialSearchTagType:n,closeOnEscape:u=!1}){let{currentSearch:m}=(0,b.useAtomValue)(X.WP),p=(0,b.useAtomValue)(O.hO.currentSearchAtom),h=(0,b.useAtomValue)(O.hO.currentCommunitySearchAtom),y=(0,e_.V)(),N=(0,z.Ko)(),[j,ee]=(0,b.useAtom)(ea.Q8),er=(0,b.useSetAtom)(ea.Rt),{recentFragments:en}=(0,O.cN)(!y),ei=(0,eI.U)(!0);(0,Y.b)();let em=a.useRef(null),ey=a.useRef(null),eO=a.useRef(null),eD=(0,ef.w5)(h),eU=(0,et._M)({action:e?Z.JT.FIND_INSPIRATION:Z.JT.TEXT_SEARCH,clientLifecycleId:void 0});(0,B.C)(),(0,J.z)(),a.useEffect(()=>{if(e)return()=>{(0,eg.R)(),b.atomStore.set(X.WP,{currentSearch:null})}},[e]);let eB=e?O.G4.ACTIONS_VISUAL_SEARCH_VIEW:O.G4.ACTIONS_ASSETS_TAB_DETAIL,{close:eV}=(0,Q.cq)(),{libraries:eG,presets:eH,librariesForConnectedProject:eW}=(0,$.g)(),eK=(0,b.useAtomValue)(U.Sh),eY=e?0===eG.length&&0===eW.length:!eK&&0===eG.length&&0===eH.length&&0===eW.length,e$=(0,P.GS)(),ej=a.useMemo(()=>(0,K.N2)(e$,!0),[e$]),{onToggleLibraryModal:ez}=(0,D.u)({entrypoint:ej,modalType:"editor",initialTab:V.Wv.TEAM_LIBRARIES}),eq=a.useCallback(()=>{eV(),ez()},[eV,ez]),eZ={title:(0,A.t)("assets_in_actions.browse_libraries_button"),onAction:()=>{eq()},recordingKey:"assetsTab.assetsBrowseLibraries"},eX=a.useCallback(()=>{(0,eE.k)()},[]),{debouncedAssetSearch:eJ,clearAssetSearchAndCancelDebounce:eQ,cancelDebouncedAssetSearch:e0,flushDebouncedAssetSearch:e1}=(0,X.TC)({debounceWait:eP,onSearchSuccess:eX}),{debouncedFragmentTextSearch:e2,clearFragmentSearchAndCancelDebounce:e5,cancelDebouncedFragmentTextSearch:e4,flushDebouncedFragmentTextSearch:e7}=(0,eh.S)({debounceWait:eP,entryPoint:eB,onSearchSuccess:eX}),{debouncedFragmentTextSearch:e8,cancelDebouncedFragmentTextSearch:e3,clearFragmentSearchAndCancelDebounce:e6,flushDebouncedFragmentTextSearch:e9}=(0,eh.S)({debounceWait:eP,entryPoint:eB,isCommunity:!0,onSearchSuccess:eX}),[te,tt]=(0,b.useAtom)(X.B1),tr=e?"actions-visual-search-library-filter":eR,tn=(0,k.Um)(),ta=!e||N,[ti,to,ts]=o.t.useTabs({[eb.Qx.PLAN_FILE_ASSETS]:ta,[eb.Qx.COMMUNITY]:!0},{defaultActive:r}),[tl,tc]=(0,b.useAtom)(O.hO.sortByAtom),td=(0,b.useAtomValue)(L.CZ),[tu,tm]=(0,a.useState)(n),tp=tu&&ts.activeTab===eb.Qx.PLAN_FILE_ASSETS;function th(r){let n,o,u;switch(r){case eb.qG.COMPONENTS:n=w.s.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgComponentTertiary.colorTextComponent.colorBorderComponent.$,o={"--color-icon":"var(--color-icon-component)"},u=a.createElement(l.k,{style:o});break;case eb.qG.DESIGNS:n=w.s.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgBrandTertiary.colorTextBrand.colorBorderBrand.$,o={"--color-icon":"var(--color-icon-brand)"},u=a.createElement(c.q,{style:o});break;default:(0,i.xb)(r)}return a.createElement("div",{className:n,style:C.sx.add({paddingTop:"3px",paddingBottom:"3px",marginRight:"8px"}).$},a.createElement("div",{className:w.s.flex.itemsCenter.justifyCenter.w16.h16.flexShrink0.$},u),a.createElement("span",{className:w.s.truncate.$},r),a.createElement(s.E,{recordingKey:(0,T.Pt)(tZ,"dismiss"),onClick:()=>{if(!e)switch(r){case eb.qG.COMPONENTS:(0,O.G1)(j)&&e2(j);break;case eb.qG.DESIGNS:(0,X.kN)(j)&&eJ(j,{type:W.I.ALL})}te.type!==W.I.ALL&&(tt({type:W.I.ALL}),m&&(0,X.ES)({...m.input,assetTypeOption:{type:W.I.ALL}})),"percent_match"!==tl&&tc("percent_match"),td&&(b.atomStore.set(L.q4),p&&(0,O.Hl)(p?.input,eB)),g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tf,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,void 0)}),tm(void 0)},className:w.s.bgTransparent.$},a.createElement(d.f,{style:o})))}let t_=b.atomStore.get(ea.dd),tg=a.useMemo(()=>(0,eC.D)(ts.activeTab,tu),[tu,ts.activeTab]),tf=a.useMemo(()=>{let e={entryPoint:eB,session_id:t_||"",assets_tab_type:tg};return ts.activeTab===eb.Qx.COMMUNITY?{search_id:h?.searchId||"",query_type:h?.input.type,query_text:h?.input.type==="input-text"?h?.input.value:void 0,query_node_id:h?.input.type==="input-selection"?h?.input.node.guid:void 0,...e}:tu===eb.qG.DESIGNS?{search_id:p?.searchId||"",query_type:p?.input.type,query_text:p?.input.type==="input-text"?p?.input.value:void 0,query_node_id:p?.input.type==="input-selection"?p?.input.node.guid:void 0,...e}:{search_id:m?.queryId||"",query_type:m?.input.type,query_text:m?.input.type==="input-text"?m.input.query:"",query_node_id:m?.input.type==="input-selection"?m.input.node.guid:"",...e}},[eB,t_,tg,ts.activeTab,tu,m,h,p]),tE=a.useCallback(e=>{let[r]=e;r.isIntersecting&&g.az.trackDefinedEvent("fragment_search.assets_details_panel_reached_bottom_of_scroll",{...tf,is_community_fragment_search:ts.activeTab===eb.Qx.COMMUNITY})},[tf,ts.activeTab]),ty=a.useCallback(e=>{let r=new IntersectionObserver(tE,{threshold:1});return e&&r.observe(e),()=>{r.disconnect()}},[tE]),tb=a.useCallback(r=>{if(!e)switch(r){case eb.Qx.PLAN_FILE_ASSETS:e3(),(0,X.kN)(j)&&(eJ(j,te),e1()),y&&(0,O.G1)(j)&&(e2(j),e7());break;case eb.Qx.COMMUNITY:y&&e4(),e0(),(0,O.G1)(j,!0)&&(e8(j),e9());break;default:(0,i.xb)(r)}ts.setActiveTab(ti[r].id),g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tf,assets_tab_type:(0,eC.D)(r,tu)}),ey.current?.focus(),(0,eE.k)()},[te,e,ts,ti,tf,tu,e3,j,y,eJ,e1,e2,e7,e4,e0,e8,e9]),tv=(0,eS.A)(),tT=(0,F.q5)(),tI=tv||tT?.name,tS=tI&&tI.length>20,tw=a.createElement(eu.fu,{value:ts.activeTab,onChange:v.lQ,numItems:ta?2:1},a.createElement(eu.oz,{tabId:eb.Qx.PLAN_FILE_ASSETS,onAction:()=>tb(eb.Qx.PLAN_FILE_ASSETS),htmlAttributes:tS?{"data-tooltip":tI,"data-tooltip-type":H.Ib.TEXT}:void 0},tI&&(0,I.EJ)(tI,20)),a.createElement(eu.oz,{tabId:eb.Qx.COMMUNITY,onAction:()=>tb(eb.Qx.COMMUNITY)},(0,A.tx)("assets_in_actions.detail_view.community_tab.title"))),tA=(0,x.oh)(R.fi),tC=(0,M.g5)(G.$A.Design).productComponents,tN=!m&&!tA&&(!tC.length||(0,q.kK)()),tL=!y||tN,tO=m?.result.status==="loading"||!m&&!e&&tA,tR=en?en.length:0,tP=!tu||tu===eb.qG.COMPONENTS,tD=!tu&&!tL&&(!!p||tR>0)||tu===eb.qG.DESIGNS,tk=y&&(!tu||tu===eb.qG.DESIGNS),tM=tL||!!tu,tF=ts.activeTab===eb.Qx.PLAN_FILE_ASSETS,tU=ts.activeTab===eb.Qx.COMMUNITY,tB=a.useCallback(e=>{ee(e),er((0,S.g)()),tP&&(tF||0===e.length)&&eJ(e,te),tk&&(tF||0===e.length)&&e2(e),(tU||0===e.length)&&e8(e)},[te,ee,er,tF,tU,eJ,e2,e8,tP,tk]),tV=m?.queryId,tG=p?.searchId,tH=h?.searchId,tW=a.useCallback(()=>tF&&tk?tG:tU?tH:void 0,[tG,tH,tk,tF,tU]),tK=a.useCallback(()=>{if(tF&&tP)return tV},[tV,tF,tP]),tY=a.useCallback((e,r,n,a,i,o)=>{let s;let l=tU?h:tP?m:p;tU&&h?.input.type==="input-text"?s=h?.input.value:tP&&m?.input.type==="input-text"?s=m?.input.query:p?.input.type==="input-text"&&(s=p?.input.value),(0,g.sx)("Search Feedback",{feedbackType:e,feedback:r,activeTab:tg,clientLifecycleId:n,entryPoint:a,fileKey:i,inputText:s,inputType:l?.input.type,queryId:tK(),searchId:tW(),sessionId:o})},[p,m,h,tK,tW,tU,tP,tg]),t$=a.useCallback((e,r)=>{tY(e.toString(),r,eU.clientLifecycleId,eB,eU.file_key,eU.quick_actions_session_id)},[tY,eU,eB]),tj=a.useCallback((e,r)=>{tY(e.toString(),r,eU.clientLifecycleId,eB,eU.file_key,eU.quick_actions_session_id)},[tY,eU,eB]),tz=(0,eN.s)();(0,E.h)(()=>(g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tf}),()=>{ek(b.atomStore.get(ea.Q8),v.lQ,y,!0,tz,O.G4.ACTIONS_ASSETS_TAB_DETAIL),b.atomStore.set(L.q4),tt({type:W.I.ALL})}));let tq=(()=>{switch(ts.activeTab){case eb.Qx.PLAN_FILE_ASSETS:return tV;case eb.Qx.COMMUNITY:return tH;default:(0,i.xb)(ts.activeTab)}})(),tZ=e?"visualSearchView":"assetsDetailView",tX=!h||"disabled"===h.result.status;if(e&&tX)return a.createElement(ef.o1,{aiTrackingContext:eU});let tJ=eY&&(j.length>0||e),tQ=!tJ&&(tu===eb.qG.COMPONENTS||!y),t0=tu===eb.qG.DESIGNS&&!!p;return a.createElement(el.n,{width:(0,f.jz)(eL.X),height:480,bodyFontMedium:!0,dataTestId:tZ,recordingKey:tZ,gatherFeedback:!0,aiTrackingContext:eU,rateOutputStrOverride:(0,A.t)("qa.rate_output_helpful"),sentimentFeedbackCallback:t$,additionalFeedbackCallback:tj},e&&a.createElement(eo.t,{ref:em,key:tq}),a.createElement(el.n.Header,null,a.createElement("div",{className:w.s.flex.flexColumn.$,ref:eO},e?a.createElement(eM,{searchTag:tp?th(tu):void 0}):a.createElement(ed.v,{ref:ey,searchQuery:j,onSearchChange:tB,forceRoot:u,onClear:()=>{tm(void 0),ee(""),eQ(),y&&e5(),e6()},onPaste:e=>ex(e),endEnhancer:a.createElement(eF,{activeTab:ts.activeTab===eb.Qx.PLAN_FILE_ASSETS&&N?eb.xA.COMPONENTS:eb.xA.COMMUNITY}),placeholder:ei,searchTag:tp?th(tu):void 0}),ta&&a.createElement("div",{className:w.s.if(e,w.s.py4).px8.if(!e,w.s.pb8).$},a.createElement(es.b,{primary:!1,gap:8,align:"center",justify:"space-between"},tw,a.createElement(o.t.TabPanel,{...to[eb.Qx.PLAN_FILE_ASSETS]},a.createElement("div",{className:w.s.if(!e,w.s.h24).if(e,w.s.h32).flex.itemsCenter.$},tQ&&a.createElement(ew.i,{onSetAssetType:r=>{if(m)switch(m.input.type){case"input-image":case"input-selection":if(!e)throw Error("Cannot run text search on visual input");tt(r),(0,X.ES)({...m.input,assetTypeOption:r});return;case"input-text":if(e)throw Error("Cannot run visual search on text input");tt(r),eJ(j,r),e1();return;default:(0,i.xb)(m.input)}},value:te,id:tr,dataTestId:tr,recordingKey:tr,role:"button",showTooltipOnEllipsis:!0,dropdownShown:tn}),t0&&a.createElement(ep.s,{containerRef:eO,entryPoint:eB}))),a.createElement(o.t.TabPanel,{...to[eb.Qx.COMMUNITY]},a.createElement("div",{className:w.s.if(!e,w.s.h24).if(e,w.s.h32).flex.itemsCenter.$})))))),a.createElement(el.n.Body,{key:eD},a.createElement(eb.wg.Provider,{value:{activeTabId:ts.activeTab}},ta&&a.createElement(o.t.TabPanel,{...to[eb.Qx.PLAN_FILE_ASSETS]},a.createElement(eb.ZD.Provider,{value:{activeSearchTag:tu}},a.createElement(ec.q,{key:tV},eY&&!y?a.createElement(eA.S,{fillHeight:!0},a.createElement(K.Ee,{onClickExplore:eV,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):a.createElement("div",{className:_()(w.s.gap6.if(tM,w.s.hFull).$)},tP&&a.createElement(ev.O,{header:!tu&&y?{title:(0,A.t)("assets_in_actions.assets_section.title"),icon:a.createElement(l.k,null),seeMore:tJ?eZ:{title:(0,A.t)("assets_in_actions.see_more_button"),onAction:()=>{g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tf,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.COMPONENTS)}),g.az.trackDefinedEvent("asset_search.see_more",{...tf}),tm(eb.qG.COMPONENTS)},recordingKey:tZ+".assetsSeeMore"}}:void 0,numberOfGridColumns:5,maxResults:!tu&&y?5:void 0,stretchEmptyStates:tM,noLibraries:tJ}),tD&&a.createElement(eT.M,{header:tu?void 0:{title:(0,A.t)("assets_in_actions.fragments_section.title"),icon:a.createElement(c.q,null),seeMore:{title:(0,A.t)("assets_in_actions.see_more_button"),onAction:()=>{g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tf,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.DESIGNS)}),(0,g.sx)("Fragment search see more",{...(0,O.d3)(eB,t_,p?p.searchId:"",p?p.input:null,!1,void 0,!1)}),tm(eb.qG.DESIGNS)},recordingKey:tZ+".fragmentsSeeMore"}},focusHandle:e?em:ey,isCommunity:!1,numberOfGridColumns:3,stretchEmptyStates:tM,maxResults:tu?void 0:3,entryPoint:eB,forceLoadingState:tO,initialState:e?void 0:{type:"recents",recents:en},lastSearchResultRef:ty}))))),a.createElement(o.t.TabPanel,{...to[eb.Qx.COMMUNITY]},a.createElement(ec.q,{key:tH},a.createElement(eT.M,{focusHandle:em,numberOfGridColumns:3,stretchEmptyStates:!0,isCommunity:!0,initialState:e?void 0:{type:"recents",recents:[]},entryPoint:eB,lastSearchResultRef:ty}))))))}function ek(e,r,n,a,i,o){let s=b.atomStore.get(ea.dd),l=b.atomStore.get(F.ze);if(!s||!l)return;let{currentSearch:c}=b.atomStore.get(X.WP),d=c?.input.assetTypeOption,u=b.atomStore.get(L.CZ),m=b.atomStore.get(O.hO.sortByAtom),p=d?.type!==W.I.ALL;e&&(n&&((0,O.G1)(e)||u||"percent_match"!==m)&&(0,O.Hl)({type:"input-text",value:e,file_key:l},o),((0,X.kN)(e)||p)&&(0,X.ES)({type:"input-text",query:e,assetTypeOption:{type:W.I.ALL},isKnownLibrary:i}),a&&(0,O.G1)(e,!0)&&(0,O.Hl)({type:"input-text",value:e,file_key:l},o,void 0,void 0,void 0,!0)),r()}function eM({searchTag:e}){let r;let n=(0,b.useAtomValue)(O.hO.currentCommunitySearchAtom),i=(0,z.Ko)(),o=a.useRef(null),s=(0,em.U)();switch(n?.input.type){case"input-image":r=n.input.imageFile.name;break;case"input-selection":r=n.input.name;break;default:r=void 0}return a.createElement("div",{className:w.s.flex.itemsCenter.justifyBetween.px8.py12.if(i,w.s.bSolid.bb1.colorBorder).$,ref:o},a.createElement("div",{className:w.s.flex.gap6.itemsCenter.$},a.createElement(ei.o,{recordingKey:(0,T.Pt)(s,"backButton")}),a.createElement(N.E,{fontSize:13},(0,A.tx)("asset_suggestions.visual_search_results_title")),a.createElement(N.E,{fontSize:13,color:"secondary"},r),e))}function eF({activeTab:e,recordingKey:r}){let n=a.useRef(null),{active:i}=(0,ee.H)({ref:n,focusOptions:{enableAutoFocus:!1}});return a.createElement(s.E,{ref:n,"aria-label":(0,A.t)("asset_suggestions.visual_search_icon_button_tooltip"),onClick:()=>(function(e){(0,g.sx)("Visual search in search bar clicked",{has_selection:p.UN().getCurrentPage()?.directlySelectedNodes?.length===1,session_id:b.atomStore.get(ea.dd)}),(0,j.XG)({action:"find-inspiration",isSearchResult:!1,searchPosition:null,numSearchResults:null,rankingAlgorithm:null,moduleFilters:null});let r=e===eb.xA.COMMUNITY?eb.Qx.COMMUNITY:eb.Qx.PLAN_FILE_ASSETS;(0,en.$I)({moduleToOpen:{type:"custom",module:(0,z.P5)()?a.createElement(eD,{initialTab:r,isVisualSearch:!0,closeOnEscape:!0}):a.createElement(ef.WS,{initialTab:e}),beforeModuleOpen:()=>(0,ef.jp)(O.G4.ACTIONS_SEARCH_BAR_ICON),name:er.Sn.VISUAL_SEARCH},trackingData:{source:"search_bar_visual_search_button"}})})(e),htmlAttributes:(0,y.kc)().fragment_search_tweaks?{"data-tooltip-type":H.Ib.SPECIAL,"data-tooltip-show-above":!0,"data-tooltip":ey.S,"data-tooltip-ai-beta-text":(0,A.t)("asset_suggestions.visual_search_icon_button_tooltip_with_beta_tag"),"data-tooltip-ai-beta-action":Z.JT.FIND_INSPIRATION}:{"data-tooltip":(0,A.t)("asset_suggestions.visual_search_icon_button_tooltip"),"data-tooltip-type":H.Ib.TEXT,"data-tooltip-show-above":!0},recordingKey:r,className:_()(eO.g,{[eO.H]:i})},(0,y.kc)().fragment_search_tweaks?a.createElement(u.T,null):a.createElement(m.A,null))}function ex(e){if(!(0,y.kc)().visual_search_on_paste)return;let r=e.clipboardData.files;if(1===r.length&&r[0]?.type.startsWith("image/")){let n=r[0];e.preventDefault(),(0,en.$I)({moduleToOpen:{type:"custom",module:(0,y.kc)().hub_file_fragments?a.createElement(eD,{isVisualSearch:!0,closeOnEscape:!0}):a.createElement(ef.WS,null),beforeModuleOpen:()=>(0,ef.qF)(O.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE,n),name:er.Sn.VISUAL_SEARCH},trackingData:{source:O.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE}})}}},166322:(e,r,n)=>{n.d(r,{O:()=>Y});var a=n(411855),i=n(188507),o=n(785448),s=n(816222),l=n(913817),c=n.n(l),d=n(32050),u=n(931223),m=n(875877),p=n(666308),h=n(153767),_=n(265851),g=n(76265),f=n(910164),E=n(788843),y=n(568116),b=n(176160),v=n(575232),T=n(710443),I=n(354465),S=n(567095),w=n(27365),A=n(244810),C=n(997409),N=n(605369),L=n(351335),O=n(824794),R=n(122427),P=n(268013),D=n(446130),k=n(852382),M=n(15130),F=n(226289),x=n(3574),U=n(274283),B=n(934939),V=n(610352),G=n(67469),H=n(405286),W=n(748014),K=n(268971);function Y({numberOfGridColumns:e=4,maxResults:r,stretchEmptyStates:n=!1,header:l,suggestion:u,onClickSuggestion:f,largeSpacing:T,noLibraries:A}){let{currentSearch:C}=(0,m.useAtomValue)(R.WP),N=(0,i.d4)(b.tB),L=(0,y.g5)(S.$A.Design).productComponents,G=(0,d.k9)(()=>L.map(e=>e.library_key),[L]),H=(0,v.U)(G),W=(0,I.oh)(E.fi)||"loading"===H.status,K=(0,d.k9)(()=>C?.result.data?.map(e=>e.library_key),[C]),Y=(0,v.U)(K||[]),z=(0,h.z3)("faux"),q=(0,P.s)(C),Z="";C&&"input-text"===C.input.type?Z=C.input.query:q&&(Z=q.name);let X=T?12:8,J=!W&&l;if(!C&&!(0,O.kK)()&&W||C?.result.status==="loading"||"loading"===Y.status)return a.createElement("div",null,J&&a.createElement($,{title:l.title,icon:l.icon}),a.createElement(x.V,{columns:e,padding:X,gap:12},Array.from({length:r??3*e}).map((e,r)=>a.createElement(x.V.Item,{key:r},a.createElement("div",{className:_.s.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},a.createElement(U.Y,{animationDelay:150*r})),a.createElement("div",{className:_.s.wFull.pt8.$},a.createElement(F.O.Container,null,a.createElement(F.O.SkeletonLine,{index:r}),a.createElement(F.O.SkeletonLine,{index:r,bottom:!0})))))));if(!C||"disabled"===C.result.status){if(0===L.length||(0,O.kK)())return a.createElement("div",{className:_.s.if(n,_.s.hFull).$},a.createElement(V.S,{fillHeight:n},a.createElement(M.N,null,a.createElement(M.N.ArtworkIcon,null,a.createElement(o.W,null)),a.createElement(M.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.initial_state.title"),dataTestId:"assets-grid-initial-state"}))));let i=L.slice(0,r??L.length).map((e,r)=>a.createElement(j,{key:e.node_id,asset:e,libraryNameByLibraryKeyFromLG:H.data||{},assetTypeDropdownSelection:w.I.ALL,searchQuery:Z,queryId:C?C.queryId:"",searchSessionId:m.atomStore.get(D.dd)??"",openFileKey:N?.key??"",sectionPosition:r,onDragStart:z}));return a.createElement("div",{"data-testid":"recents-assets-grid"},l&&a.createElement($,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(B.a,null),a.createElement(k.x,{primary:!0,columns:e,padding:X,gap:12},i))}if("errors"===C.result.status)return a.createElement("div",{className:_.s.if(n,_.s.hFull).$},l&&a.createElement($,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(V.S,{fillHeight:n},a.createElement(M.N,null,a.createElement(M.N.ArtworkIcon,{variant:"danger"},a.createElement(s.r,null)),a.createElement(M.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.error.title"),subtitle:(0,g.t)("assets_in_actions.assets_section.error.description")}))));if(A)return a.createElement("div",{className:_.s.if(n,_.s.hFull).$},l&&a.createElement($,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(V.S,{fillHeight:n},a.createElement("span",{className:_.s.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,g.tx)("assets_in_actions.no_results_no_libraries.title"))));if(0===C.result.data.length)return a.createElement("div",{className:_.s.if(n,_.s.hFull).$},l&&a.createElement($,{title:l.title,icon:l.icon}),a.createElement(V.S,{fillHeight:n},a.createElement("span",{className:_.s.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,g.tx)("assets_in_actions.assets_section.no_results.title",{query:c()(Z,{length:24})}))));let Q=C.result.data.slice(0,r??C.result.data.length).map((e,r)=>a.createElement(j,{key:e.node_id,asset:e,libraryNameByLibraryKeyFromLG:Y.data||{},assetTypeDropdownSelection:w.I.ALL,searchQuery:Z,queryId:C?C.queryId:"",searchSessionId:m.atomStore.get(D.dd)??"",openFileKey:N?.key??"",sectionPosition:r,onDragStart:z}));return u&&Q.push(a.createElement(k.x.Item,{key:"suggestion",fullWidth:!0,primaryAction:{text:"Search designs",shortcuts:[{key:p.Uz.ENTER}],onAction:f},singleClick:!0},a.createElement(k.x.GridItemHighlight,null,u))),a.createElement("div",null,l&&a.createElement($,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(B.a,null),a.createElement(k.x,{primary:!0,columns:e,padding:X,gap:12},Q))}function $({title:e,icon:r,seeMore:n}){let i=n?a.createElement(G.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):a.createElement("div",{className:_.s.h24.$});return a.createElement(H.X,{paddingHorizontal:16},r&&a.createElement(H.X.Icon,null,r),a.createElement(H.X.Title,{endEnhancer:i},e))}function j({asset:e,libraryNameByLibraryKeyFromLG:r,assetTypeDropdownSelection:n,searchQuery:i,openFileKey:o,sectionPosition:s,onDragStart:l,disableActionShortcuts:c}){let d=r[e.library_key],{afterSuccessfulInsert:u,componentInsertSwapCallback:m}=(0,W.H$)({asset:e,assetTypeDropdownSelection:n,sectionPosition:s,openFileKey:o}),{primaryAction:p,secondaryAction:h,tertiaryAction:g}=(0,K.b)({asset:e,afterSuccessfulInsert:u,componentInsertSwapCallback:m,source:"assets_grid",disableActionShortcuts:c});return a.createElement(k.x.Item,{primaryAction:p,secondaryAction:h,tertiaryAction:g},a.createElement(k.x.GridItemHighlight,null,a.createElement(z,{asset:e,sectionPosition:s,fileName:d,isSearch:!!i,onDragStart:l,afterSuccessfulInsert:u})),a.createElement(k.x.ItemFooter,null,a.createElement("div",{className:_.s.pt8.flex.flexColumn.gap2.alignLeft.$},a.createElement("span",{className:_.s.textBodyMedium.colorText.truncate.$},(0,T.kH)(e.name)),a.createElement("span",{className:_.s.textBodyMedium.colorTextSecondary.truncate.$},d))))}function z({asset:e,sectionPosition:r,isSearch:n,afterSuccessfulInsert:i,fileName:o,onDragStart:s}){let l=(0,C.Y)(e),c=(0,a.useRef)(null),[d,m]=a.useState({width:0,height:0});(0,u.wY)(c,()=>{m({width:c.current?.clientWidth??0,height:c.current?.clientHeight??0})});let p=(0,A.F)(e,L.K.ACTIONS_ASSETS,r,"Actions Component Search");return a.createElement("div",{className:_.s.wFull.$,style:f.sx.add({aspectRatio:"1/1"}).$},a.createElement("div",{ref:c,className:_.s.wFull.hFull.$},a.createElement(N.lX,{item:e,showName:!1,height:d.height,width:d.width,draggable:{sourceForTracking:"actions_assets_tab",afterSuccessfulInsert:i,sectionNameForTracking:W.Bd,onDragStart:s},shouldHideTooltip:!0,isSearch:n,useBaseTile:!0,hideNameOverlay:!1,numVariants:l,displayType:"grid",sectionPosition:r,showTooltipImmediately:!1,fileName:o,alwaysShowBorder:!1,buttonProps:{onContextMenu:p}})))}},743461:(e,r,n)=>{n.d(r,{B:()=>ee});var a=n(411855),i=n(188507),o=n(846288),s=n(888624),l=n(74617);n(629019),n(913817);var c=n(777535),d=n(991458),u=n(512729),m=n(875877),p=n(746643),h=n(972142),_=n(771952),g=n(265851),f=n(76265),E=n(231705),y=n(904703);n(788843),n(69664);var b=n(125682),v=n(568116);n(176160),n(354465);var T=n(77383),I=n(706293);n(957020);var S=n(567095),w=n(27365),A=n(831231),C=n(295221),N=n(900097),L=n(732767);n(824794);var O=n(122427),R=n(908262),P=n(175014),D=n(938226),k=n(802425),M=n(446130),F=n(654644),x=n(691862),U=n(707299),B=n(563970),V=n(901231),G=n(505473),H=n(212628),W=n(999038);n(15130);var K=n(356013),Y=n(9489),$=n(166322),j=n(23172),z=n(184312),q=n(941811),Z=n(209362),X=n(610352),J=n(828662),Q=n(188561);function ee({initAssetSearch:e=!1,closeOnEscape:r=!1,initialTab:n=Y.xA.COMPONENTS}){let ee=(0,W.V)(),et=(0,L.eH)(),er=(0,q.A)(),en=a.useRef(null),{currentSearch:ea}=(0,m.useAtomValue)(O.WP),ei=(0,m.useAtomValue)(y.hO.currentSearchAtom),eo=(0,m.useAtomValue)(y.hO.currentCommunitySearchAtom),[es,el]=(0,m.useAtom)(M.Q8),ec=(0,m.useSetAtom)(M.Rt),{recentFragments:ed}=(0,y.cN)(!ee),eu=(0,z.U)(ee);(0,C.b)({disabled:!e});let{close:em}=(0,R.cq)(),{libraries:ep,presets:eh,librariesForConnectedProject:e_}=(0,N.g)(),eg=!(0,m.useAtomValue)(T.Sh)&&0===ep.length&&0===eh.length&&0===e_.length,{debouncedAssetSearch:ef,clearAssetSearchAndCancelDebounce:eE,cancelDebouncedAssetSearch:ey,flushDebouncedAssetSearch:eb}=(0,O.TC)({debounceWait:K.wU}),{debouncedFragmentTextSearch:ev,clearFragmentSearchAndCancelDebounce:eT,cancelDebouncedFragmentTextSearch:eI,flushDebouncedFragmentTextSearch:eS}=(0,H.S)({debounceWait:K.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}),{debouncedFragmentTextSearch:ew,cancelDebouncedFragmentTextSearch:eA,clearFragmentSearchAndCancelDebounce:eC,flushDebouncedFragmentTextSearch:eN}=(0,H.S)({debounceWait:K.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL,isCommunity:!0}),[eL,eO]=(0,m.useAtom)(O.B1),eR=(0,L.Nv)(ea?.input.type==="input-text"),eP=a.useCallback(e=>{c.az.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:eR,entryPoint:"actions-assets-tab",featureSlug:"library-filter-usage"}),eO(e),ef(es,e),eb()},[ef,eb,es,eR,eO]),eD=(0,J.s)(),ek=a.useRef(null),[eM,eF,ex]=s.t.useTabs({[Y.xA.COMPONENTS]:!0,[Y.xA.FRAGMENTS]:ee,[Y.xA.COMMUNITY]:et},{defaultActive:n});(0,u.h)(()=>()=>{m.atomStore.set(E.q4),eO({type:w.I.ALL}),(0,K.mX)(m.atomStore.get(M.Q8),p.lQ,ee,et,eD,y.G4.ACTIONS_ASSETS_TAB_DETAIL)});let eU=(0,v.g5)(S.$A.Design).productComponents.length,eB=ed?ed.length:0,eV=(0,a.useMemo)(()=>ex.activeTab===Y.xA.COMPONENTS?eU:ex.activeTab===Y.xA.FRAGMENTS?eB:(ex.activeTab,Y.xA.COMMUNITY,0),[eU,eB,ex.activeTab]);!function({activeTab:e,numRecentItems:r,isEmptySearchQuery:n}){let o=(0,m.useAtomValue)(M.dd),s=(0,m.useAtomValue)(M.Rt),l=(0,i.d4)(I.l),{query:c,queryId:d,results:u,loaded:p}=function(e){let{currentSearch:r}=(0,m.useAtomValue)(O.WP),n=(0,m.useAtomValue)(y.hO.currentSearchAtom);return e===Y.xA.COMPONENTS?{query:r?.input.type==="input-text"?r.input.query:"",queryId:r?.queryId,results:r?.result.data||[],loaded:r?.result.status==="loaded"}:e===Y.xA.FRAGMENTS?{query:n?.input.type==="input-text"?n.input.value:"",queryId:n?.searchId,results:n?.result.data||[],loaded:n?.result.status==="loaded"}:{query:"",queryId:"",results:[],loaded:!1}}(e),h=(0,D.Ev)(),_=(0,a.useRef)(new Set),g=`${e}-${d}`;(0,a.useEffect)(()=>{(p||r>0&&n)&&!_.current.has(g)&&(h({quickActionsSessionId:o||"invalid-for-assets-tab",quickActionsQueryId:s,searchQuery:c,numSearchResults:p?u.length:r,currentSelection:l,module:k.Sn.ASSETS_TAB_DETAIL_VIEW,moduleFilters:e,qaVersion:P.$L,searchQueryResults:""}),_.current.add(g))},[h,o,s,l,g,e,c,u.length,p,r,n])}({activeTab:ex.activeTab,numRecentItems:eV,isEmptySearchQuery:0===es.length});let eG=a.useCallback(e=>{switch(e){case Y.xA.COMPONENTS:ee&&eI(),et&&eA(),(0,O.kN)(es)&&(ef(es,eL),eb());break;case Y.xA.FRAGMENTS:ey(),et&&eA(),(0,y.G1)(es)&&(ev(es),eS());break;case Y.xA.COMMUNITY:ee&&eI(),ey(),(0,y.G1)(es,!0)&&(ew(es),eN());break;default:(0,o.xb)(e)}ex.setActiveTab(eM[e].id),en.current?.focus()},[eI,ef,eL,eb,ey,ev,eS,es,ex,eM,ee,et,eA,ew,eN]),eH=a.useCallback(e=>{el(e),ec((0,_.g)()),(ex.activeTab===Y.xA.COMPONENTS||0===e.length)&&ef(e,eL),ee&&(ex.activeTab===Y.xA.FRAGMENTS||0===e.length)&&ev(e),et&&(ex.activeTab===Y.xA.COMMUNITY||0===e.length)&&ew(e)},[el,ec,ex.activeTab,ee,et,ef,eL,ev,ew]),eW=a.createElement(V.fu,{value:ex.activeTab,onChange:p.lQ,numItems:et?3:2},a.createElement(V.oz,{tabId:Y.xA.COMPONENTS,onAction:()=>eG(Y.xA.COMPONENTS)},(0,f.tx)("assets_in_actions.detail_view.components_tab.title")),ee&&a.createElement(V.oz,{tabId:Y.xA.FRAGMENTS,onAction:()=>eG(Y.xA.FRAGMENTS)},(0,f.tx)("assets_in_actions.detail_view.fragments_tab.title")),et&&a.createElement(V.oz,{tabId:Y.xA.COMMUNITY,onAction:()=>eG(Y.xA.COMMUNITY)},(0,f.tx)("assets_in_actions.detail_view.community_tab.title"))),eK=ea?.queryId,eY=ei?.searchId,e$=eo?.searchId,ej=ee&&ea&&"loaded"===ea.result.status?a.createElement("div",{className:g.s.flex.wFull.colorBgSecondary.itemsCenter.px8.py6.radiusMedium.$},a.createElement(l.N,{style:{"--color-icon":"var(--color-icon-brand)"}}),a.createElement("span",{className:g.s.ml8.textBodyMedium.$},er?(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion",{boldText:a.createElement("span",{className:g.s.textBodyMediumStrong.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_bold_text")),orgText:(0,h.EJ)(er,20)}):(0,f.tx)("assets_in_actions.fragments_section.empty_state.text")),a.createElement("span",{className:g.s.mlAuto.textBodyMediumStrong.colorTextBrand.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_hint"))):void 0,ez=ea&&!eg,eq=(0,b.Um)(),eZ=a.useCallback(e=>{ee&&(0,K.jk)(e)},[ee]);return a.createElement(x.n,{width:(0,d.jz)(Q.X),height:480,bodyFontMedium:!0,dataTestId:"assetsDetailView"},a.createElement(x.n.Header,null,a.createElement("div",{ref:ek,className:g.s.flex.flexColumn.$},a.createElement(B.v,{ref:en,searchQuery:es,onSearchChange:eH,forceRoot:r,onClear:()=>{el(""),eE(),ee&&eT(),et&&eC()},onPaste:eZ,endEnhancer:ee&&a.createElement(K.hc,{activeTab:ex.activeTab}),placeholder:eu}),(ee||et||ez)&&a.createElement("div",{className:g.s.px8.pb8.$},a.createElement(F.b,{primary:!1,gap:8,align:"center",fullWidth:!0,justify:"space-between"},a.createElement("div",null,(ee||et)&&eW),a.createElement("div",null,ez&&a.createElement(s.t.TabPanel,{...eF[Y.xA.COMPONENTS]},a.createElement("div",{className:g.s.h24.flex.itemsCenter.$},a.createElement(Z.i,{onSetAssetType:eP,value:eL,id:K.Km,dataTestId:K.Km,recordingKey:K.Km,role:"button",showTooltipOnEllipsis:!0,dropdownShown:eq}))),ee&&a.createElement(s.t.TabPanel,{...eF[Y.xA.FRAGMENTS]},a.createElement("div",{className:g.s.h24.flex.itemsCenter.$},ei&&a.createElement(G.s,{containerRef:ek,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),et&&a.createElement(s.t.TabPanel,{...eF[Y.xA.COMMUNITY]},a.createElement("div",{className:g.s.h24.$}))))))),a.createElement(x.n.Body,null,a.createElement(Y.fJ.Provider,{value:{activeTabId:ex.activeTab}},a.createElement(s.t.TabPanel,{...eF[Y.xA.COMPONENTS]},a.createElement(U.q,{key:eK},eg?a.createElement(X.S,{fillHeight:!0},a.createElement(A.Ee,{onClickExplore:em,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):a.createElement($.O,{numberOfGridColumns:6,stretchEmptyStates:!0,suggestion:ee&&ej,onClickSuggestion:()=>{eG(Y.xA.FRAGMENTS)}}))),ee&&a.createElement(s.t.TabPanel,{...eF[Y.xA.FRAGMENTS]},a.createElement(U.q,{key:eY},a.createElement(j.M,{focusHandle:en,initialState:{type:"recents",recents:ed},stretchEmptyStates:!0,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),et&&a.createElement(s.t.TabPanel,{...eF[Y.xA.COMMUNITY]},a.createElement(U.q,{key:e$},a.createElement(j.M,{focusHandle:en,stretchEmptyStates:!0,isCommunity:!0,initialState:{type:"recents",recents:[]},entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))))))}},23172:(e,r,n)=>{n.d(r,{M:()=>O});var a=n(411855),i=n(846288),o=n(816222),s=n(913817),l=n.n(s),c=n(875877),d=n(153767),u=n(265851),m=n(76265),p=n(904703),h=n(824794),_=n(268013),g=n(852382),f=n(530526),E=n(15130),y=n(265747),b=n(547310),v=n(615164),T=n(226289),I=n(3574),S=n(274283),w=n(776918),A=n(941811),C=n(610352),N=n(67469),L=n(405286);function O({focusHandle:e,entryPoint:r,initialState:n,numberOfGridColumns:i=3,maxResults:s,stretchEmptyStates:d=!1,header:g,forceLoadingState:f,hideEditorNames:y,isCommunity:N,largeSpacing:L,searchResultRef:O,lastSearchResultRef:D}){let k=(0,c.useAtomValue)(N?p.hO.currentCommunitySearchAtom:p.hO.currentSearchAtom),M=(0,c.useAtomValue)(p.hO.sortByAtom),F=(0,_.s)(k),x=(0,A.A)(),U=L?12:8,B=(0,h.kK)()||!x;if(n?.type==="recents"&&null===n.recents||k?.result.status==="loading"||f)return a.createElement("div",null,g&&a.createElement(P,{title:g.title,icon:g.icon}),a.createElement(I.V,{columns:i,padding:U,gap:12},Array.from({length:s??3*i}).map((e,r)=>a.createElement(I.V.Item,{key:r},a.createElement("div",{className:u.s.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},a.createElement(S.Y,{animationDelay:150*r})),a.createElement("div",{className:u.s.wFull.pt8.$},a.createElement(T.O.Container,null,a.createElement(T.O.SkeletonLine,{index:r}),a.createElement(T.O.SkeletonLine,{index:r,bottom:!0})))))));if(!k||"disabled"===k.result.status){if(!n)return null;let o=N?(0,m.t)("assets_in_actions.fragments_section.empty_state.header_community"):B?(0,m.t)("assets_in_actions.fragments_section.empty_state.header_generic"):(0,m.t)("assets_in_actions.fragments_section.empty_state.header",{orgText:x}),l=N?(0,m.t)("assets_in_actions.fragments_section.empty_state.text_community"):(0,m.t)("assets_in_actions.fragments_section.empty_state.text"),c=N?"community-fragments-grid-initial-state":"fragments-grid-initial-state";return n.recents?.length?a.createElement("div",null,g&&a.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),a.createElement(R,{fragments:n.recents,focusHandle:e,numberOfGridColumns:i,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:N,largeSpacing:L})):a.createElement("div",{className:u.s.if(d,u.s.hFull).$},a.createElement(C.S,{fillHeight:d},a.createElement(E.N,null,a.createElement(E.N.ArtworkIllustration,{light:a.createElement(v.A,null),dark:a.createElement(b.A,null)}),a.createElement(E.N.Text,{title:o,subtitle:l,dataTestId:c}))))}if("errors"===k.result.status)return a.createElement("div",{className:u.s.if(d,u.s.hFull).$},g&&a.createElement(P,{title:g.title,icon:g.icon}),a.createElement(C.S,{fillHeight:d},a.createElement(E.N,null,a.createElement(E.N.ArtworkIcon,{variant:"danger"},a.createElement(o.r,null)),a.createElement(E.N.Text,{title:(0,m.t)("assets_in_actions.fragments_section.error.title"),subtitle:(0,m.t)("assets_in_actions.fragments_section.error.description")}))));if(0===k.result.data.length){let e="";return"input-text"===k.input.type?e=k.input.value:F&&(e=F.name),a.createElement("div",{className:u.s.if(d,u.s.hFull).$},g&&a.createElement(P,{title:g.title,icon:g.icon}),a.createElement(C.S,{fillHeight:d},a.createElement("span",{className:u.s.textBodyMedium.colorTextSecondary.$},(0,m.tx)("assets_in_actions.fragments_section.no_results.title",{query:l()(e,{length:24})}))))}let V=(0,w.t)(k.result.data,M);return a.createElement("div",null,g&&a.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),a.createElement(R,{fragments:V,focusHandle:e,numberOfGridColumns:i,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:N,largeSpacing:L,searchResultRef:O,lastSearchResultRef:D}))}function R({fragments:e,focusHandle:r,numberOfGridColumns:n,entryPoint:o,maxResults:s,hideEditorNames:l,isCommunity:c,largeSpacing:m,searchResultRef:p,lastSearchResultRef:h,disableActionShortcuts:_}){let E=(0,f.r)("fragments_grid",r,o,_),b=(0,d.z3)("faux");return a.createElement(g.x,{primary:!0,columns:n,padding:m?12:8,gap:12},e.slice(0,s??e.length).map((r,n)=>{let d=a.createElement(T.O.Container,null,a.createElement(T.O.Title,null,r.file_name),c?a.createElement(T.O.CommunityMetadata,{name:r.editor_name}):a.createElement(T.O.EditInfo,{editor:{name:r.editor_name,imageUrl:r.editor_img_url},lastEditedAt:r.last_edited_at,hideEditorName:l})),{primaryAction:m,secondaryAction:_,tertiaryAction:f}=E(r,n,null,e),v="";switch(r.type){case"fig-file-fragment":v=`${r.file_key}-${r.node_id}`;break;case"hub-file-fragment":v=`${r.hub_file_id}-${r.node_id}`;break;default:(0,i.xb)(r)}let I=s?s-1:e.length-1;return a.createElement(g.x.Item,{key:v,primaryAction:m,secondaryAction:_,tertiaryAction:f},a.createElement(g.x.GridItemHighlight,null,a.createElement(y.a,{entryPoint:o,fragment:r,fragmentPosition:n,onDragStart:b,ref:0===n?p:n===I?h:null})),a.createElement(g.x.ItemFooter,null,a.createElement("div",{className:u.s.pt8.$},d)))}))}function P({title:e,icon:r,seeMore:n}){let i=n?a.createElement(N.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):a.createElement("div",{className:u.s.h24.$});return a.createElement(L.X,{paddingHorizontal:16},a.createElement(L.X.Icon,null,r),a.createElement(L.X.Title,{endEnhancer:i},e))}},887645:(e,r,n)=>{n.d(r,{C:()=>en});var a=n(411855),i=n(188507);n(217950);var o=n(138225),s=n(809471),l=n(377203),c=n(311332),d=n(66905),u=n(875877),m=n(631769);n(550479);var p=n(972142),h=n(663844),_=n(693565),g=n(265851),f=n(76265),E=n(910164),y=n(728764),b=n(937688),v=n(7842),T=n(530494),I=n(648735),S=n(7395),w=n(688656),A=n(190263),C=n(253244),N=n(707240),L=n(908262),O=n(625341),R=n(260228),P=n(938226);n(802425);var D=n(883643),k=n(80712),M=n(691862),F=n(944465),x=n(916068),U=n(831723),B=n(279598),V=n(697093),G=n(623432),H=n(32073),W=n(782556),K=n(61215),Y=n(181146),$=n(864046),j=n(794412),z=n(110354);function q({augmentedExtension:e}){let{extension:r,publishedExtension:n}=e,{pop:i}=(0,L.cq)();(0,N.z)();let o=a.useRef(null),{onAction:s,actionText:l}=(0,O.m)({augmentedExtension:e,submenuRef:o,displayAboveTarget:!0}),c=B.H5.DETAILS,d=(0,V.D)({source:c,text:l,onAction:s,augmentedExtension:e,submenuRef:o,hideShortcutOnKeyboardFocus:!0}),u=(0,H.DS)(e);u&&(u=(0,P.M$)(u,c)),(0,F.k)({primaryAction:d,tertiaryAction:u,actionLabel:!0,active:!0,target:null});let m=(0,R.x)(),p=C.HW-48-41,_=n.unique_run_count,f=n.like_count;return a.createElement(M.n,{height:C.HW,width:m,dataTestId:"extension-details-view"},a.createElement(D.t,null),a.createElement(X,{extension:r,onGoBack:i}),a.createElement(h.P,{height:p,className:g.s.px16.$},a.createElement(J,{imgUrl:r.redirect_cover_image_url,extensionName:r.name}),a.createElement(Q,{name:r.name,numLikes:f,numRuns:_}),a.createElement(ee,{publishedExtension:n}),a.createElement(et,{description:r.description})),a.createElement(W.Xq,{augmentedExtension:e}))}function Z({augmentedExtension:e}){let r=(0,u.useAtomValue)(x.t);return a.createElement(G.M6,{numResults:1,moduleFilters:r},a.createElement(q,{augmentedExtension:e}))}function X({extension:e,onGoBack:r}){let n=(0,S.k0)(e),u=n?(0,f.t)("qa.extensions.widget"):(0,f.t)("qa.extensions.plugin"),m=e.plugin_id,p=function(e){let r=(0,i.wA)(),n=(0,S.k0)(e)?(0,A.ox)(e.plugin_id):(0,A.ab)(e.plugin_id);return(0,a.useCallback)(()=>{(0,d.e)(n)||r((0,T.RK)({rawInput:n}))},[r,n])}(e),h=(0,i.wA)(),_=a.useCallback(()=>{h(v.Pv({url:n?(0,A.ox)(m):(0,A.ab)(m),extensionType:n?"widget":"plugin"}))},[h,n,m]);return a.createElement("div",{className:g.s.p8.$,style:E.sx.add({height:"48 px"}).$},a.createElement("div",{className:g.s.flex.h32.px4.itemsCenter.justifyBetween.$},a.createElement("div",{className:g.s.flex.flexRow.$},a.createElement(o.K,{onClick:r,"aria-label":(0,f.t)("qa.go_back")},a.createElement(s.C,null)),a.createElement("div",{className:g.s.pl8.colorText.textBodyLarge.$},u)),a.createElement("div",{className:g.s.flex.flexRow.itemsCenter.gap8.$},a.createElement(o.K,{onClick:p,"aria-label":(0,f.t)("qa.extensions.open_in_community"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.extensions.open_in_community"),"data-tooltip-type":w.Ib.TEXT}},a.createElement(l.N,null)),a.createElement(o.K,{onClick:_,"aria-label":(0,f.t)("qa.copy_link"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.copy_link"),"data-tooltip-type":w.Ib.TEXT}},a.createElement(c.W,null)))))}function J({imgUrl:e,extensionName:r}){let n=(0,b.X)(e);return a.createElement("div",{className:g.s.overflowHidden.bRadius5.mb12.$,style:E.sx.add({aspectRatio:n?"16/9":"2/1",background:"var(--color-loading)"}).$},a.createElement("img",{src:e,className:g.s.hFull.wFull.eventsNone.$,style:E.sx.add({objectFit:"cover"}).$,alt:`Thumbnail for ${r}`}))}function Q({name:e,numLikes:r,numRuns:n}){return a.createElement("div",{className:g.s.flex.flexRow.justifyBetween.$},a.createElement("div",{className:g.s.colorText.textHeadingMedium.$},e),a.createElement("div",{className:g.s.flex.flexRow.itemsCenter.gap8.colorTextSecondary.textBodyMedium.$},a.createElement("div",{className:g.s.flex.flexRow.gap2.$},a.createElement(_.B,{svg:z.A,className:g.s.colorIconSecondary.$,style:E.sx.add({margin:"3px"}).$}),a.createElement("div",null,(0,p.$M)(r))),a.createElement("div",{className:g.s.flex.flexRow.gap2.$},a.createElement(_.B,{svg:j.A,className:g.s.mx2.colorIconSecondary.$}),a.createElement("div",null,(0,p.$M)(n)))))}function ee({publishedExtension:e}){if(!e)return null;let r=e.community_publishers?.accepted[0];if(!r)return null;let{img_url:n,name:i}=r;return a.createElement("div",{className:g.s.pt4.flex.flexRow.itemsCenter.justifyBetween.colorTextSecondary.textBodyMedium.$},a.createElement("div",{className:g.s.flex.$},a.createElement(y.H8,{user:{img_url:n,name:i},size:y.Pf.SMALL16}),a.createElement("div",{className:g.s.pl8.$},(0,U.kB)(e))),a.createElement("div",null,a.createElement(K.o,{publishedExtension:e,showTooltip:!0})))}function et({description:e}){return a.createElement("div",{className:g.s.pt16.pb8.$},a.createElement(m.R,{value:e,quillClassName:$.C,fallback:null,errorFallback:null}))}function er(){let{pop:e}=(0,L.cq)();return(0,a.useEffect)(()=>{e()},[e]),null}function en({extensionId:e,extensionType:r}){let n=(0,I._P)(e,!0),i=(0,Y.Oy)();if(!n.loaded)return a.createElement(k.R,null);let o=n.plugin;if(!o)return a.createElement(er,null);let s=i(o,r);return(0,Y.JT)(s)?a.createElement(er,null):s.publishedExtension?a.createElement(Z,{augmentedExtension:{...s,publishedExtension:s.publishedExtension}}):a.createElement(k.R,null)}},697093:(e,r,n)=>{n.d(r,{D:()=>d});var a=n(411855),i=n(893382),o=n(938226),s=n(3541);n(644494);var l=n(279598),c=n(623432);function d({source:e,text:r,onAction:n,augmentedExtension:d,submenuRef:u,hideShortcutOnKeyboardFocus:m=!1}){let p=(0,c.OX)(),h=(0,s.qI)();return a.useMemo(()=>{let a={text:r,shortcuts:m&&h?[]:[l.Hz],onAction:e=>{d&&(0,i.wI)({extensionId:d.extension.plugin_id,searchPosition:e.target?.index??0,numSearchResults:p.numResults,searchQuery:p.searchQuery,moduleFilters:p.moduleFilters}),n(e)},submenuRef:u};return(0,o.M$)(a,e)},[h,d,p.moduleFilters,p.numResults,p.searchQuery,m,n,e,u,r])}},623432:(e,r,n)=>{n.d(r,{M6:()=>l,OX:()=>c});var a=n(411855),i=n(875877),o=n(446130);let s=a.createContext(null);function l({numResults:e,moduleFilters:r,children:n}){return a.createElement(s.Provider,{value:{numResults:e,moduleFilters:r}},n)}function c(){let e=a.useContext(s),r=(0,i.useAtomValue)(o.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:r}}},32073:(e,r,n)=>{n.d(r,{DS:()=>f});var a=n(188507),i=n(76265),o=n(950759),s=n(628220),l=n(58590),c=n(15092),d=n(255600),u=n(492366),m=n(7395),p=n(908262),h=n(107712),_=n(279598),g=n(181146);function f(e){let r=function(e){let r=(0,a.wA)(),n=(0,d.U_)(),{extension:l,types:c}=e,{unsave:u}=E(e);if(!(e.types.has(_.Ag.RECENT)||e.types.has(_.Ag.USER_SAVED)||e.types.has(_.Ag.LOCAL)))return;let p=!!((0,m.ZQ)(l)&&e.publishedExtension);return{displayText:p?(0,i.t)("universal_insert.remove_local_version"):(0,i.t)("universal_insert.remove"),callback:()=>{!(c.has(_.Ag.LOCAL)&&(0,m.ZQ)(l)&&(r(o.qR(l.localFileId)),p))&&(c.has(_.Ag.RECENT)&&n&&r(((0,m.k0)(l)?s.Kq:s.lD)({storeInRecentsKey:n,resourceId:l.plugin_id})),c.has(_.Ag.USER_SAVED)&&u())}}}(e),n=function(e){let{save:r}=E(e),n=(0,a.wA)(),o=(0,d.U_)(),l=(0,c.TA)();if(!e.types.has(_.Ag.USER_SAVED)&&!(0,g.JT)(e))return{displayText:(0,i.t)("community.saves.save"),callback:()=>{if(r(),o&&l){let{extension:r}=e;n(((0,m.k0)(r)?s.RH:s.gU)({storeInRecentsKey:o,id:r.plugin_id,version:e.extension.id,currentUserId:l,skipPluginRun:!0}))}}}}(e),l=r||n,{pop:u}=(0,p.cq)();if(l)return{shortcuts:[_.r7],onAction:()=>{l.callback(),u()},text:l.displayText}}function E(e){let{extension:r}=e,n=(0,h.zX)({extensionId:r.plugin_id});return(0,l._i)(r.plugin_id,(0,m.k0)(r)?u.vt.WIDGET:u.vt.PLUGIN,e.publishedExtension,n)}},782556:(e,r,n)=>{n.d(r,{S3:()=>v,U4:()=>b,Xq:()=>y,q8:()=>E});var a=n(411855),i=n(188507),o=n(217950),s=n(550479);n(265851),n(910164);var l=n(47795),c=n(559098),d=n(163021),u=n(696441),m=n(125682),p=n(7395),h=n(908262),_=n(314186),g=n(616845);let f="EXTENSION_SUBMENU_DROPDOWN";function E(e){return!!(e.manifest.menu&&e.manifest.menu.length>0)}function y({augmentedExtension:e}){let{extension:r}=e,n=(0,m.Um)(),i=b(r),l=(0,u.c)(),{close:p}=(0,h.cq)(),f=(0,_.w0)();if(!i||!r||!r.manifest||!r.manifest.menu)return null;let E=(0,c.z)(r.manifest.menu,r).map(e=>(0,d.aS)(e,e=>()=>{var r;(0,d.Im)(l,"quick-actions",e.menuAction),f(e,!0),("run-installed-plugin"!==(r=e.menuAction).type&&"run-local-plugin"!==r.type?((0,s.$D)(o.e.AI_FOR_PRODUCTION,Error("shouldSubmenuCloseQuickActions expected 'run-installed-plugin' or 'run-local-plugin'")),1):r.parameterOnly&&r.parameterEntry)||p()}));return a.createElement(g.ms,{parentRect:n?.data.targetRect,displayAboveTarget:n?.data.displayAboveTarget,lean:"left",minWidth:64,items:E})}function b(e){let r=(0,m.Um)();return(0,p.ZQ)(e)?r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===e.localFileId:r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===null}function v({submenuIsShown:e,extension:r,displayAboveTarget:n}){let o=(0,i.wA)();return a.useCallback(a=>{if(e)o(l.oB());else if(a){let e=a.getBoundingClientRect();o(l.j7({type:f,data:{extensionId:r.plugin_id,localFileId:(0,p.ZQ)(r)?r.localFileId:null,targetRect:e,displayAboveTarget:n}}))}},[o,e,r,n])}},61215:(e,r,n)=>{n.d(r,{o:()=>g});var a=n(411855),i=n(693565),o=n(265851),s=n(76265),l=n(233950),c=n(419378),d=n(492366),u=n(688656),m=n(112512);function p({publishedExtension:e,showTooltip:r}){if(!e.monetized_resource_metadata)return null;let n=(0,c.X2)(e.monetized_resource_metadata);return r?a.createElement("div",{"data-testid":"freemium-text",className:o.s.flex.itemsCenter.gap4.$,"data-tooltip":n,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")),a.createElement(i.B,{svg:m.A,className:o.s.colorIconSecondary.$})):a.createElement("div",{"data-testid":"freemium-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")))}function h({publishedExtension:e}){return e.monetized_resource_metadata?a.createElement("div",{"data-testid":"free-trial-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.resource.free_trial_days",{days:e.monetized_resource_metadata.trial_length_in_days}))):null}function _({showTooltip:e}){return e?a.createElement("div",{"data-testid":"off-platform-text",className:o.s.flex.itemsCenter.gap4.$,"data-tooltip":(0,s.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")),a.createElement(i.B,{svg:m.A,className:o.s.colorIconSecondary.$})):a.createElement("div",{"data-testid":"off-platform-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")))}function g({publishedExtension:e,showTooltip:r}){return(0,d.PM)(e)?a.createElement(p,{publishedExtension:e,showTooltip:r}):(0,c.Lt)({resource:e,payment:e.community_resource_payment})?a.createElement(h,{publishedExtension:e}):(0,d.zF)(e)?a.createElement(_,{showTooltip:r}):null}},181146:(e,r,n)=>{n.d(r,{JT:()=>u,Oy:()=>d});var a=n(411855),i=n(648735);n(613611),n(468847);var o=n(973393),s=n(661137);n(15092);var l=n(263352),c=n(7395);function d(){let e=(0,i.tB)(),r=(0,i.ll)(),n=(0,i.U6)(),d=(0,i.cW)(),u=(0,i.ZT)(),m=(0,o.FP)(),p=(0,i.$1)(),h=(0,s.sZ)();return a.useCallback((a,i)=>(function({extension:e,org:r,allowlistPlugins:n,allowlistWidgets:a,publishedPlugins:i,publishedWidgets:s,localExtensions:d,communityPaymentsState:u,lastUsedTimestampById:m,type:p}){let h;let _=(0,o.Y8)({extension:e,publishedPlugins:i,publishedWidgets:s,communityPaymentsState:u});_&&(h=Object.values(d).find(e=>e.plugin_id===_.id));let g={types:new Set([p]),publishedExtension:_,key:function(e){let r=e.plugin_id;return(0,c.ZQ)(e)?`${r}-${e.localFileId}`:r}(e),lastUsedTimestamp:m[(0,c.ZQ)(e)?e.localFileId:e.plugin_id],localPublishedExtension:h};if((0,c.ZQ)(e))return _&&!(0,l.nf)(_)&&(g.publishedExtension=void 0),{...g,extension:e,canRun:!0,canRequest:!1};if((0,c.bH)(e)||!r)return{...g,extension:e,canRun:!0,canRequest:!1};let f=r.public_plugins_allowed,E=r.plugins_whitelist_enforced,y=r.widgets_whitelist_enforced,b=r.plugin_requests_allowed,v=r.widget_requests_allowed,T=(0,c.k0)(e);if(!f)return{...g,extension:e,canRun:!1,canRequest:!1};if(!(T?y:E))return{...g,extension:e,canRun:!0,canRequest:!1};let I=!!(T?a:n)[e.plugin_id];return{...g,extension:e,canRun:I,canRequest:!I&&(T?v:b)}})({extension:a,org:h,allowlistPlugins:r,allowlistWidgets:n,publishedPlugins:d,publishedWidgets:u,localExtensions:p,communityPaymentsState:m,lastUsedTimestampById:e,type:i}),[h,r,n,d,u,p,m,e])}function u(e){let{extension:r}=e;return(0,c.ZQ)(r)}n(802425),n(279598)},854945:(e,r,n)=>{n.d(r,{d$:()=>y});var a=n(411855);n(217950);var i=n(520244),o=n(351966),s=n(777885),l=n(538887),c=n(805014),d=n(245954),u=n(777840),m=n(512729);n(666308),n(563192),n(499875);var p=n(265851);n(76265);var h=n(233950),_=n(721071);n(684259),n(920198);var g=n(366172);n(212507),n(176160),n(688656);var f=n(456809);n(908262),n(260228),n(642821),n(340676);var E=n(654644);function y({validationFailures:e,category:r,supportedKitType:n,selectedKit:i,shouldAutoFix:o}){return a.createElement(a.Fragment,null,[...e.system.filter(e=>e.rule.category===r).filter(e=>!n||e.rule.supportedKitTypes.includes(n)).map(e=>a.createElement(v,{key:e.rule.key,rule:e.rule,output:e.output,dsKitKey:i.dsKitKey,shouldAutoFix:o})),...e.component.filter(e=>e.rule.category===r).map(e=>a.createElement(b,{key:e.rule.key,rule:e.rule,output:e.output,shouldAutoFix:o}))])}function b({rule:e,output:r,shouldAutoFix:n}){let i=a.useCallback(n=>{if(n?.stopPropagation(),!e.fix)return!1;{let n=!0,a=(0,d.UN)();for(let i in r){let o=a.get(i);o&&!e.fix(o,r[o.guid]?.meta)&&(n=!1)}return g.Y5.triggerAction("commit"),n}},[e,r]),o=a.useMemo(()=>Object.values(r).flatMap(e=>e.guids),[r]);return 0===Object.keys(r).length?null:a.createElement(T,{rule:e,guids:o,meta:null,autofix:i,shouldAutoFix:n})}function v({dsKitKey:e,rule:r,output:n,shouldAutoFix:i}){let o=a.useCallback(a=>(a?.stopPropagation(),!!r.fix&&r.fix(e,n.meta)),[r,e,n]);return 0===n.guids.length?null:a.createElement(T,{rule:r,guids:n.guids,meta:n.meta,autofix:o,shouldAutoFix:i})}function T({rule:e,guids:r,meta:n,autofix:o,shouldAutoFix:_}){let[g,f]=a.useState(!1),[y,b]=a.useState(!1),[v,T]=a.useState(!1),w=e=>{T(o(e))},A=a.useCallback(e=>{c.Egt.clearSelection(),c.Egt.addToSelection(e)},[]),C=a.useMemo(()=>r.map(e=>(0,d.UN)().get(e)).filter(Boolean),[r]);return((0,m.h)(()=>{_&&w()}),0===r.length)?null:a.createElement(a.Fragment,null,a.createElement(E.B,{fullWidth:!0,justify:"space-between",align:"center"},a.createElement("button",{onClick:()=>b(!y),className:p.s.cursorPointer.flex.itemsCenter.$},y?a.createElement(s.O,null):a.createElement(l.k,null),a.createElement(S,{severity:e.severity}),a.createElement(h.E,{fontSize:11,fontWeight:"medium"},e.name)),e.fix&&a.createElement(i.$n,{variant:"secondary",onClick:w},v?"Fixed":"Autofix")),y&&a.createElement(u.Y1,{padding:{horizontal:12},direction:"vertical"},a.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},e.warning),A&&a.createElement(i.$n,{variant:"link",onClick:()=>A(r)},"Select offending layers"),a.createElement("button",{onClick:()=>f(!g),className:p.s.cursorPointer.flex.itemsCenter.$},g?a.createElement(s.O,null):a.createElement(l.k,null),a.createElement(h.E,{fontSize:11,fontWeight:"medium"},"Show metadata")),g&&a.createElement("div",{className:p.s.flex.flexColumn.wFull.maxH100.px12.overflowYScroll.$},n?a.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},JSON.stringify(n)):a.createElement("div",{className:p.s.wFull.flex.flexWrap.gap4.$},C.map(e=>a.createElement(I,{key:e.guid,node:e}))))))}function I({node:e}){let r=a.useMemo(()=>a.createElement(f.xH,{guid:e.guid,node:e,useUI3Icon:!0}),[e]);return a.createElement(o.E,{className:p.s.borderBox.h24.flex.px8.gap4.itemsCenter.b1.radiusMedium.maxW150.font11.colorBorder.$,onClick:()=>{c.glU.panToNode(e.guid,!1);let r=(0,d.UN)().getCurrentPage();r&&(r.directlySelectedNodes=[e])},recordingKey:"nodeButton"},r,a.createElement("span",{className:p.s.truncate.$},e.name))}function S({severity:e}){switch(e){case _.x$.ERROR:return a.createElement("div",{className:p.s.p2.font11.colorTextDanger.justifyCenter.fontSemiBold.$},"[Error]");case _.x$.WARNING:return a.createElement("div",{className:p.s.p2.font11.colorTextWarning.justifyCenter.fontSemiBold.$},"[Warning]");default:return null}}n(691862),n(610352)},403816:(e,r,n)=>{n.d(r,{Ne:()=>j,Xy:()=>$});var a=n(265171),i=n.n(a),o=n(248114),s=n(662322),l=n(713634),c=n(68596),d=n(186109),u=n(909351),m=n(647975),p=n(557901),h=n(553380),_=n(787848),g=n(515337),f=n(668015),E=n(3199),y=n(579371),b=n(589750),v=n(315706),T=n(433146),I=n(521422),S=n(108627),w=n(98743),A=n(422810),C=n(788522),N=n(982170),L=n(496188),O=n(692645),R=n(395999),P=n(474143),D=n(285509),k=n(479500),M=n(432384),F=n(231512),x=n(782251),U=n(767642),B=n(728741),V=n(477572),G=n(487781),H=n(988646),W=n(276183),K=n(956376),Y=n(591241);let $=0,j=2;new Map().set(0,F.A).set(i()(.25*j,2),x.A).set(i()(j/2,2),U.A).set(i()(.75*j,2),B.A).set(j,V.A),new Map().set(0,G.A).set(i()(.25*j,2),H.A).set(i()(j/2,2),W.A).set(i()(.75*j,2),K.A).set(j,Y.A),new Map().set("Plus Jakarta Sans",N.A).set("Outfit",O.A).set("Inter",C.A).set("Public Sans",R.A).set("Domine",A.A).set("Source Serif 4",k.A).set("Roboto Serif",D.A).set("Roboto Mono",P.A).set("JetBrains Mono",L.A).set("Space Mono",M.A),new Map().set("Plus Jakarta Sans",l.A).set("Outfit",d.A).set("Inter",s.A).set("Public Sans",u.A).set("Domine",o.A).set("Source Serif 4",h.A).set("Roboto Serif",p.A).set("Roboto Mono",m.A).set("Space Mono",_.A).set("JetBrains Mono",c.A),new Map().set("Plus Jakarta Sans",E.A).set("Outfit",b.A).set("Inter",f.A).set("Public Sans",v.A).set("Domine",g.A).set("Source Serif 4",S.A).set("Roboto Serif",I.A).set("Roboto Mono",T.A).set("Space Mono",w.A).set("JetBrains Mono",y.A)},225801:(e,r,n)=>{n.d(r,{qq:()=>c});var a=n(805014),i=n(851169),o=n(245954),s=n(366172);let l=e=>Uint8Array.from(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));function c({create:e,slideGrid:r}){let n,c;let d=r&&r.length>0,u=(0,o.UN)(),m=u.getCurrentPage();if(!m)throw Error("Something went wrong");if(1===m.directlySelectedNodes.length){var p;if(!function(e){let r=s.Y5.getViewportInfo(),n=r.width/r.zoomScale,a=r.height/r.zoomScale,i=r.offsetX-n/2,o=r.offsetX+n/2,l=r.offsetY-a/2,c=r.offsetY+a/2,d=e.absoluteBoundingBox,u=d.x+d.w,m=d.y+d.h;return!(u>o)&&!(m>c)&&!(d.x<i)&&!(d.y<l)}(n=m.directlySelectedNodes[0])&&(n=void 0),d&&n?.isOrInSlide()){let e=n.containingSlideId;c=u.get(e)}(p=n)&&["FRAME","RECTANGLE","ROUNDED_RECTANGLE","ELLIPSE","STAR","INSTANCE","SYMBOL"].includes(p.type)||(n=void 0)}return i.l7.user("generate image",()=>{if(!n&&e){let e=s.Y5.getViewportInfo();if((n=u.createNode("RECTANGLE")).size={x:1024,y:1024},n.x=e.offsetX-n.size.x/2,n.y=e.offsetY-n.size.y/2,d){if(!c){let e=a.Ez5.canvasGrid().getClosestGridCoord({x:n.x,y:n.y},null),i=e.row>=0?e.row:0,o=e.col>=0?e.col:0,s=r[i][o];c=u.get(s)}if(c){let e=function(e){let r=e.absoluteBoundingBox;return{x:r.x+r.w/2,y:r.y+r.h/2}}(c);n.x=e.x-n.size.x/2,n.y=e.y-n.size.y/2}}u.getCurrentPage()?.appendChild(n),n.fills=[{type:"IMAGE",image:{hash:l("7f12ea1300756f144a0fb5daaf68dbfc01103a46"),name:"Checker"},imageScaleMode:"FILL"}],m.setSelectionToSingleNode(n.guid),a.glU.showSelectionOverlayImmediately()}}),n??null}},832439:(e,r,n)=>{n.d(r,{g:()=>V});var a=n(411855),i=n(188507),o=n(846288),s=n(909491),l=n(641060),c=n(805014),d=n(885123),u=n(875877),m=n(666308),p=n(76265),h=n(250379),_=n(366172),g=n(63114),f=n(963993),E=n(797187),y=n(952122),b=n(779099),v=n(939045),T=n(965413),I=n(269636),S=n(448313),w=n(253244),A=n(119925),C=n(908262),N=n(802425),L=n(276769),O=n(745594),R=n(99163),P=n(51812),D=n(99130),k=n(930093),M=n(384218);function F(){return a.createElement(v.d,null,a.createElement(U,null))}function x(e){return c.X3B.getMagicLinkSelectionInfo().selectedDisplayAmount}function U(){let e=(0,i.wA)(),r=(0,A.RL)(w.JT.MAGIC_LINK,S.e),{start:n,stop:l,state:d,aiTrackingContext:m}=r,{close:h}=(0,C.cq)(),g=(0,a.useRef)(null),b=(0,E.ut)((0,f.aY)(),c.FAf.DESIGN);(0,a.useEffect)(()=>{d===A.qy.INITIAL&&null===g.current&&(g.current=b,(0,f.NT)(c.FAf.PROTOTYPE))},[d,b]),(0,a.useEffect)(()=>()=>{d===A.qy.INITIAL&&null!==g.current&&(0,f.NT)(g.current)},[d]);let v=(0,u.useSetAtom)(I.d_),N=(0,u.useSetAtom)(I.pD),L=(0,u.useAtomValue)(I.pD),{selectedDisplayAmount:O,tlfAmount:F,onlyTopLevelNodesSelected:U,topLevelFrameIds:V}=c.X3B.getMagicLinkSelectionInfo(),G=!U;switch((0,a.useEffect)(()=>{if(d===A.qy.RUNNING&&G){f.tJ(V),N((0,p.tx)("magic_link.running_and_selecting_top_level_frames"));let e=setTimeout(()=>{N((0,p.tx)("magic_link.running"))},1e3);return()=>clearTimeout(e)}},[N,G,d,V]),d){case A.qy.INITIAL:return a.createElement(D.A,{action:w.JT.MAGIC_LINK,actionIcon:a.createElement(s.B,null),actionLabel:(0,p.tx)("fullscreen_actions.quick_actions.add-interactions-v2"),onPerform:()=>{g.current=null,n({})},getCustomDisabledTextFromSelectedNodes:r=>{let n,a;return F>10&&(n=(0,p.tx)("magic_link.tlf_selection_too_large"),a="Select 10 or fewer frames"),a&&e((0,y.Zh)({name:"prototype.ai_magic_link_action_instruction",params:{instruction:a,numSelectedNodes:O,numSelectedTlfs:F}})),n},getCustomSelectedNodesAmount:x,aiTrackingContext:m,instructionAction:{type:"learn_more",url:w.Xy}},(0,p.tx)("magic_link.select_a_few_top_level_frames"));case A.qy.RUNNING:return v(!1),_.Y5.triggerAction("start-magic-link"),a.createElement(k.F,{onCancel:()=>{l(),h()},aiTrackingContext:m},L);case A.qy.DONE:return a.createElement(M.h,{magicLinkOutput:r.result,aiTrackingContext:m});case A.qy.ERROR:if(_.Y5.triggerAction("end-magic-link"),r.error instanceof T.ft)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"invalid_selection_from_generic_layers"}})),a.createElement(B,null);if(r.error instanceof T.sT)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated"}})),a.createElement(P.u,null,(0,p.tx)("magic_link.no_interactions_generated_general"));if(r.error instanceof T._U)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated_existing_interactions"}})),a.createElement(P.u,null,(0,p.tx)("magic_link.no_interactions_generated_existing_interactions"));return a.createElement(R.E,{error:r.error,aiTrackingContext:m});case A.qy.CANCELLED:return _.Y5.triggerAction("end-magic-link"),null;default:(0,o.xb)(d)}}function B(){let e=(0,h.Tv)();return a.createElement(P.u,{buttons:[{label:(0,p.t)("fullscreen.context_menu.auto_rename_layers"),onClick:()=>{(0,L.$I)({moduleToOpen:{type:"custom",module:a.createElement(O.A,{source:c.uQ6.MAGIC_LINK}),name:N.Sn.RENAME_LAYERS_TOAST,beforeModuleOpen:()=>{(0,A.cT)(w.JT.MAGIC_LINK),(0,b.Yh)(d.D.getState().mirror.appModel,w.JT.AUTO_RENAME_LAYERS)&&(0,A.Ag)(w.JT.AUTO_RENAME_LAYERS,g.Ay,{source:c.uQ6.MAGIC_LINK,overwriteNames:!1})}},trackingData:{source:"magic_link_rename_layers_suggestion_toast"}})},variant:"secondary",iconPrefix:a.createElement(l._,null),shortcuts:[{key:m.Uz.ENTER,modifier:[m.xH.META]}]}]},(0,p.tx)(1===e.length?"magic_link.rename_layer_suggestion":"magic_link.rename_layers_suggestion"))}function V(e){let r=d.D.dispatch,n=(0,b.Yh)(d.D.getState().mirror.appModel,w.JT.MAGIC_LINK);(0,L.$I)({moduleToOpen:{type:"custom",module:a.createElement(F,null),name:N.Sn.MAGIC_LINK,beforeModuleOpen:()=>{r((0,y.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions_suggestion"}})),(0,A.B3)(w.JT.MAGIC_LINK),n&&(0,A.Ag)(w.JT.MAGIC_LINK,S.e,e)}},trackingData:{source:"prototype_magic_link_triggered"}})}},286480:(e,r,n)=>{n.d(r,{J1:()=>d,NA:()=>l,Q3:()=>c,ZP:()=>i});var a=n(777535),i=(e=>(e.RECORDINGS_WINDOW_OPENED="recordings_window_opened",e.NEW_RECORDING_BUTTON_CLICKED="new_recording_button_clicked",e.RECORDING_INITIALIZED="recording_initialized",e.RECORDING_DEVICE_UNAVAILABLE="recording_device_unavailable",e.RECORDING_START="recording_start",e.RECORDING_ABORT="recording_abort",e.RECORDING_FINISH="recording_finish",e.RECORDING_SAVED="recording_saved",e.RECORDING_RESTARTED="recording_restarted",e))(i||{}),o=(e=>(e.SIDEBAR="sidebar",e))(o||{}),s=(e=>(e.REPLAY_OPENED="replay_opened",e.LINK_COPIED="link_copied",e.DELETED="deleted",e))(s||{}),l=(e=>(e.SIDEBAR="sidebar",e.LINK="link",e.COMMENT="comment",e.NEW_RECORDING="new_recording",e))(l||{});function c(e,r,n){(0,a.sx)("recording_funnel_event",{fileKey:e?.key,editorType:e?.editorType,funnelEventName:r,entrypoint:n},{forwardToDatadog:!0})}function d(e,r,n,i){(0,a.sx)("recording_replay_event",{fileKey:e,editorType:r,replayEventName:"replay_opened",entrypoint:n,recordingId:i},{forwardToDatadog:!0})}},86521:(e,r,n)=>{n.d(r,{ZM:()=>i,bY:()=>o,r9:()=>s}),n(411855),n(188507),n(7842),n(176160),n(69441);let a="recording_";function i(e){return`${a}${e.replace(/-/g,"_")}`}function o(e){return e.startsWith(a)}function s(e){return o(e)?e.slice(a.length).replace(/_/g,"-"):null}},638731:(e,r,n)=>{n.d(r,{Vm:()=>d,ks:()=>u}),n(411855);var a=n(875877),i=n(653798);n(695024),n(289765);let o=(0,a.atom)({}),s=(0,a.atom)(null,(e,r,n)=>{let a=e(o);if(n.parentNodeId&&!a[n.parentNodeId]){(0,i.xi)("scene node overlay",`trying to add child overlay to ${n.parentNodeId} but parent overlay does not exist`);return}r(o,e=>({...e,[n.nodeId]:n}))}),l=(0,a.atom)(null,(e,r,n)=>{let a=e(c(n)).map(e=>e.nodeId),i=new Set([n,...a]);r(o,e=>Object.fromEntries(Object.entries(e).filter(([e])=>!i.has(e))))}),c=((0,a.atom)(e=>Object.keys(e(o)).length>0),(0,a.atomFamily)(e=>(0,a.atom)(r=>Object.values(r(o)).filter(({parentNodeId:r})=>r===e))));function d(e,r,n){a.atomStore.set(s,{nodeId:e,component:r,...n})}function u(e){a.atomStore.set(l,e)}function m({viewportInfo:e,overlay:r,offset:n={x:0,y:0}}){let a=useSceneSelectorDangerouslyReturningNodeObjects((e,r)=>e.get(r),r.nodeId),i=useAtomValue(c(r.nodeId));if(!a)return null;let o=a.absoluteBoundingBox,s=canvasRectToViewport(e,{x:o.x,y:o.y,width:o.w,height:o.h}),l={x:s.x+e.x+n.x,y:s.y+e.y+n.y};return React.createElement("div",{style:{position:"fixed",width:s.width,height:s.height,top:0,left:0,transform:`translate(${l.x}px, ${l.y}px)`,pointerEvents:"none",...r.overflowHidden?{overflow:"hidden"}:{}}},r.component,i.map(r=>React.createElement(m,{key:r.nodeId,viewportInfo:e,overlay:r,offset:{x:-1*l.x,y:-1*l.y}})))}(0,a.atom)(e=>Object.values(e(o)).filter(({parentNodeId:e})=>!e))},925392:(e,r,n)=>{n.d(r,{Kf:()=>S,MX:()=>E});var a=n(411855),i=n(747579),o=n(805014),s=n(841962),l=n(563192),c=n(612724),d=n(475824),u=n(581713),m=n(438244),p=n(718821),h=n(276805),_=n(673067);function g(e){let{version:r}=(0,i.DP)();return a.createElement(f,{...e,uiVersion:r})}class f extends l.o6{constructor(){super(...arguments),this.dragging=!1,this.srgbCanvasElement=null,this.srgbCanvasRef=e=>{this.srgbCanvasElement=e,this.srgbCanvasElement&&((0,s.kc)().ee_color_management_force_canvas?(0,m.dM)({canvas:this.srgbCanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"srgb"}):this.props.renderCanvas(this.srgbCanvasElement,this.props.value))},this.displayP3CanvasElement=null,this.displayP3CanvasRef=e=>{let r=!!(null===this.displayP3CanvasElement&&e);this.displayP3CanvasElement=e,this.displayP3CanvasElement&&(0,m.dM)({canvas:this.displayP3CanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"display-p3",initializeCanvasColorSpace:r})},this.barElement=null,this.barRef=e=>{this.barElement=e,e&&this.disableWeirdHorizontalScrollingPageNavigation(e)},this.handleElement=null,this.handleRef=e=>{this.handleElement=e,this.handleElement&&(this.props.renderHandle(this.props.value,this.handleElement),this.disableWeirdHorizontalScrollingPageNavigation(this.handleElement))},this.offset=new c.Mi(0,0),this.setOffset=e=>{if(null!=e){let r=e.target.getBoundingClientRect(),n=new c.Mi(r.left+r.width/2,r.top+r.height/2);this.offset=n.subtract(new c.Mi(e.clientX,e.clientY))}else null!=this.props.offset?this.offset=this.props.offset:this.offset=new c.Mi(0,0)},this.ensureInitialized=()=>{if(!this.barElement)throw Error("callback called before rendering barElement")},this.mouseToValue=e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect(),n=e.x+this.offset.x,a=e.y+this.offset.y;return n-=r.left+(this.props.handlePadding?this.props.handle/2:0),a-=r.top+(this.props.handlePadding?this.props.handle/2:0),n/=this.props.width,a/=this.props.height,n=Math.max(Math.min(n,1),0),a=Math.max(Math.min(a,1),0),new c.Mi(n,a)},this.valueToPosition=e=>{let r=e.x,n=e.y;return r*=this.props.width,n*=this.props.height,r-=this.props.handlePadding?0:this.props.handle/2,n-=this.props.handlePadding?0:this.props.handle/2,new c.Mi(r,n)},this.onPointerDown=l.Am(this,"pointerdown",e=>{e.stopPropagation(),this.dragging=!0,e.currentTarget.setPointerCapture(e.pointerId),e.currentTarget===this.handleElement?this.setOffset(e):(this.setOffset(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerUp=l.Am(this,"pointerup",e=>{if(!this.dragging)return l.aH;this.dragging=!1,this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!0)},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerMove=e=>{this.dragging&&(e.stopPropagation(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},this.onWheel=l.M5(this,"wheel",e=>{e.stopPropagation();let r=e.ctrlKey;this.props.wheelCallback?.(new c.Mi(e.deltaX,e.deltaY),e.altKey,r)},{recordMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey}),playbackMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey})}),this.onKeyDown=l.C0(this,"keydown",e=>{e.stopPropagation(),this.props.keyDownCallback(e)})}componentDidUpdate(e,r){super.componentDidUpdate(e,r),e.value!==this.props.value&&(this.srgbCanvasRef(this.srgbCanvasElement),this.displayP3CanvasRef(this.displayP3CanvasElement),this.handleRef(this.handleElement))}componentWillUnmount(){super.componentWillUnmount(),this.dragging=!1}disableWeirdHorizontalScrollingPageNavigation(e){e.addEventListener("wheel",e=>e.preventDefault(),{passive:!1})}canvasWidth(){return this.props.width+(this.props.handlePadding?this.props.handle:0)}canvasHeight(){return this.props.height+(this.props.handlePadding?this.props.handle:0)}render(){let e={position:"relative",boxSizing:"border-box",overflow:"hidden",width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.canvasWrapperStyles},r="ui3"===this.props.uiVersion?T:v,n={position:"absolute",boxShadow:`inset ${r}`,left:0,top:0,width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height?1:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.ghostStyles},i=this.valueToPosition(this.props.value),s={position:"absolute",boxSizing:"border-box",boxShadow:r,left:i.x,top:i.y,width:this.props.handle,height:this.props.handle,borderRadius:.5*this.props.handle},l=this.props.hitBoxMargin;return a.createElement("div",{className:this.props.containerClass,style:{position:"relative"}},a.createElement("div",{ref:this.barRef,style:e},this.props.colorProfile===o.RYP.SRGB?a.createElement("canvas",{ref:this.srgbCanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,this.props.colorProfile===o.RYP.DISPLAY_P3?a.createElement("canvas",{ref:this.displayP3CanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,a.createElement("div",{style:n})),this.props.children,a.createElement("div",{ref:this.handleRef,onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerMove:this.onPointerMove,onLostPointerCapture:this.onPointerUp,onWheel:this.onWheel,onKeyDown:this.onKeyDown,style:s,tabIndex:0,className:_.p}),a.createElement("div",{onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onLostPointerCapture:this.onPointerUp,onPointerMove:this.onPointerMove,onWheel:this.onWheel,style:{position:"absolute",left:-l,top:-l,right:-l,bottom:-l}}))}}function E(e){return"ui3"===e?b:y}f.displayName="SliderControlInner";let y=12,b=16,v="0 0 0 .6px rgba(0, 0, 0, 0.2)",T="var(--elevation-200-canvas)",I=d.F;function S({hitBoxMargin:e,width:r,height:n,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:m,renderCanvas:_,containerClass:f,recordingKey:y,canvasWrapperStyles:b,ghostStyles:v,colorProfile:T,colorHandle:S,children:w}){let{version:A}=(0,i.DP)(),C=(0,a.useCallback)((e,r)=>{let n=E(A);if(r.style.borderRadius=`${n/2}px`,r.style.borderStyle="solid",r.style.borderWidth="0.5px",r.style.borderColor="var(--color-icon-tertiary, white)",r.style.background="var(--color-bg, white)",S){r.style.borderColor="white",r.style.borderWidth=`${"ui3"===A?4:2}px`;let n=S(e);T===o.RYP.DISPLAY_P3&&(0,h.p3)()?r.style.backgroundImage=`url(${(0,p.rl)(n,T||o.RYP.SRGB)})`:r.style.background=I.format(n,(0,h.VG)(T||o.RYP.SRGB))}},[S,T,A]),N=E(A),L="ui3"===A?{outlineWidth:"1px",outlineStyle:"solid",outlineColor:"var(--color-bordertranslucent)",outlineOffset:"-1px"}:{};return a.createElement(g,{hitBoxMargin:e,width:r,height:n,handle:N,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:m,renderCanvas:_,renderHandle:C,containerClass:f,recordingKey:y,canvasWrapperStyles:{...L,...b},ghostStyles:v,colorProfile:T},w)}},228702:(e,r,n)=>{n.d(r,{T:()=>y});var a=n(411855),i=n(224231),o=n(351966),s=n(728722),l=n(265851),c=n(76265),d=n(233950),u=n(664462),m=n(140835),p=n(343373),h=n(181399),_=n(176160),g=n(183739),f=n(688656),E=n(467485);function y(){let e=function(e){let r=(0,s.Rs)(g.oBY,{key:e}),n=(0,u.J)();return r?.data?.file?.hasPermission&&n}((0,_.tS)()??""),r=(0,h.M)(),n=(0,p.GS)(),y=r?r.remainingGraceDays:i.Hw9,b=(0,c.t)("fullscreen.toolbar.request_sent.dev_mode_grace_period_tooltip",{numDays:y});return e?a.createElement(m.fu,{name:"Dev Mode Request Badge"},a.createElement("div",{className:l.s.ml4.h32.flex.itemsCenter.$},a.createElement(o.E,{className:l.s.minW100.if(n,l.s.py4.px8.colorBgSecondary,l.s.py8.px12.colorBgToolbarSecondary).bRadius6.itemsCenter.justifyCenter.h24.noWrap.$,htmlAttributes:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":b,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,"data-tooltip-show-above":!!n||void 0,"data-tooltip-show-below":!n||void 0,"data-testid":"dev_mode_request_pending_tooltip"}},a.createElement(d.E,{fontSize:11,fontWeight:"medium"},(0,c.tx)("fullscreen.toolbar.request.request_sent"))))):n?null:a.createElement(E.g,{variant:"toolbar-secondary",text:(0,c.t)("general.dev_mode")})}},69398:(e,r,n)=>{let a;var i=n(411855),o=n(188507),s=n(217950),l=n(351966),c=n(344793),d=n(629019),u=n.n(d),m=n(134288),p=n(112719),h=n(841962),_=n(875877),g=n(728722),f=n(139879),E=n(866415),y=n(563192),b=n(550479),v=n(271646),T=n(211020),I=n(693565),S=n(505427),w=n(265851),A=n(76265),C=n(312386),N=n(666249);n(620532);var L=n(178035),O=n(206908),R=n(989337),P=n(225371),D=n(99990),k=n(965361),M=n(140835),F=n(343373),x=n(31393),U=n(23478),B=n(38711),V=n(941302),G=n(631016),H=n(570423),W=n(758121),K=n(901152);n(783657);var Y=n(906565),$=n(210984),j=n(176160);n(849331);var z=n(15092),q=n(183739),Z=n(305216),X=n(510669),J=n(914077),Q=n(578706),ee=n(688656),et=n(465424),er=n(738402),en=n(987300),ea=n(923453),ei=n(464960),eo=n(715383),es=n(450155),el=n(467485),ec=n(770728),ed=n(142420),eu=n(42360),em=n(638784),ep=n(90148),eh=n(459256),e_=n(617012),eg=n(534281),ef=n(74960),eE=n(501679),ey=n(250116);let eb=(0,W.ck)(),ev="FULLSCREEN_FILENAME_CHEVRON",eT="FULLSCREEN_FILENAME_DROPDOWN",eI=(0,h.kc)().eu_fpl_migration_button;class eS extends y.o6{constructor(e){super(e),this.startRenaming=y.cZ(this,"click",()=>{this.props.canRename&&this.props.user&&this.props.dispatch(P.vg())}),this.submitFileName=e=>{this.props.dispatch(P.Wk()),this.props.onRename(e)},this.cancelFileName=()=>{this.props.dispatch(P.Wk())},this.nameRef=i.createRef()}render(){let e=(0,T._C)({textRef:this.nameRef,text:this.props.name});return this.props.isRenaming?i.createElement(eo.A,{className:u()(eE.a6),placeholderValue:this.props.name,submit:this.submitFileName,cancel:this.cancelFileName,recordingKey:y.Pt(this.props,"input"),maxLength:this.props.maxLength}):eI?i.createElement(l.E,{className:u()(eE.DD,{[eE.il]:!!this.props.user}),onClick:this.startRenaming,ref:this.nameRef,"aria-label":(0,A.t)("fullscreen.filename_view.file_input_title"),htmlAttributes:{"data-tooltip":e?this.props.name:void 0,"data-tooltip-type":ee.Ib.TEXT,"data-testid":this.props.dataTestId||"filename"}},this.props.name):i.createElement("span",{className:u()(eE.DD,{[eE.il]:!!this.props.user}),onClick:this.startRenaming,dir:"auto","data-testid":this.props.dataTestId||"filename",tabIndex:0,role:"textbox",ref:this.nameRef,onKeyDown:e=>(0,G.hx)({e,onClickHandler:this.startRenaming}),"aria-label":(0,A.t)("fullscreen.filename_view.file_input_title"),"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":e?this.props.name:void 0},this.props.name)}}function ew(e){let r=(0,F.GS)();return i.createElement(eS,{...e,name:(0,U.oj)(e.repo),onRename:r=>{e.dispatch(D.NN({repo:e.repo,name:r}))},isUI3:r})}function eA(e){let r=(0,o.wA)(),n=(0,z.iZ)(),a=(0,j.q5)(),s=(0,o.d4)(e=>e.isRenaming),l=(0,_.useAtomValue)(x.lu),c=!!a&&(0,ep.DF)(a,n),d=null==a&&null!=l?{type:"new-autosave-file",newAutosaveFile:l}:{type:"open-file",openFile:a,canRename:c};return i.createElement(eC,{dispatch:r,user:n,renamableFile:d,isRenaming:s,recordingKey:e.recordingKey})}function eC(e){let r,n,a;let o=(0,f.n_)(x.b_),l=(0,F.GS)(),{renamableFile:c}=e;"open-file"===c.type?(r=c.canRename,n=c.openFile?.name):(r=!0,n=c.newAutosaveFile.name,a=c.newAutosaveFile.editorType);let d="new-autosave-file"===c.type;return i.useEffect(()=>{d&&n&&a&&(0,B.hL)(n,(0,J.wN)(a))},[d,n,a]),i.createElement(eS,{...e,name:n||(0,A.t)("fullscreen.filename_view.title_placeholder"),canRename:r,onRename:r=>{"new-autosave-file"===c.type?o({fileKey:c.newAutosaveFile.fileKey,name:r,source:x.oE.EDITOR}):c.openFile?e.dispatch(O.Nw({file:c.openFile,name:r})):(0,b.$D)(s.e.UNOWNED,Error("Tried renaming but file does not exist"))},isUI3:l,maxLength:100})}function eN({file:e}){let r=(0,o.wA)(),n=(0,k.n6)();if(!e||!(0,U.Kz)(e))return null;let a=et.e0.EDITOR_TOOLBAR_ACTION;return i.createElement("div",{className:eE._H},i.createElement(ea.a$,{branchFileKey:e.key,size:v.vj.LARGE,onClick:e=>{r(R.hx({direction:Q.Kn.TO_SOURCE,trackingContextName:a,unreadCommentCount:n}))},convertsToDotWithSmallScreen:!0,isToolbar:!0}))}eS.displayName="EditableName";let eL=e=>{let r=(0,g.Rs)(q.GgD,{repoId:e});if("loaded"!==r.status)return;let n=r.data.repo?.files;return!!n&&n.map(e=>(0,ea.AM)(e)).some(e=>e===ea.pT.IN_REVIEW||e===ea.pT.CHANGES_REQUESTED||e===ea.pT.APPROVED)};function eO({file:e,viewOnly:r}){let n=(0,g.Rs)(q.Std,{orgId:e.parentOrgId}),a=(0,g.Rs)(q.nn0,{fileKey:e.key}),s=(0,er.ks)(),l=(0,N._I)(),c=(0,L.l7)(),d="loading"===n.status||e.parentOrgId&&!e.org,u=(0,en.Yj)(e.fileRepoId),p=e.fileRepoId?u:null,h=(0,o.wA)(),_=(0,ef.kU)({file:e,viewOnly:r}),f=r&&!_;if(!e||p?.status==="loading"||d||"loading"===a.status||f)return null;let E=!!(e.repo&&(0,U.Ns)(e,e.repo)),y=!!(0,U.Kz)(e)&&!!e.trashedAt;return s&&!l?i.createElement("div",{className:w.s.flex.itemsCenter.wFitContent.$},i.createElement(el.g,{variant:"toolbar-secondary",text:(0,A.t)("general.dev_mode")})):i.createElement(m.P.div,{transition:{duration:.3,ease:"easeOut",delay:.2,opactity:{ease:"linear",delay:.2}},initial:{width:0,translateX:-100,opacity:0},animate:{width:"auto",translateX:0,opacity:1}},i.createElement("div",{className:w.s.flex.itemsCenter.wFitContent.$},E&&e.fileRepoId&&i.createElement(eR,{repoId:e.fileRepoId,isEditor:e.canEdit,dispatch:h,branchInfo:p}),i.createElement(i.Fragment,null,i.createElement(eh.A,null),!y&&!c&&i.createElement(e_.a,{file:e,viewPermission:_,recordingKey:"fileNamePermission"}))))}function eR(e){let r=eL(e.repoId),{branchInfo:n}=e;if(!n||"loaded"!==n.status)return null;let a=n.data.activeBranches.length;return a<1?null:i.createElement(S.L,{text:(0,A.t)("fullscreen.filename_view.branch-count",{BRANCHES:a}),onClick:()=>e.dispatch(R.o5({trackingContextName:et.e0.EDITOR_TOOLBAR_ACTION})),showIndicator:e.isEditor&&r,indicatorStyle:eE.q3})}function eP({openFile:e,user:r}){let n=(0,eg.He)(),a=function(e,r){if(!e?.project)return"";let n=e.project;return n.path?n.path:(0,h.kc)().ps_benchmark&&n.id===r?.personal_drafts_folder_id?(0,A.t)("fullscreen.filename_view.drafts_to_move"):(0,A.t)("fullscreen.filename_view.drafts")}(e,r),o=a.length>25?a:void 0,s=(0,F.GS)(),l=(0,eg.CR)(),d=(0,Y.H)({useCurrentPlan:!0}),m=e?.project?.activeProjectResourceConnections?.[0];return eI?i.createElement("span",{className:a?eE.TV:eE.jw,title:o},l?i.createElement(c._,{className:eE.ub,"aria-label":a,href:l,newTab:!0},a):i.createElement("div",{className:u()(eE.ZL)},a),!s&&i.createElement(I.B,{ariaHidden:!0,svg:ey.A,className:eE.xo}),d&&!!m&&i.createElement(C.W,{hostPlanName:m.hostPlanName,connectedPlanName:m.connectedPlanName})):i.createElement("div",{className:a?eE.TV:eE.jw,title:o},i.createElement("div",{className:eE.ub,onClick:n,role:"link",tabIndex:0},a),!s&&i.createElement(I.B,{ariaHidden:!0,svg:ey.A,className:eE.xo}),d&&!!m&&i.createElement(C.W,{hostPlanName:m.hostPlanName,connectedPlanName:m.connectedPlanName}))}class eD extends y.o6{constructor(e){super(e),a=i.createRef()}renderDropdownMenu(){let{dropdownShown:e,recordingKey:r,dispatch:n}=this.props,a=!!e&&e.type===eT;return i.createElement(em.G,{trackEvent:(e,r)=>{this.context.trackEvent(e,r)},dropdownTargetRect:e?.data?.targetRect,recordingKey:r,dispatch:n,dropdownVisible:a,activatePathOnMount:e?.data?.activatePathOnMount})}renderChevronWithDropdown(e,r){let n=i.createElement(i.Fragment,null,i.createElement(ei.c,{divRef:a,className:e?eE.ai:eE.fN,svgContainerClassName:eE.Gp,dispatch:this.props.dispatch,showingDropdown:!!r&&this.showingDropdown(),dropdownKey:eT,recordingKey:y.Pt(this.props,"chevron"),dataOnboardingKey:ev,rcsHandlerId:"Filename chevron clicked",tabIndex:0,ariaLabel:(0,A.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",isUI3:this.props.isUI3}),this.renderDropdownMenu());return i.createElement("div",{className:u()({[eE.Xz]:!e}),onMouseDown:e=>{let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});a?.current?.dispatchEvent(r)},onClick:e=>{e.stopPropagation()}},n)}showingDropdown(){return this.props.dropdownShown?.type===eT}render(){let{user:e,openFile:r,isRenaming:n,isUI3:o}=this.props,s=r?.repo,l=!!(r&&(0,U.Kz)(r)),c=!!(r&&s&&(0,U.Ns)(r,s)),d=!!r&&(0,ep.DF)(r,e),m=!!this.props.user&&!!r&&!!this.props.editorIsReadOnly,h=!!r&&(0,Z.Pe)(r),_=!n&&e&&r&&!h&&!this.props.isLimitedDevMode&&!this.props.hideChevron,g=!n&&e&&r&&this.props.isLimitedDevMode,f=_||g,E=!eb&&this.props.currentWorkspace&&this.props.hasMultipleWorkspaces;return i.createElement("div",{className:u()(eE.iW,{[eE.Ij]:!e}),id:"fullscreen-filename","data-onboarding-key":ed.G8,onContextMenu:e=>{if(a.current){let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});a.current.dispatchEvent(r),e.preventDefault()}}},i.createElement("div",{className:n?eE.Tt:eE.W},r?.fileRepoId&&e?.id&&i.createElement(i.Fragment,null,i.createElement(p.aY,{openFile:r,modalShown:this.props.modalShown,topLevelMode:this.props.topLevelMode,dispatch:this.props.dispatch}),i.createElement($.jQ,{repoId:r.fileRepoId,openFileKey:r.key,currentUserId:e.id,appMergingStatus:this.props.mergingStatus,openFileMerge:this.props.openFileMerge})),!1,E&&!o&&i.createElement("div",{className:eE.tL},i.createElement(eg.Hl,{iconClassName:eE.ht})),i.createElement(eP,{user:e,openFile:r}),!n&&l&&s&&i.createElement(es.o,{repo:s,dispatch:this.props.dispatch,trackingContextName:et.e0.EDITOR_TOOLBAR_ACTION}),c&&s?i.createElement(ew,{dispatch:this.props.dispatch,user:e,repo:s,canRename:d,isRenaming:n}):i.createElement(eA,{recordingKey:y.Pt(this.props,"fileName")}),!n&&r&&e&&i.createElement("div",{className:eE.ld},i.createElement(eN,{file:r})),!n&&r&&i.createElement(eu.s,{openFile:r}),i.createElement("div",{className:u()({[eE.Dg]:!f})},f&&this.renderChevronWithDropdown(c,r)),(0,K.MP)()&&i.createElement(ec.e,{isUI3:!1,targetKey:ev}),!n&&r&&i.createElement(eO,{file:r,viewOnly:m})))}}eD.displayName="FilenameView",eD.contextType=M.QE;let ek=(0,E.xx)(V.vp);(0,o.Ng)(function(e){let r;let n=(0,X.getPermissionsState)(e),a=(0,h.kc)().ps_benchmark;r=a?ek(n.user,n.currentUserOrgId,n.currentTeamId):ek(n.user,n.currentUserOrgId);let i=(0,H.T)(e.progressBarState.mode)?!e.openFile?.canEdit:e.mirror?.appModel?.isReadOnly,o=!1;return o=a?e.plans.length>1:(0,V.Tt)(e.authedUsers.orderedIds,n),{editorIsReadOnly:i,isLimitedDevMode:(0,er.$A)(e.selectedView)&&!(0,N.tn)(e),openFile:e.openFile,loadingState:e.loadingState,userStateLoaded:e.userStateLoaded,dropdownShown:e.dropdownShown,isRenaming:e.isRenaming,userFlags:e.userFlags,currentWorkspace:r,hasMultipleWorkspaces:o,workspaceName:(0,V.HE)(e,r),selectedView:e.selectedView,topLevelMode:e.mirror.appModel.topLevelMode,modalShown:e.modalShown,mergingStatus:e.mergingStatus,openFileMerge:e.openFileMerge,...n}})(eD)},638784:(e,r,n)=>{n.d(r,{G:()=>eP});var a=n(411855),i=n(188507),o=n(805014),s=n(707062),l=n(841962),c=n(875877),d=n(728722),u=n(76265),m=n(158531),p=n(593587),h=n(680091),_=n(837612),g=n(616885),f=n(207849),E=n(82278),y=n(206908),b=n(229694),v=n(47795),T=n(719971),I=n(309361),S=n(225371),w=n(736041),A=n(965361),C=n(140835),N=n(403386),L=n(181485),O=n(45362),R=n(343373),P=n(190500),D=n(190253),k=n(23478),M=n(192715),F=n(978747),x=n(75842),U=n(353428),B=n(301758),V=n(942171),G=n(643225),H=n(366172),W=n(541302),K=n(593273),Y=n(758121),$=n(515662),j=n(798361),z=n(176160),q=n(15092),Z=n(880633),X=n(314540),J=n(183739),Q=n(305216),ee=n(510669),et=n(77383),er=n(39971),en=n(773283),ea=n(487388),ei=n(914077),eo=n(880146),es=n(754430),el=n(324225),ec=n(779099),ed=n(465424),eu=n(711114),em=n(941854),ep=n(408205),eh=n(923453),e_=n(574146),eg=n(768482),ef=n(821718),eE=n(545343),ey=n(61430),eb=n(85092),ev=n(378614),eT=n(165093),eI=n(689954),eS=n(574431),ew=n(806565),eA=n(30057),eC=n(247480),eN=n(90148),eL=n(310482);let eO=(0,Y.ck)();var eR=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(eR||{});function eP({trackEvent:e,dropdownTargetRect:r,recordingKey:n,dispatch:eR,dropdownVisible:eP,activatePathOnMount:eD,leanPadding:ek}){let eM=(0,i.d4)(e=>e.mirror.appModel),eF=(0,i.d4)(e=>e.selectedView),ex=(0,i.d4)(e=>(0,ee.getPermissionsStateMemoized)(e)),eU=(0,i.d4)(e=>e.userStateLoaded),eB=(0,z.q5)(),eV=(0,i.d4)(e=>e.fileVersion),eG=(0,z.Cq)({useSinatraType:!0}),eH=(0,i.d4)(e=>e.repos),eW=(0,i.d4)(e=>e.teams),eK=(0,i.d4)(e=>e.currentUserOrgId),eY=(0,i.d4)(e=>e.currentTeamId),e$=!!(0,q.iZ)(),ej=(0,eu.Q)({currentOrgId:eK,currentTeamId:(0,l.kc)().ps_benchmark?eY:null}),ez=(0,R.GS)(),eq=(0,eA.sO)(),eZ=(0,ew.cJ)(),eX=(0,f.g)(),eJ=(0,eL.F)(),eQ=(0,j.BI)(),e0=(0,j.m0)(),e1=(0,d.Rs)(J.dTR,{fileKey:eB?.key||""},{enabled:!!eB?.key}),e2=(0,i.d4)(et.fA),e5=(0,c.useAtomValue)(et.p9);(0,$.SR)();let e4=(0,d.Rs)(J.iY3,{branchFileKey:eB?.key||""},{enabled:!!eB}),e7=(0,N.JT)(),e8=a.useMemo(()=>{if(eB&&"loaded"===ej.status)return(0,V.T0)(ej.data,eB.key)},[eB,ej]),e3=(0,i.d4)(et.F9),e6=(0,i.d4)(e=>e.mirror.appModel.topLevelMode),e9=(0,ey.jT)(eB,e3),te=(0,F.$n)(),tt=(0,A.n6)(),tr=(0,O.kD)(),tn=(0,O.J3)(),ta=(0,O.JU)(tn),ti=tn===O.kN.FILE_IN_DRAFTS,to=(0,g.pH)(eB?.key??null,{enabled:!!eB}),ts=(0,g.GI)("filename-context-menu"),tl=o.Ez5.uiState().isRecovery.getCopy(),tc=a.useMemo(()=>e5?e2?"publish":"show_upsell_modal":"disabled",[e2,e5]),td=(0,W.R6)(),{colorProfilePreference:tu}=(0,K.jK)(),tm=(0,K.hP)(tu),tp=(0,em.S)(),th=L.h.useTrackingContext({trigger:er.b.FILE_DUPLICATE}),t_=!1,tg=!1,tf=!1,tE=null;"loaded"===e1.status&&(t_=!!e1.data?.file?.canTrash&&!!(0,s.oA)(e1.data?.file?.canTrash),tg=!!(0,s.oA)(e1.data?.file?.canMove),tf=!!(e1.data.file&&(0,D._R)(e1.data.file.editorType??X._Y.DESIGN,e1.data.file.currentPlanUser)),tE=(0,s.oA)(e1.data?.file?.canMoveWithReasons)||null);let ty=(0,p.R)(),tb=(0,m.jB)({files:[{editor_type:eB?.editorType??null,folder_id:eB?.project?.id??null}],repos:[],destinationFolderId:eB?.project?.id??null,isDestinationDrafts:!1}),tv=(0,m.Cp)(tb.destinationPlan?.key.parentId||null,tb.licenseType),tT=tg,tI=!!ty&&(0,m.Px)(tb),tS=ex.user,tw=(0,eN.DF)(eB,tS),tA=e7&&e7.profile.entityType===es.o1.TEAM,tC=!!tS&&t_&&!tA,tN=a.useCallback(()=>({canMove:!!tT,isUserViewerRestricted:!!tf,planUser:e1.data?.file?.currentPlanUser??null,inDrafts:!!e1.data?.file?.isDraftFile,isBillingRemodelEnabled:ty,draftsMoveData:tb,hasConnectedPlanUserInOrg:tv,canMoveWithReasons:tE||void 0}),[tT,tb,e1.data?.file?.currentPlanUser,e1.data?.file?.isDraftFile,tv,ty,tf,tE]);if(a.useEffect(()=>{e0&&(e0._move_to_project=()=>{tT&&!tI&&(0,eN.RG)(eR,eB,eH,tN())()}),eQ?.updateFilePermissionV2?.(tw,tT&&!tI,tC)},[tw,tT,tC,tI,eR,eQ,e0,eB,tN,eH]),!eB||!eP)return null;let tL=eF.editorType,tO=tL!==ei.nT.Whiteboard,tR=!!(tO&&(0,k.Kz)(eB)),tP="loaded"===ej.status&&(0,V.gV)(ej.data,eK),tD="loaded"===e4.status&&(null===e4.data.file||e4.data.file&&(0,eh.AM)(e4.data.file)===eh.pT.MERGED),tk=tR&&("loaded"!==e4.status||tD),tM=e4.data?.file?.project,tF=tM&&eB.editorType&&(0,Q.Jf)(tM,eB.editorType),tU=!eB.canExport,tB=(0,ee.isFileFigjamDisabled)(eB,ex)||tL===ei.nT.Slides&&(0,s.oA)(eB.org?.isSlidesDisabled)||(0,ee.isOrgUserExternallyRestrictedFromState)(ex)||tU,tV=tS&&eB.canManage,tG=!!(tR&&eB.trashedAt),tH=tG&&!tk,tW=!!e8,tK=eB.project,tY=tK&&tF?tR?(0,u.t)("fullscreen.filename_view.duplicate-as-new"):(0,u.t)("fullscreen.filename_view.duplicate"):(0,u.t)("fullscreen.filename_view.duplicate-to-drafts"),t$=null,tj=(0,l.kc)().ps_benchmark;tj?tK&&""!==tK.path&&(t$=tK):t$=eB.teamId?tK:null;let tz=tj&&eB.folderId===tS?.personal_drafts_folder_id,tq=eB.canEdit&&!!eB.thumbnailGuid,tZ=ej.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],tX=ej.data?.currentUser?.userSidebarSections!=null?(0,s.oA)(ej.data.currentUser.userSidebarSections):null,tJ=(0,V.t$)(tX??[],tZ),tQ=tJ.find(e=>e.id===e8?.resource.sidebarSectionId),t0=()=>{let e=[];return 0===tJ.length&&e.push({recordingKey:"favorite-custom",displayText:(0,u.t)("sidebar.starred"),isChecked:!1,callback:()=>t4(!1)}),tJ.map(r=>{e.push({recordingKey:"favorite-custom",displayText:""===r.name?(0,u.t)("sidebar.starred"):r.name,isChecked:!!tQ&&tQ.id===r.id,callback:()=>t4(!!tQ&&tQ.id===r.id,r.id)})}),e},t1=()=>{if("loaded"!==to.status||!to.data)return[];let{canPinFileToWorkspace:e,canEditPin:r,existingFilePinId:n,workspaceHasMaxPins:a}=to.data;return e?[{displayText:(0,u.t)("tile.dropdown.pin_to_workspace"),callback:()=>ts(eB.key,a)}]:r?[{displayText:(0,u.t)("tile.dropdown.edit_workspace_pin"),callback:()=>t7(n)},{displayText:(0,u.t)("tile.dropdown.remove_workspace_pin"),callback:()=>t8(n)}]:[]},t2=()=>{eR(w.to({type:eb.dD,data:{entrypoint:ev.RR.FILENAME_VIEW_DROPDOWN}}))},t5=()=>{let e=eB.teamId&&eW[eB.teamId];eR(w.to({type:eT.$3,data:{afterFileMove:t2,team:e||null}}))},t4=(e,r)=>{if(!eG)return;let n={entrypoint:"editor",favoriteId:e8?.resource.id,sectionId:r,file:Z.F.toLiveGraph(eG),fileBrowserEntryPoint:!1};e?eR(E.qP(n)):eR(E.Fb(n))},t7=e=>{eR(w.to({type:(0,h.l)(),data:{pinnedFileId:e}}))},t8=e=>{eR(w.to({type:(0,_.I)(),data:{pinnedFileId:e}}))},t3=!eO&&eF.editorType===ei.nT.Design&&eB.canEdit,t6=(0,eg.jv)((0,M.t)(te,ed.e0.EDITOR_TOOLBAR,e6),{appModel:eM,selectedView:eF}),t9=(0,eg.jv)((0,M.m)(te,ed.e0.EDITOR_TOOLBAR,e6,tt),{appModel:eM,selectedView:eF}),re=(()=>{if(eO||!e$)return[];let e=[];return tp&&!tz&&((!tP||tW)&&e.push({displayText:tW?(0,u.t)("favorited_resources.indicate_section_prefix")+": "+(tQ&&""!==tQ.name?tQ.name:(0,u.t)("sidebar.starred")):(0,u.t)("favorited_resources.add_to_sidebar"),children:t0()}),tW&&e.push({recordingKey:"favorite-custom-remove",displayText:(0,u.t)("favorited_resources.remove_from_sidebar"),callback:()=>t4(!0,tQ?.id)})),e.push(...t1()),e})(),rt=(e,r)=>e?r:[],rr=[...t9,...rt(tR,t6),{separator:!0,displayText:""},...rt(e$&&!eO&&!tl,[{disabled:!(0,ec.Yh)(eM,"enter-history-mode"),recordingKey:"toggleVersionHistory",displayText:(0,ef.Ah)(eM.activeCanvasEditModeType)?(0,u.t)("fullscreen.filename_view.version-history-hide"):(0,u.t)("fullscreen.filename_view.version-history-show"),callback:()=>{eR(v.oB()),(0,ef.Ah)(eM.activeCanvasEditModeType)?eR((0,en.Eg)()):eR((0,en._b)({source:ed.e0.EDITOR_TOOLBAR}))}}]),...rt(eX,[{disabled:!(0,ec.Yh)(eM,"cooper-make-brand-templates"),recordingKey:"cooperMakeBrandTemplates",displayText:(0,u.t)("fullscreen.filename_view.mark_all_ready_for_publishing"),callback:()=>{H.Y5.triggerAction("cooper-make-brand-templates",{source:"toolbar"})}}]),...rt(!!tr,[(0,e_.rC)({dispatch:eR,fileKey:tr?.fileKey||"",templateName:tr?.name||""})]),...rt(ta,[(0,e_.we)({dispatch:eR,file:{key:eB.key,name:eB.name,folder_id:eB.folderId,team_id:eB.teamId,editor_type:eB.editorType,parent_org_id:eB.parentOrgId},fileNeedsMovingBeforePublish:ti,isPublished:!!tr,source:"filename-context-menu"})]),...rt(e$&&!eO&&!(tO&&tR)&&tL!==ei.nT.Whiteboard&&!eX&&!eq,[{disabled:"disabled"===tc,recordingKey:"publishVersion",displayText:(0,u.t)("fullscreen.filename_view.publish-styles-and-components"),callback:()=>{"show_upsell_modal"===tc?t5():"publish"===tc&&t2()}}]),...rt(e9,[{recordingKey:"viewFileAnalytics",displayText:(0,u.t)("fullscreen.filename_view.file_analytics"),callback:()=>{eR((0,w.to)({type:eE.e,data:{fileKey:eB.key,entrypoint:B.F.FileView}}))}}]),...rt(tO&&!eq&&!eZ&&!tl,[{disabled:!tS,recordingKey:"exportSelectedExportables",displayText:(0,u.t)("fullscreen.filename_view.export"),shortcut:eM.keyboardShortcuts&&(0,ec.c1)(eM.keyboardShortcuts,"export-selected-exportables"),callback:()=>{H.Y5.triggerAction("export-selected-exportables",{source:"toolbar"})}}]),...rt(eJ&&eB.canEdit,[{disabled:!tS,recordingKey:"copyToFigmaSlides",displayText:(0,u.t)("slides.general.copy_current_page_to_figma_slides"),callback:()=>{(0,P.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,eC.fx)(eB,eV).then(e=>{(0,eC.PF)(eR,e)})}}]),...rt(re.length>0,[{separator:!0,displayText:""},...re]),{separator:!0,displayText:""},...rt(!tR,t6),{separator:!0,displayText:""},...rt(t3,[(0,x.o)(td,tm)]),{separator:!0,displayText:""},...rt(e$&&!eO&&!tz,[{disabled:!eU||tB,recordingKey:"duplicate",displayText:tY,callback:()=>{eR(v.oB());let e=(0,Y.xp)(eB,eB.project,ex);if(e){eR(w.to({type:eS.DV,data:{team:e,resource:ea.vL.FILE,action:el.ZN.DUPLICATE_FILES,editorType:eB.editorType||X._Y.DESIGN,currentPlan:U.F.Plan.STARTER,upsellPlan:U.F.Plan.PRO,upsellSource:er.b.FILE_DUPLICATE}}));return}H.Y5.dispatchIfSaved(y.YW({file:eB,checkOssSalesExperiment:e3}))}}]),...rt(e$&&!tG,[{disabled:!tw,recordingKey:"rename",displayText:tR?(0,u.t)("fullscreen.filename_view.rename-branch"):(0,u.t)("fullscreen.filename_view.rename"),callback:()=>{eR(v.oB()),eR(S.vg())}}]),...rt(e$&&!eO&&tH,[{disabled:!tV,displayText:"Restore",callback:()=>{eR(v.oB()),eG&&eR(b.R({fileKeys:{[eB.key]:eG},userInitiated:!0}))}}]),...rt(e$&&!eO&&!!t$,[{disabled:!1,displayText:(0,u.t)("fullscreen.filename_view.go_to_project"),callback:()=>{if(t$){let e;e=(0,l.kc)().ps_benchmark?(0,G.cU)(t$.id,t$.orgId??null,t$.teamId,ex):(0,eo.EE)(t$.id,t$.orgId??null),eR(T.V3({url:e}))}}}]),...rt(e$&&!eO&&!tR,[{disabled:tI,sideText:ty?(0,m.zS)(tb,tI):void 0,rightJustifySideText:!0,recordingKey:"moveToProject","data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",displayText:(0,u.t)("fullscreen.filename_view.move_file"),callback:(0,eN.RG)(eR,eB,eH,tN())}]),...rt(!tp&&(tW||!tP)&&!tz,[{recordingKey:"favorite",displayText:tW?(0,u.t)("fullscreen.filename_view.unfavorite_label"):(0,u.t)("fullscreen.filename_view.favorite_label"),callback:()=>t4(!!tW)}]),...rt(e$&&!eO&&!tG&&!tz&&t_,[{disabled:!tC,recordingKey:"delete",displayText:tR?(0,u.t)("fullscreen.filename_view.archive-branch"):(0,u.t)("fullscreen.filename_view.move_to_trash"),callback:tR?()=>{eR(v.oB()),eG&&(eR(y.VK({fileKeys:{[eB.key]:eG},userInitiated:!0})),e("Branch Archived",{fileKey:eB.key,fileRepoId:eB.fileRepoId}))}:()=>{if(eR(v.oB()),!eB||!eG)return;let e=(0,k.up)(eB,eH);e&&(0,k.SA)(eB,e)?eB.repo?.canEdit&&!e.trashed_at&&eR(I.U1({filesByKey:{},reposById:{[e.id]:{repo:e,main_file:eG}}})):tC&&eR(I.U1({filesByKey:{[eB.key]:eG}}))}}]),...rt(e$&&!eO&&tG,[{disabled:!tV,displayText:(0,u.t)("fullscreen.filename_view.delete-branch"),callback:()=>{eR(v.oB()),eR(w.to({type:ep.e,data:{fileName:eB.name,onConfirm:()=>eR(I.kj({fileKeys:{[eB.key]:!0},userInitiated:!0}))}}))}}]),...rt(!!tq,[{separator:!0,displayText:""},{recordingKey:"resetFileThumbnail",displayText:(0,l.kc)().dse_library_pg_thumbnails?(0,u.t)("fullscreen.filename_view.restore_default_file_thumbnail"):(0,u.t)("fullscreen.filename_view.restore_default_thumbnail"),callback:()=>{eR(y.$m({file_key:eB.key,thumbnail_guid:null}))}}])];return a.createElement(C.fu,{name:ed.e0.EDITOR_FILENAME_DROPDOWN,properties:{...th,slideConversionDropdownEntrypoint:eJ}},a.createElement(eI.j,{items:rr,parentRect:r,showPoint:!ez,recordingKey:n,dispatch:eR,allowCodegenOptions:eF.editorType===ei.nT.Design,onSelectItem:e=>{e.callback&&e.callback("",{},eR)},activatePathOnMount:eD,lean:ez?"right":void 0,leanPadding:ek,shouldUsePortal:ez}))}},90148:(e,r,n)=>{n.d(r,{DF:()=>d,Qy:()=>m,RG:()=>u});var a=n(890882),i=n(272079),o=n(47795),s=n(23478),l=n(841924),c=n(73059);function d(e,r){return!!e&&!!r&&(e.creatorId===r.id&&(0,a.A)(e.createdAt).add(30,"s").isAfter((0,a.A)())||e.canEdit)}function u(e,r,n,a){return()=>{if(e(o.oB()),!r)return;let l=(0,s.up)(r,n);(0,i.h)({key:r.key,name:r.name,folder_id:r.folderId,team_id:r.teamId,editor_type:r.editorType,is_team_template:!!r.template&&!r.template.unpublishedAt,is_published_site:r.isPublishedSite,parent_org_id:r.parentOrgId},l,e,void 0,{},void 0,!1,a)}}function m(e){return!e.parentOrgId&&!e.teamId}l.M4.Query({fetch:async e=>{if(!e)return null;let r=await c.L.getFileCanRequestEdit({fileKey:e});return!!r.data.meta?.can_request_edit},key:"fileCanRequestEdit"})},74960:(e,r,n)=>{n.d(r,{$5:()=>H,Kw:()=>W,Xo:()=>Y,kU:()=>K,oH:()=>$});var a=n(411855),i=n(188507),o=n(217950),s=n(805014),l=n(777535),c=n(728722),d=n(977235),u=n(550479),m=n(299009),p=n(76265),h=n(617721),_=n(593587),g=n(4035),f=n(17607),E=n(140835),y=n(343373),b=n(190253),v=n(798361);n(176160);var T=n(849331),I=n(932254),S=n(15092),w=n(314540),A=n(183739),C=n(468260),N=n(354465),L=n(305216),O=n(231880),R=n(688656),P=n(273090),D=n(465424),k=n(738402),M=n(45485),F=n(766932),x=n(715354),U=n(904404),B=n(315154),V=n(467485),G=n(883949);let H="edit_button_upgrading_to_edit";var W=(e=>(e.EDIT_BUTTON_LOADING="editButtonLoading",e.EDIT_BUTTON="editButton",e.PRO_REQUEST_UPGRADE="proRequestUpgrade",e.ORG_REQUEST_UPGRADE="orgRequestUpgrade",e.REQUEST_EDIT_VIEW="requestEditView",e.PENDING_UPGRADE_REQUEST="pendingUpgradeRequest",e.VIEW_ONLY="viewOnly",e.PLAN_REQUEST_UPGRADE="planRequestUpgrade",e.PENDING_EDIT_ROLE_REQUEST="pendingEditRoleRequest",e))(W||{});function K(e){let r=e.file,n=(0,i.d4)(e=>e.loadingState),s=(0,i.d4)(e=>e.teams),m=(0,S.iZ)(),h=(0,a.useMemo)(()=>!!r&&(0,L.Pe)(r),[r]),E=(0,i.d4)(({openFile:e})=>e?.org?.name),y=(0,I.E)(),R=r.canEdit,D=(0,T.sj)(r),M=r.editorType===w._Y.SLIDES&&!!(0,d.oA)(r.org?.isSlidesDisabled),F=D||M,U=(0,k.ks)(),B=r.canAccessFullDevMode,V=(0,_.R)({preferOpenFilePlan:!0}),{handleUpgrade:G,getUpgradeEligibility:W,getPendingRequest:K,getUpgradePathway:Y,getIsUpgradeHandlerLoading:$}=(0,g.wH)(),j=(0,g.C1)(),z=(0,c.Rs)(A.OiG,{fileKey:r.key,orgId:r.parentOrgId}),q=(0,a.useCallback)(()=>{let e={file_key:r.key,link_access:r.linkAccess};r.parentOrgId?(e.account_type=r.currentPartialOrgUser?.designPaidStatus,e.parent_org_id=r.parentOrgId):r.teamId&&(e.team_id=r.teamId),(0,l.sx)("Edit Button Events",{edit_button_event:"click",...e})},[r]),Z=(0,v.BI)();if("loading"===z.status)return{type:"editButtonLoading"};if("loaded"===z.status){let a=r.org?.inviteWhitelist?.guestInviteSetting===O.Gv.REQUIRE_APPROVAL&&!!z.data.orgJoinRequest,i=z.data.file?.fileRoleRequests.find(e=>e.requesterUserId===m?.id);Z?.updateHasPendingEditRequest&&Z.updateHasPendingEditRequest(!!i);let l=a?(0,p.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:E||""}):i?(0,p.t)("fullscreen.toolbar.pending-edit-request-tooltip"):void 0,c=r.editorType===w._Y.DESIGN?r.currentPartialOrgUser?.designAccountTypeRequest:r.currentPartialOrgUser?.whiteboardAccountTypeRequest,d=r.editorType===w._Y.DESIGN?r.currentTeamUser?.designAccountTypeRequest:r.currentTeamUser?.whiteboardAccountTypeRequest,_=c?.status==="pending",g=d?.status==="pending",v=_?c:g?d:null,T=(0,C.V1)(z.data.file?.currentPrivilegedOrgUser??null),I=T?{...T,license_group_member:T.license_group_member?{license_group_id:T.license_group_member.licenseGroupId}:void 0}:null;if(V){if(null===r.editorType)return null;if($())return{type:"editButtonLoading"};let e=(0,b.wR)(r.editorType);switch(W(e,R)){case P.q.CAN_UPGRADE:if(a)return{type:"viewOnly",isRestrictedView:h,isDisabledView:F,pendingToolTipMessage:(0,p.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:E||""}),hasPendingRequest:a};let n=Y(e);return{type:"planRequestUpgrade",upgrade:G({afterUpgradeCallback:()=>{},licenseType:e,upgradeReason:x.i.EDIT_BUTTON,entryPoint:f.tc.ASK_TO_EDIT}),upgradePathway:n,fileKey:r.key,planType:r.parentOrgId?w.OL.ORG:w.OL.TEAM,planId:r.parentOrgId??r.teamId,licenseType:e};case P.q.CANNOT_UPGRADE:case P.q.UPGRADE_NOT_NEEDED:let s=K(e);if(s&&!j)return{type:"pendingUpgradeRequest",pendingUpgradeRequest:s,editorType:r.editorType,isRestrictedView:h,isDisabledView:D,pendingToolTipMessage:l,orgId:r.parentOrgId,hasPendingRequest:!0};if(z.data.file?.mustRequestEditorRoleToEdit)return m||(0,u.$D)(o.e.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,userId:m?.id??"",isDevMode:U};if(i)return{type:"pendingEditRoleRequest",hasProvisionalAccess:j};if(R)break;return{type:"viewOnly",isRestrictedView:h,isDisabledView:F,pendingToolTipMessage:l,hasPendingRequest:!1}}}else{if(!a&&(0,N.VP)(n,H))return{type:"editButtonLoading"};if(z.data.file?.canClickButtonToUpgradeAndEdit)return{type:"editButton",upgrade:async()=>{await y(r,H),q()}};if(z.data.file?.mustRequestAccountUpgradeToEdit){if(r.org)return null===r.editorType?null:U&&R&&!B?null:{type:"orgRequestUpgrade",editorType:r.editorType,fileKey:r.key,orgUser:I,orgId:r.parentOrgId,isDevMode:U};{let n=r.teamId&&s[r.teamId];if(n)return{type:"proRequestUpgrade",file:e.file,team:n,isDevMode:U}}}else if(z.data.file?.mustRequestEditorRoleToEdit)return m||(0,u.$D)(o.e.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,userId:m?.id??"",isDevMode:U};else if(z.data.file?.canEditCanvas||z.data.file?.canEditToUpgrade)return null;else if(v&&!U)return null===r.editorType?null:{type:"pendingUpgradeRequest",pendingUpgradeRequest:v,editorType:r.editorType,isRestrictedView:h,isDisabledView:D,pendingToolTipMessage:l,orgId:r.parentOrgId,hasPendingRequest:!0};return{type:"viewOnly",isRestrictedView:h,isDisabledView:F,pendingToolTipMessage:l,hasPendingRequest:!!(_||g||i||a)}}}return null}function Y({viewPermission:e,variant:r,recordingKey:n,hideViewOnlyText:i,disableAutoAppearingTooltips:o}){let s=(0,y.GS)();switch(e.type){case"editButtonLoading":return a.createElement("div",{className:G.Hg},a.createElement(h.$,{"aria-label":(0,p.t)("fullscreen.toolbar.edit-file-button-loading-aria-label"),disabled:!0,variant:r,recordingKey:n,width:s?"fill-parent":void 0},a.createElement("span",{className:G.yx},(0,p.t)("fullscreen.toolbar.edit-file-button")),a.createElement(m.kt,{className:G.yU})));case"editButton":{let i={"data-tooltip":(0,p.t)("fullscreen.toolbar.edit-file-button-hover-tooltip"),"data-tooltip-show-immediately":!0,"data-tooltip-type":R.Ib.TEXT,"data-tooltip-max-width":500,"data-tooltip-offset-y":5};return a.createElement(E.fu,{name:D.e0.FILE_EDIT_BUTTON},a.createElement("div",{"data-onboarding-key":"edit-button-onboarding"},a.createElement(h.$,{variant:r,onClick:e.upgrade,recordingKey:n,width:s?"fill-parent":void 0,...i},(0,p.t)("fullscreen.toolbar.edit-file-button"))))}case"requestEditView":return a.createElement(M.N,{fileKey:e.fileKey,userId:e.userId,isDevMode:e.isDevMode,buttonVariant:r,recordingKey:n});case"orgRequestUpgrade":return a.createElement(E.fu,{name:D.e0.FILE_ORG_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,orgId:e.orgId}},a.createElement(F.R7,{fig_file_key:e.fileKey,orgUser:e.orgUser,orgId:e.orgId,editorType:e.editorType,variant:r,recordingKey:n}));case"proRequestUpgrade":return a.createElement(E.fu,{name:D.e0.FILE_PRO_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,teamId:e.team.id}},a.createElement(F.sG,{file:e.file,team:e.team,entryPoint:f.tc.EDIT_FILE,variant:r,recordingKey:n}));case"pendingUpgradeRequest":{if("dltBannerViewPermission"===n&&!s)return a.createElement(V.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:i});let l={...e,variant:r,hideViewOnlyText:i,disableAutoAppearingTooltips:o};return a.createElement(B.K,{...l})}case"viewOnly":return a.createElement(V.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingToolTipMessage:e.pendingToolTipMessage,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:i});case"planRequestUpgrade":return a.createElement(F.In,{onClick:e.upgrade,variant:r,upgradePathway:e.upgradePathway,fileKey:e.fileKey,planType:e.planType,planId:e.planId,licenseType:e.licenseType});case"pendingEditRoleRequest":return a.createElement(U.m,{variant:r,hasProvisionalAccess:e.hasProvisionalAccess})}}function $(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode&&s.Ez5.uiState().isRecovery.getCopy())}},356557:(e,r,n)=>{n.d(r,{R:()=>a});let a=(0,n(875877).atom)(!1)},893632:(e,r,n)=>{n.d(r,{Cv:()=>ev});var a=n(411855),i=n(188507),o=n(154626),s=n(22562),l=n(805014),c=n(629019),d=n.n(c),u=n(126049),m=n(991458),p=n(281935),h=n(163773),_=n(254773),g=n(336427),f=n(841962),E=n(875877),y=n(666308),b=n(40211),v=n(705158),T=n(36748),I=n(183949),S=n(576467),w=n(621847),A=n(250392),C=n(663844),N=n(132939),L=n(265851),O=n(76265),R=n(858265),P=n(620532),D=n(47795),k=n(719971),M=n(225371),F=n(241162),x=n(581713),U=n(815153),B=n(343373),V=n(440475),G=n(631016),H=n(901152),W=n(663194),K=n(857012),Y=n(176160),$=n(58799),j=n(608520),z=n(314540),q=n(940795),Z=n(952122),X=n(477e3),J=n(662154),Q=n(937166),ee=n(688656),et=n(497657),er=n(837597),en=n(726507),ea=n(201161),ei=n(464960),eo=n(929717),es=n(761650),el=n(206121),ec=n(965490),ed=n(401797),eu=n(712939),em=n(33674),ep=n(90245),eh=n(488527),e_=n(815993),eg=n(639685),ef=n(630834);let eE="multiplayer-nickname-dropdown",ey=(0,H.ck)(),eb=(0,m.jz)(eh.rJv);function ev(e){let r=(0,Y.q5)(),{user:n,multiplayer:o,dropdownShown:s}=e,c=(0,i.wA)(),d=(0,i.d4)(e=>"prototype"===e.selectedView.view),u=(0,$.dR)(),m=(0,$.Ww)(),p=(0,b.B4)(),h=a.useCallback(e=>{!function(e,r,n,a,i,o,s){if(!i)return;let c=e.sessionID,d=c===r,u=o&&o.sessionID===r;if(d&&u)s();else if(a){let r=i.observingSessionID===c||i.sessionID===c?-1:e.sessionID,a=-1!==i.observingSessionID,o=i.observingSessionID!==c&&i.sessionID!==c;a&&n((0,Z._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:i.observingSessionID,multiplayerSessionID:i.sessionID}})),o&&(n((0,Z._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:c,multiplayerSessionID:i.sessionID}})),n(F.b({aware_of_observation_mode:!0}))),n(M.J4({...i,observingSessionID:r}))}else l.h3O.observeUser(c),i.observingSessionID!==c&&i.sessionID!==c&&n(F.b({aware_of_observation_mode:!0}))}(e,m?.sessionID,c,d,o,u,p)},[m?.sessionID,c,d,o,u,p]),_=d?null:r;return n?a.createElement(a.Fragment,null,!ey&&_&&n&&a.createElement(ec.k,{fileKey:_.key}),a.createElement(eT,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h})):a.createElement(a.Fragment,null,!ey&&_&&n&&a.createElement(ec.k,{fileKey:_.key}),a.createElement(eN,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h}))}function eT(e){let{multiplayer:r,user:n,onUserClick:i,dropdownShown:o,editingFile:s}=e,l=(0,a.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,a.useEffect)(()=>{},[r,n]);let c=(0,U.DG)(s?.key||"").enabled;return a.createElement("div",{className:e_.Wh},a.createElement(ep.sK,null),l&&a.createElement(eC,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:i}),s&&a.createElement(es.w,{user:n,editingFile:s,isFileInWorkshop:c}))}function eI(e){let{query:r,usersToSearch:n}=e,[i,o]=a.useState(n),s=a.useRef(!1),l=(0,_.am)(),c=a.useRef(!1),d=c.current,m=a.useCallback(async e=>{if(""===e)o(n);else{s.current=!1;let r=await (0,em.n)(e,n);s.current||(o(r.map(e=>e.item)),d||(l("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),c.current=!0))}},[d,l,n]),p=(0,u.A)(m,200);return a.useEffect(()=>(p(r),()=>{p.cancel(),s.current=!0}),[p,r,n]),{searchResults:i}}let eS=(0,a.forwardRef)(function(e,r){let{query:n,setQuery:i,shouldShowFileViewHistory:l}=e,c=(0,g.ZC)(n),u=a.useRef(null),[m,p]=a.useState(!1),h=(0,B.GS)();return(a.useEffect(()=>{u.current&&n!==c&&(u.current.scrollWidth>u.current.clientWidth?p(!0):p(!1))},[c,n]),h)?a.createElement("div",{ref:r,className:e_.MT},a.createElement("div",{className:e_.qc},a.createElement(N.U,{svg:eg.A,"aria-label":(0,O.t)("fullscreen.accessibility.search_icon")},a.createElement(o.h,null))),a.createElement(A.L,{ref:u,placeholder:(0,O.t)("collaboration.spotlight.menu.search.placeholder"),className:d()({[e_.Rt]:!0,[e_.ro]:m}),value:n,onClick:x.dG,onChange:e=>{i(e.target.value),(0,x.dG)(e)},onKeyDown:e=>{"Escape"===e.key&&i(""),(0,x.dG)(e)},spellCheck:!1,autoFocus:!0}),l?a.createElement("div",{className:e_.WY},!!n&&a.createElement("button",{className:e_.Vw,onClick:e=>{e.stopPropagation(),i("")},"aria-label":(0,O.t)("search.sidebar_search_clear")},a.createElement("div",{className:e_.i3},a.createElement(N.U,{svg:ef.default},a.createElement(s.A,null))))):!!n&&a.createElement("button",{className:e_.hC,onClick:e=>{e.stopPropagation(),i("")},"aria-label":(0,O.t)("search.sidebar_search_clear")},a.createElement("div",{className:e_.i3},a.createElement(N.U,{svg:ef.default},a.createElement(s.A,null))))):null});function ew({targetRect:e,arrowOffsetFromRectLeft:r,currentUser:n,peopleList:o,previousViewerList:s,previousViewerListRenderer:l,userListRenderer:c,onUserClick:u,onKeyDown:m,shouldDisableSpotlight:p,dropdownRef:h,shouldShowFileViewHistory:_}){let g=(0,B.GS)(),f=(0,a.useRef)(null),y=(0,a.useRef)(null),[I,A]=(0,E.useAtom)(v.ah),[N,P]=(0,E.useAtom)(v.Dv),[k,M]=a.useState(g?310:220),F=(0,a.useRef)(null),[x,U]=a.useState(0),V=(0,i.wA)(),G=(0,T.Av)(),H=Math.min(window.innerHeight-G-22,g?465:450);a.useLayoutEffect(()=>{f.current&&y.current&&M(H-f.current.offsetHeight-y.current.offsetHeight-16*x)},[g,H,x]);let W=(0,a.useCallback)(()=>{p||A(!0)},[A,p]),{start:K,cancel:Y}=(0,j.Z)(W),z=(0,a.useCallback)(()=>{Y(),A(!1)},[Y,A]),q=(0,b.Vi)(),Z=(0,a.useCallback)(()=>{p||(q(),z(),P(!0),V(D.oB()))},[z,V,P,q,p]),X=(0,b.B4)(),J=(0,a.useCallback)(()=>{X(),V(D.oB())},[V,X]),Q=(0,$.dR)(),ee=Q&&n.sessionID===Q.sessionID?a.createElement(S.pz,{onClick:J,className:e_.BK},(0,O.tx)("collaboration.spotlight.button.stop")):a.createElement(w.$$,{onClick:Z,className:d()(e_.BK,p&&e_.r9),onMouseOver:()=>{K(300)},onMouseLeave:z,disabled:p},(0,O.tx)("collaboration.spotlight.tooltip.spotlight_me")),et=_&&l&&s&&s.length>0,en=g&&o.length+(et?s.length:0)>8,[ea,ei]=a.useState(""),{searchResults:es}=eI({query:ea,usersToSearch:o}),{searchResults:el}=eI({query:ea,usersToSearch:(0,a.useMemo)(()=>_&&s?s:[],[s,_])}),ed=a.createElement(a.Fragment,null,a.createElement("div",{ref:f,className:e_.az},a.createElement(er.Q,{user:n,isOverflow:!0,isCurrentUserHeaderRow:g}),a.createElement("div",{className:e_.Vr},ee,a.createElement(ec.L,null))),o.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:e_.me}),a.createElement("div",{className:e_.dn,ref:g?y:void 0},a.createElement(eS,{ref:g?void 0:y,query:ea,setQuery:ei,shouldShowFileViewHistory:_})),a.createElement(C.P,{width:eb-16,maxHeight:k,scrollBarAlways:!0,disableScrollbarBorder:!0},a.createElement(R.W,{autofocus:!0,label:(0,O.t)("fullscreen.toolbar.multiplayer.all_users"),renderer:c,onSelect:e=>{e.length&&(u(e[0]),V(D.oB()))},initiallyNotSelected:!0,customClassName:e_.cu},es)))),eu=es.length>0&&el.length>0,em=es.length>0||el.length>0,ep=0===es.length&&0===el.length,eh=a.createElement("div",{className:e_.zW},a.createElement("div",{className:e_.me}));(0,a.useEffect)(()=>{_&&U((en?1:0)+(""!==ea&&ep?1:0)+(em?1:0))},[en,ea,ep,em,_]);let eg=a.createElement(a.Fragment,null,a.createElement("div",{ref:f,className:e_.Km},a.createElement(er.Q,{user:n,isOverflow:!0,isCurrentUserHeaderRow:g}),a.createElement("div",{className:e_.Vr},ee,a.createElement(ec.L,null))),en&&a.createElement(a.Fragment,null,eh,a.createElement("div",{className:e_.zK,ref:g?y:void 0},a.createElement(eS,{ref:g?void 0:y,query:ea,setQuery:ei}))),""!==ea&&ep&&a.createElement(a.Fragment,null,eh,a.createElement("div",{className:`${e_.hg} ${L.s.mb8.$}`},(0,O.tx)("fullscreen.toolbar.multiplayer.no_user_found"))),em&&a.createElement(a.Fragment,null,eh,a.createElement(C.P,{width:eb-16,maxHeight:k,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:F},eu&&a.createElement("div",{className:e_.hg},(0,O.tx)("fullscreen.toolbar.multiplayer.currently_viewing")),es.length>0&&a.createElement(a.Fragment,null,a.createElement(R.W,{label:(0,O.t)("fullscreen.toolbar.multiplayer.currently_viewing_users"),renderer:c,onSelect:e=>{e.length&&(u(e[0]),V(D.oB()))},initiallyNotSelected:!0,customClassName:e_.aK},es)),l&&el.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:e_.hg},(0,O.tx)("fullscreen.toolbar.multiplayer.previously_viewed")),a.createElement(R.W,{label:(0,O.t)("fullscreen.toolbar.multiplayer.previously_viewed_users"),renderer:l,initiallyNotSelected:!0,customClassName:e_.aK},el)),g&&a.createElement("div",{className:L.s.pt12.$}))));return a.createElement(eo.Cf,{className:d()(e_.qN,{[e_.QD]:_}),removeUI3BorderPadding:g,targetRect:e,maxHeight:H,maxWidth:eb,lean:"center",arrowOffsetFromRectLeft:r,onKeyDown:m,showPoint:!g,disableDropdownScrollContainer:!0,propagateCloseClick:!0,contentRef:h},_?eg:ed)}let eA="multiplayer-tools-dropdown",eC=a.memo(function(e){let{multiplayer:r,dropdownShown:n,currentUser:o,onUserClick:s}=e,c=(0,a.useRef)(null),u=(0,a.useRef)(null),m=(0,a.useRef)(null),g=(0,a.useRef)(null),T=(0,a.useRef)(null),S=(0,B.GS)(),w=(0,K.wF)(),A=(0,V.k)(),C=(0,I.WN)(),N=(0,q.tJ)().unwrapOr(null),L=N&&N.key.type===z.OL.TEAM?N.key.parentId:null,R=(0,W.T)(L),M=(0,i.wA)(),[F,U]=a.useState(!1),H=n?.type===eA,Y=(0,a.useMemo)(()=>r.allUsers.filter(e=>e.sessionID!==o?.sessionID),[r.allUsers,o]),j=(0,P.e)(),[Z,J]=(0,E.useAtom)(v.ah);Z&&!H&&J(!1);let Q=c.current&&u.current?c.current.clientWidth-u.current.clientWidth:void 0,en=(0,K.Wq)(Q),{users:eo,overflowUsers:es}=(0,K.uC)(Y,null,!1,en),el=(0,a.useMemo)(()=>{let e=[...eo,...es];return R?e.filter(e=>e&&e.userID!==o.userID):e},[es,eo,o,R]),ec=(0,a.useMemo)(()=>w?.filter(e=>!el.some(r=>e.userID===r.userID)&&e.userID!==o.userID),[el,w,o]),eu=(0,_.am)(),em=(0,a.useCallback)(e=>{if((0,x.dG)(e),!u.current)return;m.current=u.current.getBoundingClientRect();let r=n?.type===eA;M(k.gR({type:eA})),r||eu("Multiplayer Tools Opened",{currentUserSessionID:o.sessionID,otherUserSessionsCount:el.length})},[o.sessionID,M,n?.type,el.length,eu]),ep=(0,$.dR)(),eh=ep&&ep.sessionID!==o.sessionID?ep:null,eg=(0,X.q)(),ef=(0,b.tu)(),eE=(0,b.oJ)(),ey=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:n}){let i=(0,y.Gc)(()=>{let r=`/files${eg}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),o=[],s=r.sessionNominatedByCurrentUser===e.sessionID;return r.presenterSessionID===e.sessionID||j||(s?o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&eE(e.sessionID,r)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&ef(e.sessionID,r)},key:"ask-to-spotlight"})),o.push({text:(0,O.tx)("avatar.tooltip.view_profile"),onClick:e=>{i(e)},key:"view-profile"}),a.createElement(er.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:n,secondaryActions:o})}}),[r,eg,ef,eE,j]),eb=R?{label:e=>e.name,id:e=>String(e.userID),renderDisplay(e,{hasCursor:r}){let n=(0,y.Gc)(()=>{let r=`/files${eg}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),i=[{text:(0,O.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}];return a.createElement(er.Q,{key:e.userID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:i})}}:void 0,ev=H||F,eT=el.length+1,eI=a.createElement(ed.s,{featured:eh,quickAccess:eo,maxVisibleUsers:(S?K.A8:K.Q2)-1,onUserClick:s,totalUserCount:eT}),eS=a.createElement(et.x,null,a.createElement("button",{id:"multiplayer-toolbar-container","aria-label":(0,O.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"aria-expanded":null!=m.current&&n?.type===eA,"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,O.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":u.current&&T.current?u.current.offsetWidth/2-T.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":u.current&&c.current?c.current.clientHeight/2-u.current.clientHeight/2:0,className:d()({[e_.XE]:!0,[e_.yx]:S&&es.length>0,[e_.Ge]:S&&0===es.length,[e_.wH]:H,[e_.yo]:!H&&F}),ref:u,onMouseOverCapture:e=>{U(!0),(0,x.dG)(e)},onMouseDownCapture:e=>{A?C(l.rcl.FOLLOW_PRESENTER):em(e)},onMouseLeave:()=>{U(!1)},onKeyDown:e=>{(0,G.hx)({e,onClickHandler:e=>{A?C(l.rcl.FOLLOW_PRESENTER):em(e)},onEscapeHandler:()=>{u?.current?.blur()}})},onClick:x.dG},a.createElement("span",{key:o.sessionID,ref:g,className:e_.r9},a.createElement(er.Q,{user:o,key:o.sessionID,isOverflow:!1})),a.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:e_.rR},es.length>0&&a.createElement("span",{className:d()({[e_.zk]:!0,[e_.r9]:!0,[e_.wH]:H,[e_.yo]:!H&&F}),style:{minWidth:eT<10?8:eT<100?15:22}},`${eT}`),a.createElement(ei.o,{divRef:T,disableHoverAnimation:S,className:d()({[e_.ai]:!0,[e_.r9]:!0,[e_.wH]:H,[e_.yo]:!H&&F}),showingDropdown:ev})))),eC=(0,a.useCallback)(()=>{M(D.oB()),c.current?.focus()},[M]),[eN,eL]=a.useState(null);(0,a.useEffect)(()=>{eN&&eN.focus()},[eN]);let eO=R&&(0,f.kc)().file_view_history_callout&&!!ec?.length;return a.createElement("span",{className:e_.EI,ref:c,"data-onboarding-key":"multiplayer-users-container"},S?a.createElement(a.Fragment,null,eS,eI):a.createElement(a.Fragment,null,eI,eS),n?.type===eA&&T.current&&a.createElement(ew,{targetRect:T.current.getBoundingClientRect(),arrowOffsetFromRectLeft:T.current?T.current.offsetWidth/2+1:0,currentUser:o,onUserClick:s,userListRenderer:ey,peopleList:el,previousViewerList:ec,previousViewerListRenderer:eb,onKeyDown:e=>{"Escape"===e.key&&eC()},shouldDisableSpotlight:j,dropdownRef:eL,shouldShowFileViewHistory:R}),eO&&a.createElement(ea.NM,{multiplayerDropdownOpen:!!n}))});function eN(e){let{multiplayer:r,user:n,onUserClick:i,dropdownShown:o,editingFile:s}=e,l=(0,a.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,a.useEffect)(()=>{},[r,n]);let c=(0,U.DG)(s?.key||"").enabled;return a.createElement("div",{className:e_.Wh},a.createElement(ep.sK,null),a.createElement(eO,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:i,editingFile:s}),s&&a.createElement(es.w,{user:n,editingFile:s,isFileInWorkshop:c}))}let eL="multiplayer-users-dropdown";function eO(e){let{editingFile:r,multiplayer:n,dropdownShown:o,currentUser:s,onUserClick:l}=e,c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,a.useRef)(null),m=(0,i.wA)(),_=(0,a.useCallback)(e=>{(0,x.dG)(e),c.current&&(d.current=c.current.getBoundingClientRect(),m(k.gR({type:eL})))},[m]),g=o?.type,f=(0,a.useMemo)(()=>g===eE&&u.current?u.current.getBoundingClientRect():null,[g]),E=(0,el.C$)(),v=(0,X.q)(),T=(0,Q.Lk)(),I=r?.key??null,{usersNotInCall:S}=(0,J.W5)(I,!0),w=n.allUsers,A=(0,K.D4)(),C=(0,i.d4)(e=>I&&e.voice.activeCall[I])||!1,{users:N,overflowUsers:L}=(0,K.uC)(T?S:w,s,C,A),P=a.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),M=(0,b.tu)(),F=(0,b.oJ)(),U=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:r}){let i=(0,y.Gc)(()=>{let r=`/files${v}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),o=[],s=n.sessionNominatedByCurrentUser===e.sessionID;return n.presenterSessionID!==e.sessionID&&(s?o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&F(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&M(e.sessionID,n)},key:"ask-to-spotlight"})),o.push({text:(0,O.tx)("avatar.tooltip.view_profile"),onClick:e=>{i(e)},key:"view-profile"}),a.createElement(er.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:o})}}),[n,v,M,F]);return a.createElement("span",{className:e_.VV,"data-onboarding-key":"multiplayer-avatars"},N.map((e,r)=>{let n=a.createElement(er.Q,{user:e,onboardingKey:P(r),key:e.sessionID,isOverflow:!1,onUserClick:l});return e.sessionID===s?.sessionID?a.createElement("span",{key:e.sessionID,ref:u},n):n}),L.length>0&&a.createElement(a.Fragment,null,a.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,O.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=d.current&&o?.type===eL,className:e_.O5,ref:c,onMouseDown:_,onKeyDown:e=>{(0,G.hx)({e,onClickHandler:e=>{_(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onClick:x.dG},a.createElement(en.f,{className:e_.zb,text:`${L.length}`})),o?.type===eL&&c.current&&a.createElement(el.WM,{targetRect:c.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&m(D.oB())}},a.createElement(R.W,{autofocus:!0,label:"More multiplayer users",renderer:U,onSelect:e=>{e.length&&(l(e[0]),m(D.oB()))},customClassName:e_.cu},L))),o?.type===eE&&f&&a.createElement(eo.Cf,{targetRect:f,maxHeight:E,className:e_.a1,propagateCloseClick:!0},a.createElement(eu.M,null)))}},685389:(e,r,n)=>{n.d(r,{ec:()=>S});var a=n(805014),i=(n(76265),n(666249)),o=n(777829),s=n(509343),l=n(58590),c=n(779099),d=n(591844),u=n(298679),m=n(605492),p=(e=>(e[e.TOOL=0]="TOOL",e[e.ACTION=1]="ACTION",e[e.CUSTOM_ACTION=2]="CUSTOM_ACTION",e[e.ACTION_SUBMENU=3]="ACTION_SUBMENU",e[e.FLYOUT=4]="FLYOUT",e[e.LABEL=5]="LABEL",e[e.TEXT_BUTTON=6]="TEXT_BUTTON",e))(p||{});let h=[a.m1T.DESIGN_LAYOUT,a.m1T.WHITEBOARD_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.COOPER_CONSTRAINED,a.m1T.RASTER,a.m1T.GRADIENT,a.m1T.TEXT,a.m1T.COMMENTS],_=h.concat([a.m1T.VECTOR]),g=h.concat([a.m1T.VECTOR,a.m1T.PLACE_IMAGE]),f=[a.m1T.VECTOR],E=[a.m1T.PLACE_IMAGE],y=[a.m1T.PREVIEW,a.m1T.BRANCHING,a.m1T.COMPARE_CHANGES,a.m1T.HISTORY],b=[a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.RASTER,a.m1T.GRADIENT,a.m1T.PREVIEW,a.m1T.COMMENTS,a.m1T.BRANCHING,a.m1T.HISTORY,a.m1T.COMPARE_CHANGES],v={type:4,name:"move-flyout",children:[{action:"set-tool-default",property:"currentTool",propertyValue:a.NLJ.SELECT,recordingKey:"toolDefault"},{action:"set-tool-scale",property:"currentTool",propertyValue:a.NLJ.SCALE,recordingKey:"toolScale"}],editModes:g,recordingKey:"moveFlyout"},T={type:4,name:"shape-flyout",editModes:h,recordingKey:"shapeFlyout",children:[{action:"set-tool-rectangle",property:"currentTool",propertyValue:a.NLJ.SHAPE_RECTANGLE,recordingKey:"toolShapeRectangle"},{action:"set-tool-line",property:"currentTool",propertyValue:a.NLJ.SHAPE_LINE,recordingKey:"toolShapeLine"},{action:"set-tool-arrow",property:"currentTool",propertyValue:a.NLJ.SHAPE_ARROW,recordingKey:"toolShapeArrow"},{action:"set-tool-ellipse",property:"currentTool",propertyValue:a.NLJ.SHAPE_ELLIPSE,recordingKey:"toolShapeEllipse"},{action:"set-tool-regular-polygon",property:"currentTool",propertyValue:a.NLJ.SHAPE_REGULAR_POLYGON,recordingKey:"toolShapePolygon"},{action:"set-tool-star",property:"currentTool",propertyValue:a.NLJ.SHAPE_STAR,recordingKey:"toolShapeStar"},{action:"place",recordingKey:"toolPlaceImage",onboardingKey:"tool-place-image"}]},I={type:4,name:"comments-flyout",editModes:h,recordingKey:"commentsFlyout",children:[{action:"set-tool-comments",property:"currentTool",propertyValue:a.NLJ.COMMENTS,recordingKey:"toolComments"},{action:"set-tool-annotate",property:"currentTool",propertyValue:a.NLJ.ANNOTATE,recordingKey:"toolAnnotate"},{action:"set-tool-measure",property:"currentTool",propertyValue:a.NLJ.MEASURE,recordingKey:"toolMeasure"}]},S={type:0,tool:a.NLJ.COMMENTS,action:"set-tool-comments",editModes:h.concat([a.m1T.PREVIEW]),nonEditorsAllowed:!0,onboardingKey:"comment",recordingKey:"toolComment"},w={type:1,action:"component-insert",editModes:h,recordingKey:"toolResourceInsert",onboardingKey:"insert",isActive:l.kg};[{type:0,tool:a.NLJ.SELECT,action:"set-tool-default",nonEditorsAllowed:!0,editModes:y,recordingKey:"toolDefault"},v,{type:4,name:"region-flyout",editModes:h,onboardingKey:"frame",recordingKey:"regionFlyout",children:[{action:"set-tool-frame",property:"currentTool",propertyValue:a.NLJ.FRAME,recordingKey:"toolFrame"},{action:"set-tool-section",property:"currentTool",propertyValue:a.NLJ.SECTION,recordingKey:"toolSection"},{action:"set-tool-slice",property:"currentTool",propertyValue:a.NLJ.SLICE,recordingKey:"toolSlice"}]},T,{type:4,name:"pen-flyout",editModes:_,recordingKey:"penFlyout",onboardingKey:"pen",children:[{action:"set-tool-pen",property:"currentTool",propertyValue:a.NLJ.VECTOR_PEN,recordingKey:"toolPen"},{action:"set-tool-pencil",property:"currentTool",propertyValue:a.NLJ.VECTOR_PENCIL,recordingKey:"toolPencil"}]},{type:0,tool:a.NLJ.VECTOR_BEND,action:"set-tool-bend",editModes:f,recordingKey:"toolBend"},{type:0,tool:a.NLJ.VECTOR_PAINT_BUCKET,action:"set-tool-paint-bucket",editModes:f,recordingKey:"toolPaintBucket"},{type:0,tool:a.NLJ.VECTOR_VAR_WIDTH_POINT,action:"set-tool-var-width-point",editModes:f,recordingKey:"toolVarWidthPoint",featureFlags:["ce_il_var_width_points"],nonEditorsAllowed:!1,newFileDisabled:!1,onlyShowInReadOnly:!1},{type:0,tool:a.NLJ.VECTOR_CUT,action:"set-tool-cut",editModes:f,recordingKey:"toolCut",featureFlags:["ce_il_vem_cut_tool"]},{type:0,tool:a.NLJ.TYPE,action:"set-tool-type",editModes:h,recordingKey:"toolType",onboardingKey:"tool-type-onboarding"},w,{type:0,tool:a.NLJ.HAND,action:"set-tool-hand",nonEditorsAllowed:!0,loggedOutAllowed:!0,editModes:b,recordingKey:"toolHand"},S,{type:5,label:"toolbar-place-image",editModes:E,recordingKey:"toolPlaceOneImage"},{type:6,action:"place-all-images",editModes:E,recordingKey:"toolPlaceAllImages"},{type:6,action:"discard-all-images",editModes:E,recordingKey:"toolDiscardAllImages"},{type:6,action:"leave-edit-mode",editModes:f,tooltip:"leave-vector-edit-mode",recordingKey:"toolLeaveVectorEditMode"}].map(e=>e===S?I:e);let A={type:1,action:"focus-mode-component-set-toggle",editModes:[a.m1T.DESIGN_LAYOUT],recordingKey:"focusModeComponentSetToggle",isActive:()=>a.Ez5.uiState().focusModeState.getCopy()===a.xc1.COMPONENT_SET,onboardingKey:"focus-mode-component-set-toggle"},C=[{type:1,action:"multi-edit-text",editModes:h,recordingKey:"multiEditText",onboardingKey:"multi-edit-text"},{type:1,action:"select-matching",editModes:[a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT],recordingKey:"selectMatching"},A];function N(e){return(r,n,a)=>!!n?.[e]}var L=(e=>(e.STANDARD_BUTTON="STANDARD_BUTTON",e.DIALOG_TRIGGER_BUTTON="DIALOG_TRIGGER_BUTTON",e.DROPDOWN_TRIGGER_BUTTON="DROPDOWN_TRIGGER_BUTTON",e))(L||{});a.m1T.DESIGN_LAYOUT,a.m1T.DESIGN_LAYOUT,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.COOPER_CONSTRAINED,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,[...h,a.m1T.DEV_HANDOFF],[...h,a.m1T.DEV_HANDOFF],a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.SLIDE_LAYOUT,N(a.YnC.SIZE),N(a.YnC.EXPORTS),N(a.YnC.EFFECTS),N(a.YnC.LAYER),N(a.YnC.VISIBLE),N(a.YnC.NAME),N(a.YnC.FILL),N(a.YnC.STROKE),N(a.YnC.TEXT),N(a.YnC.TEXT_STYLE),N(a.YnC.PROTOTYPE_INTERACTIONS),N(a.YnC.OVERLAY),o.P,[...C,(o.P,()=>a.Ez5.editorState().selectionIsMask.getCopy()===a.F84.ON),(a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.SLIDE_LAYOUT),([...h,a.m1T.DEV_HANDOFF,a.m1T.PREVIEW],(e,r,n)=>n?.canEdit||(0,i.tn)({openFile:n})),([...h,a.m1T.DEV_HANDOFF,a.m1T.PREVIEW],()=>!0)],a.NLJ.SELECT,[...h,a.m1T.PREVIEW,a.m1T.HISTORY],a.NLJ.HAND,[...h,a.m1T.PREVIEW,a.m1T.HISTORY],d.N,a.NLJ.SELECT,a.m1T.DEV_HANDOFF,a.m1T.DEV_HANDOFF_HISTORY,m.A,a.NLJ.MEASURE,a.m1T.DEV_HANDOFF,a.NLJ.ANNOTATE,a.m1T.DEV_HANDOFF,a.NLJ.COMMENTS,a.m1T.DEV_HANDOFF,h.concat([a.m1T.DEV_HANDOFF,a.m1T.PREVIEW,a.m1T.MAGIC_LINK]),u.Iv,u.Iv},760358:(e,r,n)=>{n.d(r,{p:()=>q});var a=n(411855),i=n(188507),o=n(32257),s=n(691294),l=n(747579),c=n(805014),d=n(629019),u=n.n(d),m=n(252829),p=n(254773),h=n(108982),_=n(841962),g=n(875877),f=n(666308),E=n(563192),y=n(586053),b=n(918091),v=n(505427),T=n(76265),I=n(542651),S=n(666249),w=n(47795),A=n(73041),C=n(15721),N=n(343373),L=n(72411),O=n(366172),R=n(938983),P=n(509343),D=n(999538),k=n(125682),M=n(797187),F=n(914077),x=n(688656),U=n(779099),B=n(591844),V=n(738402),G=n(413100),H=n(464960),W=n(715383),K=n(689954),Y=n(948927),$=n(496991);let j="zoom-input-dropdown";function z({targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o}){let d=(0,p.am)();a.useEffect(()=>{d("View Menu Opened")},[d]);let u=(0,A.E3)(),m="ui3"===(0,l.DP)().version,f=(0,M.J2)((0,R.d)().activeCanvasCurrentZoom),E=(0,M.J2)((0,P.UK)().activeCanvasPixelPreview),b=(0,M.J2)((0,R.d)().activeCanvasRetinaMode),v=(0,h.R)(e=>e.mirror.appModel.keyboardShortcuts),T=(0,i.d4)(e=>!e.mirror.appModel.isReadOnly),w=(0,i.d4)(e=>!!e.user),C=(0,i.d4)(e=>(0,V.$A)(e.selectedView)),N=(0,S._I)(),[k,x]=(0,g.useAtom)(I.U5),{Sprig:B}=(0,y.A)(),H=e=>(0,i.d4)(r=>!!r.mirror.appModel[e]),W=(0,G.XR)(),K=(0,M.J2)(c.Ez5.uiState().filterAnnotationCategoryId),j=u===F.nT.Design,z=u===F.nT.Slides,Z="design"===(0,F.oD)(u),X=(0,i.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible),J=(0,M.J2)(c.Ez5.editorPreferences().showPropertyLabels),Q=(0,M.J2)(c.Ez5.editorPreferences().showFrameGrids),ee=(0,M.J2)((0,R.d)().showFrameGridsViewOnly),et=!(0,Y.Td)(),er=et?"showFrameGrids":"showFrameGridsViewOnly",en=(0,M.J2)((0,_.kc)().figjam_snap_to_dot_grid_reset?(0,P.UK)().snapToDotGridStagingReset:(0,P.UK)().snapToDotGrid),ea=(0,M.J2)((0,P.UK)().snapToPixelGrid),ei=Z?ea:en,eo=(0,M.J2)((0,P.UK)().showDotGrid),es=(0,M.J2)((0,P.UK)().renderGrid),el=Z?es:eo,ec=Z?"renderGrid":"showDotGrid",ed=[{type:"ZOOM_IN",shortcut:(0,U.c1)(v,"zoom-in"),recordingKey:"zoomIn",disabled:!(0,D.Zr)("zoom-in")},{type:"ZOOM_OUT",shortcut:(0,U.c1)(v,"zoom-out"),recordingKey:"zoomOut",disabled:!(0,D.Zr)("zoom-out")},{type:"ZOOM_TO_FIT",shortcut:(0,U.c1)(v,"zoom-to-fit"),recordingKey:"zoomToFit"},{type:"ZOOM_TO_50",recordingKey:"zoomTo50"},{type:"ZOOM_TO_100",shortcut:(0,U.c1)(v,"zoom-reset"),recordingKey:"zoomTo100"},{type:"ZOOM_TO_200",recordingKey:"zoomTo200"},{type:"separator"},{type:"PIXEL_PREVIEW",isChildChecked:E,recordingKey:"activeCanvasPixelPreview",hidden:!j&&!C,disabled:(0,D.Zr)("activeCanvasPixelPreview"),children:[{type:"PIXEL_PREVIEW_DISABLED",shortcut:(0,U.c1)(v,"toggle-pixel-preview"),isChecked:!E,recordingKey:"disabled"},{type:"PIXEL_PREVIEW_1X",isChecked:E&&!b,shortcut:b?void 0:(0,U.c1)(v,"toggle-pixel-preview"),recordingKey:"1x"},{type:"PIXEL_PREVIEW_2X",isChecked:E&&b,shortcut:b?(0,U.c1)(v,"toggle-pixel-preview"):void 0,recordingKey:"2x"}]},{type:Z?"PIXEL_GRID":"DOT_GRID",shortcut:(0,U.c1)(v,Z?"toggle-grid":"toggle-show-dot-grid"),recordingKey:ec,isChecked:el,disabled:!(0,D.Zr)("toggle-grid")},{type:Z?"SNAP_TO_PIXEL_GRID":"SNAP_TO_DOT_GRID",shortcut:(0,U.c1)(v,Z||z?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),recordingKey:j?"snapToPixelGrid":"snapToDotGrid",isChecked:ei,disabled:!(0,D.Zr)(j||z?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),hidden:C},{type:"LAYOUT_GRIDS",shortcut:(0,U.c1)(v,"toggle-shown-layout-grids"),recordingKey:er,hidden:!Z||!w,isChecked:et?Q:ee,disabled:(0,D.Zr)(er)},{type:"RULERS",shortcut:(0,U.c1)(v,"toggle-rulers"),recordingKey:"renderRulers",hidden:!Z,isChecked:(0,M.J2)((0,P.UK)().renderRulers),disabled:(0,D.Zr)("renderRulers")},{type:"OUTLINES_MENU",recordingKey:"outlinesMenu",hidden:!Z||!w,disabled:(0,D.Zr)("showOutlines"),children:[{type:"OUTLINES",shortcut:(0,U.c1)(v,"toggle-outlines"),isChecked:(0,M.J2)((0,R.d)().showOutlines),recordingKey:"showOutlines"},{type:"separator"},{type:"OUTLINES_HIDDEN_LAYERS",isChecked:(0,M.J2)((0,R.d)().showOutlineHiddenLayers),recordingKey:"hiddenLayers"},{type:"OUTLINES_OBJECT_BOUNDS",isChecked:(0,M.J2)((0,R.d)().showOutlineObjectBounds),recordingKey:"objectBounds"}]},{type:"MULTIPLAYER_CURSORS",shortcut:(0,U.c1)(v,"toggle-multiplayer-cursors"),recordingKey:"hideMultiplayerCursors",isChecked:!H("hideMultiplayerCursors"),disabled:(0,D.Zr)("hideMultiplayerCursors")},{type:"PROPERTY_LABELS",recordingKey:"toggleShowPropertyLabels",isChecked:J,hidden:!m},{type:"separator"},{type:"COMMENTS",shortcut:(0,U.c1)(v,"toggle-show-comments"),recordingKey:"showComments",isChecked:H("showComments"),disabled:(0,D.Zr)("showComments")},{type:"SHOW_ANNOTATIONS",recordingKey:"showAnnotationsInDevMode",isChecked:(0,M.J2)(c.Ez5.uiState().showAnnotationsInDevMode),disabled:!(0,D.Zr)("toggle-show-annotations"),hidden:!C||(0,_.kc)().dt_annotations_in_comments_tool||(0,_.kc)().dt_annotations_categories},{type:"ANNOTATIONS_MENU",recordingKey:"annotationFilters",hidden:!C&&!N||!(0,_.kc)().dt_annotations_in_comments_tool&&!(0,_.kc)().dt_annotations_categories,children:[{type:"SHOW_ANNOTATIONS",recordingKey:"showAnnotationsInDevMode",isChecked:(0,M.J2)(c.Ez5.uiState().showAnnotationsInDevMode),disabled:!(0,D.Zr)("toggle-show-annotations"),hidden:!C},{type:"ALWAYS_EXPAND_ANNOTATIONS",recordingKey:"alwaysExpandAnnotations",isChecked:(0,M.J2)(c.Ez5.uiState().alwaysExpandAnnotations),disabled:!(0,D.Zr)("toggle-always-expand-annotations"),hidden:C||!N},...W.length>0?[{type:"separator"},{type:"SHOW_ALL_ANNOTATION_CATEGORIES",icon:a.createElement(s.y,{className:$.n$}),isChecked:!K,recordingKey:"showAllAnnotationCategories"},...W.map(e=>{let r=(0,G.uA)(e);return{type:"SHOW_ANNOTATION_CATEGORY",displayText:r,displayTextClassName:$.Mg,icon:a.createElement("div",{className:$.UF,style:{backgroundColor:(0,G.l6)(e)??void 0}}),isChecked:e.id===K,callback:()=>{d("filter_annotation_category",{categoryLabel:r,source:"zoom_menu"}),c.Ez5?.uiState().filterAnnotationCategoryId.set(e.id)},recordingKey:`showAnnotationCategory-${r}`}})]:[]]},{type:"CODE_CONNECT_ANNOTATIONS",isChecked:k,hidden:!C||!(0,_.kc)().dt_code_connect_overview_on_canvas},{type:"PROTOTYPING",shortcut:(0,U.c1)(v,"toggle-prototyping-info"),recordingKey:"prototypingMode",hidden:!j||T,isChecked:X}],eu=a.useCallback(e=>{c.glU.setCanvasZoomScale(e/100)},[]);return a.createElement(q,{targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o,allowCodegenOptions:Z,currentZoom:100*f,dropdownItems:ed,onSelectDropdownItem:(e,r,a)=>{switch(e){case"ZOOM_IN":O.Y5.triggerAction("zoom-in",{source:"zoom-menu"});break;case"ZOOM_OUT":O.Y5.triggerAction("zoom-out",{source:"zoom-menu"});break;case"ZOOM_TO_FIT":O.Y5.triggerAction("zoom-to-fit",{source:"zoom-menu"});break;case"ZOOM_TO_50":c.glU.setCanvasZoomScale(.5);break;case"ZOOM_TO_100":c.glU.setCanvasZoomScale(1);break;case"ZOOM_TO_200":c.glU.setCanvasZoomScale(2);break;case"PIXEL_PREVIEW":L.VU.get("toggle-pixel-preview","toolbar")(r);break;case"PIXEL_GRID":L.VU.get("toggle-grid","toolbar")(r);break;case"SNAP_TO_PIXEL_GRID":L.VU.get("toggle-snapping-to-pixels","toolbar")(r);break;case"SNAP_TO_DOT_GRID":L.VU.get("toggle-snapping-to-dots","toolbar")(r);break;case"DOT_GRID":L.VU.get("toggle-show-dot-grid","toolbar")(r);break;case"LAYOUT_GRIDS":L.VU.get("toggle-shown-layout-grids","toolbar")(r);break;case"MULTIPLAYER_CURSORS":L.VU.get("toggle-multiplayer-cursors","toolbar")(r);break;case"PROPERTY_LABELS":O.Y5.triggerAction("toggle-show-property-labels",{source:"zoom-menu"});break;case"PROTOTYPING":L.VU.get("toggle-prototyping-info","toolbar")(r);break;case"RULERS":L.VU.get("toggle-rulers","toolbar")(r);break;case"SLICES":L.VU.get("toggle-show-slices","toolbar")(r);break;case"COMMENTS":L.VU.get("toggle-show-comments","toolbar")(r);break;case"SHOW_ANNOTATIONS":L.VU.get("toggle-show-annotations","toolbar")(r);break;case"ALWAYS_EXPAND_ANNOTATIONS":L.VU.get("toggle-always-expand-annotations","toolbar")(r);break;case"SHOW_ALL_ANNOTATION_CATEGORIES":d("filter_annotation_category",{categoryLabel:"all",source:"zoom_menu"}),c.Ez5?.uiState().filterAnnotationCategoryId.set(null);break;case"SHOW_ANNOTATION_CATEGORY":a?.();break;case"CODE_CONNECT_ANNOTATIONS":(0,_.kc)().dt_code_connect_overview_on_canvas_sprig&&k&&B("track","code_connect_on_canvas_hidden"),x(e=>!e);break;case"OUTLINES":O.Y5.triggerAction("toggle-outlines",{source:"zoom-menu"});break;case"OUTLINES_HIDDEN_LAYERS":O.Y5.triggerAction("toggle-outline-mode-hidden-layers",{source:"zoom-menu"});break;case"OUTLINES_OBJECT_BOUNDS":O.Y5.triggerAction("toggle-outline-mode-object-bounds",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_DISABLED":E&&O.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_1X":E||O.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),b&&O.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_2X":E||O.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),b||O.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"})}n()},onSubmitCustomZoom:eu})}function q({targetRect:e,showingZoomDropdown:r,recordingKey:n,allowCodegenOptions:o,currentZoom:s,dropdownItems:c,displayAboveTarget:d,onSelectDropdownItem:u,onSubmitCustomZoom:m}){let p=(0,i.wA)(),h="ui3"===(0,l.DP)().version,g=a.useMemo(()=>({ZOOM_IN:(0,T.t)("fullscreen_actions.zoom-in"),ZOOM_OUT:(0,T.t)("fullscreen_actions.zoom-out"),ZOOM_TO_FIT:(0,T.t)("fullscreen_actions.zoom-to-fit"),ZOOM_TO_50:(0,T.t)("fullscreen.toolbar.zoom_menu.zoom_to_50"),ZOOM_TO_100:(0,T.t)("fullscreen_actions.zoom-reset"),ZOOM_TO_200:(0,T.t)("fullscreen.toolbar.zoom_menu.zoom_to_200"),PIXEL_PREVIEW:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview"),PIXEL_GRID:(0,T.t)("fullscreen_actions.toggle-grid"),SNAP_TO_PIXEL_GRID:(0,T.t)("fullscreen_actions.toggle-snapping-to-pixels"),PROTOTYPING:(0,T.t)("fullscreen_actions.toggle-prototyping-information"),SNAP_TO_DOT_GRID:(0,T.t)("fullscreen_actions.toggle-snapping-to-dots"),DOT_GRID:(0,T.t)("fullscreen_actions.toggle-show-dot-grid"),LAYOUT_GRIDS:(0,T.t)("fullscreen_actions.toggle-shown-layout-grids"),MULTIPLAYER_CURSORS:(0,T.t)("fullscreen_actions.toggle-multiplayer-cursors"),PROPERTY_LABELS:(0,T.t)("fullscreen_actions.toggle-show-property-labels"),CODE_CONNECT_ANNOTATIONS:(0,T.t)("fullscreen_actions.toggle-show-code-connect-annotations"),RULERS:(0,T.t)("fullscreen_actions.toggle-rulers"),SLICES:(0,T.t)("fullscreen_actions.toggle-show-slices"),COMMENTS:(0,T.t)("fullscreen_actions.toggle-show-comments"),SHOW_ANNOTATIONS:(0,_.kc)().dt_annotations_in_comments_tool||(0,_.kc)().dt_annotations_categories?(0,T.t)("fullscreen_actions.toggle-show-annotations-v2"):(0,T.t)("fullscreen_actions.toggle-show-annotations"),ALWAYS_EXPAND_ANNOTATIONS:(0,T.t)("fullscreen_actions.toggle-always-expand-annotations"),ANNOTATIONS_MENU:(0,T.t)("fullscreen_actions.annotations-menu"),SHOW_ALL_ANNOTATION_CATEGORIES:(0,T.t)("fullscreen_actions.show-all-annotation-categories"),SHOW_ANNOTATION_CATEGORY:"",OUTLINES:(0,T.t)("fullscreen_actions.toggle-outlines"),OUTLINES_MENU:(0,T.t)("fullscreen_actions.outlines-menu"),OUTLINES_HIDDEN_LAYERS:(0,T.t)("fullscreen_actions.outline-mode-hidden-layers"),OUTLINES_OBJECT_BOUNDS:(0,T.t)("fullscreen_actions.outline-mode-object-bounds"),PIXEL_PREVIEW_DISABLED:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview_disabled"),PIXEL_PREVIEW_1X:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview_1x"),PIXEL_PREVIEW_2X:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview_2x"),SINGLE_PROPERTIES_PANEL:(0,T.t)("fullscreen_actions.single-properties-panel")}),[]),y=a.useMemo(()=>{let e=r=>{if("separator"===r.type)return{displayText:"",disabled:!0,separator:!0};let{children:n,...a}=r,i={displayText:r.displayText??g[r.type]};switch(r.type){case"ZOOM_TO_50":i.isChecked=50===s;break;case"ZOOM_TO_100":i.isChecked=100===s;break;case"ZOOM_TO_200":i.isChecked=200===s}return n&&(i.children=n.map(e)),{...a,...i}};return c.map(e)},[s,c,g]),v=a.useCallback((e,r)=>{u(e.type,r,e.callback)},[u]);return a.createElement(K.j,{items:y,onSelectItem:v,parentRect:e,showPoint:!h,dispatch:p,recordingKey:E.Pt(n,"dropdown"),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:o,displayAboveTarget:d},a.createElement("div",{style:{height:2}}),a.createElement("div",{className:$.zj,onKeyDown:e=>{(e.keyCode===f.Uz.ENTER||e.keyCode===f.Uz.ESCAPE)&&r&&p(w.oB())}},a.createElement(W.A,{className:$.hF,placeholderValue:`${Math.round(s)}%`,cancel:e=>{e&&e.blur()},submit:e=>{e.endsWith("%")&&(e=e.substr(0,e.length-1));let r=-1;try{r=parseInt(e,10)}catch(e){}r>0&&m(r)},recordingKey:E.Pt(n,"dropdown","zoomInput")})),a.createElement(b.wv,null))}a.memo(function({recordingKey:e}){let r=(0,i.wA)(),n=a.useRef(null),s=100*(0,M.J2)((0,R.d)().activeCanvasCurrentZoom),l=(0,k.BK)(j),[c,d]=(0,a.useState)(null),p=(0,N.GS)(),{isPropertiesPanelCollapsed:h}=(0,C.iT)(),_=a.useCallback(()=>{d(n?.current?.getBoundingClientRect()||null)},[n]);a.useEffect(()=>(_(),m._.addListener(_),window.addEventListener("resize",_),()=>{m._.removeListener(_),window.removeEventListener("resize",_)}),[_]);let g=a.useCallback(e=>{e.stopPropagation(),e.preventDefault(),_(),l.toggle({hasOwnEscKeyHandler:!1})},[l,_]),f=l.showing&&c&&a.createElement(z,{targetRect:c,showingZoomDropdown:l.showing,toggleZoomMenu:l.toggle,recordingKey:e}),y=p?$.l4:$.Xf,b=p?l.showing?$.wg:h?$.Jk:$.Y7:l.showing?$.om:$.wR,I=p?l.showing?$.S0:$.i5:$.cm,S=a.createElement("div",{className:b,ref:p?n:void 0},a.createElement("div",{className:I,"data-testid":"zoom-amount"},function(){let e=Math.round(s);return p?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),a.createElement("div",{className:u()($.FH,{[$.WB]:p&&l.showing}),ref:n},a.createElement(H.c,{dispatch:r,dropdownKey:j,showingDropdown:l.showing,dataTestId:"zoom-menu-chevron",toggleOnClick:!0,isUI3:p})));return a.createElement("div",{className:$.sH},a.createElement(o.o,{eventListeners:["onClick"]},a.createElement(v.L,{selected:l.showing,className:y,onboardingKey:B.q,"data-tooltip-type":x.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:g,recordingKey:E.Pt(e,"zoomButton"),enabled:!0,isUI3:p,"aria-controls":j,"aria-haspopup":"menu","aria-expanded":l.showing},S),f))})},375478:(e,r,n)=>{n(411855),n(512729),n(76265),n(737976),n(424502),n(114750),n(991944)},741887:(e,r,n)=>{n(411855),n(76265),n(278695),n(424502)},771597:(e,r,n)=>{n(411855),n(188507),n(805014),n(245954),n(512729),n(76265),n(424502),n(407215),n(114750)},516577:(e,r,n)=>{n(411855),n(188507),n(805014),n(245954),n(512729),n(76265),n(241162),n(737976),n(424502),n(407215),n(103785),n(114750),n(946062),n(375478)},86733:(e,r,n)=>{n(411855),n(188507),n(629019),n(841962),n(621847),n(76265),n(241162),n(140835),n(343373),n(758133),n(509343),n(806273),n(41893),n(695024),n(303480),n(797187),n(80167),n(868049),n(114750),n(43262);var a=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(a||{});let i=e=>"dark"===e?staticAssetWithUploadsPath("d2eefebde737b9d5fba2b35193dcd51e26ed0164"):staticAssetWithUploadsPath("99d648a7ac711ba9d19976515105d6395eeb2d4c"),o=e=>"dark"===e?staticAssetWithUploadsPath("e27a5d39945685c389cd50e9f08144678edefeab"):staticAssetWithUploadsPath("2357b697bfe85711b1de702dc63611ef8bb75859"),s=e=>"dark"===e?staticAssetWithUploadsPath("f49911183f0d3a2b6ee5044b42e0a14fe549999a"):staticAssetWithUploadsPath("2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa"),l=e=>"dark"===e?staticAssetWithUploadsPath("045c7e1324e953b8ee9ec91ac4e944995662e11e"):staticAssetWithUploadsPath("c764bcd0a726bf2d31f70f16808785efeae4de56"),c=e=>"dark"===e?staticAssetWithUploadsPath("7a24deb2e05c4542dbd8b6bd1f009e26ba761b48"):staticAssetWithUploadsPath("32f4843d9b24a4b95129bacd47f6b81fe439228f")},650819:(e,r,n)=>{n.d(r,{B:()=>a}),n(411855),n(188507),n(512729),n(76265),n(241162),n(343373),n(737976),n(424502),n(407215),n(114750),n(991944);let a="text-panel-container"},552825:(e,r,n)=>{n(411855),n(188507),n(875877),n(241162),n(343414),n(515967),n(955597),n(176160),n(15092),n(303480),n(287327),n(135891),n(759240),n(76265),n(61707),n(278695),n(365347),n(154267),n(427494),n(314540),n(505534),n(424502),n(375478),n(741887),n(771597),n(650819),n(805014),n(225371),n(963993),n(946062),n(114750),n(245954),n(103785),n(516577),n(86733),n(86994),n(512729),n(737976),n(991944),n(392789)},114750:(e,r,n)=>{n.d(r,{Qf:()=>o}),n(717180),n(366172),n(963993);var a=n(259087);n(695024);var i=(e=>(e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e))(i||{});function o(e){let r=null;try{r=e.getCurrentPage()}catch(e){if(e.message!==a.e)throw e}return r}},364985:(e,r,n)=>{n.d(r,{Cr:()=>K,Gx:()=>V,Q8:()=>q,V5:()=>j,_X:()=>G,hu:()=>Y,nE:()=>W,rf:()=>$});var a=n(411855),i=n(188507),o=n(48451),s=n(138225),l=n(662068),c=n(805014),d=n(851169),u=n(108982),m=n(841962),p=n(563192),h=n(612724),_=n(132939),g=n(76265),f=n(726084),E=n(524940),y=n(516729),b=n(366172),v=n(515662),T=n(756044),I=n(688656),S=n(143364),w=n(904510),A=n(677892);n(807221);var C=n(6525),N=n(58878),L=n(909107),O=n(113843),R=n(290912),P=n(675097),D=n(991944),k=n(301491),M=n(51080),F=n(805841),x=n(261222),U=n(661178),B=n(642870);function V(e,r,n){let o=(0,i.wA)(),s=(0,i.d4)(e=>e.variablePickerShown),l=(0,a.useCallback)(a=>{a?o((0,E.Yi)({item:a,callback:a=>{let i=(0,B.y$)(n,a);d.l7.user("alias-variable",()=>c.CWU.setVariableValueForMode(e,r,i))&&b.Y5.triggerAction("commit")}})):d.l7.user("unalias-variable",()=>c.CWU.detachVariableValueForMode(e,r))&&b.Y5.triggerAction("commit")},[o,e,r,n]);return[s.isShown&&"variable-picker-alias"===s.type&&s.variableID===e&&s.modeID===r,(0,a.useCallback)((a,i)=>{let s=a.getBoundingClientRect();o((0,y.C)({type:"variable-picker-alias",isShown:!0,initialPosition:new h.Mi(s.left,s.bottom),initialView:i?.initialView,variableID:e,modeID:r,resolvedType:n,onVariableSelected:l}))},[e,r,n,o,l]),l]}function G({children:e,...r}){return a.createElement(H,{...r,children:e})}function H({fields:e,children:r,resolvedType:n,requestedTypes:s,editingStyleGuid:l,responsiveTextStyleVariantIndex:c,initialPickerPosition:d,onVariableSelected:u,onExpressionSubmitted:p,onComponentPropSelected:h}){let{consumedVariable:_}=(0,B.u3)(e,l,c),g=(0,O.MH)(_),f=(0,v.u)(g??void 0),b=!!f&&(0,O.eF)(f),T=(0,B.Ek)(e),[I,w,A,N,L]=function(e,r,n,s,l,c,d,u){let{mapVariableIdToTypedValue:p}=s??{},h=(0,i.wA)(),_=(0,i.d4)(e=>e.variablePickerShown),{updateVariableConsumption:g,clearVariableConsumption:f}=(0,B.u3)(e),b=(0,a.useCallback)(e=>{n?n(e):e?h((0,E.Yi)({item:e,callback:n=>{p?g(p({variable:e,variableId:n})):g((0,B.y$)(r,n))}})):f()},[n,h,g,r,f,p]),v=(0,a.useCallback)(e=>e?l?l(e):(g(p?p(e):e),!0):(f(),!0),[p,f,l,g]);return[_.isShown&&"variable-picker-fields"===_.type&&(0,o.c2)(_.fields,e)&&_.responsiveTextStyleVariantIndex===u&&s?.metadata===_.metadata,(0,a.useCallback)((n,a)=>{let i=a?.initialPosition??d?.()??(0,S.VZ)(n,R.d9,!1);h((0,y.C)({type:"variable-picker-fields",isShown:!0,initialPosition:i,fields:e,resolvedType:r,requestedTypes:s?.requestedTypes,currentFieldValue:a?.currentFieldValue,onVariableSelected:b,metadata:s?.metadata,variableFilters:s?.variableFilters,onExpressionSubmitted:(0,m.kc)().prototype_expressions_nodefields?v:void 0,onComponentPropSelected:(0,m.kc)().ds_variable_props_unified_ui?c:void 0,responsiveTextStyleVariantIndex:u}))},[d,h,e,r,s?.requestedTypes,s?.metadata,s?.variableFilters,b,v,c,u]),b,(0,m.kc)().prototype_expressions_nodefields?v:void 0,(0,m.kc)().ds_variable_props_unified_ui?c:void 0]}(e,n,u,{requestedTypes:s},p,h,d,c),P=(0,a.useMemo)(()=>({showBindingUI:w,isShowingBindingUI:I,onVariableSelected:A,boundVariableId:g,isBoundVariableDeleted:b,onExpressionSubmitted:N,onComponentPropSelected:L,mismatchedValue:T}),[w,I,A,g,b,N,T,L]);return a.createElement(C.p.Provider,{value:P},r)}function W({variableID:e,modeID:r,children:n,resolvedType:i}){let[o,s,l]=V(e,r,i),c=(0,v.bL)(e,r),d=(0,O.MH)(c??null),u=(0,v.u)(d??void 0),m=!!u&&(0,O.eF)(u),p=(0,a.useMemo)(()=>({showBindingUI:s,isShowingBindingUI:o,onVariableSelected:l,boundVariableId:d,isBoundVariableDeleted:m}),[s,o,l,d,m]);return a.createElement(C.p.Provider,{value:p},n)}function K({children:e,pickerType:r="create-modal",resolvedType:n,variableValue:i,onVariableValueChange:o,onVariableSelected:s}){let l=a.useRef(),[d,u]=a.useState(!1),p=(0,a.useCallback)(()=>{u(!1)},[]),_=(0,a.useCallback)(e=>{let r=e.getBoundingClientRect();l.current=new h.Mi(r.left,r.bottom),u(!0)},[]),g=i.type===c.Z_n.ALIAS?i.value:void 0,f=(0,v.u)(g),E=!!f&&(0,O.eF)(f),y=(0,a.useMemo)(()=>({showBindingUI:_,isShowingBindingUI:d,boundVariableId:g??null,isBoundVariableDeleted:E}),[_,d,g,E]),b=(0,v.BQ)(g);return a.createElement(C.p.Provider,{value:y},e,d?i.resolvedType!==c.rXF.COLOR?(0,m.kc)().asset_binding_picker?a.createElement(x.fs,{resolvedType:n,onVariableSelected:s,onClose:p,initialPosition:l.current,pickerType:r}):a.createElement(k.Q,null,a.createElement(X,{disabledVariableIds:new Set,boundVariable:null,initialPosition:l.current,resolvedType:n,onVariableSelected:s,onClose:p,pickerType:r,recordingKey:"variableBindingsDropdown"})):i.type===c.Z_n.COLOR?a.createElement(A.h3,{disabledVariableIds:new Set,color:i.value,boundVariable:null,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:p}):i.type===c.Z_n.ALIAS?a.createElement(A.h3,{disabledVariableIds:new Set,color:b.value,boundVariable:f,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:p}):void 0:null)}function Y({boundVariableId:e,resolvedType:r,requestedTypes:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l,children:c}){let d=(0,v.u)(e??void 0),u=!!d&&(0,O.eF)(d),[m,p,_]=function({resolvedType:e,requestedTypes:r,boundVariableId:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l}){let c=(0,a.useId)(),d=(0,i.wA)(),u=(0,i.d4)(e=>e.variablePickerShown);return[u.isShown&&"variable-picker-controlled"===u.type&&u.key===c,(0,a.useCallback)((a,i)=>{let u=a.getBoundingClientRect();d((0,y.C)({type:"variable-picker-controlled",isShown:!0,initialPosition:i?.initialPosition??o?.()??new h.Mi(u.left,u.bottom),initialView:i?.initialView,variableID:n,key:c,resolvedType:e,requestedTypes:r,onVariableSelected:s,onComponentPropSelected:l}))},[d,n,c,e,r,o,s,l]),c]}({resolvedType:r,requestedTypes:n,boundVariableId:e,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l});return a.createElement(C.p.Provider,{value:{boundVariableId:e??null,isBoundVariableDeleted:u,isShowingBindingUI:m,showBindingUI:p,onVariableSelected:s,onComponentPropSelected:l,variableBindingContextKey:_}},c)}function $({variableScope:e}){let r=(0,i.wA)(),n=(0,a.useCallback)(()=>{r((0,y.B)())},[r]),o=(0,i.d4)(e=>e.variablePickerShown);if(!o.isShown||"variable-picker-controlled"!==o.type)return null;let{resolvedType:s,initialPosition:l,requestedTypes:c,variableID:d,onVariableSelected:u,variableFilters:m}=o;return a.createElement(z,{variableID:d,resolvedType:s,requestedTypes:c,initialPosition:l,onVariableSelected:u,onClose:n,variableScopes:e?new Set([e]):void 0,variableFilters:m})}function j({variableScope:e,onPickerClose:r}){let n=(0,i.wA)(),o=(0,a.useCallback)(()=>{r?.(),n((0,y.B)())},[n,r]),s=a.useContext(C.p)?.isShowingBindingUI,l=a.useContext(C.p)?.variableBindingContextKey,c=(0,i.d4)(e=>e.variablePickerShown);if(!s||!c.isShown||"variable-picker-controlled"!==c.type||c.key!==l)return null;let{resolvedType:d,initialPosition:u,requestedTypes:p,variableID:h,onVariableSelected:_,onComponentPropSelected:g,variableFilters:f}=c;return(0,m.kc)().asset_binding_picker?a.createElement(x.dX,{...c,onClose:o,variableScopes:e?new Set([e]):void 0}):a.createElement(z,{variableID:h,resolvedType:d,requestedTypes:p,initialPosition:u,onVariableSelected:_,onComponentPropSelected:g,onClose:o,variableScopes:e?new Set([e]):void 0,variableFilters:f})}function z({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:i,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c,variableFilters:d}){let u=(0,v.u)(i);return a.createElement(X,{disabledVariableIds:new Set,initialPosition:n,resolvedType:e,requestedTypes:r,boundVariable:u,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c,variableFilters:d,pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown"})}function q(){let e=(0,i.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?a.createElement(Z,{pickerShownState:e}):null}function Z({pickerShownState:e}){let r=(0,i.wA)(),{variableID:n,modeID:o,resolvedType:s,initialPosition:l,initialView:u,onVariableSelected:m,variableFilters:h}=e,_=(0,v.bL)(n,o),g=(0,v.u)(_?.type===c.Z_n.ALIAS?_?.value:void 0),f=(0,a.useCallback)(()=>{r((0,y.B)())},[r]),E=(0,a.useCallback)((e,r)=>{let a={type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:e};d.l7.user("set-color-variable-value",()=>c.CWU.setVariableValueForMode(n,o,a))&&r===T.zk.YES&&b.Y5.triggerAction("commit")},[n,o]);return _?.resolvedType===c.rXF.COLOR&&_?.type!==c.Z_n.NODE_FIELD_ALIAS?a.createElement(k.Q,null,a.createElement(U.I,{disabledVariableIds:new Set([n]),boundVariable:g,variableValue:_,initialPosition:l,initialView:u,onColorChange:E,onVariableSelected:m,onClose:f,recordingKey:"variableBindingsDropdown"}),a.createElement(P.$3,{recordingKey:p.Pt("variableBindingsDropdown","closer"),onClose:f})):a.createElement(a.Fragment,null,a.createElement(k.Q,null,a.createElement(X,{disabledVariableIds:new Set([n]),initialPosition:l,resolvedType:s,variableFilters:h,boundVariable:g,onVariableSelected:m,onClose:f,pickerType:"alias",recordingKey:"variableBindingsDropdown"})),a.createElement(P.$3,{recordingKey:p.Pt("variableBindingsDropdown","closer"),onClose:f}))}function X({disabledVariableIds:e,initialPosition:r,boundVariable:n,newVariableInitialValue:i,resolvedType:o,requestedTypes:c,variableFilters:d,fields:m,pickerType:h,variableScopes:E,recordingKey:y,onVariableSelected:b,onComponentPropSelected:v,onClose:T}){let A=a.useRef(null),{VariableAndComponentPropCreateModalRoot:C}=(0,a.useContext)(N.l)??{},[O,k]=(0,a.useState)(!1),x=a.useRef(),U=(0,u.R)(e=>(0,w.Nw)(e)??(0,w.y7)(e)),B=(0,a.useMemo)(()=>(0,F.Kq)(!!C,!!U,m),[C,U,m]);function V(){let e=A.current?.getEl();if(!e)return;let r=(0,S.cn)(e,L.i);x.current=r,k(!0)}return a.createElement(a.Fragment,null,a.createElement(D.vx,{ref:A,title:"",headerSize:"hidden",initialPosition:r,onClose:T,dragHeaderOnly:!1,initialWidth:R.d9,autoflowHeight:!0},a.createElement(P.Rp,{selectedItem:n,disabledVariableIds:e,resolvedType:o,pickerType:h,recordingKey:y,setControlRightButtons:function(){if(void 0===o||"fields"!==h&&"prop-assignment"!==h)return;let e=B?(0,g.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,g.t)("variables.binding_ui.create_variable_button_tooltip");return a.createElement(s.K,{"aria-label":e,recordingKey:p.Pt(y,"createVariable"),onClick:V,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":I.Ib.TEXT}},a.createElement(_.U,{svg:f.KC["plus-32"]},a.createElement(l.e,null)))}(),onVariableSelected:b,onComponentPropSelected:v,onClose:T,requestedTypes:c,variableScopes:E,variableFilters:d})),a.createElement(P.$3,{recordingKey:p.Pt(y,"closer"),onClose:T}),O&&void 0!==o&&x.current&&a.createElement(M.x,{resolvedType:o,creationModalInitialPosition:x.current,newVariableInitialValue:i,onClose:()=>k(!1),onVariableSelected:b,fields:m}))}n(742995)},805841:(e,r,n)=>{n.d(r,{IQ:()=>l,Kq:()=>c});var a=n(805014),i=n(841962);n(923219),n(515662);var o=n(198136),s=n(113843);function l(e,r,n,i){return i&&r?{type:a.Z_n.ALIAS,resolvedType:e,value:i}:n?{type:(0,s.e4)(e),resolvedType:e,value:n}:void 0}function c(e,r,n){return!!(0,i.kc)().ds_variable_props_unified_ui&&e&&r&&!!(0,o.fx)(n)}n(642870)},261222:(e,r,n)=>{n.d(r,{Y:()=>k,Zq:()=>F,dX:()=>M,fs:()=>x});var a=n(411855),i=n(188507),o=n(138225),s=n(662068),l=n(805014),c=n(851169),d=n(108982),u=n(841962),m=n(563192),p=n(132939),h=n(76265),_=n(726084),g=n(516729),f=n(366172),E=n(515662),y=n(756044),b=n(688656),v=n(143364),T=n(904510),I=n(807075);n(807221);var S=n(58878),w=n(909107),A=n(290912),C=n(675097),N=n(301491),L=n(51080),O=n(805841),R=n(661178);function P({disabledVariableIds:e,boundVariable:r,resolvedType:n,requestedTypes:i,variableFilters:l,fields:c,pickerType:u,variableScopes:g,recordingKey:f,onVariableSelected:E,onComponentPropSelected:y,onClose:v,openCreationModal:I}){let{VariableAndComponentPropCreateModalRoot:w}=(0,a.useContext)(S.l)??{},A=(0,d.R)(e=>(0,T.Nw)(e)??(0,T.y7)(e)),N=(0,a.useMemo)(()=>(0,O.Kq)(!!w,!!A,c),[w,A,c]);function L(){I?.()}return a.createElement(C.Rp,{key:"Libraries",selectedItem:r,disabledVariableIds:e,resolvedType:n,pickerType:u,recordingKey:f,setControlRightButtons:function(){if(void 0===n||"fields"!==u&&"prop-assignment"!==u)return;let e=N?(0,h.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,h.t)("variables.binding_ui.create_variable_button_tooltip");return a.createElement(o.K,{"aria-label":e,recordingKey:m.Pt(f,"createVariable"),onClick:L,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":b.Ib.TEXT}},a.createElement(p.U,{svg:_.KC["plus-32"]},a.createElement(s.e,null)))}(),onVariableSelected:E,onComponentPropSelected:y,onClose:v,requestedTypes:i,variableScopes:g,variableFilters:l})}function D({variableID:e,modeID:r,resolvedType:n,initialPosition:o,initialView:s,onVariableSelected:d,variableFilters:p}){let _=(0,i.wA)(),b=(0,E.bL)(e,r),v=(0,E.u)(b?.type===l.Z_n.ALIAS?b?.value:void 0),T=(0,a.useCallback)(()=>{_((0,g.B)())},[_]),S=(0,a.useCallback)((n,a)=>{let i={type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:n};c.l7.user("set-color-variable-value",()=>l.CWU.setVariableValueForMode(e,r,i))&&a===y.zk.YES&&f.Y5.triggerAction("commit")},[e,r]),w=(0,u.kc)().fpl_window?a.Fragment:N.Q;if(b?.resolvedType===l.rXF.COLOR&&b?.type!==l.Z_n.NODE_FIELD_ALIAS)return a.createElement(w,null,a.createElement(R.I,{disabledVariableIds:new Set([e]),boundVariable:v,variableValue:b,initialPosition:o,initialView:s,onColorChange:S,onVariableSelected:d,onClose:T,recordingKey:"variableBindingsDropdown"}),a.createElement(C.$3,{recordingKey:m.Pt("variableBindingsDropdown","closer"),onClose:T}));let L={tabs:[{name:"library",displayText:(0,h.tx)("variables.binding_ui.variable_library_tab_name"),content:a.createElement(P,{disabledVariableIds:new Set([e]),boundVariable:v,resolvedType:n,variableFilters:p,onVariableSelected:d,onClose:T,pickerType:"alias",recordingKey:"variableBindingsDropdown"})}]};return a.createElement(w,null,a.createElement(I.k,{tabProps:L,onClose:T,initialPosition:o,initialWidth:A.d9,recordingKey:"variableBindingsDropdown"}))}function k(){let e=(0,i.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?a.createElement(D,{...e}):null}function M({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:i,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c}){let d=(0,E.u)(i),[u,m]=(0,a.useState)(!1),p=(0,a.useRef)(null),_=p.current?(0,v.cn)(p.current,w.i):void 0,g={tabs:[{name:"library",displayText:(0,h.tx)("variables.binding_ui.variable_library_tab_name"),content:a.createElement(P,{disabledVariableIds:new Set,resolvedType:e,requestedTypes:r,boundVariable:d,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c,pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown",openCreationModal:()=>m(!0)})}]};return a.createElement(a.Fragment,null,a.createElement(I.k,{tabProps:g,onClose:l,initialPosition:n,initialWidth:A.d9,recordingKey:"variableBindingsDropdown",ref:p}),u&&_&&a.createElement(L.x,{resolvedType:e,creationModalInitialPosition:_,onClose:()=>m(!1),onVariableSelected:o}))}function F({variableScope:e}){let r=(0,i.wA)(),n=(0,a.useCallback)(()=>{r((0,g.B)())},[r]),o=(0,i.d4)(e=>e.variablePickerShown);return o.isShown&&"variable-picker-controlled"===o.type&&(0,u.kc)().asset_binding_picker?a.createElement(M,{...o,onClose:n,variableScopes:e?new Set([e]):void 0}):null}function x({resolvedType:e,onVariableSelected:r,onClose:n,initialPosition:i,pickerType:o}){let[s,l]=(0,a.useState)(!1),c=(0,a.useRef)(null),d=c.current?(0,v.cn)(c.current,w.i):void 0,u=(0,a.useMemo)(()=>(0,O.IQ)(e,null),[e]),m={tabs:[{name:"library",displayText:(0,h.tx)("variables.binding_ui.variable_library_tab_name"),content:a.createElement(P,{disabledVariableIds:new Set,boundVariable:null,resolvedType:e,onVariableSelected:r,onClose:n,pickerType:o,recordingKey:"variableBindingsDropdown",openCreationModal:()=>l(!0)})}]};return a.createElement(a.Fragment,null,a.createElement(I.k,{tabProps:m,onClose:n,initialPosition:i,initialWidth:A.d9,recordingKey:"variableBindingsDropdown",ref:c}),s&&void 0!==e&&d&&a.createElement(L.x,{resolvedType:e,creationModalInitialPosition:d,newVariableInitialValue:u,onClose:()=>l(!1),onVariableSelected:r}))}n(742995)},642870:(e,r,n)=>{n.d(r,{Ek:()=>Z,JG:()=>F,Px:()=>B,QT:()=>z,R1:()=>M,_B:()=>$,e4:()=>W,kN:()=>x,oU:()=>K,pc:()=>H,u3:()=>G,uA:()=>j,y$:()=>D,yK:()=>V});var a=n(411855),i=n(188507),o=n(48451),s=n(552371),l=n(805014);n(851169);var c=n(245459),d=n(7408),u=n(89865),m=n.n(u);n(900956),n(777535);var p=n(32050),h=n(108982),_=n(841962),g=n(875877);n(76265),n(553362);var f=n(34671),E=n(250379),y=n(340704);n(736041);var b=n(923219),v=n(748973),T=n(965636),I=n(515662);n(206102),n(404227);var S=n(957020),w=n(756044),A=n(738402),C=n(376545);n(583044),n(120900);var N=n(118157),L=n(742995),O=n(671917),R=n(748748),P=(e=>(e[e.LEARN_MORE=0]="LEARN_MORE",e[e.REVIEW_UPDATES=1]="REVIEW_UPDATES",e))(P||{});function D(e,r){return{type:l.Z_n.ALIAS,resolvedType:e,value:r}}function k(e){if(0===e.length)return null;if(e.length>=2){for(let r=1;r<e.length;r++)if(!(0,o.c2)(e[r],e[0]))return b.oV}let r=e[0];return r?.isMixed?b.oV:r}function M(){let e=(0,h.R)(e=>{let r=e.mirror.selectionProperties.variableConsumptionInfo;return b.E7(r)?.variableConsumptionMap||{}}),r=(0,T.A5)("variableConsumptionInfo");return{variableConsumptionMap:e,setVariableConsumptionMap:(0,a.useCallback)((e,n=w.zk.YES)=>{r({variableConsumptionMap:e},n)},[r])}}function F(){return(0,b.E7)((0,v.b)("variableConsumptionMap"))||{}}function x(){let e=(0,T.kl)("variableConsumptionInfo"),r=(0,p.k9)(()=>b.E7(e)?.variableSetKeyToModeData||{},[e]),n=function(){let e=(0,T.kl)("variableConsumptionInfo");return(0,p.k9)(()=>b.E7(e)?.variableSetKeyToPageLevelPresetMode||{},[e])}(),a=function(){let e=(0,I.jI)();return(0,p.wm)(()=>{if("loaded"===e.status){let r=e.data?.items.filter(e=>e.modes&&e.modes.length>1);return m()(r,e=>e.key)}return{}},[e])}();return(0,p.wm)(()=>{for(let[e,i]of Object.entries(n))if(!r[e]&&a[e]){let n=a[e];if(!n.modes?.find(e=>e.id===i))continue;r[e]={collectionID:n.node_id,collectionName:n.name,modeOptions:n.modes?.map(e=>({modeId:{guid:e.id,collectionKey:n.key},name:e.name,isCompatible:!0}))||[],explicitMode:{guid:i,collectionKey:n.key},inheritMode:null,libraryKey:n.library_key}}return r},[a,n,r])}let U=(0,_.kc)().ds_modes_util_include_subtree_by_default;function B({includeSubtree:e=U}={}){let r=(0,T.kl)("variableConsumptionInfo");return(0,p.k9)(()=>(e?b.E7(r)?.variableSetKeyToModeIncludingSubtree:b.E7(r)?.variableSetKeyToMode)??{},[r,e])}function V(e){let r=function(e){let r=(0,I.u)(e),n=x(),a=(0,I.G6)(r?.variableSetId);if(!r||!a)return null;let i="LOCAL"===a.subscriptionStatus?a.keyForPublish:a.key;return n?.[i]??null}(e),n=(0,I.G6)(r?.collectionID);if(!r||!n)return null;let a=r.modeOptions,i=r.explicitMode,o=r.inheritMode,s=i??o;return"MIXED"===s?null:a.find(e=>s?e.modeId.guid===s.guid:e.modeId.guid===n.defaultModeID)??null}function G(e,r,n){let i;let{variableConsumptionMap:o,setVariableConsumptionMap:s}=M(),d=(0,v.b)("guid"),u=F(),m=(0,v.b)("responsiveTextStyleVariants"),p=m&&!(0,b.gl)(m)&&void 0!==n?m[n]:void 0,h=r&&(0,b.hS)(d)&&c.aI(r,d);return{consumedVariable:(i=h&&p?(0,b.E7)(p.variableConsumptionMap)||{}:h?u:o)&&k(e.map(e=>i[e])),updateVariableConsumption:(0,a.useCallback)(r=>{let n={};e.forEach(e=>{n[e]=r,(0,R.oz)(e,r)}),(0,C.f)(l.VD3.VARIABLE_ATTACH,l.e0R.DIRECT,()=>{s(n)})},[s,e]),clearVariableConsumption:(0,a.useCallback)((r=w.zk.YES)=>{let n={};e.forEach(e=>{n[e]=null}),(0,C.f)(l.VD3.VARIABLE_DETACH,l.e0R.DIRECT,()=>{s(n,r)})},[s,e])}}function H(e,r,n,a){return K(e,function(e,r){if(!(void 0===e||0===e&&!r||(0,b.gl)(e)))return{type:l.Z_n.FLOAT,resolvedType:l.rXF.FLOAT,value:e}}(r,a),n)}function W(e,r,n){return K(e,function(e){if(e)return{type:l.Z_n.STRING,resolvedType:l.rXF.STRING,value:e}}(r),n)}function K(e,r,n){let a=(0,E.uQ)(),i=(0,y.Q)(),o=(0,A.ks)(),s=(0,f.v4)(),{variableConsumptionMap:c}=M(),d=n||c,u=function(e){if(e&&(0,b.hS)(e)){if(e.type===l.Z_n.EXPRESSION&&1===e.value.expressionArguments.length){let r=e.value.expressionArguments[0];if(r.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.FONT_STYLE){let r=e.value.asString??e.value.asFloat;if(r?.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.ALIAS)return e.value}}(d&&k([e].map(e=>d[e]))||null),m=L.ZM[e]??l.j0r.ALL_SCOPES,p=!u&&o&&a&&r?l.w3z.getIdsOfVariablesWithValue(a,[m],{type:r.type,value:r.value}):[],h=(0,I.u)(u);if(!h)return p.length>0&&r?{matchingVars:{ids:p,rawValue:r}}:{};let _=(0,f.xv)(h,s.id),g=o&&"code"===i.inspectionMode&&_?_:h?.name;return{variable:h,variableDisplayName:g}}function Y(e,r,n){if(!e)return{};let{colorVar:a,color:i,opacity:o}=r;if(a?.value?.alias)return{boundVar:d.dI(a.value.alias)};if(!i||!n)return{};let s=(0,I.iC)(e,Array.from(n),{type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:{...i,a:i.a*(o??1)}});return s?{matchingVars:{ids:s,rawValue:{type:l.Z_n.COLOR,value:{...i,a:i.a*(o??1)}}}}:{}}function $(e,r){let n=(0,E.uQ)(),a=(0,y.Q)(),i=(0,f.v4)(),o=(0,A.ks)(),{boundVar:s,matchingVars:l}=Y(n,e,r);return q((0,I.u)(s),{variableId:s,matchingVars:l},i.id,o,a.inspectionMode)}function j(e,r,n,a,i){let o=function(e,r){let n=function(e,r){let n=e.variableScope?new Set([e.variableScope]):void 0,{boundVar:a,matchingVars:i}=Y(r,e.paint,n);return{variableId:a,matchingVars:i}}(e,r);if(!n.variableId)return{variable:null,variableData:n};let a=g.atomStore.get((0,O.Ev)(n.variableId));if(a)return{variable:a,variableData:n};let i=l.CWU.getSubscribedVariableInfo(n.variableId);return i?{variable:(0,S.ZI)(i),variableData:n}:{variable:null,variableData:n}}(e,r),s=q(o.variable,o.variableData,n,a,i);return{...e,variable:s}}function z(e,r,n,a,i){return e.map(e=>e.type===N.q.STYLE?function(e,r,n,a,i){let o=e.paints.map(e=>j(e,r,n,a,i));return{...e,paints:o}}(e,r,a.id,i,n):j(e,r,a.id,i,n))}function q(e,r,n,a,i){let o=(0,f.xv)(e,n),s=a&&"code"===i&&o?o:e?.name;return{variable:e,variableDisplayName:s,matchingVars:a?r.matchingVars:void 0}}function Z(e){return(0,i.d4)(r=>{let n=b.E7(r.mirror.selectionProperties.variableConsumptionInfo)?.variableNotMatchingSetValue||{},a=e.map(e=>{let r=n[e]??void 0;return(0,s.UU)(r)&&"isMixed"in r?b.oV:r});return 0===a.length?void 0:1===a.length?a[0]:a.every(e=>(0,o.c2)(e,a[0]))?a[0]:b.oV})}},105874:(e,r,n)=>{n.r(r),n.d(r,{CreateVariableForm:()=>Q,CreateVariableFormInput:()=>ee,VariableCreateModalRoot_UNSAFE:()=>$,VariableFormRow:()=>Z,useDetachedVariableValue:()=>q,useHandleVariableSelected:()=>J,useHideContextMenu:()=>X,useVariableCreateModalActions:()=>j});var a=n(411855),i=n(188507),o=n(846288),s=n(236891),l=n(744850),c=n(556843),d=n(520244),u=n(138225),m=n(721501),p=n(805014),h=n(851169),_=n(955389),g=n(89865),f=n.n(g),E=n(991458),y=n(512729),b=n(841962),v=n(563192),T=n(653798),I=n(437068),S=n(250392),w=n(132939),A=n(76265),C=n(648800),N=n(524940),L=n(515662),O=n(125682),R=n(957020),P=n(688656),D=n(76237),k=n(453783),M=n(748748),F=n(991944),x=n(555577),U=n(364985),B=n(642870),V=n(475464),G=n(444769),H=n(488527),W=n(407265),K=n(424148);let Y=2*(0,E.jz)(H.dGl);function $({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,onCreateVariable:o,onClose:s}){(0,M.NF)({resolvedType:i});let{onCreateVariableSubmit:l}=j({onCreateVariable:o,onClose:s});return a.createElement(z,{initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,onCreateVariableSubmit:l,onClose:s,recordingKey:"createVariableModal"})}function j({onCreateVariable:e,onClose:r}){return{onCreateVariableSubmit:function({varSetID:n,varName:a,varValue:i}){if(!p.CWU.isValidVariableName(a,n)){(0,T.x1)("variables","Attempted to submit variable name that is invalid",{varName:a,_varSetID:n});return}h.l7.user("create-variable",()=>{let r=n??p.CWU.createVariableSet((0,A.t)("variables.variable_collection"),p.G6k.AUTOMATIC_FIRST_COLLECTION),s=p.CWU.createVariable(a,r,i,p.HS4.VARIABLE_PICKER),l=p.CWU.getLocalVariableInfo(s);(0,o.B1)(l,`variable with id ${s} not found`),e((0,R.kz)(l))}),r()}}}function z({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,recordingKey:o,onCreateVariableSubmit:s,onClose:d}){return(0,b.kc)().asset_binding_picker?a.createElement(l.bL,{onClose:d,defaultPosition:e,width:n,recordingKey:o},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,(0,A.tx)("variables.create_modal.title"))),a.createElement(c.nB,{padding:0},a.createElement(Q,{resolvedType:i,initialValue:r,recordingKey:v.Pt(o,"createVariableForm"),onSubmit:s})))):a.createElement(F.vx,{title:a.createElement("div",{className:W.h$},(0,A.tx)("variables.create_modal.title")),initialPosition:e,initialWidth:n,onClose:d},a.createElement(Q,{resolvedType:i,initialValue:r,recordingKey:v.Pt(o,"createVariableForm"),onSubmit:s}))}function q(e){let r=(0,L.BQ)(e.type===p.Z_n.ALIAS?e.value:void 0);return(0,s.Vq)(r)&&"MIXED"!==r?r:null}function Z({label:e,input:r}){return a.createElement(C.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:Y}},a.createElement(D.JU,null,e),r)}function X(e){(0,a.useEffect)(()=>{let r=e.current;if(!r)return;let n=e=>e.preventDefault();return r.addEventListener("contextmenu",n),()=>{r.removeEventListener("contextmenu",n)}},[e])}function J(e,r,n){let o=(0,i.wA)();return(0,a.useCallback)(async a=>{if(a){let e=await o((0,N.Oe)(a));n((0,B.y$)(r,e))}else e.type===p.Z_n.ALIAS&&n((0,_.WI)(r))},[o,e,r,n])}function Q({resolvedType:e,initialValue:r,recordingKey:n,onSubmit:i}){let o=(0,a.useRef)(null);X(o);let[s,l]=(0,a.useState)({varName:"",varValue:r??(0,_.WI)(e),varSetID:null}),c=a.useMemo(()=>p.CWU.isValidVariableName(s.varName??"",s.varSetID??null),[s]),u=v.of(n,"submit",()=>{c&&i({varName:s.varName,varValue:s.varValue,varSetID:s.varSetID??null})});return a.createElement("form",{onSubmit:u,autoComplete:"no"},a.createElement(C.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:o},a.createElement(C.Y,{direction:"vertical",spacing:`${(0,E.jz)(H.dGl)}px`,padding:{top:Y},height:"hug-contents"},a.createElement(ee,{recordingKey:n??"",initialVarValue:r,resolvedType:e,setVariableFormSubmitData:l,variableFormSubmitData:s}))),a.createElement(C.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},a.createElement(d.$n,{type:"submit",disabled:!c,recordingKey:v.Pt(n,"createButton"),htmlAttributes:{"data-tooltip":(0,A.t)("variables.create_modal.invalid_variable_name"),"data-tooltip-type":c?void 0:P.Ib.TEXT}},(0,A.tx)("variables.create_modal.create_button"))))}function ee({recordingKey:e,initialVarValue:r,resolvedType:n,setVariableFormSubmitData:i,variableFormSubmitData:o}){let s=(0,L.yp)();n===p.rXF.TEXT_DATA&&(n=p.rXF.STRING);let[l,c]=(0,I.Vc)("last-used-variable-set-bottoms-up",s.length>0?s[0].node_id:null),d=(0,a.useMemo)(()=>{let e=s.find(e=>e.node_id===l);return!e&&s.length>0?s[0]:e},[s,l]),h=(0,L.rW)(d?.node_id??null),g=(0,a.useRef)(null);function f(e,r,n){i({varName:e,varValue:r,varSetID:n})}function E(e){f(o.varName,e,o.varSetID)}(0,y.h)(()=>{g.current?.select(),f((0,V.Wc)(h,n),r??(0,_.WI)(n),d?.node_id??null)});let b=q(o.varValue),T=J(o.varValue,n,E);return a.createElement(a.Fragment,null,s.length>0&&!!d&&a.createElement(Z,{label:(0,A.tx)("variables.create_modal.collection_label"),input:a.createElement("div",{className:W.hF},a.createElement(et,{selectedVariableSetID:d.node_id,variableSets:s,onChange:e=>{c(e),f(o.varName,o.varValue,e)}}))}),a.createElement(Z,{label:(0,A.tx)("variables.create_modal.name_label"),input:a.createElement(S.L,{className:W._Z,name:"variableName",value:o.varName,onChange:e=>{f(e.target.value,o.varValue,o.varSetID)},ref:g,recordingKey:v.Pt(e,"variableNameInput"),delay:50,"data-1p-ignore":!0,autoFocus:!0})}),a.createElement(Z,{label:(0,A.tx)("variables.create_modal.value_label"),input:a.createElement("div",{className:W.hF},a.createElement(U.Cr,{resolvedType:n,variableValue:o.varValue,onVariableValueChange:e=>E(e),onVariableSelected:T},a.createElement(G.gJ,{variableValue:o.varValue,contextType:x.$.FORM,onChange:e=>E(e),recordingKey:v.Pt(e,"variableValueInput")}),b&&a.createElement(u.K,{type:"button","aria-label":(0,A.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>E(b),recordingKey:v.Pt(e,"detachVariableButton"),htmlAttributes:{"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,A.t)("variables.authoring_modal.table.detach_alias")}},a.createElement(w.U,{svg:K.A},a.createElement(m.U,null)))))}))}function et({selectedVariableSetID:e,variableSets:r,onChange:n}){let o=(0,i.wA)(),s=(0,O.Um)(),l=(0,a.useMemo)(()=>f()(r,e=>e.node_id),[r]);return a.createElement(k.l6,{id:"variable-create-modal-variable-set-select",property:l[e],formatter:{format:e=>e?.name??""},dispatch:o,chevronClassName:W.mL,inputClassName:W.NI,dropdownShown:s,onChange:e=>n(e.node_id)},r.map(function(e){return a.createElement(k.c$,{key:e.node_id,value:e})}))}},113843:(e,r,n)=>{n.d(r,{Hr:()=>y,Io:()=>g,MH:()=>function e(r){let n=(0,u.E7)(r);if(n){if("dataType"in n&&"ALIAS"===n.dataType&&n.value?.alias)return s.dI(n.value?.alias);if("type"in n){if(n.type===o.Z_n.ALIAS)return n.value;if(n.type===o.Z_n.FONT_STYLE)return e(n.value.asFloat??n.value.asString??null);if(n?.type===o.Z_n.EXPRESSION&&n.value.expressionFunction===o.JTp.STRINGIFY&&1===n.value.expressionArguments.length)return e(n.value.expressionArguments[0])}}return null},NX:()=>f,Oi:()=>m,WB:()=>E,e4:()=>h,eF:()=>_,rY:()=>p});var a=n(846288),i=n(48451),o=n(805014),s=n(7408),l=n(230208),c=n(76265),d=n(1518),u=n(923219);function m(e){if("MIXED"===e)return(0,c.t)("fullscreen.mixed");if(!e)return null;switch(e.resolvedType){case o.rXF.FLOAT:return String(parseFloat(e.value.toFixed(2)));case o.rXF.BOOLEAN:return e.value?(0,c.t)("variables.values.boolean.true"):(0,c.t)("variables.values.boolean.false");case o.rXF.COLOR:return d.TI.format(e.value);case o.rXF.STRING:return e.value;default:return JSON.stringify(e.value)}}function p(e,r){if(e===r)return!0;if(!e||!e.dataType||!e.resolvedDataType||!e.value||!r||!r.dataType||!r.resolvedDataType||!r.value||e.dataType!==r.dataType||e.resolvedDataType!==r.resolvedDataType)return!1;switch(e.dataType){case"BOOLEAN":return e.value.boolValue===r.value.boolValue;case"FLOAT":return e.value.floatValue===r.value.floatValue;case"STRING":return e.value.textValue===r.value.textValue;case"COLOR":return(0,a.B1)(e.value.colorValue),(0,a.B1)(r.value.colorValue),(0,l.YU)(e.value.colorValue)===(0,l.YU)(r.value.colorValue);default:return(0,i.c2)(e,r)}}function h(e){switch(e){case o.rXF.BOOLEAN:return o.Z_n.BOOLEAN;case o.rXF.FLOAT:return o.Z_n.FLOAT;case o.rXF.STRING:return o.Z_n.STRING;case o.rXF.COLOR:return o.Z_n.COLOR;case o.rXF.MAP:return o.Z_n.MAP;case o.rXF.SYMBOL_ID:return o.Z_n.SYMBOL_ID}}function _(e){return"LOCAL"===e.subscriptionStatus&&e.isSoftDeleted}let g={CORNER_RADIUS:[o.rXF.FLOAT],STACK_SPACING:[o.rXF.FLOAT],STACK_PADDING_LEFT:[o.rXF.FLOAT],STACK_PADDING_TOP:[o.rXF.FLOAT],STACK_PADDING_RIGHT:[o.rXF.FLOAT],STACK_PADDING_BOTTOM:[o.rXF.FLOAT],TEXT_DATA:[o.rXF.STRING,o.rXF.FLOAT],WIDTH:[o.rXF.FLOAT],HEIGHT:[o.rXF.FLOAT],RECTANGLE_TOP_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_TOP_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],STACK_COUNTER_SPACING:[o.rXF.FLOAT],MIN_WIDTH:[o.rXF.FLOAT],MAX_WIDTH:[o.rXF.FLOAT],MIN_HEIGHT:[o.rXF.FLOAT],MAX_HEIGHT:[o.rXF.FLOAT],STROKE_WEIGHT:[o.rXF.FLOAT],OPACITY:[o.rXF.FLOAT],BORDER_TOP_WEIGHT:[o.rXF.FLOAT],BORDER_BOTTOM_WEIGHT:[o.rXF.FLOAT],BORDER_LEFT_WEIGHT:[o.rXF.FLOAT],BORDER_RIGHT_WEIGHT:[o.rXF.FLOAT],MISSING:[],PARAGRAPH_SPACING:[o.rXF.FLOAT],PARAGRAPH_INDENT:[o.rXF.FLOAT],VISIBLE:[o.rXF.BOOLEAN],VARIANT_PROPERTIES:[o.rXF.SYMBOL_ID],OVERRIDDEN_SYMBOL_ID:[o.rXF.SYMBOL_ID],FONT_FAMILY:[o.rXF.STRING],FONT_STYLE:[o.rXF.STRING,o.rXF.FLOAT],FONT_VARIATIONS:[o.rXF.FLOAT],FONT_SIZE:[o.rXF.FLOAT],LETTER_SPACING:[o.rXF.FLOAT],LINE_HEIGHT:[o.rXF.FLOAT],HYPERLINK:[o.rXF.LINK],CMS_SERIALIZED_RICH_TEXT_DATA:[o.rXF.JS_RUNTIME_ALIAS],SLOT_CONTENT_ID:[o.rXF.SLOT_CONTENT_ID]};function f({variable:e,variableDisplayName:r}){return e?e.codeSyntax?.[o.y0x.WEB]?e.codeSyntax[o.y0x.WEB]:`var(--${(r??e.name).replace(/[^a-zA-Z0-9-]/g,"")})`:""}function E(e){switch(e){case o.rXF.BOOLEAN:return o.J0O.BOOL;case o.rXF.FLOAT:return o.J0O.NUMBER;case o.rXF.STRING:case o.rXF.TEXT_DATA:return o.J0O.TEXT;default:throw Error(`Unknown resolved type: ${e}`)}}function y(e){switch(e){case o.rXF.BOOLEAN:return"boolean";case o.rXF.FLOAT:return"number";case o.rXF.STRING:return"string";case o.rXF.COLOR:return"color";case o.rXF.MAP:return"map";case o.rXF.SYMBOL_ID:return"symbol_id";case o.rXF.FONT_STYLE:return"font_style";case o.rXF.TEXT_DATA:return"text_data";case o.rXF.IMAGE:return"image";case o.rXF.LINK:return"link";case o.rXF.JS_RUNTIME_ALIAS:return"js_runtime_alias";case o.rXF.SLOT_CONTENT_ID:return"slot_content_id"}}},247719:(e,r,n)=>{n.d(r,{Y:()=>i});var a=n(875877);let i=(0,a.atom)({type:"ALL_LIBRARIES"});(0,a.atom)({type:"LOCAL_VARIABLES"})},675097:(e,r,n)=>{n.d(r,{$3:()=>ec,Rp:()=>X});var a=n(411855),i=n(846288),o=n(463844),s=n(805014),l=n(414796),c=n(629019),d=n.n(c),u=n(512729),m=n(336427),p=n(841962),h=n(666308),_=n(64271),g=n(563192),f=n(499875),E=n(153767),y=n(693565),b=n(284807),v=n(76265),T=n(639215),I=n(646534),S=n(264259),w=n(515662),A=n(125682),C=n(427494),N=n(176160),L=n(661137),O=n(597185),R=n(957020),P=n(661809),D=n(76237),k=n(957042),M=n(356989),F=n(41010),x=n(635060),U=n(915295),B=n(212213),V=n(789949),G=n(155232),H=n(748748),W=n(580373),K=n(642870),Y=n(56394),$=n(742995),j=n(673420),z=n(703475);function q({resolvedType:e,requestedTypes:r}){return r||(e?[e]:null)}function Z(e,r,n,i){return a.createElement("div",{className:j.p$,style:{height:(0,B.Ih)({layout:r})}},e.length>0?(0,v.t)("variables.binding_ui.no_search_results"):i===s.rXF.COLOR?(0,v.t)("variables.binding_ui.no_colors_empty_state"):(0,p.kc)().ds_variable_props_unified_ui&&n?(0,v.t)("variables.binding_ui.no_variables_props_empty_state"):(0,v.t)("variables.binding_ui.no_variables_empty_state"))}function X({selectedItem:e,resolvedType:r,requestedTypes:n,variableFilters:o,pickerType:s,disabledVariableIds:l,setControlRightButtons:c,variableScopes:d,recordingKey:u,onVariableSelected:m,onStyleSelected:p,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g}){let{currentView:E,setCurrentView:y,toggleLayout:b}=(0,x.R)({selectedItem:e,resolvedType:r}),v=function(e){switch(e.type){case"ALL_LIBRARIES":return et;case"LOCAL_VARIABLES":return ee;case"SUBSCRIBED_VARIABLES":return J;default:(0,i.xb)(e,"Unhandled view for picker body")}}(E),T=(0,a.useMemo)(()=>q({requestedTypes:n,resolvedType:r??null}),[n,r]),[I,S]=(0,a.useState)(""),w=a.useRef(null),A=(0,a.useCallback)(()=>{w.current&&w.current.focus(),b()},[b,w]);return a.createElement(f.tH,{boundaryKey:"VariablePicker",fallback:Z(I,E.layout,!!h,r)},a.createElement(v,{selectedItem:e,currentView:E,resolvedType:r,disabledVariableIds:l,pickerType:s,recordingKey:u,onVariableSelected:m,onStyleSelected:p,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g,requestedTypes:n,searchQuery:I,onSearchInputChange:S,variableScopes:d,variableFilters:o,searchInputRef:w,renderSetControls:i=>a.createElement(el,{variableSets:i,currentView:E,setCurrentView:y,onToggleLayout:A,selectedItem:e,resolvedType:r,setControlRightButtons:c,recordingKey:u,onStyleSelected:p,requestedTypes:n,searchQuery:I})}),a.createElement(F.M,{resolvedTypes:T,selectedItem:e}))}function J({selectedItem:e,currentView:r,resolvedType:n,pickerType:i,recordingKey:o,onVariableSelected:l,onStyleSelected:c,onClose:d,requestedTypes:u,searchQuery:m,onSearchInputChange:p,variableScopes:h,variableFilters:_,searchInputRef:g,renderSetControls:f}){let E=r.fileKey,y=r.libraryKey,b=(0,w.kf)(E),v=(0,w.u5)(E),I=e?.type===R.PW.VARIABLE?e:null,S=(0,w.G6)(I?.variableSetId||""),A="loading"===v.status||"loading"===b.status,[C,N]=(0,a.useMemo)(()=>{let e=b.data??[],r=v.data??[];return I?.subscriptionStatus==="SUBSCRIBED"&&(0,T.Ui)(I,y)&&!e.find(e=>e.key===I?.key)&&S?[[...e,I],[...r,S]]:[e,r]},[y,b,v,I,S]);return n===s.rXF.COLOR&&"color-picker"===i&&c?a.createElement(Q,{fileKey:E,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({isLoading:s,dsStyles:E})=>a.createElement(eo,{variables:C,variableSets:N,dsStyles:E,currentView:r,selectedItem:e,disabledVariableIds:new Set,resolvedType:n,pickerType:i,recordingKey:o,isLoading:s||A,onVariableSelected:l,onStyleSelected:c,onClose:d,requestedTypes:u,searchQuery:m,onSearchInputChange:p,variableScopes:h,variableFilters:_,searchInputRef:g,pickerControls:f(N)})}):a.createElement(eo,{variables:C,variableSets:N,dsStyles:[],currentView:r,selectedItem:e,disabledVariableIds:new Set,resolvedType:n,pickerType:i,recordingKey:o,onVariableSelected:l,onClose:d,requestedTypes:u,searchQuery:m,onSearchInputChange:p,variableScopes:h,searchInputRef:g,pickerControls:f(N)})}function Q({fileKey:e,selectedStyle:r,render:n}){let i=(0,k.AH)(r?.key||null,r),{status:o,stylesByFileKey:s}=(0,k.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:i}),c=s[e]?.styles??[];return a.createElement(M.mY,null,n({isLoading:"loaded"!==o,dsStyles:c}))}function ee({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,onComponentPropSelected:E,searchInputRef:y,renderSetControls:b}){let v=(0,w.Rb)(),T=(0,w.yp)();return i===s.rXF.COLOR&&"color-picker"===o&&u?a.createElement(er,{styleType:l.s4.FILL,render:s=>a.createElement(eo,{variables:v,variableSets:T,dsStyles:s,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,searchInputRef:y,pickerControls:b(T)})}):E?a.createElement(en,{render:s=>a.createElement(eo,{variables:v,variableSets:T,dsStyles:[],currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,onComponentPropSelected:E,componentProps:s,searchInputRef:y,pickerControls:b(T)}),pickerType:o,requestedTypes:p,resolvedType:i}):a.createElement(eo,{variables:v,variableSets:T,dsStyles:[],currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,searchInputRef:y,pickerControls:b(T)})}function et({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onComponentPropSelected:m,onClose:p,keepOpenOnItemSelect:h,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,renderSetControls:v}){let T=(0,w.Rb)(),I=(0,w.yp)(),S=(0,w.pN)(),A="loaded"!==S.status,C=S.data?.libraryVariables,N=S.data?.libraryVariableSets,L=(0,a.useMemo)(()=>[...T,...C??[]],[T,C]),O=(0,a.useMemo)(()=>[...I,...N??[]],[I,N]);return i===s.rXF.COLOR&&"color-picker"===o&&u?a.createElement(ea,{styleType:l.s4.FILL,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({dsStyles:s,isLoading:l})=>a.createElement(eo,{variables:L,variableSets:O,dsStyles:s,isLoading:l||A,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,keepOpenOnItemSelect:h,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,pickerControls:v(O)})}):m?a.createElement(en,{render:s=>a.createElement(eo,{variables:L,variableSets:O,dsStyles:[],isLoading:A,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:p,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,onComponentPropSelected:m,componentProps:s,searchInputRef:b,pickerControls:v(O)}),pickerType:o,requestedTypes:_,resolvedType:i}):a.createElement(eo,{variables:L,variableSets:O,dsStyles:[],isLoading:A,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:p,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,pickerControls:v(O)})}function er({styleType:e,render:r}){return r((0,k.Je)(e))}function en({render:e,pickerType:r,requestedTypes:n,resolvedType:i}){return e(a.useCallback(()=>{let e=(()=>{switch(r){case"set-variable":return(0,p.kc)().ds_variable_props_proto?s.CWU.getComponentPropsForSetVariableList():[];case"prop-assignment":return(0,p.kc)().ds_variable_props_binding_props?s.CWU.getComponentPropsForPropAssignmentList():[];default:return(0,p.kc)().ds_variable_props_unified_ui?s.CWU.getComponentPropsForFieldsList():[]}})(),a=[];return e&&Object.keys(e).length>0&&e.forEach(e=>{a.push(...(0,B.LV)(e.values,n,i))}),a},[r,n,i])())}function ea({styleType:e,selectedStyle:r,render:n}){let i=(0,k.Je)(e),o=(0,k.AH)(r?.key||null,r),{status:s,stylesByFileKey:c}=(0,k.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:o}),d=(0,a.useMemo)(()=>Object.values(c).reduce((e,{styles:r})=>(e.push(...r),e),[]),[c]),u=(0,a.useMemo)(()=>i.concat(d),[i,d]);return a.createElement(M.mY,null,n({isLoading:"loaded"!==s,dsStyles:u}))}function ei(e){let r=(0,K.Px)({includeSubtree:!0});return a.useMemo(()=>e.some(e=>"MIXED"===("LOCAL"===e.subscriptionStatus?r[e.keyForPublish]:r[e.key])),[e,r])}function eo({variables:e,variableSets:r,dsStyles:n,currentView:i,selectedItem:l,disabledVariableIds:c,resolvedType:u,pickerType:p,recordingKey:_,isLoading:f,onVariableSelected:y,onStyleSelected:b,onClose:T,keepOpenOnItemSelect:C,requestedTypes:k,searchQuery:M,onSearchInputChange:x,variableScopes:K,variableFilters:Y,onComponentPropSelected:z,componentProps:X,onCMSFieldSelected:J,cmsFields:Q,pickerControls:ee,searchInputRef:et}){(0,H.D)({isLoading:f??!1,eventName:"variables.variable_picker_load_time"});let er=(0,N._G)(),en=(0,A.Um)(),ea=l?(0,B.UT)(l):null,eo=(0,w.u)(l&&l.type===R.PW.VARIABLE?l.node_id:void 0),el=(0,w.G6)(eo?.variableSetId),[ec,eu]=a.useState(null);a.useRef(null).current=ec;let em=ei(r),ep=M.length>0||em?"list":i.layout,eh=(0,W.$)(),e_=(0,a.useMemo)(()=>q({requestedTypes:k,resolvedType:u??null}),[k,u]),eg=b?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],ef=(0,F.A)(e_,l?.type!=="CMS_FIELD"?l:null,eg),eE=(0,L.sZ)(),ey=(0,I.Fl)(),eb=(0,O.Oe)(eE)&&(0,S.NX)(ey),ev=es({selectedItem:l,resolvedType:u,requestedTypes:k,onStyleSelected:b}),eT=(0,a.useMemo)(()=>{let e={};return(eb?ev:ef).forEach(r=>{e[r.libraryKey]=r.fileName}),e},[ef,ev,eb]),eI=(0,a.useMemo)(()=>k?e.filter(e=>k.includes(e.resolvedType)):e.filter(e=>void 0===u||e.resolvedType===u),[e,u,k]);var eS=eo&&!eI.find(e=>(0,B.UT)(e)===ea);let ew=(0,a.useMemo)(()=>K?eI.filter(e=>(0,B.UT)(e)===ea||(0,$.AQ)(e,K)):eI,[eI,K,ea]),eA=(0,V.qF)(ew,M),eC=(0,a.useMemo)(()=>M.length>0?eA:eA.filter(e=>{let r=e.resolvedType,n=Y?.[P.t.HIDE_IN_DEFAULT_VIEW];if(n&&n[r])return!1;let a=Y?.[P.t.MUST_INCLUDE_ONE_OF];if(a&&a[r]?.length){let n=a[r];if("LIBRARY"===e.subscriptionStatus||n&&!Object.values(e.modeValues).some(e=>{if(e.type===s.Z_n.STRING){let r=e.value.trim().toLocaleLowerCase();return n?.some(e=>e===r)}return!1}))return!1}return!0}),[eA,M,Y]),eN=(0,V.bT)(n,M),eL=(0,V.tZ)(X??[],M),eO=(0,V.Ui)(Q??[],M),eR=(0,a.useMemo)(()=>{if("ALL_LIBRARIES"===i.type)return(0,B.dC)({variables:eC,variableSets:r,styles:eN,componentProps:eL,layout:ep,fileNamesByLibraryKey:eT,openFileLibraryKey:er,slideThemeId:eh});if("CMS_FIELDS"===i.type)return(0,B.kE)({cmsFields:eO});if(u===s.rXF.COLOR)return(0,B.w$)({variables:eC,variableSets:r,styles:eN,layout:ep,isLocal:"LOCAL_VARIABLES"===i.type,slideThemeId:eh});{let e=(0,B.HK)({variables:eC,variableSets:r,layout:ep});if(!z)return e;let n=(0,B.dh)({componentProps:eL});return n.length>0&&e.length>0&&n.push({type:B.Yc.SECTION_HEADER,name:(0,v.t)("variables.binding_ui.set_labels.variables_created_in_file")}),n.concat(e)}},[i.type,u,eC,r,eN,eL,ep,eT,er,eh,eO,z]);var eP=!1;eS&&el&&(eR.unshift({type:B.Yc.VARIABLES,items:[eo],variableSet:el}),eP=!0);let eD=a.useRef([]);eD.current=eR;let ek=a.useRef(null),eM=(0,a.useCallback)(()=>{ek.current?.scrollToTop();let e=function(e){let r=null;for(let n of e)if("items"in n){r=n.items[0];break}return r}(eD.current);eu(e?(0,B.UT)(e):null)},[]),eF=(0,a.useCallback)((e,r)=>{let n=(0,B.oM)(eD.current,e);n>=0&&ek.current?.scrollToIndex(n,r),eu(e)},[]),ex=(0,m.ZC)(M);(0,a.useLayoutEffect)(()=>{!f&&ex!==M&&(M.length>0||!ea?eM():M||eF(ea,{align:"center"}))},[M,f,eM,eF,ea,ex]);let{showStyleContextMenu:eU,hideStyleContextMenu:eB}=(0,G.XM)(),eV=(0,a.useCallback)((e,r)=>{e.type===R.PW.STYLE&&eU({dsStyle:e,position:r})},[eU]),eG=(0,a.useCallback)(e=>{eu((0,B.UT)(e))},[eu]),eH=(0,a.useCallback)(e=>{ec===(0,B.UT)(e)&&eu(null)},[ec,eu]),eW=(0,a.useCallback)(e=>{e.type===R.PW.VARIABLE?y(e):e.type===R.PW.STYLE?b?.(e,{fromSearch:M.length>0}):"COMPONENT_PROP"===e.type?z?.(e):"CMS_FIELD"===e.type&&J?.(e),C||T()},[C,y,b,M.length,z,J,T]),eK=(0,a.useCallback)(e=>{x(e.currentTarget.value)},[x]),eY=(0,a.useCallback)(r=>{if(r.keyCode===h.Uz.ENTER){let r=function({highlightedItemID:e,variables:r,dsStyles:n,componentProps:a,cmsFields:i}){return e?[...r,...n,...a,...i].find(r=>(0,B.UT)(r)===e)??null:null}({variables:e,dsStyles:n,componentProps:eL,cmsFields:eO,highlightedItemID:ec});r?eW(r):l&&y(),T()}else r.keyCode===h.Uz.ESCAPE?T():((0,E.Nt)(r,!1)||(0,E.c2)(r,!1)||(0,E.yn)(r.code,!1)||(0,E.lv)(r.code,!1))&&(ec?(ek.current?.getVirtualItems()??[]).some(e=>{let r=eD.current[e.index];return"items"in r&&r.items.some(e=>(0,B.UT)(e)===ec)})||eF(ec,{align:"center"}):ea?eF(ea,{align:"center"}):eM())},[e,n,eL,eO,ec,T,eW,l,y,ea,eF,eM]);return a.createElement(E.dP,{recordingKey:_,onClick:eB},a.createElement("div",{className:j.PP},a.createElement(ed,{inputRef:et,value:M,onChange:eK,onKeyDown:eY,recordingKey:g.Pt(_,"input")})),ee,a.createElement(D.Id,{className:d()({[j.eB]:u!==s.rXF.COLOR,[j.a2]:!0})},f?a.createElement("div",{className:j.S,style:{height:(0,B.Ih)({layout:ep})}},a.createElement(o.k,null)):0!==eN.length||0!==eC.length||0!==eL.length||0!==eO.length||eP?"list"===ep?a.createElement(U.HZ,{ref:ek,className:j.jG,listItems:eR,selectedItemID:ea,disabledVariableIds:c,highlightedItemID:ec,pickerType:p,recordingKey:_,onItemHighlight:eG,onItemSelect:eW,onItemContextMenu:eV,onItemMouseLeave:eH}):a.createElement(U.Rm,{ref:ek,className:j.jG,listItems:eR,selectedItemID:ea,highlightedItemID:ec,recordingKey:_,onItemHighlight:eG,onItemSelect:eW,onItemContextMenu:eV,onItemMouseLeave:eH}):Z(M,ep,!!z,u)),en?.type===G.A7&&a.createElement(G.ip,{dsStyle:en.data.dsStyle,position:en.data.position,recordingKey:g.Pt(_,"contextMenu")}))}function es({selectedItem:e,resolvedType:r,requestedTypes:n,onStyleSelected:i}){let o=(0,a.useMemo)(()=>q({requestedTypes:n,resolvedType:r??null}),[n,r]),s=i?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],l=(0,F.A)(o,e?.type!=="CMS_FIELD"?e:null,s),c=(0,L.sZ)(),d=(0,I.Fl)(),u=(0,O.Oe)(c)&&(0,S.NX)(d);return(0,a.useMemo)(()=>{if(u){let e=l.map(({fileKey:e,libraryKey:r,fileName:n})=>({key:e,name:n,libraryKey:r}));return(0,S.k9)({libraries:e,approvedLibraryKeysByResourceType:d}),e.map(({key:e,libraryKey:r,name:n})=>({fileKey:e,fileName:n,libraryKey:r}))}return l.sort((e,r)=>e.fileName.localeCompare(r.fileName))},[l,u,d])}function el({variableSets:e,currentView:r,setCurrentView:n,onToggleLayout:i,selectedItem:o,resolvedType:s,setControlRightButtons:l,recordingKey:c,onStyleSelected:d,requestedTypes:u,searchQuery:m}){let p=es({selectedItem:o,resolvedType:s,requestedTypes:u,onStyleSelected:d}),h=ei(e),_=0===m.length,g=m.length>0||h?"list":r.layout,f=(0,a.useMemo)(()=>({...r,layout:g}),[r,g]);return a.createElement(Y.Z,{recordingKey:c,currentView:f,resolvedType:s,subscribedLibraries:p,setControlRightButtons:l,onSetSelect:n,onToggleLayoutIconClick:_?i:void 0,disableGridLayout:h?Y.t.MIXED_MODES:void 0})}function ec({recordingKey:e,onClose:r}){let n=g.rf(e,"mousedown",a.useCallback(e=>{r(),e.stopPropagation()},[r]));return(0,C.dH)()===s.NLJ.DROPPER_COLOR?null:a.createElement(b.n.div,{className:j.ZA,onMouseDown:n})}function ed({inputRef:e,value:r,onChange:n,onKeyDown:i,recordingKey:o}){let s=a.useRef(null);return(0,u.h)(()=>{s.current&&s.current.focus()}),a.createElement("div",{className:j.ON},a.createElement(y.B,{className:j.qc,svg:z.A}),a.createElement(D.jT,{ref:(0,_.A)(e,s),className:j.Rt,value:r,onChange:n,noBorderOnFocus:!0,placeholder:(0,v.t)("variables.binding_ui.search_placeholder"),onKeyDown:i,recordingKey:o}))}},742995:(e,r,n)=>{n.d(r,{$8:()=>B,AQ:()=>U,B3:()=>P,Ku:()=>M,Mm:()=>F,Us:()=>R,ZM:()=>D,aZ:()=>V,iG:()=>x,my:()=>T});var a=n(411855),i=n(834825),o=n(340239),s=n(602707),l=n(737195),c=n(835484),d=n(739928),u=n(63656),m=n(805014),p=n(693565),h=n(76265),_=n(595869),g=n(666139),f=n(560185),E=n(668524),y=n(180377),b=n(58502),v=n(402997),T=(e=>(e.SCOPE="scope",e.LABEL="label",e))(T||{});let I=new Set([m.rXF.FLOAT,m.rXF.COLOR,m.rXF.STRING]),S=new Set([m.rrT.FILL,m.rrT.STROKE,m.rrT.EFFECT]),w=new Set([m.j0r.FRAME_FILL,m.j0r.SHAPE_FILL,m.j0r.TEXT_FILL]),A=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.CORNER_RADIUS,name:(0,h.tx)("variables.scopes.corner_radius"),iconElement:a.createElement(p.B,{svg:_.A})},{type:"scope",scope:m.j0r.WIDTH_HEIGHT,name:(0,h.tx)("variables.scopes.width_height"),iconElement:a.createElement(p.B,{svg:y.A})},{type:"scope",scope:m.j0r.GAP,name:(0,h.tx)("variables.scopes.gap"),iconElement:a.createElement(p.B,{svg:f.A}),subLabel:(0,h.tx)("variables.scopes.auto_layout")},{type:"scope",scope:m.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:a.createElement(p.B,{svg:v.A})},{type:"scope",scope:m.j0r.STROKE_FLOAT,name:(0,h.tx)("variables.scopes.stroke"),iconElement:a.createElement(p.B,{svg:b.A})},{type:"scope",scope:m.j0r.OPACITY,name:(0,h.tx)("variables.scopes.layer_opacity"),iconElement:a.createElement(o.N,null)},{type:"scope",scope:m.j0r.EFFECT_FLOAT,name:(0,h.tx)("variables.scopes.effects"),iconElement:a.createElement(p.B,{svg:g.A})},{type:"label",key:"typography",label:(0,h.tx)("fullscreen.type_panel.typography")},{type:"scope",scope:m.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight"),iconElement:a.createElement(s.j,null)},{type:"scope",scope:m.j0r.FONT_SIZE,name:(0,h.tx)("variables.scopes.font_size"),iconElement:a.createElement(l.Z,null)},{type:"scope",scope:m.j0r.LINE_HEIGHT,name:(0,h.tx)("variables.scopes.line_height"),iconElement:a.createElement(c.e,null)},{type:"scope",scope:m.j0r.LETTER_SPACING,name:(0,h.tx)("variables.scopes.letter_spacing"),iconElement:a.createElement(d.y,null)},{type:"scope",scope:m.j0r.PARAGRAPH_SPACING,name:(0,h.tx)("variables.scopes.paragraph_spacing"),iconElement:a.createElement(u.o,null)},{type:"scope",scope:m.j0r.PARAGRAPH_INDENT,name:(0,h.tx)("variables.scopes.paragraph_indent"),iconElement:a.createElement(p.B,{svg:E.A})}],C=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.ALL_FILLS,name:(0,h.tx)("variables.scopes.all_fills")},{type:"scope",scope:m.j0r.FRAME_FILL,name:(0,h.tx)("variables.scopes.frame_fill"),devModeName:(0,h.tx)("variables.scopes.frame_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.SHAPE_FILL,name:(0,h.tx)("variables.scopes.shape_fill"),devModeName:(0,h.tx)("variables.scopes.shape_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.TEXT_FILL,name:(0,h.tx)("variables.scopes.text_fill"),devModeName:(0,h.tx)("variables.scopes.text_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.STROKE,name:(0,h.tx)("variables.scopes.stroke")},{type:"scope",scope:m.j0r.EFFECT_COLOR,name:(0,h.tx)("variables.scopes.effects")}],N=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:a.createElement(p.B,{svg:v.A})},{type:"scope",scope:m.j0r.FONT_FAMILY,name:(0,h.tx)("variables.scopes.font_family"),iconElement:a.createElement(l.Z,null)},{type:"scope",scope:m.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight_or_style"),iconElement:a.createElement(s.j,null)}],L=[...A,...C,...N].reduce((e,r,n,a)=>("scope"in r&&(e[r.scope]=r.name),e),{}),O=[...A,...C,...N].reduce((e,r,n,a)=>("scope"in r&&(e[r.scope]=r.devModeName??r.name),e),{});function R(e,{devMode:r=!1}={}){return r?O[e]:L[e]}function P(e){let r;if(e?.length===0)return(0,h.tx)("variables.scopes.no_supported_properties");if(e.includes(m.j0r.ALL_SCOPES))return(0,h.tx)("variables.scopes.all_properties_label");for(let n of(0,i.RP)(e,e=>R(e)))r=r?a.createElement(a.Fragment,null,(0,h.tx)("variables.scopes.scope_list",{scope1:r,scope2:n})):n;return r??(0,h.tx)("variables.scopes.no_supported_properties")}let D={CORNER_RADIUS:m.j0r.CORNER_RADIUS,STACK_SPACING:m.j0r.GAP,STACK_PADDING_LEFT:m.j0r.GAP,STACK_PADDING_TOP:m.j0r.GAP,STACK_PADDING_RIGHT:m.j0r.GAP,STACK_PADDING_BOTTOM:m.j0r.GAP,TEXT_DATA:m.j0r.TEXT_CONTENT,WIDTH:m.j0r.WIDTH_HEIGHT,HEIGHT:m.j0r.WIDTH_HEIGHT,RECTANGLE_TOP_LEFT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_TOP_RIGHT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,STACK_COUNTER_SPACING:m.j0r.GAP,MIN_WIDTH:m.j0r.WIDTH_HEIGHT,MAX_WIDTH:m.j0r.WIDTH_HEIGHT,MIN_HEIGHT:m.j0r.WIDTH_HEIGHT,MAX_HEIGHT:m.j0r.WIDTH_HEIGHT,STROKE_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_TOP_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_BOTTOM_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_LEFT_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_RIGHT_WEIGHT:m.j0r.STROKE_FLOAT,OPACITY:m.j0r.OPACITY,PARAGRAPH_SPACING:m.j0r.PARAGRAPH_SPACING,PARAGRAPH_INDENT:m.j0r.PARAGRAPH_INDENT,FONT_FAMILY:m.j0r.FONT_FAMILY,FONT_STYLE:m.j0r.FONT_STYLE,FONT_VARIATIONS:m.j0r.PARAGRAPH_SPACING,FONT_SIZE:m.j0r.PARAGRAPH_SPACING,LETTER_SPACING:m.j0r.LETTER_SPACING,LINE_HEIGHT:m.j0r.LINE_HEIGHT,MISSING:null,VISIBLE:null,VARIANT_PROPERTIES:null,OVERRIDDEN_SYMBOL_ID:null,HYPERLINK:null,CMS_SERIALIZED_RICH_TEXT_DATA:null,SLOT_CONTENT_ID:null};Object.keys(m.Z6A).filter(e=>isNaN(Number(e)));let k={FRAME:m.j0r.FRAME_FILL,SYMBOL:m.j0r.FRAME_FILL,INSTANCE:m.j0r.FRAME_FILL,VECTOR:m.j0r.SHAPE_FILL,BRUSH:m.j0r.SHAPE_FILL,STAR:m.j0r.SHAPE_FILL,LINE:m.j0r.SHAPE_FILL,ELLIPSE:m.j0r.SHAPE_FILL,RECTANGLE:m.j0r.SHAPE_FILL,REGULAR_POLYGON:m.j0r.SHAPE_FILL,ROUNDED_RECTANGLE:m.j0r.SHAPE_FILL,TEXT:m.j0r.TEXT_FILL,TEXT_PATH:m.j0r.TEXT_FILL,VECTOR_OPERATION:m.j0r.SHAPE_FILL,NONE:null,DOCUMENT:null,CANVAS:null,GROUP_DEPRECATED:null,SLICE:null,STICKY:null,SHAPE_WITH_TEXT:null,CONNECTOR:null,CODE_BLOCK:null,WIDGET:null,STAMP:null,MEDIA:null,HIGHLIGHT:null,SECTION:null,SECTION_OVERLAY:null,WASHI_TAPE:null,VARIABLE:null,TABLE:null,TABLE_CELL:null,VARIABLE_SET:null,VARIABLE_OVERRIDE:null,SLIDE:null,CANVAS_ROW:null,CANVAS_GRID:null,ASSISTED_LAYOUT_DEPRECATED:null,INTERACTIVE_SLIDE_ELEMENT:null,MODULE:null,RESPONSIVE_SET:null,CODE_COMPONENT:null,CODE_LIBRARY:null,CODE_FILE:null,CODE_INSTANCE:null,CODE_LAYER:null,MANAGED_STRING:null,TRANSFORM:null,CMS_RICH_TEXT:null,REPEATER:null};function M(e){return k[e]}function F(e){return e===m.rXF.FLOAT?A:e===m.rXF.COLOR?C:e===m.rXF.STRING?N:[]}function x(e){let r=new Set;for(let n of e)D[n]&&r.add(D[n]);return r}function U(e,r){if(!I.has(e.resolvedType))return!0;let n=!1;for(let e of r)if(w.has(e)){n=!0;break}for(let a of e.scopes)if(r.has(a)||a===m.j0r.ALL_SCOPES||a===m.j0r.ALL_FILLS&&n)return!0;return!1}function B(){return[m.rXF.FLOAT,m.rXF.COLOR,m.rXF.STRING]}function V(e,r){if(!e||!r||!S.has(e))return;let n=new Set;switch(e){case m.rrT.STROKE:case m.rrT.STROKE_PRESET:n.add(m.j0r.STROKE);break;case m.rrT.FILL:for(let e in r){let r=k[e];r&&n.add(r)}break;case m.rrT.EFFECT:n.add(m.j0r.EFFECT_COLOR)}return n.size?n:void 0}},671917:(e,r,n)=>{n.d(r,{A6:()=>eb,BJ:()=>eE,Cg:()=>em,Eo:()=>$,Ev:()=>ef,Gc:()=>e_,H2:()=>j,Ho:()=>J,Jo:()=>et,LC:()=>ei,Oj:()=>X,Ri:()=>Z,TD:()=>ed,Yt:()=>Q,ZG:()=>Y,bO:()=>eg,cp:()=>q,hy:()=>ep,hz:()=>ee,jt:()=>ec,qy:()=>W,uk:()=>eh,wh:()=>z,xA:()=>eu});var a=n(834825),i=n(236891),o=n(879058),s=n(805014),l=n(245459),c=n(636149),d=n.n(c),u=n(89865),m=n.n(u),p=n(675551),h=n.n(p),_=n(802691),g=n.n(_),f=n(841962),E=n(875877),y=n(627805),b=n(140784),v=n(736942),T=n(746643),I=n(357272),S=n(653798),w=n(154267),A=n(200179),C=n(366172),N=n(581346),L=n(65791),O=n(263885),R=n(927150),P=n(183739),D=n(957020),k=n(60329);let M=(0,O.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsSubscribed),F=(0,E.atom)(e=>e(M).map(D.Rn)),x=(0,O.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsLocal),U=(0,E.atom)(e=>e(x).map(D.Dt)),B=(0,O.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesSubscribed),V=(0,O.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesLocal),G=(0,E.atom)(e=>e(V).map(D.kz)),H=(0,E.atom)(e=>e(B).map(D.ZI));(0,E.atom)(e=>({...m()(e(U),e=>e.keyForPublish),...m()(e(F),e=>e.key)})),(0,E.atom)(e=>({...m()(e(G),e=>e.keyForPublish),...m()(e(H),e=>e.key)}));let W=(()=>{let e=(0,R.OX)({},"SYNC_ATOM_VARIABLE_SETS_BY_ID"),r=(0,E.withReducer)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(D.Dt),e=>e.node_id);return{...e,...n}}if("deleted"in r){let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableSetsInfo()})});let r=(0,L.Vr)(r=>{e(r)});return()=>{r(),e(null)}},(0,R.S9)(r,e.reducer)})(),K=(0,E.atom)(e=>({...e(W),...e(eu)})),Y=(0,E.atomFamily)(e=>(0,E.atom)(r=>r(W)[e]));(0,E.atomFamily)(e=>(0,E.atom)(r=>r(eu)[e]));let $=(0,E.atomFamily)(e=>(0,E.atom)(r=>r(K)[e]));(0,E.atomFamily)(e=>(0,y.BV)(r=>n=>n(r({fileKey:e}))));let j=(0,E.atomFamily)(e=>(0,E.atom)(r=>{let n={};for(let a of e)n[a]=r(P.o9k.Query({fileKey:a}));return n}),a.lu),z=(0,E.atomFamily)(e=>(0,E.atom)(r=>h()(m()(e),e=>r(P.BbB.Query({libraryKey:e})))),a.lu),q=(0,E.atomFamily)(e=>(0,y.eS)(r=>n=>n(r({fileKey:e}))));function Z(e){return P.eHy.Query(e?{hubFileId:e}:null)}let X=(0,E.atomFamily)(e=>(0,E.atom)(r=>{let n={};for(let a of e)n[a]=r((0,b.he)(P.cmY)({variableCollectionKey:a}));return n}),a.lu),J=(0,E.atomFamily)(e=>(0,E.atom)(r=>h()(m()(e),e=>r(P.Ipg.Query({libraryKey:e})))),a.lu),Q=(0,E.atomFamily)(e=>(0,E.atom)(r=>{let n={};for(let a of e)n[a]=r(P.jXq.Query({fileKey:a}));return n}),a.lu),ee=(0,E.atomFamily)(e=>(0,E.atom)(r=>{let n={};for(let a of e)n[a]=r(P.eHy.Query({hubFileId:a}));return n}),a.lu);function et(e){let r=h()(m()(e),()=>v.Qw.disabled());return(0,E.atom)(r)}let er=(0,E.atom)(e=>{let r=e(eg),n=e(k.TG),a=Object.values(r).filter(e=>!(0,A.lR)(e,n)).map(e=>e.key).sort();return e((0,y.a5)(a.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.ey)(r.args.key)]=r.result,e),{})}),en=(0,E.atom)(e=>{let r=e(eg),n=e(k.TG),a=(e(w.JB)?Object.values(r).filter(e=>(0,A.lR)(e,n)):[]).map(e=>e.key).sort().map(e=>({key:e})),i=(0,A.ku)(A.p9,a,e);return"loaded"!==i.status?{}:i.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variable;if(!n)return e;let a=(0,o.ey)(n.key);return{...e,[a]:r.result}},{})}),ea=(0,E.atom)(e=>({...e(er),...e(en)}),T.lQ),ei=(0,R.Pj)(ea,"SYNC_ATOM_USED_LIBRARY_VARIABLES_BY_KEY",{}),eo=(0,E.atom)(e=>{let r=[...new Set(Object.values(e(er)).map(e=>e.data?.variable?.variableCollection.key).filter(i.Vq))].sort();return e((0,y.Ew)(r.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.yG)(r.args.key)]=r.result,e),{})},T.lQ),es=(0,E.atom)(e=>{let r=[...new Set(Object.values(e(en)).map(e=>e.data?.variable?.variableCollection.key).filter(i.Vq))].sort().map(e=>({key:e})),n=(0,A.ku)(A.nT,r,e);return"loaded"!==n.status?{}:n.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variableCollection;if(!n)return e;let a=(0,o.ey)(n.key);return{...e,[a]:r.result}},{})}),el=(0,E.atom)(e=>({...e(eo),...e(es)}),T.lQ),ec=(0,R.Pj)(el,"SYNC_ATOM_USED_LIBRARY_VARIABLE_SETS_BY_KEY",{});(0,E.atom)(e=>{let r=Object.keys(e(W));if(0!==r.length)return r[0]});let ed=(0,E.atom)(e=>{let r=Object.values(e(W));return(0,f.kc)().ds_reorder_collections?(0,N.iw)(r):r}),eu=(()=>{let e=(0,R.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLE_SETS_BY_ID"),r=(0,E.withReducer)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(D.Rn),e=>e.node_id);return{...e,...n}}{let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariableSetsInfo()})});let r=(0,L._n)(r=>{e(r)});return()=>{r(),e(null)}},(0,R.S9)(r,e.reducer)})(),em=(()=>{let e=(0,R.OX)({},"SYNC_ATOM_LOCAL_VARIABLES_BY_ID"),r=(0,E.withReducer)(e,(e,r)=>{if(r){if("added"in r)return r.added&&"map"in r.added||(0,S.x1)("variableChange is malformed, expected added to be an array","variableChange",{variableChange:r},{reportAsSentryError:!0}),{...e,...m()(r.added.map(D.kz),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return g()(e,e=>e.node_id&&!n.has(e.node_id))}if("setDeleted"in r)return g()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariablesInfo()})});let r=(0,L.j2)(r=>{e(r)});return()=>{r(),e(null)}},(0,R.S9)(r,e.reducer)})(),ep=(0,E.atomFamily)(e=>(0,E.atom)(r=>r(em)[e]??null)),eh=(0,E.atom)(e=>Object.keys(e(em)).map(r=>e(ep(r))).sort((e,r)=>-(0,I.Ez)(e.sortPosition,r?.sortPosition))),e_=(0,E.atom)(e=>d()(e(eh),e=>e.variableSetId)),eg=(()=>{let e=(0,R.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLES_BY_ID"),r=(0,E.withReducer)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(D.ZI),e=>e.node_id)};if("deleted"in r)return g()(e,e=>e.id!==r.deleted);if("setDeleted"in r)return g()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariablesInfo()})});let r=(0,L.uE)(r=>{e(r)});return()=>{r(),e(null)}},(0,R.S9)(r,e.reducer)})();(0,E.atomFamily)(e=>(0,E.atom)(r=>r(eg)[e]??null));let ef=(0,E.atomFamily)(e=>(0,E.atom)(r=>r(em)[e]??r(eg)[e]??null));function eE(e,r){let n=C.Y5.isReady(),a=new Map(Object.entries(r)),i=n&&e?s.CWU.getVariableResolvedValue(e,a):null,o=(0,E.atom)(i);return e&&(o.onMount=i=>{n||C.Y5.onReady().then(()=>{i(s.CWU.getVariableResolvedValue(e,a))});let o=Object.entries(r),c=o.length>0?o.map((e,r)=>`${e}${r}`).join(","):l.AD,d=(0,L.RW)(e,c,e=>{i(e[c]??null)});return()=>{d(),i(null)}}),o}let ey=(()=>{let e=(0,E.atom)({}),r=(0,E.withReducer)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(D.Vk),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return g()(e,e=>e.node_id&&!n.has(e.node_id))}return{}}return e});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableOverridesInfo()})});let r=(0,L.xb)(r=>{e(r)});return()=>{r(),e(null)}},r})(),eb=(0,E.atomFamily)(e=>(0,E.atom)(r=>{let n=Object.values(r(ey)).filter(r=>r.variableSetId===e);return m()(n,e=>e.rootVariableKey)}))},748748:(e,r,n)=>{n.d(r,{D:()=>I,NF:()=>S,oz:()=>A});var a=n(411855),i=n(805014),o=n(245459),s=n(7408),l=n(777535),c=n(885123),d=n(512729),u=n(336427),m=n(841962),p=n(875877),h=n(653798),_=n(190500),g=n(90939),f=n(265769),E=n(176160),y=n(15092),b=n(671917),v=n(627962);function T(e){switch(e){case i.rXF.BOOLEAN:return"boolean";case i.rXF.FLOAT:return"float";case i.rXF.STRING:return"string";case i.rXF.COLOR:return"color";case i.rXF.MAP:return"map";case i.rXF.SYMBOL_ID:return"symbol_id";case i.rXF.FONT_STYLE:return"font_style";case i.rXF.TEXT_DATA:return"text_data";case i.rXF.IMAGE:return"image";case i.rXF.LINK:return"link";case i.rXF.JS_RUNTIME_ALIAS:return"js_runtime_alias";case i.rXF.SLOT_CONTENT_ID:return"slot_content_id"}}function I({isLoading:e,eventName:r}){let n=(0,u.ZC)(e),i=(0,a.useRef)();(0,d.h)(()=>{i.current=performance.now()});let o=function(e){let r=(0,a.useRef)(!1);return function(){r.current||(e(),r.current=!0)}}(function(){if(i.current){let e=performance.now()-i.current;l.az.trackDefinedMetric(r,{loadTimeMs:e})}});n&&!e&&o()}function S({resolvedType:e}){let r=(0,E.tS)(),n=(0,y.TA)();(0,d.h)(()=>{r&&n&&l.az.trackDefinedEvent("variables.inline_creation_dialog_opened",{fileKey:r,userId:n,resolvedType:T(e)})})}function w(e){return"type"in e}function A(e,r,n){try{if(w(r)?r.type===i.Z_n.ALIAS:"ALIAS"===r.dataType){let a=w(r)?r.value:(0,s.dI)(r.value?.alias),l=w(r)?T(r.resolvedType):r.resolvedDataType,d=c.D.getState(),u=Object.keys(d.mirror.sceneGraphSelection),h=d.openFile?.key,E=d.user&&d.user.id,y=p.atomStore.get((0,b.Ev)(a)),I=y?.variableSetId?p.atomStore.get(b.Eo(y?.variableSetId))?.node_id:null,S=i.CWU.getSubscribedVariableInfo(a),A=(0,g.ZR)(y??(0,g.O8)(S),d.openFile),C=(0,f.X)(A),N=d.mirror.selectedStyleProperties.guid;N&&(u=[o.dI(N)]);let L=function(){if((0,m.kc)().aip_flower_garden_design_logging&&i.mHF)return JSON.stringify(Object.fromEntries(i.mHF.getVariableSetConsumptionForDocument()))}();for(let r of u){let o=function(e){if((0,m.kc)().aip_flower_garden_design_logging&&i.mHF)return JSON.stringify(Object.fromEntries(i.mHF.getVariableSetConsumptionForHighestNodeContainer(e)))}(r);(0,_.ds)("ds_variable_reference_set",h,d,{userId:E,variable_id:a,collection_id:I,value_type:l?.toString().toUpperCase(),node_id:r,variable_field_id:e,is_style:!!N,is_shared:y?.subscriptionStatus==="SUBSCRIBED",library_key:A,partner_type:C,appleEulaAccepted:!!d.userFlags.apple_eula_accepted,attachmentSurfaceKey:n?.attachmentSurfaceKey,attachmentRecordingKey:n?.attachmentRecordingKey,previousValueVariableKey:n?.previousVariableKey,previousValueStyleLibraryKey:n?.previousStyleKey,hasVisiblePaintBelow:n?.hasVisiblePaintBelow,modeContext:(0,v.Z)(n?.modeContext),variableSetConsumptionForSelection:o,variableSetConsumptionForDocument:L},{forwardToDatadog:!0})}}else if(w(r)&&r.type===i.Z_n.FONT_STYLE){let n=r.value.asString??r.value.asFloat,a=c.D.getState(),s=Object.keys(a.mirror.sceneGraphSelection),l=a.openFile?.key,d=a.user&&a.user.id,u=p.atomStore.get((0,b.Ev)(n?.value)),m=u?.variableSetId?p.atomStore.get(b.Eo(u?.variableSetId))?.node_id:null,h=i.CWU.getSubscribedVariableInfo(n?.value),E=(0,g.ZR)(u??(0,g.O8)(h),a.openFile),y=(0,f.X)(E),v=a.mirror.selectedStyleProperties.guid;for(let r of(v&&(s=[o.dI(v)]),s))(0,_.ds)("ds_variable_reference_set",l,a,{userId:d,variable_id:n?.value,collection_id:m,value_type:n?.resolvedType?T(n?.resolvedType).toUpperCase():void 0,node_id:r,variable_field_id:e,is_style:!!v,is_shared:u?.subscriptionStatus==="SUBSCRIBED",library_key:E,partner_type:y,appleEulaAccepted:!!a.userFlags.apple_eula_accepted},{forwardToDatadog:!0})}}catch(e){(0,h.x1)("variables","Could not log variable consumption",{exception:e},{reportAsSentryError:!0})}}},475464:(e,r,n)=>{n.d(r,{B9:()=>N,Ex:()=>b,F$:()=>w,GC:()=>function e(r){let n=[...r.variables];for(let a of r.subgroups)n.push(...e(a));return n},Lo:()=>g,Od:()=>v,Pf:()=>A,Pw:()=>y,Qo:()=>S,US:()=>C,Wc:()=>_,Wx:()=>T,ZR:()=>R,cv:()=>I,hF:()=>L,ky:()=>O,nm:()=>h,om:()=>f,qQ:()=>D,rN:()=>k,x9:()=>M,yh:()=>F});var a=n(805014),i=n(184058),o=n.n(i),s=n(875877),l=n(357272),c=n(710443),d=n(40896),u=n(306777),m=n(901084),p=n(840263);let h="Mode 1";function _(e,r,n=""){let a=e.map(e=>e.name),i=(0,u.F)(r).name;return(0,d.g)(n+i,a)}function g(e,r=""){return E(e,r,e=>e.name)}function f(e,r=""){return E(e,r,e=>e)}function E(e,r="",n){let a=r.slice(0,-1).split("/"),i=1===a.length?"":a.slice(0,-1).join("/")+"/",o=Array.from(new Set(e.map(n).filter(e=>e.startsWith(i)&&e.replace(i,"").includes("/")).map(e=>e.replace(i,"").split("/")[0])));return i+(0,d.g)(a[a.length-1].replace(/\d+$/,"").trim(),o)+"/"}function y(e){return function e(r){let n=[r];for(let a of r.subgroups.sort(P))n.push(...e(a));return n}(function(e){let r={"":{name:"",subgroups:[],variables:[]}};for(let n of e.sort((e,r)=>-(0,l.Ez)(e.sortPosition,r.sortPosition))){let e=A(n.name);r.hasOwnProperty(e)||(r[e]={name:e,subgroups:[],variables:[]}),r[e].variables.push(n)}for(let e of Object.keys(r)){let n=e.split("/").slice(0,-1);for(let e=1;e<n.length;e++){let a=n.slice(0,e).join("/")+"/";r.hasOwnProperty(a)||(r[a]={name:a,subgroups:[],variables:[]})}}for(let[e,n]of Object.entries(r))""!==e&&r[T(e)].subgroups.push(n);return r[""]}(e))}function b(e,r){let n=[];for(let a of e)r.includes(a.name)&&n.push(...function e(r){let n=[r.name];for(let a of r.subgroups)n.push(...e(a));return n}(a));return o()(n)}function v(e){return 0===e.variables.length?v(e.subgroups[0]):e.variables[0]}function T(e){if(0===e.length)return"";let r=e.split("/").slice(0,-1);return 1===r.length?"":r.slice(0,-1).join("/")+"/"}function I(e,r){return null===r?0:e.filter(e=>e.name.startsWith(r)).length}function S(e,r){return null===r?[]:e.filter(e=>e.name.startsWith(r))}function w(e,r,n){return S(e,r).every(e=>a.CWU.renameVariable(e.node_id,(0,c.rh)(n+"/"+L(e,r))))}function A(e){return e.includes("/")?e.split("/").slice(0,-1).join("/")+"/":""}function C(e,r){let n=e.split("/");return(0,c.rh)(r+n[n.length-1])}function N(e){let r=e.split("/");return r[r.length-1]}function L(e,r){return e.name.replace(r,"")}function O(e){let r=e.slice(0,-1).split("/");return r[r.length-1]}function R(e,r){return T(e)+r+"/"}function P(e,r){let n=v(e).sortPosition,a=v(r).sortPosition;return-(0,l.Ez)(n,a)}function D(e,r,n,i){let o,s;if(r){let[n,i]=r;a.CWU.insertVariableBetween(e,n,i);return}if(0===i.length)return;let l=function(e,r){if(""===r)return[];let n=T(r),a=(n.match(RegExp("/","g"))||[]).length+1;return e.filter(e=>e.name.startsWith(n)&&(e.name.match(RegExp("/","g"))||[]).length===a)}(i,n),c=l.findIndex(e=>e.name===n);if(-1===c)return;let d=l[c];d&&d.variables.length>=1?o=d.variables[d.variables.length-1]:c>0&&(o=function e(r){return 0===r.variables.length?e(r.subgroups[r.subgroups.length-1]):r.variables[r.variables.length-1]}(l[c-1])),c<l.length-1&&(s=v(l[c+1])),a.CWU.insertVariableBetween(e,o?.node_id||"",s?.node_id||"")}function k(e,r){return r?e:null}function M(){let e=(0,s.useAtomValue)(m.X);return e.nameColumnWidth?`${e.nameColumnWidth}px`:p.U3}function F(e){let r=(0,s.useAtomValue)(m.X);return e.map((n,a)=>{if(a===e.length-1)return`minmax(${p.SG}, 1fr)`;let i=r.valueColumnWidths.get(n.id);return i?`${i}px`:p.SG}).join(" ")}},833749:(e,r,n)=>{n.d(r,{C:()=>g});var a=n(411855),i=n(520244),o=n(967790),s=n(563192),l=n(693565),c=n(132939),d=n(76265),u=n(125682),m=n(706969),p=n(276),h=n(501191),_=n(177646);function g({groups:e,recordingKey:r,selectedGroup:n,setRenamingVariableID:g,variableSetID:f,setSelectedVariableID:E}){let y=a.useRef(null),{showing:b,toggle:v,hide:T}=(0,u.BK)(m.oU);return a.createElement("div",{className:p.zr},a.createElement(l.B,{className:p.Kk,svg:_.A}),a.createElement("div",{className:p.Qq},(0,d.t)("variables.authoring_modal.null_state_text")),g&&a.createElement(i.$n,{iconPrefix:a.createElement(c.U,{svg:h.A},a.createElement(o.x,null)),"aria-label":(0,d.t)("variables.authoring_modal.create_variable_button_label"),ref:y,variant:"secondary",onClick:()=>v(),recordingKey:s.Pt(r,"createVariableButton")},(0,d.t)("variables.authoring_modal.table.create_variable")),g&&b&&y.current&&a.createElement(m.mw,{targetRect:y.current.getBoundingClientRect(),variableSetID:f??null,selectedGroup:n,groups:e,recordingKey:r,setRenamingVariableID:g,onClose:T,setSelectedVariableID:E,insertVariableBetweenIDs:null}))}},907626:(e,r,n)=>{n.d(r,{iG:()=>u,vt:()=>d});var a=n(188507),i=n(314540),o=n(313449),s=n(940795),l=n(269049),c=n(689102);function d(e){let r={component:"useIsTeamLockedDueToStarterLimits",migrationGroup:l.L.GROUP_3},n=(0,s.NP)(r),d=(0,c.cD)(),u=(0,a.d4)(e=>!!d&&(0,o.oc)(d,e)),m=(0,s.FR)({component:"useIsTeamLockedDueToStarterLimits",migrationGroup:l.L.GROUP_3}),p=(0,s.yN)({component:"useIsTeamLockedDueToStarterLimits",attribute:"isOnceEduTeam",migrationGroup:l.L.GROUP_3,legacy:(e,r)=>e?.student_team_state===i.kU.STUDENT_TEAM_CURRENT||e?.student_team_state===i.kU.STUDENT_TEAM_EXPIRED,migrated:(e,r)=>r?.studentTeamState===i.kU.STUDENT_TEAM_CURRENT||r?.studentTeamState===i.kU.STUDENT_TEAM_EXPIRED});return!!n&&(!n||n===e)&&!!u&&!m&&!p}function u(e){if(!e)return!1;let r=!!(0,o.XX)(e),n=e.studentTeamState===i.kU.STUDENT_TEAM_CURRENT||e.studentTeamState===i.kU.STUDENT_TEAM_EXPIRED;return r||n}},876:(e,r,n)=>{n.d(r,{t:()=>C});var a=n(411855),i=n(188507),o=n(690159),s=n(244431),l=n(728722),c=n(977235),d=n(576467),u=n(640747),m=n(265851),p=n(76265),h=n(910164),_=n(648800),g=n(736041),f=n(593874),E=n(916348),y=n(278695),b=n(140835),v=n(183739),T=n(313449),I=n(710636),S=n(874360),w=n(895823);function A(e){let r=(0,i.wA)(),n=(0,l.Rs)(v.Aqu,{teamId:e.teamId}),g=(0,E.Gm)();if("loaded"!==n.status||n.data.team?.stripeCustomerId.status!=="loaded")return null;let b=!!(0,c.oA)(n.data.team?.stripeCustomerId),I=[],S=(0,c.oA)(n.data.team?.allProjects),A=S?.length??0,C=S?.filter(e=>e.isViewOnly).length??0,N=S?.filter(e=>e.isInviteOnly).length??0,L=n.data.team?.teamFileCounts?.designFileCount??0,O=n.data.team?.teamFileCounts?.whiteboardFileCount??0,R=parseInt(n.data.team?.teamFileCounts?.slideFileCount??"0",10),P=(e,r,n)=>{e>r&&I.push({limitExceededType:n,limitExceededCount:e-r})};if(P(L,T.WW,"design_file_count"),P(O,T.WW,"whiteboard_file_count"),g&&P(R,T.WW,"slides_file_count"),P(A,T.Wf,"total_project_count"),A<=T.Wf&&(P(C,T.h,"view_only_project_count"),P(N,T.PX,"invite_only_project_count")),0===I.length)return null;let D=e.canEditTeam?(0,p.tx)("locked_team.card.title"):(0,p.tx)("locked_team.card.title_viewer"),k=e.canEditTeam?b?(0,p.tx)("locked_team.card.editor_previously_paid_description"):(0,p.tx)("locked_team.card.editor_previously_on_trial_description"):(0,p.tx)("locked_team.card.view_only_description"),M=e.canEditTeam?b?(0,p.tx)("locked_team.card.editor_previously_paid_cta"):(0,p.tx)("locked_team.card.editor_previously_on_trial_cta"):null,F=e=>{switch(e.limitExceededType){case"design_file_count":return(0,p.tx)("locked_team.card.move_figma_design_files",{numDesignFiles:e.limitExceededCount});case"whiteboard_file_count":return(0,p.tx)("locked_team.card.move_figjam_boards",{numFigjamFiles:e.limitExceededCount});case"slides_file_count":return(0,p.tx)("locked_team.card.move_figma_slides_files",{numSlidesFiles:e.limitExceededCount});case"total_project_count":return(0,p.tx)("locked_team.card.move_projects",{numProjects:e.limitExceededCount});case"view_only_project_count":return(0,p.tx)("locked_team.card.change_permissions_from_view_only",{numViewOnlyProjects:e.limitExceededCount});case"invite_only_project_count":return(0,p.tx)("locked_team.card.change_permissions_from_invite_only",{numInviteOnlyProjects:e.limitExceededCount});default:throw Error("Not a valid starter plan limit")}};return a.createElement(_.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:e.width,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},a.createElement("div",{className:m.s.flex.justifyBetween.wFull.$},a.createElement("div",{className:m.s.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},a.createElement(o.s,{className:w.K})),!!e.onClose&&a.createElement(u.Jn,{onClick:e.onClose})),a.createElement("div",{className:m.s.font14.fontSemiBold.lh24.$},D),a.createElement("div",{className:m.s.font13.lh24.$},k),e.canEditTeam&&a.createElement("div",{className:m.s.wFull.bb1.bSolid.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"list"},I.map(e=>a.createElement("div",{key:e.limitExceededType,className:m.s.flex.itemsCenter.gap10.wFull.bt1.bSolid.pb12.pt12.fontMedium.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"listitem"},a.createElement(s.U,{className:m.s.minW24.$}),a.createElement("div",{className:m.s.font11.lh16.$},F(e))))),!!M&&a.createElement("div",{className:m.s.flex.justifyEnd.wFull.$},a.createElement(d.vd,{onClick:()=>r(f.WX({teamId:e.teamId})),className:m.s.if(e.fullWidthButton,m.s.maxWFull.wFull).hAuto.lh16.preWrap.pt8.pb8.$,trackingProperties:{teamId:e.teamId,trackingDescriptor:b?y.c.UPGRADE_TO_PROFESSIONAL:y.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN}},M)))}let C=(0,I.Ju)(function(e){let r=(0,i.wA)();return a.createElement(S.aF,{size:500},a.createElement(b.fu,{name:"Locked State Team Overview Modal",properties:{teamId:e.teamId}},a.createElement(A,{...e,width:452,onClose:()=>r(g.Lo()),noPaddingOrBorder:!0})))},"LockedStateOverviewModal")},501238:(e,r,n)=>{n.d(r,{c:()=>w,s:()=>N});var a=n(411855),i=n(471923),o=n(888624),s=n(556843),l=n(138225),c=n(266838),d=n(38678),u=n(841962),m=n(747484),p=n(265851),h=n(76265),_=n(15092),g=n(492366),f=n(710636),E=n(825280),y=n(770129),b=n(204441),v=n(885792),T=n(536520),I=n(695141),S=n(170339),w=(e=>(e.ACCOUNT="ACCOUNT",e.COMMUNITY="COMMUNITY",e.NOTIFICATIONS="NOTIFICATIONS",e.SESSIONS="SESSIONS",e.SECURITY="SECURITY",e))(w||{});let A={ACCOUNT:I.g,COMMUNITY:y.C,NOTIFICATIONS:function(){return(0,_.iZ)()?a.createElement(b.v,null):null},SESSIONS:T.p,SECURITY:v.m},C={ACCOUNT:()=>(0,h.t)("settings.account_setting.account"),COMMUNITY:()=>(0,h.t)("settings.account_setting.community"),NOTIFICATIONS:()=>(0,h.t)("settings.account_setting.notifications"),SESSIONS:()=>(0,h.t)("settings.account_setting.sessions"),SECURITY:()=>(0,h.t)("settings.account_setting.security")},N=(0,f.Ju)(function(e){let r=i.hS(e),n=(0,u.kc)().user_settings_tab,{tab:_}=e,f=m.rr?window.innerWidth:Math.min(.7*window.innerWidth,650),[y,b]=a.useState({activeSubView:null,properties:{}}),v=a.useMemo(()=>({accountModalSubViewData:y,setAccountModalSubViewData:b}),[y,b]),T=()=>{b({activeSubView:null,properties:{}})},[I,N,L]=o.t.useTabs({ACCOUNT:!0,COMMUNITY:!0,NOTIFICATIONS:!0,SESSIONS:!n,SECURITY:!!n},{defaultActive:_}),O=a.useMemo(()=>y.activeSubView?a.createElement(s.Y9,null,a.createElement(s.hE,null,a.createElement("div",{className:S.Gv},a.createElement("span",{className:p.s.mr2.$},a.createElement(l.K,{"aria-label":(0,h.t)("general.back"),onClick:T},a.createElement(d.J,null))),function(e){if(e.activeSubView===E.U7.PURCHASES)return e.properties.purchasePageType===g.po.ACTIVE?(0,h.t)("settings.account_setting.purchases"):(0,h.t)("settings.account_setting.inactive")}(y)))):a.createElement(s.Y9,null,a.createElement(s.r1,null,(0,h.t)("general.settings")),a.createElement(o.t.TabStrip,{manager:L},Object.values(w).map(e=>a.createElement(o.t.Tab,{...I[e],key:e},C[e]())))),[y,L,I]);return a.createElement(E.Tk.Provider,{value:v},a.createElement(c.bL,{manager:r,width:f,height:"dynamic"},a.createElement(s.vo,null,O,a.createElement(s.nB,null,Object.values(w).map(e=>a.createElement(o.t.TabPanel,{...N[e],key:e},A[e]()))))))},"ACCOUNT_SETTINGS_MODAL",f.ZU.YES)},191934:(e,r,n)=>{n.d(r,{C:()=>L});var a=n(411855),i=n(188507),o=n(471923),s=n(266838),l=n(556843),c=n(599526),d=n(499325),u=n(520244),m=n(890882),p=n(841962),h=n(918091),_=n(621847),g=n(265851),f=n(76265),E=n(648800),y=n(233950),b=n(115425),v=n(736041),T=n(125682),I=n(597185),S=n(710636),w=n(291489),A=n(830654);let C=[1,7,30,90];function N({scope:e,accessLevel:r,onAccessLevelChange:n}){let o=(0,i.wA)(),s=(0,T.Um)(),l=(0,A.qq)(e);return a.createElement(E.Y,{direction:"horizontal",horizontalAlignItems:"space-between",verticalAlignItems:"start"},a.createElement(E.Y,{direction:"vertical",spacing:4},a.createElement(y.E,null,l.name),a.createElement(y.E,{color:"secondary"},l.description)),a.createElement(E.Y,{width:128,horizontalAlignItems:"end"},a.createElement(w.H,{dispatch:o,onChange:r=>{n(e,r)},options:l.levels.map(e=>({type:"option",key:e,text:(0,A.E0)(e)})),value:r,dropdownShown:s,dropdownData:{dropdownId:e},id:`token-scope-selector-${e}`})))}let L=(0,S.Ju)(function(e){let[r,n]=a.useState(""),[T,S]=a.useState(30),[w,L]=a.useState({[A.IJ.FILE_CONTENT]:A.eK.READ,[A.IJ.VARIABLES]:A.eK.NO_ACCESS,[A.IJ.COMMENTS]:A.eK.NO_ACCESS,[A.IJ.LIBRARY_ANALYTICS]:A.eK.NO_ACCESS,[A.IJ.DEV_RESOURCES]:A.eK.NO_ACCESS,[A.IJ.WEBHOOKS]:A.eK.NO_ACCESS,[A.IJ.CODE_CONNECT]:A.eK.NO_ACCESS}),O=o.hS(e),{org:R}=e,P=(0,i.wA)(),D=e=>0===e?(0,f.t)("tokens.settings.dev_token_modal.no_expiration_option"):(0,f.t)("tokens.settings.dev_token_modal.expiration_option",{numDays:e}),k=a.useMemo(()=>T>0?(0,f.tx)("tokens.settings.dev_token_modal.expiration_description",{expiry:(0,m.A)().add(T,"day").toDate()}):(0,f.tx)("tokens.settings.dev_token_modal.expiration_description_never"),[T]),M=e=>{S(Number(e.currentTarget.id))},F=(e,r)=>{L({...w,[e]:r})};return a.createElement(s.bL,{manager:O,width:"lg"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,f.t)("tokens.settings.generate_new_token"))),a.createElement(l.nB,null,a.createElement(E.Y,{direction:"vertical",spacing:16,padding:16},a.createElement(y.E,null,(0,f.tx)("tokens.settings.dev_token_modal.description")),a.createElement(_.ks,{className:g.s.wFull.$,placeholder:(0,f.t)("tokens.settings.dev_token_modal.name_placeholder"),value:r,onChange:e=>{n(e.target.value)},autoFocus:!0,autoComplete:"off"}),a.createElement(E.Y,{direction:"vertical",spacing:8},a.createElement(y.E,{fontSize:13},(0,f.tx)("tokens.settings.dev_token_modal.expiration_header")),(0,p.kc)().ext_dev_token_modal_fpl_migration?a.createElement(c.bL,{value:String(T),onChange:e=>{e&&S(Number(e))}},a.createElement(c.l9,{label:a.createElement(d.h,null,(0,f.tx)("tokens.settings.dev_token_modal.expiration_header")),description:k}),a.createElement(c.mc,null,C.map(e=>a.createElement(c.c$,{key:e,value:String(e)},D(e))),a.createElement(c.c$,{key:"0",value:"0"},(0,f.tx)("tokens.settings.dev_token_modal.no_expiration_option")))):a.createElement(h.Ve,{label:D(T),className:g.s.w150.$,options:[...C.map(e=>a.createElement(h.MM,{key:e,id:String(e),checked:T===e,onClick:M},D(e))),a.createElement(h.wv,{key:"separator"}),a.createElement(h.MM,{key:"0",id:"0",checked:0===T,onClick:M},(0,f.tx)("tokens.settings.dev_token_modal.no_expiration_option"))]}),!(0,p.kc)().ext_dev_token_modal_fpl_migration&&a.createElement(y.E,{color:"secondary"},k)),a.createElement(E.Y,{direction:"vertical"},a.createElement(y.E,{fontSize:13},(0,f.tx)("tokens.settings.dev_token_modal.scopes_header")),a.createElement(E.Y,{direction:"vertical",spacing:16},a.createElement(N,{scope:A.IJ.FILE_CONTENT,accessLevel:w[A.IJ.FILE_CONTENT],onAccessLevelChange:F}),((0,p.kc)().ds_variables_pp_force_enterprise||R&&(0,I.kA)(R))&&a.createElement(N,{scope:A.IJ.VARIABLES,accessLevel:w[A.IJ.VARIABLES],onAccessLevelChange:F}),a.createElement(N,{scope:A.IJ.COMMENTS,accessLevel:w[A.IJ.COMMENTS],onAccessLevelChange:F}),a.createElement(N,{scope:A.IJ.DEV_RESOURCES,accessLevel:w[A.IJ.DEV_RESOURCES],onAccessLevelChange:F}),R&&(0,I.kA)(R)&&a.createElement(N,{scope:A.IJ.LIBRARY_ANALYTICS,accessLevel:w[A.IJ.LIBRARY_ANALYTICS],onAccessLevelChange:F}),a.createElement(N,{scope:A.IJ.WEBHOOKS,accessLevel:w[A.IJ.WEBHOOKS],onAccessLevelChange:F}),(0,p.kc)().dt_figmadoc&&R&&a.createElement(N,{scope:A.IJ.CODE_CONNECT,accessLevel:w[A.IJ.CODE_CONNECT],onAccessLevelChange:F}))))),a.createElement(l.wi,null,a.createElement(l.jk,null,a.createElement(u.$n,{onClick:()=>P(v.Lo()),variant:"secondary"},(0,f.tx)("tokens.settings.dev_token_modal.cancel")),a.createElement(u.$n,{type:"submit",disabled:!(r&&Object.values(w).some(e=>e!==A.eK.NO_ACCESS)),variant:"primary",onClick:()=>{let e=(0,A.Wc)(w);P((0,b.c)({desc:r,scopes:e,expiration:0===T?void 0:m.A.duration({days:T}).asSeconds()})),P(v.Lo())}},(0,f.tx)("tokens.settings.dev_token_modal.cta"))))))},"DevTokenModal")},432414:(e,r,n)=>{n.d(r,{S:()=>g});var a=n(411855),i=n(188507),o=n(621847),s=n(299009),l=n(76265),c=n(553362),d=n(705011),u=n(881088),m=n(710636),p=n(271271),h=n(874360),_=n(955201);function g(e){let{profileId:r,profileHandle:n,emptyStateText:m}=e,h=(0,i.wA)(),[g,f]=a.useState([]),[E,y]=a.useState(!1);a.useEffect(()=>{y(!0),u.s.getRestrictedProfiles({profileId:r}).then(({data:e})=>{f(e.meta),y(!1)})},[r]);let b=(e,r)=>{f(g.map(n=>n.id===e?{...n,is_restricted_by_current_user:r}:n))},v=(e,r)=>{b(e,r),h(c.F.enqueue({message:r?(0,l.t)("community.comments.restricted_this_user_s_comments"):(0,l.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,l.t)("community.undo"),action:()=>{r?I(e):T(e)}}}))},T=r=>{h(d._8({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!0)}))},I=r=>{h(d.dL({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!1)}))},S=g&&g.length>0;if(!m&&!S)return a.createElement(a.Fragment,null);if(E)return a.createElement(s.kt,null);let w=S?a.createElement(a.Fragment,null,n?(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_profile_handles_community_files_and_plugins",{profileHandle:n}):(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_your_community_files_and_plugins")):a.createElement(a.Fragment,null,m," ",(0,l.tx)("community.comments.learn_more_about_managing_comments_on_your_files_and_plugins_in_community",{learnMoreLink:a.createElement(o.Us,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,l.tx)("general.learn_more"))})," "),A=a.createElement("div",{className:e.wrapperClassName?e.wrapperClassName:""},a.createElement("div",{className:_.tB},g.map(e=>a.createElement(p.y,{profile:e,key:e.profile_handle,rightSide:e.is_restricted_by_current_user?a.createElement(o.nR,{onClick:I.bind(null,e.id)},(0,l.tx)("community.comments.unrestrict")):a.createElement(o.$$,{onClick:T.bind(null,e.id)},(0,l.tx)("community.comments.restrict"))}))));return a.createElement(a.Fragment,null,a.createElement("div",{className:_.bV},(0,l.tx)("settings_tab.community_commenters_label")),w,A)}(0,m.Ju)(function(e){return a.createElement(h.aF,{className:_.Iy,popStack:!0},a.createElement(g,{profileId:e.profileId,profileHandle:e.profileHandle,emptyStateText:e.emptyStateText}))},"ProfilesBlockedFromCommentingModal")},830654:(e,r,n)=>{n.d(r,{E0:()=>c,IJ:()=>o,Wc:()=>u,av:()=>d,eK:()=>s,qq:()=>l});var a=n(76265),i=(e=>(e.FILES_READ="files:read",e.FILE_CODE_CONNECT_READ="file_code_connect:read",e.FILE_CODE_CONNECT_WRITE="file_code_connect:write",e.FILE_COMMENTS_WRITE="file_comments:write",e.FILE_DEV_RESOURCES_READ="file_dev_resources:read",e.FILE_DEV_RESOURCES_WRITE="file_dev_resources:write",e.FILE_VARIABLES_READ="file_variables:read",e.FILE_VARIABLES_WRITE="file_variables:write",e.LIBRARY_ANALYTICS="library_analytics:read",e.WEBHOOKS_WRITE="webhooks:write",e))(i||{}),o=(e=>(e.FILE_CONTENT="FILE_CONTENT",e.VARIABLES="VARIABLES",e.CODE_CONNECT="CODE_CONNECT",e.COMMENTS="COMMENTS",e.DEV_RESOURCES="DEV_RESOURCES",e.LIBRARY_ANALYTICS="LIBRARY_ANALYTICS",e.WEBHOOKS="WEBHOOKS",e))(o||{}),s=(e=>(e.NO_ACCESS="NO_ACCESS",e.READ="READ",e.WRITE="WRITE",e.READ_WRITE="READ_WRITE",e))(s||{});function l(e){switch(e){case"FILE_CONTENT":return{name:(0,a.t)("tokens.settings.dev_token_modal.scope.file_content_name"),description:(0,a.t)("tokens.settings.dev_token_modal.scope.file_content_description"),levels:["NO_ACCESS","READ"]};case"VARIABLES":return{name:(0,a.t)("tokens.settings.dev_token_modal.scope.variables_name"),description:(0,a.t)("tokens.settings.dev_token_modal.scope.variables_description"),levels:["NO_ACCESS","READ","READ_WRITE"]};case"COMMENTS":return{name:(0,a.t)("tokens.settings.dev_token_modal.scope.comments_name"),description:(0,a.t)("tokens.settings.dev_token_modal.scope.comments_description"),levels:["NO_ACCESS","WRITE"]};case"DEV_RESOURCES":return{name:(0,a.t)("tokens.settings.dev_token_modal.scope.dev_resources_name"),description:(0,a.t)("tokens.settings.dev_token_modal.scope.dev_resources_description"),levels:["NO_ACCESS","READ","WRITE"]};case"LIBRARY_ANALYTICS":return{name:(0,a.t)("tokens.settings.dev_token_modal.scope.library_analytics_name"),description:(0,a.t)("tokens.settings.dev_token_modal.scope.library_analytics_description"),levels:["NO_ACCESS","READ"]};case"WEBHOOKS":return{name:(0,a.t)("tokens.settings.dev_token_modal.scope.webhooks_name"),description:(0,a.t)("tokens.settings.dev_token_modal.scope.webhooks_description"),levels:["NO_ACCESS","WRITE"]};case"CODE_CONNECT":return{name:(0,a.t)("tokens.settings.dev_token_modal.scope.code_connect_name"),description:(0,a.t)("tokens.settings.dev_token_modal.scope.code_connect_description"),levels:["NO_ACCESS","WRITE"]}}}function c(e){switch(e){case"NO_ACCESS":return(0,a.t)("tokens.settings.dev_token_modal.scope.no_access");case"READ":return(0,a.t)("tokens.settings.dev_token_modal.scope.read_only");case"WRITE":return(0,a.t)("tokens.settings.dev_token_modal.scope.write_only");case"READ_WRITE":return(0,a.t)("tokens.settings.dev_token_modal.scope.read_write");default:return""}}function d(e){let r={FILE_CONTENT:"NO_ACCESS",VARIABLES:"NO_ACCESS",COMMENTS:"NO_ACCESS",DEV_RESOURCES:"NO_ACCESS",LIBRARY_ANALYTICS:"NO_ACCESS",WEBHOOKS:"NO_ACCESS",CODE_CONNECT:"NO_ACCESS"};for(let n of e)switch(n){case"files:read":r.FILE_CONTENT="READ";break;case"file_code_connect:read":case"file_code_connect:write":"NO_ACCESS"!==r.CODE_CONNECT?r.CODE_CONNECT="READ_WRITE":"file_code_connect:read"===n?r.CODE_CONNECT="READ":r.CODE_CONNECT="WRITE";break;case"file_comments:write":r.COMMENTS="WRITE";break;case"file_dev_resources:read":case"file_dev_resources:write":"NO_ACCESS"!==r.DEV_RESOURCES?r.DEV_RESOURCES="READ_WRITE":"file_dev_resources:read"===n?r.DEV_RESOURCES="READ":r.DEV_RESOURCES="WRITE";break;case"file_variables:read":case"file_variables:write":"NO_ACCESS"!==r.VARIABLES?r.VARIABLES="READ_WRITE":"file_variables:read"===n?r.VARIABLES="READ":r.VARIABLES="WRITE";break;case"library_analytics:read":r.LIBRARY_ANALYTICS="READ";break;case"webhooks:write":r.WEBHOOKS="WRITE"}return r}function u(e){let r=[];return Object.entries(e).forEach(([e,n])=>{if("NO_ACCESS"!==n)switch(e){case"FILE_CONTENT":r.push("files:read");break;case"VARIABLES":"READ"===n?r.push("file_variables:read"):(r.push("file_variables:read"),r.push("file_variables:write"));break;case"COMMENTS":r.push("file_comments:write");break;case"DEV_RESOURCES":"READ"===n?r.push("file_dev_resources:read"):(r.push("file_dev_resources:read"),r.push("file_dev_resources:write"));break;case"LIBRARY_ANALYTICS":r.push("library_analytics:read");break;case"WEBHOOKS":r.push("webhooks:write");break;case"CODE_CONNECT":"READ"===n?r.push("file_code_connect:read"):(r.push("file_code_connect:read"),r.push("file_code_connect:write"))}}),r}},754648:(e,r,n)=>{n(411855),n(972142),n(693565),n(76265),n(7619),n(419378),n(492366),n(688656)},298326:(e,r,n)=>{n.d(r,{K:()=>I});var a=n(411855),i=n(188507),o=n(471923),s=n(266838),l=n(556843),c=n(138225),d=n(520244),u=n(908315),m=n(747484),p=n(132939),h=n(76265),_=n(648800),g=n(233950),f=n(7842),E=n(736041),y=n(733050),b=n(688656),v=n(710636),T=n(552899);let I=(0,v.Ju)(function(e){let{localPlugin:r}=e,n=(0,i.wA)(),v=o.hS({open:e.open,onClose:e.onClose}),{error:I}=r;if(!I)return null;let S=(0,y.M)(),w=!!S?.isCompatibleWith({desktopVersion:80}),A=m.Ay.mac?(0,h.tx)("universal_insert.show_in_finder"):(0,h.tx)("universal_insert.show_in_explorer");return a.createElement(s.bL,{manager:v,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,h.t)("universal_insert.manifest_error_title"))),a.createElement(l.nB,null,a.createElement(_.Y,{direction:"horizontal",horizontalAlignItems:"space-between",width:"fill-parent",verticalAlignItems:"start"},a.createElement(_.Y,{backgroundColor:"secondary",padding:4,width:"fill-parent",cornerRadius:3},a.createElement(g.E,{color:"secondary",fontSize:13,fontFamily:"monospace"},I.text)),a.createElement(c.K,{onClick:()=>{n(f.lW({stringToCopy:I.text}))},"aria-label":(0,h.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,h.t)("inspect_panel.copy")}},a.createElement(p.U,{svg:T.A},a.createElement(u.a,null))))),a.createElement(l.wi,null,a.createElement(l.jk,null,a.createElement(d.$n,{onClick:()=>n(E.Lo()),variant:"secondary"},(0,h.tx)("universal_insert.cancel")),a.createElement(d.$n,{onClick:()=>{w?S?.openExtensionManifest(r.localFileId):S?.openExtensionDirectory(r.localFileId)},variant:"primary"},w?(0,h.tx)("universal_insert.edit_manifest"):A)))))},"DevelopmentResourceErrorModal")},356394:(e,r,n)=>{n.d(r,{A:()=>p});var a=n(411855),i=n(188507),o=n(555085),s=n(265851),l=n(76265),c=n(233950),d=n(950759),u=n(48806),m=n(413781);function p({localResource:e,publishedResource:r}){let{error:n,localFilePath:i}=e||{},s=(0,u.Pt)(n?.type,e);if(!e&&r)return a.createElement(_,{resource:r});if(!e||null==i)return null;if(!n)return a.createElement(o.R,{className:m.cV,text:i.replace("/manifest.json","")});if(!s)return null;let{action:l,msg:d,buttonText:p}=s;return a.createElement(a.Fragment,null,a.createElement(c.E,{color:"danger"},d),a.createElement(h,{onClick:l,isError:!0},p))}function h({children:e,onClick:r,isError:n}){return a.createElement("button",{onClick:e=>{e.stopPropagation(),r()},className:s.s.underline.bgTransparent.with({colorTextDanger:n,colorTextSecondary:!n}).$},e)}function _({resource:e}){let r=(0,i.wA)();return a.createElement("div",{className:m.cV},a.createElement(h,{onClick:()=>{r((0,d.JZ)({resourceType:e.is_widget?"widget":"plugin"}))}},a.createElement(c.E,null,(0,l.tx)("universal_insert.locate_local_version_text"))))}},2408:(e,r,n)=>{n.d(r,{ur:()=>p,xY:()=>h});var a=n(411855),i=n(188507);n(629019),n(621847);var o=n(693565),s=n(76265),l=n(870355),c=n(688656),d=n(467593),u=n(471174),m=(e=>(e.AUTO="auto",e.CONSTRAINED="constrained",e))(m||{});function p(){let e=(0,i.wA)(),r=a.useCallback(r=>{r.stopPropagation(),e(l.v({}))},[e]);return a.createElement("button",{className:d.qS,onClick:r},(0,s.tx)("community.buyer.update_payment"))}function h(){return a.createElement("div",{className:d.QW,"data-tooltip-type":c.Ib.TEXT,"data-tooltip":(0,s.t)("community.buyer.update_payment_info_to_retain_access")},a.createElement(o.B,{svg:u.A}))}},81818:(e,r,n)=>{n.d(r,{E0:()=>o,wR:()=>s});var a=n(991458);n(76265),n(708862);var i=n(488527);(0,a.hG)(i.BuT),(0,a.hG)(i.yUQ),(0,a.hG)(i.XaD),(0,a.hG)(i.fWT),(0,a.hG)(i.nnJ);let o=(0,a.hG)(i.tui),s=(0,a.hG)(i.i_6)},234780:(e,r,n)=>{n(411855),n(747484),n(563192),n(137565),n(693565),n(76265),n(688656)},62425:(e,r,n)=>{n.d(r,{PE:()=>g});var a=n(411855),i=n(188507),o=n(520244),s=n(326612),l=n(76265),c=n(648800),d=n(233950),u=n(939380),m=n(263352);function p(e){return{...e.is_widget?{widget_id:e.id}:{plugin_id:e.id},src:u.Nn.INVITE_TILE}}function h({resource:e}){let r=function(e){let r=(0,i.wA)(),n=p(e);return()=>r((0,u.dx)(n))}(e),n=function(e){let r=(0,i.wA)(),n=p(e);return()=>r((0,u.MZ)(n))}(e);return a.createElement(c.Y,null,a.createElement(o.$n,{onClick:e=>{e.stopPropagation(),n()},variant:"secondary"},(0,l.tx)("community.detail_view.decline")),a.createElement(o.$n,{onClick:e=>{e.stopPropagation(),r()},variant:"primary"},(0,l.tx)("community.detail_view.accept")))}function _({resource:e}){let r=(0,m.uF)(e),n=e.creator,i=e.is_widget?"widget":"plugin",o=`/community/${i}/${e.id}`;return a.createElement(d.E,null,(0,l.tx)("universal_insert.invited_you_to_publish",{ownerName:a.createElement(d.E,{fontWeight:"medium"},n.handle),resourceName:a.createElement(s.N,{newTab:!0,href:o,onClick:e=>{e.stopPropagation()},trusted:!0},a.createElement(d.E,{fontWeight:"medium"},r.name))}))}function g({resource:e}){return a.createElement(c.Y,{direction:"vertical"},a.createElement(_,{resource:e}),a.createElement(h,{resource:e}))}},108293:(e,r,n)=>{n(411855)},307487:(e,r,n)=>{n(411855),n(265851)},514849:(e,r,n)=>{n.d(r,{mk:()=>c});var a=n(411855);n(188507);var i=n(991458);n(108982),n(875877);var o=n(612724);n(419378),n(788843),n(888807),n(354549),n(648735),n(387583),n(176160),n(661137),n(15092),n(178380),n(354465),n(662750),n(694630),n(895812),n(7395),n(678599),n(767731);var s=n(81818),l=n(488527);function c(e,r){let n=(0,a.useRef)(null),i=(0,a.useRef)(!1);return r.every(e=>!!e)&&!i.current&&(n.current=e,i.current=!0),null!==n.current?n.current:e}(0,i.hG)(l.Yr1),(0,i.hG)(l.Eg1),new o.Mi(s.wR,s.wR+s.E0),a.createContext(null)},137370:(e,r,n)=>{n.d(r,{I:()=>C});var a=n(411855),i=n(109388),o=n(188507),s=n(351966),l=n(805014),c=n(629019),d=n.n(c),u=n(612724),m=n(826943),p=n(284807),h=n(76265),_=n(628220),g=n(366172),f=n(35269),E=n(15092),y=n(567095),b=n(688656),v=n(182390),T=n(915265),I=n(482868),S=n(589781),w=n(861412);function A({children:e,mini:r,user:n}){return r?a.createElement("div",{className:d()(w.HG,w.ET)},e):a.createElement("div",{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":n.name||n.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:d()(w.HG)},e)}function C({user:e,hideName:r,mini:n,searchQuery:i,triggeredFrom:s}){let c=e.hi_res_img_url||e.img_url,d=`${c}?c=1`,m=(0,v.$L)(e.id,v.us),h=(0,T.LL)(d,e.name||e.handle||"",m),b=(0,E.TA)(),S=(0,I.b)(),C=(0,o.wA)(),P=a.useCallback(()=>{C(_.F9({currentUserId:b??void 0,storeInRecentsKey:y.$A.FigJam,item:{id:e.id,user:e,type:y.vt.FaceStamp}}))},[b,C,e]),{dragState:D,onInsertableResourcePointerDown:k}=(0,f.Z)({iconSrc:h,insertAction:r=>{let{dropPosition:n}=r,a=r.pointerPercentageOffset?r.pointerPercentageOffset.x:0,i=r.pointerPercentageOffset?r.pointerPercentageOffset.y:0,o=new u.Mi(50,50),s=n.subtract(new u.Mi(a*o.x,i*o.y)).subtract(new u.Mi(5,5));(0,T.xG)(h,s.x,s.y,e.id,"drag",l.zkO.USER),P(),S()},clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:S,resource:{id:e.id,name:e.name||"",img:h},triggeredFrom:s,searchQuery:i,mini:n});return n&&!h?null:a.createElement(A,{mini:n,user:e},h?a.createElement(p.n.recordableDiv,{className:w.RX,onPointerDown:k},a.createElement(O,{stampImageUrl:h,username:e.handle||"",onClick:()=>{let r=g.Y5.getViewportInfo();(0,T.xG)(h,r.offsetX,r.offsetY,e.id,"click",l.zkO.USER),P(),S()},dragging:null!==D,mini:n}),a.createElement(R,{dragState:D,imageUrl:h}),!r&&a.createElement(L,{username:e.name||e.handle||""})):a.createElement(a.Fragment,null,a.createElement(N,{mini:n}),!r&&a.createElement(L,{username:""})))}function N({mini:e}={}){return a.createElement("div",{className:d()(w.HG,{[w.ET]:e,[w.M4]:!e})},a.createElement("div",{className:d()(w.eP,w.iE)}),!e&&a.createElement("div",{className:d()(w.t$,w.OP)}))}function L({username:e}){return a.createElement("div",{title:e,className:w.OP},e)}function O(e){return a.createElement(s.E,{className:w.RT,recordingKey:"facestamp",onClick:e.onClick,htmlAttributes:{"data-testid":`facestamp-${e.username}${e.mini?"-mini":""}`}},a.createElement(m.oW,{draggable:!1,src:e.stampImageUrl,className:d()(w.iE,{[w.Jy]:e.dragging,[w.dG]:e.mini}),alt:(0,h.t)("whiteboard.face_stamps.aria_label",{userName:e.username})}))}function R(e){if(!e.dragState?.dragPosition||!e.dragState.grabbedPointerPercentageOffset)return null;let r=function(){let{zoomScale:e}=g.Y5.getViewportInfo();return new u.Mi(50,50).scale(e)}(),n=e.dragState.dragPosition.subtract(new u.Mi(e.dragState.grabbedPointerPercentageOffset.x*r.x,e.dragState.grabbedPointerPercentageOffset.y*r.y));return(0,i.createPortal)(a.createElement(m.oW,{alt:"",className:d()(S.$J,{[S.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:n.x,top:n.y,width:r.x,height:r.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},604938:(e,r,n)=>{n.d(r,{qK:()=>c});var a=n(411855),i=n(188507),o=n(419899),s=n(176160),l=n(421023);function c(){let e=(0,i.d4)(e=>e.recentlyUsed.faceStamps),r=function(){let e=!!s.q5()?.org,r=(0,i.d4)(e=>(0,l.zg)(e.selectedView)&&!e.user);return!!(e&&!r)}(),n=(0,o.o)();return a.useMemo(()=>n&&r?e.figjam.map(e=>e.user):[],[n,e,r])}n(567095)},345049:(e,r,n)=>{n(411855)},411216:(e,r,n)=>{n.d(r,{Yx:()=>E});var a=n(411855),i=n(188507),o=n(805014),s=n(851169);n(563192),n(284807);var l=n(76265);n(894756);var c=n(736041);n(628220),n(798361),n(721278),n(43434),n(694630),n(567095),n(108293),n(514849),n(345049),n(482868);var d=n(220482),u=n(58590),m=n(710636),p=n(991944),h=n(306447),_=n(420567);let g="delightful-toolbar-media-button",f="InsertMediaModal";function E(e){let r=function(e){switch(e){case"Table":return o.NLJ.TABLE;case"CodeBlock":return o.NLJ.CODE_BLOCK;case"MindMap":return o.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;case"Text":return o.NLJ.TYPE;case"Section":return o.NLJ.SECTION;default:throw Error(`Unknown tool: ${e}`)}}(e),n=()=>{s.l7.user("click-insert-tool",()=>o.glU.createNodeAtViewportCenterFromTool(r))};return{insertToolWithDragAction:e=>{let{dropPosition:a,isClick:i}=e;i?n():s.l7.user("drag-insert-tool",()=>o.glU.createNodeFromTool(r,a.x,a.y))},insertToolOnClickAction:n}}(0,m.Ju)(function(){let e=(0,i.wA)(),r=(0,i.d4)(e=>!!e.modalShown?.data?.shouldMountCenter),n=a.useRef(null),s=r?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:g},{initialModalPosition:m,modalPosition:E,setModalPosition:y}=(0,u.ts)(s,157,320),b=a.useCallback(()=>{o.glU.triggerAction("set-tool-default",null),e(c.ES({type:f}))},[e]),v=a.useCallback(e=>{y(e)},[y]),T=!E||!!m?.equals(E);return(a.useEffect(()=>{let e=e=>{let r=n.current?.getEl(),a=(0,d.Tc)(g);if(!r||!a)return;let i=r.contains(e.target),o=a.contains(e.target);!T||i||o||b()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[b,T]),m)?a.createElement(p.vx,{ref:n,initialPosition:m,initialWidth:320,title:(0,l.t)("whiteboard.embeds.insert_embed_modal.title"),onClose:b,onDragStart:()=>o.glU.triggerActionInUserEditScope("set-tool-default",null),onDragEnd:v,dragHeaderOnly:!0,arrowRelativeX:r?void 0:160,arrowPosition:p.F_.BOTTOM,smallArrow:!0,containerClassName:_.jT,headerClassName:_.N1,isFigJam:!0},a.createElement("div",{className:_.hQ,"data-testid":"insert-media-modal"},a.createElement(h.q,{onSuccess:b}))):null},f),n(181634),n(150237)},107712:(e,r,n)=>{n.d(r,{QK:()=>p,zX:()=>m});var a=n(411855),i=n(188507),o=n(728722),s=n(648735),l=n(973393),c=n(58590),d=n(183739),u=n(492366);function m({extensionId:e}){let r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,o.Rs)(d.BB3,{orgId:r});return a.useMemo(()=>n.data?.currentUser?.installedPlugins.find(r=>r.pluginId===e)?.id,[n.data?.currentUser?.installedPlugins,e])}function p(e,r){let n=(0,s.Be)(),a=r===u.vt.PLUGIN?n.plugins[e]:n.widgets[e],o=(0,l.xp)(e),d=(0,l.aQ)(e),p=(0,i.d4)(r=>r.publishedPlugins[e]?o:d),h=m({extensionId:e}),{unsave:_,save:g}=(0,c._i)(e,r,p,h);return{unsave:_,save:g,isSavedForUser:!!(a&&"user"===a.installed_by),isSavedForOrg:!!(a&&"org"===a.installed_by),version:a}}},782392:(e,r,n)=>{var a=n(411855);n(188507),n(629019),n(841962),n(631769),n(918091),n(663844),n(693565);var i=n(76265),o=n(950759);n(747327);var s=n(736041);n(140835),n(648735),n(973393),n(614400),n(58590),n(125682),n(798361),n(354465),n(263352),n(694630),n(492366);var l=n(710636);n(697907),n(929717),n(754648),n(2408),n(81818),n(307487),n(514849),n(482868);var c=n(874360);n(351921),(0,l.Ju)(function({dispatch:e}){return a.createElement(c.Rw,{confirmationTitle:(0,i.t)("whiteboard.inserts.widget_development_error_modal_title"),content:(0,i.t)("whiteboard.inserts.widget_development_error_modal_description"),onConfirm:()=>{e((0,o.JZ)({resourceType:"widget"})),e(s.Lo())},confirmText:(0,i.t)("whiteboard.inserts.widget_development_import_manifest"),size:"small",disableClickOutsideToHide:!0,hideOnConfirm:!1,cancelText:(0,i.t)("whiteboard.inserts.widget_development_error_modal_close"),hideCancel:!1,popStack:!0})},"FigjamPublishedDevelopmentWidgetErrorModal",l.ZU.YES)},616845:(e,r,n)=>{n.d(r,{EJ:()=>I,T9:()=>S,_n:()=>T,lD:()=>w,ms:()=>A});var a=n(411855),i=n(188507);n(281935),n(918091);var o=n(76265),s=n(950759);n(7842),n(736041);var l=n(48806),c=n(648735);n(614400);var d=n(58590),u=n(125682),m=n(661137),p=n(263352);n(492366);var h=n(7395),_=n(585498),g=n(319557);n(697907),n(190263);var f=n(738402),E=n(689954),y=n(929717);function b({pluginId:e,preferences:r}){let{pinnedPlugins:n,pinPlugin:a,unpinPlugin:i}=r;return n.find(r=>r.plugin_id===e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.unpin"),callback:()=>{i(e)}}:{displayText:(0,o.t)("dev_handoff.inspect_panel.pin"),callback:()=>{a(e)}}}function v({plugin:e}){let{callback:r,isPluginSetToAutoRun:n}=(0,_.bE)(e??null);return(0,_.aY)(e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.auto_run"),callback:r,isChecked:n}:null}n(782392);let T="DROPDOWN_TYPE_SAVED_AND_RECENT_ACTIONS_DROPDOWN";function I(e){let r=(0,u.Um)(),n=(0,g.VR)(),i=(0,f.ks)(),s=(0,m.sZ)(),l=(0,c.ll)(),d=v({plugin:e.plugin}),h=[];return(h.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),i&&((0,p.Th)(e.plugin,s,l)&&n.loaded&&h.push(b({pluginId:e.plugin.plugin_id,preferences:n})),d&&h.push(d)),r)?i?a.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h,autoHeight:!0}):a.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h}):null}function S(e){if(!e.localResource&&!e.publishedResource)throw Error("Either localResource or publishedResource is required");let r=(0,f.ks)(),n=(0,i.wA)(),m=(0,u.Um)(),_=Object.values((0,c.$1)()).find(r=>r.plugin_id===e.publishedResource?.id),E=(0,g.VR)(),y=v({plugin:e.publishedResource?(0,p.uF)(e.publishedResource):null}),T=e.localResource||_,I=(0,c.B7)(T?T.plugin_id:e.publishedResource.id),S=(0,c.Ud)(T?T.plugin_id:e.publishedResource.id),w=e.publishedResource||I||S,C=!!w?.versions[w.current_plugin_version_id],N=w?w.is_widget:T?.manifest.containsWidget,L=(0,d.LR)(),O=(0,l.NV)(T,w),R=(0,l.OX)(w),P=(0,l.x2)(T,w,L),D=(0,l.qu)(T),k=(0,l.qi)(C,()=>{T&&n(s.qR(T?.localFileId))});if(!m||!m.data.targetRect)return null;let M=[];(T&&!T.error||w)&&M.push(O),C&&e.viewResource&&M.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),C&&M.push(P),T&&T.error?.type!==h.ho.LOAD&&M.push(D),T||M.push({displayText:(0,o.t)("universal_insert.locate_local_version"),callback:()=>{(0,s.JZ)({resourceType:N?"widget":"plugin"})}});let F=[];w&&C&&E.loaded&&r&&F.push(b({pluginId:w.id,preferences:E})),C&&y&&F.push(y);let x=[];T&&x.push(k),R&&x.push(R);let U=M.some(Boolean)&&(x.some(Boolean)||F.some(Boolean))&&{displayText:"",separator:!0},B=x.some(Boolean)&&F.some(Boolean)&&{displayText:"",separator:!0};return a.createElement(A,{parentRect:m.data.targetRect,lean:"left",minWidth:y?220:120,rootAndSubmenuMaxWidth:y?void 0:190,disableDropdownScrollContainer:!0,hidePointWhenContentOffScreen:!0,dataTestId:"developmentResourceOptionDropdown",items:[...M,U,...F,B,...x].filter(e=>!!e)})}let w="DROPDOWN_TYPE_DEVELOPMENT_RESOURCE_OPTIONS_DROPDOWN";function A(e){let r=(0,i.wA)();return a.createElement(E.j,{...e,dispatch:r,showPoint:!0,type:y.it.DEFAULT,onSelectItem:e=>{e.callback&&e.callback("",null,r)}})}},831723:(e,r,n)=>{n.d(r,{B6:()=>p,Kr:()=>c,Nh:()=>h,Zm:()=>m,kB:()=>_});var a=n(411855);n(188507);var i=n(991458);n(875877),n(972142),n(265851);var o=n(76265);n(17455),n(761263),n(695024),n(708862),n(556747),n(738402),n(234780),n(931539),n(687456);var s=n(488527);n(429607),(0,i.hG)(s.rDe);let l=(0,i.hG)(s.SKA);(0,i.hG)(s.rZj);let c=44;(0,i.hG)(s.wgS);let d=(0,i.hG)(s.iah),u=(0,i.hG)(s.LdP);(0,i.hG)(s.paq);let m=6,p=2;function h(e){if(!e)return{x:d,y:d};let r=document.querySelector("#toolbelt-action-component-insert");if(r){let e=r.getBoundingClientRect(),n=e?e?.top-l-6:u;return{x:e?.x||284,y:n}}{let e=document.querySelector("#toolbar-action-component-insert")?.getBoundingClientRect();return{x:e?.x||284,y:e?.bottom||u}}}function _(e){if(!e.community_publishers?.accepted||0===e.community_publishers.accepted.length)return"";let r=e.community_publishers.accepted[0].name;return 1===e.community_publishers.accepted.length?(0,o.t)("community.resource.by_creator",{spaceChar:" ",creator:r}):(0,o.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:r,others:(0,o.t)("community.resource.by_x_others",{numPublishers:e.community_publishers.accepted.length-1})})}a.createContext(null)},748940:(e,r,n)=>{n.d(r,{s:()=>a});var a=(e=>(e.COMPONENT="component",e.PLUGIN="plugin",e.WIDGET="widget",e))(a||{}),i=(e=>(e[e.MAIN=0]="MAIN",e[e.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",e[e.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",e))(i||{})},961576:(e,r,n)=>{n.d(r,{dr:()=>ef,yG:()=>eE});var a=n(411855),i=n(188507),o=n(236891),s=n(138225),l=n(623817);n(851169);var c=n(629019),d=n.n(c);n(281935),n(801828);var u=n(621847),m=n(153767),p=n(693565),h=n(132939),_=n(238795),g=n(265851),f=n(76265),E=n(910164),y=n(648800),b=n(498230),v=n(818630),T=n(187308),I=n(488130),S=n(419378);n(66683);var w=n(47795),A=n(241162),C=n(140835),N=n(761649),L=n(227362),O=n(648735),R=n(190500),P=n(973393),D=n(375900);n(614400);var k=n(125682),M=n(661137),F=n(314540),x=n(263352),U=n(492366);n(7395);var B=n(688656),V=n(585498),G=n(138157),H=n(202230),W=n(359946);n(885354);var K=n(306325),Y=n(738402),$=n(689954);n(356394);var j=n(2408);n(62425);var z=n(252679);n(782392);var q=n(616845),Z=n(831723);n(748940);var X=n(429607),J=n(292164),Q=n(362679),ee=n(13556),et=n(237494),er=(e=>(e.COMMUNITY="community",e.RECENT="recent",e.DEVELOPMENT="development",e.DEVELOPMENT_MISSING_LOCAL="development_missing_local",e.ORG_PRIVATE="org_private",e.SAVED="saved",e.INVITED="invited",e))(er||{});function en(e){let r=(0,i.d4)(e=>e.orgById);if(e.resource.is_private){let n=e.resource?.org_id&&r[e.resource.org_id]?.name;return a.createElement(p.B,{svg:et.A,className:X.kQ,"data-tooltip-type":B.Ib.TEXT,"data-tooltip":n?(0,f.t)("community.plugins.private_for_plugin_org_name",{orgName:n}):(0,f.t)("community.plugins.private_for_plugin_org")})}return a.createElement(a.Fragment,null)}let ea=a.createContext(null);function ei(){return(0,o.sR)(a.useContext(ea),"Must be wrapped within <FdBrowseWidgetTileContext.Provider>")}let eo=a.createContext(null);function es(){return(0,o.sR)(a.useContext(eo),"Must be wrapped within <FdBrowsePluginTileContext.Provider>")}function el(e,r,n){let i=a.useRef(null),o=a.useCallback(()=>{i.current&&i.current.click()},[i]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationItem:c}=(0,m.M3)({path:r||[0],fauxClick:o,id:e}),d=n&&r&&r.length>=2&&r[0]===Z.B6&&0===r[1];return a.useEffect(()=>{d&&c?.fauxFocus()},[d,c]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationButtonRef:i}}a.memo(function(e){let r=(0,O.Be)(),n=r.plugins[e.pluginId]||r.orgPlugins[e.pluginId],i=(0,O.b4)()[e.pluginId],o=(0,O.cW)()[e.pluginId],s=a.useMemo(()=>"recent"===e.type?i:"org_private"===e.type?(0,x.uF)(o):n,[n,e.type,o,i]),l=(0,k.Um)(),c=l?.type===q._n&&l.data.pluginId===e.pluginId&&l.data.targetRect&&l.data.viewType===e.type,d=eE(e.pluginId,e.type);return a.createElement(ec,{pluginId:e.pluginId,type:e.type,dropdownIsShown:c,runOptionsDropdownIsShown:d,version:s})});let ec=a.memo(function(e){let{dropdownIsShown:r,version:n}=e,o=(0,i.wA)(),{viewPluginDetails:s}=es(),l=a.useCallback(n=>{n.stopPropagation(),r?o(w.oB()):o(w.j7({type:q._n,data:{pluginId:e.pluginId,targetRect:n.currentTarget.getBoundingClientRect(),viewType:e.type}}))},[r,o,e.pluginId,e.type]),c=(0,L.dR)(e.pluginId,"universal-insert"),d=(0,L.Gt)(e.pluginId,"universal-insert"),u=(0,N.t)(e.pluginId,d,c),m=u.length>0,p=e.runOptionsDropdownIsShown&&m,h=a.useRef(null),{validatePublishedPluginInOrgAllowlist:_,isPluginBlockedByAllowlist:g}=(0,O.j1)(e.pluginId),f=(0,L.RK)(e.pluginId),E=a.useCallback(r=>{if(r?.stopPropagation(),_()){if(m){p?o(w.oB()):o(ef({pluginId:e.pluginId,tileType:e.type}));return}f?d():c(),o(A.b({seen_published_plugin_onboarding_modal:!0})),o(A.b({seen_development_plugin_onboarding_modal:!0}))}},[_,m,f,o,p,e.pluginId,e.type,d,c]),y=h.current?.getBoundingClientRect();if(!n)return null;let b=!!(p&&y)||r,v=a.createElement(z._W,{resourceId:e.pluginId,resourceType:U.vt.PLUGIN,parentView:z.nN.TILE,isFauxFocused:b});return a.createElement("div",null,a.createElement(eu,{pluginVersion:n,pluginId:e.pluginId,onOptionsClick:l,optionsButtonIsActive:r,onClick:E,showOnClickDropdownChevron:m,secondaryIcon:a.createElement(en,{resource:n}),primaryCTAButton:v,isFauxFocused:b,visuallyDisabled:g}),a.createElement("div",{ref:h}),p&&y&&a.createElement($.j,{showPoint:!1,lean:"center",items:u,onSelectItem:e=>{e.callback&&e.callback("",null,o)},parentRect:y,dispatch:o}),r&&a.createElement(q.EJ,{viewResource:s,plugin:n}))});function ed({pluginId:e,name:r,icon:n,iconUrl:i}){let[o,s]=a.useState(!!n);return a.createElement("div",{className:d()(o?X.lP:X.vt)},n||a.createElement(G.V,{plugin:{name:r,plugin_id:e,redirect_icon_url:i??""},loading:"lazy",alt:`${r} icon`,onLoad:()=>s(!0)}))}function eu(e){let r;let n=e.pluginVersion?.name??e.localPlugin?.name??"",i=e.pluginVersion?.redirect_icon_url,{isPluginSetToAutoRun:o}=(0,V.bE)(e.pluginVersion??null),c=e.localPlugin?e.localPlugin.manifest.editorType:e.pluginVersion?.manifest.editorType,u=!e.subheader,{viewPluginDetails:m,keyboardNavigationPath:I,shouldFocusFirstItem:S}=es(),{setKeyboardNavigationElement:w,isFauxFocused:A,keyboardNavigationButtonRef:N}=el(`plugin_${n}`,I,!!S),L=(0,C.j6)(),k=(0,P.ul)(e.pluginId),F=Object.values((0,O.$1)()).find(r=>String(r.plugin_id)===e.pluginId),U=(0,x.uF)(k),G=(0,x.pk)(U),H=(0,P.EO)(k)&&!F,W=(0,P.OY)(k),$=(0,P.gn)(k)&&!F,z=(0,M.sZ)(),q=(0,O.ll)(),Z=!F&&(0,D.BF)({org:z,extensionVersion:U??e.pluginVersion,isWidget:!1,allowlistedExtensions:q}),et=e.isCommunityPreview&&!Z&&!e.isDevModeWizard,er=H&&!W?a.createElement(ey,{plugin:k,hideFreeTrialBadge:!0}):$?a.createElement(j.ur,null):et?a.createElement(e_,{pluginId:e.pluginId,buttonRef:N}):void 0,en=(0,v.QP)({resource:k,height:"16",validBadges:[v.op.FREEMUM,v.op.OFF_PLATFORM,v.op.PURCHASED]}),ea=e.metadataOverrideNode??a.createElement(a.Fragment,null,a.createElement("div",{className:X.FV},a.createElement(y.Y,{spacing:4},a.createElement("div",{className:d()(X.B6,{[g.s.colorTextDisabled.$]:e.visuallyDisabled})},n),o&&a.createElement(b.Ex,{height:"16"},(0,f.t)("universal_insert.auto_run")),e.inReview&&a.createElement(T.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,en&&!$&&a.createElement("div",{className:X.UK},en),e.publishingStatusIcon&&a.createElement("div",{className:g.s.colorIcon.$},a.createElement(_.t,{svg:e.publishingStatusIcon})),e.showOnClickDropdownChevron&&a.createElement(p.B,{svg:J.A,className:X.o2})),e.subheader&&a.createElement("div",{className:X.ZK},e.subheader)),er&&a.createElement("div",{className:X.D1},er),e.onOptionsClick&&a.createElement(s.K,{onClick:e.onOptionsClick,"aria-label":(0,f.t)("universal_insert.more_options"),htmlAttributes:{"data-tooltip-type":B.Ib.TEXT,"data-tooltip":(0,f.t)("universal_insert.more_options")}},a.createElement(h.U,{svg:Q.A,fallbackSvg:ee.A,className:e.optionsButtonIsActive?X.F$:X.D1},a.createElement(l.J,null))),e.primaryCTAButton&&a.createElement("div",{style:E.sx.add({alignSelf:"center"}).$},e.primaryCTAButton)),ei=function(e,r){if((0,Y.ks)());else if(e&&r)return!0;return!1}(e.showEditorTypeIcon,c),eo=(0,Y.ks)();r=ei?a.createElement(K.li.IconAndBadgeContainer,null,a.createElement(ed,{pluginId:e.pluginId,name:n,iconUrl:i,icon:e.icon}),a.createElement(K.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},a.createElement(K.dn,{editorType:c,is16x16:!0}))):eo&&G?a.createElement(K.li.IconAndBadgeContainer,null,a.createElement(ed,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:i}),a.createElement(K.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},a.createElement(K.ZA,null))):a.createElement(ed,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:i});let ec=()=>{if((0,R.Cu)({trackingContext:L.name,pluginId:e.pluginId}),H&&!W||Z){m();return}if(e.onClick){e.onClick();return}m()};return a.createElement("div",{className:d()(u?X.$C:X.MJ,A||e.isFauxFocused?X.c6:void 0,e.isDevModeWizard?X.NH:void 0),onClick:ec,role:"button",tabIndex:0,ref:I?w:void 0},a.createElement("button",{onClick:e=>{e.stopPropagation(),ec()},ref:et?void 0:N,"data-testid":"plugin-tile-button"}),a.createElement("div",{className:X.ot},e.isNotification&&a.createElement("div",{className:X.Vx}),r),ea)}function em(e){let r=useDispatch(),n=useLocalWidgets(),a=React.useMemo(()=>e.localFileId?n[e.localFileId]:void 0,[n,e.localFileId]),i=usePublishingPlugins(),o=a?a.plugin_id:e.widgetId,s=useMyPublishedWidgets({includePendingPublishers:!1}),l=React.useMemo(()=>Object.values(s).find(e=>e.id===o),[s,o]),c=React.useMemo(()=>l&&l.current_plugin_version_id?l.versions[l.current_plugin_version_id]:void 0,[l]),d=useDropdownShown(),{viewWidgetDetails:u}=ei(),m=d?.type===DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN&&d?.data.isRecentTile===e.isRecentTile&&d?.data.localFileId===e.localFileId&&d?.data.pluginId===o&&d?.data.targetRect,p=React.useCallback(n=>{if(n.stopPropagation(),m)r(fileBrowserActions.hideDropdown());else{let a=n.currentTarget.getBoundingClientRect();r(fileBrowserActions.showDropdown({type:DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN,data:{localFileId:e.localFileId,pluginId:o,isRecentTile:e.isRecentTile,targetRect:a}}))}},[r,e.localFileId,o,e.isRecentTile,m]),h=React.useCallback(()=>{a&&createWidget({pluginID:a.plugin_id,widgetName:a.name,pluginVersionID:"",triggeredFrom:"universal-insert"})},[a]);if(!a&&!l)return null;let _=React.createElement(DevelopmentResourceStatus,{localResource:a,publishedResource:l}),g=l&&isInReview(l),f=l&&getPluginVersionOrEmptyVersion(l).redirect_snapshot_url||e.localFileId&&i[e.localFileId]&&i[e.localFileId].metadata.widgetSnapshotImageSrc||widgetDevelopmentSnapshotSvgIcon,E=l&&!g?l.roles.is_public?globeIcon:lock:void 0;return React.createElement(React.Fragment,null,React.createElement(eh,{widget:c,localWidget:a,subheader:_,iconUrl:f,widgetId:o,onClick:()=>h(),onOptionsClick:p,optionsButtonIsActive:m,useHorizontalLayout:!0,showEditorTypeIcon:!1,publishingStatusIcon:E,inReview:g}),m&&(a?React.createElement(DevelopmentResourceOptionsDropdown,{localResource:a,viewResource:u}):React.createElement(DevelopmentResourceOptionsDropdown,{publishedResource:l,viewResource:u})))}function ep({useHorizontalLayout:e=!1,onIconClick:r,disabled:n,iconUrl:o="",widget:s,publishedWidget:l,keyboardNavigationButtonRef:c}){let d=a.useMemo(()=>e?[v.op.PRICE]:[v.op.PURCHASED,v.op.OFF_PLATFORM,v.op.FREEMUM,v.op.PRICE],[e]),u=(0,i.d4)(e=>e.authedActiveCommunityProfile);return a.createElement("div",{className:e?X.Zv:X.Cq,onClick:r,role:"button",tabIndex:0},n?a.createElement(H.z,{src:o,context:F._Y.DESIGN}):a.createElement(W._,{widget:s,src:o,analytics:{triggeredFrom:"universal-insert"},keyboardNavigationButtonRef:c,context:F._Y.DESIGN}),a.createElement("div",{className:X.VJ},(0,v.$3)({resource:l,authedActiveCommunityProfile:u,validBadges:d,height:e?"16":"24"})))}let eh=a.memo(function(e){let r=e.localWidget??e.widget??x.lT,{viewWidgetDetails:n,keyboardNavigationPath:i,shouldFocusFirstItem:o}=ei(),{setKeyboardNavigationElement:c,isFauxFocused:u,keyboardNavigationButtonRef:m}=el(`widget_${r.name}`,i,!!o),p=(0,O.ZT)()[e.widgetId],b=(0,P.EO)(p),v=(0,P.gn)(p),I=p?(0,x.uF)(p):null,S=r.name;I?.name&&I?.name!==""&&(S=I?.name);let w=(0,M.sZ)(),A=(0,O.U6)(),N=!e.localWidget&&(0,D.BF)({org:w,extensionVersion:I??e.widget,isWidget:!0,allowlistedExtensions:A}),L=!!(b||N),k=(0,C.j6)(),F=L?void 0:e=>e.stopPropagation(),U=e.metadataOverrideNode??a.createElement(a.Fragment,null,a.createElement("div",{className:X.QF},a.createElement("div",{className:X.JW},a.createElement(y.Y,{spacing:4,verticalAlignItems:"center"},a.createElement("div",{className:d()(X.Y2,{[g.s.colorTextDisabled.$]:e.visuallyDisabled})},S),e.inReview&&a.createElement(T.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,e.publishingStatusIcon&&a.createElement("div",{className:g.s.colorIcon.$},a.createElement(_.t,{svg:e.publishingStatusIcon})),v&&a.createElement("div",{className:X.Y9},a.createElement(j.xY,null)))),a.createElement("div",{className:X.ML},e.subheader)),e.onOptionsClick&&a.createElement(s.K,{"aria-label":(0,f.t)("universal_insert.more_options"),htmlAttributes:{"data-tooltip-type":B.Ib.TEXT,"data-tooltip":(0,f.t)("universal_insert.more_options")},onClick:e.onOptionsClick},a.createElement(h.U,{className:e.optionsButtonIsActive?X.F$:X.D1,svg:Q.A,fallbackSvg:ee.A},a.createElement(l.J,null))),e.primaryCTAButton&&a.createElement("div",{style:E.sx.add({alignSelf:"center"}).$},e.primaryCTAButton));return a.createElement("div",{className:d()(e.useHorizontalLayout?X.Gy:X.BG,u?X.c6:void 0),onClick:r=>{(0,R.Cu)({trackingContext:k.name,widgetId:e.widgetId}),L?n():e.onClick?e.onClick(r):n()},role:"button",tabIndex:0,ref:i?c:void 0,"data-testid":"widget-tile"},a.createElement("div",{className:X.ot},e.isNotification&&a.createElement("div",{className:X.Vx}),e.showEditorTypeIcon?a.createElement(K.li.IconAndBadgeContainer,null,a.createElement(ep,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:F,disabled:L,iconUrl:e.iconUrl,widget:r,publishedWidget:p,keyboardNavigationButtonRef:m}),a.createElement(K.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"widget"},a.createElement(K.dn,{editorType:e.editorType,is16x16:!0}))):a.createElement(ep,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:F,disabled:L,iconUrl:e.iconUrl,widget:r,publishedWidget:p,keyboardNavigationButtonRef:m})),U)});function e_(e){let r=(0,i.wA)(),n=a.useRef(null),o=(0,k.Um)(),s=(0,O.JI)(),l=(0,Y.ks)(),c=(0,L.dR)(e.pluginId,"universal-insert"),d=(0,L.Gt)(e.pluginId,"universal-insert"),m=(0,N.t)(e.pluginId,d,c),h=m.length>0,_=eE(e.pluginId,"community"),g=h&&o?.type===e.dropdownShownType&&o?.data.pluginId===e.pluginId,E=_||g,{validatePublishedPluginInOrgAllowlist:y}=(0,O.j1)(e.pluginId),b=(0,L.RK)(e.pluginId),v=a.useCallback(n=>{if(n.stopPropagation(),y()){if(h){E?r(w.oB()):(e.dropdownShownType&&r(w.j7({type:e.dropdownShownType,data:{pluginId:e.pluginId}})),r(ef({pluginId:e.pluginId,tileType:"community"})));return}b?d():c(),r(A.b({seen_published_plugin_onboarding_modal:!0})),r(A.b({seen_development_plugin_onboarding_modal:!0}))}},[y,h,b,r,E,e.dropdownShownType,e.pluginId,d,c]);if(l&&!s)return null;let T=n.current?.getBoundingClientRect(),I=e.usePrimaryButtonStyles?a.createElement(u.$$,{onClick:v,className:X.lI},(0,f.tx)("universal_insert.run"),h&&a.createElement(p.B,{svg:J.A,className:X.sI})):a.createElement("button",{className:X.lO,onClick:v,ref:e.buttonRef},(0,f.tx)("universal_insert.run"),h&&a.createElement(p.B,{svg:J.A,className:X.zZ}));return a.createElement("div",{className:e.usePrimaryButtonStyles?X.od:void 0,"data-testid":"run-plugin-button"},a.createElement("div",{ref:n},I),E&&T&&a.createElement($.j,{showPoint:!1,items:m,onSelectItem:e=>{e.callback&&e.callback("",null,r)},parentRect:T,dispatch:r,lean:"left"}))}let eg="DROPDOWN_TYPE_RUN_PLUGIN_SUBMENU";function ef(e){return w.j7({type:eg,data:e})}function eE(e,r){let n=(0,k.Um)();return n?.type===eg&&n.data.pluginId===e&&r===n.data.tileType}function ey(e){let r=(0,P.lt)(e.plugin);return e.plugin.monetized_resource_metadata?a.createElement("div",{className:X.y2},a.createElement("div",{className:X.lO},(0,S.bV)(e.plugin.monetized_resource_metadata)),!e.hideFreeTrialBadge&&(0,S.Lt)({resource:e.plugin,payment:r})&&a.createElement(I.w5,{metadata:e.plugin.monetized_resource_metadata,condensed:!0})):null}},771614:(e,r,n)=>{n.d(r,{Kl:()=>m,e3:()=>u}),n(411855);var a=n(236891),i=n(33011),o=n(841962),s=n(875877),l=n(841924),c=n(211270);let d=l.M4.Query({fetch:async()=>(await c.Z.getDefaultLibraries({editorType:"whiteboard_shapes"})).data.meta,enabled:()=>!!(0,o.kc)().figjam_diagramming_improvements_v1}),u=(0,s.atom)(e=>{let r=e(d({}));return r.data?new Set(r.data.files.map(e=>e.library_key).filter(a.Vq).map(i.l)):new Set});function m(){return(0,s.useAtomValue)(u)}(0,s.atom)(e=>{let r=e(d({}));if(!r.data)return{};let n={};for(let e of r.data.files){let r=e.library_key;r&&(n[(0,i.l)(r)]=e.name)}return n})},931539:(e,r,n)=>{n(188507),n(343373),n(708862)},259315:(e,r,n)=>{n.d(r,{fD:()=>i});var a=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(a||{}),i=(e=>(e.BRAINSTORM="BRAINSTORM",e.UPDATES="TEAM UPDATES",e.PLAN="PLANNING AHEAD",e.TEAM="TEAM CHART",e.NONE="NONE",e))(i||{})},44386:(e,r,n)=>{n.d(r,{bb:()=>ep});var a=n(411855),i=n(188507),o=n(326612),s=n(499325),l=n(462575),c=n(520244),d=n(629019),u=n.n(d),m=n(512729),p=n(524696),h=n(841962),_=n(875877),g=n(229419),f=n(563192),E=n(36748),y=n(612724),b=n(697737),v=n(45427),T=n(621847),I=n(179201),S=n(663844),w=n(693565),A=n(76265),C=n(553362),N=n(960579),L=n(7842),O=n(736041),R=n(241162),P=n(125682),D=n(926996),k=n(303480),M=n(914077),F=n(248643),x=n(710636),U=n(453783),B=n(991944),V=n(703516),G=n(993342),H=n(20711),W=n(33798),K=n(681109),Y=n(589084),$=n(132208),j=n(175479),z=n(785496);let q=(0,_.atom)(!1),Z=e=>e.map(e=>{let r=e.name.match(/((.*)\s+-\s+)?(.*)/);return{optionCategoryName:r&&r[2]||"Other",optionSubareaName:r&&r[3]||e.name,gid:e.gid}}).reduce((e,r)=>{let n=e.get(r.optionCategoryName);return n||(n=[],e.set(r.optionCategoryName,n)),n.push({name:r.optionSubareaName,gid:r.gid}),e},new Map),X=e=>{let r=e.match(/app\.asana\.com\/\d\/\d+\/(\d+)/);if(!r||r.length<2)throw Error((0,A.t)("bug_reporter.error_invalid_asana_url"));return r[1]};function J(e){return!Q(e)}function Q(e){return"error"in e}let ee={gid:"",name:"Pick an option"},et="bugReporter",er=(0,_.atom)(!0),en=(0,_.atom)(""),ea=(0,_.atom)(""),ei=(0,_.atom)(""),eo=(0,_.atom)(ee),es=(0,_.atom)(ee),el=(0,_.atom)(!1),ec=a.createElement("div",{className:H.jM},"WARNING: because the title begins with TEST: your bug will be routed to the ",a.createElement(o.N,{newTab:!0,href:"https://app.asana.com/0/1203643376438098/list"},(0,A.tx)("bug_reporter.warning_asana_board")));function ed(e){let r=(0,P.Um)(),n=(0,i.wA)(),o=(0,E.Av)(),{windowInnerHeight:d}=(0,p.l)(),[g,y]=(0,_.useAtom)(en),[b,N]=(0,_.useAtom)(ea),[L,O]=(0,_.useAtom)(ei),[R,D]=(0,_.useAtom)(eo),[k,M]=(0,_.useAtom)(es),[F,x]=(0,_.useAtom)(el),[V,K]=a.useState(!0),[Y,j]=a.useState(!1),[z,q]=a.useState(!1),[Z,J]=a.useState([]),[Q,er]=a.useState(void 0),ed=d-(o+B.uF+I.Ug)-I.lc;(0,m.h)(()=>{!0===F&&(em(),x(!1))});let em=()=>{K(!0),J([]),e.clearForm()},ep=a.useCallback(()=>!!(!e.isSubmitting&&b.trim()&&L.trim())&&(!e.isNewReport||!!R.gid&&!!k.gid),[L,e.isNewReport,e.isSubmitting,k.gid,R.gid,b]),eh=r=>{if(r)try{let n=X(r);e.attachFromTask(n)}catch(e){n(C.F.enqueue({message:`${e}`,error:!0}))}},e_=f.AF(f.Pt(et,"link-input"),"change",e=>{let r=e.target.value;y(r),""===r&&em()}),eg=f.AF(f.Pt(et,"title-input"),"change",e=>{N(e.target.value)}),ef=f.AF(f.Pt(et,"productAreaSearch"),"change",e=>{eL(e.target.value),""===e.target.value&&M(ee)}),eE=f.AF(f.Pt(et,"description-input"),"change",e=>{O(e.target.value)}),ey=f.qP(f.Pt(et,"severity-input")??"","change",e=>{D(e)}),eb=f.qP(f.Pt(et,"product-area-input")??"","change",e=>{M(e),eL("")}),ev=a.useCallback(e=>{let r=[],a=[];for(let n of e)if(n.size>0x3200000)a.push(n.name);else{let e=URL.createObjectURL(n);r.push({fileContent:n,url:e,name:n.name,type:n.type})}if(a.length>0){let e=`Error: files could not be attached (over 50MB limit): [${a.join(", ")}].`;console.error(e),n(C.F.enqueue({error:!0,message:e}))}return r},[n]),eT=e=>{if(e.files.length>0){let r=ev([...e.files]);J(e=>[...e,...r])}j(!1)},eI=f.AF(f.Pt(et,"include-filekey-input"),"change",e=>{K(e.currentTarget.checked)}),eS=a.useCallback(()=>{ep()&&e.submitBugReport(b,L,R,k,V,Z,Q)},[Z,ep,L,V,Q,e,k,R,b]),ew=f.of(et,"submit",e=>{e.preventDefault(),eS()}),eA=(e,r)=>{let n=e.target;"Enter"===e.key&&(e.metaKey||e.ctrlKey?eS():("description"!==r&&e.preventDefault(),"asanaInput"===r&&eh(g),"productAreaSearch"===r&&q(!0))),"Escape"===e.key&&n&&n.blur()},eC=f.v_(f.Pt(et,"asanaInput"),"keydown",e=>{eA(e,"asanaInput")}),[eN,eL]=a.useState("");return a.createElement(v.Y,{className:u()(Y&&H.oE),isDragTarget:()=>!0,onTargetDragEnter:()=>{j(!0)},onTargetDragLeave:()=>{j(!1)},onTargetDrop:e=>eT(e)},Y&&a.createElement("div",{className:H.$1},a.createElement(w.B,{svg:W.A}),(0,A.tx)("bug_reporter.drop_attachments")),a.createElement(S.P,{maxHeight:ed,hideScrollbar:Y},a.createElement("form",{onSubmit:ew,onPaste:e=>{if(e.clipboardData.files.length>0){let r=ev([...e.clipboardData.files]);J(e=>[...e,...r])}},className:u()(H.yl,Y&&H.vw)},a.createElement("div",{className:H.uu},a.createElement(s.J,{className:H.y8},(0,A.tx)("bug_reporter.asana_hint")),a.createElement(T.ks,{className:H._Z,placeholder:(0,A.t)("bug_reporter.modal.asana_link_placeholder"),value:g,onChange:e_,onPaste:e=>{let r=e.clipboardData.getData("text");try{X(r),eh(r)}catch{}},onKeyDown:eC,maxLength:150})),a.createElement("div",null,a.createElement(s.J,{className:H.Pf},(0,A.tx)("bug_reporter.modal.title")),a.createElement(T.ks,{className:H._Z,placeholder:(0,A.t)("bug_reporter.modal.title_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"title"),value:b,onChange:eg,maxLength:150})),a.createElement("div",null,a.createElement(s.J,{className:H.Pf},(0,A.tx)("bug_reporter.modal.severity")),a.createElement(U.l6,{id:"bug_reporter_select_severity",dispatch:n,property:R,onChange:ey,dropdownShown:r,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid}},0===e.severityOptions.length&&a.createElement(U.c$,{key:"loading",disabled:!0},(0,A.tx)("bug_reporter.modal.loading")),e.severityOptions.map(e=>a.createElement(U.c$,{value:e,key:e.gid},e.name)))),a.createElement("div",null,a.createElement(s.J,{className:H.Pf},(0,A.tx)("bug_reporter.modal.product_area")),a.createElement(T.ks,{className:H._Z,placeholder:(0,A.t)("bug_reporter.modal.search_filter_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"productAreaSearch"),value:eN,onChange:ef,maxLength:150}),a.createElement(U.l6,{dispatch:n,dropdownShown:r,id:"bug_reporter_select_product_area",dataTestId:"bug_reporter_select_product_area",formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid},property:k,onChange:e=>{eb(e)},triggerDropdown:z,setTriggerDropdown:q},(r=>{if(0===e.productAreaGroups.size)return a.createElement(U.c$,{value:null,key:"loading",disabled:!0},(0,A.tx)("bug_reporter.modal.loading"));let n=[];return e.productAreaGroups.forEach((e,i)=>{(r?e.filter(({name:e})=>e.toLowerCase().includes(r.toLowerCase())):e).length>0&&(n.push(a.createElement(U.c$,{value:null,key:i,isHeader:!0,disabled:!0},i)),e.forEach(e=>{(!r||e.name.toLowerCase().includes(r.toLowerCase()))&&n.push(a.createElement(U.c$,{value:e,key:e.gid,dataTestId:e.gid},e.name))}),n.push(a.createElement(U.sK,{key:`${i}.divider`})))}),n.pop(),n})(eN))),a.createElement("div",null,a.createElement(s.J,{className:H.Pf},(0,A.tx)("bug_reporter.modal.description")),a.createElement(T.ks,{className:[H._Z,H.Tg].join(" "),placeholder:(0,A.t)("bug_reporter.modal.description_placeholder"),type:"textarea",value:L,onChange:eE,onKeyDown:e=>eA(e,"description"),maxLength:1e3})),a.createElement("div",null,a.createElement(s.J,{className:H.Pf},(0,A.tx)("bug_reporter.modal.images_and_videos")),a.createElement(eu,{attachmentFiles:Z,setAttachmentFiles:J,validateInputFiles:ev})),(0,h.kc)().in_app_performance_profiling&&a.createElement("div",null,a.createElement(a.Fragment,null,a.createElement(s.J,{className:H.Pf},(0,A.tx)("bug_reporter.profiler.title")),a.createElement(G.J,{onProfilingFinish:e=>{er(e)}}),Q&&(0,A.tx)("bug_reporter.profiler.profile_attached"))),"fullscreen"===e.selectedView.view&&a.createElement(l.S,{checked:V,onChange:(e,{event:r})=>eI(r),label:a.createElement(s.J,null,a.createElement("div",{className:H.HI},(0,A.t)("bug_reporter.modal.include_filekey"),a.createElement("div",{className:H.kB},a.createElement(w.B,{svg:$.A}),a.createElement("div",{className:H.dX},(0,A.tx)("bug_reporter.modal.include_filekey_info")))))}),b.startsWith("TEST:")&&ec,a.createElement(T.e2,{className:H.GC},a.createElement(c.$n,{variant:"secondary",onClick:e.onClose},(0,A.tx)("bug_reporter.modal.cancel")),a.createElement(c.$n,{variant:"primary",type:"submit",disabled:!ep()},(0,A.t)("bug_reporter.modal.submit"))))))}function eu(e){let{attachmentFiles:r,setAttachmentFiles:n,validateInputFiles:i}=e,o=a.useRef(null),s=a.useCallback(()=>{o.current&&(o.current.value="")},[]),l=a.useCallback(()=>{let e=o.current?.files||null;if(null===e||0===e.length)return;let r=i([...e]);n(e=>[...e,...r]),s()},[s,i,n]),c=(e,r,a)=>{e.preventDefault(),n(e=>(e.splice(r,1),[...e])),URL.revokeObjectURL(a)};return a.createElement("div",{className:H.VL},r.length>0&&r.map((e,r)=>a.createElement("div",{className:H.Dq,key:r},a.createElement("div",null,e.type.startsWith("image")?a.createElement("img",{className:H.cR,alt:e.name,key:r,src:e.url}):a.createElement("video",{className:H.cR,key:r,src:e.url}),a.createElement("div",{className:H.Lw})),a.createElement("button",{onClick:n=>c(n,r,e.url)},a.createElement(w.B,{className:H.Yz,svg:z.A})))),a.createElement("label",{className:H.UM,htmlFor:"file-upload"},a.createElement(w.B,{svg:Y.A})),a.createElement("input",{id:"file-upload",type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, video/quicktime",ref:o,onChange:l,multiple:!0,hidden:!0}))}function em(e){let r=(0,i.wA)(),n=f.rf(f.Pt(et,"asana-link"),"click",()=>{});return a.createElement("div",{className:H.yl},a.createElement("div",{className:H.lM},(0,A.tx)("bug_reporter.success_message")),a.createElement("div",{className:H.U3},a.createElement("div",{className:H.AX},a.createElement(w.B,{svg:j.A}),a.createElement(o.N,{newTab:!0,onClick:n,href:e.taskUrl,trusted:!0},(0,A.tx)("bug_reporter.asana_link"))),a.createElement("div",{className:H.AX},a.createElement(w.B,{svg:K.A}),a.createElement(c.$n,{variant:"link",onClick:()=>{r(L.lW({stringToCopy:e.taskUrl}))}},(0,A.tx)("bug_reporter.copy_link")))),e.isNewReport&&a.createElement("div",null,(0,A.tx)("bug_reporter.urgent_bug_info",{notifyTheRelevantOncall:a.createElement(o.N,{newTab:!0,href:"https://go/find-oncall",trusted:!0},(0,A.tx)("bug_reporter.notify_oncall"))})),e.slackUrl&&a.createElement("div",null,a.createElement(o.N.Button,{href:e.slackUrl,newTab:!0},(0,A.tx)("bug_reporter.open_slack_discussion"))),e.submissionErrorMessages.length>0&&e.submissionErrorMessages.map(e=>a.createElement("p",{key:e},e.toString())))}let ep=(0,x.Ju)(function(){let e=(0,i.d4)(e=>e.multiplayer.allUsers.length),r=(0,i.d4)(e=>e.user?.id),n=(0,D._6)(),o=(0,i.wA)(),{windowInnerHeight:s}=(0,p.l)(),l=(0,V.O)(),[c,d]=a.useState([]),[u,f]=(0,_.useAtom)(en),E=(0,_.useSetAtom)(ea),v=(0,_.useSetAtom)(ei),T=(0,_.useSetAtom)(eo),S=(0,_.useSetAtom)(es),[w,L]=a.useState(new Map),P=(0,_.useSetAtom)(el),[x,U]=(0,_.useAtom)(er),[G,W]=a.useState(!1),[K,Y]=a.useState(!1),$=a.useRef(""),j=a.useRef(""),z=a.useRef(""),ec=a.useRef(""),eu=a.useRef(""),ep=a.useRef([]),eh=a.useRef(null),e_=a.useRef(0),eg=(0,_.useSetAtom)(q),ef=()=>{o(O.Ce())},eE=(0,k.f)("seen_bug_reporter_modal");(0,m.h)(()=>{eE||o(R.b({seen_bug_reporter_modal:!0})),eg(!0)}),a.useEffect(()=>{(async()=>{try{let{data:e}=await F.o.getMeta();d(e.meta.severity),L(Z(e.meta.product_area))}catch(e){o(C.F.enqueue({message:`Could not fetch field metadata: ${e}`,error:!0}))}})()},[o]);let ey=()=>F.o.getGetTask({taskGid:$.current}).then(({data:e})=>e).catch(e=>{let r=`Couldn't fetch task details from Asana. ${e.data.message}`;e instanceof b.Dr&&e.data?.message&&(r=e.data.message),o(C.F.enqueue({message:r,error:!0}))}),eb=async e=>{if(0===e.length)return{attachments:[],errorMessages:[]};let r=e.map(async e=>{try{return{uuid:await eT(e.fileContent,e.type),name:e.name}}catch(r){return{error:`Please add attachment ${e.name} directly in Asana instead. ${r}`}}}),n=await Promise.all(r);return ep.current=n.filter(Q).map(({error:e})=>e),{attachments:n.filter(J),errorMessages:n.filter(Q).map(({error:e})=>e)}},ev=async e=>{if(!e)return{attachments:[],errorMessages:[]};try{return{attachments:[{uuid:await eT(JSON.stringify(e),"application/json"),name:"profile.json"}],errorMessages:[]}}catch(e){return{attachments:[],errorMessages:[`Please record a profile directly in dev tools instead. ${e}`]}}},eT=async(e,r)=>{let n=await F.o.getAttachmentUploadUrl({fileType:r});if(200!==n.status)throw Error("Failed to get presigned upload URL from S3");let{upload_url:a,fields:i,uuid:o}=n.data.meta,s=new FormData;for(let e in i)s.append(e,i[e]);if(s.append("content-type",r),s.append("file",e),204!==(await fetch(a,{method:"post",body:s})).status)throw Error("Failed to upload attachment to S3");return o},eI=async(a,i,s,l,c,d,m)=>{Y(!0),ec.current=a,eu.current=i,o(C.F.enqueue({type:"bug-reporter-submitting",message:(0,A.t)("bug_reporter.submitting_visual_bell"),timeoutType:"exact",timeoutOverride:4e3,icon:N.zX.SPINNER})),o(C.F.enqueue({type:"bug-reporter-submitting-long",message:(0,A.t)("bug_reporter.long_submitting_visual_bell"),delay:4e3,icon:N.zX.SPINNER}));let p={env:(0,h.tl)().cluster_name,user_agent:navigator.userAgent,view:n.view,user_id:r,org_id:(0,h.tl)().org_id,tracking_session_id:(0,h.tl)().tracking_session_id,release_commit:(0,h.tl)().release_manifest_git_commit,device_info:(0,g.l)(),num_people_in_file:e,datadog_rum_session_id:window.DD_RUM?.getInternalContext()?.session_id};"fullscreen"===n.view?(p.editor_type=(0,M.Bu)(n.editorType),c&&(p.file_key=n.fileKey,p.url=window.location.href)):p.url=window.location.href;let _={title:a,severity:s.gid,product_area:l.gid,description:i,metadata:p},f=[eb(d),ev(m)],[E,y]=await Promise.all(f);E.attachments.length>0&&(_.attachments=E.attachments),y.attachments.length>0&&(_.profileUuid=y.attachments[0].uuid),(E.errorMessages.length||y.errorMessages.length)&&(ep.current=[...E.errorMessages,...y.errorMessages]);try{let e=x?await b.Ay.post("/api/bug_reports",_):await b.Ay.put("/api/bug_reports/update_task",{..._,task_gid:$.current=X(u)});if(e.status>=200&&e.status<300)o(C.F.dequeue({matchType:"bug-reporter-submitting"})),o(C.F.dequeue({matchType:"bug-reporter-submitting-long"})),j.current=e.data.meta.task_url,$.current=e.data.meta.task_gid,x||(z.current=e.data.meta.slack_url),e_.current=eh.current?.getCurrentContentSize()?.y||0,W(!0),P(!0),Y(!1);else throw Error(`Request failed with code ${e.status}.`)}catch(r){o(C.F.dequeue({matchType:"bug-reporter-submitting"})),o(C.F.dequeue({matchType:"bug-reporter-submitting-long"}));let e=r.message;r instanceof b.Dr&&r.data?.message&&"string"==typeof r.data.message&&(e=r.data.message),o(C.F.enqueue({message:`${e}. Couldn't submit report. Try again or use /bug in Slack.`,error:!0})),Y(!1)}},eS=async e=>{$.current=e,U(!1);let r=await ey();r&&(E(r.meta.title),v(r.meta.description),T(r.meta.severity??ee),S(r.meta.product_area??ee))};return a.createElement(B.vx,{ref:eh,title:(0,A.t)("help_widget.menu.report_issue"),initialPosition:(()=>{let e=l?I.lc:I.Ug,r=I.lc;return G&&(r=s-(e_.current+B.uF)-I.lc),new y.Mi(e,r)})(),initialConstraints:{x:"right",y:G?"top":"bottom"},onClose:ef,recordingKey:et,headerClassName:H.yK,dragHeaderOnly:!0},G?a.createElement(em,{isNewReport:x,taskUrl:j.current,taskGid:$.current,slackUrl:z.current,title:ec.current,description:eu.current,submissionErrorMessages:ep.current}):a.createElement(ed,{isNewReport:x,selectedView:n,severityOptions:c,productAreaGroups:w,attachFromTask:eS,submitBugReport:eI,onClose:ef,clearForm:()=>{U(!0),E(""),v(""),S(ee),T(ee),$.current="",f("")},isSubmitting:K}))},"BugReporterModal")},436426:(e,r,n)=>{n.d(r,{X:()=>c});var a=n(411855),i=n(693565),o=n(265851),s=n(233950),l=n(377869);function c(e){return a.createElement("p",{className:o.s.flex.itemsCenter.gap8.mt8.$},a.createElement(i.B,{svg:l.A,className:o.s.colorIconDesign.$}),a.createElement(s.E,{fontSize:13},e.bulletLabel))}},217438:(e,r,n)=>{n.d(r,{l:()=>u});var a=n(411855),i=n(621847),o=n(76265),s=n(736041),l=n(499008),c=n(880475);function d(e){return a.createElement("div",{style:{height:e.height}})}function u(e){let r=e.onHide||(()=>{e.dispatch(s.Lo())});return a.createElement(l.XV,{...e,isCloseHidden:!0},a.createElement(d,{height:18}),e.children&&a.createElement("div",{className:c.Vw},e.children,a.createElement(d,{height:18})),a.createElement(m,{onConfirm:e.onConfirm,onCancel:r,confirmButtonText:e.buttonText,hideCancelButton:e.hideCancelButton,makeButtonAppearNegative:e.makeButtonAppearNegative},e.checkboxText))}class m extends a.PureComponent{constructor(e){super(e),this.onCheck=()=>{this.setState({checked:!this.state.checked})},this.state={checked:!1}}render(){return a.createElement("div",{className:this.props.className},a.createElement(i.JU,{className:c.Pf},a.createElement(i.tB,{checked:this.state.checked,onChange:this.onCheck,className:c.kv}),this.props.children),a.createElement("div",{className:c.aV},!this.props.hideCancelButton&&a.createElement(i.tM,{onClick:this.props.onCancel},this.props.cancelButtonText||(0,o.t)("modal.cancel")),this.props.makeButtonAppearNegative?a.createElement(i.qM,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm")):a.createElement(i.vd,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm"))))}}m.displayName="CheckboxConfirmButtons"},969012:(e,r,n)=>{n.d(r,{WB:()=>M});var a=n(411855),i=n(188507),o=n(471923),s=n(266838),l=n(556843),c=n(557603),d=n(570446),u=n(499325),m=n(841962),p=n(875877),h=n(467218),_=n(265851),g=n(677840),f=n(489803),E=n(76265),y=n(726084),b=n(233950),v=n(736041),T=n(140835),I=n(276805),S=n(593273),w=n(958961),A=n(710636),C=n(542578),N=n(499008),L=n(513);let O=(e,r)=>{switch(e){case w.M.SRGB:return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.info.srgb_supported"),type:"info"};case w.M.DISPLAY_P3:switch(r.status){case"SupportedNatively":case"SupportedWithPolyfill":return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.info.display_p3_supported"),type:"info"};case"ClientNotSupported":let n=r.diagnostics&&"client"in r.diagnostics&&"desktop-app"===r.diagnostics.client?(0,E.t)("fullscreen.color_management.user_color_profile_modal.client_type.desktop_app"):(0,E.t)("fullscreen.color_management.user_color_profile_modal.client_type.browser");if(r.diagnostics&&"shouldRestartDesktopAppInManagedColorSpace"in r.diagnostics&&r.diagnostics.shouldRestartDesktopAppInManagedColorSpace)return{text:(0,E.t)("fullscreen.color_management.beta.warning.desktop_unmanaged"),type:"warning"};return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.client",{client:n}),type:"warning"};case"MonitorNotSupported":if(r.diagnostics&&"alternativeMonitorName"in r.diagnostics&&r.diagnostics.alternativeMonitorName)return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.alternative_display",{displayName:r.diagnostics.alternativeMonitorName}),type:"warning"};return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.display"),type:"warning"}}}},R="user-color-profile",P={srgbOption:`${R}-srgb-option`,p3Option:`${R}-p3-option`,supportDetailsWarningIcon:`${R}-warning-icon`,supportDetailsInfoIcon:`${R}-info-icon`},D=(0,p.atom)(!1),k=(0,A.Ju)(function(e){let r=(0,i.wA)(),n=(0,S.jK)(),A=function(e){switch(e){case w.M.DEFAULT:case w.M.SRGB:return w.M.SRGB;case w.M.DISPLAY_P3:return w.M.DISPLAY_P3}}(n.colorProfilePreference),R=O(A,(0,I.Av)()),k=function(e){switch(e){case w.M.SRGB:return(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.description");case w.M.DISPLAY_P3:return(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.description")}}(A),[M,F]=(0,p.useAtom)(D);a.useEffect(()=>(M||F(!0),()=>{M&&((0,g.YQ)({id:"user_color_profile_modal_closed"}),F(!1))}),[F,M]);let x=o.hS(e);return a.createElement(T.fu,{name:"color_management_user_color_profile_modal"},(0,m.kc)().eu_fpl_migration_modal?a.createElement(s.bL,{manager:x,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,E.t)("fullscreen.color_management.user_color_profile_modal.title"))),a.createElement(l.nB,null,a.createElement("form",null,a.createElement(c.b,{legend:a.createElement(d.s,null,(0,E.tx)("fullscreen.color_management.user_color_profile_modal.options.label")),value:A,onChange:e=>{(0,S.it)({colorProfilePreference:e,id:n.id})}},a.createElement("div",{className:_.s.flex.flexRow.gap20.mb12.$},a.createElement(c.c,{value:w.M.SRGB,label:a.createElement(u.J,null,(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),htmlAttributes:{"data-testid":P.srgbOption}}),a.createElement(c.c,{value:w.M.DISPLAY_P3,label:a.createElement(u.J,null,(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value")),htmlAttributes:{"data-testid":P.p3Option}})))),a.createElement(b.E,{color:"secondary"},k),a.createElement("div",{className:L.jH}),a.createElement(b.E,{color:"secondary"},(0,E.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more")),a.createElement("div",{className:L.jH}),a.createElement("div",{className:L.yF}),a.createElement("div",{className:L.cd},a.createElement(y.In,{icon:"warning"===R.type?"warning-32":"info-32",dataTestId:"warning"===R.type?P.supportDetailsWarningIcon:P.supportDetailsInfoIcon}),a.createElement("span",null,R.text,"warning"===R.type&&a.createElement(a.Fragment,null,a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more")))))))):a.createElement(N.XV,{title:(0,E.t)("fullscreen.color_management.user_color_profile_modal.title"),minWidth:320,maxWidth:320,onClose:()=>{r((0,v.AS)())}},a.createElement("div",{className:L.yl},a.createElement("label",{className:L.fK},a.createElement(b.E,null,(0,E.tx)("fullscreen.color_management.user_color_profile_modal.options.label"))),a.createElement(h.z,{isHorizontal:!0,className:L.R$,value:A,onChange:e=>{(0,S.it)({colorProfilePreference:e,id:n.id})}},a.createElement(h.Z,{className:L.hO,value:w.M.SRGB,dataTestId:P.srgbOption},(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),a.createElement(h.Z,{className:L.hO,value:w.M.DISPLAY_P3,dataTestId:P.p3Option},(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value"))),a.createElement(b.E,{color:"secondary"},k),a.createElement("div",{className:L.jH}),a.createElement(b.E,{color:"secondary"},(0,E.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more")),a.createElement("div",{className:L.jH}),a.createElement("div",{className:L.yF}),a.createElement("div",{className:L.cd},a.createElement(y.In,{icon:"warning"===R.type?"warning-32":"info-32",dataTestId:"warning"===R.type?P.supportDetailsWarningIcon:P.supportDetailsInfoIcon}),a.createElement("span",null,R.text,"warning"===R.type&&a.createElement(a.Fragment,null,a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more"))))))))},"user_color_profile_modal");function M(){return{name:"user-color-profile-menu-option",displayForQuickCommand:"user-color-profile-quick-action",callback:(e,r,n)=>{n((0,v.to)({type:k}))}}}},400184:(e,r,n)=>{n.d(r,{FF:()=>I,G$:()=>N});var a=n(411855),i=n(188507),o=n(621847),s=n(936907),l=n(76265),c=n(705011),d=n(736041),u=n(241162),m=n(91247),p=n(140835),h=n(465424),_=n(710636),g=n(712204),f=n(630421),E=n(874360),y=n(942672),b=n(442184),v=n(566817);let T={INDIGO:b.S0,VIOLET:b.xl,RED:b.qE,GREEN:b.Ts,GOLD:b.fr};var I=(e=>(e[e.COMMENTS=0]="COMMENTS",e[e.OPT_IN=1]="OPT_IN",e))(I||{});let S=(e,r)=>e.indexOf(r)>-1;function w({user:e,variations:r}){return a.createElement(a.Fragment,null,a.createElement(g.Ro,{className:v.my,entity:e,size:100}),S(r,0)&&a.createElement("div",null,a.createElement(y.eR,{backgroundColor:T.RED,position:{top:"12px",left:"12%",transform:"rotate(-12deg)"}}),a.createElement(y.eR,{backgroundColor:T.INDIGO,position:{top:"-40px",left:"9%",transform:"rotate(60deg)"}}),a.createElement(y.eR,{backgroundColor:T.VIOLET,position:{top:"-10px",left:"27%",transform:"rotate(20deg)"}}),a.createElement(y.eR,{backgroundColor:T.GREEN,position:{top:"-30px",left:"70%",transform:"rotate(30deg)"}}),a.createElement(y.eR,{backgroundColor:T.GOLD,position:{top:"8px",left:"88%",transform:"rotate(-20deg)"}})),a.createElement("h1",{className:v.wx},e?.handle),a.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.here_s_how_you_ll_look_when_using_the_figma_community")),a.createElement("h3",{className:v.N4},(0,l.tx)("community.onboarding.change_your_photo_or_name_in_your_settings"),S(r,0)&&a.createElement(a.Fragment,null,a.createElement("br",null),(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you"))))}function A(){return a.createElement(a.Fragment,null,a.createElement("h1",{className:v.wx},(0,l.tx)("community.onboarding.follow_our_guidelines")),a.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you")))}function C(){return a.createElement("div",{className:v.Il},a.createElement("li",null,a.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.stay_on_topic")),a.createElement(y.iF,null)),a.createElement("li",null,a.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.be_respectful")),a.createElement(y.B1,null)),a.createElement("li",null,a.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.read_our_guidelines",{guidelinesLink:a.createElement("a",{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank"},(0,l.tx)("community.onboarding.guidelines"))})),a.createElement(y.$E,null)))}let N="COMMUNITY_OPT_IN";(0,_.Ju)(function({userId:e,onFinish:r,variations:n}){let _=(0,i.d4)(e=>e.user);e=e||_?.id;let g=(0,i.wA)(),y=()=>{g(d.Ce())},b=()=>{g(u.b({[f.Pn]:!0}))},T=S(n,0)&&1===n.length,I=S(n,0)?1===n.length?v.aq:v.Qc:v.FT;return a.createElement(E.aF,{className:I},a.createElement(p.fu,{name:h.e0.PROFILE_CREATE_MODAL,properties:{action:m.s0.COMMUNITY_OPT_IN,communityHubEntity:m.ZO.USERS,communityHubEntityId:e}},S(n,1)&&_?a.createElement(w,{user:_,variations:n}):a.createElement(A,null),S(n,0)&&a.createElement(C,null),a.createElement(s.Go,{type:"submit",className:v.C5,onClick:()=>{y();let a=S(n,1);a&&(g((0,c.h1)({onSuccess:r})),b()),S(n,0)&&e&&(b(),a||r?.())}},S(n,0)?(0,l.tx)("community.onboarding.got_it"):(0,l.tx)("community.onboarding.looks_good")),!T&&a.createElement(o.tM,{className:v.IK,onClick:y},(0,l.tx)("general.cancel"))))},N)},611592:(e,r,n)=>{n.d(r,{OZ:()=>V}),n(497148);var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(126049),c=n(850784),d=n(139879),u=n(576467),m=n(640747),p=n(506989),h=n(299009),_=n(265851),g=n(677840),f=n(76265),E=n(553362),y=n(648800),b=n(726084),v=n(129789),T=n(736041),I=n(140835),S=n(537393),w=n(548759),A=n(653599),C=n(808624),N=n(661137),L=n(314540),O=n(727903),R=n(689965),P=n(765886),D=n(871290),k=n(710636),M=n(444102),F=n(874360),x=n(131929);function U(e,r){return r(T.Lo()),D.Eh.postDevModeOptInTermsAccepted({orgId:e}).catch(e=>(r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.failed_to_agree_to_opt_in"),error:!0})),Promise.reject(e))).then(()=>(0,g.YQ)({id:"dev_mode_opt_in_success_event"}))}function B(){let e=(0,i.wA)();return a.createElement(m.Jn,{onClick:()=>e(T.Lo()),innerText:"Close"})}(0,k.Ju)(function(e){let r=(0,i.wA)(),n=(0,N.sZ)(),o=parseInt(e.emailRequestId??""),s=!Number.isNaN(o);return a.createElement(a.Suspense,{fallback:a.createElement("div",{className:x.$1},a.createElement(h.Z_,null))},a.createElement(I.fu,{name:"DevMode Opt-in Page",properties:{org_id:n.id,source:s?"email":"notif"}},a.createElement("div",{className:x.$1},a.createElement(G,{org:n,onAccept:()=>{let e=U(n.id,r);return s&&e.then(()=>{P.w.approveRequests({plan_id:n.id,plan_type:v.ps.ORG,included_request_ids:[o.toString()],selection_method:v.Xv.EMAIL}).catch(e=>(r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.upgrade_seats_error",{seatCount:1}),error:!0})),Promise.reject(e))).then(()=>r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.upgraded_seats",{seatCount:1}),type:"requests-approved"})))}),e},showNotNow:!1,hasAssociatedSeats:s})),a.createElement("div",{className:x.NX,style:{position:"absolute",top:24,right:24}},a.createElement(B,null))))},"DEV_MODE_OPT_IN_FULL_SCREEN_MODAL");let V=(0,k.Ju)(function(e){let r=(0,i.wA)(),n=(0,N.sZ)();return a.createElement(a.Suspense,{fallback:a.createElement(M.N,{hiddenTitle:(0,f.tx)("dev_mode_opt_in.modal.header"),estimatedWidth:520,estimatedHeight:520})},a.createElement(I.fu,{name:"DevMode Opt-in Modal",properties:{org_id:n.id,source:e.source?e.source:"dashboard"}},a.createElement(F.aF,{className:_.s.overflowHidden.$,padding:40,size:520},a.createElement(G,{org:n,onAccept:()=>{let a=U(n.id,r);e.onOptInUpgrade&&a.then(()=>e.onOptInUpgrade()),e.onOptInShowModal&&a.then(()=>e.onOptInShowModal())},showNotNow:!0,hasAssociatedSeats:!!e.onOptInUpgrade}),a.createElement("div",{style:{position:"absolute",top:4,right:4}},a.createElement(B,null)))))},"DEV_MODE_OPT_IN_PARTIAL_MODAL");function G(e){let r=(0,i.wA)(),n=(0,c.Xf)(e.org.id),o=(0,l.A)(e.onAccept,750,{leading:!0,trailing:!1}),m=a.createElement("a",{className:_.s.cursorPointer.fontMedium.$,href:"https://help.figma.com/hc/articles/19813618057623",target:"_blank",rel:"noopener noreferrer"},(0,f.t)("dev_mode_opt_in.modal.guide_to_dev_mode_billing")),h=a.createElement("a",{className:_.s.cursorPointer.fontMedium.$,href:"https://www.figma.com/pricing",target:"_blank",rel:"noopener noreferrer"},"figma.com/pricing"),g=n.data?.currency??"usd",E=new O.vr(g),v=e.org.billing_tier??L.Ag.ORG,N=new A.X([w.ud.DEV_MODE]).dict(e=>({currency:g,billableProductKey:e,tier:(0,C.h)(v),renewalTerm:R.IX.YEAR,unit:R.IX.MONTH})),P=(0,S.ic)(N,{planParentId:e.org.id,planType:L.OL.ORG},S.Fq.ADMIN_SETTINGS),[D]=(0,d.mI)(P),k="loaded"===n.status&&"loaded"===D.status?a.createElement(a.Fragment,null,E.formatMoney(D.data[w.ud.DEV_MODE].amount)):a.createElement(p.Wi,{className:_.s.h8.w20.inlineBlock.$});return a.createElement("div",{className:x.hQ},a.createElement("div",{className:x.rf},a.createElement("div",{className:x.wx},(0,f.tx)("dev_mode_opt_in.modal.header")),a.createElement("div",{className:s()(x.uI,_.s.mb24.$)},e.hasAssociatedSeats?(0,f.tx)("dev_mode_opt_in.modal.subheader_with_seats"):(0,f.tx)("dev_mode_opt_in.modal.subheader")),a.createElement("div",{className:x.fZ},a.createElement("div",{className:_.s.mt16.ml16.mr16.$},a.createElement(y.Y,{width:"fill-parent",spacing:8},a.createElement(b.In,{icon:"file-design-with-devmode-32-file-type"}),a.createElement("span",null,a.createElement("div",{className:x.uI},(0,f.tx)("dev_mode_opt_in.modal.pricing.with_design.main_text")),a.createElement("div",{className:x.Yg},(0,f.tx)("dev_mode_opt_in.modal.pricing.with_design.sub_text"))))),a.createElement("div",{className:x.Ot}),a.createElement("div",{className:_.s.ml16.mr16.mb16.$},a.createElement(y.Y,{width:"fill-parent",spacing:8},a.createElement(b.In,{icon:"file-devmode-32-file-type"}),a.createElement("span",null,a.createElement("div",{className:x.uI},(0,f.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.main_text")),a.createElement("div",{className:x.Yg},(0,f.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.sub_text")))))),a.createElement("div",{className:x.Yg},a.createElement("div",{className:_.s.mt24.fontMedium.$},(0,f.tx)("dev_mode_opt_in.modal.description_question")),a.createElement("div",{className:_.s.mt8.$},(0,f.tx)("dev_mode_opt_in.modal.description_provision",{pricingLink:h,plan:v===L.Ag.ORG?(0,f.t)("dev_mode_opt_in.modal.org"):(0,f.t)("dev_mode_opt_in.modal.ent"),price:k,billingLink:m}))),a.createElement(u.vd,{className:s()(x.x6,_.s.mt24.$),type:"button",onClick:o},e.hasAssociatedSeats?(0,f.tx)("dev_mode_opt_in.modal.agree_with_seats"):(0,f.tx)("dev_mode_opt_in.modal.agree")),e.showNotNow&&a.createElement(I.jm,{role:"button",className:s()(_.s.mt8.flex.justifyCenter.$,x.qD),onClick:()=>r(T.Lo())},(0,f.tx)("dev_mode_opt_in.modal.not_now"))))}},340794:(e,r,n)=>{n.d(r,{E0:()=>f,G5:()=>m,I_:()=>d,Ij:()=>E,OP:()=>_,as:()=>g,eN:()=>u,em:()=>p,lq:()=>h,uF:()=>l});var a=n(991458),i=n(612724),o=n(488527),s=n(806266);let l=(0,a.hG)(o.Flg)+1,c=(0,a.hG)(o.tui),d=16,u=c,m=0,p=0,h=0;var _=(e=>(e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e))(_||{});function g(e){let r=e.includes("top"),n=e.includes("bottom"),a=e.includes("left"),i=e.includes("right");return r&&a||n&&i?s.YL:r&&i||n&&a?s.wX:r||n?s.cb:a||i?s.NZ:null}function f(e,r){let{left:n,top:a,right:o,bottom:s,lockAspectRatio:c}=r,d=r.maxWidth||1/0,u=r.maxHeight||1/0,m=r.minWidth||0,p=r.minHeight||0,h=o-n,_=s-a,g=h<=0||_<=0;if(c&&g)return null;if(c){let e=_-l,r=Math.min(d/h,(u-l)/e);r<1&&(h*=r,e*=r);let n=Math.max(m/h,p/e);n>1&&(h*=n,e*=n),_=e+l}else h=Math.max(h=Math.min(h,d),m),_=Math.max(_=Math.min(_,u),p);let f=n;e.left&&(f=o-h);let E=a;return e.top&&(E=s-_),{position:new i.Mi(f,E),width:h,height:_}}function E(e,r,n){let s=n?0:(0,a.hG)(o.LdP),c=new i.Mi(e.pageX,e.pageY).subtract(r.mousePosition);return r.elementPosition.add(c).clampY({y:s,height:window.innerHeight-l-s})}},207711:(e,r,n)=>{n.d(r,{K:()=>u});var a=n(411855),i=n(991458),o=n(563192),s=n(340794),l=n(488527),c=n(806266);let d=(0,i.jz)(l.LdP);function u({allowedResizeDirections:e,onEdgeDoubleClick:r,resizeTo:n,onResizeEnd:i,getCurrentContainerBounds:l,lockAspectRatio:c,isResizing:u,setIsResizing:h,setResizeDirections:_,hidden:g,recordingKey:f,mirrorResizeHorizontally:E=!1}){let{startResizing:y}=function({resizeTo:e,getCurrentContainerBounds:r,isResizing:n,setIsResizing:i,setResizeDirections:l,onResizeEnd:c,lockAspectRatio:u,recordingKey:m,hidden:h,mirrorResizeHorizontally:_=!1}){let g=a.useRef(),f=a.useRef(),E=a.useRef([]),y=a.useRef({x:0,y:0}),[b,v]=a.useState(!1),T=a.useCallback(()=>{v(!1),i(void 0),l([]),E.current=[],c?.()},[v,i,c,l]),I=a.useCallback(({x:r,y:a},i,o)=>{if(!n||!f.current||!e){v(!1);return}if(n&&0===o){T();return}let l=u||i,c={x:r-y.current.x,y:a-y.current.y};c.y=Math.max(c.y,d);let{left:m,top:h,right:g,bottom:E}=p(c,f.current,n,l,_);e({[s.OP.TOP]:h!==f.current.top,[s.OP.BOTTOM]:E!==f.current.bottom,[s.OP.LEFT]:m!==f.current.left,[s.OP.RIGHT]:g!==f.current.right},{left:m,top:h,right:g,bottom:E,lockAspectRatio:l})},[n,u,_,e,T]),S=a.useRef(T);S.current=T,(0,a.useEffect)(()=>()=>{n&&S.current()},[n]);let w=o.rf(m,"mouseup",T),A=o.rf(m,"mousemove",a.useCallback(e=>{if(h)return o.aH;e.stopPropagation(),e.preventDefault();let r={x:e.clientX,y:e.clientY};if(g.current=r,n)I(r,e.shiftKey,e.buttons);else{let e=Object.create(null);E.current.forEach(r=>{e[r]=!0}),l(E.current),i(e)}},[h,n,I,i,l]),{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),C=o.v_(m,"keydown",a.useCallback(e=>{e.shiftKey&&g.current&&I(g.current,!0)},[I])),N=o.v_(m,"keyup",a.useCallback(e=>{g.current&&I(g.current,e.shiftKey)},[I]));return(0,a.useEffect)(()=>{if(b)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",w),document.addEventListener("keydown",C),document.addEventListener("keyup",N),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",w),document.removeEventListener("keydown",C),document.removeEventListener("keyup",N)}},[b,A,w,C,N]),{startResizing:a.useCallback((e,n)=>{E.current=e;let a=r();f.current=a;let i={x:e.includes(s.OP.LEFT)?a.left:e.includes(s.OP.RIGHT)?a.right:n.x,y:e.includes(s.OP.TOP)?a.top:e.includes(s.OP.BOTTOM)?a.bottom:n.y};y.current={x:n.x-i.x,y:n.y-i.y},v(!0)},[r,v]),stopResizing:T}}({resizeTo:n,getCurrentContainerBounds:l,onResizeEnd:i,isResizing:u,setIsResizing:h,setResizeDirections:_,lockAspectRatio:c,hidden:g,recordingKey:f,mirrorResizeHorizontally:E});return g?null:a.createElement("div",null,Object.values(s.OP).map((n,i)=>e.includes(n)?a.createElement(m,{key:i,directions:[n],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n)}):null),[s.OP.TOP,s.OP.BOTTOM].map(n=>[s.OP.LEFT,s.OP.RIGHT].map((i,s)=>e.includes(n)&&e.includes(i)?a.createElement(m,{key:s,directions:[n,i],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n,i)}):null)))}class m extends o.o6{constructor(){super(...arguments),this.onMouseDown=e=>o.cZ(this,"mousedown",r=>{r.stopPropagation(),r.preventDefault(),this.props.startResizing(e,{x:r.clientX,y:r.clientY})}),this.onDoubleClick=o.cZ(this,"dblclick",()=>{if(!this.props.onDoubleClick)return o.aH;this.props.onDoubleClick?.()}),this.directionsToStyle=e=>{if(1===e.length)switch(e[0]){case s.OP.TOP:return c.In;case s.OP.BOTTOM:return c.Mo;case s.OP.LEFT:return c.Wg;case s.OP.RIGHT:return c.N2}else if(2===e.length){if(e[0]===s.OP.TOP&&e[1]===s.OP.RIGHT)return c.Mq;if(e[0]===s.OP.TOP&&e[1]===s.OP.LEFT)return c.pg;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.RIGHT)return c.my;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.LEFT)return c.Do}}}render(){return a.createElement("div",{className:this.directionsToStyle(this.props.directions),onMouseDown:this.onMouseDown(this.props.directions),onDoubleClick:this.onDoubleClick})}}let p=(e,r,n,a,i)=>{let{x:o,y:l}=e,c=n[s.OP.LEFT]?o:r.left,d=n[s.OP.RIGHT]?o:r.right,u=n[s.OP.TOP]?l:r.top,m=n[s.OP.BOTTOM]?l:r.bottom;if(i){let e=(r.left+r.right)/2;n[s.OP.LEFT]?d=e+(e-o):n[s.OP.RIGHT]&&(c=e-(o-e))}if(a){let e=(r.right-r.left)/(r.bottom-r.top-s.uF),a=n[s.OP.LEFT]?r.left-o:o-r.right,i=n[s.OP.TOP]?r.top-l:l-r.bottom,p=n[s.OP.LEFT]||n[s.OP.RIGHT],h=n[s.OP.TOP]||n[s.OP.BOTTOM];if(p&&h){let o,l;let p=a/e;p<i?(o=a,l=p,n[s.OP.TOP]?u=r.top-l:m=r.bottom+l):(o=i*e,l=i,n[s.OP.LEFT]?c=r.left-o:d=r.right+o)}else if(p){let a=n[s.OP.LEFT]?r.left-o:o-r.right;m=r.bottom+a/e}else if(h){let a=n[s.OP.TOP]?r.top-l:l-r.bottom;d=r.right+a*e}}return{left:c,top:u,right:d,bottom:m}}},978537:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(471923),s=n(266838),l=n(556843),c=n(629019),d=n.n(c),u=n(777535),m=n(538971),p=n(863297),h=n(747484),_=n(621847),g=n(936907),f=n(39890),E=n(265851),y=n(719334),b=n(773991),v=n(76265),T=n(558603),I=n(736041),S=n(140835),w=n(176160),A=n(710636),C=n(582984),N=n(542383),L=n(156513);(0,A.Ju)(function(e){let r=(0,i.wA)(),[n,c]=a.useState(""),[A,O]=a.useState(!1),R=(0,w.tS)(),P=(0,i.d4)(e=>R?e.loadingState[T.f.loadingKeyForPayload({fileKey:R,emailAddress:n})]===p.r.LOADING:null),D=o.hS({...e,onClose:()=>{(0,u.sx)("google_meet_claim_email_modal_closed",{fileKey:R}),r(I.AS())}});return a.createElement(S.fu,{name:"google_device_try_file_claim_modal"},a.createElement(s.bL,{manager:D,width:420},a.createElement(l.vo,null,a.createElement(l.nB,{padding:32},a.createElement("div",{className:L.FS},a.createElement("h1",{className:L.DX},(0,v.tx)("google_device_try_file_modal.enter_email"))),a.createElement(g.k0,{multiple:1}),a.createElement("div",{className:L.FS},a.createElement("div",{className:L.Kc},(0,v.tx)("google_device_try_file_modal.enter_email.description"))),a.createElement(g.k0,{multiple:3}),a.createElement(_.il,{autoFocus:!0,type:"email",className:d()(L._2,A&&L.cC),placeholder:(0,v.t)("google_device_try_file_modal.enter_email.placeholder_email"),onChange:e=>{c(e.target.value)},value:n}),A&&a.createElement("div",{className:L.mV},(0,v.tx)("google_device_try_file_modal.enter_email.error_message")),a.createElement(g.k0,{multiple:2}),a.createElement(b.lR,{type:"submit",onClick:a=>{if(a.preventDefault(),a.stopPropagation(),null==n||!1===(0,m.xf)(n)||!R){O(!0);return}if(!R){r(y.s.error((0,v.t)("google_device_try_file_modal.error_saving_board")));return}e.onSubmitEmail({fileKey:R,emailAddress:n})}},a.createElement(f.x,{isLoading:!!P,className:E.s.flex.justifyCenter.$},()=>(0,v.tx)("google_device_try_file_modal.enter_email.button"))),a.createElement(g.k0,{multiple:3}),a.createElement("div",{className:L.NJ},(0,v.tx)("google_device_try_file_modal.disclaimer",{tos:a.createElement(N.V,{url:h.Ay.isMeetDevice?C.A:C.Uw,title:(0,v.t)("google_device_try_file_modal.onboarding_disclaimer_tos")}),privacy_policy:a.createElement(N.V,{url:h.Ay.isMeetDevice?C.bO:C.JD,title:(0,v.t)("google_device_try_file_modal.onboarding_disclaimer_privacy_policy")})})),a.createElement(g.k0,{multiple:1})))))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_MODAL")},705137:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(471923),s=n(266838),l=n(556843),c=n(841962),d=n(936907),u=n(719334),m=n(773991),p=n(76265),h=n(736041),_=n(140835),g=n(176160),f=n(710636),E=n(156513);(0,f.Ju)(function(e){let{email:r,onChangeEmail:n}=e,f=(0,i.wA)(),y=(0,g.tS)(),b=o.hS({...e,preventUserClose:!0});return a.createElement(_.fu,{name:"google_device_try_file_received_email_modal"},a.createElement(s.bL,{manager:b,width:420},a.createElement(l.vo,null,a.createElement(l.nB,{padding:32},a.createElement("img",{src:(0,c.ck)("b0feff5e4abc5e66f99064463f2ad5d0a7f6c072.png"),alt:"",className:E.ZQ}),a.createElement(d.k0,{multiple:2}),a.createElement("div",{className:E.FS},a.createElement("h1",{className:E.DX},(0,p.tx)("google_device_try_file_modal.got_mail"))),a.createElement(d.k0,{multiple:1}),a.createElement("div",{className:E.FS},a.createElement("div",{className:E.Kc},(0,p.tx)("google_device_try_file_modal.got_mail.description",{email:a.createElement("p",{className:E.Fx},r)}))),a.createElement(d.k0,{multiple:3}),a.createElement(m.lR,{onClick:e=>{e.preventDefault(),e.stopPropagation(),f(h.Ce())}},(0,p.tx)("google_device_try_file_modal.got_mail.close")),a.createElement(d.k0,{multiple:3}),a.createElement("div",{className:E.NJ},(0,p.tx)("google_device_try_file_modal.got_mail.email_not_received",{send_again_link:a.createElement(m.$z,{variant:"link",onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!y){f(u.s.error((0,p.t)("google_device_try_file_modal.error_saving_board")));return}e.onResendEmail({fileKey:y,emailAddress:r,isResentEmail:!0})}},(0,p.tx)("google_device_try_file_modal.got_mail.email_not_received.send_again"))})),a.createElement(d.k0,{multiple:2}),a.createElement("div",{className:E.NJ},(0,p.tx)("google_device_try_file_modal.got_mail.wrong_address",{use_different_email_link:a.createElement(m.$z,{variant:"link",onClick:e=>{e.preventDefault(),e.stopPropagation(),n()}},(0,p.tx)("google_device_try_file_modal.got_mail.wrong_address.use_different_email"))}))))))},"GOOGLE_DEVICE_TRY_FILE_RECEIVED_EMAIL_MODAL")},874360:(e,r,n)=>{n.d(r,{Nb:()=>S,Rw:()=>C,aF:()=>w});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(777535),c=n(666308),d=n(248752),u=n(765981),m=n(563192),p=n(640747),h=n(621847),_=n(299009),g=n(413453),f=n(76265),E=n(726084),y=n(736041),b=n(535461),v=n(140835),T=n(205287),I=(e=>(e.CLICK_OUTSIDE="click_outside",e.PRESS_ESCAPE="press_escape",e))(I||{});function S(e){let r,n;let{useModalViewScroll:i=!0,tintedModalBackground:o=!0,hide:l,disableClickOutsideToHide:m,size:p,alignment:h,absolutePosition:_,padding:g,height:f,maxHeight:E,width:y,title:v,titleClassName:I,className:S,fixedTop:w,backgroundClassName:A,onKeyDown:C,disableKeyboardEventPropagation:N,modalRef:L,onModalClick:O,enableEscapeToClose:R,children:P,animateIn:D,disableFocusTrap:k,noPadding:M,disableFocusOnMount:F}=e;(0,d.h)();let x=a.useCallback(()=>{m||l("click_outside")},[m,l]),U=a.useCallback(e=>{e.stopPropagation()},[]),B=a.useCallback(e=>{O&&O(e)},[O]),V=a.useCallback(e=>{if(e.keyCode===c.Uz.ESCAPE&&(!m||R)){l("press_escape"),e.preventDefault(),e.stopPropagation();return}C&&C(e),N&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation())},[m,l,C,N,R]),G=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(F||G.current.matches(":focus-within")||G.current.focus(),k)return;let e=(0,u.M)(e=>{e.target.closest('[aria-modal="true"]')||G.current?.focus()});return document.body.addEventListener("focus",e,!0),()=>document.body.removeEventListener("focus",e,!0)},[F,k]),"number"==typeof p&&(r=p,n=p);let H=s()({[T.JY]:"small"===p,[T.ew]:"fitContent"===p,[T.Gx]:"mobile"===p,[T.R7]:!p||"medium"===p||"number"==typeof p}),W=s()(T.K1,A,b.Dm,{[T.Y0]:o,[T.CY]:w,[T.Xt]:"left"===h,[T.Ir]:"right"===h,[T.L4]:"leftNoPadding"===h}),K=s()(H,S,{[T.yl]:i,[T.Er]:!i,[T.KJ]:!!_,[T.HY]:D,[T.pN]:M}),Y={minWidth:r,maxWidth:n,height:f,maxHeight:E,width:y,padding:g,..._?{top:_.top,left:_.left}:{}};return a.createElement("div",{tabIndex:0,className:W,onMouseDown:x,onKeyDown:V,ref:G,"data-testid":"modal-background"},a.createElement("div",{className:K,style:Y,onMouseDown:U,onClick:B,ref:L,role:"dialog","aria-modal":"true","data-testid":e["data-testid"]},v&&a.createElement("div",{className:`${T.DD} ${I||""}`},v),P))}function w(e){let r=(0,i.wA)(),{onHide:n,popStack:o}=e,{name:s,properties:c}=(0,v.j6)(),d=c?.fileKey,u=c?.productType,m=a.useCallback(e=>{o?r(y.Lo()):r(y.Ce()),n&&n(),(0,l.sx)("Modal Close",{source:e,trackingContext:s,fileKey:d,productType:u})},[r,d,s,n,o,u]);return a.createElement(S,{...e,hide:m})}let A={playback:()=>({preventDefault:()=>{}})};function C(e){let r=e.recordingKey??"",n=e.destructive??!1,o=e.autoFocusCta??!0,s=(0,i.wA)(),{dontClose:l,popStack:c}=e,d=a.useCallback(()=>{l||(c?s(y.Lo()):s(y.Ce()))},[s,l,c]),{onCloseButtonClick:u}=e,b=a.useCallback(()=>{d(),u?.()},[d,u]),v=(0,m.rf)(r,"click",b),{hideOnConfirm:I,onConfirm:S}=e,C=a.useCallback(e=>{e.preventDefault(),(I??!0)&&d(),S()},[d,I,S]),N=(0,m.qP)(r,"confirm",C,A),{hideOnCancel:L,onCancel:O}=e,R=a.useCallback(e=>{e.preventDefault(),(L??!0)&&d(),O?.()},[d,L,O]),P=(0,m.qP)(r??"","cancel",R,A),D=n?h.qM:h.vd,k=!(e.dontClose||e.hideClose);return a.createElement(w,{size:e.size||"small",...e,className:e.className||T.yl,onHide:e.overrideOnHide??e.onCancel},k&&a.createElement(p.i0,{...e,className:e.closeClass,onClick:v}),a.createElement(g.i,{displayAs:g.C.Block},!e.hideConfirmationTitle&&a.createElement("div",{className:e.titleClass??T.DD},e.confirmationTitle??(0,f.tx)("modal.are_you_sure")),e.children?e.children:a.createElement("div",{className:T.jE},e.content),a.createElement("div",{className:T.v0},a.createElement("div",{className:e.helperTextClass??T._f},e.helperText),!e.hideCancel&&a.createElement(h.tM,{onClick:P,autoFocus:!!o&&n},e.cancelText??(0,f.tx)("modal.cancel")),e.isLoading?a.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:T.LO,disabled:!0,trackingProperties:e.trackedConfirmationProperties||{}},a.createElement(_.kt,{className:e.loadingText?T.FQ:T.u1}),e.loadingText):a.createElement("form",{onSubmit:N},a.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:T.pL,disabled:e.disableConfirm,autoFocus:!!o&&!n,trackingProperties:e.trackedConfirmationProperties||{}},e.confirmText))),e.bottomWarningText&&a.createElement("div",{className:T.$$},a.createElement(E.In,{icon:"warning-32"}),e.bottomWarningText)))}},919289:(e,r,n)=>{n.d(r,{J:()=>b,M:()=>y});var a=n(411855),i=n(952979),o=n(163773),s=n(841962),l=n(621847),c=n(470253),d=n(265851),u=n(76265),m=n(661137),p=n(710636),h=n(389563),_=n(522684),g=n(967063);let f=d.s.colorIcon.h32.w28.pb32.$,E=d.s.w300.maxWFull.font13.h40.cursorPointer.$,y="LINK_EXPIRED_MODAL",b=(0,p.Ju)(function(){let{frame_context:e}=(0,s.Ay)(),r=(0,i.GZ)()&&e?.type==="embed",n=(0,m.sZ)();return(0,h.K)()&&n?a.createElement(_.H,{org:n}):a.createElement(c.u,{imageSrc:g.A,imageClassName:f,headerText:(0,u.t)("link_expired.header"),secondaryText:(0,u.t)("link_expired.description")},!r&&a.createElement(l.vd,{className:E,type:"submit",onClick:()=>{o.Ay.redirect("/")}},(0,u.tx)("link_expired.go_back_to_figma")))},y)},751160:(e,r,n)=>{n.d(r,{Lu:()=>N});var a=n(411855),i=n(188507),o=n(471923),s=n(326612),l=n(266838),c=n(556843),d=n(520244),u=n(805014),m=n(777535),p=n(163773),h=n(841962),_=n(747484),g=n(563192),f=n(76265),E=n(47795),y=n(73041),b=n(176160),v=n(914077),T=n(710636),I=n(186974),S=n(446997),w=n(672595);function A(e,r={}){(0,m.sx)("memory_warning_event",{currentAllocatedBytes:u.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:u.hMR?.getMaxUsedHeapMemory(),...e,...r})}var C=(e=>(e.SHOW_RELOAD="showReload",e.SHOW_RECOVERY_MODE="showRecoveryMode",e.SHOW_BROWSER_UPGRADE_AND_DESKTOP_DOWNLOAD="showBrowserUpgradeAndDesktop",e))(C||{});let N="memory-warning-modal";function L(e){let r=o.hS({open:!0,preventUserClose:!0,onClose:()=>{}}),n=(0,i.d4)(e=>e.mirror.appModel.isReadOnly),m=(0,i.d4)(e=>e.selectedView),T=(0,y.XE)(m)===v.nT.Design,C=(0,b.tS)()||h.Ay().editing_file?.source_file?.key||"",N=(0,i.wA)(),L={view:"fullscreen",editorType:T?v.nT.Design:v.nT.Whiteboard,fileKey:C,isRecoveryMode:!0},O=u.hMR.getHeapMemoryMode()===u.rCR.RECOVERY,R=n||O?"showReload":_.Ay.isWasm4gbSupported?"showRecoveryMode":"showBrowserUpgradeAndDesktop",P=a.createElement(s.N,{href:_.Ay.mac?"/download/desktop/mac":"/download/desktop/win",newTab:!0},(0,f.tx)("memory_warning_modal.desktop_app_download_link")),D="showReload"===R?{title:(0,f.t)("memory_warning_modal.reload_modal_title"),content:(0,f.t)("memory_warning_modal.reload_modal_content"),contentCTA:(0,f.t)("memory_warning_modal.reload_modal_content_cta"),buttonCTA:(0,f.t)("memory_warning_modal.reload_page_button"),secondaryButtonCTA:(0,f.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showRecoveryMode"===R?{title:(0,f.t)("memory_warning_modal.recovery_mode_modal_title"),content:(0,f.t)("memory_warning_modal.recovery_mode_modal_out_of_memory"),contentCTA:(0,f.t)("memory_warning_modal.recovery_mode_modal_content"),buttonCTA:(0,f.t)("memory_warning_modal.recovery_mode_button"),secondaryButtonCTA:(0,f.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:{title:(0,f.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,f.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:null,buttonCTA:(0,f.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:null,buttonExternalLink:_.Ay.browserType&&({chrome:"https://support.google.com/chrome/answer/95414",safari:"https://support.apple.com/en-us/HT204416",firefox:"https://support.mozilla.org/en-US/kb/update-firefox-latest-release",msedge:"https://support.microsoft.com/en-us/topic/update-to-the-new-microsoft-edge-182d0668-e3f0-49da-b8bb-db5675245dc2"})[_.Ay.browserType]||null,secondaryButtonExternalLink:null};return e.isBranching?a.createElement(I.E,null):a.createElement(l.bL,{manager:r,width:"lg"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,D.title)),a.createElement(c.nB,null,a.createElement("div",{className:S.j},a.createElement("div",null,D.content,a.createElement("br",null),"\xa0",a.createElement("br",null)),"showBrowserUpgradeAndDesktop"===R?(0,f.tx)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_download_desktop",{desktopAppLink:P}):D.contentCTA,a.createElement("br",null)),a.createElement("div",{className:w.v0},D.secondaryButtonCTA&&D.secondaryButtonExternalLink&&a.createElement(s.N.Button,{onClick:()=>{D.secondaryButtonCTA===(0,f.t)("memory_warning_modal.learn_more")&&A({warningEvent:"LEARN_MORE",fileKey:C},{isReadOnly:n})},recordingKey:g.Pt(e,"crash"),href:D.secondaryButtonExternalLink,newTab:!0,variant:"secondary"},D.secondaryButtonCTA),a.createElement("div",{className:w.pL},D.buttonExternalLink?a.createElement(s.N.Button,{variant:"primary",href:D.buttonExternalLink,newTab:!0,recordingKey:g.Pt(e,"crash")},D.buttonCTA):a.createElement(d.$n,{variant:"primary",recordingKey:g.Pt(e,"crash"),onClick:()=>{D.buttonCTA===(0,f.t)("memory_warning_modal.recovery_mode_button")&&A({warningEvent:"OPEN_RECOVERY_MODE",fileKey:C},{isReadOnly:n}),("showRecoveryMode"===R||n)&&N(E.$T(L)),("showReload"===R||"showRecoveryMode"===R)&&p.Ay.reload("Memory warning panel")}},D.buttonCTA))))))}(0,T.qK)(N,e=>{let{isBranching:r}=e.modalShown.data;return a.createElement(L,{isBranching:r})})},303596:(e,r,n)=>{n.d(r,{Ay:()=>C,CR:()=>D,NJ:()=>R,OA:()=>P,gm:()=>O,uv:()=>A});var a=n(411855),i=n(520244),o=n(245459),s=n(629019),l=n.n(s),c=n(991458),d=n(957568);n(875877);var u=n(746643),m=n(489803),p=n(76265),h=n(278695),_=n(140835),g=n(972311),f=n(758133),E=n(619107),y=n(695024),b=n(657426),v=n(991944),T=n(605024),I=n(423099),S=n(488527),w=n(300665);let A=(0,c.hG)(S.W8e);function C(e){let r=(0,g.Yk)(),n=(0,y._X)({subscribeToUpdates_expensive:!0}),i=a.useRef({x:0,y:0,width:0,height:0,angle:0,absoluteBounds:{x:0,y:0,width:0,height:0},page:o.AD}),[s,l]=a.useState({left:0,top:0,pointerOffset:0,pointerPosition:0}),c=a.useMemo(()=>(0,T.P7)(e.pointerType||T.gm.arrow),[e.pointerType]),d=e.topPadding||-c.pointerTargetOverlap,u=a.useCallback(()=>{if(!i.current){l(null);return}let a=(0,y.Yb)(n,i.current.absoluteBounds),o={x:a.x+n.x,y:a.y+n.y,height:a.height,width:a.width};l((0,T.my)({width:e.width,height:e.height,targetRect:o,positioningConstants:c,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:d,arrowPosition:e.arrowPosition,targetType:"canvas",viewportTopOffset:n.y,viewportBottomOffset:r}))},[e.height,e.width,c,e.alignPointerToLeft,e.shouldCenterArrow,d,r,e.arrowPosition,n]);return a.useEffect(()=>{let r=(0,E.EE)(`useCanvasNodeRepositioning-${e.targetKey}`,[e.targetKey],e=>{i.current=e.position,u()});return i.current=r.currentNodePosition[e.targetKey]?.position||null,u(),()=>{(0,E.lB)(`useCanvasNodeRepositioning-${e.targetKey}`)}},[e.targetKey,u]),(0,I.pc)({location:s,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"canvas"}),s}function N(e,r){switch(e){case v.F_.TOP:case v.F_.BOTTOM:return{left:r};case v.F_.LEFT_TITLE:case v.F_.RIGHT_BODY:return{top:r};case v.F_.RIGHT_TITLE:return{}}}let L={[v.F_.TOP]:{foregroundStyle:w.FQ,backgroundStyle:w.oX},[v.F_.BOTTOM]:{foregroundStyle:w.nW,backgroundStyle:w.a5},[v.F_.LEFT_TITLE]:{foregroundStyle:w.Hn,backgroundStyle:w.gF},[v.F_.RIGHT_TITLE]:{foregroundStyle:w.Ar,backgroundStyle:w.Ny},[v.F_.RIGHT_BODY]:{foregroundStyle:w.Ar,backgroundStyle:w.Ny}};function O(e){let{foregroundStyle:r,backgroundStyle:n}=L[e.arrowPosition],i={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.arrowOffset?N(e.arrowPosition,e.arrowOffset):{}},o={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.pointerBorder?{backgroundColor:e.pointerBorderColor||"#444444"}:{},...e.arrowOffset?N(e.arrowPosition,e.arrowOffset):{}};return a.createElement(a.Fragment,null,a.createElement("div",{"aria-hidden":!0,className:n,style:o}),a.createElement("div",{"aria-hidden":!0,className:r,style:i}))}function R(e){let r=(0,T.P7)(T.gm.arrow),n=e.width||r.defaultModalWidth,i=e.backgroundColor,o=e.onVisibilityChange,[s,c]=a.useState(0),d=a.useCallback(e=>{null!==e&&c(e.getBoundingClientRect().height)},[]),u=(e.isCanvasNode?C:I.eP)({targetKey:e.targetKey,height:s,width:n+2*A,topPadding:e.topPadding,alignPointerToLeft:e.alignPointerToLeft,shouldScrollTargetIntoView:e.shouldScrollTargetIntoView,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost}),m=!!u;if(a.useEffect(()=>{o&&o(m)},[m,o]),!u)return null;let h={left:u.left,top:u.top,width:n};e.topOffset&&(h.marginTop=e.topOffset),e.leftOffset&&(h.marginLeft=e.leftOffset);let _=e.backgroundColor?{backgroundColor:e.backgroundColor}:{};return e.hideIfArrowPositionDoesNotMatch&&u.pointerPosition!==e.arrowPosition?null:a.createElement("div",{className:`${e.className||w.Lq} ${e.noAnimation?w.gh:""}`,style:{...h,..._},ref:d},a.createElement("div",{ref:e.containerRef,role:"tooltip"},!e.shouldHideArrow&&a.createElement(O,{arrowPosition:u.pointerPosition,arrowOffset:u.pointerOffset,modalColor:i}),e.shouldNotWrapInParagraphTag?e.children:a.createElement("p",null,e.children),e.dismissModal&&!e.hideCloseButton&&a.createElement("div",{className:l()(w.b,e.closeButtonClassName)},a.createElement(b.Jn,{onClick:e.dismissModal,innerText:"close","aria-label":(0,p.t)("general.close")}))))}function P(e){let{arrowPosition:r}=e,n=(0,T.P7)(T.gm.arrow),i=e.width||n.defaultModalWidth,o=e.backgroundColor,s="dark"===(0,f.DP)(),c="light"===e.background,[d,u]=a.useState(0),h=a.useCallback(e=>{null!==e&&u(e.getBoundingClientRect().height)},[]),g=(0,I.eP)({targetKey:e.targetKey,height:d,width:i+2*A,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,alignPointerToLeft:e.alignPointerToLeft,...r&&{arrowPosition:r}});if(!g&&!e.shouldCenterModal)return null;let E=a.createElement("div",{className:l()(w._S,{[w.uS]:!(c&&!s)&&e.isUI3})},a.createElement(b.Jn,{onClick:e.dismissModal,innerText:"close","aria-label":(0,p.t)("general.close"),emphasized:!0})),y=a.createElement("div",null,e.ctaText&&e.onClickPrimaryCta&&a.createElement("div",{className:w.ZA},e.bottomLeftText&&a.createElement("b",null,e.bottomLeftText),a.createElement("div",{className:w.OQ},e.secondaryCtaText&&e.secondaryCtaHref&&a.createElement("span",{className:w.P1},a.createElement(m.pW,{newTab:!0,href:e.secondaryCtaHref,variant:"secondary"},e.secondaryCtaText)),e.secondaryCtaText&&e.onClickSecondaryCta&&a.createElement(_.$z,{className:c?w.jS:w.dC,onClick:e.onClickSecondaryCta,"aria-hidden":!0},e.secondaryCtaText),e.ctaText&&e.onClickPrimaryCta&&a.createElement(k,{onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0},e.ctaText)))),v={backgroundColor:o,width:i,margin:e.topOffset?`${e.topOffset}px auto`:"auto"},S=g?{left:g.left,top:g.top}:{left:0,right:0,top:0,bottom:0};return a.createElement("div",{className:c?w.IL:w.wV,ref:h,style:{...v,...S}},a.createElement("div",null,g&&a.createElement(O,{arrowPosition:g.pointerPosition,arrowOffset:g.pointerOffset,modalColor:c?"var(--color-bg)":void 0}),a.createElement("h1",null,e.title),e.children,E),y)}let D=a.forwardRef(function(e,r){let[n,i]=a.useState(0),o=a.useCallback(e=>{null!==e&&i(e.getBoundingClientRect().height),null!=r&&(r.current=e)},[r]),s=a.useRef(null),c=e.disableClickOutsideToHide?u.lQ:e.dismissModal;(0,d.ww)(s,c);let m=a.useRef(null),_=(0,I.eP)({targetKey:e.targetKey,height:e.passHeightForLocation?e.height?e.height:0:n,width:e.width+2*A,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost});a.useEffect(()=>{_&&(m.current=_)},[_]);let g=_||m.current,f=e.hideIfTargetLost&&null==_;if(!g||f||e.hideModal||e.shouldDismissWhenLostDOMTarget&&!_)return null;let E=e.pointerBackgroundColor||"var(--color-border, rgba(0, 0, 0, 0.2))",y=e.pointerForegroundColor||"var(--color-bg, white)",v={left:g.left+(e.arrowPadding??0),top:g.top,width:e.width};e.height&&(v.height=e.height);let T=e.animateQuickly?w.B9:w.w0,S=e.pointerPaddingOffset??0;return a.createElement("div",{ref:s},a.createElement("div",{className:e.className?`${e.className}`:T,style:v,ref:o,"data-testid":"walkThroughModal"},!e.hidePointer&&a.createElement(O,{arrowPosition:g.pointerPosition,arrowOffset:g.pointerOffset+S,modalColor:y,pointerBorderColor:E,pointerBorder:!0}),e.children,!e.hideCloseButton&&a.createElement("div",{className:l()(w.b,e.closeButtonClassName,{[w.uS]:e.useWhiteCloseButton})},a.createElement(b.Jn,{onClick:()=>{e.additionalOnExplicitDismiss&&e.additionalOnExplicitDismiss(),e.dismissModal()},innerText:"close","aria-label":(0,p.t)("general.close"),trackingProperties:{trackingDescriptor:h.c.CLOSE_BUTTON}}))))}),k=(0,_.tf)(function(e){return a.createElement(i.$n,{...e,variant:"primary"})})},272580:(e,r,n)=>{n.d(r,{$v:()=>u});var a=n(411855);n(188507),n(805014);var i=n(271646);n(693565);var o=n(265851),s=n(76265);n(225371),n(314540),n(313449),n(135891),n(779099);var l=n(991944),c=n(884920);function d(){return a.createElement(i.Ex,{color:i.zE.DEFAULT,text:(0,s.t)("pro_onboarding.professional"),className:o.s.colorTextBrand.colorBgSelectedSecondary.font11.$})}function u({dismissModal:e}){let r="share-prototype";return a.createElement(c.Pp,{dismissModal:e,pointerTargetKey:r,calloutTargetKey:r,arrowPosition:l.F_.TOP,title:(0,s.t)("pro_onboarding.prototpye_only_links"),subtitle:(0,s.t)("pro_onboarding.on_your_professional_plan_you_can_share_prototypes"),width:300,badge:a.createElement(d,null)})}n(142420)},117439:(e,r,n)=>{n.d(r,{L0:()=>u,UA:()=>d,_:()=>m,fS:()=>p});var a=n(411855),i=n(841962),o=n(265851),s=n(76265),l=n(233950),c=n(436426);let d="seen_pro_onboarding_welcome_modal";function u(){return a.createElement("div",{className:o.s.mt16.$},a.createElement(c.X,{bulletLabel:(0,s.t)("pro_onboarding.unlimited_files_for_all_your_ideas")}),a.createElement(c.X,{bulletLabel:(0,s.t)("pro_onboarding.unlimited_projects_to_organize_your_files")}),a.createElement(c.X,{bulletLabel:(0,s.t)("pro_onboarding.dev_mode_for_simpler_inspection_and_handoff")}))}function m({user:e}){return a.createElement(l.E,{fontSize:24,fontWeight:"bold"},(0,s.tx)("pro_onboarding.welcome_to_professional",{userName:e.name.split(" ")[0]}))}function p(){return a.createElement("img",{width:313,src:(0,i.ck)("4323e87513cec17f5decef84ebf66c12c0d2ea59"),alt:"An illustration welcoming you to Figma Professional"})}},806891:(e,r,n)=>{n.d(r,{yU:()=>A});var a=n(411855),i=n(188507),o=n(805014),s=n(629019),l=n.n(s),c=n(777535),d=n(666308),u=n(563192),m=n(640747),p=n(621847),h=n(413453),_=n(76265),g=n(736041),f=n(742198),E=n(884117),y=n(343373),b=n(176160),v=n(773283),T=n(710636),I=n(499008),S=n(874360),w=n(931388);let A="savepoint-modal";(0,T.qK)(A,e=>{let r=e.modalShown,n=r.data&&r.data.description||"",i=r.data&&r.data.label||"",s=r.data&&r.data.savepointID,l=r.data&&r.data.isEditingMergeSavepoint||!1,c=(0,y.GS)(),d=!e.openFile.canEdit;return a.createElement(N,{recordingKey:"savepointModal",fileKey:e.openFile.key,isHistoryMode:e.mirror.appModel.topLevelMode===o.lyf.HISTORY,editorType:e.openFile.editorType,editingSavepointID:s,label:i,dispatch:e.dispatch,description:n,isViewOnly:d,isEditingMergeSavepoint:l,isUI3:c})});let C=class e extends u.uA{constructor(r){super(r),this.onConfirmSavepointModal=(e,r)=>{let n=e||"",a=r||"";this.props.editingSavepointID&&this.props.fileKey?(this.props.dispatch(f.D({fileKey:this.props.fileKey,savepointID:this.props.editingSavepointID,label:n,description:a})),this.hideModal(),(0,c.sx)("History Version Edited Information",{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:a.length})):n.length>0&&this.props.fileKey&&(this.props.dispatch(E.m({fileKey:this.props.fileKey,label:n,description:a})),this.hideModal(),(0,c.sx)(`History Version Created from ${this.props.isHistoryMode?"History Mode":"Keyboard Shortcut"}`,{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:a.length})),this.clearSavedInputs()},this.onKeyDownMulti=e=>{e.keyCode===d.Uz.ENTER&&(e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),this.hideModal(),this.onConfirmSavepointModal(this.state.label,this.state.description))},this.hideModal=()=>{this.props.dispatch(g.Ce())},this.onSubmit=u.P_(this,"submit",e=>{e.preventDefault(),this.onConfirmSavepointModal(this.state.label,this.state.description)}),this.onCancel=()=>{this.clearSavedInputs(),this.hideModal()},this.saveHistoryInputs=()=>{e.keepSavepointModalInput=!0,e.savedLabelInput=this.state.label,e.savedDescriptionInput=this.state.description},this.clearSavedInputs=()=>{e.keepSavepointModalInput=!1,e.savedLabelInput="",e.savedDescriptionInput=""},this.onLabelChange=e=>{let r=e.target.value;this.setState({label:r})},this.onLabelBlur=e=>{this.onLabelChange(e)},this.onDescriptionChange=e=>{let r=e.target.value;this.setState({description:r})},this.onDescriptionBlur=e=>{this.onDescriptionChange(e)},this.goHistoryMode=()=>{this.props.isHistoryMode||(this.props.dispatch((0,v._b)()),this.saveHistoryInputs(),this.hideModal())},this.state={label:"",description:"",disableConfirm:!this.props.isLabelReadOnly}}setLabelAndDescriptionFromProps(r){this.state.label.length<1&&this.state.description.length<1&&(e.keepSavepointModalInput?this.setState({label:e.savedLabelInput,description:e.savedDescriptionInput}):this.setState({label:this.props.label,description:this.props.description}))}componentDidMount(){this.setLabelAndDescriptionFromProps(this.props),super.componentDidMount()}UNSAFE_componentWillReceiveProps(e){this.setLabelAndDescriptionFromProps(e)}render(){if(this.props.isViewOnly)return null;let e=this.state.disableConfirm;this.state.label&&this.state.label.length>0&&(e=!1);let r=(0,_.tx)("collaboration.feedback.save_modal.save"),n=(0,_.tx)("collaboration.feedback.save_modal.cancel"),i=this.props.editingSavepointID?this.props.isEditingMergeSavepoint?(0,_.tx)("collaboration.feedback.save_modal.edit_merge_details"):(0,_.tx)("collaboration.feedback.save_modal.edit_version_information"):(0,_.tx)("collaboration.feedback.save_modal.add_to_version_history"),o=a.createElement(h.i,{displayAs:h.C.Block},a.createElement("form",{onSubmit:this.onSubmit},a.createElement("div",{className:this.props.isUI3?w.nr:void 0},a.createElement("div",{className:w.uW},this.props.isEditingMergeSavepoint&&a.createElement("div",{className:w.VA},(0,_.tx)("collaboration.feedback.save_modal.merge_name_placeholder")),a.createElement(p.ks,{className:l()([w.NB,{[w.pR]:this.props.isLabelReadOnly}]),type:"input",name:"label",value:this.state.label,placeholder:(0,_.t)("fullscreen.savepoint_modal.title"),onChange:this.onLabelChange,onBlur:this.onLabelBlur,onKeyDown:this.onKeyDownMulti,autoFocus:!0,recordingKey:u.Pt(this.props,"title"),disabled:this.props.isLabelReadOnly})),a.createElement("div",{className:this.props.isUI3?void 0:w.uW},this.props.isEditingMergeSavepoint&&a.createElement("div",{className:w.VA},(0,_.tx)("fullscreen.savepoint_modal.give_this_merge_a_description")),a.createElement(p.ks,{className:w.tV,type:"textarea",name:"description",value:this.state.description,placeholder:(0,_.t)("collaboration.feedback.save_modal.description_placeholder"),onChange:this.onDescriptionChange,onBlur:this.onDescriptionBlur,onKeyDown:this.onKeyDownMulti,recordingKey:u.Pt(this.props,"description")}))),a.createElement("div",{className:this.props.isHistoryMode?w.$8:w.v0},!this.props.isHistoryMode&&a.createElement("div",{className:w.RW,onClick:this.goHistoryMode},(0,_.tx)("fullscreen.savepoint_modal.show_full_version_history")),a.createElement(p.e2,{reversed:!0},a.createElement(p.$$,{type:"submit",className:w.pL,disabled:e},r),a.createElement(p.nR,{type:"button",className:w.Lu,onClick:this.onCancel},n)))));return this.props.isUI3?a.createElement(I.XV,{title:i,onClose:this.hideModal},a.createElement("div",{className:w.yl},o)):a.createElement(S.aF,{size:"small",...this.props,className:w.yl},a.createElement(m.s_,{...this.props}),a.createElement("div",{className:w.DD},i),o)}};C.displayName="SavepointModal",C.keepSavepointModalInput=!1,C.savedLabelInput="",C.savedDescriptionInput="";let N=C;(0,T.Ju)(function({savepointID:e,label:r,description:n}){let o=(0,b.q5)(),s=(0,i.wA)(),l=(0,y.GS)();return o?a.createElement(N,{recordingKey:"savepointModal",fileKey:o.key,isHistoryMode:!0,editorType:o.editorType,editingSavepointID:e,label:r??"",dispatch:s,description:n??"",isViewOnly:!o.canEdit,isUI3:l,isLabelReadOnly:!0}):null},"DevModeSavepointModal")},423099:(e,r,n)=>{n.d(r,{eP:()=>d,pc:()=>l,xT:()=>c});var a=n(411855),i=n(677840),o=n(401562),s=n(605024);function l({location:e,onTargetLost:r,targetKey:n,targetType:o}){let s=a.useRef(null),l=a.useRef(null),c=a.useRef(!1);a.useEffect(()=>{!c.current&&e&&(c.current=!0)},[c,e]),a.useEffect(()=>{e?(s.current=e,l.current=n):l.current===n&&((0,i.YQ)({id:"Lost DOM Target"}),r?.(c.current,o))},[e,r,n,o])}function c(e){let r=document.querySelectorAll(`[data-onboarding-key=${e}]`);if(0===r.length)return null;for(let e=0;e<r.length;e++){let n=r[e].getBoundingClientRect();if(!(0===n.left&&0===n.right&&0===n.height&&0===n.width))return r[e]}return null}let d=(0,o.D)(e=>{let r=(0,s.P7)(e.pointerType||s.gm.arrow);e.pointerOffsetOverride&&(r.standardPointerOffset=e.pointerOffsetOverride);let n=e.topPadding||-r.pointerTargetOverlap,i=a=>{let i=c(e.targetKey);if(null!=i){let o=(0,s.my)({width:e.width,height:e.height,targetRect:i.getBoundingClientRect(),positioningConstants:r,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:n,targetType:"dom",arrowPosition:e.arrowPosition});return null==a||o.top!==a.top||o.left!==a.left?{type:"CHANGED",location:o}:{type:"UNCHANGED"}}return{type:"NOT_FOUND"}},o=null,[d,u]=a.useState(()=>{let e=i(null);return"CHANGED"===e.type&&(o=e.location),o}),[m,p]=a.useState(null);a.useEffect(()=>{let r=i(d);if("CHANGED"===r.type?o=r.location:"UNCHANGED"===r.type&&(o=d),void 0!==r&&u(o),p(e.targetKey),e.shouldScrollTargetIntoView){let r=c(e.targetKey);r?.scrollIntoView()}},[e.targetKey]);let h=a.useRef();function _(){let e=i(d);"CHANGED"===e.type?u(e.location):"NOT_FOUND"===e.type&&u(null)}return(a.useEffect(()=>{h.current=_}),a.useEffect(()=>{let e=setInterval(function(){h.current()},50);return()=>clearInterval(e)},[]),l({location:d,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"dom"}),m!==e.targetKey)?o:d})},73718:(e,r,n)=>{n.d(r,{J4:()=>D,YU:()=>B,Kd:()=>G,Iz:()=>V,_9:()=>k,lG:()=>x,fb:()=>M,p8:()=>F,mi:()=>W,ET:()=>H});var a=n(411855),i=n(188507),o=n(431295),s=n(633497),l=n(968803),c=n(898117),d=n(882262),u=n(841962),m=n(467218),p=n(132939),h=n(76265),_=n(343373),g=n(125682),f=n(661137),E=n(314540),y=n(914077),b=n(324225),v=n(688656),T=n(819633),I=n(712204),S=n(453783);let w="audience_selector--iconContainer--W80mw",A="audience_selector--radioText--OD-3K",C="audience_selector--radioOption--4NDFa",N="audience_selector--radioSubtitle--g3Mry",L="audience_selector--blackIcon--PM3f-";var O=n(585101),R=n(535011),P=n(204702),D=(e=>(e.VIEW="view",e.EDIT="edit",e))(D||{}),k=(e=>(e.ANYONE="anyone",e.ORG="org",e.WORKSPACE="workspace",e.TEAM="team",e.FOLDER="folder",e.INVITE_ONLY="invite_only",e))(k||{});let M={[E.PQ.EDIT]:{shareAudience:"anyone",audienceAccessLevel:"edit"},[E.PQ.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.PQ.ORG_EDIT]:{shareAudience:"org",audienceAccessLevel:"edit"},[E.PQ.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_VIEW]:{shareAudience:"workspace",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_EDIT]:{shareAudience:"workspace",audienceAccessLevel:"edit"},[E.PQ.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null},[E.PQ.INVITE_ONLY]:{shareAudience:"invite_only",audienceAccessLevel:null}},F={[E.Pu.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.Pu.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.Pu.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null}};function x(e,r){return"anyone"===e?"edit"===r?E.PQ.EDIT:E.PQ.VIEW:"org"===e?"edit"===r?E.PQ.ORG_EDIT:E.PQ.ORG_VIEW:E.PQ.INVITE_ONLY}let U=(e,r)=>{if("anyone"===e){if("anyone"!==r)return!1}else if("org"===e&&"invite_only"===r)return!1;return!0};function B(e){let r=(0,i.wA)(),n={[E.vt.TEAM]:["invite_only"],[E.vt.FOLDER]:["invite_only"],[E.vt.FILE]:["anyone","invite_only"],[E.vt.FILE_REPO]:["anyone","invite_only"]}[e.resourceType],m=null;e.org&&(e.workspace&&e.workspace.id!==T.O&&n.splice(1,0,"workspace"),n.splice(1,0,"org")),e.isPrototype&&(n=n.filter(r=>U(e.fileShareAudience,r)),"anyone"===e.fileShareAudience&&1===n.length&&"anyone"===n[0]&&(m=(0,h.t)("permissions.audience_selector.can_only_be_adjusted_in_the_main_file")));let f=(0,g.Um)(),b={anyone:(0,h.t)("permissions.audience_selector.anyone"),workspace:e.workspace?.name||"",org:e.org?.name||"",team:e.team?.name||"",folder:"",invite_only:(0,h.t)("permissions.audience_selector.only_invited_people")},A=(0,_.GS)(),C={anyone:a.createElement("div",{className:w},a.createElement(p.U,{svg:R.A,className:L},a.createElement(o.Y,null))),workspace:e.workspace&&a.createElement("div",{className:w},A?a.createElement(s.w,null):a.createElement(I.z6,{entity:e.workspace,size:16})),org:e.org&&a.createElement("div",{className:w},A?a.createElement(l.Y,null):a.createElement(p.U,{svg:P.A,className:L},a.createElement(l.Y,null))),team:e.team&&a.createElement("div",{className:w},a.createElement(I.Ro,{entity:{id:e.team.id,imgUrl:e.team.img_url,name:e.team.name},hideFallbackInitial:!1,size:16})),folder:a.createElement(a.Fragment,null),invite_only:a.createElement("div",{className:w},a.createElement(p.U,{svg:O.A,className:L},a.createElement(c.c,null)))},N=a.useCallback(()=>{let r={[E.vt.TEAM]:(0,h.t)("permissions.audience_selector.team_resource_name"),[E.vt.FOLDER]:(0,h.t)("permissions.audience_selector.project_resource_name"),[E.vt.FILE]:(0,h.t)("permissions.audience_selector.file_resource_name"),[E.vt.FILE_REPO]:(0,h.t)("permissions.audience_selector.file_resource_name")};return e.isPrototype?e.editorType===y.nT.Slides&&(0,u.kc)().slides_paywall_string?(0,h.t)("permissions.audience_selector.presentation_resource_name"):(0,h.t)("permissions.audience_selector.prototype_resource_name"):r[e.resourceType]},[e.isPrototype,e.resourceType,e.editorType]),D=a.useMemo(()=>{let r=N();switch(e.value){case"anyone":return e.editorType===y.nT.Slides?(0,h.t)("permissions.audience_selector.anyone_even_outside_your_org_can_access_this_resource",{resourceName:r}):(0,h.t)("permissions.audience_selector.anyone_even_those_outside_your_org_can_access_this_resource",{resourceName:r});case"org":if(e.searchable)return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});return(0,h.t)("permissions.audience_selector.audience_can_access_through_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});case"workspace":return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.workspace_members")});case"team":case"folder":return(0,h.t)("permissions.audience_selector.can_access_through_search_file_browser_link");case"invite_only":return(0,h.t)("permissions.audience_selector.only_people_you_directly_invited_can_access",{resourceName:r})}},[e.value,e.searchable,e.editorType,N]);return a.createElement("div",{"data-testid":"create-team-modal-audience-selector"},a.createElement(S.l6,{id:"create-team-modal-audience-selector",property:e.value,formatter:{format:e=>b[e]},onChange:e.onChange,dispatch:r,dropdownShown:f,className:"audience_selector--dropdownSelector--eEAHQ select--selectInputExpanded--Lz6m4",inputClassName:"audience_selector--dropdownSelectorTitle---y7CH",icon:C[e.value],dropdownClassName:"audience_selector--dropdownContainer--Xyoak",openBelowTarget:!A,focusedOption:n[0],disabled:!!m||e.disabled,rightIcon:m?a.createElement(d.b,{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":m}):void 0,iconClassName:"audience_selector--dropdownSvg--VPhRA"},n.map(r=>a.createElement(S.c$,{value:r,key:r,height:28,icon:C[r],dataTestId:`audience-option-${r}`,rightCheck:!0,disabled:"anyone"===r&&e.publicLinksBanned},b[r]))),a.createElement("div",{className:"audience_selector--subtitle--MIXKn text--fontPos11--2LvXf text--_fontBase--QdLsd"},D))}function V(e){return a.createElement(a.Fragment,null,a.createElement(m.z,{value:e.selectedPermissionsLevel,onChange:e.setSelectedPermissionsLevel,isHorizontal:!0,dataTestId:"permissions-level-radio-group"},a.createElement(m.Z,{key:"view-only",value:"view",className:C,disabled:e.disabled},a.createElement("p",{className:A},(0,h.tx)("team_creation.view"))),a.createElement(m.Z,{key:"edit",value:"edit",className:C,disabled:e.disabled||e.disableEdit},a.createElement("p",{className:A},e.teamCanAccess?(0,h.tx)("permissions.level_name_capitalized.can_access"):(0,h.tx)("team_creation.edit")))))}function G(e){return f.sZ()?.k12_google_org&&(0,u.kc)().student_plan_no_hidden_teams?a.createElement(m.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},a.createElement(m.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:C},a.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),a.createElement("p",{className:N},(0,h.tx)("team_creation.anyone_can_find_this_team"))):a.createElement(a.Fragment,null,a.createElement(m.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},a.createElement(m.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:C},a.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),a.createElement("p",{className:N},(0,h.tx)("team_creation.anyone_can_find_this_team")),a.createElement(m.Z,{key:"hidden",value:b.Fb.HIDDEN,className:C},a.createElement("p",{className:A},(0,h.tx)("team_creation.hidden"))),a.createElement("p",{className:N},(0,h.tx)("team_creation.only_team_members_can_find_and_access"))))}function H(e,r,n,i){return e===E.PQ.EDIT||e===E.PQ.VIEW?i?(0,h.tx)("file_audience_row.anyone_with_password"):(0,h.tx)("permissions.anyone"):e===E.PQ.ORG_EDIT||e===E.PQ.ORG_VIEW?r&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:r.name}):e===E.PQ.WORKSPACE_EDIT||e===E.PQ.WORKSPACE_VIEW?n&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:n.name}):e===E.PQ.INVITE_ONLY||e===E.PQ.INHERIT?(0,h.tx)("permissions.only_those_invited"):a.createElement(a.Fragment,null)}function W(e){return e===E.PQ.EDIT||e===E.PQ.ORG_EDIT||e===E.PQ.WORKSPACE_EDIT?(0,h.tx)("file_access_row.can_edit"):e===E.PQ.VIEW||e===E.PQ.ORG_VIEW||e===E.PQ.WORKSPACE_VIEW?(0,h.tx)("file_access_row.can_view"):void 0}},275714:(e,r,n)=>{n.d(r,{mK:()=>f,ox:()=>g});var a=n(411855),i=n(188507),o=n(890882),s=n(697737),l=n(677840),c=n(736041),d=n(180307),u=n(15092),m=n(919289),p=n(285560);function h(e){s.Ay.put(`/api/files/${e}/expire_public_link`)}let _=(e,r)=>{let n=a.useRef(null);a.useEffect(()=>{let a=e?(0,o.A)(e).diff((0,o.A)()):void 0;return void 0!==a&&a<0x7fffffff?(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,r()},a)):n.current&&(clearTimeout(n.current),n.current=null),()=>{n.current&&clearTimeout(n.current)}},[e,r])};function g(e){let r=(0,u.iZ)(),n=(0,i.wA)(),{file:o,onCanvasExpired:s}=e,p=o?.key,g=(0,d.v)(e.file),f=a.useRef(void 0),E=g?.activeExpiration,y=g?.file,b=y?.hasViewPrototypeRole,v=g?.accessReverted;a.useEffect(()=>{b&&v&&!f.current?.accessReverted&&g.expiresAt&&g.expiresAt===f.current?.expiresAt&&(0,l.YQ)({id:"link_expired_event"}),f.current=g},[g,v,b]),_(E,a.useCallback(()=>{p&&(b&&r||(n(c.to({type:m.J})),s?.()),h(p))},[n,s,p,r,b]))}function f(e,r){_(p.d4(r)?.toISOString(),a.useCallback(()=>{h(e)},[e]))}},250606:(e,r,n)=>{n.d(r,{$:()=>u});var a=n(217950),i=n(550479),o=n(736041),s=n(353428);n(314540);var l=n(487388),c=n(914077),d=n(574431);function u(e,r,n){if(!(0,c.Nw)(r)){(0,i.$D)(a.e.MONETIZATION_UPGRADES,Error("Paywall: Wrong editor type for pro feature"),{extra:{editorType:r,teamId:n.id}});return}e((0,o.to)({type:d.DV,data:{team:n,editorType:(0,c.oD)(r),resource:l.Bi.PASSWORD_PROTECTION,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO}}))}},309533:(e,r,n)=>{n.d(r,{KM:()=>P,Ku:()=>F});var a=n(411855),i=n(188507),o=n(520244),s=n(557603),l=n(570446),c=n(499325),d=n(952979),u=n(841962),m=n(424652),p=n(875877),h=n(265851),_=n(76265),g=n(910164),f=n(241162),E=n(140835),y=n(176160),b=n(69441),v=n(839644),T=n(73718),I=n(30053),S=n(510661),w=n(271934),A=(e=>(e.EDIT="edit",e.DUPLICATE="duplicate",e))(A||{});let C=(0,u.ck)("cee072aec57608cbb49c64eb6cb3765896cea921"),N="share-to-google-classroom-row",L=(0,p.atom)(null),O=(0,E.tf)(S.sR);function R(e){let r=(0,i.wA)(),n=(0,p.useSetAtom)(L),o=a.useRef(null);a.useEffect(()=>(n(o),()=>{n(null)}),[o,n]);let s=a.createElement("div",{ref:o,className:w.S},a.createElement("img",{src:C,alt:"share to google classroom",className:w.S}));return a.createElement(E.fu,{name:"share_to_google_classroom_row"},a.createElement(O,{icon:s,text:(0,_.t)("file_permissions_modal.share_as.google_classroom"),onClick:()=>{r(f.b({has_shared_to_google_classroom:!0})),e.onClick()},testId:N,dataOnboardingKey:N,expandCaret:!0,trackingProperties:{text:"Share to Google Classroom"}}))}function P({org:e,currentUser:r}){var n;let i=(0,I.o)(),o=e?.k12_google_org,s=(n=r?.profile?.jobTitle||"","education"===(0,m.HB)(n));return o||s?a.createElement(R,{onClick:()=>i(v.A5.SHARE_TO_GOOGLE_CLASSROOM)}):null}let D=(0,E.tf)(o.$n),k=g.sx.add({color:"var(--color-text-figjam)",cursor:"pointer",userSelect:"auto"}).$,M=g.sx.add({transform:"translateY(-4px)"}).$;function F(e){let r=T.fb[e.linkAccess].audienceAccessLevel!==T.J4.EDIT,n=(0,y.q5)(),[i,o]=(0,a.useState)("edit"),u=(0,I.o)();return a.createElement(E.fu,{name:"google_classroom_share_modal"},a.createElement("div",{className:h.s.flex.flexColumn.p16.$},a.createElement("form",null,a.createElement(s.b,{legend:a.createElement(l.s,null,r?a.createElement("div",{className:h.s.textBodyMedium.pb8.$,"data-testid":"share-to-google-classroom-disclaimer"},(0,_.tx)("file_permissions_modal.google_classroom_modal.disclaimer",{link:a.createElement(E.$z,{onClick:()=>u(v.A5.SHARE_SETTINGS),type:"button",style:k},(0,_.tx)("file_permissions_modal.google_classroom_modal.disclaimer_link"))})):a.createElement(a.Fragment,null)),value:i,onChange:o},a.createElement("div",{className:h.s.mt8.$},a.createElement(s.c,{value:"edit",label:a.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-edit-option"}},(0,_.tx)("file_permissions_modal.google_classroom_modal.editable_option"))},r?a.createElement("div",{style:M},(0,_.tx)("file_permissions_modal.google_classroom_modal.editable_option_description")):null),a.createElement(s.c,{value:"duplicate",label:a.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-duplicate-option"}},(0,_.tx)("file_permissions_modal.google_classroom_modal.duplicate_option"))},r?a.createElement("div",{style:M},(0,_.tx)("file_permissions_modal.google_classroom_modal.duplicate_option_description")):null)))),a.createElement("div",{className:h.s.flex.flexRow.justifyEnd.$},a.createElement(D,{variant:"primary",onClick:()=>{let r=n?(0,b.jN)({file:n}):"",a="duplicate"===i?"/duplicate":"",o=r?`?url=${r}${a}`:"";(0,d.FJ)(`https://classroom.google.com/share${o}`,"_blank","popup,width=650,height=505"),e.closeModal()},trackingProperties:{googleClassroomShareOption:i},htmlAttributes:{"data-testid":"share-to-google-classroom-share-button"}},(0,_.tx)("general.next")))))}},285560:(e,r,n)=>{n.d(r,{$j:()=>s,Dp:()=>l,Fn:()=>c,M3:()=>E,U:()=>f,W7:()=>_,cH:()=>m,d4:()=>y,hP:()=>g,lX:()=>d,ml:()=>h,nM:()=>b,yJ:()=>u});var a=n(846288),i=n(890882),o=n(76265),s=(e=>(e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(s||{}),l=(e=>(e.TWENTY_SEC="20_seconds",e.CURRENT="current",e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(l||{});function c(e,r){switch(r){case"24_hours":case"24_hours":return p(e.clone().add(24,"h"));case"7_days":case"7_days":return p(e.clone().add(7,"d"));default:return(0,i.A)()}}function d(e,r){let n=r.diff(e,"hours");if(n<1){let n=r.diff(e,"minutes");return{num:n<1?1:n,unit:"minute"}}if(n<24)return{num:n,unit:"hour"};let a=Math.ceil(n/24);return a%30==0?{num:Math.floor(a/30),unit:"month"}:a%7==0?{num:Math.floor(a/7),unit:"week"}:{num:a,unit:"day"}}function u(e,r){let{num:n,unit:i}=d(e,r);switch(i){case"minute":return(0,o.t)("permissions_modal.file_share_settings.minute_text",{num:n});case"hour":return(0,o.t)("permissions_modal.file_share_settings.hour_text",{num:n});case"day":return(0,o.t)("permissions_modal.file_share_settings.day_text",{num:n});case"week":return(0,o.t)("permissions_modal.file_share_settings.week_text",{num:n});case"month":return(0,o.t)("permissions_modal.file_share_settings.month_text",{num:n});default:(0,a.xb)(i)}}function m(e,r=!1){return r?e.startOf("hour"):e.clone().add(30,"minutes").startOf("hour")}function p(e,r=!1){return e.clone().add(30,"seconds").startOf("minute")}function h(e){return e.format("LT")}function _(e){return e.format("YYYY-MM-DD")}function g(e){return e.format("HH:mm")}function f(e,r){return(0,i.A)(e+" "+r,"YYYY-MM-DD HH:mm")}function E(e,r){let n=e.isSame((0,i.A)().add(1,"day"),"day"),a=h(e);if(n&&!r)return(0,o.t)("file_access_row.expiration.24_hours.timestamp",{time:a});let s=e.toDate().toLocaleDateString(e.locale(),{weekday:r?"long":"short",month:"short",day:"numeric"});return(0,i.A)().isSame(e,"year")?(0,o.t)("file_access_row.expiration.date.timestamp",{date:s,time:a}):e.format("L LT")}function y(e){return e&&!e.accessReverted&&e.expiresAt?e.expiresAt:null}function b(e){return e<24||e%24!=0?(0,o.t)("file_access_row.expiration.past_org_limit_hours",{count:e}):(0,o.t)("file_access_row.expiration.past_org_limit_days",{count:e/24})}},291489:(e,r,n)=>{n.d(r,{H:()=>C});var a=n(411855),i=n(766794),o=n(629019),s=n.n(o),l=n(991458),c=n(918091),d=n(132939),u=n(677840),m=n(648800),p=n(233950),h=n(47795),_=n(140835),g=n(929717),f=n(993272),E=n(368690),y=n(791718),b=n(289298);let v=(0,l.hG)(E.p3),T=(0,l.hG)(f.km),I=(0,l.hG)(f.LF),S=(0,l.hG)(f.hX),w=v-T/2;function A({dispatch:e,dropdownClassName:r,dropdownShown:n,options:i,value:o,onChange:l,trackingProperties:d={}}){let[u,_]=(0,a.useState)(0),[f,E]=(0,a.useState)(window.innerWidth),b=()=>{E(window.innerWidth)};(0,a.useEffect)(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[]);let A=a.useRef(null),C=a.useRef(null);(0,a.useEffect)(()=>{if(A.current&&C.current){let e=A.current.getBoundingClientRect(),r=A.current.offsetParent?.getBoundingClientRect();!e||!r||e.top>=r.top&&e.bottom<=r.bottom||(A.current.scrollIntoView(!1),C.current.scrollBy(8)),_(e.width)}},[]);let N={...n?.data?.position||{top:0,left:0}},L=0,O=0,R=!1,P=-1,D=i.map((r,n)=>{if("separator"===r.type)return R||(L+=S),O+=S,a.createElement(c.wv,{key:r.key?String(r.key):n,dataTestId:`dropdown-separator-${n}`});let s=r.key===o;s&&(P=n),R=R||s;let u=r.subtext?I:T;R||(L+=u),O+=u;let _={};return r.subtext&&i[n+1]?.type!=="separator"&&(_.paddingBottom=8,O+=8),a.createElement("div",{key:String(r.key),ref:s?A:null,style:_,"data-testid":`dropdown-option-${n}`,"data-onboarding-key":`dropdown-option-${String(r.key)}`},a.createElement(c.rr,{checked:s,onClick:n=>{n.stopPropagation(),s||l(r.key),e(h.oB())},trackingProperties:{...d,key:String(r.key)},disabled:r.disabled,"data-testid":`dropdown-option-checkable-${n}`},a.createElement("div",{style:{display:"flex",alignItems:"center"}},!!r.icon&&a.createElement(a.Fragment,null,r.icon),a.createElement(m.Y,{direction:"vertical",spacing:4,height:u,verticalAlignItems:"center"},a.createElement(p.E,{fontSize:12},r.text),r.subtext&&a.createElement(p.E,{fontSize:11,color:"menu-disabled"},r.subtext)))))});u+N.left+4>f&&(N.left="auto",N.right=4);let k=16;P===i.length-1&&(k=8),"auto"!==N.top&&void 0!==N.top&&(N.top-=Math.min(L,w-k),N.top=Math.max(16,N.top));let M=a.createElement(g.g1,{maxDropdownHeight:e=>"auto"===N.top||void 0===N.top?v:Math.min(v,Math.round(e-N.top-8-16)),dropdownChildrenHeight:O,ref:C},D);return a.createElement(c.gw,{stopScrollPropagation:!0,dispatch:e,className:s()(y.N1,r),style:N},M)}function C({dispatch:e,dropdownShown:r,value:n,options:o,onChange:l,id:c,placeholder:m,disabled:p=!1,dropdownData:g={},isOpen:f,trackingProperties:E={},dataOnboardingKey:v,onOpenRcsEvent:T,ui3Icon:I}){let S=(0,a.useRef)(null),w=o.findIndex(e=>"option"===e.type&&e.key===n),C=o[w],N=C?.type==="option"?C.selectedLabel||C.text:m,L=C?.type==="option"&&C.selectedLabelClass||"";return f=f??r?.type===c,a.createElement("div",{ref:S},a.createElement(_.jm,{trackingProperties:E,className:s()({[y.Lt]:!p,[y.rp]:I}),onClick:p?void 0:n=>{n.stopPropagation(),n.preventDefault(),r&&r.type===c?e(h.oB()):o.length&&!p&&(e(h.j7({type:c,data:{...g,...function(e){let r=e.current?.getBoundingClientRect();return r?{position:{top:r.top,bottom:"auto",left:r.left,right:"auto"}}:{}}(S)}})),T&&(0,u.YQ)({id:T}))}},I,a.createElement("div",{className:`${y.Ck} ${L}`,"data-testid":"dropdown-label"},N),!p&&a.createElement("div",{className:y.Lo},a.createElement(d.U,{"data-onboarding-key":!p&&v?v:"",svg:b.A},a.createElement(i.r,null)))),f&&a.createElement(A,{dispatch:e,dropdownShown:r,dropdownClassName:y.W8,value:n,options:o,onChange:l,trackingProperties:E}))}},448690:(e,r,n)=>{n.d(r,{CM:()=>v,E4:()=>I,R9:()=>b,hP:()=>T,nu:()=>S});var a=n(411855),i=n(188507),o=n(872039),s=n(629019),l=n.n(s),c=n(693565),d=n(132939),u=n(76265),m=n(728764);n(190253);var p=n(305216);n(657871);var h=n(331850),_=n(688656),g=n(291489),f=n(791718),E=n(860574),y=n(957412);function b(e){let r="level-change-dropdown",n=(0,i.wA)(),o=()=>e.dropdownShown&&e.dropdownShown.type===r&&e.dropdownShown.data.dropdownId===e.id,s=e.virtualRowItem?{position:"absolute",top:e.virtualRowItem.start,left:0,right:0}:void 0;return a.createElement("div",{className:f.zn,style:s},a.createElement("div",{className:f.H},a.createElement(T,{user:e.user,id:e.id,pending:e.pending})),a.createElement("div",{className:f.$S},a.createElement("div",{key:`name-${e.id}`,className:e.pending?f.NE:f.UU},e.userName),e.warningMessage&&a.createElement(c.B,{className:f.QW,svg:y.A,"data-tooltip-timeout-delay":50,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":e.warningMessage}),e.warningTooltipId&&a.createElement(c.B,{className:f.QW,svg:y.A,"data-tooltip-type":_.Ib.SPECIAL,"data-tooltip":e.warningTooltipId,"data-tooltip-timeout-delay":50,"data-tooltip-interactive":!0}),(()=>{let i=e.getRoleOptions();return i?a.createElement(g.H,{dispatch:n,onChange:e.onChangeLevel,options:i,id:r,value:e.level,dropdownShown:e.dropdownShown,dropdownData:{dropdownId:e.id},isOpen:!!o()}):e.isPrototypeRole&&e.level===h.e6.VIEW_PROTOTYPES?a.createElement("span",{className:f.C1},(0,u.t)("permissions.level_name.can_view")):a.createElement("span",{className:f.C1},(0,p.C1)(e.level,e.isBranchFile))})()))}function v(e){let{user:r,plan:n}=e;return a.createElement("div",{className:f.e0},a.createElement("img",{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":r.email,key:`avatar-${e.id}`,src:r.img_url,className:l()(f.my),alt:""}),a.createElement("div",{className:f.dz},a.createElement(m.nl,{size:m.Pf.SMALL,shape:"CIRCLE",team:{id:n?.parentId??"",name:n?.name??"",imgUrl:n?.imgUrl??""}})))}function T(e){let{user:r,pending:n}=e,i=!1===n&&r.img_url;return i&&!n?a.createElement("img",{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":e.user.email,key:`avatar-${e.id}`,src:i,className:l()(f.my,e.small&&f.dT,e.border&&f.kk),alt:""}):a.createElement("div",{className:l()(f.f1,e.small&&f.dT,e.border&&f.kk),"data-tooltip-type":_.Ib.TEXT,"data-tooltip":e.user.email},a.createElement(d.U,{key:`avatar-${e.id}`,svg:E.A,className:l()(f.Zk,e.small&&f.dT)},a.createElement(o.A,{className:l()(f.Zk,e.small&&f.dT)})))}function I(e,r){return!1===e.pending?e.user.handle:e.user.email in r?r.usersByEmail[e.user.email].handle:e.user.email}function S(e,r,n,a,i,o,s){let l=[],c=!1;if(!n)return null;s&&o===h.e6.VIEW_PROTOTYPES?l.push({type:"option",key:h.e6.VIEW_PROTOTYPES,text:(0,p.C1)(h.e6.VIEWER)}):r?l.push(w(o)):(e&&!i&&l.push(w(h.e6.OWNER)),a&&l.push(w(h.e6.ADMIN)),l.push(w(h.e6.EDITOR)),l.push(w(h.e6.VIEWER)),c=i);let d=r&&!e?(0,u.t)("confirm_remove_role.leave"):(0,u.t)("confirm_remove_role.remove");return l.push({type:"separator"}),c&&l.push({type:"option",key:"resend",text:(0,u.t)("role_row.resend_invite")}),l.push({type:"option",key:h.e6.NONE,text:d}),l}function w(e){return{type:"option",key:e,text:(0,p.C1)(e)}}},687456:(e,r,n)=>{n.d(r,{$f:()=>A,I$:()=>w,Jr:()=>C,UM:()=>N});var a=n(841962),i=n(243474),o=n(59555),s=n(754430),l=n(500597),c=n(519616);let d={id:"4317920",team_id:null,org_id:"675025436003846244",location:"San Francisco, CA",profile_handle:"asana",public_at:"2020-05-06T20:49:58.442Z",follower_count:341,following_count:0,primary_user_id:null,name:"Asana",img_url:"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2","500_500":"https://s3-alpha.figma.com/profile/5c98d80b-d276-446c-8080-7e586b085612"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"asana.design",twitter:"twitter.com/asanadesignteam",instagram:"instagram.com/asanadesignteam",description:"We\u2019re the Design team behind Asana.\nWe design the future of teamwork. \u2728\n\nJoin us: asana.com/jobs/product",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/4317920/cover_image",is_community_beta:!0,badges:[o.s.FIGMA_PARTNER]},u={id:"1521",team_id:null,org_id:"703355754804194517",location:"Sydney, Australia",profile_handle:"atlassian",public_at:"2020-06-22T18:25:34.800Z",follower_count:4297,following_count:0,primary_user_id:null,name:"Atlassian",img_url:"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657","500_500":"https://s3-alpha.figma.com/profile/26a88a1d-27d7-460c-9301-dd0910d39614"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://atlassian.com",twitter:null,instagram:null,description:"The official home of Atlassian's design resources in Figma.",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1521/cover_image",is_community_beta:!0,badges:[o.s.FIGMA_PARTNER]},m={id:"1608",team_id:null,org_id:"797266083973274396",location:null,profile_handle:"github",public_at:"2020-02-12T18:27:36.218Z",follower_count:126,following_count:0,primary_user_id:null,name:"GitHub",img_url:"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556","500_500":"https://s3-alpha.figma.com/profile/84ae1734-e47e-4945-884c-f536e5d3f427"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://www.github.com",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"",is_community_beta:!1,badges:[o.s.FIGMA_PARTNER]},p={id:"1731",team_id:null,org_id:null,location:"Los Angeles, CA",profile_handle:"snap",public_at:"2020-03-02T14:56:23.081Z",follower_count:17,following_count:0,primary_user_id:null,name:"Snapchat",img_url:"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2","500_500":"https://s3-alpha.figma.com/profile/7bbd1ecd-0481-4423-9092-58ec01c00d68"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://www.snapchat.com/l/en-gb/",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1731/cover_image",is_community_beta:!1,badges:[]},h={id:"2480257",team_id:null,org_id:null,location:"San Francisco, CA",profile_handle:"figma",public_at:"2019-10-21T22:53:16.561Z",follower_count:16253,following_count:53,primary_user_id:"768244674400796816",name:"Figma",img_url:"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577","500_500":"https://s3-alpha.figma.com/profile/c4bc0357-6f54-412a-ac89-f311905bbec5"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.USER,website:"www.figma.com",twitter:"twitter.com/figma",instagram:"instagram.com/figma",description:"Figma is the design tool for teams who build products together. Claim your community profile here: https://bit.ly/3euhKR9",pronouns:null,has_shared_teams:!1,has_shared_orgs:null,redirect_cover_image_url:"/profile/2480257/cover_image",is_community_beta:!0,badges:[]},_="1098405969270214551",g="1094001923188252679",f="1101944648482192724",E="1151936790942917527",y={[d.id]:_,[m.id]:f,[u.id]:g,[p.id]:E},b="1220512233196109878",v="1220802563996996107",T={[m.id]:b,[u.id]:v};function I(){return"prod"===(0,a.tl)().cluster_name}function S(e){if(!I())return[];switch(e){case _:return[h,d];case v:case g:return[h,u];case b:case f:return[h,m];case E:return[h,p];default:return[]}}function w(e){if(!I())return e;let r=S(e.id);if(0===r.length)return e;let n=(e.community_publishers?.accepted??[]).filter(e=>!r.find(r=>r.id===e.id)),a=r.concat(n);return{...e,community_publishers:{...e.community_publishers,accepted:a}}}function A(e){if(!I())return e;let r=i.qY(e)?.id;if(!r)return e;let n=S(r);if(0===n.length)return e;let a=(e.community_publishers?.accepted??[]).filter(e=>!n.find(r=>r.id===e.id)),o=n.concat(a);return{...e,community_publishers:{...e.community_publishers,accepted:o}}}async function C(e){if(!I())return[];try{let r=y[e];if(r){let e=(await c.U.getVersions({widgetId:r})).data.meta.plugin;return[w(e)]}}catch(e){console.error(e)}return[]}async function N(e){if(!I())return[];try{let r=T[e];if(r){let e=(await l.V.getVersions({pluginId:r})).data.meta.plugin;return[w(e)]}}catch(e){console.error(e)}return[]}},678775:(e,r,n)=>{n.d(r,{AB:()=>eI,Ce:()=>ey,Ho:()=>eu,Q7:()=>eg,TL:()=>ew,Xg:()=>eb,v_:()=>eA});var a,i,o,s,l,c=n(411855),d=n(188507),u=n(846288),m=n(629019),p=n.n(m),h=n(163773),_=n(666308),g=n(747484),f=n(801828),E=n(544920),y=n(271646),b=n(916902),v=n(741688),T=n(693565),I=n(238795),S=n(76265),w=n(553362),A=n(421260),C=n(256334),N=n(419378),L=n(66683),O=n(243474),R=n(522725),P=n(507921),D=n(845331),k=n(47795),M=n(736041),F=n(140835),x=n(968525),U=n(522917),B=n(136716),V=n(15092),G=n(178380),H=n(263352),W=n(492366),K=n(7395),Y=n(688656),$=n(138157),j=n(712204),z=n(726507),q=n(162590),Z=n(831665),X=n(110064),J=n(190263),Q=n(806807),ee=n(556747),et=n(929717),er=n(11012),en=n(400184),ea=n(28221),ei=n(84272),eo=n(885700),es=n(109226),el=n(758064),ec=n(237494),ed=n(851750);function eu(e){let r;let[n,a]=c.useState(!1),i=!n&&e.isSet?ei.Bz:e.isWhiteboard?ei.kj:ei.h1,o=e.showNewBadge?c.createElement(eg,null):e.showFigPickBadge?c.createElement(e_,null):c.createElement(c.Fragment,null),s=p()(e.isSet?ei.mH:ei.ZX,{[ei.eB]:e.includeChromiumDownscalingFix&&g.Ay.chrome},e.imageClassName);return r=e.image?e.showOriginalThumbnail?c.createElement("img",{className:s,src:e.image,loading:"lazy",onLoad:()=>a(!0),alt:e.alt,draggable:!1}):c.createElement(A.Xy,{className:s,image:e.image,onLoad:()=>a(!0),hubFileId:e.hubFileId,alt:e.alt,thumbnailContext:e.thumbnailContext,resizedThumbnailUrls:e.resizedThumbnailUrls,draggable:e.draggable}):c.createElement(Q.Ek,null),c.createElement("div",{className:i,style:{backgroundColor:e.backgroundColor}},r,o,e.showPrototypeIcon&&c.createElement("div",{className:ei.cT},c.createElement(I.t,{svg:ed.A,className:ei.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ed.A})),e.showWhiteboardIcon&&c.createElement(ef,null))}function em(e){let r=(0,d.d4)(e=>e.orgById),n="search"===(0,d.d4)(({selectedView:e})=>e).view,a=e.plugin.org_id&&r?.[e.plugin.org_id],i=(0,H.uF)(e.plugin),{tagline:o,description:s,name:l}=i,u=(0,L.G8)({description:e.isPublishing?"":e.descriptionOverride??s??"",tagline:o??""},f.$J);return c.createElement("div",{className:ei.Ak},c.createElement("div",{className:ei.vG},c.createElement("img",{src:i.redirect_icon_url,loading:"lazy",alt:""})),c.createElement("div",{className:ei.wA},c.createElement($.V,{plugin:i,className:ei.Az,loading:"lazy",alt:""})),l&&c.createElement("div",{className:ei.K9},l),u&&c.createElement("div",{className:l?ei.Ry:ei.Tk},u),n&&a&&c.createElement("div",{className:ei.jG},c.createElement(ea.H,{entityId:a.id,entityName:a.name,imgUrl:a.img_url,hideTooltip:!0}),a.name),e.showNewBadge?c.createElement(eg,null):e.showInstalledIcon&&c.createElement("span",{className:ei.qP},(0,S.tx)("community.plugins.saved")),e.children)}c.memo(function(e){function r(){return e.name?c.createElement("div",{className:ei.ZR},e.name):c.createElement("div",{className:ei._},e.placeholderName)}function n(){return c.createElement("div",null,e.author?e.author:c.createElement("div",{className:ei.JM}))}return c.createElement(c.Fragment,null,c.createElement("div",{className:e.showFileNameAsPrimary?ei.cR:ei.i1,onClick:e.onClick},c.createElement("div",{className:ei.__},c.createElement("a",{className:ei.t5,href:e.href,onClick:e=>e.preventDefault(),style:{backgroundColor:e.backgroundColor,backgroundClip:g.Ay.safari?"padding-box":""}},c.createElement(eu,{image:e.backgroundImage,isWhiteboard:e.isWhiteboard,isSet:!!e.thumbnailIsSet,showFigPickBadge:e.showFigPickBadge,showNewBadge:e.showNewBadge,showPrototypeIcon:e.isPrototype,showWhiteboardIcon:e.isWhiteboard,showOriginalThumbnail:e.showOriginalThumbnail,hubFileId:e.hubFileId,alt:e.name}))),c.createElement("div",{className:ei.HC},c.createElement("div",{className:ei.dB},e.showFileNameAsPrimary?c.createElement(n,null):c.createElement(r,null)),c.createElement("div",{className:ei.bI},c.createElement("div",{className:ei.vz},ep(e.commentsSetting)&&c.createElement(eh,{count:e.commentCount}),e.duplicateButton),e.showFileNameAsPrimary?c.createElement(r,null):c.createElement(n,null)))))});let ep=e=>e!==B.Ni.ALL_DISABLED;function eh(e){return c.createElement("div",{className:ei.Z2},c.createElement(T.B,{className:ei.Ls,svg:el.A})," ",e.count)}function e_(){return c.createElement("div",{className:ei.jq,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.boosted_by_the_figma_team"),"data-tooltip-show-immediately":!0},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.fig_pick"),color:y.zE.BRAND,className:ei.q2}))}function eg(){return c.createElement("div",{className:ei.jq},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.new"),color:y.zE.SUCCESS,className:ei.q2}))}function ef(){return c.createElement("div",{className:ei.o_,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.made_in_fig_jam"),"data-tooltip-show-immediately":!0},c.createElement(I.t,{svg:eo.A,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:eo.A}))}function eE(e){let{CreatorsOverlay:r,creatorsOverlayProps:n}=a.useCreatorsHoverOverlay({resource:e.plugin}),i=e.isPaid?{id:"0",badges:[],monetized_resource_metadata:{id:"0",price:(0,N.ae)(e.price),is_subscription:!1}}:null;return c.createElement("div",{className:g.Ay.mobile?ei.IM:e.showAuthorByDefault?ei.Gf:ei.U$,onClick:e.onClick},i&&c.createElement(C.Mr,{resource:i||e.plugin}),c.createElement(r,{...n},c.createElement("div",{className:ei.w},c.createElement("div",{className:ei._F},c.createElement(ey,{plugin:e.plugin,showNewBadge:e.showNewBadge,showInstalledIcon:e.showInstalledIcon,isPublishing:e.isPublishing,descriptionOverride:e.descriptionOverride,isPublicOverride:e.isPublicOverride})),c.createElement(eb,{plugin:e.plugin,showInstallCount:e.showInstallCount,author:e.author,isPaid:e.isPaid,isPublicOverride:e.isPublicOverride,dropdown:e.dropdown}))))}function ey({plugin:e,showNewBadge:r,showInstalledIcon:n,isPublishing:a,descriptionOverride:i,isPublicOverride:o,...s}){let l=ev(e,o);return c.createElement(em,{showInstalledIcon:n??l,showNewBadge:r,isPublishing:a,plugin:e,descriptionOverride:i},c.createElement("div",{className:ei.bs},c.createElement(v.C,{...s})))}function eb({plugin:e,showInstallCount:r,author:n,isPaid:i,dropdown:o,isPublicOverride:s}){let{AuthorsJSX:l}=a.useCreatorsHoverOverlay({resource:e}),u=(0,d.d4)(e=>e.authedActiveCommunityProfile),m=(0,x.cs)(u),p=ev(e,s),h=s??!!e.roles.is_public,_=(0,V.iZ)(),f=(0,d.wA)(),y=e.publisher||e.creator,v=c.createElement("div",{className:ei.gx},c.createElement("div",{className:ei.MN},l)),I=c.useCallback(r=>{if(r?.stopPropagation(),r?.preventDefault(),p)_&&(f(D.s1({id:e.id,resourceType:W.vt.PLUGIN,source:D.uR.COMMUNITY_HUB})),f(w.F.enqueue({message:(0,S.t)("community.profiles.removed_from_saved_plugins"),type:"plugin-installed",button:{text:(0,S.t)("community.comments.undo"),action:()=>{f(D.oj({id:e.id,resourceType:W.vt.PLUGIN,orgId:void 0}))}}})));else{if(!_){if(g.rr){window.location.href="/login";return}f(E.Ts({origin:"plugin_install_signed_out"})),f(M.to({type:er.l,data:{headerText:(0,S.t)("community.profiles.save_this_plugin_to_give_you_and_figma_a_boost"),icon:es.A,dispatch:f}}));return}f(D.oj({id:e.id,resourceType:W.vt.PLUGIN,orgId:void 0}))}},[p,e,_,f]);return c.createElement("div",{className:ei.uB},r&&c.createElement("div",{className:ei.Rw},h&&(n||v),!h&&c.createElement("div",{className:ei.Wf},c.createElement(T.B,{className:ei.hz,svg:ec.A}),(0,S.tx)("community.cards.private")),c.createElement("div",{className:ei.y},h&&ep(e.comments_setting)&&c.createElement(eh,{count:e.comment_count}),i?c.createElement(ee.Ij,{metric:e.unique_run_count||0}):c.createElement("div",{className:g.Ay.mobile?ei.hA:ei.Pw},c.createElement(b.f,{className:g.Ay.mobile||m?ei.Ys:p?ei.XC:ei.sn,count:e.install_count,prefix:c.createElement("div",{className:ei.uu},p?"\u2713 ":"\u2193 "),onClick:g.Ay.mobile||m?void 0:I}),p&&c.createElement("div",{className:ei.a_,onClick:g.Ay.mobile||m?void 0:I},(0,S.tx)("community.profiles.remove_from_saved_plugins"))),o)),!r&&c.createElement(j.Ro,{entity:y,size:24}))}function ev(e,r){let n=(0,d.d4)(e=>e.authedActiveCommunityProfile),a=(0,x.Yo)();return(void 0===r||r)&&e.roles.is_public?n?(0,X.a)(n,e):e.profile_install_status===K.u8.PLUGIN_INSTALLED_FOR_USER:e.install_status===K.u8.PLUGIN_INSTALLED_FOR_USER||!!a&&e.install_status===K.u8.PLUGIN_INSTALLED_FOR_ORG}(e=>{function r(e){return c.createElement("div",{onMouseLeave:()=>{e.setDropdownRef(null),e.setDropdownContent(null)}},e.dropdownContent&&e.dropdownRef?.current&&c.createElement(et.Cf,{targetRect:e.dropdownRef.current.getBoundingClientRect(),maxWidth:150,minWidth:1,type:et.it.LIGHT,className:ei.s3,disableDropdownScrollContainer:!0,propagateCloseClick:!0},c.createElement("div",{className:ei.kP},e.dropdownContent)),e.children)}function n(e){let{setDropdownContent:r,setDropdownRef:n}=e,a=[c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null)],i=c.useRef(null),o=({profile:a,ref:i})=>c.createElement("span",{onMouseEnter:()=>{n(i),r(c.createElement(Z.Qi,{publisher:a,className:ei.Ah}))},ref:i,className:e.avatarContainerClassName,key:`author-link-${a.id}`},c.createElement(Z.Qi,{publisher:a,className:ei.CD,avatarClassName:ei.Vz,avatarSize:e.avatarSize,showAvatar:!0,hideName:!0})),s=({profile:r,stylesOverride:n})=>c.createElement(Z.Qi,{key:`author-link-${r.id}`,publisher:r,className:n||ei.CD,avatarClassName:ei.my,avatarSize:e.avatarSize,showAvatar:!0}),l=({profiles:e,ref:a})=>{let i=c.createElement(Z.Qi,{publisher:e[0],className:ei.CD});return c.createElement("div",{className:ei.NB},1===e.length&&(0,S.tx)("community.by_publisher",{publisher:i}),e.length>1&&(0,S.tx)("community.by_publisher_with_suffix",{publisherName:i,publishersSuffix:c.createElement(c.Fragment,null,c.createElement("span",{ref:a,className:ei.Jt,onMouseLeave:()=>{n(null)},onMouseEnter:()=>{n(a),r(c.createElement(c.Fragment,null,e.slice(1).map(e=>s({profile:e,stylesOverride:ei.Ah}))))}},(0,S.tx)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:e.length-1})))}))},{resource:d}=e;if(!d)return null;let u=d.community_publishers.accepted;return 1===u.length?e.showAuthorAndOthersTextLabel?c.createElement(c.Fragment,null,o({profile:u[0],ref:a[0]}),l({profiles:u,ref:i})):c.createElement(c.Fragment,null,s({profile:u[0]})):u.length<=4?c.createElement(c.Fragment,null,u.map((e,r)=>o({profile:e,ref:a[r]})),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:i})):c.createElement(c.Fragment,null,...u.slice(0,4).map((e,r)=>o({profile:e,ref:a[r]})),(({profiles:a,ref:i})=>c.createElement("span",{ref:i,onMouseEnter:()=>{n(i),r(c.createElement(c.Fragment,null,a.map(e=>s({profile:e,stylesOverride:ei.Ah}))))},onMouseLeave:()=>{n(null)}},c.createElement(z.f,{size:e.avatarSize,className:ei.zb,text:`${a.length}`})))({profiles:u.slice(4),ref:a[4]}),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:i}))}e.useCreatorsHoverOverlay=function({resource:e,avatarStyleOverrides:a={size:24,containerClassName:ei.H,showAuthorAndOthersTextLabel:!1}}){let[i,o]=c.useState(null),[s,l]=c.useState(null),d=c.useMemo(()=>({setDropdownRef:l,setDropdownContent:o,dropdownRef:s,dropdownContent:i,avatarStyleOverrides:a}),[l,o,s,i,a]);return{AuthorsJSX:c.useMemo(()=>c.createElement(n,{resource:e,showAuthorAndOthersTextLabel:a.showAuthorAndOthersTextLabel,avatarSize:a.size,avatarContainerClassName:a.containerClassName,setDropdownContent:o,setDropdownRef:l}),[e,o,l,a]),CreatorsOverlay:r,creatorsOverlayProps:d}},e.Authors=n})(a||(a={})),(e=>{class r extends c.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if((0,_.oJ)(e)){h.Ay.redirect((0,J.ho)(this.props.plugin?.id),"_blank");return}this.props.onClick()}}render(){return c.createElement(eE,{onClick:this.onClick,showInstallCount:!0,showAuthorByDefault:this.props.showAuthorByDefault,showNewBadge:!!(this.props.lastViewedAtForNewBadge&&Date.parse(this.props.plugin.created_at)>Date.parse(this.props.lastViewedAtForNewBadge)),dropdown:this.props.dropdown,plugin:this.props.plugin,isPublicOverride:this.props.isPublicOverride})}}e.ConnectedPluginTile=(0,d.Ng)(null,(e,r)=>({onClick:()=>{r.onClick?.(),e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.pluginId}))},onProfileCreate:n=>{e(M.to({type:en.G$,data:{variations:[en.FF.OPT_IN],userId:n.id,onFinish:()=>e(P.C({id:r.pluginId,resourceType:W.vt.PLUGIN}))}}))}}))(r),e.PluginTile=function(r){let n=(0,d.d4)(e=>e.publishedPlugins),a=r.plugin||(0,H.my)(r.pluginId,n);return c.createElement(e.ConnectedPluginTile,{...r,plugin:a})}})(i||(i={}));let eT=i.PluginTile,eI=(0,F.tf)(eT);class eS extends c.Component{render(){let{numResources:e,maxResources:r,className:n}=this.props;return c.createElement(c.Fragment,null,e<r?Array(r-e).fill(null).map((e,r)=>c.createElement("div",{key:r,className:n})):null)}}eS.defaultProps={maxResources:4},(e=>{class r extends c.Component{constructor(){super(...arguments),this.onHubFileClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onHubFileClick()})}render(){let e=(0,G.a6)(this.props.hubFile);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.Ai,style:{backgroundColor:(0,U.Cn)(this.props.hubFile.client_meta),backgroundImage:`url(${this.props.hubFile.thumbnail_url})`},onClick:this.onHubFileClick,href:(0,J.X$)(this.props.hubFile.id)},c.createElement("div",{className:ei.tr},c.createElement("div",{className:ei.Ll},e.name)))))}}r.displayName="PublicProfileHubFileTile",e.PublicProfileHubFileTile=(0,d.Ng)(null,(e,r)=>({onHubFileClick:()=>{e(k.$T({view:"communityHub",subView:"hubFile",hubFileId:r.hubFile.id}))}}))(r)})(o||(o={})),(e=>{class r extends c.Component{constructor(){super(...arguments),this.onPluginClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onResourceClick()})}render(){let e=(0,H.uF)(this.props.resource),r=(0,W.xQ)(this.props.resource);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.IC,onClick:this.onPluginClick,href:r?(0,J.YW)(this.props.resource.id):(0,J.ho)(this.props.resource.id)},c.createElement($.V,{className:ei.pt,plugin:e,loading:"lazy",alt:""}),c.createElement("div",{className:ei.FK},e.name))))}}r.displayName="PublicProfilePluginTile",e.PublicProfileBasePluginTile=(0,d.Ng)(null,(e,r)=>({onResourceClick:()=>{(0,W.xQ)(r.resource)?e(k.$T({view:"communityHub",subView:"widget",widgetId:r.resource.id})):e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.resource.id}))}}))(r)})(s||(s={})),(e=>{class r extends c.Component{constructor(e){super(e),this.onPublicProfileClick=e=>{if((0,_.oJ)(e)){let e=this.props.publicProfile;if(!e)return;h.Ay.redirect((0,R.bL)(e.profile_handle)||"","_blank");return}this.props.onPublicProfileClick()},this.updateFollowInfoOnFollowClick=()=>{let e=this.state.currentUserIsFollowing?{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff-1,currentUserIsFollowing:!1}:{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff+1,currentUserIsFollowing:!0};this.setState(e)},this.state={currentUserFollowActionCountDiff:0,currentUserIsFollowing:e.publicProfile.current_user_is_following}}render(){let e=this.props.publicProfile;if(!e)return null;let r={id:e.id,name:e.name,img_url:e.img_url};return c.createElement("div",{className:`${ei.uy} ${this.props.notTabletSidebarOptimized?ei.HG:""}`},c.createElement("div",{className:ei.DU},c.createElement("div",{onClick:this.onPublicProfileClick},c.createElement(j.Ro,{entity:r,size:96,className:ei.W8})),c.createElement("div",{className:ei.kl},c.createElement("div",{className:ei.r9,onClick:this.onPublicProfileClick},e.name),e.profile_handle&&c.createElement("div",{className:ei.TD},c.createElement("div",{className:ei.O3,onClick:this.onPublicProfileClick},"@",e.profile_handle),e.current_user_is_followed&&c.createElement(eA,null)),e.location&&c.createElement("div",{className:ei._7},e.location),c.createElement("div",{className:ei.k1},!this.props.isOwnProfile&&c.createElement(q.W,{profile:e,followClassName:ei.u8,followingClassName:ei.u8,unfollowClassName:ei.u8,onClick:this.updateFollowInfoOnFollowClick,onError:this.updateFollowInfoOnFollowClick}),c.createElement("div",null,c.createElement("div",{className:ei.u0},(0,S.tx)("community.follow.followers")),c.createElement("div",{className:ei.oQ},e.follower_count+this.state.currentUserFollowActionCountDiff))))),this.props.resources.length>0&&c.createElement("div",{className:ei.iR},this.props.resources.map(e=>{let r=(0,O.Vm)(e);switch(r){case W.vt.HUB_FILE:return c.createElement(o.PublicProfileHubFileTile,{hubFile:e,key:e.id});case W.vt.PLUGIN:case W.vt.WIDGET:return c.createElement(s.PublicProfileBasePluginTile,{resource:e,key:e.id});default:(0,u.xb)(r)}}),c.createElement(eS,{numResources:this.props.resources.length,maxResources:6,className:ei.Yt})),0===this.props.resources.length&&c.createElement("div",{className:ei.t9},(0,S.tx)("community.profiles.no_resources_published_yet")))}}r.displayName="PublicProfileTile";let n=(e,r)=>({isOwnProfile:e.authedActiveCommunityProfile?.id===r.publicProfile.id}),a=(e,r)=>({onPublicProfileClick:()=>{r.onClick&&r.onClick(),e(k.$T({view:"communityHub",subView:"handle",handle:r.publicProfile.profile_handle}))}});e.ConnectedPublicProfileTile=(0,d.Ng)(n,a)(r),e.ConnectedPublicProfileTileTracked=(0,d.Ng)(n,a)((0,F.tf)(r))})(l||(l={}));let ew=l.ConnectedPublicProfileTile;function eA({color:e=y.zE.DEFAULT}){return c.createElement(y.Ex,{text:(0,S.t)("community.profiles.follows_you"),color:e,className:ei.x7})}l.ConnectedPublicProfileTileTracked},41922:(e,r,n)=>{n.d(r,{xZ:()=>L,z2:()=>O});var a=n(411855),i=n(188507),o=n(805014),s=n(629019),l=n.n(s),c=n(991458),d=n(281935),u=n(841962),m=n(747484),p=n(299009),h=n(693565),_=n(761263),g=n(926996),f=n(200222),E=n(314540),y=n(507121),b=n(914077),v=n(505534),T=n(738402),I=n(488527),S=n(728991),w=n(251473);let A=!1,C=()=>{if(A)return;A=!0;let e="",r=e=>Math.atan(e);for(let n=0;n<200;n++){let a=n/200,i=r(50*a)/r(50);e+=(100*a).toFixed(3)+"%{transform:scaleX("+i.toFixed(3)+");}"}let n="@-moz-keyframes progress-bar-animation {"+e+"}@-webkit-keyframes progress-bar-animation {"+e+"}",a=document.createElement("style");a.nonce=(0,u.Ay)().csp_nonce,a.textContent=n,document.head.appendChild(a)};function N(){return(0,u.kc)().pride_inclusive_loading_bar?S.DT:""}function L(){let e=(0,g._6)();if("fullscreen"!==e.view)return null;let r=(0,y.ju)(e);return a.createElement(D,{editorType:(0,b.oD)(e.editorType),cover:!0,progressPaused:!0,editorTheme:r})}function O(e){switch(e.progressBarMode){case o.Oin.KEEP_UI:return a.createElement(R,{progressBarType:e.progressBarType,left:e.left});case o.Oin.HIDE_UI:case o.Oin.ON_AND_LOCKED:return a.createElement(D,{editorType:e.editorType,isViewer:e.isViewer,shouldNotOverflow:e.shouldNotOverflow});case o.Oin.OFF:return a.createElement(a.Fragment,null)}}function R(e){let r=(0,i.d4)(e=>(0,T.$A)(e.selectedView)?0:(0,c.jz)(I.uj0));return a.createElement("div",{className:S.A7},a.createElement("div",{className:S.BT}),a.createElement("div",{className:S.cE,style:{right:r}}),a.createElement(P,{progressBarType:e.progressBarType,left:e.left}))}function P(e){switch(e.progressBarType){case v.lF.SPINNER:return a.createElement("div",{className:S.AV},a.createElement(p.nt,null));case v.lF.BAR:default:return a.createElement(B,{className:S.Wn,style:{left:`${e.left||0}`}})}}function D(e){let r="whiteboard"===e.editorType?E._Y.WHITEBOARD:e.isViewer?"viewer":E._Y.DESIGN;return a.createElement("div",{"data-editor-theme":e.editorTheme,className:l()(S.A7,e.shouldNotOverflow?S.ZT:null)},a.createElement("div",{className:l()({[S.Kb]:e.cover,[S.dV]:"whiteboard"===r,[S.Dn]:"design"===r&&!m.rr,[S.k1]:"design"===r&&m.rr,[S.Mf]:"viewer"===r&&!m.rr,[S.mb]:"viewer"===r&&m.rr})}),"whiteboard"!==r&&a.createElement(M,{type:r,progressPaused:e.progressPaused}),"whiteboard"===r&&a.createElement(k,{progressPaused:e.progressPaused}))}function k(e){return a.createElement("div",{className:l()(S.Dg,{[S.cu]:e.progressPaused})},a.createElement("div",{className:S.oQ},a.createElement("div",{className:S.pm},a.createElement("div",{className:S.BL})),a.createElement("div",{className:S.pn},a.createElement("div",{className:S.Ts}),a.createElement("div",{className:S.n1})),a.createElement("div",{className:S.xo},a.createElement("div",{className:S.Ag}),a.createElement("div",null))),a.createElement(U,{type:"whiteboard",progressPaused:e.progressPaused}))}function M(e){let[r,n]=a.useState(!1),i=(0,f.aq)();return((d.eD?d.eD.getZoomFactor():m.Ay.chrome||m.Ay.safari?Promise.resolve(window.outerWidth/window.innerWidth):Promise.resolve(void 0)).then(e=>{e&&(e<.95||e>1.05)&&i()&&!r&&n(!0)}),r||(0,m.KR)()||_.z4.getIsExtension())?a.createElement(F,{type:e.type,progressPaused:e.progressPaused}):a.createElement(x,{type:e.type,progressPaused:e.progressPaused})}function F(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,i="viewer"===e.type&&!m.rr;return a.createElement("div",{className:l()(S.Dg,{[S.iI]:e.progressPaused})},a.createElement("div",{className:l()({[S.OU]:!0,[S.Uo]:n,[S.v0]:i,[S.uq]:r})},a.createElement(h.B,{className:S.wn,svg:w.A})),a.createElement(U,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function x(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,i="viewer"===e.type&&!m.rr;return a.createElement("div",{className:l()(S.Dg,{[S.cu]:e.progressPaused})},a.createElement("div",{className:l()({[S.OU]:!0,[S.Uo]:n,[S.v0]:i})},a.createElement("div",{className:S.pm},a.createElement("div",{className:`${S.hj} ${S.nR}`}),a.createElement("div",{className:`${S.Rp} ${S.nR}`}),a.createElement("div",{className:`${S.CU} ${S.nR}`}),a.createElement("div",{className:S.U0},a.createElement("div",{className:`${S.A6} ${S.nR}`}))),a.createElement("div",{className:S.pn},a.createElement("div",{className:`${S.Ts} ${S.nR}`}),a.createElement("div",{className:`${S.n1} ${S.nR}`})),a.createElement("div",{className:S.xo},a.createElement("div",{className:`${S.Ag} ${S.nR}`}),a.createElement("div",null))),a.createElement(U,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function U(e){let{type:r,progressPaused:n}=e,i=N();return a.createElement("div",{className:l()({[S.QT]:"design"===r,[S.WH]:"mobile_viewer"===r,[S.y6]:"desktop_viewer"===r,[S.Pd]:"whiteboard"===r})},a.createElement("div",{className:l()({[S.fb]:"design"===r,[S.$8]:"mobile_viewer"===r,[S.Zu]:"desktop_viewer"===r,[S._M]:"whiteboard"===r,[S.BM]:!0!==n,[i]:!0})},a.createElement("div",{className:S.On})))}function B({className:e,style:r,seconds:n=120}){let i=N();return C(),a.createElement("div",{className:`${S.pT} ${e||""} ${i}`,style:{MozAnimation:`progress-bar-animation ${n}s linear`,WebkitAnimation:`progress-bar-animation ${n}s linear`,...r}})}B.displayName="ProgressBarRelative"},937737:(e,r,n)=>{n.d(r,{HC:()=>v,dU:()=>k});var a=n(411855),i=n(188507),o=n(236891),s=n(344793),l=n(805014),c=n(629019),d=n.n(c),u=n(708967),m=n(841962),p=n(76265),h=n(110124),_=n(456649),g=n(275602),f=n(258282);let E="accessibilitytree--node--xYG8O",y="accessibilitytree--disabled--m1ByR accessibilitytree--node--xYG8O",b="accessibilitytree--scrollContainer--TNuEw accessibilitytree--node--xYG8O";function v({viewer:e,autofocus:r,setAutofocus:n}){let o;let s=(0,h.e)(),l=(0,i.d4)(e=>!!e.modalShown),c=a.useRef(s);if(l||(c.current=s),c.current&&e?.hasActiveScene()){let i=(0,m.u4)("ee_accessibility_inc_prototype",T,I);o=a.createElement(i,{viewer:e,autofocus:r,setAutofocus:n})}else o=a.createElement("p",{className:f.Q},(0,p.t)("viewer.accessibilitytree.disabled_placeholder"));return a.createElement("main",{className:d()("accessibilitytree--container--CjsLk","viewer-forward-keyevents")},o)}function T({autofocus:e,setAutofocus:r,viewer:n}){let i=function(e){let r=l.bpS.getActiveScene(),n=a.useMemo(()=>new R(e,r),[e,r]),i=(0,_._)(n);return a.useEffect(()=>(l.yGz.setMapping(r,l.Zbk.VIEWER),()=>l.yGz.setMapping(r,l.Zbk.NONE)),[r]),a.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&i.updateDirtyNodes([r])};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),()=>{e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[n,i,e]),a.useEffect(()=>{let n=setInterval(()=>{let n=l.yGz.flushChangedNodes(r).map(r=>e.getPrototypeNode(r)).filter(o.Vq);i.updateDirtyNodes(n)},100);return()=>void clearInterval(n)}),i}(n);return a.createElement(S,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:i})}function I({autofocus:e,setAutofocus:r,viewer:n}){let i=function(e){let r=a.useMemo(()=>new P(e),[e]),n=(0,_._)(r);return a.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&n.updateSubtree(r)},a=r=>{let a=e.getPrototypeNode(r);a&&n.updateSubtree(a)};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),e.on("accessibilityNodeInvalidated",a),()=>{e.off("accessibilityNodeInvalidated",a),e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[r,n,e]),n}(n);return a.createElement(S,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:i})}let S=a.memo(function({accessibilityScope:e,autofocus:r,setAutofocus:n,viewer:i}){let[o,s]=a.useState(void 0),l=function(e,r){let n=a.useRef(null),i=n.current,o=i?.contains(i?.ownerDocument?.activeElement);return a.useLayoutEffect(()=>{if(!e&&!o)return;let a=n.current;a&&(e||!a.contains(a.ownerDocument.activeElement))&&(a.focus(),e&&r?.(!1))}),n}(r,n);return(a.useEffect(()=>{let e=()=>{let e=i.getTopmostFrameNode();e&&s(i.nodeId(e))};return i.on("topLevelFrameChange",e),()=>{i.off("topLevelFrameChange",e)}},[i]),a.useEffect(()=>{let e=i.getTopmostFrameNode();s(e?i.nodeId(e):void 0)},[i]),o)?a.createElement(w,{key:o,nodeId:o,parentId:void 0,enabled:!0,focusRef:l,accessibilityScope:e,viewer:i}):null});function w({parentId:e,nodeId:r,enabled:n=!0,focusRef:i,accessibilityScope:o,viewer:s}){let l;let c=(0,_.W)(r,o),d=s.getPrototypeNode(r);if(!c||!d)return null;let{isClickable:m,tag:p="div",role:h,label:g}=c,f=O.get(p)||{};switch(s.nodeType(d)){case"TABLE":l=function(e,r){let n=e.nodeTableCells(r).map(r=>({text:e.nodeTableCellContent(r),pos:e.nodeDisplayBounds(r)})).sort((e,r)=>e.pos.x<r.pos.x?-1:1),i={};for(let e of n)i[e.pos.y]?i[e.pos.y].push(e):i[e.pos.y]=[e];let o=Object.keys(i).sort();return[a.createElement("div",{role:"rowgroup",key:"table-header"},i[o[0]].map((e,r)=>a.createElement("span",{key:`header-${r}`,role:"columnheader",style:{left:e.pos.x,top:e.pos.y,width:e.pos.width,height:e.pos.height}}))),a.createElement("div",{role:"rowgroup",key:"table-body"},o.map((e,r)=>a.createElement("div",{key:e,role:"row","aria-rowindex":r},i[e].map((r,n)=>a.createElement("span",{key:`${e}-${n}`,role:"cell",className:E,style:{display:"inline-block",left:r.pos.x,top:r.pos.y,width:r.pos.width,height:r.pos.height}},r.text)))))]}(s,d);break;case"TEXT":l=k(s.nodeText(d)||"",s.nodeLineData(d)||[],s.nodeCharacterStyles(d),s.navigateToFrameAndCloseOverlays);break;default:l=c.childIds.map(e=>a.createElement(w,{key:e,nodeId:e,accessibilityScope:o,focusRef:void 0,viewer:s,parentId:r}))}let v=s.nodeScrollBounds(d),T=e&&s.getPrototypeNode(e),I=!n&&"none"||T||"canvas",S=C(s,d,v?"scrollContainer":I),N=m?{onClick:e=>{(0,u.f)(u.h.PROTOTYPE_BUTTON_CLICKED,{isMouseEvent:e?.screenX!==0&&e?.screenY!==0}),s.nodeTriggerInteraction(d,"ON_CLICK")},onFocus:()=>void s.nodeHover(d),onBlur:()=>void s.nodeReverseHover(d)}:{},L=a.createElement(p,{className:!n&&y||!!v&&b||E,style:S,tabIndex:i?0:void 0,ref:i,role:h,key:r,"aria-label":g,...f,...N},l);return v&&(L=a.createElement(A,{displayRect:C(s,d,I),enabled:n,scrollRect:v,onScrolled:(e,r)=>s.nodeScrollTo(d,e,r),scrollAreaContent:L})),L}function A({displayRect:e,enabled:r,onScrolled:n,scrollRect:i,scrollAreaContent:o}){let s=a.useRef(null),l=a.useRef(!1),c=a.useCallback(e=>{let r=e.target;("number"==typeof r?.scrollLeft||"number"==typeof r?.scrollTop)&&(l.current?l.current=!1:n?.(r.scrollLeft*i.width/r.scrollWidth,r.scrollTop*i.height/r.scrollHeight))},[n,i.height,i.width]);return a.useEffect(()=>{let e=s.current;if(e)return e.addEventListener("scrollend",c),()=>e.removeEventListener("scrollend",c)},[c]),a.useEffect(()=>{let e=s.current;e&&(l.current=!0,i.width&&(e.scrollLeft=i.x*e.scrollWidth/i.width),i.height&&(e.scrollTop=i.y*e.scrollHeight/i.height))},[i.x,i.y,i.width,i.height]),a.createElement("div",{className:r?b:y,style:e,ref:s},o)}function C(e,r,n){switch(n){case"none":return{};case"canvas":{let{x:n,y:a,width:i,height:o}=e.nodeDisplayBounds(r);return{left:n,top:a,width:i,height:o}}case"scrollContainer":{let n=e.nodeCanvasSpaceBounds(r),a=e.nodeScrollBounds(r);if(!a)return{};{let e="100%",r="100%";return 0!==a.height&&(e=`${100*a.height/n.height}%`),0!==a.width&&(r=`${100*a.width/n.width}%`),{height:e,width:r}}}default:{let a=e.nodeCanvasSpaceBounds(n),i=e.nodeScrollBounds(n),o=e.nodeCanvasSpaceBounds(r),s=i?i.width:a.width,l=i?i.height:a.height,c=a.x,d=a.y,u=(o.x-c)/s,m=(o.y-d)/l,p=o.width/s,h=o.height/l;return{top:`${100*m}%`,left:`${100*u}%`,height:`${100*h}%`,width:`${100*p}%`}}}}let N=new Set(["article","aside","button","div","footer","form","header","h1","h2","h3","h4","h5","h6","input","nav","p","section","span"]),L=new Map([["img","div"],["a","button"]]),O=new Map([["form",{onSubmit:e=>e.preventDefault()}],["button",{type:"button"}],["input",{readonly:"readonly"}]]);class R{constructor(e,r){this.viewer=e,this.sceneHandle=r}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&r)return r}interpret(e){let r=l.yGz.getNodeInfo(this.sceneHandle,this.viewer.nodeId(e)),n=r.tag.toLowerCase();return L.has(n)?n=L.get(n):N.has(n)||(n="div"),{tag:n,role:r.role.toLowerCase(),inclusion:g.vF.INCLUDE,label:r.label||void 0,isClickable:"BUTTON"===r.role||"LINK"===r.role}}children(e){return l.yGz.getNodeInfo(this.sceneHandle,this.viewer.nodeId(e)).readableChildren.map(e=>this.viewer.getPrototypeNode(e)).filter(o.Vq)}}class P{constructor(e){this.viewer=e,this.comparePayloads=void 0}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&r)return r}interpret(e){return function(e,r){let n;let a=e.nodeInteractions(r),i=!!a.find(e=>"ON_CLICK"===e.trigger),o=!!a.find(e=>("URL"===e.to||"INTERNAL_NODE"===e.to)&&"NAVIGATE"===e.type&&"ON_CLICK"===e.trigger),s=!!e.nodeScrollBounds(r),l=e.getTopmostFrameNode()===r,c=!e.nodeVisible(r),{tag:d,role:u,label:m}=function({tag:e,role:r,label:n}){let a,i,o;return e&&"AUTO"!==e&&(a=e.toLowerCase()),r&&"AUTO"!==r&&(i=r.toLowerCase()),n&&""!==n&&(o=n),{tag:a,role:i,label:o}}(e.nodeAccessibilityProperties(r)),p=d||u||m?g.vF.INCLUDE:void 0;if(c)void 0===p&&(p=g.vF.OMIT),p=void 0===p?g.vF.OMIT:p,d="div";else if(i){if(void 0===p&&(p=g.vF.INCLUDE),d||="button",o&&(u||="link"),!e.nodeText(r)){let a=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,label:a,childIds:r}}}else{let a=e.nodeType(r);switch((l||i||s)&&void 0===p&&(p=g.vF.INCLUDE),a){case"FRAME":if(l)d||="article",m||=e.nodeName(r),void 0===p&&(p=g.vF.INCLUDE);else{if(d||="div",!u&&D(e,r)){let a=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,inclusion:g.vF.INCLUDE,role:"img",label:e.label||a,childIds:r}}void 0===p&&(p=g.vF.CHILDREN)}break;case"BOOLEAN_OPERATION":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"VECTOR":D(e,r)?(d||="div",u||="img",m||=e.nodeName(r),void 0===p&&(p=g.vF.INCLUDE)):(d||="div",void 0===p&&(p=g.vF.OMIT));break;case"SYMBOL":case"INSTANCE":d||="article",void 0===p&&(p=g.vF.INCLUDE),m||=e.nodeName(r);break;case"TEXT":d||="p",void 0===p&&(p=g.vF.INCLUDE);break;case"TABLE":d||="div",u||="table",void 0===p&&(p=g.vF.INCLUDE);break;case"TABLE_CELL":d||="td",void 0===p&&(p=g.vF.OMIT);break;default:d||="div",void 0===p&&(p=g.vF.INCLUDE),n=(e,r)=>(p=r.length?g.vF.INCLUDE:g.vF.OMIT,{...e,inclusion:p,childIds:r})}}let h={inclusion:p,tag:d,role:u,label:m,isClickable:i};return n?.bind(null,h)??h}(this.viewer,e)}children(e){return this.viewer.mapChildren(e,e=>e)}}function D(e,r){let n=e.nodeFillTypes(r);return 1===n.length&&"IMAGE"===n[0]}function k(e,r,n,i){let o=e.split(/\n/mu),l=[];function c(e){for(;l.length>e+1;){let e,r;let[n,i]=l.pop();switch(n){case"UNORDERED_LIST":e="ul",r="li";break;case"ORDERED_LIST":e="ol",r="li";break;default:e="p",r="span"}l[l.length-1][1].push(a.createElement(e,{key:l[l.length-1][1].length},i.map((e,n)=>a.createElement(r,{key:n},e))))}}let d=0;for(let e=0;e<o.length;e++){let u=o[e],m=r[e]||{type:"PLAIN",indentLevel:0};for("PLAIN"===m.lineType&&(m.indentLevel=0),c(m.indentLevel),l.length>1&&l[l.length-1][0]!==m.lineType&&c(m.indentLevel-1);l.length<m.indentLevel+1;)l.push([m.lineType,[]]);l[l.length-1][1].push(function(e,r){let o=[];for(let l of n){let{start:n,end:c,props:d}=l,u=[...r].length;if(n>e+u)break;if(c<=e)continue;n=Math.max(0,n-e),c=Math.min(u,c-e);let m=RegExp(`(?:[^]{${n}})([^]{${c-n}})`,"u"),p=r.match(m)?.[1],h=d?.get?.("HYPERLINK"),_=d?.get?.("FONT_STYLE"),g=_?.toLowerCase()?.includes("italic"),f=_?.toLowerCase()?.includes("bold"),E=d?.get?.("FONT_SIZE"),y=d?.get?.("TEXT_DECORATION"),b={fontWeight:f?"bold":void 0,fontStyle:g?"italic":void 0,fontSize:E?`${E}px`:void 0,textDecoration:new Map([["UNDERLINE","underline"],["STRIKETHROUGH","line-through"]]).get(y)};if("string"==typeof h?.url)o.push(a.createElement(s._,{key:n+e,style:b,href:h.url,newTab:!0,trusted:!0},p));else if(i&&"object"==typeof h?.guid){let r=h.guid;o.push(a.createElement("button",{key:n+e,type:"button",role:"link",onClick:()=>i(`${r.sessionID}:${r.localID}`)},p))}else f||g||E||y?o.push(a.createElement("span",{key:n+e,style:b},p)):o.push(p)}return o}(d,u)),d+=u.length+1}return c(0),l[0][1].map((e,r)=>"string"!=typeof e?e:a.createElement("p",{key:r},e))}},172998:(e,r,n)=>{n.d(r,{Bt:()=>i,IO:()=>o,nO:()=>a});let a="prototyping-auth-comments-modal",i="prototype-comments-view",o="prototype-sidebar-panel"},355424:(e,r,n)=>{n.d(r,{F:()=>f});var a=n(411855),i=n(188507),o=n(76265),s=n(206908),l=n(736041),c=n(535461),d=n(698003),u=n(136389),m=n(926996),p=n(826016),h=n(509732),_=n(689954),g=n(221009);function f(e){let{nodeId:r,clientX:n,clientY:f,prototypeUrl:E,fileKey:y,startingPointsData:b}=e,v=(0,m.mr)(),T=(0,i.wA)(),I=(0,u.p)(),{showHotspots:S,showProtoSidebar:w,scalingInfo:A}=v,C=(0,p.b)(I,p.d.PROTOTYPE_FLOW_CONTEXT_MENU),N=(e,r)=>{let n=(0,h.vp)({scalingInfo:A,nodeId:e,startingPointNodeId:e,showHotspots:S,showProtoSidebar:w},null,null,C);T(s.S({fileKey:y,source:p.d.PROTOTYPE_FLOW_CONTEXT_MENU,url:`${r}${n}`,visualBellMessageOverride:(0,d.dE)({startingPointNodeId:e,startingPointsData:b}),visualBellButton:{text:(0,o.t)("permissions.copy_link_button.visual_bell.see_link_settings"),action:()=>{T((0,l.to)({type:g.g_,data:{fileKey:y,source:d.nk.prototypeCopyLinkButtonVisualBell}}))}}}))},L=[{displayText:(0,o.t)("viewer.flows_sidebar.copy_link_to_flow"),callback:()=>N(r,E)}];return a.createElement("div",{className:`${c.Dm}`},a.createElement(_.j,{dispatch:T,items:L,parentRect:{width:10,height:10,left:n+100,top:f,right:n+110,bottom:f-10},onSelectItem:e=>{e.callback&&e.callback("",null,T)},showPoint:!1}))}},795752:(e,r,n)=>{n.d(r,{e:()=>d});var a=n(191332),i=n(666308),o=n(747484),s=n(36748),l=n(613825);let c=class e{constructor(r,n){this._isUIShown=r,this._inCommentsMode=!1,this._rcsUserFlags=[],this._hideUITask=new a.W,this.handleProgressBarStoppedShowing=()=>{this.showUiAndScheduleFade()},this.onWindowFocus=()=>{this.showUiAndScheduleFade()},this.didEnterCommentsMode=()=>{this._hideUITask.reset(),this._setUIShown(!0),this._inCommentsMode=!0},this.didLeaveCommentsMode=()=>{this._inCommentsMode&&(this._inCommentsMode=!1,this.showUiAndScheduleFade())},this.didRscUserFlagsUpdate=e=>{this._rcsUserFlags=e},this.handleUnhideUI=()=>{this.showUiAndScheduleFade()},this.handlePageMouseDownOrTouchStart=e=>{"CURRENT_TLF"===e.type||"DEVICE_FRAME"===e.type?this._setUIShown(!1):"PROTOTYPE_BACKGROUND"===e.type&&(this._hideUITask.reset(),this._isUIShown()?this._setUIShown(!1):this.showUiAndScheduleFade())},this.handleHotspotClicked=()=>{this._setUIShown(!1)},this.handlePageMouseMove=(e,r)=>{let n=e.clientY,a=window.innerHeight-e.clientY,i=85>Math.abs(window.innerWidth/2+r/2-e.clientX)&&a<60;n<(0,s.bG)()?this.showUiAndScheduleFade():i?this.showUiAndScheduleFade():this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterMove=e=>{this._hideUITask.reset(),this._isUIShown()||this._setUIShown(!0),e.stopPropagation()},this.handleHeaderOrFooterBlur=e=>{this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterFocus=e=>{this._hideUITask.reset(),this._setUIShown(!0)},this.handleKeyDown=(e,r)=>{(r&&this._isUIShown()||e.keyCode===i.Uz.ESCAPE)&&this.showUiAndScheduleFade()},this.teardown=()=>{this._hideUITask.reset()},this.showUiAndScheduleFade=()=>{this._isUIShown()||this._setUIShown(!0),this._hideUITask.reset(),this.scheduleFadeIfNecessary()},this.scheduleFadeIfNecessary=()=>{this._hideUITask.isScheduled()||this._hideUITask.scheduleOnce(()=>{this._setUIShown(!1)},e.FADE_DELAY_MS)},this._setUIShown=r=>{let a=!r&&this._inCommentsMode,i=!r&&this._rcsUserFlags.reduce((r,n)=>r||e.RCS_SHOWN_ON_UI.has(n),!1);a||i||n(r)}}};c.FADE_DELAY_MS=o.rr?1e3:2e3,c.RCS_SHOWN_ON_UI=new Set([l.e]);let d=c},424120:(e,r,n)=>{n.d(r,{Y9:()=>eo});var a=n(411855),i=n(188507),o=n(344793),s=n(351966),l=n(326612),c=n(672904),d=n(17779),u=n(263159);let m=(0,a.memo)(function(e){return(0,u.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,u.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 6h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-9zM9 6H5a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h4zM3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",clipRule:"evenodd"})})});var p=n(65879),h=n(561080),_=n(629019),g=n.n(_),f=n(708967),E=n(952979),y=n(230208),b=n(742360),v=n(163773),T=n(931223),I=n(841962),S=n(875877),w=n(746643),A=n(750570),C=n(563192),N=n(399991),L=n(918091),O=n(693565);n(505427);let R={"data-fpl-audit-approved":""};var P=n(76265),D=n(553362),k=n(8766),M=n(47795),F=n(225371),x=n(64210),U=n(849013),B=n(588799),V=n(110124),G=n(901152);n(783657);var H=n(125682),W=n(926996),K=n(15092),Y=n(952122),$=n(688656),j=n(644580),z=n(893632),q=n(573225),Z=n(172998),X=n(610110),J=n(676455),Q=n(952009),ee=n(842010),et=n(623467),er=n(748292);let en="PROTOTYPE_SETTINGS_DROPDOWN",ea="proto_header_options_dropdown",ei=(0,G.ck)();function eo(e){let{prototype:r,file:n,shouldShowUI:l,recordingKey:d,optionsMenu:u}=e,m=(0,i.wA)(),p=(0,K.iZ)(),h=(0,H.Um)(),_=(0,W.mr)(),f=(0,B.Fy)(),T=a.useRef(null),w=a.useRef(null),L=e=>{e.preventDefault(),m((0,Y._P)({name:"Prototype Logo Clicked"})),m((0,F.eH)())},O=(e,r)=>T.current&&T.current.getBoundingClientRect().width<970?e:r,D=!!p&&n.canView,k=E.GZ()&&!(0,N.nl)(),U=k&&null==(0,A.qg)(v.Ay.location.search).fullscreen,V=window.matchMedia("(max-width:830px)").matches&&!(0,N.PN)(),G=ee.wx;if(U&&!ei){let r=(0,y.sN)(y.Uv,(0,y.HL)(e.prototypeBGColor));G=(0,y.HD)(r)?ee.RA:ee.cZ}let $=!!h&&h.type===en,J=(0,S.useAtomValue)(X.jH),et=(0,S.useAtomValue)(X.M);return l&&r.showProgressBar?a.createElement(el,{onClickLogo:L}):a.createElement(a.Fragment,null,a.createElement("div",{className:g()(G,{[ee.Wc]:e.shouldHideHeader&&"loading"!==et&&!J,[ee.G2]:e.sidebarData.isSidebarOpen||e.isCommentsSidebarOpen}),ref:T,...R,role:"region","aria-label":(0,P.t)("viewer.menu_bar.accessible_label"),onBlurCapture:e.onBlurCapture,onFocusCapture:e.onFocusCapture,onMouseMove:e.onMouseMove,onMouseDown:e=>{e.stopPropagation()}},a.createElement("div",{className:ee.Cd},!k&&a.createElement(ed,{recordingKey:C.Pt(d,"accessibility-button"),setAccessibilityTreeFocus:e.setAccessibilityTreeFocus}),a.createElement(es,{onClickLogo:L}),!k&&e.startingPointsData&&e.startingPointsData?.length>0&&a.createElement("div",{ref:w},a.createElement(em,{setShowSidebar:e.sidebarData.setShowSidebar,isSidebarOpen:!!_.showProtoSidebar,sidebarId:e.sidebarData.sidebarId})),(!k||ei)&&a.createElement(eu,{recordingKey:C.Pt(d,"comments-button"),selected:e.prototype.showComments,onClick:p?()=>{r.showComments?m(x.BZ()):m(x._b())}:e.showAuthCommentsModal,targetId:p?Z.Bt:Z.nO})),a.createElement("div",{className:ee.SP},!k&&!1,!k&&a.createElement("h1",{className:D?ee.Ou:ee.DD,dir:"auto"},n.name),k&&a.createElement("h1",null,a.createElement(o._,{newTab:!0,trusted:!0,className:ee.DD,href:`/proto/${n.key}`},n.name)),!k&&D&&a.createElement("div",{className:ee.hg},a.createElement(s.E,{"aria-label":(0,P.t)("proto.options_dropdown"),"aria-expanded":$,"aria-haspopup":"menu","aria-controls":$?ea:void 0,onClick:e=>{e.stopPropagation(),$?m(M.oB()):m(M.j7({type:en}))},className:ee.pz},a.createElement(c.k,null)),$&&a.createElement(ec,{viewer:e.viewer||null,file:n}))),a.createElement("div",{className:ee.DK},(0,I.kc)().prototype_preload_offline&&a.createElement(X.ez,null),(!k||ei)&&e.multiplayer&&!e.shouldHideHeader&&a.createElement(z.Cv,{dropdownShown:h,multiplayer:e.multiplayer,user:p}),(!k||ei)&&a.createElement(Q.Ay,{user:p,shareText:O((0,P.t)("viewer.menu_bar.share"),(0,q.f)(e.file.editorType)?(0,P.t)("viewer.menu_bar.share_presentation"):(0,P.t)("viewer.menu_bar.share_prototype")),loginText:O((0,P.t)("viewer.menu_bar.log_in"),(0,P.t)("viewer.menu_bar.log_in_or_create_account")),file:n}),!V&&u,!ei&&a.createElement(ep,{inFullScreenMode:e.inFullScreenMode,dispatch:m}))),!k&&!ei&&!p&&!_.hideUI&&f()&&a.createElement(j.PQ,{origin:b.DT.PROTOTYPE,hideOnMobile:!0,overrideUseFedCMPrompt:!1}))}function es(e){let r=E.GZ()&&!ei&&null==(0,A.qg)(v.Ay.location.search).fullscreen,n=ee.UF;return r&&(n=ee.m_),a.createElement("div",{className:n},a.createElement(l.N,{href:"/",onClick:e.onClickLogo,"aria-label":(0,P.t)("proto.file_browser")},r&&a.createElement(O.B,{svg:er.A}),!r&&a.createElement(O.B,{svg:et.A,useOriginalSrcFills_DEPRECATED:!0})))}function el(e){return a.createElement("div",{className:ee.uH},a.createElement(es,{onClickLogo:e.onClickLogo}))}function ec(e){let{viewer:r,file:n}=e,o=(0,i.wA)(),[s,l]=(0,J.nN)(),c=r?.getBaseScreenId(),d=`/file/${n.key}/${encodeURIComponent(n.name)}?node-id=${c}`;return(0,I.kc)().ps_benchmark?s&&l&&(d+=`&prev-plan-id=${s}&prev-plan-type=${l}`):s&&(d+=`&prev-org-id=${s}`),a.createElement("div",{className:ee.fh},a.createElement(L.X3,{id:ea,hideDropdown:()=>o(M.oB()),options:[a.createElement(L.c$,{key:"open-in-editor",href:d,onMouseDown:()=>{o((0,Y._P)({name:"Prototype Original Source Clicked"}))}},(0,P.tx)("viewer.menu_bar.open_in_editor"))]}))}function ed({setAccessibilityTreeFocus:e,recordingKey:r}){let n=a.useRef(null),[o,s]=a.useState(!1),{width:l}=(0,T.wY)(n)??T.cU,c=a.useCallback(()=>s(!0),[]),d=a.useCallback(()=>s(!1),[]),u=(0,i.wA)(),m=(0,V.e)(),p=e=>{u(D.F.enqueue({type:"accessibility-dom-enabled",role:"status",get message(){return e?(0,P.t)("viewer.options.accessible_dom_enabled"):(0,P.t)("viewer.options.accessible_dom_disabled")}})),u((0,U.X7)({enabled:e,scope:"SESSION"}))},h=C.rf(r,"click",r=>{(0,f.f)(m?f.h.SKIP_TO_CONTENT:f.h.ENABLE_AND_SKIP_TO_CONTENT,{isMouseEvent:r?.screenX!==0&&r?.screenY!==0}),p(!0),e(!0)});return a.createElement("div",{ref:n,className:ee.ts,style:o?void 0:{marginLeft:-l}},a.createElement("button",{className:ee.O6,onClick:h,onFocus:c,onBlur:d},(0,P.tx)("proto.header.skip_to_content")))}class eu extends C.o6{constructor(){super(...arguments),this.onClick=C.cZ(this,"click",()=>{this.props.onClick()})}render(){return a.createElement(s.E,{onClick:this.onClick,"aria-label":(0,P.t)("proto.comment"),"aria-controls":this.props.targetId,className:this.props.selected?ee.WB:ee.zQ,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-testid":"prototype-header-comments-button","data-tooltip":(0,P.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"}),"data-onboarding-key":"prototype-comment"}},a.createElement(d.f,null))}}function em(e){let r=C.rf(e.recordingKey,"click",r=>{e.setShowSidebar(!e.isSidebarOpen)});return a.createElement(s.E,{htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":`${e.isSidebarOpen?(0,P.t)("viewer.flows_sidebar.close_sidebar"):(0,P.t)("viewer.flows_sidebar.open_sidebar")}`},onClick:r,"aria-label":(0,P.t)("proto.flows"),"aria-controls":e.sidebarId,className:ee.e3},a.createElement(m,null))}eu.displayName="ToggleCommentsButton";class ep extends a.PureComponent{constructor(){super(...arguments),this.onClick=E.R7.fullscreen?()=>{this.props.dispatch((0,k._M)())}:w.lQ}render(){let e;let r=E.R7.fullscreen;return e=r?this.props.inFullScreenMode?(0,P.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,P.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,P.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),a.createElement(s.E,{"aria-label":e,className:this.props.classNameOverride||(E.R7.fullscreen?ee.Yd:ee.E1),disabled:!r,onClick:this.onClick,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":e}},this.props.inFullScreenMode?a.createElement(p.p,null):a.createElement(h.O,null))}}ep.displayName="ToggleFullScreenButton"},899367:(e,r,n)=>{n.d(r,{HS:()=>g,hF:()=>b,l5:()=>m,xY:()=>p});var a=n(188507),i=n(846288),o=n(805014);n(76265),n(553362);var s=n(688581),l=n(366172),c=n(914077),d=n(991944),u=n(96966),m=(e=>(e[e.DEVICE=0]="DEVICE",e[e.WEBSITE=1]="WEBSITE",e[e.SMALL=2]="SMALL",e))(m||{});function p(e){return"fullscreen"===e.selectedView.view&&(e.selectedView.editorType===c.nT.Design||e.selectedView.editorType===c.nT.DevHandoff||e.selectedView.editorType===c.nT.Slides)}let h=16/9,_=(e,r)=>{let n=r.getCurrentPage();if(!n)throw Error("Expected currentPage to exist");let{prototypeDevice:a}=n;return a?a.type===o.XQq.PRESENTATION?{x:e.absoluteBoundingBox.w,y:e.absoluteBoundingBox.h}:a.type===o.XQq.NONE?null:a.rotation===o.xOL.NONE?a.size:{x:a.size.y,y:a.size.x}:null};function g(e,r){let n=_(r,e);return n?{type:0,...n}:r.absoluteBoundingBox.w>=1280?{type:1}:{type:2}}function f(e,r){return(e.getCurrentPage()?.prototypeDevice?.rotation??o.xOL.NONE)===o.xOL.NONE?{x:104,y:20+(r?d.uF:0)}:{x:104,y:104}}let E=(e,{x:r,y:n},a)=>{let i=n/e.y,o=Math.min(i,r/e.x),{x:s,y:l}=f(a);if(o<1){if(o===i){if(Math.max(e.x*o,s)!==s)return{x:e.x*o,y:e.y*o};{let r=s/e.x;return{x:s,y:e.y*r}}}if(Math.max(e.y*o,l)!==l)return{x:e.x*o,y:e.y*o};{let r=l/e.y;return{x:e.x*r,y:l}}}return e},y=(e,{x:r,y:n},a)=>{let{x:i,y:o}=f(a),s=o/e.y,l=Math.max(s,i/e.x);if(l>1){if(l===s){if(Math.min(e.x*l,r)!==r)return{x:e.x*l,y:e.y*l};{let n=r/e.x;return{x:r,y:e.y*n}}}if(Math.min(e.y*l,n)!==n)return{x:e.x*l,y:e.y*l};{let r=n/e.y;return{x:e.x*r,y:n}}}return e};function b(e,r,n,o,c){let m=c.get(o);(0,i.vA)(!!m,"expected node to exist");let p=g(c,m);if(e&&(0,a.bN)(e.breakpoint,p)&&!r)return e;let _=l.Y5.getViewportInfo(),f=_.height-d.uF-32,b=Math.max(.5*_.width,104),v=(0,u.$W)(c),T=!!v&&(0,s.L_)(v);if(!(0===p.type&&n&&T)){let e=E(function(e,r){switch(e.type){case 0:return{x:e.x,y:e.y};case 1:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.w/h};case 2:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.h};default:(0,i.xb)(e)}}(p,m),{x:b,y:f},c);return{initialViewerSize:e=y(e,{x:b,y:f},c),breakpoint:p}}let I=c.getCurrentPage()?.prototypeDevice?.rotation;(0,i.B1)(I,"expected device rotation to exist");let{idealDeviceSize:S,framePresetSize:w}=(0,u.is)(v,I),A=E(S,{x:b,y:f},c);return A=y(A,{x:b,y:f},c),{initialViewerSize:(0,u.BX)(A,w,S),breakpoint:p}}},330573:(e,r,n)=>{n.d(r,{y:()=>S});var a=n(411855),i=n(188507),o=n(841962),s=n(137565),l=n(851390),c=n(918091),d=n(693565),u=n(76265),m=n(47795),p=n(752008);let h="internal_debug_tools--button--3-eAq";var _=n(18301),g=n(133720),f=n(289298),E=n(942723),y=n(236446),b=n(501191),v=n(743338),T=n(403921);let I="PROTOTYPE_DEBUG_TOOLS_MENU";function S(e){let r=(0,i.d4)(e=>e.dropdownShown),n=(0,i.wA)(),S=r?.type===I,[,w]=a.useState({}),A=a.useCallback(()=>w({}),[]),{viewer:C}=e,[N,L]=a.useState(!1),[O,R]=a.useState(!1);return(0,o.kc)().internal_prototyping_debug_tool?a.createElement("div",{className:"internal_debug_tools--debugContainer--CtxqL"},a.createElement(s.D8,{className:"internal_debug_tools--dropdownMenu--D-LuC",onClick:function(e){e.stopPropagation(),S?n(m.oB()):n(m.j7({type:I}))}},a.createElement("div",{className:"internal_debug_tools--dropdownMenuButton--5NXqo"},a.createElement("span",null,(0,u.tx)("viewer.debug_tools.debug_tools")),a.createElement("div",{className:"internal_debug_tools--buttonChevron--l5X4a"},a.createElement(d.B,{svg:f.A}))),S&&a.createElement(c.ms,{className:"internal_debug_tools--dropdown--5KC-1"},a.createElement(c.c$,{onClick:()=>{C?.isConnected()?C?.disconnectForTesting():C?.reconnectForTesting(),A()}},C?.isConnected()?(0,u.t)("viewer.debug_tools.disconnect_from_multiplayer"):(0,u.t)("viewer.debug_tools.reconnect_to_multiplayer")),a.createElement(c.c$,{onClick:()=>{(0,p.v)(!1);let e=document.getElementById("viewer_debug_stats");e?e.remove():C?(0,l.FL)(C):console.error("Viewer object doesn't exist")}},(0,u.tx)("viewer.debug_tools.toggle_debug_stats")),a.createElement(c.c$,{onClick:()=>window.testFakeLostContext?.()},(0,u.tx)("viewer.debug_tools.test_fake_web_gl_context_loss")),a.createElement(c.c$,{onClick:()=>window.testRealLostContext?.()},(0,u.tx)("viewer.debug_tools.test_real_web_gl_context_loss")),a.createElement(c.c$,{onClick:()=>{C?.takeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.take_spector_snapshot")),a.createElement(c.c$,{onClick:()=>{C?.clearTileCachesAndTakeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.clear_tile_caches_and_take_spector_snapshot")),a.createElement(c.c$,{onClick:()=>{C&&(N?(C.renderLayerByLayerDeactivate(),L(!1),R(!1)):(C.renderLayerByLayerActivate(),L(!0)))}},(0,u.tx)("viewer.debug_tools.render_layer_by_layer")),a.createElement(c.c$,{onClick:()=>{C?.toggleRenderTreePrinting()}},(0,u.tx)("viewer.debug_tools.toggle_render_tree_printing")))),N?a.createElement("div",{className:"internal_debug_tools--layerByLayerRenderingControls--Oj1Jd"},a.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerRewind()}},a.createElement(d.B,{svg:v.A})),a.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerBackward()}},a.createElement(d.B,{svg:_.A})),O?a.createElement("button",{className:h,onClick:()=>{C&&O&&(C.renderLayerByLayerPause(),R(!1))}},a.createElement(d.B,{svg:T.A})):a.createElement("button",{className:h,onClick:()=>{C&&!O&&(C.renderLayerByLayerPlay(),R(!0))}},a.createElement(d.B,{svg:y.A})),a.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerForward()}},a.createElement(d.B,{svg:E.A})),a.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerDecreaseSpeed()}},a.createElement(d.B,{svg:g.A})),a.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerIncreaseSpeed()}},a.createElement(d.B,{svg:b.A}))):null):null}},346222:(e,r,n)=>{n.d(r,{i:()=>g});var a=n(411855),i=n(463844),o=n(520244),s=n(777535),l=n(163773),c=n(747484),d=n(851390),u=n(693565),m=n(76265),p=n(411856),h=n(42638);function _(){let e=(0,p.b0)();return a.createElement("button",{type:"button",className:"loading_state_overlay--offlineSecondaryAction--tZCt4",onClick:()=>{e?location.reload():l.Ay.reload("The viewer is taking a long time to load.")}},(0,m.tx)("viewer.loading_overlay.reload"))}function g(e){let r=(()=>{let r=e.viewerEl?.getBoundingClientRect();return{top:r?.top||0,left:r?.left||0,width:r?.width||0,height:r?.height||0}})(),[n,l]=a.useState("LOADED"),[g,f]=a.useState(null),[E,y]=a.useState(null),[b,v]=a.useState(null),T=(0,p.b0)(),I=a.useCallback(e=>{"LOADED"!==e&&"SHORT_LOADING"!==e&&s.az.trackDefinedEvent("prototype.viewer_overlay_state",{overlayState:e,isInEmbed:(0,p.dH)(),isMirror:(0,c.Ji)(),isInlinePreview:T,interactionId:g||"",interactionCause:E||"",destinationId:b||""}),l(e)},[T,g,E,b]),S=a.useRef(null);return(a.useEffect(()=>{S.current&&clearTimeout(S.current),"SHORT_LOADING"===n?S.current=setTimeout(()=>{I("LONG_LOADING")},700):"LONG_LOADING"===n&&(S.current=setTimeout(()=>{navigator.onLine?I("LOADING_ERROR"):I("CONNECTION_ERROR")},1e4))},[n,I]),d.O5(e.viewer,"requestedStateChange",e=>{S.current&&clearTimeout(S.current),I("SHORT_LOADING"),e&&(y(e.cause),v(e.destinationId),f(e.interactionId))}),d.O5(e.viewer,"requestedStateChangeInitiated",()=>{S.current&&clearTimeout(S.current),I("LOADED")}),"LOADED"===n||"SHORT_LOADING"===n)?null:a.createElement("div",{className:"loading_state_overlay--overlayContainer--egThs"},r&&a.createElement("div",{className:"loading_state_overlay--contentContainer--20M6N",style:{...r}},"LONG_LOADING"===n?a.createElement(i.k,null):"LOADING_ERROR"===n?a.createElement("div",{className:"loading_state_overlay--longLoadingContainer--FQgxf"},a.createElement(i.k,null),a.createElement("div",{className:"loading_state_overlay--longLoadingHelperText--Vp9LZ text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.this_is_taking_some_time_hang_on_while_this_finishes_loading")),a.createElement(_,null)):"CONNECTION_ERROR"===n?a.createElement("div",{className:"loading_state_overlay--offlineContainer--TMfk0"},a.createElement(u.B,{className:"loading_state_overlay--offlineSvg--GHCgu",svg:h.A}),a.createElement("div",{className:"loading_state_overlay--offlineTextContainer--kn7QV"},a.createElement("div",{className:"loading_state_overlay--offlineTitle--6hlCW text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.can_t_connect_to_the_internet")),a.createElement("div",{className:"loading_state_overlay--offlineHelperText--qBa0p text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.check_your_connection_to_continue_with_the_prototype"))),a.createElement("div",{className:"loading_state_overlay--offlineButtonContainer--MyWop"},a.createElement(o.$n,{variant:"primary",onClick:()=>I("LONG_LOADING")},(0,m.tx)("viewer.loading_overlay.try_again")),a.createElement(_,null))):void 0))}},154418:(e,r,n)=>{n.d(r,{Ag:()=>$});var a=n(411855),i=n(188507),o=n(846288),s=n(351966),l=n(971924),c=n(952512),d=n(563259),u=n(134358),m=n(286276),p=n(57320),h=n(629019),_=n.n(h),g=n(952979),f=n(163773),E=n(841962),y=n(875877),b=n(747484),v=n(750570),T=n(563192),I=n(399991),S=n(693565),w=n(132939),A=n(76265),C=n(47795),N=n(736041),L=n(688581),O=n(926996),R=n(952122),P=n(50474),D=n(172509),k=n(689954),M=n(610110),F=n(411856),x=n(676455),U=n(842010),B=n(976553),V=n(289298),G=n(479991),H=n(978019),W=n(534160),K=n(503618),Y=n(844076);function $({device:e,showHotspots:r,showPrototypeOptions:n,showDeviceFrame:h,setHideUI:$,recordingKey:j,dropdownShown:z,isFooter:q}){let Z=g.GZ()&&!(0,I.nl)()&&null==(0,v.qg)(f.Ay.location.search).fullscreen,X=(0,O.mr)(),J=(0,i.wA)(),Q=a.useRef(null),ee=(0,y.useAtomValue)(F.Bf),et=(0,M.s7)(),er=(0,b.o4)(),en=null!=e&&"PRESET"===e.type;(0,o.vA)(!q||en);let ea=!q&&en,ei=q&&en,eo=n&&!ea,es=en&&!ei,el=!ei,ec=!ei&&!er,ed=ei?"PROTOTYPE_OPTIONS_MENU_FOOTER":"PROTOTYPE_OPTIONS_MENU",eu=z&&z.type===ed;function em(e){e.stopPropagation(),eu?J(C.oB()):J(C.j7({type:ed,data:{position:Q.current?.getBoundingClientRect()}}))}let ep=(0,R.M9)(X),eh=eo?(function(e,r,n,i,o,s,d){let h=(0,F.Pz)(o,n),_=(0,F.Ac)(r,h),g=(h.findIndex(e=>e.scalingOptionId===_)+1)%h.length,f=h[g],E=n=>(function({option:e,currentScalingInfo:r,scalingHandlerOverride:n,recordingKey:i,showShortcut:o,dispatch:s,isFooter:d}){let h=(0,F.Ac)(r,[e]);return{displayText:(0,F.GP)(e.scalingOptionId,d),isChecked:h===e.scalingOptionId,callback:()=>n?n(e):void s((0,R.Jr)({...e.scalingInfo,userInitiated:!0,source:"presentation"})),recordingKey:i,shortcut:o?"Z":void 0,icon:d?void 0:function(e){switch(e){case F.IK.FIT_TO_SCREEN:return a.createElement(w.U,{svg:W.A,className:B.Fp},a.createElement(u.H,null));case F.IK.FIT_WIDTH:return a.createElement(w.U,{svg:K.A,className:B.Fp},a.createElement(m.v,null));case F.IK.FILL_SCREEN:return a.createElement(w.U,{svg:H.A,className:B.Fp},a.createElement(p.m,null));case F.IK.ACTUAL_SIZE:return a.createElement(w.U,{svg:G.A,className:B.Fp},a.createElement(l.O,null));case F.IK.RESPONSIVE:return a.createElement(w.U,{svg:Y.A,className:B.Fp},a.createElement(c.V,null));default:return}}(e.scalingOptionId),unsetStrokeOnActiveOption:!0,name:e.scalingOptionId}})({dispatch:e,option:n,showShortcut:n.scalingOptionId===f.scalingOptionId,currentScalingInfo:r,scalingHandlerOverride:s,recordingKey:T.Pt({recordingKey:i},`option-${(0,F.Ti)(n.scalingOptionId)}`),isFooter:d});if(!(n!==F.Yu.DEFAULT&&!d&&h.length>=4))return h.map(e=>E(e));{let e=h.slice(0,2).map(e=>E(e)),r=h.slice(2).map(e=>E(e));return[{disabled:!0,displayText:(0,A.t)("viewer.options_menu.recommended_scaling_options")},...e,{disabled:!0,displayText:(0,A.t)("viewer.options_menu.other_scaling_options")},...r]}})(J,ep,ee,j,e?.type,void 0,q).concat(P.w):[],e_=function(){let e=!!(0,O.mr)().disableDefaultKeyboardNav,r=F.pw();return{displayText:(0,A.t)("viewer.options_menu.disable_default_keyboard_navigation_v1"),isChecked:!e,callback:function(){r(!e)}}}(),eg=e=>{e!==ep.contentScalingMode&&J((0,R.Jr)({contentScalingMode:e,userInitiated:!0,source:"presentation"}))},ef=[{displayText:(0,A.t)("viewer.options_menu.fixed_size"),icon:a.createElement(w.U,{svg:G.A,className:B.Fp},a.createElement(l.O,null)),isChecked:"responsive"!==ep.contentScalingMode,callback:()=>eg("fixed"),recordingKey:"fixed",unsetStrokeOnActiveOption:!0},{displayText:(0,A.t)("viewer.options_menu.responsive"),icon:a.createElement(w.U,{svg:Y.A,className:B.Fp},a.createElement(c.V,null)),isChecked:"responsive"===ep.contentScalingMode,callback:()=>eg("responsive"),recordingKey:"responsive",unsetStrokeOnActiveOption:!0},P.w],eE=function(e,r,n,a,i,{hideHotspots:o,hideDeviceFrame:s}={}){let l=[];return o||l.push({displayText:(0,A.t)("viewer.options_menu.show_hints_on_click"),isChecked:e,callback:function(){i((0,R.KJ)({showHotspots:!e}))},"data-onboarding-key":"toggleHotspots"}),s||l.push({displayText:(0,A.t)("viewer.options_menu.show_device_frame"),isChecked:n,callback:function(){i((0,R.t0)({showDeviceFrame:!n}))},recordingKey:"option-toggle-device-frame",hidden:!a,"data-onboarding-key":"toggleDeviceFrame"}),r?l:[]}(r,n,h,en,J,{hideHotspots:ei,hideDeviceFrame:ea}),ey=function(){let e=(0,O.mr)(),r=(0,i.wA)(),n=(0,x.gV)(e),o=a.useCallback(e=>({recordingKey:T.Pt("device-option",e.presetIdentifier),isChecked:n?.presetIdentifier===e.presetIdentifier,callback:()=>{r((0,R.Zh)({name:"prototype.viewer_device_picker_changed",params:{presetIdentifier:e.presetIdentifier,framePresetWidth:e.framePresetSize.x,framePresetHeight:e.framePresetSize.y}})),r((0,R.mf)({newDevice:{type:"PRESET",presetIdentifier:e.presetIdentifier,size:e.framePresetSize,rotation:n?.rotation||"NONE"}}))},displayText:e.getI18nDeviceName(),sideText:`${e.framePresetSize.x}\u200A\xd7\u200A${e.framePresetSize.y}`,rightJustifySideText:!0}),[r,n]),s=e.initialDevice;return a.useMemo(()=>{let e=s?.presetIdentifier?(0,L.Fh)(L.hY[s.presetIdentifier].deviceName,s):null;if(!s||!e)return[];let r=[];r.push({disabled:!0,displayText:(0,A.t)("viewer.options_menu.device_dropdown.default")}),r.push(o(e)),r.push(P.w);let n=(0,L.qt)(s.presetIdentifier),a=(0,L.WT)(L.LM[n],s);r.push(...a.map(o));let i=(0,L.WT)(L.UV[n],s).filter(e=>!a.find(r=>r.presetIdentifier===e.presetIdentifier));return i.length>0&&r.push({displayText:(0,A.t)("viewer.options_menu.device_dropdown.other"),recordingKey:T.Pt({recordingKey:"device-option"},"other-options"),children:i.map(o)}),r.push(P.w),r},[s,o])}(),eb=function(e,r,{hideUIToggle:n}={}){return n?[]:[{displayText:(0,A.t)("viewer.options_menu.hide_ui"),isChecked:!1,callback:function(){e(!0),r((0,R._P)({name:"Prototype Hide UI",params:{hide:!0}}))},recordingKey:"hide-ui",shortcut:(0,F.Fg)()}]}($,J,{hideUIToggle:ei}),ev=function(e,r=!1){return r?[]:[{displayText:"Accessibility settings...",callback:()=>{e((0,N.to)({type:D.L}))},isChecked:!1}]}(J,ei),eT=(0,E.kc)().prototype_preload_offline?[{children:[...el?[e_]:[],...eE,...ec?[et]:[],...ev],displayText:(0,A.t)("proto.option_menu.advanced_settings"),recordingKey:"advanced-settings"}]:[...el?[e_]:[],...eE,...ev],eI=Z?eh:[...ei?ey:[],...eh,...es?ef:[],...eT,...eb],eS=a.createElement(s.E,{onClick:em,recordingKey:T.Pt({recordingKey:j},"toggle"),"aria-label":(0,A.t)("viewer.options_menu.options"),className:U.My},a.createElement(d.P,{style:{margin:"0 8px"}})),ew=q?e?.presetIdentifier&&L.hY[e?.presetIdentifier].getI18nDeviceName()||"UNKNOWN DEVICE":void 0,eA=a.createElement(s.E,{onClick:em,recordingKey:T.Pt({recordingKey:j},"toggle"),htmlAttributes:{"data-fullscreen-intercept":!0,tabIndex:0},className:_()([B.kv,B.zG])},a.createElement("div",{className:B.g7},ew),a.createElement("div",{className:B.UT},a.createElement(S.B,{svg:V.A}))),eC=z?.data?.position??void 0,eN=_()({[B.HF]:q,[B.v6]:!q});return a.createElement("div",{className:eN,ref:Q},!q&&eS,q&&eA,eu&&!!eC&&a.createElement(k.j,{showPoint:!0,onSelectItem:e=>e.callback?.(),parentRect:eC,dispatch:J,items:eI,recordingKey:"options-menu-dropdown",displayAboveTarget:q,alwaysShowCheckMarkOffset:!0}))}},166433:(e,r,n)=>{n.d(r,{AH:()=>d,Md:()=>l,pb:()=>s,z2:()=>o,zM:()=>c});var a=n(875877),i=n(880855),o=(e=>(e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADED=1]="LOADED",e))(o||{}),s=(e=>(e[e.LOAD_LIVEGRAPH=0]="LOAD_LIVEGRAPH",e[e.LOAD_VIEWER_INSTANCE=1]="LOAD_VIEWER_INSTANCE",e))(s||{});let l=(0,a.atomWithReducer)({status:0,livegraphLoaded:!1,viewerInstanceLoaded:!1},(e,r)=>{if(1===e.status)return e;switch(r.type){case 0:if(e.viewerInstanceLoaded)return i.Su.handleViewerLoaded("livegraph"),{status:1,lastLoaded:"livegraph"};if(e.livegraphLoaded)return e;return{...e,livegraphLoaded:!0};case 1:if(e.livegraphLoaded)return i.Su.handleViewerLoaded("multiplayer"),{status:1,lastLoaded:"multiplayer"};if(e.viewerInstanceLoaded)return e;return{...e,viewerInstanceLoaded:!0}}});function c(e){return a.atomStore.sub(l,()=>{d()&&e()})}function d(){return 1===a.atomStore.get(l).status}},676455:(e,r,n)=>{n.d(r,{gV:()=>c,nN:()=>l,tK:()=>d});var a=n(411855),i=n(188507),o=n(841962),s=n(926996);function l(){let e=(0,i.d4)(e=>e.lastVisitedPlan),r=(0,i.d4)(e=>e.lastVisitedPlanId),n=null;return(0,o.kc)().ps_benchmark&&e&&(r=e.planId,n=e.planType),[r,n]}function c(e){return e.initialDevice?.presetIdentifier===e.overrideDevice?.presetIdentifier?e.initialDevice||null:e.overrideDevice||e.initialDevice||null}function d(){let e=(0,s.mr)();return(0,a.useMemo)(()=>c(e),[e])}},494858:(e,r,n)=>{n.d(r,{z:()=>I});var a=n(411855),i=n(188507),o=n(777535),s=n(163773),l=n(841962),c=n(750570),d=n(719334),u=n(880855),m=n(602564),p=n(346838),h=n(926996),_=n(76736),g=n(914077),f=n(60077);let E=new class{constructor(){this.CanvasSchemaValidator=(0,f.vh)()}getCanvas(e){return this.CanvasSchemaValidator.validate(async({xr:r})=>await r.get(`/file/${e.fileKey}/canvas`,null,{responseType:"arraybuffer"}))}},y=new class{constructor(){this.CanvasFkSchemaValidator=(0,f.vh)()}getCanvasFk(e){return this.CanvasFkSchemaValidator.validate(async({xr:r})=>await r.get(`/version/${e.versionId}/canvas?fk=${e.fileKey}`,null,{responseType:"arraybuffer"}))}};var b=n(411856);async function v(e,r){try{return await y.getCanvasFk({versionId:e,fileKey:r})}catch{return(0,o.sx)("Prototype Version Load Failed",{file_key:r,version_id:e}),null}}async function T(e){try{return await E.getCanvas({fileKey:e})}catch{return null}}function I(e){let{viewer:r,entry:n}=e,o=(0,i.wA)(),{file:f,versionId:E,nodeId:y,startingPointNodeId:I}=(0,h.mr)(),S=a.useRef(!1);return a.useEffect(()=>{(async()=>{if(!f.key||S.current)return;let e=(0,c.qg)(s.Ay.location.search),a="1"===e["disable-mp"]&&(0,l.kc)().internal_only_debug_tools;_.T(),m.Q.setLoadTimeTracker(u.Su);let i=(b.dH()||"feed"===e["redirect-src"])&&E,h=i||a;if(h){let e=null;(e=i?await v(E,f.key):await T(f.key))?(r.loadFile({bytes:e.data,nodeId:y||"",startingPointNodeId:I||"",imagePrefixURL:`/file/${f.key}/image`,videoPrefixURL:`/api/files/${f.key}/videos`,editorType:(0,g.y9)(f.editor_type)},p.M),S.current=!0):o(d.s.flash("This prototype isn't available."))}else r.connectTo({fileKey:f.key,nodeId:y||"",startingPointNodeId:I||"",editorType:(0,g.y9)(f.editor_type)},p.M),S.current=!0;u.Su.handleAfterConnectTo({entry:n,connectionType:h?"file":"multiplayer",fullscreen:"Fullview-IC",logViewerWaiting:!1})})()},[o,f,E,y,I,r,n]),null}},608080:(e,r,n)=>{n.d(r,{L:()=>u});var a=n(411855),i=n(629019),o=n.n(i),s=n(45427),l=n(663844),c=n(265851),d=n(778465);function u(e){let r=e.showSidebar;return a.createElement("div",{className:o()({[d.so]:r,[d.c6]:!r,[d.UL]:e.withoutHeaderMargin})},a.createElement(s.V,{className:c.s.flex.flex1.flexColumn.$},!1===e.scrollable?e.children:a.createElement(l.P,{className:d.jG,hideScrollbar:!0},e.children)))}},952009:(e,r,n)=>{n.d(r,{wh:()=>H,Ay:()=>G});var a=n(411855),i=n(188507),o=n(520244),s=n(952979),l=n(742360),c=n(163773),d=n(747484),u=n(544920),m=n(267310),p=n(265851),h=n(76265),_=n(736041),g=n(916348),f=n(698003),E=n(773236),y=n(688656),b=n(534173),v=n(512729),T=n(875877),I=n(140835),S=n(515967),w=n(300574),A=n(780017),C=n(932667),N=n(135891),L=n(424867),O=n(272580),R=n(759240),P=n(896473);let D="seen_pro_onboarding_prototype_only_links_overlay",k=(0,A.r1)(D);function M({teamId:e}){let r=(0,T.useAtomValue)(k),n=(0,T.useAtomValue)(w.e),i=(0,T.useSetAtom)(P.n),o=(0,g.kO)(),{show:s,isShowing:l,complete:c}=(0,S.e)({overlay:R.MxF,priority:N.N.DEFAULT_MODAL,experiment:{check:o,predicate:e=>e,postCheck:e=>!e}},[r,n]);return((0,v.h)(()=>{s({canShow:(r,n)=>n.some(r=>r.id===e),onShow:()=>i(!0)})}),l)?a.createElement(L.M,{isShowing:l,userFlagOnShow:D},a.createElement(I.fu,{name:C.S.getTooltipTrackingContext("Prototype Only Links"),properties:C.S.getTrackingProperties()},a.createElement(O.$v,{dismissModal:()=>{i(!1),c()}}))):null}var F=n(221009),x=n(842010);let U="node-id",B="prototype_header_nav_google_sso",V="slides_presentation_header_nav_google_sso";function G(e){let{user:r,file:n,shareText:p,loginText:g}=e,y=(0,i.wA)(),v=!(0,d.C8)();return r?a.createElement(a.Fragment,null,a.createElement("div",{className:x.TC},a.createElement(o.$n,{onClick:()=>{y(_.to({type:F.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},htmlAttributes:{"data-onboarding-key":"share-prototype"}},p)),n.teamId&&a.createElement(M,{teamId:n.teamId})):a.createElement("div",{className:x.TC},a.createElement(o.$n,{variant:v?"secondary":"primary",onClick:()=>{let e=c.Ay.location.pathname,r=new URLSearchParams(c.Ay.location.search).get(U);r&&(e=s.dR(e,{[U]:r})),y(u.Ts({origin:"prototype_header_nav",redirectUrl:e})),y(_.to({type:b.x,data:{}}))}},g),v&&a.createElement(E.H,{onClick:()=>{l.Rm({dispatch:y,origin:B,redirectUrl:c.Ay.location.pathname}).then(e=>"login"===e.type&&y(u.My({userId:e.user.id})),e=>{(0,m.g)("google_signup_error",B,{error:e.message})})}},(0,h.tx)("footer_banner.continue_with_google")))}function H(e){let{user:r,file:n,shareText:s,loginText:d,sharingDisabled:b,showDefaultAuthModal:v}=e,T=(0,i.wA)(),I=(0,g.Ns)(r);if(r)return a.createElement(a.Fragment,null,a.createElement(o.WW,{onClick:()=>{T(_.to({type:F.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},disabled:b,htmlAttributes:{"data-tooltip":b?(0,h.t)("fullscreen.toolbar.multiplayer.sharing_slides_files_disabled_by_your_organization"):void 0,"data-tooltip-type":y.Ib.TEXT,"data-onboarding-key":"share-prototype"}},s),n.teamId&&a.createElement(M,{teamId:n.teamId}));let S=I();return a.createElement("div",{className:p.s.flex.gap8.$},a.createElement(o.WW,{variant:S?"secondary":"primary",onClick:v},d),S&&a.createElement(E.H,{onClick:()=>{l.Rm({dispatch:T,origin:V,redirectUrl:c.Ay.location.pathname}).then(e=>"login"===e.type&&T(u.My({userId:e.user.id}))).catch(e=>{(0,m.g)("google_signup_error",V,{error:e.message})})},large:!0},(0,h.tx)("footer_banner.continue_with_google")))}},817819:(e,r,n)=>{n.d(r,{iO:()=>v,xt:()=>b,rI:()=>C});var a=n(411855),i=n(188507),o=n(511445),s=n(631769),l=n(563192),c=n(437068),d=n(640747),u=n(45427),m=n(663844),p=n(693565),h=n(76265),_=n(47795),g=n(76237);let f="sidebar_panel--scrollContainer--Gng-6 legacy_pages_panel--scrollContainer--YR8Lw";var E=n(450147),y=n(304516);let b=240,v="PROTOTYPE_FLOW_CONTEXT_MENU_DROPDOWN";function T(e){return Math.max(b,Math.min(500,e||0))}var I=(e=>(e[e.HEIGHT=0]="HEIGHT",e[e.WIDTH=1]="WIDTH",e))(I||{});let S=(e,r,n)=>{if(c.x4){let a=JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}");a[e]={...a[e],...0===r&&{height:n},...1===r&&{width:n}},c.x4.setItem("viewer-sidebar-panel",JSON.stringify(a))}},w=(e,r)=>{if(c.x4){let n=JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}");0===r?delete n[e].height:1===r&&delete n[e].width,c.x4.setItem("viewer-sidebar-panel",JSON.stringify(n))}},A=e=>{if(c.x4)return JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}")[e]};function C(e){let[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),s="SidebarPanel",c=(0,a.useRef)(!1),d=a.useMemo(()=>i?T(i):b,[i]),u=l.rf(s,"mousedown",()=>{n(!0)}),m=l.rf(s,"mousemove",e=>{if(!r)return l.aH;{let r=T(e.clientX);r!==d&&o(r)}}),p=l.rf(s,"mouseup",a=>{if(!r)return l.aH;a.stopPropagation(),e.setSidebarWidthInParent(d),n(!1)});(0,a.useEffect)(()=>(document.addEventListener("mousemove",m),document.addEventListener("mouseup",p,!0),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",p,!0)}),[m,p]);let{openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E,showSidebar:y,setSidebarWidthInParent:v}=e;(0,a.useEffect)(()=>{h&&i&&S(h,1,i)},[i,h]),(0,a.useEffect)(()=>{h&&(e=>{let r=A(e);r&&r.width&&(o(r.width),v(r.width))})(h)},[h,v]),(0,a.useEffect)(()=>{!c.current&&_.length>0?c.current=!0:c.current&&0===_.length&&y&&E(!1)},[_,y,E]);let I=a.createElement(a.Fragment,null,a.createElement("nav",{className:"sidebar_panel--content--Ebl5L","aria-labelledby":L,"aria-hidden":!e.showSidebar},a.createElement(R,{recordingKey:"sidebarViewerPanel",width:d,openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E})),a.createElement("div",{className:"sidebar_panel--edge--Rc8Ap",style:{left:d},onMouseDown:u,onDoubleClick:()=>{o(null),e.setSidebarWidthInParent(null),e.openFileKey&&w(e.openFileKey,1)}}));return a.createElement(N,{id:e.id,showSidebar:e.showSidebar,width:d},I)}function N({id:e,children:r,showSidebar:n,width:i}){let o=n?"shown":"hidden",[s,l]=a.useState(o),c=s!==o?"transition":s,d=(0,a.useCallback)(()=>{l(o)},[o]);return(0,a.useEffect)(()=>{if("hidden"===s&&"shown"===o){let e=requestAnimationFrame(()=>void l(o));return()=>void cancelAnimationFrame(e)}},[s,o]),a.createElement("div",{id:e,className:"hidden"===c?"sidebar_panel--panelContainerDisplayNone--e6-Gw sidebar_panel--container--nl8-a":"sidebar_panel--panelContainer--0R0Wb sidebar_panel--container--nl8-a",style:{width:i,marginLeft:"shown"===c?0:-i},onTransitionEnd:d},r)}let L="sidebar-panel-heading-title";function O(){return a.createElement("div",{id:L,className:"sidebar_panel--flowsHeaderText--vATd7 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L legacy_pages_panel--pagesHeaderText--vgHeJ",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(0,h.tx)("viewer.flows_sidebar.flows"))}function R(e){let r=(0,a.useMemo)(()=>{let r={};for(let n=0;n<e.startingPointsData.length;n++)r[e.startingPointsData[n].id]=e.startingPointsData[n].description;return r},[e.startingPointsData]),[n,c]=(0,a.useState)(e.activePrototypeStartingPointNodeId),[b,T]=(0,a.useState)(r[e.activePrototypeStartingPointNodeId]),[I,C]=(0,a.useState)(!1),[N,L]=(0,a.useState)(null),[R,P]=(0,a.useState)(window.innerHeight),D=(0,a.useRef)(0),k=(0,a.useRef)(0),M=(0,a.useRef)(0),{openFileKey:F,activePrototypeStartingPointNodeId:x}=e,U=(0,i.wA)();(0,a.useEffect)(()=>{F&&N&&S(F,0,N)},[N,F]),(0,a.useEffect)(()=>{F&&(e=>{let r=A(e);r&&r.height&&L(V(r.height))})(F)},[F]);let B=e=>{k.current=D.current=e.clientY,M.current=e.clientY-86,L(M.current)},V=e=>{let r=16-(e-7)%32;return r<0&&(r+=32),e+r},G=(0,a.useCallback)(e=>Math.max(55,Math.min(e,Math.round(R-64-96))),[R]),H=(0,a.useMemo)(()=>(0,o.s)(()=>{P(window.innerHeight)},45),[]);function W(r){e.onSelectFlow(r)}(0,a.useEffect)(()=>{let e=()=>{H()};return window.addEventListener("resize",e),()=>{H.cancel(),window.removeEventListener("resize",e)}},[H]),(0,a.useEffect)(()=>{let e=e=>{e.clientY!==D.current&&(L(G(M.current+e.clientY-k.current)),D.current=e.clientY)},r=r=>{I&&(r.preventDefault(),r.stopPropagation(),e(r))},n=e=>{e.stopPropagation(),e.preventDefault(),C(!1)},a=r=>{I&&(r.preventDefault(),r.stopPropagation(),e(r.touches[0]))},i=e=>{C(!1)};return document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),document.addEventListener("touchend",i),document.addEventListener("touchmove",a),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",i),document.removeEventListener("touchmove",a)}},[G,I]),(0,a.useEffect)(()=>{c(x),T(r[x])},[x,r]);let K=b&&"<p><br></p>"!==b;return a.createElement("div",{className:"sidebar_panel--verticalFlexContainer--HTP2n",style:{width:e.width}},a.createElement("div",{className:"sidebar_panel--flowsListPanelContent--vU15E"},a.createElement("div",{className:"sidebar_panel--flowsHeaderContainerWithShadow--ku5dU legacy_pages_panel--pagesHeaderContainerWithShadow--eCg-j legacy_pages_panel--pagesHeaderContainer--LWPh-"},a.createElement(O,null),a.createElement(d.Jn,{useOriginalSrcFills_DEPRECATED:!0,recordingKey:l.Pt(e,"closeSidebar"),className:"sidebar_panel--closeButton--XWnCD",onClick:()=>e.setShowSidebar(!1),innerText:"close",svg:y.A})),e.startingPointsData?a.createElement(u.V,null,a.createElement("div",{style:{height:N?G(N):(()=>{let r=32*e.startingPointsData.length,n=Math.round(.25*(R-64));return V(Math.min(r=32*Math.ceil(r/32)+16,n))})()},className:"sidebar_panel--flowsList--lbQgB legacy_pages_panel--pagesList--20gAo"},a.createElement(m.P,{className:f,width:e.width,hideScrollbar:!0},e.startingPointsData.map((e,r)=>{let i="sidebar_panel--flowsRowSpacer--fu7iG";return 0===r&&(i="sidebar_panel--flowsRowSpacerInsertBeforeTop--j7UnJ sidebar_panel--flowsRowSpacer--fu7iG"),a.createElement("div",{className:i,key:e.id},a.createElement("button",{role:"link",className:"sidebar_panel--flowRow--1yyNX legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh","aria-current":n===e.id,key:e.id,onClick:()=>W(e.id),onTouchStart:()=>W(e.id),onContextMenu:r=>(function(e,r){e.preventDefault();let{clientX:n,clientY:a}=e;U(_.j7({type:v,data:{clientX:n,clientY:a,nodeId:r}}))})(r,e.id)},a.createElement(p.B,{svg:E.A,className:`sidebar_panel--flowRowSvg--GhKTM
                        ${n===e.id?"sidebar_panel--visibleCheckmark--0Ts8X":"sidebar_panel--hiddenCheckmark--O-kpW"}`}),a.createElement(g.JU,{className:n===e.id?"sidebar_panel--flowNameSelected--T5iAg text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L":"sidebar_panel--flowNameUnselected--DUjvf text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.name)))})))):null),a.createElement("div",{className:"sidebar_panel--resizeLineContainer--tIXt8"},a.createElement("div",{className:"sidebar_panel--resizeLine--u3PU-",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),B(e),C(!0)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),B(e.touches[0]),C(!0)},onDoubleClick:()=>{L(null),e.openFileKey&&w(e.openFileKey,0)}})),a.createElement("section",{"aria-label":(0,h.t)("proto.flow_description"),className:`sidebar_panel--flowDescriptionPanelContent--ogSmt ${K?"sidebar_panel--flowDescriptionText--pCFYA":""}`},a.createElement(m.P,{className:f,hideScrollbar:!0},a.createElement("div",{className:"sidebar_panel--flowDescriptionInnerPanelContent--H7-qc text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",dir:"auto"},a.createElement(s.R,{fallback:null,errorFallback:null,value:K?b:(0,h.t)("viewer.flows_sidebar.no_description")})))))}},513874:(e,r,n)=>{n.d(r,{V:()=>J});var a=n(411855),i=n(188507),o=n(957233),s=n(805014),l=n(952979),c=n(754668),d=n(875877),u=n(747484),m=n(653798),p=n(597338),h=n(697737),_=n(628452),g=n(596920),f=n(762893),E=n(736041),y=n(140835),b=n(960557),v=n(190500),T=n(698003),I=n(320918),S=n(798361),w=n(926996),A=n(314540),C=n(952122),N=n(507121),L=n(726066),O=n(465424),R=n(291220),P=n(598306),D=n(223077),k=n(41922),M=n(386538),F=n(851773),x=n(184565),U=n(221009),B=n(610110),V=n(166433),G=n(411856),H=n(494858),W=n(629019),K=n.n(W),Y=n(991458),$=n(488527),j=n(258282),z=n(675303);function q(e){let r;let n=(0,i.d4)(e=>!!e.modalShown),o=(0,Y.jz)($.P4e);return r=e.offscreen?"translateY(100vh)":`translateY(-${o}px)`,a.createElement("div",{"aria-hidden":n,className:K()({[z.E3]:!0,[z.Oy]:!0,[j.Q]:e.srOnly}),style:{transform:r}},e.children)}var Z=n(194799);function X(e){let{livegraphData:r}=e,n=(0,w.mr)(),s=(0,i.d4)(e=>e.prototype),l=(0,i.d4)(e=>e.multiplayer),_=(0,i.d4)(e=>e.user),g=(0,i.wA)();a.useEffect(()=>(document.body.classList.add(Z.$7),()=>{document.body.classList.remove(Z.$7)}),[]);let f=(0,S.Yi)(n),b=(0,c.l7)()&&!(0,c.br)(),I=s.showComments&&!f&&!b,[A,C]=a.useState(null);(0,G.kZ)();let N=(0,G.l1)(A,n,e.scalingInfo,l,e.showHotspots,e.showDeviceFrame,I,s,_,"design"),[L,R]=a.useState(!1);a.useEffect(()=>{"prototype"===n.view&&N&&R(!0)},[N,n.view]);let P=a.useRef(!1);a.useEffect(()=>{(async()=>{if(n.file.key&&!P.current&&o.v.getFeatureGate("viewer_use_compressed_textures")&&o.v.getFeatureGate("viewer_generate_compressed_textures")&&(0,p.x2)()&&(u.Ay.ios||u.Ay.android||u.Ay.mac&&navigator.maxTouchPoints>0))try{await h.Ay.post(`/file/${n.file.key}/generate_compressed_textures`),P.current=!0}catch(e){(0,m.xi)("image","Failed to generate compressed textures",{fileKey:n.file.key,error:e})}})()},[n.file]);let D=(0,d.useAtomValue)(V.Md),k=r?r.file.key:"",F=a.useRef(!1);return a.useEffect(()=>{!F.current&&D.status===V.z2.LOADED&&n.share&&""!==k&&_&&(g((0,E.to)({type:U.g_,data:{fileKey:k,source:T.nk.fullscreenToolbar}})),F.current=!0)},[D.status,n.share,g,k,_]),(0,B.lF)(),a.createElement(a.Fragment,null,r&&(0,y.T8)(a.createElement(a.Fragment,null,a.createElement(x.A,null),a.createElement(M.Yp,{file:r.file,isCommentsMode:I,scalingInfo:e.scalingInfo,showHotspots:e.showHotspots,showPrototypeOptions:!0,showDeviceFrame:e.showDeviceFrame,org:e.org,recordingKey:"prototypeView",viewer:N,viewerElement:A,setViewerElement:C})),O.e0.PROTOTYPE,(0,v.oP)(r.file)),L&&!!N&&a.createElement(H.z,{viewer:N,entry:n.inlinePreview?"Preview":"Prototype"}))}function J(){let e=(0,w.mr)(),r=(0,i.d4)(e=>e.prototype),n=(0,i.d4)(e=>e.flashes),o=(0,i.d4)(e=>e.user),d=(0,i.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),m=(0,i.d4)(e=>e.interactionTestDialogShown),p=a.useRef(null),h=(0,c.f3)(),E=(0,b.Z)(h||"dark",p,e,!0),y=(0,G.PG)(e);if((0,D.d)())return a.createElement(D.O,null);let v=null==e.showHotspots||e.showHotspots,T=null==e.showDeviceFrame||e.showDeviceFrame;return a.createElement(N.uW.Provider,{value:E},a.createElement(P.K,{recordingKey:"inAppPage",containerRef:p},u.nW&&o&&!(0,l.GZ)()&&a.createElement(_.R,{userIdForTracking:o?.id,isCompact:!0}),a.createElement(X,{scalingInfo:(0,C.M9)(e),showHotspots:v,showDeviceFrame:T,org:d,livegraphData:y}),!(0,c.jc)()&&(!y||r.showProgressBar)&&a.createElement(k.z2,{editorType:A._Y.DESIGN,isViewer:!0,progressBarMode:s.Oin.HIDE_UI}),a.createElement(g.a,{flashes:n}),a.createElement(R.V,null),a.createElement(f.Z,{positioner:q}),a.createElement(F.hG,null),m&&null,a.createElement(L.d,null,a.createElement(I.Ji,null))))}},43262:(e,r,n)=>{n.d(r,{Gv:()=>p,Uj:()=>u,ak:()=>m,iy:()=>h});var a,i=n(411855),o=n(326612),s=n(629019),l=n.n(s),c=n(140835),d=n(342647);let u=i.createContext(void 0);function m(e){return i.createElement("div",{className:l()(d.Qs,e.className)},e.children)}function p(e){let r={width:"300px"};return e.width&&("number"==typeof e.width?r.width=`${e.width}px`:r.width=e.width),e.height&&(r.height=e.height),e.margin&&(r.margin=e.margin),i.createElement(u.Consumer,null,n=>i.createElement("div",{className:l()(d.Dg,e.containerClassName)},i.createElement("img",{src:e.src,style:r,onLoad:n,alt:e.alt})))}function h(e){return i.createElement("div",{className:e.className?e.className:d.qr},e.children)}(a||(a={})).Content=function(e){return i.createElement("div",{className:e.className||d.xC,style:e.style},e.children)},(0,c.tf)(e=>i.createElement(o.N,{newTab:!0,trusted:!0,href:e.href,onClick:e.onClick},e.children))},244746:(e,r,n)=>{var a=n(411855),i=n(188507);n(217950),n(629019),n(609628),n(336427),n(728722),n(550479),n(918091),n(621847),n(403614),n(693565),n(265851);var o=n(76265);n(553362),n(960579),n(728764),n(342221),n(47795),n(185860);var s=n(736041);n(241162),n(73041),n(343373),n(353428),n(125682),n(176160),n(314540),n(183739),n(487388),n(324225),n(688656);var l=n(710636);n(69398),n(638784),n(90148),n(991944),n(574431);var c=n(303596),d=n(142420);(0,l.Ju)(function(){let e=(0,i.wA)();return a.createElement(c.OA,{targetKey:d.v4,title:"",dismissModal:()=>{e(s.AS())},ctaText:(0,o.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:()=>{e(s.AS())},width:268},a.createElement("p",{className:"move_drafts_nudge_rcs_steps--bodyWithoutTitle--H7oik"},(0,o.tx)("rcs.move_drafts_nudge.now_that_you_ve_moved_this_file_to_projects_your_teammates_can_edit_and_collaborate_with_you")))},"MoveDraftsFeedbackModal")},931095:(e,r,n)=>{n.d(r,{x:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(724418);class l extends a.Component{componentDidMount(){this.interval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.interval)}render(){let e=document.querySelector(`[data-onboarding-key=${this.props.target}]`);if(!e)return a.createElement("div",null);{let r=e.getBoundingClientRect();if(!e.offsetParent)return a.createElement("div",null);let n=r.left+r.width/2,i=r.top+r.height/2,l=o()(s.xl,{[s.Df]:this.props.isBrandColor});return a.createElement("div",{className:l,style:{top:i,left:n}})}}}l.displayName="RcsCallout"},142420:(e,r,n)=>{n.d(r,{G8:()=>o,ao:()=>i,oi:()=>s,v4:()=>a});let a="share",i={key:"figjamTrySave",value:"1"},o="FULLSCREEN_FILENAME_CONTAINER";var s=(e=>(e.PAN="PAN_PREFERENCE_ONBOARDING_KEY",e.ZOOM="ZOOM_PREFERENCE_ONBOARDING_KEY",e))(s||{})},607529:(e,r,n)=>{n.d(r,{LN:()=>a,No:()=>c,_L:()=>i,q3:()=>l});var a=(e=>(e.TOP_RIGHT="top-right",e.CENTER="center",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(a||{}),i=(e=>(e.LEFT_TITLE="left_title",e.RIGHT_TITLE="right_title",e))(i||{}),o=(e=>(e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.RIGHT_TITLE=2]="RIGHT_TITLE",e[e.RIGHT_BODY=3]="RIGHT_BODY",e[e.LEFT_TITLE=4]="LEFT_TITLE",e))(o||{}),s=(e=>(e.FALLBACK="fallback",e.BEST_EFFORT="best_effort",e))(s||{}),l=(e=>(e.DRAGGABLE="draggable",e.FEATURE_UPDATE="feature_update",e.WELCOME="welcome",e.SELF_CONTAINED="self_contained",e.WALK_THROUGH="walk_through",e.ANNOUNCEMENT_POINTER="announcement_pointer",e.POINTER="pointer",e))(l||{});let c=740;var d=(e=>(e.ON_DARK="on_dark",e.ON_LIGHT="on_light",e.HIGH_CONTRAST="high_contrast",e.HIDDEN="hidden",e))(d||{})},621500:(e,r,n)=>{n.d(r,{i:()=>L});var a=n(411855),i=n(199953),o=n(471923),s=n(266838),l=n(556843),c=n(991458),d=n(746643),u=n(612724),m=n(179201),p=n(39890),h=n(265851),_=n(773991),g=n(489803),f=n(140835),E=n(190500),y=n(991944),b=n(303596),v=n(43262),T=n(931095),I=n(607529),S=n(342647),w=n(488527);let A=(0,c.hG)(w.tui),C=(0,c.hG)(w.IKB),N=e=>null!==e?e:void 0;class L extends a.Component{constructor(e){super(e),this.renderIfDocumentComplete=()=>{"complete"===document.readyState&&this.forceRender()},this.getRcsKeyElementInterval=null,this.startScanningForRcsKeyElement=()=>{this.cleanUpRcsKeyElementScanner();let e=this.props.step;if(e.modalType===I.q3.DRAGGABLE){if(!e.onboardingKey){this.setState({rcsKeyLocation:null});return}this.getRcsKeyElementInterval=setInterval(()=>{let e=this.getRcsKeyElement();if(null!=e){let r=this.computeLocation(e.getBoundingClientRect());(null==this.state.rcsKeyLocation||this.state.rcsKeyLocation.top!==r.top||this.state.rcsKeyLocation.left!==r.left)&&this.setState({rcsKeyLocation:r})}else this.setState({rcsKeyLocation:null})},50)}},this.cleanUpRcsKeyElementScanner=()=>{null!=this.getRcsKeyElementInterval&&(clearInterval(this.getRcsKeyElementInterval),this.getRcsKeyElementInterval=null)},this.acceptHeight=e=>this.setState({modalHeight:e}),this.button=null,this.nextButtonRef=e=>{e&&(this.button=e,this.focusButton())},this.focusButton=()=>{this.button&&!this.props.step.UNSAFE_disableFocus&&this.button.focus()},this.computeLocation=e=>{let r=this.props.step;if(r.modalType!==I.q3.DRAGGABLE)return{top:null,left:null,arrowRelativeX:null,arrowRelativeY:null,arrowPosition:null};if(r.pointDirection===I._L.LEFT_TITLE){let r=e.top+e.height/2;return{left:e.left+e.width+16,top:r-20,arrowRelativeX:-18,arrowRelativeY:y.uF/2-9,arrowPosition:y.F_.LEFT_TITLE}}if(r.pointDirection===I._L.RIGHT_TITLE){let r=e.top+e.height/2,n=e.left-this.width-16,a=y.uF/2-9;return{left:n,top:r-20,arrowRelativeX:this.width,arrowRelativeY:a,arrowPosition:y.F_.RIGHT_TITLE}}let n=e.left+e.width/2,a=e.bottom+18,i=n-this.width/2,o=n-(i=Math.min(i=Math.max(i,10),window.innerWidth-10-this.width)),s=y.F_.TOP;return null!=this.state.modalHeight&&window.innerHeight-a<this.state.modalHeight+12&&(a=e.top-this.state.modalHeight-12,s=y.F_.BOTTOM),{left:i,top:a,arrowRelativeX:o,arrowRelativeY:null,arrowPosition:s}},this.getFramePosition=()=>this.state.rcsKeyLocation?this.state.rcsKeyLocation:{top:null,left:null,arrowPosition:null,arrowRelativeX:null,arrowRelativeY:null},this.getRcsKeyElement=()=>{let e=this.props.step;if(e.modalType!==I.q3.DRAGGABLE)return null;let r=document.querySelector(`[data-onboarding-key=${e.onboardingKey}]`);if(!r)return null;let n=r.getBoundingClientRect();return 0===n.left&&0===n.right&&0===n.height&&0===n.width?null:r},this.acceptTitle=e=>{this.setState({title:e,titleSetByStep:this.props.step})},this.forceRender=()=>this.setState({renderCount:this.state.renderCount+1}),this.getPositionAndConstraints=(e,r)=>{let n=this.getFramePosition();if(n.top&&n.left)return{initialPosition:new u.Mi(n.left,n.top)};switch(e){case I.LN.BOTTOM_LEFT:return{initialPosition:r||new u.Mi(C,C),initialConstraints:{x:"left",y:"bottom"}};case I.LN.BOTTOM_RIGHT:return{initialPosition:r||new u.Mi(m.lc,16),initialConstraints:{x:"right",y:"bottom"}};case I.LN.TOP_RIGHT:return{initialPosition:r||new u.Mi(C,A+C),initialConstraints:{x:"right",y:"top"}};case I.LN.CENTER:default:return{initialPosition:r||new u.Mi(window.innerWidth/2-this.width/2,window.innerHeight/2-this.height/2)}}},this.state={modalHeight:328,rcsKeyLocation:null,renderCount:0}}componentDidMount(){window.addEventListener("beforeunload",this.props.onClose),this.startScanningForRcsKeyElement(),document.addEventListener("readystatechange",this.renderIfDocumentComplete)}componentWillUnmount(){this.props.onClose(),window.removeEventListener("beforeunload",this.props.onClose),document.removeEventListener("readystatechange",this.renderIfDocumentComplete),this.cleanUpRcsKeyElementScanner()}componentDidUpdate(e,r){this.focusButton();let n=this.props.step;if(n.modalType!==I.q3.DRAGGABLE)return;let a=e.step;(a.modalType!==I.q3.DRAGGABLE||n.onboardingKey&&n.onboardingKey!==a.onboardingKey)&&this.startScanningForRcsKeyElement()}get width(){let e=this.props.step;switch(e.modalType){case I.q3.FEATURE_UPDATE:return e.width||I.No;case I.q3.DRAGGABLE:return e.width||350;default:return 350}}get height(){return this.state.modalHeight||328}static getDerivedStateFromProps(e,r){return e.step!==r.titleSetByStep?{title:void 0,titleSetByStep:void 0}:{}}render(){let e=this.props.step,r=this.getFramePosition(),n={acceptTitle:this.acceptTitle,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,forceRender:this.forceRender},o=a.createElement(v.Uj.Provider,{value:this.forceRender},a.createElement(e.element,{...n}));return(0,f.T8)((()=>{switch(e.modalType){case I.q3.DRAGGABLE:let{initialPosition:n,initialConstraints:s}=this.getPositionAndConstraints(e.defaultLocation,e.initialPosition),l=e.title instanceof Function?e.title():e.title,c=this.state.title||l,u=e.onboardingKey||e.highlightOnlyKey;return a.createElement(a.Fragment,null,u&&!e.disableHighlight&&a.createElement(T.x,{target:u}),a.createElement(y.vx,{initialWidth:this.width,acceptHeight:this.acceptHeight,title:c,initialPosition:n,initialConstraints:s,arrowRelativeX:e.hideArrow?void 0:N(r.arrowRelativeX),arrowRelativeY:e.hideArrow?void 0:N(r.arrowRelativeY),arrowPosition:e.hideArrow?void 0:N(r.arrowPosition),animatedIn:!0,dragHeaderOnly:!!c,onClose:this.props.dismissModal,headerClassName:e.headerClassName,zIndex:e.zIndex,disableDragging:e.disableDragging},o,e.disableFooter?null:a.createElement(v.iy,{className:e.footerClassName},!e.hideStepCounter&&e.stepCounter&&a.createElement("div",{className:S.S},e.stepCounter),a.createElement("div",{className:S.v0},e.additionalButton&&a.createElement("div",{className:h.s.ml8.$},a.createElement(P,{additionalButton:e.additionalButton,dismissModal:this.props.dismissModal,dispatch:this.props.dispatch})),a.createElement("div",{className:h.s.ml8.$},a.createElement(_.$z,{ref:this.nextButtonRef,onClick:this.props.onClickPrimaryCta,trackingProperties:{trackingDescriptor:e.ctaTrackingDescriptor},disabled:!!e.ctaIsLoading},a.createElement(p.x,{isLoading:!!e.ctaIsLoading,className:S.zP},()=>a.createElement("div",null,e.ctaText))))))));case I.q3.FEATURE_UPDATE:return a.createElement(O,{width:this.width,onAdditionalExplicitDismiss:this.props.additionalOnExplicitDismiss,onDismissModal:this.props.dismissModal},o);case I.q3.WALK_THROUGH:return a.createElement(a.Fragment,null,!e.disableHighlight&&a.createElement(T.x,{target:e.onboardingKey}),a.createElement(b.CR,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,height:e.height,width:e.width,pointerForegroundColor:e.pointerForegroundColor,shouldCenterArrow:e.shouldCenterArrow,topPadding:e.topPadding,className:e.className,shouldDismissWhenLostDOMTarget:e.shouldDismissWhenLostDOMTarget,additionalOnExplicitDismiss:this.props.additionalOnExplicitDismiss,hideCloseButton:e.hideCloseButton,disableClickOutsideToHide:e.disableClickOutsideToHide},o));case I.q3.WELCOME:return a.createElement(a.Fragment,null,e.fullscreen&&a.createElement("div",{className:S.qg}),a.createElement(R,{onDismissModal:this.props.dismissModal},a.createElement(i.i,null,o)));case I.q3.SELF_CONTAINED:return o;case I.q3.POINTER:return a.createElement(a.Fragment,null,e.showHighlight&&a.createElement(T.x,{target:e.onboardingKey}),a.createElement(b.NJ,{dismissModal:this.props.dismissModal,targetKey:e.onboardingKey,width:e.width,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,shouldNotWrapInParagraphTag:e.shouldNotWrapInParagraphTag,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost},o));case I.q3.ANNOUNCEMENT_POINTER:let m=e.title instanceof Function?e.title():e.title;return a.createElement(b.OA,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,title:m,bottomLeftText:e.stepCounter,ctaText:e.ctaText,onClickPrimaryCta:this.props.onClickPrimaryCta,secondaryCtaText:e.secondaryCtaText,onClickSecondaryCta:e.preventDismissOnClickSecondaryCta?d.lQ:this.props.dismissModal,width:e.width,topPadding:e.topPadding,shouldCenterModal:e.shouldCenterModal,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition},o)}})(),e.trackingContextName,e.trackingProperties,e.trackingEnabled)}}function O({children:e,width:r,onAdditionalExplicitDismiss:n,onDismissModal:i}){let c=(0,f.j6)(),d=a.useCallback(({source:e})=>{if("button"===e){let e=c.name;(0,E.Cu)({...c.properties,...null!=e?{trackingContext:e}:{},text:"Close"})}n?.(),i()},[n,i,c]),u=o.hS({open:!0,onClose:d});return a.createElement(s.bL,{manager:u,width:r??"fit-content"},a.createElement(l.vo,null,a.createElement(l.nB,{padding:0},e)))}function R({children:e,onDismissModal:r}){let n=o.hS({open:!0,onClose:r,preventUserClose:!0});return a.createElement(s.bL,{manager:n,width:"fit-content"},a.createElement(l.vo,null,a.createElement(l.nB,{padding:0},e)))}function P({additionalButton:e,dismissModal:r,dispatch:n}){if(!e)return null;let i=e.textForTracking?{text:e.textForTracking()}:{};return"link"===e.onClickBehavior?a.createElement(g.pW,{href:e.href,variant:"secondary",trackingProperties:i,newTab:!0},e.label):a.createElement(_.$z,{onClick:()=>{e.onClick(n),r()},trackingProperties:i,variant:"secondary"},e.label)}L.displayName="RcsFrame"},898268:(e,r,n)=>{n.d(r,{z:()=>c});var a=n(411855),i=n(254773),o=n(868292),s=n(76265),l=n(10175);function c({clientType:e}){let r=(0,i.U)();(0,a.useEffect)(()=>{let n=Date.now();return()=>{let a=Date.now()-n;r("reconnecting_modal_shown",{msElapsed:a,clientType:e}),a>1e3&&(0,o.B3)(e)}},[e,r]);let n=`${l.hd} ${l.ME}`;return a.createElement("div",{className:n},a.createElement("div",{className:l.nw},(0,s.tx)("reconnecting_modal.loading")))}},472944:(e,r,n)=>{n.d(r,{Qv:()=>b,RO:()=>y,we:()=>E});var a=n(411855);n(109388),n(188507),n(805014),n(851169),n(245459),n(245954);var i=n(629019),o=n.n(i);n(777535);var s=n(991458);n(841962),n(875877),n(666308),n(563192),n(663844);var l=n(76265),c=n(648800);n(888807);var d=n(758133),u=n(623962);n(754807),n(481954),n(366172),n(923219);var m=n(748973);n(125682),n(30057),n(192773),n(263474),n(200047),n(505105);var p=n(471340);n(76237),n(453783);var h=n(737139),_=n(488527),g=n(475047);let f=2*(0,s.hG)(_.dGl);function E({selectedStyleProperties:e,snug:r}){let[n,i]=a.useState(!1),s=e.styleType,l="TEXT"===s,m="FILL"===s,p="dark"===(0,d.DP)(),{containerClassName:_,previewClassName:E}=a.useMemo(()=>({containerClassName:o()({[g.$9]:l,[g.vL]:!n&&m,[g.mj]:n&&m,[g.ig]:!l&&!m,[g.E7]:r}),previewClassName:o()({[g.Lq]:!n,[g.s1]:n,[g.Gv]:!0,[g.Pj]:l,[g.SI]:l&&p,[g.hj]:m})}),[n,l,m,p,r]),y=a.useMemo(()=>{let e={};if(e.backgroundImage=`url('${(0,u.A)()}')`,!l)return m?n?e:void 0:e},[n,l,m]);return a.createElement(c.Y,{spacing:0,height:"hug-contents",padding:{left:m&&!r?f:0,right:m&&!r?f:0,top:m&&!r?f:0,bottom:r?0:f},verticalAlignItems:"start"},a.createElement("div",{style:y,className:_},e.url?a.createElement("img",{src:e.url,className:E,alt:"",onLoad:()=>{i(!0)}}):a.createElement(h.zi,{dsStyle:{style_type:e.styleType}})))}function y({recordingKey:e}){let r=(0,m.b)("styleType");return a.createElement(a.Fragment,null,"FILL"===r&&a.createElement(p.B8,{key:"fill",recordingKey:e,shouldUseSelectedStyleProperties:!0}),"GRID"===r&&a.createElement(p.tC,{key:"grids",shouldUseSelectedStyleProperties:!0,recordingKey:e}),"TEXT"===r&&a.createElement(p.gc,{key:"type",shouldUseSelectedStyleProperties:!0,recordingKey:e}),"EFFECT"===r&&a.createElement(p.w5,{key:"effects",shouldUseSelectedStyleProperties:!0,recordingKey:e}))}function b(e){switch(e){case"FILL":return(0,l.t)("design_systems.create_style.placeholder_name_color");case"TEXT":return(0,l.t)("design_systems.create_style.placeholder_name_text");case"EFFECT":return(0,l.t)("design_systems.create_style.placeholder_name_effect");case"GRID":return(0,l.t)("design_systems.create_style.placeholder_name_grid");default:return(0,l.t)("design_systems.create_style.placeholder_name_create_new_style_generic")}}(0,s.hG)(_.wQn)},342535:(e,r,n)=>{n.d(r,{Cj:()=>A});var a=n(411855),i=n(729064),o=n(629019),s=n.n(o),l=n(991458),c=n(866415),d=n(746643),u=n(621847),m=n(411728),p=n(506989),h=n(663844),_=n(265851),g=n(910164),f=n(140835),E=n(580034),y=n(412229),b=n(647186),v=n(792882),T=n(488527),I=n(950142);class S extends a.PureComponent{render(){let e=this.props.isReversed?"\u2191":"\u2193";return a.createElement("div",{className:`${b.LI} ${this.props.className||""}`,onClick:this.props.onClick,"data-onboarding-key":this.props.onboardingKey},this.props.nameElement?this.props.nameElement:this.props.name,this.props.isSelected&&a.createElement("div",{className:v.UE},e),this.props.extraContent)}}S.displayName="MultiSelectHeader";let w=(0,l.hG)(T.B6G);class A extends a.Component{constructor(e){super(e),this.rangeSelectAnchorRowKey=null,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequest=null},this.onScroll=e=>{this.nextScrollTop=e,null==this.frameRequest&&(this.frameRequest=requestAnimationFrame(this.setScrollTopState)),this.props.onScroll&&this.props.onScroll()},this.itemKeys=(0,c.xx)((e,r)=>e.map(e=>r(e))),this.selectableItemKeys=()=>{let e=this.itemKeys(this.props.items,this.props.getItemKey);return this.props.unselectableItemKeys?e.filter(e=>!this.props.unselectableItemKeys?.has(e)):e},this.toggleSelectMultiple=(e,r,n=!1)=>{this.rangeSelectAnchorRowKey=null;let a=this.props.onSelectedItemsChange??d.lQ;if(r){if(n)this.setState({selectedItemKeys:new Set,selectedAll:!1}),a([]);else{let r=new Set(this.state.selectedItemKeys);e.forEach(e=>r.delete(e)),this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll})),a(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}}else{let r=new Set([...e,...this.state.selectedItemKeys]);this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll||n})),a(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}},this.isItemSelected=e=>{let r=this.props.getItemKey(e);return this.state.selectedItemKeys.has(r)&&!this.props.unselectableItemKeys?.has(r)},this.toggleSelect=e=>{let r=this.props.getItemKey(e);if(this.props.unselectableItemKeys?.has(r))return;let n=new Set(this.props.singleSelect?[]:this.state.selectedItemKeys);this.rangeSelectAnchorRowKey=r,this.isItemSelected(e)?n.delete(r):n.add(r),this.setState({selectedItemKeys:n}),this.props.onSelectedItemsChange&&this.props.onSelectedItemsChange(this.filterToSelected(this.props.items,n,this.props.unselectableItemKeys,this.props.getItemKey))},this.selectRowsInRange=(e,r,n)=>{if(e===r)return;let a=this.props.items.map(e=>this.props.getItemKey(e)).filter(e=>!this.props.unselectableItemKeys?.has(e)),i=a.indexOf(e),o=a.indexOf(r);if(-1===i||-1===o)return;let s=Math.min(i,o),l=Math.max(i,o),c=a.slice(s,l+1);n?this.toggleSelectMultiple(c,!0):this.toggleSelectMultiple(c,!1)},this.onRowClick=(e,r)=>{let n=this.props.getItemKey(r);if(!this.props.unselectableItemKeys?.has(n)){if(e.shiftKey&&!this.props.singleSelect){let e;if(1===this.state.selectedItemKeys.size?e=[...this.state.selectedItemKeys][0]:this.rangeSelectAnchorRowKey&&(e=this.rangeSelectAnchorRowKey),e&&e!==n){let r=this.state.selectedItemKeys.has(n);this.selectRowsInRange(e,n,r),this.rangeSelectAnchorRowKey=n;return}}this.toggleSelect(r)}},this.isFirstInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let a=this.props.items[e-1];if(!a)return!0;let i=this.props.getItemKey(a);return!this.state.selectedItemKeys.has(i)},this.isLastInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let a=this.props.items[e+1];if(!a)return!0;let i=this.props.getItemKey(a);return!this.state.selectedItemKeys.has(i)},this.rowWithCheckbox=(e,r,n)=>{let i=this.isItemSelected(e),o=this.props.getItemKey(e),l=s()(v.sM,this.props.styleOverrideClassNames?.unselectedCheckbox),c=this.props.itemBasedStyleOverride?this.props.itemBasedStyleOverride(e):void 0,u=s()(v.nM,this.props.styleOverrideClassNames?.row,c?.row),p=s()(this.props.styleOverrideClassNames?.selectedRow,c?.selectedRow),h=this.props.unselectableItemKeys?.has(o)?null:a.createElement(m.y,{className:i?void 0:l,allChecked:i,someChecked:!1,"data-onboarding-key":i?"msl_selected_row_onboarding_key":void 0,"data-testid":"multi-select-list-select-item-checkbox",onChange:e=>{}}),_=e.tooltipText,g=[];return this.props.shouldRoundBordersForSelectedRows&&(g.push(v.uH),i&&!this.isFirstInSelectedGroup(n)&&g.push(v.BA),i&&!this.isLastInSelectedGroup(n)&&g.push(v.D)),a.createElement(y.iA,{className:s()(v.nM,u,i?p:void 0,...g,{[v.I6]:o===this.props.highlightState?.itemKey}),selected:i,key:o,onClick:r=>this.onRowClick(r,e),tooltipText:_,useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,dataTestId:"multi-select-list-table-trackable-row"},!this.props.noCheckboxColumn&&a.createElement("div",{className:s()(v.E0,this.props.styleOverrideClassNames?.checkboxColumn)},h),this.props.columns.map(i=>a.createElement("div",{className:i.className,key:i.name},i.cellComponent(e,r,this.props.highlightState??{itemKey:null,setItemKey:d.lQ},n))))},this.renderLoadingRow=e=>{let r=0;return e<2?r=1:e<10&&(r=1-(e-2+1)/9),a.createElement("div",{key:e,style:{opacity:r},"data-testid":"multi-select-list-loading-row"},a.createElement(y.iA,{className:s()(v.nM,this.props.styleOverrideClassNames?.row),useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,dataTestId:"multi-select-list-table-loading-row"},!this.props.noCheckboxColumn&&a.createElement("div",{className:s()(v.E0,this.props.styleOverrideClassNames?.checkboxColumn)}),this.props.columns.map((r,n)=>r.name?a.createElement("div",{className:r.className,key:r.name},r.loadingComponent?r.loadingComponent:a.createElement("div",{style:g.sx.add({width:`${50*Math.abs(Math.sin(e+n+1))+30}%`}).$},a.createElement(p.Wi,{className:_.s.h12.$,animationType:p.JR.SHIMMER}))):a.createElement("div",{key:r.name,className:s()(_.s.wFull.$,r.className)}))))},this.filterToSelected=(0,c.xx)((e,r,n,a)=>e.filter(e=>r.has(a(e))&&!n?.has(a(e)))),this.state={scrollTop:0,selectedItemKeys:new Set,selectedAll:!1},this.stickBannerRef=a.createRef(),this.scrollContainerRef=a.createRef()}componentDidUpdate(e,r){if(e.sortState.columnName!==this.props.sortState.columnName||e.sortState.isReversed!==this.props.sortState.isReversed||e.items.length!==this.props.items.length){if(this.rangeSelectAnchorRowKey=null,(e.isLoading||this.props.isLoading)&&e.items.length<this.props.items.length&&this.state.selectedAll){let r=this.props.items.slice(e.items.length).map(e=>this.props.getItemKey(e));this.setState(e=>({selectedItemKeys:new Set([...e.selectedItemKeys,...r])}))}this.props.isLoading&&0===this.props.items.length&&this.state.selectedAll&&(this.setState({selectedItemKeys:new Set,selectedAll:!1}),this.props.onToggleSelectAll?.(!0))}}onHeaderClick(e){this.props.onSetSortState(e)}renderColumnHeaders(e){let r=e.length===this.selectableItemKeys().length,n=e.length>0,i=0===e.length;return a.createElement(y.Hj,{header:!0,useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,className:s()(this.props.disabled?v.eO:v.U1,this.props.styleOverrideClassNames?.header),dataTestId:"multi-select-list-table-header-row"},!this.props.noCheckboxColumn&&a.createElement("div",{className:s()(v.E0,this.props.styleOverrideClassNames?.checkboxColumn)},this.selectableItemKeys().length>0&&!this.props.selectAllDisabled&&a.createElement(m.y,{allChecked:r,"data-onboarding-key":"msl_header_toggle_select_all_onboarding_key",someChecked:n,onChange:()=>{i?(this.toggleSelectMultiple(this.selectableItemKeys(),!1,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!1)):(this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0))},"data-testid":"multi-select-list-select-all-checkbox"})),this.props.columns.map(e=>a.createElement("div",{className:e.className,key:e.name},a.createElement(S,{className:e.headerClassName,extraContent:e.headerExtraContent,name:e.name,nameElement:e.nameElement,isReversed:this.props.sortState.isReversed,isSelected:e.sorting_key?e.sorting_key===this.props.sortState.columnName:e.name===this.props.sortState.columnName,onClick:e.getSortValue?()=>this.onHeaderClick(e.sorting_key??e.name):void 0,onboardingKey:e.onboardingKey}))))}render(){let e=this.filterToSelected(this.props.items,this.state.selectedItemKeys,this.props.unselectableItemKeys,this.props.getItemKey),r=this.props.isBannerHeightDynamic?{top:this.stickBannerRef?.current?.getBoundingClientRect()?.height||0}:void 0,n=this.props.isLoading&&0===this.props.items.length,i=this.props.trackingProperties?this.props.trackingProperties.batchAction:{};return a.createElement(a.Fragment,null,a.createElement(N,{anyVisibleAndSelectedItems:e.length>0,highlightState:this.props.highlightState}),a.createElement("div",{className:s()(v.wY,{[v.TH]:this.props.hasNewScrollContext},this.props.styleOverrideClassNames?.tableWrapper)},a.createElement(h.P,{className:v.jG,innerClassName:s()(v.NM,this.props.scrollContainerInnerClassName),onScroll:this.onScroll,minContentWidth:this.props.minContentWidth||(0,l.hG)(T.fAD),scrollContainerRef:this.scrollContainerRef,scrollContentRef:this.props.scrollContentRef,scrollingDisabled:n,horizontalScrollingDisabled:this.props.hasNewScrollContext,scrollBarAlways:this.props.scrollBarAlwaysVisible},a.createElement(a.Fragment,null,a.createElement("div",{ref:this.stickBannerRef,className:v.ln},this.props.stickyBanner),a.createElement("div",null,this.props.scrollAwayContent),a.createElement("div",{className:void 0!==this.props.stickyBanner?v.T3:v.ln,style:r},a.createElement(f.fu,{name:"MultiSelectList Header",trackingTargets:E.K.NONE,properties:{tableType:this.props.itemTypeContext.itemType}},this.props.stickyContent),!this.props.hideHeader&&this.renderColumnHeaders(e)),0===this.props.items.length&&!this.props.isLoading&&a.createElement("div",{className:v.p$},this.props.emptyContent),a.createElement(f.fu,{name:"MultiSelectList - Row",trackingTargets:E.K.RCS,properties:{tableType:this.props.itemTypeContext.itemType}},a.createElement(C,{totalLoaded:this.props.items.length,isLoading:!!this.props.isLoading,disabled:!!this.props.disabled,renderLoadingRow:e=>this.renderLoadingRow(e),renderItem:r=>this.rowWithCheckbox(this.props.items[r],e.length>0,r),scrollContainerRef:this.scrollContainerRef,onFetchMore:this.props.onFetchMore,rowHeight:this.props.rowHeightOverride??w,paddingEnd:this.props.paddingEnd||32})))),this.props.actionBar&&a.createElement(f.fu,{name:"MultiSelectList BatchAction",trackingTargets:E.K.RCS,properties:{selectedAll:this.state.selectedAll,selectedCount:e.length,...i}},a.createElement("div",{className:e.length>0?v._Z:v.KY,"data-testid":"multi-select-list-action-bar"},a.createElement("div",{className:s()(e.length>0?v.SB:v.cr,this.props.actionBarClassName)},a.createElement("div",{className:v.SM},this.props.itemTypeContext.getSelectedCountString(this.props.getTotalSelected?this.props.getTotalSelected(e,this.selectableItemKeys()):e.length)),this.props.actionBar(e),a.createElement(u.RW,{className:s()(v.Ym,this.props.styleOverrideClassNames?.batchActionClearButton),svg:I.A,onClick:()=>{this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0)},trackingProperties:{action:"Clear Selection"}}))))),this.props.footer&&this.props.footer(e))}}function C({totalLoaded:e,isLoading:r,disabled:n,renderItem:o,renderLoadingRow:s,scrollContainerRef:l,onFetchMore:c,rowHeight:d,paddingEnd:u}){let m=a.useCallback(()=>d,[d]),{virtualItems:p,totalSize:h}=(0,i.z)({size:r||c?e+10:e,parentRef:l,overscan:15,estimateSize:m,paddingEnd:u||32});return a.useEffect(()=>{let r=p[p.length-1];e&&c&&r?.index>=e-1&&c()},[c,e,p]),a.createElement("div",{className:`${n?v.ry:v.jm}`,style:{height:h}},p.map(r=>a.createElement("div",{key:r.index,style:{position:"absolute",top:r.start,left:0,width:"100%",height:r.size}},r.index>=e?s(r.index-e):o(r.index))))}function N(e){let{anyVisibleAndSelectedItems:r,highlightState:n}=e;return a.useLayoutEffect(()=>{r&&n?.itemKey&&(0,n.setItemKey)(null)},[r,n?.itemKey,n?.setItemKey]),null}A.displayName="MultiSelectList"},542231:(e,r,n)=>{n.d(r,{W:()=>c});var a=n(411855),i=n(408648),o=n(494263),s=n(10915),l=n(291619);function c(e){return a.createElement(d,{tabs:e.tabs,left:e.left,center:e.center,hideToolBarOnMobile:e.hideToolBarOnMobile,resetTileSelectionOnMouseDown:e.resetTileSelectionOnMouseDown,centerFullWidth:e.centerFullWidth,collapseSidebarOnTabletView:e.collapseSidebarOnTabletView,containerClassName:e.containerClassName||l.Jw,showDividerBeforeTabIndex:e.showDividerBeforeTabIndex})}function d(e){return a.createElement(a.Fragment,null,a.createElement(o.i,{tabs:e.tabs,center:e.center,hideToolBarOnMobile:e.hideToolBarOnMobile,collapseSidebarOnTabletView:e.collapseSidebarOnTabletView}),a.createElement(i.Y,{tabs:e.tabs,left:e.left,center:e.center,resetTileSelectionOnMouseDown:e.resetTileSelectionOnMouseDown,centerFullWidth:e.centerFullWidth,collapseSidebarOnTabletView:e.collapseSidebarOnTabletView,containerClassName:e.containerClassName,showDividerBeforeTabIndex:e.showDividerBeforeTabIndex}))}d.propTypes={tabs:(e,r,n)=>{let a=e[r];if(!a)return null;if(a.some(e=>e.type.WrappedComponent.name!==s.pG))throw Error(`${r} of ${n} must be a list of elements created from calling ToolBarTabContainer`);return null}}},10915:(e,r,n)=>{n.d(r,{pG:()=>f,rw:()=>y});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(47795),c=n(464960),d=n(929717),u=n(559760),m=n(291619),p=(e=>(e.DEFAULT="default",e.ADMIN_SETTINGS="adminSettings",e))(p||{});class h extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:m.zP})}}class _ extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:m.NQ,selected:m.xW})}}class g extends a.PureComponent{constructor(e){super(e),this.shouldShowDropdown=()=>!!(this.props.dropdownKey&&this.props.dropdownShown&&this.props.dropdownShown.type===this.props.dropdownKey&&this.props.dropdownShown.data&&this.props.dropdownShown.data.targetRect),this.toggleDropdown=()=>{let e=this.dropdownRef.current;this.props.dropdownKey&&e&&(this.props.dropdownShown?this.props.dispatch(l.oB()):this.props.dispatch(l.j7({type:this.props.dropdownKey,data:{targetRect:e.getBoundingClientRect()}})))},this.getTabClassWithStyling=()=>"adminSettings"===this.props.variant?_:h,this.dropdownRef=a.createRef()}render(){let e=this.getTabClassWithStyling();return a.createElement(e,{tab:this.props.tab,selectedTab:this.props.selectedTab,onClick:this.props.onClick??this.toggleDropdown,disabled:this.props.disabled,tooltipText:this.props.tooltipText,showTooltipWhenDisabled:this.props.showTooltipWhenDisabled,dataText:this.props.dataText},a.createElement("span",{ref:this.dropdownRef,className:m.Y1,"data-onboarding-key":this.props["data-onboarding-key"]},this.props.children),this.props.dropdownKey&&a.createElement(a.Fragment,null,a.createElement(c.c,{showingDropdown:this.shouldShowDropdown(),dropdownKey:this.props.dropdownKey,dispatch:this.props.dispatch,className:s()(m.ai,this.props.chevronClassName),svgContainerClassName:m.hq}),this.shouldShowDropdown()&&a.createElement(d.Cf,{targetRect:this.props.dropdownShown.data.targetRect,lean:"right",minWidth:120,propagateCloseClick:!0},this.props.dropdownOptions)))}}let f=g.name,E=e=>({dropdownShown:e.dropdownShown});function y(){return(0,i.Ng)(E)(g)}},10414:(e,r,n)=>{n.d(r,{T:()=>c,g:()=>l});var a=n(411855),i=n(265851),o=n(76265),s=n(174103);let l=(0,s.ex)("preload_success",function(){return a.createElement("div",{className:i.s.pr8.$},a.createElement("div",{className:i.s.colorTextTooltip.textBodyMediumStrong.$},(0,o.t)("proto.preload.loaded.tooltip.header")),a.createElement("div",{className:i.s.colorTextTooltipSecondary.$},(0,o.t)("proto.preload.loaded.tooltip.body")))}),c=(0,s.ex)("preload_error",function({isSlides:e}){return a.createElement("div",{className:i.s.pr8.$},a.createElement("div",{className:i.s.colorTextTooltip.textBodyMediumStrong.$},e?(0,o.t)("proto.preload.error.tooltip.header.slides"):(0,o.t)("proto.preload.error.tooltip.header")),a.createElement("div",{className:i.s.colorTextTooltipSecondary.$},(0,o.t)("proto.preload.error.tooltip.body")))},e=>({isSlides:"true"===e.getAttribute("data-tooltip-slides")}))},843602:(e,r,n)=>{n.d(r,{W:()=>f});var a=n(411855),i=n(188507),o=n(972142),s=n(76265),l=n(815153),c=n(926996),d=n(15092),u=n(477e3),m=n(331850),p=n(839644),h=n(688656),_=n(165376);function g(e,r,n){let a=(0,o.EJ)(e,25),i=n?function(e){switch(e){case m.e6.OWNER:return" (owner)";case m.e6.ADMIN:return" (admin)";default:return""}}(n):"";return r?(0,s.t)("avatar.tooltip.current_user_handle",{handle:a,roleName:i}):(0,s.t)("avatar.tooltip.other_user_handle",{handle:a,roleName:i})}function f(e){let r=(0,d.iZ)(),n=(0,i.d4)(e=>e.multiplayer),o=(0,u.q)(),s="user"in e?`user-${e.user.id}`:`role-${e.role.id}`,m="user"in e?e.user:e.role.user,f=!1,E="sessionId"in m&&m.sessionId===n.sessionID;r?f=m.id===r.id:"sessionId"in m&&(f=E);let y="role"in e?g(m.handle,f,e.role.level):g(m.handle,f),b=function(e){let r=(0,d.iZ)();return function(e){let{localUser:r,tooltipUser:n,multiplayer:a,isInWorkshop:i,selectedView:o}=e,s=n.id?.includes("VISITOR-")||!n.id,l=-1!==a.sessionID,c="sessionId"in n&&n.sessionId===a.sessionID,d="sessionId"in n&&n.sessionId===a.presenterSessionID,u="sessionId"in n&&a.observingSessionID===n.sessionId;return!l||(0,p.QB)(o)?s?_.c.NONE:_.c.VIEW_PROFILE:c?s||!r?i?_.c.EDIT_NAME:_.c.NONE:d?_.c.STOP_PRESENTING:_.c.NONE:d&&!u?_.c.FOLLOW_PRESENTER:u?_.c.STOP_OBSERVE:_.c.START_OBSERVE}({localUser:r,tooltipUser:e,multiplayer:(0,i.d4)(e=>e.multiplayer),isInWorkshop:(0,l.$D)(),selectedView:(0,c._6)()})}(m),v=`/files${o}/user/${m.id}`;return a.createElement("div",{id:e.id,key:`avatar-${s}`,"data-tooltip-type":h.Ib.SPECIAL,"data-tooltip":_.M,"data-tooltip-user-handle":y,"data-tooltip-user-session-id":"sessionId"in m?m.sessionId:void 0,"data-tooltip-timeout-delay":150,"data-tooltip-user-profile-url":v,"data-tooltip-click-action":b,"data-tooltip-max-width":300,"data-tooltip-offset-y":e.tooltipOffsetY??8,"data-tooltip-interactive":!0,style:{display:"inherit"}},e.children)}},132479:(e,r,n)=>{n.d(r,{$:()=>o,V:()=>s});var a=n(542367);let i=/https?:\/\/(?![\w.-]+\.(?:auto|map|center)[^\w.-]?)\S*/i;function o(e){try{return new URL(e),!0}catch(e){return!1}}function s(e){return a.I6(e,"url").concat(a.I6(e,"email")).filter(e=>!!o(e.href)&&i.test(e.href))}},814242:(e,r,n)=>{n.d(r,{bx:()=>V,xi:()=>D});var a=n(411855),i=n(188507),o=n(510548),s=n(991458),l=n(841962),c=n(271646),d=n(693565),u=n(132939),m=n(238795),p=n(706500),h=n(265851),_=n(76265),g=n(553362),f=n(719971),E=n(968525),y=n(461666),b=n(941302),v=n(849331),T=n(15092),I=n(314540),S=n(689954),w=n(735877),A=n(792474),C=n(929100),N=n(647863),L=n(471174),O=n(819692),R=n(646351),P=n(247866);let D="FILE_BROWSER_WORKSPACE_SWITCHER",k="ACCOUNT_SWITCHING_COMMUNITY_ONBOARDING_KEY",M=(0,s.hG)(C.nZ),F=(0,s.hG)(C.Qr),x=(0,s.hG)(C.sw),U=(0,s.hG)(C.vj)+2*(0,s.hG)(C.xX),B=U+1;function V(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.dropdownShown?.type===D),n=(0,i.d4)(e=>e.selectedView),s=(0,i.d4)(e=>e.dropdownShown?.data?.targetRect),C=(0,i.d4)(e=>e.authedUsers),V=(0,i.d4)(e=>e.authedProfilesById),G=(0,v.FC)(),H=(0,T.Pc)(),W=(0,b.U8)(G,C.orderedIds),K=(0,i.d4)(e=>e.orgUsersByOrgId),Y=(0,i.d4)(e=>e.orgById),$=(0,i.d4)(e=>e.authedTeamsById),j=(0,i.d4)(e=>e.authedActiveCommunityProfile),z=(0,E.UP)(),q=(0,i.d4)(e=>Object.keys(e.authedProfilesById).some(r=>!!e.authedProfilesById[r].org_id||!!e.authedProfilesById[r].team_id)),Z=(0,i.d4)(e=>e.userNotifications.communityProfileBellStates),X=(0,w.m)(),J=(0,i.d4)(e=>e.teamFeedBellStates),Q=(0,l.kc)().ps_benchmark;a.useEffect(()=>{Q&&(0,y.nm)()(e).catch(r=>{let n=r?.data?.message||(0,_.t)("file_browser.error_try_again");e(g.F.enqueue({message:n,type:"error"}))})},[e,Q]);let ee=()=>{let r=[];return C.orderedIds.forEach(n=>{let i=C.byId[n];if(!i)return;r=r.concat([{displayText:i.email,optionHeight:U,icon:a.createElement("span",{className:N.PN}),disabled:!0}]);let o=i.plans?.map(r=>{let n={userId:i.id,orgId:r.is_org?r.plan_id:null,teamId:r.is_org?null:r.plan_id},o=b.O_(G,n),s=!!r.is_guest,d=n.orgId&&!s&&l.kc().xr_debounce_threshold?{view:"teamFeed"}:{view:"recentsAndSharing"};return{displayText:r.name,optionHeight:B,itemBadge:s?a.createElement(c.Ex,{className:N.qS,text:_.t("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:a.createElement(p.n,{className:h.s.mr8.$,userId:n.userId,orgId:n.orgId,teamId:n.teamId}),isActive:o,isChecked:o,className:N.jx,callback:()=>e(f._l({workspace:n,view:d})),activeClassName:N.sI}})||[];r=(r=r.concat(o)).concat([{displayText:"",disabled:!0,separator:!0}])}),r};return a.createElement(a.Fragment,null,r&&a.createElement(S.j,{showPoint:!0,showCheckmarkOnRight:!0,lean:"left",leanPadding:M,items:(()=>{if(Q)return ee();let r=[];return C.orderedIds.forEach(n=>{let i=C.byId[n];r=(r=(r=r.concat([{displayText:i.email,optionHeight:U,icon:a.createElement("span",{className:N.PN}),disabled:!0}])).concat(W[n].map(r=>{let n=(0,b.HE)(G,r),s=!z&&(0,b.O_)(G,r),l=!r.orgId,d=!1;r.orgId&&K[r.orgId]&&(d=K[r.orgId][r.userId]?.permission===I._D.GUEST);let m=X?.[r.userId]?.[r.orgId||"0"],h=J[r.orgId||"0"],g=a.createElement(u.U,{svg:P.A},a.createElement(o.Z,null));return{displayText:n,optionHeight:B,badge:d?a.createElement(c.Ex,{className:N.qS,text:(0,_.t)("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:a.createElement("div",{className:N.aS},(m||h)&&a.createElement("div",{className:N.e3}),a.createElement(p.n,{userId:r.userId,orgId:r.orgId})),subText:l&&i.external_restricted_org_id?(0,_.t)("navbar.workspaces.disabled_by_your_admins"):void 0,alternativeRightIconIfNotChecked:l&&i.external_restricted_org_id?g:void 0,isActive:s,isChecked:s,className:N.jx,activeClassName:N.sI,callback:()=>e(f._l({workspace:r})),"data-onboarding-key":l?"ACCOUNT_SWITCHING_PERSONAL_ONBOARDING_KEY":void 0}}))).concat([{displayText:"",disabled:!0,separator:!0}])}),r})().concat((()=>{let r=!!Z&&Object.values(Z).some(e=>e),i=(0,A.s)(C.byId,z,H,Y,$,V,Z,j,n,e);if(i.length>1){let e=[{displayText:q?"":(0,_.t)("navbar.community.browse_community_workspace_switcher_label"),optionHeight:U,itemBadge:q?a.createElement("div",{className:N.zS},(0,_.tx)("navbar.community.browse_community_workspace_switcher_label"),a.createElement("a",{href:"https://help.figma.com/hc/articles/4404108672663",target:"_blank",className:N.P2},a.createElement(d.B,{svg:L.A,className:N.E3}))):void 0,icon:a.createElement("span",{className:N.s9}),disabled:!0}];return[{displayText:(0,_.t)("navbar.community.community_label"),optionHeight:U,icon:a.createElement("div",{className:N.aS},r&&a.createElement("div",{className:N.e3}),a.createElement(m.t,{svg:O.A,fallbackSvg:R.A})),onMouseEnter:()=>(0,E.nR)("submenu",n.view),className:N.uK,children:e.concat(i),activeClassName:N.sI,"data-onboarding-key":k}]}if(1!==i.length)return[];{let e=i[0];return[{displayText:(0,_.t)("navbar.community.community_label"),sideText:e.sideText,rightJustifySideText:!0,optionHeight:U,icon:a.createElement("div",{className:N.aS},r&&a.createElement("div",{className:N.e3}),a.createElement(m.t,{svg:O.A,fallbackSvg:R.A})),activeClassName:N.sI,isActive:e.isActive,isChecked:e.isChecked,className:N.uK,callback:e.callback,"data-onboarding-key":k}]}})()),onSelectItem:(r,n)=>{r.callback&&r.callback("",null,e)},parentRect:s,dispatch:e,minWidth:F,rootAndSubmenuMaxWidth:x}))}},245409:(e,r,n)=>{var a=n(875877);(0,a.atom)(null),(0,a.atom)(null)},130774:(e,r,n)=>{n(217950),n(245459),n(841962),n(875877),n(139879),n(550479),n(200179),n(923219),n(176160),n(183739),n(847218),n(767731),n(245409);let a=/(#[0-9]+:[0-9]+)/g;var i=(e=>(e[e.Continue=0]="Continue",e[e.SkipChildren=1]="SkipChildren",e[e.Stop=2]="Stop",e))(i||{})},757346:(e,r,n)=>{n(411855),n(188507),n(841962),n(875877),n(728722),n(427494),n(176160),n(183739);var a=n(841924);n(77383),n(404227),n(837384);var i=n(194961);n(245409),n(130774),a.M4.Query({fetch:async({nodes:e})=>0===e.length?{}:(await i.Q.getComponentNames(e)).data.meta.componentsById,stalenessPolicy:"never"})},390731:(e,r,n)=>{n.d(r,{d:()=>_});var a=n(217950),i=n(925998),o=n(467212),s=n(281935),l=n(841962),c=n(747484),d=n(550479),u=n(341541),m=n(769981),p=n(269509),h=n(37381);class _{constructor(){this.permissionRequestMade=!1;let e=(0,l.Ay)().firebase_cloud_messaging_browser_notifications;this.config={apiKey:e?.api_key,authDomain:e?.auth_domain,projectId:e?.project_id,storageBucket:e?.storage_bucket,messagingSenderId:e?.messaging_sender_id,appId:e?.app_id},this.vapidKey=e?.vapid_id;let r=(0,i.Wp)(this.config);this.messaging=(0,o.dG)(r);try{this.registerOnMessageListener(),this.registerVisibilityChangeListener(),this.updateServiceWorkerOnPermissionChange()}catch(e){(0,d.$D)(a.e.WAYFINDING,Error("An issue was encountered while instantiating Firebase Messaging Service"))}}static getInstance(){return _.instance??=new _,_.instance}registerServiceWorker(){return navigator.serviceWorker.register(Fig.firebaseMessagingServiceWorkerURL,{type:"module"})}getServiceWorkerRegistration(){return navigator.serviceWorker.getRegistration(Fig.firebaseMessagingServiceWorkerURL)}registerOnMessageListener(){this.onMessageUnsubscribe=(0,o.xD)(this.messaging,async e=>{if(!e.data||!e.data.title||!e.data.body)return;let r=await this.getServiceWorkerRegistration(),n=e.data;m.g.trackNotificationReceived(n);let{notificationTitle:a,notificationOptions:i}=(0,h.T)({notificationPayload:n,isBackgroundPush:!1,additionalOptions:{tag:e.messageId}});r?.showNotification(a,i)})}registerVisibilityChangeListener(){document.addEventListener("visibilitychange",e=>{"visible"===document.visibilityState?this.onMessageUnsubscribe||this.registerOnMessageListener():(this.onMessageUnsubscribe?.(),this.onMessageUnsubscribe=void 0)},!1)}async updateServiceWorkerOnPermissionChange(){if("granted"!==(await navigator.permissions.query({name:"notifications"})).state)this.unregisterServiceWorkerWhenPermissionDenied();else{let e=await this.getServiceWorkerRegistration();e?this.retrieveAndSendToken(e):this.registerServiceWorkerWhenPermissionGranted()}}async unregisterServiceWorkerWhenPermissionDenied(){let e=await this.getServiceWorkerRegistration();e?.unregister()}async retrieveAndSendToken(e){let r=e??await this.getServiceWorkerRegistration(),n=await (0,o.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:r});u.sr.sendFirebaseToken({firebaseToken:n}),m.g.trackTokenRegistered(p.iX.INTERNAL)}async registerServiceWorkerWhenPermissionGranted(){let e=await this.registerServiceWorker();this.retrieveAndSendToken(e)}async shouldRequestPermission(){try{let[e,r]=await Promise.all([navigator.permissions.query({name:"notifications"}),this.getServiceWorkerRegistration()]);if("granted"===e.state){r?.update();let e=!!r;return e&&this.retrieveAndSendToken(r),!e}if("denied"===e.state)return!1;return!0}catch(e){return!1}}async requestPermission(e){m.g.trackPermissionRequest(e);let r=await Notification.requestPermission();if("granted"===r){let e=await this.registerServiceWorker(),r=await (0,o.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e});return{status:p.Ke,token:r}}return"denied"===r?{status:p._F}:{status:p.Jr}}static createInstance(){return _.isBrowserNotificationSupported()?this.getInstance():null}static isUserOnMobileDevice(){return c.Xb}static isBrowserNotificationSupported(){let e="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window;return!!(0,l.kc)().browser_notifications&&!s.eD&&!_.isUserOnMobileDevice()&&e}static async requestPushNotifications(e,r){if(!_.isBrowserNotificationSupported())return;let{browserNotificationConfig:n}=r;if(!n())return;let i=_.getInstance();if(await i.shouldRequestPermission()&&!i.permissionRequestMade){i.permissionRequestMade=!0;try{let r=await i.requestPermission(e);r.status===p.Ke?(u.sr.sendFirebaseToken({firebaseToken:r.token}),m.g.trackTokenRegistered(e)):m.g.trackTokenBlocked(r.status)}catch(e){(0,d.$D)(a.e.WAYFINDING,Error("Could not request permission for firebase token")),m.g.trackTokenFailed()}}}}},269509:(e,r,n)=>{n.d(r,{Jr:()=>o,Ke:()=>a,_F:()=>i,iX:()=>s});let a="granted",i="denied",o="unknown";var s=(e=>(e.COMMENT_REPLY="comment_reply",e.INTERNAL="internal",e.NEW_COMMENT="new_comment",e.NOTIFICATION_BELL="notification_bell",e))(s||{})},47865:(e,r,n)=>{n.d(r,{X:()=>u,v:()=>m});var a=n(841962),i=n(215587),o=n(747484);let s=o.XN?"iPadOS":o.Ay.osname,l=o.XN?0:+o.Ay.osversion;function c(e){let r=window.navigator.languages||[];return e<r.length?r[e]:void 0}let d={browser_name:o.Ay.name,browser_version:+o.Ay.version,os_name:s,os_version:l,release:a.tl().release_manifest_git_commit,release_tag:a.tl().release_git_tag,page_locale:a.mm()[0],navigatorLanguage1:c(0),navigatorLanguage2:c(1),navigatorLanguage3:c(2),navigatorLanguages:(window.navigator.languages||[]).join(","),uiVersion:(0,i.fF)()};function u(){return d}function m(e){d={...d,...e}}},493685:(e,r,n)=>{n.d(r,{Mx:()=>m,NY:()=>c,Ok:()=>s,uW:()=>d,ux:()=>l,xj:()=>p,yx:()=>u});var a=n(863297);let i={status:a.r.INIT},o={status:a.r.LOADING};function s(){return i}function l(){return o}function c(e){return{status:a.r.SUCCESS,value:e}}function d(e){return{status:a.r.FAILURE,error:e}}function u(e){return e.status===a.r.INIT}function m(e){return e.status===a.r.LOADING}function p(e){return e.status===a.r.SUCCESS}},311606:(e,r,n)=>{n.d(r,{Fe:()=>m,GH:()=>h,ce:()=>c,cm:()=>u}),n(411855);var a=n(777535),i=n(47865),o=n(875877),s=n(747484),l=n(550479);function c(){return!!(s.Ay.chromeos&&window.matchMedia("(display-mode: tabbed)").matches)}let d=/^\/(files|idle_timeout|ip_account_restriction|my_plugins|user|org|team)(\/.*)?$/;function u(e){return d.test(e)||"/"===e||""===e}function m(e){document.body.style.backgroundColor="#2c2c2c"}let p=(0,o.atom)(null);function h(){_(),s.Ay.chromeos&&s.Ay.chrome&&(window.matchMedia("(display-mode: tabbed)").addEventListener("change",()=>{c()&&(m("dark"),_())}),window.addEventListener("appinstalled",()=>{(0,a.sx)("chrome_os_app_installed")}),window.addEventListener("beforeinstallprompt",e=>{o.atomStore.set(p,e)}))}function _(){let e=c();(0,l.kF)("chrome_os_app",e),e&&(0,i.v)({browser_name:"Figma ChromeOS App"})}},230208:(e,r,n)=>{n.d(r,{$q:()=>_,AW:()=>R,Bx:()=>x,DA:()=>q,FN:()=>l,FO:()=>p,F_:()=>F,G$:()=>L,GL:()=>N,H0:()=>f,HD:()=>A,HL:()=>w,J1:()=>U,UE:()=>s,Uv:()=>o,X9:()=>g,YN:()=>u,YR:()=>z,YU:()=>M,_W:()=>v,di:()=>S,e3:()=>d,mx:()=>y,ol:()=>c,ql:()=>O,sN:()=>P,tK:()=>E,tM:()=>m,ty:()=>C,x1:()=>h});var a=n(588172),i=n(269685);let o={r:0,g:0,b:0,a:1},s={r:1,g:1,b:1,a:1},l=s;var c=(e=>(e.MULTIPLAYER_GRAY="#667799",e.MULTIPLAYER_BLUE="#007BE5",e.MULTIPLAYER_PURPLE="#9747FF",e.MULTIPLAYER_PINK="#FF24BD",e.MULTIPLAYER_RED="#F24822",e.MULTIPLAYER_YELLOW="#FFCD29",e.MULTIPLAYER_GREEN="#14AE5C",e))(c||{});let d="var(--color-textondarkcanvas, #ffffff)",u="var(--color-textonlightcanvas, #000000)",m="inset 0px 0px 0px 1px rgba(255, 255, 255, 0.15)",p="inset 0px 0px 0px 1px rgba(0, 0, 0, 0.1)",h="inset 0px 0px 0px 2px var(--color-bordertranslucent)",_={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function g(e,r){return{...e,a:r}}function f(e,r){if(!e)return null;if("string"!=typeof e)return e;let n=null!=r,a=r??1;return function(e,r=1){let n=e.match(/color\(\s*display-p3\s*(?<red>[-+]?[0-9]*\.?[0-9]+)\s+(?<green>[-+]?[0-9]*\.?[0-9]+)\s+(?<blue>[-+]?[0-9]*\.?[0-9]+)\s*(?:\/\s*(?<alpha>[-+]?[0-9]*\.?[0-9]+%?))?\s*\)/);if(n&&n.groups&&"red"in n.groups&&"green"in n.groups&&"blue"in n.groups){let{red:e,green:a,blue:i,alpha:o}=n.groups;return{r:parseFloat(e),g:parseFloat(a),b:parseFloat(i),a:o?parseFloat(o):r}}return null}(e,a)??S(e,a)??y(e,a)??E(e,n,a)??null}function E(e,r=!1,n=1){let a=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!a)return null;let i=a[1];if(i.length>=8&&r)return D(V(i.substring(0,2)),V(i.substring(2,4)),V(i.substring(4,6)),V(i.substring(6,8)));if(7===i.length&&r)return D(V(i.substring(0,2)),V(i.substring(2,4)),V(i.substring(4,6)),B(i[6]));if(i.length>=6)return D(V(i.substring(0,2)),V(i.substring(2,4)),V(i.substring(4,6)),n);if(5===i.length&&r)return D(B(i[0]),B(i[1]),B(i[2]),V(i.substring(3,5)));if(4===i.length&&r)return D(B(i[0]),B(i[1]),B(i[2]),B(i[3]));if(i.length>=3)return D(B(i[0]),B(i[1]),B(i[2]),n);if(2===i.length){let e=V(i);return D(e,e,e,n)}else if(1===i.length){let e=B(i);return D(e,e,e,n)}return null}function y(e,r=1){let n;return(n=Z.exec(e=e.trim()))?D(H(n[1]),H(n[2]),H(n[3]),null==n[4]?r:K(n[4])):(n=X.exec(e))?D(G(n[1]),G(n[2]),G(n[3]),null==n[4]?r:K(n[4])):(n=J.exec(e))?function(e,r,n,a){if(0===r)return D(n,n,n,a);let i=n<.5?n*(1+r):n+r-n*r,o=2*n-i,s=[0,0,0];for(let r=0;r<3;++r){let n=e+-(1/3*(r-1));n<0&&++n,n>1&&--n,6*n<1?s[r]=o+(i-o)*6*n:2*n<1?s[r]=i:3*n<2?s[r]=o+(i-o)*(2/3-n)*6:s[r]=o}return D(s[0],s[1],s[2],a)}(Y(n[1]),H(n[2]),H(n[3]),null==n[4]?r:K(n[4])):(n=Q.exec(e))?function(e,r,n,a){let i=(100*e+16)/116,o=r/500+i,s=i-n/200,l=e=>{let r=e**3;return r>b?r:(e-16/116)/7.787};i=l(i);let c=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=c(3.2404542*(o=95.047*l(o)/100)+-1.5371385*i+-.4985314*(s=108.883*l(s)/100)),u=c(-.969266*o+1.8760108*i+.041556*s),m=c(.0556434*o+-.2040259*i+1.0572252*s);return D(j(d),j(u),j(m),a)}(H(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?r:K(n[4])):(n=ee.exec(e))?(0,i.I0)({l:W(n[1],.01),c:W(n[2],.004),h:Y(n[3]),a:null==n[4]?r:K(n[4])}):(n=et.exec(e))?(0,i.oq)({l:W(n[1],.01),ax:W(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?r:K(n[4])}):null}let b=(6/29)**3;function v(e,r){return I(T(e),T(r))/.002741735}let T=e=>{let r,n,a,i=1-(1-e.r/255)*e.a,o=1-(1-e.g/255)*e.a,s=1-(1-e.b/255)*e.a;return r=(.4124*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.3576*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.1805*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92))/.95047,n=(.2126*i+.7152*o+.0722*s)/1,a=(.0193*i+.1192*o+.9505*s)/1.08883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,a:500*(r-n),b:200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))}},I=(e,r)=>{let n=e.l-r.l,a=e.a-r.a,i=e.b-r.b,o=Math.sqrt(e.a*e.a+e.b*e.b),s=o-Math.sqrt(r.a*r.a+r.b*r.b),l=a*a+i*i-s*s,c=n/1,d=s/(1+.045*o),u=(l=l<0?0:Math.sqrt(l))/(1+.015*o),m=c*c+d*d+u*u;return m<0?0:Math.sqrt(m)};function S(e,r=1){let n=_[e.toLowerCase()];return n?E(n,!1,r):null}function w(e){return{r:$(e.r),g:$(e.g),b:$(e.b),a:$(e.a)}}function A(e,r=.627){let n=f(e);return!!n&&U(n)<r}function C(e){if(!e)return!0;let r=f(e);return!r||r?.a===0}function N(e){return A(e)?d:u}function L(e){return A(e)?"var(--color-textondarkcanvassecondary, rgba(255,255,255,0.6))":"var(--color-textonlightcanvassecondary, rgba(0,0,0,0.6))"}function O(e,r,n){let a=f(e),i=f(r);if(!a||!i)return;let o=P(a,i),s=U(a),l=U(o);if(n){let e=U(i);return"light"===n&&e>.9||"dark"===n&&e<.25?h:void 0}return s<.2&&l<s+.1?m:s>.8&&.1>Math.abs(l-s)?p:void 0}function R(e=[]){function r(e){return null!=e}let n=e.map(e=>{if("SOLID"===e.type)return e.color;let n=(e.stops??[]).map(e=>e.color).filter(r);if(n.length)return P(...n)}).filter(r);return n.length?P(...n):void 0}function P(...e){return e.reduceRight((e,r)=>{let n=r.a,a=e.a,i=n*(1-a),o=i+a,s=i/o,l=a/o;return{r:r.r*s+e.r*l,g:r.g*s+e.g*l,b:r.b*s+e.b*l,a:o}})}function D(e,r,n,a=1){return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(a)?null:{r:e,g:r,b:n,a}}function k({r:e,g:r,b:n,a}){return{r:Math.round(255*e),g:Math.round(255*r),b:Math.round(255*n),a:Math.round(255*a)}}function M(e){let{r,g:n,b:a}=k(e);return`rgba(${r}, ${n}, ${a}, ${e.a})`}function F(e){let{r,g:n,b:a,a:i}=k(e),o=Math.min(Math.max(0,n),255),s=Math.min(Math.max(0,a),255),l=Math.min(Math.max(0,i),255),c=Math.min(Math.max(0,r),255).toString(16).padStart(2,"0"),d=o.toString(16).padStart(2,"0"),u=s.toString(16).padStart(2,"0"),m=l.toString(16).padStart(2,"0");return 255===l?`#${c}${d}${u}`:`#${c}${d}${u}${m}`}function x(e){switch(e){case"legacy":return"#e5e5e5";case"light":default:return"#f5f5f5";case"dark":return"#1e1e1e"}}function U(e){return .299*e.r+.587*e.g+.114*e.b}function B(e){return V(`${e}${e}`)}function V(e){return $(parseInt(e,16))}function G(e){return $(parseFloat(e))}function H(e){return j(.01*parseFloat(e))}function W(e,r){return e.endsWith("%")?j(parseFloat(e)*r):parseFloat(e)}function K(e){return e?e.includes("%")?H(e):j(parseFloat(e)):1}function Y(e){let r=parseFloat(e),n=0;return n=e.includes("grad")?.9*r:e.includes("rad")?180*r/Math.PI:e.includes("turn")?360*r:r,(n=(0,a._g)(n,360))/360}function $(e){return j(e/255)}function j(e){return(0,a.qE)(e,0,1)}function z(e){return e&&!isNaN(e.r)&&!isNaN(e.g)&&!isNaN(e.b)&&e.r>=0&&e.r<=1&&e.g>=0&&e.g<=1&&e.b>=0&&e.b<=1}function q(e,r){let{r:n,g:i,b:o,a:s}=e,{r:l,g:c,b:d,a:u}=r;return(0,a.xN)(n,l)&&(0,a.xN)(i,c)&&(0,a.xN)(o,d)&&(0,a.xN)(s,u)}let Z=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,X=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,J=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,Q=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,ee=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?))?\s*\)?\s*;?$/,et=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/},141630:(e,r,n)=>{n.d(r,{Eg:()=>P,Hd:()=>m,Wn:()=>u,jA:()=>d});var a=n(588172);n(826212);var i=n(404199),o=n(809461),s=n(1518),l=n(922789),c=n(230208);function d(e,r,n="IGNORE",a){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<0||r>1e3)return console.warn("Invalid value passed into calculateColorWithRampValue. Ensure value is between 0 and 1000",r),null;let i=E(e),o=T(i),s=I(i.hsluv_l,o);if(a){let{LESS_THAN:r,GREATER_THAN:n}=a;if(r&&100*s<r||n&&100*s>n)return e}return v(i,r/1e3,o,s),"IGNORE"!==n&&C(i,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(i)}function u(e){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;let r=E(e),n=T(r);return Math.floor(100*I(r.hsluv_l,n))}function m(e,r,n="IGNORE"){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRelativeAdjustment. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<-1||r>1)return console.warn("Invalid percentage passed into calculateColorWithRelativeAdjustment. Ensure percentage is between -1 and 1",r),null;let a=E(e),i=T(a),o=a.hsluv_l,s=o;s=r>0?o+(100-o)*r:o*(1- -1*r);let l=I(o,i);return v(a,I(s,i)/10,i,l),"IGNORE"!==n&&C(a,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(a)}let p=["red","orange","yellow","green","blue","purple"],h={red:{a:-.079,b:16.1},orange:{a:-2.55,b:56.4},yellow:{a:-4.26,b:81.7},green:{a:1.67,b:131},blue:{a:3.4,b:227},purple:{a:.0136,b:282}},_={red:{d:95.2,c:-3.15,b:1.3,a:-.159},orange:{d:108,c:-11.7,b:2.8,a:-.183},yellow:{d:76.3,c:-3.03,b:1.96,a:-.151},green:{d:102,c:-44.8,b:11.8,a:-.776},blue:{d:95.5,c:-10.7,b:3.71,a:-.306},purple:{d:95.6,c:-2.82,b:1.43,a:-.189}},g={red:{d:96.4,c:-.7,b:-2.01,a:.125},orange:{d:103,c:-6.98,b:.0827,a:-.0256},yellow:{d:102,c:-5.84,b:.849,a:-.0972},green:{d:96.5,c:2.77,b:-2.86,a:.171},blue:{d:97.5,c:.173,b:-2.12,a:.127},purple:{d:98.1,c:-2.29,b:-1.94,a:.132}},f=e=>(e.hsluvToRgb(),{r:(0,a.qE)(e.rgb_r,0,1),g:(0,a.qE)(e.rgb_g,0,1),b:(0,a.qE)(e.rgb_b,0,1),a:1}),E=e=>{let r=new i.h;return r.rgb_r=e.r,r.rgb_g=e.g,r.rgb_b=e.b,r.rgbToHsluv(),r},y={red:1,orange:.75,yellow:.6,green:1,blue:1.1,purple:1};function b(e){if((0,o.f)(e,c.UE)<=S)return N(e);let r=E(e),n=new i.h;if(n.hsluv_h=r.hsluv_h,r.hsluv_l<=10)return n.hsluv_s=0,n.hsluv_l=60,f(n);if(r.hsluv_l<=30){let e=.03*r.hsluv_l;n.hsluv_s=r.hsluv_s*e}else n.hsluv_s=Math.min(100,1.5*r.hsluv_s);return n.hsluv_l=Math.min(100,.444*r.hsluv_l+55.555),O(n)}function v(e,r,n,a=5){r*=10;let i=h[n].a*a+h[n].b-e.hsluv_h;e.hsluv_h=h[n].a*r+h[n].b-i;let o=e.hsluv_s,s=_[n].a*a*a*a+_[n].b*a*a+_[n].c*a+_[n].d;e.hsluv_s=_[n].a*r*r*r+_[n].b*r*r+_[n].c*r+_[n].d,e.hsluv_s*=o/s,e.hsluv_l=g[n].a*r*r*r+g[n].b*r*r+g[n].c*r+g[n].d,e.hsluv_s>100&&(e.hsluv_s=100),e.hsluv_l>100&&(e.hsluv_l=100),e.hsluv_h>360&&(e.hsluv_h=360),e.hsluv_h<0&&(e.hsluv_h=0)}function T(e){let r={blue:0,yellow:0,green:0,purple:0,red:0,orange:0},n=e.hsluv_l/100;e.hsluvToRgb(),p.forEach(a=>{let o=new i.h;o.rgb_r=l.r[a].r,o.rgb_g=l.r[a].g,o.rgb_b=l.r[a].b,o.rgbToHsluv(),v(o,n,a,5),o.hsluvToRgb();let s=(0,c._W)(f(e),f(o));r[a]=s/y[a]});let a="yellow",o=r[a];for(let e in r)r[e]<o&&(o=r[e],a=e);return e.rgbToHsluv(),a}function I(e,r){let n=(0,a.Ae)(g[r].a,g[r].b,g[r].c,g[r].d-e),i=n.filter(e=>0<e&&e<10);return 1===i.length?i[0]:n.length>1?(n.sort(),n[Math.floor(n.length/2)]):e<50?11:-1}let S=1.31,w={BLACK:c.Uv,WHITE:c.UE},A=(e,r)=>{let{colorForContrastCheck:n,contrastMinimum:a}=r,i=()=>(0,o.f)(l,n),s=(0,c.HD)(n)?.1:-.1,l=f(e);for(;i()<a+.02&&(e.hsluv_l+=s,!(e.hsluv_l>100)&&!(e.hsluv_l<0));)l=f(e);return e.rgbToHsluv(),i()>=a+.02},C=(e,r,n)=>{let a;let i=f(e),s=(0,o.f)(c.UE,i),l=(0,o.f)(c.Uv,i);if(r&&n)a=l>=s?"BLACK":"WHITE";else{if(!r&&!n)return;a=r?"BLACK":"WHITE"}("BLACK"!==a||!(l>=4.5))&&("WHITE"===a&&s>=4.5||A(e,{contrastMinimum:4.5,colorForContrastCheck:w[a]}))},N=e=>({r:(0,a.qE)((e.r-1)/.55+1,0,1),g:(0,a.qE)((e.g-1)/.55+1,0,1),b:(0,a.qE)((e.b-1)/.55+1,0,1),a:1}),L=e=>{e.hsluvToRgb();let r=new i.h;return r.rgb_r=1-.55*(1-e.rgb_r),r.rgb_g=1-.55*(1-e.rgb_g),r.rgb_b=1-.55*(1-e.rgb_b),r.rgbToHsluv(),r},O=e=>{let r=L(e);return A(r,{contrastMinimum:S,colorForContrastCheck:w.WHITE}),N(f(r))};function R(e){let r=[],n=new Set;return e.forEach(e=>{let a=s.z5.format(e);n.has(a)||(n.add(a),r.push(e))}),r}function P(e){if(e)return{base:e,widget:e,baseLight:R(e.map(e=>m(e,.6,"BLACK_AND_WHITE")||c.Uv)),sticky:R(e.map(e=>d(e,400,"BLACK",{LESS_THAN:400})||c.Uv)),highlight:R(e.map(b)),pencilUI3:e,codeBlockTheme:e}}},533132:(e,r,n)=>{n.d(r,{B2:()=>h,H3:()=>I,I:()=>v,Kq:()=>b,Kx:()=>T,L4:()=>N,Pq:()=>A,Rc:()=>function e(r=[],n=!0){let a=(Array.isArray(r)?r:[{t:r}]).map(r=>{let n={t:null,styles:null,children:null,user:null,userId:null,link:null,isHashtag:null};if(r.user_annotated&&r.user_id)return{...n,userId:r.user_id,user:{...r.user_annotated,name:r.user_annotated.name??null,imgUrl:r.user_annotated.img_url}};if(r.profile_id||null===r.profile_id)return{...n,t:"@"+r.t,styles:["lightbold"]};let a={...n,t:r.t||n.t,styles:r.styles||n.styles,link:r.link||n.link};return r.children?.length&&(a.children=r.children.map(r=>({...n,children:e(r.children,!1)}))),a});if(n&&a.length){let e=a[a.length-1];e.t=e.t?.replace(/\s+$/g,"")??null}return a},Wf:()=>function e(r,n){if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++){let i=r[a],o=n[a];if(i.t!==o.t||i.user_id!==o.user_id)return!1;if(!g(i,o))return!1;if(i.profile_id!==o.profile_id)return!1;else if(i.link!==o.link)return!1;else if(!_(i,o))return!1;else if(!e(i.children??[],o.children??[]))return!1}return!0},_Z:()=>y,cs:()=>w,l5:()=>E,pV:()=>C,q:()=>S,sP:()=>function e(r=[]){if(!r)return"";let n=r.reduce((r,n)=>{let a=n.t||"",i=n.styles||[];n.user_annotated?(a=n.user_annotated.handle,i=["lightbold"]):n.profile_id||null===n.profile_id?(a="@"+n.t,i=["lightbold"]):n.children?.length?n.children.forEach((n,o)=>{(r||a)&&(a+="\n"),a+=i.includes("ol")?`${o+1}. `:"* ",a+=e(n.children)}):(a=(0,l.x6)(a).map(e=>"string"==typeof e?(0,u.hX)(e):`<span class="${p.mh}">${e.props["data-text"]}</span>`).join("\n"),n.link&&(i=["lightbold"]));let o=[];return i.forEach(e=>{"b"===e?o.push(p.hp):"lightbold"===e?o.push(p.XH):"i"===e?o.push(p.u5):"s"===e&&o.push(p.Vc)}),o.length&&(a=`<span class='${s()(...o)}'>`+a+"</span>"),r+a},"");return(0,d.F)(n)||""},vj:()=>f});var a=n(48451),i=n(236891),o=n(629019),s=n.n(o),l=n(151314),c=n(804197),d=n(733312),u=n(972142),m=n(612724),p=n(994216);let h=5,_=(e,r)=>{if((0,i.uy)(e.styles)&&(0,i.uy)(r.styles))return!0;if((0,i.uy)(e.styles)!==(0,i.uy)(e.styles))return!1;let n=e.styles?.filter(e=>!r.styles?.includes(e));return n?.length===0},g=(e,r)=>!!((0,i.uy)(e.user_annotated)&&(0,i.uy)(r.user_annotated))||(0,i.uy)(e.user_annotated)===(0,i.uy)(e.user_annotated)&&(0,a.c2)(e.user_annotated,r.user_annotated);var f=(e=>(e.EDITOR_MENTION="editor_mention",e.COMMUNITY_MENTION="community_mention",e.PLAIN_TEXT="plain_text",e.EMOJI="emoji",e.NONE="none",e))(f||{});function E(e){return 2===Object.keys(e).length&&Object.keys(e).includes("user_id")&&Object.keys(e).includes("user_annotated")?"editor_mention":2===Object.keys(e).length&&Object.keys(e).includes("profile_id")&&Object.keys(e).includes("t")?"community_mention":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")&&e.t&&(0,l.xM)(e.t)?"emoji":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")?"plain_text":"none"}function y(e=[],r){if(!e)return"";let n=e.reduce((e,r)=>{let n=r.t||"";return r.user_annotated?n=r.user_annotated.handle:r.profile_id||null===r.profile_id?n="@"+r.t:r.children?.length&&r.styles?.length?r.children.forEach((a,i)=>{(e||n)&&(n+="\n"),n+=r.styles.includes("ol")?`${i+1}. `:"* ",n+=y(a.children)}):r.styles?.length&&r.styles.includes("s")&&(n=""),e+n},"");return r?.includeTrailingWhitespace||(n=n.replace(/\s+$/g,"")),(0,d.F)(n)||""}function b(e,r){let n=y(e,r),a=(0,l.Bx)(n);return(globalThis.Intl?.Segmenter?Array.from(new Intl.Segmenter().segment(a)):Array.from(a)).length}function v(e){return 0===e.length||/^\s*$/.test(y(e))}function T(e){return v(e)||y(e).length<=5}function I(e){let r=!(e.activeThread?.id===c.hm&&e.newComment.discardAttempt<c.IT),n=e.activeThread?.id?e.threads[e.activeThread.id]:null,a=!(n&&!(n&&T(n.reply.messageMeta)&&0===Object.keys(n.reply.attachments||{}).length)&&(!n.discardAttempts||n.discardAttempts<c.IT));return r&&a}function S(e){return y(e).length>=17500}function w(e){if(!Array.isArray(e))return[];let r=function e(r){let n=[];return r.forEach(r=>{r.user_id?.includes("invite-")?r.t&&n.push(r.t):r.children&&n.push(...e(r.children))}),n}(e);return!function e(r){return r.forEach(r=>{r.user_id?.includes("invite-")?delete r.user_id:r.children&&e(r.children)}),r}(e),r}function A(e){return e.length>0&&(e[e.length-1].t=e[e.length-1].t?.trimEnd()),e}function C(e,r){let n=Math.min(Math.max(e.x,r.x),r.x+r.width),a=Math.min(Math.max(e.y,r.y),r.y+r.height);return new m.Mi(n,a)}function N(e){return e.includes("-")}},991458:(e,r,n)=>{function a(e){return parseInt(e.split("px")[0])}function i(e){return Number(e.split("px")[0])}n.d(r,{hG:()=>a,jz:()=>i})},280030:(e,r,n)=>{n.d(r,{y:()=>a});let a=n(411855).createContext(null)},615816:(e,r,n)=>{n.d(r,{Uc:()=>c,iZ:()=>l});var a=n(805014),i=n(41893);n(841962);var o=n(199699),s=n(437068);let l=new Map(Object.entries(a.XpX).map(([e,r])=>[e,r]));function c(){let e=o.dZ.get((0,o.v7)())||"UNKNOWN",r=i.y.isApple()?"mac":"!mac",n=function(){let e;if(!s.x4)return{};let r=s.x4.getItem("customKeyboardShortcuts");if(!r)return{};try{e=JSON.parse(r)}catch(e){console.error("[Custom Keyboard Shortcuts] Failed to parse from local storage",e)}return e}()??{};return n[e]?.[r]??{}}Object.entries(a.XpX).map(([e,r])=>[r,e])},609628:(e,r,n)=>{n.d(r,{yN:()=>b,ql:()=>v,lP:()=>T});var a=n(411855);n(188507);var i=n(885123),o=n(657548),s=n(728722),l=n(736942),c=n(206908),d=n(942754);n(64210);var u=n(99990),m=n(190500),p=n(183739),h=n(468260),_=n(413534),g=n(841962),f=n(60077),E=n(496203);new class{constructor(){this.RecentPrototypesSchemaValidator=(0,f.YV)("RecentPrototypesSchemaValidator",e=>e.object({recent_prototypes:e.ignore(),recent_prototype_repos:e.ignore(),org_drafts_owners:e.array(E.WU)}),null,!1)}getRecentPrototypes(e){return this.RecentPrototypesSchemaValidator.validate(async({xr:r})=>await r.get("/api/recent_prototypes",f.td.toAPIParameters({...e,fuid:g.Ay().user_data?.id})))}};let y=null;async function b(e){if(!y)return;let r=[],n={},a=[];for(let i of y?.currentUser?.recentFiles2??[])i?.file?.key&&e.includes(i.file.key)&&(r.push({key:i.file.key,parent_org_id:i.file.parentOrgId,team_id:i.file.teamId,folder_id:i.file.folderId}),n[i.id]=null,a.push(i.file.key));let i=_.f.removeRecentFiles({fileKeys:a}),s=(0,o.WB)().optimisticallyDelete({RecentFile2:n},i);(0,m.OH)("File RecentFiles Removed",r),await s}function v(e){let r=(0,s.Rs)(p.wZi,{});return"loaded"===r.status&&(y=r.data),(0,a.useEffect)(()=>{r.status===l.H.LOADED&&I((0,h.YN)(r.data),e,!1)},[r,e]),a.useMemo(()=>r.transform(e=>(0,h.YN)(e).recent_files),[r])}function T(e){let r=(0,s.Rs)(p.wZi,{});return"loaded"===r.status&&(y=r.data),(0,a.useEffect)(()=>{r.status===l.H.LOADED&&I((0,h.YN)(r.data),e,!1)},[r,e]),a.useMemo(()=>r.transform(e=>(0,h.iP)(e)),[r])}function I(e,r,n){let a=e.recent_repos.map(e=>e.files).reduce((e,r)=>e.concat(r),[]);i.D.dispatch(c.uo({files:e.recent_files.concat(a),subscribeToRealtime:!1})),i.D.dispatch(u.nF({recent_repos:e.recent_repos,subscribeToRealtime:n})),i.D.dispatch(d.Kc({folderId:`recents-${r||"no-org"}`,state:"loaded"}))}},850784:(e,r,n)=>{n.d(r,{Xf:()=>y});var a,i=n(411855),o=n(336427),s=n(139879),l=n(697737),c=n(76265),d=n(916348),u=n(243989),m=n(825408),p=n(314540),h=n(841924),_=n(940795),g=n(269049),f=n(807373),E=n(871290);function y(e,r=!0){let n=(0,d.yq)(),l=(0,_.gI)({migrationGroup:g.L.GROUP_7,component:"useOrgBillingData"}),[m,p]=(0,s.IT)(a.orgBillingDataQuery(e),{enabled:r}),h=(0,i.useMemo)(()=>m.transform(e=>e?{...e,invoices:e.invoices.map(e=>({...e,billing_mechanics:e.billing_mechanics!==u.fA.LEGACY&&n()?e.billing_mechanics:u.fA.LEGACY}))}:e),[m,n]);(0,f.i)(h,(0,c.t)("org_billing_error_default"));let E=(0,o.ZC)(e),b=i.useMemo(()=>E!==e&&!!E,[e,E]),v=(0,o.ZC)(l),T=i.useMemo(()=>!1===v&&l&&h.data&&0===Object.keys(h.data).length,[l,h.data,v]),I=i.useMemo(()=>T||b,[T,b]);return(0,i.useEffect)(()=>{"loading"!==h.status&&I&&p.refetch()},[p,I,h.status]),h}(a||(a={})).orgBillingDataQuery=h.M4.Query({fetch:async e=>(await E.Eh.getBillingData({orgId:e})).data.meta,enabled:e=>!!e}),h.M4.Mutation(async(e,{query:r})=>{let{orgId:n,billingContacts:i,onRejected:o}=e,s=await l.Ay.put(`/api/orgs/${n}/billing_data`,{admin_email:i}).catch(e=>{throw o(e),e});r.mutate(a.orgBillingDataQuery(n),e=>{e&&(e.admin_email=s.data.meta.admin_email)})}),h.M4.Mutation(async(e,{query:r})=>{let n=await l.Ay.put(`/api/orgs/${e.orgId}/lock_invoice`,{license_quantities:e.licenseQuantities}).catch(r=>{throw e.onRejected(r),r}),i=a.orgBillingDataQuery(e.orgId);return r.mutate(i,e=>{e&&(e.invoices=n.data.meta.invoices)}),e.planInvoiceId?(r.refetch(i),await (0,m.jL)({planType:p.OL.ORG,planId:e.orgId})):await r.refetch(i),n.data.meta}),h.M4.Mutation((e,{query:r})=>{r.refetch(a.orgBillingDataQuery(e))})},379648:(e,r,n)=>{n.d(r,{G4:()=>E,IT:()=>y,SW:()=>_,Ul:()=>f,g4:()=>h,m8:()=>g,n:()=>m,v_:()=>p});var a=n(411855),i=n(707062),o=n(728722),s=n(736942),l=n(190253),c=n(314540),d=n(183739);let u=e=>(r,n)=>n?r.filter(r=>{let a=n[r];return!!a?.[e]}):[],m=u("canTrash"),p=u("canDuplicate"),h=u("canRestore"),_=u("canRestoreToOtherFolders"),g=u("canDeleteForever"),f=u("canMove"),E=u("isDraftFile");function y(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({fileKey:e})),[e]),u=(0,o.p)(d.XRI,n,{enabled:r});return(0,a.useMemo)(()=>s.Qw.all(u.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.file;e&&(r[e.id]=function(e){let r=e.editorType===c._Y.WHITEBOARD&&e.org?.isFigJamDisabled||e.editorType===c._Y.SLIDES&&e.org?.isSlidesDisabled||!1,n=e.canEdit,a=e.canEdit,o=e.canRename,s=!!e.project?.canView,d=!!e.project?.canEdit,u=!!(0,i.oA)(e.canTrash),m=!!(0,i.oA)(e.canMove),p=(0,i.oA)(e.canMoveWithReasons),h=(e.canEdit||!e.viewerExportRestricted)&&!r,_=!!(0,i.oA)(e.canRestore),g=!!(0,i.oA)(e.canRestoreToOtherFolders),f=e.canFavorite,E=e.isFavorited,y=e.isTeamTemplate,b=(0,l._R)(e.editorType??c._Y.DESIGN,e.currentPlanUser),v=e.isDraftFile,T=!!(0,i.oA)(e.canPermanentlyDelete),I=e.parentOrgId?"org":e.teamId?"team":null,S=e.parentOrgId||e.teamId||null;return{canEdit:n,canRename:o,canMove:m,canShowInProject:s,canPin:d,canTrash:u,canDuplicate:h,canRestore:_,canRestoreToOtherFolders:g,canFavorite:f,isFavorited:E,canDeleteForever:T,canUseInNewFile:y,canRestoreFromVersion:a,isFileTypeDisabled:r,canOpenMoveModal:!0,isUserRestrictedForSeat:b,planUser:e.currentPlanUser,planType:I,planId:S,isDraftFile:v,canMoveWithReasons:p}}(e))}return r}),[u])}},425086:(e,r,n)=>{n.d(r,{Q:()=>l});var a=n(411855),i=n(728722),o=n(736942),s=n(183739);function l(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),c=(0,i.p)(s.vE,n,{enabled:r});return(0,a.useMemo)(()=>o.Qw.all(c.map(e=>e.result)).transform(e=>{let r={};for(let a of e){var n;let e=a.prototype;e&&(r[e.id]={canRead:(n=e).canRead,canFavorite:n.canRead&&!n.isFavorited,canUnfavorite:n.canRead&&n.isFavorited})}return r}),[c])}},62258:(e,r,n)=>{n.d(r,{CS:()=>_,Sk:()=>E,_H:()=>h,ae:()=>f,gX:()=>g,k8:()=>b,nL:()=>y,zj:()=>p});var a=n(411855),i=n(707062),o=n(728722),s=n(736942),l=n(190253),c=n(643225),d=n(314540),u=n(183739);let m=e=>(r,n)=>n?r.filter(r=>{let a=n[r];return!!a?.[e]}):[],p=m("canDelete"),h=m("canRestore"),_=m("canRestoreToOtherFolders"),g=m("canForeverDelete"),f=m("canMove"),E=m("isDraftRepo");function y(e,r,n){return n?e.filter(e=>{let a=r[e],i=n[e];return i?.isMainBranch(a)}):[]}function b(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({repoId:e})),[e]),m=(0,o.p)(u.rwE,n,{enabled:r});return(0,a.useMemo)(()=>s.Qw.all(m.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.repo;e&&(r[e.id]=function(e){let r=e.canEdit,n=e.canMove,a=!!e.project?.canView,o=e.canEdit&&!e.isTrashed,s=e.canEdit&&e.isTrashed,u=e.isTrashed&&!!(0,i.oA)(e.sourceFile?.canRestore),m=(0,i.oA)(e.canMoveWithReasons),p=!!(e.isTrashed&&(0,i.oA)(e.sourceFile?.canRestoreToOtherFolders)),h=!!e.sourceFile?.isFavorited,_=e.canRead&&!!e.sourceFile&&!e.sourceFile.isFavorited,g=e.canRead&&!!e.sourceFile&&e.sourceFile.isFavorited,f=!!e.project&&e.canEdit,E=e.parentOrgId?"org":e.teamId?"team":null,y=e.parentOrgId||e.teamId||null,b=(0,l._R)(d._Y.DESIGN,e.currentPlanUser),v=(0,c.T9)(e?.project);return{canDelete:o,canRename:r,canShowInProject:a,isFavorited:h,canRestore:u,canRestoreToOtherFolders:p,canForeverDelete:s,canFavorite:_,canUnfavorite:g,isMainBranch:r=>r===e.sourceFile?.key,canMove:n,canEditBranch:r=>!!e.branches?.find(e=>e.key===r)?.canEdit,canPin:f,planId:y,planType:E,canOpenMoveModal:!0,isUserRestrictedForSeat:b,planUser:e.currentPlanUser,isDraftRepo:v,canMoveWithReasons:m}}(e))}return r}),[m])}},570499:(e,r,n)=>{n.d(r,{bj:()=>T,it:()=>S});var a=n(889012),i=n.n(a),o=n(777535),s=n(895925),l=n(19271),c=n(538971),d=n(885123),u=n(163773),m=n(841962),p=n(736482),h=n(133340),_=n(238311),g=n(681811);let f=/(googlebot\/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)/i,E=/(qawolf\.email|qawolf[0-9][0-9]?\.com|qawolfworkflows\.com|uibuilder\.awsapps\.com)/,y={rolloutPercent:0,sessionSampleRate:0,replaySampleRate:0,traceSampleRate:0,maxGlobalSendEventsPerSecond:-1},b=["fallback","starter","pro","org","enterprise","employee"];function v(e){return"user"===e||"user-employee"===e}function T({collectErrors:e,service:r,sessionSampleRate:n,trackUserInteractions:a,alwaysInit:i}){if(!l.L)return;let{datadog_rum_init:o,datadog_logs_init:c,datadog_rum_trace_header:d,datadog_rum_track_resources:p,datadog_rum_track_long_task:E,datadog_rum_track_interactions:T}=(0,m.kc)();if(!o)return;let{cluster_name:S,release_manifest_git_commit:w,datadog_rum_application_id:A,datadog_rum_client_token:N,datadog_rum_site:L,user_data:O,org_id:R}=(0,m.tl)();if(!A||!N||!L){s.k.debug("Missing Datadog RUM application ID, client token, or site. RUM client disabled");return}let P=I(O?.email),D=function(e){let r=(0,_.gP)("datadog_rum_plan_rollout_config"),n=function(){let e=(0,h.T)();return e&&b.includes(e)?e:"fallback"}(),a=r.get("fallback",y);return"user-employee"===e?r.get("employee",a):r.get(n,a)}(P);if(!i&&(!O||v(I(O.email))&&(0,g.u)(O.id,7)%100>=D.rolloutPercent))return;let k=function(e,r,n){let{datadog_rum_record_all:a}=(0,m.kc)(),{datadog_rum_session_sample_rate:i}=(0,m.tl)(),o=e.sessionSampleRate;return f.test(navigator.userAgent)?0:v(n)?void 0!==r?r:a?100:void 0!==o?o:void 0!==i?i:.01:100}(D,n,P),M=v(P)?D.replaySampleRate??0:100,F=[];if(d&&((0,_.gP)("datadog_rum_trace_config").get("allowed_urls",[]).forEach(e=>{try{F.push(new RegExp(e))}catch(r){s.k.warn(`Invalid regex pattern for Datadog RUM trace URL: ${e}`)}}),F.push(window.origin)),C.configure({onEnableDatadog:()=>{l.L.setTrackingConsent("granted")},onDisableDatadog:()=>{l.L.setTrackingConsent("not-granted")},collectErrors:e??!1,overallCircuitBreakerRatePerSecond:D.maxGlobalSendEventsPerSecond}),l.L.init({allowedTracingUrls:F,applicationId:A,clientToken:N,site:L,service:r,env:S,version:w,trackingConsent:u.Ay.location.pathname.startsWith("/design")||u.Ay.location.pathname.startsWith("/file/")||u.Ay.location.pathname.startsWith("/proto")||u.Ay.location.pathname.startsWith("/deck")||u.Ay.location.pathname.startsWith("/mirror")||u.Ay.location.pathname.startsWith("/desktop_new_tab")||u.Ay.location.pathname.startsWith("/board")||u.Ay.location.pathname.startsWith("/slides")||u.Ay.location.pathname.startsWith("/site")?"not-granted":"granted",sessionSampleRate:k,sessionReplaySampleRate:M,traceSampleRate:D.traceSampleRate??50,traceContextInjection:"sampled",trackUserInteractions:a??T,actionNameAttribute:"data-tooltip",trackResources:p,trackLongTasks:E,silentMultipleInit:!0,defaultPrivacyLevel:"mask",enableExperimentalFeatures:[],allowUntrustedEvents:!v(P),beforeSend:(e,r)=>C.beforeSend(e,r)}),l.L.setGlobalContextProperty("entrypoint",window.ENTRY_POINT??"unknown"),O){let{id:e,locale:r}=O;l.L.setUser({id:e,org_id:R,locale:r,user_kind:P,user_highest_plan:(0,h.T)()})}c&&l.y?.init({clientToken:N,site:L,service:r,version:w,env:S,forwardConsoleLogs:["log","warn","error"],forwardErrorsToLogs:!1,sessionSampleRate:100})}function I(e){let r=e?.lastIndexOf("@")??-1;if(r>0){let n=e.slice(r+1);if(E.test(n))return"qa";if((0,c.Ng)(e))return"automation";if((0,c.jm)(e))return"user-employee"}return"user"}function S(e,r){(0,m.kc)().datadog_rum_fs_action_logger&&l.L?.addAction(`fullscreen action: ${e}`,r)}function w(e){return e?.replace(/\.min\.js\.br/g,".min.js")}class A{constructor(){this._isSendEventsEnabled=!0,this._collectErrors=!1,this._initializedAt=performance.now(),this._overallCircuitBreakerSendsDisabled=!1,this._overallCircuitBreakerRatePerSecond=-1,this._numSendEventsInLastSecond=0,this._onEnableDatadog=()=>{},this._onDisableDatadog=()=>{},this.debouncedCountIncrement=i()(()=>{this._numSendEventsInLastSecond+=1,setTimeout(()=>{this._numSendEventsInLastSecond-=1},1e3)},0,{leading:!0}),this.trackSendEventForCircuitBreaker=e=>!this._overallCircuitBreakerSendsDisabled&&(this._numSendEventsInLastSecond>this._overallCircuitBreakerRatePerSecond?(this._overallCircuitBreakerSendsDisabled=!0,this._onDisableDatadog(),s.k.warn("Rate limit exceeded, disabling send events"),!1):(this.debouncedCountIncrement(),!0))}static getInstance(){return A.instance||(A.instance=new A),A.instance}configure({onEnableDatadog:e,onDisableDatadog:r,overallCircuitBreakerRatePerSecond:n,collectErrors:a}){void 0!==n&&(this._overallCircuitBreakerRatePerSecond=n),void 0!==e&&(this._onEnableDatadog=e),void 0!==r&&(this._onDisableDatadog=r),void 0!==a&&(this._collectErrors=a)}disableEventSending(){this._onDisableDatadog(),this._isSendEventsEnabled=!1}enableEventSending(){this._overallCircuitBreakerSendsDisabled||this._onEnableDatadog(),this._isSendEventsEnabled=!0}isSendEventsEnabled(){return this._isSendEventsEnabled}get numSendEventsInLastSecond(){return this._numSendEventsInLastSecond}resetCircuitBreakerForTesting(){this._overallCircuitBreakerSendsDisabled=!1}beforeSend(e,r){if(!this.trackSendEventForCircuitBreaker(e)&&"view"!==e.type||!(0,m.kc)().datadog_rum_allow_send||!this.isSendEventsEnabled()&&"view"!==e.type)return!1;if(e.context||(e.context={}),(0,m.kc)().additional_rum_context_logging&&"long_task"===e.type){let r=e.context;if(d.D){let n=d.D.getState();r.selectedView=n.selectedView,r.modalShown=n.modalShown,r.dropdownShown=n.dropdownShown,r.sanitizedURL=(0,p.Br)(window.location.href),r.timeSinceInitialization=performance.now()-this._initializedAt;try{o.az.trackDefinedEvent("client_platform.long_task",{duration:e.long_task.duration,selectedView:JSON.stringify(r.selectedView),modalShown:JSON.stringify(r.modalShown),dropdownShown:JSON.stringify(r.dropdownShown),sanitizedURL:r.sanitizedURL,timeSinceInitialization:r.timeSinceInitialization})}catch(e){}}}if(this._collectErrors&&"error"===e.type){if(e.error.message.startsWith("[Figment]"))return!1;e.error.stack?e.error.stack=w(e.error.stack):e.error.stack=w(e.error.handling_stack),e.error.causes?.forEach(e=>{e.stack=w(e.stack)})}else if("resource"===e.type){if("performanceEntry"in r&&r.performanceEntry&&(r.performanceEntry instanceof PerformanceResourceTiming||r.performanceEntry instanceof PerformanceNavigationTiming)){let n={request:{upstream:{duration:{}},downstream:{duration:{}}}};for(let{name:e,description:a,duration:i}of r.performanceEntry.serverTiming)switch(e){case"cdn-cache-hit":n.cache="hit";break;case"cdn-cache-miss":n.cache="miss";break;case"cdn-pop":n.pop=a;break;case"cdn-upstream-layer":n.layer=a;break;case"cdn-rid":n.request.id=a;break;case"cdn-upstream-dns":n.request.upstream.duration.dns=i;break;case"cdn-upstream-connect":n.request.upstream.duration.connect=i;break;case"cdn-upstream-fbl":n.request.upstream.duration.fbl=i;break;case"cdn-downstream-fbl":n.request.downstream.duration.fbl=i}Object.assign(e.context,{cdn:n})}if(e.resource.url.startsWith("data:"))e.resource.url=e.resource.url.replace(/(data:.*?,).*/,"$1"),e.resource.url.length>50&&(e.resource.url=e.resource.url.slice(0,50)+"...");else if(e.resource.url.endsWith("/api/figment-proxy/monitor"))return!1}else if("action"===e.type&&"click"===e.action.type&&(e.action.target?.name??"").startsWith("Screenreader support"))return!1;return!!this._collectErrors||"error"!==e.type}}let C=A.getInstance()},865474:(e,r,n)=>{n.d(r,{Ap:()=>v,FD:()=>y,Iy:()=>_,K9:()=>T,VG:()=>m,fY:()=>h,m7:()=>p,nE:()=>f,qZ:()=>d,u2:()=>E,v4:()=>g,wI:()=>b});var a=n(841962),i=n(875877),o=n(473982),s=n(732767),l=n(671917),c=n(284004);function d(){return!!((0,a.kc)().aip_flower_garden&&(0,s.W7)())}let u=(0,o.Wh)(()=>(0,i.atom)(new Map)),m=(0,o.Wh)(()=>(0,i.atom)(new Map)),p=(0,o.Wh)(()=>(0,i.atom)(e=>e(u),(e,r,n)=>{r(u,n)})),h=(0,o.Wh)(()=>(0,i.atom)([])),_=(0,o.Wh)(()=>(0,i.atom)(new Map)),g=(0,o.Wh)(()=>(0,i.atom)({libraryVariables:[],libraryVariableSetIdToSet:{},status:"uninitialized",subscribedLibraryKeys:new Set})),f=(0,o.Wh)(()=>(0,i.atom)(e=>{let r=e(l.uk),n=e(g),a={};return r.forEach(e=>{a[e.node_id]=e}),n.libraryVariables.forEach(e=>{a[e.node_id]=e}),a})),E=(0,i.atom)(c.t.UNINITIALIZED),y=(0,i.atom)(!1),b=(0,o.Wh)(()=>(0,i.atom)(new Map)),v=(0,o.Wh)(()=>(0,i.atom)(0));(0,i.atom)([]),(0,o.Wh)(()=>(0,i.atom)(new Map)),(0,o.Wh)(()=>(0,i.atom)(new Map));let T=(0,o.Wh)(()=>(0,i.atom)(new Map))},832571:(e,r,n)=>{n.d(r,{Sy:()=>c});var a=n(875877),i=n(473982);let o=(0,i.Wh)(()=>(0,a.atom)({}));(0,a.atomFamily)(e=>(0,a.atom)(r=>r(o)[e],(r,n,a)=>{n(o,r=>({...r,[e]:a}))}));let s=(0,i.Wh)(()=>(0,a.atom)(null));(0,i.Wh)(()=>(0,a.atom)(e=>e(s),(e,r,n)=>{r(s,n)}));let l=(0,i.Wh)(()=>(0,a.atom)({})),c=(0,a.atomFamily)(e=>(0,a.atom)(r=>r(l)[e],(r,n,a)=>{n(l,r=>({...r,[e]:a}))}))},284004:(e,r,n)=>{n.d(r,{t:()=>a});var a=(e=>(e.UNINITIALIZED="UNINITIALIZED",e.INITIALIZED="INITIALIZED",e.IDLE="IDLE",e.DETECTION_REQUESTED="DETECTION_REQUESTED",e.FINDING_SIMILARITY_GROUPS="FINDING_SIMILARITY_GROUPS",e.DETECTING="DETECTING",e.GROUPING_PENDING="GROUPING_PENDING",e))(a||{})},281935:(e,r,n)=>{n.d(r,{O_:()=>h,S8:()=>p,aw:()=>a.a,eD:()=>u,fU:()=>E,hX:()=>m,hl:()=>f,y3:()=>y});var a=n(342971),i=n(47865),o=n(747484),s=n(550479),l=n(963642),c=n(266567),d=n(215439);let u=function(){let e=window.__figmaDesktop;return delete window.__figmaDesktop,e?new c.d(e):null}(),m=function(){let e=window.__figmaDesktopGetPopoutAPI?.();return e?.lockAPI(),e?new l.E(e):null}(),p=window.bellFeedAPI?window.bellFeedAPI:null;function h(e){return window.bellFeedAPI&&null!=window.bellFeedAPI.version&&window.bellFeedAPI.version>=e?window.bellFeedAPI:null}let _=u||m;_&&!navigator.userAgent.match(/figma-linux/)&&((0,i.v)({browser_name:"Figma Desktop",desktop_channel:_.beta?"beta":"stable",desktop_version:_.getInformationalVersion(),desktop_client_id:_.getClientID(),os_version:_.getOSVersion()}),(0,s.XM)("browser",{name:"Desktop",version:_.getInformationalVersion()}));let g=h(8);function f(){return(0,d.x5)(u?.getInformationalVersion()).status===d.JN.DISABLED}function E(){if(u&&o.Ay.mac){let[e,r]=`${o.Ay.osversion}`.split(".");return 10>+e||10==+e&&12>+r}return!1}function y(){return!!u}g&&(0,i.v)({browser_name:"Figma Desktop",desktop_version:g.desktopAppVersion,os_version:g.osVersion})},737992:(e,r,n)=>{n.d(r,{W2:()=>C,_A:()=>N,_p:()=>g,d8:()=>A,hW:()=>w,hu:()=>I,sS:()=>S,vn:()=>T});var a=n(163773),i=n(875877),o=n(241162),s=n(183739),l=n(421023),c=n(519667),d=n(952979),u=n(281935),m=n(885123),p=n(841962),h=n(437068);let _=(()=>{if(h.Co){let e="initialPathName";if(h.Co[e])return h.Co[e];h.Co[e]=a.Ay.location.pathname}return a.Ay.location.pathname})();function g(){return!(0,d.GZ)()&&!u.eD&&!!(((0,p.tl)().editing_file||(0,p.tl)().link_password_input)&&f(E)||f(y))}function f(e){return e(_)&&e(a.Ay.location.pathname)}function E(e){return["/file/","/design/","/board/","/slides/"].some(r=>e.startsWith(r))}function y(e){let r=(0,l.YP)(e);return r.length>=4&&"files"===r[1]&&"feed-posts"===r[2]&&!!r[3]}let b="autoOpenInDesktopApp",v="openInDesktopAppMenuModal";function T(){return(0,p.kc)().desktop_use_db_auto_open_pref?i.atomStore.get(L):I()}function I(){return h.x4?h.x4[b]:void 0}function S(e){h.x4&&(h.x4[b]=e)}function w(e){S(e),(0,p.kc)().desktop_save_auto_open_pref&&(A(e),m.D.dispatch(o.b({user_changed_auto_open_pref:!0})))}function A(e){c.e.setPreferenceValue({key:"auto_open_in_desktop",value:e})}function C(){return h.x4?h.x4[v]:void 0}function N(e){h.x4&&(h.x4[v]=e)}let L=(0,i.atom)(e=>{let r=e(s.imP.Query({})),n=p.tl().user_data?.auto_open_in_desktop;return"loaded"===r.status&&r.data?.currentUser?.userPreferences?.status==="loaded"&&(n=r.data.currentUser.userPreferences.data?.preferences.auto_open_in_desktop),n})},215439:(e,r,n)=>{n.d(r,{JN:()=>l,x5:()=>c});var a=n(392093),i=n(890882),o=n(875877);let s=[{minVersion:"116.10.0",date:"2024-01-01"},{minVersion:"116.16.0",date:"2024-09-01"},{minVersion:"116.17.0",date:"2024-09-01"},{minVersion:"116.18.0",date:"2024-09-18"},{minVersion:"124.0.0",date:"2024-10-25"},{minVersion:"124.1.0",date:"2024-11-20"},{minVersion:"124.2.0",date:"2024-12-18"},{minVersion:"124.3.0",date:"2025-01-25"},{minVersion:"124.4.0",date:"2025-02-21"},{minVersion:"124.5.0",date:"2025-04-03"},{minVersion:"124.6.0",date:"2025-04-22"},{minVersion:"124.7.0",date:"2025-05-21"}];var l=(e=>(e.SUPPORTED="SUPPORTED",e.DEPRECATED="DEPRECATED",e.DISABLED="DISABLED",e))(l||{});function c(e,r=(0,i.A)(),n=s){if(window.__figmaContent)return{status:"DISABLED"};if(null==e)return{status:"SUPPORTED"};if(!window.trustedTypes)return{status:"DISABLED"};if(1!==(0,a.Z)(e,"10.100.0")&&1===(0,a.Z)(e,"10.101.0"))return{status:"SUPPORTED"};for(let{minVersion:o,date:s}of n){if(1!==(0,a.Z)(e,o))continue;let n=(0,i.A)(s);if(n.isBefore(r))return{status:"DISABLED"};if(n.subtract(2,"month").isBefore(r))return{status:"DEPRECATED",date:n}}return{status:"SUPPORTED"}}let d=(0,o.atomWithLocalStorage)("last_dismissed_desktop_deprecation_banner","",{subscribeToChanges:!0});(0,o.atom)(e=>{let r=e(d);if(r){let e=(0,i.A)(r),n=(0,i.A)().subtract(1,"week");if(e.isAfter(n))return!0}return!1},(e,r,n)=>{r(d,n?(0,i.A)().toISOString():"")})},252829:(e,r,n)=>{n.d(r,{_:()=>a});let a=new class{constructor(){this.callbacks=[],this.matchMediaCallback=()=>{for(let e of this.callbacks)e(window.devicePixelRatio);this.updateMediaListener()},this.updateMediaListener()}updateMediaListener(){this.matchMedia&&this.matchMedia.removeListener(this.matchMediaCallback),this.matchMedia=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.matchMedia.addListener(this.matchMediaCallback)}addListener(e){this.callbacks.push(e)}removeListener(e){for(let r=0;r<this.callbacks.length;r++)this.callbacks[r]===e&&(this.callbacks=this.callbacks.splice(r,1))}}},670817:(e,r,n)=>{function a(e,r,n){let a=e;for(;a;){if(n(a))return a;if(a===r)break;a=a.parentElement}return null}function i(e){for(;;){var r;if(null==e)return null;if(null!=(r=e)&&r instanceof HTMLElement)return e;if(!("parentNode"in e))return null;e=e.parentNode}}function o(e){return!!e&&!!(d(e)||l(e)||m(e)||e.isContentEditable||e.hasAttribute("tabindex"))}function s(e){return!!e&&"INPUT"===e.tagName}function l(e){return!!e&&!!("A"===e.tagName&&e.hasAttribute("href"))}function c(e){return"button"===e.type||"submit"===e.type}function d(e){return!!e&&!!("BUTTON"===e.tagName||s(e)&&c(e))}function u(e){return l(e)||!!e&&!!(d(e)||function(e,...r){let n=e.getAttribute("role");return null!==n&&r.includes(n)}(e,"button"))}function m(e){return!!e&&(!!s(e)&&!c(e)||"SELECT"===e.tagName||"TEXTAREA"===e.tagName)}n.d(r,{Ap:()=>m,Bu:()=>u,SD:()=>i,Xx:()=>o,qR:()=>a})},538971:(e,r,n)=>{n.d(r,{N0:()=>l,Ng:()=>E,bs:()=>m,fT:()=>y,iE:()=>g,jm:()=>f,nD:()=>h,qe:()=>_,xf:()=>s,zN:()=>p});var a=n(782118),i=n(841962),o=n(532528);function s(e){return/^[^<>\/\\:?*"|]*$/.test(e)&&/^[\u0000-\u007F]+$/.test(e)&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/i.test(e)}function l(e){let r=[];for(let n of e.split(/[;,\n]/g)){let e=n.match(/^.*<(.*)>$/);e&&(n=e[1]),(n=n.trim())&&r.push(n)}return r}let c=a.C,d={};c.forEach(e=>d[e]=!0);let u=["ge.com"];function m(e){if(e in d||u.includes(e))return null;for(let r of c)if(1===(0,o.f)(e,r))return r;return null}function p(e){return e.toLowerCase().split("@")[1]||null}function h(e){return!!e&&e.endsWith((0,i.tl)().figma_email_suffix)}function _(e){let r=p(e);return!!r&&r in d}function g(e){return"work"===(e.meta?e.meta.email_domain_type:void 0)}function f(e){return!!e&&s(e)&&(e.endsWith("@figma.com")||e.endsWith("@test.figma.com"))}function E(e){return!!e&&e.startsWith("synthetic-tester")&&e.endsWith("@test.figma.com")}function y(e){return"support-share@figma.com"===e}},754668:(e,r,n)=>{n.d(r,{Yw:()=>h,br:()=>u,f3:()=>g,ih:()=>d,jc:()=>m,l7:()=>c,qd:()=>_});var a=n(498589),i=n(952979),o=n(163773),s=n(841962),l=n(750570);function c(){return(0,i.GZ)()&&s.Ay().frame_context?.type==="embed"}function d(){return(0,i.GZ)()&&s.Ay().frame_context?.type==="integration"}function u(){try{return window.self.origin===window.parent.origin}catch(e){return!1}}function m(){return c()&&!!(0,s.kc)().embedkit_v2}function p(){return(0,l.v6)(o.Ay.location.search)}function h(){let e=p();return e.embed_host||e["embed-host"]}function _(){let e=p(),r=e.embed_host||e["embed-host"],n=e["node-id"],a="0"!==e["viewport-controls"];return{embedHost:r,hideUi:e.hide_ui,isCommunityViewer:!!e.community_viewer,isViewportControlsEnabled:a,nodeId:n,showFooter:"0"!==e.footer,showPageSelector:"0"!==e["page-selector"]&&!(n&&!a),theme:g(),isDevMode:"dev"===e.m||"dev"===e.mode}}function g(){if(m()){var e;return"system"===(e=(0,s.Ay)().embed_theme)?a.n.matches?"dark":"light":e}}},780975:(e,r,n)=>{n.d(r,{n:()=>i});var a=n(653798);function i(){(0,a.ED)("[hideEmbedViewerLoader]","Hiding embed viewer loader");try{let e=document.getElementById("embed-viewer-loading-page");e&&(e.classList.add("fadeOut"),setTimeout(()=>{e.classList.add("hidden")},250))}catch(e){(0,a.ED)("[hideEmbedViewerLoader]","Failed to hide embed viewer loader",e)}}},136540:(e,r,n)=>{n.d(r,{CV:()=>d,Js:()=>l,KJ:()=>c,LU:()=>u});var a=n(891721);n(841962);var i=n(197769);let o=RegExp("^<iframe[^>]+src\\s*=\\s*(?:(?:\"([^\">]+)\")|(?:'([^'>]+)')).*><\\/iframe>$"),s=RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function l(e){let r=new URL(e).hostname;return 0===r.indexOf("www.")&&(r=r.slice(4)),r}function c(e){let r=function(e){if(!e.startsWith("<iframe"))return"";let r=a.sanitize(e,{ALLOWED_TAGS:["iframe"],ALLOWED_ATTR:["src"]}),n=o.exec(r);return n&&n.length>1?n[1]:""}(e),n=r||e,i=n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`;return s.test(i)?{isFromIFrame:!!r,url:i}:null}function d(e,r,n){let a=c(r.trim());return a?(e(i.MY({clipboardText:r,url:a.url,isTextIframe:a.isFromIFrame,entrypoint:n})),{valid:!0}):{valid:!1,reason:"Text was not a valid URL or IFrame"}}function u(e="",r){if(!e.startsWith("<meta charset='utf-8'><div><a href='https://app.asana.com"))return null;let n=a.sanitize(e,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]}).split("<a"),i=/href="(https:\/\/app\.asana\.com[^"]*)"/,o=[];for(let e of n){let r=e.match(i);r&&r[1]&&o.push({url:r[1],isFromIFrame:!1})}return o.length!==r.split("\n").length?null:o}},701194:(e,r,n)=>{n.d(r,{cx:()=>l});var a=n(482265),i=n(841962);let{flush:o,hydrate:s,cx:l,merge:c,getRegisteredStyles:d,injectGlobal:u,keyframes:m,css:p,sheet:h,cache:_}=(0,a.A)({key:"emotion",nonce:(0,i.tl)().csp_nonce})},438252:(e,r,n)=>{n.d(r,{Dr:()=>s,K2:()=>u,Pe:()=>d,SX:()=>c,gB:()=>o,j4:()=>l,to:()=>i});var a=n(777535);function i(e,r,n,i,o,s){(0,a.sx)("resource_removed_from_favorites",{resource_id:e,selectedView:r,entrypoint:n,resource_type:i,editor_type:o,fileBrowserUnfavorite:s})}function o(e,r,n,i,o,s){(0,a.sx)("resource_added_to_favorites",{resourceId:e,editor_type:o,selectedView:r,resource_type:i,entrypoint:n,fileBrowserFavorite:s})}function s(e,r){(0,a.sx)("favorites_to_move_add_to_sidebar_click",{favorited_resource_id:e,dest_team_id:r})}function l(e){(0,a.sx)("favorites_to_move_unstar_all_click",{favorited_resource_id:e})}function c(e,r){(0,a.sx)("File Browser Sidebar Custom Section Created",{new_custom_section_name:r,new_custom_section_id:e})}function d(e){(0,a.sx)("File Browser Sidebar Custom Section Deleted",{new_custom_section_id:e})}function u(e,r){(0,a.sx)("File Browser Sidebar Custom Section Renamed",{new_custom_section_new_name:r,new_custom_section_id:e})}},829531:(e,r,n)=>{async function a(){return await Promise.all([n.e(3877),n.e(4451),n.e(576),n.e(7239)]).then(n.bind(n,870576))}async function i(e,r={includeIDs:!1}){return(await a()).serializeJSX(e,r)}async function o(e,r={includeIDs:!1}){let n=await a();return await n.deserializeJSX(e,r)}async function s(e,r,n){let i=await a();return await i.getReactFunctionComponentDefinition(e,r,n)}n.d(r,{LZ:()=>o,gZ:()=>s,oy:()=>i})},614687:(e,r,n)=>{n.d(r,{jW:()=>a});let a=/^\/(?:file|design|board|slides|site)\/([0-9a-zA-Z]{22,128})(?:\/|$)/},272128:(e,r,n)=>{n.d(r,{AH:()=>g,_f:()=>f,jY:()=>_});var a=n(217950),i=n(805014),o=n(777535),s=n(789022),l=n(94489),c=n(420964),d=n(266316),u=n(166433),m=n(229419),p=n(550479),h=n(453439);function _(e){switch(e){case i.IPZ.SWT_CREATED:return"shapeWithTextCreated";case i.IPZ.SWT_EDITED:return"shapeWithTextEdited";case i.IPZ.SWT_DELETED:return"shapeWithTextDeleted";case i.IPZ.SWT_RESIZED:return"shapeWithTextResized";case i.IPZ.STICKY_EDITED:return"stickyEdited";case i.IPZ.STICKY_DELETED:return"stickyDeleted";case i.IPZ.STICKY_RESIZED:return"stickyResized"}}class g{constructor(e,r,n=1,a=!1,d=null,u=()=>{},p=!1,_=()=>{},g=()=>{}){this._analyticsEventName=e,this._processTimersForLogging=r,this._timerDepth=n,this._forwardToDatadog=a,this._tsmerMetrics=d,this._customLogMetricsCallbackHistogram=u,this._isRecording=!1,this._isCanceled=!1,this._onFrameStartCallback=()=>{},this._isFirstLogForTab=!0,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._numberOfRenderedCommentsWatermark=0,this._lastRecordedNumberOfRenderedComments=0,this._distributionByWorkName=new Map,this._lastKnownFrameMs=null,this._lastKnownFrameIndex=null,this._lastLogTime=null,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._fileKey=null,this._productType="unknown",this._gpuDeviceInfo=(0,m.l)(),this._activeNamedEvents=new Set,this._singleFrameNamedEvents=new Set,this._eventTrackers=new Map,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tileRenderersUsed=new Set,this._currentTileRenderer="",this.scheduleLogTwoMinutesFromNow=()=>{null===this._scheduledLogAtMs&&(this._scheduledLogAtMs=performance.now()+12e4)},this._onDocumentVisibilityChange=()=>{this.handleDocumentVisibilityChange(document.visibilityState)},this.updateLastKnownFrameMs=e=>{this._lastKnownFrameMs=e},this.startRecording=e=>{this._isRecording=!0,this._resetLogState(),this._lastKnownFrameMs=performance.now(),null===this._lastLogTime&&(this._lastLogTime=this._lastKnownFrameMs),e&&this.scheduleLogTwoMinutesFromNow()},this.stopRecordingAndLog=e=>{let r={};return this._distributionByWorkName.forEach((e,n)=>{r[n]=e.toPOJO()}),this._shouldLogToAnalytics()&&(this._logToAnalytics(e),this._resetLogState()),this._isRecording=!1,r},this.setFileInfo=(e,r)=>{(e!==this._fileKey||r!==this._productType)&&(this._fileKey=e,this._productType=r,this._resetLogState())},this._startRecordingNamedEvent=e=>{this._activeNamedEvents.add(e)},this.recordSingleFrameNamedEvent=e=>{this._singleFrameNamedEvents.add(e)},this._stopRecordingNamedEvent=e=>{this._activeNamedEvents.delete(e)},this.handleZoomStart=()=>{this._startRecordingNamedEvent("zoomActive")},this.handleZoomStop=()=>{this._stopRecordingNamedEvent("zoomActive")},this.handleScrollEvent=()=>{this.recordSingleFrameNamedEvent("scrollActive")},this.onNodeDragStart=()=>{this._startRecordingNamedEvent("nodeDragActive")},this.onNodeDragEnd=()=>{this._stopRecordingNamedEvent("nodeDragActive")},this.onTileRendererChanged=e=>{this._tileRenderersUsed.add(e),this._currentTileRenderer=e},this.onContextRestored=()=>{this._contextRestoredCount++},this.updateMaxRenderLayerCount=e=>{this._maxRenderLayerCount=Math.max(this._maxRenderLayerCount,e)},this.updateMaxRenderedTileBytesUsed=e=>{this._maxRenderedTileBytesUsed=Math.max(this._maxRenderedTileBytesUsed,e)},this.incrementNumAnimationsFromCpp=()=>{this._numAnimationsFromCpp++},this.incrementNumAnimationsFromTs=()=>{this._numAnimationsFromTs++},this.handleDocumentVisibilityChange=e=>{"hidden"===e&&this._shouldLogToAnalytics()&&(this._logToAnalytics("tab-hidden"),this._resetLogState()),"hidden"!==e&&this._resetLogState()},this._logToAnalytics=(e,r=!1)=>{let n={};n.schema=new l.UP().schema(),n.reason=e,n.isFirstLogAfterLoad=this._isFirstLogForTab,n.imagesLoading="loading"===this._imagesLoadingState,n.multiplayerUserCount=this._multiplayerUserCount,n.ongoingSpotlight=this._ongoingSpotlight,n.fileKey=this._fileKey,n.productType=this._productType,n.refreshRate=this.refreshRate(),n.commentsRenderCount=this._numberOfRenderedCommentsWatermark,n.contextRestoredCount=this._contextRestoredCount,n.maxRenderLayerCount=this._maxRenderLayerCount,n.maxRenderedTileBytesUsed=this._maxRenderedTileBytesUsed,(0,m.q)(this._gpuDeviceInfo,n),n.numAnimationsFromCpp=this._numAnimationsFromCpp,n.numAnimationsFromTs=this._numAnimationsFromTs,this._isFirstLogForTab=!1,null!==this._tsmerMetrics&&(n.editFrames=this._tsmerMetrics.editFrameDistribution().toLogParams(),n.editFramesWhileNotPanningOrZooming=this._tsmerMetrics.editFrameDistributionWhileNotPanningOrZooming().toLogParams(),n.remoteFrames=this._tsmerMetrics.remoteFrameDistribution().toLogParams(),n.remoteFramesWhileNotPanningOrZooming=this._tsmerMetrics.remoteFrameDistributionWhileNotPanningOrZooming().toLogParams()),this._customLogMetricsCallbackHistogram(n),n.tileRenderersUsed=JSON.stringify(Array.from(this._tileRenderersUsed)),this._tileRenderersUsed.clear(),this._tileRenderersUsed.add(this._currentTileRenderer),this._distributionByWorkName.forEach((e,r)=>{if(r in n)throw Error(`attempt to track performance for a work item with a reserved name: ${r}`);n[r]=e.toLogParams()}),n.totalBatchTime=performance.now()-this._lastLogTime,this._lastLogTime=performance.now(),r?setTimeout(()=>{this._sendLogRequest(n)},0):this._sendLogRequest(n)},this._sendLogRequest=e=>{let r={forwardToDatadog:this._forwardToDatadog,batchRequest:!0};(0,o.sx)(this._analyticsEventName,e,r)},this._processTimerTree=(e,r,n)=>{if(r>=this._timerDepth)return[];let a=[];for(let i of e){let e=[...n,i.name],o=e.join(".");if(!(o in this._lastRecordedHitCountByName)||!(o in this._lastRecordedDurationSinceLastFrame)){this._lastRecordedHitCountByName[o]=i.hitCount,this._lastRecordedDurationSinceLastFrame[o]=i.totalElapsedTime;continue}let s=i.hitCount-this._lastRecordedHitCountByName[o];if(0===s)continue;s>i.elapsedTimes.length&&console.warn(`Logged performance for ${o} too many times in one animation frame`);let l=i.totalElapsedTime-this._lastRecordedDurationSinceLastFrame[o];this._lastRecordedHitCountByName[o]=i.hitCount,this._lastRecordedDurationSinceLastFrame[o]=i.totalElapsedTime,a.push({path:e,elapsedTime:l});let c=r+1;c<this._timerDepth&&i.children.length>0&&(a=a.concat(this._processTimerTree(i.children,c,e)))}return a},this.onFrameStart=()=>{this._isRecording&&!this._isCanceled&&"ok"===c.y.getFullscreenCrashState()&&this._onFrameStartCallback()},this.setOnFrameStartCallback=e=>{this._onFrameStartCallback=e},this.onFrame=()=>{if("ok"!==c.y.getFullscreenCrashState())return"canceled";try{if(this._isCanceled)return"canceled";if("visible"!==document.visibilityState||!this._isRecording)return this._resetLogState(),"not-recording";let e=performance.now();if(null!=this._lastKnownFrameMs){let r=e-this._lastKnownFrameMs;if(r<6e4){for(let e of(this._getOrCreateDistribution("all").add(r),this._activeNamedEvents))this._getOrCreateDistribution(e).add(r);let e=performance.now(),n=[];for(let[e,a]of this._eventTrackers)a.didEventOccur()&&(n.push(e),this._getOrCreateDistribution(e).add(r));let a=performance.now()-e;for(let e of(i.glU?.updatePerfMode(n),this._singleFrameNamedEvents))this._getOrCreateDistribution(e).add(r);null!==this._scheduledLogAtMs&&this._slowFrameTracker?.checkSlowFrameAndSample(r,n,a,this._fileKey,this._productType),this._singleFrameNamedEvents.clear()}}if(this._lastKnownFrameMs=e,s.rH.areTimersOpen())return this._isCanceled=!0,"canceled";let r=this._processTimerTree(s.rH.report(),0,[]);for(let e of this._processTimersForLogging(r))this._getOrCreateDistribution(e.path.join(".")).add(e.elapsedTime);return this._tsmerMetrics?.onFrame(),null!==this._scheduledLogAtMs&&performance.now()>this._scheduledLogAtMs&&(this._logToAnalytics("two-minutes-elapsed",!0),this._resetLogState()),"success"}finally{this._slowFrameTracker?.clearPerFrameMetricsAndIncrementFrameCounter()}},this.testOnlyGetAllDistribution=()=>this._getOrCreateDistribution("all"),this.pendingImagesChanged=e=>{if("loaded"===this._imagesLoadingState)return;let r=e>0?"loading":"loaded";r!==this._imagesLoadingState&&("loading"===this._imagesLoadingState&&(this._logToAnalytics("images-loaded"),this._resetLogState()),this._imagesLoadingState=r)},this._slowFrameTracker=new h.N(p,_,g),document.addEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("visibilitychange",this._onDocumentVisibilityChange)}uninstall(){document.removeEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("visibilitychange",this._onDocumentVisibilityChange)}hasScheduledLog(){return null!=this._scheduledLogAtMs}_shouldLogToAnalytics(){return this._isRecording&&null!=this._scheduledLogAtMs}productTypeForTests(){return this._productType}_resetLogState(){this._lastKnownFrameMs=null,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._distributionByWorkName=new Map,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._activeNamedEvents.clear(),this._singleFrameNamedEvents.clear(),this._numberOfRenderedCommentsWatermark=this._lastRecordedNumberOfRenderedComments,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tsmerMetrics?.resetLogState()}getSlowFrameTracker(){return this._slowFrameTracker}refreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return"120FPS";if(r.min<32)return"60FPS";if(r.min<48)return"30FPS"}}return"UNKNOWN"}estimatedRefreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return{frameLength:1e3/120,fps:120};if(r.min<32)return{frameLength:1e3/60,fps:60};r.min}}return{frameLength:1e3/30,fps:30}}tsmerMetrics(){return this._tsmerMetrics}_getOrCreateDistribution(e){let r=this._distributionByWorkName.get(e);return r||(r=new l.UP,this._distributionByWorkName.set(e,r)),r}addEventTracker(e,r){this._eventTrackers.set(e,r)}addTimeEvent(e,r){this._getOrCreateDistribution(e).add(r)}setNumberOfRenderedComments(e){this._lastRecordedNumberOfRenderedComments=e,this._numberOfRenderedCommentsWatermark=Math.max(e,this._numberOfRenderedCommentsWatermark)}setMultiplayerPerfInfo(e){let{multiplayerUserCount:r,ongoingSpotlight:n}=e;this._ongoingSpotlight=n,this._multiplayerUserCount=r}trackOtherUserCursorMoved(){d.R9?.setOtherUserMouseMovedCallback(()=>{this.recordSingleFrameNamedEvent("otherUserCursorMoved")})}}class f{constructor(e,r){this._viewerMaxTimerDepth=5,this._viewer=null,this._rafHandle=-1,this._addCustomViewerLogMetrics=e=>{!function(e,r){e&&(r.optimizationExposures=JSON.stringify(Object.fromEntries(e.getAndClearHistogramBatchFields())))}(this._viewer,e)},this._addCustomSlowFrameTrackerLogMetrics=(e,r)=>{!function(e,r,n){if(e){let a=i.AiE.getAndClearHistogramBatchFields(),o=new Map;a.forEach((e,r)=>{o.set(r,e>0)}),r[h.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(new Map([...o,...e.getAndClearSlowFrameTrackerFields()]))),r[h.N.gpuMetricsCurrentFrameKey]=e.getViewerGpuMetricsCurrentFrameJSON().toString(),r[h.N.cpuTimerTreeCurrentFrameKey]=i.fZb.getCurrentFrameCpuTimerTreeJSON().toString(),n&&(r[h.N.gpuMetricsPreviousFrameKey]=e.getViewerGpuMetricsPreviousFrameJSON().toString(),r[h.N.cpuTimerTreePreviousFrameKey]=i.fZb.getPreviousFrameCpuTimerTreeJSON().toString())}}(this._viewer,e,r)},this._clearCustomSlowFrameTrackerLogMetrics=e=>{!function(e,r){e&&(i.AiE?.clearSlowFrameTrackerFields(),e.clearAllSlowFrameTrackerFields(),e.gpuMetricsNextFrame(r),i.fZb?.nextFrame(r))}(this._viewer,e)},this._frameDistributionTracker=new g("frame_distributions",function(e){return r=>{let n=[];for(let i of r){if(i.path.length>e||i.path.length<1){(0,p.$D)(a.e.CLIENT_PLATFORM,Error(`We should not go deeper than ${e} levels into the timer tree`));continue}let r=i.path[0];if("react-render"===r||r.startsWith("viewer:")){let e=i.path.map(e=>e.startsWith("viewer:")?e.substr(7):e).join(".");n.push({...i,path:[e]})}}return n}}(this._viewerMaxTimerDepth),this._viewerMaxTimerDepth,!0,null,this._addCustomViewerLogMetrics,!0,this._addCustomSlowFrameTrackerLogMetrics,this._clearCustomSlowFrameTrackerLogMetrics),this._renderingStateTimer=null,this._renderingActive=!1,this._viewerLoadSubscription=null,this._handleRenderingStart=()=>{this._renderingActive=!0,this._renderingStateTimer=new l.M4,this._renderingStateTimer.start()},this._handleRenderingStop=()=>{this._renderingStateTimer=null,this._renderingActive=!1},this._handleInitialDocumentLoad=()=>{this._frameDistributionTracker.startRecording(!0)},this._handleDidRebuildAfterReconnect=()=>{this._frameDistributionTracker.startRecording(!1)},this._handleWillRebuildAfterReconnect=()=>{this._frameDistributionTracker.stopRecordingAndLog("about-to-rebuild-scene")},this.onFrame=()=>{"ok"===c.y.getFullscreenCrashState()&&(this._frameDistributionTracker.onFrameStart(),this._recordRenderingTimeEvent(),this._rafHandle=requestAnimationFrame(this.onFrame),"canceled"===this._frameDistributionTracker.onFrame()&&cancelAnimationFrame(this._rafHandle))},this._rafHandle=requestAnimationFrame(this.onFrame),this._frameDistributionTracker.setFileInfo(e,r)}uninstall(){this._frameDistributionTracker.uninstall(),cancelAnimationFrame(this._rafHandle),this.setViewer(null)}getFrameDistributionTrackerForTest(){return this._frameDistributionTracker}setViewer(e){null!=this._viewer&&(this._viewerLoadSubscription&&(this._viewerLoadSubscription(),this._viewerLoadSubscription=null),this._viewer.off("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.off("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.off("renderingStart",this._handleRenderingStart),this._viewer.off("renderingStop",this._handleRenderingStop),this._viewer.off("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.off("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.off("scrollEvent",this._frameDistributionTracker.handleScrollEvent)),this._frameDistributionTracker.stopRecordingAndLog("changing-viewer"),this._viewer=e,null!=this._viewer&&(this._viewerLoadSubscription=(0,u.zM)(this._handleInitialDocumentLoad),this._viewer.on("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.on("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.on("renderingStart",this._handleRenderingStart),this._viewer.on("renderingStop",this._handleRenderingStop),this._viewer.on("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.on("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.on("scrollEvent",this._frameDistributionTracker.handleScrollEvent))}_recordRenderingTimeEvent(){this._renderingActive&&(this._renderingStateTimer&&6e4>this._renderingStateTimer.getElapsedTime()&&this._frameDistributionTracker.addTimeEvent("rendererActive",this._renderingStateTimer.getElapsedTime()),this._renderingStateTimer=new l.M4,this._renderingStateTimer.start())}setInternalFrameDistributionTrackerForTest(e){this._frameDistributionTracker=e}}},742360:(e,r,n)=>{n.d(r,{Bs:()=>k,DT:()=>N,Rm:()=>D,W8:()=>F,_B:()=>O,xI:()=>P});var a=n(777535),i=n(952979),o=n(885123),s=n(163773),l=n(437068),c=n(697737),d=n(544920),u=n(980317),m=n(553931),p=n(700509),h=n(267310),_=n(89822),g=n(488914),f=n(266111),E=n(719334),y=n(76265),b=n(736041),v=n(401562),T=n(538971),I=n(446795),S=n(841962),w=n(875877),A=n(653798);let C="google_sso_temp";var N=(e=>(e.COMMUNITY="google_one_tap_logged_out_community",e.LOGGED_OUT_FILE="google_one_tap_logged_out_file",e.PROTOTYPE="google_one_tap_prototype",e))(N||{}),L=(e=>(e.LOGGED_OUT_FOOTER="logged_out_footer",e.LOGGED_OUT_FOOTER_CONTINUE_WITH_GOOGLE="logged_out_footer_continue_with_google",e.FIGJAM_TRY_FOOTER_BANNER="figjam_try_footer_banner",e.FIGJAM_TRY_FOOTER_BANNER_CONTINUE_WITH_GOOGLE="figjam_try_footer_banner_continue_with_google",e))(L||{});let O="/api/session/google_auth/signin",R=(0,v.D)(()=>new Promise((e,r)=>{document.cookie=C+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let n=(0,i.FJ)("/start_google_sso","","width=600,height=600");if(null===n){(0,a.sx)("GoogleSSOError",{step:"window-not-found"}),r(Error((0,y.t)("auth.google-sso.unable-to-get-info")));return}window.setTimeout(function i(){let o=(0,l.OS)(document.cookie,C);if(null!==o){let n=JSON.parse(o);document.cookie=C+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",n.token?e(n):((0,a.sx)("GoogleSSOError",{step:"token-not-found"}),r(Error((0,y.t)("auth.google-sso.unable-to-get-info"))))}else n.closed?((0,a.sx)("GoogleSSOError",{step:"cookie-not-found"}),r(Error((0,y.t)("auth.google-sso.unable-to-get-info")))):window.setTimeout(i,250)},250)}));async function P(e,r){let n=await R();return await F(n,{dispatch:e,apiUrl:"/api/session/google_auth/signin_or_signup",origin:r})}async function D({dispatch:e,origin:r,redirectUrl:n}){let a=await R();return n&&e(d.WY({redirectUrl:n})),await F(a,{dispatch:e,apiUrl:O,origin:r})}function k(e,r,n){(0,h.g)("google_sso_login_redirect_attempt",n,{fromMsTeams:r}),document.cookie=C+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let a=JSON.stringify({apiUrl:O,redirectPath:e});document.cookie=`${C}=${encodeURIComponent(a)}; path=/`;let i=r?s.Ay.unsafeRedirectMsTeams:s.Ay.redirect,o="/start_google_sso?should_use_redirect_instead=1";r&&(o+="&from_ms_teams=1"),i(o)}class M extends Error{}async function F(e,{dispatch:r,apiUrl:n,origin:i,formId:s}){let l=!!i&&Object.values(N).includes(i);await (0,_.sT)({googleUserInfo:e},`google-${l?"one-tap":"sso"}`);let v={};if(s){let e=document.getElementById(s);v=(0,I.t)(e)}try{let{data:o}=await function(e,r,n){let a={name:r.name,token:r.token,token_type:r.tokenType,google_fed_cm_enabled:(0,S.kc)().google_federated_cm??!1,totp_key:n};return c.Ay.post(e,a)}(n,e,v?.totp_key);return r(E.s.flash((0,y.t)("auth.sign-in-success",{email:o.meta.email}))),o.meta&&o.meta.email_domain_type?((0,a.sx)("Sign Up (GTM)",{isWorkEmail:(0,T.iE)(o)}),await (0,f.p)("sign_up_google_sso")):((0,a.sx)("google_sso",{eventSubtype:"google_sso_success_signin",user_id:o?.meta?.id,origin:i}),await (0,f.p)("sign_in_google_sso")),{type:"login",user:o.meta}}catch(_){let{data:n}=_,a=(0,y.Jv)({data:n},n?.message),s=(0,y.t)("auth.google-sso.unable-to-auth");if(n&&n.reason&&"object"==typeof n.reason&&"two_factor"===n.reason.missing)return(0,m.MZ)()&&null!=i&&(r(d.Ts({origin:i,formState:p.qB.SIGN_IN,redirectUrl:o.D?.getState().auth.redirectUrl})),r(b.to({type:g.a,data:{}}))),w.atomStore.set(u._G,e),r((0,m.P8)({resp:_})),{type:"mfa"};let c=o.D?.getState().auth.redirectUrl||"";if(l&&(0,h.g)("google_one_tap_login_error",i,{error:a}),a===(0,y.t)("auth.error.account-not-found"))return function({userInfo:e,origin:r,dispatch:n,redirectUrl:a}){var i;null!=r&&(0,m.MZ)()?(n(d.Ts({origin:r,formState:p.qB.SIGN_UP,redirectUrl:a})),n(b.to({type:g.a,data:{}}))):o.D?.getState()?.modalShown?.type!==g.a&&(0,m.MZ)()&&(0,A.xi)("authenticate_google_user","Skipped launching auth modal before arkose verification",{auth_origin:r},{reportAsSentryError:!0,modeEventName:"google_sso_skipped_launching_auth_modal"}),i={...e,origin:r},n(d.OZ({googleIdToken:i.token})),n(d.fX({googleTokenType:i.tokenType})),n(d.m9({value:i.name})),i.origin&&n(d.dl({authOrigin:i.origin})),n(d.E({formState:p.qB.VERIFY_HUMAN,prevState:p.qB.SIGN_UP,postVerificationAction:d.Sr()}))}({userInfo:e,origin:i,dispatch:r,redirectUrl:c}),{type:"signup"};if(n?.reason==="saml_required"){let e=new M(a);throw e.errorType=p.By.SAML_REQUIRED,e}throw r(E.s.error(a||s,15e3)),Error(a||(0,y.t)("auth.google-sso.unable-to-auth"))}}},361515:(e,r,n)=>{n.d(r,{H:()=>s});var a=n(342971),i=n(805014),o=n(281935);let s={trigger(e){if(o.eD)switch(e){case i.JA.GENERIC:o.eD.triggerHaptic(a.i.GENERIC,1,0);break;case i.JA.LEVEL:o.eD.triggerHaptic(a.i.LEVEL,1,0);break;case i.JA.SNAP:o.eD.triggerHaptic(a.i.SNAP,1,0);break;default:throw Error(e)}}}},181270:(e,r,n)=>{n.d(r,{o:()=>i,p:()=>o});var a=n(411855);function i(){let e=new Set;return{subscribe:r=>(e.add(r),()=>{e.delete(r)}),emit(r){for(let n of e)n(r)}}}function o(e,r){(0,a.useEffect)(()=>e.subscribe(r),[r,e])}},254773:(e,r,n)=>{n.d(r,{NV:()=>u,U:()=>l,am:()=>d,hC:()=>c});var a=n(411855),i=n(188507),o=n(126049),s=n(190500);function l(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState();(0,s.ds)(r,i.openFile?.key,i,n,a)},[e])}function c(){let e=(0,i.Pj)();return a.useCallback((r,n)=>{let a=e.getState();(0,s.GS)(r,a.openFile?.key??"",a,n??{})},[e])}function d(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState(),o=i.openFile?.key,l=i.user&&i.user.id;(0,s.ds)(r,o,i,{userId:l,...n},a)},[e])}function u(e){let r=function(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState(),o=i.currentUserOrgId??"";(0,s.Fr)(r,o,i,{...n},a)},[e])}();return(0,o.A)(r,e,{leading:!0,trailing:!1})}},931223:(e,r,n)=>{n.d(r,{cU:()=>i,wY:()=>o});var a=n(411855);let i={width:0,height:0};function o(e,r){let[n,i]=(0,a.useState)(null);return(0,a.useLayoutEffect)(()=>{if(!e||!e.current)return;let a=new ResizeObserver(a=>{for(let o of a)if(e.current===o.target){let e=o.contentRect.width,a=o.contentRect.height;if(n&&n.width===e&&n.height===a)continue;let s={width:o.contentRect.width,height:o.contentRect.height};i(s),r&&r(s)}});return a.observe(e.current),()=>a.disconnect()},[e,r,n]),n}},193144:(e,r,n)=>{n(411855),n(336427)},308984:(e,r,n)=>{n.d(r,{R:()=>i});var a=n(411855);function i(e="minute"){let[r,n]=(0,a.useState)(new Date);return(0,a.useEffect)(()=>{let r=setInterval(()=>{n(new Date)},function(e){if("number"==typeof e)return e;switch(e){case"second":return 1e3;case"minute":return 6e4;case"hour":return 36e5;case"day":return 864e5}}(e));return()=>clearInterval(r)},[e]),r}},957568:(e,r,n)=>{n.d(r,{ww:()=>i});var a=n(411855);function i(e,r){var n,i;return n="mousedown",i=[e.current],a.useEffect(()=>{function e(e){i.some(r=>r&&r.contains(e.target))||r(e)}return document.addEventListener(n,e),()=>{document.removeEventListener(n,e)}},[n,r,i]),e}},931654:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(411855);function i(){let e=a.useRef(null),r=function(e){let[r,n]=a.useState(!1);return a.useEffect(()=>{let r=()=>n(!0),a=()=>n(!1),i=e.current;if(i)return i.addEventListener("mouseover",r),i.addEventListener("mouseleave",a),()=>{i.removeEventListener("mouseover",r),i.removeEventListener("mouseleave",a)}},[e.current,n]),r}(e);return[a.useCallback(r=>{e.current=r},[]),r,e]}},809242:(e,r,n)=>{n(411855)},336427:(e,r,n)=>{n.d(r,{$J:()=>s,ZC:()=>i,qd:()=>o});var a=n(411855);function i(e){let r=(0,a.useRef)();return(0,a.useEffect)(()=>{r.current=e},[e]),r.current}function o(e){let r=(0,a.useRef)({value:e,prev:void 0}),n=r.current.value;return e!==n&&(r.current={value:e,prev:n}),r.current.prev}function s(e){let[r,n]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{n(e)},[e]),r}},771654:(e,r,n)=>{n(411855)},157173:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(411855);function i(e){let r=(0,a.useRef)(null);return(0,a.useImperativeHandle)(e,()=>r.current),r}},365257:(e,r,n)=>{n.d(r,{x:()=>a});let a=(0,n(875877).atom)(!1)},178529:(e,r,n)=>{n.d(r,{R_:()=>A,w5:()=>w});var a=n(88823),i=n.n(a),o=n(952979),s=n(163773),l=n(841962),c=n(453261),d=n(697737),u=n(904703),m=n(736041),p=n(190500),h=n(761263),_=n(637213),g=n(320589),f=n(819828),E=n(281935),y=n(747484),b=!1;let v=null,T=null,I=null,S=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];function w(){return b}function A(e){let{user_data:r,idle_timeout_duration_in_secs:n,idle_timeout_last_active_at:a,idle_timeout_org_name:w,frame_context:A}=(0,l.Ay)();r&&n&&a&&w&&!b&&function(e,r,n,a,w,A){if((0,y.Q1)()||(0,y.Ji)()||y.Ay.isIpadNative)return;let C=`last-active-at-${e.email}`,N="idle_timeout_last_active_at_change",L=(0,o.GZ)(),O=L&&"embed"===w,R=L&&"integration"===w,P=.05*r,D=Math.min(60,r/2),k=new c.P,M=e=>{localStorage.setItem(C,e.toString()),k.sendToAllTabs(N)};M(n);let F=()=>{document.hasFocus()&&d.Ay.post(`/api/user/${e.id}/idle_timeout_last_active_at`,{is_embed:L.toString()&&!h.z4.getIsExtension()}).then(e=>{let r=e.data.meta.idle_timeout_last_active_at;r&&M(r)}).catch(e=>{401===e.status&&U()})},x=()=>!!A&&A.getState().modalShown?.type===f.xn,U=()=>{if(A&&A?.getState().authedUsers.orderedIds.length===1&&((0,p.Pg)(),u.U2.clear()),O)s.Ay.reload("idleSessionTimeout-embed");else if(R){let{pathname:e,search:r}=s.Ay.location,n=`${e}${r}&integration_host=msft`;window.location.replace(n)}else h.z4.getIsExtension()&&(0,l.kc)().dt_dev_mode_vscode_idle_timeout?(0,_.$g)():s.Ay.redirect(`/idle_timeout?fuid=${e.id}&redirect_uri=${encodeURIComponent(window.location.href)}`)},B=()=>Math.floor(Date.now()/1e3);I&&S.forEach(e=>{document.removeEventListener(e,I)}),I=i()(F,1e3*P,{trailing:!1,leading:!0}),S.forEach(e=>{document.addEventListener(e,I)});let V=()=>{T&&clearTimeout(T),v&&clearTimeout(v),!x()||document.hasFocus()||E.eD||A?.dispatch(m.ES(f.eN));let n=parseInt(localStorage.getItem(C))+r-B();v=setTimeout(()=>{g.N.getIdleTimeoutPrecheck({fuid:e.id}).then(e=>{let n=e.data.meta.idle_timeout_last_active_at;n&&n+r>=B()?M(n):U()}).catch(e=>{U()})},1e3*n),O||(T=setTimeout(()=>{x()||A?.dispatch(m.to({type:f.eN,data:{orgName:a,duration:r,onHide:()=>{F()}}}))},1e3*(n-D)))};k.register(N,()=>{V()}),V(),b=!0}(r,n,a,w,A?.type,e)}},919387:(e,r,n)=>{n.d(r,{Rg:()=>s,YA:()=>c,hM:()=>d,qr:()=>l});var a=n(552371),i=n(76265),o=(e=>(e.MINUTES="minutes",e.HOURS="hours",e.DAYS="days",e))(o||{});let s="on-idle-timeout-logged-in-ipc-key";function l(e){return e<3600?[e/60,"minutes"]:e<86400?[e/3600,"hours"]:e%86400==0?[e/86400,"days"]:[e/3600,"hours"]}function c(e,r){let n={duration:r};switch(e){case"minutes":return(0,i.tx)("settings_tab.idle_session_timeout.time.minutes",n);case"hours":return(0,i.tx)("settings_tab.idle_session_timeout.time.hours",n);case"days":return(0,i.tx)("settings_tab.idle_session_timeout.time.days",n)}}function d(e){return!!(0,a.Et)(e)&&e<43200}},841962:(e,r,n)=>{n.d(r,{AU:()=>D,Ay:()=>k,CZ:()=>L,DC:()=>v,Hk:()=>y,IX:()=>I,KI:()=>_,Lz:()=>M,O_:()=>w,Uv:()=>P,W4:()=>N,YG:()=>S,b5:()=>A,bg:()=>R,ck:()=>O,gq:()=>u,kc:()=>s.k,mm:()=>x,sL:()=>C,sj:()=>b,tl:()=>T,u3:()=>g,u4:()=>E,w0:()=>f});var a,i,o=n(492769),s=n(825491),l=n(197445),c=n(401562),d=n(750570);let u={disable_personal:!0,teams:[],team_users:[],roles:[],orgs:[],org_drafts_owners:[],user_favorite_fonts:[],is_free_user:!0,is_starter_user:!0},m=(()=>{let e=JSON.parse(JSON.stringify(T().feature_flag_rules||{}));return e.hash_function=T().feature_flags_hash_function||"md5",e})(),p=(()=>{let e=JSON.parse(JSON.stringify(T().launchdarkly_client_flags||{}));return Object.freeze(e),e})(),{zoom_client_user_agent:h}=T();h&&function(e,r){if(e.navigator.userAgent!==r){let n={get:function(){return r}};try{Object.defineProperty(e.navigator,"userAgent",n)}catch(r){e.navigator=Object.create(navigator,{userAgent:n})}}}(window,h);let _=(0,c.D)(()=>m),g={};function f(){return p}function E(e,r,n){return(0,s.k)()[e]?r:n}(i||(i={})).withFeatureFlag=function(e,r){if((0,s.k)()[e])return r;let n=e=>null;return n.displayName="",n};let y=e=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,editing_file:e}},b=()=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,payment_flow_data:null}};function v(){return T().payment_flow_data}function T(){return window.INITIAL_OPTIONS||{}}function I(){return"local"===T().cluster_name}function S(){return"staging"===T().cluster_name}function w(){return"prod"===T().cluster_name}function A(){return I()||S()||T().cluster_name?.startsWith("devenv")||"gov-staging"===T().cluster_name}function C(){let e=T().cluster_name;return e?"gov"===e:"figma-gov.com"===window.location.hostname}function N(){return C()?"support-figgov@figma.com":"support@figma.com"}function L(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),`https://${C()?"static.figma-gov.com":"static.figma.com"}/${e}`}function O(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),L(`uploads/${e}`)}function R(){return T().consent_region}function P(){return function(e){switch(e){case"staging":return e;case"prod":return"production";case"gov":return"gov-prod";case"gov-staging":return"gov-staging";default:return"development"}}(T().cluster_name||"")}function D(){return T().editing_file?.editor_type??void 0}a="campfire_model_enabled",Object.defineProperty(T(),a,{writable:!1,configurable:!1});let k=T,M="https://fakepath.figma.com",F=!1;function x(){let e=[(0,l.$e)(),(0,l.bQ)()];for(let r=0;r<e.length;r++){let n=e[r];if(n){let e=(0,d.xL)(n);if(e.locale)return!function(e){let r=e.locale,n=!!e.persistLocale;if(!r||!n)return;let a=T().user_data;if(!a)return;let{id:i,locale:s}=a;o.Yv.includes(r)&&s!==r&&(F||(F=!0,fetch("/api/user",{method:"PUT",body:JSON.stringify({id:i,locale:r}),headers:{"Content-Type":"application/json"}})))}(e),(0,l.$W)(e.locale)}}let r=(0,l.Np)();if(r){let e=r.split("/")[1];if(e&&o.Yv.includes(e))return(0,l.$W)(e)}let{user_data:n}=T();return n?.locale&&n?.locale!==o.MY?[n?.locale,o.MY]:[o.MY]}},215587:(e,r,n)=>{n.d(r,{Dz:()=>d,SI:()=>p,fF:()=>m});var a=n(841962),i=n(747484),o=n(504695),s=n(43617),l=n(519654);let c=window.location.pathname;function d(){let e=window.FigmaMobile,r=!e||!!e.ui3Enabled;return g("unified_index_v3_figjam_mobile_device")&&r}function u(e){return!function({isDesign:e,isDesignPrototypeViewer:r,isDevMode:n,isEmbed:i,isEmbedKitV2Enabled:s,isFigjam:l,isFigjamUi3LabEnabled:c,isFigjamMobileDevicesEnabled:d,isMobileDevice:u,isSites:m,isSlides:p,isCooper:h,isIllustration:_,isUI3ForceDevOnly:g,isUi3LabEnabled:f,isVSCodeExtension:E,isLoggedOutCommentUser:y}){return!!g||!!y||!!p||!!m||!!h||!!_||(E?!!(0,a.kc)().dt_vscode_ready_for_dev:!!i&&!!s||(l?!!c&&(!u||d):(!!e||!!n)&&!r&&!i&&!!(0,o.M)()&&f))}(e)?"ui2":"ui3"}function m(){let e=(0,a.AU)();return u({isDesign:"design"===e,isDesignPrototypeViewer:c.startsWith("/proto/"),isDevMode:"design"===e,isEmbed:a.Ay().frame_context?.type==="embed",isEmbedKitV2Enabled:g("embedkit_v2"),isFigjam:"whiteboard"===e,isFigjamUi3LabEnabled:(0,s.Y)({trueOverrideUserFlag:_("unified_index_v3_figjam_toggle_override_true"),falseOverrideUserFlag:_("unified_index_v3_figjam_toggle_override_false"),canOverride:(0,l.Q4)(),defaultValue:!0}),isFigjamMobileDevicesEnabled:d(),isMobileDevice:i.Xb,isSites:"sites"===e,isSlides:"slides"===e,isCooper:!1,isIllustration:!1,isUI3ForceDevOnly:(0,s.Y)({trueOverrideUserFlag:_("force_ui3_dev_only_override_true"),falseOverrideUserFlag:_("force_ui3_dev_only_override_false"),canOverride:"prod"!==(0,a.Ay)().cluster_name,defaultValue:!1}),isUi3LabEnabled:h(),isVSCodeExtension:!1,isLoggedOutCommentUser:!1})}function p(){return u({isDesign:!0,isUi3LabEnabled:h(),isDesignPrototypeViewer:!1,isDevMode:!1,isEmbed:!1,isEmbedKitV2Enabled:g("embedkit_v2"),isFigjam:!1,isFigjamUi3LabEnabled:!1,isFigjamMobileDevicesEnabled:!1,isMobileDevice:!1,isSites:!1,isSlides:!1,isCooper:!1,isIllustration:!1,isUI3ForceDevOnly:!1,isVSCodeExtension:!1,isLoggedOutCommentUser:!1})}function h(){return(0,s.Y)({trueOverrideUserFlag:_(l.pU),falseOverrideUserFlag:_(l.EM),canOverride:!0,defaultValue:(0,l.Mx)()})}function _(e){for(let r of a.Ay()?.user_flags||[])if(r.name===e)return!0;return!1}function g(e){return!0===(0,a.kc)()[e]}},844535:(e,r,n)=>{function a(){return!1}n.d(r,{Is:()=>function e(r){let n=r.recordingKey();if(n){if(r.__registeredRecordingKey)n!==r.__registeredRecordingKey&&(c(r),e(r));else for(let e in r.__registeredRecordingKey=n,r.__playbackHandlers)o(l(n,e),r.__playbackHandlers[e])}},YJ:()=>u,aH:()=>d,k3:()=>a,nL:()=>c});let i=Object.create(null);function o(e,r){if(-1!==(e in i?i[e].indexOf(r):-1))throw Error(`Tried to register already registered playback handler for ${e}`);i[e]||(i[e]=[]),i[e].push(r)}function s(e,r){let n=e in i?i[e].indexOf(r):-1;if(-1===n)throw Error(`Tried to unregister unknown playback handler for ${e}`);i[e].splice(n,1),0===i[e].length&&delete i[e]}function l(e,r){return`${e}.${r}`}function c(e){if(e.__registeredRecordingKey){for(let r in e.__playbackHandlers)s(l(e.__registeredRecordingKey,r),e.__playbackHandlers[r]);e.__registeredRecordingKey=null}}let d="SKIP_RECORDING";function u(e,r,n,a={}){a.record||(e=>e);let i=a.playback||(e=>e),c=e.__playbackHandlers||(e.__playbackHandlers=Object.create(null)),d=c[r];if(c[r]=e=>n(i(e)),d&&e.__registeredRecordingKey){let n=l(e.__registeredRecordingKey,r);s(n,d),o(n,c[r])}return function(e){0===n.length&&(e=void 0),n(e)}}},199699:(e,r,n)=>{n.d(r,{Cg:()=>E,Ug:()=>p,dZ:()=>_,rd:()=>f,v7:()=>y,xt:()=>b});var a=n(805014),i=n(437068);n(76265);var o=n(585564),s=n(190500),l=n(366172),c=n(885123),d=n(453261),u=n(697737);let m="keyboardLayoutPreference",p="keyboardLayoutPreference",h=new Map(Object.entries(a.aTn).map(([e,r])=>[e,r])),_=new Map(Object.entries(a.aTn).map(([e,r])=>[r,e]));function g(e){let[r]=e.split(":"),n=h.get(r);return r&&n?{layout:n}:{layout:a.aTn.UNKNOWN}}function f({layout:e}){if(!i.x4)return;let r=a.aTn[e];i.x4.setItem(m,r),new d.P().sendToOtherTabs(p,r),function(e){try{let r=c.D.getState();(0,s.uE)("keyboard_layout_preference",r,{layout:a.aTn[e.layout],eventName:e.eventName,detectedLayout:e.detectedLayout,detectedLayoutStr:e.detectedLayoutStr})}catch(e){}}({layout:e,eventName:"user_manual_change"}),a.glU.reloadShortcuts(e),u.Ay.put("/api/user",{keyboard_preference:a.aTn[e],keyboard_preference_method:"manual"})}function E(e){if(!i.x4)return;i.x4.setItem(m,e);let{layout:r}=g(e);l.Y5&&l.Y5.isReady()&&a.glU.reloadShortcuts(r)}function y(){return function(){if(i.x4){let e=i.x4.getItem(m);if(null!=e)return g(e)}if(!c.D)return{layout:a.aTn.UNKNOWN};let e=c.D.getState().user?.keyboard_layout,r=h.get(e);if(!e||!r)return{layout:a.aTn.UNKNOWN};let n=e?r:a.aTn.UNKNOWN;return E(a.aTn[n]),{layout:n}}().layout}function b(){return 0===Object.keys(a.aTn).length?[]:[{name:"keyboard-layout-menu-option",callback:(e,r,n)=>{n(o.FU({tab:"layout"})),l.Y5.triggerAction("toggle-keyboard-shortcuts")}}]}},400254:(e,r,n)=>{n.d(r,{C:()=>M});var a=n(411855),i=n(217950),o=n(444751),s=n(118653),l=n(813746),c=n(320174),d=n(919911),u=n(145895),m=n(62887),p=n(537336),h=n(239033),_=n(222758),g=n(455074),f=n(294526),E=n(474713),y=n(194931),b=n(929702),v=n(736923),T=n(922070),I=n(550479),S=n(799287),w=n(483600),A=n(42062),C=n(377519),N=n(632975),L=n(327067),O=n(34480),R=n(46481);let P='{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}',D=[T.Ey,c.v5,c.YW,l.Db,o.iK,v.jL];function k({value:e,valueFormat:r,onSave:n,themeOverride:k,lexicalContentClassName:M,namespace:F,placeholder:x,innerRef:U,plugins:B=[],hasToolbar:V=!1,isEditable:G=!0}){let H={link:G?R.nf:R.Jj,list:{listitem:R.Aw,ol:R.cg,ul:R.e6},text:{bold:R.ZS,italic:R.kQ,strikethrough:R.Hn,code:R.ti},paragraph:R.FY,heading:{h1:R.R_,h2:R.R_},code:R.DV,...k},W=(0,a.useMemo)(()=>{if("lexical"===r||!e)return P;let n=(0,s.D)({nodes:[T.Ey,c.v5,c.YW,l.Db,o.iK,v.jL],onError:r=>{console.error(r),(0,I.$D)(i.e.EXTENSIBILITY,r,{extra:{htmlString:e}})}});return(0,w.D)(e,n,"json")},[r,e]),[K,Y]=(0,a.useState)(!1),[$,j]=(0,a.useState)(null);return a.createElement(m.n,{initialConfig:{namespace:F,onError(n){console.error(n),(0,I.$D)(i.e.EXTENSIBILITY,n,{extra:{namespace:F,editorInput:"lexical"===r?e||P:W,valueFormat:r}})},theme:H,nodes:D,editorState:"lexical"===r?e||P:W,editable:G}},a.createElement("div",{ref:e=>{null!==e&&j(e)}},a.createElement(b.$,{contentEditable:a.createElement(p.a,{className:M,ref:U}),placeholder:x,ErrorBoundary:h.A}),V&&a.createElement(O.A,{setIsLinkEditMode:Y}),G&&$&&a.createElement(N.A,{anchorElem:$,isLinkEditMode:K,setIsLinkEditMode:Y})),a.createElement(_.G,null),a.createElement(f.Q,null),a.createElement(E.E,{transformers:[d.mK,d.NB,d.eA,d.gb,d.d7,d.Pi,d.WY,d.Eg,d.gW,d.Sq,d.TB,d.Up]}),"lexical"===r&&a.createElement(A.D,{value:e}),!G&&"html"===r&&a.createElement(w._,{htmlString:e}),n&&a.createElement(y.D,{onChange:(e,r,a)=>{a.has("focus")||e.read(()=>{n({html:(0,S.T)(r),lexical:JSON.stringify(e.toJSON())})})},ignoreSelectionChange:!0}),a.createElement(C.A,null),a.createElement(u.x,null),a.createElement(g.W,null),a.createElement(L.A,null),...B)}function M({value:e,valueFormat:r,themeOverride:n,lexicalContentClassName:i,namespace:o,innerRef:s}){return a.createElement(k,{value:e,valueFormat:r,isEditable:!1,lexicalContentClassName:i,themeOverride:n,namespace:o,innerRef:s})}},728722:(e,r,n)=>{n.d(r,{Rs:()=>v,ZA:()=>f,oS:()=>S,p:()=>T,rp:()=>b});var a=n(411855),i=n(707062),o=n(279650);n(507589);var s=n(471222),l=n(55545),c=n(737859);n(777535);var d=n(32050),u=n(336427),m=n(841962),p=n(736942),h=n(771952),_=n(66239);function g(){let e=a.useContext(_.ob);if(!e)throw Error("Tried to use useSubscription outside a LiveGraph context provider");return e}function f(){return g().client}function E(e){return!e.hasOwnProperty("enabled")||!!e.enabled}function y(e){return Array.isArray(e)&&(1===e.length||2===e.length)&&(0,i.bu)(e[0])}function b(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],o=(y(e)?e[1]:e[2])??{},l=(0,d.zN)(n,i.lw),m=E(o),_=function(){let[e,r]=a.useState(0);return a.useCallback(()=>r(e=>e+1),[])}(),f=g(),v=o.traceId,T=function(e,r){let n=a.useRef((0,h.g)()),o=(0,u.ZC)(e),s=(0,u.ZC)(r);return void 0===o||void 0===s||o===e&&(0,i.lw)(r,s)||(n.current=(0,h.g)()),n.current}(r,l),I=a.useMemo(()=>f.client?.viewHasStaticQueries(r)?{...l,__requestId:T}:l,[l,T,r,f.client]),S=m&&I?f.mock?f.mock.useSubscription(r,I):f.client?.getViewResult(r,I)??c.F5:s.F4;return a.useEffect(()=>{if(!f.mock&&!1!==m&&I)return f.client?.subscribe(r,I,_,v)},[m,f.client,f.mock,r,v,I,_]),a.useMemo(()=>p.Qw.from(S),[S])}let v=(0,m.kc)().use_subscription_v2?b:function(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],o=(y(e)?e[1]:e[2])??{},l=E(o),[d,u]=a.useState(l&&n?c.F5:s.F4),m=g(),[h,_]=a.useState(n),f=o.traceId,b=d;return m.mock&&n&&(b=m.mock.useSubscription(r,n)),n&&!(0,i.lw)(n,h)&&(_(n),u(b=l?c.F5:s.F4)),a.useEffect(()=>{if(m.mock)return;if(!1===l){u(s.F4);return}if(!h)return;let e=m.client?.subscribe(r,h,e=>{u(e)},f);return()=>{e?.()}},[l,h,m.client,m.mock,r,f]),a.useMemo(()=>p.Qw.from(b),[b])};function T(e,r,n={}){let i=g(),s=E(n),[l,c]=a.useState({}),[d]=a.useState(()=>new o.A(i.client,()=>c({})));return a.useLayoutEffect(()=>{d.update(e,s?r:[])},[d,e,r,s]),a.useLayoutEffect(()=>()=>d.clear(),[d]),a.useMemo(()=>r.map(e=>({args:e,result:s?p.Qw.from(d.currentResult(e)):p.Qw.disabled()})),[d,r,s,l])}class I{constructor(e,r,n){this.viewArgs=e,this.traceId=(0,h.g)(),this.errors=null,this._isLoading=!0,this.timer=new l.M({onTimeout:()=>r(this),timeoutMs:n})}finish(){this._isLoading=!1,this.timer.finish()}get timeElapsedMs(){return this.timer.getTime()}get wasBackgrounded(){return this.timer.backgrounded}get wasOffline(){return this.timer.wasOffline}get isLoading(){return this._isLoading}}function S(e,r,n){let o=a.useRef(null),s=!1!==n.enabled,l=n.subscriptionLogger,c=a.useRef(r),d=o.current;!o.current&&s&&(o.current=new I(r,e=>l.onEvent("stuck",m,e),l.stuckMs));let u=s?o.current.traceId:void 0,m=v(e,r,{enabled:s,traceId:u});if(null===d&&s&&l.onEvent("initiated",m,o.current),!(0,i.lw)(r,c.current)){let e=new I(r,e=>l.onEvent("stuck",m,e),l.stuckMs);o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",m,o.current,{nextTraceId:e.traceId})),o.current=e,l.onEvent("initiated",m,o.current),c.current=r}return a.useEffect(()=>{"loaded"===m.status?o.current?.isLoading&&(o.current.finish(),l.onEvent("loaded",m,o.current)):"errors"===m.status&&o.current?.isLoading&&(o.current.finish(),o.current.errors=m.errors,l.onEvent("error",m,o.current))},[m,m.errors,m.status,l]),a.useEffect(()=>()=>{o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",m,o.current))},[]),m}},283972:(e,r,n)=>{n.d(r,{Nc:()=>p,XJ:()=>d,ad:()=>c,f2:()=>m,h7:()=>l,zb:()=>u});var a=n(355312),i=n(73584),o=n(314540),s=n(977235);function l(e){return{id:e.key,key:e.key,libraryKey:e.library_key||(0,i.$)(e.key),name:e.name,fileRepoId:e.file_repo_id,editorType:e.editor_type,folderId:e.folder_id,teamId:e.team_id,hasFileLinkPassword:!1,thumbnailUrl:e.thumbnail_url||"",thumbnailUrlOverride:e.thumbnail_url_override||"",thumbnailGuid:e.thumbnail_guid||null,clientMeta:e.client_meta,touchedAt:e.touched_at,lastPublishedAt:e.last_published_at??"",canView:!0,linkAccess:e.link_access,repo:{id:e.file_repo_id||"",name:"",createdAt:new Date,deletedAt:new Date,trashedAt:null,updatedAt:new Date,linkAccess:e.link_access,protoLinkAccess:e.proto_link_access,hasFileLinkPassword:!1,hasProtoLinkPassword:!1,orgAudience:null,orgBrowsable:!0,hasActiveBranches:!1},project:null,isTeamTemplate:e.is_team_template||!1}}function c(e,r,n,a){return{userId:r,resourceType:o.bk.FOLDER,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,project:{id:e.id,path:e.path,orgId:n,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:null!=e.deleted_at?new Date(e.deleted_at):null,trashedAt:null!=e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,canEdit:!1,description:e.description,team:{id:e.team_id??"",orgId:n,name:"",licenseGroup:{name:""},studentTeamAt:null,eduGracePeriod:{id:"",isValid:!1},restrictionsList:[],subscription:o.Qh.OK,gracePeriodEnd:null,canEdit:!1,canAdmin:!1}}}}function d(e,r,n,a){return{userId:r,orgId:n??null,teamId:e.fig_file?.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id??"",resourceType:o.bk.PROTOTYPE,prototype:{id:e.id||"unknown",name:e.name,fileKey:e.fig_file.key,pageId:e.page_id,thumbnailUrl:e.thumbnail_url,file:{parentOrgId:e.fig_file.parent_org_id||null,key:e.fig_file.key,folderId:e.fig_file.folder_id,teamId:e.fig_file.team_id,fileRepoId:e.fig_file.file_repo_id,hasProtoLinkPassword:e.fig_file.has_proto_link_password,name:e.fig_file.name,editorType:e.fig_file.editor_type,protoLinkAccess:e.fig_file.proto_link_access,createdAt:new Date(e.fig_file.created_at),trashedAt:e.fig_file.trashed_at?new Date(e.fig_file.trashed_at):null,prototypeUrl:{status:s.tT.Loaded,data:e.fig_file.prototype_url}}}}}function u(e,r,n,a){return{userId:r,orgId:n??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,resourceType:o.bk.TEAM,teamId:null,team:{id:e.id,orgId:e.org_id,name:e.name,deletedAt:null,imgUrl:null,licenseGroup:null}}}function m(e,r,n,a){return{userId:r,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.key,resourceType:o.bk.FILE,file:l(e)}}function p(e,r,n,i){return{userId:r,orgId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,sidebarSectionId:i??null,resourceType:o.bk.WORKSPACE,teamId:null,workspace:{...e,orgId:n,colorConfig:null,description:null,orgAccess:"",createdAt:new Date,publicLinkControlsSetting:"",publicLinkControlsMaxExpiration:"",hasCustomPublicLinkControlsSetting:!1,isPluginAllowlisted:!1,canRead:!1,imgUrlTransformed:e.imgUrl,...a.fM}}}},880261:(e,r,n)=>{n.d(r,{Q:()=>d,r:()=>c});var a=n(411855),i=n(629019),o=n.n(i),s=n(453783),l=n(787950);function c({setMaxWidth:e,render:r}){let[n,i]=a.useState(new Map),o=a.useMemo(()=>n.size?Math.max(...n.values()):void 0,[n]);a.useLayoutEffect(()=>e(o),[o,e]);let s=a.useCallback((e,r)=>i(n=>{if(n.get(e)===r)return n;let a=new Map(n);return"number"==typeof r?a.set(e,r):a.delete(e),a}),[]);return a.createElement(a.Fragment,null,r({reportWidthOfValue:s}))}function d(e){return a.createElement(c,{setMaxWidth:e.setMaxWidth,render:({reportWidthOfValue:r})=>a.createElement(a.Fragment,null,e.options.map((n,i)=>a.createElement(u,{key:i,reportWidth:r,value:n,optionProps:{fullWidth:!0,formattedValue:e.formatOption(n),selected:!0,icon:e.getIcon(n)}})))})}function u({reportWidth:e,value:r,optionProps:n}){let i=a.useRef(null);return a.useLayoutEffect(()=>{let n=i.current;if(n){let a=()=>{e(r,n.getBoundingClientRect().width)};a();let i=new ResizeObserver(a);return i.observe(n),()=>{i.disconnect(),e(r,void 0)}}},[r,e,n.svg]),a.createElement("div",{className:l.D,"aria-hidden":!0},a.createElement(s.c$,{...n,additionalStylesClassName:o()(n.additionalStylesClassName,l.Z),forwardedRef:i}))}},866415:(e,r,n)=>{function a(e){let r=null;return function(...n){if(null!=r&&r.args.length===n.length){let e=!0;for(let a=0,i=n.length;a<i;a++)if(n[a]!=r.args[a]){e=!1;break}if(e)return r.result}return(r={args:n,result:e(...n)}).result}}function i(e){let r=new WeakMap;return n=>{let a=r.get(n);if(a)return a;let i=e(n);return r.set(n,i),i}}n.d(r,{cm:()=>i,xx:()=>a})},868292:(e,r,n)=>{n.d(r,{$G:()=>p,Ad:()=>o,B3:()=>f,Hh:()=>g,Jj:()=>_,S:()=>h,Y7:()=>E,ai:()=>c,f1:()=>m,kJ:()=>d,s$:()=>u});var a=n(703079),i=n(424396);let o=["memory.fullscreen.","performance.fullscreen."],s=!0;function l(e,r){let n=-1/0;return()=>{let a=Date.now()/1e3;a-n>e&&(n=a,r())}}window.addEventListener("error",e=>{if(!s)return;s=!1;let{message:r,filename:n}=e,i=/abort/i.test(r),o=/\/compiled_/.test(n);(0,a.Rh)("unhandled_error",{abort:i,fullscreen:o})});let c=l(30,()=>{(0,a.Rh)("context_lost")}),d=l(30,()=>{(0,a.Rh)("context_restored")});function u(e){window.figmaPerfTesting&&window.postMessage({name:e,value:performance.now()/1e3},"*")}function m(){(0,a.Rh)("dirty_after_load")}function p(){(0,a.Rh)("consecutive_flushes")}function h(){(0,a.Rh)("consecutive_image_change_skips")}function _(){(0,a.Rh)("image_paste_error")}function g(){(0,a.Rh)("unsaved_changes_bell")}function f(e){(0,a.Rh)("reconnecting_banner",{client:e})}function E(e){return(0,i.x)(e,!0,e.productType)}},819616:(e,r,n)=>{n.d(r,{Sd:()=>y,Zp:()=>f,tB:()=>E,wc:()=>m}),n(841962);var a=n(747484);n(437068);var i=n(190500),o=n(366172),s=n(509343),l=n(142420),c=n(885123),d=n(453261),u=n(697737),m=(e=>(e.MouseScrollToZoom="mouse-scroll-wheel-zoom",e.RightClickDragToPan="right-click-drag-to-pan",e))(m||{}),p=(e=>(e.UserManualChange="user_manual_change",e.Onboarding="onboarding",e))(p||{});function h({navigationPreference:e,enabled:r,eventOrigin:n}){var a,o;new d.P().sendToOtherTabs(e,JSON.stringify(r)),function(e){try{let r=c.D.getState();(0,i.uE)("navigation_preferences",r,{navigationPreference:e.navigationPreference,enabled:e.enabled,eventOrigin:e.eventOrigin})}catch(e){}}({navigationPreference:e,enabled:r,eventOrigin:n}),a=e,o=r,c.D.getState().user?.id&&u.Ay.put("/api/user","mouse-scroll-wheel-zoom"===a?{mouse_scroll_to_zoom:o}:{right_click_drag_to_pan:o})}let _=[!0,1,"1","true"];function g(e){return _.includes(e)}function f(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-scroll-wheel-zoom-enabled":"set-scroll-wheel-zoom-disabled")}(g(e))}function E(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-right-click-pan-enabled":"set-right-click-pan-disabled")}(g(e))}function y(){return[{separator:!0,platforms:["!ipad"]},{action:"toggle-scroll-wheel-zoom",platforms:["!ipad"],hideForQuickCommand:a.Ay.isIpad,"data-onboarding-key":l.oi.ZOOM,callback:()=>{h({navigationPreference:"mouse-scroll-wheel-zoom",enabled:!(0,s.UK)().scrollWheelZoom.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().scrollWheelZoom,propertyValue:!0},{action:"toggle-right-click-pan",platforms:["!ipad"],hideForQuickCommand:a.Ay.isIpad,"data-onboarding-key":l.oi.PAN,callback:()=>{h({navigationPreference:"right-click-drag-to-pan",enabled:!(0,s.UK)().rightClickPan.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().rightClickPan,propertyValue:!0},{separator:!0,platforms:["!ipad"],flags:["!edit"]}]}},21428:(e,r,n)=>{n.d(r,{y:()=>s});var a=n(411855),i=n(805014),o=n(254773);function s(){let e=(0,o.U)(),r=i.h3O?.getSessionState(),n=function(){let[e,r]=a.useState(navigator.onLine);return a.useEffect(()=>{let e=()=>r(navigator.onLine);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e}();return a.useEffect(()=>{!n&&r&&r!==i.kul.DETACHED&&e("offline_multiplayer_discrepancy",{isNavigatorOnline:navigator.onLine,isJoined:r===i.kul.JOINED,multiplayerSessionState:r.toString()})},[n,r,e]),n||r===i.kul.JOINED}},298359:(e,r,n)=>{n.d(r,{AS:()=>o,En:()=>l,mL:()=>s,u9:()=>c,vs:()=>i}),n(411855);var a=n(697737);let i=25,o="next",s="prev";function l(e,r,n,i=o){return new Promise((o,l)=>{let c=n&&n.pagination,d=c&&(i===s?c.prev_page:c.next_page);(null==c||d)&&(d=d||`${e}${-1===e.indexOf("?")?"?":"&"}page_size=${r}`,(0,a.k9)(d).then(({data:e})=>{let r=e.pagination;null==c?c=r:i===s?r.prev_page&&(c.prev_page=r.prev_page):c.next_page=r.next_page,e.meta.pagination=c,o(e.meta)},l))})}function c(e){return!!(!e?.pagination||e.pagination.next_page)}},480051:(e,r,n)=>{n.d(r,{_H:()=>a});function a(){let e=`figma.pc=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}},631769:(e,r,n)=>{n.d(r,{R:()=>o,X:()=>i});var a=n(263383);let i=(0,a.kf)("lazy_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,730302))).QuillEditor})}),o=(0,a.kf)("lazy_readonly_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(231),n.e(3036),n.e(4195),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,730302))).ReadOnlyQuillEditor})})},801828:(e,r,n)=>{n.d(r,{$J:()=>s,Ee:()=>l,OZ:()=>o,ZB:()=>d,mm:()=>c}),n(649169);var a=n(747484),i=n(41893);function o(e){if(!e.keyShortcutKey)return"";let r=i.y.isApple();var n=r?"\u2318":"Ctrl+";return e.keyShortcutShift&&(n+=r?"\u21E7":"Shift+"),e.keyShortcutOption&&(n+=r?"\u2325":a.Ay.chromeos?"Search+":"Alt+"),`   ${n}${e.keyShortcutKey}`}function s(e){if(!e)return"";if(e.length<1||"<"!==e.charAt(0)||">"!==e.charAt(e.length-1))return e;var r=e.replace(/(<\/[ph]\d?>)/g,"\n");return(r=(r=r.replace(/(<([^>]+)>)/gi,"")).replace(/&nbsp;/g,"\xa0")).replace(/&amp;/g,"&")}let l=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g;function c(e){if(!e)return"";if(e.length>2&&"<"===e.charAt(0)&&">"===e.charAt(e.length-1))return e;var r=e.replace(/^.*/gm,"<p>$&</p>");return(r=(r=r.replace(l,e=>`<a href="${e}">${e}</a>`)).replace(/<p><\/p>/g,"<p><br></p>")).replace(/(\r\n|\n|\r)/gm,"")}function d(e){return""===s(e)?.trim()}},213830:(e,r,n)=>{n.d(r,{$9:()=>u,EM:()=>s,J1:()=>c,V$:()=>d,oI:()=>m});var a=n(183121);let i=[],o=0;function s(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}let l=(0,a.Xs)(),c=l,d=l.v2;function u(){c.disconnect();let e=(0,a.Xs)();c=e,d=e.v2,c.connect()}function m(){(0,a.oI)()}window.realtimeClient=l,[].push(function(){o>0||i.forEach(e=>{o+=1,setTimeout(()=>{try{e()}finally{o-=1}},6e4+24e4*Math.random())})})},183121:(e,r,n)=>{n.d(r,{EM:()=>h,Xs:()=>f,oI:()=>_});var a,i=n(777535),o=n(841962),s=n(677737),l=n(399991);let c=!1,d=!1,u=[],m=[],p=0;function h(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}function _(){d=!0}let g=-1;function f(){let e=null,r=null,n=null,a=null,u=null,p={},_=!0,f=Date.now(),E=0,y=null,b=!0,v=null,T=null;(0,o.kc)().realtime_disconnect_in_background&&(T=()=>{let e=null;"hidden"===document.visibilityState?e||(e=setTimeout(()=>{I(),e=null},12e4)):(e&&(clearTimeout(e),e=null),null==a&&(console.log("[Realtime] Attempting reconnect due to page visibility change."),S()))},document.addEventListener("visibilitychange",T));let I=()=>{null!=u&&clearInterval(u),null!=a&&a.close(),u=null,a=null,_=!0},S=()=>{y&&(clearTimeout(y),y=null),v&&(window.removeEventListener("online",v),v=null),L()},w=()=>{if(I(),!b||null!=y)return;let e=4+(Math.min(128,4*Math.pow(2,E))-4)*Math.random();console.log(`[Realtime] Disconnected. Will attempt reconnect in ${e.toFixed(0)} seconds.`),y=setTimeout(()=>{console.log(`[Realtime] Attempting reconnect now after waiting ${e.toFixed(0)} seconds.`),S()},1e3*e),E++,v=()=>{console.log("[Realtime] Attempting reconnect due to connectivity change."),navigator.onLine&&S()},window.addEventListener("online",v)},A=e=>{a&&a.readyState===a.OPEN&&a.send(`tok:${e.channel}:${e.timestamp}:${e.generation}:${e.signature}`)},C=e=>{let r=(0,o.tl)().user_data;if(!r?.id){console.warn("Can't post to me channel without user id available"),(0,i.sx)("Me Channel UserId Missing");return}let n=`/me-${r?.id}`;if(!(n in p)){if(console.warn("We're not subscribed to the me channel"),(0,i.sx)("Me Channel Subscription Missing"),r?.realtime_token){(0,i.sx)("Me Channel Resubscribe");let e=h(r.realtime_token);p[n]=e,A(e)}else{console.warn("We're unable to subscribe to the me channel; server will reject this message"),(0,i.sx)("Me Channel No Token");return}}if(!a||a.readyState!==a.OPEN){(0,l.nl)()||console.warn("Sending to me without open websocket"),(0,i.sx)("Me Channel Websocket Missing");return}let s=JSON.stringify([{channel:n,data:e}]);a.send(`pme:${s}`)},N=e=>{delete p[e],a&&a.readyState===a.OPEN&&a.send(`uns:${e}`)},L=()=>{if(d||(0,o.kc)().realtime_disconnect_in_background&&"hidden"===document.visibilityState&&c)return;I();let r="";r=("https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`)+"/api/realtime_v2";let n=window.INITIAL_OPTIONS&&window.INITIAL_OPTIONS.release_git_tag||"";r+=`?release_git_tag=${n}&user_id=${window.INITIAL_OPTIONS?.user_data?.id||""}`,(a=new WebSocket(r)).onopen=e=>{for(let e in E=0,console.log(`[Realtime] Connected to ${r}.`),u=setInterval(()=>{a.send("ping")},3e4+5e3*Math.random()-2500),c&&Date.now()-f>6e4&&m.forEach(e=>{setTimeout(e,0)}),c=!0,p)A(p[e])},a.onmessage=r=>{if("pong"===r.data){f=Date.now();return}let n=r.data.substr(0,4);if("tok:"===n){let e=h(r.data.substr(4));p[e.channel]=e;return}let a={};if("ouc:"===n){let e=r.data.substr(4).split(":");3!==e.length&&console.warn("Got ouc: command with wrong number of params");for(let r=0;r<e.length;r++)"null"===e[r]&&(e[r]=null);a={type:"verify_user_state",org_user_count:e[0]&&parseInt(e[0]),org_user_updated:e[1]&&new Date(parseInt(e[1])).toISOString(),target_user_id:e[2]}}else if("sub:"===n||"uns:"===n){let e=r.data.split(":"),n=e[e.length-1];if("ok"===n)return;if(delete p[e[1]],"expired"===n){if(!_)return;_=!1,a={type:"token_expired"}}else{console.warn(r.data);return}}else{try{a=JSON.parse(r.data)}catch(e){console.warn(`unexpected non-JSON realtime message: ${r.data}`);return}null!=a.err&&(console.warn("encountered error message from realtime",a.err),w())}e&&e(a)},a.onclose=e=>{a=null,w()}},O={},R=new Set,P=new Map,D={connect:L,disconnect:()=>{b=!1,I(),p={},T&&document.removeEventListener("visibilitychange",T)},setCallback:r=>{e=e=>{let n=e.method,a=Object.keys(e).filter(e=>s.C.has(e)).map(r=>({type:r,value:e[r]})),i=!1;r(e),a.forEach(r=>{let a=O[r.type];a&&Object.keys(a).map(e=>a[e]).filter(e=>e.methods[n]).forEach(n=>{n.callback(r.value,e.method)})})}},setOnSubscribeCallback:e=>{r=e},setOnUnsubscribeCallback:e=>{n=e},subscribe:(e,n)=>{let a=p[e.channel];p[e.channel]=e,a||A(e),!1!==n&&R.add(e.channel),r&&r(e.channel)},unsubscribe:(e,r)=>{if(!1!==r&&R.delete(e),!1===r&&R.has(e))return;let a=P.get(e);a&&a.size>0||(delete p[e],N(e),n&&n(e))},postToMeChannel:e=>{C(e)}},k=()=>{let e=(0,o.tl)().user_data;return e?.realtime_token?h(e.realtime_token):null},M=["post","put","delete"],F=e=>"string"==typeof e?{type:e,token:k(),methods:M}:e,x={subscriptions:p,subscribe:function(e,r){let n=F(e),a=n.token||k();if(!a)return()=>{};let i=(g+=1,`${g}:${performance.now()}`),o=O[n.type]||{},s=n.methods||M,l={};return s.forEach(e=>{l[e]=!0}),o[i]={methods:l,callback:r},O[n.type]=o,(P.get(a.channel)||new Set).add(i),D.subscribe(a,!1),()=>{let{channel:e}=a,r=P.get(e);r?.delete(i);let o=O[n.type];if(o&&(delete o[i],0===Object.keys(o).length)){let e=n.type;delete O[e]}D.unsubscribe(e,!1)}}};return{...D,v2:x}}a=function(){p>0||u.forEach(e=>{p+=1,setTimeout(()=>{try{e()}finally{p-=1}},6e4+24e4*Math.random())})},m.push(a)},729551:(e,r,n)=>{n.d(r,{kS:()=>l,q5:()=>d});var a=n(411855);n(188507),n(407436),n(719334);var i=n(76265);n(47795),n(736041),n(366172),n(695024),n(176160),n(926996),n(6253),n(773283),n(545466),n(286480);var o=n(911307);(0,n(710636).Ju)(function(e){return a.createElement(o.R,{title:(0,i.tx)("recordings.restart_modal_title"),confirmText:(0,i.tx)("general.restart"),onConfirm:e.onConfirm,open:e.open,onClose:e.onClose},(0,i.tx)("recordings.restart_modal_confirmation"))},"RECORDING_CONFIRM_RESTART_MODAL"),n(885123),n(841962);var s=n(746643);let l="none-device",c={initializeRecordingMedia:s.Xv,abortRecording:s.lQ,startWalkthroughRecording:s.lQ,stopWalkthroughRecording:s.Xv,restartWalkthroughRecording:s.lQ,togglePauseRecording:s.lQ,isRecording:!1,isPaused:!1,mediaStream:void 0,getRecordingDataForSinatraCreate:s.pp,getRecordingLengthMs:s.dD},d=a.createContext(c)},528087:(e,r,n)=>{n.d(r,{F:()=>o});var a=n(109388),i=n(775541);function o(e,r=document.createElement("div")){let n=(0,i.H)(r);return(0,a.flushSync)(()=>{n.render(e)}),r.innerHTML}},199951:(e,r,n)=>{n.d(r,{iw:()=>l,ld:()=>s});var a=n(163773),i=n(841962);let o=class e{static initialize(){let r=i.Ay().user_data?.email;if(r&&(-1!==r.indexOf("@figma)")||-1!==r.indexOf("@test.figma"))){let r=new URLSearchParams(a.Ay.location.search).get("safeModeRenderLimitMs");r&&(e.getForcedRenderTimeMsValue=parseInt(r))}}getForcedRenderTimeMs(){return e.getForcedRenderTimeMsValue}};o.getForcedRenderTimeMsValue=null,o.initialize();let s=new o,l=new class{constructor(e){this.safeModeOptions=e}getForcedRenderTimeMs(){let e=this.safeModeOptions.getForcedRenderTimeMs();return null!=e?e:-1}}(s)},137565:(e,r,n)=>{n.d(r,{D8:()=>c,GG:()=>u,T9:()=>_,lt:()=>m,mv:()=>h,oj:()=>d,u2:()=>p});var a=n(411855),i=n(665648),o=n(140835),s=n(563192);class l extends s.o6{constructor(){super(...arguments),this.onClick=s.cZ(this,"click",e=>this.props.onClick?this.props.onClick(e):s.aH),this.onContextClick=s.cZ(this,"contextmenu",e=>this.props.onContextMenu?this.props.onContextMenu(e):s.aH),this.onDoubleClick=s.cZ(this,"dblclick",e=>this.props.onDoubleClick?this.props.onDoubleClick(e):s.aH),this.onMouseDown=s.cZ(this,"mousedown",e=>this.props.onMouseDown?this.props.onMouseDown(e):s.aH),this.onMouseUp=s.cZ(this,"mouseup",e=>this.props.onMouseUp?this.props.onMouseUp(e):s.aH),this.onMouseMove=s.cZ(this,"mousemove",e=>this.props.onMouseMove?this.props.onMouseMove(e):s.aH),this.onMouseEnter=s.cZ(this,"mouseenter",e=>this.props.onMouseEnter?this.props.onMouseEnter(e):s.aH),this.onMouseLeave=s.cZ(this,"mouseleave",e=>this.props.onMouseLeave?this.props.onMouseLeave(e):s.aH),this.onPointerDown=s.Am(this,"pointerdown",e=>this.props.onPointerDown?this.props.onPointerDown(e):s.aH),this.onPointerUp=s.Am(this,"pointerup",e=>this.props.onPointerUp?this.props.onPointerUp(e):s.aH),this.onPointerMove=s.Am(this,"pointermove",e=>this.props.onPointerMove?this.props.onPointerMove(e):s.aH),this.onKeyUp=s.C0(this,"keyup",e=>this.props.onKeyUp?this.props.onKeyUp(e):s.aH),this.onKeyDown=s.C0(this,"keydown",e=>this.props.onKeyDown?this.props.onKeyDown(e):s.aH),this.onFocus=s.Ht(this,"focus",e=>this.props.onFocus?this.props.onFocus(e):s.aH),this.onBlur=s.Ht(this,"blur",e=>this.props.onBlur?this.props.onBlur(e):s.aH)}render(){let{recordingKey:e,forwardedRef:r,dataTestId:n,dataOnboardingKey:a,...i}=this.props;return this.recordingKey()&&(this.props.onClick&&(i.onClick=this.onClick),this.props.onDoubleClick&&(i.onDoubleClick=this.onDoubleClick),this.props.onMouseDown&&(i.onMouseDown=this.onMouseDown),this.props.onMouseMove&&(i.onMouseMove=this.onMouseMove),this.props.onMouseEnter&&(i.onMouseEnter=this.onMouseEnter),this.props.onMouseLeave&&(i.onMouseLeave=this.onMouseLeave),this.props.onMouseUp&&(i.onMouseUp=this.onMouseUp),this.props.onContextMenu&&(i.onContextMenu=this.onContextClick),this.props.onKeyUp&&(i.onKeyUp=this.onKeyUp),this.props.onKeyDown&&(i.onKeyDown=this.onKeyDown),this.props.onFocus&&(i.onFocus=this.onFocus),this.props.onBlur&&(i.onBlur=this.onBlur),this.props.onPointerDown&&(i.onPointerDown=this.onPointerDown),this.props.onPointerUp&&(i.onPointerUp=this.onPointerUp),this.props.onPointerMove&&(i.onPointerMove=this.onPointerMove)),n&&(i["data-testid"]=n),a&&(i["data-onboarding-key"]=a),this.node(i,r)}}class c extends l{node(e,r){return a.createElement("div",{...e,ref:r})}}c.displayName="RecordableDiv",(0,o.tf)(c);class d extends l{node(e,r){return a.createElement("span",{...e,ref:r})}}d.displayName="RecordableSpan";class u extends l{node(e,r){return a.createElement("button",{...e,ref:r})}}u.displayName="RecordableButton";class m extends l{node(e,r){return a.createElement("a",{...e,ref:r})}}m.displayName="RecordableA";class p extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return a.createElement("input",{...e,onChange:this.onChange,ref:r,dir:"auto","data-onboarding-key":this.props.dataOnboardingKey})}}p.displayName="RecordableInput";class h extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return a.createElement("textarea",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}function _({children:e}){let r=(0,a.useMemo)(()=>s.Fk()?(e,r)=>{let n=s.cC(r.recordingKey);return(0,a.useMemo)(()=>{if(!e||!r.recordingKey)return e;let a=s.fA(n,r.eventName,r=>Array.isArray(r)?e(...r):e(r));return(...e)=>a(e)},[n,r.eventName,e,r.recordingKey])}:g,[]);return a.createElement(i.g.Provider,{value:{useInteraction:r}},e)}function g(e){return e}h.displayName="RecordableTextarea"},733312:(e,r,n)=>{n.d(r,{F:()=>s,p:()=>l});var a=n(891721),i=n.n(a);let o=/[\u202A-\u202E\u2060-\u206F]/g;function s(e){return e?e.replace(o,"").normalize():e}function l(e){return i().sanitize(e)}},736482:(e,r,n)=>{n.d(r,{Br:()=>o,kx:()=>l,qR:()=>s,vn:()=>i});let a=new Set(["file","board","design","slides","site","files","file_metadata","recent_files","proto","presenter","deck","plugin","plugins","widget","widgets","checkpoint","api","contacts","state","session","template","templates","browse","search","components","recommend","image","images","videos","upload","uploads","v2","internal","cooper","login","logout","signup","login_iframe","invites","team_invite","accept","redeem","auth","available_auth_methods","email_login","password","recover","app_auth","grant","saml","google_auth","role","roles","view","can_request_edit","periodic_refresh","account_type_requests","approve","deny","nudge","dismiss_badge","request_upgrade","editor_type","send","request_magic_link","employee","consent","confirm","viewer_restricted_draft","notify","update_message","mfa_auth","create-team","deletion_file_count","add-collaborators","recent","recents","recent_prototypes","recent_search","team","teams","team_users","team-admin-console","directory","libraries","workspace","workspaces","workspace_approved_library","recents-and-sharing","shared-projects","recently-viewed","shared-with-you","settings","project","projects","font","fonts","font-files","your%20teams","team-feed","studio","feed-posts","feed_posts","drafts","drafts-to-move","admin","license_groups","orgs","org","org_users","resources","billing","billing-group","billing_emails","activity","members","send_restore_email","folders","self_assign_workspace","admin_request_dashboard","admin_request_dashboard_row_count","workspace_member_count","experiment_cohort","dev_mode_suggested_upgrades","dismiss_dev_mode_suggested_upgrades","pinned_files","increment_open_count","pin","ai_data_sharing","toggle_slides_disabled","export_members","billing_group","new_file_location","trashed_folders","restore","file_repos","developer_opt_in","upgrade-team","choose_plan","payment_and_address","confirm_pay","upgrade_new_team","purchase-organization","details","payment","review","edu-review","eligible_upgrade_data","first_draft","assets","match_group","match_preset_modes","all_kits","kit_contents","detach_info","publish_local_kit","update_metadata","asset_thumbnail","upload_thumbnails","all_eval_sets","run_evals","eval_status","auto_suggest","auto_suggest_props","fragment_search","user","plans","org_invites","claim","claim_device_file","try-figjam","online-whiteboard","users","salesforce_contact_ids","google_drive","access_token","plan_properties","validate_trial","create_product_trial","suspend_product_trial","status","flags","flag","oembed","spelling","get-languages","img","realtime_token","realtime_v2","new","duplicate","dev_mode_terms_accepted","resource_lifecycle","response_sampler","file_download_log","num_backfilled_team_user","invoices","has_connected_plan_user_in_org","abuse","async_jobs","enqueue","arkose","on_for_user","community","figma","figjam","paid","free","partners","prototype","fig_files","category","tag","collections","remixes","hub_files","hub_profiles","community_categories_v2","community_libraries","community_mentions","community_resources","community_shelves","profile","design_systems","library","asset","send_third_party_m10n_review_email","styles","version","hub_file_metadata","default_librarires","library_file_subscriptions","library_user_subscriptions","library_org_subscriptions","library_team_subscriptions","all_library_user_subscriptions","all_library_org_subscriptions","all_library_team_subscriptions","hub_file_duplicates","block_seo_indexing","unblock_seo_indexing","resource","tags","resource_use","third_party_m10n_url","thumbnail","icon","recommendations","home_shelf","organization","orgs","experiment","create_trial","extend_trial","upgrade_trial","add_user","asset_suggestions","groups","documents","library_json","populate_usages_for_org","populate_usages_for_file","pregenerate_org_api_data","preset_libraries","convert_to_billable_products","mock_idp_users","mock_idp_user","dev_mode_opt_in","migrate_feature_flags_to_statsig","org_migrations","order","tickets","org_merge_credit","generate_approval_link","allowlist_team","run_validate_fullscreen_side_effects_job","abandoned_drafts","set_billing_remodel_ga_override","toggle_bundles_model","republish_assets_by_key","batch","unredact","source_file","translations","desktop","livegraph_client","page_load_token","figmascope","figmascope_multiplayer_journal","figmascope_file","figmascope_checkpoint_diffs","figmascope_checkpoints","figmascope_file_validation","start_redact_figmascope_file_validation","figmascope_file_validation_unredacted","start_redact_figmascope_file","check_redact_figmascope_file","start_redact_figmascope_journal","check_redact_figmascope_journal","file-validations","file-validations-details","figfactory","i18n","strings","statsig","bootstrap","email","email_tool","send_email","send_email_to_litmus","user_team_flags","update_overrides","flag_status_for_user","flag_descriptions","user_notifications","user_notifications_bell","user_notifications_bells","catfile_optin","catfic_optin","server_driven","mark_read","clear","plan","recent_activity","web_token_registration","dev_handoff","index","figmadocs","snippet","ml","figjam_dots","jam","template_canvas","prepare_insert","meet_device","device_try_files","device_try_file_claim_emails","save","cleanup","upnode","link_metadata","mobile","clipboard_data_upload","mobile_init_flags","mobile_client_fallback_exp_variant","native_preload","site","custom_domain","get_custom_domain_dns_records","user","org","discovery","bizsys","set_up_org_billing","stripe_details","credit_notes","validate_currency","billing_metadata","org_operation","add_domain_users","pricing","contract_rates","prices_at_contract_renewal","terms_of_service","plugin_preferences","lg_update_slo_data","livegraph","pagination_resolver","sinatra_resolver","waf-validation","models","update-backfill-state","explain","generate","offline_eval","query_set","query_sets","run","search_clause","search_indexes","template","request_logs","slide","thumbnail","backfills","workers","start","pause","rerun","move_to_phase","phases","history","diff","permissions","team_ghost","sites","m1","async","publish","unpublish","action","details","dsa","library","overview","record","snowflake","style","style_usages","styles","variable","variables","missing_styles_by_library_key","google-classroom","integrations","submissions","attachments","attachment","tagged_file","log_dev_mode_nudges_exp_entry","fetch_dev_mode_nudges_exp_entry","team_user_event","items","field_schemas","fields","resource_sync","smartling_translation_callback","translations_status_s3_keys","request_translations","delete_smartling_files","string_management","litmus","comparisons","comparison_artifact","github-app","configure","named_scenarios","generate_test_materials","external_qa","code_suggestions","code_connect","mapping","published_components"]);function i(e,r="__",n=!0){return e.startsWith("/@")?`/@${r}`:n&&(e.startsWith("/esbuild-artifacts/")||e.startsWith("/fullscreen/")||e.startsWith("/webpack-artifacts/"))?e:e.split("/").map(e=>""===e||a.has(e)?e:r).join("/")}function o(e,r=!1,n="__",a=!0){let s;try{s=new URL(e)}catch(n){if(r)throw n;return e}return a&&("static.figma.com"===s.host||"static.figma-gov.com"===s.host||"data:"===s.protocol)?e:"data:"===s.protocol?`data:${s.pathname.split(",")[0]},${n}`:(s.pathname=i(s.pathname,n,a),s.search="",s.toString())}function s(e){return i(e,"--",!1)}function l(e,r=!1){return o(e,r,"--",!1)}},812435:(e,r,n)=>{n.d(r,{We:()=>o,qV:()=>i});var a=n(396405);async function i(e){let r=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join("")}function o(e,r){return s(e,r)}async function s(e,r){let n=r.split(".");if(2!==n.length)throw Error("Could not parse message and nonce.");let i=n[0],o=n[1],s=(0,a.D4)(i),l=(0,a.D4)(o),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,l);return new TextDecoder().decode(c)}},812272:(e,r,n)=>{function a(e,r){let n=new Set,[a,i]=e.size<r.size?[e,r]:[r,e];for(let e of a)i.has(e)&&n.add(e);return n}function i(e,r){if(e.size!==r.size)return!1;for(let n of e)if(!r.has(n))return!1;return!0}function o(e,r,n){let a=new Map,[i,o]=e.size<r.size?[e,r]:[r,e];for(let[e,r]of i.entries()){let i=o.get(e);null!=i&&a.set(e,n(e,r,i))}return a}n.d(r,{iR:()=>a,wD:()=>o,yZ:()=>i})},663295:(e,r,n)=>{var a;n.d(r,{f:()=>a}),(e=>{let r=(e,r)=>e<r?-1:1,n=Intl.Collator().resolvedOptions().locale+"-u-co-emoji";e.LEXICOGRAPHICALLY=(e,a)=>"string"!=typeof e?r(e,a):RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(e)&&RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(a)?e.localeCompare(a,n):e.localeCompare(a),e.BY_DATETIME=(e,n)=>{if("string"!=typeof e)return r(e,n);let a=Date.parse(e),i=Date.parse(n);return a&&i?i-a:r(e,n)},e.byProperty=function(e,n=r){return(r,a)=>r[e]===a[e]?0:n(r[e],a[e])},e.byComparators=function(...e){return(r,n)=>{for(let a=0;a<e.length;a++){let i=(0,e[a])(r,n);if(0!==i)return i}return 0}},e.reverse=function(e){return(r,n)=>-1*e(r,n)}})(a||(a={}))},543906:(e,r,n)=>{n.d(r,{G:()=>a});var a=(e=>(e.SDKReady="sdkReady",e.Call="call",e.SetProperty="setProperty",e.GetProperty="getProperty",e.SetContainerDimensions="setContainerDimensions",e.Error="error",e.GetPermissionToShowSurvey="getPermissionToShowSurvey",e.SurveyClosed="surveyClosed",e))(a||{})},896948:(e,r,n)=>{n.d(r,{A:()=>_});var a=n(411855),i=n(952979),o=n(281935),s=n(841962),l=n(875877),c=n(399991),d=n(622268),u=n(586053),m=n(795724);n(543906);let p=(0,l.atom)([]);function h(e,r){let{country:n,region:a}=e;return r.some(({country:e,region:r})=>(!e||n===e)&&(!r||a===r))}function _({children:e,onAttemptToShowSurvey:r,onSurveyClose:n,geofence:_={}}){var g;let f=(0,l.useAtomValue)(d.EA),E=(g=function(){let e=(0,s.tl)();return{country:e.iso_code,region:e.viewer_region}}(),!(void 0!==_.exclude&&h(g,_.exclude))&&(void 0===_.include||h(g,_.include))),y=!(0,i.GZ)()&&!(0,c.lZ)()&&!(0,s.tl)().e2e_traffic&&f&&E&&(0,s.kc)().sprig_enabled&&!o.S8,[b,v]=(0,a.useState)(m.An),T=(0,l.useAtomValue)(p);return(0,a.useEffect)(()=>{v(e=>(e.tearDown(),y?new m.Ay:m.An))},[y]),(0,a.useEffect)(()=>{b.setCallbacks({onAttemptToShowSurvey:r,onSurveyClose:n})},[r,n,b]),(0,a.useLayoutEffect)(()=>{m.Ay.setScreenAreasToAvoid(T)},[T]),a.createElement(u.M.Provider,{value:b},e)}(0,l.atom)(null,(e,r,n)=>{let a=e(p);r(p,[...a,n])}),(0,l.atom)(null,(e,r,n)=>{let a=e(p),i=a.indexOf(n);-1!==i&&r(p,a.slice(0,i).concat(a.slice(i+1)))})},238311:(e,r,n)=>{n.d(r,{iO:()=>m.DynamicConfig,f6:()=>m.EvaluationReason,w$:()=>f.w,aH:()=>u.aH,sq:()=>u.sq,w0:()=>_,gP:()=>g,hW:()=>E,vs:()=>y,Fj:()=>h,I7:()=>v});var a=n(411855);n(188507);var i=n(336427),o=n(841962),s=n(875877);n(241162),n(780017);var l=n(497663),c=n(102161),d=n(8227),u=n(696511),m=n(581749),p=n(331028);function h(e,r){let n=(0,a.useRef)(null);return(0,s.useAtomValue)(d.u_),{getDynamicConfig:(0,a.useCallback)(()=>{if(s.atomStore.get(d.ZJ).status!==u.Uv.COMPLETED)return l.sb;if(null==n.current)try{r?n.current=p.Statsig.getConfigWithExposureLoggingDisabled(e):n.current=p.Statsig.getConfig(e)}catch(e){n.current=l.sb}return n.current},[e,r])}}async function _(e,r){if(await s.atomStore.get(d.u_),s.atomStore.get(d.ZJ).status!==u.Uv.COMPLETED)return l.sb;try{if(r)return p.Statsig.getConfigWithExposureLoggingDisabled(e);return p.Statsig.getConfig(e)}catch(e){return l.sb}}function g(e){let r=o.tl()?.dynamic_configs?.[e];return r?new m.DynamicConfig(e,r,"",{reason:m.EvaluationReason.Unrecognized,time:Date.now()}):l.sb}var f=n(320484);async function E(e,r,n,a=!1){let i=s.atomStore.get(d.ZJ);return(n||(0,o.kc)().statsig_suspend)&&await i.initCompletedPromise,(0,l.Tq)(s.atomStore.get(d.ZJ),e,"getExperiment",r,a)}function y(e,r,n){return E(e,r,n,!0)}function b(e,r,n){let{userVersion:o}=(0,a.useContext)(c.B),u=(0,i.ZC)(o),m=(0,s.useAtomValue)(d.ZJ),p=(0,a.useRef)(null);return{getConfig:(0,a.useCallback)(()=>((u!==o||null==p.current)&&(p.current=(0,l.Tq)(m,e,"useExperiment",r,n)),p.current),[e,r,u,m,o,n])}}n(111163);let v=(0,o.kc)().statsig_suspend?function(e,r,n){return(0,s.useAtomValue)(d.u_),b(e,r,n)}:b;(0,o.kc)().statsig_suspend,(0,s.atomFamily)(({experimentName:e,keepDeviceValue:r,disableExposureLogging:n})=>(0,s.atom)(async a=>{await a(d.u_),a(d.gR);let i=a(d.ZJ),o=null;return()=>(null==o&&(o=(0,l.Tq)(i,e,"getExperiment",r,n)),o)}),(e,r)=>e.experimentName===r.experimentName&&e.disableExposureLogging===r.disableExposureLogging&&e.keepDeviceValue===r.keepDeviceValue)},497663:(e,r,n)=>{n.d(r,{Tq:()=>_,sb:()=>p});var a=n(581749),i=n(331028),o=n(470626),s=n(841962),l=n(399991),c=n(875501),d=n(883079),u=n(696511),m=n(653798);let p=new a.DynamicConfig("default",{},"default",{reason:a.EvaluationReason.Unrecognized,time:Date.now()});var h=(e=>(e.UserIDString="userID",e.OrgIdString="orgID",e.TeamIdString="teamID",e.StableIdString="stableID",e.DeveloperIdString="developerID",e.DefaultIdString="defaultID",e.RandomIdString="randomID",e.UserFigmateEmailString="userFigmateEmail",e.PlanKeyString="planKey",e))(h||{});function _(e,r,n,h=!1,g=!1){if(!i.Statsig.initializeCalled()||(0,s.Ay)().e2e_ci_test||e.status!==u.Uv.COMPLETED)return p;let f=0,E=null,y=p,b=!1;try{f=(0,c.vo)("statsigGetExperimentValDuration",()=>{y=g?i.Statsig.getExperimentWithExposureLoggingDisabled(r,{keepDeviceValue:h}):i.Statsig.getExperiment(r,h),!function(e){if(!(0,s.kc)().web_exp_default_config_missing_id||"launchedGroup"===e.getRuleID())return!0;let r=i.Statsig.getCurrentUser();if(!r)return!1;let n=e.getIDType();return!n||("userID"===n?!!r.userID:!!r.customIDs?.[n])}(y)&&((0,m.xi)("statsig",`${r}'s ID type do not match the IDs in the statsig user.
          Please verify your experiment code and add a check for your ID before calling getConfig.
          For example, if the experiment is based on userID, don't call getConfig for logged-out users.`),b=!0,y=p)})}catch(n){let e=s.Ay().user_data?.id||"undefined";(0,d.Us)(`Errored while fetching experiment config for experiment ${r} and user ${e}: ${n}`),E=n instanceof Error?n:null,y=p}let v=i.Statsig.getCurrentUser();if(null===E&&(0,d.zz)(r,f,n,y.getEvaluationDetails().reason,y.getRuleID(),v,b),y.getEvaluationDetails().reason===a.EvaluationReason.InvalidBootstrap){let e=(0,o.M)();e&&(0,d.Dr)(r,e.evaluated_keys?.userID,JSON.stringify(e.evaluated_keys?.customIDs),v?.userID?.toString(),JSON.stringify(v?.customIDs))}if((0,l.nl)()&&d.su===r){let e=y.getValue();(0,d.pk)(d.su,f),(0,d.pk)(`${d.su}_value`,e)}return y}},8227:(e,r,n)=>{n.d(r,{MQ:()=>l,UY:()=>m,ZJ:()=>c,gR:()=>u,hH:()=>o,u_:()=>d});var a=n(875877),i=n(696511);function o(e){return e.status===i.Uv.ERRORED&&e.cause===i.bT.TIMEOUT}let s=(0,a.atom)({status:i.Uv.NOT_STARTED,initCompletedPromise:void 0}),l=(0,a.withReducer)(s,function(e,r){switch(r?.type){case i.Uw.RESET:return{status:i.Uv.NOT_STARTED,initCompletedPromise:void 0};case i.Uw.START:if(e.status===i.Uv.NOT_STARTED){let{initCompletedPromise:e,sdkKey:n}=r.payload;return{status:i.Uv.IN_PROGRESS,sdkKey:n,initCompletedPromise:e}}break;case i.Uw.ERROR:if(e.status===i.Uv.IN_PROGRESS){let{sdkKey:n,initCompletedPromise:a}=e,{cause:o}=r.payload;return{status:i.Uv.ERRORED,sdkKey:n,cause:o,initCompletedPromise:a}}break;case i.Uw.COMPLETE:if(e.status===i.Uv.IN_PROGRESS){let{sdkKey:r,initCompletedPromise:n}=e;return{status:i.Uv.COMPLETED,sdkKey:r,initCompletedPromise:n}}}return e}),c=(0,a.atom)(e=>e(l)),d=(0,a.atom)(e=>e(l).initCompletedPromise),u=(0,a.atom)(0),m=(0,a.atom)(!1)},883079:(e,r,n)=>{n.d(r,{AQ:()=>y,B7:()=>T,Dr:()=>b,Tr:()=>A,Us:()=>L,Vj:()=>S,_q:()=>I,bz:()=>C,kX:()=>v,pk:()=>g,q3:()=>E,su:()=>_,yY:()=>w,zz:()=>f});var a=n(401562),i=n(777535),o=n(163773),s=n(841962),l=n(94489),c=n(747484),d=n(736482),u=n(550479),m=n(217950),p=n(399991),h=n(696511);let _="exp_aa_test_fullscreen_view";function g(e,r){((0,s.Ay)().is_second_page_for_perf_tests||O())&&(void 0===window.STATSIG_PERF&&(window.STATSIG_PERF={}),window.STATSIG_PERF[e]=r)}function f(e,r,n,a,o,s,l){.1>Math.random()&&(0,i.sx)("statsig_client_exp_eval",{eval_reason:a,eval_method:n,experiment:e,client_exp_eval_time_ms:r,entry_point:window.ENTRY_POINT,rule_id:o,statsig_user:null==s?null:JSON.stringify(s),missing_entity_id:l},{forwardToDatadog:!0,batchRequest:!0})}function E(e,r){return null==e||""===e||void 0===e?null==r||""===r||void 0===r:e===r}function y(e,r,n){(0,i.sx)("user_values_bootstrap_mismatch",{mismatch_reason:e,bootstrap_value:r,user_key_value:n},{forwardToDatadog:!0,batchRequest:!0})}function b(e,r,n,a,o){i.az.trackDefinedEvent("application_platform.invalid_bootstrap_info",{experiment_name:e,bootstrap_user_id:r,bootstrap_custom_ids:n,statsig_user_user_id:a,statsig_user_custom_ids:o})}function v(e,r,n,a,l,u,m=null,_=null,f=null){((0,p.nl)()||O())&&g("INIT_TIME",a);let y=(0,s.w0)().statsig_client_bootstrap??!0,b=((0,s.w0)().statsig_disable_bootstrap_values_for_mobile_app??!1)&&((0,c.mt)()||(0,c.gR)()),I=_?[_.userId,_.teamId,_.orgId,(0,i.pp)(),_.planKey].map(e=>e||""):[],S=(0,s.Ay)().statsig_bootstrap_values,w=Array.isArray(S)?S[0]:S,A=function(e){if(e&&null!==e.evaluated_keys&&"object"==typeof e.evaluated_keys){let r=e.evaluated_keys,n=r.customIDs??{};return[T(r,"userID",""),T(n,"teamID",""),T(n,"orgID",""),T(n,"stableID",""),T(n,"planKey","")]}return[]}(f??w);(0,i.sx)("Statsig Client Init Time",{client_init_time:a,userId:s.Ay().user_data?.id,source:"figma_app",source_type:e?"provider":"singleton",errored:!l,error_cause:null===m?null:h.bT[m],entry_route:function(){let e=o.Ay.location.pathname;return(0,d.vn)(e)}(),entry_point:window.ENTRY_POINT,bootstrapped:r===h.ss.BOOTSTRAP,client_bootstrap_enabled:y&&!b,received_bootstrap:!!(0,s.Ay)().statsig_bootstrap_values,message:u,has_user_id:!!s.Ay().user_data?.id,client_user_team_org_stable_ids:I,bootstrap_user_team_org_stable_ids:A,user_key_comparison:function(e,r){let n=["user_id","team_id","org_id","stable_id","plan_key"];return e.length!==n.length||r.length!==n.length?"n/a":n.map((n,a)=>E(e[a],r[a])?null:`mismatch ${n}`).find(e=>!!e)||"valid"}(I,A),statsig_api_enabled:!((0,s.w0)().statsig_disable_statsig_api??!0)},{forwardToDatadog:!0})}function T(e,r,n){if(null==e||"object"!=typeof e)return n;let a=e[r];return"string"!=typeof a?n:a}function I(e,r,n){(0,i.sx)("Statsig Client Values Network Call",{client_values_network_call_latency_ms:e.getElapsedTimeMs(),entry_point:window.ENTRY_POINT,reason:h.PG[n],success:!e.getCaughtError(),end_point:r,timed_out:e.getTimedOut(),statsig_api_enabled:!1,error_message:e.getError()?.message},{forwardToDatadog:!0})}function S(e,r,n){(0,i.sx)("Statsig Client Context Switch Cache Miss",{keys:JSON.stringify(e),cached_keys:r,cached_key_count:n,entry_point:window.ENTRY_POINT},{forwardToDatadog:!0})}class w{constructor(e){this.caughtError=!1,this.elapsedTimeMs=0,this.error=null,this.timer=new l.jk(e,{})}startTimer(){this.timer.start()}isTimerRunning(){return this.timer.isRunning}stopTimer(){this.elapsedTimeMs=this.timer.stop()}setCaughtError(e){this.caughtError=!0,e instanceof Error&&(this.error=e)}getCaughtError(){return this.caughtError}getTimedOut(){return this.error instanceof h.MU}getError(){return this.error}getElapsedTimeMs(){return this.elapsedTimeMs}}function A(e,r,n){(0,i.sx)("Statsig prefetch calls",{nb_users:e,cache_hits:r,error_message:n,success:null===n,statsig_api_enabled:!((0,s.w0)().statsig_disable_statsig_api??!0)},{forwardToDatadog:!0})}function C(e,r,n,a){(0,i.sx)("Statsig Client Update User Time",{client_update_user_time_ms:e,userId:s.Ay().user_data?.id,entry_point:window.ENTRY_POINT,source:"figma_app",cache_hit:n,errored:!r,message:a,statsig_api_enabled:!((0,s.w0)().statsig_disable_statsig_api??!0)},{forwardToDatadog:!0}),r&&O()&&g("CONTEXT_SWITCH_TIME",e)}let N=(0,a.D)(()=>.05>=Math.random());function L(e){if(e&&N()){let r=Error(e);(0,u.$D)(m.e.GROWTH_PLATFORM,r,{tags:{statsig_sdk:!0}})}}function O(){let e=(0,s.Ay)().e2e_test_name;return null!=e&&["statsig_init","statsig_context_switch"].includes(e)}},696511:(e,r,n)=>{n.d(r,{DK:()=>o,MU:()=>_,PG:()=>d,Uv:()=>l,Uw:()=>i,aH:()=>p,bT:()=>c,sq:()=>h,ss:()=>s});var a=n(338584),i=(e=>(e[e.START=0]="START",e[e.TIMEOUT=1]="TIMEOUT",e[e.COMPLETE=2]="COMPLETE",e[e.RESET=3]="RESET",e[e.ERROR=4]="ERROR",e))(i||{}),o=(e=>(e[e.PROVIDER=0]="PROVIDER",e[e.SINGLETON=1]="SINGLETON",e))(o||{}),s=(e=>(e[e.BOOTSTRAP=0]="BOOTSTRAP",e[e.NETWORK=1]="NETWORK",e))(s||{}),l=(e=>(e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.COMPLETED=3]="COMPLETED",e[e.ERRORED=4]="ERRORED",e))(l||{}),c=(e=>(e[e.TIMEOUT=0]="TIMEOUT",e[e.REQUEST_FAILED=1]="REQUEST_FAILED",e[e.SDK_METHOD_FAILED=2]="SDK_METHOD_FAILED",e[e.UNKNOWN=3]="UNKNOWN",e))(c||{}),d=(e=>(e[e.INITIALIZE=0]="INITIALIZE",e[e.PREFETCH=1]="PREFETCH",e[e.CONTEXT_SWITCH=2]="CONTEXT_SWITCH",e))(d||{});let u=a.record(a.string(),a.unknown()),m=a.object({stableID:a.string().optional(),userID:a.string().optional(),customIDs:a.record(a.string(),a.string()).optional()}).passthrough(),p=a.optional(a.object({dynamic_configs:a.record(a.string(),u).optional(),evaluated_keys:m.optional(),feature_gates:a.record(a.string(),u).optional(),layer_configs:a.record(a.string(),u).optional(),hash_used:a.string().optional()}).passthrough()),h=a.array(a.object({team_id:a.string().nullable(),bootstrap_values:p.nullable()}));class _ extends Error{constructor(e){super(e||"timeout")}}},972142:(e,r,n)=>{n.d(r,{$M:()=>T,Ay:()=>y,DV:()=>g,EJ:()=>p,FS:()=>L,H9:()=>C,LD:()=>b,Qp:()=>O,Qt:()=>h,Rw:()=>N,VZ:()=>s,Vs:()=>A,YH:()=>u,Yx:()=>E,Zr:()=>i,_5:()=>l,fs:()=>S,gU:()=>w,hX:()=>d,lH:()=>m,sy:()=>I,td:()=>v,vE:()=>c,zS:()=>o});var a=n(324608);function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return e.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function c(e){return i(e.split("_").join(" ").toLocaleLowerCase())}function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(var a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}function m(e){return String.prototype.toWellFormed?e.toWellFormed():function(e){function r(e){return(63488&e)==55296}let n="";for(let a=0;a<e.length;++a){let i=e.charCodeAt(a);if(!r(i)){n+=e.charAt(a);continue}if(!((1024&i)!=0)&&a+1<e.length){let i=e.charCodeAt(a+1);if(r(i)&&(1024&i)!=0){n+=e.charAt(a),n+=e.charAt(a+1),++a;continue}}n+="\uFFFD"}return n}(e)}function p(e,r){return e.length>r?e.slice(0,r-1).trimEnd()+"\u2026":e}function h(e){let r=[];for(let n=0;n<e.length;n++){let a=function(e,r){let n=e.charCodeAt(r);if(Number.isNaN(n))return"";if(n<55296||n>57343)return e.charAt(r);if(55296<=n&&n<=56319){if(e.length<=r+1)throw Error("High surrogate without following low surrogate");let n=e.charCodeAt(r+1);if(56320>n||n>57343)throw Error("High surrogate without following low surrogate");return e.charAt(r)+e.charAt(r+1)}throw Error("Not the start of a single- or multibyte-character")}(e,n);n+=a.length-1,r.push(a)}return r}let _={numeric:!0,sensitivity:"base"};function g(e,r,n=_){let i=(0,a.Gq)().getPrimaryLocale(!1),o=new Intl.Collator(i,n);return e.sort((e,n)=>o.compare(r(e),r(n)))}let f={};function E(e,r="conjunction"){let n=(0,a.Gq)().getPrimaryLocale(!1);return f[r]||(f[r]=new Intl.ListFormat(n,{type:r})),f[r].format(e)}function y(e){var r=[];return(e=e.replace(/_|-/g," ")).split(" ").forEach(function(e){r.push(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}),r.join(" ")}function b(e,r,n){return n=n||`${r}s`,1===e?r:n}function v(e,r,n){return null==e&&(e=0),`${e} ${b(e,r,n)}`}function T(e){return e<1e3?e.toString():e<1e5?`${Math.floor(e/100)/10}k`:e<1e6?`${Math.floor(e/1e3)}k`:e<1e8?`${Math.floor(e/1e5)/10}m`:e<1e9?`${Math.floor(e/1e6)}m`:e<1e11?`${Math.floor(e/1e8)/10}b`:`${Math.floor(e/1e9)}b`}function I(e){return encodeURIComponent(e.replace(/ /g,"-"))}function S(e){var r=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ .\-_\/\\:;|,&+=*]/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/\-+/g,"-").replace(/^\-+/,"").substring(0,100).replace(/\-+$/,"");return I(r=["thumbnail","icon","code","snapshot","duplicate","embed","canvas","remixes"].includes(r)?"":r)}let w=e=>/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,18}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e);function A(e){for(var r=0,n=e.length>>>2,a=new Uint8Array(3*n),i=0,o=[],s=0;s<127;s++)o[s]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(s));for(;r<n<<2;){var l=o[e.charCodeAt(r++)],c=o[e.charCodeAt(r++)],d=o[e.charCodeAt(r++)],u=o[e.charCodeAt(r++)];a[i++]=l<<2|c>>>4,d>=0&&(a[i++]=c<<4|d>>>2),u>=0&&(a[i++]=d<<6|u)}return i===a.length?a:a.subarray(0,i)}function C(e){for(var r="",n=e.length,a=0;a<n;a+=1024)r+=String.fromCharCode.apply(String,e.subarray(a,a+1024));return btoa(r)}function N(e){for(var r="",n=0;n<e.length;n++)r+=("00"+e[n].toString(16)).slice(-2);return r}function L(e){return e.replace(/\s+/g,"")}function O(e,r){return L(e)===L(r)}},62244:(e,r,n)=>{n.d(r,{GU:()=>c,SH:()=>s,cn:()=>o});var a=n(890882);n(331850);var i=n(841962);function o(e){return!!e.student_validated_at}function s(e,r){return{hasGracePeriod:!!(e&&r in e),isInValidGracePeriod:(e&&e[r]?l(e,r):0)>0}}let l=(e,r)=>Math.ceil((0,a.A)(e[r].createdAt).add(7,"days").diff((0,a.A)(),"days",!0));function c(e,r,n,a){let o=s(e,n);if(!(0,i.kc)().edu_onboarding_grace_period||r||!a||!o.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let l=o.isInValidGracePeriod;return{showReminder:l,showAccessRestricted:!l}}},339696:(e,r,n)=>{n.d(r,{WE:()=>i,d4:()=>o});let a=[];function i(e){throw o(Error().stack||"stack unavailable?"),e}function o(e){a.unshift(e),setTimeout(()=>{a=a.filter(r=>r!==e)},300)}},399991:(e,r,n)=>{n.d(r,{Lg:()=>d,Ns:()=>a.k3,PN:()=>c,QJ:()=>m,b_:()=>i,lZ:()=>l,nl:()=>s});var a=n(844535);let i=!1,o="/test/interactions"===window.location.pathname||"/test/interactions/proto"===window.location.pathname||"/test/interactions/deck"===window.location.pathname||"/test/interactions/presenter"===window.location.pathname;function s(){return o}function l(){return o}function c(){return o||(0,a.k3)()}function d(){try{return!1}catch{return!1}}o&&new URLSearchParams(window.location.search).get("mode");let u="/test/eval/view"===window.location.pathname;function m(){return u}},62791:(e,r,n)=>{n.d(r,{E:()=>m});var a=n(411855),i=n(294829),o=n(254903),s=n(441120),l=n(274582),c=n(557401),d=n(775021),u=n(23345);function m(e){return(0,s.TR)()?a.createElement(p,{...e}):a.createElement(a.Fragment,null,e.children)}function p({name:e,children:r,alsoTrack:n}){let m=(0,i.F)(n),p=(0,s.MF)({name:e,alsoTrackRef:m}),h=(0,s.ps)(p),{error:_,trackablePath:g}=h,f=(0,s.MF)(()=>(0,s.ET)(g,p)),E=(0,a.useCallback)(e=>{!_&&(0,s.VC)(g)&&(0,l.S)({trackablePath:g.map(e=>e.name),interactableId:p.name,trackingMethod:"automatic",...e},f())},[g,p,f,_]),y=(0,u.s)(E),b=(0,o.o3)(o.nt.trackableDebug),v=(0,s.MF)(()=>(0,s.R8)({componentName:"AutoInteractable",name:e,error:_,alsoTrackedProperties:f()}));return r=(0,d.C)({children:r,isDebugMode:b,name:e,color:_?"red":"blue",depth:g.length+1,getTooltipText:v}),a.createElement(c.f.Provider,{value:h},a.createElement("div",{className:"displayContents",...y},r))}},453956:(e,r,n)=>{n.d(r,{k:()=>d});var a=n(411855),i=n(294829),o=n(254903),s=n(441120),l=n(557401),c=n(775021);function d(e){return(0,s.TR)()?a.createElement(u,{...e}):a.createElement(a.Fragment,null,e.children)}function u({name:e,trackingEnabled:r,trackImpressions:n=!0,alsoTrack:d,children:u}){let m=(0,i.F)(d),p=(0,s.U2)({name:e,trackingEnabled:r,alsoTrackRef:m}),{trackablePath:h,error:_}=p,g=(0,s.MF)(()=>(0,s.ET)(h));(0,s.fK)(h,g,n);let f=(0,o.o3)(o.nt.trackableDebug),E=(0,s.MF)(()=>(0,s.R8)({componentName:"Trackable",name:e,error:_,alsoTrackedProperties:g()}));return u=(0,c.C)({children:u,isDebugMode:f,name:e,color:_?"red":"green",depth:h.length,getTooltipText:E}),a.createElement(l.f.Provider,{value:p},u)}},705806:(e,r,n)=>{function a(e){return null==e?"":new URL(e).origin}function i(e){if(0!==e.indexOf("data:"))throw Error("Invalid data URL: `data:` prefix missing");let[r,n]=e.slice(5).split(",");if(!n)throw Error("Invalid data URL: data part missing");let a=!!r&&r.length>0,i=a&&r.endsWith(";base64"),o=i?r.slice(0,-7):a?r:void 0;return new Blob([i?function(e){let r=atob(e),n=r.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=r.charCodeAt(e);return a}(n):decodeURIComponent(n)],{type:o})}n.d(r,{G_:()=>i,Jk:()=>a})},60077:(e,r,n)=>{n.d(r,{Rq:()=>E,YV:()=>f,_5:()=>T,q$:()=>y,td:()=>a,vh:()=>v});var a,i=n(953657),o=n.n(i),s=n(595977),l=n.n(s),c=n(612543),d=n.n(c),u=n(697737),m=n(338584),p=n(777535),h=n(841962),_=n(653798);class g{constructor(e,r,n,a=!1){this.featureFlagKey=n,this.enforce=a,this._input=null,this._output=null;let i="function"==typeof r?r(m):r;this.validator=new b(e,i,this.enforce?"error":"warn")}async validate(e){let r=await e({xr:u.IF});if("string"==typeof this.featureFlagKey&&!(0,h.kc)()[this.featureFlagKey]||200!==r.status)return r;try{let e=await this.validator.validate(()=>Promise.resolve(r));if(this.enforce)return e;return{...e,data:{...r.data,...e.data}}}catch(e){if(this.enforce)throw e;return r}}}function f(e,r,n,a=!1){let i="function"==typeof r?r(m):r;return new g(e,m.object({meta:i}),n,a)}function E(e,r,n,a=!1){let i="function"==typeof r?r(m):r;return new g(e,m.object({meta:i,pagination:m.object({nextPage:m.string().nullable(),prevPage:m.string().nullable()})}),n,a)}function y(e,r){return new b(e,m.object({meta:r}),"error")}class b{constructor(e,r,n){this.debugKey=e,this.schema=r,this.logLevel=n,this._input=null,this._output=null}async validate(e){let r=await e({xr:u.IF}),n=this.schema.safeParse(r.data);if(n.success){let e=n.data,{data:a,...i}=r;return{...i,data:{...e}}}throw(0,p.sx)("Validator Failure",{name:this.debugKey,level:this.logLevel,error:JSON.stringify(n.error.flatten())},{forwardToDatadog:!0,batchRequest:!0}),"error"===this.logLevel&&(0,_.x1)("APIGetValidationFailure",`Validation failed for api response for ${this.debugKey}`,function(e){let r={};return e.issues.forEach(e=>{let n=e.path.map(e=>"number"==typeof e?"[#]":e).join(".");r[n]||=new Set,r[n].add(e.message)}),Object.keys(r).reduce((e,n)=>(e[n]=[...r[n]],e),{})}(n.error),{reportAsSentryError:!0}),n.error}}function v(){return{_input:null,_output:null,validate:e=>e({xr:u.IF})}}(e=>{e.toAPIParameters=function(e,r=[]){if(void 0===e)return e;let n=new Set(r);return Object.keys(e).reduce((r,a)=>{let i=n.has(a)?a:d()(a),o=e[a];switch(void 0!==o&&(r[i]=o),typeof o){case"undefined":break;case"number":case"boolean":r[i]=o.toString();break;default:r[i]=o}return r},{})},e.toCamelCase=function(e){return e.transform(e=>l()(e,(e,r)=>o()(r)))}})(a||(a={}));let T=v()},851390:(e,r,n)=>{n.d(r,{l9:()=>y,hk:()=>b,R4:()=>v,FL:()=>C,ur:()=>w,O5:()=>A});var a=n(411855),i=n(986162),o=n(449233),s=n(777535);class l{constructor(e,r){this._timeOfLastDisconnectMs=null,this._timeOfLastConnectionMs=null,this._timeOfFirstConnectionMs=null,this._definedConnectionAttemptEventName=e,this._definedDisconnectEventName=r}handleSocketDisconnect(e){if(null==this._timeOfLastConnectionMs)return;this._timeOfLastDisconnectMs=this.nowMs();let r=(this._timeOfLastDisconnectMs-this._timeOfLastConnectionMs)/1e3,n=this.nowMs()/1e3;s.az.trackDefinedEvent(this._definedDisconnectEventName,{connectionDurationSeconds:r,windowIsActive:e,sessionLengthSeconds:n})}handleSocketConnectionAttempt(e,r,n,a){if(!e&&r<3)return;let i=null==this._timeOfLastDisconnectMs?0:this._timeOfLastDisconnectMs,o=(this.nowMs()-i)/1e3;e&&(this._timeOfLastConnectionMs=this.nowMs(),null==this._timeOfFirstConnectionMs&&(this._timeOfFirstConnectionMs=this._timeOfLastConnectionMs));let l=this.nowMs()/1e3;s.az.trackDefinedEvent(this._definedConnectionAttemptEventName,{success:e,timeSinceDisconnectSeconds:o,numberOfConnectionAttempts:r,firstTimeConnecting:n,windowIsActive:a,sessionLengthSeconds:l})}nowMs(){return Math.round(performance.now())}}var c=n(238311),d=n(140387),u=n(880855),m=n(714989),p=n(946829),h=n(199951),_=n(653798),g=n(399991),f=null,E=null;let y=new p.L;function b(){return f}function v(){return null}class T{bindContext(e,r){(0,d.R)(e,r,(0,i.iL)().WebGLEmscriptenObj)}getNewProgramId(){let e=(0,i.iL)().WebGLEmscriptenObj;return e.getNewId(e.programs)}}let I=class e{getDynamicConfigBoolean(r,n,a){return c.w$.getDynamicConfigBoolean(r,n,a,e.SourceLoggingString)}getDynamicConfigNumber(r,n,a){return c.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString)}getDynamicConfigString(r,n,a){return c.w$.getDynamicConfigString(r,n,a,e.SourceLoggingString)}getExperimentBoolean(r,n,a){return c.w$.getExperimentBoolean(r,n,a,e.SourceLoggingString)}getExperimentNumber(r,n,a){return c.w$.getExperimentNumber(r,n,a,e.SourceLoggingString)}getExperimentString(r,n,a){return c.w$.getExperimentString(r,n,a,e.SourceLoggingString)}clearFeatureGatesForTesting(){c.w$.clear()}updateFeatureGateForTesting(e,r){c.w$.updateFeatureGateForTesting(e,r)}getFeatureGate(e){return c.w$.getFeatureGateFromInitialOptions(e)}setInRenderServerForViewerTests(){c.w$.setInRenderServerForViewerTests()}};async function S(){if(!Fig.createViewer)try{let e=Fig.tsViewerScriptURL;await (0,o.k0)(e)}catch(e){throw e}}function w(e,r,n,i){let[o,s]=a.useState(null),c=a.useRef({viewerMode:e,containerElement:r,loadTimeTracker:u.Su,statsigViewerWebConfig:new I,socketConnectionTracker:new l("prototype.multiplayer_socket_connection_attempt","prototype.multiplayer_socket_disconnect"),safeModeOptions:h.ld,emscriptenGL:new T,logError:(e,r,n,a,i)=>{switch(e){case"DEBUG":(0,_.ED)(r,n,a,i);break;case"INFO":(0,_.Lo)(r,n,a,i);break;case"WARN":(0,_.xi)(r,n,a,i);break;case"ERROR":(0,_.x1)(r,n,a,i)}},...n});a.useEffect(()=>{let e=c.current;(async function(){let{containerElement:r}=c.current;f&&!i?(JSON.stringify({...e,containerElement:null})===JSON.stringify(E)||(0,g.nl)()||console.warn("useViewer called with different options than the first call!"),r&&f.setNewContainerElement(r)):(E={...e,containerElement:null},await S(),f=await Fig.createViewer(e)),s(f)})()},[i]),a.useEffect(()=>{o&&r&&o.setNewContainerElement(r)},[o,r]);let d=r?.getBoundingClientRect();return a.useLayoutEffect(()=>{o?.forceFrame()},[o,d?.x,d?.y,d?.height,d?.width]),o}function A(e,r,n){a.useEffect(()=>(e?.on(r,n),()=>{e?.off(r,n)}),[e,r,n])}function C(e){let r=document.createElement("div");r.setAttribute("id","viewer_debug_stats"),document.body.appendChild(r),r.style.cssText=`
  font-size: 18px;
  position: fixed;
  left: 6px;
  top: 48px;
  background-color: black;
  color: white;
  border-radius: 3px;
  display: flex;
  flex-direction: column;
  padding: 6px;
  `,setInterval(()=>{for(;r.firstChild;)r.removeChild(r.firstChild);let n=e.getStatsForDebugging();for(let e in n){let a=document.createElement("div");a.innerHTML=`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${n[e]}
        </span>
      </div>
      `,r.appendChild(a)}let a=(0,m.rE)();for(let e in a){let n=document.createElement("div");n.innerHTML=`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${a[e]}
        </span>
      </div>
      `,r.appendChild(n)}},1e3/30)}I.SourceLoggingString="viewer"},483578:(e,r,n)=>{n.d(r,{H:()=>d});var a=n(469222),i=n(777535),o=n(163773),s=n(841962),l=n(736482),c=n(771952);function d(e){if(!(0,s.kc)().web_vitals_report)return;let r=o.Ay.location.pathname+o.Ay.location.search,n=!!document.querySelector('meta[name="is_preload_streaming"]'),d=!!document.querySelector('meta[name="is_serving_resized_image"]');function u(a){let c={name:a.name,google_rating:a.rating,navigation:a.navigationType,id:a.id,value:a.value,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d,statsig_client_bootstrap:(0,s.w0)().statsig_client_bootstrap??!0,statsig_has_bootstrap_values:!!(0,s.tl)().statsig_bootstrap_values};(0,i.sx)("Web Vital Metrics",c,{forwardToDatadog:!0,sendAsBeacon:!0})}function m(a,s){let u={name:s,google_rating:"not-applicable",navigation:function(){let e=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];return e?document.prerendering||(e.activationStart||0)>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-"):"navigate"}(),value:a.timeStamp,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),id:(0,c.g)(),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d};(0,i.sx)("Web Vital Metrics",u,{forwardToDatadog:!0,sendAsBeacon:!0})}(0,a.lt)(u),(0,a.fK)(u),(0,a.zB)(u),(0,a.IN)(u),(0,a.Ck)(u),(0,a.rH)(u,{reportAllChanges:!0}),document.addEventListener("DOMContentLoaded",e=>m(e,"DCL")),window.addEventListener("load",e=>m(e,"LOAD"))}},597338:(e,r,n)=>{n.d(r,{IJ:()=>T,Vu:()=>h,WQ:()=>f,Zj:()=>b,ap:()=>g,dK:()=>E,wO:()=>_,x2:()=>v,xt:()=>p});var a=n(777535),i=n(841962),o=n(703079),s=n(747484),l=n(653798),c=n(399991),d=n(140387),u=n(699596),m=n(229419),p=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.NO_WEBGL=1]="NO_WEBGL",e[e.STENCIL_TEST_FAILURE=2]="STENCIL_TEST_FAILURE",e))(p||{});function h(){return!(s.Ay.safari||s.Ay.firefox||s.EC||(0,s.j9)()&&!(0,c.PN)())&&void 0!==navigator.gpu}function _(){return!!h()&&!(0,i.kc)().webgl1_override&&!(0,i.kc)().webgl2_override&&(!!b()||((0,s.cX)()?!!(0,i.kc)().use_webgpu:(0,s.uF)()||(0,s.Zs)()?!!(0,i.kc)().use_webgpu_windows_chromeos:!!((0,s.j9)()&&(0,c.PN)())&&(!!(0,i.kc)().use_webgpu||!!(0,i.kc)().use_webgpu_windows_chromeos)))}function g(){return!!(0,i.kc)().webgl2_override||!(0,i.kc)().webgl1_override&&u.X.isWebGL2Supported()}function f(){return u.X.isWebGL2Supported()}function E(){return null==window.webGLTestResult&&(window.webGLTestResult=function(){var e=0;try{let r=function(){let e=document.createElement("canvas");try{return e.getContext("webgl")}catch(e){}return null}();r||(e=1),0!==e||r?.isContextLost()||function(e){let r=e.getExtension("WEBGL_debug_renderer_info"),n=r&&(e.getParameter(r.UNMASKED_RENDERER_WEBGL)+"").toLowerCase(),a={gpu_vendor:n?/\bamd\b|\bati\b/.test(n)?"amd":/\bnvidia\b/.test(n)?"nvidia":/\bintel\b/.test(n)?"intel":"unknown":"unknown",gpu_api:n?/direct3d9/.test(n)?"d3d9":/direct3d11/.test(n)?"d3d11":/opengl/.test(n)?"opengl":"unknown":"unknown"};(0,o.Rh)("page_load",a).catch(e=>console.error("Error trying to send tags",a,e))}(r)}catch(e){}return e}()),window.webGLTestResult}class y{constructor(){this._isJSLUHDChromeOS=!1,this._isJSLUHDChromeOS=this.isJSLUHDChromeOS()}isJSLUHDChromeOS(){if(!(0,s.Zs)()||!h()||!(0,i.kc)().use_webgpu_chromeos_jsl_override)return!1;let e=(0,d.j)(g());if(!e)return!1;let r=e.getExtension("WEBGL_debug_renderer_info");if(!r)return!1;let n=e.getParameter(r.UNMASKED_RENDERER_WEBGL);return/uhd graphics \(jsl\)/i.test(n)&&/vulkan/i.test(n)}mustUseWebGPU(){return this._isJSLUHDChromeOS}static getInstance(){return this._instance||(this._instance=new y),this._instance}}function b(){try{return y.getInstance().mustUseWebGPU()}catch(e){return(0,l.x1)("Error checking if we must use WebGPU",e?.message??"Unknown error",{reportAsSentryError:!0}),!1}}function v(){let e=(0,d.j)(g());return!!e?.getExtension("WEBGL_compressed_texture_astc")}function T(){let e="webgl_not_supported",r="unknown",n="unknown",i="unknown";if(0===window.webGLTestResult){e=u.X.initializationStatus();let a=(0,m.l)();a&&(r=a.graphicsCardName,n=a.vendor,i=a.webGLVersion)}a.az.trackDefinedEvent("rendering_and_animation.webgl_initialization",{status:e,renderer:r,vendor:n,version:i})}},319898:(e,r,n)=>{n.d(r,{jm:()=>a}),n(411855),n(76265);let a={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages"}},837534:(e,r,n)=>{function a(e){let r=document.visibilityState;e?(delete document.visibilityState,delete document.hidden):Object.defineProperties(document,{visibilityState:{value:"hidden",configurable:!0},hidden:{value:!0,configurable:!0}}),r!==document.visibilityState&&(i=!1,document.dispatchEvent(new Event("visibilitychange",{bubbles:!0}))),i=!e}n.d(r,{R:()=>a});let i=!1;window.addEventListener("visibilitychange",function(e){i&&(e.stopPropagation(),e.stopImmediatePropagation())},{capture:!0,passive:!0})},966167:(e,r,n)=>{n.d(r,{g:()=>a});var a=(e=>(e[e.PNG=0]="PNG",e[e.JPEG=1]="JPEG",e[e.PDF=2]="PDF",e))(a||{}),i=(e=>(e[e.SAVED=0]="SAVED",e[e.SAVING=1]="SAVING",e[e.PAUSED=2]="PAUSED",e))(i||{})},401110:(e,r,n)=>{var a=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.READ_ONLY_FILE=1]="READ_ONLY_FILE",e))(a||{}),i=(e=>(e[e.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",e))(i||{}),o=(e=>(e[e.BEGAN=0]="BEGAN",e[e.MOVED=1]="MOVED",e[e.ENDED=2]="ENDED",e[e.CANCELLED=3]="CANCELLED",e[e.MOVED_COALESCED=4]="MOVED_COALESCED",e))(o||{})},774270:(e,r,n)=>{n.d(r,{H:()=>i}),n(411855),n(188507);var a=n(805014);n(885123),n(581713),n(366172),n(798361),n(401110);let i=[a.NLJ.VECTOR_PENCIL,a.NLJ.HIGHLIGHTER,a.NLJ.WASHI_TAPE,a.NLJ.ERASER,a.NLJ.LASSO];a.NLJ.VECTOR_PENCIL,a.NLJ.HIGHLIGHTER,a.NLJ.WASHI_TAPE},147742:(e,r,n)=>{n.d(r,{VA:()=>l,ty:()=>s});var a=n(991458),i=n(215587),o=n(488527);function s(){let e=window.FigmaMobile;return e?.shouldAllowSimulatedRightClick??!0}function l(){return(0,i.Dz)()?(0,a.hG)(o.kLt)+(0,a.hG)(o.M$q):(0,a.hG)(o.tui)}},161538:(e,r,n)=>{n.d(r,{y:()=>g}),n(390512);var a=n(411855),i=n(777535),o=n(901963),s=n(693565),l=n(76265);n(952979);var c=n(163773),d=n(750570),u=(e=>(e.SET_CANVAS_SPACE_CENTER="SET_CANVAS_SPACE_CENTER",e.SET_CURRENT_PAGE_ID="SET_CURRENT_PAGE_ID",e.ADJUST_ZOOM="ADJUST_ZOOM",e.SET_ZOOM="SET_ZOOM",e.RESET_ZOOM_TO_FIT_CANVAS_CONTENT="RESET_ZOOM_TO_FIT_CANVAS_CONTENT",e.SET_COMMENT_MODE="SET_COMMENT_MODE",e.SET_CURSOR_STYLE="SET_CURSOR_STYLE",e.SET_SCROLL_TO_PAN="SET_SCROLL_TO_PAN",e))(u||{}),m=n(787337),p=n(424755),h=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e))(h||{});function _(e){let{access_type:r,accessed_via:n}=e,i=a.useMemo(()=>{let r={icon:m.A,message:function(e){switch(e){case"file":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_file");case"prototype":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_prototype")}}(e.type)},a={icon:m.A,message:n?(0,l.t)("proto.embeds.visible_to_org_name",{orgName:n.name}):(0,l.t)("proto.embeds.visible_to_everyone_in_your_org")};return{edit:null,view:null,org_edit:a,org_view:a,inherit:r,invite_only:r,workspace_edit:null,workspace_view:null}},[n,e.type]);if(!r)return null;let o=i[r];if(!o)return null;let{icon:c,message:d}=o;return a.createElement("div",{className:"embed_documentation_footer--documentationAccessLevel--a1Kwf"},a.createElement(s.B,{className:"embed_documentation_footer--documentationAccessLevelIcon--G-bLc",svg:c}),a.createElement("span",{className:"embed_documentation_footer--documentationAccessLevelReason--H-eVa ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},d))}function g(e){let r=`/${e.isPrototype?"proto":"file"}/${e.fileKey}${e.params.startsWith("?")?e.params:`?${e.params}`}`;return a.createElement("a",{className:"embed_documentation_footer--documentationFooter--cRlI0",target:"_blank",rel:"noopener",href:r,onClick:()=>{(0,i.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:e.fileKey,kind:e.isPrototype?"proto":"file",embed_host:(0,d.v6)(c.Ay.location.search).embed_host})}},a.createElement("div",{className:"embed_documentation_footer--documentationFooterRight--llo4e"},a.createElement(_,{...e,type:e.isPrototype?"prototype":"file"})),a.createElement("div",{className:"embed_documentation_footer--documentationFooterLeft--LSi6J"},a.createElement(s.B,{className:"embed_documentation_footer--documentationFooterIcon--KNE1D",svg:p.A}),a.createElement("span",{className:"embed_documentation_footer--documentationFooterTitle--cJTEV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.fileName),e.touchedAt&&a.createElement("span",{className:"embed_documentation_footer--documentationFooterUpdatedAt--AroJM text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,l.tx)("proto.embeds.last_edited",{relativeTime:a.createElement(o.h1,{date:e.touchedAt})}))))}},759240:(e,r,n)=>{function a(e,r){return{id:e,...r}}n.d(r,{$T1:()=>S,BWk:()=>P,Clh:()=>F,DFF:()=>T,GCV:()=>N,JUF:()=>$,KdZ:()=>A,Kze:()=>E,L6E:()=>W,LPt:()=>k,MJs:()=>_,Msu:()=>i,MxF:()=>b,NM0:()=>Y,Nh9:()=>K,Njd:()=>h,QpH:()=>O,SqV:()=>R,TaD:()=>M,UDe:()=>s,Wd_:()=>o,aI5:()=>u,ar0:()=>c,b0J:()=>V,bIZ:()=>w,dvJ:()=>G,ePo:()=>L,hPP:()=>d,hoH:()=>B,jkr:()=>D,koo:()=>H,kp0:()=>p,lLk:()=>m,rRT:()=>x,s3e:()=>U,t0T:()=>I,tBR:()=>v,tyv:()=>y,tzJ:()=>C,wRI:()=>f,y3_:()=>l,zoI:()=>g});let i=a("EnterpriseOrgAdminOnboarding",{team:"scale"}),o=a("FigJamAdvancedDiagrammingOnboarding",{team:"figjam",queueOnBlock:!0});a("SlidesPluginOnboarding",{team:"slides",queueOnBlock:!0,lifecycle:{userFlagName:"slides_plugin_onboarding_seen",maxTimes:1}});let s=a("LibrariesWorkspaceOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),l=a("MobileProtoDownloadModalPrompt",{team:"desktop"}),c=a("MultiplayerObservationNux",{team:"feedback",queueOnBlock:!0}),d=a("MultiplayerSpotlightNudgeNux",{team:"feedback"}),u=a("MultiplayerSpotlightNux",{team:"feedback",queueOnBlock:!0}),m=a("OnboardFigJamEditor",{team:"figjam",queueOnBlock:!0}),p=a("OnboardFigJamEditorBrowseTemplates",{team:"figjam",queueOnBlock:!0}),h=a("OnboardFigJamEditorMakeSomething",{team:"figjam",queueOnBlock:!0}),_=a("OnboardFigJamViewer",{team:"figjam",queueOnBlock:!0}),g=a("OnboardFigJamEditorUnified",{team:"figjam",queueOnBlock:!0}),f=a("OnboardFigJamEditorUnifiedPanAndZoom",{team:"figjam",queueOnBlock:!0}),E=a("OnboardFigJamEditorUnifiedProduct",{team:"figjam",queueOnBlock:!0}),y=a("PrototypePreloadedOverlay",{team:"scenegraph_and_sync"}),b=a("ProOnboardingPrototypeOnlyLinksOverlay",{team:"monetization_upgrades"}),v=a("SearchWorkspaceOnboarding",{team:"scale"}),T=a("SprigSurveysOverlay",{team:"community",queueOnBlock:!1,allowShowingIfModalPresent:!0}),I=a("ViewerToEditorOverlay",{team:"monetization_upgrades"}),S=a("MobileReplyUpsellHint",{team:"desktop"}),w=a("FeedPostDetailZoomPanNudge",{team:"explore",allowShowingIfModalPresent:!0}),A=a("SharingClarityBranchModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),C=a("SharingClarityFileAudienceOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),N=a("SharingClarityFileModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),L=a("SharingClarityPrototypeModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),O=a("SharingClarityProjectCreationPermissionOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),R=a("SharingClarityProjectCreationTeamAccessOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),P=a("SharingClarityProjectModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),D=a("SharingClarityTeamCreationOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),k=a("TeamAdminManageUnassignedDraftsOverlay",{team:"scale"}),M=a("AdminDashboardOnboardingOverlay",{team:"monetization_expansion",queueOnBlock:!0,lifecycle:{userFlagName:"seen_admin_dashboard_onboarding",maxTimes:1}}),F=a("AdminSeatApprovalSettingsOnboardingOverlay",{team:"monetization_expansion",queueOnBlock:!0,lifecycle:{userFlagName:"seen_admin_seat_approval_settings_onboarding",maxTimes:1}}),x=a("AdminNavigationOnboardingOverlay",{team:"scale",queueOnBlock:!0,lifecycle:{userFlagName:"seen_admin_navigation_onboarding",maxTimes:1}}),U=a("AdminBillingOverviewSecondaryTabOnboardingOverlay",{team:"scale",queueOnBlock:!0,lifecycle:{userFlagName:"seen_admin_billing_overview_secondary_tab_onboarding_overlay",maxTimes:1}}),B=a("OrgAdminBillingGroupsSecondaryTabOnboardingOverlay",{team:"scale",queueOnBlock:!0,lifecycle:{userFlagName:"seen_org_admin_billing_groups_secondary_tab_onboarding_overlay",maxTimes:1}}),V=a("FilePreviewOverlay",{team:"search",lifecycle:{userFlagName:"seen_file_preview_overlay",maxTimes:1}}),G=a("DevModeOnboardingTooltipOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_onboarding_tooltip",maxTimes:1}}),H=a("DeveloperRFDUpsellOverlay",{team:"activation",queueOnBlock:!1,lifecycle:{userFlagName:"dev_mode_has_seen_rfd_upsell",maxTimes:10,cooldown:"MONTHLY"}}),W=a("DeveloperContextualUpsellExportOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_contextual_upsell_export_overlay",maxTimes:2,cooldown:"FORTNIGHTLY"}}),K=a("DeveloperContextualUpsellMeasureOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_contextual_upsell_measure_overlay",maxTimes:2,cooldown:"FORTNIGHTLY"}}),Y=a("FileViewHistoryOnboardingOverlay",{team:"workflow"}),$=a("ColorContrastOnboardingOverlay",{team:"developer_tools",lifecycle:{userFlagName:"has_seen_color_contrast_onboarding_overlay",maxTimes:1}})},584261:(e,r,n)=>{n.d(r,{u4:()=>d}),n(411855),n(707062);var a=n(841962),i=n(875877);n(728722),n(73041);var o=n(661137);n(314540),n(183739),n(940795),n(269049);var s=n(689102);n(732767);var l=n(948927),c=n(138406);function d(){let e=(0,i.useAtomValue)(m),r=(0,o.sZ)()||null,n=(0,s.ol)()||null,d=(0,l.Td)(),u=!(0,c.lt)({currentOrg:r,currentTeam:n,isViewer:d});return(0,a.kc)().qa_ai_metering?{loading:"loading"===e,isSlidesAiEnabled:"has_permission"===e}:{loading:!1,isSlidesAiEnabled:u}}var u=(e=>(e.LOADING="loading",e.HAS_PERMISSION="has_permission",e.NO_PERMISSION="no_permission",e))(u||{});let m=(0,i.atom)("loading")},183949:(e,r,n)=>{n.d(r,{WN:()=>m});var a=n(411855),i=n(188507),o=n(805014),s=n(777535),l=n(163773),c=n(544920),d=n(736041),u=n(534173);function m(){let e=(0,i.wA)();return(0,a.useCallback)(r=>{(0,s.sx)("show_auth_for_logged_out_file",{actionType:function(e){switch(e){case o.rcl.SET_TOOL_DEFAULT:return"SET_TOOL_DEFAULT";case o.rcl.SET_TOOL_COMMENTS:return"SET_TOOL_COMMENTS";case o.rcl.FOLLOW_PRESENTER:return"CLICK_SIDEBAR_AVATAR";case o.rcl.ENTER_INSPECT_MODE:return"CLICK_SIDEBAR_PROPERTIES";case o.rcl.SET_TOOL_DEFAULT_DEV_HANDOFF:return"CLICK_TOGGLE_DEV_MODE";case o.rcl.PRESENT_AS_PROTOTYPE:return"CLICK_SIDEBAR_PROTOTYPE";case o.NLJ.COMMENTS:return"CLICK_TOOLBELT_COMMENTS";case o.NLJ.FRAME:return"CLICK_TOOLBELT_FRAME";case o.NLJ.SHAPE_RECTANGLE:return"CLICK_TOOLBELT_RECTANGLE";case o.NLJ.VECTOR_PEN:return"CLICK_TOOLBELT_PEN";case o.NLJ.TYPE:return"CLICK_TOOLBELT_TEXT";case"SELECT_COMMENT_SIDEBAR":return"SELECT_COMMENT_SIDEBAR";case"TOOLGROUP_CHEVRON":return"TOOLGROUP_CHEVRON";case"SHARE_BUTTON":return"SHARE_BUTTON";case"GOOGLE_SSO_BUTTON":return"GOOGLE_SSO_BUTTON";case"SIGN_UP_BUTTON_BANNER":return"SIGN_UP_BUTTON_BANNER";case"QUICK_ACTIONS_TOOL":return"QUICK_ACTIONS_TOOL";case"SIGN_UP_CTA_COMMENTS_PANEL":return"SIGN_UP_CTA_COMMENTS_PANEL";case"COMPONENT_INSERT":return"COMPONENT_INSERT";case"LEFT_PANEL_FILE_NAME_CHEVRON":return"LEFT_PANEL_FILE_NAME_CHEVRON";case"LEFT_PANEL_FIGMA_LOGO":return"LEFT_PANEL_FIGMA_LOGO";case"COMMENT_PIN_CLICK":return"COMMENT_PIN_CLICK";default:return"UNKNOWN_ACTION"}}(r)}),e(c.Ts({origin:"signed_out_edit",redirectUrl:l.Ay.location.pathname})),e((0,d.to)({type:u.x,data:{actionOrTool:r}}))},[e])}},805441:(e,r,n)=>{n.d(r,{Wv:()=>C,ZH:()=>A,gK:()=>w});var a=n(411855),i=n(188507),o=n(351966),s=n(629019),l=n.n(s),c=n(538971),d=n(607895),u=n(437068),m=n(544920),p=n(700509),h=n(89822),_=n(451432),g=n(250392),f=n(76265),E=n(278695),y=n(140835),b=n(190500),v=n(512882),T=n(110128),I=n(233304);let S=a.forwardRef(function({className:e,showUpdatedInputDesign:r,...n},i){return r?a.createElement(_.LN,{className:e,...(0,d.d)(n),ref:i}):a.createElement(g.L,{className:l()(T.hF,e),...(0,d.d)(n),ref:i})});function w(e){let r=I.a,n=`${e.isInvalid?r:""}`,i={...e,className:n};return delete i.isInvalid,a.createElement(S,{...(0,d.d)(i)})}function A(e){let[r,n]=(0,a.useState)(null),s=(0,i.wA)(),l=(0,i.d4)(e=>e.auth.formState),d=(0,i.d4)(e=>e.auth.clickedSAMLSignIn),_=(0,i.d4)(e=>e.auth.email),g=(0,i.d4)(e=>e.auth.invalidInput),{trackEvent:I}=(0,y.j6)(),S=e=>{e&&l===p.qB.SIGN_IN&&s(m.E({formState:p.qB.SAML_START}))},A=async e=>{if(s(m.BZ({value:e})),!d&&(0,c.xf)(e)){await (0,h.sT)({email:e},l?.toString()||"unknown");try{let r=u.Q_()?.getItem(`SIGN-IN ${e}`);if(r){S("true"===r);return}let{data:n}=await v.F.getOrgSamlConfigRequired({email:e});u.Q_()?.setItem(`SIGN-IN ${e}`,n.meta.saml_sso_only),S(!!n.meta.saml_sso_only)}catch(e){l===p.qB.SAML_START&&s(m.E({formState:p.qB.SIGN_IN}))}}},C=()=>{let e=_.split("@")[0];A(`${e}@${r}`),n(null),I(b.Ws,{trackingDescriptor:E.c.USE_SUGGESTED_EMAIL,previousDomain:e,newDomain:r})},N=e.placeholder??(0,f.t)("auth.email-input-placeholder");return a.createElement(a.Fragment,null,a.createElement(w,{onChange:e=>A(e.currentTarget.value),onBlur:r=>{if(e.onBlur?.(r,!0),e.showDomainSuggestions){let e=_.split("@")[1];n((0,c.bs)(e))}},value:_,name:p.RE.EMAIL,placeholder:N,type:"email",id:"email",autoComplete:"username",autoCapitalize:"off",autoCorrect:"off",isInvalid:p.RE.EMAIL===g,showUpdatedInputDesign:e.showUpdatedInputDesign,"aria-invalid":p.RE.EMAIL===g,"aria-describedby":e.ariaDescribedBy}),r&&a.createElement("div",{"data-testid":"domain-suggestion",className:T.rt},(0,f.tx)("auth.email-domain-suggestion-prompt",{domainSuggestion:a.createElement(o.E,{className:T.nf,onClick:()=>C()},r)})))}function C(e){let[r,n]=(0,a.useState)(""),o=(0,i.wA)(),s=(0,i.d4)(e=>e.auth.invalidInput),l=e.placeholder??(0,f.t)("auth.password-input-placeholder"),c=e.isSignUp?"new-password":"current-password";return a.createElement(w,{name:p.RE.PASSWORD,type:"password",placeholder:l,autoCapitalize:"off",autoCorrect:"off",autoComplete:c,id:"current-password",value:r,onChange:function(e){n(e.currentTarget.value),o(m.OZ({googleIdToken:null}))},onBlur:e.onBlur,isInvalid:s===p.RE.PASSWORD,showUpdatedInputDesign:e.showUpdatedInputDesign,"aria-invalid":s===p.RE.PASSWORD,"aria-describedby":e.ariaDescribedBy})}},271792:(e,r,n)=>{n.d(r,{bv:()=>E,IU:()=>f});var a=n(411855);n(188507);var i=n(991458),o=n(918091),s=n(243877),l=n(265851),c=n(76265);n(726084);var d=n(140835);n(580034),n(125682),n(801914),n(314540);var u=n(688656),m=n(929717);n(291489);var p=n(792882),h=n(993272);let _=(0,i.hG)(h.km),g=(0,i.hG)(h.hX);function f(e){return a.createElement(d.jm,{className:e.disabled?"shared_table--optionDisabled--OhX66 shared_table--_optionBase--z8wdT shared_table--_disabled--EkV7j":"shared_table--option--hw4Sr shared_table--_optionBase--z8wdT",onClick:e.onClick,trackingProperties:e.trackingProperties,disabled:e.disabled,...e.tooltip?{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":e.tooltip,"data-tooltip-show-above":!0}:{}},e.label)}function E(e){let r=e.dropdownShown?.type===e.dropdownType,n=(0,c.t)("multi_select_list.filter_default"),i=null===e.selectedValue?n:e.getDisplayText(e.selectedValue),d=e.hideDefaultOption?e.values.length*_:(e.values.length+1)*_+g;return a.createElement(s.V,{dispatch:e.dispatch,type:e.dropdownType,showingDropdown:r},a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:l.s.maxW200.ellipsis.overflowHidden.$},e.getSelectedDisplayText?a.createElement("span",{className:l.s.noWrap.$},e.getSelectedDisplayText(e.selectedValue)):a.createElement(a.Fragment,null,a.createElement("span",{className:l.s.noWrap.$},e.label,":")," ",a.createElement("span",{className:l.s.noWrap.$},i))),r&&a.createElement(o.gw,{stopScrollPropagation:!0,dispatch:e.dispatch,className:p.sI,style:e.dropdownShown.data.position},a.createElement(m.g1,{maxDropdownHeight:e=>Math.round(.5*e),dropdownChildrenHeight:d},!e.hideDefaultOption&&a.createElement(a.Fragment,null,a.createElement(o.rr,{checked:null===e.selectedValue,onClick:()=>e.updateFilter(null),trackingProperties:{filterType:e.dropdownType}},n),a.createElement(o.wv,null)),e.values.map(r=>a.createElement(o.ru,{key:e.getDisplayText(r),checked:e.selectedValue===r,onClick:()=>e.updateFilter(r),primaryText:e.getDisplayText(r),secondaryText:null===e.selectedValue&&e.getCount?e.getCount(r).toString():"",trackingProperties:{filterType:e.dropdownType,text:e.getDisplayText(r)}})))))}var y=(e=>(e.NONE="NONE",e.UNASSIGNED="UNASSIGNED",e.WORKSPACE="WORKSPACE",e))(y||{})},600433:(e,r,n)=>{n.d(r,{G:()=>s});var a=n(411855),i=n(76265),o=n(233950);function s(){return a.createElement(a.Fragment,null,a.createElement(o.E,{color:"handoff",fontWeight:"medium",fontSize:11},(0,i.tx)("checkout.dev_mode_included_text_formatted.dev_mode"))," ",a.createElement(o.E,{color:"secondary",fontSize:11},(0,i.tx)("checkout.dev_mode_included_text_formatted.included")))}},576467:(e,r,n)=>{n.d(r,{$$:()=>s,nR:()=>c,pz:()=>u,tM:()=>d,vd:()=>l});var a=n(411855),i=n(140835),o=n(959278);function s(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.xZ} ${r}`,type:"button",...n},e.children)}let l=(0,i.tf)(s);function c(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.HM} ${r}`,type:"button",...n},e.children)}let d=(0,i.tf)(c);function u(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.AJ} ${r}`,type:"button",...n},e.children)}},769849:(e,r,n)=>{n.d(r,{GY:()=>l,N0:()=>o,We:()=>s,oz:()=>c,wI:()=>u,zq:()=>a});var a=(e=>(e[e.ROW=0]="ROW",e[e.TILE=1]="TILE",e[e.SEPARATOR=2]="SEPARATOR",e))(a||{}),i=(e=>(e.LIBRARY="library",e.PAGE="page",e.NAME_GROUP="name group",e.LOCAL_COMPONENTS="local components",e.LOCAL_TEMPLATES="local templates",e.COMPONENTS="library components",e.TEMPLATES="library templates",e.RESPONSIVE_SETS="library responsive sets",e))(i||{});function o(e){return 0===e.type&&"isSticky"in e&&e.isSticky}function s(e){return 0===e.type&&"isExpandable"in e&&e.isExpandable}function l(e){return 0===e.type&&"isButton"in e&&e.isButton}class c{constructor(e){this.allElements=[],this.isExpanded=e=>s(e)&&e.isExpanded,this.offsetTop=e}static getNextRenderedElementTop(e){if(!e||0===e.length)return 0;let r=e[e.length-1];return r.top+r.height}reset(){this.allElements=[]}getTotalHeight(){let e=0;for(let r of this.allElements)s(r)&&(e+=d(r));return c.getNextRenderedElementTop(this.allElements)+e}findExpandableElementWithKey(e){for(let r of function* e(r){for(let n of r)yield n,s(n)&&n.isExpanded&&(yield*e(n.children))}(this.allElements))if(s(r)&&r.key===e)return r;return null}getActualTop(e){let r=0;for(let n of this.allElements){if(n.key===e)return n.top+r;this.isExpanded(n)&&(r+=d(n))}return null}getRenderedElementsInView(e,r){let n=e-this.offsetTop,a=Math.ceil(r/2),i=Math.max(n-a,0),l=n+r+a,c=(e,r)=>!(e+r<i||e>l),u=(e,a)=>!(e+a<n||e>n+r),m=[],p={};for(let{element:e,actualTop:r}of function* e(r,n){for(let a of r){let r=n+a.top;if(yield{element:a,actualTop:r},s(a)&&a.isExpanded){let i=r+a.height;yield*e(a.children,i),n+=d(a)}}}(this.allElements,0))if(c(r,e.height)){p[e.key]=m.length;let n={...e,top:r};m.push(n)}let h=null,_=0;for(let e of m)if(n>0&&u(e.top,e.height)){0===e.type&&"isSticky"in e&&e.isSticky&&!(s(e)&&!e.isExpanded)?h=e:e.parent&&o(e.parent)&&(h={...e.parent,key:`${e.key}:parent`,isStaticRow:!0},m.push(h));break}return null!=h&&o(h)&&n>h.top&&(h.isFixed=!0,_=Math.max(n-h.top,0)),{elementsInView:m,stickyHeader:h&&h.isFixed?h:null,stickyHeaderOffset:_}}}let d=e=>{let r=0;if(e.isExpanded)for(let n of(r+=c.getNextRenderedElementTop(e.children),e.children))s(n)&&(r+=d(n));return r};function u(e){let r=e;for(;r&&!(s(r)&&["library","local components","local templates"].includes(r.rowType));)if(!(r=r.parent))return null;return r}},765728:(e,r,n)=>{n.d(r,{Q:()=>R});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(875877),c=n(666308),d=n(563192),u=n(153767),m=n(736041),p=n(365315),h=n(470426),_=n(265769),g=n(215802),f=n(772691),E=n(176160),y=n(827473),b=n(285024),v=n(784202),T=n(592165),I=n(845804),S=n(455731),w=n(678599),A=n(965434),C=n(433576),N=n(60329),L=n(287072),O=n(856431);function R({enableKeyboardNavigation:e,colIndex:r,rowIndex:n,isList:i,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}){return e?a.createElement(P,{colIndex:r,rowIndex:n,isList:i,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}):a.createElement(D,{enableKeyboardNavigation:e,isList:i,isTileSelected:o,renderedElement:s})}function P({colIndex:e,rowIndex:r,isList:n,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:T}){let L=a.useContext(v.U),O=(0,i.d4)(e=>e.modalShown),R=(0,i.d4)(E.sS),P=(0,S.J)(s.item,s.sectionPosition,s.sectionNameForTracking),k=(0,A.n)(s.item),M=(0,f.u)({canSwap:!0,openFileKey:R??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),F=a.useCallback(()=>{O?.type!==I.V||k||P()},[k,O?.type,P]),x=a.useCallback(()=>{O?.type!==I.V&&L?.onOpenFlyout(s.item,s.sectionPosition,s.sectionNameForTracking)},[L,O?.type,s.item,s.sectionPosition,s.sectionNameForTracking]),{keyboardNavigationItem:U,setKeyboardNavigationElement:B}=(0,u.M3)({path:[1,r],column:n?null:e,id:(0,p.V)(s.item),onFocus:F}),V=function({onComponentInsertSwap:e,onOpenFlyout:r,keyboardNavigationItem:n,item:o,sectionNameForTracking:s,sectionPosition:d,shouldRefocusAfterKeyboardInsert:u,rowIndex:p,colIndex:f,isList:E,sourceForTracking:v}){let T=(0,i.wA)(),S=(0,i.d4)(e=>e.modalShown),A=(0,l.useAtomValue)(N.TG),L=(0,g.Ew)({assetKey:(0,b.u2)(o),assetLibraryKey:o.library_key,assetType:o.type,isList:E,sectionNameforTracking:s,sectionPosition:d,sourceForTracking:v??w.mZ,aiScore:o.ai_score??void 0,lexicalScore:o.lexical_score??void 0,isExample:(0,h.o)(o,A),partnerType:(0,_.X)(o.library_key)}),O=(0,C.ZV)(L);return a.useCallback(a=>{if((a.keyCode===c.Uz.ENTER||a.keyCode===c.Uz.SPACE)&&(0,y.dx)(o)){if(a.metaKey){r();return}if(e(a,o),O(a),u&&!(0===p&&0===f)){let e=E?n?.getItemAbove():n?.getItemToTheLeft();e?.focus()}else n?.blur();S?.type===I.V&&T(m.AS())}},[f,T,O,E,o,n,S?.type,e,r,p,u])}({colIndex:e,rowIndex:r,isList:n,keyboardNavigationItem:U,onComponentInsertSwap:M,onOpenFlyout:x,...s,shouldRefocusAfterKeyboardInsert:T}),G=a.useCallback(e=>{(0!==e.detail||e.nativeEvent.pointerType)&&(U?.focus(),x())},[x,U]),H=`componentScrollContainerTile.${e}.${r}`,W=d.rf(H,"click",G);return a.createElement(D,{enableKeyboardNavigation:!0,isList:n,isShownInFlyout:k,isTileSelected:o,onKeyDown:V,onClick:W,onSetKeyboardNavigationElement:B,renderedElement:s})}function D({enableKeyboardNavigation:e,isList:r,isShownInFlyout:n,isTileSelected:i,onKeyDown:o,onClick:c,onSetKeyboardNavigationElement:d,renderedElement:u}){let m=(0,l.useAtomValue)(T.T),p=i?.(u)??!1;a.useEffect(()=>{r?u.element=a.cloneElement(u.element,{}):u.element=a.cloneElement(u.element,{selected:p})},[r,p,u]);let h={top:u.top,left:u.left,height:r?u.height:void 0},_=s()(r?O.fJ:O.ND,{[L.QT]:!r,[O.r6]:r&&n,[O.HR]:r&&n&&m});return e||o||c?a.createElement("button",{key:u.key,style:h,className:_,onKeyDown:o,onClick:c,ref:d},u.element):a.createElement("div",{key:u.key,style:h,className:_},u.element)}},123090:(e,r,n)=>{n(411855),n(629019),n(230208),n(747484),n(265851),n(76265)},918091:(e,r,n)=>{n.d(r,{MM:()=>D,OR:()=>I,Ve:()=>T,Vq:()=>A,X3:()=>S,c$:()=>N,gS:()=>L,gw:()=>x,l4:()=>w,ms:()=>C,rr:()=>M,ru:()=>F,wv:()=>O});var a=n(411855),i=n(629019),o=n.n(i),s=n(66905),l=n(666308),c=n(64271),d=n(746643),u=n(563192),m=n(399991),p=n(693565),h=n(105300),_=n(47795),g=n(535461),f=n(140835),E=n(581713),y=n(235086),b=n(247245),v=n(783423);function T(e){let[r,n]=a.useState(!1),i="label"in e,s="dropdownButton"in e;return a.createElement("div",{className:o()(y.gD,e.className,r&&y.FR,e.shouldRenderAutocompleteStyles&&y.Rp),...e.notDraggable?{"data-not-draggable":!0}:{}},i&&a.createElement("div",{className:o()(y.Ts,e.noBorder&&y.E7,e.noRightPadding&&y.zT),onClick:()=>n(!r),role:"menu",tabIndex:0},a.createElement("div",{className:y.ep},!!e.iconLabel&&a.createElement("div",{className:y.Vi},e.iconLabel),a.createElement("p",null,e.label)),a.createElement(p.B,{className:y.tZ,svg:v.A})),s&&a.createElement(e.dropdownButton,{onClick:()=>n(!r)}),r&&a.createElement(a.Fragment,null,a.createElement("div",{className:o()(y.DE,e.dropdownOptionsClassName,e.rightAlignOptions&&y.Wh,e.optionsBelowSelector&&y.fG),onClick:e.stayOpenOnSelect?void 0:()=>n(!r),role:"menu",tabIndex:0},a.createElement(f.fu,{name:e.menuTrackingContextName||"",enabled:!!e.menuTrackingContextName,properties:e.menuTrackingProperties},a.createElement(S,{options:e.options,hideDropdown:()=>n(!1),shouldRenderAutocompleteStyles:e.shouldRenderAutocompleteStyles}))),a.createElement(B,{closeDropdown:()=>n(!1)})))}function I(e){let[r,n]=a.useState(e.focusContainerOnMount?-1:0),i=a.useMemo(()=>a.Children.toArray(e.children||e.options).filter(e=>"boolean"!=typeof e),[e.children,e.options]),o=(0,a.useRef)(Array(i.length)),s=a.useRef(document.activeElement);(0,a.useEffect)(()=>{let e=o.current[r];e&&(e.tabIndex=0,e.focus())},[r,o]);let l=a.useCallback((e,r)=>{let a=o.current[e];a&&(a.tabIndex=-1,a.focus()),n(r)},[]),c=a.useCallback(()=>{let e=r-1;for(let r of o.current)if(null==o.current[e])e=e-1<0?o.current.length-1:e-1;else break;l(r,e)},[r,l]),u=a.useCallback(()=>{let e=r+1;for(let r of o.current)if(null==o.current[e])e=e+1>=o.current.length?0:e+1;else break;l(r,e)},[r,l]);return{childrenComponents:i,getSetChildRef:e=>(e=>{if("boolean"!=typeof e&&(e.type===N||e.type===D)){let r=e.props;return!!(r.disabled||r.header)}return!1})(i[e])?d.lQ:r=>o.current[e]=r,onKeyDown:n=>{switch(n.stopPropagation(),n.nativeEvent&&n.nativeEvent.stopImmediatePropagation(),n.key){case"Escape":e.autofocusPrevElementOnEsc&&s.current?.focus(),e.hideDropdown();break;case"Tab":e.autofocusPrevElementOnTab&&s.current?.focus(),e.hideDropdown();break;case" ":case"Enter":{let n=o.current[r];n&&n.click(),e.autofocusPrevElementOnSelect&&s.current?.focus();break}case"Left":case"ArrowLeft":"horizontal"===e.orientation&&c();break;case"Up":case"ArrowUp":"horizontal"!==e.orientation&&c();break;case"Right":case"ArrowRight":"horizontal"===e.orientation&&u();break;case"ArrowDown":case"Down":"horizontal"!==e.orientation&&u();break;case"Home":case"PageUp":l(r,0);break;case"End":case"PageDown":l(r,o.current.length-1)}},onFocus:e=>{if(e&&e.target){let n=o.current.indexOf(e.target);n>=0&&l(r,n)}}}}function S(e){let{childrenComponents:r,getSetChildRef:n,onKeyDown:i,onFocus:o}=I(e),{children:s,options:l,...c}=e;return a.createElement(C,{...c,onKeyDown:i,tabIndex:-1},a.Children.map(r,(e,r)=>a.cloneElement(e,{buttonRef:n(r),onFocus:o})))}function w(e,r){let[n,i]=a.useState(null);return a.useEffect(()=>{let n=e.current;if(n){let e=n.getBoundingClientRect(),a=r.left,o=r.top;a<8?a=8:a+e.width>window.innerWidth-8&&(a=window.innerWidth-8-e.width),o<8?o=8:o+e.height>window.innerHeight-8&&(o=window.innerHeight-8-e.height),i([a,o])}},[e,r.left,r.top]),a.useMemo(()=>n?{...r,left:n[0],top:n[1]}:{...r,visibility:"hidden"},[n,r])}let A=a.forwardRef(function({style:e,...r},n){let i=a.useRef(null),o=w(i,e);return a.createElement(x,{dropdownRef:(0,c.A)(i,n),style:o,...r})});class C extends u.o6{constructor(){super(...arguments),this.stopPropagationForPointerDown=e=>{(0,E.ft)()&&(0,E.dG)(e)},this.onClick=u.cZ(this,"click",e=>{if(!this.props.onClick)return u.aH;this.props.onClick(e)})}render(){return a.createElement("div",{tabIndex:this.props.tabIndex??0,role:"menu",id:this.props.id,className:o()(y.Wm,this.props.className,{[y.DY]:this.props.positionAbsolute,[y._S]:this.props.positionFixed,[y.rU]:this.props.shouldRenderAutocompleteStyles,[g.s4]:this.props.preventZoom}),onClick:this.onClick,onMouseDown:E.dG,onScroll:this.props.stopScrollPropagation?E.dG:this.props.onScroll,onWheel:this.props.preventZoom?void 0:E.dG,onTouchStart:E.dG,onPointerDown:this.stopPropagationForPointerDown,onContextMenu:E.wo,onKeyDown:this.props.onKeyDown,style:this.props.style,"data-cancel-insertable-resource-drag-and-drop":!0,ref:this.props.dropdownRef,"aria-labelledby":this.props["aria-labelledby"],"data-onboarding-key":this.props.dataOnboardingKey,"data-testid":this.props["data-testid"],onFocus:this.props.onFocus},this.props.children)}}C.displayName="Dropdown";class N extends u.o6{constructor(){super(...arguments),this.mouseOverTimestamp=0,this.state={hover:!1},this.onDragStart=e=>{e.preventDefault()},this.onPointerOver=e=>{this.props.onPointerOver&&this.props.onPointerOver(),this.setState({hover:!0}),this.props.onHover&&this.props.onHover(!0),this.props.href||(this.mouseOverTimestamp=Number(e.timeStamp))},this.onPointerOut=e=>{this.props.onPointerOut&&this.props.onPointerOut(),this.setState({hover:!1}),this.props.onHover&&this.props.onHover(!1)},this.onPointerUp=u.cZ(this,"mouseup",e=>{if(!this.props.href){if(this.props.onPointerUp){this.props.onPointerUp(e);return}if(Number(e.timeStamp)-this.mouseOverTimestamp>20){let r=e.target;null!=r.click&&(this.mouseUpTimer=setTimeout(r.click.bind(r),1))}}}),this.onTouchEnd=e=>{let r=e.target;if(r.click&&(e.preventDefault(),r&&e.changedTouches)){let n=e.changedTouches[0];document.elementFromPoint(n.clientX,n.clientY)===r&&r.click()}},this.onClick=u.cZ(this,"click",e=>{this.props.href&&(0,l.oJ)(e)||(this.props.href?(0,s.e)(this.props.href,e):clearTimeout(this.mouseUpTimer),this.props.onClick?.(e))}),this.ariaRole=()=>this.props.header?"presentation":"role"in this.props?this.props.role??"menuitem":"menuitem"}render(){let e=this.props.disabled||this.props.header,r=o()(e?y.IZ:{[y.wY]:this.state.hover||this.props.simulateHover,[y.uK]:!0},this.props.className);return a.createElement("a",{tabIndex:-1,role:this.ariaRole(),id:this.props.id,ref:this.props.buttonRef,onFocus:this.props.onFocus,"data-search-click-action":this.props["data-search-click-action"],className:r,href:this.props.href,target:this.props.target,rel:"noopener",onClick:e?void 0:this.onClick,onPointerUp:e?void 0:this.onPointerUp,onPointerOver:e?void 0:this.onPointerOver,onPointerOut:e?void 0:this.onPointerOut,onMouseDown:this.props.onMouseDown,onKeyDown:this.props.onKeyDown,onDragStart:this.onDragStart,onTouchEnd:this.onTouchEnd,"data-dropdown-tooltip":this.props.tooltip,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.recordingKey,"data-fullscreen-intercept":this.props["data-fullscreen-intercept"],"aria-disabled":this.props.disabled,"aria-checked":"aria-checked"in this.props?this.props["aria-checked"]:void 0},this.props.children)}}N.displayName="Option";let L=(0,f.tf)(N);class O extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=y.me;return this.props.className&&(e+=` ${this.props.className}`),a.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,"data-testid":this.props.dataTestId??"dropdown-separator"},a.createElement("div",{className:y.se}))}}O.displayName="Separator";class R extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=y.jv;return this.props.className&&(e+=` ${this.props.className}`),a.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,"data-testid":this.props.dataTestId??"dropdown-indented-separator"},a.createElement("div",{className:y.se}))}}R.displayName="IndentedSeparator";var P=(e=>(e.Checkmark="Checkmark",e.Checkbox="Checkbox",e))(P||{});class D extends u.o6{render(){return a.createElement(N,{...this.props,className:o()(y.o6,"Checkbox"===this.props.displayType&&this.props.nested&&y.cY,this.props.className),"aria-checked":this.props.checked,role:"role"in this.props?this.props.role:void 0},"Checkbox"===this.props.displayType?a.createElement("span",{className:y.z6,"data-preferred-theme":"dark"},a.createElement(h.S,{disabled:this.props.disabled,checked:this.props.checked,mixed:this.props.mixed})):this.props.checked?a.createElement(p.B,{className:y.z6,svg:b.A,dataTestId:"dropdown-check-icon"}):a.createElement("span",{className:y.z6}),this.props.children)}}D.displayName="CheckableOption",D.defaultProps={displayType:"Checkmark"};class k extends u.o6{render(){return a.createElement(D,{...this.props},a.createElement("div",null,this.props.primaryText),!!this.props.secondaryText&&a.createElement("div",{className:y.pH},this.props.secondaryText))}}let M=(0,f.tf)(D),F=(0,f.tf)(k);class x extends u.o6{render(){return a.createElement(a.Fragment,null,a.createElement(C,{...this.props}),U(this.props)?a.createElement(B,{closeDropdown:this.props.closeDropdown,recordingKey:"dropdownModalScrim"}):a.createElement(B,{dispatch:this.props.dispatch,recordingKey:"dropdownModalScrim"}))}}x.displayName="DropdownWithScrim";let U=e=>!!e.closeDropdown;class B extends u.o6{constructor(){super(...arguments),this.mouseMotionSinceMouseDown=0,this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY=5,this.closeDropdown=()=>{U(this.props)?this.props.closeDropdown():this.props.dispatch(_.oB())},this.onMouseDown=u.cZ(this,"mousedown",e=>{this.mouseMotionSinceMouseDown=0,this.closeDropdown(),e.stopPropagation()}),this.onMouseMove=u.cZ(this,"mousemove",e=>{if((0,m.PN)()){if(!(this.mouseMotionSinceMouseDown<this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY))return u.aH;this.mouseMotionSinceMouseDown+=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY}else this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementX),this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementY)}),this.onMouseUp=u.cZ(this,"mouseup",e=>{this.mouseMotionSinceMouseDown>=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY&&(this.closeDropdown(),e.stopPropagation())})}render(){return a.createElement("div",{className:y.bv,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onContextMenu:E.wo,"data-does-not-dismiss-modal":!0})}}},629081:(e,r,n)=>{n.d(r,{y:()=>v}),n(390512);var a=n(411855),i=n(344793),o=n(138225),s=n(968803),l=n(398046),c=n(687767),d=n(196198),u=n(777535),m=n(952979),p=n(754668),h=n(901963),_=n(265851),g=n(76265),f=n(233950);let E=["org_edit","org_view","inherit","invite_only"],y={org_edit:s.Y,org_view:s.Y,inherit:l.$,invite_only:l.$};function b({accessData:e,isPrototype:r}){let{access_type:n}=e;if(!E.includes(n))return null;let i="";if("org_edit"===n||"org_view"===n){let r=e.accessed_via;i=r?(0,g.t)("proto.embeds.visible_to_org_name",{orgName:r.name}):(0,g.t)("proto.embeds.visible_to_everyone_in_your_org")}else("inherit"===n||"invite_only"===n)&&(i=r?(0,g.t)("proto.embeds.visible_to_people_invited_to_this_prototype"):(0,g.t)("proto.embeds.visible_to_people_invited_to_this_file"));let o=y[n];return a.createElement(o,{className:"embed_documentation_footer--accessTypeIcon--215DQ","data-tooltip":i,"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250})}function v({accessData:e,fileKey:r,fileName:n,isPrototype:o,nodeName:s,repoName:l,params:d,touchedAt:m}){let E=a.useMemo(()=>{let e=new URL(`${window.location.origin}/${o?"proto":"file"}/${r}`);return e.search=d.startsWith("?")?d:`?${d}`,e.toString()},[r,o,d]),y=a.useRef(null);return a.createElement("div",{ref:y,className:_.s.colorBg.h24.px16.py12.flex.gap8.itemsCenter.justifyBetween.bt1.bSolid.colorBorder.zIndex1.$},a.createElement("div",{className:_.s.flex.gap8.itemsCenter.h24.wFull.overflowHidden.$},a.createElement(T,{fileKey:r,params:d,isPrototype:o}),a.createElement("div",{className:"embed_documentation_footer--footerLink--fS-Mp"},l&&a.createElement(c.L,null),a.createElement(i._,{newTab:!0,trusted:!0,className:_.s.cursorPointer.font11.lh16.fontInter.fontMedium.colorText.flex.itemsCenter.gap4.overflowHidden.$,href:E,onClick:()=>{(0,u.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:o?"proto":"file",embed_host:(0,p.Yw)()})}},a.createElement("span",{className:_.s.truncate.$},n),s&&a.createElement(a.Fragment,null,a.createElement("span",null,"\xb7"),a.createElement("span",{className:_.s.truncate.$},s))))),a.createElement("div",{className:_.s.flex.gap4.alignCenter.itemsCenter.cursorDefault.$},e&&a.createElement(b,{accessData:e,isPrototype:o}),null!=m&&a.createElement(f.E,{truncate:!0,fontSize:9,color:"secondary"},(0,g.tx)("proto.embeds.last_edited",{relativeTime:a.createElement(h.h1,{date:m})}))))}function T({params:e,fileKey:r,isPrototype:n,showTooltip:i}){let s=`${window.location.origin}/${n?"proto":"file"}/${r}${e.startsWith("?")?e:`?${e}`}`,l=i?{"data-tooltip":(0,g.t)("embed.footer.figma_logo_aria_label"),"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250}:{};return a.createElement(o.K,{htmlAttributes:l,"aria-label":(0,g.t)("embed.footer.figma_logo_aria_label"),onClick:()=>{(0,m.FJ)(s,"_blank"),(0,u.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:n?"proto":"file",embed_host:(0,p.Yw)()})}},a.createElement(d.m,{className:_.s.flexShrink0.$}))}},117660:(e,r,n)=>{n.d(r,{l:()=>h});var a=n(411855),i=n(188507),o=n(351966),s=n(65879),l=n(561080),c=n(777535),d=n(952979),u=n(754668),m=n(265851),p=n(8766);function h({fileKey:e}){let r=(0,i.wA)(),n=d.R7.fullscreen,h=(0,i.d4)(e=>e.appWindow.inFullScreenMode);return n?a.createElement(o.E,{onClick:()=>{(0,c.sx)("IFrame Mobile Viewer Toggle Fullscreen",{fileKey:e,source:"click",embed_host:(0,u.Yw)()}),r((0,p._M)())},className:m.s.absolute.bRadius5.colorBg.w24.h24.cursorDefault.flex.itemsCenter.justifyCenter.elevation100.$,style:{top:16,right:16}},h?a.createElement(s.p,null):a.createElement(l.O,null)):null}},499875:(e,r,n)=>{let a;n.d(r,{As:()=>f,H4:()=>g,S1:()=>T,tH:()=>b});var i=n(411855),o=n(217950),s=n(326612),l=n(520244),c=n(777535),d=n(841962),u=n(550479),m=n(76265),p=n(324608),h=n(677736);let _=Symbol("Default"),g={DEFAULT_FULL_PAGE:_,NONE_I_KNOW_WHAT_IM_DOING:Symbol("None")};function f(e,r){if(r){e.stack+="\n\nReact stack:"+r.componentStack;let n=Error("React component stack where the error occurred");n.stack=r.componentStack,e.cause=n}}function E(e){return e?.message?.includes("The node to be removed is not a child of this node")}let y=class e extends i.Component{constructor(e){super(e),this.state={hasError:!1,isGoogleTranslateError:!1}}static getDerivedStateFromError(e){return{hasError:!0,isGoogleTranslateError:E(e),error:e}}componentDidCatch(r,n){f(r,n);try{this.props.onError?.()}catch(e){}let a=this.props.fallback===g.DEFAULT_FULL_PAGE,i=E(r),s=(0,u.$D)(this.props.team||o.e.UNOWNED,r,{tags:{react:!0,errorBoundary:this.props.boundaryKey,...this.props.sentryTags,...a||this.props.severity===u.DZ.Critical?{severity:u.DZ.Critical}:{}}});a&&!e.reportedHardCrash&&(e.reportedHardCrash=!0,i?(0,c.sx)("js_extension_dom_crash",{errorBoundary:this.props.boundaryKey},{forwardToDatadog:!0}):(0,c.sx)("js_hard_crash",{errorBoundary:this.props.boundaryKey,errorMessage:r?.message},{forwardToDatadog:!0})),this.sentryID=s}render(){if(this.state.hasError){console.log("Rendering error: "+this.state.error),console.log("Boundary key: "+this.props.boundaryKey);let e=null;return e=this.props.fallback===_?i.createElement(T,{sentryId:this.sentryID,isGoogleTranslateError:this.state.isGoogleTranslateError}):this.props.fallback===g.NONE_I_KNOW_WHAT_IM_DOING?null:this.props.fallback,i.createElement(I,{error:this.state.error},e)}return this.props.children}};y.reportedHardCrash=!1;let b=y,v={title:"Something went wrong",descriptionP1:"Our team is looking into it now. If reloading the page doesn't work, check our ",statusPage:"status page",descriptionP2:" for updates",googleTranslateDescription:"This is likely due to a Chrome Extension, such as Google Translate. Try disabling Chrome Extensions and refresh the page",reload:"Reload"};function T(e){let r=i.useMemo(()=>{let e=document.body.style.colorScheme;return e&&"dark"===e?"dark":"light"},[]),n=i.useMemo(()=>{try{let e=(0,p.Gq)(!1);return e?.initialized&&!!(0,m.t)("general.root_error_boundary_title")}catch(e){return!1}},[]),a=e.isGoogleTranslateError&&(0,d.kc)().error_boundary_google_translate;return i.createElement("div",{className:h.ZX,"data-preferred-theme":r},i.createElement("div",{className:h.fi},i.createElement("div",{className:h.v2},n?(0,m.tx)("general.root_error_boundary_title"):v.title),i.createElement("div",{className:h.rU},a?n?(0,m.tx)("general.root_error_boundary_google_translate_description"):v.googleTranslateDescription:n?(0,m.tx)("general.root_error_boundary_description",{status_page:i.createElement(s.N,{trusted:!0,href:"https://status.figma.com"},(0,m.tx)("general.root_error_boundary_status_page"))}):i.createElement(i.Fragment,null,i.createElement("span",null,v.descriptionP1),i.createElement(s.N,{trusted:!0,href:"https://status.figma.com"},v.statusPage),i.createElement("span",null,v.descriptionP2))),i.createElement("div",{className:h.yV},i.createElement(l.$n,{variant:"primary",onClick:()=>location.reload()},n?(0,m.tx)("general.root_error_boundary_refresh"):v.reload)),e.sentryId&&i.createElement("div",{className:h.g6},"Error ID: ",e.sentryId)))}function I(e){let r=a??=i.createContext({}),{error:n,children:o}=e,s=i.useMemo(()=>({error:n}),[n]);return i.createElement(r.Provider,{value:s},o)}},621847:(e,r,n)=>{n.d(r,{$$:()=>C,CY:()=>eo,JU:()=>en,Kz:()=>ec,Lf:()=>et,M7:()=>U,NY:()=>q,N_:()=>ea,O0:()=>G,Ph:()=>ei,RW:()=>ed,Us:()=>es,VE:()=>el,Yo:()=>eu,cw:()=>x,e2:()=>w,il:()=>Q,ks:()=>J,nR:()=>O,ny:()=>S,qM:()=>M,qZ:()=>k,rb:()=>$,s6:()=>D,tB:()=>er,tM:()=>R,vd:()=>N,vv:()=>L,wG:()=>X});var a=n(411855),i=n(186471),o=n(629019),s=n.n(o),l=n(66905),c=n(666308),d=n(607895),u=n(563192),m=n(250392),p=n(693565),h=n(132939),_=n(265851),g=n(140835),f=n(190500),E=n(688656),y=n(832708),b=n(959278),v=n(247245),T=n(126815);let I=null;function S(e){I=e}function w(e){return a.createElement("div",{className:s()(b.GC,e.reversed&&b.zi,e.className)},e.children)}class A extends u.uA{constructor(){super(...arguments),this.onKeyDown=e=>{I?.(e)||(this.props.onKeyDown?.(e),e.keyCode===c.Uz.ESCAPE&&e.target.blur())},this.onClick=u.cZ(this,"click",e=>{this.props.onClick?.(e)}),this.onPointerDown=u.Am(this,"pointerdown",e=>{this.props.onPointerDown?.(e)})}render(){let{forwardedRef:e,...r}=this.props;r.className=`${this.props.defaultClass} ${this.props.className||""}`;let n=this.props.dataTestId;return delete r.defaultClass,delete r.recordingKey,delete r.dataTestId,this.props.onClick&&this.props.recordingKey&&(r.onClick=this.onClick),this.props.onPointerDown&&this.props.recordingKey&&(r.onPointerDown=this.onPointerDown),a.createElement("button",{ref:e,onKeyDown:this.onKeyDown,...r,"data-testid":n},this.props.children)}}A.displayName="ButtonBase";let C=(0,a.forwardRef)(function({fullWidth:e,...r},n){return a.createElement(A,{forwardedRef:n,defaultClass:s()(b.xZ,e&&b.Ij),...r})}),N=(0,g.tf)(C);class L extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(A,{defaultClass:s()(b.fY,e&&b.Ij),...r})}}L.displayName="BigButtonPrimary",(0,g.tf)(L);class O extends a.Component{render(){return a.createElement(A,{defaultClass:b.HM,type:"button",...this.props})}}O.displayName="ButtonSecondary";let R=(0,g.tf)(O);class P extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(A,{defaultClass:s()(b.xJ,e&&b.Ij),type:"button",...r})}}P.displayName="BigButtonSecondary",(0,g.tf)(P);class D extends a.Component{render(){return a.createElement(A,{defaultClass:b.oC,type:"button",...this.props})}}D.displayName="ButtonSecondaryNegative";class k extends a.Component{render(){return a.createElement(A,{defaultClass:b.ky,type:"button",...this.props})}}k.displayName="ButtonNegative";let M=(0,g.tf)(k);class F extends a.Component{render(){return a.createElement(A,{defaultClass:b.OK,type:"button",...this.props})}}F.displayName="BigButtonNegative";class x extends a.Component{render(){return a.createElement(A,{defaultClass:b.I2,...this.props})}}x.displayName="ButtonWhite";let U=(0,g.tf)(x);class B extends a.Component{render(){return a.createElement(A,{defaultClass:b.rd,...this.props})}}B.displayName="ButtonInverse";class V extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(A,{defaultClass:s()(b.FO,e&&b.Ij),...r})}}V.displayName="BigButtonInverse",(0,g.tf)(V);class G extends a.Component{render(){return a.createElement(A,{defaultClass:b.OY,...this.props})}}G.displayName="ButtonGreen";class H extends a.Component{render(){let{customClassName:e,...r}=this.props;return a.createElement(A,{defaultClass:b.Iw,className:e,...r})}}H.displayName="ButtonGrey",(0,g.tf)(G);class W extends a.Component{render(){return a.createElement(A,{defaultClass:this.props.solidWhenDisabled?b.dy:b.sY,...this.props})}}W.displayName="BigButtonGreen";class K extends a.Component{render(){return a.createElement(A,{defaultClass:b.yT,...this.props})}}K.displayName="BigButtonBlack",(0,g.tf)(K);class Y extends a.Component{render(){let e=`${b.xZ} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}Y.displayName="ButtonLink";let $=(0,g.tf)(Y);class j extends a.Component{render(){let{fullWidth:e,...r}=this.props,n=s()(b.fY,this.props.fullWidth&&b.Ij),i=`${n} ${this.props.className||""}`;return r={...r,className:i,rel:"noopener"},a.createElement("a",{...r},this.props.children)}}j.displayName="ButtonLink",(0,g.tf)(j);class z extends a.Component{render(){let e=`${b.HM} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}z.displayName="ButtonSecondaryLink";let q=(0,g.tf)(z);class Z extends a.Component{render(){let e=`${b.hz} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}Z.displayName="BigButtonSecondaryLink";let X=118,J=a.forwardRef(function({className:e,...r},n){return a.createElement(m.L,{className:s()(b._Z,e),...(0,d.d)(r),ref:n})});class Q extends a.Component{render(){let e=`${b.ki} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement(m.L,{...r})}}Q.displayName="BigTextInput";let ee=(0,g.h3)(m.L);class et extends a.Component{render(){return a.createElement("div",{className:this.props.className||(this.props.disabled?b.d1:b.ri)},a.createElement("label",{htmlFor:this.props.htmlName,className:s()(b.dQ,{[b.QC]:this.props.value,[b.z3]:this.props.hasError})},this.props.label),this.props.trackingFieldName&&a.createElement(ee,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onBlur:this.props.onBlur,onFocus:this.props.onFocus,trackingFieldName:this.props.trackingFieldName,trackingPopulationLevel:this.props.value?f._R.POPULATED_COMPLETE:f._R.NOT_POPULATED,dataTestId:this.props.dataTestId,required:this.props.required}),!this.props.trackingFieldName&&a.createElement(m.L,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,dataTestId:this.props.dataTestId,required:this.props.required}),this.props.tooltip&&a.createElement(p.B,{className:b.G,svg:T.A,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":this.props.tooltip,"data-tooltip-timeout-delay":300}))}}class er extends a.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{e.keyCode===c.Uz.TAB&&this.setState({showFocus:!0})},this.documentMouseDown=e=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${b.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${b.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let{svgOverride:e,classOverride:r,checked:n,...o}=this.props;return a.createElement("div",{className:b.HI},a.createElement("input",{...o,type:"checkbox",onFocus:this.onFocus,className:r||this.classNameForInput(),checked:n}),n?a.createElement("div",{className:b.Eg},a.createElement(h.U,{svg:e??v.A},a.createElement(i.l,null))):null)}}function en(e){let r=`${b.Pf} ${e.className||""}`;return a.createElement("label",{...e,className:r})}er.displayName="Checkbox";let ea=y.N,ei=(0,g.tf)(ea);class eo extends a.Component{render(){let{canFocus:e,trusted:r,className:n,...i}=this.props,o=`${b.MH} ${n||""}`,s={...i,className:o,rel:r?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,l.e)(this.props.href,e)}};return e&&(s={href:"#",tabIndex:0,...s}),a.createElement("a",{...s},this.props.children)}}eo.displayName="Link";let es=(0,g.tf)(eo);class el extends a.Component{render(){let e=`${b.X7} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement("select",{...r})}}function ec(e){let r=e.multiple?8*e.multiple:e.value?e.value:0;return"x"===e.direction?a.createElement("div",{style:{width:r},className:_.s.flexShrink0.$,"aria-hidden":"true"}):a.createElement("div",{style:{height:r},className:_.s.flexShrink0.$,"aria-hidden":"true"})}el.displayName="BigSelect",ec.displayName="Spacing";let ed=(0,g.tf)(p.B),eu=(0,g.tf)(e=>a.createElement("a",{...e},e.children));(0,g.tf)(function(e){return a.createElement(A,{defaultClass:s()(b._d,e.className),...e})})},451432:(e,r,n)=>{n.d(r,{LN:()=>f});var a=n(411855),i=n(100189),o=n(191846),s=n(629019),l=n.n(s),c=n(959407),d=n(521725),u=n.n(d);n(747484);var m=n(607895),p=n(250392);n(693565);var h=n(366443),_=n(768331),g=n(893544);a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:_.lI},a.createElement("label",{className:l()(_.Pf,e.inlineLabel&&_.Qg),htmlFor:n},e.label),a.createElement("select",{className:l()(_.Wm,e.responseHasError&&_.U3),id:n,name:e.name,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,value:e.value||""},a.createElement("option",{disabled:!!e.value},e.inlineLabel?e.label:""),Object.keys(e.options).map(r=>a.createElement("option",{value:r,key:r},e.options[r]))),e.error)}),a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:_.lI},a.createElement("label",{className:_.Pf,htmlFor:n},e.label),a.createElement("textarea",{className:l()(_.PC,e.responseHasError&&_.U3),onChange:e.onChange,onBlur:e.onBlur,id:n,name:e.name,value:e.value}),e.error)}),a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:_.lI},a.createElement("label",{className:_.Pf,htmlFor:n},e.label),a.createElement("input",{className:l()(_.En,e.className,e.responseHasError&&_.U3),disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,onKeyDown:e.onKeyDown,onKeyDownCapture:e.onKeyDownCapture,id:n,type:"text",name:e.name,value:e.value}),e.children,e.error)}),a.forwardRef(function(e,r){let[n,i]=a.useState([]),o=a.useRef(null),s=r=>!!e.defaultOption&&(!e.maxListSizeToRevealDefaultOption||r.length<=e.maxListSizeToRevealDefaultOption),d=()=>{let r=e.options.sort().slice(0,100);s(r)&&r.unshift(e.defaultOption),i(r)},{isOpen:m,getToggleButtonProps:p,getLabelProps:h,getMenuProps:g,getInputProps:f,getItemProps:E,getComboboxProps:y,openMenu:b,highlightedIndex:v}=(0,c.Bp)({selectedItem:e.value,items:n,onSelectedItemChange({selectedItem:r}){e.onChange(r||"")},onIsOpenChange:({isOpen:e,selectedItem:r})=>{e&&!r&&d()},onInputValueChange:r=>{if(r.inputValue.trim().length>0){let n=RegExp(u()(r.inputValue),"i"),a=e.options.filter(e=>n.test(e)).sort().slice(0,100);s(a)&&a.unshift(e.defaultOption),i(a)}else d()}}),T=()=>{(!e.value||e.defaultOption&&e.defaultOption===e.value)&&d()};return a.createElement("fieldset",{ref:r,className:_.lI},a.createElement("label",{...h({className:_.Pf})},e.label),a.createElement("div",{...y({className:_.Tw})},a.createElement("input",{...f({className:l()(_.En,m&&_.qT,!m&&e.responseHasError&&_.U3,e.className),ref:o,disabled:e.disabled,onBlur:e.onBlur,onClick:()=>{T(),b()}})}),a.createElement("button",{...p({onClick:()=>{T(),o.current.select()},disabled:e.disabled,className:_.pZ,type:"button"})})),a.createElement("div",{className:l()(_.Em,!m&&_.Qg)},a.createElement("ul",{...g({className:_.es})},n.map((e,r)=>a.createElement("li",{className:l()(v===r&&_.$p,0===r&&n.length>1&&s(n)?_.KG:_.J7),key:e,...E({item:e,index:r})},e)))),e.children,!m&&e.error)}),a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:_.lI},a.createElement("label",{className:_.Pf,htmlFor:n},e.label),a.createElement("input",{type:"file",id:n,name:e.name,onChange:e.onChange}),e.error)});let f=a.forwardRef(function({className:e,...r},n){return a.createElement("div",{className:g.Kf},a.createElement("label",{className:g.qf,htmlFor:r.id},r.placeholder),a.createElement(p.L,{className:l()(g.hF,e),...(0,m.d)(r),ref:n}))});a.forwardRef(function(e,r){return a.createElement("div",{className:h.kL},a.createElement("span",{className:h.zr,"data-disabled":!!e.disabled||void 0},a.createElement(i.F,{ref:r,...e,className:h.kv}),a.createElement("span",{className:h.Cv},a.createElement(o.g,{className:h.uU}))),a.createElement("label",{htmlFor:e.id},e.label))})},555085:(e,r,n)=>{n.d(r,{R:()=>o});var a=n(411855),i=n(688656);class o extends a.PureComponent{constructor(){super(...arguments),this.textContainerRef=a.createRef(),this.getFittingText=()=>{if(!this.textContainerRef.current)return null;let e=this.textContainerRef.current,r=e.getBoundingClientRect().width,{text:n}=this.props,a=document.createElement("p");if(a.className=this.props.className||"",a.style.cssText="display: inline; white-space: nowrap;",e.appendChild(a),a.innerText=n,a.getBoundingClientRect().width<=r)return e.removeChild(a),n;let i="";for(let e=0;e<n.length;e+=1){let o=`...${n.slice(n.length-e)}`;a.innerText=o;let{width:s}=a.getBoundingClientRect();if(s>r)break;i=o}return e.removeChild(a),i}}componentDidMount(){this.forceUpdate()}render(){let e=this.getFittingText();return a.createElement("div",{ref:this.textContainerRef,style:{width:this.props.maxWidth?`${this.props.maxWidth}px`:"100%"},"data-tooltip-type":this.props.text!==e?i.Ib.TEXT:void 0,"data-tooltip":this.props.text!==e?this.props.text:void 0,"aria-label":this.props.text},a.createElement("p",{className:this.props.className},e))}}o.displayName="FrontTruncatedText"},467014:(e,r,n)=>{n.d(r,{ny:()=>m});var a=n(777535),i=n(449233),o=n(841962);let s=(0,o.tl)().zendesk_web_key_public,l={productQuestion:{id:0x53d1c67aa1},bugReport:{id:0x53d1c6adf6},featureRequest:{id:0x53d1c6b4c1},account:{id:0x53d206c58a},dataPrivacy:{id:0x1623bff94217},community:{id:0x71090d38797},billing:{id:0x8d41e49e517},events:{id:0x11e3970aad17},reportAbuse:{id:0x1a704d1f0d97},other:{id:0x53d1c6e546}},c=function(){return{webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"40px"},contactForm:{selectTicketForm:{"*":"Please choose:"},ticketForms:Object.keys(l).map(e=>l[e])},helpCenter:{searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Contact us"}}}}},d=null;function u(){window.zE&&(window.zE("webWidget","show"),window.zE("webWidget","open"),window.zE("webWidget:on","close",()=>{window.zE("webWidget","hide")}),window.zE("webWidget:on","userEvent",e=>{let r={action:e.action,relatedZendeskId:e.properties?.id,relatedZendeskName:e.properties?.name,searchTerm:e.properties?.term};(0,a.sx)("zendesk_help_widget",r)}))}function m(e,r){(d||(d=(async()=>{if(window.figmaPerfTesting)throw Error("testing");if(window.zE)return window.zE;if(!s)throw Error("No zendesk_web_key_public api key");window.zESettings=c();try{return await (0,i.k0)("https://static.zdassets.com/ekr/snippet.js?key="+s,{id:"ze-snippet",cors:!1}),window.zE}catch(e){throw d=null,e}})())).then(()=>{d&&window.zE&&(window.zESettings=c(),r?.ticketForms&&(window.zESettings.webWidget.contactForm={ticketForms:r.ticketForms.map(e=>l[e]),fields:(r.fields||[]).map(e=>({id:e.id,prefill:{"*":e.value}}))}),r?.suppressAnswerBot&&(window.zESettings.webWidget.helpCenter={suppress:!0},window.zESettings.webWidget.answerBot={suppress:!0}),r?.locale&&window.zE("webWidget","setLocale",r.locale),window.zE("webWidget","updateSettings",window.zESettings),window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!0},email:{value:e.email,readOnly:!0}}))}).then(u).catch(()=>console.error(`Our support center is not currently available. You can email us at ${(0,o.W4)()}.`))}},597079:(e,r,n)=>{n.d(r,{LE:()=>c,y1:()=>o.y,MW:()=>d});var a=n(411855),i=n(846288),o=n(924036);let s="file_icons--designFilePrimary---6B-O",l="file_icons--figjamFilePrimary--eSLWG";var c=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(c||{});function d(e){let r;let n=e.size??0;switch(e.type){case o.y.DESIGN:r=a.createElement(p,{size:n});break;case o.y.DESIGN_AND_DEV_MODE:r=a.createElement(h,null);break;case o.y.DEV_MODE:r=a.createElement(_,null);break;case o.y.DEV_MODE_SELECTED:r=a.createElement(_,{selected:!0});break;case o.y.WHITEBOARD:r=a.createElement(g,{size:n});break;case o.y.PUBLISHED:r=a.createElement(m,{size:n});break;case o.y.PROTOTYPE:r=a.createElement(u,{size:n});break;case o.y.TEMPLATE:r=a.createElement(v,{size:n,svgOptions:e.svgOptions});break;case o.y.REPO:r=a.createElement(T,{size:n});break;case o.y.SLIDES:r=a.createElement(f,{size:n});break;case o.y.SLIDES_TEMPLATE:r=a.createElement(E,{size:n});break;case o.y.SITES:r=a.createElement(b,{size:n});break;case o.y.COOPER:r=a.createElement(y,{size:n});break;default:(0,i.xb)(e.type)}return a.createElement("div",{"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],className:e.className,"data-testid":e.dataTestId},r)}function u(e){let r="var(--color-iconprototypefile, #E6E6E6)",n="var(--color-iconprototypefilesecondary, black)";return 2===e.size?a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1019308_55963)"},a.createElement("path",{d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z",fill:r}),a.createElement("path",{d:"M6 11.5V4.5L12 8L6 11.5Z",fill:n})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1019308_55963"},a.createElement("rect",{width:"16",height:"16",fill:"white"})))):a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:"file_icons--prototypeIconGridView--QmkbF"},a.createElement("circle",{cx:"16",cy:"16",r:"12",fill:r}),a.createElement("path",{d:"M13 21.5V10.5L22 16L13 21.5Z",fill:n}))}function m(e){return 2===e.size?a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z",fill:"var(--color-iconpublishedfile, #2c2c2c)"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42809 5.94824L8.4163 5.94487L5.93954 5.23713L7.81094 7.11265C7.84908 7.10727 7.88805 7.10449 7.92768 7.10449C8.38608 7.10449 8.75769 7.47692 8.75769 7.93634C8.75769 8.39576 8.38608 8.76819 7.92768 8.76819C7.46927 8.76819 7.09766 8.39576 7.09766 7.93634C7.09766 7.89736 7.10033 7.859 7.10551 7.82144L5.24201 5.95383L5.90568 8.27402L5.91639 8.31146L5.92416 8.34963C6.11456 9.28536 6.94108 9.98642 7.92622 9.98642C8.15158 9.98642 8.36652 9.95019 8.56673 9.88397L9.15269 9.69017L9.58863 10.1271L10.2943 10.8343L10.838 10.2893L10.1189 9.56871L9.68985 9.13868L9.87373 8.55969C9.93575 8.36438 9.96962 8.15529 9.96962 7.93633C9.96962 6.98187 9.3191 6.17937 8.43996 5.95132L8.42809 5.94824ZM12.2506 10.2893L11.0006 11.5421L10.2943 12.25L9.58793 11.5421L8.88074 10.8334C8.58052 10.9327 8.25963 10.9864 7.92622 10.9864C6.45479 10.9864 5.22725 9.9399 4.94424 8.54903L3.82397 4.6326L3.5 3.5L4.63269 3.82367L8.69105 4.98335C10.0017 5.32333 10.9696 6.51654 10.9696 7.93633C10.9696 8.25918 10.9196 8.57032 10.8268 8.86238L12.2506 10.2893Z",fill:"var(--color-icon-onbrand, white)"})):1===e.size?a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_3022_62326)"},a.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#2C2C2C"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9464 7.68575L12.9346 7.68238L6.56175 5.86133L10.8434 10.151C11.0417 10.0543 11.2645 10 11.5 10C12.3284 10 13 10.6716 13 11.5C13 12.3284 12.3284 13 11.5 13C10.6716 13 10 12.3284 10 11.5C10 11.2723 10.0507 11.0565 10.1415 10.8632L5.86781 6.58163L7.61385 12.6858L7.62457 12.7232L7.63233 12.7614C8.035 14.7403 9.78217 16.2262 11.8709 16.2262C12.3463 16.2262 12.8019 16.1497 13.2273 16.009L13.8132 15.8152L14.2492 16.2521L16.015 18.0218L18.026 16.0063L16.239 14.2155L15.81 13.7855L15.9938 13.2065C16.1254 12.7921 16.1968 12.3497 16.1968 11.8886C16.1968 9.86928 14.8204 8.17187 12.9583 7.68883L12.9464 7.68575ZM19.4386 16.0063L16.7213 18.7297L16.0151 19.4374L16.015 19.4375L16.0149 19.4374L15.3086 18.7297L13.5413 16.9584C13.0159 17.1322 12.4544 17.2262 11.8709 17.2262C9.29588 17.2262 7.14769 15.3948 6.65241 12.9608L4.44897 5.2576L4.125 4.125L5.25769 4.44867L13.2093 6.72087C15.5029 7.31583 17.1968 9.40395 17.1968 11.8886C17.1968 12.4536 17.1092 12.9981 16.9469 13.5092L19.4386 16.0063Z",fill:"var(--color-icon-ondesign, white)"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_3022_62326"},a.createElement("rect",{width:"24",height:"24",fill:"white"})))):a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},a.createElement("path",{fill:"var(--color-iconpublishedfile, #2c2c2c)",d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),a.createElement("path",{fill:"var(--color-icon-onbrand, white)",fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z"}),a.createElement("path",{fill:"var(--color-iconpublishedfilesecondary, #787878)",d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z"}))}function p(e){return 2===e.size?a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{className:s,d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42809 5.94824L8.4163 5.94487L5.93954 5.23713L7.81094 7.11265C7.84908 7.10727 7.88805 7.10449 7.92768 7.10449C8.38608 7.10449 8.75769 7.47692 8.75769 7.93634C8.75769 8.39576 8.38608 8.76819 7.92768 8.76819C7.46927 8.76819 7.09766 8.39576 7.09766 7.93634C7.09766 7.89736 7.10033 7.859 7.10551 7.82144L5.24201 5.95383L5.90568 8.27402L5.91639 8.31146L5.92416 8.34963C6.11456 9.28536 6.94108 9.98642 7.92622 9.98642C8.15158 9.98642 8.36652 9.95019 8.56673 9.88397L9.15269 9.69017L9.58863 10.1271L10.2943 10.8343L10.838 10.2893L10.1189 9.56871L9.68985 9.13868L9.87373 8.55969C9.93575 8.36438 9.96962 8.15529 9.96962 7.93633C9.96962 6.98187 9.3191 6.17937 8.43996 5.95132L8.42809 5.94824ZM12.2506 10.2893L11.0006 11.5421L10.2943 12.25L9.58793 11.5421L8.88074 10.8334C8.58052 10.9327 8.25963 10.9864 7.92622 10.9864C6.45479 10.9864 5.22725 9.9399 4.94424 8.54903L3.82397 4.6326L3.5 3.5L4.63269 3.82367L8.69105 4.98335C10.0017 5.32333 10.9696 6.51654 10.9696 7.93633C10.9696 8.25918 10.9196 8.57032 10.8268 8.86238L12.2506 10.2893Z",fill:"var(--color-icon-ondesign, white)"})):1===e.size?a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_3022_62357)"},a.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#0D99FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9464 7.68575L12.9346 7.68238L6.56175 5.86133L10.8434 10.151C11.0417 10.0543 11.2645 10 11.5 10C12.3284 10 13 10.6716 13 11.5C13 12.3284 12.3284 13 11.5 13C10.6716 13 10 12.3284 10 11.5C10 11.2723 10.0507 11.0565 10.1415 10.8632L5.86781 6.58163L7.61385 12.6858L7.62457 12.7232L7.63233 12.7614C8.035 14.7403 9.78217 16.2262 11.8709 16.2262C12.3463 16.2262 12.8019 16.1497 13.2273 16.009L13.8132 15.8152L14.2492 16.2521L16.015 18.0218L18.026 16.0063L16.239 14.2155L15.81 13.7855L15.9938 13.2065C16.1254 12.7921 16.1968 12.3497 16.1968 11.8886C16.1968 9.86928 14.8204 8.17187 12.9583 7.68883L12.9464 7.68575ZM19.4386 16.0063L16.7213 18.7297L16.0151 19.4374L16.015 19.4375L16.0149 19.4374L15.3086 18.7297L13.5413 16.9584C13.0159 17.1322 12.4544 17.2262 11.8709 17.2262C9.29588 17.2262 7.14769 15.3948 6.65241 12.9608L4.44897 5.2576L4.125 4.125L5.25769 4.44867L13.2093 6.72087C15.5029 7.31583 17.1968 9.40395 17.1968 11.8886C17.1968 12.4536 17.1092 12.9981 16.9469 13.5092L19.4386 16.0063Z",fill:"var(--color-icon-ondesign, white)"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_3022_62357"},a.createElement("rect",{width:"24",height:"24",fill:"white"})))):a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},a.createElement("path",{className:s,d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z",fill:"var(--color-icon-ondesign, white)"}),a.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-icondesignfilesecondary, #9bd5fd)"}))}function h(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_126_32431)"},a.createElement("path",{d:"M7 28.2725H25C25.5523 28.2725 26 27.8247 26 27.2725V10.1867C26 9.92146 25.8946 9.6671 25.7071 9.47957L20.7929 4.56535C20.6054 4.37782 20.351 4.27246 20.0858 4.27246H7C6.44772 4.27246 6 4.72018 6 5.27246V27.2725C6 27.8247 6.44772 28.2725 7 28.2725Z",fill:"var(--color-bg-design, #0d99ff)"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 13.2677L16.8466 13.2644L12.4437 12.0091L15.7009 15.2663C15.8169 15.2265 15.9412 15.2049 16.0707 15.2049C16.6993 15.2049 17.2089 15.7145 17.2089 16.3431C17.2089 16.9718 16.6993 17.4814 16.0707 17.4814C15.442 17.4814 14.9324 16.9718 14.9324 16.3431C14.9324 16.2137 14.954 16.0893 14.9938 15.9734L11.7425 12.7221L12.9443 16.9144L12.9548 16.9509L12.9625 16.9881C13.26 18.4317 14.5397 19.5167 16.0707 19.5167C16.4199 19.5167 16.7541 19.4607 17.0659 19.3578L17.6507 19.1649L18.0862 19.6004L19.3171 20.8313L20.5858 19.5626L19.3411 18.318L18.9107 17.8875L19.0954 17.3074C19.1918 17.0046 19.2443 16.6809 19.2443 16.3431C19.2443 14.8676 18.2363 13.6249 16.8699 13.2708L16.8582 13.2677ZM21.2929 18.8555L22 19.5626L21.2929 20.2697L20.0242 21.5384L19.3171 22.2455L18.61 21.5384L17.3791 20.3075C16.9676 20.4432 16.5277 20.5167 16.0707 20.5167C14.0558 20.5167 12.3744 19.0889 11.983 17.1899L10.3246 11.4049L10 10.2725L11.1329 10.5955L17.1208 12.3028C18.9175 12.7684 20.2443 14.4008 20.2443 16.3431C20.2443 16.7851 20.1756 17.2111 20.0482 17.6109L21.2929 18.8555Z",fill:"var(--color-icon-ondesign, white)"}),a.createElement("path",{d:"M20.5 8.77246V6.68667V4.27246L22.2071 5.97957L24.2929 8.06535L26 9.77246H23.5858H21.5C20.9477 9.77246 20.5 9.32475 20.5 8.77246Z",fill:"var(--color-icondesignfilesecondary, #9bd5fd)"}),a.createElement("rect",{x:"18.5667",y:"17.8391",width:"13.8667",height:"13.8667",rx:"6.93333",fill:"var(--color-bg-handoff, #14AE5C)"}),a.createElement("rect",{x:"18.5667",y:"17.8391",width:"13.8667",height:"13.8667",rx:"6.93333",stroke:"var(--color-bg)",strokeWidth:"0.866667"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.9064 26.9361L21.3519 24.8635L21.1792 24.6332L21.3519 24.4029L22.9067 22.3299H23.8663L22.1388 24.6332L23.866 26.9361H22.9064ZM24.5473 26.9361L26.2747 22.3299H27.0946L25.3672 26.9361H24.5473ZM28.0887 26.9361H27.129L28.8562 24.6332L27.1288 22.3299H28.0884L29.6431 24.4029L29.8158 24.6332L29.6431 24.8635L28.0887 26.9361Z",fill:"var(--color-icon-ondesign, white)"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_126_32431"},a.createElement("rect",{width:"32",height:"32",fill:"var(--color-icon-ondesign, white)",transform:"translate(0 0.272461)"}))))}function _(e){return e.selected?a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7 27.9999H25C25.5523 27.9999 26 27.5522 26 26.9999V9.9142C26 9.64898 25.8946 9.39463 25.7071 9.20709L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44771 4 6 4.44771 6 5V26.9999C6 27.5522 6.44771 27.9999 7 27.9999Z",fill:"#008043"}),a.createElement("path",{d:"M20.5 8.50035V6.41457V4.00037L22.2071 5.70747L24.2929 7.79325L26 9.50035H23.5858H21.5C20.9477 9.50035 20.5 9.05263 20.5 8.50035Z",fill:"#85E0A3"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6718 20.1257L9.26719 16.9195L9 16.5633L9.26718 16.207L11.6719 13.0007H13.1563L10.4844 16.5633L13.1562 20.1257H11.6718ZM14.2098 20.1257L16.8817 13.0007H18.1499L15.478 20.1257H14.2098ZM19.6876 20.1257H18.2032L20.875 16.5633L18.2031 13.0007H19.6875L22.0922 16.207L22.3594 16.5633L22.0922 16.9195L19.6876 20.1257Z",fill:"white"})):a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7 27.9999H25C25.5523 27.9999 26 27.5522 26 26.9999V9.9142C26 9.64898 25.8946 9.39463 25.7071 9.20709L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44771 4 6 4.44771 6 5V26.9999C6 27.5522 6.44771 27.9999 7 27.9999Z",fill:"#14AE5C"}),a.createElement("path",{d:"M20.5 8.50047V6.41469V4.00049L22.2071 5.70759L24.2929 7.79337L26 9.50047H23.5858H21.5C20.9477 9.50047 20.5 9.05276 20.5 8.50047Z",fill:"#85E0A3"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6721 20.1255L9.26743 16.9193L9.00024 16.5631L9.26743 16.2068L11.6721 13.0005H13.1565L10.4846 16.563L13.1564 20.1255H11.6721ZM14.21 20.1255L16.8819 13.0005H18.1501L15.4783 20.1255H14.21ZM19.6878 20.1255H18.2034L20.8752 16.563L18.2034 13.0005H19.6877L22.0924 16.2068L22.3596 16.5631L22.0924 16.9193L19.6878 20.1255Z",fill:"white"}))}function g(e){return 2===e.size?a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{className:l,d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.18907 3.60057L3.45361 3.45345L3.6007 4.18891L4.14615 6.9163L4.17584 7.06475L4.28289 7.1718L10.1112 13.0001C10.5017 13.3906 11.1349 13.3906 11.5254 13.0001L13.0001 11.5254C13.3906 11.1348 13.3906 10.5017 13.0001 10.1111L7.17182 4.28288L7.06478 4.17584L6.91634 4.14614L4.18907 3.60057ZM5.09705 6.57175L4.72837 4.72827L6.57175 5.09702L7.13379 5.65906L5.65906 7.13376L5.09705 6.57175ZM6.36616 7.84086L7.8409 6.36617L12.293 10.8183L10.8183 12.293L6.36616 7.84086Z",fill:"var(--color-icon-onfigjam, white)"})):1===e.size?a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_3022_62349)"},a.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#9747FF"}),a.createElement("path",{d:"M7.49078 11.0263L15.8491 19.3847C16.2397 19.7752 16.8728 19.7752 17.2634 19.3847L19.3846 17.2634C19.7751 16.8729 19.7751 16.2397 19.3846 15.8492L11.0262 7.49084M7.49078 11.0263L5.67769 9.21321L4.76767 4.76782L9.21315 5.67775L11.0262 7.49084M7.49078 11.0263L11.0262 7.49084",stroke:"var(--color-icon-ondesign, white)"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_3022_62349"},a.createElement("rect",{width:"24",height:"24",fill:"white"})))):a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},a.createElement("path",{className:l,d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.2966 20.8616C19.4811 21.0461 19.7802 21.0461 19.9647 20.8616L21.0059 19.8205C21.1903 19.636 21.1903 19.3369 21.0059 19.1524L15.0579 13.2045L13.3487 14.9137L19.2966 20.8616ZM12.6416 14.2066L11.7021 13.2671L11.2748 11.1305L13.4113 11.5578L14.3508 12.4974L12.6416 14.2066ZM11.0623 10.0682L13.9043 10.6366L21.713 18.4453C22.288 19.0203 22.288 19.9526 21.713 20.5276L20.6718 21.5687C20.0968 22.1438 19.1645 22.1438 18.5895 21.5687L10.7809 13.7601L10.2125 10.9181L10 9.85578L11.0623 10.0682Z",fill:"var(--color-icon-onfigjam, white)"}),a.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-iconfigjamfilesecondary, #C599FF)"}))}function f(e){return 2===e.size?a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"16",height:"16",rx:"2",fill:"#FF5C16"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4H12C12.5523 4 13 4.44772 13 5V10C13 10.5523 12.5523 11 12 11H11.2618H10.2165H5.78352H4.73824H4C3.44772 11 3 10.5523 3 10V5C3 4.44772 3.44772 4 4 4ZM4.43389 12H4C2.89543 12 2 11.1046 2 10V5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V10C14 11.1046 13.1046 12 12 12H11.5661L11.9783 13.3544C12.0587 13.6186 11.9098 13.8979 11.6456 13.9783C11.3814 14.0587 11.1021 13.9098 11.0217 13.6456L10.5208 12H5.47918L4.97835 13.6456C4.89795 13.9098 4.61861 14.0587 4.35443 13.9783C4.09025 13.8979 3.94127 13.6186 4.02167 13.3544L4.43389 12ZM5 5C4.44772 5 4 5.44772 4 6C4 6.55228 4.44772 7 5 7C5.55228 7 6 6.55228 6 6C6 5.44772 5.55228 5 5 5ZM5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8Z",fill:"white"})):1===e.size?a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"24",height:"24",rx:"5",fill:"#FF5C16"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6H19C19.5523 6 20 6.44772 20 7V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V7C4 6.44772 4.44772 6 5 6ZM3 7C3 5.89543 3.89543 5 5 5H19C20.1046 5 21 5.89543 21 7V15C21 16.1046 20.1046 17 19 17H17.0177L17.9628 19.3107C18.0673 19.5663 17.9449 19.8582 17.6893 19.9628C17.4337 20.0673 17.1418 19.9449 17.0372 19.6893L15.9373 17H8.06281L6.9628 19.6895C6.85826 19.9451 6.56632 20.0676 6.31073 19.963C6.05514 19.8585 5.93268 19.5666 6.03722 19.311L6.9824 17H5C3.89543 17 3 16.1046 3 15V7ZM6 9C6 8.44772 6.44772 8 7 8C7.55228 8 8 8.44772 8 9C8 9.55228 7.55228 10 7 10C6.44772 10 6 9.55228 6 9ZM7 12C6.44772 12 6 12.4477 6 13C6 13.5523 6.44772 14 7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12Z",fill:"white"})):a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8 28H24C25.1046 28 26 27.1046 26 26V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3787 4.87868C20.8161 4.31607 20.053 4 19.2574 4H8C6.89543 4 6 4.89543 6 6V26C6 27.1046 6.89543 28 8 28Z",fill:"#FF5C16"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 10.9998V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3786 4.87868C20.816 4.31607 20.053 4 19.2573 4H19.0203C19.5632 4.01081 20 4.4543 20 4.9998V7.9998C20 9.10437 20.8954 9.9998 22 9.9998H25C25.5522 9.9998 26 10.4475 26 10.9998Z",fill:"white",fillOpacity:"0.4"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12H20C20.5523 12 21 12.4477 21 13V18C21 18.5523 20.5523 19 20 19H19.2618H18.2165H13.7835H12.7382H12C11.4477 19 11 18.5523 11 18V13C11 12.4477 11.4477 12 12 12ZM12.4339 20H12C10.8954 20 10 19.1046 10 18V13C10 11.8954 10.8954 11 12 11H20C21.1046 11 22 11.8954 22 13V18C22 19.1046 21.1046 20 20 20H19.5661L19.9783 21.3544C20.0587 21.6186 19.9098 21.8979 19.6456 21.9783C19.3814 22.0587 19.1021 21.9098 19.0217 21.6456L18.5208 20H13.4792L12.9783 21.6456C12.8979 21.9098 12.6186 22.0587 12.3544 21.9783C12.0903 21.8979 11.9413 21.6186 12.0217 21.3544L12.4339 20ZM13 13C12.4477 13 12 13.4477 12 14C12 14.5523 12.4477 15 13 15C13.5523 15 14 14.5523 14 14C14 13.4477 13.5523 13 13 13ZM13 16C12.4477 16 12 16.4477 12 17C12 17.5523 12.4477 18 13 18C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16Z",fill:"white"}))}function E(e){return 2===e.size?a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"16",height:"16",rx:"2",fill:"#2C2C2C"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4H12C12.5523 4 13 4.44772 13 5V10C13 10.5523 12.5523 11 12 11H11.2618H10.2165H5.78352H4.73824H4C3.44772 11 3 10.5523 3 10V5C3 4.44772 3.44772 4 4 4ZM4.43389 12H4C2.89543 12 2 11.1046 2 10V5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V10C14 11.1046 13.1046 12 12 12H11.5661L11.9783 13.3544C12.0587 13.6186 11.9098 13.8979 11.6456 13.9783C11.3814 14.0587 11.1021 13.9098 11.0217 13.6456L10.5208 12H5.47918L4.97835 13.6456C4.89795 13.9098 4.61861 14.0587 4.35443 13.9783C4.09025 13.8979 3.94127 13.6186 4.02167 13.3544L4.43389 12ZM5 5C4.44772 5 4 5.44772 4 6C4 6.55228 4.44772 7 5 7C5.55228 7 6 6.55228 6 6C6 5.44772 5.55228 5 5 5ZM5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8Z",fill:"white"})):1===e.size?a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"24",height:"24",rx:"5",fill:"#2C2C2C"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6H19C19.5523 6 20 6.44772 20 7V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V7C4 6.44772 4.44772 6 5 6ZM3 7C3 5.89543 3.89543 5 5 5H19C20.1046 5 21 5.89543 21 7V15C21 16.1046 20.1046 17 19 17H17.0177L17.9628 19.3107C18.0673 19.5663 17.9449 19.8582 17.6893 19.9628C17.4337 20.0673 17.1418 19.9449 17.0372 19.6893L15.9373 17H8.06281L6.9628 19.6895C6.85826 19.9451 6.56632 20.0676 6.31073 19.963C6.05514 19.8585 5.93268 19.5666 6.03722 19.311L6.9824 17H5C3.89543 17 3 16.1046 3 15V7ZM6 9C6 8.44772 6.44772 8 7 8C7.55228 8 8 8.44772 8 9C8 9.55228 7.55228 10 7 10C6.44772 10 6 9.55228 6 9ZM7 12C6.44772 12 6 12.4477 6 13C6 13.5523 6.44772 14 7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12Z",fill:"white"})):a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8 28H24C25.1046 28 26 27.1046 26 26V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3787 4.87868C20.8161 4.31607 20.053 4 19.2574 4H8C6.89543 4 6 4.89543 6 6V26C6 27.1046 6.89543 28 8 28Z",fill:"#757575"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 10.9998V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3786 4.87868C20.816 4.31607 20.053 4 19.2573 4H19.0203C19.5632 4.01081 20 4.4543 20 4.9998V7.9998C20 9.10437 20.8954 9.9998 22 9.9998H25C25.5522 9.9998 26 10.4475 26 10.9998Z",fill:"white",fillOpacity:"0.4"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12H20C20.5523 12 21 12.4477 21 13V18C21 18.5523 20.5523 19 20 19H19.2618H18.2165H13.7835H12.7382H12C11.4477 19 11 18.5523 11 18V13C11 12.4477 11.4477 12 12 12ZM12.4339 20H12C10.8954 20 10 19.1046 10 18V13C10 11.8954 10.8954 11 12 11H20C21.1046 11 22 11.8954 22 13V18C22 19.1046 21.1046 20 20 20H19.5661L19.9783 21.3544C20.0587 21.6186 19.9098 21.8979 19.6456 21.9783C19.3814 22.0587 19.1021 21.9098 19.0217 21.6456L18.5208 20H13.4792L12.9783 21.6456C12.8979 21.9098 12.6186 22.0587 12.3544 21.9783C12.0903 21.8979 11.9413 21.6186 12.0217 21.3544L12.4339 20ZM13 13C12.4477 13 12 13.4477 12 14C12 14.5523 12.4477 15 13 15C13.5523 15 14 14.5523 14 14C14 13.4477 13.5523 13 13 13ZM13 16C12.4477 16 12 16.4477 12 17C12 17.5523 12.4477 18 13 18C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16Z",fill:"white"}))}function y({inverted:e,size:r}){return null}function b(e){return null}function v(e){return 2===e.size?a.createElement("svg",{width:"16",height:"16",viewBox:e.svgOptions?.viewBox||"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z",className:l}),a.createElement("mask",{id:e.svgOptions?.id+"template_msk_sm",fill:"var(--color-icon-onfigjam, white)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4H13V12H3V4ZM4 5H12V7.00004H4V5ZM12 8.00004H7V11H12V8.00004ZM6 11H4V8.00004H6V11Z"})),a.createElement("path",{d:"M4 5V4H3V5H4ZM12 5H13V4H12V5ZM12 7.00004V8.00004H13V7.00004H12ZM4 7.00004H3V8.00004H4V7.00004ZM3 4V3H2V4H3ZM13 4H14V3H13V4ZM13 12V13H14V12H13ZM3 12H2V13H3V12ZM12 8.00004H13V7.00004H12V8.00004ZM7 8.00004V7.00004H6V8.00004H7ZM7 11H6V12H7V11ZM12 11V12H13V11H12ZM6 11V12H7V11H6ZM4 11H3V12H4V11ZM4 8.00004V7.00004H3V8.00004H4ZM6 8.00004H7V7.00004H6V8.00004ZM4 6H12V4H4V6ZM11 5V7.00004H13V5H11ZM5 7.00004V5H3V7.00004H5ZM12 7.00004H7V9.00004H12V7.00004ZM6 8.00004V11H8V8.00004H6ZM7 12H12V10H7V12ZM13 11V8.00004H11V11H13ZM6 10H4V12H6V10ZM5 11V8.00004H3V11H5ZM4 9.00004H6V7.00004H4V9.00004ZM5 8.00004V11H7V8.00004H5ZM12 6.00004H4V8.00004H12V6.00004ZM4 12V4H2V12H4ZM3 5H13V3H3V5ZM12 4V12H14V4H12ZM13 11H3V13H13V11Z",fill:"var(--color-icon-onfigjam, white)",mask:`url(#${e.svgOptions?.id+"template_msk_sm"})`})):0===e.size?a.createElement("svg",{width:"32",height:"32",viewBox:e.svgOptions?.viewBox||"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:l},a.createElement("path",{d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),a.createElement("mask",{id:e.svgOptions?.id+"template_msk_lg",fill:"var(--color-icon-onfigjam, white)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 12H22V22H10V12ZM11 13H21V15H11V13ZM21 16H14V21H21V16ZM13 21V16H11V21H13Z"})),a.createElement("path",{d:"M21 13H22V12H21V13ZM11 13V12H10V13H11ZM21 15V16H22V15H21ZM11 15H10V16H11V15ZM10 12V11H9V12H10ZM22 12H23V11H22V12ZM22 22V23H23V22H22ZM10 22H9V23H10V22ZM21 16H22V15H21V16ZM14 16V15H13V16H14ZM14 21H13V22H14V21ZM21 21V22H22V21H21ZM13 21V22H14V21H13ZM13 16H14V15H13V16ZM11 16V15H10V16H11ZM11 21H10V22H11V21ZM21 12H11V14H21V12ZM22 15V13H20V15H22ZM10 13V15H12V13H10ZM21 15H14V17H21V15ZM13 16V21H15V16H13ZM14 22H21V20H14V22ZM22 21V16H20V21H22ZM14 21V16H12V21H14ZM13 15H11V17H13V15ZM10 16V21H12V16H10ZM11 22H13V20H11V22ZM11 16H21V14H11V16ZM11 22V12H9V22H11ZM22 11H10V13H22V11ZM23 22V12H21V22H23ZM10 23H22V21H10V23Z",fill:"var(--color-icon-onfigjam, white)",mask:`url(#${e.svgOptions?.id+"template_msk_lg"})`}),a.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-iconfigjamfilesecondary, #C599FF)"})):a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},a.createElement("g",{clipPath:"url(#clip0_3268_73108)"},a.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#9747FF"}),a.createElement("mask",{id:"path-2-inside-1_3268_73108",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 7H18V9.7H8.96991H6V7ZM5 10.7V9.7V7V6H6H18H19V7V17V18H18H6H5V17V10.7ZM6 10.7H8.46991V17H6V10.7ZM9.46991 17H18V10.7H9.46991V17Z"})),a.createElement("path",{d:"M18 7H19V6H18V7ZM6 7V6H5V7H6ZM18 9.7V10.7H19V9.7H18ZM6 9.7H5V10.7H6V9.7ZM5 6V5H4V6H5ZM19 6H20V5H19V6ZM19 18V19H20V18H19ZM5 18H4V19H5V18ZM8.46991 10.7H9.46991V9.7H8.46991V10.7ZM6 10.7V9.7H5V10.7H6ZM8.46991 17V18H9.46991V17H8.46991ZM6 17H5V18H6V17ZM9.46991 17H8.46991V18H9.46991V17ZM18 17V18H19V17H18ZM18 10.7H19V9.7H18V10.7ZM9.46991 10.7V9.7H8.46991V10.7H9.46991ZM18 6H6V8H18V6ZM19 9.7V7H17V9.7H19ZM8.96991 10.7H18V8.7H8.96991V10.7ZM6 10.7H8.96991V8.7H6V10.7ZM5 7V9.7H7V7H5ZM6 10.7V9.7H4V10.7H6ZM4 7V9.7H6V7H4ZM4 6V7H6V6H4ZM6 5H5V7H6V5ZM18 5H6V7H18V5ZM19 5H18V7H19V5ZM20 7V6H18V7H20ZM20 17V7H18V17H20ZM20 18V17H18V18H20ZM18 19H19V17H18V19ZM6 19H18V17H6V19ZM5 19H6V17H5V19ZM4 17V18H6V17H4ZM4 10.7V17H6V10.7H4ZM8.46991 9.7H6V11.7H8.46991V9.7ZM9.46991 17V10.7H7.46991V17H9.46991ZM6 18H8.46991V16H6V18ZM5 10.7V17H7V10.7H5ZM9.46991 18H18V16H9.46991V18ZM19 17V10.7H17V17H19ZM18 9.7H9.46991V11.7H18V9.7ZM8.46991 10.7V17H10.4699V10.7H8.46991Z",fill:"white",mask:"url(#path-2-inside-1_3268_73108)"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_3268_73108"},a.createElement("rect",{width:"24",height:"24",fill:"white"}))))}function T(e){return p(e)}},984019:(e,r,n)=>{n.d(r,{S:()=>h,_:()=>_});var a=n(411855),i=n(138225),o=n(316251),s=n(629019),l=n.n(s),c=n(693565),d=n(76265),u=n(910164),m=n(885598),p=n(54375),h=(e=>(e[e.INFORMATION=0]="INFORMATION",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.FIGJAM=3]="FIGJAM",e[e.PLAIN=4]="PLAIN",e))(h||{});function _({color:e,icon:r,fullWidth:n,rounded:s=!0,text:h,dataTestId:_,padding:g,onDismiss:f}){return a.createElement("div",{"data-testid":_,style:u.sx.if(!s,{borderRadius:"0px"}).if(void 0!==g,{padding:g+"px"}).$,className:l()({[m.ZI]:0===e,[m.z3]:1===e,[m.$e]:2===e,[m.hh]:3===e,[m.pj]:4===e,[m.Ij]:n})},r&&a.isValidElement(r)?a.createElement("div",{className:m.G},r):a.createElement(c.B,{autosize:!0,className:m.G,width:"16px",height:"12px",svg:r??p.A}),a.createElement("p",null,h),f&&a.createElement("div",{className:m.YE},a.createElement(i.K,{"aria-label":(0,d.t)("common.dismiss"),onClick:f},a.createElement(o.f,null))))}},569099:(e,r,n)=>{n.d(r,{T:()=>o});var a=n(411855),i=n(324608);let o=a.memo(function(e){let r=e.locale||(0,i.Gq)().getPrimaryLocale(!1),n=a.useMemo(()=>new Intl.ListFormat(r,{style:e.formatStyle||"long",type:e.formatType||"conjunction"}),[r,e.formatStyle,e.formatType]),o=a.Children.toArray(e.children),s=n.formatToParts(o.map((e,r)=>`${r}`)).map((e,r)=>"element"===e.type?o[Number(e.value)]:"literal"===e.type?a.createElement("span",{key:`${r}_literal`},e.value):null);return a.createElement("span",{className:e.className||""},s)})},153767:(e,r,n)=>{n.d(r,{M3:()=>y,Nt:()=>I,bh:()=>v,c2:()=>T,dP:()=>E,lv:()=>w,yn:()=>S,z3:()=>b});var a=n(411855),i=n(834825),o=n(846288),s=n(236891),l=n(895925),c=n(32050),d=n(666308),u=n(746643),m=n(747484),p=n(137565);let h={preventScroll:!1,block:"nearest"},_={supportHorizontalNavigation:!0,simulateClickOnEnter:!0};class g{constructor({id:e,path:r,column:n,element:a,defaultFocusOptions:i=h,setIsFauxFocused:o,fauxClick:s,keyboardItemNavigationOptions:l=_}){this.id=e,this.path=r,this.column=n,this.element=a,this.defaultFocusOptions=i,this.setIsFauxFocused=o,this.fauxClick=s,this.navigationOptions=l}addToTree(e,r){this.tree=e,function(e,r){let n;let{path:a,column:i}=r;try{n=P(e,a,!0)}catch(e){l.k.warn("Failed to add item to KeyboardNavigationProvider tree: ",r);return}let o=i??0,s=n.items[o]?.element;s&&s!==r.element&&l.k.warn("Overwriting item in KeyboardNavigationProvider tree. Existing item: ",n.items[o]," New item: ",r),n.items[o]=r}(e,this),r&&this.id&&r.set(this.id,this)}removeFromTree(e){this.tree&&(function(e,r){let n,a;let{path:o,column:c}=r;try{n=(a=P(e,o)).items[c||0]??null}catch(e){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(!n){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(n.element!==r.element){l.k.warn("Item found in KeyboardNavigationProvider tree, but it does not match the expected item: ",n,r);return}if(a.items[c||0]=void 0,a.items.every(s.uy)){R(e,o.slice(0,-1)).children[o[o.length-1]]=void 0;for(let r=o.length-1;r>=1;r--){let n=o.slice(0,r),[a,l]=(0,i.Vs)(n),c=R(e,a);if(R(e,n).children.every(s.uy))c.children[l]=void 0;else break}e.children.every(s.uy)&&(e.children=[])}}(this.tree,this),this.tree=void 0),e&&this.id&&e.delete(this.id)}focus(e=this.defaultFocusOptions){this.element.focus({preventScroll:!0}),e.preventScroll||this.element.scrollIntoView(e)}blur(){this.element.blur()}fauxFocus(e=this.defaultFocusOptions){this.setIsFauxFocused(!0,this),e.preventScroll||this.element.scrollIntoView(e)}fauxBlur(){this.setIsFauxFocused(!1,this)}simulateClick(){this.fauxClick?this.fauxClick():this.element.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}getItemAbove(){return this.tree&&O(this.tree,this,"up")}getItemBelow(){if(!this.tree)return null;let e=O(this.tree,this,"down")||null;for(;e&&e.navigationOptions.skipOnDownNavigation;)e=e.getItemBelow();return e}getItemToTheLeft(){return this.tree&&L(this.tree,this,"left")}getItemToTheRight(){if(!this.tree)return null;let e=L(this.tree,this,"right")||null;for(;e&&e.navigationOptions.skipOnRightNavigation;)e=e.getItemToTheRight();return e}}let f=a.createContext(null),E=a.forwardRef(function({onKeyDown:e,allowVim:r=!1,disabled:n,overrideDown:i,overrideUp:o,overrideLeft:s,overrideRight:l,allowHorizontalNavigationWhileInputFocused:c=!1,useKeyNavFauxFocusSync:d,useFocusOnly:m,useDisplayContents:h,..._},g){let E=a.useRef({type:"parent",children:[]}),y=a.useRef(new Map),b=a.useRef(null),v=a.useCallback(e=>{b.current===e&&(b.current=null)},[]),A=a.useCallback(e=>{b.current=e},[]),C=a.useRef(null),N=a.useRef(null),L=a.useRef(u.lQ),O=a.useCallback(e=>{e===C.current&&(C.current=null,L.current(),L.current=u.lQ)},[]),R=a.useCallback((e,r)=>{C.current&&O(C.current),C.current=e,L.current=r},[O]),P=a.useCallback(n=>{let a=b.current,d=C.current,u=k(n),p=!(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)&&c;if(T(n,r)){if(d&&!m){n.preventDefault();let e=D(E.current,d,o);e?e?.fauxFocus():d.getItemAbove()?.fauxFocus()}else if(a){n.preventDefault();let e=D(E.current,a,o);e?e?.focus():a.getItemAbove()?.focus()}}else if(I(n,r)){if(d&&!m){n.preventDefault();let e=D(E.current,d,i);e?e?.fauxFocus():d.getItemBelow()?.fauxFocus()}else if(a){n.preventDefault();let e=D(E.current,a,i);e?e?.focus():a.getItemBelow()?.focus()}else N.current&&N.current.fauxFocus()}else if(S(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!m){n.preventDefault();let e=D(E.current,d,s);e?e?.fauxFocus():d.getItemToTheLeft()?.fauxFocus()}else if(a){n.preventDefault();let e=D(E.current,a,s);e?e?.focus():a.getItemToTheLeft()?.focus()}}else if(w(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!m){n.preventDefault();let e=D(E.current,d,l);e?e?.fauxFocus():d.getItemToTheRight()?.fauxFocus()}else if(a){n.preventDefault();let e=D(E.current,a,l);e?e?.focus():a.getItemToTheRight()?.focus()}}else"Enter"===u?d&&!m&&(n.preventDefault(),d.navigationOptions.simulateClickOnEnter&&d.simulateClick()):"Escape"===u&&(a||d)&&(n.preventDefault(),a&&a.blur(),d&&d.fauxBlur());e?.(n)},[c,r,e,m,o,i,s,l]),M=a.useMemo(()=>({tree:E.current,lookupMap:y.current,onFocusItem:A,onBlurItem:v,onFauxFocusItem:R,onFauxBlurItem:O,fauxBlurItem:()=>C.current?.fauxBlur(),blurItem:()=>b.current?.blur(),setDefaultFauxFocusedItem:e=>{N.current||(N.current=e)},fauxFocusDefaultItem:()=>{N.current?.fauxFocus()},useKeyNavFauxFocusSync:d}),[A,v,R,O,d]);return a.createElement(f.Provider,{value:M},a.createElement(p.D8,{style:h?{display:"contents"}:void 0,onKeyDown:n?e:P,forwardedRef:g,..._}))});function y({path:e,column:r=null,id:n,defaultFocusOptions:i,onFocus:o,onBlur:l,onFauxFocus:d,onFauxBlur:u,fauxClick:m,disabled:p,navigationOptions:h}){let _=(0,c.zN)(e),E=(0,c.zN)(i),y=(0,c.zN)(h);if(0===_.length)throw Error("Path must be non-empty");if(_.some(e=>e<0))throw Error("All path indices must be non-negative");if(null!=r&&r<0)throw Error("Column must be non-negative");let[b,v]=a.useState(void 0),[T,I]=a.useState(!1),[S,w]=a.useState(!1),A=a.useRef(null),{tree:C,lookupMap:N,onFocusItem:L,onBlurItem:O,onFauxFocusItem:R,onFauxBlurItem:P,setDefaultFauxFocusedItem:D,useKeyNavFauxFocusSync:k}=(0,s.sR)(a.useContext(f),"Must use `useKeyboardNavigationItem` inside `<KeyboardNavigationProvider>");a.useEffect(()=>{if(b&&!p){let e=()=>I(!0),r=()=>I(!1);return b.addEventListener("focus",e),b.addEventListener("blur",r),b===document.activeElement&&e(),()=>{b.removeEventListener("focus",e),b.removeEventListener("blur",r),b===document.activeElement&&r()}}},[p,b]);let M=a.useCallback(e=>{w(r=>(r&&(u?.(),P(e)),!1))},[u,P]),F=a.useCallback(e=>{w(r=>(r||(d?.(),R(e,()=>{null!==A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{M(e)},0)})),!0))},[M,d,R]),x=a.useCallback((e,r)=>{e?F(r):M(r)},[F,M]);a.useEffect(()=>()=>{null!==A.current&&clearTimeout(A.current)},[]);let U=a.useMemo(()=>null==b||p?null:new g({id:n,path:_,column:r,element:b,defaultFocusOptions:E,setIsFauxFocused:k?x:w,fauxClick:m,keyboardItemNavigationOptions:y}),[b,p,n,_,r,E,k,x,m,y]);return a.useEffect(()=>{if(U)return U.addToTree(C,N),U.navigationOptions.fauxFocusByDefault&&D(U),()=>{U.removeFromTree(N),U.navigationOptions.fauxFocusByDefault&&D(null)}},[U,N,D,C]),a.useEffect(()=>{if(U&&T)return o?.(),L(U),()=>{l?.(),O(U)}},[U,T,o,l,L,O]),a.useEffect(()=>{if(!k&&U&&S)return d?.(),R(U,()=>{w(!1)}),()=>{u?.(),P(U)}},[U,S,d,u,R,P,k]),{setKeyboardNavigationElement:v,keyboardNavigationItem:U,isFocused:T,isFauxFocused:S}}function b(e="real"){let{blurItem:r,fauxBlurItem:n}=(0,s.sR)(a.useContext(f),"Must use `useBlurFocusedItem` inside `<KeyboardNavigationProvider>");return a.useCallback(()=>{switch(e){case"real":r();break;case"faux":n();break;default:(0,o.xb)(e)}},[r,n,e])}function v({preventScroll:e}={}){let{tree:r}=(0,s.sR)(a.useContext(f),"Must use `useFocusFirstItem` inside `<KeyboardNavigationProvider>");return a.useCallback(()=>{let n=function e(r){if("leaf"===r.type)return r.items.find(e=>null!=e)??null;for(let n of r.children)if(n){let r=e(n);if(r)return r}return null}(r);n?.focus({preventScroll:e})},[e,r])}function T(e,r){let n=k(e),a=(0,d.vN)(e,d.xH.CONTROL),i=m.Ay.mac&&a;return"ArrowUp"===n||"KeyK"===n&&r&&A()||i&&"KeyP"===n}function I(e,r){let n=k(e),a=(0,d.vN)(e,d.xH.CONTROL),i=m.Ay.mac&&a;return"ArrowDown"===n||"KeyJ"===n&&r&&A()||i&&"KeyN"===n}function S(e,r,n=!1){return"ArrowLeft"===e&&C(n)||"KeyH"===e&&r&&A()}function w(e,r,n=!1){return"ArrowRight"===e&&C(n)||"KeyL"===e&&r&&A()}function A(){return!N(document.activeElement)}function C(e){let r=document.activeElement;return!N(r)||!!e||(r instanceof HTMLDivElement?""===r.textContent:""===r.value)}function N(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLDivElement&&"true"===e.contentEditable}function L(e,{path:r,column:n},a){if(null==n)return;let o=P(e,r);return("left"===a?i.lq:i.M0)(o.items,n)||O(e,{path:r,column:"left"===a?1/0:-1},"left"===a?"up":"down")}function O(e,{path:r,column:n},a){for(let o=r.length-1;o>=0;o--){let s=r.slice(0,o),l=r[o],c=R(e,s),d=("up"===a?i.lq:i.M0)(c.children,l);if(d){let e=("up"===a?function e(r){if("leaf"===r.type)return r;let n=(0,i.lq)(r.children,r.children.length);if(n)return e(n);throw Error("Expected a node but got nothing")}:function e(r){if("leaf"===r.type)return r;let n=(0,i.M0)(r.children,-1);if(n)return e(n);throw Error("Expected a node but got nothing")})(d);return(0,i.qg)(e.items,n||0)}}}function R(e,r,n=!1){for(let a of r){let r=e.children[a];if(r){if("leaf"===r.type)throw Error("Expected a parent but got a leaf");e=r}else if(n){let r={type:"parent",children:[]};e.children[a]=r,e=r}else throw Error("Expected a parent but got nothing")}return e}function P(e,r,n=!1){let[a,o]=(0,i.Vs)(r),s=R(e,a,n),l=s.children[o];if(l){if("parent"!==l.type)return l;throw Error("Expected a parent but got a leaf")}if(n){let e={type:"leaf",items:[]};return s.children[o]=e,e}throw Error("Expected a leaf but got nothing")}function D(e,r,n){try{var a,i;let o=n?.(r);return o&&(a=o.path,i=o.column,P(e,a).items[i??0])}catch(e){}}function k(e){return e.code??e.key}},677011:(e,r,n)=>{n.d(r,{S:()=>o});var a=n(411855),i=n(275470);class o extends a.PureComponent{render(){let e=["\u2318","\u2325","\u21E7","\u2303"];return a.createElement("span",{className:this.props.className},this.props.shortcut.split("").map((r,n)=>{let o=-1!==e.indexOf(r)?i.C:i.G;return a.createElement("span",{key:n,className:o},r)}))}}o.displayName="KeyboardShortcut"},152001:(e,r,n)=>{n.d(r,{n:()=>a.o});var a=n(565684);n(411855),n(629019),n(954339),n(939045)},565684:(e,r,n)=>{n.d(r,{o:()=>a});var a,i=n(201863);(e=>{e.set=(0,i.N)("BLOCKED_UI_LOADING_INDICATOR_SET"),e.remove=(0,i.N)("BLOCKED_UI_LOADING_INDICATOR_REMOVE")})(a||(a={}))},506989:(e,r,n)=>{n.d(r,{JR:()=>o,Qp:()=>c,Wi:()=>l});var a=n(411855),i=n(348036),o=(e=>(e.SHIMMER="shimmer",e.SHIMMER_ON_MENU="shimmer_on_menu",e.LIGHT_SHIMMER="light_shimmer",e.NO_SHIMMER="no_shimmer",e))(o||{});let s=e=>{switch(e){case"shimmer":default:return i._J;case"light_shimmer":return i.QH;case"shimmer_on_menu":return i.Sw;case"no_shimmer":return}};function l(e){return a.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${"shimmer_on_menu"===e.animationType?i.ky:i.KQ} ${e.primary?i.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},a.createElement("div",{className:s(e.animationType)}))}function c(e){return a.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${i.GE} ${e.primary?i.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},a.createElement("div",{className:s(e.animationType)}))}},10800:(e,r,n)=>{n.d(r,{x:()=>c});var a=n(411855),i=n(629019),o=n.n(i);n(399991);var s=n(265851),l=n(960069);function c({loaded:e,loadingSkeletonElement:r,children:n}){let i=a.useRef(e);return a.createElement("div",{className:s.s.grid.$},e&&a.createElement("div",{className:o()(s.s.gridRowEnd1.gridColumnEnd1.$)},n),a.createElement("div",{className:o()(s.s.eventsNone.gridRowEnd1.gridColumnEnd1.overflowHidden.$,{[l.X]:e,[s.s.opacity1.$]:!i.current})},r))}},299009:(e,r,n)=>{n.d(r,{Z_:()=>_,a_:()=>g,dW:()=>h,kt:()=>u,nt:()=>p,qc:()=>m});var a=n(411855),i=n(629019),o=n.n(i),s=n(693565),l=n(143204),c=n(827882),d=n(431450);class u extends a.Component{render(){let e=l.PG,r=l.q5;switch(this.props.size){case"medium":e=l.$g,r=l.Mn;break;case"large":e=l.Pu,r=l.OZ;break;case"custom":e=null,r=null}return a.createElement("span",{className:o()(l.zr,e,this.props.shouldMatchTextColor?l.K_:l.h,this.props.className||""),"data-testid":this.props.testId},this.props.cssBacked?a.createElement("span",{className:o()(l.WL,r)}):this.props.imageBacked?a.createElement("img",{alt:"Loading",className:l.yM,src:"data:image/svg+xml;base64,"+btoa(c.A)}):a.createElement(s.B,{svg:this.props.altIcon||c.A,className:l.yM,autosize:!this.props.altIcon,dataTestId:"loading-spinner"}))}}function m(e){return a.createElement("div",{className:l.F},a.createElement(u,{...e}))}function p(){return a.createElement("div",{className:l.F},a.createElement(u,{size:"large"}))}function h(e){return a.createElement(u,{imageBacked:!0,...e})}function _(){return a.createElement("div",{className:l.sl},a.createElement(u,null))}u.displayName="LoadingSpinner";class g extends a.PureComponent{render(){return a.createElement("span",{className:`${l.uz} ${this.props.className||""}`},a.createElement(s.B,{svg:d.A,className:l.yM}))}}g.displayName="BlueLoadingSpinner"},628452:(e,r,n)=>{n.d(r,{R:()=>b});var a=n(411855),i=n(520244),o=n(629019),s=n.n(o),l=n(777535),c=n(278299),d=n(841962),u=n(747484),m=n(489803),p=n(76265),h=n(278695),_=n(140835);let g="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",f="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",y="mobile_download_prompt_dismissed";function b(e){let{isCompact:r}=e,n=u.aR?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",o=(0,c.UG)(),g=!r&&!!e.renderBlockingPrompt,[b,I]=a.useState(!g),[S,w]=a.useState(!g);a.useEffect(()=>{null===o.get(y)&&(I(!1),w(!1))},[o,g]);let A=()=>{g||(I(!0),(0,l.sx)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{w(!0)},300),o.set(y,!0))};return null!==o.get(y)?null:a.createElement(_.fu,{name:"Mobile Download Prompt"},a.createElement("div",{className:s()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":b,"mobile_download_prompt--overlayAnimateEnd--dBvI0":S}),style:{transitionDuration:"300ms"},onClick:A},a.createElement("div",{className:s()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":b,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":g}),onClick:e=>{e.stopPropagation()}},a.createElement("div",{className:s()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":g})},r?a.createElement(T,null):a.createElement(v,{renderBlockingPrompt:g??!1})),a.createElement("hr",{className:s()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":g})}),a.createElement("div",{className:"mobile_download_prompt--mobilePromptGrid--Mvqf-"},a.createElement("img",{className:E,src:(0,d.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,p.t)("file_browser.mobile_prompt.app_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:f},(0,p.tx)("file_browser.mobile_prompt.app_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},g?(0,p.tx)("file_browser.mobile_prompt.app_description_new"):(0,p.tx)("file_browser.mobile_prompt.app_description"))),a.createElement(m.pW,{size:"lg",trackingProperties:{userId:e.userIdForTracking,appLink:n,trackingDescriptor:h.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},width:"fill",href:n},(0,p.tx)("file_browser.mobile_prompt.app_action")),!g&&a.createElement(a.Fragment,null,a.createElement("img",{className:E,src:(0,d.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,p.t)("file_browser.mobile_prompt.browser_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:f},(0,p.tx)("file_browser.mobile_prompt.browser_title"))),a.createElement(i.Pw,{onClick:A,variant:"secondary"},(0,p.tx)("file_browser.mobile_prompt.browser_action")))))))}function v(e){return a.createElement(a.Fragment,null,a.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,d.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,p.t)("file_browser.mobile_prompt.image_alt")}),a.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},a.createElement("h2",{className:g},e.renderBlockingPrompt?(0,p.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,p.tx)("file_browser.mobile_prompt.modal_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,p.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,p.tx)("file_browser.mobile_prompt.modal_body"))))}function T(){return a.createElement(a.Fragment,null,a.createElement("h2",{className:g},(0,p.tx)("file_browser.mobile_prompt.modal_title_compact")))}},14489:(e,r,n)=>{n.d(r,{Cp:()=>D,IW:()=>P,Lp:()=>F,Qv:()=>k,jq:()=>x,ne:()=>R,o_:()=>U,xD:()=>M,y2:()=>B});var a=n(411855),i=n(138225),o=n(154626),s=n(316251),l=n(22562),c=n(629019),d=n.n(c),u=n(777535),m=n(512729),p=n(336427),h=n(841962),_=n(666308),g=n(563192),f=n(250392),E=n(693565),y=n(265851),b=n(76265),v=n(910164),T=n(726084),I=n(343373),S=n(19776),w=n(688656),A=n(738402),C=n(880744),N=n(399403),L=n(700977),O=n(703475);function R(e,r){let n=a.useCallback(e=>{setTimeout(()=>{v.current&&(v.current.focus(),e&&v.current.select())},0)},[]),i=a.useCallback(()=>{v.current&&v.current.blur()},[]),o=a.useCallback(()=>{v.current&&v.current.select()},[]);a.useImperativeHandle(r,()=>({focus:n,blur:i,select:o,searchInput:v.current}));let[s,l]=a.useState(!1),[c,d]=a.useState(!1),[u,h]=a.useState(void 0),{onFocus:f,onClick:E}=e,y=a.useCallback(()=>{f&&f(),d(!0)},[f]),b=a.useRef(!1),v=a.useRef(null),T=a.useCallback(e=>{b.current=document.activeElement!==e.target},[]),I=a.useCallback(()=>{b.current&&(v.current?.select(),y())},[y]),w=a.useCallback(()=>{e.onBlur&&e.onBlur(),d(!1)},[e]),A=g.AF(e.recordingKey,"change",r=>{let n=r.target;e.onChange(n.value)}),C=g.v_(e.recordingKey,"keydown",r=>{if(!(e.isKeyDownHandled&&e.isKeyDownHandled(r))){if(" "===r.key&&r.stopPropagation(),r.keyCode===_.Uz.ESCAPE){v.current?.blur();return}(0,S.jr)(r,S.W0.NO)}}),N=a.useCallback((e=!1)=>{e&&l(!0),n(),E&&E()},[n,E]),L=g.rf(e.recordingKey,"click",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),O=g.v_(e.recordingKey+".clear","keydown",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),R=(0,p.ZC)(e.isFocused);return a.useEffect(()=>{R||!0!==e.isFocused?!0===R&&!1===e.isFocused&&i():n()},[i,n,R,e.isFocused]),(0,m.h)(()=>{e.focusOnMount&&v.current&&(v.current.focus(),y()),e.selectTextOnMount&&v.current&&v.current.select()}),{loggedOutSearchBarActivated:s,inputFocused:c,placeholderWidth:u,setPlaceholderWidth:h,searchInputRef:v,onMouseDown:T,onMouseUp:I,onSearchClick:N,onClearSearchClick:L,onClearSearchKeyDown:O,onFocus:f,onBlur:w,onClick:E,onSearchKeyDown:C,onSearchChange:A}}let P=a.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:i,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:m,onSearchKeyDown:p,onSearchChange:h}=R(e,r),_=(0,A.ks)(),g=_?C.vq:C.rk;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${g} ${e.className||""}`},e.withUI3Icon?a.createElement(o.h,{className:e.iconClassName}):a.createElement(E.B,{className:e.iconClassName??C.qc,svg:N.A}),a.createElement(f.L,{ref:i,placeholder:e.placeholder||(0,b.t)("general.search"),className:C.mn,value:e.query,onMouseDown:s,onMouseUp:l,onFocus:d,onBlur:u,onClick:m,onChange:h,onKeyDown:p,spellCheck:!1,style:v.sx.if(e.hasTransparentBackground,v.sx.add({background:"transparent"})).if(_||e.smallFont,v.sx.if(n,v.sx.textBodyMedium,v.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),a.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c,customClearSearchIcon:e.customClearSearchIcon,customContainerClassName:e.customClearSearchContainerClassName}))});a.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:i,onMouseDown:o,onMouseUp:s,onClearSearchClick:l,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:m,onSearchChange:p}=R(e,r),h=(0,A.ks)(),_=h?C.vq:C.rk;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${_} ${e.className||""}`},a.createElement("button",{onClick:e.onBack,className:y.s.colorBgSecondary.$},a.createElement(T.In,{icon:"chevron-left-32"})),a.createElement(f.L,{ref:i,placeholder:e.placeholder||(0,b.t)("general.search"),className:C.mn,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:c,onBlur:d,onClick:u,onChange:p,onKeyDown:m,spellCheck:!1,style:v.sx.if(e.hasTransparentBackground,v.sx.add({background:"transparent"})).if(h||e.smallFont,v.sx.if(n,v.sx.textBodyMedium,v.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),a.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:l}))}),a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onSearchClick:d,onClearSearchClick:u,onFocus:m,onBlur:p,onClick:h,onSearchKeyDown:_,onSearchChange:g}=R(e,r),y=e.placeholder||(0,b.t)("general.search"),v=`${e.className||""} ${n?C.pp:C.MI}`;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:v},a.createElement(E.B,{className:C.MU,svg:N.A,onClick:()=>d()}),a.createElement(f.L,{ref:s,placeholder:y,className:C.mn,value:e.query,onMouseDown:l,onMouseUp:c,onFocus:m,onBlur:p,onClick:h,onChange:g,onKeyDown:_,style:{width:n?void 0:i},spellCheck:!1}),a.createElement("div",{className:C.ds,ref:e=>o(e?.getBoundingClientRect().width)},y),a.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:u}))}),a.forwardRef((e,r)=>{let n=a.createRef();return a.useImperativeHandle(r,()=>n.current),a.createElement("div",{className:C.$7,onMouseDown:()=>n.current?.focus()},a.createElement(P,{...e,smallFont:!0,hasTransparentBackground:!0,className:d()(y.s.wFull.$,e.className),ref:n}))});let D=a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:m,onSearchKeyDown:p,onSearchChange:h}=R(e,r),_=e.placeholder||(0,b.t)("general.search"),g=`${e.className||""} ${C.W1}`,y=e.query.length>0?C.p3:C.Rt;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:g,onMouseDown:e=>{s(e),e.target.matches("input")||e.preventDefault()},onMouseUp:l},a.createElement(E.B,{className:C.mh,svg:N.A}),a.createElement(f.L,{ref:o,placeholder:_,className:y,value:e.query,onFocus:d,onBlur:u,onClick:m,onChange:h,onKeyDown:p,style:{width:n?void 0:i},spellCheck:!1}),a.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))}),k=a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onClearSearchClick:d,onFocus:m,onBlur:p,onClick:_,onSearchKeyDown:g,onSearchChange:E}=R(e,r);a.useEffect(()=>{u.az.trackDefinedEvent("search_experience.dead_code",{userId:h.Ay().user_data?.id,codeLocation:"SidebarSearchBar"})},[]);let y=e.placeholder||(0,b.t)("general.search"),v=`${e.className||""} ${C.Gh}`,I=e.query.length>0?C.r3:C.nP;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:v,onMouseDown:e=>{l(e),e.target.matches("input")||e.preventDefault()},onMouseUp:c},a.createElement(T.In,{icon:"search-32"}),a.createElement(f.L,{ref:s,placeholder:y,className:I,value:e.query,onFocus:m,onBlur:p,onClick:_,onChange:E,onKeyDown:g,style:{width:n?void 0:i},spellCheck:!1}),a.createElement("div",{className:C.lm,ref:e=>o(Math.max(50,e?.getBoundingClientRect().width))},y),a.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:d}))}),M=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onFocus:s,onBlur:l,onClick:c,onSearchKeyDown:d,onSearchChange:u}=R(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:C.sb},a.createElement(f.L,{ref:n,placeholder:e.placeholder||(0,b.t)("general.search"),className:C.vs,value:e.query,onMouseDown:i,onMouseUp:o,onFocus:s,onBlur:l,onChange:u,onClick:c,onKeyDown:d,spellCheck:!1}),a.createElement(E.B,{className:C.Ck,svg:L.A,onClick:e.onSubmit}))}),F=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:u,onSearchKeyDown:m,onSearchChange:p}=R(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:d()(e.className||C.HD,{[C.RT]:!e.extraSpacing,[C.qX]:e.extraSpacing,[C.Cs]:e.hideSearchIcon})},!e.hideSearchIcon&&a.createElement(E.B,{svg:O.A,className:C.nk}),a.createElement(f.L,{ref:n,placeholder:e.placeholder||(0,b.t)("design_systems.publishing_modal.search_placeholder"),className:e.query?C.CC:C.Vl,value:e.query,onMouseDown:i,onMouseUp:o,onFocus:l,onBlur:c,onClick:u,onChange:p,onKeyDown:m,spellCheck:!1,dataTestId:e.dataTestId}),a.createElement(V,{hideXIcon:e.hideXIcon,query:e.query,onClearSearchClick:s,recordingKey:g.Pt(e,"closeX")}))}),x=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:d,onSearchKeyDown:u,onSearchChange:m}=R(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ZG} ${e.className||""}`},a.createElement(E.B,{svg:O.A,className:C.MU}),a.createElement(f.L,{ref:n,placeholder:e.placeholder||(0,b.t)("general.search"),className:C.uD,value:e.query,onMouseDown:i,onMouseUp:o,onFocus:l,onBlur:c,onClick:d,onChange:m,onKeyDown:u,spellCheck:!1,style:e.hasTransparentBackground?{background:"transparent"}:void 0}),a.createElement(V,{hideXIcon:e.hideXIcon,query:e.query,onClearSearchClick:s,recordingKey:g.Pt(e,"clearSearch")}))}),U=a.forwardRef((e,r)=>{let{loggedOutSearchBarActivated:n,searchInputRef:i,onMouseDown:o,onMouseUp:s,onSearchClick:l,onClearSearchClick:c,onFocus:d,onBlur:m,onClick:p,onSearchKeyDown:_,onSearchChange:g}=R(e,r);return a.useEffect(()=>{u.az.trackDefinedEvent("search_experience.dead_code",{userId:h.Ay().user_data?.id,codeLocation:"LoggedOutSearchBar"})},[]),a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ax} ${e.className||""}`},!n&&!e.query&&a.createElement("div",{className:C.JU,onClick:()=>l(!0)},a.createElement(E.B,{className:C.Qm,svg:L.A})),(n||!!e.query)&&a.createElement("div",{className:C.S_},a.createElement(f.L,{ref:i,placeholder:e.placeholder||(0,b.t)("general.search"),className:C.nA,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:d,onBlur:m,onClick:p,onChange:g,onKeyDown:_,autoFocus:!0,spellCheck:!1}),a.createElement(V,{hideXIcon:!1,query:e.query,onClearSearchClick:c})))}),B=a.forwardRef((e,r)=>{let n=a.createRef();return a.useImperativeHandle(r,()=>n.current),a.createElement("div",{className:C.tL,style:e.styleOverrides,onMouseDown:()=>n.current?.focus()},a.createElement(P,{...e,smallFont:!0,className:d()(y.s.wFull.$,e.className),ref:n}))});function V({query:e,hideXIcon:r,withSmallXIcon:n=!1,onClearSearchClick:o,recordingKey:c,customClearSearchIcon:u,customContainerClassName:m}){return!e||r?null:a.createElement("div",{className:d()(C.i3,m)},a.createElement(i.K,{onClick:o,"aria-label":(0,b.t)("search.search_bar.clear"),recordingKey:c,htmlAttributes:{"data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,b.t)("search.search_bar.clear"),"data-testid":"clearSearchButton"}},u||(n?a.createElement(s.f,null):a.createElement(l.A,null))))}},300758:(e,r,n)=>{n(411855),n(188507);var a=n(140835),i=n(784986);(0,a.tf)(i.d)},925031:(e,r,n)=>{n.d(r,{On:()=>s});var a=n(411855),i=n(846288),o=n(95226);class s extends a.PureComponent{render(){(0,i.KF)(Number.isInteger(this.props.number),"breadcrumb step must be an integer"),(0,i.KF)(this.props.number>=1&&this.props.number<=20,"breadcrumb step is out of expected range");let e="";return this.props.selected?(e+=o.Qq,this.props.lightText&&(e+=" "+o.vV)):(e+=o.PM,this.props.lightText&&(e+=" "+o.x8)),this.props.canClick&&(this.props.lightText?e+=" "+o.v6:e+=" "+o.lm),a.createElement("div",{"data-testid":this.props.number+this.props.text,className:e,onClick:()=>this.props.canClick&&this.props.onClick&&this.props.onClick()},a.createElement("span",{className:o.CD},String.fromCharCode(9311+this.props.number)),this.props.text)}}s.displayName="StepBreadcrumb";class l extends a.PureComponent{render(){return a.createElement("div",{className:o.QM})}}l.displayName="StepBreadcrumbSpacer";class c extends a.PureComponent{render(){return a.createElement("div",{className:`${o.Fb} ${this.props.className||""}`},this.props.children)}}c.displayName="StepTitle";class d extends a.PureComponent{render(){return a.createElement("div",{className:o.eN,...this.props})}}d.displayName="StepInstructions"},413453:(e,r,n)=>{n.d(r,{C:()=>c,i:()=>d});var a=n(411855),i=n(629019),o=n.n(i),s=n(782787),l=n(265851),c=(e=>(e.Block="block",e.DeprecatedFullHeightBlock="fullHeightBlock",e.Contents="contents",e))(c||{});class d extends a.Component{constructor(){super(...arguments),this.containerRef=a.createRef(),this.traverseChildren=()=>{this.firstTabbableEl=void 0,this.lastTabbableEl=void 0;let e=r=>{for(let n of((0,s.B)(r)&&((!this.firstTabbableEl||r.tabIndex<this.firstTabbableEl.tabIndex)&&(this.firstTabbableEl=r),(!this.lastTabbableEl||r.tabIndex>=this.lastTabbableEl.tabIndex)&&(this.lastTabbableEl=r)),Array.from(r.children)))e(n);for(let n of Array.from(r.shadowRoot?.children||[]))e(n)};e(this.containerRef.current)},this.onFrontGuardFocus=e=>{this.traverseChildren();let r=this.containerRef.current.contains(e.relatedTarget)?this.lastTabbableEl:this.firstTabbableEl;this.focusElement(r)},this.onBackGuardFocus=()=>{this.traverseChildren(),this.focusElement(this.firstTabbableEl)}}focusElement(e){e&&setTimeout(()=>{e.focus(),e.select?.()},0)}render(){let e=o()(this.props.className,{[l.s.hFull.$]:"fullHeightBlock"===this.props.displayAs,displayContents:"contents"===this.props.displayAs});return a.createElement("div",{className:e,style:this.props.style},a.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onFrontGuardFocus}),a.createElement("div",{className:e,ref:this.containerRef},this.props.children),a.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onBackGuardFocus}))}}d.defaultProps={displayAs:"contents"},d.displayName="TabLoop"},884455:(e,r,n)=>{n.d(r,{NU:()=>p});var a=n(411855),i=n(728722),o=n(219820),s=n(933781),l=n(384977),c=n(483927),d=n(522917),u=n(314540),m=n(183739);function p({file:e,...r}){var n,p;let h=(0,i.Rs)(m.sMs,{key:e.key}),_=(n=e.editor_type,p=!!e.thumbnail_guid,n===u._Y.SLIDES?c.F.SLIDES:n===u._Y.WHITEBOARD?p?c.F.WHITEBOARD:c.F.DEFAULT_WHITEBOARD:p?c.F.DESIGN:c.F.DEFAULT_DESIGN);if((0,d.i4)(e)){if("loading"===h.status)return a.createElement(l.q,{...r});if(!h.transform(e=>!!e.file?.hasPermission).unwrapOr(!1))return a.createElement(o.N,{thumbnailType:_,...r})}return a.createElement(s.V,{key:e.key,thumbnailUrl:e.thumbnail_url_override??e.thumbnail_url,thumbnailType:_,clientMeta:e.client_meta,lastTouchedAt:e.touched_at??e.updated_at,...r})}},272135:(e,r,n)=>{n.d(r,{A:()=>u});var a=n(411855);n(908588);var i=n(693565),o=n(384977),s=n(483927),l=n(76265),c=n(761070),d=n(639425);function u({borderRadius:e,noBorder:r,size:n}){let u=a.createElement(i.B,{svg:c.A,className:"x3xsitq",svgWidth:"50px",svgHeight:"50px"}),m=a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k"},a.createElement(i.B,{svg:d.A,className:"xayg1ih",svgWidth:"100px",svgHeight:"100px"}),a.createElement("div",{className:"x1n0bwc9 x9otpla"},(0,l.tx)("tile.offline_file_tile.offline_created_file")));return a.createElement(o.q,{borderRadius:e,noBorder:r,backgroundColor:"var(--color-bg-secondary)"},n===s.y.SMALL?u:m)}},933781:(e,r,n)=>{n.d(r,{V:()=>v});var a=n(411855),i=n(629019),o=n.n(i),s=n(890882),l=n(841962),c=n(875877),d=n(826943),u=n(272135),m=n(384977),p=n(483927),h=n(265851),_=n(981959),g=n(217950),f=n(550479);let E=16/9;function y(e){return"#"+(0x1000000+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)}let b=(0,c.atom)({});function v({thumbnailUrl:e,thumbnailType:r,lastTouchedAt:n,clientMeta:i,size:v,borderRadius:T,noBorder:I,addtlStyles:S,draggable:w}){let A=!!(0,l.kc)().file_browser_thumbnails_16_by_9&&r!==p.F.DEFAULT_DESIGN&&r!==p.F.DEFAULT_WHITEBOARD&&r!==p.F.SLIDES&&r!==p.F.COOPER,{latestThumbnailUrl:C,smartBackgroundColor:N}=function({touchedAt:e,thumbnailUrl:r,needsSmartBackground:n}){let[i,o]=(0,c.useAtom)(b),l=!e||(0,s.A)(e).isBefore((0,s.A)().subtract(4,"seconds")),d=!n||r&&!!i[r],[u,m]=a.useState(l&&r&&d?r:null),p=a.useCallback(e=>{if(!n||i[e])m(e);else{let r=new Image;r.crossOrigin="anonymous",r.className=h.s.fixed.hidden.$,r.onload=()=>{let n=function(e){try{if(!e)return null;if((e.naturalWidth/e.naturalHeight).toFixed(3)===E.toFixed(3))return"transparent";let r=document.createElement("canvas"),n=r.getContext("2d");if(!n)return r.remove(),null;let{width:a,height:i}=e;r.width=a,r.height=i,n.drawImage(e,0,0,a,i);let o=n.getImageData(0,i/2,1,1).data,s=n.getImageData(a/2,0,1,1).data,l=n.getImageData(a,i/2,-1,1).data,c=n.getImageData(a/2,i,1,-1).data,d=y(o),u=y(s),m=y(l),p=y(c);return r.remove(),function(e){let r=new Map,n=null,a=0;for(let i of e){let e=(r.get(i)??0)+1;r.set(i,e),e>a&&(a=e,n=i)}return n}([d,u,m,p])}catch(r){return(0,f.$D)(g.e.WAYFINDING,r,{extra:{imageObject:e,"imageObject instanceof HTMLElement":e instanceof HTMLElement,"imageObject instanceof HTMLImageElement":e instanceof HTMLImageElement}}),null}}(r);n&&o(r=>({...r,[e]:n})),m(e),r.remove()},r.src=e,document.body.appendChild(r)}},[m,n,i,o]);a.useLayoutEffect(()=>{if(r){if(e){let n=(0,s.A)(e).diff((0,s.A)().subtract(4,"seconds"));if(n<=0){p(r);return}{let e=setTimeout(()=>{p(r)},n);return()=>clearTimeout(e)}}p(r)}else m(null)},[e,r,p]);let _=n&&u?i[u]:void 0;return{latestThumbnailUrl:u,smartBackgroundColor:_}}({thumbnailUrl:e,touchedAt:n,needsSmartBackground:A}),{thumbnailLoadError:L,onError:O}=function(e){let[{url:r,hasError:n},i]=a.useState({url:e,hasError:!1}),o=a.useCallback(()=>{i(({url:e})=>({url:e,hasError:!0}))},[]);return e!==r?(i({url:e,hasError:!1}),{thumbnailLoadError:!1,onError:o}):{thumbnailLoadError:n,onError:o}}(C);if(r===p.F.OFFLINE)return a.createElement(u.A,{size:v,borderRadius:T,noBorder:I});let R=r!==p.F.SLIDES?(0,_.C)(i):void 0,P=r===p.F.DEFAULT_DESIGN||r===p.F.DEFAULT_WHITEBOARD||r===p.F.COOPER;return a.createElement(m.q,{borderRadius:T,backgroundClassName:o()({"thumbnail--whiteboardBackground--NqVbL":r===p.F.WHITEBOARD||r===p.F.DEFAULT_WHITEBOARD,"thumbnail--checkerboardBackground--Q3H9I":r===p.F.DEFAULT_DESIGN&&(!R||"transparent"===R),"thumbnail--backgroundDefault--018Ph":r===p.F.PROTOTYPE||r===p.F.SLIDES||r===p.F.SITES&&!(A&&N)&&(!R||"transparent"===R)}),noBorder:I,backgroundColor:A?N:R},null!==C&&!L&&a.createElement(d.oW,{src:C,alt:"",loading:"lazy",onError:O,draggable:!!w,className:o()(h.s.hFull.wFull.$,{"thumbnail--thumbnailCover--IK4Yi":!P&&!(0,l.kc)().file_browser_thumbnails_16_by_9,"thumbnail--thumbnailContain---m6Py":P||(0,l.kc)().file_browser_thumbnails_16_by_9,[h.s.p10.$]:P&&v!==p.y.SMALL,[h.s.p4.$]:P&&v===p.y.SMALL,[h.s.py12.$]:P&&r===p.F.COOPER,[h.s.px6.$]:P&&r===p.F.COOPER}),crossOrigin:"anonymous",style:S}))}},384977:(e,r,n)=>{n.d(r,{q:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(265851);function l({backgroundColor:e,backgroundClassName:r,borderRadius:n,noBorder:i,children:l}){return a.createElement("div",{"data-testid":"thumbnail-container",className:o()(s.s.hFull.wFull.borderBox.if(!i,s.s.b1.bSolid.colorBorder).overflowHidden.$,{[s.s.bRadius2.$]:2===n,[s.s.bRadius4.$]:4===n,[s.s.bRadius6.$]:6===n,[s.s.bRadius8.$]:8===n},r),style:e?{backgroundColor:e}:void 0},a.createElement("div",{className:"thumbnail_container--aspectRatio--Q7gu8"},l))}},483927:(e,r,n)=>{n.d(r,{F:()=>i,y:()=>a});var a=(e=>(e.SMALL="small",e.DEFAULT="default",e))(a||{}),i=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEFAULT_DESIGN="default_design",e.DEFAULT_WHITEBOARD="default_whiteboard",e.OFFLINE="offline",e.SLIDES="slides",e.PROTOTYPE="prototype",e.SITES="sites",e.COOPER="cooper",e))(i||{})},505427:(e,r,n)=>{n.d(r,{L:()=>g});var a=n(411855),i=n(32257),o=n(777885),s=n(629019),l=n.n(s),c=n(563192),d=n(693565),u=n(238795),m=n(615883),p=n(326078),h=n(289298);let _=e=>e.stopPropagation();a.forwardRef((e,r)=>a.createElement(i.o,{eventListeners:["onClick"]},a.createElement(g,{...e,children:void 0,recordingKey:e.recordingKey,forwardedRef:r}),e.children));class g extends c.uA{constructor(){super(...arguments),this.wrapperRef=a.createRef(),this.buttonRef=a.createRef(),this.setButtonRef=e=>{(0,m.cZ)(this.buttonRef,e),(0,m.cZ)(this.props.forwardedRef,e)},this.onClick=c.cZ(this,"click",e=>{this.props.onClick?.(e)}),this.onKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),this.wrapperRef.current?.blur(),this.buttonRef.current?.blur()),this.props.enabled&&!this.props.hidden&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.props.onClick(e))}}render(){let e,r="";r=this.props.selected?p.wH:this.props.enabled?p.Sn:p.r9,this.props.isUI3&&this.props.ui3Icon?e=this.props.ui3Icon:this.props.useSvgNode?e=this.props.svgNode?a.createElement("span",null,this.props.svgNode):null:this.props.svg&&(e=a.createElement(u.t,{svg:this.props.svg,fallbackSvg:this.props.fallbackSvg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}));let n=a.createElement(a.Fragment,null,!this.props.hidden&&e,this.props.text&&a.createElement("span",{className:this.props.textStyle||(this.props.svg?p.Pf:p.Qq)},this.props.text),this.props.showIndicator&&a.createElement("span",{className:this.props.indicatorStyle?this.props.indicatorStyle:p.q3}),this.props.showChevron&&(this.props.isUI3?a.createElement("div",{className:p.VI},a.createElement(o.O,null)):this.props.positionOnChevron?a.createElement("div",{className:p.FH,ref:this.props.chevronRef},a.createElement(d.B,{svg:h.A,className:l()(p.cN,p.Ot)})):a.createElement(d.B,{svg:h.A,className:p.cN})),this.props.children);return a.createElement("button",{id:this.props.id,ref:this.setButtonRef,className:l()(r,this.props.narrow?p.sc:null,this.props.className),onMouseDown:this.props.enabled&&!this.props.hidden?this.onClick:void 0,onClick:_,"data-tooltip-type":this.props["data-tooltip-type"],"data-tooltip-slides":this.props["data-tooltip-slides"],"data-tooltip-submenu-open":this.props["data-tooltip-submenu-open"],"data-tooltip":this.props["data-tooltip"],"data-tooltip-shortcut-key":this.props["data-tooltip-shortcut-key"],"data-tooltip-offset-x":this.props.showChevron&&!this.props.isUI3&&this.props.positionOnChevron?8:0,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.dataTestId,onKeyDown:this.onKeyDown,"aria-label":this.props.ariaLabel,"aria-expanded":this.props["aria-expanded"],"aria-controls":this.props["aria-controls"],"aria-haspopup":this.props["aria-haspopup"],"data-fullscreen-intercept":!0},n)}}g.displayName="TopBarAction",g.defaultProps={enabled:!0,hidden:!1}},38047:(e,r,n)=>{n.d(r,{h:()=>u});var a=n(411855),i=n(629019),o=n.n(i),s=n(64271),l=n(211020),c=n(265851),d=n(688656);function u({as:e,text:r,className:n,elementRef:i,...u}){let m=a.useRef(null),p=(0,s.A)(i,m),h=(0,l.NG)({text:r,textRef:m,disabled:!r});return a.createElement(e||"div",{...u,className:o()(c.s.truncate.$,n),"data-tooltip-type":r&&h&&d.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-immediately":!0,ref:p},r)}},372653:(e,r,n)=>{n.d(r,{z:()=>o}),n(411855);var a=n(875877);n(72411);let i=(0,a.atom)(null);function o(){return null!==(0,a.useAtomValue)(i)}},684526:(e,r,n)=>{n.d(r,{f:()=>c});var a=n(411855);n(640783);var i=n(841962),o=n(705806);n(693565),n(76265);var s=n(841924),l=n(925616);function c(){return a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.97616 0.163086C3.56555 0.163086 0 3.75492 0 8.19851C0 11.7505 2.28457 14.7572 5.45388 15.8214C5.85012 15.9014 5.99527 15.6485 5.99527 15.4357C5.99527 15.2495 5.9822 14.6109 5.9822 13.9456C3.76343 14.4246 3.30139 12.9877 3.30139 12.9877C2.94482 12.0565 2.41649 11.8171 2.41649 11.8171C1.69029 11.3249 2.46939 11.3249 2.46939 11.3249C3.27494 11.3781 3.69763 12.1497 3.69763 12.1497C4.41061 13.3735 5.55951 13.0277 6.02171 12.8148C6.08767 12.296 6.2991 11.9368 6.52359 11.7373C4.75396 11.551 2.89208 10.8592 2.89208 7.77272C2.89208 6.89468 3.20882 6.17631 3.71069 5.61762C3.63151 5.41811 3.35412 4.59313 3.79004 3.48896C3.79004 3.48896 4.46351 3.27607 5.98204 4.31378C6.63218 4.13789 7.30265 4.04841 7.97616 4.04766C8.64963 4.04766 9.33616 4.14088 9.97012 4.31378C11.4888 3.27607 12.1623 3.48896 12.1623 3.48896C12.5982 4.59313 12.3207 5.41811 12.2415 5.61762C12.7566 6.17631 13.0602 6.89468 13.0602 7.77272C13.0602 10.8592 11.1984 11.5376 9.41551 11.7373C9.70612 11.99 9.9569 12.4689 9.9569 13.2272C9.9569 14.3048 9.94384 15.1696 9.94384 15.4356C9.94384 15.6485 10.0891 15.9014 10.4852 15.8215C13.6545 14.757 15.9391 11.7505 15.9391 8.19851C15.9522 3.75492 12.3736 0.163086 7.97616 0.163086Z",fill:"#24292f",style:{fill:"var(--color-icon)"}}))}(0,i.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),(0,i.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),s.M4.Query({fetch:async e=>e?(await l.$.getFaviconForUrlProxy({url:(0,o.Jk)(e)})).data.meta??null:null})},645695:(e,r,n)=>{n.d(r,{n:()=>l});var a=n(411855),i=n(890882),o=n(324608),s=n(688656);function l(e){let r=function(e,r=(0,o.Gq)().getPrimaryLocale(!1)){return new Intl.DateTimeFormat(r,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(i.A.utc(e).toDate())}(e.date,e.locale);return a.createElement("span",{"data-tooltip-type":s.Ib.TEXT,"data-tooltip":r},e.children)}},738726:(e,r,n)=>{n.d(r,{ZQ:()=>I});var a=n(411855),i=n(629019),o=n.n(i),s=n(952979),l=n(931223),c=n(841962),d=n(875877),u=n(747484),m=n(621847),p=n(693565),h=n(76265),_=n(278695),g=n(140835),f=n(190500),E=n(622268),y=n(421740),b=n(90913),v=n(578804);function T(e){let[r,n]=a.useState(e.showBanner),{trackEvent:i}=(0,g.j6)(),s=a.useRef(null),c=(0,d.useSetAtom)(E.P4),u=(0,l.wY)(s)??l.cU,y=r?u.height+(e.verticalPadding||0):0;a.useEffect(()=>{c(y)},[y,c]);let T=async()=>{n(!1),await (0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1}),i(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_OUT})},I=async()=>{n(!1),await (0,E.L3)({consentRegion:"explicit",cookiesEnabled:!0}),i(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_IN})},S=async()=>{n(!1),await (0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1}),i(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_EXPLICIT_CONSENT_DISMISS})};return r?a.createElement("div",{className:o()(v.kL,e.variant===b.a.COMMUNITY&&[v.gC,v.Vt],e.variant===b.a.FILE_VIEWER&&v.ut,e.variant===b.a.PROTOTYPE&&v.Id,e.variant===b.a.AUTH&&[v.gC,v.Yp]),role:"region",ref:s,"aria-label":(0,h.t)("cookies.consent_manager"),"data-testid":"cookie-banner"},a.createElement("div",{className:v.rf},(0,h.tx)("cookies.explicit_consent_body")," ",a.createElement(m.Yo,{href:(0,h.dS)("/consent-preferences/"),target:"_blank",rel:"noreferrer"},(0,h.tx)("cookies.cookies_settings"))),a.createElement("div",{className:v.o1},a.createElement(e.SecondaryButton,{onClick:T,"data-testid":"cookie-opt-out-button"},(0,h.tx)("cookies.do_not_allow_cookies")),a.createElement(e.PrimaryButton,{onClick:I,"data-testid":"cookie-opt-in-button"},(0,h.tx)("cookies.allow_all_cookies"))),a.createElement("div",{className:v.X8},a.createElement("button",{onClick:S,type:"button","data-testid":"cookie-dismiss-button"},a.createElement(p.B,{className:v.MW,svg:e.dismissIcon})))):e.persistentMessage&&a.createElement(g.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function I(e){let r=(0,d.useAtomValue)(E.Dr),n=!1;return(r===E.S6.UNLOADED&&(n=!0),r!==E.S6.YES||e.persistentMessage||(n=!0),(0,y.V)()&&(n=!0),c.Ay().user_data?.id&&(n=!0),((0,c.Ay)().is_embed||(0,s.GZ)())&&(n=!0),u.Ay.isMeetDevice&&(n=!0),a.useEffect(()=>{!n&&u.Ay.isIpadNative&&(0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||u.Ay.isIpadNative)?null:a.createElement(g.fu,{name:"Cookie Banner",properties:{consentRegion:"explicit"}},a.createElement(T,{...e,showBanner:r===E.S6.NO}))}},712465:(e,r,n)=>{n.d(r,{C$:()=>T});var a=n(411855),i=n(629019),o=n.n(i),s=n(952979),l=n(931223),c=n(841962),d=n(875877),u=n(747484),m=n(621847),p=n(693565),h=n(278695),_=n(140835),g=n(190500),f=n(622268),E=n(421740),y=n(90913),b=n(578804);function v(e){let[r,n]=a.useState(e.showBanner),[i,s]=a.useState(!1),c=a.useRef(null),u=a.useRef(),E=(0,d.useSetAtom)(f.P4),v=(0,l.wY)(c)??l.cU,T=r?v.height+(e.verticalPadding||0):0;a.useEffect(()=>{E(T)},[T,E]);let{trackEvent:I}=(0,_.j6)(),S=a.useRef(I);S.current=I,a.useEffect(()=>()=>{clearTimeout(u.current)},[]);let w=a.useCallback(e=>{c.current?.contains(e.target)||(s(!0),window.removeEventListener("click",w),u.current=setTimeout(async()=>{if(!r)return null;n(!1),await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})},1e4))},[r]),A=a.useCallback(async()=>{clearTimeout(u.current),i&&(await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS}))},[i]);a.useEffect(()=>{if(r)return window.addEventListener("click",w),window.addEventListener("beforeunload",A),()=>{window.removeEventListener("beforeunload",A),window.removeEventListener("click",w)}},[r,w,A]);let C=async()=>{n(!1),window.removeEventListener("click",w),await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!1}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_OPT_OUT})},N=async()=>{n(!1),window.removeEventListener("click",w),await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})};return r?a.createElement("div",{className:o()(b.kL,e.variant===y.a.COMMUNITY&&[b.gC,b.Vt],e.variant===y.a.FILE_VIEWER&&b.ut,e.variant===y.a.PROTOTYPE&&b.Id,e.variant===y.a.AUTH&&[b.gC,b.Yp]),role:"region","aria-label":"Consent Manager",ref:c,"data-testid":"cookie-banner"},a.createElement("div",{className:b.rf},"This website uses cookies, pixel tags, and local storage for performance, personalization, and marketing purposes. Our use of some cookies may be considered a sale, sharing for behavioral advertising, or targeted advertising. For more, see our"," ",a.createElement(m.Yo,{rel:"noopener",target:"_blank",href:"/privacy/"},"privacy policy"),". ",a.createElement("b",null,"California Residents")," can learn how personal information is"," ",a.createElement(m.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"collected"),", including how it is"," ",a.createElement(m.Yo,{href:"/privacy/#purpose",rel:"noopener",target:"_blank"},"used"),", whether it is"," ",a.createElement(m.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"\u201Csold\u201D or \u201Cshared\u201D"),", and how long it is"," ",a.createElement(m.Yo,{href:"/privacy/#retention",rel:"noopener",target:"_blank"},"retained"),"."),a.createElement("div",{className:b.o1},a.createElement(e.SecondaryButton,{onClick:C,"data-testid":"cookie-opt-out-button"},"Opt out")),a.createElement("div",{className:b.X8},a.createElement("button",{onClick:N,type:"button","data-testid":"cookie-dismiss-button"},a.createElement(p.B,{className:b.MW,svg:e.dismissIcon})))):e.persistentMessage&&a.createElement(_.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function T(e){let r=(0,d.useAtomValue)(f.Dr),n=!1;return(r===f.S6.UNLOADED&&(n=!0),r!==f.S6.YES||e.persistentMessage||(n=!0),(0,E.V)()&&(n=!0),c.Ay().user_data?.id&&(n=!0),((0,c.Ay)().is_embed||(0,s.GZ)())&&(n=!0),u.Ay.isMeetDevice&&(n=!0),a.useEffect(()=>{!n&&u.Ay.isIpadNative&&(0,f.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||u.Ay.isIpadNative)?null:a.createElement(_.fu,{name:"Cookie Banner",properties:{consentRegion:"implicit"}},a.createElement(v,{...e,showBanner:r===f.S6.NO}))}},485876:(e,r,n)=>{n.d(r,{j:()=>u});var a=n(411855),i=n(841962),o=n(617721),s=n(738726),l=n(712465),c=n(90913),d=n(444077);let u=a.memo(function(){return"implicit"===(0,i.Ay)().consent_region?a.createElement(l.C$,{variant:c.a.PROTOTYPE,dismissIcon:d.A,SecondaryButton:e=>a.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):"explicit"===(0,i.Ay)().consent_region?a.createElement(s.ZQ,{variant:c.a.PROTOTYPE,dismissIcon:d.A,PrimaryButton:e=>a.createElement(o.$,{onClick:e.onClick,variant:"primary","data-testid":e["data-testid"]},e.children),SecondaryButton:e=>a.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):null})},773991:(e,r,n)=>{n.d(r,{$z:()=>d,Ih:()=>p,Me:()=>_,c:()=>m,e6:()=>u,lR:()=>h});var a=n(520244),i=n(351966),o=n(28819),s=n(138225),l=n(270068),c=n(140835);let d=(0,c.tf)(a.$n),u=(0,c.tf)(i.E),m=(0,c.tf)(a.WW),p=(0,c.tf)(a.IK),h=(0,c.tf)(a.Pw);(0,c.tf)(o.d);let _=(0,c.tf)(s.K);(0,c.tf)(l.f)},489803:(e,r,n)=>{n.d(r,{Ph:()=>s,pW:()=>l});var a=n(326612),i=n(344793),o=n(140835);let s=(0,o.tf)(a.N),l=(0,o.tf)(a.N.Button);(0,o.tf)(i._)},648005:(e,r,n)=>{n.d(r,{K:()=>g});var a=n(411855),i=n(463844),o=n(181611),s=n(629019),l=n.n(s),c=n(693565),d=n(265851),u=n(773991),m=n(959278),p=n(488044),h=(e=>(e[e.BUTTON=0]="BUTTON",e[e.ICON_BUTTON=1]="ICON_BUTTON",e[e.ICON_TEXT_BUTTON=2]="ICON_TEXT_BUTTON",e[e.CUSTOM=3]="CUSTOM",e[e.CUSTOM_BUTTON=4]="CUSTOM_BUTTON",e))(h||{});function _(e){switch(e.action.kind){case 0:return a.createElement(a.Fragment,null,e.action.displayText);case 1:return a.createElement(c.B,{svg:e.action.icon});case 2:return a.createElement(a.Fragment,null,a.createElement(c.B,{svg:e.action.icon,className:e.action.svgStyleClass,style:{alignSelf:"center",paddingRight:"5px"}}),a.createElement("div",null,e.action.displayText));default:return null}}function g(e){if(3===e.action.kind)return a.createElement("div",{className:l()(e.action.showOnMobile?null:p.az,e.action.hideOnDesktop?p.i0:null),key:e.action.key},e.action.element);let r="isLoading"in e.action&&!0===e.action.isLoading,n=a.createElement(u.e6,{className:l()(d.s.flex.itemsCenter.justifyCenter.$,e.action.showOnMobile?null:p.az,e.action.hideOnDesktop?p.i0:null,"styleClass"in e.action?e.action.styleClass:null,m.HM),key:e.action.key,htmlAttributes:{"data-test-id":"dataTestId"in e.action?e.action.dataTestId:void 0,"data-onboarding-key":"data-onboarding-key"in e.action?e.action["data-onboarding-key"]:void 0,"data-tooltip":"data-tooltip"in e.action?e.action["data-tooltip"]:void 0,"data-tooltip-type":"data-tooltip-type"in e.action?e.action["data-tooltip-type"]:void 0},innerText:"displayText"in e.action?e.action.displayText:void 0,onClick:"onClick"in e.action?e.action.onClick:void 0},r?a.createElement("span",{className:d.s.px4.$},a.createElement(i.k,null)):a.createElement(_,{action:e.action}));return e.action.editorThemeMode?a.createElement(o.v,{mode:e.action.editorThemeMode},n):n}},83952:(e,r,n)=>{n.d(r,{$:()=>o,W:()=>s});var a=n(411855),i=n(366172);class o{constructor(){this.singleTapTouchStartListeners={},this.singleTapTouchMoveListeners={},this.singleTapTouchEndListeners={},this.singleTapMouseDownListeners={},this.singleTapMouseUpListeners={},this.tapCallback=null,this.multiTapTouchStartListeners={},this.multiTapTouchEndListeners={},this.multiTapMouseDownListeners={},this.multiTapMouseUpListeners={},this.multiTapCallbacks={},this.multiTouchLongPressTouchStartListeners={},this.multiTouchLongPressTouchMoveListeners={},this.multiTouchLongPressTouchEndListeners={},this.multiTouchLongPressTouchCancelListeners={},this.multiTouchLongPressPointerDownListeners={},this.multiTouchLongPressPointerMoveListeners={},this.multiTouchLongPressPointerUpListeners={},this.multiTouchLongPressPointerCancelListeners={},this.multiTouchLongPressCallbacks=new Map}installTapGestureRecognizer(e,r){let n,a;this.tapCallback=r;let i=e=>{a=Date.now(),n=e},o=()=>{a=void 0,n=void 0},s=()=>{n&&a&&Date.now()-a<500&&(this.tapCallback?.(n),o())};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&i({x:e.touches[0].screenX,y:e.touches[0].screenY})},this.singleTapTouchStartListeners,1),this.replaceEventListener(e,"touchmove",e=>{if(1===e.touches.length&&n){let r=e.touches[0];this.didMoveTooMuch([{identifier:0,screenX:r.screenX,screenY:r.screenY}],{0:{screenX:n.x,screenY:n.y}},10)&&o()}else o()},this.singleTapTouchMoveListeners,1),this.replaceEventListener(e,"touchend",s,this.singleTapTouchEndListeners,1),this.replaceEventListener(e,"mousedown",e=>{i({x:e.screenX,y:e.screenY})},this.singleTapMouseDownListeners,1),this.replaceEventListener(e,"mouseup",s,this.singleTapMouseUpListeners,1)}updateTapGestureRecognizer(e,r){this.tapCallback?this.tapCallback=r:this.installTapGestureRecognizer(e,r)}uninstallTapGestureRecognizer(e){this.tapCallback&&(this.tapCallback=null,e.removeEventListener("touchstart",this.singleTapTouchStartListeners[1],!0),e.removeEventListener("touchmove",this.singleTapTouchMoveListeners[1],!0),e.removeEventListener("touchend",this.singleTapTouchEndListeners[1],!0),e.removeEventListener("mousedown",this.singleTapMouseDownListeners[1],!0),e.removeEventListener("mouseup",this.singleTapMouseUpListeners[1],!0))}numTapsInRecencyThreshold(e,r){let n=Date.now(),a=0;for(let i=e.length-1;i>=0;i--)if(Math.abs(e[i]-n)<r)a++;else break;return a}installMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]=n;let a=[],i=!1,o=()=>{let e=Date.now();if(a.push(e),i=this.numTapsInRecencyThreshold(a,500)===r.numTaps)a=[];else for(;a.length>r.numTaps;)a.shift()},s=()=>{i&&(this.multiTapCallbacks[r.numTaps]?.(),i=!1)};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&o()},this.multiTapTouchStartListeners,r.numTaps),this.replaceEventListener(e,"touchend",s,this.multiTapTouchEndListeners,r.numTaps),this.replaceEventListener(e,"mousedown",o,this.multiTapMouseDownListeners,r.numTaps),this.replaceEventListener(e,"mouseup",s,this.multiTapMouseUpListeners,r.numTaps)}updateMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]?this.multiTapCallbacks[r.numTaps]=n:this.installMultiTapGestureRecognizer(e,r,n)}installMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.set(n,r);let a=null,o=null,s=e=>{if(null==o){for(let r of(o={},e))o[r.identifier]={screenX:r.screenX,screenY:r.screenY};a=setTimeout(()=>{let r;1===e.length&&(r={x:e[0].screenX,y:e[0].screenY}),this.multiTouchLongPressCallbacks.get(n)?.(r),i.Y5&&i.Y5.cancelPendingGestures&&i.Y5.cancelPendingGestures()},500)}},l=()=>{null!=a&&(clearTimeout(a),a=null,o=null)},c=e=>{e.length===n&&o?this.didMoveTooMuch(e,o,10)&&l():l()};this.replaceEventListener(e,"touchstart",e=>{e.touches.length===n?s(e.touches):l()},this.multiTouchLongPressTouchStartListeners,n),this.replaceEventListener(e,"touchmove",e=>c(e.touches),this.multiTouchLongPressTouchMoveListeners,n),this.replaceEventListener(e,"touchend",l,this.multiTouchLongPressTouchEndListeners,n),this.replaceEventListener(e,"touchcancel",l,this.multiTouchLongPressTouchCancelListeners,n),this.replaceEventListener(e,"pointerdown",e=>{1===n&&"touch"!==e.pointerType?s([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}]):l()},this.multiTouchLongPressPointerDownListeners,n),this.replaceEventListener(e,"pointermove",e=>{"touch"!==e.pointerType&&c([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}])},this.multiTouchLongPressPointerMoveListeners,n),this.replaceEventListener(e,"pointerup",l,this.multiTouchLongPressPointerUpListeners,n),this.replaceEventListener(e,"pointercancel",l,this.multiTouchLongPressPointerCancelListeners,n)}updateMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.has(n)?this.multiTouchLongPressCallbacks.set(n,r):this.installMultiTouchLongPressGestureRecognizer(e,r,n)}uninstallMultiTouchLongPressGestureRecognizer(e,r){this.multiTouchLongPressCallbacks.has(r)&&(this.multiTouchLongPressCallbacks.delete(r),e.removeEventListener("touchstart",this.multiTouchLongPressTouchStartListeners[r],!0),e.removeEventListener("touchmove",this.multiTouchLongPressTouchMoveListeners[r],!0),e.removeEventListener("touchend",this.multiTouchLongPressTouchEndListeners[r],!0),e.removeEventListener("touchcancel",this.multiTouchLongPressTouchCancelListeners[r],!0),e.removeEventListener("pointerdown",this.multiTouchLongPressPointerDownListeners[r],!0),e.removeEventListener("pointermove",this.multiTouchLongPressPointerMoveListeners[r],!0),e.removeEventListener("pointerup",this.multiTouchLongPressPointerUpListeners[r],!0),e.removeEventListener("pointercancel",this.multiTouchLongPressPointerCancelListeners[r],!0))}replaceEventListener(e,r,n,a,i){a[i]&&e.removeEventListener(r,a[i],!0),a[i]=n,e.addEventListener(r,a[i],!0)}didMoveTooMuch(e,r,n){for(let a of e){let e=r[a.identifier];if(void 0===e||Math.hypot(e.screenX-a.screenX,e.screenY-a.screenY)>n)return!0}return!1}}let s=a.createContext(new o)},762893:(e,r,n)=>{n.d(r,{Z:()=>L});var a=n(411855),i=n(188507),o=n(101747),s=n(191846),l=n(732911),c=n(208206),d=n(816222),u=n(713134),m=n(990857),p=n(588103),h=n(190406),_=n(503147),g=n(328753),f=n(767770),E=n(747579),y=n(851169),b=n(777535),v=n(108982),T=n(841962),I=n(553362),S=n(674541),w=n(960579),A=n(441463),C=n(914587);let N={root:"visual-bell-root",button:"visual-bell-button",secondaryButton:"visual-bell-secondary-button",dismissButton:"visual-bell-dismiss-button",message:"visual-bell-message"};function L(e){let r=(0,i.wA)(),{bell:n,queueDepth:s}=(0,v.R)(e=>({bell:e.visualBell[0],queueDepth:e.visualBell.length})),l=n?.onDequeue,c=n?.onDismiss,d=(0,a.useCallback)(e=>{"dismiss"===e&&c?.(),l?.(function(e){switch(e){case"dismiss":return w.WX.DISMISS;case"timeout":return w.WX.TIMEOUT;case"action":return w.WX.ACTION_BUTTON_CLICKED}}(e)),r(I.F.dequeue({}))},[r,l,c]),u=(0,i.d4)(e=>n?.progressKey?e.progress[n.progressKey]:void 0),m=n?(0,S.zC)(n,u):null,p=n?.count?a.createElement(o.y_,null,n.count):null,[h,_]=(0,S.hB)(n||null),g=function(e,r){let n=performance.now(),i=(0,a.useMemo)(()=>n,[e]);return(0,a.useMemo)(()=>e?(0,A.L)(e,r):1/0,[e,r])-(n-i)}(n,s),f=function(e,r){let n=(0,a.useRef)(void 0),i=!!e&&!e.delay,[o,s]=(0,a.useState)(i);return((0,a.useEffect)(()=>{if(e?.delay){let n=setTimeout(()=>s(!0),e.delay);return r||e.button||b.az.trackDefinedMetric("fpl.missing_toast_message",{bellId:e?.id,bellType:e.type,description:"delay exists but no message was included",visualBellInstance:"fpl_visual_bell"}),()=>clearTimeout(n)}},[e,r]),e!==n.current)?(n.current=e,s(i),r||e?.button||b.az.trackDefinedMetric("fpl.missing_toast_message",{bellId:e?.id,bellType:e?.type,description:"Remembered bell current does not match but no message exists",visualBellInstance:"deprecated_fpl_visual_bell"}),i):o}(n,m),E=!!n?.role,y=a.createElement(o.bL,{timeout:g,onClose:d,variant:n?.error?"danger":void 0,htmlAttributes:{"data-preferred-theme":"dark","data-testid":N.root}},n?.icon&&a.createElement(R,{error:n.error,iconShape:n.iconShape,iconURL:n.iconURL,progress:u,icon:n.icon}),a.createElement(o.QB,{htmlAttributes:{"data-testid":N.message}},a.createElement("i18n-text",null,m),a.createElement("i18n-text",null,p)),h&&a.createElement(O,{bellId:n.id,"data-testid":N.button,...h}),_&&a.createElement(O,{bellId:n.id,"data-testid":N.secondaryButton,..._}),(n?.onDismiss||n?.error)&&a.createElement(o.Rz,{htmlAttributes:{"data-testid":N.dismissButton}})),C=!f||!m&&!p&&!n?.button,L=(0,T.kc)().fpl_hide_missing_alert?C:!f;return(a.useEffect(()=>{n&&!L&&b.az.trackDefinedEvent("fpl.visual_bell_shown",{bellId:n.id,bellType:n.type,bellMessage:n.messageComponentKey?n.messageComponentKey:n.i18n?`VisualBellTxMessageType.${n.i18n.id}`:n.message?n.message:"[unknown]"})},[n,L]),e.positioner)?a.createElement(e.positioner,{offscreen:L,srOnly:E,shouldRequestMobileNativeBottomOffset:!!n},y):y}function O({bellId:e,editScope:r,text:n,action:i,Initialize:s,...l}){let c=s?.(),d=(0,a.useMemo)(()=>{let n=r=>i(r,e,c);return r&&(n=y.nc.user(r,n)),n},[i,e,r,c]);return a.createElement(o.rA,{...l,action:d},n)}function R(e){return"ui3"===(0,E.DP)().version&&e.icon!==w.zX.FROM_URL?a.createElement(P,{icon:e.icon,progress:e.progress}):a.createElement(C.H,{...e})}function P({icon:e,progress:r}){switch(e){case w.zX.CHECK:return a.createElement(s.g,null);case w.zX.GREEN_CHECK:return a.createElement(l.g,{style:{"--color-icon":"var(--color-icon-success)"}});case w.zX.CHECK_WITH_CIRCLE:return a.createElement(c.W,null);case w.zX.EXCLAMATION:return a.createElement(d.r,null);case w.zX.UNDO:case w.zX.RETURN_TO_INSTANCE:return a.createElement(u.E,null);case w.zX.SPINNER:case w.zX.IMAGE_BACKED_SPINNER:return a.createElement(o.y$,null);case w.zX.PROGRESS:return a.createElement(o.ke,{progressFraction:(0,S.OT)(r)});case w.zX.FROM_URL:return a.createElement(m.w,null);case w.zX.NOTES_ON_RECTANGLE:return a.createElement(p.w,null);case w.zX.STACK_SELECTION:return a.createElement(h.v,null);case w.zX.CLOSE_FILLED:return a.createElement(_.C,{style:{"--color-icon":"var(--color-icon-danger)"}});case w.zX.EYEDROPPER:return a.createElement(g.G,null);case w.zX.BRUSH:return a.createElement(f.g,null);case w.zX.NONE:case void 0:return a.createElement(a.Fragment,null)}}},735877:(e,r,n)=>{n.d(r,{m:()=>s});var a=n(728722),i=n(977235),o=n(183739);function s(){let e=(0,a.Rs)(o.JgS,{});if("loaded"!==e.status||e.data.persistentUserNotificationBells.status!==i.tT.Loaded)return{};let r=(0,i.oA)(e.data.persistentUserNotificationBells),n={};return Object.values(r||[]).forEach(e=>{let{userId:r,notificationSpaceId:a}=e;if(r&&a){n[r]??={};let i=n[r];i&&(i[a]=!!e.bell)}}),n}n(701834)},329995:(e,r,n)=>{n(841962)},856414:(e,r,n)=>{n.d(r,{Bt:()=>l,Ke:()=>o,Ri:()=>d,UR:()=>a,fM:()=>u,gz:()=>c,kO:()=>i,t_:()=>s});let a=function(){throw Error("Cannot close window")},i=function(){throw Error("Cannot open window")},o=void 0,s=void 0,l=function(){throw Error("Cannot get file name")},c=function(){throw Error("Cannot bundle code")},d=function(){throw Error("Cannot create offscreen sandbox")},u=function(){throw Error("Cannot update files")}},409656:(e,r,n)=>{n.d(r,{qs:()=>a,ux:()=>i});let a=function(){throw Error("Cannot analyze")},i=function(){throw Error("Cannot refactor")}},806565:(e,r,n)=>{n.d(r,{Vj:()=>i,cJ:()=>o,oz:()=>a});let a=function(){return!1},i=function(){return!1},o=function(){return!1}},792985:(e,r,n)=>{n.d(r,{IU:()=>i,K8:()=>l,Kk:()=>c,bC:()=>o,jT:()=>s});var a=n(411855);let i=function(){return""},o=function(){return!1},s=function(){return{}},l=function(){return{}},c=function(){return!1};a.createContext(void 0)},329695:(e,r,n)=>{n.d(r,{E:()=>a});var a=(e=>(e.FJ_SELECTION="figjam-selection-inline-menu",e.FJ_SHARE_MODAL="figjam-share-modal",e.FJ_PAGE_MENU="figjam-page-context-menu",e.FJ_FILE_MENU="figjam-file-editor-menu",e.SLIDES_TEMPLATE="slides-template",e))(a||{})},806749:(e,r,n)=>{var a=n(697737);(0,n(401562).n)(async({fileKey:e,fileVersion:r,selectedGuids:n})=>{if(!r)throw Error("Missing file version");let i=function({fileKey:e,fileVersion:r,selectedGuids:n}){return`/api/file_proxy/file/${e}/canvas?fv=${r}${n?.length?`&nodes_to_extract=${n.join(",")}`:""}`}({fileKey:e,fileVersion:r,selectedGuids:n});return(await a.Ay.post(i,{fv:`${r}`},{responseType:"arraybuffer"})).data})},584421:(e,r,n)=>{n.d(r,{d:()=>h});var a=n(411855),i=n(250379),o=n(73041),s=n(176160),l=n(661137),c=n(15092),d=n(891720),u=n(401562),m=n(568616),p=n(42266);function h(){let e=(0,s.q5)(),r=(0,o.Em)(),n=(0,c.Pc)(),a=(0,d.R)(),i=(0,l.sZ)();if(!n||!r||!a||i?.id&&i.is_slides_disabled)return!1;let u=e?.creatorId===n.id;return!!e&&!!u}(0,u.n)(()=>{let e=h(),r=(0,p.N)(),n=(0,i.Tv)(),o=(0,m.A)();return(0,a.useMemo)(()=>!!e&&(n.length?!!o.length:r.size>0),[e,n.length,r.size,o.length])})},30057:(e,r,n)=>{n.d(r,{sO:()=>o});var a=n(188507);n(399991),n(806273),n(289765),n(580373);var i=n(24293);function o(){return(0,a.d4)(e=>(0,i.P)(e.selectedView))}},292414:(e,r,n)=>{n.d(r,{Jb:()=>p,Wj:()=>h,Xe:()=>_,_Q:()=>g});var a=n(411855),i=n(188507),o=n(805014),s=n(245459),l=n(245954),c=n(32050),d=n(427494),u=n(797187),m=n(289765);function p(){let e=(0,i.d4)(e=>e.mirror.sceneGraphSelection);return(0,a.useMemo)(()=>{let r=new Set;Object.keys(e).forEach(e=>{let n=(0,l.UN)().get(e),a=n?.containingSlideId;a&&(0,s.fn)((0,s.sH)(a))&&r.add(a)});let n=Array.from(r);return 1===n.length?n[0]:null},[e])}function h(){let e=(0,d.KH)();return(0,c.k9)(()=>{let r=(0,l.UN)();return e&&r?Object.keys(e).filter(e=>r.get(e)?.isSlideOrTemplate()??!1):[]},[e])}function _(){let e=(0,u.J2)(o.Ez5.canvasGrid().canvasGridArray).flat();return(0,m.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}function g(){let e=function(){let e=(0,u.J2)(o.Ez5.canvasGrid().canvasGridArray).flat(),r=new Set(function(){let e=(0,d.KH)();return(0,c.k9)(()=>{let r=(0,l.UN)(),n=new Set;return Object.keys(e).forEach(e=>{let a=r.get(e)?.containingSlideId;a&&n.add(a)}),Array.from(n.values())},[e])}());if(!e.length||!r.size)return[];let n=[];for(let a of e)if(r.has(a)&&(n.push(a),r.delete(a)),0===r.size)break;return n}();return(0,m.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}},42266:(e,r,n)=>{n.d(r,{N:()=>o});var a=n(805014),i=n(797187);function o(){let e=a.Ez5.slideLikeNodeObserverState();return(0,i.ut)(e?.slideLikeNodeIdsOnCanvas,new Set([]))}},55467:(e,r,n)=>{n.d(r,{p:()=>s}),n(805014),n(777535);var a=n(875877);n(972142),n(366172),n(542005),n(798361);let i=(0,a.atom)({}),o=(0,a.atomFamily)(e=>(0,a.atom)(r=>r(i)[e]??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABmCAYAAACN+dAoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABeSURBVHgB7cAxAQAAAMKg9U9tDQ8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4NyDtAAG2m4HvAAAAAElFTkSuQmCC",(r,n,a)=>{let o=r(i);n(i,{...o,[e]:a})}));function s(e){let r=o(e);return(0,a.useAtomValue)(r)}},489939:(e,r,n)=>{n.d(r,{$u:()=>_,oY:()=>h,rY:()=>p});var a=n(411855),i=n(188507),o=n(805014);n(245459),n(245954);var s=n(841962);n(875877);var l=n(76265),c=n(553362);n(616171);var d=n(797187),u=n(289765);n(237392);var m=n(331765);function p(e){return e.reduce((e,r)=>e.concat(r),[])}function h(e,r){let n=o.Ez5.singleSlideView().focusedSlideId.getCopy(),{row:a,col:i}=o.Ez5.getInsertGridCoord({x:-1/0,y:-1/0}),s=(0,m.Sz)(a,i,r,!1);if(!s)return"";o.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()&&o.Ez5.singleSlideView().focusSlideInSingleSlideView(s,!0);let l=e.get(s),c=e.get(n);return l&&c?.sourceLibraryKey&&(l.sourceLibraryKey=c.sourceLibraryKey),o.Egt.replaceSelection([s],!0),s}function _(){let e=(0,i.wA)(),{numSkippedSlides:r,numTotalSlides:n}=function(){let e=(0,d.ut)(o.Ez5?.canvasGrid().canvasGridArray,[]);return(0,u.wA)((e,r)=>r.flat().reduce(({numSkippedSlides:r,numTotalSlides:n},a)=>{let i=e.get(a);return i&&(n+=1,i.isSkippedSlide&&(r+=1)),{numSkippedSlides:r,numTotalSlides:n}},{numSkippedSlides:0,numTotalSlides:0}),e)}();return(0,a.useCallback)(a=>{let i=o.Ez5?.canvasGrid().anySymbolsInSlides();0===n?e(c.F.enqueue({message:(0,l.t)("file_permissions_modal.share_as.publish_template_slides_error_no_slides"),onDismiss:()=>{}})):r>0?e(c.F.enqueue({message:(0,l.t)("file_permissions_modal.share_as.publish_template_slides_error_skipped_slides"),onDismiss:()=>{}})):!(0,s.kc)().piper_components_v2&&i?e(c.F.enqueue({message:(0,l.t)("file_permissions_modal.share_as.publish_template_slides_error_symbol_in_slide"),onDismiss:()=>{}})):a()},[e,r,n])}},934220:(e,r,n)=>{n.d(r,{R4:()=>a,w1:()=>i,wl:()=>o});let a="slides-template-preview",i="slides-template-publish-item",o="agreed_to_slides_ai_terms"},778016:(e,r,n)=>{n.d(r,{j:()=>x});var a=n(411855),i=n(841962),o=n(875877),s=n(747484),l=n(563192),c=n(965361),d=n(901152),u=n(125682),m=n(15092),p=n(893632),h=n(610110),_=n(411856),g=n(164023),f=n(650838),E=n(414285),y=n(54924),b=n(188507),v=n(138225),T=n(113438),I=n(653798),S=n(76265),w=n(719971),A=n(926996),C=n(421023),N=n(914077),L=n(688656);function O(){let e=(0,A._6)(),r=(0,b.Pj)(),n=(0,b.wA)(),i=(0,C.U2)(e),o=a.useCallback(()=>{if(!i){(0,I.x1)("OpenInSlidesEditorButton","No fileKey found for view",{selectedView:e},{reportAsSentryError:!0});return}let a=(0,C.xS)(r.getState(),{view:"fullscreen",fileKey:i,editorType:N.nT.Slides});n(w.V3({url:a}))},[n,i,e,r]);return a.createElement(v.K,{"aria-label":(0,S.t)("viewer.menu_bar.open_in_figma_slides"),onClick:o,htmlAttributes:{"data-tooltip":(0,S.t)("viewer.menu_bar.open_in_figma_slides"),"data-tooltip-type":L.Ib.TEXT}},a.createElement(T.E,null))}var R=n(270068),P=n(17779),D=n(64210);function k({showComments:e,recordingKey:r}){let n=(0,b.wA)(),i=(0,S.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"});return a.createElement(R.f,{onChange:()=>{e?n(D.BZ()):n(D._b())},"aria-label":i,recordingKey:r,onIcon:a.createElement(P.f,null),offIcon:a.createElement(P.f,null),variant:"highlighted",checked:e,htmlAttributes:{"data-tooltip":i,"data-tooltip-type":L.Ib.TEXT,"data-testid":"prototype-header-comments-button"}})}var M=n(842010),F=n(904948);function x({file:e,fadeBehavior:r,showProgressBar:n,showComments:b,multiplayer:v,recordingKey:T,shouldShowUI:I}){let S=(0,m.iZ)(),w=(0,u.Um)(),A=a.useRef(null),C=(0,d.ck)(),N=(0,_.dH)(),L=(0,s.o4)(),R=(0,o.useAtomValue)(h.jH),P=(0,o.useAtomValue)(h.M);return a.createElement(c.j9.Consumer,null,()=>a.createElement(E.D,{fileName:e.name,headerRef:A,fadeBehavior:r,showProgressBar:n,shouldShowUI:I||"loading"===P||R,rightColumn:a.createElement(a.Fragment,null,v&&a.createElement(p.Cv,{dropdownShown:w,multiplayer:v,user:S}),a.createElement("div",{className:M.fi},(!N||C)&&a.createElement(a.Fragment,null,a.createElement("div",{className:F.LY},a.createElement(k,{showComments:b,recordingKey:l.Pt(T,"comments-button")})),a.createElement("div",{className:F.LY},a.createElement(O,null))),!L&&(0,i.kc)().prototype_preload_offline&&a.createElement(f.w,null),a.createElement("div",{className:F.LY},a.createElement(y.A,null))),a.createElement(g.o,{headerRef:A,file:e}))}))}},164023:(e,r,n)=>{n.d(r,{o:()=>_});var a=n(411855),i=n(188507),o=n(163773),s=n(931223),l=n(544920),c=n(76265),d=n(736041),u=n(661137),m=n(15092),p=n(534173),h=n(952009);function _({headerRef:e,file:r}){let n=(0,m.iZ)(),_=(0,u.sZ)(),g=(0,i.wA)(),[f,E]=a.useState((0,c.t)("viewer.menu_bar.share")),[y,b]=a.useState((0,c.t)("viewer.menu_bar.log_in"));return(0,s.wY)(e,({width:e})=>{e>970?(E((0,c.t)("viewer.menu_bar.share_presentation")),b((0,c.t)("viewer.menu_bar.log_in_or_create_account"))):(E((0,c.t)("viewer.menu_bar.share")),b((0,c.t)("viewer.menu_bar.log_in")))}),a.createElement(h.wh,{user:n,shareText:f,loginText:y,file:r,showDefaultAuthModal:()=>{g(l.Ts({origin:"prototype_header_nav",redirectUrl:o.Ay.location.pathname})),g(d.to({type:p.x,data:{}}))},sharingDisabled:_?.is_slides_disabled})}},650838:(e,r,n)=>{n.d(r,{w:()=>d});var a=n(411855),i=n(138225),o=n(865648),s=n(875877),l=n(610110),c=n(904948);function d({onPreloadStart:e}){let r=(0,s.useAtomValue)(l.M),n=(0,l.s7)(e);return"none"===r?a.createElement("div",{className:c.LY},a.createElement(i.K,{onClick:n.callback,"aria-label":n.displayText},a.createElement(o.b,null))):a.createElement(l.ez,{isSlides:!0})}},414285:(e,r,n)=>{n.d(r,{D:()=>w});var a=n(411855),i=n(188507),o=n(138225),s=n(196198),l=n(629019),c=n.n(l),d=n(952979),u=n(163773),m=n(750570),p=n(693565),h=n(24414),_=n(76265),g=n(225371),f=n(758121),E=n(952122),y=n(688656),b=n(411856),v=n(842010),T=n(904948),I=n(748292);let S=(0,f.ck)();function w({fileName:e,headerRef:r,showProgressBar:n,fadeBehavior:o,disableHeaderFade:s,shouldShowUI:l,hideTopLeftIcon:d,headerClassName:u,leftColumn:m,rightColumn:p}){let f=(0,i.wA)(),y=(0,b.dH)(),I=e=>{e.preventDefault(),f((0,E._P)({name:"Prototype Logo Clicked"})),f((0,g.eH)())};return n?a.createElement("div",{className:v.uH},!d&&a.createElement(A,{onClick:I})):a.createElement(h.S.div,{className:c()(v.wx,u,{[v.Wc]:!l&&!s}),ref:r,role:"region","aria-label":(0,_.t)("viewer.menu_bar.accessible_label"),onBlurCapture:o?.handleHeaderOrFooterBlur,onFocusCapture:o?.handleHeaderOrFooterFocus,onMouseMove:o?.handleHeaderOrFooterMove,onMouseDown:e=>{e.stopPropagation()}},a.createElement("div",{className:v.Cd},!d&&a.createElement(A,{onClick:I}),(!y||S)&&a.createElement("h1",{className:c()(d?T.Y_:T.DD),dir:"auto"},e),m),a.createElement("div",{className:v.SP}),a.createElement("div",{className:c()(v.DK,T.DK)},p))}function A({onClick:e}){return d.GZ()&&!S&&null==(0,m.qg)(u.Ay.location.search).fullscreen?a.createElement("a",{"aria-label":(0,_.t)("proto.file_browser"),href:"/",onClick:e,className:v.m_},a.createElement(p.B,{svg:I.A})):a.createElement("div",{className:c()(T.LY,v.kT)},a.createElement(o.K,{onClick:e,"aria-label":(0,_.t)("proto.file_browser"),htmlAttributes:{"data-tooltip":(0,_.t)("proto.file_browser"),"data-tooltip-type":y.Ib.TEXT}},a.createElement(s.m,null)))}},54924:(e,r,n)=>{n.d(r,{A:()=>h});var a=n(411855),i=n(188507),o=n(138225),s=n(65879),l=n(561080),c=n(952979),d=n(746643),u=n(76265),m=n(8766),p=n(688656);function h(){let e;let r=(0,i.wA)(),n=(0,i.d4)(e=>e.appWindow.inFullScreenMode),h=c.R7.fullscreen?()=>{r((0,m._M)())}:d.lQ,_=c.R7.fullscreen;return e=_?n?(0,u.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),a.createElement(o.K,{"aria-label":e,onClick:h,disabled:!_,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":p.Ib.TEXT}},n?a.createElement(s.p,null):a.createElement(l.O,null))}},613240:(e,r,n)=>{n.d(r,{CK:()=>T,NQ:()=>v,PG:()=>w,Vz:()=>S,o9:()=>A,rR:()=>I});var a=n(411855),i=n(188507),o=n(903570),s=n(805014),l=n(851169),c=n(230208),d=n(841962),u=n(875877),m=n(524940),p=n(366172),h=n(923219),_=n(357614),g=n(965636);n(515662);var f=n(427494),E=n(756044);n(957042),n(391107);var y=n(642870),b=n(192773);function v(e){return{type:"SOLID",color:{...e,a:1},opacity:e.a,blendMode:"NORMAL"}}function T(){let[e]=(0,g.lJ)("imageOverlayPaint");return a.useCallback((r,n)=>{_.Tm.clearCache();let a=[r];e&&(0,h.hS)(e)&&a.push(e),p.Y5.updateSelectionProperties({fillPaints:a},{shouldCommit:n})},[e])}function I(e){let r=(0,u.useAtomValue)(b.E_);return a.useCallback((n,a)=>{r&&n.color?l.l7.user("slides-edit-theme-color",()=>S(r.varId,r.modeId,n)):e(n,a)},[r,e])}function S(e,r,n){s.CWU.setVariableValueForMode(e,r,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:{...n.color,a:n.opacity??1}})}function w(e){let r=(0,i.wA)(),n=(0,u.useAtomValue)(b.E_);return a.useCallback(async a=>{let i=await r((0,m.Oe)(a)),c=o.sD.fromString(i);c&&(n?l.l7.user("slides-edit-theme-color",()=>{(0,d.kc)().piper_theme_variable_alias?s.CWU.setVariableValueForMode(n.varId,n.modeId,(0,y.y$)(s.rXF.COLOR,i)):s.Ez5.slideThemeLibBindings().setThemeColorVariableFromSubscribedVariableColorValue(n?.varId||"",n?.modeId||"",i)}):e({type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL",colorVar:{value:{alias:o.sD.toKiwi(c)},dataType:"ALIAS",resolvedDataType:"COLOR"}},E.zk.YES))},[r,n,e])}function A(e,r){let n=(0,i.wA)(),o=(0,u.useAtomValue)(b.E_),s=(0,f.eY)();return a.useCallback((a,i)=>{o?n((0,m.nh)({style:a,callback:e=>{let n=s.get(e),a=(0,c.AW)(n?.fills);a&&r&&l.l7.user("slides-edit-theme-color",()=>r(o.varId||"",o.modeId||"",v(a)))}})):n(m.AV({style:a,inheritStyleKeyField:e,fromSearch:i?.fromSearch}))},[n,o,e,s,r])}n(656771),n(580373)},928289:(e,r,n)=>{n.d(r,{qm:()=>h});var a=n(411855);n(188507);var i=n(351966);n(805014),n(851169),n(245459);var o=n(629019),s=n.n(o);n(230208);var l=n(841962);n(875877);var c=n(563192),d=n(399991);n(62791),n(453956),n(132939);var u=n(265851);n(76265),n(225371),n(475824),n(1518),n(923219),n(125682);var m=n(688656);n(143364),n(991944),n(192773),n(656771),n(580373),n(613240),n(786669);var p=n(788954);(0,l.ck)("bdf32fe13fe9a9be5b40c3de4a18572f14c9a1eb");function h({backgroundString:e,opacity:r,tooltipText:n,tooltipSubtext:o,onClick:l,onContextMenu:h,isSelected:_,editIcon:g,showEditIcon:f,isEditing:E,onClickEdit:y,recordingKey:b}){let v=(0,c.rf)(b,"contextmenu",e=>{h&&h(e)});return a.createElement("div",{className:s()(p.k8,{[p.wH]:_}),"data-tooltip-type":m.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":n,"data-tooltip-subtext":o,"data-tooltip-text-inline":!0,"data-testid":b},g&&f&&y&&a.createElement(i.E,{className:s()(p.Lq,{[p.Sn]:E,[p.Qo]:(0,d.nl)()}),onClick:e=>{if((0,d.nl)())y();else{let r=e.currentTarget.getBoundingClientRect(),n=r.width/2,a=r.left+n,i=r.top+n;Math.pow(e.clientX-a,2)+Math.pow(e.clientY-i,2)<=n*n&&y()}},recordingKey:c.Pt(b,"edit")},g),a.createElement(i.E,{htmlAttributes:{onContextMenu:v},onClick:l,className:u.s.w24.h24.relative.$,recordingKey:b},a.createElement("div",{className:p.Le,style:{background:e}}),a.createElement("div",{className:p.f$,style:{opacity:void 0!==r?1-r:0}})))}},786669:(e,r,n)=>{n.d(r,{Ph:()=>ea,jP:()=>X});var a=n(411855),i=n(188507),o=n(138225),s=n(888624),l=n(351966),c=n(679535),d=n(327132),u=n(22562),m=n(805014),p=n(851169);n(908588);var h=n(629019),_=n.n(h),g=n(527431),f=n(841962),E=n(875877),y=n(746643),b=n(563192),v=n(453956),T=n(250392),I=n(265851),S=n(76265),w=n(366172),A=n(541302),C=n(509343),N=n(357614),L=n(965636),O=n(515662),R=n(125682),P=n(427494),D=n(710443),k=n(957020),M=n(756044),F=n(688656),x=n(141604),U=n(171710),B=n(422883),V=n(320967),G=n(809327),H=n(572278),W=n(675097),K=n(742995),Y=n(991944),$=n(613240),j=n(192773),z=n(656771),q=n(580373),Z=n(788954);let X=U.qo,J={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var Q=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(Q||{});function ee(){return a.createElement(o.K,{actionOnPointerDown:!0,onClick:m.t2E?.rotateGradient90Degrees,"aria-label":(0,S.t)("fullscreen.properties_panel.gradient_picker.rotate_90"),htmlAttributes:{"data-tooltip":(0,S.t)("fullscreen.properties_panel.gradient_picker.rotate_90"),"data-tooltip-type":F.Ib.TEXT}},a.createElement(c.R,null))}function et({editVar:e}){let r=a.useCallback(()=>p.l7.user("slides-delete-theme-color",()=>{e&&m.CWU?.deleteVariable(e.varId)}),[e]);return e?a.createElement(o.K,{onClick:r,"aria-label":(0,S.t)("slides.properties_panel.color_picker.delete_template_color")},a.createElement(d.i,null)):null}function er({title:e,editVar:r,closeButton:n}){return a.createElement("div",{className:I.s.bSolid.bb1.colorBorder.$},a.createElement("div",{className:I.s.flex.justifyBetween.itemsCenter.pl16.pr8.pb8.pt8.$},a.createElement("p",{className:I.s.textBodyMediumStrong.$},e),a.createElement("div",{className:I.s.flex.gap8.$},a.createElement(et,{editVar:r}),n)))}function en({paint:e,onChange:r}){let n=(0,N.bn)(e.type),i=(0,N.x$)(e);return n&&i?a.createElement("div",{className:I.s.flex.pl8.$},a.createElement(ee,null),a.createElement(V.n,{gradientPaint:i,onChange:r})):null}function ea({paint:e,onChange:r,onClose:n,initialPosition:l,enableGradients:c,hideCustomColorPickerFillTypeToggle:d,inheritStyleKeyField:p}){let h=(0,$.PG)(r),_=(0,$.o9)(p,$.Vz),g=["custom_color","library"],[T,I,A]=s.t.useTabs({custom_color:g.includes("custom_color"),library:g.includes("library")},{defaultActive:()=>"custom_color"}),C=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),O=(0,L.kl)("numSelectedByType"),R=a.useMemo(()=>{if(O)return(0,K.aZ)(m.rrT.FILL,O)},[O]),P=(0,q.$)(),D=(0,z.UZ)(P),k=(0,E.useAtomValue)(j.E_),M=(0,B.DB)(),F=a.useMemo(()=>{if((0,f.kc)().piper_theme_variable_alias){if(!k)return(0,H.L)(e);{let e=ec(k.varId)?.modeValues[D];if(e&&e.type===m.Z_n.ALIAS)return ec(e.value)}}return null},[k,e,D]),x=a.useMemo(()=>new Set,[]),U=a.useCallback(()=>{C===m.m1T.GRADIENT&&w.Y5.triggerAction("leave-edit-mode"),n()},[C,n]),V="slidesCustomColorPicker",G=a.createElement(o.K,{onClick:U,recordingKey:b.Pt(V,"colorPickerModalHeader","closeButton"),"aria-label":(0,S.t)("common.close")},a.createElement(u.A,null)),Z=(0,N.bn)(e.type),J=!!(k||Z&&M),Q=k?(0,S.t)("slides.properties_panel.text_style.edit_template_color"):Z?(0,S.t)("slides.properties_panel.fill.fill_type_gradient"):null;return a.createElement(v.k,{name:"slides_custom_color_picker"},a.createElement(Y.vx,{initialPosition:l,onClose:U,initialWidth:X,recordingKey:V},a.createElement(ei,{tabManager:A,tabProps:T,actionButtons:a.createElement(en,{paint:e,onChange:r}),showNewUI:M,showTitleHeader:J,titleHeader:a.createElement(er,{title:Q,editVar:k,closeButton:G}),closeButton:G}),a.createElement(s.t.TabPanel,{...I.custom_color},a.createElement(eo,{paint:e,onPaintChange:r,enableGradients:c,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:d})),a.createElement(s.t.TabPanel,{...I.library},a.createElement(W.Rp,{selectedItem:F,resolvedType:m.rXF.COLOR,disabledVariableIds:x,pickerType:"color-picker",recordingKey:b.Pt("slidesCustomColorPicker","libraryColors"),onVariableSelected:h,onStyleSelected:_,onClose:y.lQ,variableScopes:R})),a.createElement(el,{recordingKey:b.Pt(V,"rename")})))}function ei({tabManager:e,tabProps:r,actionButtons:n,closeButton:i,showNewUI:o,showTitleHeader:l,titleHeader:c}){return a.createElement("div",{className:_()({[I.s.bSolid.bb1.colorBorder.$]:o})},l&&c,a.createElement("div",{className:I.s.flex.justifyBetween.p8.$},a.createElement(s.t.TabStrip,{manager:e},a.createElement(s.t.Tab,{...r.custom_color},(0,S.tx)("fullscreen.properties_panel.color_picker.custom")),a.createElement(s.t.Tab,{...r.library},(0,S.tx)("fullscreen.properties_panel.color_picker.libraries"))),l&&n,!l&&i),!l&&a.createElement("div",{className:"xv42yna x1kgkb76 x1y1aw1k xwib8y2"},n))}function eo({paint:e,onPaintChange:r,enableGradients:n,recordingKey:o,hideCustomColorPickerFillTypeToggle:s}){let l=(0,i.wA)(),c=(0,R.Um)(),d=(0,P.dH)(),u=(0,A.Ep)(),p=(0,g.C)(),h=(0,C.Ku)(),_=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),f=a.useRef(null),[E,y]=a.useState((0,N.bn)(e.type)?1:0),b=(0,N.Ou)(e),v=(0,N.x$)(e),T=(0,P.p8)("currentSelectedGradientStop"),I=(0,N.iC)(b||v||J,T),S=n=>{e.type!==n&&r(N.Tm.initPaint(n,J.color,e,"slides-custom-color-picker"),!(0,N.bn)(e.type)&&(0,N.bn)(n)?M.zk.NO:M.zk.YES)};return a.createElement(a.Fragment,null,!s&&n&&a.createElement(es,{panelType:E,onPanelTypeChange:e=>{E!==e&&(S(0===e?"SOLID":"GRADIENT_LINEAR"),y(e),1===e?w.Y5.triggerAction("toggle-gradient-edit-mode"):_===m.m1T.GRADIENT&&w.Y5.triggerAction("leave-edit-mode"))},recordingKey:o}),n&&1===E&&v&&a.createElement(x.vL,{name:"Slides color picker",ref:f,handleKeyDown:e=>{v&&(0,B.T_)(e,v,_,T,r)},focusOnMount:!0,forceUpdate:p},a.createElement("div",{className:Z.Xr},a.createElement(G.i,{paint:v,onChange:r,currentSelectedGradientStop:T,colorProfile:u,hasFocus:!!f.current&&f.current.hasFocus(),dispatch:l,recordingKey:o}))),a.createElement(U.S7,{color:I,colorFormat:h,onColorChange:(n,a)=>{(0,B.n8)(n,e,T,r,a)},dropperDisabled:!1,displayType:U.sX.FULL,currentTool:d,dispatch:l,dropdownShown:c,recordingKey:o,canAcceptStyles:!1,canAcceptVariables:!1}))}function es({panelType:e,onPanelTypeChange:r,recordingKey:n}){let i=[{type:0,label:(0,S.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,S.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return a.createElement("div",{className:I.s.wFull.py8.bb1.bSolid.colorBorder.$},a.createElement("div",{className:Z.X9},i.map(({type:i,label:o,optionRecordingKey:s})=>a.createElement(l.E,{key:i,className:e===i?Z.wH:void 0,onClick:()=>r(i),recordingKey:b.Pt(n,s)},o))))}function el({recordingKey:e}){let r=(0,E.useAtomValue)(j.E_),n=(0,O.tZ)(r?.varId),[i,o]=a.useState(n??"");a.useEffect(()=>{o(n??"")},[n]);let s=a.useRef(null),l=a.useCallback(()=>{m.CWU.renameVariable(r?.varId??"",(0,D.rh)(i))},[r,i]);return r?a.createElement("div",{className:I.s.px16.py12.flex.itemsCenter.bt1.bSolid.colorBorder.$},a.createElement("span",{className:I.s.colorTextSecondary.textBodyMedium.w64.$},(0,S.tx)("slides.properties_panel.color_picker.rename_color_label")),a.createElement(T.L,{className:Z.Kv,name:"variableName",ref:s,value:i,onChange:e=>{o(e.target.value)},onBlur:p.nc.user("slides-rename-theme-color",l),onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&s.current?.blur()},placeholder:(0,S.t)("slides.properties_panel.color_picker.rename_color_placeholder"),delay:50,"data-1p-ignore":!0,recordingKey:e})):null}function ec(e){let r=m.CWU.getLocalVariableInfo(e);if(r)return(0,k.kz)(r);let n=m.CWU.getSubscribedVariableInfo(e);return n?(0,k.ZI)(n):null}},814264:(e,r,n)=>{n.d(r,{i:()=>c});var a=n(411855);n(879058);var i=n(269685);n(805014),n(851169),n(245459);var o=n(230208),s=n(475824),l=n(758133);function c(){let e=(0,l.yM)().colorText;return a.useMemo(()=>{if(e){let r=s.F.parse(e);if(r.a>0)return(0,i.oU)(r)}return(0,i.oU)(o.Uv)},[e])}n(505105)},331765:(e,r,n)=>{n.d(r,{Sz:()=>l});var a=n(805014),i=n(245459);n(245954);var o=n(875877),s=n(450771);function l(e,r,n,c=!0){let d=a.AlE?.getMutableActiveDocument();if(!d)return console.error("slide deck utils","No active document"),null;let u=o.atomStore.get(s.BT),m=u[e]?.[r-1]||u[e-1]?.[(u[e-1]?.length||0)-1]||u[e+1]?.[0]||u[e]?.[0]||u[0]?.[0],p=(0,i.fn)((0,i.sH)(m))?a.glU.duplicateAsBlankSlide(d,m,e,r,n):a.eLE.createSlideAtCoord(d,e,r,n);return c&&a.Ez5.commit(),setTimeout(()=>{a.Ez5.singleSlideView().isSingleSlideViewEnabled()||a.Ez5.singleSlideView().panToSlideIfOutsideViewport(p,.6)},0),p}},45531:(e,r,n)=>{n.d(r,{Ei:()=>s,F4:()=>d,Jw:()=>y,Md:()=>p,UM:()=>E,Vf:()=>o,_g:()=>g,bY:()=>l,cZ:()=>f,q7:()=>v});var a=n(875877),i=n(473982),o=(e=>(e.ALL="ALL",e.ORG="ORG",e.TEMPLATE="TEMPLATE",e.HUB_FILE="HUB_FILE",e.FILE_PICKER="FILE_PICKER",e.TEMPLATE_PICKER="TEMPLATE_PICKER",e.TEAM="TEAM",e))(o||{});let s=(0,i.Wh)(()=>(0,a.atom)(!1));(0,i.Wh)(()=>(0,a.atom)(!1));let l=(0,a.atom)({type:"ALL"});(0,a.atom)("");let c=(0,a.atom)({});(0,a.atom)(e=>e(c),(e,r,n,a)=>{r(c,e=>({...e,[n]:a}))}),(0,a.atom)(null,(e,r)=>{r(c,{})}),(0,a.atom)(0);var d=(e=>(e.PUBLISH_HUB_FILE_INITIATED="PUBLISH_HUB_FILE_INITIATED",e.PUBLISH_HUB_FILE_COMPLETED="PUBLISH_HUB_FILE_COMPLETED",e.PUBLISH_HUB_FILE_ERRORED="PUBLISH_HUB_FILE_ERRORED",e.PUBLISH_TEMPLATE_INITIATED="PUBLISH_TEMPLATE_INITIATED",e.PUBLISH_TEMPLATE_COMPLETED="PUBLISH_TEMPLATE_COMPLETED",e.PUBLISH_TEMPLATE_ERRORED="PUBLISH_TEMPLATE_ERRORED",e.UNPUBLISH_TEMPLATE_INITIATED="UNPUBLISH_TEMPLATE_INITIATED",e.UNPUBLISH_HUB_FILE_INITIATED="UNPUBLISH_HUB_FILE_INITIATED",e.UNPUBLISH_COMPLETED="UNPUBLISH_COMPLETED",e.UNPUBLISH_TEMPLATE_ERRORED="UNPUBLISH_ERRORED",e.CLEARED="CLEARED",e))(d||{});let u=["PUBLISH_HUB_FILE_INITIATED","PUBLISH_TEMPLATE_INITIATED","UNPUBLISH_TEMPLATE_INITIATED","UNPUBLISH_HUB_FILE_INITIATED"],m=[...u,"CLEARED"];function p(e){return u.includes(e)}let h={CLEARED:u,PUBLISH_TEMPLATE_INITIATED:["PUBLISH_TEMPLATE_COMPLETED","PUBLISH_TEMPLATE_ERRORED"],PUBLISH_TEMPLATE_COMPLETED:m,PUBLISH_TEMPLATE_ERRORED:m,UNPUBLISH_TEMPLATE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_HUB_FILE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_COMPLETED:m,UNPUBLISH_ERRORED:m,PUBLISH_HUB_FILE_INITIATED:["PUBLISH_HUB_FILE_COMPLETED","PUBLISH_HUB_FILE_ERRORED"],PUBLISH_HUB_FILE_COMPLETED:m,PUBLISH_HUB_FILE_ERRORED:m},_=(0,a.atom)({state:"CLEARED"}),g=(0,a.atom)(e=>e(_).state),f=(0,a.atom)(e=>{let r=e(_);return"PUBLISH_TEMPLATE_INITIATED"===r.state?r.request:null}),E=(0,a.atom)(null,(e,r,n)=>{let a=e(g),{state:i}=n;if(h[a].includes(i))r(_,n);else throw Error(`Invalid state transition from ${a} to ${i}. Please check the state transition logic.`)});function y(e){switch(e){case"PUBLISH_TEMPLATE_ERRORED":case"PUBLISH_TEMPLATE_INITIATED":return"Slides Team Template Publish";case"UNPUBLISH_TEMPLATE_INITIATED":case"UNPUBLISH_ERRORED":return"Slides Team Template Unpublish";case"PUBLISH_HUB_FILE_ERRORED":case"PUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Publish";case"UNPUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Unpublish";default:return e}}(0,a.atom)(null,(e,r)=>r(_,{state:"CLEARED"}));var b=(e=>(e.ALL="ALL",e.SINGLE="SINGLE",e.NONE="NONE",e))(b||{});(0,i.Wh)(()=>(0,a.atom)(null)),(0,i.Wh)(()=>(0,a.atom)(null)),(0,i.Wh)(()=>(0,a.atom)({type:"NONE"})),(0,i.Wh)(()=>(0,a.atom)(""));let v=(0,i.Wh)(()=>(0,a.atom)(!1))},450576:(e,r,n)=>{n.d(r,{l:()=>a});let a=8},154013:(e,r,n)=>{var a=n(314540),i=n(841924),o=n(492366),s=n(249099),l=n(544950),c=n(450576);i.M4.Query({fetch:async e=>await s.A.getCommunityShelves({shelfType:o.cS.PIPER_TEMPLATE_MODAL}).then(e=>e.data.meta)}),i.M4.Query({fetch:async e=>await s.A.getCommunityShelfById({categoryId:e}).then(e=>{if(e.data.meta.length>0)return e.data.meta[0]})}),i.M4.Query({fetch:async e=>e?await l.q.getSearchPaginated({orgId:e,size:c.l,from:0,templateType:a._Y.SLIDES}).then(e=>e.data.meta.templates):[]})},969425:(e,r,n)=>{n.d(r,{Jv:()=>u,YW:()=>d});var a=n(411855);n(188507),n(217950),n(805014),n(851169),n(245954),n(3794),n(609628),n(841962),n(875877),n(736942),n(653798),n(399991);var i=n(650981);n(730676),n(196794),n(524940),n(628220),n(45362),n(190500),n(366172),n(176160),n(661137),n(178380),n(314540),n(841924),n(354465),n(289765);var o=n(484930);n(662750),n(492366),n(567095),n(2019),n(165811),n(523848),n(161857);var s=n(544950);n(775338),n(30057),n(45531),n(154013);(0,i.fv)(),new o.CN({keys:["name"],ignoreLocation:!0});var l=(e=>(e[e.LOADING=0]="LOADING",e[e.NO_RECENT_FILES=1]="NO_RECENT_FILES",e[e.NO_QUERY_RESULTS=2]="NO_QUERY_RESULTS",e[e.SUCCESS=3]="SUCCESS",e))(l||{}),c=(e=>(e.OVERLAY_MODAL="OVERLAY_MODAL",e.PICKER="PICKER",e.BOARD_TO_DECK="BOARD_TO_DECK",e))(c||{});async function d(e){return!!e&&!e.parentOrgId&&!!e.teamId&&!!e.editorType&&(await s.q.getTeamTemplateLimitReached({teamId:e.teamId,editorType:e.editorType})).data.meta.template_limit_reached}async function u(e){return!!e&&!e.parent_org_id&&!!e.team_id&&!!e.editor_type&&(await s.q.getTeamTemplateLimitReached({teamId:e.team_id,editorType:e.editor_type})).data.meta.template_limit_reached}a.createContext(null)},192773:(e,r,n)=>{n.d(r,{Dh:()=>d,Dq:()=>l,E_:()=>u,TN:()=>s,i1:()=>c});var a=n(875877),i=n(473982),o=n(263885);let s=(0,o.hR)([],{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}),l=(0,o.hR)({},{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}),c=(0,a.atomFamily)(e=>(0,o.hR)({id:e,data:null},{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}));function d(e){let r=c(e);return a.atomStore.get(r).data}(0,i.Wh)(()=>(0,a.withEqualityCheckedSet)((0,a.atom)({})));let u=(0,i.Wh)(()=>(0,a.atom)(null))},656771:(e,r,n)=>{n.d(r,{UZ:()=>T,Xo:()=>b,k1:()=>S,kO:()=>E,lK:()=>I});var a=n(411855),i=n(236891),o=n(903570),s=n(805014),l=n(245459);n(230208);var c=n(841962),d=n(875877),u=n(357272),m=n(927150),p=n(827473);n(151566);var h=n(671917),_=n(689181),g=n(438934),f=n(192773);function E(e){let r=(0,f.i1)(e),{data:n}=(0,d.useAtomValue)(r);return!n}let y=(0,m.bt)(e=>e.library.local.styles);function b(e){let r=(0,d.useAtomValue)(y),n=(0,f.i1)(e),{data:i}=(0,d.useAtomValue)(n);return a.useMemo(()=>{if(!e)return[];if(!(0,g.X_)(e))return console.warn("Expected local theme",e),[];if(!i)return console.warn("Theme no longer exists in the theme map",e),[];let n=new Set(i?.styleGUIDs||[]);return n.size>0?(0,p.ti)(r,"TEXT").filter(e=>n.has(e.node_id)).sort((e,r)=>(0,u.Ez)(r.sort_position||"",e.sort_position||"")):[]},[e,i,r])}function v(e){let r=(0,d.useAtomValue)(h.Cg),n=(0,f.i1)(e),{data:a}=(0,d.useAtomValue)(n);return e?(0,g.X_)(e)?a?(a.variableIDs||[]).map(e=>r[e])||[]:(console.warn("Theme no longer exists in the theme map",e),[]):(console.warn("Expected local theme",e),[]):[]}function T(e){let r=(0,f.i1)(e),{data:n}=(0,d.useAtomValue)(r),i=n?.variableSetID||"";return a.useMemo(()=>o.gr.isValid(i)?s.CWU.getVariableSetDefaultMode(i):"",[i])}function I(e){let r=function(e){let r=v(e);return(0,a.useMemo)(()=>{let n=s.Ez5.slideThemeLibBindings().getBlackColorVariableId(e),a=s.Ez5.slideThemeLibBindings().getWhiteColorVariableId(e);return r.filter(e=>e&&e.resolvedType===s.rXF.COLOR).sort((e,r)=>{for(let i of[n,a]){if(e.node_id===i)return -1;if(r.node_id===i)return 1}return e.sortPosition<r.sortPosition?-1:1}).map(e=>e.node_id)},[e,r])}(e),n=T(e),o=(0,g.X_)(e);return r.map(e=>{if(!e||0===e.length)return;let r=o?s.CWU.getLocalVariableInfo(e):s.CWU.getSubscribedVariableInfo(e);if(r&&r.modeValues){let a=function(e,r){let n=e.modeValues[r];if(!n||n.resolvedType!==s.rXF.COLOR)return null;if(n.type===s.Z_n.COLOR)return n.value;if(n.type===s.Z_n.ALIAS&&(0,c.kc)().piper_theme_variable_alias){let r=s.CWU.getVariableResolvedValue(e.id,new Map);if(r)return r.value}return null}(r,n);if(a){let i={color:a,colorVar:{dataType:"ALIAS",resolvedDataType:"COLOR",value:{alias:{guid:(0,l.sH)(e.replace("VariableID:",""))||void 0}}}};return{variableId:e,variableName:r.name,variableType:r.modeValues[n].type,paint:i}}}}).filter(i.Vq)}function S(e){let r=(0,f.i1)(e),{data:n}=(0,d.useAtomValue)(r),i=n?.variableSetID||"",o=T(e),l=v(e),c=(0,_.ay)();return(0,a.useCallback)(e=>{if(i){let r=c(i,l,s.rXF.COLOR,"",s.HS4.SLIDES_THEME);return r&&s.CWU.setVariableValueForMode(r,o,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:e}),r}return null},[c,i,o,l])}},580373:(e,r,n)=>{n.d(r,{$:()=>s});var a=n(923219),i=n(965636),o=n(289765);function s(){let[e]=(0,i.lJ)("themeId"),r=(0,o.Fk)(e=>e.getRoot().slideThemeId);return e&&(0,a.hS)(e)?e:r}},438934:(e,r,n)=>{function a(e){return e.length>0&&!e.includes("/")}function i(e){return"TEXT"===e||"GRID"===e}n.d(r,{Rc:()=>i,X_:()=>a})},247480:(e,r,n)=>{n.d(r,{PF:()=>f,fx:()=>E}),n(411855);var a=n(805014),i=n(245954),o=n(885123),s=n(875877),l=n(653798);n(677840),n(76265);var c=n(837982);n(553362),n(960579);var d=n(61707),u=n(365347);n(176160);var m=n(314540),p=n(689102),h=n(505534);n(806749),n(237392),n(30057);var _=n(568616),g=n(543338);function f(e,r){!function(e,r){let n=s.atomStore.get(p.Me),a=o.D.getState(),i=(0,u.Kl)(a);e(d.zE({state:i,from:h.f6.DESIGN_TO_SLIDES_ENTRYPOINT,editorType:m._Y.SLIDES,team:n,openNewFileIn:h.ai.NEW_TAB,slidesNewFileData:r}))}(e,{localStorageKey:r})}function E(e,r,n=!1){return new Promise((o,s)=>{let d;if(null===r||null===e){(0,l.x1)("storeFigmaContentForSlidesCreation","No openFile or file version",{fileKey:e?.key,fileVersion:r},{reportAsSentryError:!0}),s();return}let u=(0,c.MZ)(),m=(0,i.UN)(),p=m.getDirectlySelectedNodes();d=n&&p.length?m.getDirectlySelectedNodes().filter(e=>(0,_.o)(e)).map(e=>e.guid):[...a.Ez5.slideLikeNodeObserverState().slideLikeNodeIdsOnCanvas.getCopy()];try{(0,g.JR)(u,{fileKey:e.key,fileVersion:r,pageGuid:m.getCurrentPage()?.guid,selectedNodeIds:d}),o(u)}catch(n){(0,l.x1)("storeFigmaContentForSlidesCreation","Failed to serialize and store sceneGraph data into local storage",{fileKey:e.key,fileVersion:r},{reportAsSentryError:!0}),s()}})}},432411:(e,r,n)=>{n.d(r,{KL:()=>a,Z3:()=>p});var a,i=n(411855),o=n(236891),s=n(805014),l=n(32050),c=n(427494),d=n(289765),u=n(656771),m=n(657600);function p({themeId:e,styleId:r,options:n,onPreviewGenerated:a}){let p=function(e){let r=(0,d.Fk)((e,r)=>{let n;let a=e.get(r);if(!a)return;let i=a.fontSize,o=a.lineHeightOrMixed;if("mixed"===o)n=i;else switch(o.units){case"RAW":n=i*o.value;break;case"PIXELS":n=o.value;break;case"PERCENT":n=i*o.value/100}return{name:a.name,fontFamily:a.fontName.family,fontStyle:a.fontName.style,fontSize:i,lineHeight:n}},e);return(0,l.k9)(()=>r,[r])}(r);!function({themeId:e,styleId:r,styleMetadata:n,options:a,onPreviewGenerated:l}){let d=function({themeId:e,minPreviewHeight:r,maxPreviewHeight:n,defaultPreviewHeight:a}){let s=function(e){let r=(0,u.Xo)(e),n=(0,c.eY)();return i.useMemo(()=>{let e=r.map(e=>n.get(e.node_id)?.fontSize).filter(o.Vq);if(e.length)return{min:Math.min(...e),max:Math.max(...e)}},[r,n])}(e);return i.useMemo(()=>{if(!s)return new class{getPreviewHeight(e){return a}};let{min:e,max:i}=s;return new class{getPreviewHeight(o){let s=function(e,r,n,a,i){if(!(e<r)&&!(e>n)&&!(a>=i)&&!(r>=n))return(e-r)/(n-r)*(i-a)+a}(o,e,i,r,n);return s?Math.round(s):a}}},[s,r,n,a])}({themeId:e,minPreviewHeight:a.minHeight,maxPreviewHeight:a.maxHeight,defaultPreviewHeight:Math.round((a.minHeight+a.maxHeight)/2)}),{fontsAreLoading:p,checkFontsAreLoading:h}=(0,m.B)();i.useEffect(()=>{h()},[n,h]),i.useEffect(()=>{if(p)return;if(!n||!s.vXe.fontIsLoaded(n.fontFamily,n.fontStyle)){l(null);return}let e=d.getPreviewHeight(n.fontSize),i=n.name;a.maxWidth&&(i=s.glU.truncateText(n.fontFamily,e,n.lineHeight*(e/n.fontSize),a.maxWidth,1,i));let o=s.Ez5.slideThemeStylePreview().generateTextPreview(r,i,a.color,n.fontFamily,n.fontStyle);if(!o){l(null);return}l({preview:o,previewHeight:e})},[p,r,n,a,d,l])}({themeId:e,styleId:r,styleMetadata:p,options:n,onPreviewGenerated:a})}(e=>{e.MIN_THEME_TEXT_STYLE_PREVIEW_HEIGHT=12,e.MAX_THEME_TEXT_STYLE_PREVIEW_HEIGHT=22})(a||(a={}))},694e3:(e,r,n)=>{n.d(r,{DG:()=>M,Kc:()=>R,OQ:()=>P,Zp:()=>L,dy:()=>k,in:()=>x,rS:()=>D});var a=n(411855),i=n(188507),o=n(841563),s=n.n(o),l=n(777535),c=n(977235),d=n(597079),u=n(7842),m=n(206908),p=n(719971),h=n(413645),_=n(619560),g=n(662310),f=n(785893),E=n(427494),y=n(69441),b=n(314540),v=n(841924),T=n(940795),I=n(269049),S=n(509732),w=n(804197),A=n(422417),C=n(714832),N=n(95224),L=(e=>(e.TILE="tile",e.DETAIL_MODAL="detail",e))(L||{});function O(e,r,n){return e===n&&r!==b.Xn.GUEST}function R(e,r){let n=`${location.origin}/files/${e}/feed-posts`;return r?.uuid&&(n+=`/${r.uuid}`),n}function P({fileVersionId:e,fileKey:r,startingNodeId:n},a){let i=(0,S.lD)({startingPointNodeId:n,versionId:e});i["redirect-src"]="feed",Object.assign(i,a);let o=Object.entries(i).map(([e,r])=>`${e}=${r}`).join("&");return`${location.origin}/proto/${r}?${o}`}function D(e,r,n){let o=(0,i.wA)(),s=r.find(e=>e.type===A.cM.NODE||e.type===A.cM.PROTOTYPE),c=(s?s.fileKey:void 0)||n;a.useEffect(()=>{o(m.ZN({file_key:c??void 0}))},[o,c]);let u=v.M4.useFile(c).data,h=(0,f.$)(),_=a.useMemo(()=>u&&s&&s.type===A.cM.PROTOTYPE?d.y1.PROTOTYPE:u?h(u):void 0,[u,s,h]),g=u&&void 0!==_;return{fileData:u,fileIcon:_,fileLoaded:g,openFile:a.useCallback(()=>{if((0,l.sx)("Team Feed File Clicked",{postUuid:e}),s){if(s.type===A.cM.NODE){let r=(0,y.jN)({file:{key:s.fileKey},commentId:(0,C.iw)(e)});o(p.V3({url:r}))}else s.type===A.cM.PROTOTYPE&&o(p.V3({url:P(s)}))}if(c){let e=(0,y.jN)({file:{key:c}});o(p.V3({url:e}))}},[o,s,e,c])}}var k=(e=>(e.TILE="tile",e.DETAIL="detail",e))(k||{});function M(e,r){let n=(0,i.wA)();return a.useCallback(()=>{(0,l.sx)("Team Feed Copy Link Clicked",{postUuid:e,source:r}),n(u.le({view:"teamFeed",postUuid:e}))},[n,e,r])}let F={component:"useFeedPostInfo",migrationGroup:I.L.GROUP_7};function x(e,r,n,i){let[o,d]=a.useState({}),[u,m]=a.useState({}),p=(0,E.eY)(),f=(0,T.wy)({...F,attribute:"planUserParentOrgId",legacy:(e,r)=>r?.org_id,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e.planKey.parentId??void 0}}),y=(0,T.wy)({...F,attribute:"planUserPermission",legacy:(e,r)=>r?.permission,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e?.permission}});return a.useEffect(()=>{if(e.errors&&e.errors.length){let r=JSON.stringify(e.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load feed posts: ${r}`),(0,l.sx)("Livegraph Feed Post Comments Errors",{errors:r})}},[e.errors]),a.useMemo(()=>{if((0,h.y)()&&"loaded"===e.status&&e.data.file&&p?.get){let r=e.data.file.feedPosts,a=r.filter(e=>!!e.org&&!!y&&O(f,y,e.org.id)),l=(0,g.N)(a),c=n(l);Object.entries(c).every(([e,r])=>null===o[e]&&null===r||!!o[e]&&!!r&&o[e]===r)||d(c);let h=i(l,p?.get.bind(p),r);Object.entries(h).every(([e,r])=>{let n=u[e];return!!n&&s()(n,r)})||m(h)}},[e,p,n,i,y,f,o,u]),a.useMemo(()=>f?function(e,r,n,a,i,o){if("loaded"!==e.status)return e;if(!e.data.file)return(0,c.gB)([]);let s={},l=(e.data.file?.feedPosts||[]).sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime()).filter(e=>!!e.org&&O(i,o,e.org.id)).map(e=>{let i=e.comments.map(e=>({id:`feed_comment_${e.id}`,uuid:e.uuid,key:"",parent_id:null,user_id:e.user.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.messageMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:(0,_.CR)(e.user),feed_id:e.id,attachments:e.attachments})),[o,...l]=(0,g.N)([e]);s[o]=s[o]+1||0;let c=n[o]??null,d=a[e.publicUuid]?.[o],u={};for(let r of l)n[r]===c&&(u[r]=a[e.publicUuid]?.[r]);let m=null,p=null;d&&(p={x:d.x+d.width,y:d.y},m={x:d.x,y:d.y+d.height});let h=(0,_.CR)(e.creator),f=(0,C.iw)(e.publicUuid),E=e.content.map(e=>JSON.parse(e)),{thumbnail:y,padImage:b,thumbnailBackground:v}=(0,N.i0)(E,e.backgroundColor??void 0);return{id:f,uuid:"",key:e.fileKey||"",anchored:!1,selectionAnchorCanvasPosition:null,page:c,pageName:null,isActive:r===f,isPendingFromSinatra:!1,canvasPosition:p,boundingBoxAnchorCanvasPosition:m,comments:[{id:f,uuid:"",key:e.fileKey||"",parent_id:null,user_id:h.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.descriptionMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:h,feed_id:e.id},...i],messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:w.kT.FEED_POST,feedPostPublicUuid:e.publicUuid,feedPostTitle:e.title,feedPostThumbnail:y,feedPostThumbnailBackground:v,feedPostNumContent:e.content.length,padFeedPostThumbnail:b,otherBoundingBoxes:u,pinVerticalStagger:s[o]}});return(0,c.gB)(l)}(e,r,o,u,f,y):(0,c.gB)([]),[e,r,o,u,f,y])}},751078:(e,r,n)=>{n.d(r,{M2:()=>i.M,My:()=>a.My,lt:()=>a.lt,t1:()=>i.t});var a=n(398838),i=n(403546)},95224:(e,r,n)=>{n.d(r,{AK:()=>A,EU:()=>N,Px:()=>b,Rl:()=>T,WI:()=>w,X2:()=>S,i0:()=>C,mz:()=>L,pj:()=>y,zr:()=>I});var a=n(846288),i=n(805014),o=n(826212),s=n(777535),l=n(841962),c=n(94489),d=n(540162),u=n(697737),m=n(493941),p=n(6253),h=n(422417),_=n(326909),g=n(432892);let f="team_feed",E=(e,r,n)=>{let a;let i=new Image;if(i.crossOrigin="anonymous",e.type===h.cM.NODE?a=(0,g.yt)(e.image_url,i).then(async e=>{let a=new Image;if(a.crossOrigin="anonymous",!n)throw Error("Expected a oldNodeImageUrl value");let i=await (0,g.yt)(n,a).then(e=>e.naturalWidth),o=e.naturalWidth/i;return r.state.zoom/=o,(0,g.Bt)(e,r.state)}):e.type===h.cM.IMAGE&&r.url&&(a=Promise.resolve(r.url)),!a)throw Error("Expected a previewImagePromise");return a.then(e=>fetch(e)).then(e=>e.arrayBuffer()).then(e=>{let r=new Uint8Array(e),n=URL.createObjectURL(new Blob([r]));return(0,d.Q)(f,r,"image/jpeg").then(({data:e})=>({data:e,localUrl:n}))}).then(({data:e,localUrl:n})=>({previewImageUrl:e.meta.url,localUrl:n,previewState:r.state}))};async function y(e,r,n,i){let l;if(r.find(e=>e.displayContentItem.type===h.cM.NODE||e.displayContentItem.type===h.cM.PROTOTYPE)){let r=new c.M4;r.start();let a=await (0,p.J)(n,i,"",e);r.stop(),(0,s.sx)("Team Feed New Savepoint Created",{elapsedTimeMs:r.getElapsedTime()}),l=a.id}let d=r.map(e=>{switch(e.displayContentItem.type){case h.cM.NODE:return e.processedContentItem.then(r=>{let n;let a={...r,fileVersionId:l};return e.preview&&(n=new c.M4).start(),(e.preview?E(a,e.preview,e.displayContentItem.image_url):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let r=void 0!==e?{...a,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:a;return(0,h.hM)(r)})});case h.cM.IMAGE:return e.processedContentItem.then(r=>{let n;return e.preview&&(n=new c.M4).start(),(e.preview?E(r,e.preview):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let a=void 0!==e?{...r,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:r;return(0,h.hM)(a)})});case h.cM.VIDEO:return e.processedContentItem.then(e=>(0,h.hM)(e));case h.cM.PROTOTYPE:return e.processedContentItem.then(e=>(0,h.hM)({...e,fileVersionId:l}));default:(0,a.xb)(e.displayContentItem)}});return await Promise.all(d)}function b(e,r,n){return r.map(r=>{let n={type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:"",isLoading:!0};return{displayContentItem:n,processedContentItem:Promise.resolve(n)}})}let v=(e,r,n)=>_.Y.getGenerateImageToken({orgId:n,tokenVersion:"2",fileKey:e}).then(n=>{let a=n.data.meta,i=(0,l.Ay)().api_cdn_url||(0,l.Ay)().api_url;return u.Ay.crossOriginGet(`${i}/v1/images/${e}`,{token:a,scale:g.qc.toString(),ids:r.join(",")})});async function T(e,r,n,a,o,l){let d;let u=v(e,r,n);if(o)d=r.map(r=>({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:l&&l[r]}));else{let n=new c.M4;n.start();let a=r.map(r=>new Promise((n,a)=>{setTimeout(()=>{let a=new Blob([function(e){let[r,n]=i.Vzr.generateThumbnailForNode(e,g.Ty.width,g.Ty.height,1,{});return n}(r)]),o=URL.createObjectURL(a);n({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o})},0)}));d=await Promise.all(a),n.stop(),(0,s.sx)("Team Feed Client Node Image Generation",{fileKey:e,nodeIds:r,elapsedTimeMs:n.getElapsedTime()})}return r.map((r,n)=>{let i=u.then(i=>{let o=i.data.images;return{type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:d[n]?.backgroundColor??a}});return{nodeId:r,displayContentItem:d[n],processedContentItem:i}}).reduce((e,r)=>({...e,[r.nodeId]:r}),{})}function I(e,r){return{displayContentItem:{type:h.cM.IMAGE,...e},processedContentItem:(0,m.rH)(e,f).then(e=>({type:h.cM.IMAGE,...e})),fileIdentifier:r}}function S(e,r,n,a){return{displayContentItem:{type:h.cM.VIDEO,mediaType:e.mediaType,path:e.url,sha:"",videoFileUuid:"",coverImage:""},processedContentItem:(0,m.bu)(e,r,n,f).then(e=>({type:h.cM.VIDEO,...e})),fileIdentifier:a}}function w(e,r){let n={...e,type:h.cM.PROTOTYPE,imageUrl:"",prototypeId:0,fileVersionId:""},a=v(e.fileKey,[e.startingNodeId],r).then(r=>(n.imageUrl=r.data.images[e.startingNodeId],n));return{displayContentItem:n,processedContentItem:a}}function A(e){switch(e.displayContentItem.type){case h.cM.NODE:return;case h.cM.IMAGE:URL.revokeObjectURL(e.displayContentItem.url),e.displayContentItem.preview_image_url&&URL.revokeObjectURL(e.displayContentItem.preview_image_url);return;case h.cM.VIDEO:URL.revokeObjectURL(e.displayContentItem.path);return;case h.cM.PROTOTYPE:return;default:(0,a.xb)(e.displayContentItem)}}function C(e,r){let n=e.find(e=>e.type===h.cM.NODE),a=n?.mediumImageUrl||n?.preview_image_url||n?.image_url;if(a)return{thumbnail:a,padImage:!n.preview_image_url,thumbnailBackground:L(n,r)};let i=e.find(e=>e.type===h.cM.PROTOTYPE),o=i?.imageUrl;if(o)return{thumbnail:o,padImage:!1,thumbnailBackground:L(i,r)};let s=e.find(e=>e.type===h.cM.IMAGE),l=s?.mediumImageUrl||s?.preview_image_url||s?.url;if(l)return{thumbnail:l,padImage:!s?.preview_image_url,thumbnailBackground:L(s,r)};let c=e.find(e=>e.type===h.cM.VIDEO),d=c?.coverImage;return d?{thumbnail:d,padImage:!1,thumbnailBackground:L(c,r)}:{thumbnail:"",padImage:!1,thumbnailBackground:L(null,r)}}function N(e){return!!((0,h.aT)(e)&&void 0!==e.initialX&&void 0!==e.initialY&&void 0!==e.initialZoom&&e.backgroundColor)}function L(e,r){return e?(0,h.aT)(e)?"backgroundColor"in e&&e.backgroundColor||r:"black":"var(--color-bg-secondary)"}},984455:(e,r,n)=>{n.d(r,{a9:()=>N,$K:()=>v,aH:()=>b,Q6:()=>E});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(880261),c=n(76265),d=n(535461),u=n(125682),m=n(688656),p=n(453783),h=n(604753),_=n(575561),g=n(651507),f=n(616307),E=(e=>(e.ActualSize="Actual Size",e.Default="Default",e.Fit="Fit to Screen",e.FitWidth="Fit Width",e.FillScreen="Fill Screen",e))(E||{});let y={"Actual Size":()=>(0,c.t)("fig_feed.zoom_pan_preset.actual_size"),Default:()=>(0,c.t)("fig_feed.zoom_pan_preset.default"),"Fit to Screen":()=>(0,c.t)("viewer.options_menu.fit_to_screen"),"Fill Screen":()=>(0,c.t)("viewer.options_menu.fill_screen"),"Fit Width":()=>(0,c.t)("viewer.options_menu.fit_width")},b=Object.keys(E),v="Default",T=p.l6,I=p.c$,S={format:e=>e in E?y[E[e]]():(0,c.t)("fig_feed.zoom_pan_preset.custom")};function w({reportWidth:e,inputProps:r}){let n=a.useRef(null),i=r.property;return a.useLayoutEffect(()=>{let r=n.current;return r&&e(i,r.getBoundingClientRect().width),()=>e(i,void 0)},[n,i,e]),a.createElement("div",{className:f.D9,"aria-hidden":!0},a.createElement(p.uQ,{...r,containerClassName:s()(r.containerClassName,f.oO),ref:n}))}function A({reportWidth:e,value:r,optionProps:n}){let i=a.useRef(null);return a.useLayoutEffect(()=>{let n=i.current;return n&&e(r,n.getBoundingClientRect().width),()=>e(r,void 0)},[i,r,e]),a.createElement("div",{className:f.D9,"aria-hidden":!0},a.createElement(I,{...n,additionalStylesClassName:s()(n.additionalStylesClassName,f.ZS),forwardedRef:i}))}function C(e){let[r,n]=a.useState(void 0),[o,s]=a.useState(void 0),p=(0,i.wA)(),h=(0,u.Um)(),_=a.useMemo(()=>({inputClassName:"edit_preview_toolbar--input--FPZy0 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",formatter:S}),[]),g=a.useMemo(()=>a.createElement(l.r,{setMaxWidth:n,render:({reportWidthOfValue:e})=>a.createElement(a.Fragment,null,b.map(r=>a.createElement(w,{key:r,reportWidth:e,inputProps:{..._,property:r}})))}),[_]),f=a.useMemo(()=>a.createElement(l.r,{setMaxWidth:s,render:({reportWidthOfValue:e})=>a.createElement(a.Fragment,null,b.map(r=>a.createElement(A,{key:r,value:r,reportWidth:e,optionProps:{height:32,value:r,formattedValue:S.format(r)}})))}),[]);return a.createElement("div",{className:"edit_preview_toolbar--zoomPanPresetSelectorContainer--45Nn2","data-tooltip-show-above":!0,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,c.t)("fig_feed.zoom_pan_preset.tooltip")},f,g,a.createElement(T,{..._,inputWidth:r,property:e.value,onChange:r=>{e.setZoomPanPreset(r)},chevronClassName:"edit_preview_toolbar--chevron--zjsKc",dropdownClassName:d.Dm,id:`feedZoomPanPresetControl:${e.id}`,blurOnChange:!0,dropdownAlignment:"right",recordingKey:"feedZoomPanPreset",dispatch:p,dropdownShown:h,targetDomNode:document.body,dropdownWidth:o,preventHiddenInput:"always",ariaLabel:(0,c.t)("fig_feed.zoom_pan_preset.tooltip"),role:"combobox"},b.map(e=>a.createElement(I,{key:e,value:e,fullWidth:!0}))))}function N({id:e,backgroundColor:r,setBackgroundColor:n,zoomPanPreset:i,setZoomPanPreset:o,onResetCallback:l,applyToAllCallback:d}){let u=!(i in E);return a.createElement("div",{className:"edit_preview_toolbar--editPreviewToolbar--Gvlyc"},a.createElement(h.ZE,{value:r,onColorChange:n,recordingKey:"teamFeedEditablePreviewBackgroundColorControl",paletteType:"base",buttonCaretType:"down",buttonSize:"small",optionSize:"medium",positionX:()=>0,positionY:(e,r)=>(0,g.T1)(e,r,4),dropperDisabled:!0,inlineButtonTooltip:(0,c.t)("fig_feed.background_color.tooltip"),onlyShowCustomColorPopover:!0}),a.createElement(_.wv,null),a.createElement(C,{id:e,value:i,setZoomPanPreset:o}),!!d&&a.createElement(a.Fragment,null,a.createElement(_.wv,null),a.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.apply_to_all.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:async()=>{await d()},disabled:u,recordingKey:"teamFeedResetPreview"},a.createElement("span",{className:s()({"edit_preview_toolbar--buttonDisabled--hE0Am":u})},(0,c.t)("fig_feed.apply_to_all")))),l&&a.createElement(a.Fragment,null,a.createElement(_.wv,null),a.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.reset.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:l,recordingKey:"teamFeedResetPreview"},a.createElement("span",null,(0,c.t)("fig_feed.reset")))))}},849130:(e,r,n)=>{n.d(r,{K1:()=>O,Zo:()=>W,xT:()=>G});var a=n(411855),i=n(846288),o=n(629019),s=n.n(o),l=n(729074),c=n(230208),d=n(931654),u=n(576467),m=n(39890),p=n(693565),h=n(76265),_=n(617721),g=n(797618),f=n(422417),E=n(688656),y=n(694e3),b=n(95224),v=n(768003),T=n(432892),I=n(97305),S=n(499609),w=n(32471),A=n(501191),C=n(169852),N=n(95917),L=n(36129);function O(e){let r;switch(e.type){case f.cM.NODE:r=e.nodeId;break;case f.cM.IMAGE:r=e.url;break;case f.cM.VIDEO:r=e.path;break;case f.cM.PROTOTYPE:r=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${r}`}function R(e){let[r,n]=a.useState(!e.isThumbnail&&!e.usesPreviewImage);if(a.useEffect(()=>{if(!e.imgUrl)return;let r=new Image;r.src=e.imgUrl,r.onload=()=>{let e=r.width/r.height;n(r=>r&&Math.abs(e-T.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return a.createElement("div",null,(0,h.t)("fig_feed.could_not_load_preview_image"));let i=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return a.createElement(a.Fragment,null,e.showPreviewFacade&&a.createElement("div",{className:w.Hq},a.createElement(u.pz,{onClick:e.onUpdatePreviewImage},(0,h.t)("fig_feed.update_preview_image"))),a.createElement("img",{src:i,alt:(0,h.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:s()(w.tv,e.isThumbnail&&w.Jq,r&&w.Pd)}),e.isThumbnail?null:"image/gif"===e.mediaType?a.createElement("div",{className:w.mB},(0,h.t)("fig_feed.gif")):null)}function P(e){let r=!!e.editPreviewOptions;return a.createElement("div",{className:w.yE},e.contentItems.map((n,i)=>{let o;return e.editPreviewOptions?.applyToAllCallback&&(o=r=>e.editPreviewOptions.applyToAllCallback(r,O(n))),a.createElement("div",{key:i,className:s()({[w.Xt]:!0,[w.sD]:i===e.selectedIdx})},a.createElement(T.DH,{key:`details::${n.image_url}`,imageSrc:n.image_url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:i===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(n)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,c.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,applyToAllCallback:o,imageScale:r?1:void 0,enableZoomKeyControls:i===e.selectedIdx&&(e.source===y.Zp.DETAIL_MODAL||r),enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL}))}))}function D(e){return a.createElement(I.D,{item:e.prototypeContent})}function k(e){let r=!!e.editPreviewOptions;return a.createElement(T.DH,{key:`details::${e.imageContent.url}`,imageSrc:e.imageContent.url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:e.editPreviewOptions?.setContentPreview,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(e.imageContent)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?r=>e.editPreviewOptions.applyToAllCallback(r,O(e.imageContent)):void 0,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,c.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,imageScale:1,enableZoomKeyControls:e.source===y.Zp.DETAIL_MODAL||r,enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL})}function M(e){let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function F(e){return e.isThumbnail?a.createElement("div",null,(0,h.tx)("fig_feed.video")):a.createElement("div",null,(0,h.tx)("fig_feed.transcode_after_submit"))}function x(e){if(g.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return a.createElement(F,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return a.createElement(R,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function U(e){return a.createElement(a.Fragment,null,a.createElement(m.x,{isLoading:!e.content.imageUrl},()=>a.createElement(R,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&a.createElement("div",{className:w.mB},(0,h.tx)("fig_feed.prototype_badge")))}function B(e){let r=e.contentItems[e.selectedIdx];switch(r.type){case f.cM.NODE:return a.createElement(P,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case f.cM.IMAGE:return a.createElement(k,{imageContent:r,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case f.cM.VIDEO:return a.createElement(M,{videoContent:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case f.cM.PROTOTYPE:return a.createElement(D,{prototypeContent:r});default:(0,i.xb)(r)}}function V(e){switch(e.content.type){case f.cM.NODE:let r=e.content,n=r.mediumImageUrl??r.preview_image_url??r.image_url,o=r.preview_image_url??r.image_url;return a.createElement(m.x,{isLoading:!!r.isLoading},()=>a.createElement(R,{imgUrl:e.isEditing?o:n,usesPreviewImage:!!r.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?o:r.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case f.cM.IMAGE:let s=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,l=e.content.preview_image_url??e.content.url;return a.createElement(R,{imgUrl:e.isEditing?l:s,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?l:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case f.cM.VIDEO:return a.createElement(x,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case f.cM.PROTOTYPE:return a.createElement(U,{content:e.content,isThumbnail:e.isThumbnail});default:(0,i.xb)(e.content)}}function G(e){let r=!!e.editPreviewOptions,n=e.contentItems.length>1||r,{selectedContentIdx:i,pageBackgroundColor:o,setSelectedContentIdx:l,contentItems:u,onContentHover:_}=e,[g,y]=(0,d.M)();a.useEffect(()=>{_?.(y)},[y,_]);let v=a.useMemo(()=>u[i],[u,i]),T=a.useMemo(()=>n?a.createElement(H,{direction:"horizontal",contentItems:u,selectedIdx:i,setSelectedIdx:l,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,u,i,l,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&v&&"node"===v.type&&v.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,c.H0)(v.backgroundColor)??void 0);let{openEditPreviewModalCallback:I,deleteSelectedItemCallback:S}=e,[A,N]=a.useState(!1),L=a.useMemo(()=>{if(!I&&!S||!A||!v)return null;let e=n?w.IN:w.r$;return a.createElement("div",{className:e},v&&(0,f.aT)(v)&&I&&a.createElement("div",null,a.createElement("button",{onClick:I,className:w.nY},(0,h.tx)("fig_feed.edit_preview"))),S&&a.createElement(p.B,{svg:C.A,className:w.j5,onClick:S,autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[A,v,n,I,S]);return a.createElement("div",{className:s()(w.qG,r&&w.Mm)},a.createElement("div",{ref:g,className:n&&!r?w.Uz:w.xs,style:{backgroundColor:(0,b.mz)(v,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>N(!0),onPointerLeave:()=>N(!1),"data-testid":"feed-post-content-section"},L,a.createElement(m.x,{isLoading:!v},()=>e.staticContent?a.createElement(V,{content:v,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):a.createElement(B,{contentItems:u.filter(e=>null!==e),selectedIdx:i,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:o,source:e.source}))),T)}function H(e){let r=a.useRef(null);a.useEffect(()=>{let n=r.current,a=r.current?.children[e.selectedIdx];if(!n||!a)return;let i=n?.getBoundingClientRect();i?.top>=0&&i?.left>=0&&i?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i?.right<=(window.innerWidth||document.documentElement.clientWidth)&&a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=(0,S.pN)(),{scrollToItem:i,onReorderCallback:o,setSelectedIdx:c,deleteItem:d}=e,[u,m]=a.useState(null),h=e.thumbnailType||"wide",g=a.useCallback((r,o,l)=>{let p=s()(w.iD,l&&w.Ut,"small"===h&&w.kL,"wide"===h&&w.Wr);return a.createElement("div",{className:p,onMouseDown:()=>{n(e.feedPostUuid),i?.(o),c?.(o)},onPointerEnter:()=>m(o),onPointerLeave:()=>m(null),role:"button",tabIndex:0,style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},"data-testid":`content-item-${o}`},a.createElement(V,{content:r,isThumbnail:!0,isEditing:e.isEditing}),d&&o===u&&a.createElement("div",{className:w.nx},a.createElement("div",{className:w.fy,onClick:e=>{e.stopPropagation(),d(o)},role:"button",tabIndex:0},a.createElement(v.X,null))))},[e.pageBackgroundColor,e.feedPostUuid,h,e.isEditing,u,n,i,c,d]),f=r=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===r?0:e.contentItems.length-1);return a.createElement(_.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===r?-1:1)+e.contentItems.length)%e.contentItems.length;c?.(n)},icon:"left"===r?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},E=s()(w.sm,"horizontal"===e.direction?w.d9:w.b1);if(o)return a.createElement("div",{className:E},a.createElement(l._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:o,values:e.contentItems,className:s()(w.M2,"horizontal"===e.direction?w.AA:w.h0),role:"button",tabIndex:0,ref:r},e.contentItems.map((r,n)=>a.createElement(l._.Item,{value:r,id:O(r),key:O(r),translate:"no"},g(r,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx))),e.canAddContent&&a.createElement("div",{className:s()(w.iD,"small"===e.thumbnailType&&w.kL,"wide"===e.thumbnailType&&w.Wr,e.isAddingContent?w.ad:w.WW),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},a.createElement(p.B,{svg:A.A}))));{let n=s()(w.M2,"horizontal"===e.direction?w.n2:w.h0);return a.createElement("div",{className:E},f("left"),a.createElement("div",{className:n,ref:r},e.contentItems.map((r,n)=>a.createElement(a.Fragment,{key:n},g(r,n,n===e.selectedIdx)))),f("right"))}}function W(e){let r=e.contentItems[e.selectedIdx],n=r&&(0,f.aT)(r),{onReorderCallback:i,deleteItemAtIdx:o,setSelectedIdx:l,onFileInputChange:c,setContentPreview:d,openPostFromFileModal:u}=e,[_,g]=a.useState(0===e.contentItems.length);a.useEffect(()=>{0===e.contentItems.length?g(!0):g(!1)},[e.contentItems.length]);let y=e.contentItems.length>=1||n,v=a.useCallback(()=>{g(!0)},[]),I=a.useCallback(e=>{l(e),g(!1)},[l]),[S,A]=a.useState(!1),R=a.useMemo(()=>S&&r?a.createElement("div",{className:w.r$},o&&a.createElement(p.B,{svg:C.A,className:w.j5,onClick:()=>o(e.selectedIdx),autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[r,S,e.selectedIdx,o]),P=a.useRef(null),D=(e,r,n,i)=>a.createElement("div",{className:w.c9,onClick:i,role:"button",tabIndex:0},a.createElement(p.B,{svg:n}),a.createElement("div",{className:w.LO},a.createElement("div",{className:w.Gq},e),r)),k=a.useCallback((n,a,i)=>{let o=O(r);r&&o&&!(0,T.L$)(a,e.snapshotStates[o])&&d(o,n,a)},[r,e.snapshotStates,d]),M=(r,n)=>{k(r,n,e.selectedIdx)},[F,x]=a.useState({}),U=a.useCallback(()=>{x(e=>({...e,[O(r)]:!0}))},[r]);return a.createElement("div",null,(()=>{if(_){let r=null===e.attachedFile?(0,h.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,h.t)("fig_feed.share_something_from_figjam"):(0,h.t)("fig_feed.add_frames_from_this_figma_file");return a.createElement("div",{className:s()(w.Er,y&&w.QX)},a.createElement("div",{className:s()(w.hM,e.dragging&&w.cB)},D((0,h.t)("fig_feed.choose_frames"),r,N.A,u),a.createElement("form",null,a.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:f.bB.join(","),ref:P,onChange:c(P),multiple:!0,className:w.Fg}),a.createElement("label",{htmlFor:"fileInput"},D((0,h.t)("fig_feed.upload_files"),(0,h.t)("fig_feed.add_images_or_videos"),L.A)))))}return a.createElement("div",{className:s()(w.Er,y&&w.QX),style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>A(!0),onPointerLeave:()=>A(!1)},R,a.createElement(m.x,{isLoading:!r},()=>(0,f.aT)(r)&&("edit"===e.mode&&(F[O(r)]||!r.shouldBlockEditPreview)||"create"===e.mode)?a.createElement(B,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:M,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):a.createElement(V,{content:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,f.aT)(r)&&r.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?U:void 0})),e.dragging&&a.createElement("div",{className:w.c$},a.createElement("div",{className:w.W9})))})(),y?a.createElement(H,{direction:"horizontal",thumbnailType:"wide",contentItems:e.contentItems,onReorderCallback:i,deleteItem:o,selectedIdx:e.selectedIdx,setSelectedIdx:I,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:e.contentItems.length<f.e3,isAddingContent:_,setAddingActive:v,isEditing:!0}):null)}},980312:(e,r,n)=>{n.d(r,{K:()=>ei});var a=n(411855),i=n(188507),o=n(846288),s=n(629019),l=n.n(s),c=n(777535),d=n(163773),u=n(336427),m=n(666308),p=n(263383),h=n(728722),_=n(697737),g=n(597079),f=n(663844),E=n(693565),y=n(677840),b=n(719334),v=n(76265),T=n(728764),I=n(731556),S=n(47795),w=n(736041),A=n(635558),C=n(619560),N=n(181496),L=n(38711),O=n(661137),R=n(926996),P=n(15092),D=n(183739),k=n(828453),M=n(422417),F=n(688656),x=n(567895),U=n(710636),B=n(509223),V=n(957100),G=n(72918),H=n(904762),W=n(432979),K=n(874360),Y=n(694e3),$=n(751078),j=n(849130),z=n(370788),q=n(85071),Z=n(404164),X=n(32395),J=n(839533),Q=n(365939),ee=n(412141),et=n(40674),er=n(893984),en=n(630834);function ea(){return a.createElement("div",null,(0,v.t)("fig_feed.post_dne"))}let ei=(0,U.Ju)(function(e){let r=(0,i.wA)(),n=(0,O.dq)(),s=(0,R._6)();a.useEffect(()=>{"teamFeed"!==s.view&&"user"!==s.view&&("fullscreen"===s.view&&e.inFileView||r(w.Ce()))},[r,s,e.inFileView]);let l=a.useRef({selectedView:s,inFileView:e.inFileView});a.useEffect(()=>{l.current={selectedView:s,inFileView:e.inFileView}},[e.inFileView,s]),a.useEffect(()=>()=>{l.current.inFileView||"teamFeed"!==l.current.selectedView.view||r(S.$T({...l.current.selectedView,postUuid:void 0}))},[r]);let p=a.useRef(!1),g=a.useCallback(r=>{p.current||!r||e.autofocusCommentInput||(r.focus(),p.current=!0)},[e.autofocusCommentInput]),f=(0,u.ZC)(e.postUuid);a.useEffect(()=>{n&&(e.inFileView||f===e.postUuid||"teamFeed"!==s.view||(p.current=!1,d.Ay.replace((0,Y.Kc)(n,{uuid:e.postUuid}))))},[f,e.postUuid,n,e.inFileView,s]);let E=(0,h.Rs)(D.FHz,{publicUuid:e.postUuid});a.useEffect(()=>{!e.inFileView&&E.data?.feedPost?.title&&(0,L.hL)(E.data.feedPost.title)},[e.inFileView,E.data]),a.useEffect(()=>((0,c.sx)("Team Feed Post Details View Visited",{postUuid:e.postUuid}),()=>{(0,c.sx)("Team Feed Post Closed",{postUuid:e.postUuid})}),[e.postUuid]),a.useEffect(()=>{_.Ay.post(`/api/feed_posts/${e.postUuid}/mark_viewed`)},[e.postUuid]);let[T,I]=a.useState(0);a.useEffect(()=>{I(e.selectedContentIdx||0)},[e.postUuid,e.selectedContentIdx]);let A=a.useMemo(()=>E.data?.feedPost?E.data.feedPost.content.map(e=>JSON.parse(e)):[],[E.data]),C=A.length,{requestToOpenPostByFeedIdx:N}=e,P=a.useCallback(r=>{r.keyCode===m.Uz.LEFT_ARROW?0===T?N&&void 0!==e.feedIdx&&N(e.feedIdx-1):I(T-1):r.keyCode===m.Uz.RIGHT_ARROW&&(T===C-1?N&&void 0!==e.feedIdx&&N(e.feedIdx+1):I(T+1))},[T,C,N,e.feedIdx]),[k,F]=a.useState(!0),x=a.useCallback(()=>F(e=>!e),[]),[U,H]=a.useState(!1);a.useEffect(()=>{!U&&"loaded"===E.status&&A[T]&&(0,M.Dr)(A[T])&&((0,y.YQ)({id:V.X}),H(!0))},[E.status,U,A,T]);let W=E.data?.feedPost||e.initialPreloadedPost;if(!W)switch(E.status){case"errors":return a.createElement(ea,null);case"loading":return a.createElement(K.aF,{className:Q.ZA,size:"any"});case"loaded":return r(b.s.error((0,v.t)("fig_feed.post_dne"))),r(w.Ce()),null;default:(0,o.xb)(E)}return a.createElement(a.Fragment,null,a.createElement(K.aF,{className:Q.ZA,size:"any"},a.createElement("div",{className:Q.Zp,role:"listbox",tabIndex:0,onKeyDown:P,ref:g},a.createElement("div",{className:Q.kL,"data-onboarding-key":G.O},a.createElement("div",{className:k?Q.hQ:Q.MZ},a.createElement(j.xT,{contentItems:A,staticContent:!1,selectedContentIdx:T,setSelectedContentIdx:r=>{I(r),e.onSetSelectedContentIdx?.(r)},pageBackgroundColor:W.backgroundColor??void 0,feedPostUuid:e.postUuid,source:Y.Zp.DETAIL_MODAL})),a.createElement(eo,{feedPost:W,contentItems:A,autofocusCommentInput:!!e.autofocusCommentInput,inFileView:e.inFileView,onSidebarToggle:x,show:k})))),a.createElement(B.p,null,a.createElement(G.b,null)))},N.E,U.ZU.YES);function eo(e){let r=(0,i.wA)(),n=(0,P.iZ)(),o=(0,O.dq)(),s=a.useCallback(()=>{r(w.Ce())},[r]),{fileData:l,fileIcon:c,fileLoaded:d,openFile:u}=(0,Y.rS)(e.feedPost.publicUuid,e.contentItems,e.feedPost.fileKey),m=a.useCallback(()=>{let n=e.inFileView&&e.feedPost.fileKey||void 0;r((0,w.to)({type:(0,$.t1)(),data:{preloadedFeedPost:e.feedPost,entryPoint:e.inFileView?$.M2.FILE:$.M2.FEED,lockedFileKey:n}}))},[r,e.feedPost,e.inFileView]),p=(0,Y.DG)(e.feedPost.publicUuid,Y.dy.DETAIL);if(!o||!n)return null;let h=a.createElement(a.Fragment,null,a.createElement("div",{className:Q.Si},a.createElement(J.Wu,{feedPost:e.feedPost,source:Y.Zp.DETAIL_MODAL,onEditClick:m})),a.createElement("button",{onClick:p,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,v.t)("fig_feed.copy_link_to_post")},a.createElement(E.B,{svg:er.A,className:Q.Gp})),a.createElement("button",{onClick:e.onSidebarToggle},a.createElement(E.B,{svg:et.A,className:Q.Gp})),a.createElement("button",{onClick:s},a.createElement(E.B,{svg:en.default,className:Q.Nk})));if(!e.show)return a.createElement("div",{className:Q.SY},h);let _=a.createElement("div",{className:Q.N1},a.createElement("div",{className:Q.qd},(0,v.tx)("fig_feed.details")),a.createElement("div",{className:Q.IE,"data-testid":"feed-modal-open-file"},h)),f=a.createElement("div",{className:Q.op},a.createElement("div",{className:Q.mY},a.createElement(q.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,size:T.Pf.MEDIUM,shortDate:!1})),a.createElement(el,{feedPost:e.feedPost,currentOrgId:o,currentUser:n}),d&&!e.inFileView&&a.createElement("button",{className:Q.XE,onClick:e.inFileView?void 0:u},(0,v.tx)("fig_feed.from_file",{fileComponent:a.createElement(a.Fragment,null,a.createElement(g.MW,{className:Q.Wv,type:c,size:g.LE.SMALL}),a.createElement("span",{className:Q.q4},l.name))})),a.createElement("div",{className:Q.E_},a.createElement(Z.Q$,{type:Z.Us.FULL,source:Z.zY.DETAIL_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions})));return a.createElement("div",{className:Q.HP},_,a.createElement(es,{postInfo:f,comments:e.feedPost.comments,postUuid:e.feedPost.publicUuid,currentUser:n,currentOrgId:o,autofocusCommentInput:e.autofocusCommentInput}))}function es(e){let r=(0,i.wA)(),n=a.useRef(null),o=a.useRef(null),[s,l]=a.useState(!1),c=a.useCallback(r=>{0===r.intersectionRatio&&e.comments.length>0?l(!0):l(!1)},[e.comments.length]);(0,H.g)(o,c,{threshold:[0,1]});let d=a.useCallback(()=>{n.current&&n.current.scrollToBottom()},[]),u=e.comments.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()),[m,h]=a.useState(e.comments.length);a.useEffect(()=>{let r=m<e.comments.length;r&&h(e.comments.length);let n=e.comments[e.comments.length-1];r&&n.user.id===e.currentUser.id&&d()},[m,e.comments,e.currentUser,d]);let[_,g]=a.useState([]),y=(0,i.d4)(e=>e.comments.newComment),b=a.useCallback(()=>{r(A.gX({postUuid:e.postUuid,messageMeta:_,attachmentIds:Object.keys(y.attachments)})),g([]),r(I.$M({resetStatusOnly:!1}))},[r,e.postUuid,_,y]),S=a.useMemo(()=>({library:new k.M8(e.currentOrgId,e.postUuid)}),[e.currentOrgId,e.postUuid]),w=a.useCallback(e=>{r(I.nb({attachmentId:e.id,attachment:e}))},[r]),N=a.useCallback((e,n)=>{r(I.nb({attachmentId:e,attachment:null})),n?n.then(()=>x.J.delete(e)):x.J.delete(e)},[r]);return a.createElement("div",{className:Q.ty},a.createElement(f.P,{innerClassName:Q.qy,useBottomPinning:!0,ref:n},e.postInfo,a.createElement("div",{ref:o,className:Q.Ai},u.map(r=>a.createElement(z.i,{key:r.id,commentId:r.id,commentUuid:r.uuid||"",createdAt:r.createdAt,commentUser:r.user,reactions:r.reactions,messageMeta:(0,C.o8)(r.messageMeta),user:e.currentUser,currentOrgId:e.currentOrgId,mentionables:S,attachments:r.attachments}))),s&&a.createElement("div",{className:Q.cm,onClick:d,role:"button",tabIndex:0},a.createElement(E.B,{svg:ee.A,className:Q.mL}),(0,v.tx)("fig_feed.num_comments",{numComments:u.length}))),a.createElement("div",{className:Q.kG},a.createElement("div",{className:Q.gK},a.createElement(T.H8,{user:e.currentUser,size:T.Pf.MEDIUM})),a.createElement(X.o,{fallback:null,errorFallback:p.H4.NONE,user:e.currentUser,currentOrgId:e.currentOrgId,autofocus:e.autofocusCommentInput,onSubmit:b,hideSubmitButton:!1,mentionables:S,composerContainerClass:Q.DA,editableTypeaheadClass:Q.OX,messageContent:_,updateMessage:g,editingExistingComment:!1,updateAttachment:w,deleteAttachment:N,attachments:Object.values(y.attachments)})))}function el(e){let r=a.useMemo(()=>(0,C.o8)(e.feedPost.descriptionMeta),[e.feedPost.descriptionMeta]);return a.createElement("div",{role:"textbox",tabIndex:0,className:Q.tL},a.createElement("div",{className:Q.pT},e.feedPost.title),a.createElement(W.HH,{messageMeta:r,commentId:e.feedPost.id,className:l()(Q.gG)}))}},85071:(e,r,n)=>{n.d(r,{A:()=>g,B:()=>_});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(832708),c=n(901963),d=n(728764),u=n(47795),m=n(581713),p=n(621334),h=n(510110);function _(e){let r=e.date&&a.createElement(c.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),n=[a.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:s()(e.onTileMouseDown&&h.WJ,h.PI)},r)];return a.createElement("div",{className:h.ME},a.createElement(g,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n}))}function g(e){let r=(0,i.wA)(),n=a.useCallback(n=>{n.stopPropagation(),e.user.id&&r(u.$T({view:"user",userId:e.user.id,userViewTab:p.o.INTERNAL_PROFILE_POSTS}))},[r,e.user.id]),o=e.appendToHandle||!1===e.noHandle;return a.createElement("div",{className:h.ME},!e.noAvatar&&a.createElement(l.N,{onClick:n,trusted:!0,onMouseDown:m.dG},a.createElement(d.H8,{user:e.user,size:e.size??d.Pf.LARGE})),o&&a.createElement("div",{className:h.Qs},!e.noHandle&&a.createElement(l.N,{className:h.TK,onClick:n,trusted:!0},a.createElement("div",{className:h.p$},e.user.handle)),e.appendToHandle))}},404164:(e,r,n)=>{n.d(r,{Q$:()=>g,Us:()=>h,nn:()=>f,zY:()=>_});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(635558),c=n(125682),d=n(15092),u=n(127107),m=n(315611),p=n(301891),h=(e=>(e[e.FULL=0]="FULL",e[e.ADD_ONLY=1]="ADD_ONLY",e))(h||{}),_=(e=>(e[e.TILE_CONTENT=0]="TILE_CONTENT",e[e.TILE_POST=1]="TILE_POST",e[e.DETAIL_POST=2]="DETAIL_POST",e[e.DETAIL_COMMENT_NO_REACTION=3]="DETAIL_COMMENT_NO_REACTION",e[e.DETAIL_COMMENT_WITH_REACTION=4]="DETAIL_COMMENT_WITH_REACTION",e[e.FILE_POPOVER=5]="FILE_POPOVER",e))(_||{});function g(e){let r=(0,i.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=a.useCallback(({emoji:n,addOnly:a})=>{let i=o(n);i?a||r(l.Oy({feedPostUuid:e.postUuid,emoji:n,reactionId:i})):r(l.EF({feedPostUuid:e.postUuid,feedPostId:e.postId,emoji:n}))},[r,o,e.postUuid,e.postId]);return a.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"post",id:e.postUuid},feedReactions:e.feedReactions})}function f(e){let r=(0,i.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=a.useCallback(({emoji:n,addOnly:a})=>{let i=o(n);i?a||r(l.t9({commentUuid:e.commentUuid,emoji:n,reactionId:i})):r(l.FJ({commentUuid:e.commentUuid,commentId:e.commentId,emoji:n}))},[r,o,e.commentUuid,e.commentId]);return a.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"comment",id:e.commentUuid},feedReactions:e.feedReactions})}function E(e){let r=(0,d.iZ)(),{toggleReaction:n}=e,{reactionsWithSelected:i}=b(e.feedReactions,r),o=a.useCallback((e,r)=>{r.stopPropagation(),n({emoji:e.emoji,addOnly:!1})},[n]),s=a.useCallback(e=>{n({emoji:e,addOnly:!0})},[n]),l=a.createElement(y,{type:e.type,feedResource:e.feedResource,source:e.source,onAddReaction:s,hideAddReactionButton:e.hideAddReactionButton});return 1===e.type?l:a.createElement("div",{className:p.KD},a.createElement(m.Kb,{reactions:i,collapseOverflow:!1,onClickExisting:o,prependToList:e.prependToList},l))}function y(e){let r=a.useRef(null),{isReactionPickerVisible:n,toggleReactionPicker:i,emojiPicker:o}=T(e.feedResource,e.source,r,e.onAddReaction);return e.hideAddReactionButton&&!n?a.createElement("div",{className:p.$S}):a.createElement(a.Fragment,null,a.createElement("div",{ref:r,className:s()(1===e.type?p.D5:p.HL)},a.createElement(m.ny,{onClick:i,selected:n,styleClassName:p.$S,selectedStyleClassName:p.Qi})),n&&o)}let b=(e,r)=>{let n=a.useMemo(()=>{let n={};if(!r)return n;for(let a of e)a.user.id===r.id&&(n[a.emoji]=a.id);return n},[e,r]),i=a.useCallback(e=>n[e],[n]);return{reactionsWithSelected:a.useMemo(()=>{let r={};for(let n of e){let{emoji:e,user:a,createdAt:o}=n;r[e]||(r[e]={emoji:e,users:[],selected:!!i(e),createdAt:o.getTime(),skinTonesToUsers:{}}),r[e].createdAt=Math.min(r[e].createdAt,o.getTime()),r[e].users.push({handle:a.handle,id:a.id,img_url:a.imgUrl})}return Object.values(r).sort((e,r)=>e.createdAt-r.createdAt||e.emoji.localeCompare(r.emoji))},[e,i]),existingReactionIdForCurrentUser:i}},v=(e,r)=>`FEED_TILE_EMOJI_PICKER-${e}${r?`-${r}`:null}`,T=(e,r,n,i)=>{let o=(0,c.BK)(v(r,e?.id)),s=a.useCallback(e=>{i(e.shortcodes),o.hide()},[o,i]),l=n.current&&a.createElement(u._,{onInsert:s,onCancel:o.hide,targetRect:n.current.getBoundingClientRect()});return{isReactionPickerVisible:o.showing,toggleReactionPicker:o.toggle,emojiPicker:l}}},912509:(e,r,n)=>{n.d(r,{e:()=>w});var a=n(411855),i=n(188507),o=n(32257),s=n(629019),l=n.n(s),c=n(252829),d=n(746643),u=n(563192),m=n(505427),p=n(76265),h=n(343373),_=n(125682),g=n(688656),f=n(591844),E=n(464960),y=n(848969),b=n(496991),v=n(349307),T=n(179544),I=n(98285),S=n(539954);function w({recordingKey:e,currentZoom:r,Dropdown:n,...s}){let w=(0,i.wA)(),A=a.useRef(null),C=(0,_.BK)(s.dropdownId),[N,L]=a.useState(null),O=(0,h.GS)(),R=a.useCallback(()=>{L(A?.current?.getBoundingClientRect()||null)},[A]);a.useEffect(()=>(R(),c._.addListener(R),window.addEventListener("resize",R),()=>{c._.removeListener(R),window.removeEventListener("resize",R)}),[R]);let P=a.useCallback(()=>{R(),C.toggle({hasOwnEscKeyHandler:!1})},[C,R]),D=u.rf(u.Pt(e,"zoomButton"),"click",P),k=C.showing&&N&&a.createElement(n,{targetRect:N,showingZoomDropdown:C.showing,toggleZoomMenu:C.toggle,recordingKey:e}),M=!("canZoomIn"in s)||s.canZoomIn,F=!("canZoomOut"in s)||s.canZoomOut,x="onZoomIn"in s?s.onZoomIn:d.lQ,U="onZoomOut"in s?s.onZoomOut:d.lQ;return a.createElement("div",{className:b.sH},a.createElement(o.o,{eventListeners:["onClick"]},a.createElement(y.K0,{recordingKey:u.Pt(e,"zoomOutButton"),className:l()({[b.QO]:!0,[b.Sn]:F}),svg:v.A,fallbackSvg:T.A,disabled:!F,onClick:U,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-out"}),a.createElement(m.L,{ariaLabel:(0,p.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:D,selected:C.showing,className:l()(b.LY,C.showing&&b.vu),onboardingKey:f.q,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,p.t)("fullscreen.zoom_menu.zoom_view_options")},a.createElement("div",{className:b.cm,"data-testid":"zoom-amount",ref:A},function(){let e=Math.round(r);return O?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),a.createElement("div",{className:b.FH,ref:A},a.createElement(E.c,{dispatch:w,dropdownKey:"zoom-input-dropdown",showingDropdown:C.showing,dataTestId:"zoom-menu-chevron",className:C.showing?b.r4:b.Dn,svgContainerClassName:b.r2,toggleOnClick:!0}))),k,a.createElement(y.K0,{recordingKey:u.Pt(e,"zoomInButton"),className:l()({[b.sy]:!0,[b.Sn]:M}),svg:I.A,fallbackSvg:S.A,disabled:!M,onClick:x,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-in"})))}},839533:(e,r,n)=>{n.d(r,{Wu:()=>b});var a=n(411855),i=n(188507),o=n(777535),s=n(697737),l=n(918091),c=n(76265),d=n(736041),u=n(635558),m=n(374629),p=n(15092),h=n(710636),_=n(874360),g=n(229579);let f=(0,h.Ju)(function(e){let r=(0,c.tx)("fig_feed.delete_confirmation");return e.numComments&&e.numReactions?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments_and_reactions",{numCommentsAndReactions:e.numComments+e.numReactions}):e.numComments?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments",{numComments:e.numComments}):e.numReactions&&(r=(0,c.tx)("fig_feed.delete_confirmation_with_reactions",{numReactions:e.numReactions})),a.createElement(_.Rw,{destructive:!0,confirmationTitle:(0,c.tx)("fig_feed.delete_post"),confirmText:(0,c.tx)("fig_feed.delete"),onConfirm:e.onConfirm,popStack:!0},a.createElement("p",null,r))},"PostConfirmDeleteModal");var E=(e=>(e.USER="user_post_context_menu",e.SYSTEM="system_post_context_menu",e))(E||{});let y=e=>{let r=(0,p.iZ)(),n=(0,m.Yo)(),a=(r&&r.id===e.creator.id)??!1;return{canDelete:a,canAdminDelete:n?.isAdmin??!1,canEdit:a}};function b(e){let r=(0,i.wA)(),n=a.useCallback(()=>r(u.Y9()),[r]),{onEditClick:m,feedPost:p}=e,{canDelete:h,canAdminDelete:_,canEdit:E}=y(p),b=p.comments.length,T=p.reactions.length,I=a.useCallback(()=>{r((0,d.AS)()),s.Ay.del(`/api/feed_posts/post_uuid/${p.publicUuid}`).then(()=>{(0,o.sx)("Team Feed Post Deleted",{postUuid:p.publicUuid}),n()})},[r,p.publicUuid,n]),S=a.useCallback(()=>{r((0,d.to)({type:f,data:{onConfirm:I,numComments:b,numReactions:T},showModalsBeneath:!0}))},[r,I,b,T]);if(!h&&!_)return null;let w=h?(0,c.tx)("fig_feed.delete_ellipsis"):(0,c.tx)("fig_feed.delete_admin_ellipsis"),A=[!!E&&!!m&&a.createElement(l.c$,{key:"edit",onClick:m},(0,c.tx)("fig_feed.edit")),(!!h||!!_)&&a.createElement(l.c$,{key:"delete",onClick:S},w)];return a.createElement(g.V,{dropdownId:v("user_post_context_menu",e.feedPost.publicUuid,e.source),options:A,hideTarget:e.hideTarget,lean:"left",maxWidth:120})}let v=(e,r,n)=>e+r+n},486701:(e,r,n)=>{n.d(r,{n:()=>s});var a=n(411855),i=n(712204),o=n(342221);function s({team:e,size:r=o.P.MEDIUM,shape:n="SQUARE",fallbackDisplay:s=o.U.FIRST_CHARACTER,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u}){return a.createElement(i.w7,{entity:e,size:r,hideFallbackInitial:s===o.U.HIDDEN,shape:n,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u})}},105300:(e,r,n)=>{n.d(r,{S:()=>a.S});var a=n(542766)},252327:(e,r,n)=>{n.d(r,{Ac:()=>z,D2:()=>ei,bJ:()=>F,dO:()=>ee});var a=n(217950),i=n(805014),o=n(885123),s=n(841962),l=n(875877),c=n(550479),d=n(402985),u=n(138406),m=n(241162),p=n(843816),h=n(354549),_=n(804970),g=n(780017),f=n(886231),E=n(176160),y=n(473982),b=n(927150),v=n(841749),T=n(259315),I=n(882049),S=n(581544),w=n(359414),A=n(295020),C=n(421024),N=n(888178),L=n(432259),O=n(379149),R=n(49762),P=(e=>(e.NONE="none",e.TOP_BAR="top-bar",e.NEW_FILE="new-file",e))(P||{});let D="used_figjam_ai_generate",k="used_figjam_ai_generate_modal_v2",M=(0,l.atom)(!1),F=(0,l.atom)(null,(e,r)=>{r(M,!0),r(q,void 0)}),x=(0,l.atom)(null,(e,r)=>{r(H),r(M,!1)}),U=(0,l.atom)(!1),B=(0,l.atom)(null,(e,r)=>{r(H),r(U,!0)}),V=(0,b.bt)(()=>(0,A.Uy)()&&!(0,s.kc)().figjam_generate_handbrake&&!(0,u.y8)(!0)),G=(0,l.atom)(e=>e(V)?e(M)?"top-bar":(e(I.P)===S.iH.TRUE||e($))&&!e(U)&&e(v.l5)===T.fD.NONE?"new-file":"none":"none"),H=(0,l.atom)(null,(e,r)=>{r(K),r($,!1),r(q,void 0)});(0,l.atom)(null,(e,r)=>{let n=e(G);"top-bar"===n?r(x):"new-file"===n&&r(B)});let W=(0,l.atom)(null,(e,r)=>{e(en).abort(),r(en,new AbortController),r(ee,{status:N.c.NONE})});(0,l.atom)(null,(e,r)=>{r(H),r(U,!1),r(M,!1)});let K=(0,l.atom)(null,(e,r)=>{r(W),r(j,A.Nb.ENTRY),r(X,void 0),r(J,(0,O.Xi)()),r(Q,i.VIy.BASIC)});(0,l.atom)(null,(e,r)=>{r(j,A.Nb.PROMPT_BUILDER)}),(0,y.Wh)(()=>(0,l.atom)(!1));let Y=(0,l.atom)(A.Nb.ENTRY),$=(0,l.atom)(!1),j=(0,l.atom)(null,(e,r,n)=>{n===A.Nb.PROMPT_BUILDER&&r($,!0),r(Y,n)});(0,l.atom)(e=>e(Y));let z=(0,l.atom)(""),q=(0,l.atom)(void 0),Z=(0,l.atom)(""),X=(0,l.atom)(void 0),J=(0,l.atom)((0,O.Xi)()),Q=(0,l.atom)(i.VIy.BASIC),ee=(0,l.atom)({status:N.c.NONE}),et=(0,l.atom)(null),er=(0,y.Wh)(()=>(0,l.atom)(!1));(0,l.atom)(null,(e,r,n)=>{r(er,n)});let en=(0,l.atom)(new AbortController),ea=(0,l.atom)(null,async(e,r,{fileKey:n,prompt:i,stage:l,useCaseCategory:u,useCase:y,subtitle:b,entrypoint:v,fromGenerateModalV2:T,pageNodeId:I})=>{let S;if(null===n&&(0,c.$D)(a.e.AI_PRODUCTIVITY,Error("No file key provided for FigJam AI Generate request")),!i)return{status:N.c.NONE};r(C.Mg,e=>e+1),e((0,g.r1)(D)).data||o.D.dispatch(m.b({[D]:!0}));let P=e((0,g.r1)(k)).data;T&&!P&&o.D.dispatch(m.b({[k]:!0})),r(W);let M=e(en).signal,F={orgId:e(_._s),teamId:e(E.As)||null,fileKey:n,userId:e(f.kS)||null,trackingSessionId:(0,d.f)()};r(ee,{status:N.c.LOADING}),r(X,u),r(j,A.Nb.PROMPT_BUILDER),r(et,I);let x="board";try{globalThis.AI_DEBUG_XML&&(0,s.kc)().figjam_text_to_template_debug?x="board":(x=await (0,w.P)({prompt:i,signal:M,authInfo:F})||"board",(0,s.kc)().figjam_text_to_visual_timeline||"timeline"!==x||(x="gantt"),(0,A.$B)()||"mindmap"!==x||(x="board"))}catch(o){let e=(0,R.E$)(o,R.ez.GENERATE);return S={status:N.c.ERROR,type:x,errorMessage:e.message,trace:o.trace},(0,C.h5)(n,0,1,i,"inappropriate",l,v,u,y,b),(0,C.fK)(n,e.message),e.reportToSentry&&(0,c.$D)(a.e.AI_PRODUCTIVITY,o),r(ee,S),S}u&&(u===A.es.FLOW_CHART?x="diagram":u===A.es.GANTT_CHART?x="gantt":u===A.es.ORG_CHART&&(x="orgchart"));let U=e(Z),B=U&&i.includes(U)?U:void 0;r(Z,""),(0,C.h5)(n,0,1,i,x,l,v,u,y,b,B);try{S=await (0,p.B)(()=>e(C.LX)||"null",n,h.T.AI,async()=>{let r;if("board"===x){let a=e(_._s);r=await (0,L.L)({prompt:i,signal:M,fileKey:n,authInfo:F,orgId:a})}else{let r=e(Q),n=e(J),a=x;await (0,O.$D)({prompt:i,signal:M,visualType:a,authInfo:F,ganttColor:n,ganttType:r})}let a=e(C.LX);return(0,C.lx)(n,0,i,x,a),{status:N.c.SUCCESS,type:x,trace:r}})}catch(e){if(e?.name==="AbortError")S={status:N.c.NONE};else{let r=(0,R.E$)(e,R.ez.GENERATE);S={status:N.c.ERROR,type:x,errorMessage:r.message,trace:e.trace},r.reportToSentry&&(0,c.$D)(a.e.AI_PRODUCTIVITY,e),(0,C.fK)(n,r.message)}}return r(ee,S),S});(0,l.atom)(null,(e,r,{prompt:n,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,fromGenerateModalV2:u,pageNodeId:m})=>{let p=e(E.ze);if(null===p||0===p.length){(0,c.$D)(a.e.AI_PRODUCTIVITY,Error("No file key found for loaded file to use for FigJam AI Generate request"));return}r(ea,{fileKey:p,prompt:n,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,fromGenerateModalV2:u,pageNodeId:m})});let ei=(0,l.atom)(null,(e,r,{fileKey:n,prompt:a,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,fromGenerateModalV2:d,pageNodeId:u})=>{r(ea,{fileKey:n,prompt:a,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,fromGenerateModalV2:d,pageNodeId:u})})},583483:(e,r,n)=>{n.d(r,{$t:()=>_,HZ:()=>g}),n(411855),n(188507),n(245954);var a=n(885123),i=n(841962),o=n(875877);n(584261);var s=n(138406),l=n(61707),c=n(365347);n(212507);var d=n(176160),u=n(314540),m=n(689102),p=n(505534);n(329695);var h=n(543338);function _({dispatch:e,pageGuids:r,fileKey:n,source:i}){let s=o.atomStore.get(d.ze),_=o.atomStore.get(m.Me),g=a.D.getState();!function({figjamData:e,newFileState:r,dispatch:n,currentTeam:a,source:i,checkIsViewer:o}){f({checkIsViewer:o})&&(localStorage.setItem(h.Mu,JSON.stringify(e)),n(l.zE({state:r,from:i,editorType:u._Y.SLIDES,team:a,openNewFileIn:p.ai.NEW_TAB,slidesAiNewFileData:{source:i}})))}({figjamData:{figjamFileKey:n||s,pageGuids:r},newFileState:(0,c.Kl)(g),dispatch:e,currentTeam:_,source:i,checkIsViewer:!1})}function g(){return f({checkIsViewer:!1})}function f({checkIsViewer:e}){if(!(0,i.kc)().piper_present_summary||(0,s.y8)(e))return!1;if(!e){let e=o.atomStore.get(d.yV),r=!o.atomStore.get(m.Me)?.starter_team&&e?.viewerExportRestricted;if(e&&!e.canEditCanvas&&r)return!1}return!0}n(70260)},295020:(e,r,n)=>{n.d(r,{Zj:()=>d,Nb:()=>o,i_:()=>u,Dl:()=>m,es:()=>l,$B:()=>_,Uy:()=>h}),n(411855),n(834825);var a=n(841962);n(76265);var i=(e=>(e.NEVER="never",e.ONCE="once",e.MORETHANEONCE="morethanonce",e))(i||{}),o=(e=>(e[e.ENTRY=0]="ENTRY",e[e.PROMPT_BUILDER=1]="PROMPT_BUILDER",e))(o||{}),s=(e=>(e.MEETING="meeting",e.GANTT_CHART="gantt_chart",e.BRAINSTORM="brainstorm",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.PLAN="plan",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(s||{}),l=(e=>(e.WEEKLY_SYNC="weekly_sync",e.PLAN="plan",e.BRAINSTORM="brainstorm",e.TEAM_RETRO="team_retro",e.ONEONONE="1:1",e.GANTT_CHART="gantt_chart",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(l||{}),c=(e=>(e.IN_EDITOR="in_editor",e.COMMUNITY="community",e.ONBOARDING_MODAL="onboarding_modal",e))(c||{}),d=(e=>(e.GENERATE_MODE="generate_stage",e.REFINEMENT_MODE="refinement_stage",e))(d||{});let u="figjam_ai_diagram",m="figjam_ai_template";var p=(e=>(e.TEMPLATE="template",e.VISUAL="visual",e))(p||{});function h(){return!!(0,a.kc)().figjam_text_to_visual}function _(){return!!(0,a.kc)().figjam_text_to_visual_mindmap}},199399:(e,r,n)=>{n.d(r,{OU:()=>s,RA:()=>o}),n(841962),n(747484);var a=n(402985);n(138406),n(661137);var i=n(426256);let o=new Set([i.Ph,i.T0]);function s(e){let r=e.openFile,n=r?r.teamId:null;return{teamId:n,orgId:e.currentUserOrgId,fileKey:r?r.key:null,userId:e.user?.id||null,trackingSessionId:(0,a.f)()}}},421024:(e,r,n)=>{n.d(r,{F9:()=>u,LX:()=>h,Mg:()=>_,fK:()=>p,h5:()=>d,lx:()=>m});var a=n(777535),i=n(875877),o=n(812435),s=(e=>(e.FREEFORM="freeform",e.SUGGESTION="suggestion",e.AUTOCOMPLETE="autocomplete",e))(s||{}),l=(e=>(e.AI_PROMPT_EDITED="ai_prompt_edited",e.AI_PROMPT_BUILDER_OUTPUT_REQUESTED="ai_prompt_builder_output_requested",e.AI_PROMPT_BUILDER_OUTPUT_STREAMING="ai_prompt_builder_output_streaming",e.AI_PROMPT_BUILDER_OUTPUT_CREATED="ai_prompt_builder_output_created",e.AI_PROMPT_REQUEST_ERROR="ai_prompt_request_error",e.AI_PROMPT_SUGGESTIONS_VIEWED="ai_prompt_suggestions_viewed",e))(l||{});let c=e=>"board"===e?"template":"visual";function d(e,r,n,s,l,d,u,m,p,h,g){let f="inappropriate"===l?l:c(l);(0,o.qV)(s).then(o=>{(0,a.sx)("ai_prompt_builder_output_requested",{fileKey:e,variantIndex:r,numVariants:n,promptId:o,outputType:f,oneClickPromptUseCase:p,oneClickPromptUseCaseCategory:m,oneClickPromptUseCaseSubCategory:h,numCharactersInput:s.length,localOutputId:i.atomStore.get(_),stage:d,uiTriggeredFrom:u,autocompletePromptAddition:g},{forwardToDatadog:!0})})}function u(e,r,n,s,l){(0,o.qV)(n).then(n=>{(0,a.sx)("ai_prompt_builder_output_streaming",{fileKey:e,variantIndex:r,promptId:n,outputType:c(s),cortexRequestId:l,localOutputId:i.atomStore.get(_)},{forwardToDatadog:!0})})}function m(e,r,n,s,l){(0,o.qV)(n).then(n=>{(0,a.sx)("ai_prompt_builder_output_created",{fileKey:e,variantIndex:r,promptId:n,outputType:c(s),cortexRequestId:l,localOutputId:i.atomStore.get(_)},{forwardToDatadog:!0})})}function p(e,r){(0,a.sx)("ai_prompt_request_error",{fileKey:e,errorMessage:r},{forwardToDatadog:!0})}let h=(0,i.atom)(null),_=(0,i.atom)(0)},503138:(e,r,n)=>{n.d(r,{Vn:()=>c,mr:()=>s});var a=n(885123),i=n(190500),o=n(365347),s=(e=>(e.REQUEST="ai_summary_requested",e.CREATE="ai_summary_created",e.DELETE="ai_summary_deleted",e.LINK_COPED="ai_summary_link_copied",e.TEXT_COPIED="ai_summary_text_copied",e.TIME_TAKEN_TO_COMPLETE="figjam.summarize.time_taken_to_complete",e))(s||{}),l=(e=>(e.TIME_TAKEN_TO_COMPLETE="figjam.cluster.time_taken_to_complete",e))(l||{});function c(e,r){let n=a.D.getState(),s=o.d1(n)?.key??"";(0,i.ds)(e,s,n,{...r})}},70260:(e,r,n)=>{n(188507),n(199399)},49762:(e,r,n)=>{n.d(r,{E$:()=>d,ez:()=>l}),n(411855),n(188507);var a=n(465251),i=n(104352);n(163773),n(841962);var o=n(76265);n(553362);var s=n(401562),l=(e=>(e.SUMMARIZE="sticky-summarization-error",e.CLUSTER="sticky-cluster-error",e.GENERATE="generate-error",e))(l||{}),c=(e=>(e.Reload="reload",e.Trace="trace",e))(c||{});let d=(0,s.D)((e,r)=>{let n={"sticky-summarization-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_summary.content_length_limit_exceeded_error"),figjam_summarize_out_of_date:(0,o.t)("whiteboard.ai_summary.out_of_date_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_summary.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_summary.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_summary.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"sticky-cluster-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_cluster.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_cluster.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"generate-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_generate.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_generate.rate_limit_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_generate.unknown_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_generate.unknown_error"),not_implemented:(0,o.t)("ai.error.not_implemented")}},s="generic",l=!0;if(e instanceof a.CortexErrorV2)a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e)?s="content_length_limit_exceeded":a.OutOfDateFeatureVersionError.isInstance(e)?"figjam_summarize"===e.featureName&&(s="figjam_summarize_out_of_date"):a.ProviderRateLimitExceededError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e)?s="rate_limit_exceeded":a.ProviderServiceIssueError.isInstance(e)||a.ProviderServiceBusyError.isInstance(e)?s="service_issue":a.OfflineError.isInstance(e)?(s="offline",l=!1):a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e)?(s="unsafe_or_harmful_content",l=!1):a.UnauthorizedError.isInstance(e)?(s="unauthorized",l=!1):a.NotImplementedError.isInstance(e)?(s="not_implemented",l=!1):a.FigjamVisualParsingError.isInstance(e)?(s="generic",l=!1):e?.statusCode===429?s="rate_limit_exceeded":e?.statusCode===403&&(s="ai_opt_out_error");else if(e instanceof i.G1)switch(e.type){case"content_length_limit_exceeded":s="content_length_limit_exceeded";break;case"figjam_summarize_out_of_date":s="figjam_summarize_out_of_date";break;case"rate_limit_exceeded":s="rate_limit_exceeded";break;case"service_issue":s="service_issue";break;case"offline":s="offline",l=!1;break;case"unsafe_or_harmful_content":case"figjam_generate_moderation_api_unsafe_or_harmful_content":s="unsafe_or_harmful_content",l=!1;break;case"unauthorized":s="unauthorized",l=!1;break;case"figjam_visual_parsing_error":s="generic",l=!1;break;case"generic":if(429===e.data.status){s="rate_limit_exceeded";break}403===e.data.status&&(s="ai_opt_out_error")}let c=n[r],d=c[s]??c.generic;return{type:s,message:d,reportToSentry:l}})},20620:(e,r,n)=>{n.d(r,{Z9:()=>g,iN:()=>E});var a=n(411855);n(188507);var i=n(805014),o=n(230208),s=n(141630);n(336427);var l=n(875877);n(657548);var c=n(139879);n(48929),n(76265),n(553362);var d=n(176160),u=n(183739);n(510669),n(689102);var m=n(240327);n(138346);var p=n(401562);n(169253);var h=n(219403),_=n(668581);let g=(0,p.D)(()=>{let e=(0,d.tS)(),[r]=(0,c.IT)((0,u.nD6)({fileKey:e||""}),{enabled:!!e}),{loadedPaletteVariations:n,loadedColorPalette:i}=function(e){let r=(0,a.useRef)(),{uuid:n,palette:i}=function(e){let r={uuid:m.fJ,palette:void 0},n=e.data?.file;if("loaded"!==e.status||!n)return r;if(n.userColorPaletteOverrideData){let e=n.userColorPaletteOverrideData.colorPaletteUuid;if(e===m.fJ)return r;if(n.userColorPaletteOverrideData.colorPalette)return{uuid:e,palette:n.userColorPaletteOverrideData.colorPalette}}return n.defaultColorPaletteData?.colorPalette?{uuid:n.defaultColorPaletteData.colorPaletteUuid,palette:n.defaultColorPaletteData.colorPalette}:r}(e);r.current=i;let l=i?.baseColors.join(":")||"";return(0,a.useMemo)(()=>{let a,i;let c=r.current;return"loaded"===e.status&&c&&n!==m.fJ&&(a=l.split(":").map(e=>(0,o.tK)(e)).filter(f),i=(0,s.Eg)(a)),{loadedPaletteVariations:i,loadedColorPalette:c}},[n,l,e.status])}(r),p=(0,l.useSetAtom)(_.$R);return((0,a.useEffect)(()=>{p(n)},[n,p]),i&&n)?{type:m.Yv.CUSTOM,variations:n,uuid:i.uuid,name:i.name,isTeamDefault:i.isTeamDefault}:{type:m.Yv.DEFAULT,uuid:m.fJ}});function f(e){return null!==e}function E(e,r){let n=g();return!!e&&(n.type===m.Yv.CUSTOM?0>n.variations[r].findIndex(r=>(0,o.DA)(e,r)):(0,h.zS)(e,r)===i.daH.CUSTOM)}},668581:(e,r,n)=>{n.d(r,{$R:()=>c,Jq:()=>s,Uh:()=>d,db:()=>u,rN:()=>l});var a=n(805014),i=n(245954),o=n(875877);n(657548),n(76265),n(553362),n(138346);let s=(0,o.atom)(-1),l=(0,o.atom)([]);(0,o.atom)(!1);let c=(0,o.atom)(void 0);function d(e){switch(e){case a.Z6A.STICKY:return["sticky"];case a.Z6A.HIGHLIGHT:return["highlight"];default:return["base","baseLight"]}}function u(){let e=o.atomStore.get(c);if(!e)return;let r=e.base;if(!r)return;let n=(0,i.UN)().getDirectlySelectedNodes().filter(e=>"STICKY"===e.type||"SHAPE_WITH_TEXT"===e.type||"SECTION"===e.type||"CONNECTOR"===e.type||"VECTOR"===e.type||"HIGHLIGHT"===e.type),a=new Map;n.forEach(e=>{e.immutableFrameShape&&(e=e.immutableFrameShape);let r=e.fills.length>0?e.fills[0].color:void 0,n=e.strokePaints.data.length>0?e.strokePaints.data[0].color:void 0,i=r||n;i&&(a.has(i)?a.set(i,a.get(i)+1):a.set(i,1))});let s=Array.from(a.entries()).sort((e,r)=>r[1]-e[1]),l=new Map,d=r.sort(()=>Math.random()-.5);s.forEach((e,r)=>{l.set(e[0],d[r%d.length])}),n.forEach(e=>{if(e.immutableFrameShape&&(e=e.immutableFrameShape),e.fills.length>0){let r=e.fills[0].color,n=r?l.get(r):void 0;n&&(e.fills=[{type:"SOLID",color:n}])}else if(e.strokePaints.data.length>0){let r=e.strokePaints.data[0].color,n=r?l.get(r):void 0;n&&(e.strokePaints={data:[{type:"SOLID",color:n}],blobs:[]})}})}(0,o.atom)(0)},257149:(e,r,n)=>{n.d(r,{f:()=>l});var a=n(805014),i=n(245459),o=n(875877);let s={positionRelativeToSelection:a.cfv.ABOVE,currentlySelectedNode:{nodeId:i.AD,ariaLabel:null}},l=(0,o.atomWithReducer)(s,(e,r)=>{switch(r.type){case"SET_POS_RELATIVE_TO_SELECTION":return{...e,positionRelativeToSelection:r.payload};case"SET_CURRENTLY_SELECTED_NODE":return{...e,currentlySelectedNode:r.payload};default:return e}})},306708:(e,r,n)=>{n.d(r,{UM:()=>l,zW:()=>c});var a=n(411855),i=n(629019),o=n.n(i),s=n(563192);n(693565);let l="dlt_banner_shortcut_button",c=(0,a.memo)((0,a.forwardRef)(function(e,r){let{shortcut:n,onClick:i,isActive:l,recordingKey:c,dataElementTarget:d,isPressed:u}=e,m=(0,s.rf)((0,s.Pt)("dltBannerShortcutButton",c),"click",i),p=o()("dlt_banner_inline_elements--shortcutButton--LOMMi",{"dlt_banner_inline_elements--active--zWunk":l,"dlt_banner_inline_elements--pressed--36odr":u});return a.createElement("button",{ref:r,className:p,onClick:m,"data-element-target":d},n)}))},605931:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(805014),s=n(252207),l=n(306708);(0,a.memo)(function(e){let r=(0,i.d4)(e=>e.mirror.appModel.currentTool===o.NLJ.COMMENTS),n=(0,a.useCallback)(()=>{r?o.glU.triggerActionInUserEditScope("set-tool-default",{source:l.UM}):o.glU.triggerActionInUserEditScope("set-tool-comments",{source:l.UM})},[r]);return a.createElement(l.zW,{shortcut:"C",onClick:n,isActive:r,recordingKey:"comment",isPressed:e.isPressed})}),(0,a.memo)(function(e){let r=(0,i.d4)(e=>"REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&e.multiplayerEmoji.isChatting),n=(0,a.useCallback)(e=>{if(r){s.CB.closeWheel();return}s.CB.startChat(e.clientX,e.clientY,l.UM)},[r]);return a.createElement(l.zW,{shortcut:"/",onClick:n,isActive:r,recordingKey:"cursorChat",dataElementTarget:"dlt-banner-chat-shortcut",isPressed:e.isPressed})}),(0,a.memo)(function(e){let r=(0,a.useRef)(null),n=(0,i.d4)(e=>{let r="WHEEL"===e.multiplayerEmoji.type,n="REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&!!e.multiplayerEmoji.imageUrl;return r||n}),o=(0,a.useCallback)(()=>{if(n){s.CB.closeWheel();return}let e=r.current?.getBoundingClientRect()??{x:0,y:0},a=e.x+100,i=e.y-200;s.CB.handleShortcutPressWithType({viewportX:a,viewportY:i,source:l.UM,wheelType:"REACTION"}),s.CB.handleShortcutRelease(a,i)},[n]);return a.createElement(l.zW,{ref:r,shortcut:"E",onClick:o,isActive:n,recordingKey:"emote",dataElementTarget:"dlt-banner-emote-shortcut",isPressed:e.isPressed})})},873137:(e,r,n)=>{n.d(r,{c5:()=>o,gT:()=>s});var a=n(875877),i=(e=>(e.ClickOut="clickOut",e.KeyboardEsc="keyboardEsc",e.ToolSelected="toolSelected",e.ChevronClicked="chevronClicked",e.PropertyChanged="propertyChanged",e.CloseButton="closeButton",e.ClickDemotedDlt="clickDemotedDlt",e.OpenedShapesSidebar="openedShapesSidebar",e))(i||{});let o=(0,a.atom)({stage:"FULL",thresholdWidth:774,numPrimaryTools:4});(0,a.atomWithReducer)({state:"closed"},function(e,r){return"open"===r.type?{state:"open",tool:r.tool}:"close"===r.type&&"open"===e.state&&"clickOut"!==r.source?{state:"closed"}:e});let s=(0,a.atom)(!1)},788894:(e,r,n)=>{n.d(r,{YB:()=>i,hx:()=>o}),n(411855),n(188507),n(629019);var a=n(563192);n(927030),n(366172),n(923219),n(695024),n(781865);let i=1500;function o(e){return a.Pt("delightfulToolbar",e)}},169253:(e,r,n)=>{n.d(r,{Dq:()=>m,E$:()=>p,LX:()=>f,T7:()=>g,XQ:()=>c,n6:()=>h,ns:()=>_,qB:()=>d,zQ:()=>u});var a=n(805014),i=n(841962),o=n(475824),s=n(219403),l=n(107315);l.uM,l.wv,l.Iz,l.g5;let c=[{type:"SOLID",color:(0,s.BV)(a.daH.BLACK,"base")}],d=l.wv,u=1,m=[{type:"SOLID",color:(0,s.BV)(a.daH.HIGHLIGHT_YELLOW,"highlight")}];function p(){return(0,s.BV)(a.Ez5?.uiState().showUI3Colors.getCopy()?a.daH.STICKY_GRAY_UI3:a.daH.STICKY_GRAY_LIGHT,"sticky")}let h=o.F.parse((0,s.Mr)((0,i.kc)().figjam_dlt_bw_shapes?a.daH.WHITE:a.daH.VIOLET_LIGHT)),_=o.F.parse((0,s.Mr)((0,i.kc)().figjam_dlt_bw_shapes?a.daH.GRAY_DARK:a.daH.NONE,"rgba(0,0,0,0)")),g=(0,i.kc)().figjam_dlt_bw_shapes?a.xbm.SOLID:a.xbm.NONE,f=(0,s.BV)(a.daH.GRAY,"baseLight")},554147:(e,r,n)=>{n.d(r,{nS:()=>a});let a=n(411855).createContext({state:{draggedTool:void 0,draggedToolCanCancel:!0,shouldFinishClick:!0},dispatch:()=>null})},540680:(e,r,n)=>{n.d(r,{FF:()=>h,hv:()=>_,rD:()=>p,oV:()=>m,bz:()=>g}),n(411855);var a=n(188507);n(875877);var i=n(747484),o=n(73041),s=n(45362),l=n(805014);function c(){return!!(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===l.m1T.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId)}var d=n(427494);n(838200);var u=n(948927);function m(){let e=(0,d.aV)(),r=(0,o.ow)(),n=(0,u.Td)(),s=(0,a.d4)(e=>!!e.user);return!e&&r&&n&&!i.Ay.isIpadNative&&s}function p(){let e=(0,d.aV)(),r=(0,o.ow)(),n=c(),s=(0,a.d4)(e=>!!e.user);return!e&&r&&n&&!i.Ay.isIpadNative&&s}function h(){let e=(0,a.d4)(e=>e.mirror?.appModel.showUi),r=(0,o.ow)(),n=(0,a.d4)(e=>e.mirror?.appModel.isReadOnly),i=m(),s=p();return r&&e&&(!n||i||s)}function _(e={}){let{isEnabledForViewers:r}=e,n=(0,d.aV)(),a=(0,u.Td)(),i=c();return n||a&&!r||i&&!r}function g(){let e=(0,s.kD)(),r=(0,s.tS)(),n=(0,u.Td)();return!!e&&r&&n}n(873137),n(227070)},994917:(e,r,n)=>{n.d(r,{Hm:()=>E,yl:()=>f});var a=n(411855),i=n(188507),o=n(805014),s=n(315145),l=n(190500),c=n(901152),d=n(688656),u=n(788894),m=n(684820),p=n(246089),h=n(882200),_=n(324588),g=n(781865);let f="delightful-toolbar-universal-insert";function E(){let e=(0,i.d4)(e=>e.universalInsertModal.showing),r=(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.NONE),n=e&&r,E=(0,i.wA)(),y=(0,a.useCallback)(()=>{n?(E(s.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:_.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:_.fK}),E(s.En({initialX:0,initialY:0})),(0,l.Cu)({source:_.fK},"action_open_universal_insert_modal"))},[E,n]);return a.createElement("div",{"data-element-target":"delightful-toolbar-universal-insert-button",className:g.Zh},a.createElement(p.IB,{toolType:"universal-insert",recordingKey:(0,u.hx)("universal-insert"),isSelected:n,className:c.pb.isGoogleClassroomIntegration()?g.vy:g.pN,onClick:y,"data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt",hasOpenSubmenu:n,onboardingKey:f},e=>a.createElement(m.gd,{toolType:"universal-insert",inactiveIcon:a.createElement(h.lV,null),hoveredIcon:a.createElement(h.AZ,null),activeIcon:a.createElement(h.cN,null),isSelected:n,isHovered:e})))}},142783:(e,r,n)=>{n.d(r,{x:()=>H});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(841962),c=n(875877),d=n(499875),u=n(265851),m=n(303433),p=n(328099),h=n(901152),_=n(49039),g=n(661137),f=n(15092),E=n(354465),y=n(567095),b=n(688656),v=n(523848),T=n(811257),I=n(873137),S=n(788894),w=n(178660),A=n(994917),C=n(917639),N=n(684820),L=n(921428),O=n(246089),R=n(882200),P=n(324588),D=n(436795),k=n(488527),M=n(112432),F=n(781865);let x=k.YCy,U=[{src:(0,l.ck)("9cd2eb2ff31cb221dce81ca1e67aa51e12b24166"),zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:(0,l.ck)("276fdbb8f6edbcb958f84235ebfc58b63eab0fc2"),zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:(0,l.ck)("94db9cf93e2a26f927d5f1a7f066f8b045985011"),zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:(0,l.ck)("004b50b1460d47029608e9aaa66c09c1c94c6741"),zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function B({recentItems:e,toolbarIconScale:r,isModalOpen:n}){let i=(0,w.ws)(e);return a.createElement("div",{className:s()(F.z6,F.ac,M.JY),style:{width:112*r}},U.map((e,o)=>{var s,l;let c=i[o];return a.createElement(G,{key:c?.id||e.src,zIndex:x+1+e.zIndex,width:e.width*r,height:e.height*r,isModalOpen:n,transform:(s={x:e.translateStart.x*r,y:e.translateStart.y*r},l=e.rotateStart,`translate(calc(-50% + ${s.x}px), calc(-50% + ${s.y}px)) rotate(${l}deg)`)},c?a.createElement(C.E,{item:c,width:e.width*r,height:e.height*r,disableTooltips:!0}):a.createElement("img",{src:e.src,alt:"",className:M.VF}))}))}function V({onClick:e,isSelected:r,isHovered:n}){return a.createElement("div",{className:u.s.flex.itemsCenter.justifyCenter.mx20.h40.w40.$},a.createElement(O.IB,{toolType:"universal-insert-collage",recordingKey:(0,S.hx)("universal-insert-plus"),isSelected:r,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":b.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},a.createElement(N.gd,{toolType:"universal-insert-collage",inactiveIcon:a.createElement(R.nX,null),hoveredIcon:a.createElement(R.ZH,null),activeIcon:a.createElement(R.cs,null),isSelected:r,isHovered:n})))}function G({zIndex:e,width:r,height:n,transform:i,isModalOpen:o,children:l}){return a.createElement("div",{className:s()(M.s,{[M.r3]:o}),style:{zIndex:e,width:r,height:n,transform:i}},a.createElement("div",{className:M.f_},l))}function H(e,r){let[n,i]=(0,a.useState)(!1),o=(0,a.useRef)(!1),s=(0,a.useRef)([]);return s.current=r,(0,a.useEffect)(()=>{e||o.current||(o.current=!0,async function(){let e=[];for(let r of s.current)r&&e.push(new Promise(e=>{let n=new Image;n.src=r,n.addEventListener("load",()=>e()),n.addEventListener("error",()=>e())}));await Promise.all(e),i(!0)}())},[e]),n}function W({toolbarIconScale:e}){let r=(0,f.TA)(),[n,o]=(0,a.useState)(!1),s=(0,i.wA)(),l=(0,w.NT)(),d=(0,c.useAtomValue)(I.c5),u=(0,_.XM)(),b=(0,g.sZ)(),N=(0,i.d4)(e=>e.universalInsertModal.showing),R=(0,p.fG)(),k=(0,D.r)(N,d?.stage!=="FULL"?T.p.MORE:void 0);(0,a.useEffect)(()=>{s(v.cd.fetchTemplatesMetadata({key:y.$A.FigJam,orgId:b?.id})),s(v.cd.fetchWidgetsMetadata({key:y.$A.FigJam})),o(!0)},[s,b?.id]);let x=(0,E.oh)(m.fC),U=(0,E.oh)(v.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:y.$A.FigJam})),G=(0,E.oh)(v.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:y.$A.FigJam})),W=H(!n||x||U||G,l.map(e=>(0,C.h)(e,R,r??void 0)))?l.map(e=>e.id||"").sort((e,r)=>e.localeCompare(r)).join(""):"loading",K=u&&d?.stage==="MINIMIZED_ZERO"||d?.stage==="MINIMIZED"||d?.stage==="CUT_OFF";return a.createElement(L.XN,{alignment:"CENTER"},a.createElement(O.IB,{toolType:"universal-insert-collage",recordingKey:(0,S.hx)("universal-insert-collage"),isSelected:N,className:h.pb.isGoogleClassroomIntegration()?F.vy:F.qs,onClick:k,ariaLabel:"browse-all-resources-dlt",onboardingKey:A.yl,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:N},r=>a.createElement(L.ti,{isSelected:r,noScaleAnimation:!0,isRightEdge:!0},a.createElement("div",{className:M.Ge,"data-onboarding-key":"figjam-saves","data-element-target":P.b,"data-cancel-insertable-resource-drag-and-drop":!0},!K&&a.createElement(B,{key:W,recentItems:l,toolbarIconScale:e,isModalOpen:N}),a.createElement(V,{onClick:k,isSelected:N,isHovered:r})))))}function K(){return a.createElement(L.XN,{alignment:"CENTER"},a.createElement("div",{"data-element-target":P.b,className:M.V6},a.createElement(A.Hm,null)))}(0,a.memo)(function({toolbarIconScale:e}){return a.createElement(d.tH,{fallback:a.createElement(K,null),boundaryKey:"UniversalInsertCollage"},a.createElement(W,{toolbarIconScale:e}))})},911569:(e,r,n)=>{n.d(r,{J:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(781865);function l({className:e,disabled:r,isDragging:n,children:i,"aria-hidden":l}){return a.createElement("div",{"aria-disabled":r,"aria-hidden":l,className:o()(s.F0,{[e||""]:!!e,[s.FK]:r,[s.Bx]:n}),"data-fullscreen-intercept":!0},i)}},684820:(e,r,n)=>{n.d(r,{gd:()=>i});var a=n(411855);function i({toolType:e,inactiveIcon:r,hoveredIcon:n,activeIcon:i,isHovered:o,isSelected:l}){return a.createElement(s,{toolType:e},a.createElement("div",{className:"dlt_hoverable_icon--centeredIcon--clLyK"},l?i:o?n:r))}n(629019),n(563192),n(137565),n(76265),n(540680),n(882200);let o=a.createContext({enableHiding:!1,visibleTool:"text"});function s({toolType:e,children:r}){let n=a.useContext(o);return a.createElement(a.Fragment,null,n.enableHiding&&n.visibleTool!==e?null:r)}},921428:(e,r,n)=>{n.d(r,{XN:()=>s,ti:()=>l});var a=n(411855),i=n(629019),o=n.n(i);function s({alignment:e,children:r,onMouseEnter:n,onMouseLeave:i,innerRef:s}){return a.createElement("div",{className:o()("dlt_submenu--submenuContainer--M4ufs toolbar--passthruLayout--fN4I1",{"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:n,onMouseLeave:i,ref:s},r)}function l({isSelected:e,children:r,explicitWidth:n,shouldCenterContent:i,noScaleAnimation:s,isRightEdge:l}){return a.createElement("div",{style:{width:n},className:o()("dlt_submenu--toolBackground--St0Y2 toolbar--passthruLayout--fN4I1",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!s,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":i,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!l})},r)}n(875877),n(137565),n(677840),n(76265),n(513748),n(8153),n(20620),n(540680),n(796288),n(575561),n(739513),n(882200)},246089:(e,r,n)=>{n.d(r,{IB:()=>y});var a=n(411855),i=n(629019),o=n.n(i),s=n(666308),l=n(563192),c=n(137565),d=n(310020),u=n(140835),m=n(554147),p=n(540680),h=n(928343),_=n(430583),g=n(911569),f=n(781865);let E=(0,a.forwardRef)(({toolType:e,isSelected:r,onClick:n,children:i,tooltipOffset:u={offsetX:0,offsetY:12},tooltipLocation:h="above",className:E,recordingKey:y,onboardingKey:b,ButtonLayout:v=g.J,isDisabled:T=!1,clickOnMouseDown:I=!1,inTabOrder:S=!0,ariaLabel:w,isHovered:A,isEnabledForViewers:C=!1,onMouseEnter:N,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,hasOpenSubmenu:D,testId:k,...M},F)=>{let{state:x,dispatch:U}=(0,a.useContext)(m.nS),B=(0,p.hv)({isEnabledForViewers:C})||T,V=x.draggedTool===e,G=w||M["data-tooltip"],H=e=>{e.preventDefault(),e.stopPropagation(),x.shouldFinishClick&&!I&&n(e)};return a.createElement(c.D8,{className:o()(f.Zh,f.$y,{[f.ll]:B}),recordingKey:y,onMouseEnter:N,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,onPointerDown:B?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),I?(n(e),U({type:"cancel drag"})):U({type:"start click"}),!_.T.RECORD_DETAILED_EVENTS)return l.aH},onClick:B?void 0:H,"data-tooltip-type":V?null:M["data-tooltip-type"],"data-tooltip-submenu-open":D,"data-tooltip":M["data-tooltip"],"data-tooltip-offset-x":M["data-tooltip-offset-x"]??u.offsetX,"data-tooltip-offset-y":M["data-tooltip-offset-y"]??u.offsetY,"data-tooltip-show-above":"above"===h||void 0,"data-tooltip-show-below":"below"===h||void 0,"data-tooltip-show-left":"left"===h||void 0,"data-tooltip-bottom-flip-margin":M["data-tooltip-bottom-flip-margin"],"data-onboarding-key":b,"data-fullscreen-intercept":!0,"data-testid":k},a.createElement(v,{className:E,isHovering:A,isSelected:r,disabled:B,isDragging:V,"aria-hidden":!0},i),a.createElement(c.D8,{className:o()(f.yG,f.dR,{[f.ll]:B,[f.vu]:r,[f.Lt]:"select"===e,[f.sD]:"hand"===e}),onClick:B?void 0:H,onKeyDown:B?void 0:e=>{e.keyCode===s.Uz.ENTER&&x.shouldFinishClick&&!I&&n(e)},forwardedRef:F,role:S?"button":void 0,tabIndex:S&&!B?0:-1,"aria-hidden":!S,"aria-label":G&&S?function(e){try{return(0,d.A)(e)||e}catch(r){return e}}(G):void 0,"aria-disabled":B,"data-fullscreen-intercept":!0}))}),y=(0,a.forwardRef)(({children:e,hasExtraLongHoverTime:r,...n},i)=>{let{isHovered:o,hoverTarget:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onTouchStart:u,onTouchEnd:m}=(0,h.W)(n.onClick,r),p="function"==typeof e?e(o,s):e;return a.createElement(E,{...n,ref:i,isHovered:o,onMouseEnter:l,onMouseLeave:d,onMouseMove:c,onTouchStart:u,onTouchEnd:m},p)});(0,u.tf)(y)},796288:(e,r,n)=>{var a=n(759240);a.lLk.id,a.kp0.id,a.Njd.id,a.MJs.id,a.zoI.id,a.wRI.id,a.Kze.id,a.Wd_.id},383462:(e,r,n)=>{n.d(r,{B:()=>s});var a=n(805014),i=n(875877);let o=a.cxo.SELECTION,s=(0,i.atom)(o)},227070:(e,r,n)=>{n.d(r,{Vi:()=>o});var a=n(188507),i=n(805014);function o(){return(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===i.NLJ.COMMENTS)}n(841962),n(547748),n(992155)},287381:(e,r,n)=>{n.d(r,{qV:()=>l,ym:()=>s});var a=n(190500);let i={toggles_mute:"toggles_mute",changes_volume:"changes_volume"},o=(e,r,n,i)=>{(0,a.ds)(e,r.openFile?.key,r,{...n,multiplayer_count:r.multiplayer.allUsers.length},i)},s=(e,r)=>o(i.toggles_mute,e,{isMuted:r}),l=(e,r)=>o(i.changes_volume,e,{volume:r})},986743:(e,r,n)=>{n.d(r,{$_:()=>c,I8:()=>d,P0:()=>i,_s:()=>o,c4:()=>l,om:()=>u});var a=n(446979);function i(e){let r=[];return e.forEach(e=>{let n=Math.floor(Math.random()*e.cuesheet.tracks.length);e.start_at_ms=e.cuesheet.tracks[n].start_time,r.push(e)}),r}async function o({songID:e,onSuccess:r,onNotFound:n}){try{await a.N.getActive({songID:e}),r()}catch(r){if(404===r.status){n();return}throw console.warn(`Failed to fetch active song with id ${e}: ${r}`),n(),r}}let s=["play","pause","previoustrack","nexttrack","seekbackward","seekforward","seekto","stop"];function l(){return"mediaSession"in navigator&&!!navigator.mediaSession.metadata}function c(e,r){if(!e)return;let{title:n,album_art:a}=e;if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=new window.MediaMetadata({title:n,artist:"FigJam Music",artwork:[{src:a||""}]}),s))try{navigator.mediaSession.setActionHandler(e,()=>{})}catch(r){console.warn(`Attempting to stub out all action handlers for media session, but the media session action '${e}' is not supported`)}r&&navigator.mediaSession.setActionHandler("stop",()=>{r()})}}function d(){if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=null,s))try{navigator.mediaSession.setActionHandler(e,null)}catch(r){console.warn(`Attempting to null all custom action handlers for media session, but the media session action '${e}' is not supported`)}navigator.mediaSession.setActionHandler("play",()=>{})}}function u(){navigator.mediaSession.setActionHandler("play",null)}},606276:(e,r,n)=>{n.d(r,{FR:()=>s,P$:()=>i,YI:()=>o});var a=n(798361);function i(e){return e?e.isPaused?e.timeRemainingMs:e.timeRemainingMs-performance.now()+e.timeOrigin:-1/0}function o(e){return e<10?`0${e}`:`${e}`}function s(){let e=(0,a.F4)();return!!e?.shouldShowTimerOnTheLeft}},810011:(e,r,n)=>{var a=n(875877),i=n(437068),o=n(927150),s=n(606276);function l(){let e=(0,i.DN)().get("last-timer-set-time")||180;return{seconds:(0,s.YI)(e%60),minutes:(0,s.YI)(Math.floor(e/60)),lastUsedTime:e,isStopping:!1,lastAction:{type:"reset-state"}}}(0,a.atomWithReducer)(l(),(e,r)=>{let n={...e,lastAction:r};switch(r.type){case"set-seconds":return{...n,seconds:r.seconds};case"set-minutes":return{...n,minutes:r.minutes};case"set-time":return{...n,minutes:r.minutes,seconds:r.seconds};case"add-minutes":let a=Math.min(Math.max(0,parseInt(n.minutes)+r.minutes),99).toString(),i=1===a.length?"0"+a:a;return{...n,minutes:i};case"start-timer":let o=60*parseInt(n.minutes)+parseInt(n.seconds);if(1e3*o<=0)return n;return{...n,lastUsedTime:o};case"reset-state":return l();default:return n}});let c=(0,o.bt)(e=>e.timer),d=(0,a.atom)({});(0,a.withEffect)((0,a.atom)(e=>(e(d),Math.max(0,Math.ceil((0,s.P$)(e(c).time)/1e3))),(e,r,n)=>{r(d,{})}),({setSelf:e})=>{let r=setInterval(()=>{let r=a.atomStore.get(c);!r||!r.time||r?.time?.isPaused||e("RECOMPUTE")},200);return()=>clearInterval(r)})},160029:(e,r,n)=>{n.d(r,{V3:()=>A,w:()=>w,HG:()=>C});var a=n(411855);n(188507);var i=n(138225),o=n(22562);n(805014);var s=n(745701),l=n(134288),c=n(323434),d=n(883504),u=n(563192),m=n(663844),p=n(76265),h=n(910164);n(463713);var _=n(220482),g=n(988523),f=n(289765),E=n(915265),y=n(16564),b=n(329753),v=n(488396),T=n(325184);n(619107),n(695024);var I=n(488527),S=n(580368);let w=32,A=7.5,C=256;var N=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(N||{}),L=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(L||{});function O({clientHeight:e,scrollHeight:r,scrollTop:n}){return 1>Math.abs(r-e-n)}function R({numTotalVotes:e,isMostVoted:r}){return a.createElement("span",{className:S.TK},a.createElement("span",null,(0,p.tx)("voting.pin.votes",{numVotes:e})),r&&a.createElement("img",{src:v.Ys,className:S.C0,alt:(0,p.t)("voting.pin.medal_img_alt")}))}function P({reportWidth:e,numTotalVotes:r,isMostVoted:n,scale:i,padding:o}){let s=a.useRef(null);return a.useLayoutEffect(()=>{let r=s.current;if(r){let{width:n}=r.getBoundingClientRect();window.myEl=r,e(n)}},[s,r,n,i,o.paddingLeft,o.paddingRight,o.paddingTop,o.paddingBottom,e]),a.createElement("div",{className:S.D9,style:{transform:`scale(${i})`},"aria-hidden":!0},a.createElement("span",{style:o,ref:s},a.createElement(R,{numTotalVotes:r,isMostVoted:n})))}function D({userId:e,nodeVotes:r}){let n=r.length>3,i=n?r.slice(0,2):r,o=r.length-2;return a.createElement("li",{key:e,className:S.QE},a.createElement(k,{userId:e}),a.createElement("div",{className:S.WK},i.map(e=>a.createElement(F,{key:e,stampId:e})),n&&a.createElement("span",{className:S._v},o)))}function k({userId:e}){let{user:r,loading:n}=(0,g.wW)(e);return a.createElement(a.Fragment,null,a.createElement(b.v,{userId:e,user:r,loading:n,size:24,loadingClassName:S.SD}),a.createElement(b.m,{userId:e,user:r,loading:n,defaultClassName:S.nT,loadingClassName:S.fK}))}function M({overflowCount:e}){return a.createElement("li",{className:S.Qf},a.createElement("div",{className:S.EA},a.createElement(v.xL,null)),a.createElement("span",{className:S.iG},(0,p.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})))}function F({stampId:e}){let r=(0,d.fU)(),n=(0,f.Fk)((e,r)=>{let n=e.get(r);return n?n.name:null},e),i=(()=>{let e=y.WJ.find(e=>e.label===n);return e&&(0,E.k6)(e,r)||y.tR})(),o=n?(0,p.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,p.t)("voting.pin.stamp_preview_alt_without_type");return a.createElement("img",{className:S.O8,src:i,alt:o})}a.memo(function({nodeVoteInfo:e,isMostVoted:r,pinState:n,setIsHovered:d,selectPin:g,deselectPin:f,viewportSize:E,currentUserId:y,recordingKey:b}){let v=(0,a.useRef)(null),C=(0,a.useRef)(null),[N,L]=(0,a.useState)(0),[k,F]=(0,a.useState)(!1),[x,U]=(0,a.useState)(!0),[B,V]=(0,a.useState)(0),[G,H]=(0,a.useState)(!1),W=(0,T.oC)(e),K={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[E],Y={large:1,medium:.9,small:.8,xSmall:.7}[E];(0,a.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,_.n3)(e.target,v.current)||f()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,f,e.guid]);let $=r?h.sx.colorBgvotingtertiary.$.backgroundColor:h.sx.colorBg.$.backgroundColor,j={default:{transform:`scale(${Y})`,backgroundColor:$,borderColor:$,opacity:1,...K},dimmed:{transform:`scale(${Y})`,backgroundColor:$,borderColor:$,opacity:.5,...K},hovered:{transform:"scale(1)",backgroundColor:$,borderColor:$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:$,...h.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},z={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:I.$tX,height:I.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:I.$tX,height:I.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},q=(0,a.useMemo)(()=>{let r=(0,T.zi)(y);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>r(e[0],n[0]))},[e.userIdToNodeVotes,y]),Z=q.length>3,X=Z?q.slice(0,2):q,J=Z?q.slice(2):[],Q={hovered:{height:`${w}px`},selected:{height:"auto"}},ee=(0,a.useCallback)(e=>{let r=0!==e;r!==k&&F(r);let n=C.current?.getScrollHeight(),a=C.current?.getTrackHeight(),i=void 0===n||void 0===a||O({clientHeight:a,scrollHeight:n,scrollTop:e});i!==x&&U(i)},[k,x]),et=(0,a.useCallback)(e=>{if(!e||!C.current){F(!1),U(!0);return}let r=C.current.getScrollTop(),n=C.current.getScrollHeight(),a=C.current.getTrackHeight();F(0!==r),U(O({clientHeight:a,scrollHeight:n,scrollTop:r}))},[]);return a.createElement(s.x,{transition:{duration:.1,ease:"easeInOut"}},a.createElement("div",{role:"button",tabIndex:0,className:S.UD,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:u.rf(b,"click",g),ref:v,style:{transform:`translateX(${10-N}px)`},id:e.guid},a.createElement(l.P.div,{className:S.yM,initial:!1,animate:n,variants:j},a.createElement("p",{className:S.wx},a.createElement(R,{numTotalVotes:W,isMostVoted:r}),a.createElement(l.P.span,{className:S.cG,initial:!1,animate:n,variants:z},"selected"===n&&a.createElement(i.K,{onClick:e=>{e.stopPropagation(),f(),d(!1)},"aria-label":(0,p.t)("general.close")},a.createElement(o.A,null)))),a.createElement(c.N,null,["selected","hovered"].includes(n)&&a.createElement(a.Fragment,null,a.createElement(l.P.div,{className:S.W0,animate:"selected"===n&&k&&!G?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),a.createElement(l.P.div,{className:S.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/Y})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/Y})`}},a.createElement(m.P,{ref:C,maxHeight:w*A,width:240,allowScrollAndZoomOver:!0,onScroll:ee,onCanScrollChange:et,forceRerenderCount:B},a.createElement("ul",{className:S.hQ},X.map(([e,r])=>a.createElement(D,{key:e,userId:e,nodeVotes:r})),Z&&a.createElement(l.P.div,{initial:!1,animate:n,variants:Q,onAnimationStart:()=>H(!0),onAnimationComplete:()=>{H(!1),V(e=>e+1)}},"hovered"===n&&a.createElement(M,{overflowCount:q.length-X.length}),"selected"===n&&J.map(([e,r])=>a.createElement(D,{key:e,userId:e,nodeVotes:r})))))),a.createElement(l.P.div,{className:S.W0,animate:"selected"!==n||x||G?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),a.createElement(P,{reportWidth:L,numTotalVotes:W,isMostVoted:r,scale:Y,padding:K}))})},488396:(e,r,n)=>{n.d(r,{Ys:()=>o,xL:()=>s});var a=n(411855),i=n(841962);(0,i.ck)("054596349bf8a2ae155aa7818cf2a3cbf483a9f4");let o=(0,i.ck)("295306027f272a9b0931ddec9321361f7cd8299b");function s(){return a.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}},625366:(e,r,n)=>{n(411855),n(188507),n(707062)},325184:(e,r,n)=>{n.d(r,{oC:()=>i,zi:()=>o}),n(411855),n(188507),n(805014),n(875877),n(747484),n(76265),n(736041),n(815153),n(353428),n(366172),n(176160),n(314540),n(689102),n(487388),n(914077),n(574431),n(206443),n(452863),n(181634),n(650604),n(625366);var a=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(a||{});function i(e){return Object.values(e.userIdToNodeVotes).reduce((e,r)=>e+r.length,0)}function o(e){return function(r,n){return r===e?-1:n===e?1:r.localeCompare(n)}}},181634:(e,r,n)=>{n.d(r,{Fn:()=>a,OO:()=>i}),n(411855),n(188507),n(805014),n(254773),n(875877),n(463713),n(49039),n(810011),n(452863),n(650604),n(625366);var a=(e=>(e.OPEN="meetings_panel_open",e.CLOSE="meetings_panel_close",e))(a||{}),i=(e=>(e.MEETINGS_TOOLBAR="meetings_toolbar",e.MEETINGS_MINIMIZED="meetings_minimized",e.MEETINGS_PANEL="meetings_panel",e.INSERTS_MENU="inserts_menu",e.QUICK_ACTIONS="quick_actions",e.IPAD_MENU="ipad_menu",e.MAKE_SOMETHING_V2_ONBOARDING="make_something_v2_onboarding",e))(i||{})},219403:(e,r,n)=>{n.d(r,{AF:()=>H,BV:()=>V,Cn:()=>U,Cz:()=>K,Mr:()=>W,TS:()=>x,V_:()=>G,zS:()=>B});var a=n(217950),i=n(805014),o=n(841962),s=n(550479),l=n(76265),c=n(475824),d=n(345256),u=n(861648),m=n(889148);let p=["base","baseLight","sticky","highlight","widget","pencilUI3","codeBlockTheme"];function h({colorsToCSS:e,lightDisplayColors:r,darkDisplayColors:n}){return{COLOR_TO_CSS:e,CSS_TO_COLOR:new Map(Array.from(e,([e,r])=>[r,e])),LIGHT_DISPLAY:r??e,DARK_DISPLAY:n??e}}let _=i.Hdj.V700,g=new Map;function f(e){return 0===g.size&&function(){let e=i.DV9?.getWhiteboardPaletteTypeToRampValue();if(e)for(let[r,n]of e.entries()){if(!p.includes(r)){(0,s.$D)(a.e.FIGJAM,Error(`${r} doesn't exist in the WhiteboardPaletteType union type`));continue}g.set(r,n)}}(),g.get(e)??_}let E=h({colorsToCSS:new Map([[i.daH.BLACK,m.jR],[i.daH.GRAY_DARK,m.vh],[i.daH.RED,m.N0],[i.daH.ORANGE,m.qm],[i.daH.YELLOW,m.Sb],[i.daH.GREEN,m.RO],[i.daH.BLUE,m.k0],[i.daH.VIOLET,m.zt],[i.daH.WHITE,m.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.BLACK,m.Ws],[i.daH.GRAY_DARK,m._M],[i.daH.BLUE,m.jc],[i.daH.VIOLET,m.mO],[i.daH.WHITE,m.az],[i.daH.RED,m.Af],[i.daH.ORANGE,m.n7],[i.daH.YELLOW,m.p5],[i.daH.GREEN,m.R2]])});function y(e=!1){return i.Ez5?.uiState().showUI3Colors.getCopy()&&!e?function(){let e=f("base");return h({colorsToCSS:new Map([[i.daH.BLACK,m.jR],[i.daH.GRAY_DARK,m.vh],[i.daH.YELLOW,(0,u.W)(u.r.YELLOW,e)],[i.daH.ORANGE,(0,u.W)(u.r.ORANGE,e)],[i.daH.RED,(0,u.W)(u.r.RED,e)],[i.daH.PINK,(0,u.W)(u.r.PINK,e)],[i.daH.VIOLET,(0,u.W)(u.r.VIOLET,e)],[i.daH.BLUE,(0,u.W)(u.r.BLUE,e)],[i.daH.TEAL,(0,u.W)(u.r.TEAL,e)],[i.daH.GREEN,(0,u.W)(u.r.GREEN,e)],[i.daH.WHITE,m.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():E}let b=h({colorsToCSS:new Map([[i.daH.GRAY,m.Z6],[i.daH.GRAY_LIGHT,m.xr],[i.daH.RED_LIGHT,m.Po],[i.daH.ORANGE_LIGHT,m.is],[i.daH.YELLOW_LIGHT,m.Qw],[i.daH.GREEN_LIGHT,m.bu],[i.daH.BLUE_LIGHT,m.oW],[i.daH.VIOLET_LIGHT,m.Py]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.GRAY,m._M],[i.daH.GRAY_LIGHT,m.A4],[i.daH.BLUE_LIGHT,m.X8],[i.daH.VIOLET_LIGHT,m.eN],[i.daH.RED_LIGHT,m._P],[i.daH.ORANGE_LIGHT,m.LL],[i.daH.YELLOW_LIGHT,m.fU],[i.daH.GREEN_LIGHT,m.c6]])});function v(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("baseLight");return h({colorsToCSS:new Map([[i.daH.GRAY,m.Z6],[i.daH.GRAY_LIGHT,m.U8],[i.daH.YELLOW_LIGHT,(0,u.W)(u.r.YELLOW,e)],[i.daH.ORANGE_LIGHT,(0,u.W)(u.r.ORANGE,e)],[i.daH.RED_LIGHT,(0,u.W)(u.r.RED,e)],[i.daH.PINK_LIGHT,(0,u.W)(u.r.PINK,e)],[i.daH.VIOLET_LIGHT,(0,u.W)(u.r.VIOLET,e)],[i.daH.BLUE_LIGHT,(0,u.W)(u.r.BLUE,e)],[i.daH.TEAL_LIGHT,(0,u.W)(u.r.TEAL,e)],[i.daH.GREEN_LIGHT,(0,u.W)(u.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():b}let T=h({colorsToCSS:new Map([[i.daH.STICKY_GRAY,m.oK],[i.daH.STICKY_RED,m.SW],[i.daH.STICKY_ORANGE,m.B9],[i.daH.STICKY_YELLOW,m.Pp],[i.daH.STICKY_GREEN,m.k7],[i.daH.STICKY_BLUE,m.JI],[i.daH.STICKY_VIOLET,m._x],[i.daH.STICKY_PINK,m.a6],[i.daH.STICKY_GRAY_LIGHT,m.Uw]]),lightDisplayColors:new Map([[i.daH.STICKY_GRAY_LIGHT,m.FQ],[i.daH.STICKY_GRAY,m.fh],[i.daH.STICKY_BLUE,m.yG],[i.daH.STICKY_VIOLET,m.DN],[i.daH.STICKY_RED,m.pZ],[i.daH.STICKY_PINK,m.i4],[i.daH.STICKY_ORANGE,m.Q2],[i.daH.STICKY_YELLOW,m.iU],[i.daH.STICKY_GREEN,m.h3]]),darkDisplayColors:new Map([[i.daH.STICKY_GRAY_LIGHT,m.PQ],[i.daH.STICKY_GRAY,m.T2],[i.daH.STICKY_BLUE,m.o$],[i.daH.STICKY_VIOLET,m.Zz],[i.daH.STICKY_RED,m.$b],[i.daH.STICKY_PINK,m.Q1],[i.daH.STICKY_ORANGE,m.aT],[i.daH.STICKY_YELLOW,m.K4],[i.daH.STICKY_GREEN,m.nL]])});function I(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("sticky");return h({colorsToCSS:new Map([[i.daH.WHITE,m.t1],[i.daH.STICKY_GRAY_UI3,m.Dd],[i.daH.STICKY_YELLOW,(0,u.W)(u.r.YELLOW,e)],[i.daH.STICKY_ORANGE,(0,u.W)(u.r.ORANGE,e)],[i.daH.STICKY_RED,(0,u.W)(u.r.RED,e)],[i.daH.STICKY_PINK,(0,u.W)(u.r.PINK,e)],[i.daH.STICKY_VIOLET,(0,u.W)(u.r.VIOLET,e)],[i.daH.STICKY_BLUE,(0,u.W)(u.r.BLUE,e)],[i.daH.STICKY_TEAL,(0,u.W)(u.r.TEAL,e)],[i.daH.STICKY_GREEN,(0,u.W)(u.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():T}function S(){return h({colorsToCSS:new Map([[i.daH.CODE_BLOCK_DRACULA,m.B8],[i.daH.CODE_BLOCK_DUOTONE_LIGHT,m.Tn],[i.daH.CODE_BLOCK_DUOTONE_SEA,m.OF],[i.daH.CODE_BLOCK_DUOTONE_SPACE,m.Zv],[i.daH.CODE_BLOCK_DUOTONE_EARTH,m.L5],[i.daH.CODE_BLOCK_DUOTONE_FOREST,m.QE]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}let w=h({colorsToCSS:new Map([[i.daH.HIGHLIGHT_GRAY,m.g$],[i.daH.HIGHLIGHT_RED,m.vD],[i.daH.HIGHLIGHT_ORANGE,m.Ah],[i.daH.HIGHLIGHT_YELLOW,m.wO],[i.daH.HIGHLIGHT_GREEN,m.Td],[i.daH.HIGHLIGHT_BLUE,m.qH],[i.daH.HIGHLIGHT_VIOLET,m.fV],[i.daH.HIGHLIGHT_WHITE,m.nG]]),lightDisplayColors:new Map([[i.daH.HIGHLIGHT_RED,m.qt],[i.daH.HIGHLIGHT_YELLOW,m.DE],[i.daH.HIGHLIGHT_GREEN,m.ev],[i.daH.HIGHLIGHT_BLUE,m.vY],[i.daH.HIGHLIGHT_VIOLET,m.gn],[i.daH.HIGHLIGHT_ORANGE,m.xu],[i.daH.HIGHLIGHT_GRAY,m.AN],[i.daH.HIGHLIGHT_WHITE,m.wl]]),darkDisplayColors:new Map([[i.daH.HIGHLIGHT_RED,m.qt],[i.daH.HIGHLIGHT_YELLOW,m.DE],[i.daH.HIGHLIGHT_GREEN,m.ev],[i.daH.HIGHLIGHT_BLUE,m.vY],[i.daH.HIGHLIGHT_VIOLET,m.gn],[i.daH.HIGHLIGHT_ORANGE,m.xu],[i.daH.HIGHLIGHT_GRAY,m.AN],[i.daH.HIGHLIGHT_WHITE,m.wl]])}),A=h({colorsToCSS:new Map([[i.daH.BLACK,m.jR],[i.daH.RED,m.N0],[i.daH.ORANGE,m.qm],[i.daH.YELLOW,m.Sb],[i.daH.GREEN,m.RO],[i.daH.BLUE,m.k0],[i.daH.VIOLET,m.zt],[i.daH.WHITE,m.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.BLACK,m.Ws],[i.daH.BLUE,m.jc],[i.daH.VIOLET,m.mO],[i.daH.WHITE,m.az],[i.daH.RED,m.Af],[i.daH.ORANGE,m.n7],[i.daH.YELLOW,m.p5],[i.daH.GREEN,m.R2]])});function C(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("pencilUI3");return h({colorsToCSS:new Map([[i.daH.BLACK,m.jR],[i.daH.RED,(0,u.W)(u.r.RED,e)],[i.daH.ORANGE,(0,u.W)(u.r.ORANGE,e)],[i.daH.YELLOW,(0,u.W)(u.r.YELLOW,e)],[i.daH.GREEN,(0,u.W)(u.r.GREEN,e)],[i.daH.BLUE,(0,u.W)(u.r.BLUE,e)],[i.daH.VIOLET,(0,u.W)(u.r.VIOLET,e)],[i.daH.WHITE,m.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():A}i.daH.BLACK,i.daH.WHITE,i.daH.GRAY_DARK,i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.BLUE,i.daH.BLUE_LIGHT,i.daH.VIOLET,i.daH.VIOLET_LIGHT,i.daH.RED,i.daH.RED_LIGHT,i.daH.ORANGE,i.daH.ORANGE_LIGHT,i.daH.YELLOW,i.daH.YELLOW_LIGHT,i.daH.GREEN,i.daH.GREEN_LIGHT,i.daH.PINK,i.daH.PINK_LIGHT,i.daH.INDIGO,i.daH.INDIGO_LIGHT,i.daH.COBALT,i.daH.COBALT_LIGHT,i.daH.TEAL,i.daH.TEAL_LIGHT,i.daH.OLIVE,i.daH.OLIVE_LIGHT,i.daH.STICKY_GRAY_LIGHT,i.daH.STICKY_GRAY,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_RED,i.daH.STICKY_PINK,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_COBALT,i.daH.STICKY_INDIGO,i.daH.STICKY_TEAL,i.daH.STICKY_OLIVE,i.daH.HIGHLIGHT_RED,i.daH.HIGHLIGHT_YELLOW,i.daH.HIGHLIGHT_GREEN,i.daH.HIGHLIGHT_BLUE,i.daH.HIGHLIGHT_VIOLET,i.daH.HIGHLIGHT_ORANGE,i.daH.HIGHLIGHT_GRAY,i.daH.HIGHLIGHT_WHITE,i.daH.CODE_BLOCK_DRACULA,i.daH.CODE_BLOCK_DUOTONE_LIGHT,i.daH.CODE_BLOCK_DUOTONE_SEA,i.daH.CODE_BLOCK_DUOTONE_SPACE,i.daH.CODE_BLOCK_DUOTONE_EARTH,i.daH.CODE_BLOCK_DUOTONE_FOREST;let N=(0,o.kc)().figjam_ui3_color_palette_v2?[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.TEAL,i.daH.BLUE,i.daH.VIOLET,i.daH.PINK,i.daH.WHITE]:[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.GREEN,i.daH.TEAL,i.daH.BLUE,i.daH.VIOLET,i.daH.PINK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.WHITE],L=[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE],O=(0,o.kc)().figjam_ui3_color_palette_v2?[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT,i.daH.GREEN_LIGHT,i.daH.TEAL_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT,i.daH.PINK_LIGHT]:[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.GREEN_LIGHT,i.daH.TEAL_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT,i.daH.PINK_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT],R=[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT,i.daH.GREEN_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT],P=[i.daH.BLACK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE],D=[i.daH.STICKY_GRAY,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK,i.daH.STICKY_GRAY_LIGHT],k=(0,o.kc)().figjam_ui3_color_palette_v2?[i.daH.WHITE,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_TEAL,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK]:[i.daH.WHITE,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_GREEN,i.daH.STICKY_TEAL,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW],M=[i.daH.HIGHLIGHT_GRAY,i.daH.HIGHLIGHT_RED,i.daH.HIGHLIGHT_ORANGE,i.daH.HIGHLIGHT_YELLOW,i.daH.HIGHLIGHT_GREEN,i.daH.HIGHLIGHT_BLUE,i.daH.HIGHLIGHT_VIOLET,i.daH.HIGHLIGHT_WHITE],F=[i.daH.CODE_BLOCK_DRACULA,i.daH.CODE_BLOCK_DUOTONE_LIGHT,i.daH.CODE_BLOCK_DUOTONE_SEA,i.daH.CODE_BLOCK_DUOTONE_EARTH,i.daH.CODE_BLOCK_DUOTONE_SPACE,i.daH.CODE_BLOCK_DUOTONE_FOREST];function x(e){switch(e){case"widget":case"base":return(i.Ez5?.uiState().showUI3Colors.getCopy()?N:L).map(e=>V(e,"base"));case"baseLight":return(i.Ez5?.uiState().showUI3Colors.getCopy()?O:R).map(e=>V(e,"baseLight"));case"sticky":return(i.Ez5?.uiState().showUI3Colors.getCopy()?k:D).map(e=>V(e,"sticky"));case"highlight":return M.map(e=>V(e,"highlight"));case"pencilUI3":return P.map(e=>V(e,"pencilUI3"));case"codeBlockTheme":return F.map(e=>V(e,"codeBlockTheme"))}}function U(e){return"base"===e}function B(e,r,n=i.daH.CUSTOM){let a;let o=c.F.format(e);switch(r){case"widget":case"base":a=y().CSS_TO_COLOR.get(o);break;case"baseLight":a=v().CSS_TO_COLOR.get(o);break;case"sticky":a=I().CSS_TO_COLOR.get(o);break;case"highlight":a=w.CSS_TO_COLOR.get(o);break;case"pencilUI3":a=C().CSS_TO_COLOR.get(o);break;case"codeBlockTheme":a=S().CSS_TO_COLOR.get(o)}return a??n}function V(e,r){let n;switch(r){case"widget":case"base":n=y().COLOR_TO_CSS.get(e);break;case"baseLight":n=v().COLOR_TO_CSS.get(e);break;case"sticky":n=I().COLOR_TO_CSS.get(e);break;case"highlight":n=w.COLOR_TO_CSS.get(e);break;case"pencilUI3":n=C().COLOR_TO_CSS.get(e);break;case"codeBlockTheme":n=S().COLOR_TO_CSS.get(e)}return n?c.F.parse(n):void 0}function G(e,r="base",n=(0,l.t)("whiteboard.colors.custom")){let a=Array.isArray(e)?e[0]:e,o=B(a,r);return"base"===r&&o===i.daH.CUSTOM&&(o=B(a,"baseLight")),function(e){switch(e){case i.daH.BLACK:return(0,l.t)("whiteboard.colors.black");case i.daH.WHITE:return(0,l.t)("whiteboard.colors.white");case i.daH.GRAY_DARK:return(0,l.t)("whiteboard.colors.dark_gray");case i.daH.GRAY:return(0,l.t)("whiteboard.colors.gray");case i.daH.GRAY_LIGHT:return(0,l.t)("whiteboard.colors.light_gray");case i.daH.YELLOW:return(0,l.t)("whiteboard.colors.yellow");case i.daH.YELLOW_LIGHT:return(0,l.t)("whiteboard.colors.light_yellow");case i.daH.ORANGE:return(0,l.t)("whiteboard.colors.orange");case i.daH.ORANGE_LIGHT:return(0,l.t)("whiteboard.colors.light_orange");case i.daH.RED:return(0,l.t)("whiteboard.colors.red");case i.daH.RED_LIGHT:return(0,l.t)("whiteboard.colors.light_red");case i.daH.PINK:return(0,l.t)("whiteboard.colors.pink");case i.daH.PINK_LIGHT:return(0,l.t)("whiteboard.colors.light_pink");case i.daH.VIOLET:return(0,l.t)("whiteboard.colors.violet");case i.daH.VIOLET_LIGHT:return(0,l.t)("whiteboard.colors.light_violet");case i.daH.INDIGO:return(0,l.t)("whiteboard.colors.indigo");case i.daH.INDIGO_LIGHT:return(0,l.t)("whiteboard.colors.light_indigo");case i.daH.COBALT:return(0,l.t)("whiteboard.colors.cobalt");case i.daH.COBALT_LIGHT:return(0,l.t)("whiteboard.colors.light_cobalt");case i.daH.BLUE:return(0,l.t)("whiteboard.colors.blue");case i.daH.BLUE_LIGHT:return(0,l.t)("whiteboard.colors.light_blue");case i.daH.TEAL:return(0,l.t)("whiteboard.colors.teal");case i.daH.TEAL_LIGHT:return(0,l.t)("whiteboard.colors.light_teal");case i.daH.GREEN:return(0,l.t)("whiteboard.colors.green");case i.daH.GREEN_LIGHT:return(0,l.t)("whiteboard.colors.light_green");case i.daH.OLIVE:return(0,l.t)("whiteboard.colors.olive");case i.daH.OLIVE_LIGHT:return(0,l.t)("whiteboard.colors.light_olive");case i.daH.STICKY_GRAY_LIGHT:return(0,l.t)("whiteboard.colors.light_gray");case i.daH.STICKY_GRAY:case i.daH.STICKY_GRAY_UI3:return(0,l.t)("whiteboard.colors.gray");case i.daH.STICKY_BLUE:return(0,l.t)("whiteboard.colors.blue");case i.daH.STICKY_VIOLET:return(0,l.t)("whiteboard.colors.violet");case i.daH.STICKY_RED:return(0,l.t)("whiteboard.colors.red");case i.daH.STICKY_PINK:return(0,l.t)("whiteboard.colors.pink");case i.daH.STICKY_ORANGE:return(0,l.t)("whiteboard.colors.orange");case i.daH.STICKY_YELLOW:return(0,l.t)("whiteboard.colors.yellow");case i.daH.STICKY_GREEN:return(0,l.t)("whiteboard.colors.green");case i.daH.STICKY_COBALT:return(0,l.t)("whiteboard.colors.cobalt");case i.daH.STICKY_INDIGO:return(0,l.t)("whiteboard.colors.indigo");case i.daH.STICKY_TEAL:return(0,l.t)("whiteboard.colors.teal");case i.daH.STICKY_OLIVE:return(0,l.t)("whiteboard.colors.olive");case i.daH.HIGHLIGHT_RED:return(0,l.t)("whiteboard.colors.pink");case i.daH.HIGHLIGHT_YELLOW:return(0,l.t)("whiteboard.colors.yellow");case i.daH.HIGHLIGHT_GREEN:return(0,l.t)("whiteboard.colors.green");case i.daH.HIGHLIGHT_BLUE:return(0,l.t)("whiteboard.colors.blue");case i.daH.HIGHLIGHT_VIOLET:return(0,l.t)("whiteboard.colors.violet");case i.daH.HIGHLIGHT_ORANGE:return(0,l.t)("whiteboard.colors.orange");case i.daH.HIGHLIGHT_GRAY:return(0,l.t)("whiteboard.colors.gray");case i.daH.HIGHLIGHT_WHITE:return(0,l.t)("whiteboard.colors.white");case i.daH.CODE_BLOCK_DRACULA:case i.daH.CODE_BLOCK_DUOTONE_EARTH:case i.daH.CODE_BLOCK_DUOTONE_FOREST:case i.daH.CODE_BLOCK_DUOTONE_LIGHT:case i.daH.CODE_BLOCK_DUOTONE_SEA:case i.daH.CODE_BLOCK_DUOTONE_SPACE:return d.A$.format((0,d.X0)(e));default:return}}(o)??n}function H(e,r="base"){let n=e+1;switch(r){case"highlight":return(0,l.t)("whiteboard.colors.palette.highlight",{index:n});case"baseLight":return(0,l.t)("whiteboard.colors.palette.light",{index:n});default:return(0,l.t)("whiteboard.colors.palette.base",{index:n})}}function W(e,r="rgba(255, 255, 255, 1)"){return y().COLOR_TO_CSS.get(e)??r}function K(e,r,n){let a;let o={...e,a:1},s=B(o,r);if(s===i.daH.NONE||s===i.daH.CUSTOM)return c.F.format(o);switch(r){case"baseLight":a=v();break;case"sticky":a=I();break;case"highlight":a=w;break;case"pencilUI3":a=C();break;case"codeBlockTheme":a=S();break;default:a=y()}return("light"===n?a.LIGHT_DISPLAY.get(s):a.DARK_DISPLAY.get(s))??c.F.format(o)}},604753:(e,r,n)=>{n.d(r,{ZE:()=>O});var a=n(411855),i=n(629019),o=n.n(i),s=n(230208),l=n(108982),c=n(563192),d=n(137565),u=n(771952),m=n(76265),p=n(475824),h=n(1518),_=n(620552),g=n(240327),f=n(688656),E=n(20620),y=n(575561),b=n(274225),v=n(739513),T=n(164739),I=n(651507),S=n(219403),w=n(308944),A=n(786072),C=n(686384);function N(e){return Array.isArray(e)?1===e.length?e[0]:void 0:e}let L={right:I.nm,center:void 0,left:I.Gu};function O({value:e,onColorChange:r,onOpacityChange:n,recordingKey:i,paletteType:o,additionalContentsTop:s,buttonSize:c,buttonBackground:d,buttonClassName:u,buttonCaretType:m,dropperDisabled:p,optionSize:h,customOpacity:_,ariaLabel:f,alignment:y,inlineButtonTooltip:b,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:T,isColorPopoverOpen:I,shouldDisableDataTooltip:w,setIsColorPopoverOpen:A,positionX:C,positionY:N,colorButtonSizeOverride:L,swatchStyle:O,shouldRenderCirclesWithContentBoxSizing:P}){let D=(0,l.R)(e=>e.mirror.selectionProperties.whiteboardNumSelectedByType),k={name:"figjam_node_color_change",properties:{node_type:D&&1===Object.keys(D).length&&Object.keys(D).pop()||"MIXED",...D}},{variations:M,type:F}=(0,E.Z9)(),x=(F===g.Yv.DEFAULT?(0,S.TS)(o):M[o].slice()).map((e,r)=>({option:e,tooltip:F===g.Yv.DEFAULT?(0,S.V_)(e,o):(0,S.AF)(r,o)})),U=x.length;if("base"===o){let e=(F===g.Yv.DEFAULT?(0,S.TS)("baseLight"):M.baseLight).map((e,r)=>({option:e,tooltip:F===g.Yv.DEFAULT?(0,S.V_)(e,"baseLight"):(0,S.AF)(r,"baseLight")}));x.push(...e)}return a.createElement(R,{options:x,value:{option:e},onColorChange:e=>r(e.option),onOpacityChange:n,recordingKey:i,paletteType:o,fixedNumColumns:U,analytics:k,additionalContentsTop:s,buttonSize:c,buttonBackground:d,buttonClassName:u,buttonCaretType:m,dropperDisabled:p,optionSize:h,customOpacity:_,alignment:y,ariaLabel:f,inlineButtonTooltip:b,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:T,isColorPopoverOpen:I,shouldDisableDataTooltip:w,setIsColorPopoverOpen:A,positionX:C,positionY:N,colorButtonSizeOverride:L,swatchStyle:O,shouldRenderCirclesWithContentBoxSizing:P})}function R({value:e,onColorChange:r,onOpacityChange:n,recordingKey:i,additionalContentsTop:o,additionalContentsBottom:l,options:d,inlineButtonTooltip:u,paletteType:p,fixedNumColumns:h,buttonSize:_,buttonBackground:g="dark",buttonClassName:f,buttonCaretType:E="down",dropperDisabled:b,optionSize:I,isDesignInlineMenu:w,analytics:A,customOpacity:C,ariaLabel:N,alignment:L,positionX:O,positionY:R,palettePickerPopoverWrapper:D,shouldDisableDataTooltip:k,isColorPopoverOpen:M,setIsColorPopoverOpen:F,shouldCustomColorPopoverCloseOnEscape:x,hasNonWhiteboardColors:U,onlyShowCustomColorPopover:B,customOptions:V,customOptionsHeader:G,swatchStyle:H,shouldRenderCirclesWithContentBoxSizing:W,colorButtonSizeOverride:K}){let[Y,$]=a.useState(!1),j={...(Array.isArray(e.option)?e.option[0]:e.option)??s.UE};return C&&(j.a=C),a.useEffect(()=>{F&&F(Y)},[Y,F]),B||Y?a.createElement(T.v,{target:a.createElement(y.$n,{onClick:()=>$(!Y),caret:E,active:"light"===g?"LOUD":"NORMAL",recordingKey:(0,c.Pt)(i,"colorSelectorButton"),className:f,tooltip:u||(0,S.V_)(e.option,p,(0,m.t)("whiteboard.inline_menu.color")),role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,p).toLocaleLowerCase()})},a.createElement(v.cd,{size:_,value:e.option,paletteType:p,background:g})),color:j,isOpen:Y,onColorChange:e=>{r({option:e})},onOpacityChange:e=>{n&&n(e)},onClose:()=>{$(!1)},theme:"dark",analytics:A,recordingKey:(0,c.Pt)(i,"customColorPopover"),showOpacity:null!=C,alignment:L,positionX:O,positionY:R,dropperDisabled:b,shouldCloseOnEscape:x}):a.createElement(P,{value:e,options:d,onColorChange:r,onCustomColor:()=>$(!0),additionalContentsTop:o,additionalContentsBottom:l,inlineButtonTooltip:u,paletteType:p,buttonSize:_,buttonClassName:f,buttonCaretType:E,buttonBackground:g,optionSize:I,isDesignInlineMenu:w,fixedNumColumns:h,analytics:A,recordingKey:i,ariaLabel:N,alignment:L,palettePickerPopoverWrapper:D,shouldDisableDataTooltip:k,positionX:O,positionY:R,isColorPopoverOpen:M,setIsColorPopoverOpen:F,hasNonWhiteboardColors:U,customOptions:V,customOptionsHeader:G,swatchStyle:H,shouldRenderCirclesWithContentBoxSizing:W,colorButtonSizeOverride:K})}function P({value:e,onColorChange:r,onCustomColor:n,recordingKey:i,additionalContentsTop:l,additionalContentsBottom:g,options:T,inlineButtonTooltip:I,paletteType:O,buttonSize:R,buttonClassName:P,buttonCaretType:D="down",buttonBackground:k="dark",optionSize:M,isDesignInlineMenu:F,fixedNumColumns:x,analytics:U,ariaLabel:B,alignment:V="center",palettePickerPopoverWrapper:G,shouldDisableDataTooltip:H,positionX:W,positionY:K,isColorPopoverOpen:Y,setIsColorPopoverOpen:$,hasNonWhiteboardColors:j,customOptions:z,customOptionsHeader:q,colorButtonSizeOverride:Z,swatchStyle:X,shouldRenderCirclesWithContentBoxSizing:J}){let Q=a.useRef((0,u.g)()),ee=a.useRef((0,u.g)()),et=N(e.option),er=(0,E.iN)(et,O),en=(0,E.iN)(et,"baseLight")&&"base"===O,ea=j?function(e,r){try{return!r.find(r=>{let n=N(r.option),a=N(e.option);return n&&a&&(0,s.DA)(n,a)})}catch(e){return console.error(e),!1}}(e,T):er&&en,ei=()=>{Y&&n()},eo=r=>ea?a.createElement(d.GG,{id:ee.current,...H?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,m.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()(C.s,{[A.H]:r}),key:"custom-color",role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),recordingKey:(0,c.Pt)(i,"colorSelectorCustomOption"),onPointerUp:ei},a.createElement(v.cd,{swatchStyle:{border:"1px solid rgba(0, 0, 0, 0.2)",boxSizing:"border-box",boxShadow:"none"},value:e.option,selectionState:"selected_custom",paletteType:O,background:"dark",size:"medium"})):a.createElement(d.GG,{id:ee.current,key:"custom-color",recordingKey:(0,c.Pt)(i,"colorSelectorCustomOption"),onPointerUp:ei,role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),className:o()(C.s,{[A.H]:r})},a.createElement(v.ZI,{shouldDisableDataTooltip:H})),{derivedNumColumnsInGrid:es,swatchGrid:el}=(({fixedNumColumns:e})=>{if(e)return{swatchGrid:(0,v.Wj)(e,B,Q.current),derivedNumColumnsInGrid:e};let{swatchGrid:r,numColumns:n}=(0,v.lX)(T.length,B,Q.current);return{derivedNumColumnsInGrid:n,swatchGrid:r}})({fixedNumColumns:x});return a.createElement(b.Fn,{value:e,onChange:e=>{r(e),U&&_.F.trackFromFullscreen("figjam_node_color_change",{source:"default",color:h.z5.format(e.option),...U.properties})},options:T,renderOption:({value:e,onClick:r,id:n,isSelected:s,isFocused:l})=>a.createElement(d.GG,{id:n,...H?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":e.tooltip||(0,S.V_)(e.option,O),"data-tooltip-show-above":!0},className:o()(C.s,{[A.H]:l}),key:p.F.format(e.option)+e.tooltip,"data-testid":"colorMenuOption",role:"option","aria-label":e.tooltip||(0,S.V_)(e.option,O),onPointerUp:e=>{Y&&r(e)},recordingKey:(0,c.Pt)(i,"colorSelectorOption",p.F.format(e.option)),tabIndex:-1},a.createElement(v.cd,{value:e.option,selectionState:s?"selected":"unselected",paletteType:O,size:M,background:"dark"})),renderButton:({value:e,ref:r,onClick:n,onKeyDown:o,active:s,activeOptionId:l})=>a.createElement(y.$n,{role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,O).toLocaleLowerCase()}),onPointerDown:n,onKeyDown:o,ariaActiveDescendant:l,ariaControls:Q.current,caret:D,active:s?"light"===k?"LOUD":"NORMAL":"NONE",recordingKey:(0,c.Pt)(i,"colorSelectorButton"),tooltip:I||(0,S.V_)(e.option,O,(0,m.t)("whiteboard.inline_menu.color")),isDesignInlineMenu:F,isNewSubmenu:"light"===k,className:P,buttonStyle:Z?.buttonSize,buttonChildrenStyle:Z?.buttonChildrenSize},a.createElement(v.cd,{size:R,value:e.option,paletteType:O,background:k,ref:r,swatchStyle:X,shouldRenderCirclesWithContentBoxSizing:J})),optionEquality:(e,r)=>!(Array.isArray(e.option)||Array.isArray(r.option))&&(0,s.DA)(e.option,r.option),OptionWrapper:el,PopoverWrapper:G||b.wM,additionalOptions:(e=!1)=>a.createElement(w.R,{customOption:eo(e),paletteType:O,numOptions:T.length,numColumns:es}),additionalOptionId:ee.current,additionalOptionOnChange:n,additionalContentsTop:l,additionalContentsBottom:g,positionX:W??L[V],positionY:K,onToggleMenuOpen:$,customOptions:z,customOptionsHeader:q})}},575561:(e,r,n)=>{n.d(r,{$n:()=>g,W1:()=>_,wv:()=>E});var a=n(411855),i=n(629019),o=n.n(i),s=n(137565),l=n(693565),c=n(688656),d=n(851773),u=n(50686),m=n(802160),p=n(112512),h=n(395397);function _({marginBottom:e,size:r,children:n,padding:i,menuRef:s,ariaLabel:l,role:c,tabIndex:d,ariaHidden:u,onBlurCapture:p,onFocus:h,propagateInputToFullscreen:_,testID:g,focusableDivTestId:f,darkModePreferred:E,editorTheme:y}){return a.createElement("div",{"aria-label":l,"aria-hidden":u,className:m.bH,role:c,tabIndex:d,ref:s,onBlurCapture:p,onFocus:h,"data-fullscreen-intercept":_,"data-testid":f,"data-preferred-theme":E?"dark":void 0,"data-editor-theme":y},a.createElement("div",{className:o()(m.zr,{[m.EX]:"small"===r}),style:{paddingRight:i,paddingLeft:i,marginBottom:e},"data-testid":g},n))}a.forwardRef((e,r)=>{let{id:n,svg:i,onClick:s,blurOnClick:c,onKeyDown:d,onMouseEnter:u,onMouseLeave:p,onPointerUp:h,onPointerDown:_,svgWidth:f,svgHeight:E,caret:y="none",size:b,tooltip:v,tooltipShortcutActionKey:T,tooltipType:I,resourceId:S,recordingKey:w,active:A="NONE",focused:C,disabled:N,svgStyle:L,buttonStyle:O,buttonChildrenStyle:R,useOriginalSrcFills_DEPRECATED:P,isNewSubmenu:D,ariaLabel:k,role:M,tabIndex:F,onboardingKey:x,testId:U}=e,{ariaActiveDescendant:B,ariaControls:V}=e;return a.createElement(g,{id:n,onClick:s,onKeyDown:d,onMouseEnter:u,onMouseLeave:p,onPointerUp:h,onPointerDown:_,blurOnClick:c,caret:y,ref:r,size:b,recordingKey:w,active:A,focused:C,disabled:N,className:o()({[m.$9]:N}),tooltip:v,tooltipShortcutActionKey:T,tooltipType:I,resourceId:S,buttonStyle:O,buttonChildrenStyle:R,isNewSubmenu:D,ariaLabel:k,ariaActiveDescendant:B,ariaControls:V,role:M,tabIndex:F,onboardingKey:x,testId:U},a.createElement(l.B,{svg:i,width:f,height:E,style:L,useOriginalSrcFills_DEPRECATED:P}))});let g=a.forwardRef((e,r)=>{let{id:n,children:i,onClick:l,onMouseEnter:p,onMouseLeave:h,onPointerUp:_,onPointerDown:g,onKeyDown:E,blurOnClick:b,disabled:v=!1,caret:T="none",animateCaret:I=!1,size:S="large",buttonStyle:w,buttonChildrenStyle:A,isNewSubmenu:C,isDesignInlineMenu:N,recordingKey:L,active:O="NONE",focused:R,tooltip:P,tooltipShortcutActionKey:D,tooltipType:k,tooltipMaxWidth:M,resourceId:F,testId:x,className:U="",ariaLabel:B,role:V,tabIndex:G,onboardingKey:H}=e,{ariaControls:W,ariaActiveDescendant:K}=e,Y=(0,u._r)(),$=a.Children.toArray(i),j=1===$.length&&"string"==typeof $[0].props.children,z=function({tooltip:e,shouldShowTooltips:r,tooltipType:n}){return e&&r?n||c.Ib.TEXT:void 0}({tooltip:P,shouldShowTooltips:Y,tooltipType:k}),q="combobox"===V&&"NONE"!==O;return a.createElement(s.GG,{id:n,"aria-label":function({ariaLabel:e,actualTooltipType:r,tooltip:n}){return e??(0,d.En)({"data-tooltip-type":r??c.Ib.TEXT,"data-tooltip":n??""})}({ariaLabel:B,actualTooltipType:z,tooltip:P}),"aria-controls":W,"aria-owns":q?W:void 0,"aria-activedescendant":q?K:void 0,"aria-pressed":"button"===V||null==V?"NONE"!==O:void 0,"aria-checked":"switch"===V?"NONE"!==O:void 0,"aria-expanded":"combobox"===V?"NONE"!==O:void 0,tabIndex:function(e,r){return void 0!==e?e:"option"===r?-1:0}(G,V),role:V,onClick:f(l,v),onKeyDown:f(E,v),onMouseUp:!v&&b?e=>{e.currentTarget.blur()}:void 0,onMouseEnter:f(p,v),onMouseLeave:f(h,v),onPointerUp:f(_,v),onPointerDown:f(g,v),className:o()({[m.x6]:!0,[m.BB]:!0,[m._T]:C,[m.Hh]:N,[m.cN]:"none"!==T&&!!i,[m.Ec]:"none"!==T&&!i,[m.EX]:"small"===S,[m.Pq]:"SOFT"===O,[m.k1]:"NORMAL"===O,[m.F$]:"LOUD"===O,[m.zt]:j,[m.gK]:!v,[m.bI]:R,[U]:!!U}),style:w,forwardedRef:r,recordingKey:L,"data-resource-id":F||void 0,"data-tooltip-show-above":!0,"data-tooltip-type":z,"data-tooltip-max-width":M,"data-tooltip-shortcut-key":D,"data-tooltip":P,"data-fullscreen-intercept":null==E?"true":void 0,"data-onboarding-key":H,dataTestId:x},a.createElement("div",{className:o()({[m.LJ]:j,[m.Qq]:!j,[m.Hh]:N,[m.EX]:"small"===S}),style:A},i),"none"!==T&&a.createElement(y,{caret:T,animateCaret:I,active:O}))});function f(e,r){return r?void 0:e}function E({size:e="tall",margin:r}){return a.createElement("div",{className:m.me,style:{height:"tall"===e?40:28,marginLeft:r,marginRight:r}})}let y=a.memo(({caret:e,animateCaret:r,active:n})=>a.createElement(l.B,{className:o()({[m.OW]:!0,[m.Ln]:r,[m.y9]:r&&"LOUD"===n}),svg:"up"===e?h.A:p.A}))},274225:(e,r,n)=>{n.d(r,{Fn:()=>g,wM:()=>_});var a=n(411855),i=n(191332),o=n(666308),s=n(399991),l=n(771952),c=n(366172),d=n(19776),u=n(575561),m=n(125769),p=n(518864),h=(e=>(e.fontFamilyControl="fontFamilyControl",e))(h||{});function _({children:e,padding:r}){return a.createElement(u.W1,{padding:r},a.createElement("div",{className:p.e},e))}function g({value:e,onChange:r,options:n,renderOption:u,renderButton:h,optionEquality:g,OptionWrapper:f=function(e,r){return function({children:e}){return a.createElement("div",{id:void 0,role:"listbox","aria-label":void 0,tabIndex:-1,className:p.W},e)}}(),additionalOptions:E,additionalOptionId:y,additionalOptionOnChange:b,additionalContentsTop:v,additionalContentsBottom:T,PopoverWrapper:I=_,positionX:S,positionY:w,responsivePositionY:A,popoverClassName:C,onToggleMenuOpen:N,parentComponent:L,customOptions:O,customOptionsHeader:R,overrideMenuOpenState:P,renderButtonRef:D,overrideMenuFocused:k}){let M=(0,a.useRef)(null),[F,x]=(0,a.useState)(!1),U=P?P.isOpenOverride:F,B=P?P.setIsOpenOverride:x,[V,G]=(0,a.useState)(0),[H,W]=(0,a.useState)(!1),K=k?k.focusedIndexOverride:V,Y=k?k.setFocusedIndexOverride:G,$=k?k.isFocusedByKeyboardOverride:H,j=k?k.setIsFocusedByKeyboardOverride:W,z=n.length+(O?O.length:0)+(null!=E?1:0),[q]=(0,a.useState)(()=>{let e=Array(z);for(let r=0;r<n.length;r++)e[r]=(0,l.g)();return null!=E&&(e[n.length]=y),e}),Z=new i.W,[X,J]=(0,a.useState)(!0);return a.useEffect(()=>{N&&N(U)},[U,N]),a.createElement(m.A,{target:h({value:e,ref:D??M,onKeyDown:e=>{switch(e.keyCode){case o.Uz.ESCAPE:U?B(!1):e.currentTarget?.blur();break;case o.Uz.ENTER:U&&(K>=0&&K<n.length?r(n[K],e):K===n.length&&E&&b?.(e));break;case o.Uz.RIGHT_ARROW:case o.Uz.LEFT_ARROW:case o.Uz.UP_ARROW:case o.Uz.DOWN_ARROW:if(!(0,o.sC)(e,0)){(0,d.f7)(e);break}if(j(!0),U&&z){let r=K;(r+=e.keyCode===o.Uz.UP_ARROW||e.keyCode===o.Uz.LEFT_ARROW?-1:1)>=z?r=0:r<0&&(r=z-1),Y(r)}else U||B(!0);e.preventDefault(),e.stopPropagation();break;case o.Uz.TAB:j(!1);break;case o.Uz.C:case o.Uz.V:case o.Uz.X:(0,o.Te)(e)&&(c.Y5.triggerAction(e.keyCode===o.Uz.C?"copy":e.keyCode===o.Uz.X?"cut":"paste"),e.stopPropagation(),e.preventDefault());break;default:(0,d.f7)(e)}},onClick:()=>{j(!1),B(!U),L&&"fontFamilyControl"===L&&((0,s.nl)()?J(!0):(J(!1),Z.reset(),Z.scheduleOnce(()=>{J(!0)},250)))},active:U,activeOptionId:null!=K?q[K]:void 0}),onClose:()=>{L&&"fontFamilyControl"===L&&Z.reset(),B(!1)},renderPopoverContents:i=>{let o=(n,a)=>{let i=e=>r(n,e),o=e=>{i(e),B(!1)};return u({value:n,id:q[a],onClick:e=>{(!L||"fontFamilyControl"!==L||X)&&o(e)},isSelected:g?g(n,e):n===e,isFocused:$&&K===a})},s=n.map(o),l=O?.map((e,r)=>o(e,r+s.length));return l?a.createElement(I,{side:i},v,a.createElement(f,null,s),R,a.createElement(f,null,l,E?.($&&K===s.length+l.length)),T):a.createElement(I,{side:i},v,a.createElement(f,null,s,E?.($&&K===s.length)),T)},isOpen:U,positionX:S,positionY:w,responsivePositionY:A,className:C})}},739513:(e,r,n)=>{n.d(r,{cd:()=>S,ZI:()=>w,lX:()=>L,Wj:()=>N});var a=n(411855),i=n(629019),o=n.n(i);n(230208);var s=n(563192),l=n(137565),c=n(612724),d=n(693565);n(238795);var u=n(76265),m=n(434992),p=n(688656),h=n(219403);let _="swatch--colorCircle--MdzUZ",g="swatch--selected--B4IKr",f="swatch--circleWrapper--grusN",E="swatch--swatch--qSnpF",y="swatch--swatchBorderOnDarkBackground--dOArC",b="swatch--small--PX3Sv",v="swatch--large--jAe-V",T="swatch--xsmall--hPL9b";var I=n(501191);let S=a.forwardRef(({value:e,paletteType:r,background:n="dark",size:i="medium",selectionState:s="unselected",swatchStyle:c,onClick:d,recordingKey:u,tooltip:m,shouldRenderCirclesWithContentBoxSizing:I=!1},S)=>{let w,A=null;return Array.isArray(e)&&e[1]&&(A=a.createElement("div",{className:"swatch--secondarySwatch--l8c8G",style:{background:(0,h.Cz)(e[1],r,n)},"data-testid":"colorCircle"})),w=Array.isArray(e)?e.length<=2&&e[0]?(0,h.Cz)(e[0],r,n):"rgba(255, 255, 255, 1)":(0,h.Cz)(e,r,n),a.createElement("div",{ref:S,className:o()({[_]:!0,[g]:"selected"===s,"swatch--selectedCustomLight--cNeeq":"selected_custom"===s&&"light"===n,"swatch--selectedCustomDark--Obz01":"selected_custom"===s&&"dark"===n,[v]:"large"===i,[b]:"small"===i,[T]:"xsmall"===i,"swatch--circleContentBoxSizing--BTH3i":I})},a.createElement("div",{className:f},a.createElement(l.D8,{className:o()(E,{"swatch--swatchBorderOnLightBackground--aPkrH":"light"===n,[y]:"dark"===n}),style:{background:w,...c},onClick:d,recordingKey:u,"data-tooltip-show-above":!0,"data-tooltip-type":m?p.Ib.TEXT:void 0,"data-tooltip":m,"data-testid":"colorCircle","data-clickable":!0}),A))});function w({onClick:e,swatchStyle:r,recordingKey:n,shouldDisableDataTooltip:i,selectionState:c,size:d="medium"}){return a.createElement(l.D8,{...i?{}:{"data-tooltip-type":p.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()({[_]:!0,[g]:"selected"===c,[v]:"large"===d,[b]:"small"===d,[T]:"xsmall"===d}),onClick:e,recordingKey:(0,s.Pt)(n,"colorSelectorCustomOption")},a.createElement("div",{className:f},a.createElement(l.D8,{className:o()("swatch--customSwatch---Nq7y swatch--swatch--qSnpF",y),style:r,"data-clickable":!0})))}let A=a.forwardRef(({value:e,size:r="medium",selectionState:n="unselected",swatchStyle:i,onClick:s,onPointerUp:c,recordingKey:d,tooltip:u},m)=>a.createElement("div",{ref:m,className:o()({[_]:!0,[g]:"selected"===n,[b]:"small"===r})},a.createElement("div",{className:f},a.createElement(l.D8,{className:o()(E,y),style:{backgroundImage:`url(${e})`,backgroundSize:"auto 100%",...i},onClick:s,onPointerUp:c,recordingKey:d,"data-tooltip-show-above":!0,"data-tooltip-type":u?p.Ib.TEXT:void 0,"data-tooltip":u}))));function C({children:e,numColumns:r=4,ariaLabel:n,id:i}){return a.createElement("div",{className:"swatch--swatchGrid--y6deW",style:{"--columns":r},"aria-label":n,role:"listbox",id:i,"data-fullscreen-intercept":!0},e)}function N(e,r,n){return function({children:i}){return a.createElement(C,{numColumns:e,ariaLabel:r,id:n},i)}}function L(e,r,n){let i;return{swatchGrid:function({children:e}){return a.createElement(C,{numColumns:i,ariaLabel:r,id:n},e)},numColumns:i=e<6?e:6===e?3:e<=8?4:5}}a.forwardRef(({imagePaint:e,background:r,size:n="medium",selectionState:i="unselected",hovered:s,onClick:l,onMouseEnter:h,onMouseLeave:_,onPointerUp:g},f)=>{let[E,y]=a.useState(""),v=a.useCallback(e=>{let r=m.jS(e,new c.Mi((e.originalImageWidth||244)/(e.originalImageHeight||244)*244,244),{r:0,g:0,b:0,a:0});r&&r.pixels&&r.pixelSize&&y(m.Pv(r.pixels,r.pixelSize))},[]);return a.useEffect(()=>{e&&v(e)},[e,v]),a.createElement("div",{style:{position:"relative"},onMouseEnter:h,onMouseLeave:_,"data-tooltip-type":p.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.delightful_toolbar.custom_upload"),"data-tooltip-show-above":!0},a.createElement(A,{value:E,size:n,selectionState:i,onClick:l,onPointerUp:g,ref:f}),s&&a.createElement("div",{className:"swatch--swatchOverlayContainer--0Ye8z"},a.createElement(d.B,{svg:I.A,style:{fill:"dark"===r?"white":void 0},className:o()({"swatch--swatchOverlay--QA2QQ swatch--swatch--qSnpF":!0,"swatch--backgroundLight--ZkW6n":"light"===r,"swatch--backgroundDark--mMH1v":"dark"===r,[b]:"small"===n})})))})},651507:(e,r,n)=>{n.d(r,{Mj:()=>p,T1:()=>u,DH:()=>m,Al:()=>l,Gu:()=>c,nm:()=>d});var a=n(411855);n(629019);var i=n(931223),o=n(18840),s=n(912580);let l=(e,r)=>e.x+e.width/2-r.width/2,c=(e,r)=>e.x,d=(e,r)=>e.x+e.width-r.width,u=(e,r,n)=>e.y-r.height-n,m=(e,r,n)=>e.height+e.y+n;function p({targetRect:e,targetRef:r,children:n,onClose:c,onMeasure:d,onMouseEnter:m,onMouseLeave:p,style:h,offset:_=4,positionX:g=l,positionY:f=u,positionXY:E,childRef:y,onPosition:b,frozen:v,setSizeChanged:T}){let[I,S]=a.useState({x:0,y:0}),[w,A]=a.useState(!1),C=a.useRef(null),N=a.useCallback(e=>{let r=0!==e.width||0!==e.height;A(r),d&&d(e),r||S({x:0,y:0})},[d]),L=(0,i.wY)(C,N)??i.cU;(0,s.Y)(c,{ignore:[r?.current,C.current]});let O=(0,o.$)(w)&&w,R=(0,o.$)(L);a.useEffect(()=>T&&T(R),[T,R]);let{x:P,y:D}=I,k=0!==P||0!==D?[P,D]:void 0;(O||w&&!v)&&(E?[P,D]=E(e,L,_,k):(P=g(e,L,_),D=f(e,L,_))),a.useEffect(()=>{S({x:P,y:D})},[P,D]);let{width:M,height:F}=L;return a.useEffect(()=>{w&&b&&b(P,D,{width:M,height:F},_)},[P,D,M,F,b,_,w]),a.createElement("div",{style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate3d(${P}px, ${D}px, 0)`,...h,...w?{}:{opacity:0}},onMouseEnter:m,onMouseLeave:p,ref:e=>{C.current=e,y&&y(e)}},n)}},594687:(e,r,n)=>{n.d(r,{w:()=>u});var a=n(875877),i=n(747484),o=n(73041),s=n(492366),l=n(914077),c=n(249099),d=n(948927);let u=(0,a.atom)(e=>{let r=e(o.u8)===l.nT.Whiteboard,n=e(d.hS);return r&&!n&&!i.Xb}),m=(0,a.atom)(async()=>await c.A.getCommunityShelves({shelfType:s.cS.FIGJAM_SECTION_PRESET_PICKER}).then(e=>e.data.meta));(0,a.loadable)(m)},691358:(e,r,n)=>{n.d(r,{BQ:()=>s});var a=n(47795),i=n(535461);n(328099);var o=n(366172);function s(e,r){if(!e||!e.isSection||!o.Y5.isReady())return!1;let n=e.sectionPresetShelfId,s=e.sectionPresetTemplateId,l=e.name,c=e.hasSectionPresetWithEdits;return!!l&&(r(a.j7({type:i.si,data:{sectionId:e.guid,sectionName:l,initialShelfId:n,initialTemplateId:s,showAlertOnSelect:c}})),!0)}n(662750)},657994:(e,r,n)=>{n.d(r,{Gn:()=>d,Rg:()=>m});var a=n(777535),i=n(875877),o=n(771952),s=n(9805);let l=(0,i.atom)(!1);(0,i.atom)(null,(e,r)=>{r(l,!1)});let c=(0,i.atom)({state:"closed"});(0,i.atom)(null,(e,r)=>{r(c,{state:"closed"})}),(0,i.atom)(null,(e,r,{title:n,items:a,libraryKey:i})=>{r(c,{state:"open",title:n,items:a,libraryKey:i})}),(0,i.atom)(!1);let d=(0,i.atomWithLocalStorage)(s.Ec,[],{subscribeToChanges:!0}),u=(0,a.pp)()??(0,o.g)(),m=(0,i.atom)(u)},9805:(e,r,n)=>{n.d(r,{Ec:()=>l});var a=n(258965),i=n(679147),o=n(19908),s=n(401738);let l="recent-diagramming-shapes-figjam";i.A,s.A,i.A,o.A,a.XD,a.vO,a.XD,a.sF},449977:(e,r,n)=>{n.d(r,{KE:()=>ec}),n(411855),n(512671),n(217950),n(879058);var a=n(805014);n(851169);var i=n(35645),o=n.n(i),s=n(228975);n(841962);var l=n(875877);n(550479),n(48929);var c=n(76265);n(481954),n(366172),n(797187),n(957020),n(227070);var d=n(657994);n(9805);var u=n(393080),m=n(165307),p=n(740831),h=n(205253),_=n(558566),g=n(120890),f=n(106212),E=n(862637),y=n(700505),b=n(517469),v=n(39523),T=n(507850),I=n(722254),S=n(200121),w=n(849461),A=n(943383),C=n(306277),N=n(630441),L=n(966218),O=n(969240),R=n(428276),P=n(806894),D=n(822007),k=n(806770),M=n(278920),F=n(662103),x=n(909727),U=n(786898),B=n(757932),V=n(388026),G=n(499027),H=n(500843),W=n(364607),K=n(587376),Y=n(992544),$=n(98986),j=n(731292),z=n(141931),q=n(107293),Z=n(165070),X=n(947816),J=n(598914),Q=n(226794),ee=n(351346),et=n(878849),er=n(45577),en=n(41311),ea=n(341939),ei=n(542496),eo=n(351001),es=n(527943),el=n(989658);function ec(e,r,n){if(r===a.VTL.NO)return;let i=n??l.atomStore.get(d.Rg);if(r===a.VTL.YES_WITHOUT_REORDER){let r=l.atomStore.get(d.Gn).map(r=>r.id===e?{...r,lastAddedAtByUserId:{...r.lastAddedAtByUserId,[i]:Date.now()}}:r);l.atomStore.set(d.Gn,r);return}let[[s],c]=o()(l.atomStore.get(d.Gn),r=>r.id===e),u={id:e,lastAddedAtByUserId:{...s?.lastAddedAtByUserId||{},[i]:Date.now()}};l.atomStore.set(d.Gn,[u,...c])}u.A,m.A,p.A,h.A,_.A,g.A,f.A,E.A,y.A,b.A,v.A,T.A,I.A,S.A,w.A,A.A,C.A,N.A,L.A,O.A,R.A,P.A,D.A,k.A,M.A,F.A,x.A,U.A,B.A,V.A,G.A,H.A,W.A,K.A,Y.A,$.A,j.A,z.A,q.A,Z.A,X.A,J.A,Q.A,ee.A,et.A,er.A,en.A,ea.A,ei.A,eo.A,es.A,el.A,(0,s.A)(()=>({advanced:{activity:(0,c.t)("whiteboard.shapes_sidebar.shapes.activity"),archive:(0,c.t)("whiteboard.shapes_sidebar.shapes.archive"),authentication:(0,c.t)("whiteboard.shapes_sidebar.shapes.authentication"),chat:(0,c.t)("whiteboard.shapes_sidebar.shapes.chat"),cloud:(0,c.t)("whiteboard.shapes_sidebar.shapes.cloud"),compute:(0,c.t)("whiteboard.shapes_sidebar.shapes.compute"),database:(0,c.t)("whiteboard.shapes_sidebar.shapes.database"),desktop:(0,c.t)("whiteboard.shapes_sidebar.shapes.desktop"),email:(0,c.t)("whiteboard.shapes_sidebar.shapes.email"),file:(0,c.t)("whiteboard.shapes_sidebar.shapes.file"),frontEndService:(0,c.t)("whiteboard.shapes_sidebar.shapes.frontEndService"),instant:(0,c.t)("whiteboard.shapes_sidebar.shapes.instant"),location:(0,c.t)("whiteboard.shapes_sidebar.shapes.location"),mobile:(0,c.t)("whiteboard.shapes_sidebar.shapes.mobile"),package:(0,c.t)("whiteboard.shapes_sidebar.shapes.package"),payment:(0,c.t)("whiteboard.shapes_sidebar.shapes.payment"),security:(0,c.t)("whiteboard.shapes_sidebar.shapes.security"),send:(0,c.t)("whiteboard.shapes_sidebar.shapes.send"),server:(0,c.t)("whiteboard.shapes_sidebar.shapes.server"),service:(0,c.t)("whiteboard.shapes_sidebar.shapes.service"),settings:(0,c.t)("whiteboard.shapes_sidebar.shapes.settings"),storage:(0,c.t)("whiteboard.shapes_sidebar.shapes.storage"),terminal:(0,c.t)("whiteboard.shapes_sidebar.shapes.terminal"),user:(0,c.t)("whiteboard.shapes_sidebar.shapes.user"),wallet:(0,c.t)("whiteboard.shapes_sidebar.shapes.wallet"),web:(0,c.t)("whiteboard.shapes_sidebar.shapes.web")}})),(0,s.A)(()=>({advanced:(0,c.t)("whiteboard.shapes_sidebar.section_title.advanced")}))},882200:(e,r,n)=>{n.d(r,{AZ:()=>R,ZH:()=>k,cN:()=>P,cs:()=>M,lV:()=>O,nX:()=>D});var a=n(411855),i=n(269685),o=n(805014),s=n(629019),l=n.n(s),c=n(841962),d=n(875877),u=n(747484),m=n(48929),p=n(265851),h=n(475824),_=n(826396),g=n(781865);a.forwardRef(({color:e,toolbarIconScale:r=1,toolOrder:n=1,shouldAnimate:i=!0,stickyAnimationState:o=_.k.DEFAULT},s)=>{let c=!i||o===_.k.DRAG_RETURN_TO_DLT,d=o===_.k.DRAG_ON_CANVAS,u=4===n,m=o===_.k.DRAG_RETURN_TO_DLT,p=o===_.k.DRAG_ON_CANVAS,h=16,f=25;r<1&&(u?(h=24,f=32):h=19);let E={[g.Sk]:1===n,[g.gz]:2===n,[g.eB]:3===n,[g.ID]:u};return a.createElement("div",{className:l()({[g.xI]:2===n,[g.t3]:3===n,[g.iD]:u}),style:{width:116*r,height:116*r}},a.createElement("div",{className:l()({...E,[g.ZJ]:!0,[g.B4]:c&&1===n||d&&2===n,[g.i0]:p,[g.BE]:m,[g.rh]:!m&&!i&&2===n}),style:{top:h*r,left:f*r,width:104*r,height:104*r},ref:s},a.createElement("div",{className:l()({[g.uh]:!0,[g.WX]:!0})},a.createElement("svg",{className:g.SN,width:104*r,height:104*r,viewBox:"-20 -20 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",null,a.createElement("path",{className:l()(g.Wq,{[g.cq]:!0}),style:{clipPath:`url(#stickyMaskV3-${n})`},d:"M0.459717 0.680176L104.46 0.680243V104.68H0.459717V2.09514V0.680176Z",fill:e}),a.createElement("g",{className:g.BN},a.createElement("mask",{id:`stickyCurlMaskV3-${n}`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:84,height:84},a.createElement("path",{d:"M31.9819 3.8766C34.7398 1.38156 38.3262 7.51147e-07 42.0452 2.10768e-06L104 2.47061e-05V104H3.61353e-05L3.37915e-06 39.4677C1.22757e-06 35.2289 1.7934 31.188 4.9367 28.3443L31.9819 3.8766Z",fill:"white"})),a.createElement("g",{mask:`url(#stickyCurlMaskV3-${n})`},a.createElement("path",{d:"M104 6.74129e-05L54.8928 48.5492L0 104V0L104 6.74129e-05Z",fill:e,className:g.cq}),a.createElement("g",{filter:"url(#stickyCurlBlurFilter)"},a.createElement("rect",{x:"-26",y:"50.6831",width:"96.831",height:"16.7797",transform:"rotate(-41.9127 -26 50.6831)",fill:"black",fillOpacity:"0.3"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.526 4.26953L3.2583 29.8513C10.3683 23.4168 26.3782 24.6229 26.3782 24.6229C26.3782 24.6229 25.0586 10.1224 31.526 4.26953Z",fill:e,className:g.cq}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.5262 4.26953L3.25854 29.8513C10.3686 23.4168 26.3784 24.6229 26.3784 24.6229C26.3784 24.6229 25.0588 10.1224 31.5262 4.26953Z",fill:"url(#paint0_linear_221_5067)"})))),a.createElement("defs",null,a.createElement("clipPath",{id:`stickyMaskV3-${n}`},a.createElement("path",{className:g.cP,d:"M50.9701 6.74129e-05L104.97 0V104H0.970459V46.9909L50.9701 6.74129e-05Z",fill:"#C20000"}),a.createElement("path",{className:g.dP,d:"M32.2236 3.8766C34.9815 1.38156 38.5679 7.51147e-07 42.2869 2.10768e-06L104.242 2.47061e-05V104H0.241735L0.241703 39.4677C0.2417 35.2289 2.0351 31.188 5.1784 28.3443L32.2236 3.8766Z",fill:"#2400FF"}),a.createElement("rect",{x:"250",y:"520",width:"1",height:"1"})),a.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:`sticky_shadow-${n}`,x:"0",y:"0",width:"200%",height:"200%",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:"1.5"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_2240"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:"4"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),a.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_276_2240",result:"effect2_dropShadow_276_2240"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_276_2240",result:"shape"})),a.createElement("filter",{id:"stickyCurlBlurFilter",x:"-58",y:"-45.9995",width:"147.267",height:"141.169",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feGaussianBlur",{stdDeviation:"16",result:"effect1_foregroundBlur_221_5067"})),a.createElement("linearGradient",{id:"paint0_linear_221_5067",x1:"18.1477",y1:"15.5989",x2:"25.7005",y2:"25.3824",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),a.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"})))))))});let f="#699BF7";function E({toolbarIconScale:e,children:r,isBeingDraggedForPlacement:n}){let i=u.Ay.safari&&n;return a.createElement("svg",{fill:"none",height:144*e,width:144*e,viewBox:"0 0 144 144",xmlns:"http://www.w3.org/2000/svg",className:l()({[g.WX]:!i,[g.$d]:!0})},r)}let y=new Map([[o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,104],[o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,128],[o.NLJ.SHAPE_WHITEBOARD_SQUARE,112]]),b=2/38,v=.5/38,T=8/38;function I(){let e=(0,d.useAtomValue)(m.lC),r=(0,d.useAtomValue)(m.U9);return a.useMemo(()=>S(e,r),[r,e])}let S=(e,r)=>r===o.xbm.NONE?"#000000":h.F.format(e);function w(e){let r=h.F.parse(e),n=o.DV9?.getShapeWithTextStrokeColorForFill(i.oU(r));return n?h.F.format((0,i.aH)(n)):"#757575"}function A(e){return a.useMemo(()=>w(e),[e])}function C(e,r){if(!r)return{};let{styleType:n,isDragging:a}=r,i=function(e){let r=y.get(e);return void 0===r?112:r}(e);return{strokeWidth:n===o.xbm.NONE?i*v:i*b,strokeOpacity:n===o.xbm.NONE?.2:1,strokeDasharray:n===o.xbm.DASHED?`${i*T} ${i*T}`:"",strokeLinecap:"round",className:p.s.if(a,p.s.hidden).$}}function N(e,r){if(!r)return{};let{styleType:n,svgToCanvasScale:a,isDragging:i}=r;return r?{stroke:(0,c.kc)().figjam_track_stroke_color?S(d.atomStore.get(m.lC),d.atomStore.get(m.U9)):w(e),strokeWidth:function(e,r,n=!1){return n&&(e===o.xbm.SOLID||e===o.xbm.DASHED)?4*r:0}(n,a,i),strokeDasharray:function(e,r,n=!1){return n&&e===o.xbm.DASHED?`${16*r} ${10*r}`:""}(n,a,i),strokeLinecap:"round"}:{}}function L(e){return!!e&&e.styleType===o.xbm.NONE}function O(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("mask",{id:"path-3-inside-1_1019679_55716",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302V23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146V23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L22.4218 15.828L22.4218 15.828L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294H16.047L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044L18.828 19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-3-inside-1_1019679_55716)"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function R(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{d:"M11.5269 4L22.3945 9.08856L17.306 19.9562L6.4383 14.8677L11.5269 4Z",fill:"#FF8577"}),a.createElement("path",{d:"M51.3739 20.2821C49.7324 23.7823 45.5642 25.2891 42.064 23.6475C38.5639 22.006 37.0571 17.8378 38.6986 14.3376C40.3402 10.8375 44.5084 9.33072 48.0085 10.9723C51.5087 12.6138 53.0155 16.782 51.3739 20.2821Z",fill:"#C7B9FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.377 23.8507L25.8165 22.6624L27.3151 27.0003H28.4367L30.6793 20.0203L27.2397 21.2085L25.16 15.1885L22.377 23.8507Z",fill:"#FFC700"}),a.createElement("mask",{id:"path-6-inside-1_1019679_55739",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"white"}),a.createElement("path",{d:"M36.5002 2L38.2791 1.08599L36.5002 -2.3763L34.7213 1.08599L36.5002 2ZM38.0275 4.97265L36.2486 5.88666L36.5422 6.45801L37.1135 6.75158L38.0275 4.97265ZM34.9728 4.97265L35.8868 6.75158L36.4582 6.45801L36.7518 5.88666L34.9728 4.97265ZM32.0002 6.5L31.0862 4.72107L27.6239 6.5L31.0862 8.27893L32.0002 6.5ZM34.9728 8.02735L36.7518 7.11334L36.4582 6.54199L35.8868 6.24842L34.9728 8.02735ZM36.5002 11L34.7213 11.914L36.5002 15.3763L38.2791 11.914L36.5002 11ZM38.0275 8.02735L37.1135 6.24842L36.5422 6.54199L36.2486 7.11334L38.0275 8.02735ZM41.0002 6.5L41.9142 8.27893L45.3765 6.5L41.9142 4.72107L41.0002 6.5ZM32.5002 10L34.2791 9.08599L32.5002 5.6237L30.7213 9.08599L32.5002 10ZM33.3487 11.6515L31.5698 12.5655L31.8633 13.1368L32.4347 13.4304L33.3487 11.6515ZM31.6517 11.6515L32.5657 13.4304L33.137 13.1368L33.4306 12.5655L31.6517 11.6515ZM30.0002 12.5L29.0862 10.7211L25.6239 12.5L29.0862 14.2789L30.0002 12.5ZM31.6517 13.3485L33.4306 12.4345L33.137 11.8632L32.5657 11.5696L31.6517 13.3485ZM32.5002 15L30.7213 15.914L32.5002 19.3763L34.2791 15.914L32.5002 15ZM33.3487 13.3485L32.4347 11.5696L31.8633 11.8632L31.5698 12.4345L33.3487 13.3485ZM35.0002 12.5L35.9142 14.2789L39.3765 12.5L35.9142 10.7211L35.0002 12.5ZM12.4902 6.65937L13.3383 4.84809L11.527 4L10.6789 5.81128L12.4902 6.65937ZM19.7353 10.0517L21.5466 10.8998L22.3947 9.08856L20.5834 8.24047L19.7353 10.0517ZM9.09785 13.9045L7.28657 13.0564L6.43848 14.8677L8.24976 15.7158L9.09785 13.9045ZM16.343 17.2969L15.4949 19.1082L17.3062 19.9562L18.1543 18.145L16.343 17.2969ZM6.43848 14.8677L4.6272 14.0196L3.7791 15.8309L5.59038 16.679L6.43848 14.8677ZM11.527 4L12.3751 2.18872L10.5638 1.34063L9.71575 3.15191L11.527 4ZM17.3062 19.9562L16.4581 21.7675L18.2693 22.6156L19.1174 20.8043L17.3062 19.9562ZM22.3947 9.08856L24.206 9.93665L25.0541 8.12537L23.2428 7.27728L22.3947 9.08856ZM42.9134 21.8368L43.7626 20.026L42.9134 21.8368ZM49.5634 19.4329L47.7526 18.5837L49.5634 19.4329ZM40.5096 15.1869L38.6988 14.3376V14.3376L40.5096 15.1869ZM47.1595 12.783L48.0087 10.9723L47.1595 12.783ZM42.0642 23.6475L41.215 25.4583H41.215L42.0642 23.6475ZM51.3741 20.2821L49.5634 19.4329L51.3741 20.2821ZM38.6988 14.3376L36.8881 13.4884V13.4884L38.6988 14.3376ZM48.0087 10.9723L47.1595 12.783L47.1595 12.783L48.0087 10.9723ZM22.377 23.8504L20.4729 23.2386L19.2493 27.0469L23.0301 25.7408L22.377 23.8504ZM25.1601 15.1882L27.0505 14.5352L25.0913 8.86403L23.256 14.5764L25.1601 15.1882ZM25.8166 22.6621L27.707 22.0091L27.0539 20.1187L25.1635 20.7718L25.8166 22.6621ZM26.9697 26L25.0793 26.6531L25.5446 28H26.9697V26ZM28.758 26V28H30.2161L30.6622 26.6118L28.758 26ZM30.6794 20.02L32.5835 20.6318L33.8071 16.8235L30.0263 18.1296L30.6794 20.02ZM27.2398 21.2082L25.3494 21.8613L26.0025 23.7517L27.8929 23.0986L27.2398 21.2082ZM30.8587 26L28.9546 25.3882L28.1155 28H30.8587V26ZM32.5835 20.6318L34.4876 21.2436V21.2436L32.5835 20.6318ZM30.0263 18.1296L30.6794 20.02H30.6794L30.0263 18.1296ZM28.4771 18.6648L26.5868 19.3179L27.2398 21.2082L29.1302 20.5552L28.4771 18.6648ZM27.0505 14.5352L28.9409 13.8821L27.0505 14.5352ZM25.1384 13.1883L25.1601 15.1882L25.1384 13.1883ZM23.256 14.5764L21.3519 13.9646L23.256 14.5764ZM20.4729 23.2386L22.377 23.8504H22.377L20.4729 23.2386ZM23.0301 25.7408L23.6831 27.6311L23.6831 27.6311L23.0301 25.7408ZM24.5793 25.2056L26.4696 24.5525L25.8166 22.6621L23.9262 23.3152L24.5793 25.2056ZM24.8537 26V28H27.6606L26.7441 25.3469L24.8537 26ZM14 26V24H12V26H14ZM42 26H44V24H42V26ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM34.7213 2.91401L36.2486 5.88666L39.8065 4.05864L38.2791 1.08599L34.7213 2.91401ZM36.7518 5.88666L38.2791 2.91401L34.7213 1.08599L33.1939 4.05863L36.7518 5.88666ZM32.9142 8.27893L35.8868 6.75158L34.0588 3.19372L31.0862 4.72107L32.9142 8.27893ZM35.8868 6.24842L32.9142 4.72107L31.0862 8.27893L34.0588 9.80628L35.8868 6.24842ZM38.2791 10.086L36.7518 7.11334L33.1939 8.94136L34.7213 11.914L38.2791 10.086ZM36.2486 7.11334L34.7213 10.086L38.2791 11.914L39.8065 8.94136L36.2486 7.11334ZM40.0862 4.72107L37.1135 6.24842L38.9415 9.80628L41.9142 8.27893L40.0862 4.72107ZM37.1135 6.75158L40.0862 8.27893L41.9142 4.72107L38.9415 3.19372L37.1135 6.75158ZM30.7213 10.914L31.5698 12.5655L35.1276 10.7375L34.2791 9.08599L30.7213 10.914ZM33.4306 12.5655L34.2791 10.914L30.7213 9.08599L29.8727 10.7375L33.4306 12.5655ZM30.9142 14.2789L32.5657 13.4304L30.7376 9.87255L29.0862 10.7211L30.9142 14.2789ZM32.5657 11.5696L30.9142 10.7211L29.0862 14.2789L30.7376 15.1275L32.5657 11.5696ZM34.2791 14.086L33.4306 12.4345L29.8727 14.2625L30.7213 15.914L34.2791 14.086ZM31.5698 12.4345L30.7213 14.086L34.2791 15.914L35.1276 14.2625L31.5698 12.4345ZM34.0862 10.7211L32.4347 11.5696L34.2627 15.1275L35.9142 14.2789L34.0862 10.7211ZM32.4347 13.4304L34.0862 14.2789L35.9142 10.7211L34.2627 9.87255L32.4347 13.4304ZM11.6421 8.47065L18.8873 11.863L20.5834 8.24047L13.3383 4.84809L11.6421 8.47065ZM10.9091 14.7526L14.3015 7.50747L10.6789 5.81128L7.28657 13.0564L10.9091 14.7526ZM17.1911 15.4856L9.94594 12.0932L8.24976 15.7158L15.4949 19.1082L17.1911 15.4856ZM17.9241 9.20365L14.5317 16.4488L18.1543 18.145L21.5466 10.8998L17.9241 9.20365ZM8.24976 15.7158L13.3383 4.84809L9.71575 3.15191L4.6272 14.0196L8.24976 15.7158ZM18.1543 18.145L7.28657 13.0564L5.59038 16.679L16.4581 21.7675L18.1543 18.145ZM20.5834 8.24047L15.4949 19.1081L19.1174 20.8043L24.206 9.93665L20.5834 8.24047ZM10.6789 5.81128L21.5466 10.8998L23.2428 7.27728L12.3751 2.18872L10.6789 5.81128ZM42.0642 23.6475C45.5644 25.2891 49.7326 23.7823 51.3741 20.2821L47.7526 18.5837C47.0491 20.0838 45.2627 20.7295 43.7626 20.026L42.0642 23.6475ZM38.6988 14.3376C37.0573 17.8378 38.564 22.006 42.0642 23.6475L43.7626 20.026C42.2626 19.3225 41.6168 17.5362 42.3203 16.0361L38.6988 14.3376ZM48.0087 10.9723C44.5085 9.33072 40.3404 10.8375 38.6988 14.3376L42.3203 16.0361C43.0238 14.536 44.8102 13.8902 46.3103 14.5938L48.0087 10.9723ZM51.3741 20.2821C53.0156 16.782 51.5089 12.6138 48.0087 10.9723L46.3103 14.5938C47.8104 15.2973 48.4561 17.0836 47.7526 18.5837L51.3741 20.2821ZM41.215 25.4583C45.7152 27.5688 51.0743 25.6316 53.1849 21.1314L49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368L41.215 25.4583ZM36.8881 13.4884C34.7775 17.9887 36.7148 23.3478 41.215 25.4583L42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869L36.8881 13.4884ZM48.8579 9.1615C44.3577 7.05096 38.9986 8.98819 36.8881 13.4884L40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783L48.8579 9.1615ZM53.1849 21.1314C55.2954 16.6311 53.3582 11.272 48.8579 9.1615L47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329L53.1849 21.1314ZM24.2812 24.4622L27.0643 15.8L23.256 14.5764L20.4729 23.2386L24.2812 24.4622ZM25.1635 20.7718L21.724 21.96L23.0301 25.7408L26.4696 24.5525L25.1635 20.7718ZM28.8601 25.3469L27.707 22.0091L23.9262 23.3152L25.0793 26.6531L28.8601 25.3469ZM26.9697 28H28.758V24H26.9697V28ZM28.7752 19.4082L26.8539 25.3882L30.6622 26.6118L32.5835 20.6318L28.7752 19.4082ZM27.8929 23.0986L31.3324 21.9104L30.0263 18.1296L26.5868 19.3179L27.8929 23.0986ZM23.2698 15.8413L25.3494 21.8613L29.1302 20.5552L27.0505 14.5352L23.2698 15.8413ZM32.7629 26.6118L34.4876 21.2436L30.6794 20.02L28.9546 25.3882L32.7629 26.6118ZM34.4876 21.2436C34.9511 19.8011 34.5598 18.2206 33.4769 17.161L30.6794 20.02V20.02L34.4876 21.2436ZM33.4769 17.161C32.394 16.1014 30.8053 15.7445 29.3733 16.2392L30.6794 20.02L30.6794 20.02L33.4769 17.161ZM29.3733 16.2392L27.8241 16.7744L29.1302 20.5552L30.6794 20.02L29.3733 16.2392ZM30.3675 18.0117L28.9409 13.8821L25.1601 15.1882L26.5868 19.3179L30.3675 18.0117ZM28.9409 13.8821C28.3787 12.2548 26.8382 11.1697 25.1166 11.1884L25.1601 15.1882H25.1601L28.9409 13.8821ZM25.1166 11.1884C23.395 11.2072 21.8785 12.3254 21.3519 13.9646L25.1601 15.1882H25.1601L25.1166 11.1884ZM21.3519 13.9646L18.5688 22.6268L22.377 23.8504L25.1601 15.1882L21.3519 13.9646ZM18.5688 22.6268C18.1053 24.0693 18.4966 25.6498 19.5795 26.7094L22.377 23.8504L22.377 23.8504L18.5688 22.6268ZM19.5795 26.7094C20.6625 27.769 22.2511 28.1258 23.6831 27.6311L22.377 23.8504L22.377 23.8504L19.5795 26.7094ZM23.6831 27.6311L25.2323 27.096L23.9262 23.3152L22.377 23.8504L23.6831 27.6311ZM22.6889 25.8586L22.9633 26.6531L26.7441 25.3469L26.4696 24.5525L22.6889 25.8586ZM15 28H24.8537V24H15V28ZM14 28H15V24H14V28ZM16 27V26H12V27H16ZM16 38V27H12V38H16ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM38 40H18V44H38V40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM40 27V38H44V27H40ZM40 26V27H44V26H40ZM41 28H42V24H41V28ZM30.8587 28H41V24H30.8587V28ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-6-inside-1_1019679_55739)"}))}function P(){return a.createElement("svg",{width:"56",height:"62",viewBox:"0 0 56 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"11",width:"40",height:"40",rx:"8",fill:"#9747FF"}),a.createElement("path",{d:"M11.9511 6.09433L11.0454 5.67028L10.6214 6.57592L5.53284 17.4436L5.10879 18.3492L6.01443 18.7733L16.8821 23.8619L17.7878 24.2859L18.2118 23.3803L23.3004 12.5126L23.7244 11.6069L22.8188 11.1829L11.9511 6.09433Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{d:"M41.6394 27.5529C45.6396 29.4289 50.4033 27.7069 52.2793 23.7067C54.1553 19.7065 52.4334 14.9429 48.4331 13.0668C44.4329 11.1908 39.6693 12.9128 37.7933 16.913C35.9172 20.9132 37.6392 25.6769 41.6394 27.5529Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3772 26.8504L25.8167 25.6621L27.3153 30H28.4369L30.6795 23.02L27.2399 24.2082L25.1602 18.1882L22.3772 26.8504Z",fill:"#9747FF"}),a.createElement("path",{d:"M15 30H41V41C41 42.6569 39.6569 44 38 44H18C16.3431 44 15 42.6569 15 41V30Z",stroke:"white",strokeWidth:"2"}),a.createElement("path",{d:"M37.3897 4.54299L36.5002 2.81185L35.6108 4.54299L34.2302 7.22997L31.5432 8.61054L29.8121 9.5L31.5432 10.3895L34.2302 11.77L35.6108 14.457L36.5002 16.1881L37.3897 14.457L38.7703 11.77L41.4573 10.3895L43.1884 9.5L41.4573 8.61054L38.7703 7.22997L37.3897 4.54299Z",fill:"white",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{d:"M32.5002 13L33.3488 14.6515L35.0002 15.5L33.3488 16.3485L32.5002 18L31.6517 16.3485L30.0002 15.5L31.6517 14.6515L32.5002 13Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7354 13.0517L12.4903 9.65937L9.09791 16.9045L16.343 20.2969L19.7354 13.0517ZM11.5271 7L6.43854 17.8677L17.3062 22.9562L22.3948 12.0886L11.5271 7Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.9135 24.8368C45.4136 26.0093 48.3909 24.9331 49.5634 22.4329C50.7359 19.9328 49.6597 16.9555 47.1596 15.783C44.6594 14.6105 41.6822 15.6867 40.5096 18.1869C39.3371 20.687 40.4134 23.6643 42.9135 24.8368ZM42.0643 26.6475C45.5645 28.2891 49.7327 26.7823 51.3742 23.2821C53.0157 19.782 51.509 15.6138 48.0088 13.9723C44.5086 12.3307 40.3404 13.8375 38.6989 17.3376C37.0574 20.8378 38.5641 25.006 42.0643 26.6475Z",fill:"white"}),a.createElement("mask",{id:"path-10-inside-1_1_174",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z",fill:"white"}),a.createElement("path",{d:"M22.3767 26.8505L20.4726 26.2387L19.249 30.047L23.0297 28.7409L22.3767 26.8505ZM25.1598 18.1883L27.0502 17.5353L25.091 11.8642L23.2557 17.5766L25.1598 18.1883ZM25.8163 25.6623L27.7066 25.0092L27.0536 23.1189L25.1632 23.7719L25.8163 25.6623ZM26.9693 29.0001V31.0001H29.7763L28.8597 28.3471L26.9693 29.0001ZM24.8534 29.0001L22.963 29.6532L23.4283 31.0001H24.8534V29.0001ZM24.5789 28.2057L26.4693 27.5527L25.8163 25.6623L23.9259 26.3153L24.5789 28.2057ZM23.0297 28.7409L22.3767 26.8505L22.3767 26.8505L23.0297 28.7409ZM20.9779 28.28L22.3767 26.8505L22.3767 26.8505L20.9779 28.28ZM20.4726 26.2387L22.3767 26.8505L22.3767 26.8505L20.4726 26.2387ZM23.2557 17.5766L21.3515 16.9648L21.3515 16.9648L23.2557 17.5766ZM25.138 16.1885L25.1598 18.1883L25.138 16.1885ZM27.0502 17.5353L28.9405 16.8822L28.9405 16.8822L27.0502 17.5353ZM28.4768 21.6649L26.5864 22.318L27.2395 24.2084L29.1298 23.5553L28.4768 21.6649ZM30.026 21.1297L30.679 23.0201L30.679 23.0201L30.026 21.1297ZM32.0778 21.5906L30.679 23.0201L30.679 23.0201L32.0778 21.5906ZM32.5832 23.6319L34.4873 24.2437L34.4873 24.2437L32.5832 23.6319ZM30.8584 29.0001V31.0001H32.3165L32.7625 29.6119L30.8584 29.0001ZM28.7577 29.0001L26.8536 28.3883L26.0144 31.0001H28.7577V29.0001ZM30.679 23.0201L32.5832 23.6319L33.8067 19.8236L30.026 21.1297L30.679 23.0201ZM27.2395 24.2084L25.3491 24.8614L26.0021 26.7518L27.8925 26.0987L27.2395 24.2084ZM24.2808 27.4623L27.0639 18.8001L23.2557 17.5766L20.4726 26.2387L24.2808 27.4623ZM25.1632 23.7719L21.7236 24.9601L23.0297 28.7409L26.4693 27.5527L25.1632 23.7719ZM28.8597 28.3471L27.7066 25.0092L23.9259 26.3153L25.079 29.6532L28.8597 28.3471ZM24.8534 31.0001H26.9693V27.0001H24.8534V31.0001ZM26.7437 28.3471L26.4693 27.5527L22.6885 28.8588L22.963 29.6532L26.7437 28.3471ZM23.9259 26.3153L22.3767 26.8505L23.6828 30.6313L25.232 30.0961L23.9259 26.3153ZM22.3767 26.8505L22.3767 26.8505L19.5792 29.7095C20.6621 30.7692 22.2508 31.126 23.6828 30.6313L22.3767 26.8505ZM22.3767 26.8505L22.3767 26.8505L18.5684 25.6269C18.105 27.0694 18.4963 28.6499 19.5792 29.7095L22.3767 26.8505ZM22.3767 26.8505L25.1598 18.1883L21.3515 16.9648L18.5684 25.6269L22.3767 26.8505ZM25.1598 18.1883L25.1598 18.1883L25.1163 14.1886C23.3947 14.2073 21.8782 15.3256 21.3515 16.9648L25.1598 18.1883ZM25.1598 18.1883L25.1598 18.1883L28.9405 16.8822C28.3783 15.2549 26.8379 14.1699 25.1163 14.1886L25.1598 18.1883ZM25.1598 18.1883L26.5864 22.318L30.3672 21.0119L28.9405 16.8822L25.1598 18.1883ZM29.1298 23.5553L30.679 23.0201L29.3729 19.2394L27.8237 19.7746L29.1298 23.5553ZM30.679 23.0201L30.679 23.0201L33.4765 20.1611C32.3936 19.1015 30.805 18.7447 29.3729 19.2394L30.679 23.0201ZM30.679 23.0201L30.679 23.0201L34.4873 24.2437C34.9507 22.8012 34.5594 21.2207 33.4765 20.1611L30.679 23.0201ZM30.679 23.0201L28.9543 28.3883L32.7625 29.6119L34.4873 24.2437L30.679 23.0201ZM28.7577 31.0001H30.8584V27.0001H28.7577V31.0001ZM28.7749 22.4083L26.8536 28.3883L30.6618 29.6119L32.5832 23.6319L28.7749 22.4083ZM27.8925 26.0987L31.3321 24.9105L30.026 21.1297L26.5864 22.318L27.8925 26.0987ZM23.2694 18.8414L25.3491 24.8614L29.1298 23.5553L27.0502 17.5353L23.2694 18.8414Z",fill:"white",mask:"url(#path-10-inside-1_1_174)"}))}function D(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function k(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function M(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),a.createElement("rect",{width:"32",height:"32",transform:"translate(12 12)",fill:"#9747FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"white"}))}a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M109.821 18.253A3 3 0 00106.916 16H11.87a3 3 0 00-2.906 3.747l25.215 98.001A3 3 0 0037.084 120h95.046a3 3 0 002.906-3.748l-25.215-98z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M34.179 18.253A3 3 0 0137.084 16h95.046a3 3 0 012.906 3.747l-25.215 98.001a3 3 0 01-2.905 2.252H11.87a3 3 0 01-2.906-3.748l25.215-98z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M68.787 118.279c1.324 2.295 5.102 2.295 6.426 0l56.403-97.77c1.195-2.072-.542-4.509-3.213-4.509H15.597c-2.67 0-4.408 2.437-3.213 4.508l56.403 97.771z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},s)=>{let l=I(),d=A(e),u=(0,c.kc)().figjam_track_stroke_color?l:d;return a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M68.787 17.721c1.324-2.295 5.102-2.295 6.426 0l56.403 97.771c1.195 2.071-.542 4.508-3.213 4.508H15.597c-2.67 0-4.408-2.437-3.213-4.508l56.403-97.77z",fill:e,className:g.cq,ref:s,...N(e,n)}),a.createElement("path",{d:"M130.75 115.992L130.75 115.992C131.134 116.658 131.057 117.364 130.645 117.942C130.223 118.534 129.432 119 128.403 119H15.5971C14.5693 119 13.7776 118.534 13.3555 117.942C12.9431 117.364 12.8659 116.658 13.2503 115.992L13.2503 115.992L69.6533 18.221C70.0992 17.4482 70.9999 17 72.0001 17C73.0004 17 73.9011 17.4482 74.347 18.221L130.75 115.992Z",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,n)}))}),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},s)=>{let l=I(),d=A(e),u=(0,c.kc)().figjam_track_stroke_color?l:d;return a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("circle",{cx:"72",cy:"72",r:"64",fill:e,className:g.cq,ref:s,...N(e,n)}),a.createElement("circle",{cx:"72",cy:"72",r:"62",fill:"none",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,n)}))}),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("rect",{x:"8",y:"20",width:"128",height:"104",rx:"40",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("rect",{x:"16",y:"32",width:"112",height:"80",rx:"40",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("rect",{width:"79.374",height:"79.374",x:"15.874",y:"71.874",rx:"3.175",transform:"rotate(-45 15.874 71.874)",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},s)=>{let l=I(),d=A(e),u=(0,c.kc)().figjam_track_stroke_color?l:d;return a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("rect",{x:"16",y:"16",width:"112",height:"112",rx:"3.23077",fill:e,className:g.cq,ref:s,...N(e,n)}),a.createElement("rect",{x:"16",y:"16",width:"110",height:"110",fill:"none",rx:"3.23077",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_SQUARE,n)}))}),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M16.1763 30.5665C16.1763 28.9381 17.4061 27.1478 20.2318 25.336C23.0129 23.5529 27.1015 21.9106 32.2405 20.517C42.5046 17.7335 56.7388 16 72.5 16C88.2612 16 102.495 17.7335 112.759 20.517C117.898 21.9106 121.987 23.5529 124.768 25.336C127.594 27.1478 128.824 28.9381 128.824 30.5665C128.824 32.1949 127.594 33.9852 124.768 35.7969C121.987 37.5801 117.898 39.2224 112.759 40.616C102.495 43.3995 88.2612 45.1329 72.5 45.1329C56.7388 45.1329 42.5046 43.3995 32.2405 40.616C27.1015 39.2224 23.0129 37.5801 20.2318 35.7969C17.4061 33.9852 16.1763 32.1949 16.1763 30.5665Z M125.816 37.4319C126.996 36.6756 128.019 35.8576 128.824 34.9796V113.434C128.824 115.062 127.594 116.852 124.768 118.664C121.987 120.447 117.898 122.089 112.759 123.483C102.495 126.267 88.2612 128 72.5 128C56.7388 128 42.5046 126.267 32.2405 123.483C27.1015 122.089 23.0129 120.447 20.2318 118.664C17.4061 116.852 16.1763 115.062 16.1763 113.434V34.9796C16.981 35.8576 18.0038 36.6756 19.1835 37.4319C22.201 39.3666 26.5029 41.0724 31.7322 42.4905C42.2047 45.3305 56.6179 47.0751 72.5 47.0751C88.3821 47.0751 102.795 45.3305 113.268 42.4905C118.497 41.0724 122.799 39.3666 125.816 37.4319Z":"M15.5289 30.5664C15.5289 21.9851 41.0355 15.0288 72.5 15.0288C103.964 15.0288 129.471 21.9851 129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M129.471 30.5664C129.471 39.1477 103.964 46.104 72.5 46.104C41.0355 46.104 15.5289 39.1477 15.5289 30.5664M129.471 30.5664C129.471 21.9851 103.964 15.0288 72.5 15.0288C41.0355 15.0288 15.5289 21.9851 15.5289 30.5664M129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M22.1503 121H117.979C117.215 120.301 116.503 119.415 115.844 118.393C114.15 115.767 112.657 112.023 111.417 107.473C108.931 98.3601 107.405 85.8189 107.405 72C107.405 58.1811 108.931 45.6399 111.417 36.5273C112.657 31.9771 114.15 28.2333 115.844 25.6072C116.503 24.5851 117.215 23.6986 117.979 23H22.1503C20.7231 23 19.1567 24.0712 17.5724 26.5282C16.0127 28.9471 14.5759 32.5037 13.3566 36.9744C10.9214 45.9038 9.40463 58.2875 9.40463 72C9.40463 85.7125 10.9214 98.0962 13.3566 107.026C14.5759 111.496 16.0127 115.053 17.5724 117.472C19.1567 119.929 20.7231 121 22.1503 121Z M117.272 26.5282C118.856 24.0712 120.423 23 121.85 23C123.277 23 124.843 24.0712 126.428 26.5282C127.987 28.9471 129.424 32.5037 130.643 36.9744C133.079 45.9038 134.595 58.2875 134.595 72C134.595 85.7125 133.079 98.0962 130.643 107.026C129.424 111.496 127.987 115.053 126.428 117.472C124.843 119.929 123.277 121 121.85 121C120.423 121 118.856 119.929 117.272 117.472C115.712 115.053 114.275 111.496 113.056 107.026C110.621 98.0962 109.104 85.7125 109.104 72C109.104 58.2875 110.621 45.9038 113.056 36.9744C114.275 32.5037 115.712 28.9471 117.272 26.5282Z":"M122.229 22.1504C129.738 22.1504 135.824 44.4687 135.824 72.0001C135.824 99.5315 129.738 121.85 122.229 121.85H22.5295C15.0209 121.85 8.93413 99.5315 8.93413 72.0001C8.93413 44.4687 15.0209 22.1504 22.5295 22.1504H122.229Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M121.85 121.85C114.341 121.85 108.254 99.5315 108.254 72.0001C108.254 44.4687 114.341 22.1504 121.85 22.1504M121.85 121.85C129.358 121.85 135.445 99.5315 135.445 72.0001C135.445 44.4687 129.358 22.1504 121.85 22.1504M121.85 121.85H22.1503C14.6417 121.85 8.55492 99.5315 8.55492 72.0001C8.55492 44.4687 14.6417 22.1504 22.1503 22.1504H121.85",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M10.3815 22.7052C10.3815 21.211 11.5925 20 13.0867 20H103.561V46.1503C103.561 48.3081 105.31 50.0578 107.468 50.0578H133.618V121.295C133.618 122.789 132.407 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V22.7052Z M132.343 48.2543L105.364 21.2752V46.1503C105.364 47.3121 106.306 48.2543 107.468 48.2543H132.343Z":"M9.47974 121.295V22.7051C9.47974 20.7128 11.0944 19.0981 13.0867 19.0981H104.462L134.52 49.1559V121.295C134.52 123.287 132.905 124.902 130.913 124.902H13.0867C11.0944 124.902 9.47974 123.287 9.47974 121.295Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M104.462 19.0981H13.0867C11.0944 19.0981 9.47974 20.7128 9.47974 22.7051V121.295C9.47974 123.287 11.0944 124.902 13.0867 124.902H130.913C132.905 124.902 134.52 123.287 134.52 121.295V49.1559M104.462 19.0981L134.52 49.1559M104.462 19.0981V46.1502C104.462 47.81 105.808 49.1559 107.468 49.1559H134.52",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M20.2185 21.6806C20.6341 20.6642 21.6236 20 22.7221 20H66.5728C67.6712 20 68.6608 20.6642 69.0763 21.6806L78.4719 44.6474H10.823L20.2185 21.6806Z M10.3815 46.4509H130.913C132.408 46.4509 133.619 47.6618 133.619 49.1561V121.295C133.619 122.789 132.408 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V46.4509Z":"M9.4798 121.295V45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549H130.913C132.906 45.549 134.52 47.1637 134.52 49.1559V121.295C134.52 123.287 132.906 124.902 130.913 124.902H13.0867C11.0945 124.902 9.4798 123.287 9.4798 121.295Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M9.4798 45.549V121.295C9.4798 123.287 11.0945 124.902 13.0867 124.902H130.913C132.906 124.902 134.52 123.287 134.52 121.295V49.1559C134.52 47.1637 132.906 45.549 130.913 45.549H79.815M9.4798 45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549M9.4798 45.549H79.815",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M132.825 31H11.1751C9.11354 31 7.59918 32.9715 8.0945 35.0106L27.3025 110.463C27.653 111.906 28.924 112.92 30.3831 112.92H113.617C115.076 112.92 116.347 111.906 116.698 110.463L135.906 35.0106C136.401 32.9715 134.886 31 132.825 31Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M93.2603 48.8289L74.8382 18.1385C73.7284 16.4493 71.2511 16.4493 70.1413 18.1385L51.7195 48.8289C51.3354 49.4134 50.7472 49.8337 50.0698 50.0076L14.5248 57.5829C12.5231 58.0968 11.7423 60.523 13.0688 62.1078L37.2107 88.5999C37.6704 89.1492 37.903 89.8531 37.8609 90.5682L34.3002 125.894C34.1806 127.929 36.2 129.41 38.1052 128.685L71.4895 114.399C72.1339 114.154 72.8457 114.154 73.49 114.399L106.874 128.685C108.779 129.41 110.799 127.929 110.679 125.894L107.118 90.5682C107.077 89.8531 107.309 89.1492 107.769 88.5999L131.911 62.1078C133.237 60.523 132.457 58.0968 130.455 57.5829L94.9096 50.0076C94.2325 49.8337 93.6443 49.4134 93.2603 48.8289Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M120.45 27H23.55C22.1417 27 21 28.1454 21 29.5583V86.4924C21 87.408 21.4877 88.2538 22.2789 88.7102L70.7289 116.66C71.5159 117.113 72.4841 117.114 73.2711 116.66L121.721 88.7102C122.512 88.2538 123 87.408 123 86.4924V29.5583C123 28.1454 121.858 27 120.45 27Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8.24869 71.3645L24.1079 34.3397C24.6034 33.1629 25.7559 32.3976 27.0328 32.3976H116.967C118.244 32.3976 119.397 33.1629 119.892 34.3397L135.751 71.3645C136.083 72.152 136.083 73.04 135.751 73.8275L119.892 110.852C119.397 112.029 118.244 112.794 116.967 112.794H27.0328C25.7559 112.794 24.6034 112.029 24.1079 110.852L8.24869 73.8275C7.9171 73.04 7.9171 72.152 8.24869 71.3645Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M129.24 59.4647L74.475 16.7477C73.1969 15.7508 71.4046 15.7508 70.1265 16.7477L15.3612 59.4647C14.1752 60.3897 13.7044 61.9638 14.1876 63.388L34.9562 124.601C35.4429 126.035 36.7893 127 38.304 127H106.298C107.812 127 109.159 126.035 109.645 124.601L130.414 63.388C130.897 61.9638 130.426 60.3897 129.24 59.4647Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M94.8699 16H49.1301C48.3125 16 47.5284 16.3248 46.9503 16.9029L16.9029 46.9503C16.3248 47.5284 16 48.3125 16 49.1301V94.8699C16 95.6875 16.3248 96.4716 16.9029 97.0497L46.9503 127.097C47.5284 127.675 48.3125 128 49.1301 128H94.8699C95.6875 128 96.4716 127.675 97.0497 127.097L127.097 97.0497C127.675 96.4716 128 95.6875 128 94.8699V49.1301C128 48.3125 127.675 47.5284 127.097 46.9503L97.0497 16.9029C96.4716 16.3248 95.6875 16 94.8699 16Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M47.1111 47.1099V18.8718C47.1111 17.2857 48.3969 16 49.9829 16H94.0171C95.6031 16 96.8889 17.2857 96.8889 18.8718V46.632C96.8889 46.6325 96.8896 46.6325 96.8901 46.6325H125.128C126.714 46.6325 128 47.9182 128 49.5043V94.0171C128 95.6031 126.714 96.8889 125.128 96.8889H96.8894C96.8889 96.8889 96.8889 96.8896 96.8889 96.8901V125.128C96.8889 126.714 95.6031 128 94.0171 128H49.9829C48.3969 128 47.1111 126.714 47.1111 125.128V96.8894C47.1111 96.8889 47.1104 96.8889 47.1099 96.8889H18.8718C17.2857 96.8889 16 95.6031 16 94.0171V49.9829C16 48.3969 17.2857 47.1111 18.8718 47.1111H47.1106C47.1111 47.1111 47.1111 47.1104 47.1111 47.1099Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:L(n)?"M8.28613 31.5551C8.28613 30.119 9.45004 28.9551 10.8862 28.9551H16.664V115.045H10.8862C9.45004 115.045 8.28613 113.881 8.28613 112.445V31.5551Z M18.3974 115.045V28.9551H127.021V115.045H18.3974Z M128.754 115.045V28.9551H134.532C135.968 28.9551 137.132 30.119 137.132 31.5551V112.445C137.132 113.881 135.968 115.045 134.532 115.045H128.754Z":"M7.68134 31.5551C7.68134 29.6403 9.23327 28.0884 11.148 28.0884H17.7926H128.15H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15H17.7926H11.148C9.23327 115.912 7.68134 114.36 7.68134 112.445V31.5551Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M17.7926 28.0884H11.148C9.23327 28.0884 7.68134 29.6403 7.68134 31.5551V112.445C7.68134 114.36 9.23327 115.912 11.148 115.912H17.7926M17.7926 28.0884V115.912M17.7926 28.0884H128.15M17.7926 115.912H128.15M128.15 28.0884V115.912M128.15 28.0884H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M3 31.9044C3 28.2578 6.22596 25.4544 9.83687 25.963L136.837 43.8517C139.798 44.2688 142 46.8027 142 49.793V112C142 115.314 139.314 118 136 118H9C5.68629 118 3 115.314 3 112V31.9044Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M27.8014 70.724L8.31687 37.526C7.36024 35.695 8.68491 33.5 10.7466 33.5H112.245C113.225 33.5 114.13 34.0241 114.62 34.8749L135.632 70.6249C136.122 71.4758 136.122 72.5242 135.632 73.3751L114.62 109.125C114.13 109.976 113.225 110.5 112.245 110.5H10.7466C8.68491 110.5 7.36024 108.305 8.31687 106.474L27.8014 73.276C28.219 72.4768 28.219 71.5232 27.8014 70.724Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M33.129 70.5542L11.8756 36.4458C10.776 34.4464 12.2225 32 14.5043 32H106.561C107.609 32 108.582 32.5478 109.126 33.4447L132.065 70.4447C132.645 71.4006 132.645 72.5994 132.065 73.5553L109.126 110.555C108.582 111.452 107.609 112 106.561 112H14.5043C12.2225 112 10.776 109.554 11.8756 107.554L33.129 73.4458C33.6241 72.5455 33.6241 71.4545 33.129 70.5542Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8 24.41C8 23.0789 9.07886 22 10.41 22H133.59C134.921 22 136 23.0789 136 24.4095V109.272C136 110.813 134.515 111.919 133.037 111.477L117.877 106.938C101.942 102.167 84.7341 104.324 70.4706 112.88C55.667 121.76 37.6577 123.527 21.4094 117.693L9.33252 113.356C8.53306 113.069 8 112.312 8 111.462V24.41Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M8.00262 23.8137C8.00262 22.5661 9.01375 21.5549 10.2614 21.5549H124.704C125.951 21.5549 126.962 22.5661 126.962 23.8137V28.0802H18.2924C16.2163 28.0802 14.5278 29.7638 14.5278 31.8442V105.774L9.51934 104.138L9.49978 104.132C8.61172 103.869 8.00262 103.052 8.00262 102.126V23.8137Z M18.2924 29.586H133.739C134.986 29.586 135.997 30.5972 135.997 31.8442V111.379C135.997 112.823 134.605 113.86 133.221 113.445L119.012 109.191C104.078 104.72 87.9501 106.742 74.5822 114.761C60.7079 123.083 43.8294 124.739 28.6012 119.271L17.2825 115.207C16.5333 114.937 16.0337 114.227 16.0337 113.432V31.8442C16.0337 30.5967 17.0466 29.586 18.2924 29.586Z":"M7.24973 23.8136C7.24973 22.1502 8.59794 20.802 10.2614 20.802H124.704C126.367 20.802 127.715 22.1502 127.715 23.8136V28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812L9.28559 104.854C8.07793 104.495 7.24973 103.386 7.24973 102.126V23.8136Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M127.715 28.833V23.8136C127.715 22.1502 126.367 20.802 124.704 20.802H10.2614C8.59794 20.802 7.24973 22.1502 7.24973 23.8136V102.126C7.24973 103.386 8.07793 104.495 9.28559 104.854L15.2808 106.812M127.715 28.833H18.2924C16.6315 28.833 15.2808 30.1803 15.2808 31.8442V106.812M127.715 28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8.94141 70.0367L59.3021 28.0736C60.95 26.7503 63.3967 27.9234 63.3967 30.037V50.1764C63.3967 50.1765 63.3968 50.1767 63.3969 50.1769V50.1769C63.3971 50.177 63.3973 50.1771 63.3974 50.1771H133.482C134.873 50.1771 136 51.3044 136 52.6951V91.3049C136 92.6956 134.873 93.823 133.482 93.823H63.3974C63.3973 93.823 63.3971 93.8231 63.3969 93.8232V93.8232C63.3968 93.8233 63.3967 93.8235 63.3967 93.8237V113.963C63.3967 116.077 60.95 117.25 59.3021 115.926L8.9414 73.9634C7.6862 72.9554 7.6862 71.0446 8.94141 70.0367Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M12.5068 70.5597C11.8311 71.4272 11.8311 72.5728 12.5068 73.4403L47.1369 117.894C48.7381 119.95 52.3844 118.949 52.3844 116.454V99.4781H129C130.657 99.4781 132 98.135 132 96.4781V48.7638C132 47.107 130.657 45.7638 129 45.7638H52.3844V27.5458C52.3844 25.0508 48.7381 24.05 47.1369 26.1055L12.5068 70.5597Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M135.059 73.9634L84.6979 115.926C83.05 117.25 80.6033 116.077 80.6033 113.963V93.8237C80.6033 93.8235 80.6032 93.8233 80.6031 93.8232V93.8232C80.6029 93.8231 80.6028 93.823 80.6026 93.823H10.518C9.12736 93.823 8 92.6956 8 91.3049V52.6951C8 51.3044 9.12736 50.1771 10.518 50.1771H80.6026C80.6027 50.1771 80.6029 50.177 80.6031 50.1769V50.1769C80.6032 50.1767 80.6033 50.1765 80.6033 50.1764V30.037C80.6033 27.9234 83.05 26.7503 84.6979 28.0736L135.059 70.0367C136.314 71.0446 136.314 72.9554 135.059 73.9634Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M131.493 70.5597C132.169 71.4272 132.169 72.5728 131.493 73.4403L96.8631 117.894C95.2619 119.95 91.6156 118.949 91.6156 116.454V99.4781H15C13.3432 99.4781 12 98.135 12 96.4781V48.7638C12 47.107 13.3432 45.7638 15 45.7638H91.6156V27.5458C91.6156 25.0508 95.2619 24.05 96.8631 26.1055L131.493 70.5597Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M24.029 72C24.029 59.2726 28.9314 47.6903 36.951 39.0383L70.4029 72.4902L37.4306 105.472C29.1273 96.7676 24.029 84.9792 24.029 72Z M72.5239 70.3686L39.0571 36.9017C47.7613 28.5984 59.5497 23.5 72.529 23.5C85.5032 23.5 97.2876 28.5945 105.991 36.8921L72.5239 70.3686Z M74.6452 72.4899L108.098 39.0281C116.123 47.6811 121.029 59.2676 121.029 72C121.029 84.9793 115.931 96.7677 107.627 105.472L74.6452 72.4899Z M72.5242 74.6115L105.491 107.578C96.8387 115.598 85.2564 120.5 72.529 120.5C59.8015 120.5 48.2191 115.598 39.5671 107.578L72.5242 74.6115Z":"M72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883ZM108.121 36.883L72.524 72.49M108.121 36.883L108.129 36.875M36.929 36.895L72.524 72.49M72.524 72.49L107.634 107.6M72.524 72.49L37.424 107.6",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M71.058 70.5H24.0807C24.8582 44.9063 45.4643 24.3002 71.058 23.5227V70.5Z M74.058 70.5V23.5227C99.6516 24.3002 120.258 44.9063 121.035 70.5H74.058Z M74.058 73.5H121.035C120.258 99.0936 99.6516 119.7 74.058 120.477V73.5Z M71.058 73.5V120.477C45.4643 119.7 24.8582 99.0936 24.0807 73.5H71.058Z":"M122.558 72C122.558 99.6142 100.172 122 72.558 122C44.9437 122 22.558 99.6142 22.558 72C22.558 44.3858 44.9437 22 72.558 22C100.172 22 122.558 44.3858 122.558 72Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M122.558 72C122.558 99.6142 100.172 122 72.558 122M122.558 72C122.558 44.3858 100.172 22 72.558 22M122.558 72H72.558M72.558 122C44.9437 122 22.558 99.6142 22.558 72M72.558 122V72M22.558 72C22.558 44.3858 44.9437 22 72.558 22M22.558 72H72.558M72.558 22V72",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8 43.5V84.2344C8 98.0415 19.1929 109.234 33 109.234H33.4992C33.4994 109.234 33.4996 109.235 33.4997 109.235V109.235C33.4999 109.235 33.5 109.235 33.5 109.235V121.505C33.5 124.734 37.147 126.624 39.7975 124.769L61.9993 109.235V109.235C62.0001 109.235 62.001 109.234 62.002 109.234H111C124.807 109.234 136 98.0415 136 84.2344V43.5C136 29.6929 124.807 18.5 111 18.5H33C19.1929 18.5 8 29.6929 8 43.5Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M128 50V80.5754C128 92.7257 118.15 102.575 106 102.575H60.4126V102.575C60.4117 102.575 60.411 102.576 60.4103 102.577L42.151 115.27C39.9715 117.123 36.972 115.234 36.972 112.007L36.9715 102.576C36.9715 102.576 36.9717 102.576 36.9718 102.575C36.9718 102.575 36.9719 102.575 36.9718 102.575H26.486C20.6947 102.575 16 97.8807 16 92.0894V50C16 37.8497 25.8497 28 38 28H106C118.15 28 128 37.8497 128 50Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M8.00348 31.8228C8.00348 30.3962 9.15968 29.24 10.5863 29.24H15.465V36.7015H8.00348V31.8228Z M17.1868 36.7015V29.24H133.414C134.84 29.24 135.997 30.3962 135.997 31.8228V36.7015H17.1868Z M17.1868 38.4233H135.997V112.177C135.997 113.604 134.84 114.76 133.414 114.76H17.1868V38.4233Z M15.465 38.4233V114.76H10.5863C9.15968 114.76 8.00348 113.604 8.00348 112.177V38.4233H15.465Z":"M7.64255 31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259H133.914C135.816 28.3792 137.357 29.9208 137.357 31.8229V37.5625V112.177C137.357 114.079 135.816 115.621 133.914 115.621H16.8259H11.0863C9.1842 115.621 7.64255 114.079 7.64255 112.177V37.5625V31.8229Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M7.64255 37.5625V31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259M7.64255 37.5625V112.177C7.64255 114.079 9.1842 115.621 11.0863 115.621H16.8259M7.64255 37.5625H16.8259M16.8259 115.621H133.914C135.816 115.621 137.357 114.079 137.357 112.177V37.5625M16.8259 115.621V37.5625M137.357 37.5625V31.8229C137.357 29.9208 135.816 28.3792 133.914 28.3792H16.8259M137.357 37.5625H16.8259M16.8259 28.3792V37.5625",...N(e,n)})))},324588:(e,r,n)=>{n.d(r,{H1:()=>c,HY:()=>i,NZ:()=>d,b:()=>l,fK:()=>o,tV:()=>s});var a=n(805014);let i="delightful-toolbar",o="delightful_toolbar",s="action_open_universal_insert_collage_modal",l="delightful-toolbar-universal-insert-button-icon",c=14,d="delightful-toolbar-stamp-button";a.NLJ.VECTOR_PENCIL},547748:(e,r,n)=>{n.d(r,{B:()=>i});var a=n(805014);function i(e){return(e===a.NLJ.VECTOR_PENCIL||e===a.NLJ.ERASER||e===a.NLJ.HIGHLIGHTER||e===a.NLJ.WASHI_TAPE)&&(e===a.NLJ.VECTOR_PENCIL||e===a.NLJ.HIGHLIGHTER)}},992155:(e,r,n)=>{var a=n(411855),i=n(805014);n(76265),n(9805),n(882200),n(324588),a.createContext({hoveredShape:null,onMouseEnter:()=>{},onMouseLeave:()=>{},draggedShape:null,shouldDragCancel:!1,onDragStart:()=>{},onDrag:()=>{},onDragEnd:()=>{}}),Array.from(new Map([["SQUARE",i.NLJ.SHAPE_WHITEBOARD_SQUARE],["ELLIPSE",i.NLJ.SHAPE_WHITEBOARD_ELLIPSE],["ROUNDED_RECTANGLE",i.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE],["DIAMOND",i.NLJ.SHAPE_WHITEBOARD_DIAMOND],["TRIANGLE_UP",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP],["TRIANGLE_DOWN",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN],["PARALLELOGRAM_RIGHT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT],["PARALLELOGRAM_LEFT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT],["ENG_DATABASE",i.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE],["ENG_QUEUE",i.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE],["ENG_FILE",i.NLJ.SHAPE_WHITEBOARD_ENG_FILE],["ENG_FOLDER",i.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER],["TRAPEZOID",i.NLJ.SHAPE_WHITEBOARD_TRAPEZOID],["STAR",i.NLJ.SHAPE_WHITEBOARD_STAR],["SHIELD",i.NLJ.SHAPE_WHITEBOARD_SHIELD],["HEXAGON",i.NLJ.SHAPE_WHITEBOARD_HEXAGON],["PENTAGON",i.NLJ.SHAPE_WHITEBOARD_PENTAGON],["OCTAGON",i.NLJ.SHAPE_WHITEBOARD_OCTAGON],["PLUS",i.NLJ.SHAPE_WHITEBOARD_PLUS],["PREDEFINED_PROCESS",i.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS],["MANUAL_INPUT",i.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT],["CHEVRON",i.NLJ.SHAPE_WHITEBOARD_CHEVRON],["DOCUMENT_SINGLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE],["DOCUMENT_MULTIPLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE],["ARROW_LEFT",i.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT],["ARROW_RIGHT",i.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT],["SUMMING_JUNCTION",i.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION],["OR",i.NLJ.SHAPE_WHITEBOARD_OR],["SPEECH_BUBBLE",i.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE],["INTERNAL_STORAGE",i.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE],["MINDMAP_TREE_NUCLEUS",i.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS]]),([e,r])=>[r,e]),i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,i.NLJ.SHAPE_WHITEBOARD_ELLIPSE,i.NLJ.SHAPE_WHITEBOARD_SQUARE},150237:(e,r,n)=>{n.d(r,{A:()=>l});var a=n(220482),i=n(252207),o=n(198076),s=n(324588);function l({source:e,openedViaHover:r=!1}){let n=(0,a.Tc)(s.NZ),l=(0,a.Tc)(s.HY);if(n||l){let a=n?n.getBoundingClientRect():l.getBoundingClientRect(),c=a.x+a.width/2,d=a.y-(o.l+2)-s.H1;i.CB.handleShortcutPressWithType({viewportX:c,viewportY:d,source:e,openedViaHover:r,wheelType:"STAMP"}),i.CB.handleShortcutRelease(c,d)}}},581544:(e,r,n)=>{n.d(r,{iH:()=>a}),n(411855),n(188507),n(805014),n(390592),n(193144),n(336427),n(358275),n(334440),n(190500),n(393591),n(309494),n(695024),n(176160),n(303480),n(421023),n(24546),n(482058);var a=(e=>(e[e.TRUE=0]="TRUE",e[e.FALSE=1]="FALSE",e[e.LOADING=2]="LOADING",e))(a||{})},460005:(e,r,n)=>{n.d(r,{bj:()=>b});var a=n(805014),i=n(851169),o=n(875877),s=n(117736),l=n(806273),c=n(643486);let d=(0,o.atom)(null),u=(0,o.atom)(null),m=(0,o.atom)({x:0,y:0}),p=(0,o.atom)(null),h=(0,o.atom)(!1),_=(0,o.atom)(!1);(0,o.atom)(e=>e(u)),(0,o.atom)(e=>e(h)),(0,o.atom)(e=>e(_)),(0,o.atom)(e=>e(m));let g=(0,o.atom)(!1),f="new_preview",E=null;function y(){E&&E.abort(f),E=null}(0,o.atom)(null,async(e,r,n,i)=>{let o=!e(h)&&(0,c.t)(n.template,e(u));if(e(_)||o||e(g))return!1;r(T),r(h,!0),r(d,i.previewManager),r(u,n.template),y();let s=(E||(E=new TaskController({priority:"background"})),E);function b(r){return scheduler.postTask(()=>!!((0,c.t)(n.template,e(u))&&e(l.w))&&(r(),!0),{signal:s.signal}).catch(e=>{if(e===f)return!1;throw e})}s.setPriority(i.priority);let v=e(d),I=(async()=>{try{let o=await e(S(n)),s=v?.nodeType===a.Z6A.SECTION?v.options:null,l=i?.position||null;if(!await b(()=>a.Hyj.prepareTemplatePreview(o,s,l))||!await b(()=>a.Hyj.insertTemplatePreview(i.moveViewportAfterPreview,i.viewportOptions||null)))return!1;let c=a.Hyj.getTemplatePreviewSize();return r(m,c),r(h,!1),!0}catch(a){throw(0,c.t)(n.template,e(u))&&r(T),a}})();return r(p,I),await I});let b=(0,o.atom)(null,async(e,r,n)=>{let o=e(p);if(!o||e(_))return!1;r(_,!0);try{if(!await o||!e(l.w))return!1;return await scheduler.postTask((0,i.nc)(n.editScopeType,"commit-figjam-template-preview",()=>a.Hyj.commitTemplatePreview(n.selectTemplateAfterCommit,n.moveViewportAfterCommit)),{priority:n.priority}),r(u,null),r(g,!0),r(I),!0}finally{r(_,!1)}}),v=(0,o.atom)(null,(e,r)=>{r(g,!1),e(h)&&(y(),r(T))}),T=(0,o.atom)(null,(e,r)=>{r(u,null),r(p,null),r(h,!1),r(_,!1),e(l.w)&&a.Hyj.clearTemplatePreview()});(0,o.atom)(null,(e,r)=>{r(v),r(T)});let I=(0,o.atom)(null,(e,r)=>{r(d,null),a.Hyj.clearSectionPreviewSupport()}),S=(0,o.atomFamily)(e=>(0,o.atom)(async()=>await (0,s.dT)(e)),(e,r)=>e.fileKey===r.fileKey&&e.fileVersion===r.fileVersion&&(0,c.t)(e.template,r.template))},482058:(e,r,n)=>{n(76265),n(303480),n(694630),n(103140)},703516:(e,r,n)=>{n.d(r,{O:()=>u});var a=n(411855);n(805014),n(629019),n(524696);var i=n(747484);n(896948);var o=n(207849),s=n(73041);n(938983),n(797187),n(688656);var l=n(76265),c=n(174103),d=n(490162);(0,c.ex)("zoom_slider",function(e){let{zoomPercentage:r}=e;return a.createElement("div",{className:d.P},(0,l.tx)("whiteboard.zoom_slider.zoom_percentage",{zoomProportion:r/100}))},e=>({zoomPercentage:Number(e.dataset.tooltipZoomPercentage)}));function u(){let e=(0,s.ow)(),r=(0,o.g)();return(e||r)&&!i.Ay.isIpad}},383846:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AutoLayout=r.styleForAutoLayout=void 0;let a=n(165959),i=n(411855),o=n(745490),s=n(466590),l=n(826212),c=n(657367),d=n(260458);function u(e,r,n){let{style:a,overlayStyle:i,wrapperStyle:o}=(0,s.styleForFrame)(e,r,n);return{style:Object.assign(Object.assign(Object.assign({},a),(0,l.getParentLayout)(e)),(0,l.getVisibility)(e)),overlayStyle:i,wrapperStyle:o}}r.styleForAutoLayout=u,r.AutoLayout=i.forwardRef(function(e,r){let{attributes:n,children:l}=e,m=(0,a.__rest)(e,["attributes","children"]),p=i.useContext(o.ParentContext);(0,o.warnInvalidConstraints)(Object.assign(Object.assign({},m),{parent:p}));let h=(0,d.normalizeProps)(Object.assign(Object.assign({},(0,c.getDefaultAutoLayoutProps)()),m)),_=(0,o.getInvalidFillParentCheckerRef)(Object.assign(Object.assign({},h),{parent:p})),g=u(h,p,i.Children.count(l)>0);return i.createElement(o.ParentContext.Provider,{value:{type:"autolayout",props:h}},(0,s.domNodeFromFrame)({figmaLayerName:h.name,styles:g,attributes:n,children:l,ref:(0,o.mergeRefs)([_,r])}))})},17030:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.applyMatrixToPoint=r.roundBoundingBox=r.roundTransform=r.isRotated=r.getRelativeBoundsAndRotation=r.skipPosition=r.rotatePoint=r.multiply=r.getCenteredRotation=r.flipVertical=r.isFlippedVertical=r.getAngleDeg=r.getAngle=void 0;let a=n(656146);function i(e){let r=e[0][0];return Math.atan2(e[0][1],r)}function o(e,r){let[[n,a,i],[o,s,l]]=e,[[c,d,u],[m,p,h]]=r;return[[n*c+a*m,n*d+a*p,n*u+a*h+i],[o*c+s*m,o*d+s*p,o*u+s*h+l]]}function s(e,r){let[[n,a,i],[o,s,l]]=e,[c,d]=r;return[n*c+a*d+i,o*c+s*d+l]}function l(e){let[[r,n],[a,i]]=e;return[[r,n,0],[a,i,0]]}r.getAngle=i,r.getAngleDeg=function(e){return i(e)*(180/Math.PI)},r.isFlippedVertical=function(e){let[[r,n],[a,i]]=e;return r*i-n*a<0},r.flipVertical=function(e){return o([[1,0,0],[0,-1,0]],e)},r.getCenteredRotation=function(e,r,n){let a=e*Math.PI/180;return o([[1,0,r/2],[0,1,n/2]],o([[Math.cos(a),Math.sin(a),0],[-Math.sin(a),Math.cos(a),0]],[[1,0,-r/2],[0,1,-n/2]]))},r.multiply=o,r.rotatePoint=s,r.skipPosition=l,r.getRelativeBoundsAndRotation=function(e){let{width:r,height:n}=e,a=o([[1,0,r/2],[0,1,n/2]],o(l(e.relativeTransform),[[1,0,-r/2],[0,1,-n/2]])),[i,c]=s(a,[0,0]),[d,u]=s(a,[0,n]),[m,p]=s(a,[r,0]),[h,_]=s(a,[r,n]),g=Math.min(i,d,m,h),f=Math.min(c,u,p,_),E=Math.max(i,d,m,h)-g,y=Math.max(c,u,p,_)-f,b=o([[1,0,(E-r)/2],[0,1,(y-n)/2]],a),[[,,v],[,,T]]=b;return{relativeBoundingBox:{x:e.relativeTransform[0][2]-v,y:e.relativeTransform[1][2]-T,width:E,height:y},rotationOnlyTransform:b,relativeTransform:e.relativeTransform}},r.isRotated=function(e){if(!e.relativeTransform)return!1;let r=e.relativeTransform[0][0],n=e.relativeTransform[0][1],a=e.relativeTransform[1][0],i=e.relativeTransform[1][1];return!(r-1<1e-5&&n-0<1e-5&&a-0<1e-5&&i-1<1e-5)},r.roundTransform=function(e){return[[(0,a.round)(e[0][0],5),(0,a.round)(e[0][1],5),(0,a.round)(e[0][2],5)],[(0,a.round)(e[1][0],5),(0,a.round)(e[1][1],5),(0,a.round)(e[1][2],5)]]},r.roundBoundingBox=function(e){return{x:(0,a.round)(e.x),y:(0,a.round)(e.y),width:(0,a.round)(e.width),height:(0,a.round)(e.height)}},r.applyMatrixToPoint=function(e,r){return[r[0]*e[0][0]+r[1]*e[0][1]+e[0][2],r[0]*e[1][0]+r[1]*e[1][1]+e[1][2]]}},723458:(e,r,n)=>{n.d(r,{_:()=>s});var a=n(309757),i=n(423164),o=n(593575);class s{constructor(){this.queues_={},o.r.forEach(e=>{this.queues_[e]=new i.C}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(e,r){if(void 0!==(r=Object.assign({},r)).signal){if(null===r.signal||!("aborted"in r.signal)||"function"!=typeof r.signal.addEventListener)return Promise.reject(TypeError("'signal' is not a valid 'AbortSignal'"));if(r.signal&&r.signal.priority&&!o.r.includes(r.signal.priority))return Promise.reject(TypeError(`Invalid task priority: '${r.signal.priority}'`))}if(void 0!==r.priority&&(null===r.priority||!o.r.includes(r.priority)))return Promise.reject(TypeError(`Invalid task priority: '${r.priority}'`));if(void 0===r.delay&&(r.delay=0),r.delay=Number(r.delay),r.delay<0)return Promise.reject(TypeError("'delay' must be a positive number."));let n={callback:e,options:r,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&!this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(new DOMException("The task was aborted.","AbortError"))},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},a=new Promise((e,r)=>{n.resolve=e,n.reject=r});return this.schedule_(n),a}schedule_(e){let r=e.options.signal;if(r){if(r.aborted){e.reject(new DOMException("The task was aborted.","AbortError"));return}e.abortCallback=()=>{e.onTaskAborted()},r.addEventListener("abort",e.abortCallback)}if(e.options.delay>0){e.hostCallback=new a.g(()=>{e.hostCallback=null,this.onTaskDelayExpired_(e)},null,e.options.delay);return}this.pushTask_(e),this.scheduleHostCallbackIfNeeded_()}onTaskDelayExpired_(e){this.pushTask_(e),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(e){let r=this.signals_.get(e);if(void 0===r)throw Error("Attempting to change priority on an unregistered signal");if(r===e.priority)return;let n=this.queues_[r];this.queues_[e.priority].merge(n,r=>r.options.signal===e),this.signals_.set(e,e.priority)}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){let e=this.nextTaskPriority_();null!=e&&("background"!==e&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new a.g(()=>{this.schedulerEntryCallback_()},e,0)))}pushTask_(e){let r;if(r=e.options.priority?e.options.priority:e.options.signal&&e.options.signal.priority?e.options.signal.priority:"user-visible",!o.r.includes(r))throw TypeError(`Invalid task priority: ${r}`);if(e.options.signal&&e.options.signal.priority){let r=e.options.signal;this.signals_.has(r)||(r.addEventListener("prioritychange",()=>{this.onPriorityChange_(r)}),this.signals_.set(r,r.priority))}this.queues_[r].push(e)}runNextTask_(){let e=null;do{let r=this.nextTaskPriority_();if(null==r)return;e=this.queues_[r].takeNextTask()}while(e.isAborted())try{let r=e.callback();e.resolve(r)}catch(r){e.reject(r)}finally{e.onTaskCompleted()}}nextTaskPriority_(){for(let e=0;e<o.r.length;e++){let r=o.r[e];if(!this.queues_[r].isEmpty())return r}return null}}},213491:(e,r,n)=>{n.d(r,{i:()=>o,w:()=>i});var a=n(593575);class i extends Event{constructor(e,r){if(!r||!a.r.includes(r.previousPriority))throw TypeError(`Invalid task priority: '${r.previousPriority}'`);super(e),this.previousPriority=r.previousPriority}}class o extends AbortController{constructor(e={}){if(super(),null==e&&(e={}),"object"!=typeof e)throw TypeError("'init' is not an object");let r=void 0===e.priority?"user-visible":e.priority;if(!a.r.includes(r))throw TypeError(`Invalid task priority: '${r}'`);this.priority_=r,this.isPriorityChanging_=!1,function(e){let r=e.signal;Object.defineProperties(r,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),r.addEventListener("prioritychange",e=>{r.onprioritychange&&r.onprioritychange(e)})}(this)}setPriority(e){if(!a.r.includes(e))throw TypeError("Invalid task priority: "+e);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority===e)return;this.isPriorityChanging_=!0;let r=this.priority_;this.priority_=e;let n=new i("prioritychange",{previousPriority:r});this.signal.dispatchEvent(n),this.isPriorityChanging_=!1}}},145173:(e,r,n)=>{n.d(r,{$y:()=>s});var a=n(263159),i=n(411855),o=n(629750);(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"full-width",...e})).displayName="Banner.FullWidth",(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"inline",...e})).displayName="Banner.Inline",(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"informational",...e})).displayName="Banner.Informational";let s=(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"inset-modal",...e}));s.displayName="Banner.InsetModal",(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"inset",...e})).displayName="Banner.Inset"},605161:(e,r,n)=>{n.d(r,{B:()=>i});var a=n(263159);let i=(0,n(411855).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.923 4.267a.5.5 0 1 0-.846-.534l-5.625 8.907L7.89 8.188a.5.5 0 0 0-.78.624l4 5a.5.5 0 0 0 .813-.045zM5 14.5a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 5.5 18h13a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})})})},344793:(e,r,n)=>{n.d(r,{_:()=>d});var a=n(263159),i=n(411855),o=n(665648),s=n(656393),l=n(857420);let c=(0,i.createContext)(void 0);c.Provider;let d=(0,i.forwardRef)(({recordingKey:e,children:r,href:n,trusted:d,newTab:u,onClick:m,htmlAttributes:p,...h},_)=>{let g=(0,i.useContext)(c),f=d??function(e){if(!l.A)return!1;try{let r=window.location.origin;return new URL(e,r).origin===r}catch{return!1}}(n)?"noopener":"noopener nofollow noreferrer ugc",E=(0,o.Q)(m||g?e=>{g?.(e),m?.(e)}:void 0,{eventName:"click",recordingKey:e},[m,g]);return(0,a.jsx)("a",{target:u?"_blank":void 0,rel:f,...s.r,...p,...h,ref:_,onClick:E,href:n,children:r})});d.displayName="LinkPrimitive"},202707:(e,r,n)=>{n.d(r,{Uk:()=>u,fP:()=>p,mc:()=>h,nK:()=>m});var a=n(263159),i=n(411855),o=n(781208),s=n(360830),l=n(972061),c=n(56102),d=n(200095);let u=(0,i.createContext)(void 0);function m({children:e}){let r=(0,i.useRef)(null);return(0,a.jsx)("div",{className:d.P,ref:r,children:(0,a.jsx)(u.Provider,{value:r,children:e})})}function p({type:e,softDismiss:r,provideOwnDismiss:n,isOpen:a,openOnHover:c=!1,middleware:d,...u}){let m=(0,i.useId)(),p=(0,i.useRef)(null),[h,_]=(0,i.useState)(m),{refs:g,floatingStyles:f,context:E}=(0,o.we)({...u,middleware:d?d?.concat([s.UE({element:p})]):[(0,s.cY)(8),(0,s.UU)({padding:8,fallbackAxisSideDirection:"start"}),(0,s.UE)({element:p})],open:a,whileElementsMounted:l.ll}),y=void 0===r?"listbox"===e||"menu"===e:r,b=(0,o.kp)(E,{enabled:"tutorial"!==e}),v=(0,o.s9)(E,{enabled:!n,outsidePress:r}),T=(0,o.Mk)(E,{enabled:c,move:!1,delay:{open:500,close:0},handleClose:(0,o.iB)({requireIntent:!1,blockPointerEvents:!0,buffer:1})}),{getReferenceProps:I,getFloatingProps:S}=(0,o.bv)([b,v,T]),w=(0,i.useCallback)(({style:r,...n}={})=>(n.id&&_(n.id),{isOpen:a,type:e,context:E,useSoftDismiss:y,id:h,ref:g.setFloating,style:{...r,...f},...n,...S({})}),[h,E,y,f,S,a,g.setFloating,e]),A=(0,i.useCallback)(()=>({ref:p,context:E}),[E,p]);return{getTriggerProps:(0,i.useCallback)((r={})=>{let n=g.setReference;if("tutorial"===e){let{onClick:e,...r}=I({ref:n,"aria-details":h});return r}return I({...r,ref:n,"aria-controls":h,"aria-haspopup":e,"aria-expanded":a})},[h,I,a,g.setReference,e]),getArrowProps:A,getContainerProps:w,context:E}}m.displayName="PopoverOutlet",(0,i.forwardRef)(({fill:e="var(--color-bg)",...r},n)=>{let s=(0,i.useRef)(),l=(0,o.SV)([s,n]);return(0,a.jsx)(o.ie,{ref:l,tipRadius:1,fill:e,...r})}).displayName="PopoverPrimitive.Arrow";let h=(0,i.forwardRef)(({isOpen:e,type:r,children:n,context:s,useSoftDismiss:l,style:d,...p},h)=>{let _=(0,i.useContext)(u),[g,f]=(0,c.q)(),E={dialog:"var(--z-index-window)",grid:"var(--z-index-window)",tree:"var(--z-index-window)",listbox:"var(--z-index-dropdown)",menu:"var(--z-index-dropdown)",tutorial:"var(--z-index-window)"};return e||"listbox"!==r?e?l?(0,a.jsx)(o.XF,{root:_,children:(0,a.jsx)(m,{children:(0,a.jsx)(o.zR,{style:{zIndex:E[r]},lockScroll:!0,children:(0,a.jsx)(o.s3,{context:s,modal:!1,children:(0,a.jsx)("div",{ref:h,style:d,...p,children:n})})})})}):(0,a.jsx)(f,{value:g,children:(0,a.jsx)(o.XF,{root:_,children:(0,a.jsx)(m,{children:(0,a.jsx)("section",{"aria-labelledby":g,ref:h,...p,style:{...d,zIndex:E[r]},children:n})})})}):null:(0,a.jsx)("div",{style:{display:"none"},children:n})});h.displayName="PopoverPrimitive.Container"},553137:(e,r,n)=>{n.d(r,{N7:()=>i});let a={reportError:()=>{}},i=(...e)=>a.reportError(...e)},791419:(e,r,n)=>{n.d(r,{Lh:()=>o}),n(263159);var a=n(411855);let i=(0,a.createContext)({back:"Back",close:"Close",dismiss:"Dismiss",loading:"Loading",mixed:"Mixed",select:"Select an option",warning:"Warning:",danger:"Danger:"});function o(e){return(0,a.useContext)(i)[e]}},708159:(e,r,n)=>{n.d(r,{DX:()=>m,Kg:()=>p,PU:()=>d,U1:()=>h}),n(263159);var a=n(411855),i=n(109388),o=n(944831),s=n(857420);n(920327);let l=new Set,c=(0,a.createContext)(s.A?document.body:null);function d(){return Array.from(l)}function u(){return(0,a.useContext)(c)}function m(){let e=u();if(null==e)throw Error("Attempted to use WindowOutlet before it was rendered. If you need to use this hook before the WindowOutletProvider has rendered, use `useWindowOutletOrNull` instead.");return e}function p({children:e}){let r=u();return r?(0,i.createPortal)(e,r):null}function h(e){let r=(0,a.useRef)(null);return(0,a.useCallback)(n=>{(0,o.c)(e,n),null==n?l.delete(r.current):l.add(n),r.current=n},[e])}p.displayName="WindowOutlet"},240954:(e,r,n)=>{n.d(r,{K0:()=>T,wL:()=>b,x1:()=>y});var a=n(229808),i=n(846288),o=n(805014),s=n(455948),l=n(391286),c=n(903570),d=n(41949),u=n(955389),m=n(379720),p=n(304776),h=n(470347),_=n(627969),g=n(932682),f=n(245459);function E(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}let y=1;class b extends Error{}class v extends Error{}class T{get nodeContext(){return this._nodeContext}get scene(){if(this.sceneType===h.G)return o.AlE.getActiveDocument();switch((0,i.KF)("symbol"!=typeof this.sceneType,"this.sceneType cannot be Symbol"),this.sceneType){case o.juq.DETACHED_COMPONENTS:return o.glU.getDetachedComponentsScene();case o.juq.LIVE_FILE:return o.AlE.getDocumentByIndex(0);case o.juq.HISTORY:return o.AlE.getDocumentByIndex(y);case o.juq.PLAYGROUND:return o.glU.getPlaygroundScene();case o.juq.FIRST_DRAFT:return o.XJn.getOrCreateFDScene();case o.juq.LINTER:return o.mHF.getOrCreateLinterScene();case o.juq.AUTO_SUGGEST:throw Error("Auto suggest scene should be retrieved via TSAutoSuggestSceneGraph");default:(0,i.xb)(this.sceneType)}}get isValidScene(){return -1!==this.scene}getFromStablePath(e){let r=o.UNF.setGlobalUnstableNodeByStablePath(this.scene,e,this.nodeContext);return o.CUU.exists(this.nodeContext)&&r?this.getInternal(r,!1):null}getFromDeveloperFriendlyId(e){let r=o.UNF.setGlobalUnstableNodeByDeveloperFriendlyId(this.scene,e);return o.CUU.exists(this.nodeContext)&&r?this.getInternal(r,!1):null}getCurrentPage(){let e=o.CUU.getCurrentPage(this.nodeContext,this.scene);return e?this.getInternal(e,!1):null}async setCurrentPageAsync(e){if(this.sceneType!==h.G)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let r=new Promise(e=>{(0,s.o)(e)});o.CUU.setCurrentPageAsync(e,this.nodeContext);let n=await r;if(n)throw Error(n)}async setCurrentPageFromNodeAsync(e){if(this.sceneType!==h.G)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let r=new Promise(e=>{(0,s.o)(e)});o.CUU.setCurrentPageFromNodeAsync(e,this.nodeContext),await r}createNode(e,r={tracking:o.HzA.TRACK}){let n=o.CUU.createNode(a.w.NodeType[e],r,this.nodeContext,this.scene);if(!n)throw Error(`Cannot create node with type ${e}`);return this.getInternal(n,!1)}createNodeFromSVG(e,r={tracking:o.HzA.TRACK}){let n=o.CUU.createNodeFromSVG(e,r,this.nodeContext,this.scene);if(!n)throw Error("Cannot create node from SVG");return this.getInternal(n,!1)}createComponentFromNode(e){let r=o.CUU.createSymbolFromNode(e,this.nodeContext);if(!r)throw Error(`Cannot create component from node ${e}`);return this.getInternal(r,!1)}isDeveloperFriendlyIdAGuidPath(e){return o.CUU.isDeveloperFriendlyIdAGuidPath(e)}guidFromDeveloperFriendlyId(e){return o.CUU.guidFromDeveloperFriendlyId(e,this.scene)??""}developerFriendlyIdFromGuid(e){return o.CUU.developerFriendlyIdFromGuid(e,this.scene)??""}setChangeListenersConfig(e){this.changeListeners.config=e}onChange(e,r){return this.changeListeners.add(e,r)}onDelete(e){return this.deleteListeners.add(e),()=>this.deleteListeners?.delete(e)}triggerChange(){this.changeListeners.trigger()}triggerDeleteCallbacks(e){for(let r of this.deleteListeners)r(e)}getVariableNode(e){return this.getVariableNodeInternal(e,!0)??void 0}getLocalVariableNodes(e){return o.CWU.getLocalVariablesInfoForScene(this.scene).map(e=>this.getVariableNodeInternal(e.id,!1)).filter(r=>!!e?.includeSoftDeleted||!r.isSoftDeleted).filter(r=>e?.resolvedDataType===void 0||r.variableResolvedType===e.resolvedDataType)}createVariable(e,r,n){let a=(0,u.WI)(n),i=o.CUU.createVariable(this.scene,e,r,a),s=c.sD.fromString(i);if(!s)throw Error("Failed to create variable");return this.getVariableNodeInternal(s,!1)}getVariableCollectionNode(e){return this.getVariableCollectionNodeInternal(e,!0)??void 0}getLocalVariableCollectionNodes(e){return o.CWU.getLocalVariableSetsInfoForScene(this.scene).map(e=>this.getVariableCollectionNodeInternal(e.id,!1)).filter(r=>!!e?.includeSoftDeleted||!r.isSoftDeleted)}createVariableCollection(e){let r=o.CUU.createVariableCollection(this.scene,e),n=c.gr.fromString(r);if(!n)throw Error("Failed to create variable collection");return this.getVariableCollectionNodeInternal(n,!1)}getStyleNode(e){return this.getStyleNodeInternal(e,!0)??void 0}getStyleNodeByRef(e){return this.getStyleNodeInternal(o.Pt4.styleIdFromKeyAndVersion(this.scene,e.key,e.version),!0)??void 0}getLocalStyleNodes(e){let r=a.w.StyleType[e];if("number"!=typeof r)throw Error("Invalid style type");return o.glU.getAllLocalStyles(this.scene,r).map(e=>this.getStyleNodeByRef({key:e.styleKey,version:e.versionHash})).filter(e=>!!e)}createStyle(e){let r=a.w.StyleType[e];if("number"!=typeof r)throw Error("Invalid style type");let n=o.CUU.createStyle(r,this.nodeContext,this.scene);if(!n)throw Error("Failed to create style");return this.getStyleNodeInternal(o.Pt4.styleIdFromKeyAndVersion(this.scene,n.key,n.version),!1)}getDirectlySelectedNodes(){return this.getCurrentPage()?.directlySelectedNodes||[]}getInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;let n=(0,l.G)(e,0),a=(0,l.G)(e,e.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,n,a,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new _.W(e,this)}getVariableNodeInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;if(!o.mSn)throw new v;let n=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.VARIABLE)??f.AD,a=(0,l.G)(n,0),i=(0,l.G)(n,n.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,a,i,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new d.w(e,this)}getVariableCollectionNodeInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;if(!o.mSn)throw new v;let n=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.VARIABLE_SET)??f.AD,a=(0,l.G)(n,0),i=(0,l.G)(n,n.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,a,i,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new m.W(e,this)}getStyleNodeInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;if(!o.mSn)throw new v;let n=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.STYLE)??f.AD,a=(0,l.G)(n,0),i=(0,l.G)(n,n.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,a,i,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new p.v(e,this)}applyTextStylingActionToNodes(e,r){return o.CUU.applyTextStylingActionToNodes(e,this.nodeContext,r)}getSlideGrid(){let e=o.CUU.getSlideGrid(this.scene);return e?e.map(e=>e.map(e=>this.getInternal(e,!1))):[]}setSlideGrid(e){let r=e.map(e=>e.map(e=>e.guid));o.CUU.setSlideGrid(r,this.nodeContext,this.scene)}updateDerivedSymbolDataOnPrimaryInstances(e){o.Egt.updateDerivedSymbolDataOnPrimaryInstances(e,this.scene)}updateAll(){new o.vNG(this.scene).updateAll()}runWithPluginContext(e,...r){let n=this.nodeContext;this._nodeContext=o.Sie.PLUGIN;try{return e(...r)}finally{this._nodeContext=n}}combineAsVariants(e,r,n){let a=o.NfO.groupNodes(o.fHP.STATE_GROUP,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}group(e,r,n){let a=o.NfO.groupNodes(o.fHP.GROUP,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}union(e,r,n){let a=o.NfO.groupNodes(o.fHP.UNION,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}subtract(e,r,n){let a=o.NfO.groupNodes(o.fHP.SUBTRACT,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}intersect(e,r,n){let a=o.NfO.groupNodes(o.fHP.INTERSECT,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}exclude(e,r,n){let a=o.NfO.groupNodes(o.fHP.XOR,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}flatten(e,r,n){let a=o.NfO.flattenNodes(e.map(e=>e.guid),r?.sessionID??-1,r?.localID??-1,n??-1,this.scene);return this.getInternal(a,!1)}ungroup(e){return o.NfO.ungroupNode(e.guid,this.scene).map(e=>this.getInternal(e,!1))}constructor(e,r=h.G){E(this,"sceneType",void 0),E(this,"_nodeContext",void 0),E(this,"getSceneType",void 0),E(this,"getSceneTypeDebugString",void 0),E(this,"get",void 0),E(this,"getOrThrow",void 0),E(this,"getRoot",void 0),E(this,"getInternalCanvas",void 0),E(this,"setCurrentPage_DEPRECATED",void 0),E(this,"changeListeners",void 0),E(this,"deleteListeners",void 0),this.sceneType=r,this.getSceneType=()=>this.sceneType,this.getSceneTypeDebugString=()=>{if(this.sceneType===h.G)return"CURRENT_DOCUMENT";switch((0,i.KF)("symbol"!=typeof this.sceneType,"this.sceneType cannot be Symbol"),this.sceneType){case o.juq.DETACHED_COMPONENTS:return"DETACHED_COMPONENTS";case o.juq.LIVE_FILE:return"LIVE_FILE";case o.juq.HISTORY:return"HISTORY";case o.juq.PLAYGROUND:return"PLAYGROUND";case o.juq.FIRST_DRAFT:return"FIRST_DRAFT";case o.juq.LINTER:return"LINTER";case o.juq.AUTO_SUGGEST:return"AUTO_SUGGEST";default:(0,i.xb)(this.sceneType)}},this.get=e=>this.getInternal(e,!0),this.getOrThrow=e=>this.getInternal(e,!1),this.getRoot=()=>this.getInternal("0:0",!1),this.getInternalCanvas=()=>{if(this.sceneType!==h.G)throw Error("TSSceneGraph.getInternalCanvas - Not implemented except for current document");let e=o.CUU.getInternalCanvas();return e?this.getInternal(e,!1):null},this.setCurrentPage_DEPRECATED=e=>{let r=o.CUU.setCurrentPageAsync(e,this.nodeContext);if(r)throw Error(r)},this.changeListeners=new g.P(g.Q),this.deleteListeners=new Set,this._nodeContext=e}}},137545:(e,r,n)=>{n.d(r,{a:()=>o});var a=n(694676);let i=class{fontResourceStatusChanged(e,r,n){(0,a.dF)(e,r,n)}};function o(){new i}},269685:(e,r,n)=>{function a(e){if(0===e.s)return{r:e.l,g:e.l,b:e.l,a:e.a};let r=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,n=2*e.l-r,a=[0,0,0];for(let i=0;i<3;i++){let o=e.h+-(1/3*(i-1));o<0&&o++,o>1&&o--,6*o<1?a[i]=n+(r-n)*6*o:2*o<1?a[i]=r:3*o<2?a[i]=n+(r-n)*(2/3-o)*6:a[i]=n}return{r:a[0],g:a[1],b:a[2],a:e.a}}function i(e){let r=e.r,n=e.g,a=e.b,i=Math.min(Math.min(r,n),a),o=Math.max(Math.max(r,n),a),s=o-i,l=0;o===i?l=0:r===o?l=(n-a)/s:n===o?l=2+(a-r)/s:a===o&&(l=4+(r-n)/s),(l=Math.min(60*l,360))<0&&(l+=360);let c=(i+o)/2;return{h:l/=360,s:o===i?0:c<=.5?s/(o+i):s/(2-o-i),l:c,a:e.a}}function o(e){let r=(e.h-Math.floor(e.h))*6,n=e.v*e.s,a=n*(1-Math.abs(r%2-1)),i=e.s<=0?0:r<1?n:r<2?a:r<3?0:r<4?0:r<5?a:n,o=e.s<=0?0:r<1?a:r<2?n:r<3?n:r<4?a:0,s=e.s<=0?0:r<1?0:r<2?0:r<3?a:r<4?n:r<5?n:a,l=e.v-n;return{r:i+l,g:o+l,b:s+l,a:e.a}}function s(e){let r=Math.max(Math.max(e.r,e.g),e.b),n=r-Math.min(Math.min(e.r,e.g),e.b);return{h:(0===n?0:r===e.r?((e.g-e.b)/n+6)%6:r===e.g?(e.b-e.r)/n+2:(e.r-e.g)/n+4)/6,s:0===r?0:n/r,v:r,a:e.a}}function l(e){return"l"in e?a(e):o(e)}function c(e){return"l"in e?{...e,s:1,l:.5,a:1}:{...e,s:1,v:1,a:1}}function d(e,r){let n=i(e),o=360*n.h;return a({...n,h:(o+r)%360/360})}function u(e){return 255&(e>0?255*e+.5:0)}function m(e,r,n){return u(e)|u(r)<<8|u(n)<<16|-0x1000000}function p(e){return u(e.red)|u(e.green)<<8|u(e.blue)<<16|u(e.alpha)<<24}function h(e){return{red:(255&e)/255,green:(e>>8&255)/255,blue:(e>>16&255)/255,alpha:(e>>24&255)/255}}function _(e,r){let n=e.alpha,a=r.alpha,i=n*(1-a),o=i+a,s=i/o,l=a/o;return{red:e.red*s+r.red*l,green:e.green*s+r.green*l,blue:e.blue*s+r.blue*l,alpha:o}}function g(e){return{red:e.r,green:e.g,blue:e.b,alpha:e.a}}function f(e){return{r:e.red,g:e.green,b:e.blue,a:e.alpha}}function E(e,r){let n=[];for(let a=0;a<3;a++)n.push(e[a][0]*r[0]+e[a][1]*r[1]+e[a][2]*r[2]);return n}function y(e){return b({l:e.l,ax:e.c*Math.cos(360*e.h*Math.PI/180),bx:e.c*Math.sin(360*e.h*Math.PI/180),a:e.a})}function b(e){let r=E([[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],[e.l,e.ax,e.bx]),n=E([[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],r.map(e=>e**3)),a=E([[12831/3959,-329/214,-1974/3959],[-851781/878810,1648619/878810,36519/878810],[705/12673,-2585/12673,705/667]],n).map(function(e){let r=Math.abs(e);return r>.0031308?(e<0?-1:1)*(1.055*Math.pow(r,1/2.4)-.055):12.92*e});return{r:a[0],g:a[1],b:a[2],a:e.a}}n.d(r,{Ad:()=>d,I0:()=>y,Ih:()=>c,In:()=>a,QR:()=>m,R0:()=>h,aH:()=>f,au:()=>_,bi:()=>p,kE:()=>o,oB:()=>i,oU:()=>g,oq:()=>b,qN:()=>s,w_:()=>l})},439594:(e,r,n)=>{var a,i,o,s;n.d(r,{RR:()=>a,uN:()=>i}),function(e){e.VISIBLE="visible",e.TEXT="text-data",e.OVERRIDDEN_SYMBOL_ID="overridden-symbol-id"}(a||(a={})),function(e){e.TYPED="typed",e.VARIANT="variant"}(i||(i={})),function(e){e.DEFAULT="default",e.SLIDER="slider"}(o||(o={})),function(e){e.GPT="GPT",e.FS="FRAGMENT_SEARCH"}(s||(s={}))},176961:(e,r,n)=>{function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{$C:()=>N,A1:()=>m,A2:()=>G,Ag:()=>O,Bj:()=>K,Bz:()=>z,CJ:()=>ec,EU:()=>g,Fe:()=>k,Gh:()=>Y,Iz:()=>et,LY:()=>y,Lz:()=>D,RN:()=>i,RU:()=>$,Rx:()=>F,TC:()=>P,Ud:()=>V,V3:()=>j,Vm:()=>C,WF:()=>W,Z3:()=>M,ZD:()=>I,Zs:()=>H,_L:()=>E,aO:()=>B,b_:()=>ee,be:()=>er,c2:()=>A,d1:()=>en,dJ:()=>J,d_:()=>es,di:()=>s,eZ:()=>_,jw:()=>c,k0:()=>h,l5:()=>S,lM:()=>R,mk:()=>x,nn:()=>X,o$:()=>o,p6:()=>b,pG:()=>ei,qP:()=>eo,qV:()=>ea,rf:()=>v,rm:()=>l,ry:()=>L,sG:()=>el,tO:()=>d,tg:()=>u,tz:()=>T,uH:()=>Q,vv:()=>Z,w4:()=>w,wm:()=>U,xJ:()=>p,yR:()=>q,yy:()=>f});class i{onMissingEditScope(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onGuardrailViolation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class o{reportEditAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class s{readyToAcceptAutosaveChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasOngoingCommitTask(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}enqueueAutosaveCommit(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}createAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isConnected(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class l{isEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class c{jsEchoUintValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}jsEchoUint64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Struct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{uvalue:"0",ivalue:"0"}}jsEchoStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoIntArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoBoolArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoJsonValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.")}jsEchoDeeplyNestedJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoIntMapValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}jsEchoIntSetValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Set}jsEchoOptionalStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsEchoOptionalStringStruct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{valueOpt2:null}}jsEchoFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoNonFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{jsonValue:"",intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoCallbackValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return()=>{}}getObservableCounter(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getObservableArray(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsValueTestsDone(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class d{rerunSearch(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTextMatches(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}rebuildIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setResultInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusAndNavigate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReplace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}detectTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}applyTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getAnnotationTextContent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class u{handleMouseDown(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseMove(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseUp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createNewCommentAtPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class m{openTemplatePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class p{trackComponentInstanceDetachment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentInstanceInsertion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackStyleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackVariableAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class h{convertEmojiNameToString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingEmojiTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setEmojiTypeaheadImageSet(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setEmojiTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class _{startChat(...e){if(this.shouldThrow)throw Error("Method not implemented.")}closeWheel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutPress(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutRelease(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class g{requestEditorType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDeviceInfoForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}presetDeviceSupportsTouch(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}sizeMatchesFramePreset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getFramePresetForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCurrentFileName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}isUserPresent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}backToFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentIsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fullscreenIsReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isFontListLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}afterFontsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFileVersion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSketchFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewWhiteboardFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSitesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSlidesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFontSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}attemptedSketchFileDrop(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportSettingsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPdfExportSettingsModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleBrowseAllResourcesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPreferencesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNudgeAmountPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFplDebug(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hidePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createFeedPost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findInspiration(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openQuickActionsAssetsTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}inspectFragment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleSignedOutEditAttempt(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hasUnsavedChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}shouldSuppressUnsavedChangesUI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}toggleInteractionRecorderVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showCanvasContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectLayerContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTextEditModeContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRulerGuideContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectionContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showLeftPanelTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTeamLibraryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleComponentInsertModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleVariablesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPublishDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTemplatePublishModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forcePublishStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppPush(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAutosaveVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToInstanceVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToVariantVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteWidgetsAsSublayersVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMagicLinkSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showUpscaleImageSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPushOverridesVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBellInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showMobileNativeToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMobileNativeToastLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellForMultiEdit(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUndo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithNodesLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalizedInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUrlButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissEphemeralVisualBells(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithDelayLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithCloseButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearVisualBellType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissMobileMediaLoadingToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getNaturalStyleKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalizedString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}closeManageMemoryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteLoadingIndicatorAndPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPromptToMoveLibraryItems(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateViewportInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}canUseClipboardAPI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}readFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clipboardHasUnsanitizedPng(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}decodePackedHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}decodeMetadataFromHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}detectSpreadsheetDataInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}writeDataToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}sendSerializedClipboardDataToS3(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSerializedClipboardDataFromS3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getKeyboardLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}setKeyboardLayoutPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveUseNumbersForOpacityPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSavepoint(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}showSavepointModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showBrowserAlert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleHistoryMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showViewChangesNotification(...e){if(this.shouldThrow)throw Error("Method not implemented.")}togglePerfHUDVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleFakeMPActivity(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTSMERConfig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showImageScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showGIFConvertedAndScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}checkForImageBackgroundRemoval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usedKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}insertComponentOrShowError__DEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fetchComponentBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}fetchComponentBufferForSevRepair(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getLatestPublishedVersionHashForComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLatestPublishedVersionForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableSetBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}startLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}finishLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackInteractiveSlideElementInsertedForSprig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCopyExportRestricted(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInWorkshopMode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}requestOpenExternalSourceFileLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}validateAndParseURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}navigateToURL(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHyperlinkPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateHyperlinkPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleUserClickOnHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCanvasMentionPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCanvasMentionPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openHelp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSupportForum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTutorials(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShowWithHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.")}runLastPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMovePagesJob(...e){if(this.shouldThrow)throw Error("Method not implemented.")}retrieveMetadataAndSelectBrokenFixedScrollingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppQueueFileForWriting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppWriteFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppExportFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCutEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCopyEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobilePasteEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppShowContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDefaultOnOTFeatures(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}copyLinkToPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateLinkToNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateLinkToRemoteNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalGUIDFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalVersionIdFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}syncPencilStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncHighlighterStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncToolStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncCurrentToolSetSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVideoShouldAutoplay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendActiveStackRegionAnalytics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getIsEmojiWheelOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}openStartingPointFlowInPrototypeViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}focusPrototypeStartingPointPanelToEditName(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSentryTag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTimerModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}activateVotingStampTool(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setActiveAgendaItemId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}escapeAndSaveCSVData(...e){if(this.shouldThrow)throw Error("Method not implemented.")}parseCsvStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndTriggerSmartPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHTMLStringIntoLineDirectionalities(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isNavigatorClipboardWriteSupported(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}onNodePositionChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onSectionPresetPickerCreated(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateEmbed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateWidgetFromURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}handleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startExportAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendEventToResponsiveContentHandler(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onAgendaChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onFigjamStarterKitAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canUploadAndEditVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getVariableSetNumberOfModesAllowed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultStateKeyForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}selectPublishedAssetGuids(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}handleZoomActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handlePanActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleNodeCountReachedForMoveDraft(...e){if(this.shouldThrow)throw Error("Method not implemented.")}selectLocalStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}formatDateTime(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setFigjamStarterKitBoundingBox(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadedCompareChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}upsellLibrariesHandleConsecutivePaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onPlaygroundNodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerHaptics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logEnterMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}evaluateMathExpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}changeDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardToolToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardDiagrammingShapeToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTilesRendered(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateTable(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onEditTableText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragStart(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateSticky(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDifferentSectionClicked(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onConnectDiagramShapeWithConnector(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTileRendererChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterComputeViewportSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getNextQueryRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}afterQueryCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}rejectAllSceneGraphQueries(...e){if(this.shouldThrow)throw Error("Method not implemented.")}movedSingleNodeVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSlideAfterFocusedSlide(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"-1:-1"}generateFlappFromPastedText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiActionMetered(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabledFigJam(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInAiExperimentOrGrantlist(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}removeImageBackground(...e){if(this.shouldThrow)throw Error("Method not implemented.")}upscaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayersDevHandoff(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openMakePrototypeModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isMagicLinkDone(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isMagicLinkDoneToastShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}linkToComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getLabValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasAiRenameLayersPermission(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}logFullscreenActionToDatadogRum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}designToCodeFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}generateCodeLayerPreview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clearCodeLayerPreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDirectExportCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class f{fontResourceStatusChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class E{connect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}disconnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}send(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class y{getDefaultDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCanvasColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getUserColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class b{getIsExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setNodesReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setNodesCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forwardExportsToExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showStatusContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isStatusContextMenuShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showDevModeFeaturesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAnnotationsButtonContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isDevModeOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}exitDevModeFocusOrOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldAvoidScaling(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class v{nodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class T{createMouseBehavior(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tableUiReorderHandleHoveredLength(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}tableUiAddButtonHoveredRadius(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class I{updateViolationsForNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class S{setMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingMentionsTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setMentionsTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}endSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}showVisualBellForPastedMentions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class w{getPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}resetPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}convertPdfToScene(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class A{selectionChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}boxSelectionEnded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}currentPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}timerChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}slidesViewChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}codegenPreferencesChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stackInvariantsEnforced(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginPageLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginAccessibleNodeIds(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}pluginAccessiblePages(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class C{getAPIName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestionsForWord(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}spellCheckText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}runTextReviewPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldEnableWhenFirstActivated(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class N{isQuickActionsShown(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class L{isMinimizedInUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class O{pasteVariablesWithLocalizationPopupDEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}pasteVariablesWithLocalizationPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class R{reconnectingStarted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectingSucceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorHidden(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromObserver(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromConnectionCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyEditorConvertedToViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSaveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateMultiplayerState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}restartPresentation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}cancelPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setBackgroundFlushInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMonitorInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMultiplayerSignal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRestoreComponentDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showComponentRemovedDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isWindowActive(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}buildMultiplayerUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}requestedChunkedFileLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}socketBufferedAmount(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}prettyPrintMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectSequenceNumberChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class P{showEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionImages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearSelectionPaintsDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintFromDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}pickerHasSelectionPaintOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}originalPaintForCurrentSelectionPaintsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}colorPickerSelectedVariable(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}clearSelectionTextAndEffectStylesDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionTextAndEffectStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isPrototypingModalOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}validateCopyBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class D{handleConnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMouseCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMousePosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setIsHoveringWidgetWithHiddenCursors(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHighFiveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setChatMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusOnTextCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVoiceMetadata(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleReactionFromServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendReaction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}playSoundEffectOnce(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class k{clearTemplatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class M{getEyedropperContext(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}updateEditPaletteModalColor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCustomPaletteApplied(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showSectionPresets(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class F{trackFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackDefinedEventFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetDefinedAnalyticsForDocument(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveFlushes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveImageChangeSkips(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestore(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportBranchingLoadTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportMultiplayerRoundTripTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportPerfEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportQuantizedColorEqualsUse(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestored(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportDirtyAfterLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryReportError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}pauseOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryStopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}trySetAttributeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryGetAttributesOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}addToDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDistributionAnalyticsProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}resetDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderLayerCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportNonIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderedTileBytesUsed(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromCpp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromTs(...e){if(this.shouldThrow)throw Error("Method not implemented.")}recordRenderingEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveRenderingTrace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logNumericMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logStringMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleAllocationFailureWithNative(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}slogFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class x{dispatchAction(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getCustomKeyboardShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}getDisplayStringFromKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getKeyboardShortcutFromText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getTextFromKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class U{readSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}writeSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class B{isUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3Colors(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3ColorsInitialValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class V{getDefaultPencilStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultHighlighterStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class G{decodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}encodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}scaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}cancelCurrentImageWorkers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}init(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class H{createVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}deleteVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidth(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCoverImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}loadVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}copyVideoPermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyVideoPermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadAllVideos(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class W{autoSegmentNodesByRegion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldRunSimpleStackDetection(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runMakeResponsiveHeuristics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackShouldShowMSALOnboarding(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAllAutoLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}makeResponsive2(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class K{getUserId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}hasUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class Y{markMissingFontScannerAsComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ${submitDeveloperRelatedLinks(...e){if(this.shouldThrow)throw Error("Method not implemented.")}didGetNodeStatusChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isVariableAvailableInLibraryAsset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class j{copyImagePermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyImagePermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDownloadPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forceDownloadImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}getImageHostDomain(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setMinimumImagePriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forgetImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}downloadEmoji(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}markImageUploading(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markImageUploaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startUploadingImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pendingUploadStats(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[new Set,new Set]}logDebugInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pauseImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}staticAssetWithPath(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class z{rgbaToThumbhash(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}thumbhashToRgba(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{rgba:new Uint8Array,width:0,height:0}}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class q{readRichTextFromHtml(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}createHtmlFromTextNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}createHtmlFromTextData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class Z{getParsedCodeTokens(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getBackgroundColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLineNumberColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCursorColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class X{onInsertFromExisting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onImpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}mountWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mountWidgetLowPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackSelectionStateInteraction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}queueRender(...e){if(this.shouldThrow)throw Error("Method not implemented.")}renderFirstPartyWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isRenderingWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runPropertyMenuCallback(...e){if(this.shouldThrow)throw Error("Method not implemented.")}terminateRunningWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidgetIconBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}onTextEditEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNonInteractableWidgetTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logMultipleInputEditorsInWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canInteractWithWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}canViewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class J{prefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}debounceNodeResizeUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debounceNodeMovementUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceDomChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWCAG2Contrast(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class Q{onFrameDistributionTrackedEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ee{isCustomPaletteColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class et{clearSlideThemeStylePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncSlideThemeAtom(...e){if(this.shouldThrow)throw Error("Method not implemented.")}computeThemeSwapColorVariableMapping(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class er{isInOrg(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class en{getSummaryAsClipboardText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ea{calculateColorWithRampValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}calculateColorWithRelativeAdjustment(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getRampValueForColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ei{isZombieStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class eo{storeVariableData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class es{syncChangedSubscribedConsumptions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class el{syncAddedOrChangedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncRemovedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ec{windowSetupComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}windowHandleBeforeTick(...e){if(this.shouldThrow)throw Error("Method not implemented.")}initPrefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyWindow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTitle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}title(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}alert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTextCaretBounds(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usingMultiTouchPointerEvents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setExpectingTextInput(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingCopyCutEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingPasteEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}execCommandCopy(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}writeClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}clearClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryToReadFromClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadSubstringFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToDetectSpreadsheetDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}tryToDetectLineDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}focusView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWithFocus(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}},717180:(e,r,n)=>{n.d(r,{DS:()=>d,F0:()=>m,GI:()=>_,Ji:()=>f,MT:()=>h,Ql:()=>g,Si:()=>l,UP:()=>y,hD:()=>c,hV:()=>o,kh:()=>E,oY:()=>p,rV:()=>u});var a=n(185020),i=n(245954);function o(e,r){let n=r(e);if("stop"===n||"skip"===n)return n;for(let n of e.childrenNodes)if("stop"===o(n,r))return"stop"}function s(e,r){return e.get(r)?.parentNode||null}function l(e,r,n){let a=s(e,r);for(;a;){if("CANVAS"===a.type||"DOCUMENT"===a.type)return;if("stop"===n(a))break;a=a.parentNode}}function c(e,r,n){let a=e.get(r);a&&"stop"!==n(a)&&l(e,r,n)}function d(e,r){let n=[];return l(e,r,e=>{n.push(e)}),n}function u(e,r,n){if(r===n)return!0;let a=s(e,n);for(;a;){if(a.guid===r)return!0;a=a.parentNode}return!1}function m(e,r){let n=0,a=e.get(r)||null;for(;a&&"CANVAS"!==a.type&&"DOCUMENT"!==a.type;)n++,a=s(e,a.guid);return n}function p(e){return"VECTOR"===e||"STAR"===e||"LINE"===e||"ELLIPSE"===e||"RECTANGLE"===e||"REGULAR_POLYGON"===e||"ROUNDED_RECTANGLE"===e}function h(e){return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}function _(e){return"STAMP"===e.type||"ROUNDED_RECTANGLE"===e.type&&e.name?.includes("FigJam Stamp Icon")}function g(e,r){let n=null;return l(e,r,e=>{if(!n){if("NONE"!==e.scrollDirection)return n=e,"stop";{let r=e.parentNode;if(r&&r&&"CANVAS"===r.type&&r.visible&&(0,a.F)(e.type)&&e.visible)return n=e,"stop"}}}),n}function f(e){let r=null,n=e.parentNode;for(;n;){if(n.isStackOrFixedSizeContainer){r=n;break}n=n.parentNode}return r}function E(e,r){let n=null;return c(e,r,e=>{let r=e.parentNode;r&&r&&("CANVAS"===r.type||"SECTION"===r.type)&&r.visible&&(0,a.F)(e.type)&&e.visible&&"SECTION"!==e.type&&(n=e)}),n}function y(){let e=(0,i.UN)(),r=[];return o(e.getRoot(),e=>{r.push(e.guid)}),r}},414796:(e,r,n)=>{n.d(r,{$P:()=>l,M7:()=>c,Ms:()=>o,UC:()=>s,eX:()=>u,nM:()=>d,s4:()=>a});var a,i=n(879058);!function(e){e.NONE="NONE",e.FILL="FILL",e.STROKE="STROKE",e.TEXT="TEXT",e.EFFECT="EFFECT",e.GRID="GRID"}(a||(a={}));let o={inheritEffectStyleKey:"inheritEffectStyleName",inheritExportStyleKey:"inheritExportStyleName",inheritFillStyleKey:"inheritFillStyleName",inheritFillStyleKeyForStroke:"inheritFillStyleNameForStroke",inheritGridStyleKey:"inheritGridStyleName",inheritTextStyleKey:"inheritTextStyleName"},s={inheritEffectStyleKey:"softDeletedEffectStyleId",inheritExportStyleKey:"softDeletedExportStyleId",inheritFillStyleKey:"softDeletedFillStyleId",inheritFillStyleKeyForStroke:"softDeletedFillStyleForStrokeId",inheritGridStyleKey:"softDeletedGridStyleId",inheritTextStyleKey:"softDeletedTextStyleId"};function l(e){return!!e?.key}function c(e){return e.startsWith("S:")}function d(e){return e&&l(e)?`S:${e.key},${e.version||""}`:""}function u(e){if(!e||!c(e))return null;let r=e.substring(2).split(",");if(!r||2!==r.length)return null;let n=(0,i.n3)(r[0]),a=(0,i.IA)(r[1]);return n===i.n3.INVALID?null:{key:n,version:a}}},986162:(e,r,n)=>{n.d(r,{N4:()=>l,eS:()=>c,iL:()=>s,jS:()=>d});var a=n(957137),i=n(805014);let o={};function s(){return o}function l({isProduction:e,executeEmscriptenJS:r}){let n,i;let s=(0,a.n)();(o={}).instantiateWasm=function(e,r){return n=e,i=r,{}},s.Module=o;let l=!1;e||Object.defineProperty(o,"wasmOffsetData",{get:()=>(l=!0,{offset_map:{},func_starts:[],name_map:{},import_functions:0}),set:()=>{}});try{r(),l&&(o.emscripten_realloc_buffer??o.growMemory)(0x60000000)}finally{delete s.Module}if(void 0===n)throw Error('Expected WebAssembly code to set "imports"');if(void 0===i)throw Error('Expected WebAssembly code to set "receiveInstance"');return{imports:n,receiveInstance:i,getReservedHeapSize:()=>o.HEAPU8.buffer.byteLength}}function c(){let e=(0,a.n)(),r=e.executeFullscreenEmscriptenCode;return delete e.executeFullscreenEmscriptenCode,r}function d({callMain:e,tsApisForCpp:r,registerRefreshCallback:n,leakBindings:s}){let l=(0,a.n)();try{l.tsapi_init=(e,r)=>{(0,i.LQj)(e),n?.(r)},l.tsApisForCpp=r,o.jsHelpers=r.jsHelpers,e()}finally{s||(delete l.tsapi_init,delete l.tsApisForCpp)}}},823592:(e,r,n)=>{n.d(r,{Dd:()=>x,H:()=>g,KU:()=>F,L6:()=>k,TM:()=>O,XM:()=>P,a$:()=>d,bv:()=>c,c1:()=>u,fZ:()=>l,jR:()=>s,po:()=>U,pp:()=>N,r6:()=>C,tl:()=>S});var a=n(104180),i=n(229744);a.z.object({prompt_data:a.z.string(),negative_prompt_data:a.z.string().default("blurry, bad"),cfg_scale:a.z.number().default(10),seed:a.z.number().default(20),steps:a.z.number().default(50),style_preset:a.z.string().default("photographic"),height:a.z.number().default(512),width:a.z.number().default(512),additionalPrefix:a.z.string().optional().default("")}),a.z.object({image:a.z.string(),metadata:a.z.object({height:a.z.number(),width:a.z.number()})}),a.z.object({componentQueries:a.z.array(a.z.string())});let o=a.z.union([a.z.object({role:a.z.union([a.z.literal("assistant"),a.z.literal("system")]),content:a.z.string()}),a.z.object({role:a.z.literal("user"),content:a.z.union([a.z.string(),a.z.array(a.z.union([a.z.object({type:a.z.literal("text"),text:a.z.string()}),a.z.object({type:a.z.literal("image"),image:a.z.string()})]))])})]),s=a.z.object({userPrompt:a.z.string(),kitKey:a.z.string().nullable().optional(),isLocal:a.z.boolean().nullable().optional(),isDirectGenerationCompatible:a.z.boolean().nullable().optional(),extraMessagesFigmateOnly:a.z.array(o).optional(),componentQueries:a.z.array(a.z.string()).optional()});a.z.string();let l=a.z.object({userPrompt:a.z.string(),sections:a.z.array(a.z.string()),kitKey:a.z.string().nullable().optional(),isLocal:a.z.boolean().nullable().optional()});a.z.string(),a.z.object({recommendedKitKey:a.z.string()});let c=a.z.object({presets:a.z.array(a.z.string()).optional(),theme:a.z.record(a.z.any()).optional(),jsx:a.z.string().optional(),dsKit:a.z.object({kitKey:a.z.string(),isLocal:a.z.boolean(),isDirectGenLibrary:a.z.boolean()}).optional(),trace:i.B.optional()}),d=c.extend({sections:a.z.array(a.z.string()).optional(),layoutJsx:a.z.string().optional(),v3Components:a.z.record(a.z.string()).optional()}),u=a.z.object({componentNames:a.z.array(a.z.string()),userPrompt:a.z.string(),kitKey:a.z.string().nullable().optional(),isLocal:a.z.boolean().nullable().optional()});a.z.object({userPrompt:a.z.string()}),a.z.object({content:a.z.string()});let m=a.z.object({version:a.z.literal(2),darkMode:a.z.boolean(),fontFamilies:a.z.object({title:a.z.array(a.z.string()),body:a.z.array(a.z.string()),label:a.z.array(a.z.string())}),brandColor:a.z.string(),colors:a.z.object({text:a.z.string().array(),background:a.z.string().array(),border:a.z.string().array()}),borderRadii:a.z.array(a.z.number()),spacing:a.z.array(a.z.number())});m.omit({version:!0}).keyof();let p=a.z.object({fontFamilies:a.z.array(a.z.string()),colors:a.z.array(a.z.string()),borderRadii:a.z.array(a.z.number()),spacing:a.z.array(a.z.number())}),h=a.z.union([m,p]),_=a.z.object({prompt:a.z.string()}),g=a.z.object({userPrompt:a.z.string(),promptHistory:a.z.array(_).optional(),storedInitialPrompt:a.z.string(),jsx:a.z.string(),jsxInsertReplace:a.z.string().optional(),currentTheme:h,kitKey:a.z.string(),isLocal:a.z.boolean()}),f=a.z.object({type:a.z.literal("text_or_image"),affectedId:a.z.string(),content:a.z.string()}),E=a.z.enum(["font","layout","component","other"]),y=a.z.object({type:a.z.literal("theme"),content:m.partial()}),b=a.z.object({type:a.z.literal("iCantDoThis"),rationaleCategory:E.optional()}),v=[a.z.object({type:a.z.literal("remove"),affectedId:a.z.string()}),a.z.object({type:a.z.literal("move"),affectedId:a.z.string(),insertBehavior:a.z.enum(["above","below"]),destinationId:a.z.string()}),a.z.object({type:a.z.literal("replaceClasses"),affectedId:a.z.string(),classes:a.z.string().array()})],T=[a.z.object({type:a.z.literal("insert"),affectedId:a.z.string(),insertBehavior:a.z.enum(["above","below"]),jsxToInsert:a.z.string()}),a.z.object({type:a.z.literal("replace"),affectedId:a.z.string(),jsxToInsert:a.z.string()})],I=a.z.discriminatedUnion("type",[f,...v,...T,y,b]),S=a.z.object({action:I.optional(),cortex_error:a.z.object({type:a.z.string(),data:a.z.any()}).optional(),trace:i.B.optional()}),w=a.z.object({key:a.z.string(),name:a.z.string(),is_local:a.z.boolean(),description:a.z.string()});a.z.object({meta:a.z.object({kits:a.z.array(w)}),error:a.z.boolean().optional(),message:a.z.string().optional()});let A=a.z.enum(["normal","transparent","segment"]),C=a.z.object({imageB64:a.z.string()}),N=a.z.object({conflictScore:a.z.number(),reasoning:a.z.string()}),L=a.z.object({imageB64:a.z.string(),jsx:a.z.string()}),O=a.z.object({requests:a.z.array(L)}),R=a.z.object({isMobileDesign:a.z.boolean(),components:a.z.array(a.z.object({guid:a.z.string(),name:a.z.string()}))}),P=a.z.object({responses:a.z.array(R.nullable())}),D=a.z.object({imageB64:a.z.string(),jsx:a.z.string(),isStateGroup:a.z.boolean()}),k=a.z.object({requests:a.z.array(D)}),M=a.z.object({componentName:a.z.string(),componentDescription:a.z.string(),nodeIdsToPropertyNames:a.z.array(a.z.object({id:a.z.string(),propertyName:a.z.string()}))}),F=a.z.object({responses:a.z.array(M.nullable())}),x=a.z.object({id:a.z.string().optional(),initialUserPrompt:a.z.string().optional(),jsxJSON:a.z.string().optional(),prompt:a.z.string().optional(),desc:a.z.string().optional(),transparent:a.z.boolean().optional(),background:A.optional(),height:a.z.number(),width:a.z.number(),description:a.z.string().optional()}),U=a.z.object({image:a.z.string(),foregroundImage:a.z.string().optional(),description:a.z.string(),trace:i.B.optional()})},603722:(e,r,n)=>{n.d(r,{aC:()=>u,e3:()=>d});var a,i,o=n(104180);!function(e){e.NEUTRAL="neutral",e.CASUAL="casual",e.PROFESSIONAL="professional",e.CONCISE="concise",e.EXPANDED="expanded"}(a||(a={})),function(e){e.DESIGN="design",e.SLIDES="slides"}(i||(i={}));let s=o.z.object({id:o.z.string(),text:o.z.string()}).array(),l=o.z.object({tone:o.z.nativeEnum(a),weight:o.z.number()}).array(),c=o.z.enum(["design","slides"]),d=o.z.union([o.z.object({text:o.z.string(),tones:l,productType:c.optional()}),o.z.object({texts:s,tones:l,productType:c.optional()})]),u=o.z.object({id:o.z.string().optional(),delta:o.z.string()})},465251:(e,r,n)=>{n.r(r),n.d(r,{CLIPTextImageEmbeddingsAPIError:()=>o.dW,CLIPTextImageEmbeddingsInvalidSchemaError:()=>o.jr,ClientContentLengthLimitExceededError:()=>o.j0,ClientNoTextSelectedError:()=>o.b6,ContentFillIncorrectNumberOfResultsError:()=>o.Es,ContentFillParsingError:()=>o.Dr,CortexClientError:()=>o.jG,CortexErrorV2:()=>a.G,CortexProviderAPIError:()=>o.HW,CortexProviderSDKError:()=>o.HA,CortexRateLimitExceededError:()=>o.qD,CortexServerError:()=>o.XA,CortexSetupError:()=>o.BA,FigjamClusterToolNotCalledError:()=>o.dJ,FigjamTemplateParsingError:()=>o.dr,FigjamVisualParsingError:()=>o.b3,GeneratePromptNoKitKeyOrIsLocalError:()=>o.gU,GeneratePromptNoTemplateError:()=>o.Bq,ImageCreationError:()=>o.Bv,ImageRequestError:()=>o.Nv,InvalidCoreFunctionArgumentError:()=>o.oW,InvalidDataContentError:()=>o.tm,InvalidImageSizeError:()=>o.AY,InvalidPromptArgumentError:()=>o.x0,InvalidProviderError:()=>o.d8,MeterExceededError:()=>o.NZ,NotImplementedError:()=>o.EH,OfflineError:()=>o.M_,OutOfDateFeatureVersionError:()=>o.CV,PayloadTooLargeError:()=>o.O3,ProviderContentLengthLimitExceededError:()=>o.FA,ProviderEmptyResponseError:()=>o.cD,ProviderInvalidResponseDataError:()=>o.ES,ProviderInvalidToolArgumentsError:()=>o.ns,ProviderNoContentGeneratedError:()=>o.de,ProviderNoObjectGeneratedError:()=>o.$F,ProviderNoSuchToolError:()=>o.UR,ProviderParseResponseError:()=>o.o6,ProviderRateLimitExceededError:()=>o.Mm,ProviderResponseClientError:()=>o.U,ProviderResponseServerError:()=>o.Ay,ProviderServiceBusyError:()=>o.u8,ProviderServiceIssueError:()=>o.c5,ProviderSetupError:()=>o.br,ProviderTimedOutError:()=>o.Tn,ProviderUnsafeOrHarmfulContentError:()=>o.v9,StreamingJSONParseError:()=>o.mP,TooManyEmbeddingValuesForCallError:()=>o.Ch,UnauthorizedError:()=>o.D_,UnsafeOrHarmfulPromptError:()=>o.bt,UnsupportedFunctionalityError:()=>o.b8,deserializeCortexErrorV2:()=>i.j,isSerializedCortexErrorV2:()=>i.G});var a=n(664886),i=n(804292),o=n(724177)},104352:(e,r,n)=>{n.d(r,{G1:()=>a});class a extends Error{type;data;trace;metadata;sentryTags;constructor(e,r,n,a,i){super(n??function(e){let r=e.message;return"string"==typeof r?r:void 0}(r)??`CortexError of type ${e}`),null!=a&&(this.stack=a),void 0!==i&&(this.trace=i),this.type=e,this.data=r}}},512671:(e,r,n)=>{n.r(r),n.d(r,{BOOLEAN_TYPE_REPR:()=>a.oo,COMPONENT_PREFIX:()=>i.FE,CUSTOM_IMAGE_TYPE_STR:()=>a.Vk,IMAGE_NAME_FORMAT:()=>i.Ii,IMAGE_TYPE_REPR:()=>a.dX,STRING_TYPE_REPR:()=>a.NU,cleanComponentPropNameForUsage:()=>i.j3,extractModifiersFromProp:()=>i.rB,filterComponentProps:()=>l.A,getComponentInfoById:()=>a.Ye,getComponentInfoByIdUncached:()=>a.Z1,getComponentJSXName:()=>i.WG,getInstanceIdsForDef:()=>i.wn,getInstanceNodeProps:()=>c.Y,getNestedImageNodes:()=>i._j,getNodeParentPath:()=>o.yu,getTypeInfoCached:()=>a.NY,groupByCommonPrefixSorted:()=>i.hM,isPartOfGroup:()=>o.Se,moveNumbersToEnd:()=>s.wP,resetTypeInfoCache:()=>a.UY,toCamelCase:()=>s.Cb,toTitleCase:()=>s.Sn,usagePropsToRawProps:()=>c.R});var a=n(166296),i=n(603843),o=n(479611),s=n(667226),l=n(525226),c=n(807064)},484303:(e,r,n)=>{n(235310),n(942904),n(429342)},429342:(e,r,n)=>{async function a(){return await n.e(1699).then(n.bind(n,851699))}n.d(r,{_o:()=>a}),n(853251),n(942904)},198018:(e,r,n)=>{n(986116);var a=n(942904);n(484303),a.Q_,a.cq,a.Eo,a.SR,a.ut},770474:(e,r,n)=>{n.d(r,{_o:()=>i._o,f6:()=>a.f6}),n(198018);var a=n(942904);n(853251),n(986116),n(484303);var i=n(429342)},563988:(e,r,n)=>{n.d(r,{Ed:()=>a.Ed});var a=n(42746);n(704037),n(805014),n(245954),n(683502),n(498098)},704037:(e,r,n)=>{n.d(r,{KY:()=>d,Pm:()=>g,c1:()=>l,h:()=>c,iz:()=>m,jd:()=>u,qK:()=>_,rt:()=>h,s$:()=>f,v6:()=>p});var a=n(846288),i=n(683502),o=n(164559),s=n(498098);function l(e){let r=e.slice(1).join(o.rR);if("transparent"===r)return[];let n=r.split("/"),a=n[0],l=n[1]??"",c=i.Fy[a]??(0,o.G2)(a);if(!c||!c.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!l||!i.KF[l])return c;let d=(0,s.QW)(c);return d&&i.KF[l]&&(d.a=i.KF[l]??1),d}function c(e){return i.UF[e]||`[${e.toFixed(0)}px]`}function d(e){return i._L[e]||`[${e.toFixed(0)}px]`}function u(e){return i.hN[e]||`[${e.toFixed(0)}]`}function m(e){let r=e.toLowerCase(),n=i.c[r];if(n)return n;if(/^#[0-9A-Fa-f]{3}$/.test(r)){let e="#"+r.slice(1).split("").map(e=>e+e).join(""),n=i.c[e];if(n)return n}return`[${r}]`}function p(e,r){let n=i.uZ[e];return!r?.alwaysUsePreciseValues&&e>=999?"-full":"string"==typeof n?n?`-${n}`:"":`-[${e.toFixed(0)}px]`}function h(e,r){switch(r){case"PIXELS":{let r=i.dP[e];if(r)return r;return`[${e.toFixed(0)}px]`}case"PERCENT":for(let[r,n]of Object.entries(i.u0))if(Math.round(100*n)===Math.round(e))return r;return`[${e.toFixed(0)}%]`;default:(0,a.xb)(r)}}function _(e){let r=parseFloat(e.toFixed(2)).toString();return["0","2","4","8"].includes(r)?`${r}`:`[${r}px]`}function g(e){let r=parseFloat(e.toFixed(2));return i.dJ[r]||`[${r.toString()}]`}function f(e,r){return r<0?`-${e}-${c(-r)}`:`${e}-${c(r)}`}},164559:(e,r,n)=>{n.d(r,{G2:()=>l,Hc:()=>o,kX:()=>s,mu:()=>u,rR:()=>d});var a=n(897459);let i=/^\[(?:([a-z-]+):)?(.+)\]$/i;function o(e,r=0){let n=i.exec(e);if(n&&n[2].endsWith("px")){let e=n[2].slice(0,n[2].length-2);if(r>0){let r=Number(e);return isNaN(r)?null:Number(r.toFixed(2))}return a.y$.isInteger(e)?Number(e):null}return null}function s(e){let r=i.exec(e);if(r&&r[2].endsWith("%")){let e=r[2].slice(0,r[2].length-1);return a.y$.isInteger(e)?Number(e):null}return null}function l(e){let r=i.exec(e);return r&&r[2].startsWith("#")?r[2]:null}let c=/\s+/,d="-";function u(e){let r=(0,a.QP)(e),n=r.includes("flex-col")?"vertical":"horizontal";return r.split(c).map(e=>({...function(e){let r=!1,n=e.split(d);return""===n[0]&&1!==n.length&&(r=!0,n.shift()),{classParts:n,isNegative:r,className:e}}(e),flexDirection:n}))}},177283:(e,r,n)=>{n.d(r,{J3:()=>a.J3});var a=n(863410);n(796517),n(473407)},498098:(e,r,n)=>{n.d(r,{QW:()=>i,si:()=>c});var a=n(104180);function i(e){if(!e)return null;e=e.replace(/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,(e,r,n,a,i)=>"#"+r+r+n+n+a+a+(i?i+i:""));let r=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);return r?{r:parseInt(r[1],16)/255,g:parseInt(r[2],16)/255,b:parseInt(r[3],16)/255,a:void 0===r[4]?1:parseInt(r[4],16)/255}:null}a.z.object({r:a.z.number().min(0).max(1),g:a.z.number().min(0).max(1),b:a.z.number().min(0).max(1),a:a.z.number().min(0).max(1)}).describe("@name(RGBA)");let o=e=>("00"+Math.round(255*e).toString(16).toUpperCase()).substr(-2),s=e=>`${o(e.r)}${o(e.g)}${o(e.b)}`,l=(e,r=1)=>`${o(e.r)}${o(e.g)}${o(e.b)}${o(e.a*r)}`;function c(e,r=1){if(1===e.a&&1===r){let r=s(e);return r[0]===r[1]&&r[2]===r[3]&&r[4]===r[5]?`#${r[0]}${r[2]}${r[4]}`:`#${r}`}{let n=l(e,r);return n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&n[6]===n[7]?`#${n[0]}${n[2]}${n[4]}${n[6]}`:`#${n}`}}},28160:(e,r,n)=>{n.d(r,{$V:()=>function e(r,n){return!h(r.parentNode)&&(r.parentNode===n||e(r.parentNode,n))},CB:()=>h,FI:()=>p,FZ:()=>a,Fo:()=>v,Id:()=>k,JE:()=>w,N6:()=>S,OS:()=>F,Og:()=>N,Sh:()=>_,Si:()=>b,TA:()=>L,VL:()=>g,Z:()=>G,fN:()=>function e(r){if(!x(r)||(0,s.P)(r)||(0,l._)(r)||h(r.parentNode)||r.w>=128||r.h>=128||r.w<.01||r.h<.01||r.w/r.h>2||r.h/r.w>2)return!1;if(A(r)&&r.children){let n=!0;for(let a of r.children)if("GROUP"===a.type){if(!e(a)){n=!1;break}}else if(!C(a)&&!M(a)){n=!1;break}return n}return!1},fY:()=>function e(r){if(h(r.parentNode))return!1;let n=k(r);if(r.w>=n.w||r.h>=n.h/2||r.w<.01||r.h<.01)return!1;if(A(r)&&r.children){if(1===r.children.length){let n=r.children[0];if(!1===n.visible)return!1;if("TEXT"===n.type||"FRAME"===n.type&&n.children&&1===n.children.length&&e(n.children[0]))return!0}if(r.children.length>1&&r.children.length<5){for(let n of r.children)if(!1!==n.visible&&("TEXT"!==n.type&&"GROUP"!==n.type&&"RECTANGLE"!==n.type&&"ROUNDED_RECTANGLE"!==n.type&&!F(n)||"GROUP"===n.type&&!e(n)))return!1;let n=!0;for(let e of r.children)if(!F(e)){n=!1;break}return!n}}return!1},hb:()=>E,j0:()=>O,nP:()=>P,nf:()=>x,rm:()=>B,rq:()=>V,u_:()=>A,ul:()=>f,yM:()=>function e(r,n){if(r.children)for(let a of r.children)e(a,n);n(r)},yV:()=>R});var a,i=n(367713),o=n(564892),s=n(538338),l=n(33448);function c(e,r,n,a,i,o,s){try{var l=e[o](s),c=l.value}catch(e){n(e);return}l.done?r(c):Promise.resolve(c).then(a,i)}function d(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(r){d(e,r,n[r])})}return e}function m(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n.push.apply(n,a)}return n})(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}),e}class p extends Error{toString(){return"Error: Found loose node on page"}constructor(e){super(),d(this,"looseNodeInfo",void 0),this.name="FoundLooseNodeOnPageError",this.looseNodeInfo=e}}function h(e){return"CANVAS"===e.type}function _(e,r){for(let n of r.children){let r=g(e,n);if(r)return r}return null}function g(e,r){if(r.id===e)return r;if(!r.children)return null;for(let n of r.children){let r=g(e,n);if(r)return r}return null}function f(e,r){let n=[e];for(;n.length>0;){let e=n.pop();r(e),e.children&&n.push(...e.children)}}function E(e,r){return y.apply(this,arguments)}function y(){var e;return e=function*(e,r){let n=[e];for(;n.length>0;){let e=n.pop();yield r(e),e.children&&n.push(...e.children)}},(y=function(){var r=this,n=arguments;return new Promise(function(a,i){var o=e.apply(r,n);function s(e){c(o,a,i,s,l,"next",e)}function l(e){c(o,a,i,s,l,"throw",e)}s(void 0)})}).apply(this,arguments)}function b(e,r){if(h(e.parentNode))return;let n=e.parentNode;for(;n&&"CANVAS"!==n.type&&!("BREAK"===r(n)||h(n.parentNode));)n="parentNode"in n?n.parentNode:void 0}function v(e,r,{includeSelf:n}={includeSelf:!0}){let a=[];return f(e,i=>{r(i)&&(n||i!==e)&&a.push(i)}),a}function T(e){var r;return m(u({},e),{children:null===(r=e.children)||void 0===r?void 0:r.map(T)})}function I(e,r,n){if(e.id===r)return{parent:n,node:e};if(e.children)for(let n of e.children){let a=I(n,r,e);if(a)return a}return null}function S(e,r){let{parent:n,node:a}=I(e,r)||{};for(;n&&"CANVAS"!==n.type&&"SECTION"!==n.type;){var i,o;a=n,n=null===(i=I(e,null!==(o=n.id)&&void 0!==o?o:""))||void 0===i?void 0:i.parent}return null!=a?a:e}function w(e){return"FRAME"===e.type||"INSTANCE"===e.type||"SYMBOL"===e.type}function A(e){var r;return["GROUP","BOOLEAN_OPERATION"].includes(null!==(r=e.type)&&void 0!==r?r:"")||w(e)}function C(e){var r;return["VECTOR","BOOLEAN_OPERATION","ELLIPSE","STAR","REGULAR_POLYGON","RECTANGLE","ROUNDED_RECTANGLE","LINE"].includes(null!==(r=e.type)&&void 0!==r?r:"")}function N(e){return["CANVAS","SECTION"].includes(e.type)}function L(e){var r,n;return"FRAME"===e.type&&((null===(r=e.parentNode)||void 0===r?void 0:r.type)==="CANVAS"||(null===(n=e.parentNode)||void 0===n?void 0:n.type)==="SECTION")}function O(e){if(A(e)&&e.children&&e.children.length>0){let r=!0;for(let n of e.children)if(!("VECTOR"===n.type&&(0,i.bB)(n.name))){r=!1;break}if(r)return!0}return!1}function R(e,r){var n;let a=(null!==(n=e.parentNode.children)&&void 0!==n?n:[]).filter(r=>r!==e),i=[];for(let n of a){if(n===e)continue;let a={x:n.x,y:n.y,width:n.w,height:n.h},s={x:e.x,y:e.y,width:e.w,height:e.h};r?(0,o.oP)(s,a)&&i.push(n):(0,o.oP)(a,s)&&i.push(n)}return i}function P(e){return w(e)&&N(e.parentNode)}!function(e){e.CONTINUE="CONTINUE",e.BREAK="BREAK"}(a||(a={}));let D=["CANVAS","SECTION","SLIDE_ROW"];function k(e){if(D.includes(e.parentNode.type)&&P(e))return e;if(h(e.parentNode))throw new p(e);return k(e.parentNode)}function M(e){return"TEXT"===e.type&&!!e.characters&&Number.isInteger(parseInt(e.characters))}function F(e){if(h(e.parentNode))return!1;let r=k(e);if(e.w>=r.w||e.h>=r.h||e.w<.01||e.h<.01)return!1;if(C(e)||M(e))return!0;if(A(e)&&e.children){let r=!0;for(let n of e.children)if("GROUP"===n.type){if(!F(n)){r=!1;break}}else if(!C(n)&&!M(n)){r=!1;break}return r}return!1}function x(e){let r=!0;return e.visible||void 0===e.visible||(r=!1),b(e,e=>e.visible||void 0===e.visible?"CONTINUE":(r=!1,"BREAK")),r}function U(e){return e.localID<0||e.sessionID<0?null:`${e.sessionID}:${e.localID}`}function B(e,r){var n;let a=[],i=null===(n=e.interactions)||void 0===n?void 0:n.flatMap(n=>{let i;if(!e.id||!n)return[];let o=function(e,r){var n;if(e.isDeleted)return null;let a=null===(n=e.actions)||void 0===n?void 0:n.find(e=>"BACK"===e.connectionType||"CLOSE"===e.connectionType||"INTERNAL_NODE"===e.connectionType&&e.transitionNodeID&&("NAVIGATE"===e.navigationType||"OVERLAY"===e.navigationType));if(!a)return null;let i=null,o=a.connectionType,s=a.navigationType;if("BACK"===o||"CLOSE"===o)i={buttonID:r,navigationType:o,destinationScreenID:null,score:0,rationale:""};else if("INTERNAL_NODE"===o&&("NAVIGATE"===s||"OVERLAY"===s)&&a.transitionNodeID){let e=U(a.transitionNodeID);if(!e)return null;i={buttonID:r,navigationType:({NAVIGATE:"NAVIGATE",OVERLAY:"OPEN_POPUP"})[s],destinationScreenID:e,score:10,rationale:"existing interaction"}}return i}(n,e.id);if(!o)return[];let s=r?r.get(o.buttonID):o.buttonID;if(!s)return[];if(n.id&&(i=U(n.id)),!o.destinationScreenID)return i&&a.push(i),[{buttonID:s,navigationType:o.navigationType,destinationScreenID:null,score:10,rationale:""}];{let e=r?r.get(o.destinationScreenID):o.destinationScreenID;return e?(i&&a.push(i),[{buttonID:s,navigationType:o.navigationType,destinationScreenID:e,score:10,rationale:"existing interaction"}]):[]}});return{interactionMappings:null!=i?i:[],interactionIds:a}}function V(e){let r=e.children.map(e=>(function e(r){var n;let{parentNode:a}=r,i=function(e,r){if(null==e)return{};var n,a,i=function(e,r){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,["parentNode"]);return i.children=null===(n=r.children)||void 0===n?void 0:n.map(e),i})(e));r.forEach(e=>{f(e,e=>{if(e.children)for(let r of e.children)r.parentNode=e})});let n=m(u({},e),{children:r});return n.children.forEach(e=>{e.parentNode=n}),n}function G(e,r){let n=null!=e?e:0,a=null!=r?r:0;return 0===n?0:0===a?null:n/a}},878001:(e,r,n)=>{n.d(r,{__:()=>m}),n(48451);n(512671),n(563988);var a=n(897459),i=n(539818),o=n(788107);function s(...e){return(0,a.QP)(e.join(" "))}function l({type:e,props:r,children:n}){let a=[],{description:i,w:l,aspect:c,className:d,sharedPluginData:u}=r,m=36;if("string"==typeof l){let e=(0,o.qM)("w",l);e&&a.push(e),l in o.tr&&(m=o.tr[l])}else"number"==typeof l&&(m=l,a.push((0,o.vE)("w",l)));return"video"===c?a.push((0,o.vE)("h",9*m/16)):a.push((0,o.vE)("h",m)),{type:e,props:{name:i??"Image description",sharedPluginData:{...u??{},isImage:"true",description:i},className:s("flex p-2 bg-[#eee]",...a,d??"")},children:n??[]}}function c({type:e,props:r,children:n}){let{name:a,className:i}=r,l="string"==typeof i?i:"",c={className:s(o.Wo,(0,o.xe)(l),l)};return a&&"string"==typeof a&&(c.name=a),{type:e,props:c,children:n}}function d({type:e,props:r}){let{className:n,msg:a}=r;return{type:e,props:{className:s("flex justify-center items-center",("string"==typeof n?n:"")??"","border bg-red-100 border-red-100")},children:[{type:"Text",props:{},children:[a]}]}}i.Xo,i.Ls,i.W7,i.jJ,i.wv,i._A,i.Fj,i.O5,n(274614);var u=n(245954);function m({rootNodes:{includeSelection:e,dsKitKey:r,pageChildrenName:n,useAllPages:a}={}}){let i=[],o=(0,u.UN)();if(r?.type==="1P_LIBRARY"||r?.type==="USER_LIBRARY"){let e=o.getInternalCanvas();e&&i.push(e)}if(a){let e=o.getInternalCanvas();o.getRoot().childrenNodes.forEach(r=>{"CANVAS"===r.type&&r.guid!==e?.guid&&i.push(r)})}else{let e=o.getCurrentPage(),n=r?.type==="LOCAL"&&r.pageId?o.get(r.pageId):e;n&&i.push(n)}if(0===i.length||i.some(e=>!e||"CANVAS"!==e.type))return[];let s=[];for(let r of i)if(r){if(e&&s.push(...r.directlySelectedNodes),n)for(let e of r.reversedChildrenNodes){var l,c;l=e.name,c=n,(l=l.replace(/[^0-9a-z]/gi,"").toLowerCase())===(c=c.replace(/[^0-9a-z]/gi,"").toLowerCase())&&s.push(e)}else s.push(r)}return s}n(724086),n(701753);var p=n(104180);p.z.object({runtimeDuration:p.z.number(),firstByteReceivedAtOffset:p.z.number(),jsxStreamDuration:p.z.number(),numComponents:p.z.number(),componentLookupSuccesses:p.z.number(),primitiveComponents:p.z.number(),componentLookupFailures:p.z.number(),numImages:p.z.number(),imageFailures:p.z.number(),imageSuccesses:p.z.number(),imageBlocked:p.z.number(),firstImageLoadedAtOffset:p.z.number(),lastStreamByteReceivedAtOffset:p.z.number(),imageDurations:p.z.array(p.z.object({start:p.z.number(),end:p.z.number(),duration:p.z.number(),status:p.z.enum(["success","failure","blocked"])}))})},834825:(e,r,n)=>{n.d(r,{AM:()=>p,Af:()=>L,Bq:()=>function e(r,n=[]){for(let a=0;a<r.length;a++){let i=r[a];Array.isArray(i)?e(i,n):n.push(i)}return n},Ef:()=>u,GK:()=>E,Jk:()=>c,KQ:()=>g,Kg:()=>l,LN:()=>b,M0:()=>I,N9:()=>s,RP:()=>N,TR:()=>C,Ul:()=>v,Vs:()=>A,WI:()=>T,_j:()=>o,g6:()=>O,hR:()=>h,k4:()=>m,lX:()=>R,lq:()=>S,lu:()=>d,my:()=>y,qg:()=>w,v7:()=>f});var a=n(236891),i=n(588172);function o(e){return Array.isArray(e)?e:[e]}function s(e,r){-1===e.indexOf(r)&&e.push(r)}function l(e,r){-1===e.indexOf(r)&&e.unshift(r)}function c(e,r){let n=e.indexOf(r);-1!==n&&e.splice(n,1)}function d(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}function u(e){for(let r=1;r<e.length;r++)if(void 0===e[r]||e[r]!==e[r-1])return!1;return!0}function m(e,r){let n,a,i=e.length;for(;0!==i;)a=Math.floor((r?function(e=Date.now()){return(9301*e+49297)%233280/233280}(r):Math.random())*i),i-=1,n=e[i],e[i]=e[a],e[a]=n;return e}function p(e,r,n=!1){return h(e,e=>e[r],n)}function h(e,r,n=!1,a,i=!1){e.sort((e,o)=>{if(r(e)===r(o)&&a){let r=i?-1:1;return a(e)<a(o)?-r:r}let s=n?-1:1;return r(e)<r(o)?-s:s})}let _=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});function g(e,r,n={}){f(e,e=>e[r],n)}function f(e,r,n={},a){let i=e=>{let n=r(e);return n&&n.toLowerCase?n.toLowerCase():""},o=e=>{if(!a)return"";let r=a(e);return r&&r.toLowerCase?r.toLowerCase():""},s=n.isDescending?-1:1;n.useExpensiveNaturalComparison?e.sort((e,r)=>_.compare(i(e),i(r))*s):e.sort((e,r)=>{if(i(e)===i(r)&&a){let a=n.isSecondaryDescending?-1:1;return o(e)<o(r)?-a:a}return i(e)<i(r)?-s:s})}function E(e,r,n=!1){return e.sort((e,a)=>{let i=new Date(r(e)).getTime()<new Date(r(a)).getTime()?1:-1;return n?-i:i})}function y(e,r,n=!1){return E(e,e=>e[r],n)}function b(e){return E(e,e=>e.created_at)}function v(e,...r){return e.sort((e,n)=>{for(let a of r){let r=a(e,n);if(0!==r)return r}return 0})}function T(e){return e.filter(a.Vq)}function I(e,r,n=a.Vq){for(let a=r+1;a<e.length;a++){let r=e[a];if(n(r,a))return r}}function S(e,r,n=a.Vq){for(let a=r-1;a>=0;a--){let r=e[a];if(n(r,a))return r}}function w(e,r,n="left",o=a.Vq){r=(0,i.qE)(r,0,e.length-1);for(let a=0;r-a>=0||r+a<e.length;a++){let[i,s]="left"===n?[r-a,r+a]:[r+a,r-a];if(i>=0&&i<e.length){let r=e[i];if(o(r,i))return r}if(s>=0&&s<e.length){let r=e[s];if(o(r,s))return r}}}function A(e){let r=[...e],n=(0,a.sR)(r.pop(),"input must be non-empty");return[r,n]}function C(e,r,n=String){let a={};r.forEach((e,r)=>{a[n(e)]=r});let i=0,o=0,s=[];for(;;){let l=e[i],c=r[o];if(void 0===l||void 0===c){if(void 0===l&&void 0===c)return s;void 0!==l&&void 0===c?(s.push({hasBoth:!1,left:l,right:void 0}),i++):void 0===l&&void 0!==c&&(s.push({hasBoth:!1,left:void 0,right:c}),o++)}else{let e=a[n(l)];void 0===e||e<o?(s.push({hasBoth:!1,left:l,right:void 0}),i++):(e===o?(s.push({hasBoth:!0,left:l,right:c}),i++):s.push({hasBoth:!1,left:void 0,right:c}),o++)}}}function N(e,r){let n=[];for(let a of e){let e=r(a);null!=e&&n.push(e)}return n}function L(e,r){for(let n of e){let e=r(n);if(null!=e)return e}}function O(e,r){return e.includes(r)?e.filter(e=>e!==r):e.concat(r)}async function R(e,r){let n=e.map(r);return await Promise.all(n)}},588172:(e,r,n)=>{function a(e,r,n){return Math.min(Math.max(e,r),n)}function i(e,r,n){return e=null==r?e:Math.max(e,r),null==n?e:Math.min(e,n)}function o(e,r){if(e===r)return e;if(e>r)throw Error("random: start must be larger than end");return Math.random()*(r-e+1)+e}function s(e,r,n){let a=null!=r,i=a?r:e,o=a?e:0;n=null==n?Math.sign(i-o):n;let{result:s}=Array.from({length:Math.abs((i-o)/(n||1))}).reduce(({result:e,current:r})=>({result:[...e,r],current:r+n}),{current:o,result:[]});return s}function l(e,r){let n=[];for(let a=0;a<e;++a)n.push(r(a));return n}function c(e,r,n=1e-6){return Math.abs(e-r)<n}function d(e,r){return(e%r+r)%r}function u(e,r){return Math.round(e/r)*r}function m(e,r,n,a){let i;if(1e-8>Math.abs(e)){if(e=r,r=n,n=a,1e-8>Math.abs(e))return(e=r,r=n,1e-8>Math.abs(e))?[]:[-r/e];let i=r*r-4*e*n;return 1e-8>Math.abs(i)?[-r/(2*e)]:i>0?[(-r+Math.sqrt(i))/(2*e),(-r-Math.sqrt(i))/(2*e)]:[]}let o=(3*e*n-r*r)/(3*e*e),s=(2*r*r*r-9*e*r*n+27*e*e*a)/(27*e*e*e);if(1e-8>Math.abs(o))i=[Math.cbrt(-s)];else if(1e-8>Math.abs(s))i=[0].concat(o<0?[Math.sqrt(-o),-Math.sqrt(-o)]:[]);else{let e=s*s/4+o*o*o/27;if(1e-8>Math.abs(e))i=[-1.5*s/o,3*s/o];else if(e>0){let r=Math.cbrt(-s/2-Math.sqrt(e));i=[r-o/(3*r)]}else{let e=2*Math.sqrt(-o/3),r=Math.acos(3*s/o/e)/3,n=2*Math.PI/3;i=[e*Math.cos(r),e*Math.cos(r-n),e*Math.cos(r-2*n)]}}for(let n=0;n<i.length;n++)i[n]-=r/(3*e);return i}n.d(r,{Ae:()=>m,KY:()=>i,M9:()=>l,YE:()=>u,_g:()=>d,qE:()=>a,xN:()=>c,y1:()=>s,yT:()=>o})},236891:(e,r,n)=>{function a(e){return null==e}function i(e){return!a(e)}function o(e,r){if(a(e))throw Error(r??"Expected value not to be nullish");return e}n.d(r,{Vq:()=>i,sR:()=>o,uy:()=>a})},650437:(e,r,n)=>{function a(e){for(let r in e)return!1;return!0}function i(e){for(let r in e)return r;return null}function o(e,r){let n={...e};for(let[e,a]of Object.entries(r))null!=a&&(n[e]=a);return n}function s(e,r){let n={};for(let[a,i]of Object.entries(e).sort(r))n[a]=i;return n}n.d(r,{Bq:()=>function e(r,n=""){return Object.fromEntries(Object.entries(r).flatMap(([r,a])=>{let i=""===n?r:`${n}.${r}`;return a&&"object"==typeof a?Object.entries(e(a,i)):[[i,a]]}))},Dy:()=>function e(r,n,a){for(let i in r){let o=""===a?i:a+"."+i;Array.isArray(r[i])?n[o]=JSON.stringify(r[i]):"object"==typeof r[i]&&null!==r[i]?e(r[i],n,o):n[o]=r[i]}},Im:()=>a,b$:()=>o,mf:()=>s,o:()=>i})},488336:(e,r,n)=>{function a(e){return new Promise(r=>{let n=Array(e.length),a=e.length,i=()=>{0===a&&r(n)};for(let r=0;r<e.length;r++)e[r].then(e=>{n[r]={type:"resolve",resolve:e,reject:void 0},a--,i()},e=>{n[r]={type:"reject",resolve:void 0,reject:e},a--,i()});i()})}function i(e,r){return new Promise(n=>{let a=0,i=e.length,o=()=>{0===i&&n(s)},s=Array(e.length),l=r=>{let n=e[r];return void 0!==n&&(n().then(e=>{s[r]={type:"resolve",resolve:e,reject:void 0},i--,c(),o()},e=>{s[r]={type:"reject",resolve:void 0,reject:e},i--,c(),o()}),!0)},c=()=>{let e=l(a);return a++,e};for(let e=0;e<r&&c();e++);o()})}function o(e){let r=null;return()=>(null===r&&(r=e()).catch(()=>r=null),r)}n.d(r,{Ed:()=>i,Kt:()=>o,_7:()=>a})},552371:(e,r,n)=>{function a(e){return"object"==typeof e&&null!==e}function i(e){return"number"==typeof e}n.d(r,{Et:()=>i,UU:()=>a})}}]);

//# debugId=445b7b6c-9854-5e86-a4ac-6bf6fc74338f

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b3eb3d556f5eb14dce22c6418525da94cca2e107/5439-317316b228668995.min.js.map